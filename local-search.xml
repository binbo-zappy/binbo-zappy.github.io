<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>17. ç³»ç»Ÿç›‘æµ‹å·¥å…·</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/17-%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%B5%8B%E5%B7%A5%E5%85%B7/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/17-%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%B5%8B%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. æœåŠ¡å™¨è°ƒåˆ¶ã€è°ƒè¯•å’Œæµ‹è¯•</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/16-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B0%83%E5%88%B6%E8%B0%83%E8%AF%95%E5%92%8C%E6%B5%8B%E8%AF%95/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/16-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B0%83%E5%88%B6%E8%B0%83%E8%AF%95%E5%92%8C%E6%B5%8B%E8%AF%95/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. è¿›ç¨‹æ± å’Œçº¿ç¨‹æ± </title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/15-%E8%BF%9B%E7%A8%8B%E6%B1%A0%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/15-%E8%BF%9B%E7%A8%8B%E6%B1%A0%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. å¤šçº¿ç¨‹ç¼–ç¨‹</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/14-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/14-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. å¤šè¿›ç¨‹ç¼–ç¨‹</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/13-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%BC%96%E7%A8%8B/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/13-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. é«˜æ€§èƒ½I/Oæ¡†æ¶åº“Libevent</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/12-%E9%AB%98%E6%80%A7%E8%83%BDIO%E6%A1%86%E6%9E%B6%E5%BA%93Libevent/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/12-%E9%AB%98%E6%80%A7%E8%83%BDIO%E6%A1%86%E6%9E%B6%E5%BA%93Libevent/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. å®šæ—¶å™¨</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/11-%E5%AE%9A%E6%97%B6%E5%99%A8/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/11-%E5%AE%9A%E6%97%B6%E5%99%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. ä¿¡å·</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/10-%E4%BF%A1%E5%8F%B7/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/10-%E4%BF%A1%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. I/Oå¤ç”¨</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/9-IO%E5%A4%8D%E7%94%A8/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/9-IO%E5%A4%8D%E7%94%A8/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. é«˜æ€§èƒ½æœåŠ¡å™¨ç¨‹åºæ¡†æ¶</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/8-%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/8-%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. LinuxæœåŠ¡å™¨ç¨‹åºè§„èŒƒ</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/7-Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A8%8B%E5%BA%8F%E8%A7%84%E8%8C%83/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/7-Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A8%8B%E5%BA%8F%E8%A7%84%E8%8C%83/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. é«˜çº§I/Oå‡½æ•°</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/6-%E9%AB%98%E7%BA%A7IO%E5%87%BD%E6%95%B0/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/6-%E9%AB%98%E7%BA%A7IO%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. Linuxç½‘ç»œç¼–ç¨‹åŸºç¡€API</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/5-Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80API/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/5-Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80API/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. TCP/IPé€šä¿¡æ¡ˆä¾‹ï¼šè®¿é—®Internetä¸Šçš„WebæœåŠ¡å™¨</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/4-TCP-IP%E9%80%9A%E4%BF%A1%E6%A1%88%E4%BE%8B/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/4-TCP-IP%E9%80%9A%E4%BF%A1%E6%A1%88%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. TCPåè®®è¯¦è§£</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/3-TCP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/3-TCP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. IPåè®®è¯¦è§£</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/2-IP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/2-IP%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. TCP/IPåè®®æ—</title>
    <link href="/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/1-TCP-IP%E5%8D%8F%E8%AE%AE%E6%97%8F/"/>
    <url>/2024/12/16/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B-%E6%B8%B8%E5%8F%8C/1-TCP-IP%E5%8D%8F%E8%AE%AE%E6%97%8F/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>Linuxé«˜æ€§èƒ½æœåŠ¡å™¨-æ¸¸åŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç½‘ç»œç¼–ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2024/12/16/hexo/git/"/>
    <url>/2024/12/16/hexo/git/</url>
    
    <content type="html"><![CDATA[<h1 id="git-å®‰è£…">1. git å®‰è£…</h1><ol type="1"><li>æŸ¥çœ‹gitç‰ˆæœ¬</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git --version<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>é…ç½®</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git config --global user.name <span class="hljs-string">&quot;bobo&quot;</span><br></code></pre></td></tr></table></figure><ul><li>çœç•¥(Local)ï¼šæœ¬åœ°é…ç½®ï¼Œåªå¯¹æœ¬åœ°ä»“åº“æœ‰æ•ˆ</li><li>globalï¼šå…¨å±€é…ç½®ï¼Œæ‰€æœ‰ä»“åº“ç”Ÿæ•ˆ</li><li>systemï¼šç³»ç»Ÿé…ç½®ï¼Œå¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆ</li></ul><h1 id="åˆ›å»ºä»“åº“">2. åˆ›å»ºä»“åº“</h1><p>ä¸¤ç§æ–¹å¼</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">git init<br>git init my-repo<br><br>git <span class="hljs-built_in">clone</span> gitåœ°å€<br></code></pre></td></tr></table></figure><h1 id="å·¥ä½œåŒºåŸŸå’Œæ–‡ä»¶çŠ¶æ€">3. å·¥ä½œåŒºåŸŸå’Œæ–‡ä»¶çŠ¶æ€</h1><ul><li><p>å·¥ä½œåŒº</p></li><li><p>æš‚å­˜åŒº</p></li><li><p>æœ¬åœ°ä»“åº“</p></li><li><p>æœªè·Ÿè¸ª Untrack</p></li><li><p>æœªä¿®æ”¹ Unmodified</p></li><li><p>å·²ä¿®æ”¹ Modified</p></li><li><p>å·²æš‚å­˜ Staged</p></li></ul><p><code>git ls-files</code></p><ul><li>è¿™ä¸ªå‘½ä»¤ç”¨äºåˆ—å‡ºå½“å‰ Git ä»“åº“ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚</li><li>å®ƒå¯ä»¥å¸¦æœ‰ä¸åŒçš„é€‰é¡¹æ¥æ˜¾ç¤ºä¸åŒçš„æ–‡ä»¶åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š<ul><li><code>git ls-files</code>ï¼šåˆ—å‡ºæ‰€æœ‰è¢«è·Ÿè¸ªçš„æ–‡ä»¶ã€‚</li><li><code>git ls-files --others</code>ï¼šåˆ—å‡ºæ‰€æœ‰æœªè¢«è·Ÿè¸ªçš„æ–‡ä»¶ã€‚</li><li><code>git ls-files --modified</code>ï¼šåˆ—å‡ºæ‰€æœ‰è¢«ä¿®æ”¹ä½†å°šæœªæš‚å­˜çš„æ–‡ä»¶ã€‚</li><li><code>git ls-files --deleted</code>ï¼šåˆ—å‡ºæ‰€æœ‰è¢«åˆ é™¤ä½†å°šæœªæäº¤çš„æ–‡ä»¶ã€‚</li></ul></li><li>è¿™ä¸ªå‘½ä»¤é€šå¸¸ç”¨äºæŸ¥çœ‹å½“å‰å·¥ä½œç›®å½•ä¸­å“ªäº›æ–‡ä»¶è¢« Git è·Ÿè¸ªã€‚</li></ul><p><code>git reflog</code></p><ul><li>è¿™ä¸ªå‘½ä»¤ç”¨äºæ˜¾ç¤ºä½ çš„ HEADï¼ˆå½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤ï¼‰çš„å˜åŒ–å†å²ã€‚</li><li><code>reflog</code> è®°å½•äº† HEADçš„ç§»åŠ¨ï¼ŒåŒ…æ‹¬æäº¤ã€åˆ†æ”¯åˆ‡æ¢ã€å˜åŸºç­‰æ“ä½œã€‚</li><li>å®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·è¿½è¸ª HEADçš„å†å²ï¼Œå³ä½¿æŸäº›æäº¤å·²ç»è¢«å˜åŸºæˆ–åˆå¹¶æ“ä½œä¿®æ”¹è¿‡ã€‚</li><li>è¾“å‡ºé€šå¸¸åŒ…æ‹¬æ“ä½œçš„å“ˆå¸Œå€¼ã€ä½œè€…ã€æ—¥æœŸå’Œæ“ä½œçš„ç®€çŸ­æè¿°ã€‚</li><li>è¿™ä¸ªå‘½ä»¤å¯¹äºè°ƒè¯•ã€æ¢å¤ä¸¢å¤±çš„æäº¤æˆ–è€…ç†è§£ HEADçš„å†å²å˜åŒ–éå¸¸æœ‰ç”¨ã€‚</li></ul><h1 id="æ·»åŠ å’Œæäº¤æ–‡ä»¶">4. æ·»åŠ å’Œæäº¤æ–‡ä»¶</h1><ul><li>æŸ¥çœ‹ä»“åº“çš„çŠ¶æ€<ul><li>git status</li></ul></li></ul><p><img src="/2024/12/16/hexo/git/image-20241216184455843.png"></p><ul><li>æ·»åŠ åˆ°æš‚å­˜åŒº<ul><li>git add</li><li>git add . æäº¤æœ¬ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶</li></ul></li></ul><p><img src="/2024/12/16/hexo/git/image-20241216184547985.png"></p><ul><li>æäº¤<ul><li>git commit</li></ul></li></ul><p><img src="/2024/12/16/hexo/git/image-20241216184713143.png"></p><ul><li>æŸ¥çœ‹æäº¤è®°å½•<ul><li>git log --oneline</li><li>git log</li></ul></li></ul><p><img src="/2024/12/16/hexo/git/image-20241216184950653.png"></p><p>ä¸€æ¬¡æ€§æ·»åŠ æš‚å­˜å’Œæäº¤ï¼Œ-a</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git commit -a -m <span class="hljs-string">&#x27;feat:1&#x27;</span><br></code></pre></td></tr></table></figure><h1 id="å›é€€ç‰ˆæœ¬">5. å›é€€ç‰ˆæœ¬</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">git reset --soft<br>git reset --hard<br>git reset --mixed<br></code></pre></td></tr></table></figure><p>Softå‚æ•°è¡¨ç¤ºå›é€€åˆ°æŸä¸€ä¸ªç‰ˆæœ¬,å¹¶ä¸”ä¿ç•™å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹å†…å®¹</p><p>hardå‚æ•°è¡¨ç¤ºå›é€€åˆ°æŸä¸€ä¸ªç‰ˆæœ¬,å¹¶ä¸”ä¸¢å¼ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹å†…å®¹</p><p>mixedå‚æ•°è¡¨ç¤ºå›é€€åˆ°æŸä¸€ä¸ªç‰ˆæœ¬,å¹¶ä¸”åªä¿ç•™å·¥ä½œåŒºçš„ä¿®æ”¹å†…å®¹ï¼Œè€Œä¸¢å¼ƒæš‚å­˜åŒºçš„ä¿®æ”¹å†…å®¹</p><p><img src="/2024/12/16/hexo/git/image-20241216185315632.png"></p><h1 id="æŸ¥çœ‹å·®å¼‚">6. æŸ¥çœ‹å·®å¼‚</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff <br></code></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹å·¥ä½œåŒºã€æš‚å­˜åŒºã€æœ¬åœ°ä»“åº“ä¹‹é—´çš„å·®å¼‚é»˜è®¤æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å†…å®¹</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git diff HEAD<br></code></pre></td></tr></table></figure><ul><li>æ¯”è¾ƒå·¥ä½œåŒºå’Œç‰ˆæœ¬åº“</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff --cache<br></code></pre></td></tr></table></figure><ul><li>æ¯”è¾ƒæš‚å­˜åŒºå’Œç‰ˆæœ¬åº“</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff æäº¤id1 æäº¤id2<br></code></pre></td></tr></table></figure><ul><li>æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚</li></ul><p>HEADæŒ‡å‘åˆ†æ”¯çš„æœ€æ–°æäº¤èŠ‚ç‚¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff HEAD~ HEAD<br></code></pre></td></tr></table></figure><ul><li>æœ€æ–°å’Œä¸Šä¸€ä¸ªçš„å·®å¼‚</li><li>HEAD~ è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬</li><li>HEAD^ è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬</li><li>HEAD~2 è¡¨ç¤ºHEADä¹‹å‰çš„ä¸¤ä¸ªç‰ˆæœ¬</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs BASH">git diff HEAD~ HEAD file1.txt<br></code></pre></td></tr></table></figure><ul><li>æŒ‡å®šæŸ¥çœ‹æŸä¸€ä¸ªæ–‡ä»¶çš„å·®å¼‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff &lt;branch_name1&gt; &lt;branch_name2&gt;<br></code></pre></td></tr></table></figure><ul><li>æ¯”è¾ƒåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚</li></ul><h1 id="åˆ é™¤æ–‡ä»¶">7. åˆ é™¤æ–‡ä»¶</h1><ol type="1"><li>å…ˆåˆ é™¤æœ¬åœ°å·¥ä½œåŒºæ–‡ä»¶ï¼Œå†æäº¤æš‚å­˜</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">rm</span> file1.txt<br></code></pre></td></tr></table></figure><ul><li>ä»å·¥ä½œåŒºåˆ é™¤æ–‡ä»¶</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git add .<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æš‚å­˜åŒºæ–‡ä»¶</li></ul><ol start="2" type="1"><li>git rm</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">rm</span> file2.txt<br></code></pre></td></tr></table></figure><p><img src="/2024/12/16/hexo/git/image-20241216192442243.png"></p><p>å·¥ä½œåŒºå’Œæš‚å­˜åŒºéƒ½åˆ é™¤äº†</p><h1 id="å¿½ç•¥æ–‡ä»¶">8. å¿½ç•¥æ–‡ä»¶</h1><p>åº”è¯¥å¿½ç•¥çš„æ–‡ä»¶</p><ul><li>ç³»ç»Ÿæˆ–è€…è½¯ä»¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶</li><li>ç¼–è¯‘äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶å’Œç»“æœæ–‡ä»¶</li><li>è¿è¡Œæ—¶ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€ç¼“å­˜æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶</li><li>æ¶‰åŠèº«ä»½ã€å¯†ç ã€å£ä»¤ã€ç§˜é’¥ç­‰æ•æ„Ÿä¿¡æ¯æ–‡ä»¶</li></ul><p>å°†æ–‡ä»¶åå†™å…¥.gitignoreï¼Œå³å¯å¿½ç•¥</p><p>ä¿®æ”¹.gitignoreæ–‡ä»¶ï¼Œå¿½ç•¥æ‰€æœ‰çš„logæ–‡ä»¶ï¼Œå¿½ç•¥tempæ–‡ä»¶å¤¹ï¼ˆä»¥æ–œçº¿ç»“å°¾ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gitignore">*.log<br>temp/<br></code></pre></td></tr></table></figure><ul><li>ç©ºè¡Œæˆ–è€…ä»¥#å¼€å¤´çš„è¡Œä¼šè¢«Gitå¿½ç•¥ã€‚ä¸€èˆ¬ç©ºè¡Œç”¨äºå¯è¯»æ€§çš„åˆ†éš”ï¼Œ#ä¸€èˆ¬ç”¨ä½œæ³¨é‡Š</li><li>ä½¿ç”¨æ ‡å‡†çš„Globæ¨¡å¼åŒ¹é…ï¼Œä¾‹å¦‚ï¼š<ul><li>æ˜Ÿå·*é€šé…ä»»æ„ä¸ªå­—ç¬¦</li><li>é—®å·ï¼ŸåŒ¹é…å•ä¸ªå­—ç¬¦</li><li>ä¸­æ‹¬å·[]è¡¨ç¤ºåŒ¹é…åˆ—è¡¨ä¸­çš„å•ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚ï¼š[abc]è¡¨ç¤ºab/c</li><li>ä¸¤ä¸ªæ˜Ÿå·*è¡¨ç¤ºåŒ¹é…ä»»æ„çš„ä¸­é—´ç›®å½•</li><li>ä¸­æ‹¬å·å¯ä»¥ä½¿ç”¨çŸ­ä¸­çº¿è¿æ¥ï¼Œæ¯”å¦‚ï¼š[0-9]è¡¨ç¤ºä»»æ„ä¸€ä½æ•°å­—ï¼Œ[a-z]è¡¨ç¤ºä»»æ„ä¸€ä½å°å†™å­—æ¯</li><li>æ„Ÿå¹å·ï¼è¡¨ç¤ºå–å</li></ul></li></ul><h1 id="è¿œç¨‹ä»“åº“">9. è¿œç¨‹ä»“åº“</h1><p>æœ¬åœ°ä»“åº“æ¨é€è¿œç¨‹ä»“åº“</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git push<br></code></pre></td></tr></table></figure><p>æ·»åŠ è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“å…³è”èµ·æ¥</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git remote add orgin git@github.com:xxxx/reponame.git<br>git push -u origin main<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æˆ‘ä»¬å½“å‰ä»“åº“æ‰€å¯¹åº”çš„è¿œç¨‹ä»“åº“çš„åˆ«åå’Œåœ°å€</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git remote -v<br></code></pre></td></tr></table></figure><p>æ‹‰å–è¿œç¨‹ä»“åº“ï¼Œè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡åˆå¹¶æ“ä½œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git pull<br></code></pre></td></tr></table></figure><p>fetchåªè·å–ä¿®æ”¹ï¼Œä¸ä¼šè‡ªåŠ¨åˆå¹¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git fetch<br></code></pre></td></tr></table></figure><h1 id="åˆ†æ”¯">10. åˆ†æ”¯</h1><ol type="1"><li>æŸ¥çœ‹åˆ†æ”¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>åˆ›å»ºåˆ†æ”¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch dev<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>åˆ‡æ¢åˆ†æ”¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout dev<br></code></pre></td></tr></table></figure><p>å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œæ”¹ä¸º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git switch dev<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>åœ¨mainåˆ†æ”¯ä¸‹ï¼Œåˆå¹¶dev</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git merge dev<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>æŸ¥çœ‹åˆ†æ”¯å›¾</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">log</span> --graph --oneline --decorate --all<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>åˆ é™¤å·²ç»åˆå¹¶çš„åˆ†æ”¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch -d dev<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>åˆ é™¤æ²¡æœ‰åˆå¹¶çš„åˆ†æ”¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch -D dev<br></code></pre></td></tr></table></figure><h1 id="åˆå¹¶å†²çª">11. åˆå¹¶å†²çª</h1><p>æŸ¥çœ‹å†²çªå†…å®¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git diff<br></code></pre></td></tr></table></figure><p><img src="/2024/12/16/hexo/git/image-20241216204741939.png"></p><p>ç¼–è¾‘å†²çªçš„æ–‡ä»¶ï¼Œå†æäº¤ï¼Œå°±è‡ªåŠ¨åˆå¹¶äº†ã€‚</p><p>å¦‚æœä¸æƒ³åˆå¹¶ï¼Œä½¿ç”¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git merge --abort<br></code></pre></td></tr></table></figure><h1 id="å›é€€å’Œrebase">12. å›é€€å’Œrebase</h1><p>åœ¨mainä¸Šæ‰§è¡Œ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git rebase<br></code></pre></td></tr></table></figure><p>mainåˆ†æ”¯æ¥åˆ°devåˆ†æ”¯ä¸Š</p><p>merge:</p><ul><li>ä¼˜ç‚¹ï¼šä¸ä¼šç ´ååŸåˆ†æ”¯çš„æäº¤å†å²ï¼Œæ–¹ä¾¿å›æº¯å’ŒæŸ¥çœ‹ã€‚</li><li>ç¼ºç‚¹ï¼šä¼šäº§ç”Ÿé¢å¤–çš„æäº¤èŠ‚ç‚¹ï¼Œåˆ†æ”¯å›¾æ¯”è¾ƒå¤æ‚ã€‚</li></ul><p>rebase:</p><ul><li>ä¼˜ç‚¹ï¼šä¸ä¼šæ–°å¢é¢å¤–çš„æäº¤è®°å½•ï¼Œå½¢æˆçº¿æ€§å†å²ï¼Œæ¯”è¾ƒç›´è§‚å’Œå¹²å‡€ï¼›</li><li>ç¼ºç‚¹ï¼šä¼šæ”¹å˜æäº¤å†å²ï¼Œæ”¹å˜äº†å½“å‰åˆ†æ”¯branchoutçš„èŠ‚ç‚¹ã€‚é¿å…åœ¨å…±äº«åˆ†æ”¯ä½¿ç”¨ã€‚</li></ul><figure><img src="/2024/12/16/hexo/git/image-20241216210154959.png" alt="github flow"><figcaption aria-hidden="true">github flow</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. æ¢ç´¢ä¸åˆ©ç”¨</title>
    <link href="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/"/>
    <url>/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¢ç´¢ä¸åˆ©ç”¨">1. æ¢ç´¢ä¸åˆ©ç”¨</h1><h2 id="åºåˆ—å†³ç­–ä»»åŠ¡ä¸­çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜">1.1åºåˆ—å†³ç­–ä»»åŠ¡ä¸­çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜</h2><p>åŸºäºç›®å‰ç­–ç•¥è·å–å·²çŸ¥æœ€ä¼˜æ”¶ç›Šè¿˜æ˜¯å°è¯•ä¸åŒçš„å†³ç­–ï¼š</p><ul><li>Exploitation æ‰§è¡Œèƒ½å¤Ÿè·å¾—å·²çŸ¥æœ€ä¼˜æ”¶ç›Šçš„å†³ç­–</li><li>Exploration å°è¯•æ›´å¤šå¯èƒ½çš„å†³ç­–ï¼Œä¸ä¸€å®šä¼šæ˜¯æœ€ä¼˜æ”¶ç›Š</li></ul><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/1734333438459-dde9380c-0b5f-4323-9db6-b9970d6b3ac4.png"></p><p><span class="math inline">\(\mathcal{E}_t = \left\{ \pi_t^i \mid i =1, \ldots, n \right\} \xrightarrow{\text{æ¢ç´¢}} \mathcal{E}_{t+1} =\left\{ \pi_t^i \mid i = 1, \ldots, n \right\} \cup \left\{ \pi_e^j \midj = 1, \ldots, m \right\}\)</span></p><p><span class="math inline">\(\exists V^* \left( \cdot \mid \pi_t^i\sim \mathcal{E}_t \right) \leq V^* \left( \cdot \mid \pi_{t+1}^i \sim\mathcal{E}_{t+1} \right) \quad \pi_{t+1}^i \sim \left\{ \pi_e^i \mid i= 1, \ldots, m \right\}\)</span></p><p>æ¢ç´¢ï¼šå¯èƒ½å‘ç°æ›´å¥½çš„ç­–ç•¥</p><h2 id="ç­–ç•¥æ¢ç´¢çš„ä¸€äº›åŸåˆ™">1.2 ç­–ç•¥æ¢ç´¢çš„ä¸€äº›åŸåˆ™</h2><p>æœ´ç´ æ–¹æ³•ï¼ˆNaÃ¯ve Explorationï¼‰</p><ul><li>æ·»åŠ ç­–ç•¥å™ªå£°ğœ–-greedy</li></ul><p>ç§¯æåˆå§‹åŒ–ï¼ˆOptimistic Initializationï¼‰</p><p>åŸºäºä¸ç¡®å®šæ€§çš„åº¦é‡ï¼ˆUncertainty Measurementï¼‰</p><ul><li>å°è¯•å…·æœ‰ä¸ç¡®å®šæ”¶ç›Šçš„ç­–ç•¥ï¼Œå¯èƒ½å¸¦æ¥æ›´é«˜çš„æ”¶ç›Š</li></ul><p>æ¦‚ç‡åŒ¹é…ï¼ˆProbability Matchingï¼‰</p><ul><li>åŸºäºæ¦‚ç‡é€‰æ‹©æœ€ä½³ç­–ç•¥</li></ul><p>çŠ¶æ€æœç´¢ï¼ˆState Searchingï¼‰</p><ul><li>æ¢ç´¢åç»­çŠ¶æ€å¯èƒ½å¸¦æ¥æ›´é«˜æ”¶ç›Šçš„ç­–ç•¥</li></ul><h1 id="å¤šè‡‚è€è™æœº">2. å¤šè‡‚è€è™æœº</h1><h2 id="é—®é¢˜çš„å½¢å¼åŒ–æè¿°">2.1 é—®é¢˜çš„å½¢å¼åŒ–æè¿°</h2><p>åŠ¨ä½œé›†åˆï¼š<span class="math inline">\(a^i \in \mathcal{A}, \quad i =1, \ldots, K\)</span></p><p>æ”¶ç›Šï¼ˆåé¦ˆï¼‰å‡½æ•°åˆ†å¸ƒï¼š<span class="math inline">\(\mathcal{R}(r \mida^i) = \mathbb{P}(r \mid a^i)\)</span></p><p>æœ€å¤§åŒ–ç´¯ç§¯æ—¶é—´çš„æ”¶ç›Šï¼š<span class="math inline">\(\max \sum_{t=1}^{T}r_{t}, \quad r_{t} \sim \mathcal{R}\left(\cdot \mida_{t}\right)\)</span></p><h2 id="æ”¶ç›Šä¼°è®¡">2.2 æ”¶ç›Šä¼°è®¡</h2><p>æœŸæœ›æ”¶ç›Šå’Œé‡‡æ ·æ¬¡æ•°çš„å…³ç³»: <span class="math inline">\(Q_n(a^i) =\frac{r_1 + r_2 + \cdots + r_{n-1}}{n - 1}\)</span></p><p>ç¼ºç‚¹ï¼šæ¯æ¬¡æ›´æ–°çš„ç©ºé—´å¤æ‚åº¦æ˜¯O(n)</p><p>å¢é‡å®ç°: <span class="math display">\[Q_{n+1}(a^i) := \frac{1}{n} \sum_{i=1}^{n} r_i = \frac{1}{n} \left( r_n+ \frac{n-1}{n-1} \sum_{i=1}^{n-1} r_i \right) = \frac{1}{n} r_n +\frac{n-1}{n} Q_n = Q_n(a^i) + \frac{1}{n} (r_n - Q_n)\]</span></p><p>ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</p><h2 id="ç®—æ³•å¤šè‡‚è€è™æœº">2.3 ç®—æ³•ï¼šå¤šè‡‚è€è™æœº</h2><ol type="1"><li>åˆå§‹åŒ–ï¼š<span class="math inline">\(Q(a^i) := c^i, \quad N(a^i) = 0,\quad i = 1, ..., n\)</span></li><li>ä¸»å¾ªç¯<span class="math inline">\(t = 1:T\)</span><ol type="1"><li>åˆ©ç”¨ç­–ç•¥ğœ‹é€‰å–æŸä¸ªåŠ¨ä½œa</li><li>è·å–æ”¶ç›Š:<span class="math inline">\(r_t =\text{Bandit}(a)\)</span></li><li>æ›´æ–°è®¡æ•°å™¨:<span class="math inline">\(N(a) := N(a) +1\)</span></li><li>æ›´æ–°ä¼°å€¼:<span class="math inline">\(Q(a) := Q(a) + \frac{1}{N(a)}[r_t - Q(a)]\)</span></li></ol></li></ol><h2 id="åº”å½“é€‰å–ä»€ä¹ˆæ ·çš„ç­–ç•¥">2.4 åº”å½“é€‰å–ä»€ä¹ˆæ ·çš„ç­–ç•¥</h2><p>Regretå‡½æ•°(æ‡Šæ‚”å€¼)</p><ul><li><p>å†³ç­–çš„æœŸæœ›æ”¶ç›Šï¼š<span class="math inline">\(Q(a^i) =\mathbb{E}_{r \sim \mathbb{P}(r \mid a^i)}[r]\)</span></p></li><li><p>æœ€ä¼˜æ”¶ç›Šï¼š<span class="math inline">\(Q^{\star} = \max_{a^i \in\mathcal{A}} Q(a^i)\)</span></p></li><li><p>å†³ç­–ä¸æœ€ä¼˜å†³ç­–çš„æ”¶ç›Šå·®ï¼š<span class="math inline">\(R(a&#39;) =Q^{\star} - Q(a&#39;)\)</span></p></li><li><p>Total Regret å‡½æ•°ï¼š<span class="math inline">\(\sigma_{R} =\mathbb{E}_{a \sim \pi} \left[ \sum_{t=1}^{T} R(a_t^i) \right]\)</span>è¶Šæ¥è¿‘äº0è¶Šå¥½</p></li></ul><p>æœ€å°åŒ–Total Regretç­‰ä»·äºæœ€å¤§åŒ–Qå€¼ï¼š<span class="math inline">\(\min\sigma_{R} = \max \mathbb{E}_{a \sim \pi} \left[ \sum_{t=1}^{T}Q(a_{t}^{i}) \right]\)</span></p><ul><li>å¦‚æœä¸€ç›´æ¢ç´¢æ–°å†³ç­–ï¼š<span class="math inline">\(\sigma_{R} \propto T\cdot R\)</span> ,total regretå°†çº¿æ€§é€’å¢ï¼Œæ— æ³•æ”¶æ•›</li><li>å¦‚æœä¸€ç›´ä¸æ¢ç´¢æ–°å†³ç­–ï¼š<span class="math inline">\(\sigma_{R} \proptoT \cdot R\)</span>ï¼Œtotal regret ä»å°†çº¿æ€§é€’å¢</li></ul><p>æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ–¹æ³•å…·æœ‰æ¬¡çº¿æ€§ï¼ˆsublinearï¼‰æ”¶æ•›ä¿è¯çš„regretï¼Ÿ</p><ul><li>ä¸‹ç•Œ<ul><li>ä½¿ç”¨<span class="math inline">\(\Delta_a = Q^* - Q(a)\)</span>å’Œåé¦ˆå‡½æ•°åˆ†å¸ƒç›¸ä¼¼æ€§ï¼š<span class="math inline">\(D_{KL}\left(\mathcal{R}(r \mid a) \parallel\mathcal{R}^*(r \mid a)\right)\)</span></li><li><span class="math inline">\(\lim_{T \to \infty} \sigma_R \geq \log T\sum_{a \mid \Delta_a &gt; 0} \frac{\Delta_a}{D_{KL}\left(\mathcal{R}(r\mid a) \parallel \mathcal{R}^*(r \mid a)\right)}\)</span></li></ul></li></ul><h2 id="è´ªå¿ƒç­–ç•¥å’Œ-epsilon-greedy-ç­–ç•¥">2.5 è´ªå¿ƒç­–ç•¥å’Œ <span class="math inline">\(\epsilon\)</span>-greedy ç­–ç•¥</h2><p>è´ªå¿ƒç­–ç•¥</p><p><span class="math inline">\(Q(a^i) = \frac{1}{N(a^i)} \sum_{t=1}^{T}r_t \cdot 1(a_t = a^i)\)</span></p><p><span class="math inline">\(a^* = \arg\max_{a^i} Q(a^i)\)</span></p><p><span class="math inline">\(\sigma_R \propto T \cdot [Q(a^i) -Q^*]\)</span></p><ul><li>çº¿æ€§å¢é•¿çš„ Total regret</li></ul><p><span class="math inline">\(\epsilon\)</span>-greedy ç­–ç•¥</p><p><span class="math inline">\(a_t = \begin{cases}\arg\max_a \hat{Q}(a) &amp; \text{é‡‡æ ·æ¦‚ç‡ï¼š} 1 - \epsilon \\U(0, |\mathcal{A}|) &amp; \text{é‡‡æ ·æ¦‚ç‡ï¼š} \epsilon\end{cases}\)</span></p><p>å¸¸é‡ <span class="math inline">\(\epsilon\)</span> ä¿è¯ total regretæ»¡è¶³</p><p><span class="math inline">\(\sigma_R \geq\frac{\epsilon}{|\mathcal{A}|} \sum_{a \in \mathcal{A}}\Delta_a\)</span></p><p>Total regret ä»ç„¶æ˜¯çº¿æ€§é€’å¢çš„ï¼Œåªæ˜¯å¢é•¿ç‡æ¯”è´ªå¿ƒç­–ç•¥å°</p><h2 id="è¡°å‡è´ªå¿ƒç­–ç•¥">2.6 è¡°å‡è´ªå¿ƒç­–ç•¥</h2><ul><li><span class="math inline">\(\epsilon\)</span>-greedy çš„å˜ç§ï¼Œ<span class="math inline">\(\epsilon\)</span> éšç€æ—¶é—´è¡°å‡</li><li>ç†è®ºä¸Šå¯¹æ•°æ¸è¿›æ”¶æ•›ï¼</li><li>ä¸€ç§å¯èƒ½çš„è¡°å‡æ–¹å¼ï¼š</li></ul><p><span class="math display">\[c \geq 0, \quad d = \min_{a \mid \Delta_a &gt; 0} \Delta_a, \quad\epsilon_t = \min\left\{1, \frac{c|\mathcal{A}|}{d^2 t}\right\}\]</span></p><p>ç¼ºç‚¹</p><ul><li>å¾ˆéš¾æ‰¾åˆ°åˆé€‚çš„è¡°å‡è§„åˆ’</li></ul><p><span class="math inline">\(c \geq 0, \quad c_t = \min_{a \mid\Delta_a &gt; 0} \Delta_a, \quad \epsilon_{r_t} = \min\left(1,\frac{c}{c_t^2 \cdot r_t}\right)\)</span></p><h2 id="ä¸åŒğ-greedy-ç­–ç•¥å¯¹æ¯”">2.7 ä¸åŒğ-greedy ç­–ç•¥å¯¹æ¯”ï¼š</h2><p>Total Regret</p><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216161243673.png"></p><p>å¹³å‡æ”¶ç›Š</p><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216161259488.png"></p><h2 id="ä¹è§‚åˆå§‹åŒ–">2.8 ä¹è§‚åˆå§‹åŒ–</h2><ul><li>ç»™<span class="math inline">\(Q(a^i)\)</span>ä¸€ä¸ªè¾ƒé«˜çš„åˆå§‹åŒ–å€¼</li><li>å¢é‡å¼è’™ç‰¹å¡æ´›ä¼°è®¡æ›´æ–° <span class="math inline">\(Q(a^i)\)</span></li></ul><p><span class="math inline">\(Q(a^i) := Q(a^i) + \frac{1}{N(a^i)} (r_t- Q(a^i))\)</span></p><ul><li>æœ‰åä¼°è®¡ï¼Œä½†æ˜¯éšç€é‡‡æ ·å¢åŠ ï¼Œè¿™ä¸ªåå·®å¸¦æ¥çš„å½±å“ä¼šè¶Šæ¥è¶Šå°</li><li>ä½†æ˜¯ä»ç„¶å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜</li></ul><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216161450087.png"></p><h2 id="æ˜¾å¼åœ°è€ƒè™‘åŠ¨ä½œçš„ä»·å€¼åˆ†å¸ƒ">2.9 æ˜¾å¼åœ°è€ƒè™‘åŠ¨ä½œçš„ä»·å€¼åˆ†å¸ƒ</h2><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216162546603.png"></p><ul><li>è€ƒè™‘ä»¥ä¸Šä¸‰ä¸ªåŠ¨ä½œçš„ä»·å€¼åˆ†å¸ƒï¼Œå¹³è¡¡æ¢ç´¢å’Œåˆ©ç”¨ï¼Œé€‰æ‹©å“ªä¸ªåŠ¨ä½œï¼Ÿ</li><li><ol type="1"><li>æ˜¾å¼åœ°é¼“åŠ±ä¸ç¡®å®šæ€§ï¼› 2. ç›´æ¥æ ¹æ®åˆ†å¸ƒé‡‡æ ·æ¥é€‰æ‹©</li></ol></li></ul><h2 id="åŸºäºä¸ç¡®å®šæ€§æµ‹åº¦">2.10 åŸºäºä¸ç¡®å®šæ€§æµ‹åº¦</h2><ul><li>ä¸ç¡®å®šæ€§è¶Šå¤§çš„ <span class="math inline">\(Q(a^i)\)</span>ï¼Œè¶Šå…·æœ‰æ¢ç´¢çš„ä»·å€¼ï¼Œæœ‰å¯èƒ½ä¼šæ˜¯æœ€å¥½çš„ç­–ç•¥</li><li>ä¸€ä¸ªç»éªŒæ€§æŒ‡å¯¼ï¼š<ul><li><span class="math inline">\(N_{a}\)</span> å¤§ï¼Œ<span class="math inline">\(U_{a}\)</span> å°</li><li><span class="math inline">\(N_{a}\)</span> å°ï¼Œ<span class="math inline">\(U_{a}\)</span> å¤§</li></ul></li><li>ç­–ç•¥ <span class="math inline">\(\pi\)</span>ï¼š<span class="math inline">\(a = \arg\max_{a \in \mathcal{A}} \hat{Q}(a) +\hat{U}(a)\)</span></li><li>ä¹Ÿç§°ä¸º UCBï¼šä¸Šç½®ä¿¡ç•Œæ³•ï¼ˆUpper Confidence Boundsï¼‰</li></ul><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216162915531.png"></p><h2 id="ucbä¸Šç½®ä¿¡ç•Œ">2.11 UCBï¼šä¸Šç½®ä¿¡ç•Œ</h2><p>Hoeffding ä¸ç­‰å¼ï¼š<span class="math inline">\(\mathbb{P}[\mathbb{E}[x] &gt; \bar{x}_t + u] \leqe^{-2tu^2} \text{ for } x \in [0,1]\)</span></p><ul><li><p>ä¸ºæ¯ä¸ªåŠ¨ä½œæ”¶ç›Šä¼°å€¼ä¼°è®¡ä¸€ä¸ªä¸Šç½®ä¿¡ç•Œï¼š<span class="math inline">\(\hat{U}(a)\)</span></p></li><li><p>æ˜¾ç„¶æœ‰ï¼š<span class="math inline">\(Q_t(a) \leq \hat{Q}_t(a) +\hat{U}_t(a)\)</span> ä»¥é«˜æ¦‚ç‡ <span class="math inline">\(p\)</span>æˆç«‹ï¼ˆHoeffdingä¸ç­‰å¼ï¼‰</p></li><li><p>ä¾æ®ä»¥ä¸‹åŸåˆ™æŒ‘é€‰è¿›è¡Œå†³ç­–ï¼š <span class="math display">\[a =\arg\max_{a \in \mathcal{A}} \hat{Q}_t(a) + \hat{U}_t(a) \quade^{-2N_t(a)U_t(a)^2} = p \Rightarrow \hat{U}_t(a) = \sqrt{-\frac{\logp}{2N_t(a)}}\]</span></p></li><li><p>æ”¶æ•›æ€§ï¼š<span class="math inline">\(\lim_{t \to \infty} \sigma_R\leq 8 \log t \sum_{a \mid \Delta_a &gt; 0} \Delta_a\)</span></p></li></ul><h2 id="thompson-samplingæ–¹æ³•">2.12 Thompson Samplingæ–¹æ³•</h2><p>[Chapelle, Olivier, and Lihong Li. "An empirical evaluation ofthompson sampling." Advances in neural information processing systems.2011.]</p><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216164006590.png"></p><ul><li>æƒ³æ³•ï¼šæ ¹æ®æ¯ä¸ªåŠ¨ä½œæˆä¸ºæœ€ä¼˜çš„æ¦‚ç‡æ¥é€‰æ‹©åŠ¨ä½œ</li></ul><p><span class="math inline">\(p(a) = \int \mathbb{I} \left[\mathbb{E}_{p(Q(a))} \left[ Q(a; \theta) \right] = \max_{a&#39; \in\mathcal{A}} \mathbb{E}_{p(Q(a&#39;))} \left( Q(a&#39;; \theta) \right)\right] d\theta\)</span></p><ul><li>å®ç°ï¼šæ ¹æ®å½“å‰æ¯ä¸ªåŠ¨ä½œ <span class="math inline">\(a\)</span>çš„ä»·å€¼æ¦‚ç‡åˆ†å¸ƒ <span class="math inline">\(p(Q(a))\)</span>æ¥é‡‡æ ·åˆ°å…¶ä»·å€¼ <span class="math inline">\(\hat{Q}(a)\)</span>ï¼Œé€‰æ‹©ä»·å€¼æœ€å¤§çš„åŠ¨ä½œ</li></ul><p><img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216164936879.png"></p><h2 id="thompson-samplingå’Œucbçš„å®éªŒå¯¹æ¯”">2.13 ThompsonSamplingå’ŒUCBçš„å®éªŒå¯¹æ¯”</h2><p>å®éªŒï¼šK-armå¤šè‡‚è€è™æœºï¼Œç”¨Betaåˆ†å¸ƒå»ºæ¨¡æ¯ä¸ªarmçš„æˆåŠŸç‡ï¼Œåˆå§‹åŒ–æˆåŠŸç‡åˆ†å¸ƒä¸ºBeta(1,1).<span class="math display">\[\text{Beta}(x; \alpha, \beta) \proptox^{\alpha-1} (1 - x)^{\beta-1}\]</span> <img src="/2024/12/16/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/2-%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%88%A9%E7%94%A8/image-20241216165700311.png"></p><p>K-arms - The best arm has reward probability of 0.5 - K-1 other armshave the reward probability of 0.5-Îµ</p><h2 id="æ¢ç´¢ä¸åˆ©ç”¨æ€»ç»“">2.14 æ¢ç´¢ä¸åˆ©ç”¨æ€»ç»“</h2><ul><li>æ¢ç´¢ä¸åˆ©ç”¨æ˜¯å¼ºåŒ–å­¦ä¹ çš„ trial-and-error ä¸­çš„å¿…å¤‡æŠ€æœ¯</li><li>å¤šè‡‚è€è™æœºå¯ä»¥è¢«çœ‹æˆæ˜¯æ— çŠ¶æ€ (state-less) å¼ºåŒ–å­¦ä¹ </li><li>å¤šè‡‚è€è™æœºæ˜¯ç ”ç©¶æ¢ç´¢ä¸åˆ©ç”¨æŠ€æœ¯ç†è®ºçš„æœ€ä½³ç¯å¢ƒ<ul><li>ç†è®ºçš„æ¸è¿‘æœ€ä¼˜ regret ä¸º <span class="math inline">\(O(\logT)\)</span></li></ul></li><li><span class="math inline">\(\epsilon\)</span>-greedyã€UCB å’ŒThompson Samplingæ–¹æ³•åœ¨å¤šè‡‚è€è™æœºä»»åŠ¡ä¸­ååˆ†å¸¸ç”¨ï¼Œåœ¨å¼ºåŒ–å­¦ä¹ çš„æ¢ç´¢ä¸­ä¹Ÿååˆ†å¸¸ç”¨ï¼Œæœ€å¸¸è§çš„æ˜¯<span class="math inline">\(\epsilon\)</span>-greedy</li></ul>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>åŠ¨æ‰‹å­¦å¼ºåŒ–å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. å…³äºTCPå¹¶å‘è¿æ¥çš„å‡ ä¸ªæ€è€ƒé¢˜ä¸è¯•éªŒ</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/16-%E5%85%B3%E4%BA%8ETCP%E5%B9%B6%E5%8F%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%87%A0%E4%B8%AA%E6%80%9D%E8%80%83%E9%A2%98%E4%B8%8E%E8%AF%95%E9%AA%8C/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/16-%E5%85%B3%E4%BA%8ETCP%E5%B9%B6%E5%8F%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%87%A0%E4%B8%AA%E6%80%9D%E8%80%83%E9%A2%98%E4%B8%8E%E8%AF%95%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. å…³äºBoostçš„çœ‹æ³•</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/15-%E5%85%B3%E4%BA%8EBoost%E7%9A%84%E7%9C%8B%E6%B3%95/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/15-%E5%85%B3%E4%BA%8EBoost%E7%9A%84%E7%9C%8B%E6%B3%95/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. ä»ã€ŠC++Primer(ç¬¬4ç‰ˆ)ã€‹å…¥æ‰‹å­¦ä¹ C++</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/14-%E4%BB%8E%E3%80%8AC++Primer(%E7%AC%AC4%E7%89%88)%E3%80%8B%E5%85%A5%E6%89%8B%E5%AD%A6%E4%B9%A0C++/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/14-%E4%BB%8E%E3%80%8AC++Primer(%E7%AC%AC4%E7%89%88)%E3%80%8B%E5%85%A5%E6%89%8B%E5%AD%A6%E4%B9%A0C++/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. è°ˆä¸€è°ˆç½‘ç»œç¼–ç¨‹å­¦ä¹ ç»éªŒ</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/13-%E8%B0%88%E4%B8%80%E8%B0%88%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%BB%8F%E9%AA%8C/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/13-%E8%B0%88%E4%B8%80%E8%B0%88%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%BB%8F%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. C++ç»éªŒè°ˆ</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/12-C++%E7%BB%8F%E9%AA%8C%E8%B0%88/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/12-C++%E7%BB%8F%E9%AA%8C%E8%B0%88/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. åæ€C++é¢å‘å¯¹è±¡ä¸è™šå‡½æ•°</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/11-%E5%8F%8D%E6%80%9DC++%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E8%99%9A%E5%87%BD%E6%95%B0/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/11-%E5%8F%8D%E6%80%9DC++%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E8%99%9A%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. C++ç¼–è¯‘é“¾æ¥æ¨¡å‹ç²¾è¦</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/10-C++%E7%BC%96%E8%AF%91%E9%93%BE%E6%8E%A5%E6%A8%A1%E5%9E%8B%E7%B2%BE%E8%A6%81/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/10-C++%E7%BC%96%E8%AF%91%E9%93%BE%E6%8E%A5%E6%A8%A1%E5%9E%8B%E7%B2%BE%E8%A6%81/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. åˆ†å¸ƒå¼ç³»ç»Ÿå·¥ç¨‹å®è·µ</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/9-%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/9-%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. muduoç½‘ç»œåº“è®¾è®¡ä¸å®ç°</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/8-muduo%E7%BD%91%E7%BB%9C%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/8-muduo%E7%BD%91%E7%BB%9C%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. muduoç¼–ç¨‹ç¤ºä¾‹</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/7-muduo%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/7-muduo%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. muduoç½‘ç»œåº“ç®€ä»‹</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/6-muduo%E7%BD%91%E7%BB%9C%E5%BA%93%E7%AE%80%E4%BB%8B/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/6-muduo%E7%BD%91%E7%BB%9C%E5%BA%93%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. é«˜æ•ˆçš„å¤šçº¿ç¨‹æ—¥å¿—</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/5-%E9%AB%98%E6%95%88%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%97%A5%E5%BF%97/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/5-%E9%AB%98%E6%95%88%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%97%A5%E5%BF%97/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. C++å¤šçº¿ç¨‹ç³»ç»Ÿç¼–ç¨‹ç²¾è¦</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/4-C++%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E7%B2%BE%E8%A6%81/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/4-C++%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E7%B2%BE%E8%A6%81/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. å¤šçº¿ç¨‹æœåŠ¡å™¨çš„é€‚ç”¨åœºåˆä¸å¸¸ç”¨ç¼–ç¨‹æ¨¡å‹</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/3-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%80%82%E7%94%A8%E5%9C%BA%E5%90%88%E4%B8%8E%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/3-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%80%82%E7%94%A8%E5%9C%BA%E5%90%88%E4%B8%8E%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. çº¿ç¨‹åŒæ­¥ç²¾è¦</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/2-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E7%B2%BE%E8%A6%81/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/2-%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5%E7%B2%BE%E8%A6%81/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. çº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ç”Ÿå‘½æœŸç®¡ç†</title>
    <link href="/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/1-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%94%9F%E5%91%BD%E6%9C%9F%E7%AE%A1%E7%90%86/"/>
    <url>/2024/12/16/muduo%E5%A4%9A%E7%BA%BF%E7%A8%8B/1-%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%94%9F%E5%91%BD%E6%9C%9F%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>muduoå¤šçº¿ç¨‹æœåŠ¡å™¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>muduo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. nginxåŸç†</title>
    <link href="/2024/12/15/nginx/9-nginx%E5%8E%9F%E7%90%86/"/>
    <url>/2024/12/15/nginx/9-nginx%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<p>å½“å¯åŠ¨ nginxï¼Œæœ‰ä¸€ä¸ª master å’Œä¸€ä¸ª workerã€‚</p><p><img src="/2024/12/15/nginx/9-nginx%E5%8E%9F%E7%90%86/82b19ed9ba5770a330af9b0894ad1810.png"></p><h2 id="master-å’Œ-worker">1. master å’Œ worker</h2><p>Nginx æœ‰ä¸€ä¸ª master å’Œå¤šä¸ª workerã€‚</p><p><img src="/2024/12/15/nginx/9-nginx%E5%8E%9F%E7%90%86/ca08ebcce1c6feb4b3ab28f3090d04a3.png"></p><blockquote><p>master å°±ç›¸å½“äºä¸»ç®¡ï¼Œworker å°±æ˜¯æ‰“å·¥äººã€‚</p></blockquote><h2 id="worker-å¦‚ä½•è¿›è¡Œå·¥ä½œçš„">2. worker å¦‚ä½•è¿›è¡Œå·¥ä½œçš„</h2><p><img src="/2024/12/15/nginx/9-nginx%E5%8E%9F%E7%90%86/8232532d66dae61174e95ede7fa15e04.png"></p><p>å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚è¿‡æ¥ï¼Œä¼šå…ˆé€šçŸ¥ masterï¼Œç„¶åç”± mater é€šçŸ¥æ‰€æœ‰ workerè¿›è¡Œäº‰æŠ¢ï¼Œç„¶åç”± worker å»å®Œæˆé™æ€èµ„æºåŠ è½½æˆ–è€…æ–¹å‘ä»£ç†ã€‚</p><h2 id="ä¸€ä¸ª-master-å’Œå¤šä¸ª-worker-æœ‰å¥½å¤„">3. ä¸€ä¸ª master å’Œå¤šä¸ª workeræœ‰å¥½å¤„</h2><p>ï¼ˆ1ï¼‰å¯ä»¥ä½¿ç”¨ nginx â€“s reload çƒ­éƒ¨ç½²ï¼Œåˆ©ç”¨ nginx è¿›è¡Œçƒ­éƒ¨ç½²æ“ä½œã€‚ï¼ˆ2ï¼‰æ¯ä¸ª worker æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¦‚æœæœ‰å…¶ä¸­çš„ä¸€ä¸ª worker å‡ºç°é—®é¢˜ï¼Œå…¶ä»–worker ç‹¬ç«‹çš„ï¼Œç»§ç»­è¿›è¡Œäº‰æŠ¢ï¼Œå®ç°è¯·æ±‚è¿‡ç¨‹ï¼Œä¸ä¼šé€ æˆæœåŠ¡ä¸­æ–­ã€‚</p><ul><li>é¦–å…ˆï¼Œå¯¹äºæ¯ä¸ª workerè¿›ç¨‹æ¥è¯´ï¼Œç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä¸éœ€è¦åŠ é”ï¼Œæ‰€ä»¥çœæ‰äº†é”å¸¦æ¥çš„å¼€é”€ï¼ŒåŒæ—¶åœ¨ç¼–ç¨‹ä»¥åŠé—®é¢˜æŸ¥æ‰¾æ—¶ï¼Œä¹Ÿä¼šæ–¹ä¾¿å¾ˆå¤šã€‚</li><li>å…¶æ¬¡ï¼Œé‡‡ç”¨ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¯ä»¥è®©äº’ç›¸ä¹‹é—´ä¸ä¼šå½±å“ï¼Œä¸€ä¸ªè¿›ç¨‹é€€å‡ºåï¼Œå…¶å®ƒè¿›ç¨‹è¿˜åœ¨å·¥ä½œï¼ŒæœåŠ¡ä¸ä¼šä¸­æ–­ï¼Œmasterè¿›ç¨‹åˆ™å¾ˆå¿«å¯åŠ¨æ–°çš„ worker è¿›ç¨‹ã€‚å½“ç„¶ï¼Œworkerè¿›ç¨‹çš„å¼‚å¸¸é€€å‡ºï¼Œè‚¯å®šæ˜¯ç¨‹åºæœ‰ bug äº†ï¼Œå¼‚å¸¸é€€å‡ºï¼Œä¼šå¯¼è‡´å½“å‰ workerä¸Šçš„æ‰€æœ‰è¯·æ±‚å¤±è´¥ï¼Œä¸è¿‡ä¸ä¼šå½±å“åˆ°æ‰€æœ‰è¯·æ±‚ï¼Œæ‰€ä»¥é™ä½äº†é£é™©ã€‚</li></ul><h2 id="è®¾ç½®å¤šå°‘ä¸ª-worker-åˆé€‚">4. è®¾ç½®å¤šå°‘ä¸ª worker åˆé€‚</h2><p><strong>worker æ•°å’ŒæœåŠ¡å™¨çš„ cpu æ•°ç›¸ç­‰æ˜¯æœ€ä¸ºé€‚å®œçš„</strong>ã€‚</p><ul><li>Nginx åŒ redis ç±»ä¼¼éƒ½é‡‡ç”¨äº† io å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œæ¯ä¸ª workeréƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä½†æ¯ä¸ªè¿›ç¨‹é‡Œåªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œé€šè¿‡å¼‚æ­¥éé˜»å¡çš„æ–¹å¼æ¥å¤„ç†è¯·æ±‚ï¼Œå³ä½¿æ˜¯åƒä¸Šä¸‡ä¸ªè¯·æ±‚ä¹Ÿä¸åœ¨è¯ä¸‹ã€‚</li><li>æ¯ä¸ª worker çš„çº¿ç¨‹å¯ä»¥æŠŠä¸€ä¸ª cpu çš„æ€§èƒ½å‘æŒ¥åˆ°æè‡´ã€‚æ‰€ä»¥ workeræ•°å’ŒæœåŠ¡å™¨çš„ cpu æ•°ç›¸ç­‰æ˜¯æœ€ä¸ºé€‚å®œçš„ã€‚è®¾å°‘äº†ä¼šæµªè´¹ cpuï¼Œè®¾å¤šäº†ä¼šé€ æˆ cpué¢‘ç¹åˆ‡æ¢ä¸Šä¸‹æ–‡å¸¦æ¥çš„æŸè€—ã€‚</li></ul><h2 id="è¿æ¥æ•°-worker_connection">5. è¿æ¥æ•° worker_connection</h2><p>ç¬¬ä¸€ä¸ªï¼šå‘é€è¯·æ±‚ï¼Œå ç”¨äº† worker çš„å‡ ä¸ªè¿æ¥æ•°ï¼Ÿ</p><p>ç­”æ¡ˆï¼š2 æˆ–è€… 4 ä¸ª</p><p>ç¬¬äºŒä¸ªï¼šnginx æœ‰ä¸€ä¸ª masterï¼Œæœ‰å››ä¸ª workerï¼Œæ¯ä¸ª workeræ”¯æŒæœ€å¤§çš„è¿æ¥æ•° 1024ï¼Œæ”¯æŒçš„æœ€å¤§å¹¶å‘æ•°æ˜¯å¤šå°‘ï¼Ÿ</p><p>æ™®é€šçš„é™æ€è®¿é—®æœ€å¤§å¹¶å‘æ•°æ˜¯ï¼š</p><p><span class="math inline">\(\frac{worker\_connections \timesworker\_processes}{2}\)</span></p><p>è€Œå¦‚æœæ˜¯ HTTP ä½œä¸ºåå‘ä»£ç†æ¥è¯´ï¼Œæœ€å¤§å¹¶å‘æ•°é‡åº”è¯¥æ˜¯</p><p><span class="math inline">\(\frac{worker\_connections \timesworker\_processes}{4}\)</span></p><p>è¿™ä¸ªå€¼æ˜¯è¡¨ç¤ºæ¯ä¸ª worker è¿›ç¨‹æ‰€èƒ½å»ºç«‹è¿æ¥çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ª nginxèƒ½å»ºç«‹çš„æœ€å¤§è¿æ¥æ•°ï¼Œåº”è¯¥æ˜¯ worker_connections Ã—worker_processesã€‚å½“ç„¶ï¼Œè¿™é‡Œè¯´çš„æ˜¯æœ€å¤§è¿æ¥æ•°ï¼Œå¯¹äº HTTPè¯·æ±‚æœ¬åœ°èµ„æºæ¥è¯´ï¼Œèƒ½å¤Ÿæ”¯æŒçš„æœ€å¤§å¹¶å‘æ•°é‡æ˜¯ worker_connections Ã—worker_processesï¼Œ å¦‚æœæ˜¯æ”¯æŒ http1.1çš„æµè§ˆå™¨æ¯æ¬¡è®¿é—®è¦å ä¸¤ä¸ªè¿æ¥ï¼Œæ‰€ä»¥æ™®é€šçš„é™æ€è®¿é—®æœ€å¤§å¹¶å‘æ•°æ˜¯ï¼š<span class="math inline">\(\frac{worker\_connections \timesworker\_processes}{2}\)</span>ï¼Œ è€Œå¦‚æœæ˜¯ HTTPä½œä¸ºåå‘ä»£ç†æ¥è¯´ï¼Œæœ€å¤§å¹¶å‘æ•°é‡åº”è¯¥æ˜¯ <span class="math inline">\(\frac{worker\_connections \timesworker\_processes}{4}\)</span>ã€‚å› ä¸ºä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼Œæ¯ä¸ªå¹¶å‘ä¼šå»ºç«‹ä¸å®¢æˆ·ç«¯çš„è¿æ¥å’Œä¸åç«¯æœåŠ¡çš„è¿æ¥ï¼Œä¼šå ç”¨ä¸¤ä¸ªè¿æ¥ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. Nginxæ­å»ºé«˜å¯ç”¨é›†ç¾¤</title>
    <link href="/2024/12/15/nginx/8-Nginx%E6%90%AD%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/"/>
    <url>/2024/12/15/nginx/8-Nginx%E6%90%AD%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/</url>
    
    <content type="html"><![CDATA[<p>å¾®æœåŠ¡ä¸­ï¼Œä¸ºé˜²æ­¢æœåŠ¡æä¾›è€…å®•æ‰ï¼Œæä¾›å¤šä¸ªæœåŠ¡ï¼ŒnginxåŒæ ·ï¼Œå¦‚æœåªä½¿ç”¨ä¸€ä¸ª nginxï¼Œå¯èƒ½å‘ç”Ÿå•ç‚¹æ•…éšœï¼Œå¯¼è‡´æ•´ä¸ªå¾®æœåŠ¡ä¸å¯ç”¨ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯-nginx-é«˜å¯ç”¨">1. ä»€ä¹ˆæ˜¯ nginx é«˜å¯ç”¨</h1><p><img src="/2024/12/15/nginx/8-Nginx%E6%90%AD%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/aca48c12cf2a2c8f67a91a16449b8179.png"></p><ul><li>éœ€è¦ä¸¤å° nginx æœåŠ¡å™¨</li><li>éœ€è¦ keepalived</li><li>éœ€è¦è™šæ‹Ÿ ip</li></ul><p><img src="/2024/12/15/nginx/8-Nginx%E6%90%AD%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/4f5d8055a6ccb97c1b00a0cec2de6c50.png"></p><h1 id="é…ç½®é«˜å¯ç”¨çš„å‡†å¤‡å·¥ä½œ">2. é…ç½®é«˜å¯ç”¨çš„å‡†å¤‡å·¥ä½œ</h1><ul><li>éœ€è¦ä¸¤å°æœåŠ¡å™¨ 192.168.17.129 å’Œ 192.168.17.131</li><li>åœ¨ä¸¤å°æœåŠ¡å™¨å®‰è£… nginx è¿™é‡Œå¦‚æœä¸æƒ³å†å»å®‰è£…ä¸€é Nginxï¼Œå¯ä»¥ç›´æ¥å…‹éš†CentOsã€‚</li><li>åœ¨ä¸¤å°æœåŠ¡å™¨å®‰è£… keepalived</li></ul><h1 id="åœ¨ä¸¤å°æœåŠ¡å™¨å®‰è£…-keepalived">3. åœ¨ä¸¤å°æœåŠ¡å™¨å®‰è£… keepalived</h1><ul><li>ä½¿ç”¨ yum å‘½ä»¤è¿›è¡Œå®‰è£… <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install keepalived â€“y<br></code></pre></td></tr></table></figure></li><li>å®‰è£…ä¹‹åï¼Œåœ¨ /etc é‡Œé¢ç”Ÿæˆç›®å½• keepalivedï¼Œæœ‰æ–‡ä»¶<code>keepalived.conf</code></li></ul><h1 id="å®Œæˆé«˜å¯ç”¨é…ç½®ä¸»ä»é…ç½®">4. å®Œæˆé«˜å¯ç”¨é…ç½®ï¼ˆä¸»ä»é…ç½®ï¼‰</h1><h2 id="ä¸»æœº-nginx">ä¸»æœº Nginx</h2><ul><li><p>ä¿®æ”¹ <code>/etc/keepalived/keepalived.conf</code> é…ç½®æ–‡ä»¶<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs nginx">! <span class="hljs-attribute">Configuration</span> File for keepalived<br>global_defs &#123;<br>    <span class="hljs-section">notification_email</span> &#123;<br>        acassen@firewall.<span class="hljs-attribute">loc</span><br>        failover<span class="hljs-variable">@firewall</span>.loc<br>        sysadmin<span class="hljs-variable">@firewall</span>.loc<br>    &#125;<br>    notification_email_from Alexandre.Cassen<span class="hljs-variable">@firewall</span>.loc<br>    smtp_server <span class="hljs-number">192.168.17.129</span><br>    smtp_connect_timeout <span class="hljs-number">30</span><br>    router_id LVS_DEVEL <span class="hljs-comment"># ä¸»æœºåå­—</span><br>&#125;<br>vrrp_script chk_http_port &#123;<br>    <span class="hljs-attribute">script</span> <span class="hljs-string">&quot;/usr/local/src/nginx_check.sh&quot;</span><br>    interval <span class="hljs-number">2</span> <span class="hljs-comment">#ï¼ˆæ£€æµ‹è„šæœ¬æ‰§è¡Œçš„é—´éš”ï¼‰</span><br>    weight <span class="hljs-number">2</span> <span class="hljs-comment"># æƒé‡</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    <span class="hljs-attribute">state</span> MASTER <span class="hljs-comment"># å¤‡ä»½æœåŠ¡å™¨ä¸Šå°† MASTER æ”¹ä¸º BACKUP</span><br>    interface eth1 <span class="hljs-comment"># ç½‘å¡</span><br>    virtual_router_id <span class="hljs-number">51</span>  <span class="hljs-comment"># ä¸»ã€å¤‡æœºçš„ virtual_router_id å¿…é¡»ç›¸åŒ</span><br>    priority <span class="hljs-number">100</span>  <span class="hljs-comment"># ä¸»ã€å¤‡æœºå–ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œä¸»æœºå€¼è¾ƒå¤§ï¼Œå¤‡ä»½æœºå€¼è¾ƒå°</span><br>    advert_int <span class="hljs-number">1</span><br>    authentication &#123;<br>        <span class="hljs-attribute">auth_type</span> PASS<br>        auth_pass <span class="hljs-number">1111</span><br>    &#125;<br>    virtual_ipaddress &#123;<br>        192.168.77.50 <span class="hljs-comment"># VRRP H è™šæ‹Ÿåœ°å€</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p></li><li><p>åœ¨ <code>/usr/local/src</code> æ·»åŠ æ£€æµ‹è„šæœ¬ï¼š<code>nginx_check.sh</code> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>A=`ps -C nginx â€“no-header | <span class="hljs-built_in">wc</span> -l`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$A</span> -eq 0 ];<span class="hljs-keyword">then</span><br>    /usr/local/nginx/sbin/nginx<br>    <span class="hljs-built_in">sleep</span> 2<br>    <span class="hljs-keyword">if</span> [ `ps -C nginx --no-header |<span class="hljs-built_in">wc</span> -l` -eq 0 ];<span class="hljs-keyword">then</span><br>        killall keepalived<br>    <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></p></li></ul><h2 id="ä»æœº-nginx">ä»æœº Nginx</h2><ul><li><p>ä¿®æ”¹ <code>/etc/keepalived/keepalived.conf</code> é…ç½®æ–‡ä»¶<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs nginx">! <span class="hljs-attribute">Configuration</span> File for keepalived<br>global_defs &#123;<br>    <span class="hljs-section">notification_email</span> &#123;<br>        acassen@firewall.<span class="hljs-attribute">loc</span><br>        failover<span class="hljs-variable">@firewall</span>.loc<br>        sysadmin<span class="hljs-variable">@firewall</span>.loc<br>    &#125;<br>    notification_email_from Alexandre.Cassen<span class="hljs-variable">@firewall</span>.loc<br>    smtp_server <span class="hljs-number">192.168.17.129</span><br>    smtp_connect_timeout <span class="hljs-number">30</span><br>    router_id LVS_DEVEL<br>&#125;<br>vrrp_script chk_http_port &#123;<br>    <span class="hljs-attribute">script</span> <span class="hljs-string">&quot;/usr/local/src/nginx_check.sh&quot;</span><br>    interval <span class="hljs-number">2</span><br>    weight <span class="hljs-number">2</span><br>&#125;<br>vrrp_instance VI_1 &#123;<br>    <span class="hljs-attribute">state</span> BACKUP <span class="hljs-comment"># ä¿®æ”¹ä¸ºä»æœº BACKUP</span><br>    interface eth2 <span class="hljs-comment"># ä¿®æ”¹ä¸ºä»æœº ip</span><br>    virtual_router_id <span class="hljs-number">51</span><br>    priority <span class="hljs-number">90</span> <span class="hljs-comment"># ä¼˜å…ˆçº§æ¯”ä¸»æœºä½</span><br>    advert_int <span class="hljs-number">1</span><br>    authentication &#123;<br>        <span class="hljs-attribute">auth_type</span> PASS<br>        auth_pass <span class="hljs-number">1111</span><br>    &#125;<br>    virtual_ipaddress &#123;<br>        192.168.77.50<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p></li><li><p>åœ¨ <code>/usr/local/src</code> æ·»åŠ æ£€æµ‹è„šæœ¬ï¼š<code>nginx_check.sh</code> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>A=`ps -C nginx â€“no-header | <span class="hljs-built_in">wc</span> -l`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$A</span> -eq 0 ];<span class="hljs-keyword">then</span><br>    /usr/local/nginx/sbin/nginx<br>    <span class="hljs-built_in">sleep</span> 2<br>    <span class="hljs-keyword">if</span> [ `ps -C nginx --no-header |<span class="hljs-built_in">wc</span> -l` -eq 0 ];<span class="hljs-keyword">then</span><br>        killall keepalived<br>    <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></p></li></ul><h2 id="å¯åŠ¨-nginx">å¯åŠ¨ Nginx</h2><ul><li>åˆ†åˆ«å¯åŠ¨ä¸»ä» Nginxï¼Œåˆ‡æ¢åˆ° <code>/usr/local/nginx/sbin/</code>ï¼Œæ‰§è¡Œ<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./nginx<br></code></pre></td></tr></table></figure> å¯åŠ¨ Nginxï¼Œå¦‚æœå·²ç»å¯åŠ¨è¿‡ï¼Œå°±é€‰æ‹©é‡å¯ <figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./nginx</span> -s <span class="hljs-keyword">reload</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="æµ‹è¯•-nginx-æ˜¯å¦å¯åŠ¨æˆåŠŸ">æµ‹è¯• Nginx æ˜¯å¦å¯åŠ¨æˆåŠŸ</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> -ef | <span class="hljs-keyword">grep</span> nginx<br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨-keepalived">å¯åŠ¨ keepalived</h2><ul><li>CentOs 6<ul><li>å¯åŠ¨ keepalived <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">service keepalived <span class="hljs-literal">start</span><br></code></pre></td></tr></table></figure></li><li>åœæ­¢ keepalived <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">service keepalived stop<br></code></pre></td></tr></table></figure></li><li>é‡å¯ keepalived <figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">service keepalived restart</span><br></code></pre></td></tr></table></figure></li></ul></li><li>CentOs 7<ul><li>å¯åŠ¨ keepalived <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> keepalived.service<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="æµ‹è¯•-keepalived-æ˜¯å¦å¯åŠ¨æˆåŠŸ">æµ‹è¯• keepalived æ˜¯å¦å¯åŠ¨æˆåŠŸ</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> -ef | <span class="hljs-keyword">grep</span> keepalived<br></code></pre></td></tr></table></figure><h1 id="æœ€ç»ˆæµ‹è¯•">5. æœ€ç»ˆæµ‹è¯•</h1><ul><li><p>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥è™šæ‹Ÿ ipåœ°å€ï¼š<code>http://192.168.77.50/</code> æ­¤æ—¶ä¾¿å¯ä»¥é€šè¿‡è™šæ‹Ÿ ipåœ°å€è®¿é—®åˆ° Nginxã€‚</p></li><li><p>æŠŠä¸»æœåŠ¡å™¨ï¼ˆ192.168.77.130ï¼‰nginx å’Œ keepalived åœæ­¢ï¼Œå†è¾“å…¥192.168.77.50 æ­¤æ—¶ä¸»æœº 192.168.77.130 å®•æœºäº†ï¼Œä»æœºå˜ä¸ºä¸»æœºã€‚</p></li></ul><h1 id="ä¸»æœºåç§°-å’Œ-ip-æ˜ å°„">6. ä¸»æœºåç§° å’Œ ip æ˜ å°„</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure><p>æ·»åŠ å†…å®¹ï¼š <figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1</span> LVS_DEVEL<br></code></pre></td></tr></table></figure> ä¾¿å¯ä»¥å°†ä¸»æœºåå’Œipåœ°å€è¿›è¡Œæ˜ å°„ã€‚<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><br>è¯·æ³¨æ„ï¼ŒMarkdownæ ¼å¼ä¸­çš„ä»£ç å—ä½¿ç”¨ä¸‰ä¸ªåå¼•å·```æ¥æ ‡è®°ï¼Œè€Œæ•°å­¦å…¬å¼ä½¿ç”¨`$å…¬å¼$`æ¥æ ‡è®°ã€‚ç”±äºåŸæ–‡ä¸­æ²¡æœ‰æ˜ç¡®çš„æ•°å­¦å…¬å¼ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰ä½¿ç”¨`$å…¬å¼$`æ ¼å¼ã€‚å¦‚æœæœ‰ä»»ä½•æ•°å­¦å…¬å¼éœ€è¦ç‰¹åˆ«æ ‡è®°ï¼Œè¯·æŒ‡å‡ºã€‚<br></code></pre></td></tr></table></figure></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. Nginx é…ç½®å®ä¾‹-åŠ¨é™åˆ†ç¦»</title>
    <link href="/2024/12/15/nginx/7-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/"/>
    <url>/2024/12/15/nginx/7-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/</url>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹æ˜¯æ–‡ç« å†…å®¹çš„Markdownæ ¼å¼è¾“å‡ºï¼Œæ³¨æ„æ•°å­¦å…¬å¼å·²ç»ä½¿ç”¨<code>$å…¬å¼$</code>æ ¼å¼ï¼š</p><h1 id="ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»">1. ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»</h1><p><img src="/2024/12/15/nginx/7-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/a847f6b53135cd5b13a1127d06dbcb16.png"></p><p>NginxåŠ¨é™åˆ†ç¦»ç®€å•æ¥è¯´å°±æ˜¯æŠŠåŠ¨æ€è·Ÿé™æ€è¯·æ±‚åˆ†å¼€ï¼Œä¸èƒ½ç†è§£æˆåªæ˜¯å•çº¯çš„æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç‰©ç†åˆ†ç¦»ã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´åº”è¯¥æ˜¯åŠ¨æ€è¯·æ±‚è·Ÿé™æ€è¯·æ±‚åˆ†å¼€ï¼Œå¯ä»¥ç†è§£æˆä½¿ç”¨Nginx å¤„ç†é™æ€é¡µé¢ï¼ŒTomcatå¤„ç†åŠ¨æ€é¡µé¢ã€‚åŠ¨é™åˆ†ç¦»ä»ç›®å‰å®ç°è§’åº¦æ¥è®²å¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼Œ</p><p>ä¸€ç§æ˜¯çº¯ç²¹æŠŠé™æ€æ–‡ä»¶ç‹¬ç«‹æˆå•ç‹¬çš„åŸŸåï¼Œæ”¾åœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿæ˜¯ç›®å‰ä¸»æµæ¨å´‡çš„æ–¹æ¡ˆï¼›</p><p>å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯åŠ¨æ€è·Ÿé™æ€æ–‡ä»¶æ··åˆåœ¨ä¸€èµ·å‘å¸ƒï¼Œé€šè¿‡ nginx æ¥åˆ†å¼€ã€‚</p><p>é€šè¿‡ location æŒ‡å®šä¸åŒçš„åç¼€åå®ç°ä¸åŒçš„è¯·æ±‚è½¬å‘ã€‚é€šè¿‡<code>expires</code>å‚æ•°è®¾ç½®ï¼Œå¯ä»¥ä½¿æµè§ˆå™¨ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå‡å°‘ä¸æœåŠ¡å™¨ä¹‹å‰çš„è¯·æ±‚å’Œæµé‡ã€‚å…·ä½“Expireså®šä¹‰ï¼šæ˜¯ç»™ä¸€ä¸ªèµ„æºè®¾å®šä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´æ— éœ€å»æœåŠ¡ç«¯éªŒè¯ï¼Œç›´æ¥é€šè¿‡æµè§ˆå™¨è‡ªèº«ç¡®è®¤æ˜¯å¦è¿‡æœŸå³å¯ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”Ÿé¢å¤–çš„æµé‡ã€‚æ­¤ç§æ–¹æ³•éå¸¸é€‚åˆä¸ç»å¸¸å˜åŠ¨çš„èµ„æºã€‚ï¼ˆå¦‚æœç»å¸¸æ›´æ–°çš„æ–‡ä»¶ï¼Œä¸å»ºè®®ä½¿ç”¨Expires æ¥ç¼“å­˜ï¼‰ï¼Œæˆ‘è¿™é‡Œè®¾ç½® 3dï¼Œè¡¨ç¤ºåœ¨è¿™ 3 å¤©ä¹‹å†…è®¿é—®è¿™ä¸ªURLï¼Œå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œæ¯”å¯¹æœåŠ¡å™¨è¯¥æ–‡ä»¶æœ€åæ›´æ–°æ—¶é—´æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸ä¼šä»æœåŠ¡å™¨æŠ“å–ï¼Œè¿”å›çŠ¶æ€ç 304ï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼Œåˆ™ç›´æ¥ä»æœåŠ¡å™¨é‡æ–°ä¸‹è½½ï¼Œè¿”å›çŠ¶æ€ç 200ã€‚</p><h1 id="å‡†å¤‡å·¥ä½œ">2. å‡†å¤‡å·¥ä½œ</h1><p>åœ¨ liunx ç³»ç»Ÿä¸­å‡†å¤‡é™æ€èµ„æºï¼Œç”¨äºè¿›è¡Œè®¿é—®</p><p>www ä¸­å­˜æ”¾ a.htmlï¼Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>test html !!!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><p>image ä¸­å­˜æ”¾ 1.PNGï¼Œ</p><h1 id="å…·ä½“é…ç½®">3. å…·ä½“é…ç½®</h1><p>åœ¨ nginx é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><p>æ·»åŠ ç›‘å¬ç«¯å£ã€Nginx åœ°å€ ã€è®¿é—®åå­— é‡ç‚¹æ˜¯æ·»åŠ  location</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> /www/ &#123;<br>        <span class="hljs-attribute">root</span>   /data/;<br>        <span class="hljs-attribute">index</span>  index.html index.htm;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> /image/ &#123;<br>        <span class="hljs-attribute">root</span>   /data/;<br>        <span class="hljs-attribute">autoindex</span> <span class="hljs-literal">on</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>autoindex onï¼šç›®çš„æ˜¯ä¸ºäº†åœ¨è®¿é—® /imageæ—¶ï¼Œèƒ½å¤Ÿæ˜¾ç¤ºç›®å½•é‡Œé¢çš„å†…å®¹ï¼Œå½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥é€šè¿‡ <code>expire</code>è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´ã€‚</p><h1 id="æœ€ç»ˆæµ‹è¯•">4. æœ€ç»ˆæµ‹è¯•</h1><p>é‡å¯ Nginx</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./nginx</span> -s <span class="hljs-keyword">reload</span><br></code></pre></td></tr></table></figure><p>è®¿é—®ï¼Œ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">77.130</span><span class="hljs-regexp">/www/</span>a.html<br></code></pre></td></tr></table></figure><p>è®¿é—®ï¼Œ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">77.130</span><span class="hljs-regexp">/image/</span><br></code></pre></td></tr></table></figure><p>è¿™å°±æ˜¯å› ä¸ºåˆšåˆšé…ç½®äº† autoindex on ã€‚</p><p>è®¿é—®ï¼Œ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">http</span>://<span class="hljs-number">192.168.77.130</span>/image/<span class="hljs-number">1</span>.PNG<br></code></pre></td></tr></table></figure><p>æˆåŠŸè®¿é—®ï¼Œè¯´æ˜ é™æ€èµ„æº nginx ç›´æ¥è¿”å›äº†ï¼Œä¸èµ°åç«¯ tomcatæœåŠ¡å™¨ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_processes</span>  <span class="hljs-number">1</span>;<br><br><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;<br>&#125;<br><br><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">include</span>       mime.types;<br>    <span class="hljs-attribute">default_type</span>  application/octet-stream;<br><br>    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;<br> <br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span>  <span class="hljs-number">192.168.226.135</span>;<br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>            <span class="hljs-attribute">index</span>  index.html index.htm;<br>        &#125;<br><br>        <span class="hljs-section">location</span> /www/ &#123;<br>                <span class="hljs-attribute">root</span>   /home/star/data/;<br>                <span class="hljs-attribute">index</span>  index.html index.htm;<br>            &#125;<br><br>        <span class="hljs-section">location</span> /image/ &#123;<br>                <span class="hljs-attribute">root</span>   /home/star/data/;<br>            <span class="hljs-attribute">autoindex</span> <span class="hljs-literal">on</span>;<br>        &#125;<br><br>        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>        <span class="hljs-section">location</span> = /50x.html &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. Nginx é…ç½®å®ä¾‹-è´Ÿè½½å‡è¡¡</title>
    <link href="/2024/12/15/nginx/6-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    <url>/2024/12/15/nginx/6-Nginx%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹æ˜¯æ–‡ç« å†…å®¹çš„Markdownæ ¼å¼è¾“å‡ºï¼Œæ³¨æ„æ•°å­¦å…¬å¼å·²ç»ä½¿ç”¨<code>$å…¬å¼$</code>æ ¼å¼ï¼š</p><h1 id="å®ç°æ•ˆæœ">1. å®ç°æ•ˆæœ</h1><ul><li>æµè§ˆå™¨åœ°å€æ è¾“å…¥åœ°å€<code>http://192.168.17.129/edu/a.html</code>ï¼Œè´Ÿè½½å‡è¡¡æ•ˆæœï¼Œå¹³å‡åˆ°8080å’Œ8081 ç«¯å£ä¸­ã€‚</li></ul><h1 id="å‡†å¤‡å·¥ä½œ">2. å‡†å¤‡å·¥ä½œ</h1><ul><li>å‡†å¤‡ä¸¤å° tomcat æœåŠ¡å™¨ï¼Œä¸€å° 8080ï¼Œä¸€å° 8081ã€‚</li><li>åœ¨ä¸¤å° tomcat é‡Œé¢ webapps ç›®å½•ä¸­ï¼Œåˆ›å»ºåç§°æ˜¯ edu æ–‡ä»¶å¤¹ï¼Œåœ¨ eduæ–‡ä»¶å¤¹ä¸­åˆ›å»ºé¡µé¢ a.htmlï¼Œç”¨äºæµ‹è¯•ã€‚</li></ul><h1 id="åœ¨-nginx-çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè´Ÿè½½å‡è¡¡çš„é…ç½®">3. åœ¨ nginxçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè´Ÿè½½å‡è¡¡çš„é…ç½®</h1><p>åœ¨ <code>nginx.conf</code> ä¸­æ·»åŠ ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> myserver&#123;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8080</span>;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8081</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>proxy_pass http://myserver;</code></p><hr><p>è´´ä¸€ä¸‹é…ç½®æ–‡ä»¶ä»£ç ï¼šä¸æœ¬æ–‡æ— å…³ï¼Œåªæ˜¯ä¸æƒ³æ‰‹æ•²â€¦</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_processes</span>  <span class="hljs-number">1</span>;<br><br><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;<br>&#125;<br><br><br><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">include</span>       mime.types;<br>    <span class="hljs-attribute">default_type</span>  application/octet-stream;<br><br>    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;<br><br>    <span class="hljs-section">upstream</span> myserver &#123;<br><span class="hljs-attribute">server</span> <span class="hljs-number">192.168.226.135:8080</span>;<br><span class="hljs-attribute">server</span> <span class="hljs-number">192.168.226.135:8081</span>;<br>&#125;<br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span>  <span class="hljs-number">192.168.226.135</span>;<br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">root</span>   html;<br><span class="hljs-attribute">proxy_pass</span> http://myserver;<br>            <span class="hljs-attribute">index</span>  index.html index.htm;<br>        &#125;<br><br>  <br>        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>        <span class="hljs-section">location</span> = /50x.html &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>        &#125;<br><br>    &#125;<br><br>   <br>&#125;<br></code></pre></td></tr></table></figure><hr><h1 id="é‡å¯-nginx">4. é‡å¯ Nginx</h1><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./nginx</span> -s <span class="hljs-keyword">reload</span><br></code></pre></td></tr></table></figure><h1 id="æµ‹è¯•">5. æµ‹è¯•</h1><p>è®¿é—®ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">192.168</span>.<span class="hljs-number">226.135</span><span class="hljs-regexp">/edu/</span>a.html<br></code></pre></td></tr></table></figure><p>è®¿é—®ç»“æœåœ¨ 8081 å’Œ 8080 ä¹‹é—´åˆ‡æ¢ã€‚</p><hr><h1 id="è´Ÿè½½å‡è¡¡ç­–ç•¥">6. è´Ÿè½½å‡è¡¡ç­–ç•¥</h1><p>éšç€äº’è”ç½‘ä¿¡æ¯çš„çˆ†ç‚¸æ€§å¢é•¿ï¼Œè´Ÿè½½å‡è¡¡ï¼ˆloadbalanceï¼‰å·²ç»ä¸å†æ˜¯ä¸€ä¸ªå¾ˆé™Œç”Ÿçš„è¯é¢˜ï¼Œé¡¾åæ€ä¹‰ï¼Œè´Ÿè½½å‡è¡¡å³æ˜¯å°†è´Ÿè½½åˆ†æ‘Šåˆ°ä¸åŒçš„æœåŠ¡å•å…ƒï¼Œæ—¢ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œåˆä¿è¯å“åº”è¶³å¤Ÿå¿«ï¼Œç»™ç”¨æˆ·å¾ˆå¥½çš„ä½“éªŒã€‚å¿«é€Ÿå¢é•¿çš„è®¿é—®é‡å’Œæ•°æ®æµé‡å‚¬ç”Ÿäº†å„å¼å„æ ·çš„è´Ÿè½½å‡è¡¡äº§å“ï¼Œå¾ˆå¤šä¸“ä¸šçš„è´Ÿè½½å‡è¡¡ç¡¬ä»¶æä¾›äº†å¾ˆå¥½çš„åŠŸèƒ½ï¼Œä½†å´ä»·æ ¼ä¸è²ï¼Œè¿™ä½¿å¾—è´Ÿè½½å‡è¡¡è½¯ä»¶å¤§å—æ¬¢è¿ï¼Œnginxå°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªï¼Œåœ¨ linux ä¸‹æœ‰ Nginxã€LVSã€Haproxyç­‰ç­‰æœåŠ¡å¯ä»¥æä¾›è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œè€Œä¸” Nginxæä¾›äº†å‡ ç§åˆ†é…æ–¹å¼ï¼ˆç­–ç•¥ï¼‰ï¼š</p><h2 id="è½®è¯¢é»˜è®¤">6.1 è½®è¯¢ï¼ˆé»˜è®¤ï¼‰</h2><p>æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨ downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> myserver&#123;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8080</span>;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8081</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="weight">6.2 weight</h2><p>weight ä»£è¡¨æƒé‡ï¼Œé»˜è®¤ä¸º 1ï¼Œæƒé‡è¶Šé«˜è¢«åˆ†é…çš„å®¢æˆ·ç«¯è¶Šå¤šã€‚</p><p>æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> myserver&#123;<br>          <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8080</span> weight=<span class="hljs-number">10</span>;<br>          <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8081</span> weight=<span class="hljs-number">5</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ip_hash">6.3 ip_hash</h2><p>æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® ip çš„ hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³ sessionçš„é—®é¢˜ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯åœ¨ç¬¬ä¸€æ¬¡è®¿é—®æŸä¸ªæœåŠ¡åï¼Œåé¢éƒ½æ˜¯è®¿é—®æ­¤æœåŠ¡ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> myserver&#123;<br>            ip_hash;<br>            <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8080</span>;<br>            <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8081</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="fairç¬¬ä¸‰æ–¹">6.4 fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰</h2><p>æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> myserver&#123;<br>             <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8080</span>;<br>             <span class="hljs-attribute">server</span> <span class="hljs-number">192.168.77.130:8081</span>;<br>             fair;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. Nginx åå‘ä»£ç†å®ä¾‹ 2</title>
    <link href="/2024/12/15/nginx/5-Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E4%BE%8B2/"/>
    <url>/2024/12/15/nginx/5-Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E4%BE%8B2/</url>
    
    <content type="html"><![CDATA[<h1 id="å®ç°æ•ˆæœ">1. å®ç°æ•ˆæœ</h1><p>ä½¿ç”¨ nginx åå‘ä»£ç†ï¼Œæ ¹æ®è®¿é—®çš„è·¯å¾„è·³è½¬åˆ°ä¸åŒç«¯å£çš„æœåŠ¡ä¸­ï¼Œ</p><p>nginx ç›‘å¬ç«¯å£ä¸º 9001</p><ul><li>è®¿é—® http://192.168.17.129:9001/edu/ ç›´æ¥è·³è½¬åˆ° 127.0.0.1:8080</li><li>è®¿é—® http://192.168.17.129:9001/vod/ ç›´æ¥è·³è½¬åˆ° 127.0.0.1:8081</li></ul><h1 id="å‡†å¤‡å·¥ä½œ">2ã€å‡†å¤‡å·¥ä½œ</h1><p>ï¼ˆ1ï¼‰å‡†å¤‡ä¸¤ä¸ª tomcat æœåŠ¡å™¨ï¼Œä¸€ä¸ª 8080 ç«¯å£ï¼Œä¸€ä¸ª 8081 ç«¯å£</p><p>è¿™ä¸ªåœ°æ–¹ï¼Œéœ€è¦å°†å…¶ä¸­ä»£è¡¨ 8081 çš„æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹ï¼Œè¿›å…¥åˆ°<code>/Tomcat8081/apache-tomcat-7.0.106/conf</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim server.xml<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰åˆ›å»ºæ–‡ä»¶å¤¹å’Œæµ‹è¯•é¡µé¢</p><blockquote><p>è¯´æ˜ï¼štomcat åŠ è½½æ˜¯åŠ è½½çš„ webapps ä¸­çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ”¾åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ã€‚</p></blockquote><p>åœ¨ <code>/Tomcat8080/apache-tomcat-7.0.106/webapps</code> ä¸­ï¼Œæ–°å»ºedu æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶ a.htmlï¼Œ å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>8080<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>/Tomcat8081/apache-tomcat-7.0.106/webapps</code> ä¸­ï¼Œæ–°å»ºvod æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶ a.htmlï¼Œ å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>8081<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="å…·ä½“é…ç½®">3ã€å…·ä½“é…ç½®</h1><p>ï¼ˆ1ï¼‰æ‰¾åˆ° nginx é…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œåå‘ä»£ç†é…ç½®</p><blockquote><p>ä¸‰å¤„æ”¹å˜ï¼šç›‘å¬ç«¯å£ + nginxåœ°å€ + è½¬å‘åœ°å€</p></blockquote><p>ï¼ˆ2ï¼‰å¼€æ”¾å¯¹å¤–è®¿é—®çš„ç«¯å£å· 9001 8080 8081</p><h1 id="æœ€ç»ˆæµ‹è¯•">4ã€æœ€ç»ˆæµ‹è¯•</h1><p>é‡å¯ nginxï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx -s reload<br></code></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_processes</span>  <span class="hljs-number">1</span>;<br><br><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;<br>&#125;<br><br><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">include</span>       mime.types;<br>    <span class="hljs-attribute">default_type</span>  application/octet-stream;<br><br>    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;<br>    <br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span>  <span class="hljs-number">192.168.226.135</span>;<br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>    <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080;<br>            <span class="hljs-attribute">index</span>  index.html index.htm;<br>        &#125;<br>        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>        <span class="hljs-section">location</span> = /50x.html &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">9001</span>;<br>        <span class="hljs-attribute">server_name</span>  <span class="hljs-number">192.168.226.135</span>;<br><br>        <span class="hljs-section">location</span> <span class="hljs-regexp">~ /edu/</span> &#123;<br>            <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080;<br>        &#125;<br><br><span class="hljs-section">location</span> <span class="hljs-regexp">~ /vod/</span> &#123;<br>            <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8081;<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="location-æŒ‡ä»¤è¯´æ˜">location æŒ‡ä»¤è¯´æ˜</h3><p>è¯¥æŒ‡ä»¤ç”¨äºåŒ¹é… URLã€‚</p><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><p>1ã€<code>=</code> ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚è¯·æ±‚å­—ç¬¦ä¸²ä¸ uriä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå°±åœæ­¢ç»§ç»­å‘ä¸‹æœç´¢å¹¶ç«‹å³å¤„ç†è¯¥è¯·æ±‚ã€‚2ã€<code>~</code>ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™ã€‚3ã€<code>~*</code>ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚4ã€<code>^~</code>ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚ NginxæœåŠ¡å™¨æ‰¾åˆ°æ ‡è¯† uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…åº¦æœ€é«˜çš„ location åï¼Œç«‹å³ä½¿ç”¨æ­¤location å¤„ç†è¯·æ±‚ï¼Œè€Œä¸å†ä½¿ç”¨ location å—ä¸­çš„æ­£åˆ™ uriå’Œè¯·æ±‚å­—ç¬¦ä¸²åšåŒ¹é…ã€‚</p><p><strong>æ³¨æ„ï¼š</strong> å¦‚æœ uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»è¦æœ‰<code>~</code> æˆ–è€… <code>~*</code> æ ‡è¯†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. Nginx åå‘ä»£ç†å®ä¾‹ 1</title>
    <link href="/2024/12/15/nginx/4-Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E4%BE%8B2/"/>
    <url>/2024/12/15/nginx/4-Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E4%BE%8B2/</url>
    
    <content type="html"><![CDATA[<h1 id="å®ç°æ•ˆæœ">1. å®ç°æ•ˆæœ</h1><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥åœ°å€ www.123.comï¼Œè·³è½¬åˆ° liunx ç³»ç»Ÿtomcat ä¸»é¡µé¢ä¸­ã€‚</p><h1 id="å‡†å¤‡å·¥ä½œ">2. å‡†å¤‡å·¥ä½œ</h1><h2 id="ä¸‹è½½-tomcat">2.1 ä¸‹è½½ tomcat</h2><p>å®˜ç½‘ï¼š<a href="https://tomcat.apache.org/download-70.cgi">https://tomcat.apache.org/download-70.cgi</a></p><h2 id="liunx-ç³»ç»Ÿå®‰è£…-tomcat">2.2 liunx ç³»ç»Ÿå®‰è£… tomcat</h2><p>å°† tomcat å®‰è£…æ–‡ä»¶æ”¾åˆ° liunx ç³»ç»Ÿä¸­ï¼Œè§£å‹ï¼Œ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -xvf apache-tomcat-7.0.106.tar.gz<br></code></pre></td></tr></table></figure> è¿›å…¥ tomcatçš„ bin ç›®å½•ä¸­ï¼Œ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./startup.sh<br></code></pre></td></tr></table></figure> å¯åŠ¨ tomcat æœåŠ¡å™¨ã€‚</p><h2 id="å¯¹å¤–å¼€æ”¾è®¿é—®çš„ç«¯å£">2.3 å¯¹å¤–å¼€æ”¾è®¿é—®çš„ç«¯å£</h2><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ Centos 6ï¼Œå’Œ Centos 7ä¸ä¸€æ ·ï¼ŒCentos7å¦‚ä½•å¼€æ”¾ç«¯å£ï¼Œæ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ï¼šNginx å®‰è£… <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/sysconfig/iptables<br></code></pre></td></tr></table></figure> å¼€æ”¾8080 ç«¯å£ï¼Œ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">Firewall configuration written by system-config-firewall</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Manual customization of this file is not recommended.</span><br>*filter<br>:INPUT ACCEPT [0:0]<br>:FORWARD ACCEPT [0:0]<br>:OUTPUT ACCEPT [0:0]<br>-A INPUT -m state â€“state ESTABLISHED,RELATED -j ACCEPT<br>-A INPUT -p icmp -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br><br>-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 22 -j ACCEPT<br>-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 80 -j ACCEPT<br>-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 8080 -j ACCEPT<br><br>-A INPUT -j REJECT â€“reject-with icmp-host-prohibited<br>-A FORWARD -j REJECT â€“reject-with icmp-host-prohibited<br>COMMIT<br></code></pre></td></tr></table></figure> ä¿å­˜é€€å‡ºï¼ï¼ï¼ é‡å¯é˜²ç«å¢™ <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables restart<br></code></pre></td></tr></table></figure></p><h2 id="åœ¨-windows-ç³»ç»Ÿä¸­é€šè¿‡æµè§ˆå™¨è®¿é—®-tomcat-æœåŠ¡å™¨">2.4 åœ¨ windowsç³»ç»Ÿä¸­é€šè¿‡æµè§ˆå™¨è®¿é—® tomcat æœåŠ¡å™¨</h2><p><img src="/2024/12/15/nginx/4-Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E4%BE%8B2/5ed6f680c5db55b3a9ec656fec98d69c.png"></p><h1 id="è®¿é—®è¿‡ç¨‹çš„åˆ†æ">3ã€è®¿é—®è¿‡ç¨‹çš„åˆ†æ</h1><p><img src="/2024/12/15/nginx/4-Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%AE%9E%E4%BE%8B2/2284bfa5a895b3156ceaf3774869470c.png"></p><h1 id="å…·ä½“é…ç½®">4ã€å…·ä½“é…ç½®</h1><p>ç¬¬ä¸€æ­¥ï¼šåœ¨ windows ç³»ç»Ÿçš„ host æ–‡ä»¶è¿›è¡ŒåŸŸåå’Œ ip å¯¹åº”å…³ç³»çš„é…ç½®</p><p>C:/Windows/System32/drivers/etc/hosts</p><p>æœ«å°¾æ·»åŠ ï¼Œå°† www.123.com æ˜ å°„åˆ° 192.168.77.130</p><blockquote><p>è¿™é‡Œçš„ ip æ˜¯ linux çš„åœ°å€ <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">192.168.226.135   www.123.com<br></code></pre></td></tr></table></figure></p></blockquote><p>é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡ www.123.com:8080 è®¿é—®åˆ°ç¬¬ä¸€æ­¥å‡ºç°çš„Tomcat åˆå§‹ç•Œé¢ã€‚é‚£ä¹ˆå¦‚ä½•åªéœ€è¦è¾“å…¥ www.123.com ä¾¿å¯ä»¥è·³è½¬åˆ° Tomcatåˆå§‹ç•Œé¢å‘¢ï¼Ÿä¾¿ç”¨åˆ° nginx çš„åå‘ä»£ç†ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šåœ¨ nginx è¿›è¡Œè¯·æ±‚è½¬å‘çš„é…ç½®ï¼ˆåå‘ä»£ç†é…ç½®ï¼‰ &gt; æ–‡ä»¶åœ°å€ï¼š<code>/usr/local/nginx/conf</code> &gt; &gt; ä¸¤å¤„æ”¹å˜ï¼šnginx åœ°å€ +è½¬å‘åœ°å€</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs nginx"> <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span>  <span class="hljs-number">192.168.226.135</span>;<br><br>        <span class="hljs-comment">#charset koi8-r;</span><br><br>        <span class="hljs-comment">#access_log  logs/host.access.log  main;</span><br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>    <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080;<br>            <span class="hljs-attribute">index</span>  index.html index.htm;<br>        &#125;<br><br>        <span class="hljs-comment">#error_page  404              /404.html;</span><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="æœ€ç»ˆæµ‹è¯•">5ã€æœ€ç»ˆæµ‹è¯•</h1><p>åˆ‡æ¢åˆ° <code>/usr/local/nginx/sbin/</code> é‡æ–°å¯åŠ¨ nginx<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx -s reload<br></code></pre></td></tr></table></figure> è®¿é—®ï¼šwww.123.comï¼Œ</p><p>å¦‚ä¸Šé…ç½®ï¼Œæˆ‘ä»¬ç›‘å¬ 80 ç«¯å£ï¼Œè®¿é—®åŸŸåä¸ºwww.123.comï¼Œä¸åŠ ç«¯å£å·æ—¶é»˜è®¤ä¸º 80 ç«¯å£ï¼Œæ•…è®¿é—®è¯¥åŸŸåæ—¶ä¼šè·³è½¬åˆ°127.0.0.1:8080 è·¯å¾„ä¸Šã€‚åœ¨æµè§ˆå™¨ç«¯è¾“å…¥ www.123.com ç»“æœå¦‚ä¸‹ï¼š</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. nginx.confé…ç½®æ–‡ä»¶</title>
    <link href="/2024/12/15/nginx/3-nginx-conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <url>/2024/12/15/nginx/3-nginx-conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>nginx å®‰è£…ç›®å½•ä¸‹ï¼Œå…¶é»˜è®¤çš„é…ç½®æ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•çš„ confç›®å½•ä¸‹ï¼Œè€Œä¸»é…ç½®æ–‡ä»¶ nginx.conf ä¹Ÿåœ¨å…¶ä¸­ï¼Œåç»­å¯¹ nginxçš„ä½¿ç”¨åŸºæœ¬ä¸Šéƒ½æ˜¯å¯¹æ­¤é…ç½®æ–‡ä»¶è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚</p><p><img src="/2024/12/15/nginx/3-nginx-conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/image-20241215120659660.png"></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#user  nobody;</span><br><span class="hljs-attribute">worker_processes</span>  <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">#error_log  logs/error.log;</span><br><span class="hljs-comment">#error_log  logs/error.log  notice;</span><br><span class="hljs-comment">#error_log  logs/error.log  info;</span><br><br><span class="hljs-comment">#pid        logs/nginx.pid;</span><br><br><br><span class="hljs-section">events</span> &#123;<br><span class="hljs-comment">#    use eopll;</span><br>    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;<br>&#125;<br><br><br><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">include</span>       mime.types;<br>    <span class="hljs-attribute">default_type</span>  application/octet-stream;<br><br>    <span class="hljs-comment">#log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br>    <span class="hljs-comment">#                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br>    <span class="hljs-comment">#                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><br>    <span class="hljs-comment">#access_log  logs/access.log  main;</span><br><br>    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;<br>    <span class="hljs-comment">#tcp_nopush     on;</span><br><br>    <span class="hljs-comment">#keepalive_timeout  0;</span><br>    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;<br><br>    <span class="hljs-comment">#gzip  on;</span><br><br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span>  localhost;<br><br>        <span class="hljs-comment">#charset koi8-r;</span><br><br>        <span class="hljs-comment">#access_log  logs/host.access.log  main;</span><br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">root</span> zyFile2;    <br>    <span class="hljs-attribute">index</span> upload.html;        <br>&#125;<br><span class="hljs-section">location</span> /Myupload<br>&#123;<br>    <span class="hljs-attribute">fastcgi_pass</span> <span class="hljs-number">127.0.0.1:10000</span>;<br>    <span class="hljs-attribute">include</span> fastcgi.conf;<br>&#125;<br><span class="hljs-section">location</span> /group1/M00<br>&#123;<br>    <span class="hljs-attribute">root</span> /home/star/project/fastdfs/storage/data;<br>    ngx_fastdfs_module;<br>&#125;<br><span class="hljs-section">location</span> /hello/<br>&#123;<br>    <span class="hljs-attribute">root</span> yundisk;<br>&#125;<br><span class="hljs-section">location</span> /upload/<br>&#123;<br>    <span class="hljs-attribute">root</span> yundisk;<br>    <span class="hljs-attribute">index</span> upload.html;<br>&#125;<br><span class="hljs-section">location</span> /uploadFile<br>&#123;<br>    <span class="hljs-attribute">fastcgi_pass</span> localhost:<span class="hljs-number">9999</span>;<br>    <span class="hljs-attribute">include</span> fastcgi.conf;<br>    <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">10240m</span>;<br>&#125;<br>        <span class="hljs-comment">#error_page  404              /404.html;</span><br><br>        <span class="hljs-comment"># redirect server error pages to the static page /50x.html</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>        <span class="hljs-section">location</span> = /50x.html &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>        &#125;<br><br>        <span class="hljs-comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>        <span class="hljs-comment">#    proxy_pass   http://127.0.0.1;</span><br>        <span class="hljs-comment">#&#125;</span><br><br>        <span class="hljs-comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>        <span class="hljs-comment">#    root           html;</span><br>        <span class="hljs-comment">#    fastcgi_pass   127.0.0.1:9000;</span><br>        <span class="hljs-comment">#    fastcgi_index  index.php;</span><br>        <span class="hljs-comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br>        <span class="hljs-comment">#    include        fastcgi_params;</span><br>        <span class="hljs-comment">#&#125;</span><br><br>        <span class="hljs-comment"># deny access to .htaccess files, if Apache&#x27;s document root</span><br>        <span class="hljs-comment"># concurs with nginx&#x27;s one</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-comment">#location ~ /\.ht &#123;</span><br>        <span class="hljs-comment">#    deny  all;</span><br>        <span class="hljs-comment">#&#125;</span><br>    &#125;<br><br><br>    <span class="hljs-comment"># another virtual host using mix of IP-, name-, and port-based configuration</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#server &#123;</span><br>    <span class="hljs-comment">#    listen       8000;</span><br>    <span class="hljs-comment">#    listen       somename:8080;</span><br>    <span class="hljs-comment">#    server_name  somename  alias  another.alias;</span><br><br>    <span class="hljs-comment">#    location / &#123;</span><br>    <span class="hljs-comment">#        root   html;</span><br>    <span class="hljs-comment">#        index  index.html index.htm;</span><br>    <span class="hljs-comment">#    &#125;</span><br>    <span class="hljs-comment">#&#125;</span><br><br><br>    <span class="hljs-comment"># HTTPS server</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#server &#123;</span><br>    <span class="hljs-comment">#    listen       443 ssl;</span><br>    <span class="hljs-comment">#    server_name  localhost;</span><br><br>    <span class="hljs-comment">#    ssl_certificate      cert.pem;</span><br>    <span class="hljs-comment">#    ssl_certificate_key  cert.key;</span><br><br>    <span class="hljs-comment">#    ssl_session_cache    shared:SSL:1m;</span><br>    <span class="hljs-comment">#    ssl_session_timeout  5m;</span><br><br>    <span class="hljs-comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br>    <span class="hljs-comment">#    ssl_prefer_server_ciphers  on;</span><br><br>    <span class="hljs-comment">#    location / &#123;</span><br>    <span class="hljs-comment">#        root   html;</span><br>    <span class="hljs-comment">#        index  index.html index.htm;</span><br>    <span class="hljs-comment">#    &#125;</span><br>    <span class="hljs-comment">#&#125;</span><br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬ä¸€éƒ¨åˆ†å…¨å±€å—">1. ç¬¬ä¸€éƒ¨åˆ†ï¼šå…¨å±€å—</h1><p>ä»é…ç½®æ–‡ä»¶å¼€å§‹åˆ° events å—ä¹‹é—´çš„å†…å®¹ï¼Œä¸»è¦ä¼šè®¾ç½®ä¸€äº›å½±å“ nginxæœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ï¼Œä¸»è¦åŒ…æ‹¬é…ç½®è¿è¡Œ NginxæœåŠ¡å™¨çš„ç”¨æˆ·ï¼ˆç»„ï¼‰ã€å…è®¸ç”Ÿæˆçš„ worker process æ•°ï¼Œè¿›ç¨‹ PIDå­˜æ”¾è·¯å¾„ã€æ—¥å¿—å­˜æ”¾è·¯å¾„å’Œç±»å‹ä»¥åŠé…ç½®æ–‡ä»¶çš„å¼•å…¥ç­‰ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#user  nobody;</span><br><span class="hljs-attribute">worker_processes</span>  <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">#error_log  logs/error.log;</span><br><span class="hljs-comment">#error_log  logs/error.log  notice;</span><br><span class="hljs-comment">#error_log  logs/error.log  info;</span><br><br><span class="hljs-comment">#pid        logs/nginx.pid;</span><br><br><br><span class="hljs-section">events</span> &#123;<br><span class="hljs-comment">#    use eopll;</span><br>    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;<br>&#125;<br>------------------------------------------------------------------<br><br></code></pre></td></tr></table></figure><p>æ¯”å¦‚ä¸Šé¢ç¬¬ä¸€è¡Œé…ç½®çš„ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_processes</span> <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ Nginx æœåŠ¡å™¨å¹¶å‘å¤„ç†æœåŠ¡çš„å…³é”®é…ç½®ï¼Œ<span class="math inline">\(\text{worker_processes}\)</span>å€¼è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒçš„ <strong>å¹¶å‘å¤„ç†é‡</strong>ä¹Ÿè¶Šå¤šï¼Œä½†æ˜¯ä¼šå—åˆ°ç¡¬ä»¶ã€è½¯ä»¶ç­‰è®¾å¤‡çš„åˆ¶çº¦ã€‚</p><h1 id="ç¬¬äºŒéƒ¨åˆ†events-å—">2. ç¬¬äºŒéƒ¨åˆ†ï¼ševents å—</h1><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">events</span> &#123;<br><span class="hljs-comment">#    use eopll;</span><br>    <span class="hljs-attribute">worker_connections</span>  <span class="hljs-number">1024</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¯”å¦‚ä¸Šé¢çš„é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;<br></code></pre></td></tr></table></figure><p>events å—æ¶‰åŠçš„æŒ‡ä»¤ä¸»è¦å½±å“ NginxæœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼Œå¸¸ç”¨çš„è®¾ç½®åŒ…æ‹¬æ˜¯å¦å¼€å¯å¯¹å¤š work processä¸‹çš„ç½‘ç»œè¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥æ”¶å¤šä¸ªç½‘ç»œè¿æ¥ï¼Œé€‰å–å“ªç§äº‹ä»¶é©±åŠ¨æ¨¡å‹æ¥å¤„ç†è¿æ¥è¯·æ±‚ï¼Œæ¯ä¸ªwork process å¯ä»¥åŒæ—¶æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°ç­‰ã€‚</p><p>ä¸Šè¿°ä¾‹å­å°±è¡¨ç¤ºæ¯ä¸ª work process æ”¯æŒçš„æœ€å¤§ <strong>è¿æ¥æ•°</strong> ä¸º<span class="math inline">\(1024\)</span>. è¿™éƒ¨åˆ†çš„é…ç½®å¯¹ Nginxçš„æ€§èƒ½å½±å“è¾ƒå¤§ï¼Œåœ¨å®é™…ä¸­åº”è¯¥çµæ´»é…ç½®ã€‚</p><h1 id="ç¬¬ä¸‰éƒ¨åˆ†http-å—">3. ç¬¬ä¸‰éƒ¨åˆ†ï¼šhttp å—</h1><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">include</span>       mime.types;<br>    <span class="hljs-attribute">default_type</span>  application/octet-stream;<br><br>    <span class="hljs-comment">#log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br>    <span class="hljs-comment">#                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br>    <span class="hljs-comment">#                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><br>    <span class="hljs-comment">#access_log  logs/access.log  main;</span><br><br>    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;<br>    <span class="hljs-comment">#tcp_nopush     on;</span><br><br>    <span class="hljs-comment">#keepalive_timeout  0;</span><br>    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;<br><br>    <span class="hljs-comment">#gzip  on;</span><br><br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>        <span class="hljs-attribute">server_name</span>  localhost;<br><br>        <span class="hljs-comment">#charset koi8-r;</span><br><br>        <span class="hljs-comment">#access_log  logs/host.access.log  main;</span><br><br>        <span class="hljs-section">location</span> / &#123;<br>            <span class="hljs-attribute">root</span> zyFile2;    <br>    <span class="hljs-attribute">index</span> upload.html;        <br>&#125;<br><span class="hljs-section">location</span> /Myupload<br>&#123;<br>    <span class="hljs-attribute">fastcgi_pass</span> <span class="hljs-number">127.0.0.1:10000</span>;<br>    <span class="hljs-attribute">include</span> fastcgi.conf;<br>&#125;<br><span class="hljs-section">location</span> /group1/M00<br>&#123;<br>    <span class="hljs-attribute">root</span> /home/star/project/fastdfs/storage/data;<br>    ngx_fastdfs_module;<br>&#125;<br><span class="hljs-section">location</span> /hello/<br>&#123;<br>    <span class="hljs-attribute">root</span> yundisk;<br>&#125;<br><span class="hljs-section">location</span> /upload/<br>&#123;<br>    <span class="hljs-attribute">root</span> yundisk;<br>    <span class="hljs-attribute">index</span> upload.html;<br>&#125;<br><span class="hljs-section">location</span> /uploadFile<br>&#123;<br>    <span class="hljs-attribute">fastcgi_pass</span> localhost:<span class="hljs-number">9999</span>;<br>    <span class="hljs-attribute">include</span> fastcgi.conf;<br>    <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">10240m</span>;<br>&#125;<br>        <span class="hljs-comment">#error_page  404              /404.html;</span><br><br>        <span class="hljs-comment"># redirect server error pages to the static page /50x.html</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>        <span class="hljs-section">location</span> = /50x.html &#123;<br>            <span class="hljs-attribute">root</span>   html;<br>        &#125;<br><br>        <span class="hljs-comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>        <span class="hljs-comment">#    proxy_pass   http://127.0.0.1;</span><br>        <span class="hljs-comment">#&#125;</span><br><br>        <span class="hljs-comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>        <span class="hljs-comment">#    root           html;</span><br>        <span class="hljs-comment">#    fastcgi_pass   127.0.0.1:9000;</span><br>        <span class="hljs-comment">#    fastcgi_index  index.php;</span><br>        <span class="hljs-comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br>        <span class="hljs-comment">#    include        fastcgi_params;</span><br>        <span class="hljs-comment">#&#125;</span><br><br>        <span class="hljs-comment"># deny access to .htaccess files, if Apache&#x27;s document root</span><br>        <span class="hljs-comment"># concurs with nginx&#x27;s one</span><br>        <span class="hljs-comment">#</span><br>        <span class="hljs-comment">#location ~ /\.ht &#123;</span><br>        <span class="hljs-comment">#    deny  all;</span><br>        <span class="hljs-comment">#&#125;</span><br>    &#125;<br><br><br>    <span class="hljs-comment"># another virtual host using mix of IP-, name-, and port-based configuration</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#server &#123;</span><br>    <span class="hljs-comment">#    listen       8000;</span><br>    <span class="hljs-comment">#    listen       somename:8080;</span><br>    <span class="hljs-comment">#    server_name  somename  alias  another.alias;</span><br><br>    <span class="hljs-comment">#    location / &#123;</span><br>    <span class="hljs-comment">#        root   html;</span><br>    <span class="hljs-comment">#        index  index.html index.htm;</span><br>    <span class="hljs-comment">#    &#125;</span><br>    <span class="hljs-comment">#&#125;</span><br><br><br>    <span class="hljs-comment"># HTTPS server</span><br>    <span class="hljs-comment">#</span><br>    <span class="hljs-comment">#server &#123;</span><br>    <span class="hljs-comment">#    listen       443 ssl;</span><br>    <span class="hljs-comment">#    server_name  localhost;</span><br><br>    <span class="hljs-comment">#    ssl_certificate      cert.pem;</span><br>    <span class="hljs-comment">#    ssl_certificate_key  cert.key;</span><br><br>    <span class="hljs-comment">#    ssl_session_cache    shared:SSL:1m;</span><br>    <span class="hljs-comment">#    ssl_session_timeout  5m;</span><br><br>    <span class="hljs-comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br>    <span class="hljs-comment">#    ssl_prefer_server_ciphers  on;</span><br><br>    <span class="hljs-comment">#    location / &#123;</span><br>    <span class="hljs-comment">#        root   html;</span><br>    <span class="hljs-comment">#        index  index.html index.htm;</span><br>    <span class="hljs-comment">#    &#125;</span><br>    <span class="hljs-comment">#&#125;</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ç®—æ˜¯ NginxæœåŠ¡å™¨é…ç½®ä¸­æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜å’Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šhttp å—ä¹Ÿå¯ä»¥åŒ…æ‹¬ http å…¨å±€å—ã€server å—ã€‚</p><h2 id="http-å…¨å±€å—">3.1 http å…¨å±€å—</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">include</span>       mime.types;<br>    <span class="hljs-attribute">default_type</span>  application/octet-stream;<br><br>    <span class="hljs-comment">#log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br>    <span class="hljs-comment">#                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br>    <span class="hljs-comment">#                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><br>    <span class="hljs-comment">#access_log  logs/access.log  main;</span><br><br>    <span class="hljs-attribute">sendfile</span>        <span class="hljs-literal">on</span>;<br>    <span class="hljs-comment">#tcp_nopush     on;</span><br><br>    <span class="hljs-comment">#keepalive_timeout  0;</span><br>    <span class="hljs-attribute">keepalive_timeout</span>  <span class="hljs-number">65</span>;<br><br>    <span class="hljs-comment">#gzip  on;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>http å…¨å±€å—é…ç½®çš„æŒ‡ä»¤åŒ…æ‹¬æ–‡ä»¶å¼•å…¥ã€MIME-TYPEå®šä¹‰ã€æ—¥å¿—è‡ªå®šä¹‰ã€è¿æ¥è¶…æ—¶æ—¶é—´ã€å•é“¾æ¥è¯·æ±‚æ•°ä¸Šé™ç­‰ã€‚</p><h2 id="server-å—">3.2 server å—</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs nginx"> <span class="hljs-section">server</span> &#123;<br>     <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>     <span class="hljs-attribute">server_name</span>  localhost;<br><br>     <span class="hljs-comment">#charset koi8-r;</span><br><br>     <span class="hljs-comment">#access_log  logs/host.access.log  main;</span><br><br>     <span class="hljs-section">location</span> / &#123;<br>         <span class="hljs-attribute">root</span> zyFile2;    <br>  <span class="hljs-attribute">index</span> upload.html;        <br>&#125;<br>     <span class="hljs-section">location</span> /Myupload<br>     &#123;<br>         <span class="hljs-attribute">fastcgi_pass</span> <span class="hljs-number">127.0.0.1:10000</span>;<br>         <span class="hljs-attribute">include</span> fastcgi.conf;<br>     &#125;<br>     <span class="hljs-section">location</span> /group1/M00<br>     &#123;<br>         <span class="hljs-attribute">root</span> /home/star/project/fastdfs/storage/data;<br>         ngx_fastdfs_module;<br>     &#125;<br>     <span class="hljs-section">location</span> /hello/<br>     &#123;<br>         <span class="hljs-attribute">root</span> yundisk;<br>     &#125;<br>     <span class="hljs-section">location</span> /upload/<br>     &#123;<br>         <span class="hljs-attribute">root</span> yundisk;<br>         <span class="hljs-attribute">index</span> upload.html;<br>     &#125;<br>     <span class="hljs-section">location</span> /uploadFile<br>     &#123;<br>         <span class="hljs-attribute">fastcgi_pass</span> localhost:<span class="hljs-number">9999</span>;<br>         <span class="hljs-attribute">include</span> fastcgi.conf;<br>         <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">10240m</span>;<br>     &#125;<br>     <span class="hljs-comment">#error_page  404              /404.html;</span><br><br>     <span class="hljs-comment"># redirect server error pages to the static page /50x.html</span><br>     <span class="hljs-comment">#</span><br>     <span class="hljs-attribute">error_page</span>   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /50x.html;<br>     <span class="hljs-section">location</span> = /50x.html &#123;<br>         <span class="hljs-attribute">root</span>   html;<br>     &#125;<br><br>     <span class="hljs-comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br>     <span class="hljs-comment">#</span><br>     <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>     <span class="hljs-comment">#    proxy_pass   http://127.0.0.1;</span><br>     <span class="hljs-comment">#&#125;</span><br><br>     <span class="hljs-comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br>     <span class="hljs-comment">#</span><br>     <span class="hljs-comment">#location ~ \.php$ &#123;</span><br>     <span class="hljs-comment">#    root           html;</span><br>     <span class="hljs-comment">#    fastcgi_pass   127.0.0.1:9000;</span><br>     <span class="hljs-comment">#    fastcgi_index  index.php;</span><br>     <span class="hljs-comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br>     <span class="hljs-comment">#    include        fastcgi_params;</span><br>     <span class="hljs-comment">#&#125;</span><br><br>     <span class="hljs-comment"># deny access to .htaccess files, if Apache&#x27;s document root</span><br>     <span class="hljs-comment"># concurs with nginx&#x27;s one</span><br>     <span class="hljs-comment">#</span><br>     <span class="hljs-comment">#location ~ /\.ht &#123;</span><br>     <span class="hljs-comment">#    deny  all;</span><br>     <span class="hljs-comment">#&#125;</span><br> &#125;<br></code></pre></td></tr></table></figure><p>è¿™å—å’Œè™šæ‹Ÿä¸»æœºæœ‰å¯†åˆ‡å…³ç³»ï¼Œè™šæ‹Ÿä¸»æœºä»ç”¨æˆ·è§’åº¦çœ‹ï¼Œå’Œä¸€å°ç‹¬ç«‹çš„ç¡¬ä»¶ä¸»æœºæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¯¥æŠ€æœ¯çš„äº§ç”Ÿæ˜¯ä¸ºäº†èŠ‚çœäº’è”ç½‘æœåŠ¡å™¨ç¡¬ä»¶æˆæœ¬ã€‚æ¯ä¸ªhttp å—å¯ä»¥åŒ…æ‹¬å¤šä¸ª server å—ï¼Œè€Œæ¯ä¸ª serverå—å°±ç›¸å½“äºä¸€ä¸ªè™šæ‹Ÿä¸»æœºã€‚è€Œæ¯ä¸ª server å—ä¹Ÿåˆ†ä¸ºå…¨å±€ serverå—ï¼Œä»¥åŠå¯ä»¥åŒæ—¶åŒ…å«å¤šä¸ª location å—ã€‚</p><h3 id="å…¨å±€-server-å—">1. å…¨å±€ server å—</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs nginx">   <span class="hljs-section">server</span> &#123;<br>       <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>       <span class="hljs-attribute">server_name</span>  localhost;<br><br>       <span class="hljs-comment">#charset koi8-r;</span><br><br>       <span class="hljs-comment">#access_log  logs/host.access.log  main;</span><br><br>       <span class="hljs-section">location</span> / &#123;<br>           <span class="hljs-attribute">root</span> zyFile2;    <br>    <span class="hljs-attribute">index</span> upload.html;        <br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€å¸¸è§çš„é…ç½®æ˜¯æœ¬è™šæ‹Ÿæœºä¸»æœºçš„ç›‘å¬é…ç½®å’Œæœ¬è™šæ‹Ÿä¸»æœºçš„åç§°æˆ– IPé…ç½®ã€‚</p><h3 id="location-å—">2. location å—</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">location</span> /Myupload<br>&#123;<br>    <span class="hljs-attribute">fastcgi_pass</span> <span class="hljs-number">127.0.0.1:10000</span>;<br>    <span class="hljs-attribute">include</span> fastcgi.conf;<br>&#125;<br><span class="hljs-section">location</span> /group1/M00<br>&#123;<br>    <span class="hljs-attribute">root</span> /home/star/project/fastdfs/storage/data;<br>    ngx_fastdfs_module;<br>&#125;<br><span class="hljs-section">location</span> /hello/<br>&#123;<br>    <span class="hljs-attribute">root</span> yundisk;<br>&#125;<br><span class="hljs-section">location</span> /upload/<br>&#123;<br>    <span class="hljs-attribute">root</span> yundisk;<br>    <span class="hljs-attribute">index</span> upload.html;<br>&#125;<br><span class="hljs-section">location</span> /uploadFile<br>&#123;<br>    <span class="hljs-attribute">fastcgi_pass</span> localhost:<span class="hljs-number">9999</span>;<br>    <span class="hljs-attribute">include</span> fastcgi.conf;<br>    <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">10240m</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ª server å—å¯ä»¥é…ç½®å¤šä¸ª location å—ã€‚</p><p>è¿™å—çš„ä¸»è¦ä½œç”¨æ˜¯åŸºäº Nginx æœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚server_name/uri-stringï¼‰ï¼Œå¯¹è™šæ‹Ÿä¸»æœºåç§°ï¼ˆä¹Ÿå¯ä»¥æ˜¯ IPåˆ«åï¼‰ä¹‹å¤–çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ å‰é¢çš„/uri-stringï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå¯¹ç‰¹å®šçš„è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚åœ°å€å®šå‘ã€æ•°æ®ç¼“å­˜å’Œåº”ç­”æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œè¿˜æœ‰è®¸å¤šç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ä¹Ÿåœ¨è¿™é‡Œè¿›è¡Œã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. Nginxå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2024/12/15/nginx/2-Nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2024/12/15/nginx/2-Nginx%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h3 id="nginx-å¸¸ç”¨çš„å‘½ä»¤">nginx å¸¸ç”¨çš„å‘½ä»¤</h3><p>æ‰§è¡Œå‰æï¼šè¿›å…¥ nginx ç›®å½•ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /usr/local/nginx/sbin<br></code></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹-nginx-ç‰ˆæœ¬å·">1ã€æŸ¥çœ‹ nginx ç‰ˆæœ¬å·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx -v<br></code></pre></td></tr></table></figure><h4 id="å¯åŠ¨-nginx">2ã€å¯åŠ¨ nginx</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx<br></code></pre></td></tr></table></figure><h4 id="åœæ­¢-nginx">3ã€åœæ­¢ nginx</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx -s stop<br></code></pre></td></tr></table></figure><h4 id="é‡æ–°åŠ è½½-nginx">4ã€é‡æ–°åŠ è½½ nginx</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx -s reload<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. å®‰è£…Nginx</title>
    <link href="/2024/12/15/nginx/1-%E5%AE%89%E8%A3%85Nginx/"/>
    <url>/2024/12/15/nginx/1-%E5%AE%89%E8%A3%85Nginx/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡†å¤‡å·¥ä½œ">1. å‡†å¤‡å·¥ä½œ</h1><p>ï¼ˆ1ï¼‰æ‰“å¼€è™šæ‹Ÿæœºï¼Œä½¿ç”¨è¿œç¨‹è¿æ¥å·¥å…·è¿æ¥ linux æ“ä½œç³»ç»Ÿã€‚</p><blockquote><p>å¦‚ä½•åœ¨windowsä¸Šä½¿ç”¨ Xshell è¿æ¥Linuxï¼Œå¯ä»¥å‚ç…§æˆ‘è¿™ç¯‡åšå®¢ï¼šXshellè¿æ¥åˆ° Linux</p></blockquote><p>ï¼ˆ2ï¼‰åˆ° nginx å®˜ç½‘ä¸‹è½½è½¯ä»¶ï¼š<a href="http://nginx.org/">http://nginx.org/</a></p><p>ï¼ˆ3ï¼‰éœ€è¦å‡†å¤‡çš„ç´ æï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pcre</span>-<span class="hljs-number">8</span>.<span class="hljs-number">37</span>.tar.gz<br><span class="hljs-attribute">openssl</span>-<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>t.tar.gz<br><span class="hljs-attribute">zlib</span>-<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">8</span>.tar.gz<br><span class="hljs-attribute">nginx</span>-<span class="hljs-number">1</span>.<span class="hljs-number">11</span>.<span class="hljs-number">1</span>.tar.gz<br></code></pre></td></tr></table></figure><h1 id="å¼€å§‹è¿›è¡Œ-nginx-å®‰è£…">2. å¼€å§‹è¿›è¡Œ nginx å®‰è£…</h1><h2 id="å®‰è£…-pcre-ä¾èµ–">2.1 å®‰è£… pcre ä¾èµ–</h2><h3 id="ç¬¬ä¸€æ­¥è”ç½‘ä¸‹è½½-pcre-å‹ç¼©æ–‡ä»¶ä¾èµ–">ç¬¬ä¸€æ­¥ï¼šè”ç½‘ä¸‹è½½ pcreå‹ç¼©æ–‡ä»¶ä¾èµ–</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget http://downloads.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz<br></code></pre></td></tr></table></figure><p>ä¸‹è½½åçš„å¤§å°ï¼Œ</p><p><img src="/2024/12/15/nginx/1-%E5%AE%89%E8%A3%85Nginx/a8d429ce32aea6b1512515d02d277470.png"></p><p>å¦‚æœä½ å‘ç°ä½ çš„ä¸‹è½½æ–‡ä»¶å¤§å°ä¸å¯¹ï¼Œè®¿é—®ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>sourceforge.net<span class="hljs-regexp">/p/</span>pcre<span class="hljs-regexp">/activity/</span>?page=<span class="hljs-number">1</span>&amp;limit=<span class="hljs-number">100</span><span class="hljs-comment">#553fce622718464538c5fad4</span><br></code></pre></td></tr></table></figure><p>é€‰æ‹©å¯¹åº”ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼Œ</p><p><img src="/2024/12/15/nginx/1-%E5%AE%89%E8%A3%85Nginx/04e35c68dd51cda699c8d8a32d8806b9.png"></p><h3 id="ç¬¬äºŒæ­¥è§£å‹å‹ç¼©æ–‡ä»¶">ç¬¬äºŒæ­¥ï¼šè§£å‹å‹ç¼©æ–‡ä»¶</h3><p>ä½¿ç”¨å‘½ä»¤ï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar â€“xvf pcre-8.37.tar.gz<br></code></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥ç¼–è¯‘">ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘</h3><p>è¿›å…¥ pcre-8.37 æ‰§è¡Œ <code>./configure</code>ï¼Œå®Œæˆåï¼Œå›åˆ° pcreç›®å½•ä¸‹æ‰§è¡Œï¼Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥æŸ¥çœ‹">ç¬¬å››æ­¥ï¼šæŸ¥çœ‹</h3><p>æŸ¥çœ‹ pcre ä¾èµ–æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pcre-config --version<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…-openssl-zlib-gcc-ä¾èµ–">2.2 å®‰è£… openssl ã€zlib ã€ gccä¾èµ–</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…-nginx">2.3 å®‰è£… nginx</h2><h3 id="ç¬¬ä¸€æ­¥è§£å‹-nginx-1.12.2.tar.gz">ç¬¬ä¸€æ­¥ï¼šè§£å‹nginx-1.12.2.tar.gz</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -xvf nginx-1.12.2.tar.gz<br></code></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥è¿›å…¥è§£å‹åçš„ç›®å½•">ç¬¬äºŒæ­¥ï¼šè¿›å…¥è§£å‹åçš„ç›®å½•</h3><p>æ­¤æ—¶ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæ–‡ä»¶ configureï¼Œæ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./configure<br></code></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥ç¼–è¯‘-1">ç¬¬ä¸‰æ­¥ï¼šç¼–è¯‘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><h1 id="å¯åŠ¨-nginx">3. å¯åŠ¨ Nginx</h1><p>è¿›å…¥ç›®å½• <code>/usr/local/nginx/sbin/nginx</code>ï¼Œæ‰§è¡Œã€è¦æ¢ rootç”¨æˆ·ä¸‹æ‰§è¡Œã€‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./nginx<br></code></pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—®ï¼šlocalhost:80</p><blockquote><p>æ­¤æ—¶è¦åœ¨ linuxä¸­å…³é—­é˜²ç«å¢™ã€‚å¦‚æœä½ ä¸çŸ¥é“å’‹å…³é—­é˜²ç«å¢™å¯ä»¥æ¥ç€å¾€ä¸‹çœ‹ï¼Œå‚ç…§ä¸‹é¢å‘½ä»¤è¿›è¡Œå…³é—­ã€‚</p></blockquote><p>åˆ°è¿™ä¸€æ­¥ï¼Œå°±ä»£è¡¨ Nginx å®‰è£…æˆåŠŸã€‚</p><h1 id="é˜²ç«å¢™è®¾ç½®">4. é˜²ç«å¢™è®¾ç½®</h1><p>windows ç³»ç»Ÿä¸­è®¿é—® linux ä¸­nginxï¼Œé»˜è®¤ä¸èƒ½è®¿é—®çš„ï¼Œå› ä¸ºé˜²ç«å¢™é—®é¢˜ï¼Œéœ€è¦è®¾ç½®</p><ul><li><p>ï¼ˆ1ï¼‰å…³é—­é˜²ç«å¢™</p></li><li><p>ï¼ˆ2ï¼‰å¼€æ”¾è®¿é—®çš„ç«¯å£å·ï¼Œ80 ç«¯å£</p></li></ul><h2 id="centos-6">Centos 6</h2><p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables status<br></code></pre></td></tr></table></figure><p>å¼€å¯é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables start<br></code></pre></td></tr></table></figure><p>å…³é—­é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables stop<br></code></pre></td></tr></table></figure><p>é‡å¯é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables restart<br></code></pre></td></tr></table></figure><p>é˜²ç«å¢™å¼€æ”¾æŸä¸ªç«¯å£</p><p>ï¼ˆ1ï¼‰æŸ¥çœ‹é˜²ç«å¢™å½“å‰è®¾ç½®,å…·ä½“å¼€å‘çš„ç«¯å£å·ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">/etc/init.d/iptables status<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰é…ç½®é˜²ç«å¢™ç­–ç•¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/sysconfig/iptables<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚æˆ‘è¦å¼€22ï¼Œ80ç«¯å£ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pf"><span class="hljs-comment"># Firewall configuration written by system-config-firewall</span><br><span class="hljs-comment"># Manual customization of this file is not recommended.</span><br>*filter<br>:INPUT ACCEPT [<span class="hljs-number">0</span>:<span class="hljs-number">0</span>]<br>:FORWARD ACCEPT [<span class="hljs-number">0</span>:<span class="hljs-number">0</span>]<br>:OUTPUT ACCEPT [<span class="hljs-number">0</span>:<span class="hljs-number">0</span>]<br>-A INPUT -m <span class="hljs-keyword">state</span> â€“<span class="hljs-keyword">state</span> ESTABLISHED,RELATED -j ACCEPT<br>-A INPUT -p icmp -j ACCEPT<br>-A INPUT -i lo -j ACCEPT<br><br>-A INPUT -m <span class="hljs-keyword">state</span> â€“<span class="hljs-keyword">state</span> NEW -m tcp -p tcp â€“dport <span class="hljs-number">22</span> -j ACCEPT<br>-A INPUT -m <span class="hljs-keyword">state</span> â€“<span class="hljs-keyword">state</span> NEW -m tcp -p tcp â€“dport <span class="hljs-number">80</span> -j ACCEPT<br>-A INPUT -j REJECT â€“reject-with icmp-host-prohibited<br>-A FORWARD -j REJECT â€“reject-with icmp-host-prohibited<br>COMMIT<br></code></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºï¼ï¼ï¼</p><p>é‡å¯é˜²ç«å¢™ï¼š<code>service iptables restart</code></p><h2 id="centos-7">Centos 7</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£å·<br><br>firewall-cmd --list-all<br><br>è®¾ç½®å¼€æ”¾çš„ç«¯å£å·<br><br>firewall-cmd --add-service=http â€“permanent<br><br>firewall-cmd --add-port=80/tcp --permanent<br><br>é‡å¯é˜²ç«å¢™<br><br>firewall-cmd â€“reload<br></code></pre></td></tr></table></figure><p>é˜²ç«å¢™è®¾ç½®å®Œæˆåï¼Œä¾¿å¯ä»¥åœ¨ windows è¿™è¾¹è¿›è¡Œè®¿é—® nginxäº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>0. Nginxç®€ä»‹</title>
    <link href="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/"/>
    <url>/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="nginx-æ¦‚è¿°">1. Nginx æ¦‚è¿°</h2><p>Nginx (â€œengine xâ€) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œèƒ½ç»å—é«˜è´Ÿè½½çš„è€ƒéªŒï¼Œæœ‰æŠ¥å‘Šè¡¨æ˜èƒ½æ”¯æŒé«˜è¾¾<span class="math inline">\(50,000\)</span> ä¸ªå¹¶å‘è¿æ¥æ•°ã€‚</p><h2 id="æ­£å‘ä»£ç†">2. æ­£å‘ä»£ç†</h2><p>æ­£å‘ä»£ç†ï¼šå¦‚æœæŠŠå±€åŸŸç½‘å¤–çš„ Internetæƒ³è±¡æˆä¸€ä¸ªå·¨å¤§çš„èµ„æºåº“ï¼Œåˆ™å±€åŸŸç½‘ä¸­çš„å®¢æˆ·ç«¯è¦è®¿é—®Internetï¼Œåˆ™éœ€è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®ï¼Œè¿™ç§ä»£ç†æœåŠ¡å°±ç§°ä¸ºæ­£å‘ä»£ç†ã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/5f9ced6447d7eefe8fe6ec1c0d7061dc.png"></p><p>ï¼ˆ1ï¼‰éœ€è¦åœ¨å®¢æˆ·ç«¯é…ç½®ä»£ç†æœåŠ¡å™¨è¿›è¡ŒæŒ‡å®šç½‘ç«™è®¿é—®</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/65817765188eca1011cb928219708b27.png"></p><h2 id="åå‘ä»£ç†">3. åå‘ä»£ç†</h2><p>åå‘ä»£ç†ï¼Œå…¶å®å®¢æˆ·ç«¯å¯¹ä»£ç†æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®å°±å¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±åå‘ä»£ç†æœåŠ¡å™¨å»é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®åï¼Œåœ¨è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶åå‘ä»£ç†æœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨å¯¹å¤–å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œéšè—äº†çœŸå®æœåŠ¡å™¨IP åœ°å€ã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/398d3c35bf3c6e95da82673161dacae3.png"></p><p>ï¼ˆ1ï¼‰æš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œéšè—äº†çœŸå®æœåŠ¡å™¨ IP åœ°å€ã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/83a2769d61fcf5bf60a548965bf3e23d.png"></p><h2 id="è´Ÿè½½å‡è¡¡">4. è´Ÿè½½å‡è¡¡</h2><p>å®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œæœ‰ä¸€äº›å¯èƒ½è¦ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæ¯•åï¼Œå†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>è¿™ç§æ¶æ„æ¨¡å¼å¯¹äºæ—©æœŸçš„ç³»ç»Ÿç›¸å¯¹å•ä¸€ï¼Œå¹¶å‘è¯·æ±‚ç›¸å¯¹è¾ƒå°‘çš„æƒ…å†µä¸‹æ˜¯æ¯”è¾ƒé€‚åˆçš„ï¼Œæˆæœ¬ä¹Ÿä½ã€‚ä½†æ˜¯éšç€ä¿¡æ¯æ•°é‡çš„ä¸æ–­å¢é•¿ï¼Œè®¿é—®é‡å’Œæ•°æ®é‡çš„é£é€Ÿå¢é•¿ï¼Œä»¥åŠç³»ç»Ÿä¸šåŠ¡çš„å¤æ‚åº¦å¢åŠ ï¼Œè¿™ç§æ¶æ„ä¼šé€ æˆæœåŠ¡å™¨ç›¸åº”å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¥ç›Šç¼“æ…¢ï¼Œå¹¶å‘é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œè¿˜å®¹æ˜“é€ æˆæœåŠ¡å™¨ç›´æ¥å´©æºƒã€‚å¾ˆæ˜æ˜¾è¿™æ˜¯ç”±äºæœåŠ¡å™¨æ€§èƒ½çš„ç“¶é¢ˆé€ æˆçš„é—®é¢˜ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ç§æƒ…å†µå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å¯èƒ½æ˜¯å‡çº§æœåŠ¡å™¨çš„é…ç½®ï¼Œæ¯”å¦‚æé«˜ CPUæ‰§è¡Œé¢‘ç‡ï¼ŒåŠ å¤§å†…å­˜ç­‰æé«˜æœºå™¨çš„ç‰©ç†æ€§èƒ½æ¥è§£å†³æ­¤é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“æ‘©å°”å®šå¾‹çš„æ—¥ç›Šå¤±æ•ˆï¼Œç¡¬ä»¶çš„æ€§èƒ½æå‡å·²ç»ä¸èƒ½æ»¡è¶³æ—¥ç›Šæå‡çš„éœ€æ±‚äº†ã€‚æœ€æ˜æ˜¾çš„ä¸€ä¸ªä¾‹å­ï¼Œå¤©çŒ«åŒåä¸€å½“å¤©ï¼ŒæŸä¸ªçƒ­é”€å•†å“çš„ç¬æ—¶è®¿é—®é‡æ˜¯æå…¶åºå¤§çš„ï¼Œé‚£ä¹ˆç±»ä¼¼ä¸Šé¢çš„ç³»ç»Ÿæ¶æ„ï¼Œå°†æœºå™¨éƒ½å¢åŠ åˆ°ç°æœ‰çš„é¡¶çº§ç‰©ç†é…ç½®ï¼Œéƒ½æ˜¯ä¸èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚çš„ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>ä¸Šé¢çš„åˆ†ææˆ‘ä»¬å»æ‰äº†å¢åŠ æœåŠ¡å™¨ç‰©ç†é…ç½®æ¥è§£å†³é—®é¢˜çš„åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¯´çºµå‘è§£å†³é—®é¢˜çš„åŠæ³•è¡Œä¸é€šäº†ï¼Œé‚£ä¹ˆæ¨ªå‘å¢åŠ æœåŠ¡å™¨çš„æ•°é‡å‘¢ï¼Ÿè¿™æ—¶å€™é›†ç¾¤çš„æ¦‚å¿µäº§ç”Ÿäº†ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†ï¼Œæˆ‘ä»¬å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸå…ˆè¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨ä¸Šçš„æƒ…å†µæ”¹ä¸ºå°†è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<strong>è´Ÿè½½å‡è¡¡</strong>ã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/4b76eb1f78db338b2560ab919285a856.png"></p><p>ï¼ˆ1ï¼‰å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸå…ˆè¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨ä¸Šçš„æƒ…å†µæ”¹ä¸ºå°†è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„<strong>è´Ÿè½½å‡è¡¡</strong>ã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/e985ae526da22b07a471964e53bb5f0e.png"></p><h2 id="åŠ¨é™åˆ†ç¦»">5. åŠ¨é™åˆ†ç¦»</h2><p>ä¸ºäº†åŠ å¿«ç½‘ç«™çš„è§£æé€Ÿåº¦ï¼Œå¯ä»¥æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç”±ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æé€Ÿåº¦ã€‚é™ä½åŸæ¥å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/42bb56f1314cd6b79d2bcffd6cd867c1.png"></p><p>ï¼ˆ1ï¼‰å°†é™æ€é¡µé¢ä¸åŠ¨æ€é¡µé¢äº¤ç”±ä¸åŒçš„æœåŠ¡å™¨å®Œæˆã€‚</p><p><img src="/2024/12/15/nginx/0-Nginx%E7%AE%80%E4%BB%8B/e6a2301d1e822cd35fa20bc82afa4dc0.png"></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Nginx</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7è™šæ‹Ÿæœºå®‰è£…vmtoolså¤åˆ¶çš„é—®é¢˜</title>
    <link href="/2024/12/14/ubuntu/Centos7%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85vmtools%E5%A4%8D%E5%88%B6%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2024/12/14/ubuntu/Centos7%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85vmtools%E5%A4%8D%E5%88%B6%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>å®‰è£…å®Œvmtoolsä¹‹åï¼Œä¾ç„¶ä¸èƒ½å¤åˆ¶ï¼Œè§£å†³æ–¹æ¡ˆï¼š</p><ol type="1"><li>æŸ¥è¯¢ç‰ˆæœ¬å·</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">rpm -q centos-release<br></code></pre></td></tr></table></figure><p>centosç‰ˆæœ¬å·åæœ‰x86_64</p><ol start="2" type="1"><li>é‡æ–°å®‰è£…</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">yum install open-vm-tools.x86_64<br>yum install open-vm-tools-desktop.x86_64<br><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>é‡å¯è™šæ‹Ÿæœº</li></ol><p>å®‰è£…å®Œä¹‹åï¼Œå¯èƒ½ä¼šå‡ºç°å¯ä»¥å¤åˆ¶å°æ–‡ä»¶ä»¥åŠå‰ªåˆ‡æ¿ï¼Œwinåˆ°centoså¤§æ–‡ä»¶å¤åˆ¶ç¼ºæ–¤å°‘ä¸¤ç°è±¡å¾ˆä¸¥é‡ï¼Œè§£å†³æ–¹æ¡ˆï¼š</p><ol type="1"><li>åœ¨è™šæ‹Ÿæœºè®¾ç½®é‡Œï¼Œé€‰é¡¹å¡æ‰¾åˆ°å…±äº«æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©æ€»æ˜¯å¯ç”¨ï¼Œè®¾ç½®å…±äº«æ–‡ä»¶å¤¹</li><li>å¯åŠ¨è™šæ‹Ÿæœºï¼ŒæŸ¥çœ‹/mnt/hgfs/ä¸‹çš„å…±äº«æ–‡ä»¶å¤¹ï¼Œ</li><li>åˆ›å»ºè½¯è¿æ¥ï¼Œæºè·¯å¾„-&gt;å¿«æ·æ–¹å¼è·¯å¾„</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">ln</span> -s /mnt/hgfs/shared_centos7/ /home/savitar/win11<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>ä»¥åä¼ è¾“å¤§æ–‡ä»¶ï¼Œå°±å°†æ–‡ä»¶æ”¾åœ¨å…±äº«æ–‡ä»¶å¤¹ä¸­å³å¯</li></ol>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7-Docker-yumé˜¿é‡ŒæºæŠ¥é”™Failed connect to mirrors aliyuncs com80 æ‹’ç»è¿æ¥</title>
    <link href="/2024/12/14/ubuntu/Centos7-Docker-yum%E9%98%BF%E9%87%8C%E6%BA%90%E6%8A%A5%E9%94%99Failed%20connect%20to%20mirrors%20aliyuncs%20com80%20%E6%8B%92%E7%BB%9D%E8%BF%9E%E6%8E%A5/"/>
    <url>/2024/12/14/ubuntu/Centos7-Docker-yum%E9%98%BF%E9%87%8C%E6%BA%90%E6%8A%A5%E9%94%99Failed%20connect%20to%20mirrors%20aliyuncs%20com80%20%E6%8B%92%E7%BB%9D%E8%BF%9E%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<p>Dockerfileä¸‹è½½vimæŠ¥é”™</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> centos<br><span class="hljs-keyword">MAINTAINER</span> zzyy&lt;zzyybs@<span class="hljs-number">126</span>.com&gt;<br><br><span class="hljs-keyword">ENV</span> MYPATH /usr/local<br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$MYPATH</span></span><br><br><span class="hljs-comment">#å®‰è£…vimç¼–è¾‘å™¨</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install vim</span><br><span class="hljs-comment">#å®‰è£…ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘ç»œIP</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install net-tools</span><br><span class="hljs-comment">#å®‰è£…java8åŠlibåº“</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install glibc.i686</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> /usr/local/java</span><br><span class="hljs-comment">#ADD æ˜¯ç›¸å¯¹è·¯å¾„jar,æŠŠjdk-8u171-linux-x64.tar.gzæ·»åŠ åˆ°å®¹å™¨ä¸­,å®‰è£…åŒ…å¿…é¡»è¦å’ŒDockerfileæ–‡ä»¶åœ¨åŒä¸€ä½ç½®</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> jdk-8u171-linux-x64.tar.gz /usr/local/java/</span><br><span class="hljs-comment">#é…ç½®javaç¯å¢ƒå˜é‡</span><br><span class="hljs-keyword">ENV</span> JAVA_HOME /usr/local/java/jdk1.<span class="hljs-number">8.0</span>_171<br><span class="hljs-keyword">ENV</span> JRE_HOME $JAVA_HOME/jre<br><span class="hljs-keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH<br><span class="hljs-keyword">ENV</span> PATH $JAVA_HOME/bin:$PATH<br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$MYPATH</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;success--------------ok&quot;</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> /bin/bash</span><br></code></pre></td></tr></table></figure><p>æŠ¥é”™è®°å½•ï¼š</p><p><img src="/2024/12/14/ubuntu/Centos7-Docker-yum%E9%98%BF%E9%87%8C%E6%BA%90%E6%8A%A5%E9%94%99Failed%20connect%20to%20mirrors%20aliyuncs%20com80%20%E6%8B%92%E7%BB%9D%E8%BF%9E%E6%8E%A5/image-20241214101804988.png"></p><p>è§£å†³æ–¹æ³•ï¼š</p><ol type="1"><li>åœ¨å®¿ä¸»æœºæ›´æ–°é˜¿é‡Œæº</li></ol><p>åŸå› æ˜¯ç”±äºéé˜¿é‡Œäº‘ECSç”¨æˆ·æ— æ³•è§£æä¸»æœºâ€œmirrors.cloud.aliyuncs.comâ€ï¼Œåªéœ€å°†CentOS-Baseé‡ŒåŒ…å«aliyuncs.comçš„è¡Œåˆ é™¤å³å¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 1ã€å¤‡ä»½åŸæ¥æº</span><br><span class="hljs-built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br><span class="hljs-comment"># 2ã€ä¸‹è½½é˜¿é‡Œæº</span><br>wget -O /etc/yum.repos.d/CentOS-Base.repo [http://mirrors.aliyun.com/repo/Centos-7.repo](https://links.jianshu.com/go?to=http%3A%2F%2Fmirrors.aliyun.com%2Frepo%2FCentos-7.repo)<br><span class="hljs-comment"># 3ã€æ›¿æ¢æºåœ°å€</span><br>sed -i -e <span class="hljs-string">&#x27;/mirrors.cloud.aliyuncs.com/d&#x27;</span> -e <span class="hljs-string">&#x27;/mirrors.aliyuncs.com/d&#x27;</span> /etc/yum.repos.d/CentOS-Base.repo<br><span class="hljs-comment"># 4ã€åˆ·æ–°ç¼“å­˜</span><br>yum makecache<br><span class="hljs-comment"># 5ã€æ›´æ–°</span><br>yum -y update<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>å°†é˜¿é‡Œæºæ–‡ä»¶å¤åˆ¶åˆ°Dockerfileæ‰€åœ¨æ–‡ä»¶å¤¹ä¸­</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cp</span> /etc/yum.repos.d/CentOS-Base.repo Dockerfileæ‰€åœ¨ç›®å½•<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä¿®æ”¹Dockerfile</li></ol><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> centos:<span class="hljs-number">7</span><br><br><span class="hljs-keyword">ENV</span> MYPATH /usr/local<br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$MYPATH</span></span><br><br><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="hljs-comment"># 2ã€ä¸‹è½½é˜¿é‡Œæº</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="hljs-comment"># 3ã€æ›¿æ¢æºåœ°å€</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> sed -i -e <span class="hljs-string">&#x27;/mirrors.cloud.aliyuncs.com/d&#x27;</span> -e <span class="hljs-string">&#x27;/mirrors.aliyuncs.com/d&#x27;</span> /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="hljs-comment"># 4ã€åˆ·æ–°ç¼“å­˜</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum makecache</span><br><span class="hljs-comment"># 5ã€æ›´æ–° å¯åšå¯ä¸åš</span><br><span class="hljs-comment"># RUN yum -y update</span><br><br><br><span class="hljs-comment">#å®‰è£…vimç¼–è¾‘å™¨</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install vim</span><br><span class="hljs-comment">#å®‰è£…ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘ç»œIP</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install net-tools</span><br><span class="hljs-comment">#å®‰è£…java8åŠlibåº“</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install glibc.i686</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> /usr/local/java</span><br><span class="hljs-comment"># ADD æ˜¯ç›¸å¯¹è·¯å¾„jar,æŠŠjdk-8u431-linux-x64.tar.gzæ·»åŠ åˆ°å®¹å™¨ä¸­,å®‰è£…åŒ…å¿…é¡»è¦å’ŒDockerfileæ–‡ä»¶åœ¨åŒä¸€ä½ç½®</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> jdk-8u431-linux-x64.tar.gz /usr/local/java</span><br><span class="hljs-comment"># é…ç½®javaç¯å¢ƒå˜é‡</span><br><span class="hljs-keyword">ENV</span> JAVA_HOME /usr/local/java/jdk1.<span class="hljs-number">8.0</span>_431<br><span class="hljs-keyword">ENV</span> JRE_HOME $JAVA_HOME/jre<br><span class="hljs-keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH<br><span class="hljs-keyword">ENV</span> PATH $JAVA_HOME/bin:$PATH<br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$MYPATH</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;success--------------ok&quot;</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> /bin/bash</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>centos7</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7 yumé˜¿é‡ŒæºæŠ¥é”™Failed connect to mirrors aliyuncs com80 æ‹’ç»è¿æ¥</title>
    <link href="/2024/12/14/ubuntu/Centos7%20yum%E9%98%BF%E9%87%8C%E6%BA%90%E6%8A%A5%E9%94%99Failed%20connect%20to%20mirrors%20aliyuncs%20com80%20%E6%8B%92%E7%BB%9D%E8%BF%9E%E6%8E%A5/"/>
    <url>/2024/12/14/ubuntu/Centos7%20yum%E9%98%BF%E9%87%8C%E6%BA%90%E6%8A%A5%E9%94%99Failed%20connect%20to%20mirrors%20aliyuncs%20com80%20%E6%8B%92%E7%BB%9D%E8%BF%9E%E6%8E%A5/</url>
    
    <content type="html"><![CDATA[<p>æŠ¥é”™è®°å½•ï¼š</p><p><img src="/2024/12/14/ubuntu/Centos7%20yum%E9%98%BF%E9%87%8C%E6%BA%90%E6%8A%A5%E9%94%99Failed%20connect%20to%20mirrors%20aliyuncs%20com80%20%E6%8B%92%E7%BB%9D%E8%BF%9E%E6%8E%A5/image-20241214101804988.png"></p><p>åŸå› æ˜¯ç”±äºéé˜¿é‡Œäº‘ECSç”¨æˆ·æ— æ³•è§£æä¸»æœºâ€œmirrors.cloud.aliyuncs.comâ€ï¼Œåªéœ€å°†CentOS-Baseé‡ŒåŒ…å«aliyuncs.comçš„è¡Œåˆ é™¤å³å¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 1ã€å¤‡ä»½åŸæ¥æº</span><br><span class="hljs-built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br><span class="hljs-comment"># 2ã€ä¸‹è½½é˜¿é‡Œæº</span><br>wget -O /etc/yum.repos.d/CentOS-Base.repo [http://mirrors.aliyun.com/repo/Centos-7.repo](https://links.jianshu.com/go?to=http%3A%2F%2Fmirrors.aliyun.com%2Frepo%2FCentos-7.repo)<br><span class="hljs-comment"># 3ã€æ›¿æ¢æºåœ°å€</span><br>sed -i -e <span class="hljs-string">&#x27;/mirrors.cloud.aliyuncs.com/d&#x27;</span> -e <span class="hljs-string">&#x27;/mirrors.aliyuncs.com/d&#x27;</span> /etc/yum.repos.d/CentOS-Base.repo<br><span class="hljs-comment"># 4ã€åˆ·æ–°ç¼“å­˜</span><br>yum makecache<br><span class="hljs-comment"># 5ã€æ›´æ–°</span><br>yum -y update<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Shellè„šæœ¬bash binbash^Mï¼šè§£é‡Šå™¨é”™è¯¯ æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• -- æŠ¥é”™</title>
    <link href="/2024/12/12/ubuntu/Shell%E8%84%9A%E6%9C%ACbash%20binbash%5EM%EF%BC%9A%E8%A7%A3%E9%87%8A%E5%99%A8%E9%94%99%E8%AF%AF%20%E6%B2%A1%E6%9C%89%E9%82%A3%E4%B8%AA%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%20--%20%E6%8A%A5%E9%94%99/"/>
    <url>/2024/12/12/ubuntu/Shell%E8%84%9A%E6%9C%ACbash%20binbash%5EM%EF%BC%9A%E8%A7%A3%E9%87%8A%E5%99%A8%E9%94%99%E8%AF%AF%20%E6%B2%A1%E6%9C%89%E9%82%A3%E4%B8%AA%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%20--%20%E6%8A%A5%E9%94%99/</url>
    
    <content type="html"><![CDATA[<h1 id="shellè„šæœ¬bash-binbashmè§£é‡Šå™¨é”™è¯¯-æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•----æŠ¥é”™">Shellè„šæœ¬bash:/bin/bash^Mï¼šè§£é‡Šå™¨é”™è¯¯: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½• -- æŠ¥é”™</h1><p>æœ‰æ—¶å€™ç¼–å†™è„šæœ¬æ—¶ä¼šå‡ºç°ç±»ä¼¼æ ‡é¢˜åˆ—å‡ºçš„é”™è¯¯ï¼Œè¿™ä¸ªé—®é¢˜å¤§å¤šæ•°æ˜¯å› ä¸ºä½ çš„è„šæœ¬æ–‡ä»¶åœ¨windowsä¸‹ç¼–è¾‘è¿‡ã€‚</p><p>windowsä¸‹ï¼Œæ¯ä¸€è¡Œçš„ç»“å°¾æ˜¯è€Œåœ¨linuxä¸‹æ–‡ä»¶çš„ç»“å°¾æ˜¯ï¼Œé‚£ä¹ˆä½ åœ¨windowsä¸‹ç¼–è¾‘è¿‡çš„æ–‡ä»¶åœ¨linuxä¸‹æ‰“å¼€çœ‹çš„æ—¶å€™æ¯ä¸€è¡Œçš„ç»“å°¾å°±ä¼šå¤šå‡ºæ¥ä¸€ä¸ªå­—ç¬¦ç”¨cat-A yourfileæ—¶ä½ å¯ä»¥çœ‹åˆ°è¿™ä¸ª^Mï¼Œ</p><p>è¿™æ—¶å€™åªéœ€è¦åˆ é™¤è¿™ä¸ªå­—ç¬¦å°±å¯ä»¥äº†ã€‚å¯ä»¥ä½¿ç”¨å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sed -i <span class="hljs-string">&#x27;s/\r$//&#x27;</span> yourfile<br></code></pre></td></tr></table></figure><p>ç„¶åå†æ¬¡æ‰§è¡Œå³å¯ï¼</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ubuntu</tag>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ€æ ·åœ¨ubuntuå‘½ä»¤è¡Œæ‰“å¼€å½“å‰è·¯å¾„çš„å›¾å½¢åŒ–çª—å£</title>
    <link href="/2024/12/12/ubuntu/%E6%80%8E%E6%A0%B7%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%93%E5%BC%80%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84%E7%9A%84%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%AA%97%E5%8F%A3/"/>
    <url>/2024/12/12/ubuntu/%E6%80%8E%E6%A0%B7%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%93%E5%BC%80%E5%BD%93%E5%89%8D%E8%B7%AF%E5%BE%84%E7%9A%84%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%AA%97%E5%8F%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="æ€æ ·åœ¨ubuntuå‘½ä»¤è¡Œæ‰“å¼€å½“å‰è·¯å¾„çš„å›¾å½¢åŒ–çª—å£">æ€æ ·åœ¨ubuntuå‘½ä»¤è¡Œæ‰“å¼€å½“å‰è·¯å¾„çš„å›¾å½¢åŒ–çª—å£</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">nautilus è·¯å¾„<br></code></pre></td></tr></table></figure><p>æ‰“å¼€å½“å‰è·¯å¾„</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">nautilus `<span class="hljs-built_in">pwd</span>`<br>nautilus $(<span class="hljs-built_in">pwd</span>)<br></code></pre></td></tr></table></figure><p>ä¸ºäº†ç®€ç•¥ä¹¦å†™ï¼Œè¿˜å¯ä»¥è®¾ç½®ç®€å†™æ–¹å¼ï¼šæ‰“å¼€<code>.bashrc</code>æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­æ’å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">alias &#x27;o&#x27;=&#x27;nautilus&#x27;<br></code></pre></td></tr></table></figure><p>é‡å¯ç»ˆç«¯ç”Ÿæ•ˆ</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vscodeè¿œç¨‹è¿æ¥æœåŠ¡å™¨ï¼Œpythonç”»å›¾çª—å£æ— æ³•æ­£ç¡®æ˜¾ç¤º</title>
    <link href="/2024/12/12/python/vscode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E7%94%BB%E5%9B%BE%E7%AA%97%E5%8F%A3%E6%97%A0%E6%B3%95%E6%AD%A3%E7%A1%AE%E6%98%BE%E7%A4%BA/"/>
    <url>/2024/12/12/python/vscode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E7%94%BB%E5%9B%BE%E7%AA%97%E5%8F%A3%E6%97%A0%E6%B3%95%E6%AD%A3%E7%A1%AE%E6%98%BE%E7%A4%BA/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>åœ¨vscodeä»£ç é¡µé¢å³é”®ï¼Œé€‰æ‹©Run in Interactive Windowï¼Œé€‰æ‹©Run CurrentFile in Interactive Window</li><li>å®‰è£…å¿…è¦æ’ä»¶jupyterå’Œipython</li><li>é‡å¯vscodeæˆ–è€…é‡æ–°sshè¿œç¨‹è¿æ¥ï¼Œå³å¯æ­£ç¡®æ˜¾ç¤ºå›¾ç‰‡å•¦</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl<br>font_name = <span class="hljs-string">&quot;simhei&quot;</span><br>mpl.rcParams[<span class="hljs-string">&#x27;font.family&#x27;</span>]= font_name <span class="hljs-comment"># æŒ‡å®šå­—ä½“ï¼Œå®é™…ä¸Šç›¸å½“äºä¿®æ”¹ matplotlibrc æ–‡ä»¶ã€€åªä¸è¿‡è¿™æ ·åšæ˜¯æš‚æ—¶çš„ã€€ä¸‹æ¬¡å¤±æ•ˆ</span><br>mpl.rcParams[<span class="hljs-string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="hljs-literal">False</span> <span class="hljs-comment"># æ­£ç¡®æ˜¾ç¤ºè´Ÿå·ï¼Œé˜²æ­¢å˜æˆæ–¹æ¡†</span><br><br><br><span class="hljs-comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">2</span> * np.pi, <span class="hljs-number">1000</span>)<br>y = np.sin(x)<br><br><span class="hljs-comment"># åˆ›å»ºå›¾å½¢</span><br>plt.figure()<br><span class="hljs-comment"># ç»˜åˆ¶æ­£å¼¦æ›²çº¿</span><br>plt.plot(x, y, label=<span class="hljs-string">&#x27;æ­£å¼¦æ›²çº¿&#x27;</span>)<br><span class="hljs-comment"># æ·»åŠ æ ‡é¢˜</span><br>plt.title(<span class="hljs-string">&#x27;æ­£å¼¦æ›²çº¿å›¾&#x27;</span>)<br><span class="hljs-comment"># æ·»åŠ xè½´æ ‡ç­¾</span><br>plt.xlabel(<span class="hljs-string">&#x27;x&#x27;</span>)<br><span class="hljs-comment"># æ·»åŠ yè½´æ ‡ç­¾</span><br>plt.ylabel(<span class="hljs-string">&#x27;sin(x)&#x27;</span>)<br><span class="hljs-comment"># æ˜¾ç¤ºå›¾ä¾‹</span><br>plt.legend()<br><span class="hljs-comment"># æ˜¾ç¤ºç½‘æ ¼</span><br>plt.grid(<span class="hljs-literal">True</span>)<br><span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span><br>plt.show()<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>ssh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>matplotlibåº“ä¸èƒ½æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡</title>
    <link href="/2024/12/12/python/matplotlib%E5%BA%93%E4%B8%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87/"/>
    <url>/2024/12/12/python/matplotlib%E5%BA%93%E4%B8%8D%E8%83%BD%E6%AD%A3%E7%A1%AE%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>Ubuntuçš„å­—ä½“ç›®å½•åœ¨/usr/share/fontsä¸‹ï¼Œè‡ªå¸¦çš„ä¸­æ–‡å­—ä½“å¾ˆçƒ‚ï¼Œå…ˆå®‰è£…ä¸€ä¸‹ä¸­æ–‡å­—ä½“åº“ã€‚ç»ˆç«¯è¾“å…¥ï¼š</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">clone</span> https://github.com/tracyone/program_font <br><span class="hljs-built_in">cd</span> program_font <br>./install.sh<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li><p>åœ¨/usr/share/fonts/MyFontsä¸‹æ·»åŠ äº†å¾ˆå¤šæ–°å­—ä½“</p></li><li><p>æ˜¾ç¤ºmatplotlibåº“çš„å­—ä½“æ–‡ä»¶å¤¹</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib<br>matplotlib.matplotlib_fname()<br></code></pre></td></tr></table></figure><p>æ˜¾ç¤º/home/ck/anaconda3/envs/pytorch2/lib/python3.10/site-packages/matplotlib/mpl-data/matplotlibrcï¼Œæ‰“å¼€mpl-dataä¸‹çš„fontsæ–‡ä»¶å¤¹ï¼Œå°†é»‘ä½“â€œsimhei.ttfâ€å¤åˆ¶åˆ°fonts/tffæ–‡ä»¶å¤¹ä¸‹</p><ol start="4" type="1"><li>åˆ é™¤matplotlibç¼“å­˜</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> ~/.cache/matplotlib<br><span class="hljs-built_in">rm</span> -rf *.*<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>è®¾ç½®å­—ä½“</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib <span class="hljs-keyword">as</span> mpl<br>font_name = <span class="hljs-string">&quot;simhei&quot;</span><br>mpl.rcParams[<span class="hljs-string">&#x27;font.family&#x27;</span>]= font_name <span class="hljs-comment"># æŒ‡å®šå­—ä½“ï¼Œå®é™…ä¸Šç›¸å½“äºä¿®æ”¹ matplotlibrc æ–‡ä»¶ã€€åªä¸è¿‡è¿™æ ·åšæ˜¯æš‚æ—¶çš„ã€€ä¸‹æ¬¡å¤±æ•ˆ</span><br>mpl.rcParams[<span class="hljs-string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="hljs-literal">False</span> <span class="hljs-comment"># æ­£ç¡®æ˜¾ç¤ºè´Ÿå·ï¼Œé˜²æ­¢å˜æˆæ–¹æ¡†</span><br><br><br><span class="hljs-comment"># ç”Ÿæˆç¤ºä¾‹æ•°æ®</span><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">2</span> * np.pi, <span class="hljs-number">1000</span>)<br>y = np.sin(x)<br><br><span class="hljs-comment"># åˆ›å»ºå›¾å½¢</span><br>plt.figure()<br><span class="hljs-comment"># ç»˜åˆ¶æ­£å¼¦æ›²çº¿</span><br>plt.plot(x, y, label=<span class="hljs-string">&#x27;æ­£å¼¦æ›²çº¿&#x27;</span>)<br><span class="hljs-comment"># æ·»åŠ æ ‡é¢˜</span><br>plt.title(<span class="hljs-string">&#x27;æ­£å¼¦æ›²çº¿å›¾&#x27;</span>)<br><span class="hljs-comment"># æ·»åŠ xè½´æ ‡ç­¾</span><br>plt.xlabel(<span class="hljs-string">&#x27;x&#x27;</span>)<br><span class="hljs-comment"># æ·»åŠ yè½´æ ‡ç­¾</span><br>plt.ylabel(<span class="hljs-string">&#x27;sin(x)&#x27;</span>)<br><span class="hljs-comment"># æ˜¾ç¤ºå›¾ä¾‹</span><br>plt.legend()<br><span class="hljs-comment"># æ˜¾ç¤ºç½‘æ ¼</span><br>plt.grid(<span class="hljs-literal">True</span>)<br><span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span><br>plt.show()<br><br></code></pre></td></tr></table></figure><p>okäº†ï¼</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>centos7è®¾ç½®å¼€æœºè‡ªåŠ¨è”ç½‘</title>
    <link href="/2024/12/12/ubuntu/centos7%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E8%81%94%E7%BD%91/"/>
    <url>/2024/12/12/ubuntu/centos7%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E8%81%94%E7%BD%91/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œé€‚é…å™¨ç½‘ç»œè¿æ¥æ–¹å¼ä¸ºNATæ¨¡å¼</li><li>å¯åŠ¨è™šæ‹Ÿæœºï¼Œè¾“å…¥</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls  /etc/sysconfig/network-scripts<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹åˆ°è‡ªå·±çš„é…ç½®æ–‡ä»¶åifcfg-ens33</p><ol start="3" type="1"><li>è¾“å…¥æŒ‡ä»¤ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå°†æœ€åä¸€è¡Œonbootæ”¹ä¸ºyes</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">vi  /etc/sysconfig/network-scripts/ifcfg-ens33<br> <br>DEVICE=ens33<br>ONBOOT=<span class="hljs-built_in">yes</span><br></code></pre></td></tr></table></figure><p>okäº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•åœ¨CentOS7å›¾å½¢ç•Œé¢ä¸­ä½¿ç”¨å¿«æ·é”®å¿«é€Ÿæ‰“å¼€ç»ˆç«¯</title>
    <link href="/2024/12/10/ubuntu/%E5%A6%82%E4%BD%95%E5%9C%A8CentOS7%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%BF%AB%E9%80%9F%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF/"/>
    <url>/2024/12/10/ubuntu/%E5%A6%82%E4%BD%95%E5%9C%A8CentOS7%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%BF%AB%E9%80%9F%E6%89%93%E5%BC%80%E7%BB%88%E7%AB%AF/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€å‡†å¤‡å·¥ä½œ"><font style="color:rgb(47, 51, 57);">ä¸€ã€å‡†å¤‡å·¥ä½œ</font></h3><p><font style="color:rgb(47, 51, 57);">CentOS7çš„å›¾å½¢ç•Œé¢ï¼ˆGNOMEæ¡Œé¢ç¯å¢ƒï¼‰ã€‚</font></p><h3 id="äºŒæ‰“å¼€è®¾ç½®ç•Œé¢"><font style="color:rgb(47, 51, 57);">äºŒã€æ‰“å¼€è®¾ç½®ç•Œé¢</font></h3><ol type="1"><li><strong><font style="color:rgb(47, 51, 57);">ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å</font></strong><font style="color:rgb(47, 51, 57);">ï¼šåœ¨å±å¹•å³ä¸Šè§’æ‰¾åˆ°å½“å‰ç™»å½•çš„ç”¨æˆ·åï¼Œç‚¹å‡»å®ƒã€‚</font></li><li><strong><font style="color:rgb(47, 51, 57);">é€‰æ‹©â€œè®¾ç½®â€</font></strong><font style="color:rgb(47, 51, 57);">ï¼šåœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹©â€œè®¾ç½®â€ï¼ˆSettingsï¼‰ï¼Œè¿™å°†æ‰“å¼€ç³»ç»Ÿè®¾ç½®ç•Œé¢ã€‚</font></li></ol><h3 id="ä¸‰è¿›å…¥é”®ç›˜è®¾ç½®"><font style="color:rgb(47, 51, 57);">ä¸‰ã€è¿›å…¥é”®ç›˜è®¾ç½®</font></h3><ol type="1"><li><strong><font style="color:rgb(47, 51, 57);">æ‰¾åˆ°â€œé”®ç›˜â€é€‰é¡¹</font></strong><font style="color:rgb(47, 51, 57);">ï¼šåœ¨è®¾ç½®ç•Œé¢ä¸­ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡»â€œé”®ç›˜â€ï¼ˆKeyboardï¼‰é€‰é¡¹ï¼Œè¿›å…¥é”®ç›˜è®¾ç½®ã€‚</font></li></ol><h3 id="å››è‡ªå®šä¹‰å¿«æ·é”®"><font style="color:rgb(47, 51, 57);">å››ã€è‡ªå®šä¹‰å¿«æ·é”®</font></h3><ol type="1"><li><strong><font style="color:rgb(47, 51, 57);">åˆ‡æ¢åˆ°â€œå¿«æ·é”®â€é€‰é¡¹å¡</font></strong><font style="color:rgb(47, 51, 57);">ï¼šåœ¨é”®ç›˜è®¾ç½®ç•Œé¢ä¸­ï¼Œåˆ‡æ¢åˆ°â€œå¿«æ·é”®â€ï¼ˆShortcutsï¼‰é€‰é¡¹å¡ã€‚</font></li><li><strong><font style="color:rgb(47, 51, 57);">é€‰æ‹©â€œè‡ªå®šä¹‰å¿«æ·é”®â€</font></strong><font style="color:rgb(47, 51, 57);">ï¼šåœ¨å·¦ä¾§åˆ—è¡¨ä¸­é€‰æ‹©â€œè‡ªå®šä¹‰å¿«æ·é”®â€ï¼ˆCustomShortcutsï¼‰ã€‚</font></li><li><strong><font style="color:rgb(47, 51, 57);">æ·»åŠ æ–°çš„å¿«æ·é”®</font></strong><font style="color:rgb(47, 51, 57);">ï¼š</font><ul><li><font style="color:rgb(47, 51, 57);">ç‚¹å‡»å³ä¸‹è§’çš„â€œ+â€å·æŒ‰é’®ï¼Œå¼¹å‡ºä¸€ä¸ªæ·»åŠ æ–°å¿«æ·é”®çš„çª—å£ã€‚</font></li><li><font style="color:rgb(47, 51, 57);">åœ¨â€œåç§°â€ï¼ˆNameï¼‰æ ä¸­è¾“å…¥â€œTerminalâ€æˆ–è€…å…¶ä»–ä½ å–œæ¬¢çš„åç§°ã€‚</font></li><li><font style="color:rgb(47, 51, 57);">åœ¨â€œå‘½ä»¤â€ï¼ˆCommandï¼‰æ ä¸­è¾“å…¥</font><code>&lt;font style="color:rgb(85, 85, 85);background-color:rgb(238, 238, 238);"&gt;/usr/bin/gnome-terminal&lt;/font&gt;</code><font style="color:rgb(47, 51, 57);">ï¼Œè¿™æ˜¯GNOMEç»ˆç«¯çš„è·¯å¾„ï¼Œè¯·ä¸è¦æ›´æ”¹ã€‚</font></li></ul></li></ol><h3 id="äº”è®¾ç½®å¿«æ·é”®"><font style="color:rgb(47, 51, 57);">äº”ã€è®¾ç½®å¿«æ·é”®</font></h3><ol type="1"><li><strong><font style="color:rgb(47, 51, 57);">ç‚¹å‡»â€œåº”ç”¨â€</font></strong><font style="color:rgb(47, 51, 57);">ï¼šè¾“å…¥å®Œåç§°å’Œå‘½ä»¤åï¼Œç‚¹å‡»â€œåº”ç”¨â€ï¼ˆApplyï¼‰æŒ‰é’®ï¼Œæ–°çš„å¿«æ·é”®é¡¹ç›®ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­ã€‚</font></li><li><strong><font style="color:rgb(47, 51, 57);">å¯ç”¨å¿«æ·é”®</font></strong><font style="color:rgb(47, 51, 57);">ï¼š</font><ul><li><font style="color:rgb(47, 51, 57);">åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšåˆšæ·»åŠ çš„â€œTerminalâ€é¡¹ç›®ï¼Œç‚¹å‡»å®ƒå³è¾¹çš„â€œç¦ç”¨â€ï¼ˆDisableï¼‰ã€‚</font></li><li><font style="color:rgb(47, 51, 57);">è¿™æ—¶ï¼Œç•Œé¢ä¼šæç¤ºä½ æŒ‰ä¸‹æƒ³è¦è®¾ç½®çš„å¿«æ·é”®ç»„åˆã€‚å»ºè®®é€‰æ‹©ä¸€ä¸ªä¸å®¹æ˜“ä¸å…¶ä»–å¿«æ·é”®å†²çªçš„ç»„åˆï¼Œä¾‹å¦‚</font><code>&lt;font style="color:rgb(85, 85, 85);background-color:rgb(238, 238, 238);"&gt;Ctrl + Alt + T&lt;/font&gt;</code><font style="color:rgb(47, 51, 57);">ã€‚</font></li><li><font style="color:rgb(47, 51, 57);">æŒ‰ä¸‹ä½ é€‰æ‹©çš„å¿«æ·é”®ç»„åˆï¼Œç•Œé¢ä¼šæ˜¾ç¤ºä½ æ‰€è®¾ç½®çš„å¿«æ·é”®ã€‚</font></li></ul></li></ol><h3 id="å…­æµ‹è¯•å¿«æ·é”®"><font style="color:rgb(47, 51, 57);">å…­ã€æµ‹è¯•å¿«æ·é”®</font></h3><ol type="1"><li><strong><font style="color:rgb(47, 51, 57);">å…³é—­è®¾ç½®çª—å£</font></strong><font style="color:rgb(47, 51, 57);">ï¼šå®Œæˆè®¾ç½®åï¼Œå…³é—­è®¾ç½®çª—å£ã€‚</font></li><li><strong><font style="color:rgb(47, 51, 57);">æŒ‰ä¸‹å¿«æ·é”®</font></strong><font style="color:rgb(47, 51, 57);">ï¼šåœ¨æ¡Œé¢ç¯å¢ƒä¸­æŒ‰ä¸‹ä½ åˆšåˆšè®¾ç½®çš„å¿«æ·é”®ç»„åˆï¼Œç»ˆç«¯ä¼šç«‹å³æ‰“å¼€ã€‚</font></li></ol>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>centos7</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. CIGé‡é‡çº§ç›‘æ§</title>
    <link href="/2024/12/07/docker/16-CIG%E9%87%8D%E9%87%8F%E7%BA%A7%E7%9B%91%E6%8E%A7/"/>
    <url>/2024/12/07/docker/16-CIG%E9%87%8D%E9%87%8F%E7%BA%A7%E7%9B%91%E6%8E%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="cig">1. CIG</h1><p>é€šè¿‡<code>docker stats</code>å‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹å½“å‰å®¿ä¸»æœºä¸Šæ‰€æœ‰å®¹å™¨çš„CPUã€å†…å­˜ã€ç½‘ç»œæµé‡ç­‰æ•°æ®ï¼Œå¯ä»¥æ»¡è¶³ä¸€äº›å°å‹åº”ç”¨ã€‚</p><p>ä½†æ˜¯ <code>docker stats</code>ç»Ÿè®¡ç»“æœåªèƒ½æ˜¯å½“å‰å®¿ä¸»æœºçš„å…¨éƒ¨å®¹å™¨ï¼Œæ•°æ®èµ„æ–™æ˜¯å®æ—¶çš„ï¼Œæ²¡æœ‰åœ°æ–¹å­˜å‚¨ã€æ²¡æœ‰å¥åº·æŒ‡æ ‡è¿‡çº¿é¢„è­¦ç­‰åŠŸèƒ½ã€‚</p><p>CAdvisorï¼ˆç›‘æ§æ”¶é›†ï¼‰ + InfluxDBï¼ˆå­˜å‚¨æ•°æ®ï¼‰ +Granfanaï¼ˆå±•ç¤ºå›¾è¡¨ï¼‰ï¼Œåˆç§° <code>CIG</code>ã€‚</p><p><img src="/2024/12/07/docker/16-CIG%E9%87%8D%E9%87%8F%E7%BA%A7%E7%9B%91%E6%8E%A7/1652093718667-e6440d84-dd9d-4b4f-9a21-d3fcef000a67.png"></p><h2 id="cadvisor">1.1 CAdvisor</h2><p>CAdvisoræ˜¯ä¸€ä¸ªå®¹å™¨èµ„æºç›‘æ§å·¥å…·ï¼ŒåŒ…æ‹¬å®¹å™¨çš„å†…å­˜ã€CPUã€ç½‘ç»œIOã€ç£ç›˜IOç­‰ç›‘æ§ï¼ŒåŒæ—¶æä¾›äº†ä¸€ä¸ªWebé¡µé¢ç”¨äºæŸ¥çœ‹å®¹å™¨çš„å®æ—¶è¿è¡ŒçŠ¶æ€ã€‚</p><p>CAdvisoré»˜è®¤å­˜å‚¨2åˆ†é’Ÿçš„æ•°æ®ï¼Œè€Œä¸”åªæ˜¯é’ˆå¯¹å•ç‰©ç†æœºã€‚ä¸è¿‡CAdvisoræä¾›äº†å¾ˆå¤šæ•°æ®é›†æˆæ¥å£ï¼Œæ”¯æŒInfluxDBã€Redisã€Kafkaã€Elasticsearchç­‰é›†æˆï¼Œå¯ä»¥åŠ ä¸Šå¯¹åº”é…ç½®å°†ç›‘æ§æ•°æ®å‘å¾€è¿™äº›æ•°æ®åº“å­˜å‚¨èµ·æ¥ã€‚</p><p>CAdvisorä¸»è¦åŠŸèƒ½ï¼š</p><ul><li>å±•ç¤ºHostå’Œå®¹å™¨ä¸¤ä¸ªå±‚æ¬¡çš„ç›‘æ§æ•°æ®</li><li>å±•ç¤ºå†å²å˜åŒ–æ•°æ®</li></ul><h2 id="influxdb">1.2 InfluxDB</h2><p>InfluxDBæ˜¯ç”¨Goè¯­è¨€ç¼–å†™çš„ä¸€ä¸ªå¼€æºåˆ†å¸ƒå¼æ—¶åºã€äº‹ä»¶å’ŒæŒ‡æ ‡æ•°æ®åº“ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–ã€‚</p><p>CAdvisoré»˜è®¤åªåœ¨æœ¬æœºä¿å­˜2åˆ†é’Ÿçš„æ•°æ®ï¼Œä¸ºäº†æŒä¹…åŒ–å­˜å‚¨æ•°æ®å’Œç»Ÿä¸€æ”¶é›†å±•ç¤ºç›‘æ§æ•°æ®ï¼Œéœ€è¦å°†æ•°æ®å­˜å‚¨åˆ°InfluxDBä¸­ã€‚InfluxDBæ˜¯ä¸€ä¸ªæ—¶åºæ•°æ®åº“ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨æ—¶åºç›¸å…³æ•°æ®ï¼Œå¾ˆé€‚åˆå­˜å‚¨CAdvisor çš„æ•°æ®ã€‚è€Œä¸”CAdvisoræœ¬èº«å·²ç»æä¾›äº†InfluxDBçš„é›†æˆæ–¹æ³•ï¼Œåœ¨å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šé…ç½®å³å¯ã€‚</p><p>InfluxDBä¸»è¦åŠŸèƒ½ï¼š</p><ul><li>åŸºäºæ—¶é—´åºåˆ—ï¼Œæ”¯æŒä¸æ—¶é—´æœ‰å…³çš„ç›¸å…³å‡½æ•°ï¼ˆå¦‚æœ€å¤§ã€æœ€å°ã€æ±‚å’Œç­‰ï¼‰</li><li>å¯åº¦é‡æ€§ï¼Œå¯ä»¥å®æ—¶å¯¹å¤§é‡æ•°æ®è¿›è¡Œè®¡ç®—</li><li>åŸºäºäº‹ä»¶ï¼Œæ”¯æŒä»»æ„çš„äº‹ä»¶æ•°æ®</li></ul><h2 id="granfana">1.3 Granfana</h2><p>Grafanaæ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®ç›‘æ§åˆ†æå¯è§†åŒ–å¹³å°ï¼Œæ”¯æŒå¤šç§æ•°æ®æºé…ç½®ï¼ˆæ”¯æŒçš„æ•°æ®æºåŒ…æ‹¬InfluxDBã€MySQLã€Elasticsearchã€OpenTSDBã€Graphiteç­‰ï¼‰å’Œä¸°å¯Œçš„æ’ä»¶åŠæ¨¡æ¿åŠŸèƒ½ï¼Œæ”¯æŒå›¾è¡¨æƒé™æ§åˆ¶å’ŒæŠ¥è­¦ã€‚</p><p>Granfanaä¸»è¦åŠŸèƒ½ï¼š</p><ul><li>çµæ´»ä¸°å¯Œçš„å›¾å½¢åŒ–é€‰é¡¹</li><li>å¯ä»¥æ··åˆå¤šç§é£æ ¼</li><li>æ”¯æŒç™½å¤©å’Œå¤œé—´æ¨¡å¼</li><li>å¤šä¸ªæ•°æ®æº</li></ul><h1 id="å®‰è£…éƒ¨ç½²">2. å®‰è£…éƒ¨ç½²</h1><ol type="1"><li>ç¼–å†™<code>docker-compose.yml</code>æœåŠ¡ç¼–æ’æ–‡ä»¶</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3.1&#x27;</span><br><br><span class="hljs-attr">volumes:</span><br>  <span class="hljs-attr">grafana_data:</span> &#123;&#125;<br><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">influxdb:</span><br><span class="hljs-comment"># tutum/influxdb ç›¸æ¯”influxdbå¤šäº†webå¯è§†åŒ–è§†å›¾ã€‚ä½†æ˜¯è¯¥é•œåƒå·²è¢«æ ‡è®°ä¸ºå·²è¿‡æ—¶</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">tutum/influxdb:0.9</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">PRE_CREATE_DB=cadvisor</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8083:8083&quot;</span>         <span class="hljs-comment"># æ•°æ®åº“webå¯è§†åŒ–é¡µé¢ç«¯å£</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8086:8086&quot;</span>         <span class="hljs-comment"># æ•°æ®åº“ç«¯å£</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./data/influxdb:/data</span><br><br>  <span class="hljs-attr">cadvisor:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">google/cadvisor:v0.32.0</span><br>    <span class="hljs-attr">links:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">influxdb:influxsrv</span><br>    <span class="hljs-attr">command:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">-storage_driver=influxdb</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">-storage_driver_db=cadvisor</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">-storage_driver_host=influxsrv:8086</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:8080&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/:/rootfs:ro</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/run:/var/run:rw</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/sys:/sys:ro</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/lib/docker/:/var/lib/docker:ro</span><br><br>  <span class="hljs-attr">grafana:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:8.5.2</span><br>    <span class="hljs-attr">user:</span> <span class="hljs-string">&#x27;104&#x27;</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">links:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">influxdb:influxsrv</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;3000:3000&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">grafana_data:/var/lib/grafana</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">HTTP_USER=admin</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">HTTP_PASS=admin</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">INFLUXDB_HOST=influxsrv</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">INFLUXDB_PORT=8086</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æ£€æŸ¥è¯­æ³•</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose config -q<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose up -d<br></code></pre></td></tr></table></figure><p>å®¹å™¨å¯åŠ¨ä¹‹åï¼š</p><ol type="1"><li>åœ¨æµè§ˆå™¨æ‰“å¼€InfluxDBæ•°æ®åº“çš„é¡µé¢ï¼šhttp://xxx.xxx.xxx.xxx:8083ï¼Œä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ•°æ®åº“å®ä¾‹ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">SHOW DATABASES<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å…¶ä¸­æ˜¯å¦è‡ªåŠ¨åˆ›å»ºäº†æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„ <code>cadvisor</code>æ•°æ®åº“å®ä¾‹</p><ol start="2" type="1"><li>åœ¨æµè§ˆå™¨æ‰“å¼€CAdvisoré¡µé¢ï¼šhttp://xxx.xxx.xxx.xxx8080/ï¼ŒæŸ¥çœ‹å½“å‰dockerä¸­çš„cpuã€å†…å­˜ã€ç½‘ç»œIOç­‰ç»Ÿè®¡ä¿¡æ¯</li><li>åœ¨æµè§ˆå™¨æ‰“å¼€Grafanaé¡µé¢ï¼šhttp://xxx.xxx.xxx.xxx:3000/ï¼Œé»˜è®¤ç”¨æˆ·åå¯†ç æ˜¯ï¼š<code>admin</code>/<code>admin</code>ã€‚</li></ol><h1 id="grafanaé…ç½®">3. Grafanaé…ç½®</h1><h2 id="æ·»åŠ æ•°æ®æº">3.1 æ·»åŠ æ•°æ®æº</h2><p>åœ¨<code>Configuration</code>ï¼ˆå°é½¿è½®ï¼‰é€‰é¡¹å¡ä¸­ï¼Œé€‰æ‹©<code>Data Sources</code>ï¼Œæ·»åŠ ä¸€ä¸ªInfluxDBæ•°æ®æºï¼š</p><ul><li>nameï¼šè‡ªå®šä¹‰ä¸€ä¸ªæ•°æ®æºåç§°ï¼Œä¾‹å¦‚<code>InfluxDB</code></li><li>Query Languageï¼šæŸ¥è¯¢è¯­è¨€ï¼Œé»˜è®¤<code>InfluxQL</code>å³å¯</li><li>URLï¼šæ ¹æ®composeä¸­çš„å®¹å™¨æœåŠ¡åè¿æ¥ï¼Œ<code>http://influxdb:8086</code></li><li>databaseï¼šæˆ‘ä»¬åœ¨InfluxDBä¸­åˆ›å»ºçš„æ•°æ®åº“å®ä¾‹ï¼Œ<code>cadvisor</code></li><li>Userï¼šInfluxDBçš„é»˜è®¤ç”¨æˆ·ï¼Œ<code>root</code></li><li>Passwordï¼š<code>root</code></li></ul><p>ä¿å­˜å¹¶æµ‹è¯•ï¼Œå¯ä»¥è¿é€šå³å¯</p><h2 id="æ·»åŠ å·¥ä½œå°">3.2 æ·»åŠ å·¥ä½œå°</h2><ol type="1"><li>åœ¨<code>Create</code>ï¼ˆåŠ å·ï¼‰é€‰é¡¹å¡ä¸­ï¼Œé€‰æ‹©åˆ›å»º<code>Dash Board</code>å·¥ä½œå°ã€‚å³ä¸Šè§’é…ç½®ä¸­å¯ä»¥é…ç½®åˆ›å»ºå‡ºæ¥çš„å·¥ä½œå°çš„æ ‡é¢˜ã€æ–‡ä»¶å¤¹ç­‰ä¿¡æ¯ã€‚</li><li>åœ¨åˆ›å»ºå‡ºæ¥çš„å·¥ä½œå°ä¸­ï¼Œé€‰æ‹©<code>Add panel</code>ä¸­çš„<code>Add a new panel</code>æ·»åŠ ä¸€ä¸ªæ–°çš„é¢æ¿ã€‚<ol type="1"><li>åœ¨å³ä¸Šè§’<code>Time series</code>ï¼ˆæ—¶åºå›¾ï¼‰ä½ç½®å¯ä»¥åˆ‡æ¢å±•ç¤ºçš„å›¾è¡¨æ ·å¼ï¼ˆæŸ±çŠ¶å›¾ã€ä»ªè¡¨ç›˜ã€è¡¨æ ¼ã€é¥¼å›¾ç­‰ç­‰ï¼‰</li><li>å³ä¾§è¾¹æ ä¸ºè¯¥å›¾è¡¨é…ç½®ç›¸å…³ä¿¡æ¯ï¼šæ ‡é¢˜ã€æè¿°</li><li>å›¾è¡¨ä¸‹æ–¹å¯ä»¥é…ç½®è¯¥å›¾è¡¨å±•ç¤ºçš„æ•°æ®çš„æŸ¥è¯¢è¯­å¥ï¼Œä¾‹å¦‚ï¼š<ul><li>FROMï¼š<code>cpu_usage_total</code>ï¼ˆGrafanaä¼šè‡ªåŠ¨è·å–InfluxDBæ•°æ®åº“ä¸­çš„å…ƒæ•°æ®ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©å¯¹åº”è¡¨åï¼‰</li><li>WHEREï¼šæ·»åŠ ä¸€ä¸ªæ¡ä»¶ï¼Œ<code>container_name=cig-cadvisor-1</code></li><li>ALIASï¼šé…ç½®ä¸€ä¸ªåˆ«åï¼Œ<code>CPUä½¿ç”¨æƒ…å†µæ±‡æ€»</code></li></ul></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. Portainerè½»é‡çº§å›¾å½¢åŒ–ç›‘æ§</title>
    <link href="/2024/12/07/docker/15-Portainer%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%9B%91%E6%8E%A7/"/>
    <url>/2024/12/07/docker/15-Portainer%E8%BD%BB%E9%87%8F%E7%BA%A7%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%9B%91%E6%8E%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="portainerdockerè½»é‡çº§å¯è§†åŒ–å·¥å…·">1.Portainerï¼šDockerè½»é‡çº§å¯è§†åŒ–å·¥å…·</h1><p>Portaineræ˜¯ä¸€æ¬¾è½»é‡çº§çš„åº”ç”¨ï¼Œå®ƒæä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œç”¨äºæ–¹ä¾¿åœ°ç®¡ç†Dockerç¯å¢ƒï¼ŒåŒ…æ‹¬å•æœºç¯å¢ƒå’Œé›†ç¾¤ç¯å¢ƒã€‚</p><p>Portaineråˆ†ä¸ºå¼€æºç¤¾åŒºç‰ˆï¼ˆCEç‰ˆï¼‰å’Œå•†ç”¨ç‰ˆï¼ˆBEç‰ˆ/EEç‰ˆï¼‰ã€‚</p><h1 id="å®‰è£…">2. å®‰è£…</h1><p>Portainerä¹Ÿæ˜¯ä¸€ä¸ªDockeré•œåƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Dockerè¿è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ—§ç‰ˆé•œåƒåœ°å€ä¸ºportainer/portainerï¼Œä»2022å¹´1æœˆæ ‡è®°ä¸ºè¿‡æœŸ</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ–°ç‰ˆé•œåƒåœ°å€ä¸ºportainer/portainer-ce</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--restart=always å¦‚æœDockerå¼•æ“é‡å¯äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å®ä¾‹ä¹Ÿä¼šåœ¨Dockerå¼•æ“é‡å¯åé‡å¯ï¼Œç±»ä¼¼å¼€æœºè‡ªå¯</span><br>docker run -d -p 8000:8000 -p 9000:9000 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:2.13.0-alpine<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ä¹‹åï¼Œä¾¿å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œè®¿é—®ï¼š<a href="http://xxx.xxx.xxx.xxx:9000">http://xxx.xxx.xxx.xxx:9000</a></p><p>é¦–æ¬¡è¿›æ¥æ—¶ï¼Œéœ€è¦åˆ›å»º adminçš„ç”¨æˆ·åï¼ˆé»˜è®¤<code>admin</code>ï¼‰ã€å¯†ç ï¼ˆå¿…é¡»æ»¡è¶³æ ¡éªŒè§„åˆ™ï¼Œä¾‹å¦‚<code>portainer.io123</code>ï¼‰ã€‚</p><p>é€‰æ‹©<code>local</code>ç®¡ç†æœ¬åœ°dockerï¼Œå³å¯çœ‹åˆ°æœ¬åœ°Dockerçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶ä¸­çš„é•œåƒï¼ˆimagesï¼‰ã€å®¹å™¨ï¼ˆcontainersï¼‰ã€ç½‘ç»œï¼ˆnetworksï¼‰ã€å®¹å™¨å·ï¼ˆvolumesï¼‰ã€composeç¼–æ’ï¼ˆstacksï¼‰ç­‰ç­‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. Docker-composeå®¹å™¨ç¼–æ’</title>
    <link href="/2024/12/07/docker/14-Docker-compose%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/"/>
    <url>/2024/12/07/docker/14-Docker-compose%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/</url>
    
    <content type="html"><![CDATA[<h1 id="docker-compose">1. Docker-compose</h1><p><code>Docker-Compose</code> æ˜¯ Dockerå®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹Dockerå®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚</p><p><code>Docker-Compose</code>å¯ä»¥ç®¡ç†å¤šä¸ªDockerå®¹å™¨ç»„æˆä¸€ä¸ªåº”ç”¨ã€‚éœ€è¦å®šä¹‰ä¸€ä¸ªyamlæ ¼å¼çš„é…ç½®æ–‡ä»¶<code>docker-compose.yml</code>ï¼Œé…ç½®å¥½å¤šä¸ªå®¹å™¨ä¹‹é—´çš„è°ƒç”¨å…³ç³»ï¼Œç„¶ååªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±èƒ½åŒæ—¶å¯åŠ¨/å…³é—­è¿™äº›å®¹å™¨ã€‚</p><p>Dockerå»ºè®®æˆ‘ä»¬æ¯ä¸ªå®¹å™¨ä¸­åªè¿è¡Œä¸€ä¸ªæœåŠ¡ï¼Œå› ä¸ºDockerå®¹å™¨æœ¬èº«å ç”¨èµ„æºæå°‘ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å°†æ¯ä¸ªæœåŠ¡å•ç‹¬çš„åˆ†å‰²å¼€æ¥ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦åŒæ—¶éƒ¨ç½²å¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡å•ç‹¬æ„å»ºé•œåƒæ„å»ºå®¹å™¨å°±ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥Docker å®˜æ–¹æ¨å‡ºäº† <code>docker-compose</code> å¤šæœåŠ¡éƒ¨ç½²çš„å·¥å…·ã€‚</p><p>Composeå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ <code>docker-compose.yml</code>æ¨¡æ¿æ–‡ä»¶æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆ<code>project</code>ï¼‰ã€‚å¯ä»¥å¾ˆå®¹æ˜“çš„ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰ä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨ï¼Œç„¶åä½¿ç”¨ä¸€æ¡æŒ‡ä»¤å®‰è£…è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰ä¾èµ–ï¼Œå®Œæˆæ„å»ºã€‚</p><p>æ ¸å¿ƒæ¦‚å¿µï¼š</p><ul><li>æœåŠ¡ï¼ˆ<code>service</code>ï¼‰ï¼šä¸€ä¸ªä¸ªåº”ç”¨å®¹å™¨å®ä¾‹</li><li>å·¥ç¨‹ï¼ˆ<code>project</code>ï¼‰ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨<code>docker-compose.yml</code>ä¸­å®šä¹‰</li></ul><p>Composeä½¿ç”¨çš„ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol type="1"><li>ç¼–å†™ Dockerfile å®šä¹‰å„ä¸ªåº”ç”¨å®¹å™¨ï¼Œå¹¶æ„å»ºå‡ºå¯¹åº”çš„é•œåƒæ–‡ä»¶</li><li>ç¼–å†™<code>docker-compose.yml</code>ï¼Œå®šä¹‰ä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡å•å…ƒï¼Œå®‰æ’å¥½æ•´ä½“åº”ç”¨ä¸­çš„å„ä¸ªå®¹å™¨æœåŠ¡</li><li>æ‰§è¡Œ <code>docker-compose up</code>å‘½ä»¤ï¼Œå…¶åˆ›å»ºå¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼Œå®Œæˆä¸€é”®éƒ¨ç½²ä¸Šçº¿</li></ol><h1 id="å®‰è£…docker-compose">2. å®‰è£…Docker-Compose</h1><p><code>Docker-Compose</code>çš„ç‰ˆæœ¬éœ€è¦å’ŒDockerå¼•æ“ç‰ˆæœ¬å¯¹åº”ï¼Œå¯ä»¥å‚ç…§å®˜ç½‘ä¸Šçš„<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/">å¯¹åº”å…³ç³»</a>ã€‚</p><p>å®‰è£…Composeï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¾‹å¦‚ä»githubä¸‹è½½ 2.5.0ç‰ˆæœ¬çš„docker-compose</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶æ”¾åˆ° /usr/local/binç›®å½•ä¸‹ï¼Œå‘½åä¸º docker-compose</span><br>curl -L https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ·»åŠ æƒé™</span><br>chmod +x /usr/local/bin/docker-compose<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">éªŒè¯</span><br>docker-compose version<br></code></pre></td></tr></table></figure><p>å¸è½½Composeï¼šç›´æ¥åˆ é™¤<code>usr/local/bin/docker-compose</code>æ–‡ä»¶å³å¯</p><h1 id="å¸¸ç”¨å‘½ä»¤">3. å¸¸ç”¨å‘½ä»¤</h1><p>æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œéœ€è¦åœ¨å¯¹åº”çš„<code>docker-compose.yml</code>æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æ‰§è¡Œã€‚</p><p>æŸ¥çœ‹å¸®åŠ©ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose -h<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶å¯åŠ¨<code>docker-compose</code>æœåŠ¡ï¼šï¼ˆç±»ä¼¼<code>docker run</code>ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose up<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åå°è¿è¡Œ</span><br>docker-compose up -d<br></code></pre></td></tr></table></figure><p>åœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œã€å·ã€é•œåƒï¼šï¼ˆç±»ä¼¼ <code>docker stop</code> +Â <code>docker rm</code>ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose down<br></code></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨å®ä¾‹å†…éƒ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose exec &lt;ymlé‡Œé¢çš„æœåŠ¡id&gt; /bin/bash<br></code></pre></td></tr></table></figure><p>å±•ç¤ºå½“å‰<code>docker-compose</code>ç¼–æ’è¿‡çš„è¿è¡Œçš„æ‰€æœ‰å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose ps<br></code></pre></td></tr></table></figure><p>å±•ç¤ºå½“å‰<code>docker-compose</code>ç¼–æ’è¿‡çš„å®¹å™¨è¿›ç¨‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose top<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å®¹å™¨è¾“å‡ºæ—¥å¿—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose log &lt;ymlé‡Œé¢çš„æœåŠ¡id&gt;<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose config<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æœ‰é—®é¢˜æ‰è¾“å‡º</span><br>docker-compose config -q<br></code></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose restart<br></code></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡ï¼šï¼ˆç±»ä¼¼ <code>docker start</code>ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose start<br></code></pre></td></tr></table></figure><p>åœæ­¢æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose stop<br></code></pre></td></tr></table></figure><h1 id="composeç¼–æ’å®ä¾‹">4. composeç¼–æ’å®ä¾‹</h1><p>ç¤ºä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># docker-composeæ–‡ä»¶ç‰ˆæœ¬å·</span><br><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3&quot;</span><br><br><span class="hljs-comment"># é…ç½®å„ä¸ªå®¹å™¨æœåŠ¡</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">microService:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">springboot_docker:1.0</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">ms01</span>  <span class="hljs-comment"># å®¹å™¨åç§°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œä¼šç”Ÿæˆä¸€ä¸ªæœåŠ¡ååŠ ä¸Šå‰ç¼€çš„å®¹å™¨å</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;6001:6001&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/microService:/data</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">springboot_network</span><br>    <span class="hljs-attr">depends_on:</span>  <span class="hljs-comment"># é…ç½®è¯¥å®¹å™¨æœåŠ¡æ‰€ä¾èµ–çš„å®¹å™¨æœåŠ¡</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span><br><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6.0.8</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;6379:6379&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/redis/redis.conf:/etc/redis/redis.conf</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/redis/data:data</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">springboot_network</span><br>    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">/etc/redis/redis.conf</span><br><br>  <span class="hljs-attr">mysql:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.7</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">&#x27;123456&#x27;</span><br>      <span class="hljs-attr">MYSQL_ALLOW_EMPTY_PASSWORD:</span> <span class="hljs-string">&#x27;no&#x27;</span><br>      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">&#x27;db_springboot&#x27;</span><br>      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">&#x27;springboot&#x27;</span><br>      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">&#x27;springboot&#x27;</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;3306:3306&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/mysql/db:/var/lib/mysql</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/mysql/conf/my.cnf:/etc/my.cnf</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/mysql/init:/docker-entrypoint-initdb.d</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">springboot_network</span><br>    <span class="hljs-attr">command:</span> <span class="hljs-string">--default-authentication-plugin=mysql_native_password</span> <span class="hljs-comment"># è§£å†³å¤–éƒ¨æ— æ³•è®¿é—®</span><br><br><span class="hljs-attr">networks:</span><br>  <span class="hljs-comment"># åˆ›å»º springboot_network ç½‘æ¡¥ç½‘ç»œ</span><br>  <span class="hljs-attr">springboot_network:</span><br></code></pre></td></tr></table></figure><p>ç¼–å†™å®Œæˆ<code>docker-compose.yml</code>åï¼Œè¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿›è¡Œè¯­æ³•æ£€æŸ¥</span><br>docker-compose config -q<br></code></pre></td></tr></table></figure><p>å¦‚æœè¯­æ³•æ£€æŸ¥æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè¿›è¡Œåˆ›å»ºã€å¯åŠ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker-compose up -d<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># docker-composeæ–‡ä»¶ç‰ˆæœ¬å·</span><br><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3&quot;</span><br><br><span class="hljs-comment"># é…ç½®å„ä¸ªå®¹å™¨æœåŠ¡</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">microService:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">ubuntu</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">ms01</span>  <span class="hljs-comment"># å®¹å™¨åç§°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œä¼šç”Ÿæˆä¸€ä¸ªæœåŠ¡ååŠ ä¸Šå‰ç¼€çš„å®¹å™¨å</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;6001:6001&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/microService:/data</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">springboot_network</span><br>    <span class="hljs-attr">depends_on:</span>  <span class="hljs-comment"># é…ç½®è¯¥å®¹å™¨æœåŠ¡æ‰€ä¾èµ–çš„å®¹å™¨æœåŠ¡</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span><br><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:6.0.8</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;6379:6379&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/redis/redis.conf:/etc/redis/redis.conf</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/redis/data:/data</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">springboot_network</span><br>    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">/etc/redis/redis.conf</span><br><br>  <span class="hljs-attr">mysql:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.7</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">&#x27;123456&#x27;</span><br>      <span class="hljs-attr">MYSQL_ALLOW_EMPTY_PASSWORD:</span> <span class="hljs-string">&#x27;no&#x27;</span><br>      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">&#x27;db_springboot&#x27;</span><br>      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">&#x27;springboot&#x27;</span><br>      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">&#x27;springboot&#x27;</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;3306:3306&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/mysql/db:/var/lib/mysql</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/mysql/conf/my.cnf:/etc/my.cnf</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/app/mysql/init:/docker-entrypoint-initdb.d</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">springboot_network</span><br>    <span class="hljs-attr">command:</span> <span class="hljs-string">--default-authentication-plugin=mysql_native_password</span> <span class="hljs-comment"># è§£å†³å¤–éƒ¨æ— æ³•è®¿é—®</span><br><br><span class="hljs-attr">networks:</span><br>  <span class="hljs-comment"># åˆ›å»º springboot_network ç½‘æ¡¥ç½‘ç»œ</span><br>  <span class="hljs-attr">springboot_network:</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. Dockerç½‘ç»œ</title>
    <link href="/2024/12/07/docker/13-Docker%E7%BD%91%E7%BB%9C/"/>
    <url>/2024/12/07/docker/13-Docker%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="docker-ç½‘ç»œ">1. Docker ç½‘ç»œ</h1><p>dockerå®‰è£…å¹¶å¯åŠ¨æœåŠ¡åï¼Œä¼šåœ¨å®¿ä¸»æœºä¸­æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿç½‘å¡ã€‚</p><p>åœ¨DockeræœåŠ¡å¯åŠ¨å‰ï¼Œä½¿ç”¨ <code>ifconfig</code> æˆ–<code>ip addr</code> æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼š</p><ul><li><code>ens33</code>æˆ–<code>eth0</code>ï¼šæœ¬æœºç½‘å¡</li><li><code>lo</code>ï¼šæœ¬æœºå›ç¯ç½‘ç»œç½‘å¡</li><li>å¯èƒ½æœ‰<code>virbr0</code>ï¼ˆCentOSå®‰è£…æ—¶å¦‚æœé€‰æ‹©çš„æœ‰ç›¸å…³è™šæ‹ŸåŒ–æœåŠ¡ï¼Œå°±ä¼šå¤šä¸€ä¸ªä»¥ç½‘æ¡¥è¿æ¥çš„ç§ç½‘åœ°å€çš„<code>virbr0</code>ç½‘å¡ï¼Œä½œç”¨æ˜¯ä¸ºè¿æ¥è™šæ‹Ÿç½‘å¡æä¾›NATè®¿é—®å¤–ç½‘çš„åŠŸèƒ½ã€‚å¦‚æœè¦ç§»é™¤è¯¥æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨<code>yum remove libvirt-libs.x86_64</code>ï¼‰</li></ul><p>ä½¿ç”¨ <code>systemctl start docker</code>å¯åŠ¨DockeræœåŠ¡åï¼Œä¼šå¤šå‡ºä¸€ä¸ª<code>docker0</code> ç½‘å¡ã€‚</p><p>ä½œç”¨ï¼š</p><ul><li>å®¹å™¨é—´çš„äº’è”å’Œé€šä¿¡ä»¥åŠç«¯å£æ˜ å°„</li><li>å®¹å™¨IPå˜åŠ¨æ—¶å€™å¯ä»¥é€šè¿‡æœåŠ¡åç›´æ¥ç½‘ç»œé€šä¿¡è€Œä¸å—åˆ°å½±å“</li></ul><p>Dockerå®¹å™¨çš„ç½‘ç»œéš”ç¦»ï¼Œæ˜¯é€šè¿‡Linuxå†…æ ¸ç‰¹æ€§ <code>namespace</code>å’Œ<code>cgroup</code> å®ç°çš„ã€‚</p><h1 id="dockerç½‘ç»œå‘½ä»¤">2. dockerç½‘ç»œå‘½ä»¤</h1><p>æŸ¥çœ‹Dockerç½‘ç»œæ¨¡å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network ls<br></code></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰ä¿®æ”¹è¿‡docker networkï¼Œåˆ™é»˜è®¤æœ‰3ä¸ªç½‘ç»œæ¨¡å¼ï¼š</p><ul><li><code>bridge</code></li><li><code>host</code></li><li><code>none</code></li></ul><p>æ·»åŠ Dockerç½‘ç»œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network add xxx<br></code></pre></td></tr></table></figure><p>åˆ é™¤Dockerç½‘ç»œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network rm xxx<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ç½‘ç»œå…ƒæ•°æ®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network inspect xxx<br></code></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰æ— æ•ˆçš„ç½‘ç»œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network prune<br></code></pre></td></tr></table></figure><h1 id="docker-ç½‘ç»œæ¨¡å¼">3. Docker ç½‘ç»œæ¨¡å¼</h1><p>Docker çš„ç½‘ç»œæ¨¡å¼ï¼š</p><table><thead><tr><th>ç½‘ç»œæ¨¡å¼</th><th>ç®€ä»‹</th><th>ä½¿ç”¨æ–¹å¼</th></tr></thead><tbody><tr><td>bridge</td><td>ä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…ã€è®¾ç½®IPç­‰ï¼Œå¹¶å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ª<code>docker0</code><br>è™šæ‹Ÿç½‘æ¡¥ï¼Œé»˜è®¤ä¸ºè¯¥æ¨¡å¼</td><td><code>--network bridge</code></td></tr><tr><td>host</td><td>å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ã€é…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£</td><td><code>--network host</code></td></tr><tr><td>none</td><td>å®¹å™¨æœ‰ç‹¬ç«‹çš„ Network namespaceï¼Œä½†å¹¶æ²¡æœ‰å¯¹é½è¿›è¡Œä»»ä½•ç½‘ç»œè®¾ç½®ï¼Œå¦‚åˆ†é…<code>veth pari</code><br> å’Œ ç½‘æ¡¥è¿æ¥ã€IPç­‰</td><td><code>--network none</code></td></tr><tr><td>container</td><td>æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡å’Œé…ç½®è‡ªå·±çš„IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ç­‰</td><td><code>--network container:NAMEæˆ–è€…å®¹å™¨ID</code></td></tr></tbody></table><p>æŸ¥çœ‹æŸä¸ªå®¹å™¨çš„ç½‘ç»œæ¨¡å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">é€šè¿‡inspectè·å–å®¹å™¨ä¿¡æ¯ï¼Œæœ€å20è¡Œå³ä¸ºå®¹å™¨çš„ç½‘ç»œæ¨¡å¼ä¿¡æ¯</span><br>docker inspect å®¹å™¨ID | tail -n 20<br></code></pre></td></tr></table></figure><h1 id="docker0">4. docker0</h1><p>DockeræœåŠ¡é»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ª<code>docker0</code>ç½‘æ¡¥ï¼ˆå…¶ä¸Šæœ‰ä¸€ä¸ª<code>docker0</code>å†…éƒ¨æ¥å£ï¼‰ï¼Œè¯¥æ¡¥æ¥ç½‘ç»œçš„åç§°ä¸º<code>docker0</code>ï¼Œå®ƒåœ¨å†…æ ¸å±‚è¿é€šäº†å…¶ä»–çš„ç‰©ç†æˆ–è™šæ‹Ÿç½‘å¡ï¼Œè¿™å°±å°†æ‰€æœ‰å®¹å™¨å’Œæœ¬åœ°ä¸»æœºéƒ½æ”¾åˆ°åŒä¸€ä¸ªç‰©ç†ç½‘ç»œã€‚</p><p>Dockeré»˜è®¤æŒ‡å®šäº†<code>docker0</code>æ¥å£çš„IPåœ°å€å’Œå­ç½‘æ©ç ï¼Œè®©ä¸»æœºå’Œå®¹å™¨ä¹‹é—´å¯ä»¥é€šè¿‡ç½‘æ¡¥äº’ç›¸é€šä¿¡ã€‚</p><p>æŸ¥çœ‹<code>bridge</code>ç½‘ç»œçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶é€šè¿‡<code>grep</code>è·å–åç§°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network inspect bridge | grep name<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å…¶åç§°ä¸º<code>docker0</code>ã€‚</p><h1 id="bridgeæ¨¡å¼">5. bridgeæ¨¡å¼</h1><p>Dockerä½¿ç”¨Linuxæ¡¥æ¥ï¼Œåœ¨å®¿ä¸»æœºè™šæ‹Ÿä¸€ä¸ª<code>Docker</code>å®¹å™¨ç½‘æ¡¥ï¼ˆ<code>docker0</code>ï¼‰ï¼ŒDockerå¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ä¼šæ ¹æ®<code>Docker</code>ç½‘æ¡¥çš„ç½‘æ®µåˆ†é…ç»™å®¹å™¨ä¸€ä¸ªIPåœ°å€ï¼Œç§°ä¸º<code>Container-IP</code>ï¼ŒåŒæ—¶Dockerç½‘æ¡¥æ˜¯æ¯ä¸ªå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚å› ä¸ºåœ¨åŒä¸€ä¸ªå®¿ä¸»æœºå†…çš„å®¹å™¨æ¥å…¥åŒä¸€ä¸ªç½‘æ¡¥ï¼Œè¿™æ ·å®¹å™¨ä¹‹é—´å°±èƒ½å¤Ÿé€šè¿‡å®¹å™¨çš„<code>Container-IP</code>ç›´æ¥é€šä¿¡ã€‚</p><p><code>docker run</code>çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®š<code>--network</code>çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨çš„ç½‘æ¡¥æ¨¡å¼å°±æ˜¯<code>bridge</code>ï¼Œä½¿ç”¨çš„å°±æ˜¯<code>docker0</code>ã€‚åœ¨å®¿ä¸»æœº<code>ifconfig</code>å°±å¯ä»¥çœ‹åˆ°<code>docker0</code>å’Œè‡ªå·±<code>create</code>çš„<code>network</code>ã€‚</p><p>ç½‘æ¡¥<code>docker0</code>åˆ›å»ºä¸€å¯¹å¯¹ç­‰è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä¸€ä¸ªå«<code>veth</code>ï¼Œå¦ä¸€ä¸ªå«<code>eth0</code>ï¼Œæˆå¯¹åŒ¹é…ï¼š</p><p>æ•´ä¸ªå®¿ä¸»æœºçš„ç½‘æ¡¥æ¨¡å¼éƒ½æ˜¯<code>docker0</code>ï¼Œç±»ä¼¼ä¸€ä¸ªäº¤æ¢æœºæœ‰ä¸€å †æ¥å£ï¼Œæ¯ä¸ªæ¥å£å«<code>veth</code>ï¼Œåœ¨æœ¬åœ°ä¸»æœºå’Œå®¹å™¨å†…åˆ†åˆ«åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ¥å£ï¼Œå¹¶è®©ä»–ä»¬å½¼æ­¤è”é€šï¼ˆè¿™æ ·ä¸€å¯¹æ¥å£å«åš<code>veth pair</code>ï¼‰ã€‚</p><p>æ¯ä¸ªå®¹å™¨å®ä¾‹å†…éƒ¨ä¹Ÿæœ‰ä¸€å—ç½‘å¡ï¼Œå®¹å™¨å†…çš„ç½‘å¡æ¥å£å«åš<code>eth0</code>ã€‚</p><p><code>docker0</code>ä¸Šé¢çš„æ¯ä¸ª<code>veth</code>åŒ¹é…æŸä¸ªå®¹å™¨å®ä¾‹å†…éƒ¨çš„<code>eth0</code>ï¼Œä¸¤ä¸¤é…å¯¹ï¼Œä¸€ä¸€åŒ¹é…ã€‚</p><p><img src="/2024/12/07/docker/13-Docker%E7%BD%91%E7%BB%9C/1652093671572-83d0901c-5052-482e-9dde-4a2804b35bc9.webp"></p><p>ä¾‹å¦‚ï¼š</p><p>å¯åŠ¨tomcatå®¹å™¨ï¼Œè¿›å…¥tomcatå®¹å™¨åï¼Œæ‰§è¡Œ<code>ip addr</code>ï¼Œå¯ä»¥çœ‹åˆ°å…¶ç½‘å¡ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">docker run -d -p 8081:8080 --name tomcat81 billygoo/tomcat8-jdk8<br>docker run -d -p 8082:8080 --name tomcat82 billygoo/tomcat8-jdk8<br>1: lo ..................<br><br>å®¹å™¨å†…çš„ç½‘å¡ä¸º eth0<br>@ç¬¦å·åé¢å°±æ˜¯å®¿ä¸»æœºä¸Šå¯¹åº”çš„vethç½‘å¡çš„ç¼–å·28<br>27: eth0@if28 ...............................<br></code></pre></td></tr></table></figure><p>åœ¨å®¿ä¸»æœºæ‰§è¡Œ <code>ip addr</code> æŸ¥çœ‹å®¿ä¸»æœºç½‘å¡ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">æ¯ä¸ªvethéƒ½æœ‰ä¸ªç¼–å·ï¼švethXXXXXX<br>@ç¬¦å·åé¢å¯¹åº”å°±æ˜¯å®¹å™¨å†…çš„eth0ç½‘å¡ç¼–å·27<br><br>28: vethXXXXXX@if27  ................<br></code></pre></td></tr></table></figure><h1 id="hostæ¨¡å¼">6. hostæ¨¡å¼</h1><p>ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ IP åœ°å€ä¸å¤–ç•Œè¿›è¡Œé€šä¿¡ï¼Œä¸å†éœ€è¦é¢å¤–è¿›è¡Œ NATè½¬æ¢ã€‚</p><p>å®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„ Network Namespaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ªNetwork spaceã€‚</p><p>å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚</p><p><img src="/2024/12/07/docker/13-Docker%E7%BD%91%E7%BB%9C/1652093680434-8180b11d-89f2-4bb6-a485-b3c22bd28688.webp"></p><p>å¦‚æœåœ¨ <code>docker run</code> å‘½ä»¤ä¸­åŒæ—¶ä½¿ç”¨äº†<code>--network host</code> å’Œ <code>-p</code>ç«¯å£æ˜ å°„ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 8083:8080 --network host --name tomcat83 billygoo/tomcat8-jdk8<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆä¼šå‡ºç°ä¸€ä¸ªè­¦å‘Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">WARNING: Published ports are discarded when using host network mode<br></code></pre></td></tr></table></figure><p>å› ä¸ºæ­¤æ—¶å·²ç»ä½¿ç”¨äº†<code>host</code>æ¨¡å¼ï¼Œæœ¬èº«å°±æ˜¯ç›´æ¥ä½¿ç”¨çš„å®¿ä¸»æœºçš„IPå’Œç«¯å£ï¼Œæ­¤æ—¶çš„<code>-p</code>ç«¯å£æ˜ å°„å°±æ²¡æœ‰äº†æ„ä¹‰ï¼Œä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œç«¯å£å·è¿˜æ˜¯ä¼šä»¥ä¸»æœºç«¯å£å·ä¸ºä¸»ã€‚</p><p>æ­£ç¡®åšæ³•æ˜¯ï¼šä¸å†è¿›è¡Œ<code>-p</code>ç«¯å£æ˜ å°„ï¼Œæˆ–è€…æ”¹ç”¨<code>bridge</code>æ¨¡å¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d --network host --name tomcat83 billygoo/tomcat8-jdk8<br></code></pre></td></tr></table></figure><h1 id="noneæ¨¡å¼">7. noneæ¨¡å¼</h1><p>ç¦ç”¨ç½‘ç»œåŠŸèƒ½ã€‚</p><p>åœ¨<code>none</code>æ¨¡å¼ä¸‹ï¼Œå¹¶ä¸ä¸ºdockerå®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚è¿›å…¥å®¹å™¨å†…ï¼Œä½¿ç”¨<code>ip addr</code>æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼Œåªèƒ½çœ‹åˆ°<code>lo</code>ï¼ˆæœ¬åœ°å›ç¯ç½‘ç»œ<code>127.0.0.1</code>ç½‘å¡ï¼‰ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d -p 8084:8080 --network none --name tomcat84 billygoo/tomcat8-jdk8<br></code></pre></td></tr></table></figure><h1 id="containeræ¨¡å¼">8. containeræ¨¡å¼</h1><p>æ–°å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ç½‘ç»œIPé…ç½®ï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚</p><p>æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ã€IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ã€‚ä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œå…±äº«ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ä¾ç„¶æ˜¯éš”ç¦»çš„ã€‚</p><p><img src="/2024/12/07/docker/13-Docker%E7%BD%91%E7%BB%9C/1652093688335-b6e6329d-5292-4901-ad0b-9e57bf46a1cf.webp"></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -it --name alpine1 alpine /bin/sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŒ‡å®šå’Œ alpine1 å®¹å™¨å…±äº«ç½‘ç»œ</span><br>docker run -it --network container:alpine1 --name alpine2 alpine /bin/sh<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ä½¿ç”¨<code>ip addr</code>æŸ¥çœ‹ä¸¤å°å®¹å™¨çš„ç½‘ç»œï¼Œä¼šå‘ç°ä¸¤å°å®¹å™¨çš„<code>eth0</code>ç½‘å¡å†…çš„IPç­‰ä¿¡æ¯å®Œå…¨ç›¸åŒã€‚</p><p>å¦‚æœå…³æ‰äº†<code>alpine1</code>å®¹å™¨ï¼Œå› ä¸º<code>alpine2</code>çš„ç½‘ç»œä½¿ç”¨çš„<code>alpine1</code>å…±äº«ç½‘ç»œï¼Œæ‰€ä»¥å…³æ‰<code>alpin1</code>åï¼Œ<code>alpine2</code>çš„<code>eth0</code>ç½‘å¡ä¹Ÿéšä¹‹æ¶ˆå¤±äº†ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d -p 8085:8080 --name tomcat85 billygoo/tomcat8-jdk8<br>docker run -d -p 8086:8080 --network container:tomcat85 --name tomcat86 billygoo/tomcat8-jdk8<br>ä¸åˆé€‚<br></code></pre></td></tr></table></figure><h1 id="è‡ªå®šä¹‰ç½‘ç»œ">9. è‡ªå®šä¹‰ç½‘ç»œ</h1><p>å®¹å™¨é—´çš„äº’è”å’Œé€šä¿¡ä»¥åŠç«¯å£æ˜ å°„ã€‚</p><p>å®¹å™¨ IPå˜åŠ¨æ—¶å€™å¯ä»¥é€šè¿‡æœåŠ¡åç›´æ¥ç½‘ç»œé€šä¿¡è€Œä¸å—å½±å“ã€‚ï¼ˆç±»ä¼¼Eurekaï¼Œé€šè¿‡æœåŠ¡åç›´æ¥äº’ç›¸é€šä¿¡ï¼Œè€Œä¸æ˜¯å†™æ­»IPåœ°å€ï¼‰ã€‚</p><blockquote><p>dockerä¸­è¿˜æœ‰ä¸€ä¸ª <code>--link</code>è¿›è¡Œå®¹å™¨ç½‘ç»œäº’è”ï¼Œä½†æ˜¯å·²ç»è¢«æ ‡è®°ä¸ºè¿‡æ—¶çš„ï¼Œå¯èƒ½ä¼šåœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­ç§»é™¤è¿™ä¸ªåŠŸèƒ½ã€‚æ¨èä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œæ›¿æ¢linkã€‚</p></blockquote><p>è‡ªå®šä¹‰æ¡¥æ¥ç½‘ç»œï¼ˆè‡ªå®šä¹‰ç½‘ç»œé»˜è®¤ä½¿ç”¨çš„æ˜¯æ¡¥æ¥ç½‘ç»œ<code>bridge</code>ï¼‰ï¼š</p><ol type="1"><li>æ–°å»ºè‡ªå®šä¹‰ç½‘ç»œ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network create tomcat_network<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker network ls<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>åˆ›å»ºå®¹å™¨æ—¶ï¼ŒæŒ‡å®šåŠ å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„ç½‘ç»œä¸­</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 8088:8080 --network bobo_network --name tomcat88 billygoo/tomcat8-jdk8<br>docker run -d -p 8089:8080 --network bobo_network --name tomcat89 billygoo/tomcat8-jdk8<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>æ­¤æ—¶è¿›å…¥<code>tomcat1</code>ä¸­ï¼Œä½¿ç”¨<code>ping</code>å‘½ä»¤æµ‹è¯•è¿æ¥<code>tomcat2</code>å®¹å™¨åï¼Œå‘ç°å¯ä»¥æ­£å¸¸è¿é€š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å®‰è£…ifconfigå‘½ä»¤</span><br>yum install -y net-tools<br><span class="hljs-meta prompt_"># </span><span class="language-bash">å®‰è£…ip addrå‘½ä»¤</span><br>yum install -y iproute<br><span class="hljs-meta prompt_"># </span><span class="language-bash">å®‰è£…pingå‘½ä»¤</span><br>yum install -y iputils<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ç›´æ¥pingå®¹å™¨åï¼Œä¸éœ€è¦ping IPåœ°å€</span><br>ping tomcat88<br></code></pre></td></tr></table></figure><h1 id="linkè¿æ¥">10. linkè¿æ¥</h1><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ä¸€å°mysqlå®¹å™¨</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--name ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåˆ«å</span><br>docker run --name mysql-matomo -p 3308:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql:8.0.28<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨å¦ä¸€ä¸ªå®¹å™¨ï¼Œé€šè¿‡--<span class="hljs-built_in">link</span>è¿æ¥åˆ°mysqlå®¹å™¨</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--<span class="hljs-built_in">link</span> å®¹å™¨åç§°:æœ¬å®¹å™¨è¿æ¥å¯¹æ–¹æ—¶çš„åˆ«å</span><br>docker run -d -p 8888:80 --link mysql-matomo:db --name matomo matomo:4.9.0<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ­¤æ—¶ï¼Œåœ¨matomoå®¹å™¨ä¸­ï¼Œä¾¿å¯ä»¥é€šè¿‡ db è¿™ä¸ªhostnameè¿æ¥åˆ°mysql-matomoå®¹å™¨ï¼Œè€Œæ— é¡»å†é€šè¿‡ip</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿æ¥åœ°å€ï¼šdb:3306</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. Dockerå‘å¸ƒå¾®æœåŠ¡</title>
    <link href="/2024/12/07/docker/12-Docker%E5%8F%91%E5%B8%83%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    <url>/2024/12/07/docker/12-Docker%E5%8F%91%E5%B8%83%E5%BE%AE%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="æ­å»ºspringbooté¡¹ç›®">1. æ­å»ºSpringBooté¡¹ç›®</h1><p>æ­å»ºä¸€ä¸ªç®€å•çš„SpringBooté¡¹ç›®ï¼š</p><ol type="1"><li>åˆ›å»ºmavenå·¥ç¨‹ï¼Œpomä¸ºï¼š</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.study<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>test-docker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>docker_boot<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æ–°å»ºModuleï¼Œpomä¸ºï¼š</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>test-docker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.study<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>docker_boot<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">6001</span><br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>ç¼–å†™ä¸»å¯åŠ¨ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.study;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> tengyer 2022/05/06 16:34</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DockerBootApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(DockerBootApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ç¼–å†™ä¸€ä¸ªController</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.study.controller;<br><br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-keyword">import</span> java.util.UUID;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> tengyer 2022/05/06 16:35</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String port;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/order/docker&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">helloDocker</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello world \t&quot;</span> + port + <span class="hljs-string">&quot;\t&quot;</span> + UUID.randomUUID().toString();<br>    &#125;<br><br>    <span class="hljs-meta">@RequestMapping(value = &quot;/order/index&quot;, method = RequestMethod.GET)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">index</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æœåŠ¡ç«¯å£å·ï¼š&quot;</span> + <span class="hljs-string">&quot;\t&quot;</span> + port + <span class="hljs-string">&quot;\t&quot;</span> + UUID.randomUUID().toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨Ideaä¸­è¿è¡Œæ²¡æœ‰é—®é¢˜æ—¶ï¼Œå°†å…¶ä½¿ç”¨mavençš„<code>package</code>æ‰“æˆjaråŒ…ã€‚</p><h1 id="å‘å¸ƒå¾®æœåŠ¡é¡¹ç›®åˆ°dockerå®¹å™¨">2. å‘å¸ƒå¾®æœåŠ¡é¡¹ç›®åˆ°Dockerå®¹å™¨</h1><ol type="1"><li>å°†é¡¹ç›®jaråŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨</li><li>ç¼–å†™Dockerfile</li></ol><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> openjdk:<span class="hljs-number">8</span>-oracle<br><span class="hljs-keyword">MAINTAINER</span> lee<br><br><span class="hljs-comment"># åœ¨ä¸»æœº /var/lib/dockerç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹å™¨çš„ /tmp</span><br><span class="hljs-keyword">VOLUME</span><span class="language-bash"> /tmp</span><br><br><span class="hljs-comment"># å°†jaråŒ…æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸º springboot_docker.jar</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> docker_boot-1.0-SNAPSHOT.jar /springboot_docker.jar</span><br><span class="hljs-comment"># è¿è¡ŒjaråŒ…</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> bash -c <span class="hljs-string">&#x27;touch /springboot_docker.jar&#x27;</span></span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;-jar&quot;</span>, <span class="hljs-string">&quot;/springboot_docker.jar&quot;</span>]</span><br><br><span class="hljs-comment"># SpringBooté¡¹ç›®é…ç½®çš„ç«¯å£å·ä¸º6001ï¼Œéœ€è¦å°†6001æš´éœ²å‡ºå»</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">6001</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æ„å»ºé•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker build -t springboot_docker:1.0 .<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>å¯åŠ¨å®¹å™¨ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 6001:6001 --name springboot springboot_docker:1.0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. Dockerfile</title>
    <link href="/2024/12/07/docker/11-Dockerfile/"/>
    <url>/2024/12/07/docker/11-Dockerfile/</url>
    
    <content type="html"><![CDATA[<h1 id="dockerfile">1. Dockerfile</h1><p>Dockerfileæ˜¯ç”¨æ¥æ„å»ºDockeré•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ã€‚</p><p>æ„å»ºæ­¥éª¤ï¼š</p><ol type="1"><li>ç¼–å†™Dockerfileæ–‡ä»¶</li><li><code>docker build</code>å‘½ä»¤æ„å»ºé•œåƒ</li><li><code>docker run</code>ä¾æ®é•œåƒè¿è¡Œå®¹å™¨å®ä¾‹</li></ol><h1 id="æ„å»ºè¿‡ç¨‹">2. æ„å»ºè¿‡ç¨‹</h1><p>Dockerfileç¼–å†™ï¼š</p><ul><li>æ¯æ¡ä¿ç•™å­—æŒ‡ä»¤éƒ½å¿…é¡»ä¸ºå¤§å†™å­—æ¯ï¼Œä¸”åé¢è¦è·Ÿéšè‡³å°‘ä¸€ä¸ªå‚æ•°</li><li>æŒ‡ä»¤æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ</li><li><code>#</code>è¡¨ç¤ºæ³¨é‡Š</li><li>æ¯æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒå±‚å¹¶å¯¹é•œåƒè¿›è¡Œæäº¤</li></ul><p>Dockerå¼•æ“æ‰§è¡ŒDockerçš„å¤§è‡´æµç¨‹ï¼š</p><ol type="1"><li>dockerä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li><li>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤å¹¶å¯¹å®¹å™¨åšå‡ºä¿®æ”¹</li><li>æ‰§è¡Œç±»ä¼¼<code>docker commit</code>çš„æ“ä½œæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚</li><li>dockerå†åŸºäºåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨</li><li>æ‰§è¡ŒDockerfileä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç›´åˆ°æ‰€æœ‰æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œæˆ</li></ol><p>ä»åº”ç”¨è½¯ä»¶çš„è§’åº¦æ¥çœ‹ï¼ŒDockerfileã€Dockerté•œåƒä¸Dockerå®¹å™¨åˆ†åˆ«ä»£è¡¨è½¯ä»¶çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µï¼Œ</p><ul><li>Dockerfileæ˜¯è½¯ä»¶çš„åŸææ–™</li><li>Dockerté•œåƒæ˜¯è½¯ä»¶çš„äº¤ä»˜å“</li><li>Docker?å®¹å™¨åˆ™å¯ä»¥è®¤ä¸ºæ˜¯è½¯ä»¶é•œåƒçš„è¿è¡Œæ€ï¼Œä¹Ÿå³ä¾ç…§é•œåƒè¿è¡Œçš„å®¹å™¨å®ä¾‹</li></ul><p>Dockerfileé¢å‘å¼€å‘ï¼ŒDockeré•œåƒæˆä¸ºäº¤ä»˜æ ‡å‡†ï¼ŒDockerå®¹å™¨åˆ™æ¶‰åŠéƒ¨ç½²ä¸è¿ç»´ï¼Œä¸‰è€…ç¼ºä¸€ä¸å¯ï¼ŒåˆåŠ›å……å½“Dockerä½“ç³»çš„åŸºçŸ³ã€‚</p><h1 id="dockerfileä¿ç•™å­—">3. Dockerfileä¿ç•™å­—</h1><h2 id="from">3.1 FROM</h2><p>åŸºç¡€é•œåƒï¼Œå½“å‰æ–°é•œåƒæ˜¯åŸºäºå“ªä¸ªé•œåƒçš„ï¼ŒæŒ‡å®šä¸€ä¸ªå·²ç»å­˜åœ¨çš„é•œåƒä½œä¸ºæ¨¡æ¿ã€‚Dockerfileç¬¬ä¸€æ¡å¿…é¡»æ˜¯<code>FROM</code></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># FROM é•œåƒå</span><br><span class="hljs-keyword">FROM</span> hub.c.<span class="hljs-number">163</span>.com/library/tomcat<br></code></pre></td></tr></table></figure><h2 id="maintainer">3.2 MAINTAINER</h2><p>é•œåƒç»´æŠ¤è€…çš„å§“åå’Œé‚®ç®±åœ°å€</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># éå¿…é¡»</span><br><span class="hljs-keyword">MAINTAINER</span> ZhangSan zs@<span class="hljs-number">163</span>.com<br></code></pre></td></tr></table></figure><h2 id="run">3.3 RUN</h2><p>å®¹å™¨æ„å»ºæ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤ã€‚</p><p>æœ‰ä¸¤ç§æ ¼å¼ï¼š</p><ul><li>shellæ ¼å¼</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># ç­‰åŒäºåœ¨ç»ˆç«¯æ“ä½œçš„shellå‘½ä»¤</span><br><span class="hljs-comment"># æ ¼å¼ï¼šRUN &lt;å‘½ä»¤è¡Œå‘½ä»¤&gt;</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install vim</span><br></code></pre></td></tr></table></figure><ul><li>execæ ¼å¼</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># æ ¼å¼ï¼šRUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot; , &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;]</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> [<span class="hljs-string">&quot;./test.php&quot;</span>, <span class="hljs-string">&quot;dev&quot;</span>, <span class="hljs-string">&quot;offline&quot;</span>]  <span class="hljs-comment"># ç­‰ä»·äº RUN ./test.php dev offline</span></span><br></code></pre></td></tr></table></figure><p><code>RUN</code>æ˜¯åœ¨<code>docker build</code>æ—¶è¿è¡Œ</p><h2 id="expose">3.4 EXPOSE</h2><p>å½“å‰å®¹å™¨å¯¹å¤–æš´éœ²å‡ºçš„ç«¯å£ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># EXPOSE è¦æš´éœ²çš„ç«¯å£</span><br><span class="hljs-comment"># EXPOSE &lt;port&gt;[/&lt;protocol] ....</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">3306</span> <span class="hljs-number">33060</span><br></code></pre></td></tr></table></figure><h2 id="workdir">3.5 WORKDIR</h2><p>æŒ‡å®šåœ¨åˆ›å»ºå®¹å™¨åï¼Œ ç»ˆç«¯é»˜è®¤ç™»å½•è¿›æ¥çš„å·¥ä½œç›®å½•ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">ENV</span> CATALINA_HOME /usr/local/tomcat<br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$CATALINA_HOME</span></span><br></code></pre></td></tr></table></figure><h2 id="user">3.6 USER</h2><p>æŒ‡å®šè¯¥é•œåƒä»¥ä»€ä¹ˆæ ·çš„ç”¨æˆ·å»æ‰§è¡Œï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯<code>root</code>ã€‚ï¼ˆä¸€èˆ¬ä¸ä¿®æ”¹è¯¥é…ç½®ï¼‰</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># USER &lt;user&gt;[:&lt;group&gt;]</span><br><span class="hljs-keyword">USER</span> patrick<br></code></pre></td></tr></table></figure><h2 id="env">3.7 ENV</h2><p>ç”¨æ¥åœ¨æ„å»ºé•œåƒè¿‡ç¨‹ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p><p>è¿™ä¸ªç¯å¢ƒå˜é‡å¯ä»¥åœ¨åç»­çš„ä»»ä½•<code>RUN</code>æŒ‡ä»¤æˆ–å…¶ä»–æŒ‡ä»¤ä¸­ä½¿ç”¨</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># æ ¼å¼ ENV ç¯å¢ƒå˜é‡å ç¯å¢ƒå˜é‡å€¼</span><br><span class="hljs-comment"># æˆ–è€… ENV ç¯å¢ƒå˜é‡å=å€¼</span><br><span class="hljs-keyword">ENV</span> MY_PATH /usr/mytest<br><br><span class="hljs-comment"># ä½¿ç”¨ç¯å¢ƒå˜é‡</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$MY_PATH</span></span><br></code></pre></td></tr></table></figure><h2 id="volume">3.8 VOLUME</h2><p>å®¹å™¨æ•°æ®å·ï¼Œç”¨äºæ•°æ®ä¿å­˜å’ŒæŒä¹…åŒ–å·¥ä½œã€‚ç±»ä¼¼äº <code>docker run</code>çš„<code>-v</code>å‚æ•°ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># VOLUME æŒ‚è½½ç‚¹</span><br><span class="hljs-comment"># æŒ‚è½½ç‚¹å¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼ˆæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹å¿…é¡»ç”¨åŒå¼•å·ï¼‰</span><br><span class="hljs-keyword">VOLUME</span><span class="language-bash"> /var/lib/mysql</span><br></code></pre></td></tr></table></figure><h2 id="add">3.9 ADD</h2><p>å°†å®¿ä¸»æœºç›®å½•ä¸‹ï¼ˆæˆ–è¿œç¨‹æ–‡ä»¶ï¼‰çš„æ–‡ä»¶æ‹·è´è¿›é•œåƒï¼Œä¸”ä¼šè‡ªåŠ¨å¤„ç†URLå’Œè§£å‹tarå‹ç¼©åŒ…ã€‚</p><h2 id="copy">3.10 COPY</h2><p>ç±»ä¼¼<code>ADD</code>ï¼Œæ‹·è´æ–‡ä»¶å’Œç›®å½•åˆ°é•œåƒä¸­ã€‚</p><p>å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­<code>&lt;æºè·¯å¾„&gt;</code>çš„æ–‡ä»¶ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚é•œåƒå†…çš„<code>&lt;ç›®æ ‡è·¯å¾„&gt;</code>ä½ç½®ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">COPY</span><span class="language-bash"> src dest</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> [<span class="hljs-string">&quot;src&quot;</span>, <span class="hljs-string">&quot;dest&quot;</span>]</span><br><span class="hljs-comment"># &lt;srcæºè·¯å¾„&gt;ï¼šæºæ–‡ä»¶æˆ–è€…æºç›®å½•</span><br><span class="hljs-comment"># &lt;destç›®æ ‡è·¯å¾„&gt;ï¼šå®¹å™¨å†…çš„æŒ‡å®šè·¯å¾„ï¼Œè¯¥è·¯å¾„ä¸ç”¨äº‹å…ˆå»ºå¥½ã€‚å¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</span><br></code></pre></td></tr></table></figure><h2 id="cmd">3.11 CMD</h2><p>æŒ‡å®šå®¹å™¨å¯åŠ¨åè¦å¹²çš„äº‹æƒ…ã€‚</p><p>æœ‰ä¸¤ç§æ ¼å¼ï¼š</p><ul><li>shellæ ¼å¼</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># CMD &lt;å‘½ä»¤&gt;</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello world&quot;</span></span><br></code></pre></td></tr></table></figure><ul><li>execæ ¼å¼</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># CMD [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot; ...]</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;catalina.sh&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]</span><br></code></pre></td></tr></table></figure><ul><li>å‚æ•°åˆ—è¡¨æ ¼å¼</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># CMD [&quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot; ....]ï¼Œä¸ENTRYPOINTæŒ‡ä»¤é…åˆä½¿ç”¨</span><br></code></pre></td></tr></table></figure><p>Dockerfileä¸­å¦‚æœå‡ºç°å¤šä¸ª<code>CMD</code>æŒ‡ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚<code>CMD</code>ä¼šè¢«<code>docker run</code>ä¹‹åçš„å‚æ•°æ›¿æ¢ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºtomcaté•œåƒï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¼šæœ‰ä¸åŒçš„æ•ˆæœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å› ä¸ºtomcatçš„Dockerfileä¸­æŒ‡å®šäº† CMD [<span class="hljs-string">&quot;catalina.sh&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰€ä»¥ç›´æ¥docker run æ—¶ï¼Œå®¹å™¨å¯åŠ¨åä¼šè‡ªåŠ¨æ‰§è¡Œ catalina.sh run</span><br>docker run -it -p 8080:8080 tomcat<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŒ‡å®šå®¹å™¨å¯åŠ¨åæ‰§è¡Œ /bin/bash</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ­¤æ—¶æŒ‡å®šçš„/bin/bashä¼šè¦†ç›–æ‰Dockerfileä¸­æŒ‡å®šçš„ CMD [<span class="hljs-string">&quot;catalina.sh&quot;</span>, <span class="hljs-string">&quot;run&quot;</span>]</span><br>docker run -it -p 8080:8080 tomcat /bin/bash<br></code></pre></td></tr></table></figure><p><code>CMD</code>æ˜¯åœ¨<code>docker run</code>æ—¶è¿è¡Œï¼Œè€Œ<code>RUN</code>æ˜¯åœ¨<code>docker build</code>æ—¶è¿è¡Œã€‚</p><h2 id="entrypoint">3.12 ENTRYPOINT</h2><p>ç”¨æ¥æŒ‡å®šä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ã€‚</p><p>ç±»ä¼¼äº<code>CMD</code>å‘½ä»¤ï¼Œä½†æ˜¯<code>ENTRYPOINT</code>ä¸ä¼šè¢«<code>docker run</code>åé¢çš„å‘½ä»¤è¦†ç›–ï¼Œè¿™äº›å‘½ä»¤å‚æ•°ä¼šè¢«å½“åšå‚æ•°é€ç»™<code>ENTRYPOINT</code>æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åºã€‚</p><p><code>ENTRYPOINT</code>å¯ä»¥å’Œ<code>CMD</code>ä¸€èµ·ç”¨ï¼Œä¸€èˆ¬æ˜¯å¯å˜å‚æ•°æ‰ä¼šä½¿ç”¨<code>CMD</code>ï¼Œè¿™é‡Œçš„<code>CMD</code>ç­‰äºæ˜¯åœ¨ç»™<code>ENTRYPOINT</code>ä¼ å‚ã€‚</p><p>å½“æŒ‡å®šäº†<code>ENTRYPOINT</code>åï¼Œ<code>CMD</code>çš„å«ä¹‰å°±å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸å†æ˜¯ç›´æ¥è¿è¡ŒæœŸå‘½ä»¤ï¼Œè€Œæ˜¯å°†<code>CMD</code>çš„å†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>ENTRYPOINT</code>æŒ‡ä»¤ï¼Œå®ƒä»¬ä¸¤ä¸ªç»„åˆä¼šå˜æˆ<code>&lt;ENTRYPOINT&gt; "&lt;CMD&gt;"</code>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> nginx<br><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;nginx&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>]  <span class="hljs-comment"># å®šå‚</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/etc/nginx/nginx.conf&quot;</span>] <span class="hljs-comment"># å˜å‚</span></span><br></code></pre></td></tr></table></figure><p>å¯¹äºæ­¤Dockerfileï¼Œæ„å»ºæˆé•œåƒ<code>nginx:test</code>åï¼Œå¦‚æœæ‰§è¡Œï¼›</p><ul><li><code>docker run nginx test</code>ï¼Œåˆ™å®¹å™¨å¯åŠ¨åï¼Œä¼šæ‰§è¡Œ<code>nginx -c /etc/nginx/nginx.conf</code></li><li><code>docker run nginx:test /app/nginx/new.conf</code>ï¼Œåˆ™å®¹å™¨å¯åŠ¨åï¼Œä¼šæ‰§è¡Œ<code>nginx -c /app/nginx/new.conf</code></li></ul><h1 id="æ„å»ºé•œåƒ">4. æ„å»ºé•œåƒ</h1><p>åˆ›å»ºåç§°ä¸º<code>Dockerfile</code>çš„æ–‡ä»¶ï¼Œç¤ºä¾‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> ubuntu<br><span class="hljs-keyword">MAINTAINER</span> lee&lt;lee@xxx.com&gt;<br><br><span class="hljs-keyword">ENV</span> MYPATH /usr/local<br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$MYPATH</span></span><br><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get install net-tools</span><br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$MYPATH</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;install ifconfig cmd into ubuntu success .....&quot;</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> /bin/bash</span><br></code></pre></td></tr></table></figure><p>ç¼–å†™å®Œæˆä¹‹åï¼Œå°†å…¶æ„å»ºæˆdockeré•œåƒã€‚</p><p>å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ³¨æ„ï¼šå®šä¹‰çš„TAGåé¢æœ‰ä¸ªç©ºæ ¼ï¼Œç©ºæ ¼åé¢æœ‰ä¸ªç‚¹</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">docker build -t æ–°é•œåƒåå­—:TAG .</span><br>docker build -t ubuntu:1.0.1 .<br></code></pre></td></tr></table></figure><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> centos:<span class="hljs-number">7</span><br><br><span class="hljs-keyword">ENV</span> MYPATH /usr/local<br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> <span class="hljs-variable">$MYPATH</span></span><br><br><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="hljs-comment"># 2ã€ä¸‹è½½é˜¿é‡Œæº</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="hljs-comment"># 3ã€æ›¿æ¢æºåœ°å€</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> sed -i -e <span class="hljs-string">&#x27;/mirrors.cloud.aliyuncs.com/d&#x27;</span> -e <span class="hljs-string">&#x27;/mirrors.aliyuncs.com/d&#x27;</span> /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="hljs-comment"># 4ã€åˆ·æ–°ç¼“å­˜</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum makecache</span><br><span class="hljs-comment"># 5ã€æ›´æ–° å¯åšå¯ä¸åš</span><br><span class="hljs-comment"># RUN yum -y update</span><br><br><br><span class="hljs-comment">#å®‰è£…vimç¼–è¾‘å™¨</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install vim</span><br><span class="hljs-comment">#å®‰è£…ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘ç»œIP</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install net-tools</span><br><span class="hljs-comment">#å®‰è£…java8åŠlibåº“</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> yum -y install glibc.i686</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> /usr/local/java</span><br><span class="hljs-comment"># ADD æ˜¯ç›¸å¯¹è·¯å¾„jar,æŠŠjdk-8u431-linux-x64.tar.gzæ·»åŠ åˆ°å®¹å™¨ä¸­,å®‰è£…åŒ…å¿…é¡»è¦å’ŒDockerfileæ–‡ä»¶åœ¨åŒä¸€ä½ç½®</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> jdk-8u431-linux-x64.tar.gz /usr/local/java</span><br><span class="hljs-comment"># é…ç½®javaç¯å¢ƒå˜é‡</span><br><span class="hljs-keyword">ENV</span> JAVA_HOME /usr/local/java/jdk1.<span class="hljs-number">8.0</span>_431<br><span class="hljs-keyword">ENV</span> JRE_HOME $JAVA_HOME/jre<br><span class="hljs-keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH<br><span class="hljs-keyword">ENV</span> PATH $JAVA_HOME/bin:$PATH<br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">80</span><br><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$MYPATH</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;success--------------ok&quot;</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> /bin/bash</span><br><br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker build -t centosjava8:1.5 .<br></code></pre></td></tr></table></figure><h1 id="è™šæ‚¬é•œåƒ">5. è™šæ‚¬é•œåƒ</h1><p>è™šæ‚¬é•œåƒï¼šä»“åº“åã€æ ‡ç­¾åéƒ½æ˜¯ <code>&lt;none&gt;</code>çš„é•œåƒï¼Œç§°ä¸ºdangling imagesï¼ˆè™šæ‚¬é•œåƒï¼‰ã€‚</p><p>åœ¨æ„å»ºæˆ–è€…åˆ é™¤é•œåƒæ—¶å¯èƒ½ç”±äºä¸€äº›é”™è¯¯å¯¼è‡´å‡ºç°è™šæ‚¬é•œåƒã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ„å»ºæ—¶å€™æ²¡æœ‰é•œåƒåã€tag</span><br>docker build .<br></code></pre></td></tr></table></figure><p>åˆ—å‡ºdockerä¸­çš„è™šæ‚¬é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker image ls -f dangling=true<br></code></pre></td></tr></table></figure><p>è™šæ‚¬é•œåƒä¸€èˆ¬æ˜¯å› ä¸ºä¸€äº›é”™è¯¯è€Œå‡ºç°çš„ï¼Œæ²¡æœ‰å­˜åœ¨ä»·å€¼ï¼Œå¯ä»¥åˆ é™¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆ é™¤æ‰€æœ‰çš„è™šæ‚¬é•œåƒ</span><br>docker image prune<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. Dockerå®‰è£…Redis</title>
    <link href="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/"/>
    <url>/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/</url>
    
    <content type="html"><![CDATA[<h1 id="dockerå®‰è£…redis">1. Dockerå®‰è£…Redis</h1><p>ä»¥ Redis 6.0.8 ä¸ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull redis:6.0.8<br></code></pre></td></tr></table></figure><h1 id="å•æœºç‰ˆå®‰è£…">2. å•æœºç‰ˆå®‰è£…</h1><h2 id="ç®€å•ç‰ˆ-redis">2.1 ç®€å•ç‰ˆ Redis</h2><p>ç®€å•çš„å¯åŠ¨Rediså®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -p 6379:6379 -d redis:6.0.8<br></code></pre></td></tr></table></figure><p>ç®€å•ç‰ˆæ²¡æœ‰é…ç½®å®¹å™¨å·æ˜ å°„ï¼Œå½“å®¹å™¨è¢«åˆ é™¤æ—¶æ•°æ®æ— æ³•æ¢å¤ã€‚</p><h2 id="å®é™…åº”ç”¨ç‰ˆredis">2.2 å®é™…åº”ç”¨ç‰ˆRedis</h2><p>é…ç½®æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶éƒ½å’Œå®¹å™¨å·è¿›è¡Œæ˜ å°„ã€‚</p><p>æ­¥éª¤ï¼š</p><ol type="1"><li>å®¿ä¸»æœºåˆ›å»ºç›®å½•<code>/app/redis</code></li><li>åœ¨<code>/app/redis</code>ä¸‹åˆ›å»ºæ–‡ä»¶<code>redis.conf</code>ï¼Œä¸»è¦ä¿®æ”¹ä»¥ä¸‹å‡ é¡¹é…ç½®</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plain"># å¼€å¯å¯†ç éªŒè¯ï¼ˆå¯é€‰ï¼‰<br>requirepass 123<br><br># å…è®¸rediså¤–åœ°è¿æ¥ï¼Œéœ€è¦æ³¨é‡Šæ‰ç»‘å®šçš„IP<br># bind 127.0.0.1<br><br># å…³é—­ä¿æŠ¤æ¨¡å¼ï¼ˆå¯é€‰ï¼‰<br>protected-mode no<br><br># æ³¨é‡Šæ‰daemonize yesï¼Œæˆ–è€…é…ç½®æˆ daemonize noã€‚å› ä¸ºè¯¥é…ç½®å’Œ docker runä¸­çš„ -d å‚æ•°å†²çªï¼Œä¼šå¯¼è‡´å®¹å™¨ä¸€ç›´å¯åŠ¨å¤±è´¥<br>daemonize no<br><br># å¼€å¯redisæ•°æ®æŒä¹…åŒ–ï¼Œ ï¼ˆå¯é€‰ï¼‰<br>appendonly yes<br></code></pre></td></tr></table></figure><p>å³æœ€åçš„é…ç½®æ–‡ä»¶ä¸ºï¼š</p><ol start="3" type="1"><li>å¯åŠ¨dockerå®¹å™¨ï¼šï¼ˆå› ä¸ºè¦ä½¿ç”¨è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šå®¹å™¨è¿è¡Œçš„å‘½ä»¤ä¸º<code>redis-server å®¹å™¨å†…é…ç½®æ–‡ä»¶è·¯å¾„</code>ï¼‰</li><li>é…ç½®æ–‡ä»¶éœ€è¦è‡ªå·±ä»redisé…ç½®æ–‡ä»¶ä¸­ç²˜è´´ï¼Œä¸‹è½½åœ°å€ï¼š</li></ol><p><a href="https://redis.io/docs/latest/operate/oss_and_stack/management/config/">Redisconfiguration | Docs</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 6379:6379 --name redis --privileged=true \<br>           -v /app/redis/redis.conf:/etc/redis/redis.conf \<br>           -v /app/redis/data:/data \<br>           redis:6.0.8 \<br>           redis-server /etc/redis/redis.conf<br>           <br>docker exec -it redis /bin/bash<br>redis-cli<br></code></pre></td></tr></table></figure><h1 id="é›†ç¾¤å­˜å‚¨ç®—æ³•">3. é›†ç¾¤å­˜å‚¨ç®—æ³•</h1><h2 id="åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•">3.1 åˆ†å¸ƒå¼å­˜å‚¨ç®—æ³•</h2><p>åˆ†å¸ƒå¼å­˜å‚¨çš„å¸¸è§ç®—æ³•ï¼š</p><ul><li>å“ˆå¸Œå–ä½™ç®—æ³•åˆ†åŒº</li><li>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åˆ†åŒº</li><li>å“ˆå¸Œæ§½ç®—æ³•åˆ†åŒº</li></ul><h2 id="å“ˆå¸Œå–ä½™ç®—æ³•">3.2 å“ˆå¸Œå–ä½™ç®—æ³•</h2><p>ç®—æ³•æè¿°ï¼š<code>hash(key) % N</code>ï¼ˆå…¶ä¸­ï¼Œ<code>key</code>æ˜¯è¦å­˜å…¥Redisçš„é”®åï¼Œ<code>N</code>æ˜¯Redisé›†ç¾¤çš„æœºå™¨å°æ•°ï¼‰ã€‚ç”¨æˆ·æ¯æ¬¡è¯»å†™æ“ä½œï¼Œéƒ½æ˜¯æ ¹æ®ä¼ å…¥çš„é”®åç»è¿‡å“ˆå¸Œè¿ç®—ï¼Œå¯¹æœºå™¨å°æ•°å–ä½™å†³å®šè¯¥é”®å­˜å‚¨åœ¨å“ªå°æœåŠ¡å™¨ä¸Šã€‚</p><p>ä¼˜ç‚¹ï¼šç®€å•ç›´æ¥æœ‰æ•ˆï¼Œåªéœ€è¦é¢„ä¼°å¥½æ•°æ®è§„åˆ’å¥½èŠ‚ç‚¹ï¼Œå°±èƒ½ä¿è¯ä¸€æ®µæ—¶é—´çš„æ•°æ®æ”¯æ’‘ã€‚ä½¿ç”¨Hashç®—æ³•è®©å›ºå®šçš„ä¸€éƒ¨åˆ†è¯·æ±‚è½åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ¯å°æœåŠ¡å™¨å›ºå®šå¤„ç†ä¸€éƒ¨åˆ†è¯·æ±‚ï¼ˆå¹¶ç»´æŠ¤è¿™äº›è¯·æ±‚çš„ä¿¡æ¯ï¼‰ï¼Œèµ·åˆ°è´Ÿè½½å‡è¡¡+åˆ†è€Œæ²»ä¹‹çš„ä½œç”¨ã€‚</p><p>ç¼ºç‚¹ï¼šåŸæ¥è§„åˆ’å¥½çš„èŠ‚ç‚¹ï¼Œå¦‚æœè¿›è¡Œäº†æ‰©å®¹æˆ–è€…ç¼©å®¹ï¼Œå¯¼è‡´èŠ‚ç‚¹æœ‰å˜åŠ¨ï¼Œæ˜ å°„å…³ç³»éœ€è¦é‡æ–°è¿›è¡Œè®¡ç®—ã€‚åœ¨æœåŠ¡å™¨ä¸ªæ•°å›ºå®šä¸å˜æ—¶æ²¡é—®é¢˜ï¼Œå¦‚æœéœ€è¦å¼¹æ€§æ‰©å®¹æˆ–è€…æ•…éšœåœæœºçš„æƒ…å†µä¸‹ï¼ŒåŸæ¥å–æ¨¡å…¬å¼ä¸­çš„<code>N</code>å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ­¤æ—¶ç»è¿‡å–æ¨¡è¿ç®—çš„ç»“æœå°±ä¼šå‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œå¯¼è‡´æ ¹æ®å…¬å¼è·å–çš„æœåŠ¡å™¨å˜å¾—ä¸å¯æ§ã€‚</p><h2 id="ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•">3.3 ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</h2><p>ç®—æ³•èƒŒæ™¯ï¼šä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯<strong>ä¸ºäº†è§£å†³å“ˆå¸Œå–ä½™ç®—æ³•ä¸­çš„åˆ†å¸ƒå¼ç¼“å­˜æ•°æ®å˜åŠ¨å’Œæ˜ å°„é—®é¢˜</strong>ã€‚å½“æœåŠ¡å™¨ä¸ªæ•°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°½é‡å‡å°‘å½±å“åˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„æ˜ å°„å…³ç³»ã€‚</p><p>ç®—æ³•æè¿°ï¼š</p><p>ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¿…ç„¶æœ‰ä¸ªhashå‡½æ•°å¹¶æŒ‰ç…§ç®—æ³•äº§ç”ŸHashå€¼ï¼Œè¿™ä¸ªç®—æ³•çš„æ‰€æœ‰å¯èƒ½å“ˆå¸Œå€¼ä¼šæ„æˆä¸€ä¸ªå…¨é‡é›†ï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æˆä¸ºä¸€ä¸ªHashåŒºé—´<code>[0, 2^32 - 1]</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¿æ€§ç©ºé—´ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªç®—æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é€‚å½“çš„é€»è¾‘æ§åˆ¶å°†å®ƒé¦–å°¾ç›¸è¿ï¼ˆ<code>0 = 2^32</code>ï¼‰ï¼Œè¿™æ ·è®©å®ƒé€»è¾‘ä¸Šå½¢æˆäº†ä¸€ä¸ªç¯å½¢ç©ºé—´ã€‚</p><p>å®ƒä¹Ÿæ˜¯æŒ‰ç…§ä½¿ç”¨å–æ¨¡çš„æ–¹å¼ã€‚å‰é¢çš„å“ˆå¸Œå–ä½™ç®—æ³•æ˜¯å¯¹èŠ‚ç‚¹ä¸ªæ•°è¿›è¡Œå–æ¨¡ï¼Œè€Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ˜¯å¯¹<code>2^32</code>å–æ¨¡ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œä¸€è‡´æ€§Hashç®—æ³•å°†æ•´ä¸ªå“ˆå¸Œå€¼ç©ºé—´ç»„æˆä¸€ä¸ªè™šæ‹Ÿçš„åœ†ç¯ã€‚å¦‚å‡è®¾æŸä¸ªå“ˆå¸Œå‡½æ•°<code>H</code>çš„å€¼ç©ºé—´ä¸º<code>0</code>åˆ°<code>2^32 - 1</code>ï¼ˆå³å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ª32ä½æ— ç¬¦å·æ•´å½¢ï¼‰ï¼Œæ•´ä¸ªå“ˆå¸Œç¯å¦‚ä¸‹å›¾ï¼šæ•´ä¸ªç©ºé—´æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»„ç»‡ï¼Œåœ†ç¯çš„æ­£ä¸Šæ–¹çš„ç‚¹ä»£è¡¨0ï¼Œ0ç‚¹å³ä¾§çš„ç¬¬ä¸€ä¸ªç‚¹ä»£è¡¨1ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ2ã€3ã€4.......ç›´åˆ°<code>2^32 - 1</code>ï¼Œä¹Ÿå°±æ˜¯è¯´0ç‚¹å·¦ä¾§çš„ç¬¬ä¸€ä¸ªç‚¹ä»£è¡¨<code>2^32 - 1</code>ã€‚0 å’Œ<code>2^32 - 1</code>åœ¨é›¶ç‚¹é’Ÿæ–¹å‘é‡åˆï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªç”±<code>2^32</code>ä¸ªç‚¹ç»„æˆçš„åœ†ç¯ç§°ä¸ºHashç¯ã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093509506-9d93249f-ba00-4339-b28d-5333d93b0356.jpeg"></p><p>æœ‰äº†å“ˆå¸Œç¯ä¹‹åï¼Œè¿˜éœ€è¦è¿›è¡ŒèŠ‚ç‚¹æ˜ å°„ï¼Œå°†é›†ç¾¤ä¸­å„ä¸ªIPèŠ‚ç‚¹æ˜ å°„åˆ°ç¯ä¸Šçš„æŸä¸€ä¸ªä½ç½®ã€‚</p><p>å°†å„ä¸ªæœåŠ¡å™¨ä½¿ç”¨Hashè¿›è¡Œä¸€ä¸ªå“ˆå¸Œï¼Œå…·ä½“å¯ä»¥é€‰æ‹©æœåŠ¡å™¨çš„IPæˆ–ä¸»æœºåä½œä¸ºå…³é”®å­—è¿›è¡Œå“ˆå¸Œã€‚è¿™æ ·æ¯å°æœºå™¨å°±èƒ½ç¡®å®šå…¶åœ¨å“ˆå¸Œç¯ä¸Šçš„ä½ç½®ã€‚</p><p>å‡å¦‚4ä¸ªèŠ‚ç‚¹NodeAã€Bã€Cã€Dï¼Œç»è¿‡IPåœ°å€çš„å“ˆå¸Œå‡½æ•°è®¡ç®—ï¼ˆ<code>hash(ip)</code>ï¼‰ï¼Œä½¿ç”¨IPåœ°å€å“ˆå¸Œå€¼ååœ¨ç¯ç©ºé—´çš„ä½ç½®å¦‚ä¸‹ï¼š</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093520104-5b400131-e3ea-4b37-8e53-e6c59e81fcb3.jpeg"></p><p><code>key</code>è½åˆ°æœåŠ¡å™¨çš„è½é”®è§„åˆ™ã€‚å½“æˆ‘ä»¬éœ€è¦å­˜å‚¨ä¸€ä¸ª<code>key</code>é”®å€¼å¯¹æ—¶ï¼Œé¦–å…ˆè®¡ç®—<code>key</code>çš„<code>hash</code>å€¼ï¼ˆ<code>hash(key)</code>ï¼‰ï¼Œå°†è¿™ä¸ª<code>key</code>ä½¿ç”¨ç›¸åŒçš„å‡½æ•°hashï¼Œè®¡ç®—å‡ºå“ˆå¸Œå€¼å¹¶ç¡®å®šæ­¤æ•°æ®åœ¨ç¯ä¸Šçš„ä½ç½®ï¼Œä»æ­¤ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆâ€œè¡Œèµ°â€ï¼Œç¬¬ä¸€å°é‡åˆ°çš„æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨ï¼Œå¹¶å°†è¯¥é”®å€¼å¯¹å­˜å‚¨å­—è¯¥èŠ‚ç‚¹ä¸Šã€‚</p><p>å‡å¦‚æˆ‘ä»¬æœ‰ObjectAã€Bã€Cã€Då››ä¸ªæ•°æ®å¯¹è±¡ï¼Œç»è¿‡å“ˆå¸Œè®¡ç®—åï¼Œåœ¨ç¯ç©ºé—´ä¸Šçš„ä½ç½®å¦‚ä¸‹ï¼šæ ¹æ®ä¸€è‡´æ€§hashç®—æ³•ï¼Œæ•°æ®Aä¼šè¢«å®šä½åˆ°NodeAä¸Šï¼ŒBè¢«å®šä½åˆ°NodeBä¸Šï¼ŒCè¢«å®šä½åˆ°NodeCä¸Šï¼ŒDè¢«å®šä½åˆ°NodeDä¸Šã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093529336-8a318268-7d45-44b7-a038-39c99d6598f3.jpeg"></p><p>å‡è®¾NodeCå®•æœºï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶å¯¹è±¡Aã€Bã€Dä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰Cå¯¹è±¡è¢«é‡æ–°å®šä½åˆ°NodeDã€‚</p><p>ä¸€èˆ¬çš„ï¼Œåœ¨ä¸€è‡´æ€§Hashç®—æ³•ä¸­ï¼Œå¦‚æœä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œåˆ™å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ­¤æœåŠ¡å™¨åˆ°å…¶ç¯ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ï¼ˆå³æ²¿ç€é€†æ—¶é’ˆæ–¹å‘è¡Œèµ°é‡åˆ°çš„ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰ä¹‹é—´çš„æ•°æ®ï¼Œå…¶ä»–ä¸ä¼šå—åˆ°å½±å“ã€‚</p><p>å³ï¼šå‡è®¾NodeCå®•æœºï¼Œåªä¼šå½±å“åˆ°Hashå®šä½åˆ°NodeBåˆ°NodeCä¹‹é—´çš„æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®ä¼šè¢«è½¬ç§»åˆ°NodeDè¿›è¡Œå­˜å‚¨ã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093568315-79bb50cb-c3ca-45f3-b2b8-21cd2bdd7ea6.jpeg"></p><p>å‡å¦‚éœ€è¦æ‰©å®¹å¢åŠ ä¸€å°èŠ‚ç‚¹NodeXï¼ŒNodeXçš„<code>hash(ip)</code>ä½äºNodeBå’ŒNodeCä¹‹é—´ï¼Œé‚£å—åˆ°å½±å“çš„å°±æ˜¯NodeBåˆ° NodeXä¹‹é—´çš„æ•°æ®ã€‚é‡æ–°å°†Båˆ°Xçš„æ•°æ®å½•å…¥åˆ°XèŠ‚ç‚¹ä¸Šå³å¯ï¼Œä¸ä¼šå¯¼è‡´Hashå–ä½™å…¨éƒ¨æ•°æ®é‡æ–°æ´—ç‰Œçš„åæœã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093600085-007ad642-e950-40f4-9470-2a4f3b0c3037.jpeg"></p><p>ä½†æ˜¯Hashç¯ä¼šå­˜åœ¨æ•°æ®å€¾æ–œé—®é¢˜ã€‚</p><p>ä¸€è‡´æ€§Hashç®—æ³•åœ¨æœåŠ¡èŠ‚ç‚¹å¤ªå°‘æ—¶ï¼Œå®¹æ˜“å› ä¸ºèŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€è€Œé€ æˆæ•°æ®å€¾æ–œï¼ˆè¢«ç¼“å­˜çš„å¯¹è±¡éƒ½é›†ä¸­åˆ°æŸä¸€å°æˆ–æŸå‡ å°æœåŠ¡å™¨ï¼‰ã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093608796-1e42d92f-21c3-44d8-af84-5cab7666b25a.webp"></p><p>ä¸ºäº†è§£å†³æ•°æ®å€¾æ–œé—®é¢˜ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¼•å…¥äº†è™šæ‹ŸèŠ‚ç‚¹æœºåˆ¶ã€‚</p><p>å¯¹æ¯ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹è®¡ç®—å¤šä¸ªå“ˆå¸Œï¼Œæ¯ä¸ªè®¡ç®—ç»“æœä½ç½®éƒ½æ”¾ç½®ä¸€ä¸ªæ­¤æœåŠ¡èŠ‚ç‚¹ï¼Œç§°ä¸ºè™šæ‹ŸèŠ‚ç‚¹ã€‚å…·ä½“åšæ³•å¯ä»¥å…ˆç¡®å®šæ¯ä¸ªç‰©ç†èŠ‚ç‚¹å…³è”çš„è™šæ‹ŸèŠ‚ç‚¹æ•°é‡ï¼Œç„¶ååœ¨IPæˆ–ä¸»æœºååé¢åŠ ä¸Šç¼–å·ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯ä»¥å¯¹NodeAèŠ‚ç‚¹è™šæ‹Ÿå‡ºNodeA#1ã€NodeA#2ã€NodeA#3ï¼Œå¯¹NodeBè™šæ‹Ÿå‡ºNodeB#1ã€NodeB#2ã€NodeB#3çš„èŠ‚ç‚¹ï¼Œå½¢æˆå…­ä¸ªè™šæ‹ŸèŠ‚ç‚¹ã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093615343-e8253b84-6085-4368-9853-29ec0e26b10a.jpeg"></p><p>ä¼˜ç‚¹ï¼šåŠ å…¥å’Œåˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œåªä¼šå½±å“å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘ç›¸é‚»èŠ‚ç‚¹ï¼Œå¯¹å…¶ä»–èŠ‚ç‚¹æ— å½±å“ã€‚</p><p>ç¼ºç‚¹ï¼šæ•°æ®çš„åˆ†å¸ƒå’ŒèŠ‚ç‚¹çš„ä½ç½®æœ‰å…³ï¼Œå› ä¸ºè¿™äº›èŠ‚ç‚¹ä¸æ˜¯å‡åŒ€åˆ†å¸ƒåœ¨å“ˆå¸Œç¯ä¸Šçš„ï¼Œæ‰€ä»¥åœ¨æ•°æ®è¿›è¡Œå­˜å‚¨æ—¶è¾¾ä¸åˆ°å‡åŒ€éƒ¨åˆ†çš„æ•ˆæœã€‚</p><h2 id="å“ˆå¸Œæ§½åˆ†åŒº">3.4 å“ˆå¸Œæ§½åˆ†åŒº</h2><p>å“ˆå¸Œæ§½åˆ†åŒºæ˜¯ä¸ºäº†è§£å†³ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„æ•°æ®å€¾æ–œé—®é¢˜ã€‚</p><p>å“ˆå¸Œæ§½å®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ <code>[0, 2^14 - 1]</code>å½¢æˆçš„ hashslotç©ºé—´ã€‚</p><p>ç›®çš„æ˜¯ä¸ºäº†è§£å†³å‡åŒ€åˆ†é…çš„é—®é¢˜ã€‚åœ¨æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´åˆåŠ å…¥äº†ä¸€å±‚ï¼ŒæŠŠè¿™å±‚ç§°ä¹‹ä¸ºæ§½ï¼ˆslotï¼‰ï¼Œç”¨äºç®¡ç†æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚å°±ç›¸å½“äºèŠ‚ç‚¹ä¸Šæ”¾çš„æ˜¯æ§½ï¼Œæ§½é‡Œé¢æ”¾çš„æ˜¯æ•°æ®ã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093624003-4b618ccd-4ac1-4ddb-8ff5-665da31781ea.png"></p><p>æ§½è§£å†³çš„æ˜¯ç²’åº¦é—®é¢˜ï¼Œç›¸å½“äºæŠŠç²’åº¦å˜å¤§äº†ï¼Œè¿™æ ·ä¾¿äºæ•°æ®ç§»åŠ¨ã€‚</p><p>å“ˆå¸Œè§£å†³çš„æ˜¯æ˜ å°„é—®é¢˜ï¼Œä½¿ç”¨<code>key</code>çš„å“ˆå¸Œå€¼æ¥è®¡ç®—æ‰€åœ¨çš„æ§½ï¼Œä¾¿äºæ•°æ®åˆ†é…ã€‚</p><p>ä¸€ä¸ªé›†ç¾¤åªèƒ½æœ‰ 16394ä¸ªæ§½ï¼Œç¼–å· 0 -16383ï¼ˆ<code>2^14 - 1</code>ï¼‰ã€‚è¿™äº›æ§½ä¼šåˆ†é…ç»™é›†ç¾¤ä¸­æ‰€æœ‰çš„ä¸»èŠ‚ç‚¹ï¼Œåˆ†é…ç­–ç•¥æ²¡æœ‰è¦æ±‚ã€‚å¯ä»¥æŒ‡å®šå“ªäº›ç¼–å·çš„æ§½åˆ†é…ç»™å“ªä¸ªä¸»èŠ‚ç‚¹ï¼Œé›†ç¾¤ä¼šè®°å½•èŠ‚ç‚¹å’Œæ§½çš„å¯¹åº”å…³ç³»ã€‚</p><p>è§£å†³äº†èŠ‚ç‚¹å’Œæ§½çš„å…³ç³»åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å¯¹<code>key</code>æ±‚å“ˆå¸Œå€¼ï¼Œç„¶åå¯¹16384å–ä½™ï¼Œæ ¹æ®ä½™æ•°å†³å®š<code>key</code>è½åˆ°å“ªä¸ªæ§½é‡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">slot = CRC16(key) % 16384<br></code></pre></td></tr></table></figure><p>ä»¥æ§½ä¸ºå•ä½ç§»åŠ¨æ•°æ®ï¼Œå› ä¸ºæ§½çš„æ•°ç›®æ˜¯å›ºå®šçš„ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œè¿™æ ·æ•°æ®ç§»åŠ¨é—®é¢˜å°±è§£å†³äº†ã€‚</p><h2 id="redisé›†ç¾¤å­˜å‚¨ç­–ç•¥">Redisé›†ç¾¤å­˜å‚¨ç­–ç•¥</h2><p>Redisé›†ç¾¤ä½¿ç”¨çš„å°±æ˜¯å“ˆå¸Œæ§½ã€‚Redisé›†ç¾¤æœ‰16384ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ª<code>key</code>é€šè¿‡<code>CRC16</code>æ ¡éªŒåå¯¹16384å–æ¨¡æ¥å†³å®šæ”¾ç½®åœ¨å“ªä¸ªæ§½ï¼Œé›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†hashæ§½ã€‚</p><p>å“ˆå¸Œæ§½æ•°é‡16384ï¼ˆ<code>2^14</code>ï¼‰çš„å†³å®šåŸå› ï¼š</p><p><code>CRC16</code>ç®—æ³•äº§ç”Ÿçš„hashå€¼æœ‰ 16bitï¼Œè¯¥ç®—æ³•å¯ä»¥äº§ç”Ÿ<code>2^16</code> =65536ä¸ªå€¼ã€‚ä½†æ˜¯ä¸ºäº†å¿ƒè·³æ–¹ä¾¿å’Œæ•°æ®ä¼ è¾“æœ€å¤§åŒ–ï¼Œæ§½çš„æ•°é‡åªèƒ½æœ‰<code>2^14</code>ä¸ªã€‚</p><ol type="1"><li>å¦‚æœæ§½ä½æ•°é‡ä¸º65535ä¸ªï¼Œé‚£ä¹ˆå‘é€å¿ƒè·³ä¿¡æ¯çš„æ¶ˆæ¯å¤´å°†è¾¾åˆ°8kï¼Œå‘é€çš„å¿ƒè·³åŒ…è¿‡äºåºå¤§ã€‚åœ¨æ¶ˆæ¯å¤´ä¸­æœ€å ç©ºé—´çš„æ˜¯<code>myslots[CLUSTER_SLOTS/8]</code>ã€‚å½“æ§½ä½ä¸º65536æ—¶ï¼Œè¿™å—çš„å¤§å°æ˜¯ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">65536 Ã· 8 Ã· 1024 = 8Kb<br></code></pre></td></tr></table></figure><p>æ¯ç§’ä¸­redisèŠ‚ç‚¹éœ€è¦å‘é€ä¸€å®šæ•°é‡çš„pingæ¶ˆæ¯ä½œä¸ºå¿ƒè·³ï¼Œå¦‚æœæ§½ä½ä¸º65536ï¼Œé‚£ä¹ˆè¿™ä¸ªpingæ¶ˆæ¯å¤´å°±ä¼šå¤ªå¤§æµªè´¹å¸¦å®½ã€‚</p><ol start="2" type="1"><li>redisé›†ç¾¤çš„ä¸»èŠ‚ç‚¹æ•°é‡åŸºæœ¬ä¸å¯èƒ½è¶…è¿‡1000ä¸ªã€‚é›†ç¾¤èŠ‚ç‚¹è¶Šå¤šï¼Œå¿ƒè·³åŒ…çš„æ¶ˆæ¯ä½“å†…æºå¸¦çš„æ•°æ®è¶Šå¤šã€‚å¦‚æœèŠ‚ç‚¹è¶…è¿‡1000ä¸ªï¼Œä¹Ÿä¼šå¯¼è‡´ç½‘ç»œæ‹¥å µã€‚å› æ­¤redisä½œè€…ä¸å»ºè®®redisclusterèŠ‚ç‚¹è¶…è¿‡1000ä¸ªã€‚å¯¹äºèŠ‚ç‚¹æ•°åœ¨1000ä»¥å†…çš„redisclusteré›†ç¾¤ï¼Œ16384ä¸ªæ§½ä½è¶³å¤Ÿäº†ï¼Œæ²¡æœ‰å¿…è¦æ‰©å±•åˆ°65536ä¸ªã€‚</li><li>æ§½ä½è¶Šå°ï¼ŒèŠ‚ç‚¹å°‘çš„æƒ…å†µä¸‹å‹ç¼©æ¯”è¶Šé«˜ï¼Œå®¹æ˜“ä¼ è¾“ã€‚Redisä¸»èŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯ä¸­å®ƒé”è´Ÿè´£çš„å“ˆå¸Œæ§½æ˜¯é€šè¿‡ä¸€å¼ bitmapçš„å½¢å¼æ¥ä¿å­˜çš„ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šå¯¹bitmapè¿›è¡Œå‹ç¼©ï¼Œä½†æ˜¯å¦‚æœbitmapçš„å¡«å……ç‡<code>slots / N</code>ï¼ˆNä¸ºèŠ‚ç‚¹æ•°ï¼‰å¾ˆé«˜çš„è¯ï¼Œbitmapçš„å‹ç¼©ç‡å°±å¾ˆä½ã€‚å¦‚æœèŠ‚ç‚¹æ•°å¾ˆå°‘ï¼Œè€Œå“ˆå¸Œæ§½æ•°å¾ˆå¤šçš„è¯ï¼Œbitmapçš„å‹ç¼©ç‡å°±å¾ˆä½ã€‚</li></ol><blockquote><p>åŸæ–‡ï¼š</p><p>æ­£å¸¸çš„å¿ƒè·³æ•°æ®åŒ…å¸¦æœ‰èŠ‚ç‚¹çš„å®Œæ•´é…ç½®ï¼Œä½¿å¾—å¯ä»¥ç”¨å¹‚ç­‰æ–¹å¼ç”¨æ—§çš„èŠ‚ç‚¹æ›¿æ¢æ—§èŠ‚ç‚¹ï¼Œä»¥ä¾¿æ›´æ–°æ—§çš„é…ç½®ã€‚è¿™æ„å‘³ç€å®ƒä»¬åŒ…å«åŸå§‹èŠ‚ç‚¹çš„æ’æ§½é…ç½®ï¼Œè¯¥èŠ‚ç‚¹ä½¿ç”¨2k çš„ç©ºé—´å’Œ 16k çš„æ’æ§½ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ 8k çš„ç©ºé—´ï¼ˆä½¿ç”¨65kçš„æ’æ§½ï¼‰ã€‚</p><p>åŒæ—¶ï¼Œå› ä¸ºå…¶ä»–è®¾è®¡æŠ˜è¡·ï¼ŒRedisé›†ç¾¤çš„ä¸»èŠ‚ç‚¹ä¸å¤ªå¯èƒ½æ‰©å±•åˆ°1000ä¸ªä»¥ä¸Š</p></blockquote><p>Redisé›†ç¾¤ä¸­å†…ç½®äº†16384ä¸ªå“ˆå¸Œæ§½ï¼Œredisä¼šæ ¹æ®èŠ‚ç‚¹æ•°é‡å¤§è‡´å‡ç­‰çš„å°†å“ˆå¸Œæ§½æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹ã€‚å½“éœ€è¦åœ¨Redisé›†ç¾¤ä¸­æ”¾ç½®ä¸€ä¸ª<code>Key-Value</code>æ—¶ï¼Œrediså…ˆå¯¹<code>key</code>ä½¿ç”¨<code>CRC16</code> ç®—æ³•ç®—å‡ºä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœå¯¹ 16384å–ä½™ï¼Œè¿™æ ·æ¯ä¸ª<code>key</code>éƒ½ä¼šå¯¹åº”ä¸€ä¸ªç¼–å·åœ¨0-16383ä¹‹é—´çš„å“ˆå¸Œæ§½ï¼Œä¹Ÿå°±æ˜¯æ˜ å°„åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/1652093634015-d8b7b188-0beb-4d34-a025-3eade79bb6bb.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// import io.lettuce.core.cluster.SlotHash;</span><br>    System.out.println(SlotHash.getSlot(<span class="hljs-string">&#x27;A&#x27;</span>));  <span class="hljs-comment">// è®¡ç®—ç»“æœ6373ï¼Œå­˜å…¥ä¸Šå›¾çš„Node2</span><br>    System.out.println(SlotHash.getSlot(<span class="hljs-string">&#x27;B&#x27;</span>));  <span class="hljs-comment">// è®¡ç®—ç»“æœ10374ï¼Œå­˜å…¥ä¸Šå›¾çš„Node2</span><br>    System.out.println(SlotHash.getSlot(<span class="hljs-string">&#x27;C&#x27;</span>));  <span class="hljs-comment">// è®¡ç®—ç»“æœ14503ï¼Œå­˜å…¥ä¸Šå›¾çš„Node3</span><br>    System.out.println(SlotHash.getSlot(<span class="hljs-string">&#x27;Hello&#x27;</span>));  <span class="hljs-comment">// è®¡ç®—ç»“æœ866ï¼Œå­˜å…¥ä¸Šå›¾çš„Node1</span><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ä¸»3ä»redisé›†ç¾¤">4. 3ä¸»3ä»Redisé›†ç¾¤</h1><h2 id="æ­å»º">4.1 æ­å»º</h2><p>ä½¿ç”¨dockeræ­å»º3ä¸»3ä»çš„Redisé›†ç¾¤ï¼Œæ¯å°ä¸»æœºéƒ½å¯¹åº”ä¸€å°ä»æœºã€‚</p><p>å¯åŠ¨6å°rediså®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬1å°èŠ‚ç‚¹</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--net host ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ï¼Œé»˜è®¤</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--cluster-enabled <span class="hljs-built_in">yes</span> å¼€å¯redisé›†ç¾¤</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--appendonly <span class="hljs-built_in">yes</span> å¼€å¯redisæŒä¹…åŒ–</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">--port 6381 é…ç½®redisç«¯å£å·</span><br>docker run -d --name redis-node-1 --net host --privileged=true -v /app/redis-cluster/share/redis-node-1:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6381<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬2å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-2 --net host --privileged=true -v /app/redis-cluster/share/redis-node-2:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6382<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬3å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-3 --net host --privileged=true -v /app/redis-cluster/share/redis-node-3:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6383<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬4å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-4 --net host --privileged=true -v /app/redis-cluster/share/redis-node-4:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6384<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬5å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-5 --net host --privileged=true -v /app/redis-cluster/share/redis-node-5:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6385<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬6å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-6 --net host --privileged=true -v /app/redis-cluster/share/redis-node-6:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6386<br></code></pre></td></tr></table></figure><p>æ„å»ºä¸»ä»å…³ç³»ï¼š</p><ol type="1"><li>è¿›å…¥èŠ‚ç‚¹1ï¼ˆæˆ–å…¶ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it redis-node-1 /bin/bash<br></code></pre></td></tr></table></figure><p>æ„å»ºä¸»ä»å…³ç³»ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å®¿ä¸»æœºIP:ç«¯å£</span><br>redis-cli --cluster create 192.168.226.137:6381 192.168.226.137:6382 192.168.226.137:6383 192.168.226.137:6384 192.168.226.137:6385 192.168.226.137:6386 --cluster-replicas 1<br></code></pre></td></tr></table></figure><p>--cluster-replicas 1 è¡¨ç¤ºä¸ºæ¯ä¸ªmasteråˆ›å»ºä¸€ä¸ªslaveèŠ‚ç‚¹</p><ol start="3" type="1"><li>rediså°è¯•è‡ªåŠ¨è¿›è¡Œä¸»ä»èŠ‚ç‚¹åˆ†é…</li><li>å› ä¸ºæˆ‘ä»¬çš„dockerå®¹å™¨IPç›¸åŒï¼Œæ‰€ä»¥ä¼šå‡ºç°è­¦å‘Šï¼Œå¯ä»¥ç›´æ¥å¿½ç•¥è¯¥è­¦å‘Š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">[WARNING] Some slaves are in the same host as their master<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>redisè‡ªåŠ¨åˆ†é…ç»“æœå®Œæˆåï¼Œéœ€è¦è¾“å…¥ <code>Yes</code>ç¡®è®¤é…ç½®ä¿¡æ¯ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plain">M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381<br>   slots:[0-5460] (5461 slots) master<br>M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382<br>   slots:[5461-10922] (5462 slots) master<br>M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383<br>   slots:[10923-16383] (5461 slots) master<br>S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384<br>   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435<br>S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385<br>   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37<br>S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386<br>   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc<br>Can I set the above configuration? (type &#x27;yes&#x27; to accept):<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>è¾“å…¥<code>Yes</code>ç¡®è®¤åï¼Œredisä¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€ä¿¡æ¯åŠ å…¥é›†ç¾¤ï¼Œå¹¶åˆ†é…å“ˆå¸Œæ§½ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs plain">&gt;&gt;&gt; Nodes configuration updated<br>&gt;&gt;&gt; Assign a different config epoch to each node<br>&gt;&gt;&gt; Sending CLUSTER MEET messages to join the cluster<br>Waiting for the cluster to join<br>.....<br>&gt;&gt;&gt; Performing Cluster Check (using node 192.168.xxx.xxx:6381)<br>M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381<br>   slots:[0-5460] (5461 slots) master<br>   1 additional replica(s)<br>M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383<br>   slots:[10923-16383] (5461 slots) master<br>   1 additional replica(s)<br>M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382<br>   slots:[5461-10922] (5462 slots) master<br>   1 additional replica(s)<br>S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386<br>   slots: (0 slots) slave<br>   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc<br>S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384<br>   slots: (0 slots) slave<br>   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435<br>S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385<br>   slots: (0 slots) slave<br>   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37<br>[OK] All nodes agree about slots configuration.<br>&gt;&gt;&gt; Check for open slots...<br>&gt;&gt;&gt; Check slots coverage...<br>[OK] All 16384 slots covered.<br></code></pre></td></tr></table></figure><p><img src="/2024/12/07/docker/10-Docker%E5%AE%89%E8%A3%85Redis/image-20241212211139874.png"></p><p>æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š</p><ol type="1"><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1ï¼ˆæˆ–é›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹ï¼‰ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it redis-node-1 /bin/bash<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ä½¿ç”¨<code>redis-cli</code>è¿æ¥åˆ°<code>6381</code>èŠ‚ç‚¹ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli -p 6381 <br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä½¿ç”¨<code>redis</code>çš„ç›¸å…³å‘½ä»¤æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster info<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œåˆ†é…çš„å“ˆå¸Œæ§½æ•°é‡<code>cluster_slots_assigned</code>ä¸º16384ï¼Œé›†ç¾¤èŠ‚ç‚¹æ•°é‡<code>cluster_known_nodes</code>ä¸º6</p><ol start="4" type="1"><li>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster nodes<br></code></pre></td></tr></table></figure><h2 id="redisé›†ç¾¤è¯»å†™å‡ºé”™">4.2 Redisé›†ç¾¤è¯»å†™å‡ºé”™</h2><p>å½“ä½¿ç”¨ <code>redis-cli</code>è¿æ¥redisé›†ç¾¤æ—¶ï¼Œéœ€è¦æ·»åŠ <code>-c</code>å‚æ•°ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°è¯»å†™å‡ºé”™ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ol type="1"><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it redis-node-1 /bin/bash<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ä½¿ç”¨<code>redis-cli</code>è¿æ¥ï¼Œä¸åŠ <code>-c</code>å‚æ•°æ—¶</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli -p 6381<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æ­¤æ—¶å‘redisä¸­æ·»åŠ é”®å€¼å¯¹ï¼Œå¯èƒ½ä¼šæˆåŠŸï¼Œä¹Ÿå¯èƒ½ä¼šå¤±è´¥</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set k1 v1<br></code></pre></td></tr></table></figure><p>æŠ¥é”™ï¼š<code>k1</code>ç»è¿‡è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œæ§½ä¸º12706ï¼Œä½†æ˜¯å½“å‰è¿æ¥çš„redis-serverä¸º<code>6381</code>ï¼ˆå³èŠ‚ç‚¹1ï¼‰ï¼Œå®ƒçš„å“ˆå¸Œæ§½ä¸ºï¼š<code>[0,5460]</code>ï¼ˆåœ¨åˆ›å»ºæ„å»ºä¸»ä»å…³ç³»æ—¶redisæœ‰æç¤ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>cluster nodes</code>æŸ¥çœ‹ï¼‰ï¼Œæ‰€ä»¥ä¼šå› ä¸ºå­˜ä¸è¿›å»è€ŒæŠ¥é”™ã€‚<br>æ‰§è¡Œ<code>set k2 v2</code>å¯ä»¥æˆåŠŸï¼Œå› ä¸º<code>k2</code>è®¡ç®—å‡ºçš„å“ˆå¸Œæ§½åœ¨<code>[0-5460]</code>åŒºé—´ä¸­ã€‚</p><ol start="4" type="1"><li>ä½¿ç”¨<code>-c</code>å‚æ•°çš„<code>redis-cli</code>å‘½ä»¤è¿æ¥å³å¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli -p 6381 -c<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>æ­¤æ—¶å¯ä»¥æ­£å¸¸çš„æ’å…¥æ‰€æœ‰æ•°æ®</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set k1 v1<br></code></pre></td></tr></table></figure><p>ä¼šæœ‰æç¤ºä¿¡æ¯ï¼Œå“ˆå¸Œæ§½ä¸º12706ï¼Œé‡å®šå‘åˆ°<code>6383</code>ï¼ˆå³èŠ‚ç‚¹3ï¼Œå“ˆå¸Œæ§½<code>[10923, 16383]</code>ï¼‰ï¼š</p><h2 id="é›†ç¾¤ä¿¡æ¯æ£€æŸ¥">4.3 é›†ç¾¤ä¿¡æ¯æ£€æŸ¥</h2><p>æ£€æŸ¥æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ï¼š</p><ol type="1"><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it redis-node-1 /bin/bash<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>è¿›è¡Œé›†ç¾¤ä¿¡æ¯æ£€æŸ¥</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">è¾“å…¥ä»»æ„ä¸€å°ä¸»èŠ‚ç‚¹åœ°å€éƒ½å¯ä»¥è¿›è¡Œé›†ç¾¤æ£€æŸ¥</span><br>redis-cli --cluster check 192.168.226.137:6381<br></code></pre></td></tr></table></figure><p>è¿”å›çš„æ£€æŸ¥ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs plain">å½“å‰é›†ç¾¤ä¸­å„ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„keyçš„æ•°é‡<br>192.168.xxx.xxx:6381 (f451eb48...) -&gt; 0 keys | 5461 slots | 1 slaves.<br>192.168.xxx.xxx:6383 (1fc935c1...) -&gt; 1 keys | 5461 slots | 1 slaves.<br>192.168.xxx.xxx:6382 (05984211...) -&gt; 0 keys | 5462 slots | 1 slaves.<br>[OK] 1 keys in 3 masters.  <br>0.00 keys per slot on average.<br><br>ä¸»ä»æœºå™¨ä¿¡æ¯<br>&gt;&gt;&gt; Performing Cluster Check (using node 192.168.xxx.xxx:6381)<br>M: f451eb48bbc0a7c31c7da022ffe80cc1696e0f37 192.168.xxx.xxx:6381<br>   slots:[0-5460] (5461 slots) master<br>   1 additional replica(s)<br>M: 1fc935c12b1d34a7df50aed643c195eb29bb3435 192.168.xxx.xxx:6383<br>   slots:[10923-16383] (5461 slots) master<br>   1 additional replica(s)<br>M: 05984211b8c38222a73abeff1d4e459c0fe1efbc 192.168.xxx.xxx:6382<br>   slots:[5461-10922] (5462 slots) master<br>   1 additional replica(s)<br>S: 0c0767e13a09ee48541738d4163592cd9842c143 192.168.xxx.xxx:6386<br>   slots: (0 slots) slave<br>   replicates 05984211b8c38222a73abeff1d4e459c0fe1efbc<br>S: f8d0de47114bf33438747acd713cce4e412ae721 192.168.xxx.xxx:6384<br>   slots: (0 slots) slave<br>   replicates 1fc935c12b1d34a7df50aed643c195eb29bb3435<br>S: de0b393c17e452d856f6de2b348e9ca4e5aa4002 192.168.xxx.xxx:6385<br>   slots: (0 slots) slave<br>   replicates f451eb48bbc0a7c31c7da022ffe80cc1696e0f37<br>[OK] All nodes agree about slots configuration.<br>&gt;&gt;&gt; Check for open slots...<br>&gt;&gt;&gt; Check slots coverage...<br>[OK] All 16384 slots covered.<br></code></pre></td></tr></table></figure><p>6381å®•æœºï¼Œ6386ä¸Šä½</p><h1 id="ä¸»ä»æ‰©å®¹ç¼©å®¹">5. ä¸»ä»æ‰©å®¹ç¼©å®¹</h1><h2 id="ä¸»ä»æ‰©å®¹">5.1 ä¸»ä»æ‰©å®¹</h2><p>å‡å¦‚å› ä¸ºä¸šåŠ¡é‡æ¿€å¢ï¼Œéœ€è¦å‘å½“å‰3ä¸»3ä»çš„é›†ç¾¤ä¸­å†åŠ å…¥1ä¸»1ä»ä¸¤ä¸ªèŠ‚ç‚¹ã€‚</p><p>æ­¥éª¤ï¼š</p><ol type="1"><li>å¯åŠ¨2å°æ–°çš„å®¹å™¨èŠ‚ç‚¹</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬7å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-7 --net host --privileged=true -v /app/redis-cluster/share/redis-node-7:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6387<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç¬¬8å°èŠ‚ç‚¹</span><br>docker run -d --name redis-node-8 --net host --privileged=true -v /app/redis-cluster/share/redis-node-8:/data redis:6.0.8 --cluster-enabled yes --appendonly yes --port 6388<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>è¿›å…¥6387ï¼ˆèŠ‚ç‚¹7ï¼‰å®¹å™¨å†…éƒ¨</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it redis-node-7 /bin/bash<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å°†6387ä½œä¸ºmasteråŠ å…¥é›†ç¾¤</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">redis-cli --cluster add-node æœ¬èŠ‚ç‚¹åœ°å€ è¦åŠ å…¥çš„é›†ç¾¤ä¸­çš„å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹åœ°å€</span><br>redis-cli --cluster add-node 192.168.226.137:6387 192.168.226.137:6381<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>æ£€æŸ¥å½“å‰é›†ç¾¤çŠ¶æ€</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster check 192.168.226.137:6381<br></code></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œ6371èŠ‚ç‚¹å·²ç»ä½œä¸ºmasteråŠ å…¥äº†é›†ç¾¤ï¼Œä½†æ˜¯è¯¥èŠ‚ç‚¹æ²¡æœ‰è¢«åˆ†é…æ§½ä½ã€‚</p><ol start="5" type="1"><li>é‡æ–°åˆ†é…é›†ç¾¤çš„æ§½ä½</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster reshard 192.168.226.137:6381<br></code></pre></td></tr></table></figure><p>redisç»è¿‡æ§½ä½æ£€æŸ¥åï¼Œä¼šæç¤ºéœ€è¦åˆ†é…çš„æ§½ä½æ•°é‡ï¼š<br>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯4å°masterï¼Œæˆ‘ä»¬æƒ³è¦ç»™node7åˆ†é…4096ä¸ªæ§½ä½ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯4096ä¸ªæ§½ä½ã€‚<br>è¾“å…¥<code>4096</code>åï¼Œä¼šè®©è¾“å…¥è¦æ¥æ”¶è¿™äº›å“ˆå¸Œæ§½çš„èŠ‚ç‚¹IDï¼Œå¡«å…¥node7çš„èŠ‚ç‚¹IDå³å¯ã€‚ï¼ˆå°±æ˜¯èŠ‚ç‚¹ä¿¡æ¯ä¸­å¾ˆé•¿çš„ä¸€ä¸²åå…­è¿›åˆ¶ä¸²ï¼‰ã€‚<br>ç„¶åä¼šæç¤ºï¼Œè¯¢é—®è¦ä»å“ªäº›èŠ‚ç‚¹ä¸­æ‹¨å‡ºä¸€éƒ¨åˆ†æ§½ä½å‡‘è¶³4096ä¸ªåˆ†ç»™Node7ã€‚ä¸€èˆ¬é€‰æ‹©<code>all</code>ï¼Œå³å°†ä¹‹å‰çš„3ä¸ªä¸»èŠ‚ç‚¹çš„æ§½ä½éƒ½å‡ä¸€äº›ç»™Node7ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹çš„æ§½ä½æ•°ç›¸ç­‰å‡è¡¡ã€‚<br>è¾“å…¥<code>all</code>ä¹‹åï¼Œredisä¼šåˆ—å‡ºä¸€ä¸ªè®¡åˆ’ï¼Œå†…å®¹æ˜¯è‡ªåŠ¨ä»å‰é¢çš„3å°masterä¸­æ‹¨å‡ºä¸€éƒ¨åˆ†æ§½ä½åˆ†ç»™Node7çš„æ§½ä½ï¼Œéœ€è¦ç¡®è®¤ä¸€ä¸‹åˆ†é…çš„è®¡åˆ’ã€‚<br>è¾“å…¥<code>yes</code>ç¡®è®¤åï¼Œredisä¾¿ä¼šè‡ªåŠ¨é‡æ–°æ´—ç‰Œï¼Œç»™Node7åˆ†é…æ§½ä½ã€‚</p><p>é‡æ–°åˆ†é…å®Œæˆåï¼Œå¯ä»¥è¿›è¡Œé›†ç¾¤ä¿¡æ¯æ£€æŸ¥ï¼ŒæŸ¥çœ‹åˆ†é…ç»“æœï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster check 192.168.xxx.xxx:6381<br></code></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°é‡æ–°æ´—ç‰Œåçš„æ§½ä½åˆ†é…ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">èŠ‚ç‚¹1ï¼š[1365-5460]ï¼ˆä¾›4096ä¸ªæ§½ä½ï¼‰ï¼Œï¼Œï¼Œåˆ†é…å‰ä¸º[0-5460]ï¼ˆå…±5461ä¸ªæ§½ä½ï¼‰<br>èŠ‚ç‚¹2ï¼š[6827-10922]ï¼ˆå…±4096ä¸ªæ§½ä½ï¼‰ï¼Œï¼Œï¼Œåˆ†é…å‰ä¸º[5461-10922]ï¼ˆå…±5461ä¸ªæ§½ä½ï¼‰<br>èŠ‚ç‚¹3ï¼š[12288-16383]ï¼ˆå…±4096ä¸ªæ§½ä½ï¼‰ï¼Œï¼Œï¼Œåˆ†é…å‰ä¸º[10923-16383]ï¼ˆå…±5462ä¸ªæ§½ä½ï¼‰<br><br>èŠ‚ç‚¹7ï¼š[0-1364],[5461-6826],[10923-12287]ï¼ˆå…±4096ä¸ªæ§½ä½ï¼‰ï¼Œä»æ¯ä¸ªèŠ‚ç‚¹ä¸­åŒ€å‡ºæ¥äº†ä¸€éƒ¨åˆ†ç»™äº†èŠ‚ç‚¹7<br></code></pre></td></tr></table></figure><p>å› ä¸ºå¯èƒ½æœ‰äº›æ§½ä½ä¸­å·²ç»å­˜å‚¨äº†<code>key</code>ï¼Œå®Œå…¨çš„é‡æ–°æ´—ç‰Œé‡æ–°åˆ†é…çš„æˆæœ¬è¿‡é«˜ï¼Œæ‰€ä»¥redisé€‰æ‹©ä»å‰3ä¸ªèŠ‚ç‚¹ä¸­åŒ€å‡ºæ¥ä¸€éƒ¨åˆ†ç»™èŠ‚ç‚¹7</p><p>ä¸ºä¸»èŠ‚ç‚¹6387åˆ†é…ä»èŠ‚ç‚¹6388ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster add-node 192.168.226.137:6388 192.168.226.137:6381 --cluster-slave --cluster-master-id node7èŠ‚ç‚¹çš„åå…­è¿›åˆ¶ç¼–å·å­—ç¬¦ä¸²<br></code></pre></td></tr></table></figure><p>redisä¾¿ä¼šå‘6388å‘é€æ¶ˆæ¯ï¼Œä½¿å…¶åŠ å…¥é›†ç¾¤å¹¶æˆä¸º6387çš„ä»èŠ‚ç‚¹ã€‚</p><p>æ£€æŸ¥é›†ç¾¤å½“å‰çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster check 192.168.xxx.xxx:6381<br></code></pre></td></tr></table></figure><h2 id="ä¸»ä»ç¼©å®¹">5.2 ä¸»ä»ç¼©å®¹</h2><p>å‡å¦‚ä¸šåŠ¡é«˜å³°æœŸè¿‡å»ï¼Œéœ€è¦å°†4ä¸»4ä»é‡æ–°ç¼©å®¹åˆ°3ä¸»3ä»ã€‚å³ä»é›†ç¾¤ä¸­ç§»é™¤node8å’Œnode7.</p><p>é¦–å…ˆåˆ é™¤ä»èŠ‚ç‚¹6388ï¼š</p><ol type="1"><li>è¿›å…¥å®¹å™¨èŠ‚ç‚¹1</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it redis-node-1 /bin/bash<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼Œè·å–6388çš„èŠ‚ç‚¹ç¼–å·</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster check 192.168.226.137:6381<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å°†6388ä»é›†ç¾¤ä¸­ç§»é™¤</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster del-node 192.168.226.137:6388 6388èŠ‚ç‚¹ç¼–å·<br></code></pre></td></tr></table></figure><p>å¯¹node7é‡æ–°åˆ†é…å“ˆå¸Œæ§½ï¼š</p><ol type="1"><li>å¯¹é›†ç¾¤é‡æ–°åˆ†é…å“ˆå¸Œæ§½</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster reshard 192.168.226.137:6381<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>redisç»è¿‡æ§½ä½æ£€æŸ¥åï¼Œä¼šæç¤ºéœ€è¦åˆ†é…çš„æ§½ä½æ•°é‡ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">How many slots do you want to move (from 1 to 16384)?<br></code></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³ç›´æ¥æŠŠnode7çš„4096ä¸ªå“ˆå¸Œæ§½å…¨éƒ¨åˆ†ç»™æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥4096ã€‚<br>è¾“å…¥<code>4096</code>åï¼Œä¼šè®©è¾“å…¥è¦æ¥æ”¶è¿™äº›å“ˆå¸Œæ§½çš„èŠ‚ç‚¹IDã€‚å‡å¦‚æˆ‘ä»¬æƒ³æŠŠè¿™4096ä¸ªæ§½éƒ½åˆ†ç»™Node1ï¼Œç›´æ¥è¾“å…¥node1èŠ‚ç‚¹çš„ç¼–å·å³å¯ã€‚<br>ç„¶åä¼šæç¤ºï¼Œè¯¢é—®è¦ä»å“ªäº›èŠ‚ç‚¹ä¸­æ‹¨å‡ºä¸€éƒ¨åˆ†æ§½ä½å‡‘è¶³4096ä¸ªåˆ†ç»™Node1ã€‚è¿™é‡Œæˆ‘ä»¬è¾“å…¥node7çš„èŠ‚ç‚¹ç¼–å·ï¼Œå›è½¦åè¾“å…¥<code>done</code>ã€‚</p><p>node7ä¸Šé¢æ²¡æœ‰äº†å“ˆå¸Œæ§½ï¼Œæ­¤æ—¶ä¾¿å¯ä»¥å°†node7ä»é›†ç¾¤ä¸­ç§»é™¤ã€‚ï¼ˆå¦‚æœnode7ä¸Šé¢æœ‰å“ˆå¸Œæ§½ï¼Œç›´æ¥ä»é›†ç¾¤ä¸­ç§»é™¤ä¼šæŠ¥é”™ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster del-node 192.168.226.137:6387 node7èŠ‚ç‚¹ç¼–å·<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. Dockerå®‰è£…Mysql</title>
    <link href="/2024/12/07/docker/9-Docker%E5%AE%89%E8%A3%85Mysql/"/>
    <url>/2024/12/07/docker/9-Docker%E5%AE%89%E8%A3%85Mysql/</url>
    
    <content type="html"><![CDATA[<h1 id="docker-å®‰è£…-mysql">1. Docker å®‰è£… Mysql</h1><p>ä»¥å®‰è£… Mysql 5.7ä¸ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull mysql:5.7<br></code></pre></td></tr></table></figure><h1 id="mysql-å•æœº">2. Mysql å•æœº</h1><h2 id="ç®€å•ç‰ˆ-mysql-5.7-å®‰è£…">2.1 ç®€å•ç‰ˆ Mysql 5.7 å®‰è£…</h2><p>ç®€å•çš„å¯åŠ¨Mysqlå®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">éœ€è¦ä½¿ç”¨ -e é…ç½®ç¯å¢ƒå˜é‡ MYSQL_ROOT_PASSWORDï¼ˆmysql rootç”¨æˆ·çš„å¯†ç ï¼‰</span><br>docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿›å…¥å‘½ä»¤è¡Œ</span><br>docker exec -it d3d561262994 /bin/bash<br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¾“å…¥å¯†ç </span><br>mysql -uroot -p<br><br></code></pre></td></tr></table></figure><p>ç®€å•ç‰ˆçš„Mysqlä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>ä¸­æ–‡ä¹±ç </li><li>æ²¡æœ‰å®¹å™¨å·æ˜ å°„</li></ul><p>å¯åŠ¨dockerå®¹å™¨åï¼Œå¯ä»¥æ­£å¸¸çš„è¿æ¥ã€åˆ›å»ºæ•°æ®åº“ï¼Œåˆ›å»ºè¡¨ï¼Œæ’å…¥æ•°æ®ã€‚ä½†æ˜¯æ’å…¥ä¸­æ–‡åˆ™ä¼šæŠ¥é”™ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºdb01æ•°æ®åº“</span><br><span class="hljs-keyword">create</span> database db01;<br><span class="hljs-comment">-- åˆ‡æ¢åˆ°db01;</span><br>use db01;<br><span class="hljs-comment">-- åˆ›å»ºè¡¨</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1(id <span class="hljs-type">int</span>, name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>));<br><span class="hljs-comment">-- æ’å…¥è‹±æ–‡å¯ä»¥æ­£å¸¸æ’å…¥</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t1 <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;abc&#x27;</span>);<br><span class="hljs-comment">-- æ’å…¥ä¸­æ–‡æŠ¥é”™</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t1 <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>);<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºdockeré»˜è®¤çš„å­—ç¬¦é›†çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨mysqlä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ•°æ®åº“å­—ç¬¦é›†ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;character%&#x27;</span>;<br></code></pre></td></tr></table></figure><p>è¿”å›çš„å­—ç¬¦é›†ä¸­ï¼Œ<code>character_set_database</code>ã€<code>character_set_server</code>ç­‰éƒ½ä¸º<code>latin1</code>å­—ç¬¦é›†ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p><p>è€Œä¸”å› ä¸ºå¯åŠ¨å®¹å™¨æ—¶æ²¡æœ‰é…ç½®å®¹å™¨å·æ˜ å°„ï¼Œå½“å®¹å™¨æ„å¤–è¢«åˆ æ—¶ï¼Œæ•°æ®æ— æ³•æ‰¾å›ã€‚</p><h2 id="å®é™…åº”ç”¨ç‰ˆ-mysql-5.7å®‰è£…">2.2 å®é™…åº”ç”¨ç‰ˆ Mysql 5.7å®‰è£…</h2><p>å¯åŠ¨ Mysql å®¹å™¨ï¼Œå¹¶é…ç½®å®¹å™¨å·æ˜ å°„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 3306:3306 \<br>           --privileged=true \<br>           -v /app/mysql/log:/var/log/mysql \<br>           -v /app/mysql/data:/var/lib/mysql \<br>           -v /app/mysql/conf:/etc/mysql/conf.d \<br>           -e MYSQL_ROOT_PASSWORD=root \<br>           --name mysql \<br>           mysql:5.7<br></code></pre></td></tr></table></figure><p>åœ¨<code>/app/mysql/conf</code>ä¸‹æ–°å»º<code>my.cnf</code>ï¼Œé€šè¿‡å®¹å™¨å·åŒæ­¥ç»™mysqlå®ä¾‹ï¼Œè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">[client]<br>default-character-set=utf8<br>[mysqld]<br>collation_server = utf8_general_ci<br>character_set_server = utf8<br></code></pre></td></tr></table></figure><p>é‡å¯mysqlå®¹å™¨ï¼Œä½¿å¾—å®¹å™¨é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker restart mysql<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ä¾¿è§£å†³äº†ä¸­æ–‡ä¹±ç ï¼ˆä¸­æ–‡æ’å…¥æŠ¥é”™ï¼‰é—®é¢˜ã€‚</p><p>è€Œä¸”å› ä¸ºå¯åŠ¨æ—¶å°†å®¹å™¨åšäº†å®¹å™¨å·æ˜ å°„ï¼Œå°†mysqlçš„é…ç½®ï¼ˆæ˜ å°„åˆ°<code>/app/mysql/conf</code>ï¼‰ã€æ•°æ®ï¼ˆæ˜ å°„åˆ°<code>/app/mysql/data</code>ï¼‰ã€æ—¥å¿—ï¼ˆæ˜ å°„åˆ°<code>/app/mysql/log</code>ï¼‰éƒ½æ˜ å°„åˆ°äº†å®¿ä¸»æœºå®é™…ç›®å½•ï¼Œæ‰€ä»¥å³ä½¿åˆ é™¤äº†å®¹å™¨ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå¤ªå¤§å½±å“ã€‚åªéœ€è¦å†æ‰§è¡Œä¸€ä¸‹å¯åŠ¨Mysqlå®¹å™¨å‘½ä»¤ï¼Œå®¹å™¨å·è¿˜æŒ‰ç›¸åŒä½ç½®è¿›è¡Œæ˜ å°„ï¼Œæ‰€æœ‰çš„æ•°æ®ä¾¿éƒ½å¯ä»¥æ­£å¸¸æ¢å¤ã€‚</p><h1 id="mysql-ä¸»ä»å¤åˆ¶å®‰è£…">3. Mysql ä¸»ä»å¤åˆ¶å®‰è£…</h1><p>å®‰è£…ä¸»æœåŠ¡å™¨å®¹å™¨å®ä¾‹ï¼ˆç«¯å£å·3307ï¼‰ï¼š</p><ol type="1"><li>å¯åŠ¨å®¹å™¨å®ä¾‹</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -p 3307:3306 \<br>           --name mysql-master \<br>           --privileged=true \<br>           -v /app/mysql-master/log:/var/log/mysql \<br>           -v /app/mysql-master/data:/var/lib/mysql \<br>           -v /app/mysql-master/conf:/etc/mysql/conf.d \<br>           -e MYSQL_ROOT_PASSWORD=root \<br>           -d mysql:5.7<br></code></pre></td></tr></table></figure><p>è¿›å…¥<code>/app/mysql-master/conf</code>ï¼Œæ–°å»º<code>my.cnf</code>é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plain">[mysqld]<br>## è®¾ç½®server_id, åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€<br>server_id=101<br>## æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°<br>binlog-ignore-db=mysql<br>## å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½<br>log-bin=mall-mysql-bin<br>## è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰<br>binlog_cache_size=1M<br>## è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰<br>binlog_format=mixed<br>## äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†<br>expire_logs_days=7<br>## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­<br>## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´<br>slave_skip_errors=1062<br></code></pre></td></tr></table></figure><p>é‡å¯å®¹å™¨å®ä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker restart mysql-master<br></code></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨å®ä¾‹å†…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it mysql-master /bin/bash<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ç™»å½•mysqlï¼Œåˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- é¦–å…ˆä½¿ç”¨ mysql -uroot -p ç™»å½•mysql</span><br><br><span class="hljs-comment">-- åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;slave&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br><span class="hljs-comment">-- æˆæƒ</span><br><span class="hljs-keyword">grant</span> replication slave, replication client <span class="hljs-keyword">on</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">to</span> <span class="hljs-string">&#x27;slave&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br>flush privileges;<br></code></pre></td></tr></table></figure><p>å®‰è£…ä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹ï¼ˆç«¯å£å·3308ï¼‰ï¼š</p><ol start="6" type="1"><li>å¯åŠ¨å®¹å™¨æœåŠ¡ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -p 3308:3306 \<br>           --name mysql-slave \<br>           --privileged=true \<br>           -v /app/mysql-slave/log:/var/log/mysql \<br>           -v /app/mysql-slave/data:/var/lib/mysql \<br>           -v /app/mysql-slave/conf:/etc/mysql/conf.d \<br>           -e MYSQL_ROOT_PASSWORD=root \<br>           -d mysql:5.7<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>è¿›å…¥<code>/app/mysql-slave/conf</code>ç›®å½•ï¼Œåˆ›å»º<code>my.cnf</code>é…ç½®æ–‡ä»¶ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs plain">[mysqld]<br>## è®¾ç½®server_id, åŒä¸€ä¸ªå±€åŸŸç½‘å†…éœ€è¦å”¯ä¸€<br>server_id=102<br>## æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°<br>binlog-ignore-db=mysql<br>## å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼Œä»¥å¤‡slaveä½œä¸ºå…¶å®ƒæ•°æ®åº“å®ä¾‹çš„Masteræ—¶ä½¿ç”¨<br>log-bin=mall-mysql-slave1-bin<br>## è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰<br>binlog_cache_size=1M<br>## è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰<br>binlog_format=mixed<br>## äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†<br>expire_logs_days=7<br>## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­<br>## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´<br>slave_skip_errors=1062<br>## relay_logé…ç½®ä¸­ç»§æ—¥å¿—<br>relay_log=mall-mysql-relay-bin<br>## log_slave_updatesè¡¨ç¤ºslaveå°†å¤åˆ¶äº‹ä»¶å†™è¿›è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—<br>log_slave_updates=1<br>## slaveè®¾ç½®åªè¯»ï¼ˆå…·æœ‰superæƒé™çš„ç”¨æˆ·é™¤å¤–ï¼‰<br>read_only=1<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>ä¿®æ”¹å®Œé…ç½®éœ€è¦é‡å¯slaveå®¹å™¨å®ä¾‹</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker restart mysql-slave<br></code></pre></td></tr></table></figure><p>åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€ï¼š</p><ol start="9" type="1"><li>è¿›å…¥ä¸»æ•°æ®åº“å®¹å™¨ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it mysql-master /bin/bash<br></code></pre></td></tr></table></figure><ol start="10" type="1"><li>è¿›å…¥Mysql</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysql -uroot -p<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> master status;<br></code></pre></td></tr></table></figure><p>ä¸»è¦æŸ¥çœ‹è¿”å›ç»“æœçš„æ–‡ä»¶å<code>File</code>ã€å½“å‰ä½ç½®<code>Position</code></p><p>è¿›å…¥ä»æ•°æ®åº“å®¹å™¨ï¼Œé…ç½®ä¸»ä»å¤åˆ¶ï¼š</p><ol type="1"><li>è¿›å…¥ä»æ•°æ®åº“å®¹å™¨ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it mysql-slave /bin/bash<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>è¿›å…¥æ•°æ®åº“</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysql -uroot -p<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>é…ç½®ä»æ•°æ®åº“æ‰€å±çš„ä¸»æ•°æ®åº“ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ ¼å¼ï¼š</span><br><span class="hljs-comment">-- change master to master_host=&#x27;å®¿ä¸»æœºip&#x27;,master_user=&#x27;ä¸»æ•°æ®åº“é…ç½®çš„ä¸»ä»å¤åˆ¶ç”¨æˆ·å&#x27;,master_password=&#x27;ä¸»æ•°æ®åº“é…ç½®çš„ä¸»ä»å¤åˆ¶ç”¨æˆ·å¯†ç &#x27;,master_port=å®¿ä¸»æœºä¸»æ•°æ®åº“ç«¯å£,master_log_file=&#x27;ä¸»æ•°æ®åº“ä¸»ä»åŒæ­¥çŠ¶æ€çš„æ–‡ä»¶åFile&#x27;,master_log_pos=ä¸»æ•°æ®åº“ä¸»ä»åŒæ­¥çŠ¶æ€çš„Position,master_connect_retry=è¿æ¥å¤±è´¥é‡è¯•æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰;</span><br><br>change master <span class="hljs-keyword">to</span> master_host<span class="hljs-operator">=</span><span class="hljs-string">&#x27;192.168.xxx.xxx&#x27;</span>,master_user<span class="hljs-operator">=</span><span class="hljs-string">&#x27;slave&#x27;</span>,master_password<span class="hljs-operator">=</span><span class="hljs-string">&#x27;123456&#x27;</span>,master_port<span class="hljs-operator">=</span><span class="hljs-number">3307</span>,master_log_file<span class="hljs-operator">=</span><span class="hljs-string">&#x27;mall-mysql-bin.000001&#x27;</span>,master_log_pos<span class="hljs-operator">=</span><span class="hljs-number">769</span>,master_connect_retry<span class="hljs-operator">=</span><span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"># \G å¯ä»¥å°†æ¨ªå‘çš„ç»“æœé›†è¡¨æ ¼è½¬æ¢æˆçºµå‘å±•ç¤ºã€‚<br># slave statusçš„å­—æ®µæ¯”è¾ƒå¤šï¼Œçºµå‘å±•ç¤ºæ¯”å‹å¥½<br><span class="hljs-keyword">show</span> slave status \G;<br></code></pre></td></tr></table></figure><p>é™¤äº†å±•ç¤ºåˆšåˆšé…ç½®çš„ä¸»æ•°æ®åº“ä¿¡æ¯å¤–ï¼Œä¸»è¦å…³æ³¨<code>Slave_IO_Running</code>ã€<code>Slave_SQL_Running</code>ã€‚ç›®å‰ä¸¤ä¸ªå€¼åº”è¯¥éƒ½ä¸º<code>No</code>ï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰å¼€å§‹ã€‚</p><ol start="5" type="1"><li>å¼€å¯ä¸»ä»åŒæ­¥ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">start</span> slave;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>å†æ¬¡æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€ï¼Œ<code>Slave_IO_Running</code>ã€<code>Slave_SQL_Running</code>éƒ½å˜ä¸º<code>Yes</code>ã€‚</li></ol><p>ä¸»ä»å¤åˆ¶æµ‹è¯•ï¼š</p><ol type="1"><li>åœ¨ä¸»æ•°æ®åº“ä¸Šæ–°å»ºåº“ã€ä½¿ç”¨åº“ã€æ–°å»ºè¡¨ã€æ’å…¥æ•°æ®</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database db01;<br>use db01;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1 (id <span class="hljs-type">int</span>, name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>));<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t1 <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;abc&#x27;</span>);<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>åœ¨ä»æ•°æ®åº“ä¸Šä½¿ç”¨åº“ã€æŸ¥çœ‹è®°å½•</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> databases;<br>use db01;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t1;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. Registryæ­å»ºdockerç§ä»“</title>
    <link href="/2024/12/07/docker/8-Registry%E6%90%AD%E5%BB%BAdocker%E7%A7%81%E4%BB%93/"/>
    <url>/2024/12/07/docker/8-Registry%E6%90%AD%E5%BB%BAdocker%E7%A7%81%E4%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="docker-registry">Docker Registry</h1><p>Docker Registryæ˜¯å®˜æ–¹æä¾›çš„å·¥å…·ï¼Œç”¨äºæ„å»ºç§æœ‰é•œåƒä»“åº“ã€‚</p><h1 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h1><p>Docker Registryä¹Ÿæ˜¯Docker Hubæä¾›çš„ä¸€ä¸ªé•œåƒï¼Œå¯ä»¥ç›´æ¥æ‹‰å–è¿è¡Œã€‚</p><p>æ­¥éª¤ï¼š</p><ol type="1"><li>æ‹‰å–é•œåƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull registry<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>å¯åŠ¨Docker Registry</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d -p 5000:5000 -v /app/myregistry/:/tmp/registry --privileged=true registry<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>éªŒè¯ï¼ˆæŸ¥çœ‹ç§æœä¸­çš„æ‰€æœ‰é•œåƒï¼‰</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl http://192.168.xxx.xxx:5000/v2/_catalog<br></code></pre></td></tr></table></figure><p>Registryä¼šè¿”å›jsonæ ¼å¼çš„æ‰€æœ‰é•œåƒç›®å½•</p><h1 id="å‘registryç§ä»“ä¸­ä¸Šä¼ é•œåƒ">å‘Registryç§ä»“ä¸­ä¸Šä¼ é•œåƒ</h1><h2 id="é…ç½®dockerå…è®¸æ¥æ”¶httpè¯·æ±‚">é…ç½®dockerå…è®¸æ¥æ”¶<code>http</code>è¯·æ±‚</h2><p>ï¼ˆé…ç½®æ–¹å¼å’Œä¸Šä¼ åˆ°nexusç§ä»“ç›¸åŒï¼‰ã€‚</p><p>ä¿®æ”¹<code>/etc/docker/daemon.json</code>ï¼Œæ·»åŠ <code>insecure-registries</code>å…è®¸httpï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;registry-mirros&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;https://xxxx.mirror.aliyuncs.com&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;insecure-registries&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;192.168.xxx.xxx:5000&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ç„¶åé‡å¯dockerï¼šï¼ˆæ–°ç‰ˆæœ¬çš„dockerä¼šç«‹å³ç”Ÿæ•ˆï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">centos6 çš„å‘½ä»¤</span><br>sudo chkconfig daemon-reload<br>sudo service docker restart<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">centos7 çš„å‘½ä»¤</span><br>sudo systemctl daemon-reload<br>sudo systemctl restart docker<br></code></pre></td></tr></table></figure><h2 id="æ¨é€åˆ°ç§ä»“">æ¨é€åˆ°ç§ä»“</h2><p>æ­¥éª¤ï¼š</p><ol type="1"><li>æ·»åŠ ä¸€ä¸ªå¯¹åº”ç§ä»“åœ°å€çš„tag</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker tag lee/myubuntu:1.0.1 192.168.xxx.xxx:5000/lee/myubuntu:1.0.1<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>pushåˆ°ç§ä»“</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker push 192.168.xxx.xxx:5000/lee/myubuntu:1.0.1<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æŸ¥çœ‹ç§ä»“ä¸­é•œåƒç›®å½•éªŒè¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl http://192.168.xxx.xxx:5000/v2/_catalog<br></code></pre></td></tr></table></figure><p>æ‹‰å–éªŒè¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull 192.169.xxx.xxx:5000/lee/myubuntu:1.0.1<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. nexusæ­å»ºdockerç§ä»“</title>
    <link href="/2024/12/07/docker/7-nexusi%E6%90%AD%E5%BB%BAdocker%E7%A7%81%E4%BB%93/"/>
    <url>/2024/12/07/docker/7-nexusi%E6%90%AD%E5%BB%BAdocker%E7%A7%81%E4%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨nexusåˆ›å»ºdockerç§æœ‰ä»“åº“">ä½¿ç”¨nexusåˆ›å»ºdockerç§æœ‰ä»“åº“</h1><p>Nexusçš„å®‰è£…è¯·å‚è€ƒè¯¥æ–‡æ¡£ï¼š<a href="https://www.yuque.com/tmfl/pom/uumrx2">https://www.yuque.com/tmfl/pom/uumrx2</a></p><p>Nexusé…ç½®Dockerä»“åº“æ­¥éª¤ï¼›</p><ol type="1"><li>nexusé»˜è®¤dockeræ˜¯å¤±æ•ˆçš„ï¼Œéœ€è¦ åœ¨<code>security</code> --&gt;<code>Realms</code>ï¼Œå°†dockeré…ç½®æˆ<code>Active</code></li><li>åœ¨ <code>Repository</code> çš„ <code>Blob Store</code>ä¸­åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾dockeré•œåƒçš„å­˜å‚¨ã€‚å†…ç½‘æ²¡æœ‰<code>S3</code>çš„è¯ï¼ŒæŠŠ<code>Type</code>é…ç½®ä¸º<code>file</code>å°±è¡Œã€‚</li></ol><blockquote><p>S3ï¼šSimple Storage Serviceï¼Œç®€å•å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå³äº‘å­˜å‚¨ã€‚</p></blockquote><ol start="3" type="1"><li>åœ¨ <code>Repository</code> çš„ <code>Repositories</code>ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºåº“ï¼Œç±»å‹ä¸º <code>docker-hosted</code>ã€‚</li></ol><p>åˆ›å»ºçš„ <code>docker-hosted</code>èµ„æºåº“çš„ç›¸å…³é…ç½®ï¼š</p><ol type="1"><li><code>Name</code>ï¼šæŒ‡å®šè¯¥èµ„æºåº“çš„åç§°ï¼Œä¾‹å¦‚å°±å«<code>docker-hosted</code></li><li><code>Online</code>ï¼šé»˜è®¤å‹¾é€‰å³å¯</li><li><code>HTTP</code>ï¼šä¸ä¸‹é¢çš„HTTPSï¼Œè‡³å°‘éœ€è¦å‹¾é€‰å…¶ä¸­ä¸€ä¸ªé€‰æ‹©æ¡†ï¼Œå¹¶é…ç½®ä¸€ä¸ªå’Œnexusä¸åŒçš„ç«¯å£å·ï¼Œä¾‹å¦‚<code>8881</code>ã€‚å°†æ¥dockerå®¢æˆ·ç«¯å‘é•œåƒä¸­å¿ƒä¸Šä¼ é•œåƒæ—¶ï¼Œéœ€è¦å‘è¯¥ç«¯å£å·è¿›è¡Œä¸Šä¼ ã€‚</li><li><code>HTTPS</code>ï¼šå¦‚æœæœåŠ¡å™¨å¯ä»¥å¼€å¯httpsæœåŠ¡ï¼Œåˆ™ä¹Ÿå¯ä»¥å‹¾é€‰<code>HTTPS</code>ï¼Œç„¶åé…ç½®ä¸€ä¸ªç«¯å£å·ï¼Œæ¥æ”¶dockerå®¢æˆ·ç«¯ä¸Šä¼ ä¸Šæ¥çš„é•œåƒã€‚</li><li><code>Allow anonymous docker pull</code>ï¼šå…è®¸åŒ¿åä¸Šä¼ ï¼Œé»˜è®¤ä¸å‹¾é€‰</li><li><code>Enable docker V1 API</code>ï¼šæ˜¯å¦å¯ç”¨dockeræ—©æœŸ<code>V1</code>ç‰ˆæœ¬çš„APIï¼Œé»˜è®¤ä¸å‹¾é€‰ï¼Œå³åªå¯ç”¨<code>V2 API</code>ï¼š<code>http://xxx.xxx.xxx.xxx:8881/v2/</code></li><li><code>Blob Store</code>ï¼šé€‰æ‹©ä¸Šé¢åˆ›å»ºçš„dockeré•œåƒçš„å­˜å‚¨</li><li><code>Deployment Policy</code>ï¼šæ˜¯å¦å…è®¸é‡å¤ä¸Šä¼ åŒä¸€ä¸ªèµ„æºï¼Œé»˜è®¤å…è®¸</li></ol><p>é…ç½®å¥½ä¹‹åï¼Œä¿®æ”¹é˜²ç«å¢™è®¾ç½®ï¼Œå¼€å¯åˆšåˆšé…ç½®çš„<code>8881</code>ç«¯å£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/sysconfig/iptables<br></code></pre></td></tr></table></figure><p>æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">-A INPUT -p tcp -m tcp --dport 8881 -j ACCEPT<br></code></pre></td></tr></table></figure><p>é‡å¯iptablesï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables restart<br></code></pre></td></tr></table></figure><h1 id="dockerå®¢æˆ·ç«¯çš„é•œåƒå¯¼å‡ºå’Œå¯¼å…¥">dockerå®¢æˆ·ç«¯çš„é•œåƒå¯¼å‡ºå’Œå¯¼å…¥</h1><p>é•œåƒä¸‹è½½å’Œå¯¼å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä¸‹è½½é•œåƒ</span><br>docker pull mysql:8.0.28<br><span class="hljs-meta prompt_"># </span><span class="language-bash">å°†é•œåƒå¯¼å‡ºæˆæœ¬åœ°taræ–‡ä»¶</span><br>docker save -o mysql-8.0.28.tar mysql:8.0.28<br></code></pre></td></tr></table></figure><p>é•œåƒçš„å¯¼å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å°†æœ¬åœ°æ–‡ä»¶å¯¼å…¥åˆ°dockeré•œåƒä¸­ï¼ˆdockerä¼šè‡ªåŠ¨è§£æå‡ºæ–‡ä»¶ä¸­çš„tagï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šï¼‰</span><br>docker load &lt; mysql-8.0.28.tar<br></code></pre></td></tr></table></figure><h1 id="docker-å®¢æˆ·ç«¯å‘ç§ä»“ä¸Šä¼ é•œåƒ">docker å®¢æˆ·ç«¯å‘ç§ä»“ä¸Šä¼ é•œåƒ</h1><h2 id="é…ç½®dockerå…è®¸æ¥æ”¶httpè¯·æ±‚">é…ç½®dockerå…è®¸æ¥æ”¶<code>http</code>è¯·æ±‚</h2><p>dockeré»˜è®¤åªæ¥æ”¶<code>https</code>è¯·æ±‚ï¼Œè€Œæˆ‘ä»¬çš„<code>nexus</code>ç§ä»“å¦‚æœé…ç½®çš„æ˜¯<code>HTTP</code>æ¥å£çš„è¯ï¼Œdockerç›´æ¥è¿ä¼šæŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">server gave HTTP response to HTTPS client<br></code></pre></td></tr></table></figure><p>éœ€è¦é…ç½®dockerå…è®¸è¿æ¥æˆ‘ä»¬ç§ä»“çš„<code>http</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /usr/lib/systemd/system/docker.service<br></code></pre></td></tr></table></figure><p>åœ¨å…¶ä¸­çš„<code>ExecStart</code> é€‰é¡¹åé¢ï¼Œæ·»åŠ <code>--insecure-registry &#123;docker ç§æœ‰é•œåƒåº“ IP&#125; --ipv6=false</code>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">[Service]<br><br>#  å‰é¢çš„-Hå‚æ•°å¯èƒ½ä¸åŒï¼Œä¸éœ€è¦ç®¡ï¼Œåªéœ€åœ¨æœ€åé¢åŠ ä¸Šæˆ‘ä»¬çš„ç§ä»“åœ°å€å³å¯ï¼š--insecure-registry 192.168.x.xxx:8881 --ipv6=false<br><br>ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock --insecure-registry 192.168.x.xxx:8881 --ipv6=false<br></code></pre></td></tr></table></figure><p>ç„¶åé‡å¯dockerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">centos6 çš„å‘½ä»¤</span><br>sudo chkconfig daemon-reload<br>sudo service docker restart<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">centos7 çš„å‘½ä»¤</span><br>sudo systemctl daemon-reload<br>sudo systemctl restart docker<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åœ¨<code>/etc/docker/daemon.json</code> ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;insecure-reigstries&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;192.168.xxx.xxx:8881&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="å‘ç§ä»“æ¨é€é•œåƒ">å‘ç§ä»“æ¨é€é•œåƒ</h2><ol type="1"><li>å¦‚æœç§ä»“ä¸å…è®¸åŒ¿åä¸Šä¼ é•œåƒï¼Œåˆ™éœ€è¦å…ˆè¿›è¡Œç™»é™†ã€‚ï¼ˆä¸€èˆ¬ç§ä»“éƒ½ä¸å…è®¸åŒ¿åä¸Šä¼ ï¼Œ<code>nexus</code>é»˜è®¤åŒ¿åä¸Šä¼ ä¹Ÿæ²¡æœ‰å‹¾é€‰ï¼‰</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">--usernameåé¢ä¸ºnexusç”¨æˆ·åï¼Œæ‰§è¡Œå‘½ä»¤åä¼šæç¤ºè¾“å…¥å¯†ç </span><br>docker login --username=admin http://192.168.xxx.xxx:8881<br><span class="hljs-meta prompt_"># </span><span class="language-bash">ç™»å½•ä¹‹åï¼Œä¼šåœ¨ <span class="hljs-variable">$HOME</span>/.docker/config.json ä¸­è®°å½•ä¸‹ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¹‹åä¾¿ä¸éœ€è¦å†è¿›è¡Œç™»é™†æ“ä½œ</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœè¦å–æ¶ˆç™»å½•ï¼Œåˆ™åªéœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">docker <span class="hljs-built_in">logout</span> http://192.168.xxx.xxx:8881</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>å°†è¦ä¸Šä¼ çš„é•œåƒé‡æ–°è®¾ç½®<code>Tag</code>ã€‚<br>dockeræŒ‰ç…§é•œåƒåç§°åŒºåˆ†ä¸Šä¼ çš„èµ„æºåº“ã€‚<br>ä¾‹å¦‚ï¼š<br><code>mysql:8.0.28</code>ä¼šè¢«ä¸Šä¼ åˆ°dockerå®˜æ–¹<code>dockerhub</code>ï¼›<br><code>tengyer/helloworld:lasted</code>ä¼šè¢«ä¸Šä¼ åˆ°dockerhubçš„<code>tengyer</code>å‘½åç©ºé—´ä¸­ï¼›<br><code>registry.cn-hangzhou.aliyuncs.com/å‘½åç©ºé—´/é•œåƒåç§°:[é•œåƒç‰ˆæœ¬å·]</code>ä¼šä¸Šä¼ åˆ°é˜¿é‡Œäº‘æŒ‡å®šå‘½åç©ºé—´ä¸­ï¼›<br><code>ccr.ccs.tencentyun.com/å‘½åç©ºé—´/hello-world</code>ï¼šä¼šä¸Šä¼ åˆ°è…¾è®¯äº‘æŒ‡å®šå‘½åç©ºé—´ä¸­ï¼›<br><code>hub.c.163.com/å‘½åç©ºé—´/hello-world</code>ï¼šä¼šä¸Šä¼ åˆ°ç½‘æ˜“æ•°å¸†æŒ‡å®šå‘½åç©ºé—´ä¸­ï¼›<br>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¦‚æœè¦ä¸Šä¼ åˆ°æˆ‘ä»¬çš„ç§ä»“ï¼Œéœ€è¦å°†<code>Tag</code>ä¿®æ”¹ä¸º<code>xxx.xxx.xxx.xxx:8881/å‘½åç©ºé—´/mysql:5.0.27</code>æ ¼å¼ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å°†mysql:8.0.28å¤åˆ¶å‡ºä¸€ä¸ªç§ä»“æ ¼å¼çš„Tag</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¯¥æ“ä½œåœ¨ docker imagesä¸­ä¼šå¤šå‡ºä¸€ä¸ªå¤åˆ¶å‡ºæ¥çš„tagï¼Œä½†æ˜¯ImageIdå’ŒåŸå§‹çš„ç›¸åŒ</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åŠ ä¸ªofficialå‘½åç©ºé—´ï¼Œæ–¹ä¾¿åŒºåˆ†è¿™ä¸ªé•œåƒæ˜¯ä»å®˜æ–¹é•œåƒä¸‹è½½ä¸‹æ¥çš„ï¼Œä¸åŠ å‘½åç©ºé—´ä¹Ÿå¯ä»¥ä¸Šä¼ </span><br>docker tag [ImageId] xxx.xxx.xxx.xxx:8881/official/mysql:8.0.28<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å°†ä¿®æ”¹å¥½<code>Tag</code>çš„é•œåƒè¿›è¡Œä¸Šä¼ ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker push xxx.xxx.xxx.xxx:8881/official/mysql:8.0.28<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. Dockeré•œåƒ</title>
    <link href="/2024/12/07/docker/6-Docker%E9%95%9C%E5%83%8F/"/>
    <url>/2024/12/07/docker/6-Docker%E9%95%9C%E5%83%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="é•œåƒ">1. é•œåƒ</h1><p>é•œåƒæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½è¡Œç¨‹ä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒï¼ˆåŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶éœ€è¦çš„åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç­‰ï¼‰ï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±æ˜¯imageé•œåƒæ–‡ä»¶ã€‚</p><h1 id="docker-é•œåƒåŠ è½½åŸç†">2. Docker é•œåƒåŠ è½½åŸç†</h1><h2 id="è”åˆæ–‡ä»¶ç³»ç»Ÿ">2.1 è”åˆæ–‡ä»¶ç³»ç»Ÿ</h2><p>Docker ä¸­çš„æ–‡ä»¶å­˜å‚¨é©±åŠ¨å«åš storage driverã€‚</p><p>Docker æœ€æ—©æ”¯æŒçš„stotage driveræ˜¯AUFSï¼Œå®ƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿå«UnionFSã€‚</p><p>è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰ï¼šUnionæ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹ï¼ˆuniteserveral directories into a single virtual filesystemï¼‰ã€‚</p><p>Unionæ–‡ä»¶ç³»ç»Ÿæ˜¯Dockeré•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œé›†æˆï¼ŒåŸºäºåŸºç¡€é•œåƒå¯ä»¥åˆ¶ä½œå…·ä½“çš„åº”ç”¨é•œåƒã€‚</p><p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p>åæ¥å‡ºç°çš„dockerç‰ˆæœ¬ä¸­ï¼Œé™¤äº†AUFSï¼Œè¿˜æ”¯æŒOverlayFSã€Btrfsã€DeviceMapperã€VFSã€ZFSç­‰storage driverã€‚</p><h2 id="bootfså’Œrootfs">2.2 bootfså’Œrootfs</h2><p>bootfsï¼ˆboot file systemï¼‰ä¸»è¦åŒ…å« bootloader å’Œkernelï¼Œbootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernelï¼ŒLinuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿã€‚</p><p>åœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯å¼•å¯¼æ–‡ä»¶ç³»ç»Ÿbootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç»ç”±bootfs è½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½ bootfsã€‚</p><p>rootfsï¼ˆroot file systemï¼‰ï¼Œåœ¨bootfsä¹‹ä¸Šï¼ŒåŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿä¸­çš„<code>/dev</code>ã€<code>/proc</code>ã€<code>/bin</code>ã€<code>/etc</code>ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuã€CentOSç­‰ã€‚</p><p>dockeré•œåƒåº•å±‚å±‚æ¬¡ï¼š</p><p><img src="/2024/12/07/docker/6-Docker%E9%95%9C%E5%83%8F/1652093445038-27095471-f01f-4978-a28f-d8e2df893dab.jpeg"></p><p>å¯¹äºä¸€ä¸ªç²¾ç®€çš„OSï¼Œrootfså¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…æ‹¬æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ï¼Œå› ä¸ºåº•å±‚ç›´æ¥ä½¿ç”¨Hostçš„Kernelï¼Œè‡ªå·±åªéœ€è¦æä¾›rootfså°±å¯ä»¥ã€‚æ‰€ä»¥ï¼Œå¯¹äºä¸åŒçš„Linuxå‘è¡Œç‰ˆï¼ŒbootfsåŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œrootfsä¼šæœ‰å·®åˆ«ï¼Œä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…±ç”¨bootfsã€‚</p><p>æœ‰å·®åˆ«çš„rootfsï¼š</p><p><img src="/2024/12/07/docker/6-Docker%E9%95%9C%E5%83%8F/1652093452907-392b879e-1f7b-478a-97ae-7c37cb9669b3.jpeg"></p><h2 id="é•œåƒåˆ†å±‚">2.3 é•œåƒåˆ†å±‚</h2><p>Dockeræ”¯æŒæ‰©å±•ç°æœ‰é•œåƒï¼Œåˆ›å»ºæ–°çš„é•œåƒã€‚æ–°é•œåƒæ˜¯ä»baseé•œåƒä¸€å±‚ä¸€å±‚å åŠ ç”Ÿæˆçš„ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># Version: 0.0.1</span><br><span class="hljs-keyword">FROM</span> debian  <span class="hljs-comment"># ç›´æ¥åœ¨debain baseé•œåƒä¸Šæ„å»º</span><br><span class="hljs-keyword">MAINTAINER</span> mylinux<br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y emacs <span class="hljs-comment"># å®‰è£…emacs</span></span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> apt-get install -y apache2 <span class="hljs-comment"># å®‰è£…apache2</span></span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;/bin/bash&quot;</span>] <span class="hljs-comment"># å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œbash</span></span><br></code></pre></td></tr></table></figure><p>é•œåƒåˆ›å»ºè¿‡ç¨‹ï¼š</p><p><img src="/2024/12/07/docker/6-Docker%E9%95%9C%E5%83%8F/1652093459380-335e0f0e-1213-47d9-a17b-f49734699ef2.png"></p><h1 id="é•œåƒåˆ†å±‚çš„ä¼˜åŠ¿">3. é•œåƒåˆ†å±‚çš„ä¼˜åŠ¿</h1><p>é•œåƒåˆ†å±‚çš„ä¸€ä¸ªæœ€å¤§å¥½å¤„å°±æ˜¯å…±äº«èµ„æºï¼Œæ–¹ä¾¿å¤åˆ¶è¿ç§»ï¼Œæ–¹ä¾¿å¤ç”¨ã€‚</p><h1 id="å®¹å™¨å±‚">4. å®¹å™¨å±‚</h1><p>å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„<strong>å¯å†™å±‚</strong>å°†è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ï¼Œè¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä¸º<code>å®¹å™¨å±‚</code>ï¼Œå®¹å™¨å±‚ä¹‹ä¸‹çš„éƒ½å«<code>é•œåƒå±‚</code>ã€‚</p><p>æ‰€æœ‰å¯¹å®¹å™¨çš„æ”¹åŠ¨ï¼Œæ— è®ºæ·»åŠ ã€åˆ é™¤ã€è¿˜æ˜¯ä¿®æ”¹æ–‡ä»¶éƒ½åªä¼šå‘ç”Ÿåœ¨å®¹å™¨å±‚ä¸­ã€‚</p><p>åªæœ‰å®¹å™¨å±‚æ˜¯å¯å†™çš„ï¼Œå®¹å™¨å±‚ä¸‹é¢çš„æ‰€æœ‰é•œåƒå±‚éƒ½æ˜¯åªè¯»çš„ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/2024/12/07/docker/6-Docker%E9%95%9C%E5%83%8F/1652093466220-a1c70673-7ca7-4025-9432-d89152439000.jpeg"></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. å®¹å™¨å‘½ä»¤</title>
    <link href="/2024/12/07/docker/5-%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2024/12/07/docker/5-%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="æ–°å»ºå¯åŠ¨å®¹å™¨">1. æ–°å»ºå¯åŠ¨å®¹å™¨</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]<br></code></pre></td></tr></table></figure><p>å¸¸ç”¨çš„å‚æ•°ï¼š</p><ul><li><code>--name</code>ï¼šä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°</li><li><code>-d</code>ï¼šåå°è¿è¡Œå®¹å™¨å¹¶è¿”å›å®¹å™¨IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨</li><li><code>-i</code>ï¼šä»¥äº¤äº’æ¨¡å¼ï¼ˆinteractiveï¼‰è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸<code>-t</code>åŒæ—¶ä½¿ç”¨</li><li><code>-t</code>ï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼ˆttyï¼‰ï¼Œé€šå¸¸ä¸<code>-i</code>åŒæ—¶ä½¿ç”¨ã€‚ä¹Ÿå³å¯åŠ¨äº¤äº’å¼å®¹å™¨ï¼ˆå‰å°æœ‰ä¼ªç»ˆç«¯ï¼Œç­‰å¾…äº¤äº’ï¼‰</li><li><code>-e</code>ï¼šä¸ºå®¹å™¨æ·»åŠ ç¯å¢ƒå˜é‡</li><li><code>-P</code>ï¼šéšæœºç«¯å£æ˜ å°„ã€‚å°†å®¹å™¨å†…æš´éœ²çš„æ‰€æœ‰ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºéšæœºç«¯å£</li><li><code>-p</code>ï¼šæŒ‡å®šç«¯å£æ˜ å°„</li></ul><p><code>-p</code>æŒ‡å®šç«¯å£æ˜ å°„çš„å‡ ç§ä¸åŒå½¢å¼ï¼š</p><ul><li><code>-p hostPort:containerPort</code>ï¼šç«¯å£æ˜ å°„ï¼Œä¾‹å¦‚<code>-p 8080:80</code></li><li><code>-p ip:hostPort:containerPort</code>ï¼šé…ç½®ç›‘å¬åœ°å€ï¼Œä¾‹å¦‚<code>-p 10.0.0.1:8080:80</code></li><li><code>-p ip::containerPort</code>ï¼šéšæœºåˆ†é…ç«¯å£ï¼Œä¾‹å¦‚<code>-p 10.0.0.1::80</code></li><li><code>-p hostPort1:containerPort1 -p hostPort2:containerPort2</code>ï¼šæŒ‡å®šå¤šä¸ªç«¯å£æ˜ å°„ï¼Œä¾‹å¦‚<code>-p 8080:80 -p 8888:3306</code></li></ul><h2 id="å¯åŠ¨äº¤äº’å¼å®¹å™¨">1.1 å¯åŠ¨äº¤äº’å¼å®¹å™¨</h2><p>ä»¥äº¤äº’æ–¹å¼å¯åŠ¨ubuntué•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">-i äº¤äº’æ¨¡å¼</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">-t åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯<span class="hljs-built_in">tty</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ubuntu é•œåƒåç§°</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">/bin/bashï¼ˆæˆ–è€…bashï¼‰ shelläº¤äº’çš„æ¥å£</span><br>docker run -it ubuntu /bin/bash<br>docker run -it --name=myu1 ubuntu /bin/bash<br></code></pre></td></tr></table></figure><p>é€€å‡ºäº¤äº’æ¨¡å¼ï¼š</p><p>æ–¹å¼1ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">åœ¨äº¤äº’shellä¸­<span class="hljs-built_in">exit</span>å³å¯é€€å›å®¿ä¸»æœº</span><br>exit;<br></code></pre></td></tr></table></figure><p>æ–¹å¼2ï¼šä½¿ç”¨å¿«æ·é”®<code>ctrl</code> + <code>P</code> +<code>Q</code></p><p>æ–¹å¼1 é€€å‡ºåï¼Œå®¹å™¨ä¼šåœæ­¢ï¼›</p><p>æ–¹å¼2 é€€å‡ºåå®¹å™¨ä¾ç„¶æ­£åœ¨è¿è¡Œã€‚</p><h2 id="å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨">1.2 å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨</h2><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç³»ç»Ÿdockerå®¹å™¨æœåŠ¡æ—¶åœ¨åå°è¿è¡Œçš„ï¼Œå¯ä»¥é€šè¿‡<code>-d</code>æŒ‡å®šå®¹å™¨çš„åå°è¿è¡Œæ¨¡å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -d å®¹å™¨å<br></code></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼š</p><p>å¦‚æœä½¿ç”¨<code>docker run -d ubuntu</code>å°è¯•å¯åŠ¨å®ˆæŠ¤å¼çš„ubuntuï¼Œä¼šå‘ç°å®¹å™¨å¯åŠ¨åå°±è‡ªåŠ¨é€€å‡ºäº†ã€‚</p><p>å› ä¸ºDockerå®¹å™¨å¦‚æœåœ¨åå°è¿è¡Œï¼Œå°±å¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚å®¹å™¨è¿è¡Œçš„å‘½ä»¤å¦‚æœä¸æ˜¯é‚£äº›ä¸€ç›´æŒ‚èµ·çš„å‘½ä»¤ï¼ˆä¾‹å¦‚<code>top</code>ã€<code>tail</code>ï¼‰ï¼Œå°±ä¼šè‡ªåŠ¨é€€å‡ºã€‚</p><h1 id="åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨">2. åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨</h1><p>åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker ps [OPTIONS]<br></code></pre></td></tr></table></figure><p>å¸¸ç”¨å‚æ•°ï¼š</p><ul><li><code>-a</code>ï¼šåˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨+å†å²ä¸Šè¿è¡Œè¿‡çš„å®¹å™¨</li><li><code>-l</code>ï¼šæ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨</li><li><code>-n</code>ï¼šæ˜¾ç¤ºæœ€è¿‘nä¸ªåˆ›å»ºçš„å®¹å™¨</li><li><code>-q</code>ï¼šé™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·</li></ul><h1 id="å®¹å™¨å…¶ä»–å¯åœæ“ä½œ">3. å®¹å™¨å…¶ä»–å¯åœæ“ä½œ</h1><h2 id="å¯åŠ¨å·²ç»åœæ­¢çš„å®¹å™¨">3.1 å¯åŠ¨å·²ç»åœæ­¢çš„å®¹å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker start å®¹å™¨IDæˆ–å®¹å™¨å<br><br>docker start -i id<br></code></pre></td></tr></table></figure><h2 id="é‡å¯å®¹å™¨">3.2 é‡å¯å®¹å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker restart å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><h2 id="åœæ­¢å®¹å™¨">3.3 åœæ­¢å®¹å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker stop å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><h2 id="å¼ºåˆ¶åœæ­¢å®¹å™¨">3.4 å¼ºåˆ¶åœæ­¢å®¹å™¨</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker kill å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><h1 id="åˆ é™¤å®¹å™¨">4. åˆ é™¤å®¹å™¨</h1><p>åˆ é™¤å·²ç»åœæ­¢çš„å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rm å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><blockquote><p>åˆ é™¤å®¹å™¨æ˜¯ <code>docker rm</code>ï¼Œåˆ é™¤é•œåƒæ˜¯<code>docker rmi</code>ï¼Œæ³¨æ„åŒºåˆ†ã€‚</p></blockquote><p>å¼ºåˆ¶åˆ é™¤æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rm -f å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><p>ä¸€æ¬¡åˆ é™¤å¤šä¸ªå®¹å™¨å®ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rm -f $&#123;docker ps -a -q&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æˆ–è€…</span><br>docker ps -a -q | xargs docker rm<br></code></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹å®¹å™¨æ—¥å¿—">5.æŸ¥çœ‹å®¹å™¨æ—¥å¿—</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker logs å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹">6. æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker top å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><h1 id="æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚">7. æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker inspect å®¹å™¨IDæˆ–å®¹å™¨å<br></code></pre></td></tr></table></figure><h1 id="è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨">8. è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</h1><p>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¹¶ä»¥å‘½ä»¤è¡Œäº¤äº’ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker exec -it å®¹å™¨ID bashShell<br><br>docker exec -it 9b04f2cf4fc4 /bin/bash<br></code></pre></td></tr></table></figure><p>é‡æ–°è¿›å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker attach å®¹å™¨ID<br></code></pre></td></tr></table></figure><p><code>docker exec</code> å’Œ <code>docker attach</code> åŒºåˆ«ï¼š</p><ul><li><code>attach</code>ç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ï¼Œç”¨<code>exit</code>é€€å‡ºä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢</li><li><code>exec</code>æ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹ï¼Œç”¨<code>exit</code>é€€å‡ºä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢</li></ul><p>å¦‚æœæœ‰å¤šä¸ªç»ˆç«¯ï¼Œéƒ½å¯¹åŒä¸€ä¸ªå®¹å™¨æ‰§è¡Œäº†<code>docker attach</code>ï¼Œå°±ä¼šå‡ºç°ç±»ä¼¼æŠ•å±æ˜¾ç¤ºçš„æ•ˆæœã€‚ä¸€ä¸ªç»ˆç«¯ä¸­è¾“å…¥è¾“å‡ºçš„å†…å®¹ï¼Œåœ¨å…¶ä»–ç»ˆç«¯ä¸Šä¹Ÿä¼šåŒæ­¥çš„æ˜¾ç¤ºã€‚</p><h1 id="å®¹å™¨å’Œå®¿ä¸»æœºæ–‡ä»¶æ‹·è´">9. å®¹å™¨å’Œå®¿ä¸»æœºæ–‡ä»¶æ‹·è´</h1><p>å®¹å™¨å†…æ–‡ä»¶æ‹·è´åˆ°å®¿ä¸»æœºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker cp å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„<br></code></pre></td></tr></table></figure><p>å®¿ä¸»æœºæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker cp ä¸»æœºè·¯å¾„ å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„<br></code></pre></td></tr></table></figure><h1 id="å¯¼å…¥å’Œå¯¼å‡ºå®¹å™¨">10. å¯¼å…¥å’Œå¯¼å‡ºå®¹å™¨</h1><p><code>export</code>ï¼šå¯¼å‡ºå®¹å™¨çš„å†…å®¹æµä½œä¸ºä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶ï¼ˆå¯¹åº”<code>import</code>å‘½ä»¤ï¼‰ï¼›</p><p><code>import</code>ï¼šä»taråŒ…ä¸­çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿå†å¯¼å…¥ä¸ºé•œåƒï¼ˆå¯¹åº”<code>export</code>å‘½ä»¤ï¼‰ï¼›</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯¼å‡º</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">docker <span class="hljs-built_in">export</span> å®¹å™¨ID &gt; taræ–‡ä»¶å</span><br>docker export abc &gt; aaa.tar<br><span class="hljs-meta prompt_"># </span><span class="language-bash">eg</span><br>docker export 9b04f2cf4fc4 &gt; abc.tar<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯¼å…¥</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">cat</span> taræ–‡ä»¶ | docker import - è‡ªå®šä¹‰é•œåƒç”¨æˆ·/è‡ªå®šä¹‰é•œåƒå:è‡ªå®šä¹‰é•œåƒç‰ˆæœ¬å·</span><br>cat aaa.tar | docker import - test/mytest:1.0.1<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹é•œåƒ</span><br>docker images<br></code></pre></td></tr></table></figure><h1 id="å°†å®¹å™¨ç”Ÿæˆæ–°é•œåƒ">11. å°†å®¹å™¨ç”Ÿæˆæ–°é•œåƒ</h1><p><code>docker commit</code>æäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><blockquote><p>docker å¯åŠ¨ä¸€ä¸ªé•œåƒå®¹å™¨åï¼Œå¯ä»¥åœ¨é‡Œé¢æ‰§è¡Œä¸€äº›å‘½ä»¤æ“ä½œï¼Œç„¶åä½¿ç”¨<code>docker commit</code>å°†æ–°çš„è¿™ä¸ªå®¹å™¨å¿«ç…§ç”Ÿæˆä¸€ä¸ªé•œåƒã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[tag]<br></code></pre></td></tr></table></figure><h1 id="æœ¬åœ°é•œåƒå‘å¸ƒåˆ°é˜¿é‡Œäº‘">12. æœ¬åœ°é•œåƒå‘å¸ƒåˆ°é˜¿é‡Œäº‘</h1><ul><li>åˆ›å»ºä»“åº“é•œåƒ<ul><li>é€‰æ‹©æ§åˆ¶å°ï¼Œè¿›å…¥å®¹å™¨é•œåƒæœåŠ¡</li><li>é€‰æ‹©ä¸ªäººå®ä¾‹</li><li>å‘½åç©ºé—´</li><li>ä»“åº“åç§°</li><li>è¿›å…¥ç®¡ç†ç•Œé¢è·å¾—è„šæœ¬</li><li>å°†é•œåƒæ¨é€åˆ°é˜¿é‡Œäº‘</li></ul></li></ul><h1 id="ç§äººä»“åº“">13. ç§äººä»“åº“</h1><ol type="1"><li>æ‹‰å–ä»“åº“</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker pull registry<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ç”Ÿæˆå®¹å™¨</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d -p 5000:5000 -v /zzyyuse/myregistry/:/tmp/registry --privileged=<span class="hljs-literal">true</span> registry<br><br>-væ·»åŠ è‡ªå®šä¹‰çš„å®¹å™¨å·<br>/zzyyuse/myregistry/   å®¿ä¸»æœºè·¯å¾„<br>/tmp/registry   å®¹å™¨å†…è·¯å¾„<br><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>curléªŒè¯ç§æœåº“ä¸Šæœ‰ä»€ä¹ˆé•œåƒ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -XGET http://localhost:5000/v2/_catalog<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>ä¿®æ”¹ç¬¦åˆç§æœtagæ ¼å¼</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">docker tag bobo/vimubu:1.3 192.168.226.137:5000/myubu:1.3<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ä¿®æ”¹daemon.json,æ·»åŠ ï¼Œä½¿å…¶æ”¯æŒhttp</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;insecure-registries&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;192.168.226.137:5000&quot;</span><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>pushåˆ°æœ¬åœ°ç§æœåº“</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker push 192.168.226.137:5000/myubu:1.3<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>curléªŒè¯ç§æœåº“ä¸Šæœ‰ä»€ä¹ˆé•œåƒ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -XGET http://localhost:5000/v2/_catalog<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>pullæœ¬åœ°</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker pull localhost:5000/myubu:1.3<br>docker pull 192.168.226.137:5000/myubu:1.3<br><br></code></pre></td></tr></table></figure><h1 id="å®¹å™¨æ•°æ®å·">14. å®¹å™¨æ•°æ®å·</h1><p>DockeræŒ‚è½½ä¸»æœºç›®å½•ï¼Œå¯èƒ½ä¼šå‡ºç°æŠ¥é”™ï¼š<code>cannot open directory .: Perission denied</code>ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šåœ¨å‘½ä»¤ä¸­åŠ å…¥å‚æ•° <code>--privileged=true</code>ã€‚</p><p>CentOS7å®‰å…¨æ¨¡å—æ¯”ä¹‹å‰ç³»ç»Ÿç‰ˆæœ¬åŠ å¼ºï¼Œä¸å®‰å…¨çš„ä¼šå…ˆç¦æ­¢ï¼Œç›®å½•æŒ‚è½½çš„æƒ…å†µè¢«é»˜è®¤ä¸ºä¸å®‰å…¨çš„è¡Œä¸ºï¼Œåœ¨SELinuxé‡Œé¢æŒ‚è½½ç›®å½•è¢«ç¦æ­¢æ‰äº†ã€‚å¦‚æœè¦å¼€å¯ï¼Œä¸€èˆ¬ä½¿ç”¨<code>--privileged=true</code>ï¼Œæ‰©å¤§å®¹å™¨çš„æƒé™è§£å†³æŒ‚è½½æ²¡æœ‰æƒé™çš„é—®é¢˜ã€‚ä¹Ÿå³ä½¿ç”¨è¯¥å‚æ•°ï¼Œå®¹å™¨å†…çš„rootæ‰æ‹¥æœ‰çœŸæ­£çš„rootæƒé™ï¼Œå¦åˆ™å®¹å™¨å†…çš„rootåªæ˜¯å¤–éƒ¨çš„ä¸€ä¸ªæ™®é€šç”¨æˆ·æƒé™ã€‚</p><p>å·å°±æ˜¯ç›®å½•æˆ–æ–‡ä»¶ï¼Œå­˜åœ¨äºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­ï¼Œç”±dockeræŒ‚è½½åˆ°å®¹å™¨ï¼Œä½†ä¸å±äºè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤èƒ½å¤Ÿç»•è¿‡UnionFSï¼Œæä¾›ä¸€äº›ç”¨äºæŒç»­å­˜å‚¨æˆ–å…±äº«æ•°æ®ã€‚</p><p>ç‰¹æ€§ï¼šå·è®¾è®¡çš„ç›®çš„å°±æ˜¯æ•°æ®çš„æŒä¹…åŒ–ï¼Œå®Œå…¨ç‹¬ç«‹äºå®¹å™¨çš„ç”Ÿå­˜å‘¨æœŸï¼Œå› æ­¤Dockerä¸ä¼šåœ¨å®¹å™¨åˆ é™¤æ—¶åˆ é™¤å…¶æŒ‚è½½çš„æ•°æ®å·ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«æˆ–é‡ç”¨æ•°æ®</li><li>å·ä¸­çš„æ›´æ”¹å¯ä»¥ç›´æ¥å®æ–½ç”Ÿæ•ˆ</li><li>æ•°æ®å·ä¸­çš„æ›´æ”¹ä¸ä¼šåŒ…å«åœ¨é•œåƒçš„æ›´æ–°ä¸­</li><li>æ•°æ®å·çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨å®ƒä¸ºæ­¢</li></ul><p>è¿è¡Œä¸€ä¸ªå¸¦æœ‰å®¹å™¨å·å­˜å‚¨åŠŸèƒ½çš„å®¹å™¨å®ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run -it --privileged=true -v å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:å®¹å™¨å†…ç›®å½•[rw | ro] é•œåƒå<br><br>docker run -it --privileged=true -v /tmp/host_data:/tmp/docker_data --name=u1 ubuntu <br><span class="hljs-meta prompt_"># </span><span class="language-bash">äºŒè€…å…±äº«è¿™ä¸ªç›®å½•</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨<code>docker inspect</code>æŸ¥çœ‹å®¹å™¨ç»‘å®šçš„æ•°æ®å·ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;Mounts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;Type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bind&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;Source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/tmp/host_data&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;Destination&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/tmp/docker_data&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;Mode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;RW&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;Propagation&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;rprivate&quot;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><br></code></pre></td></tr></table></figure><p>æƒé™ï¼š</p><ul><li><code>rw</code>ï¼šè¯»å†™ é»˜è®¤</li><li><code>ro</code>ï¼šåªè¯»ã€‚å¦‚æœå®¿ä¸»æœºå†™å…¥å†…å®¹ï¼Œå¯ä»¥åŒæ­¥ç»™å®¹å™¨å†…ï¼Œå®¹å™¨å†…å¯ä»¥è¯»å–ã€‚</li></ul><p>å®¹å™¨å·çš„ç»§æ‰¿ï¼šç»§æ‰¿u1çš„è§„åˆ™ï¼Œu1é€€å‡ºï¼Œu2ä»ç„¶æ­£å¸¸</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯åŠ¨ä¸€ä¸ªå®¹å™¨</span><br>docker run -it --privileged=true /tmp/test:/tmp/docker --name u1 ubuntu /bin/bash<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ --volumes-from ç»§æ‰¿ u1çš„å®¹å™¨å·æ˜ å°„é…ç½®</span><br>docker run -it --privileged=true --volumes-from u1 --name u2 ubuntu<br></code></pre></td></tr></table></figure><h1 id="æ‰€æœ‰å‘½ä»¤ç¤ºæ„å›¾">15. æ‰€æœ‰å‘½ä»¤ç¤ºæ„å›¾</h1><p><img src="/2024/12/07/docker/5-%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4/1652093386636-41aec8f5-bd52-4a99-8c3c-daa61c1d78a5.png"></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. Dockerå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2024/12/07/docker/4-Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2024/12/07/docker/4-Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="å¯åŠ¨ç±»å‘½ä»¤">1. å¯åŠ¨ç±»å‘½ä»¤</h1><p>å¯åŠ¨dockerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl start docker<br></code></pre></td></tr></table></figure><p>åœæ­¢Dockerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl stop docker<br></code></pre></td></tr></table></figure><p>é‡å¯Dockerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart docker<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹çŠ¶æ€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl status docker<br></code></pre></td></tr></table></figure><p>è®¾ç½®å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl enable docker<br></code></pre></td></tr></table></figure><h1 id="å¸®åŠ©ç±»å‘½ä»¤">2. å¸®åŠ©ç±»å‘½ä»¤</h1><p>æŸ¥çœ‹Dockerç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker version<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹Dockeræ¦‚è¦ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker info<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹Dockeræ€»ä½“å¸®åŠ©æ–‡æ¡£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker --help<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹dockerå…·ä½“å‘½ä»¤å¸®åŠ©æ–‡æ¡£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker å…·ä½“å‘½ä»¤ --help<br></code></pre></td></tr></table></figure><h1 id="é•œåƒå‘½ä»¤">3. é•œåƒå‘½ä»¤</h1><h2 id="åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ">3.1 åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker images<br></code></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><ul><li><code>-a</code>ï¼šåˆ—å‡ºæ‰€æœ‰é•œåƒï¼ˆå«å†å²é•œåƒï¼‰</li><li><code>-q</code>ï¼šåªæ˜¾ç¤ºé•œåƒID</li><li><code>-f</code>ï¼šè¿‡æ»¤</li></ul><p>å„ä¸ªé€‰é¡¹è¯´æ˜ï¼š</p><ul><li>REPOSITORY:è¡¨ç¤ºé•œåƒçš„ä»“åº“æº</li><li>TAG:é•œåƒçš„æ ‡ç­¾ç‰ˆæœ¬å·</li><li>IMAGE ID:é•œåƒID</li><li>CREATED:é•œåƒåˆ›å»ºæ—¶é—´</li><li>SIZE:é•œåƒå¤§å°N</li></ul><p>åŒä¸€ä»“åº“æºå¯ä»¥æœ‰å¤šä¸ªTAGç‰ˆæœ¬ï¼Œä»£è¡¨è¿™ä¸ªä»“åº“æºçš„ä¸åŒä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨REPOSITORY:TAGæ¥å®šä¹‰ä¸åŒçš„é•œåƒã€‚å¦‚æœä½ ä¸æŒ‡å®šä¸€ä¸ªé•œåƒçš„ç‰ˆæœ¬æ ‡ç­¾ï¼Œä¾‹å¦‚ä½ åªä½¿ç”¨ubuntu,dockerå°†é»˜è®¤ä½¿ç”¨ubuntu:latesté•œåƒ</p><h2 id="åœ¨è¿œç¨‹ä»“åº“ä¸­æœç´¢é•œåƒ">3.2 åœ¨è¿œç¨‹ä»“åº“ä¸­æœç´¢é•œåƒ</h2><p>ï¼ˆé»˜è®¤å–docker hubä¸­æœç´¢ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker search é•œåƒåç§°<br>docker search --limit 5 é•œåƒåç§°<br></code></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><ul><li><code>-f</code>ï¼šè¿‡æ»¤</li><li><code>--limit æ•°é‡</code>ï¼šåªå±•ç¤ºå‰å‡ é¡¹</li></ul><h2 id="ä¸‹è½½é•œåƒ">3.3 ä¸‹è½½é•œåƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull é•œåƒåç§°[:tag]<br></code></pre></td></tr></table></figure><p>ä¸åŠ  tag æ—¶ï¼Œé»˜è®¤ä¸‹è½½æœ€æ–°çš„é•œåƒï¼ˆå³tagä¸º<code>latest</code>ï¼‰ã€‚</p><h2 id="æŸ¥çœ‹å æ®çš„ç©ºé—´">3.4 æŸ¥çœ‹å æ®çš„ç©ºé—´</h2><p>æŸ¥çœ‹é•œåƒ/å®¹å™¨/æ•°æ®å·æ‰€å çš„ç©ºé—´ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker system df<br></code></pre></td></tr></table></figure><h2 id="åˆ é™¤é•œåƒ">3.5 åˆ é™¤é•œåƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rmi é•œåƒåç§°/ID<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼Œåˆ é™¤å¤šä¸ªé•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rmi é•œåƒ1 é•œåƒ2 é•œåƒ3<br></code></pre></td></tr></table></figure><p>å¼ºåˆ¶åˆ é™¤æœ‰å®¹å™¨çš„é•œåƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker rmi -f é•œåƒ<br></code></pre></td></tr></table></figure><p>åˆ é™¤å…¨éƒ¨é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker rmi -f $(docker images -qa)<br></code></pre></td></tr></table></figure><h1 id="è™šæ‚¬é•œåƒ">4. è™šæ‚¬é•œåƒ</h1><p>ä»“åº“åã€æ ‡ç­¾éƒ½æ˜¯<code>&lt;none&gt;</code>çš„é•œåƒï¼Œä¿—ç§°è™šæ‚¬é•œåƒï¼ˆdanglingimageï¼‰ã€‚</p><h1 id="å‘½ä»¤è‡ªåŠ¨è¡¥å…¨">5. å‘½ä»¤è‡ªåŠ¨è¡¥å…¨</h1><p>dockeræ”¯æŒå‘½ä»¤è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œå½“è¾“å…¥é•œåƒåå‰å‡ ä½æ—¶ï¼Œå¯ä»¥æŒ‰<code>tab</code>é”®è‡ªåŠ¨è¡¥å…¨é•œåƒåç§°ã€tagç­‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœé•œåƒä¸­æœ‰ubuntuï¼ŒæŸ¥çœ‹è¾“å…¥ubæŒ‰ä¸‹tabæ˜¯å¦å¯ä»¥è¡¥å…¨</span><br>docker run ub<br></code></pre></td></tr></table></figure><p>å¦‚æœæŒ‰ä¸‹<code>tab</code>æ—¶æ²¡æœ‰è‡ªåŠ¨è¡¥å…¨ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol type="1"><li>æ£€æŸ¥æ˜¯å¦å®‰è£…äº†<code>bash-completion</code>ï¼ˆå‘½ä»¤è¡¥å…¨å¢å¼ºåŒ…ï¼‰</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ£€æŸ¥æœ‰ /usr/share/bash-completion/bash_completion è¿™ä¸ªæ–‡ä»¶</span><br>ls /usr/share/bash-completion/bash_completion<br></code></pre></td></tr></table></figure><p>å¦‚æœæœ‰<code>/usr/share/bash-completion</code>ç›®å½•ï¼Œä½†æ˜¯æ²¡æœ‰<code>/usr/share/bash-completion/bash_completion</code>æ–‡ä»¶ï¼ˆcentos6ä¸º<code>/etc/bash_completion</code>æ–‡ä»¶ï¼‰ï¼Œåˆ™éœ€è¦å®‰è£…<code>bash-completion</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum -y install bash-completion<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦å®‰è£…äº†dockerçš„è‡ªåŠ¨è¡¥å…¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ£€æŸ¥/usr/share/bash-completion/completionsæ–‡ä»¶å¤¹ä¸‹æ˜¯å¦æœ‰dockerå¼€å¤´çš„è‡ªåŠ¨è¡¥å…¨</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">dockerå®‰è£…å®Œåä¼šåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆè‡ªåŠ¨è¡¥å…¨æ–‡ä»¶docker</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœå®‰è£…äº†docker-composeï¼Œåˆ™è¯¥æ–‡ä»¶å¤¹ä¸‹è¿˜ä¼šæœ‰ docker-composeæ–‡ä»¶</span><br>ll /usr/share/bash-completion/completions/docker*<br></code></pre></td></tr></table></figure><p>å¦‚æœå·²ç»å®‰è£…äº†dockerè‡ªåŠ¨è¡¥å…¨ï¼Œä½¿ç”¨<code>source</code>å‘½ä»¤ä½¿å…¶ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">source /usr/share/bash-completion/completions/docker<br></code></pre></td></tr></table></figure><p>å†æ¬¡ä½¿ç”¨<code>tab</code>æŸ¥çœ‹æ˜¯å¦å¯ä»¥è‡ªåŠ¨è¡¥å…¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœé•œåƒä¸­æœ‰ubuntuï¼ŒæŸ¥çœ‹è¾“å…¥ubæŒ‰ä¸‹tabæ˜¯å¦å¯ä»¥è¡¥å…¨</span><br>docker run ub<br></code></pre></td></tr></table></figure><p>å¦‚æœæœ‰æŠ¥é”™ï¼Œä¸”æŠ¥é”™ä¸­æç¤º<code>_get_comp_words_by_ref: command not found</code>ã€‚è¯´æ˜<code>bash-completion</code>çš„é…ç½®æ–‡ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œéœ€è¦<code>source</code>ä¸€ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯¹äºcentos7ï¼Œbash-completionå®‰è£…çš„æ˜¯2.xç‰ˆæœ¬ï¼Œé…ç½®æ–‡ä»¶ä¸º/usr/share/bash-completion/bash_completion</span><br>source /usr/share/bash-completion/bash_completion<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœæ˜¯centos6ï¼Œè‡ªåŠ¨å®‰è£…çš„bash-completionæœ€æ–°ç‰ˆä¸º1.xç‰ˆæœ¬ï¼Œé…ç½®æ–‡ä»¶ä¸º/etc/bash_completion</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">bash /etc/bash_completion</span><br></code></pre></td></tr></table></figure><p>å†æ¬¡ä½¿ç”¨<code>tab</code>æŸ¥çœ‹æ˜¯å¦å¯ä»¥è‡ªåŠ¨è¡¥å…¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¦‚æœé•œåƒä¸­æœ‰ubuntuï¼ŒæŸ¥çœ‹è¾“å…¥ubæŒ‰ä¸‹tabæ˜¯å¦å¯ä»¥è¡¥å…¨</span><br>docker run ub<br></code></pre></td></tr></table></figure><h1 id="dockeråå°å¯åŠ¨ä¸€ä¸ªçº¯linuxé•œåƒ">6.Dockeråå°å¯åŠ¨ä¸€ä¸ªçº¯Linuxé•œåƒ</h1><p>Dockerå¯åŠ¨é•œåƒåï¼Œå¦‚æœé•œåƒä¸­çš„ç¨‹åºä¸æ˜¯ä¸€ç›´è¿è¡Œçš„ï¼Œé‚£ä¹ˆåœ¨ç¨‹åºè¿è¡Œå®Œæˆåå®¹å™¨å°±ä¼šè‡ªåŠ¨é€€å‡ºã€‚è€Œå•çº¯çš„Linuxé•œåƒä¸­æ˜¯æ²¡æœ‰ä¸€ç›´è¿è¡Œçš„ç¨‹åºçš„ï¼Œå¦‚æœéœ€è¦åå°å¯åŠ¨ä¸€ä¸ªä¸åœæ­¢çš„Linuxé•œåƒï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªä¸åœæ­¢çš„ç¨‹åºï¼Œä¾‹å¦‚é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä½¿ç”¨<span class="hljs-built_in">tail</span> -f ä¸åœçš„æ‰“å°ä¸€ä¸ªæ—¥å¿—ï¼Œä¾‹å¦‚æ‰“å°æ—¥å¿—é»‘æ´/dev/null</span><br>docker run -d --name kylin hxsoong/kylin:v10-sp1  tail -f /dev/null<br></code></pre></td></tr></table></figure><h1 id="yumåªä¸‹è½½ä¾èµ–ä¸è¿›è¡Œå®‰è£…">7. yumåªä¸‹è½½ä¾èµ–ä¸è¿›è¡Œå®‰è£…</h1><p>æœ‰äº›æ—¶å€™ï¼Œå†…ç½‘éœ€è¦å®‰è£…æŸä¸ªRPMåŒ…ï¼Œè€Œå†…ç½‘æœåŠ¡å™¨ä¸è¿æ¥äº’è”ç½‘ï¼Œæ— æ³•ç›´æ¥ä¸‹è½½ç¼ºå¤±çš„ä¾èµ–ã€‚å¯ä»¥åœ¨Dockerä¸­å¯åŠ¨ä¸€ä¸ªç›¸åŒç‰ˆæœ¬çš„Linuxï¼Œç„¶åä¸‹è½½ç›¸å…³ä¾èµ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">yumåªä¸‹è½½ä¾èµ–ä¸è¿›è¡Œå®‰è£…ï¼šï¼ˆå°è¯•å®‰è£…aaaa.rpmï¼Œå°†éœ€è¦çš„rpmä¾èµ–ä¸‹è½½åˆ°aaaa_packagesæ–‡ä»¶å¤¹ä¸­ï¼‰</span><br>yum install --downloadonly --downloaddir=aaaa_packages aaaa.rpm<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. Dockerä¸‹è½½åŠ é€Ÿ</title>
    <link href="/2024/12/07/docker/3-Docker%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F/"/>
    <url>/2024/12/07/docker/3-Docker%E4%B8%8B%E8%BD%BD%E5%8A%A0%E9%80%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="dockerä¸‹è½½åŠ é€Ÿ">1. dockerä¸‹è½½åŠ é€Ÿ</h1><p>æ–¹å¼1ï¼šä½¿ç”¨ ç½‘æ˜“æ•°å¸†ã€é˜¿é‡Œäº‘ç­‰å®¹å™¨é•œåƒä»“åº“è¿›è¡Œä¸‹è½½ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹è½½ç½‘æ˜“æ•°å¸†é•œåƒä¸­çš„mysqlã€‚ï¼ˆç½‘æ˜“æ•°å¸†çš„åœ°å€ä¸º<code>hub.c.163.com</code>ï¼Œç½‘æ˜“æ•°å¸†å¯¹dockerhubå®˜æ–¹çš„é•œåƒå‘½åç©ºé—´ä¸º<code>library</code>ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull hub.c.163.com/library/mysql:latest<br></code></pre></td></tr></table></figure><p>æ–¹å¼2ï¼šé…ç½®é˜¿é‡Œäº‘åŠ é€Ÿã€‚</p><p>ç™»å½•é˜¿é‡Œäº‘ï¼Œè¿›å…¥ <code>å·¥ä½œå°</code> -&gt; <code>å®¹å™¨é•œåƒæœåŠ¡</code>-&gt; <code>é•œåƒå·¥å…·</code> -&gt; <code>é•œåƒåŠ é€Ÿå™¨</code>ã€‚</p><p>é‡Œé¢æä¾›äº†ä¸€ä¸ªåŠ é€Ÿå™¨åœ°å€ï¼š<code>https://xxxxx.mirror.aliyuncs.com</code>ï¼Œå°†è¯¥åœ°å€é…ç½®åˆ°dockerä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /etc/docker<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åˆæ¬¡è¿›æ¥æ—¶æ²¡æœ‰/etc/docker/daemon.jsonæ–‡ä»¶ï¼Œç›´æ¥åˆ›å»ºè¯¥æ–‡ä»¶å³å¯</span><br>vi /etc/docker/daemon.json<br></code></pre></td></tr></table></figure><p>åœ¨<code>daemon.json</code>ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼šï¼ˆå³åŠ é€Ÿå™¨åœ°å€ï¼‰</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;registry-mirrors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;https://xxxxx.mirror.aliyuncs.com&quot;</span><span class="hljs-punctuation">]</span>  <br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>ç„¶ååˆ·æ–°é…ç½®ã€é‡å¯dockerå³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">centos6 çš„å‘½ä»¤</span><br>sudo chkconfig daemon-reload<br>sudo service docker restart<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">centos7 çš„å‘½ä»¤</span><br>sudo systemctl daemon-reload<br>sudo systemctl restart docker<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼2å¯ä»¥ç›´æ¥ä¸‹è½½å®˜æ–¹çš„é•œåƒï¼Œä¸”é•œåƒtagä¸ºå®˜æ–¹tagï¼Œä¸éœ€è¦åŠ ä¸Šäº‘æœåŠ¡å•†çš„åœ°å€ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull mysql:latest<br></code></pre></td></tr></table></figure><h1 id="dockeré…ç½®ä»£ç†">2. Dockeré…ç½®ä»£ç†</h1><p>å¦‚æœä½¿ç”¨äº†ç§‘å­¦ä¸Šç½‘ï¼Œå¯ä»¥ä¸ºdockeré…ç½®ä»£ç†ã€‚</p><p>åœ¨<code>/etc/docker/daemon.json</code>æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;proxies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;http-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://127.0.0.1:7890&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä»£ç†åœ°å€</span><br>    <span class="hljs-attr">&quot;https-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://127.0.0.1:7890&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;no-proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;localhost&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. Dockerå®‰è£…</title>
    <link href="/2024/12/07/docker/2-Docker%E5%AE%89%E8%A3%85/"/>
    <url>/2024/12/07/docker/2-Docker%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h1 id="centoså®‰è£…docker">1. CentOSå®‰è£…Docker</h1><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p><h2 id="å¸è½½æ—§ç‰ˆæœ¬">1.1 å¸è½½æ—§ç‰ˆæœ¬</h2><p>å¦‚æœä¹‹å‰å®‰è£…è¿‡Dockerï¼Œéœ€è¦å…ˆå¸è½½æ—§ç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum remove docker \<br>                  docker-client \<br>                  docker-client-latest \<br>                  docker-common \<br>                  docker-latest \<br>                  docker-latest-logrotate \<br>                  docker-logrotate \<br>                  docker-engine<br></code></pre></td></tr></table></figure><blockquote><p>æ—§ç‰ˆæœ¬çš„Dockerå¼•æ“åŒ…å¯èƒ½å«åšï¼š<code>docker</code>ã€<code>docker-engine</code>ã€‚</p><p>æ–°ç‰ˆæœ¬çš„Dockerå¼•æ“åŒ…å«åšï¼š<code>docker-ce</code></p></blockquote><h2 id="yumå®‰è£…gccç›¸å…³">1.2 yumå®‰è£…gccç›¸å…³</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">sudo</span> yum -y install gcc<br><span class="hljs-built_in">sudo</span> yum -y install gcc-c++<br></code></pre></td></tr></table></figure><h2 id="é…ç½®yumèµ„æºåº“">1.3 é…ç½®yumèµ„æºåº“</h2><p>å®‰è£…<code>yum-config-manager</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">yum-utilæä¾›yum-config-manageråŠŸèƒ½</span> <br>sudo yum install -y yum-utils<br></code></pre></td></tr></table></figure><p>é…ç½®dockerçš„èµ„æºåº“åœ°å€ï¼š</p><p>å®˜æ–¹åœ°å€ï¼šï¼ˆæ¯”è¾ƒæ…¢ï¼Œä¸æ¨èï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">åœ¨yumèµ„æºåº“ä¸­æ·»åŠ dockerèµ„æºåº“</span><br>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<br></code></pre></td></tr></table></figure><p>é˜¿é‡Œäº‘é•œåƒåœ°å€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<br></code></pre></td></tr></table></figure><blockquote><p>é˜¿é‡Œäº‘å®˜ç½‘æä¾›äº†å¾ˆå¤šèµ„æºé•œåƒï¼Œé•œåƒåœ°å€ï¼š<code>https://mirrors.aliyun.com</code>ï¼Œè¿›å…¥ä¹‹åå¯ä»¥é€‰æ‹©è‡ªå·±éœ€è¦çš„èµ„æºè¿›è¡Œé…ç½®</p></blockquote><p>åˆ›å»ºç¼“å­˜ï¼ˆå¯é€‰ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum makecache fast<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…dockerå¼•æ“">1.4 å®‰è£…Dockerå¼•æ“</h2><p>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Dockerå¼•æ“ã€Dockerå®¢æˆ·ç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">docker-ceæ˜¯Dockerå¼•æ“ï¼Œdocker-ce-cliæ˜¯å®¢æˆ·ç«¯</span><br>sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œé»˜è®¤å®‰è£…çš„dockerå¼•æ“ã€å®¢æˆ·ç«¯éƒ½æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚</p><p>å¦‚æœè¦å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥è¯¢ç‰ˆæœ¬åˆ—è¡¨</span><br>yum list docker-ce --showduplicates | sort -r<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŒ‡å®šç‰ˆæœ¬å®‰è£…17.09.0.ceç‰ˆ</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">sudo</span> yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io docker-compose-plugin</span><br>sudo yum install docker-ce-17.09.0.ce docker-ce-cli-17.09.0.ce containerd.io docker-compose-plugin<br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨dockerå¼•æ“">1.5 å¯åŠ¨dockerå¼•æ“</h2><p>å¦‚æœæ²¡æœ‰å¯åŠ¨Dockerå¼•æ“ï¼Œé‚£ä¹ˆæ‰§è¡Œ<code>docker version</code>æŸ¥çœ‹ç‰ˆæœ¬å·æ—¶ï¼Œåªèƒ½çœ‹åˆ°<code>Client: Docker Engine</code>ï¼ˆDockerå¼•æ“å®¢æˆ·ç«¯ï¼‰çš„ç‰ˆæœ¬å·ã€‚</p><p>å¯åŠ¨Dockerå¼•æ“ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ–°ç‰ˆæœ¬çš„Dockerå°±æ˜¯ä¸€ä¸ªç³»ç»ŸæœåŠ¡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¯åŠ¨ç³»ç»ŸæœåŠ¡æ–¹å¼å¯åŠ¨</span><br>systemctl start docker<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ­¤æ—¶æŸ¥çœ‹dockerç‰ˆæœ¬ï¼Œå¯ä»¥çœ‹åˆ°Server: Docker Engineï¼ˆDockerå¼•æ“ï¼‰ç‰ˆæœ¬å·</span><br>docker version<br></code></pre></td></tr></table></figure><h1 id="å¸è½½docker">2. å¸è½½Docker</h1><p>å¸è½½Dockeræ­¥éª¤ï¼š</p><ol type="1"><li>å…³é—­æœåŠ¡</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl stop docker<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>yum</code>åˆ é™¤dockerå¼•æ“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo yum remove docker-ce docker-ce-cli containerd.io<br></code></pre></td></tr></table></figure><p>åˆ é™¤é•œåƒã€å®¹å™¨ã€å·ã€è‡ªå®šä¹‰é…ç½®ç­‰æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo rm -rf /var/lib/docker<br>sudo rm -rf /var/lib/containerd<br></code></pre></td></tr></table></figure><h1 id="è¿è¡Œhelloworldæµ‹è¯•">3. è¿è¡ŒHelloWorldæµ‹è¯•</h1><p>è¿è¡ŒHelloWorldï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run hello-world<br></code></pre></td></tr></table></figure><p>å¦‚æœæŠ¥é”™ï¼Œé‚£ä¹ˆçœ‹æ­¤ç½‘é¡µè§£å†³é—®é¢˜ã€‚<a href="https://www.cnblogs.com/gnuorg/p/18570325">Docker/DockerHubå›½å†…é•œåƒæº/åŠ é€Ÿåˆ—è¡¨ï¼ˆ12æœˆ3æ—¥æ›´æ–°-é•¿æœŸç»´æŠ¤ï¼‰ - gnuorg - åšå®¢å›­</a></p><p>å°†ç½‘å€æ›¿æ¢ä¸ºå¯ç”¨çš„é•œåƒåœ°å€ï¼Œè°¢è°¢å–µï¼</p><h1 id="ubuntuå®‰è£…docker">4. Ubuntuå®‰è£…Docker</h1><h2 id="å¸è½½æ—§ç‰ˆæœ¬-1">å¸è½½æ—§ç‰ˆæœ¬</h2><p>å¸è½½æ—§ç‰ˆæœ¬Dockerï¼ˆå¦‚æœå·²ç»å®‰è£…ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get remove docker docker-engine docker.io containerd runc<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</h2><p>å®‰è£…å¿…è¦çš„ä¾èµ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get update<br>sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ dockerè½¯ä»¶æº">æ·»åŠ dockerè½¯ä»¶æº</h2><p>å®˜ç½‘æºï¼š(ä¸æ¨èï¼Œå¯èƒ½ä¼šè¿ä¸ä¸ŠæŠ¥é”™)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å¯¼å…¥æºä»“åº“çš„ GPG key</span><br>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å°† Docker APT è½¯ä»¶æºæ·»åŠ åˆ°ä½ çš„ç³»ç»Ÿ</span><br>sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot;<br></code></pre></td></tr></table></figure><p>é˜¿é‡Œäº‘æºï¼ˆæ¨èï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ·»åŠ Docker GPGå¯†é’¥</span><br>curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ·»åŠ Dockerè½¯ä»¶æºä¿¡æ¯</span><br>echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null<br></code></pre></td></tr></table></figure><h2 id="å®‰è£…docker">å®‰è£…docker</h2><p>æ›´æ–°è½¯ä»¶æºå¹¶å®‰è£…Dockerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get update<br>sudo apt-get install docker-ce docker-ce-cli containerd.io<br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨å¹¶æµ‹è¯•docker">å¯åŠ¨å¹¶æµ‹è¯•Docker</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo systemctl start docker<br>sudo docker run hello-world<br></code></pre></td></tr></table></figure><h1 id="ç¦»çº¿å®‰è£…">ç¦»çº¿å®‰è£…</h1><h2 id="ä¸‹è½½å®‰è£…">ä¸‹è½½å®‰è£…</h2><p>ä»dockerå®˜ç½‘ï¼ˆæˆ–è€…å›½å†…é•œåƒç«™ï¼‰ä¸‹è½½å¯¹åº”linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼Œä¾‹å¦‚<a href="https://mirrors.ustc.edu.cn/docker-ce/linux/static/stable/x86_64/docker-27.0.3.tgz">docker-27.0.3.tgz</a>ã€‚</p><p>å°†å®‰è£…åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè§£å‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -zxvf docker-27.0.3.tgz<br></code></pre></td></tr></table></figure><p>è§£å‹å‡ºæ¥çš„æ–‡ä»¶çš„æ‰€æœ‰è€…å¯èƒ½ä¸æ˜¯rootï¼Œä¿®æ”¹ä¸ºrootç”¨æˆ·ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chown -R root:root docker/<br></code></pre></td></tr></table></figure><p>å°†è§£å‹çš„æ–‡ä»¶ç§»åŠ¨åˆ°<code>/usr/bin</code>ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">\cp -f docker/* /usr/bin<br></code></pre></td></tr></table></figure><p>å¯åŠ¨æµ‹è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">dockerd<br></code></pre></td></tr></table></figure><h2 id="é…ç½®æˆç³»ç»ŸæœåŠ¡">é…ç½®æˆç³»ç»ŸæœåŠ¡</h2><p>å°†dockeræ·»åŠ åˆ°systemdï¼š</p><blockquote><p>ç¼–è¾‘æ–‡ä»¶<code>/usr/lib/systemd/system/docker.service</code>ã€‚</p><p>æ–‡ä»¶å†…å®¹å‚è€ƒï¼š<a href="https://github.com/docker-archive/docker-ce/blob/master/components/engine/contrib/init/systemd/docker.service">githubçš„docker-ceå®˜æ–¹æ–‡æ¡£</a></p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">[Unit]</span><br><span class="hljs-attr">Description</span>=<span class="hljs-string">Docker Application Container Engine</span><br><span class="hljs-attr">Documentation</span>=<span class="hljs-string">https://docs.docker.com</span><br><span class="hljs-attr">After</span>=<span class="hljs-string">network-online.target docker.socket firewalld.service </span><br><span class="hljs-attr">Wants</span>=<span class="hljs-string">network-online.target </span><br><span class="hljs-attr">Requires</span>=<span class="hljs-string">docker.socket</span><br><br><span class="hljs-attr">[Service]</span><br><span class="hljs-attr">Type</span>=<span class="hljs-string">notify</span><br><span class="hljs-attr">ExecStart</span>=<span class="hljs-string">/usr/bin/dockerd</span><br><span class="hljs-attr">ExecReload</span>=<span class="hljs-string">/bin/kill -s HUP $MAINPID</span><br><span class="hljs-attr">TimeoutStartSec</span>=<span class="hljs-string">0</span><br><span class="hljs-attr">RestartSec</span>=<span class="hljs-string">2</span><br><span class="hljs-attr">Restart</span>=<span class="hljs-string">always</span><br><br><span class="hljs-attr">StartLimitBurst</span>=<span class="hljs-string">3</span><br><span class="hljs-attr">StartLimitInterval</span>=<span class="hljs-string">60s</span><br><span class="hljs-attr">LimitNOFILE</span>=<span class="hljs-string">infinity</span><br><span class="hljs-attr">LimitNPROC</span>=<span class="hljs-string">infinity</span><br><span class="hljs-attr">LimitCORE</span>=<span class="hljs-string">infinity</span><br><br><span class="hljs-attr">TasksMax</span>=<span class="hljs-string">infinity</span><br><br><span class="hljs-attr">Delegate</span>=<span class="hljs-string">yes</span><br><br><span class="hljs-attr">KillMode</span>=<span class="hljs-string">process</span><br><span class="hljs-attr">OOMScoreAdjust</span>=<span class="hljs-string">-500</span><br><br><span class="hljs-attr">[Install]</span><br><span class="hljs-attr">WantedBy</span>=<span class="hljs-string">multi-user.target</span><br></code></pre></td></tr></table></figure><p>ä¸º<code>docker.service</code>æ·»åŠ æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod +x /usr/lib/systemd/system/docker.service<br></code></pre></td></tr></table></figure><h2 id="é…ç½®docker">é…ç½®docker</h2><p>åˆ›å»º<code>docker</code>ç»„ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">groupadd docker<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘<code>daemon.json</code>é…ç½®æ–‡ä»¶ï¼š</p><blockquote><p>æ–‡ä»¶ï¼š<code>/etc/docker/daemon.json</code></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// è¿˜å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½®åŠ é€Ÿå™¨ã€é•œåƒä»“åº“åœ°å€ç­‰</span><br>    <span class="hljs-attr">&quot;insecure-registries&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-comment">// é…ç½®ä¸éªŒè¯httpsè¯ä¹¦ã€å…è®¸httpè¿æ¥</span><br>        <span class="hljs-string">&quot;192.168.xxx.xxx:8088&quot;</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;data-root&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/data/docker&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;log-driver&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;json-file&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;log-opts&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;max-size&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;200m&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;max-file&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;3&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>é‡è½½é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl daemon-reload<br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨dockerå¹¶è®¾ç½®å¼€æœºè‡ªå¯">å¯åŠ¨dockerå¹¶è®¾ç½®å¼€æœºè‡ªå¯</h2><p>å¯åŠ¨dockerï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl start docker<br></code></pre></td></tr></table></figure><p>è®¾ç½®å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl enable docker<br></code></pre></td></tr></table></figure><p>æ£€éªŒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker version<br></code></pre></td></tr></table></figure><h2 id="é…ç½®å‘½ä»¤è‡ªåŠ¨è¡¥å…¨">é…ç½®å‘½ä»¤è‡ªåŠ¨è¡¥å…¨</h2><p>ä»dockerçš„githubå®˜æ–¹ä»“åº“è·å–å‘½ä»¤è¡¥å…¨çš„æ–‡ä»¶ï¼š<a href="https://github.com/docker-archive/docker-ce/blob/master/components/cli/contrib/completion/bash/docker">docker</a></p><p>å°†è¯¥æ–‡ä»¶æ”¾åˆ°<code>/usr/share/bash-completion/completions</code>ï¼Œå¯ç”¨è¯¥æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">source /usr/share/bash-completion/completions/docker<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. Dockeræ¦‚è¿°</title>
    <link href="/2024/12/07/docker/1-Docker%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/12/07/docker/1-Docker%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="dockerç®€ä»‹">1. Dockerç®€ä»‹</h1><p>Dockeræ˜¯åŸºäºGoè¯­è¨€å®ç°çš„äº‘å¼€æºé¡¹ç›®ã€‚</p><p>Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯ï¼š<code>Build, Ship and Run Any App, Anywhere</code>ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPåŠå…¶è¿è¡Œç¯å¢ƒèƒ½åšåˆ°<strong>ä¸€æ¬¡é•œåƒ,å¤„å¤„è¿è¡Œ</strong>ã€‚</p><h1 id="ä¼ ç»Ÿè™šæ‹Ÿæœºå’Œå®¹å™¨">2. ä¼ ç»Ÿè™šæ‹Ÿæœºå’Œå®¹å™¨</h1><ol type="1"><li>ä¼ ç»Ÿè™šæ‹Ÿæœºï¼ˆvirtual machineï¼‰ï¼š</li></ol><p>ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯åŸºäºå®‰è£…åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸Šçš„è™šæ‹Ÿæœºç®¡ç†ç³»ç»Ÿï¼ˆå¦‚VirtualBoxã€VMwareç­‰ï¼‰ï¼Œåˆ›å»ºè™šæ‹Ÿæœºï¼ˆè™šæ‹Ÿå‡ºå„ç§ç¡¬ä»¶ï¼‰ï¼Œåœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…ä»æ“ä½œç³»ç»Ÿï¼Œåœ¨ä»æ“ä½œç³»ç»Ÿä¸­å®‰è£…éƒ¨ç½²å„ç§åº”ç”¨ã€‚</p><p>ç¼ºç‚¹ï¼šèµ„æºå ç”¨å¤šã€å†—ä½™æ­¥éª¤å¤šã€å¯åŠ¨æ…¢</p><ol start="2" type="1"><li>Linuxå®¹å™¨ï¼ˆLinux Containerï¼Œç®€ç§°LXCï¼‰ï¼š</li></ol><p>Linuxå®¹å™¨æ˜¯ä¸ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†åˆ†éš”å¼€çš„ä¸€ç³»åˆ—è¿›ç¨‹ï¼Œä»å¦ä¸€ä¸ªé•œåƒè¿è¡Œï¼Œå¹¶ç”±è¯¥é•œåƒæä¾›æ”¯æŒè¿›ç¨‹æ‰€éœ€çš„å…¨éƒ¨æ–‡ä»¶ã€‚å®¹å™¨æä¾›çš„é•œåƒåŒ…å«äº†åº”ç”¨çš„æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå› è€Œåœ¨ä»å¼€å‘åˆ°æµ‹è¯•å†åˆ°ç”Ÿäº§çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®ƒéƒ½å…·æœ‰å¯ç§»æ¤æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>Linuxå®¹å™¨ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚æœ‰äº†å®¹å™¨ï¼Œå°±å¯ä»¥å°†è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰èµ„æºæ‰“åŒ…åˆ°ä¸€ä¸ªéš”ç¦»çš„å®¹å™¨ä¸­ã€‚å®¹å™¨ä¸è™šæ‹Ÿæœºä¸åŒï¼Œä¸éœ€è¦æ†ç»‘ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿï¼Œåªéœ€è¦è½¯ä»¶å·¥ä½œæ‰€éœ€çš„åº“èµ„æºå’Œè®¾ç½®ã€‚ç³»ç»Ÿå› æ­¤è€Œå˜å¾—é«˜æ•ˆè½»é‡å¹¶ä¿è¯éƒ¨ç½²åœ¨ä»»ä½•ç¯å¢ƒä¸­çš„è½¯ä»¶éƒ½èƒ½å§‹ç»ˆå¦‚ä¸€çš„è¿è¡Œã€‚</p><p><img src="/2024/12/07/docker/1-Docker%E6%A6%82%E8%BF%B0/1652093324480-073374a2-4ce3-4a56-932b-5a73329736a2.jpeg"></p><p>å¯¹æ¯”ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>å®¹å™¨</th><th>è™šæ‹Ÿæœº</th></tr></thead><tbody><tr><td>å¯åŠ¨</td><td>ç§’çº§</td><td>åˆ†é’Ÿçº§</td></tr><tr><td>å¤§å°</td><td>ä¸€èˆ¬ä¸ºMb</td><td>ä¸€èˆ¬ä¸ºGb</td></tr><tr><td>é€Ÿåº¦</td><td>æ¥è¿‘åŸç”Ÿ</td><td>æ¯”è¾ƒæ…¢</td></tr><tr><td>ç³»ç»Ÿæ”¯æŒæ•°é‡</td><td>å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨</td><td>ä¸€èˆ¬å‡ åä¸ª</td></tr></tbody></table><h1 id="dockerè¿è¡Œé€Ÿåº¦å¿«çš„åŸå› ">3. Dockerè¿è¡Œé€Ÿåº¦å¿«çš„åŸå› </h1><ol type="1"><li>Dockeræœ‰æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ï¼š</li></ol><p>ç”±äºDockerä¸éœ€è¦Hypervisorï¼ˆè™šæ‹Ÿæœºï¼‰å®ç°ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–ï¼Œè¿è¡Œåœ¨Dockerå®¹å™¨ä¸Šçš„ç¨‹åºç›´æ¥ä½¿ç”¨çš„éƒ½æ˜¯å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æºï¼Œå› æ­¤åœ¨CPUã€å†…å­˜åˆ©ç”¨ç‡ä¸Šdockeræœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚</p><ol start="2" type="1"><li>Dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œè€Œä¸éœ€è¦åŠ è½½æ“ä½œç³»ç»ŸOSå†…æ ¸ï¼š</li></ol><p>å½“æ–°å»ºä¸€ä¸ªå®¹å™¨æ—¶ï¼ŒDockerä¸éœ€è¦å’Œè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ã€‚è¿›è€Œé¿å…å¼•å¯»ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸è¿”å›ç­‰æ¯”è¾ƒè€—æ—¶è€—èµ„æºçš„è¿‡ç¨‹ã€‚å½“æ–°å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œè™šæ‹Ÿæœºè½¯ä»¶éœ€è¦åŠ è½½OSï¼Œè¿”å›æ–°å»ºè¿‡ç¨‹æ˜¯åˆ†é’Ÿçº§åˆ«çš„ã€‚è€ŒDockerç”±äºç›´æ¥åˆ©ç”¨å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œåˆ™çœç•¥äº†è¿”å›è¿‡ç¨‹ï¼Œå› æ­¤æ–°å»ºä¸€ä¸ªdockerå®¹å™¨åªéœ€è¦å‡ ç§’é’Ÿã€‚</p><ol start="3" type="1"><li>Dockerå®¹å™¨çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚</li></ol><h1 id="dockerè½¯ä»¶">4. Dockerè½¯ä»¶</h1><p>Dockerå¹¶éä¸€ä¸ªé€šç”¨çš„å®¹å™¨å·¥å…·ï¼Œå®ƒä¾èµ–äºå·²ç»å­˜åœ¨å¹¶è¿è¡Œçš„Linuxå†…æ ¸ç¯å¢ƒã€‚ï¼ˆåœ¨Windowsä¸Šå®‰è£…Dockeræ—¶éœ€è¦ä¾èµ–WLSï¼Œä¹Ÿå³Windowsä¸‹çš„Linuxå­ç³»ç»Ÿï¼‰ã€‚</p><p>Dockerå®è´¨ä¸Šæ˜¯åœ¨å·²ç»è¿è¡Œçš„Linuxä¸‹åˆ¶é€ äº†ä¸€ä¸ªéš”ç¦»çš„æ–‡ä»¶ç¯å¢ƒï¼Œå› æ­¤å®ƒæ‰§è¡Œçš„æ•ˆç‡å‡ ä¹ç­‰åŒäºæ‰€éƒ¨ç½²çš„Linuxä¸»æœºã€‚</p><p>Dockerçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼š</p><ul><li>é•œåƒï¼ˆimageï¼‰</li><li>å®¹å™¨ï¼ˆcontainerï¼‰</li><li>ä»“åº“ï¼ˆrepositoryï¼‰</li></ul><h2 id="dockeré•œåƒ">4.1 Dockeré•œåƒ</h2><p>Dockeré•œåƒå°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»ºDockerå®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨ã€‚</p><h2 id="dockerå®¹å™¨">4.2 Dockerå®¹å™¨</h2><p>Dockeråˆ©ç”¨å®¹å™¨ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œåº”ç”¨ç¨‹åºæˆ–æœåŠ¡è¿è¡Œåœ¨å®¹å™¨é‡Œé¢ï¼Œå®¹å™¨å°±ç±»ä¼¼äºä¸€ä¸ªè™šæ‹ŸåŒ–çš„è¿è¡Œç¯å¢ƒï¼Œå®¹å™¨æ˜¯ç”¨é•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚</p><h2 id="dockerä»“åº“">4.3 Dockerä»“åº“</h2><p>Dockerä»“åº“æ˜¯é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚</p><p>ä»“åº“åˆ†ä¸ºå…¬å¼€ä»“åº“å’Œç§æœ‰ä»“åº“ä¸¤ç§ã€‚</p><p>æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯Dockerå®˜æ–¹çš„Docker Hubï¼š<a href="https://hub.docker.com/">https://hub.docker.com/</a></p><h1 id="dockeræ¶æ„">Dockeræ¶æ„</h1><p>Dockeræ˜¯ä¸€ä¸ª C/Sï¼ˆClient-Serverï¼‰ç»“æ„çš„ç³»ç»Ÿï¼Œåç«¯æ˜¯ä¸€ä¸ªæ¾è€¦åˆæ¶æ„ï¼Œä¼—å¤šæ¨¡å—å„å¸å…¶èŒã€‚</p><p>Dockerå®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šï¼Œç„¶åé€šè¿‡Socketè¿æ¥ä»å®¢æˆ·ç«¯è®¿é—®ï¼Œå®ˆæŠ¤è¿›ç¨‹ä»å®¹å™¨æ¥æ”¶å‘½ä»¤å¹¶ç®¡ç†è¿è¡Œåœ¨ä¸»æœºä¸Šçš„å®¹å™¨ã€‚</p><p><img src="/2024/12/07/docker/1-Docker%E6%A6%82%E8%BF%B0/1652093339897-20255a0a-e981-43e3-9e9e-654b8da3b2c8.svg"></p><p>Dockerè¿è¡Œçš„åŸºæœ¬æµç¨‹ä¸ºï¼š</p><ol type="1"><li>ç”¨æˆ·æ˜¯ä½¿ç”¨Docker Client ä¸ Docker Daemonå»ºç«‹é€šä¿¡ï¼Œå¹¶å‘é€è¯·æ±‚ç»™åè€…</li><li>Docker Daemon ä½œä¸º Docker æ¶æ„çš„ä¸»ä½“éƒ¨åˆ†ï¼Œé¦–å…ˆæä¾› Docker Serverçš„åŠŸèƒ½ä½¿å…¶å¯ä»¥æ¥æ”¶ Docker Client çš„è¯·æ±‚</li><li>Docker Engine æ‰§è¡Œ Docker å†…éƒ¨çš„ä¸€ç³»åˆ—å·¥ä½œï¼Œæ¯ä¸€é¡¹å·¥ä½œéƒ½æ˜¯ä»¥ä¸€ä¸ª Jobçš„å½¢å¼å­˜åœ¨</li><li>Job çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“éœ€è¦å®¹å™¨é•œåƒæ—¶ï¼Œåˆ™ä» Docker Registryä¸­ä¸‹è½½é•œåƒï¼Œå¹¶é€šè¿‡é•œåƒç®¡ç†é©±åŠ¨ Graph Driver å°†ä¸‹è½½é•œåƒä»¥ Graphçš„å½¢å¼å­˜å‚¨</li><li>å½“éœ€è¦ä¸º Docker åˆ›å»ºç½‘ç»œç¯å¢ƒæ—¶ï¼Œé€šè¿‡ç½‘ç»œç®¡ç†é©±åŠ¨ Network driveråˆ›å»ºå¹¶é…ç½® Docker å®¹å™¨ç½‘ç»œç¯å¢ƒ</li><li>å½“éœ€è¦é™åˆ¶ Docker å®¹å™¨è¿è¡Œèµ„æºæˆ–æ‰§è¡Œç”¨æˆ·æŒ‡ä»¤ç­‰æ“ä½œæ—¶ï¼Œåˆ™é€šè¿‡ Execdriver æ¥å®Œæˆ</li><li>Libcontainer æ˜¯ä¸€é¡¹ç‹¬ç«‹çš„å®¹å™¨ç®¡ç†åŒ…ï¼ŒNetwork driver ä»¥åŠ Exec driveréƒ½æ˜¯é€šè¿‡ Libcontainer æ¥å®ç°å…·ä½“å¯¹å®¹å™¨è¿›è¡Œçš„æ“ä½œ</li></ol><p><img src="/2024/12/07/docker/1-Docker%E6%A6%82%E8%BF%B0/1652093347909-4fcf65d1-da12-47cb-9a2f-0c4528d7e4c9.png"></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>å®¹å™¨</category>
      
      <category>Docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ</title>
    <link href="/2024/12/07/Redis/16-%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <url>/2024/12/07/Redis/16-%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¼“å­˜é¢„çƒ­">ç¼“å­˜é¢„çƒ­</h1><p>ç°è±¡ï¼šæœåŠ¡å™¨å¯åŠ¨åå¿«é€Ÿå®•æœº</p><p>é—®é¢˜æ’æŸ¥ï¼š</p><ul><li>è¯·æ±‚æ•°é‡è¾ƒé«˜</li><li>ä¸»ä»ä¹‹é—´æ•°æ®ååé‡è¾ƒå¤§ï¼Œæ•°æ®åŒæ­¥æ“ä½œé¢‘åº¦è¾ƒé«˜</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><p>å‰ç½®å‡†å¤‡å·¥ä½œï¼š</p><ol type="1"><li>æ—¥å¸¸ä¾‹è¡Œç»Ÿè®¡æ•°æ®è®¿é—®è®°å½•ï¼Œç»Ÿè®¡è®¿é—®é¢‘åº¦è¾ƒé«˜çš„çƒ­ç‚¹æ•°æ®</li><li>åˆ©ç”¨LRUæ•°æ®åˆ é™¤ç­–ç•¥ï¼Œæ„å»ºæ•°æ®ç•™å­˜é˜Ÿåˆ—ã€‚ä¾‹å¦‚ï¼šstormä¸kafkaé…åˆ</li></ol><p>å‡†å¤‡å·¥ä½œï¼š</p><ol type="1"><li>å°†ç»Ÿè®¡ç»“æœä¸­çš„æ•°æ®åˆ†ç±»ï¼Œæ ¹æ®çº§åˆ«ï¼Œredisä¼˜å…ˆåŠ è½½çº§åˆ«è¾ƒé«˜çš„çƒ­ç‚¹æ•°æ®</li><li>åˆ©ç”¨åˆ†å¸ƒå¼å¤šæœåŠ¡å™¨åŒæ—¶è¿›è¡Œæ•°æ®è¯»å–ï¼Œæé€Ÿæ•°æ®åŠ è½½è¿‡ç¨‹</li></ol><p>å®æ–½ï¼š</p><ol type="1"><li>ä½¿ç”¨è„šæœ¬ç¨‹åºå›ºå®šè§¦å‘æ•°æ®é¢„çƒ­è¿‡ç¨‹</li><li>å¦‚æœæ¡ä»¶å…è®¸ï¼Œä½¿ç”¨CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰æ•ˆæœæ›´å¥½</li></ol><p>æ€»ç»“ï¼š</p><p>ç¼“å­˜é¢„çƒ­å°±æ˜¯ç³»ç»Ÿå¯åŠ¨å‰ï¼Œæå‰å°†ç›¸å…³çš„ç¼“å­˜æ•°æ®ç›´æ¥åŠ è½½åˆ°ç¼“å­˜ç³»ç»Ÿã€‚é¿å…åœ¨ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå†å°†æ•°æ®ç¼“å­˜çš„é—®é¢˜ã€‚ç”¨æˆ·ç›´æ¥æŸ¥è¯¢äº‹å…ˆè¢«é¢„çƒ­çš„ç¼“å­˜æ•°æ®ã€‚</p><h1 id="ç¼“å­˜é›ªå´©">ç¼“å­˜é›ªå´©</h1><p>ç°è±¡ï¼šæ•°æ®åº“æœåŠ¡å™¨å´©æºƒ</p><ol type="1"><li>ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿½ç„¶æ•°æ®åº“è¿æ¥é‡æ¿€å¢</li><li>åº”ç”¨æœåŠ¡å™¨æ— æ³•åŠæ—¶å¤„ç†è¯·æ±‚</li><li>å¤§é‡408/500é”™è¯¯é¡µé¢å‡ºç°</li><li>å®¢æˆ·åå¤åˆ·æ–°é¡µé¢è·å–æ•°æ®</li><li>æ•°æ®åº“å´©æºƒ</li><li>åº”ç”¨æœåŠ¡å™¨å´©æºƒ</li><li>é‡å¯åº”ç”¨æœåŠ¡å™¨æ— æ•ˆ</li><li>RedisæœåŠ¡å™¨å´©æºƒ</li><li>Redisé›†ç¾¤å´©æºƒ</li><li>é‡å¯æ•°æ®åº“åå†æ¬¡è¢«ç¬é—´æµé‡æ”¾å€’</li></ol><p>é—®é¢˜æ’æŸ¥ï¼š</p><ol type="1"><li>åœ¨ä¸€ä¸ªè¾ƒçŸ­çš„æ—¶é—´å†…ï¼Œç¼“å­˜ä¸­è¾ƒå¤šçš„keyé›†ä¸­è¿‡æœŸ</li><li>æ­¤å‘¨æœŸå†…è¯·æ±‚è®¿é—®è¿‡æœŸçš„æ•°æ®ï¼Œredisæœªå‘½ä¸­ï¼Œrediså‘æ•°æ®åº“è·å–æ•°æ®</li><li>æ•°æ®åº“åŒæ—¶æ¥æ”¶åˆ°å¤§é‡çš„è¯·æ±‚æ— æ³•åŠæ—¶å¤„ç†</li><li>Rediså¤§é‡è¯·æ±‚è¢«ç§¯å‹ï¼Œå¼€å§‹å‡ºç°è¶…æ—¶ç°è±¡</li><li>æ•°æ®åº“æµé‡æ¿€å¢ï¼Œæ•°æ®åº“å´©æºƒ</li><li>é‡å¯åä»é¢å¯¹èŠ±å¥´æ‰èƒ½ä¸­æ— æ•°æ®å¯ç”¨</li><li>RedisæœåŠ¡å™¨èµ„æºè¢«ä¸¥é‡å ç”¨ï¼ŒRedisæœåŠ¡å™¨å´©æºƒ</li><li>Redisé›†ç¾¤å‘ˆç°å´©å¡Œï¼Œé›†ç¾¤ç“¦è§£</li><li>åº”ç”¨æœåŠ¡å™¨æ— æ³•åŠæ—¶å¾—åˆ°æ•°æ®å“åº”è¯·æ±‚ï¼Œæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨æœåŠ¡å™¨å´©æºƒ</li><li>åº”ç”¨æœåŠ¡å™¨ã€Redisã€æ•°æ®åº“å…¨éƒ¨é‡å¯ï¼Œæ•ˆæœä¸ç†æƒ³</li></ol><p>è§£å†³æ–¹æ¡ˆï¼ˆåŸç†ä¸Šï¼‰ï¼š</p><ol type="1"><li>æ›´å¤šçš„é¡µé¢é™æ€åŒ–å¤„ç†</li><li>æ„å»ºå¤šçº§ç¼“å­˜æ¶æ„ï¼šNginxç¼“å­˜ + Redisç¼“å­˜ + Ehcacheç¼“å­˜</li><li>æ£€æµ‹æ•°æ®åº“ä¸¥é‡è€—æ—¶ä¸šåŠ¡è¿›è¡Œä¼˜åŒ–ï¼šå¯¹æ•°æ®çš„ç“¶é¢ˆæ’æŸ¥ï¼Œä¾‹å¦‚è¶…æ—¶æŸ¥è¯¢ã€è€—æ—¶è¾ƒé«˜äº‹åŠ¡ç­‰</li><li>ç¾éš¾é¢„è­¦æœºåˆ¶ï¼Œç›‘æ§RedisæœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡ï¼šCPUå ç”¨ã€CPUä½¿ç”¨ç‡ã€å†…å­˜å®¹é‡ã€æŸ¥è¯¢å¹³å‡å“åº”æ—¶é—´ã€çº¿ç¨‹æ•°</li><li>é™æµã€é™çº§ï¼šçŸ­æ—¶é—´èŒƒå›´å†…ç‰ºç‰²ä¸€äº›å®¢æˆ·ä½“éªŒï¼Œé™åˆ¶ä¸€éƒ¨åˆ†è¯·æ±‚è®¿é—®ï¼Œé™ä½åº”ç”¨æœåŠ¡å™¨å‹åŠ›ï¼Œå¾…ä¸šåŠ¡ä½é€Ÿè¿è½¬åå†é€æ­¥æ”¾å¼€è®¿é—®</li></ol><p>è§£å†³æ–¹æ¡ˆï¼ˆå®æ–½ä¸Šï¼‰ï¼š</p><ol type="1"><li>LRUä¸LFUåˆ‡æ¢</li><li>æ•°æ®æœ‰æ•ˆæœŸç­–ç•¥è°ƒæ•´<ul><li>æ ¹æ®ä¸šåŠ¡æ•°æ®æœ‰æ•ˆæœŸè¿›è¡Œåˆ†ç±»é”™å³°</li><li>è¿‡æœŸæ—¶é—´ä½¿ç”¨ <code>å›ºå®šæ—¶é—´ + éšæœºå€¼</code>çš„å½¢å¼ï¼Œç¨€é‡Šé›†ä¸­åˆ°æœŸçš„keyçš„æ•°é‡</li></ul></li><li>è¶…çƒ­æ•°æ®ä½¿ç”¨æ°¸ä¹…key</li><li>å®šæœŸç»´æŠ¤ï¼ˆè‡ªåŠ¨+äººå·¥ï¼‰ï¼šå¯¹å³å°†è¿‡æœŸæ•°æ®åšè®¿é—®é‡åˆ†æï¼Œç¡®è®¤æ˜¯å¦å»¶æ—¶ï¼Œé…åˆè®¿é—®é‡ç»Ÿè®¡ï¼Œåšçƒ­ç‚¹æ•°æ®çš„å»¶æ—¶</li><li>åŠ é”ï¼ˆæ…ç”¨ï¼‰</li></ol><p>æ€»ç»“ï¼š</p><p>ç¼“å­˜é›ªå´©å°±æ˜¯ç¬é—´è¿‡æœŸæ•°æ®é‡å¤ªå¤§ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚å¦‚æœèƒ½å¤Ÿæœ‰æ•ˆé¿å…è¿‡æœŸæ—¶é—´é›†ä¸­ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³é›ªå´©ç°è±¡çš„å‡ºç°ï¼ˆçº¦40%ï¼‰ï¼Œé…åˆå…¶ä»–ç­–ç•¥ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ç›‘æ§æœåŠ¡å™¨çš„è¿è¡Œæ•°æ®ï¼Œæ ¹æ®è¿è¡Œè®°å½•åšå¿«é€Ÿè°ƒæ•´ã€‚</p><h1 id="ç¼“å­˜å‡»ç©¿">ç¼“å­˜å‡»ç©¿</h1><p>ç°è±¡ï¼šæ•°æ®åº“æœåŠ¡å´©æºƒ</p><ol type="1"><li>ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­</li><li>æ•°æ®åº“è¿æ¥é‡ç¬é—´æ¿€å¢</li><li>RedisæœåŠ¡å™¨æ²¡æœ‰å¤§é‡keyè¿‡æœŸ</li><li>Rediså†…å­˜å¹³ç¨³ï¼Œæ— æ³¢åŠ¨</li><li>RedisæœåŠ¡å™¨CPUæ­£å¸¸</li><li>æ•°æ®åº“å´©æºƒ</li></ol><p>é—®é¢˜æ’æŸ¥ï¼š</p><ol type="1"><li>Redisä¸­æŸä¸ªkeyè¿‡æœŸï¼Œè¯¥keyè®¿é—®é‡å·¨å¤§</li><li>å¤šä¸ªæ•°æ®è¯·æ±‚ä»æœåŠ¡å™¨ç›´æ¥å‹åˆ°Redisåï¼Œå‡æœªå‘½ä¸­</li><li>Redisåœ¨çŸ­æ—¶é—´å†…å‘èµ·äº†å¤§é‡å¯¹æ•°æ®åº“ä¸­åŒä¸€æ•°æ®çš„è®¿é—®</li></ol><p>é—®é¢˜åˆ†æï¼š</p><ul><li>å•ä¸ªkeyé«˜çƒ­æ•°æ®</li><li>keyè¿‡æœŸ</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ol type="1"><li>é¢„å…ˆè®¾å®š<br>ä»¥ç”µå•†ä¸ºä¾‹ï¼Œæ¯ä¸ªå•†å®¶æ ¹æ®åº—é“ºç­‰çº§ï¼ŒæŒ‡å®šè‹¥å¹²æ¬¾ä¸»æ‰“å•†å“ï¼Œåœ¨è´­ç‰©èŠ‚æœŸé—´ï¼ŒåŠ å¤§æ­¤ç±»ä¿¡æ¯keyçš„è¿‡æœŸæ—¶é•¿<br>æ³¨æ„ï¼šè´­ç‰©èŠ‚ä¸ä»…ä»…æŒ‡å½“å¤©ï¼Œä»¥åŠåç»­è‹¥å¹²å¤©ï¼Œè®¿é—®å³°å€¼å‘ˆç°é€æ¸é™ä½çš„è¶‹åŠ¿</li><li>ç°åœºè°ƒæ•´<br>ç›‘æ§è®¿é—®é‡ï¼Œå¯¹è‡ªç„¶æµé‡æ¿€å¢çš„æ•°æ®å»¶é•¿è¿‡æœŸæ—¶é—´æˆ–è®¾ç½®ä¸ºæ°¸ä¹…key</li><li>åå°åˆ·æ–°æ•°æ®<br>å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼Œé«˜å³°æœŸæ¥ä¸´ä¹‹å‰ï¼Œåˆ·æ–°æ•°æ®æœ‰æ•ˆæœŸï¼Œç¡®ä¿ä¸ä¸¢å¤±</li><li>äºŒçº§ç¼“å­˜<br>è®¾ç½®ä¸åŒçš„å¤±æ•ˆæ—¶é—´ï¼Œä¿éšœä¸ä¼šè¢«åŒæ—¶æ·˜æ±°å°±è¡Œ</li><li>åŠ é”<br>åˆ†å¸ƒå¼é”ï¼Œé˜²æ­¢è¢«å‡»ç©¿ï¼Œä½†æ˜¯è¦æ³¨æ„ä¹Ÿæ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œæ…ç”¨ã€‚</li></ol><p>æ€»ç»“ï¼š</p><p>ç¼“å­˜å‡»ç©¿å°±æ˜¯å•ä¸ªé«˜çƒ­æ•°æ®è¿‡æœŸçš„ç¬é—´ï¼Œæ•°æ®è®¿é—®é‡è¾ƒå¤§ï¼Œæœªå‘½ä¸­Redisåï¼Œå‘èµ·äº†å¤§é‡å¯¹åŒä¸€æ•°æ®çš„æ•°æ®åº“è®¿é—®ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚åº”å¯¹ç­–ç•¥åº”è¯¥åœ¨ä¸šåŠ¡æ•°æ®åˆ†æä¸é¢„é˜²æ–¹é¢è¿›è¡Œï¼Œé…åˆè¿è¡Œç›‘æ§æµ‹è¯•ä¸åŠæ—¶è°ƒæ•´ç­–ç•¥ï¼Œæ¯•ç«Ÿå•ä¸ªkeyçš„è¿‡æœŸç›‘æ§éš¾åº¦è¾ƒé«˜ï¼Œé…åˆé›ªå´©å¤„ç†ç­–ç•¥å³å¯ã€‚</p><h1 id="ç¼“å­˜ç©¿é€">ç¼“å­˜ç©¿é€</h1><p>ç°è±¡ï¼šæ•°æ®åº“æœåŠ¡å™¨å´©æºƒ</p><ol type="1"><li>ç³»ç»Ÿå¹³ç¨³è¿è¡Œè¿‡ç¨‹ä¸­</li><li>åº”ç”¨æœåŠ¡å™¨æµé‡éšæ—¶é—´å¢é‡è¾ƒå¤§</li><li>RedisæœåŠ¡å™¨å‘½ä¸­ç‡éšæ—¶é—´é€æ­¥é™ä½</li><li>Rediså†…å­˜å¹³ç¨³ï¼Œå†…å­˜æ— å‹åŠ›</li><li>RedisæœåŠ¡å™¨CPUå ç”¨æ¿€å¢</li><li>æ•°æ®åº“æœåŠ¡å™¨å‹åŠ›æ¿€å¢</li><li>æ•°æ®åº“å´©æºƒ</li></ol><p>é—®é¢˜æ’æŸ¥ï¼š</p><ol type="1"><li>Redisä¸­å¤§é¢ç§¯å‡ºç°æœªå‘½ä¸­</li><li>å‡ºç°éæ­£å¸¸URLè®¿é—®</li></ol><p>é—®é¢˜åˆ†æï¼š</p><ul><li>è·å–çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨ï¼Œæ•°æ®åº“æŸ¥è¯¢æœªå¾—åˆ°å¯¹åº”æ•°æ®</li><li>Redisè·å–åˆ°nullæ•°æ®æœªè¿›è¡ŒæŒä¹…åŒ–ï¼Œç›´æ¥è¿”å›</li><li>ä¸‹æ¬¡æ­¤ç±»æ•°æ®åˆ°è¾¾ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹</li><li>å‡ºç°é»‘å®¢æ”»å‡»æœåŠ¡å™¨</li></ul><p>è§£å†³æ–¹æ¡ˆï¼š</p><ol type="1"><li>ç¼“å­˜nullï¼šå¯¹æŸ¥è¯¢ç»“æœä¸ºNullçš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼ˆé•¿æœŸä½¿ç”¨ï¼Œå®šæœŸæ¸…ç†ï¼‰ï¼Œè®¾å®šçŸ­æ—¶é™ï¼Œä¾‹å¦‚30-60ç§’ï¼Œæœ€é«˜5åˆ†é’Ÿ</li><li>ç™½åå•ç­–ç•¥<ul><li>æå‰é¢„çƒ­å„ç§åˆ†ç±»æ•°æ®idå¯¹åº”çš„bitmapsï¼Œ idä½œä¸ºbitmapsçš„offsetï¼Œç›¸å½“äºè®¾ç½®äº†æ•°æ®ç™½åå•ã€‚å½“åŠ è½½æ­£å¸¸æ•°æ®æ—¶ï¼Œæ”¾è¡Œï¼ŒåŠ è½½å¼‚å¸¸æ•°æ®æ—¶ç›´æ¥æ‹¦æˆªï¼ˆæ•ˆç‡åä½ï¼‰</li><li>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆç¼“å­˜ç©¿é€çš„æƒ…å†µä¸‹ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„å‘½ä¸­é—®é¢˜å¯ä»¥å¿½ç•¥ï¼‰</li></ul></li><li>å®æ—¶ç›‘æ§<br>å®æ—¶ç›‘æ§Rediså‘½ä¸­ç‡ï¼ˆä¸šåŠ¡æ­£å¸¸èŒƒå›´å†…ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ªæ³¢åŠ¨å€¼ï¼‰ä¸nullæ•°æ®çš„å æ¯”<ul><li>éæ´»åŠ¨æ—¶æ®µæ³¢åŠ¨ï¼šé€šå¸¸æ£€æµ‹3-5å€ï¼Œè¶…è¿‡5å€çº³å…¥é‡ç‚¹æ’æŸ¥å¯¹è±¡</li><li>æ´»åŠ¨æ—¶æ®µæ³¢åŠ¨ï¼šé€šå¸¸æ£€æµ‹10-50å€ï¼Œè¶…è¿‡50å€çº³å…¥é‡ç‚¹æ’æŸ¥å¯¹è±¡</li></ul></li></ol><p>æ ¹æ®å€æ•°ä¸åŒï¼Œå¯åŠ¨ä¸åŒçš„æ’æŸ¥æµç¨‹ã€‚ç„¶åä½¿ç”¨é»‘åå•è¿›è¡Œé˜²æ§ï¼ˆè¿è¥ï¼‰</p><ol start="4" type="1"><li>keyåŠ å¯†<br>é—®é¢˜å‡ºç°åï¼Œä¸´æ—¶å¯åŠ¨é˜²ç¾ä¸šåŠ¡keyï¼Œå¯¹keyè¿›è¡Œä¸šåŠ¡å±‚ä¼ è¾“åŠ å¯†æœåŠ¡ï¼Œè®¾å®šæ ¡éªŒç¨‹åºï¼Œè¿‡æ¥çš„keyæ ¡éªŒã€‚<br>ä¾‹å¦‚æ¯å¤©éšæœºåˆ†é…60ä¸ªåŠ å¯†ä¸²ï¼ŒæŒ‘é€‰2åˆ°3ä¸ªï¼Œæ··æ·†åˆ°é¡µé¢æ•°æ®idä¸­ï¼Œå‘ç°è®¿é—®keyä¸æ»¡è¶³è§„åˆ™ï¼Œé©³å›æ•°æ®è®¿é—®ã€‚</li></ol><p>æ€»ç»“ï¼š</p><p>ç¼“å­˜å‡»ç©¿è®¿é—®äº†ä¸å­˜åœ¨çš„æ•°æ®ï¼Œè·³è¿‡äº†åˆæ³•æ•°æ®çš„Redisæ•°æ®ç¼“å­˜é˜¶æ®µï¼Œæ¯æ¬¡è®¿é—®æ•°æ®åº“ï¼Œå¯¼è‡´å¯¹æ•°æ®åº“æœåŠ¡å™¨é€ æˆå‹åŠ›ã€‚é€šå¸¸æ­¤ç±»æ•°æ®çš„å‡ºç°é‡æ˜¯ä¸€ä¸ªè¾ƒä½çš„å€¼ï¼Œå½“å‡ºç°æ­¤ç±»æƒ…å†µä»¥æ¯’æ”»æ¯’ï¼Œå¹¶åŠæ—¶æŠ¥è­¦ã€‚åº”å¯¹ç­–ç•¥åº”è¯¥åœ¨ä¸´æ—¶é¢„æ¡ˆé˜²èŒƒæ–¹é¢å¤šåšæ–‡ç« ã€‚</p><p>æ— è®ºæ˜¯é»‘åå•è¿˜æ˜¯ç™½åå•ï¼Œéƒ½æ˜¯å¯¹æ•´ä½“ç³»ç»Ÿçš„å‹åŠ›ï¼Œè­¦æŠ¥è§£é™¤åå°½å¿«ç§»é™¤ã€‚</p><h1 id="æ€§èƒ½æŒ‡æ ‡ç›‘æ§">æ€§èƒ½æŒ‡æ ‡ç›‘æ§</h1><h2 id="ç›‘æ§æŒ‡æ ‡">ç›‘æ§æŒ‡æ ‡</h2><ul><li>æ€§èƒ½æŒ‡æ ‡ï¼šPerformance</li><li>å†…å­˜æŒ‡æ ‡ï¼šMemory</li><li>åŸºæœ¬æ´»åŠ¨æŒ‡æ ‡ï¼šBasic activity</li><li>æŒä¹…æ€§æŒ‡æ ‡ï¼šPersistence</li><li>é”™è¯¯æŒ‡æ ‡ï¼šError</li></ul><h2 id="æ€§èƒ½æŒ‡æ ‡">æ€§èƒ½æŒ‡æ ‡</h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>latency</td><td>Rediså“åº”ä¸€ä¸ªè¯·æ±‚çš„æ—¶é—´</td></tr><tr><td>instantaneous_ops_per_sec</td><td>å¹³å‡æ¯ç§’å¤„ç†è¯·æ±‚æ€»æ•°</td></tr><tr><td>hit rate (calculated)</td><td>ç¼“å­˜å‘½ä¸­ç‡ï¼ˆè®¡ç®—å‡ºæ¥çš„ï¼‰</td></tr></tbody></table><h2 id="å†…å­˜æŒ‡æ ‡">å†…å­˜æŒ‡æ ‡</h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>used_memory</td><td>å·²ä½¿ç”¨å†…å­˜</td></tr><tr><td>mem_fragmentation_ratio</td><td>å†…å­˜ç¢ç‰‡ç‡</td></tr><tr><td>evicted_keys</td><td>ç”±äºæœ€å¤§å†…å­˜é™åˆ¶è¢«ç§»é™¤çš„keyçš„æ•°é‡</td></tr><tr><td>blocked_clients</td><td>ç”±äºBLPOPï¼ŒBRPOPï¼ŒBRPOPPUSHè€Œé˜»å¡çš„å®¢æˆ·ç«¯</td></tr></tbody></table><h2 id="åŸºæœ¬æ´»åŠ¨æŒ‡æ ‡">åŸºæœ¬æ´»åŠ¨æŒ‡æ ‡</h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>connected_clients</td><td>å®¢æˆ·ç«¯è¿æ¥æ•°</td></tr><tr><td>connected_slaves</td><td>Slaveæ•°é‡</td></tr><tr><td>master_last_io_seconds_ago</td><td>æœ€è¿‘ä¸€æ¬¡ä¸»ä»äº¤äº’ä¹‹åçš„ç§’æ•°</td></tr><tr><td>keyspace</td><td>æ•°æ®åº“ä¸­çš„keyå€¼æ€»æ•°</td></tr></tbody></table><h2 id="æŒä¹…æ€§æŒ‡æ ‡">æŒä¹…æ€§æŒ‡æ ‡</h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>rdb_last_save_time</td><td>æœ€åä¸€æ¬¡æŒä¹…åŒ–ä¿å­˜åˆ°ç£ç›˜çš„æ—¶é—´æˆ³</td></tr><tr><td>rdb_changes_since_last_save</td><td>è‡ªæœ€åä¸€æ¬¡æŒä¹…åŒ–ä»¥æ¥æ•°æ®åº“çš„æ›´æ”¹æ•°</td></tr></tbody></table><h2 id="é”™è¯¯æŒ‡æ ‡">é”™è¯¯æŒ‡æ ‡</h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>rejected_connections</td><td>ç”±äºè¾¾åˆ°maxclienté™åˆ¶è€Œè¢«æ‹’ç»çš„è¿æ¥æ•°</td></tr><tr><td>keyspace_misses</td><td>Keyå€¼æŸ¥æ‰¾å¤±è´¥ï¼ˆæ²¡æœ‰å‘½ä¸­ï¼‰æ¬¡æ•°</td></tr><tr><td>master_link_down_since_seconds</td><td>ä¸»ä»æ–­å¼€çš„æŒç»­æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰</td></tr></tbody></table><h1 id="æ€§èƒ½ç›‘æ§æ–¹å¼">æ€§èƒ½ç›‘æ§æ–¹å¼</h1><ul><li>å·¥å…·<ul><li>Cloud Insight Redis</li><li>Prometheus</li><li>Redis-stat</li><li>Redis-faina</li><li>RedisLive</li><li>zabbix</li></ul></li><li>å‘½ä»¤<ul><li>benchmark</li><li>redis cli<ul><li>monitor</li><li>slowlog</li></ul></li></ul></li></ul><p>benchmark</p><ul><li>å‘½ä»¤æ ¼å¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-benchmark [-h] [-p] [-c] [-n &lt;request&gt;] [-k]<br></code></pre></td></tr></table></figure><ul><li>ç¤ºä¾‹1</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">50ä¸ªè¿æ¥ï¼Œ10000æ¬¡è¯·æ±‚å¯¹åº”çš„æ€§èƒ½</span><br>redis-benchmark<br></code></pre></td></tr></table></figure><ul><li>ç¤ºä¾‹2</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">100ä¸ªè¿æ¥ï¼Œ5000æ¬¡è¯·æ±‚å¯¹åº”çš„æ€§èƒ½</span><br>redis-benchmark -c 100 -n 5000<br></code></pre></td></tr></table></figure><p>benchmarkå‚æ•°è¯´æ˜</p><table><thead><tr><th>åºå·</th><th>é€‰é¡¹</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>1</td><td>-h</td><td>æŒ‡å®šæœåŠ¡å™¨ä¸»æœºå</td><td>127.0.0.1</td></tr><tr><td>2</td><td>-p</td><td>æŒ‡å®šæœåŠ¡å™¨ç«¯å£å·</td><td>6379</td></tr><tr><td>3</td><td>-s</td><td>æŒ‡å®šæœåŠ¡å™¨socket</td><td></td></tr><tr><td>4</td><td>-c</td><td>æŒ‡å®šå¹¶å‘è¿æ¥æ•°</td><td>50</td></tr><tr><td>5</td><td>-n</td><td>æŒ‡å®šè¯·æ±‚æ•°</td><td>10000</td></tr><tr><td>6</td><td>-d</td><td>ä»¥å­—èŠ‚çš„å½¢å¼æŒ‡å®š set/get å€¼çš„æ•°æ®å¤§å°</td><td>2</td></tr><tr><td>7</td><td>-k</td><td>1ï¼škeep alive 0ï¼šreconnect</td><td>1</td></tr><tr><td>8</td><td>-r</td><td>set/get/incr ä½¿ç”¨éšæœºkeyï¼Œsaddä½¿ç”¨éšæœºå€¼</td><td></td></tr><tr><td>9</td><td>-P</td><td>é€šè¿‡ç®¡é“ä¼ è¾“<code>&lt;numreq&gt;</code><br>è¯·æ±‚</td><td>1</td></tr><tr><td>10</td><td>-q</td><td>å¼ºåˆ¶é€€å‡ºredisï¼Œä»…æ˜¾ç¤º query/sec å€¼</td><td></td></tr><tr><td>11</td><td>--csv</td><td>ä»¥csvæ ¼å¼è¾“å‡º</td><td></td></tr><tr><td>12</td><td>-l</td><td>ç”Ÿæˆå¾ªç¯ï¼Œæ°¸ä¹…æ€§æµ‹è¯•</td><td></td></tr><tr><td>13</td><td>-t</td><td>ä»…è¿è¡Œä»¥é€—å·åˆ†éš”çš„æµ‹è¯•å‘½ä»¤åˆ—è¡¨</td><td></td></tr><tr><td>14</td><td>-l</td><td>Idleæ¨¡å¼ï¼Œä»…æ‰“å¼€Nä¸ª idle è¿æ¥å¹¶ç­‰å¾…</td><td></td></tr></tbody></table><p>monitorå‘½ä»¤(redis-cliå®¢æˆ·ç«¯æŒ‡ä»¤)</p><ul><li>å‘½ä»¤æ ¼å¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">æ‰“å°æœåŠ¡å™¨è°ƒè¯•ä¿¡æ¯</span><br>monitor<br></code></pre></td></tr></table></figure><p>slowlogå‘½ä»¤</p><ul><li>å‘½ä»¤æ ¼å¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">slowlog [operator]<br></code></pre></td></tr></table></figure><pre><code class="hljs">- getï¼šè·å–æ…¢æŸ¥è¯¢æ—¥å¿—- lenï¼šè·å–æ…¢æŸ¥è¯¢æ—¥å¿—æ¡ç›®æ•°- resetï¼šé‡ç½®æ…¢æŸ¥è¯¢æ—¥å¿—</code></pre><ul><li>ç›¸å…³é…ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">slowlog-log-slower-than 1000 # è®¾ç½®æ…¢æŸ¥è¯¢çš„æ—¶é—´ä¸‹çº¿ï¼Œå•ä½ï¼šå¾®ç§’<br>slowlog-max-len 100 # è®¾ç½®æ…¢æŸ¥è¯¢å‘½ä»¤å¯¹åº”çš„æ—¥å¿—æ˜¾ç¤ºé•¿åº¦, å•ä½ï¼šå‘½ä»¤æ•°<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. é›†ç¾¤</title>
    <link href="/2024/12/07/Redis/15-%E9%9B%86%E7%BE%A4/"/>
    <url>/2024/12/07/Redis/15-%E9%9B%86%E7%BE%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="é›†ç¾¤æ¶æ„">é›†ç¾¤æ¶æ„</h1><p>é›†ç¾¤å°±æ˜¯ä½¿ç”¨ç½‘ç»œå°†è‹¥å¹²å°è®¡ç®—æœºè¿é€šèµ·æ¥ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„ç®¡ç†æ–¹å¼ï¼Œä½¿å…¶å¯¹å¤–å‘ˆç°å•æœºçš„æœåŠ¡æ•ˆæœã€‚</p><p>ä½œç”¨ï¼š</p><ul><li>åˆ†æ•£å•å°æœåŠ¡å™¨çš„è®¿é—®å‹åŠ›ï¼Œå®ç°è´Ÿè½½å‡è¡¡</li><li>åˆ†æ•£å•å°æœåŠ¡å™¨çš„å­˜å‚¨å‹åŠ›ï¼Œå®ç°å¯æ‰©å±•æ€§</li><li>é™ä½å•å°æœåŠ¡å™¨å®•æœºå¸¦æ¥çš„ä¸šåŠ¡ç¾éš¾</li></ul><p>é›†ç¾¤æ¶æ„çš„æ•°æ®å­˜å‚¨è®¾è®¡ï¼š<br>å…ˆå°† keyé€šè¿‡<code>CRC16(key)%16384</code>è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°çš„æ•°ç”¨æ¥ç¡®å®šè¿™ä¸ªkeyåœ¨é›†ç¾¤ä¸­å“ªå°è®¡ç®—æœºçš„å­˜å‚¨ç©ºé—´ä½ç½®ã€‚</p><p>redisä¼šå°†æ‰€æœ‰çš„å­˜å‚¨ç©ºé—´è®¡åˆ’åˆ‡å‰²æˆ16384ä»½ï¼ˆæ¯ä»½ä»£è¡¨çš„æ˜¯ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œä¸æ˜¯ä¸€ä¸ªkeyçš„ä¿å­˜ç©ºé—´ï¼Œä¸€ä¸ªå­˜å‚¨ç©ºé—´å†…å¯ä»¥æ”¾è‹¥å¹²ä¸ªkeyï¼‰ï¼Œæ¯å°ä¸»æœºä¿å­˜è‹¥å¹²ä¸ªå­˜å‚¨ç©ºé—´ã€‚</p><p>å°†keyæŒ‰ç…§è®¡ç®—å‡ºçš„ç»“æœæ”¾åˆ°å¯¹åº”çš„å­˜å‚¨ç©ºé—´ã€‚</p><p>è¿™ä¸ªå­˜å‚¨ç©ºé—´ç§°ä¸ºâ€œæ§½â€(slot)ã€‚</p><p>æ‰©å±•æ–°çš„æœºå™¨ï¼šå°†åŸæ¥æ¯å°æœåŠ¡å™¨ä¸Šçš„æ§½æ‹¿å‡ºæ¥ä¸€éƒ¨åˆ†ï¼Œæ”¾åˆ°æ‰©æ–°å¢åŠ çš„æœåŠ¡å™¨ä¸Šã€‚å¢åŠ äº†å¯æ‰©å±•æ€§ã€‚</p><p>å¦‚æœç§»é™¤ä¸€å°æœåŠ¡å™¨ï¼Œåˆ™å°†è¯¥æœåŠ¡å™¨ä¸Šçš„æ§½è¿”è¿˜ç°æœ‰çš„æœåŠ¡å™¨ä¸­ã€‚</p><p>é›†ç¾¤æ¶æ„çš„å†…éƒ¨é€šè®¯è®¾è®¡ï¼š</p><p>å„ä¸ªæœåŠ¡å™¨ä¹‹é—´ä¼šè¿›è¡Œäº’è”ï¼Œæ¯å°æœåŠ¡å™¨éƒ½ä¼šè®°å½•å…¶ä»–æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ§½ç¼–å·ï¼Œä¾¿äºåç»­æŸ¥æ‰¾ã€‚</p><p>å®¢æˆ·ç«¯å¦‚æœå‘AæœåŠ¡å™¨å‘å‡ºä¸€ä¸ªkeyï¼Œç»è¿‡<code>CRC16(key)%16384</code>è¿ç®—åå¾—å‡ºå…¶æ‰€åœ¨çš„æ§½ã€‚å¦‚æœè¯¥keyå¯¹åº”çš„æ§½å°±åœ¨AæœåŠ¡å™¨ä¸Šï¼Œåˆ™ç›´æ¥è¿”å›ã€‚å¦‚æœæœªå‘½ä¸­ï¼Œåˆ™é€šè¿‡AæœåŠ¡å™¨ä¸Šè®°å½•çš„å…¶ä»–æœåŠ¡å™¨æ§½ç¼–å·ï¼Œå¯ä»¥å¾—çŸ¥è¯¥keyæ‰€åœ¨çš„æœåŠ¡å™¨ã€è¿™æ ·å¯ä»¥ä¿è¯æœ€å¤šä¸¤æ¬¡å³å¯å‘½ä¸­ã€‚</p><h1 id="é›†ç¾¤å¼€å¯ç¤ºä¾‹">é›†ç¾¤å¼€å¯ç¤ºä¾‹</h1><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs plain">port 6379<br>daemonize no<br>dir /home/redis/data<br>dbfilename dump-6379.rdb<br>rdbcompression yes<br>rdbchecksum yes<br>save 10 2<br>appendonly yes<br>appendfsync always<br>appendfilename appendonly-6379.aof<br>bind 127.0.0.1<br>databases 16<br># ä¸éœ€è¦å†åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå¯¹åº”çš„master<br># å¢åŠ å…³äºé›†ç¾¤çš„é…ç½®<br># ä½¿èƒ½é›†ç¾¤<br>cluster-enabled yes<br># é›†ç¾¤è‡ªåŠ¨ç”Ÿæˆçš„èŠ‚ç‚¹é…ç½®æ–‡ä»¶<br>cluster-config-file nodes-6379.conf<br># èŠ‚ç‚¹è¶…æ—¶ä¸‹çº¿æ—¶é•¿<br>cluster-node-timeout 10000<br></code></pre></td></tr></table></figure><p>æ—§ç‰ˆæœ¬Rediså¯åŠ¨é›†ç¾¤ä½¿ç”¨çš„ <code>src/redis-trib.rb</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªruby è„šæœ¬ï¼Œéœ€è¦å…ˆå®‰è£…rubyï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">--replicas åé¢çš„ç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤ºï¼šä¸€ä¸ªmasterå¯¹åº”å‡ ä¸ªslaveã€‚</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">å†å¾€ååˆ—å‡ºæ‰€æœ‰çš„æœåŠ¡å™¨çš„ipã€ç«¯å£å·ã€‚redisä¼šè‡ªåŠ¨å°†å‰é¢çš„å‡ ä¸ªè®¾ç½®ä¸ºmasterï¼Œåé¢çš„è®¾ç½®ä¸ºslaveã€‚</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">åé¢åˆ—å‡ºçš„ipã€ç«¯å£å·çš„æ•°é‡ï¼Œè¦å’Œ--replilcasåçš„slave/masteræ¯”ä¾‹ å¯¹åº”èµ·æ¥ã€‚</span><br>./redis-trib.rb create --replicas 1 127.0.0.1:6379<br></code></pre></td></tr></table></figure><p>redis 5.0ä¹‹åéœ€è¦ä½¿ç”¨redis-cliå‘½ä»¤è¿›è¡Œæ›¿æ¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli --cluster create 127.0.0.1:6379 127.0.0.1:6380 127.0.0.1:6381 127.0.0.1:6382 127.0.0.1:6383 127.0.0.1:6384 --cluster-replicas 1<br></code></pre></td></tr></table></figure><p>å¯åŠ¨ä¹‹åï¼Œä¾¿ä¼šæ ¹æ®é…ç½®æ–‡ä»¶é…ç½®çš„è·¯å¾„ã€nodeæ–‡ä»¶ååœ¨å¯¹åº”æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå¯¹åº”çš„nodeèŠ‚ç‚¹æ–‡ä»¶ã€‚æ­¤æ—¶çš„nodeèŠ‚ç‚¹æ–‡ä»¶å†…åªä¿å­˜æœ¬RedisæœåŠ¡å™¨çš„ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">[redis@mycentos7 data]$ cat nodes-6379.conf <br>ddd8d8c57f7919aac742845b0a2ee8aa46f8daf0 :0@0 myself,master - 0 0 0 connected<br>vars currentEpoch 0 lastVoteEpoch 0<br></code></pre></td></tr></table></figure><p>Redisè‡ªåŠ¨åˆ†æå‡ºå‡ å°æœåŠ¡å™¨æ‰®æ¼”çš„ä¸»/ä»è§’è‰²åï¼Œä¼šæç¤ºï¼š<code>Can I set the above configuration? (type 'yes' to accept):</code></p><p>è¾“å…¥<code>yes</code>ä¹‹åï¼Œä¼šå°†è¿™äº›ä¸»ä»è§’è‰²ä¿¡æ¯ã€æ‰€æœ‰çš„èŠ‚ç‚¹ä¿¡æ¯éƒ½ä¿å­˜è¿›nodeèŠ‚ç‚¹æ–‡ä»¶ä¸­ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain">[redis@mycentos7 data]$ cat nodes-6379.conf <br>cafbf4c76fecdc705569eb4d1a841ddaa5a247e3 127.0.0.1:6381@16381 master - 0 1611830119789 3 connected 10923-16383<br>ddd8d8c57f7919aac742845b0a2ee8aa46f8daf0 127.0.0.1:6379@16379 myself,master - 0 1611830117000 1 connected 0-5460<br>c5e86db426ff6597eb6a6e37176ca5a760d34443 127.0.0.1:6380@16380 master - 0 1611830118771 2 connected 5461-10922<br>d48006559e8fdbfaafcbb2b7670e5527f50866ab 127.0.0.1:6383@16383 slave c5e86db426ff6597eb6a6e37176ca5a760d34443 0 1611830116000 2 connected<br>fa4f94fea01550d3c5368632d1a937a0d497f8e3 127.0.0.1:6382@16382 slave ddd8d8c57f7919aac742845b0a2ee8aa46f8daf0 0 1611830119000 1 connected<br>cad69dd5aa16eb6420b51b67f68dd4d04154cef5 127.0.0.1:6384@16384 slave cafbf4c76fecdc705569eb4d1a841ddaa5a247e3 0 1611830118000 3 connected<br>vars currentEpoch 6 lastVoteEpoch 0<br></code></pre></td></tr></table></figure><h1 id="ç›¸å…³é…ç½®é¡¹">ç›¸å…³é…ç½®é¡¹</h1><ul><li>è®¾ç½®åŠ å…¥clusterï¼Œæˆä¸ºå…¶ä¸­çš„èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">cluster-enabled yes|no<br></code></pre></td></tr></table></figure><ul><li>clusteré…ç½®æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶å±äºè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶å¹¶æŸ¥è¯¢æ–‡ä»¶å†…å®¹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">cluster-config-file &lt;filename&gt;<br></code></pre></td></tr></table></figure><ul><li>èŠ‚ç‚¹æœåŠ¡å“åº”è¶…æ—¶æ—¶é—´ï¼Œç”¨äºåˆ¤å®šè¯¥èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿æˆ–åˆ‡æ¢ä¸ºä»èŠ‚ç‚¹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">cluster-node-timeout &lt;milliseconds&gt;<br></code></pre></td></tr></table></figure><ul><li>masterè¿æ¥çš„slaveæœ€å°æ•°é‡</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">cluster-migration-barrier &lt;count&gt;<br></code></pre></td></tr></table></figure><h1 id="è®¾ç½®å’Œè·å–æ•°æ®">è®¾ç½®å’Œè·å–æ•°æ®</h1><p>å¦‚æœç›´æ¥ä½¿ç”¨<code>redis-cli</code>å¼€å¯å®¢æˆ·ç«¯ï¼Œä½¿ç”¨<code>set name zhangsan</code>è®¾ç½®æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šå› ä¸ºè¯¥keyå¯¹åº”çš„æ§½ä¸åœ¨å½“å‰å®¢æˆ·ç«¯è¿æ¥çš„masterä¸Šè€ŒæŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">[redis@mycentos7 ~]$ redis-cli<br>127.0.0.1:6379&gt; set name zhangsan<br># é”™è¯¯ï¼Œè¯·ç§»è‡³ä½äº6380ç«¯å£çš„5798å·æ§½è¿›è¡Œæ“ä½œ<br>(error) MOVED 5798 127.0.0.1:6380<br></code></pre></td></tr></table></figure><p>ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ä¸“é—¨çš„å‚æ•° <code>-c</code>å¼€å¯é›†ç¾¤å®¢æˆ·ç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli -c<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œé›†ç¾¤ä¾¿ä¼šè‡ªåŠ¨å°†è¯¥Keyé‡å®šå‘åˆ°å¯¹åº”çš„æœåŠ¡å™¨ä¸Šçš„æ§½ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">[redis@mycentos7 ~]$ redis-cli -c<br>127.0.0.1:6379&gt; set name zhangsan<br>-&gt; Redirected to slot [5798] located at 127.0.0.1:6380<br>OK<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨redisçš„<code>cluster nodes</code>æŒ‡ä»¤æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">127.0.0.1:6380&gt; cluster nodes<br>c5e86db426ff6597eb6a6e37176ca5a760d34443 127.0.0.1:6380@16380 myself,master - 0 1611883770000 2 connected 5461-10922<br>ddd8d8c57f7919aac742845b0a2ee8aa46f8daf0 127.0.0.1:6379@16379 master - 0 1611883769000 1 connected 0-5460<br>cafbf4c76fecdc705569eb4d1a841ddaa5a247e3 127.0.0.1:6381@16381 master - 0 1611883770213 3 connected 10923-16383<br>fa4f94fea01550d3c5368632d1a937a0d497f8e3 127.0.0.1:6382@16382 slave ddd8d8c57f7919aac742845b0a2ee8aa46f8daf0 0 1611883770000 1 connected<br>d48006559e8fdbfaafcbb2b7670e5527f50866ab 127.0.0.1:6383@16383 slave c5e86db426ff6597eb6a6e37176ca5a760d34443 0 1611883769191 2 connected<br>cad69dd5aa16eb6420b51b67f68dd4d04154cef5 127.0.0.1:6384@16384 slave cafbf4c76fecdc705569eb4d1a841ddaa5a247e3 0 1611883771234 3 connected<br></code></pre></td></tr></table></figure><h1 id="å®¢æˆ·ç«¯clusterèŠ‚ç‚¹ç›¸å…³å‘½ä»¤">å®¢æˆ·ç«¯ClusterèŠ‚ç‚¹ç›¸å…³å‘½ä»¤</h1><ul><li>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster nodes<br></code></pre></td></tr></table></figure><ul><li>è¿›å…¥ä¸€ä¸ªä»èŠ‚ç‚¹redisï¼Œåˆ‡æ¢å…¶ä¸»èŠ‚ç‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster replicate &lt;master-id&gt;<br></code></pre></td></tr></table></figure><ul><li>å‘ç°ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæ–°å¢ä¸»èŠ‚ç‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster meet ip:port<br></code></pre></td></tr></table></figure><ul><li>å¿½ç•¥ä¸€ä¸ªæ²¡æœ‰slotçš„èŠ‚ç‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster forget &lt;id&gt;<br></code></pre></td></tr></table></figure><ul><li>æ‰‹åŠ¨æ•…éšœè½¬ç§»</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cluster failover<br></code></pre></td></tr></table></figure><h1 id="ä¸»ä»ä¸‹çº¿å’Œä¸»ä»åˆ‡æ¢">ä¸»ä»ä¸‹çº¿å’Œä¸»ä»åˆ‡æ¢</h1><p>å½“ä¸€å°slaveæœåŠ¡å™¨ä¸‹çº¿åï¼Œå…¶å¯¹åº”çš„masterä¼šå°†å…¶æ ‡è®°ä¸ºä¸‹çº¿çŠ¶æ€ï¼Œå¹¶é€šçŸ¥é›†ç¾¤å†…å…¶ä»–æ‰€æœ‰æœåŠ¡å™¨ã€‚ç­‰è¯¥slaveæœåŠ¡å†æ¬¡ä¸Šçº¿åï¼Œå…¶å¯¹åº”çš„masterä¼šé‡æ–°è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œå°†å…¶æ ‡è®°ä¸ºä¸Šçº¿çŠ¶æ€ï¼Œå¹¶é€šçŸ¥é›†ç¾¤å†…å…¶ä»–æœåŠ¡å™¨åˆ é™¤è¯¥slaveçš„ä¸‹çº¿çŠ¶æ€ã€‚</p><p>å½“ä¸€å°masteræœåŠ¡å™¨ä¸‹çº¿åï¼Œå…¶å¯¹åº”çš„slaveä¼šè¿ç»­çš„å‘èµ·è¯·æ±‚ï¼Œç»è¿‡<code>cluster-node-timeout</code>æ—¶é•¿ä¹‹åï¼Œslaveä¼šå°†è‡ªå·±è®¾ç½®æˆmasterã€‚å½“åŸæ¥çš„masterå†æ¬¡ä¸Šçº¿åï¼Œä¼šè¢«è®¾ç½®æˆslaveã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. å“¨å…µ</title>
    <link href="/2024/12/07/Redis/14-%E5%93%A8%E5%85%B5/"/>
    <url>/2024/12/07/Redis/14-%E5%93%A8%E5%85%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="masterå®•æœº">masterå®•æœº</h1><p>å¦‚æœä¸»ä»æ¨¡å¼ä¸‹çš„masterå®•æœºï¼Œä¸€èˆ¬å¤„ç†æµç¨‹ï¼š</p><ol type="1"><li>å°†å®•æœºçš„masterä¸‹çº¿</li><li>æ‰¾ä¸€ä¸ªslaveä½œä¸ºmaster</li><li>é€šçŸ¥æ‰€æœ‰çš„slaveè¿æ¥æ–°çš„master</li><li>å¯åŠ¨æ–°çš„masterä¸slave</li><li><code>å…¨é‡å¤åˆ¶*N + éƒ¨åˆ†å¤åˆ¶*N</code></li></ol><p>å‡ºç°çš„é—®é¢˜ï¼š</p><ul><li>è°æ¥ç¡®è®¤masterå®•æœºäº†</li><li>é€‰æ–°çš„masterå¦‚ä½•é€‰ï¼Ÿ</li><li>ä¿®æ”¹é…ç½®åï¼ŒåŸæ¥çš„masteræ¢å¤äº†æ€ä¹ˆåŠï¼Ÿ</li></ul><h1 id="å“¨å…µ">å“¨å…µ</h1><p>å“¨å…µï¼ˆsentinelï¼‰æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”¨äºå¯¹ä¸»ä»ç»“æ„ä¸­çš„æ¯å°æœåŠ¡å™¨è¿›è¡Œç›‘æ§ï¼Œå½“å‡ºç°æ•…éšœæ—¶é€šè¿‡æŠ•ç¥¨æœºåˆ¶é€‰æ‹©æ–°çš„masterå¹¶å°†æ‰€æœ‰slaveè¿æ¥åˆ°æ–°çš„masterã€‚</p><p>ä½œç”¨ï¼š</p><ul><li>ç›‘æ§</li></ul><blockquote><p>ä¸æ–­çš„æ£€æŸ¥masterå’Œslaveæ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p><p>masterå­˜æ´»æ£€æµ‹ã€masterä¸slaveè¿è¡Œæƒ…å†µæ£€æµ‹</p></blockquote><ul><li>é€šçŸ¥ï¼ˆæé†’ï¼‰</li></ul><blockquote><p>å½“è¢«ç›‘æ§çš„æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼Œå‘å…¶ä»–ï¼ˆå“¨å…µé—´ï¼Œå®¢æˆ·ç«¯ï¼‰å‘é€é€šçŸ¥</p></blockquote><ul><li>è‡ªåŠ¨æ•…éšœè½¬ç§»</li></ul><blockquote><p>æ–­å¼€masterä¸slaveè¿æ¥ï¼Œé€‰å–ä¸€ä¸ªslaveä½œä¸ºmasterï¼Œå°†å…¶ä»–slaveè¿æ¥åˆ°æ–°çš„masterï¼Œå¹¶å‘ŠçŸ¥å®¢æˆ·ç«¯æ–°çš„æœåŠ¡å™¨åœ°å€ã€‚</p></blockquote><p>å“¨å…µä¹Ÿæ˜¯ä¸€å°redisæœåŠ¡å™¨ï¼Œåªæ˜¯ä¸æä¾›æ•°æ®æœåŠ¡ã€‚</p><p>é€šå¸¸å“¨å…µé…ç½®æ•°é‡ä¸ºå•æ•°ã€‚</p><h1 id="å“¨å…µæ­å»ºç¤ºä¾‹">å“¨å…µæ­å»ºç¤ºä¾‹</h1><p>é…ç½®å“¨å…µï¼ˆå‚è€ƒ sentinel.conf é…ç½®æ–‡ä»¶ï¼‰</p><p>ç¼–å†™é…ç½®æ–‡ä»¶sentinel-ç«¯å£å·.confï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plain">port 26379<br>daemonize no<br>pidfile /var/run/redis-sentinel.pid<br>logfile &quot;&quot;<br>dir /tmp<br># sentinel monitor [è‡ªå®šä¹‰çš„åç§°] ç›‘æ§çš„masterçš„ipå’Œç«¯å£ åˆ¤æ–­masterå®•æœºçš„å“¨å…µæ•°é‡<br># å¦‚æœæœ‰2å°å“¨å…µè®¤ä¸ºmasterå®•æœºäº†ï¼Œmasterå°±ä¸‹çº¿<br>sentinel monitor mymaster 127.0.0.1 6379 2<br># masteråˆ¤å®šå®•æœºçš„æœªå“åº”æ—¶é•¿ï¼ˆå•ä½æ¯«ç§’ï¼‰<br>sentinel down-after-milliseconds mymaster 30000<br># æ–°çš„masterä¸Šæ¥ä¹‹åï¼Œè¿›è¡Œæ•°æ®åŒæ­¥æ—¶ï¼Œä¸€æ¬¡å¤šå°‘ä¸ªæ•°æ®å¼€å§‹åŒæ­¥<br>sentinel parallel-syncs mymaster 1<br># å¤šä¹…æœªåŒæ­¥å®Œæˆç®—ä½œè¶…æ—¶ï¼ˆå•ä½æ¯«ç§’ï¼‰<br>sentinel failover-timeout mymaster 180000<br>sentinel deny-scripts-reconfig yes<br></code></pre></td></tr></table></figure><p>å¯åŠ¨å“¨å…µï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-sentinel sentinel-ç«¯å£å·.conf<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œä¾ç„¶æ˜¯<code>redis-cli</code>å¯åŠ¨å®¢æˆ·ç«¯ï¼Œä½†æ˜¯ä¸å…è®¸ä½¿ç”¨<code>set</code>ã€<code>get</code>ç­‰æŒ‡ä»¤ã€‚</p><p>å“¨å…µå¯åŠ¨ä¹‹åï¼Œåˆšåˆšç¼–å†™çš„é…ç½®æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨é‡å†™ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚å˜ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plain">port 26379<br>daemonize yes<br>pidfile &quot;/var/run/redis-sentinel.pid&quot;<br>logfile &quot;26379.log&quot;<br>dir &quot;/home/redis/data&quot;<br>sentinel myid d957acd3913031c3bec970b13f9a2cc446230d25<br>sentinel deny-scripts-reconfig yes<br>sentinel monitor mymaster 127.0.0.1 6379 2<br>sentinel config-epoch mymaster 0<br>sentinel leader-epoch mymaster 0<br># Generated by CONFIG REWRITE<br>protected-mode no<br>maxclients 4064<br>user default on nopass ~* +@all<br>sentinel known-replica mymaster 127.0.0.1 6381<br>sentinel known-replica mymaster 127.0.0.1 6380<br>sentinel known-sentinel mymaster 127.0.0.1 26380 5b8d465eba4e61f72f245cc12d32d4c45b812ae5<br>sentinel known-sentinel mymaster 127.0.0.1 26381 8812ba72638e42fbbc1a9af8a8a2e1716e223011<br>sentinel current-epoch 0<br></code></pre></td></tr></table></figure><h1 id="å·¥ä½œåŸç†">å·¥ä½œåŸç†</h1><p>ä¸‰ä¸ªé˜¶æ®µï¼š</p><ul><li>ç›‘æ§</li></ul><blockquote><p>åŒæ­¥ä¿¡æ¯</p></blockquote><ul><li>é€šçŸ¥</li></ul><blockquote><p>ä¿æŒè¿é€š</p></blockquote><ul><li>æ•…éšœè½¬ç§»</li></ul><blockquote><p>å‘ç°é—®é¢˜</p><p>é€‰æ‹©ç«é€‰è´Ÿè´£äºº</p><p>ä¼˜é€‰æ–°çš„master</p><p>æ–°masterä¸Šä»»ï¼Œå…¶ä»–slaveåˆ‡æ¢masterï¼ŒåŸmasteræ”¹ä¸ºslave</p></blockquote><h2 id="ç›‘æ§é˜¶æ®µ">ç›‘æ§é˜¶æ®µ</h2><p>åŒæ­¥å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯</p><ul><li>é€šè¿‡pingæŒ‡ä»¤è·å–å„ä¸ªsentinelçš„çŠ¶æ€ï¼ˆæ˜¯å¦åœ¨çº¿ï¼‰</li><li>é€šè¿‡infoæŒ‡ä»¤è·å–masterçš„çŠ¶æ€<ul><li>masterçš„å±æ€§ï¼šrunidã€role:master</li><li>å„ä¸ªslaveçš„è¯¦ç»†ä¿¡æ¯</li></ul></li><li>é€šè¿‡infoè·å–æ‰€æœ‰slaveçš„çŠ¶æ€ï¼ˆæ ¹æ®masterä¸­çš„slaveä¿¡æ¯ï¼‰<ul><li>slaveçš„å±æ€§ï¼šrunidã€role:slaveã€master_hostã€master_portã€offset.....</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plain">sentinel[1]-&gt;master: å‘é€æŒ‡ä»¤ï¼šinfo \n è·å–masterçŠ¶æ€<br>sentinel[1]-&gt;master: å»ºç«‹cmdè¿æ¥<br>note right of master: masterè®°å½•çš„ä¿¡æ¯ï¼š\n masterä¿¡æ¯\nslavesä¿¡æ¯\nå½“å‰masterè¿æ¥çš„sentinels<br>note left of sentinel[1]: sentinel[1]è®°å½•çš„ä¿¡æ¯ï¼š\nmasterä¿¡æ¯\nslavesä¿¡æ¯\nå½“å‰masterè¿æ¥çš„sentinels<br>note left of sentinel[1]: sentinel[1]å‘slaveså‘é€infoæŒ‡ä»¤ï¼Œ\nè·å–slavesçŠ¶æ€<br># æ­¤æ—¶åˆå¢åŠ äº†ä¸€å°å“¨å…µ sentinel[2]<br>sentinel[2]-&gt;master: å‘é€æŒ‡ä»¤ï¼šinfo<br>sentinel[2]-&gt;master: å»ºç«‹cmdè¿æ¥<br>note right of master: masteræ›´æ–°è®°å½•çš„ä¿¡æ¯ï¼š\nå½“å‰masterè¿æ¥çš„sentinels<br>note right of sentinel[2]: sentinel[2]è®°å½•çš„ä¿¡æ¯ï¼š\nmasterä¿¡æ¯\nslavesä¿¡æ¯\nå½“å‰masterè¿æ¥çš„sentinels<br>note right of sentinel[2]: sentinel[2]å‘slaveså‘é€infoæŒ‡ä»¤ï¼Œ\nè·å–slavesçŠ¶æ€<br>sentinel[2]-&gt;sentinel[1]: å»ºç«‹é€šé“ï¼špublish / subscribe \nç”¨äºå“¨å…µé—´æ•°æ®åŒæ­¥<br>sentinel[1]-&gt;sentinel[2]: å‘é€æŒ‡ä»¤ï¼šping \nè·å–å„ä¸ªsentinelçŠ¶æ€<br></code></pre></td></tr></table></figure><h2 id="é€šçŸ¥é˜¶æ®µ">é€šçŸ¥é˜¶æ®µ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">sentinel[1]-&gt;master/slaves: publish sentnel: hello<br>master/slaves-&gt;sentinel[1]: è¿”å›çŠ¶æ€ä¿¡æ¯<br>note left of sentinel[1]: åœ¨å“¨å…µé—´çš„publish/subscribeç½‘ç»œä¸­\nå‘å¸ƒmaster/slavesçš„çŠ¶æ€ä¿¡æ¯<br></code></pre></td></tr></table></figure><h2 id="æ•…éšœè½¬ç§»é˜¶æ®µ">æ•…éšœè½¬ç§»é˜¶æ®µ</h2><p>ç¡®è®¤masterä¸‹çº¿æµç¨‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">sentinel[1]-&gt;master: å‘é€helloæŒ‡ä»¤æ— å“åº”<br>sentinel[1]-&gt;master: è¿ç»­å‘é€helloæŒ‡ä»¤<br>note left of sentinel[1]: sentinel[1]å°†masteræ ‡è®°ä¸ºï¼šSRI_S_DOWN \n S_DOWNï¼šä¸»è§‚ä¸‹çº¿<br>sentinel[1]-&gt;sentinel[2]: é€šè¿‡å“¨å…µé—´çš„å‘å¸ƒ/è®¢é˜…é€šé“\nå‘å…¶ä»–å“¨å…µä¼ æ’­masterä¸‹çº¿ä¿¡æ¯\n SENTINEL is-master-down-by-addr\næœåŠ¡å™¨hostï¼Œportï¼Œå‘èµ·æ–¹ï¼ŒçŠ¶æ€....<br>sentinel[2]-&gt;master: å‘masterè¿ç»­å‘é€helloæŒ‡ä»¤<br>sentinel[2]-&gt;sentinel[1]: sentinel[2]é€šè¿‡å“¨å…µé—´å‘å¸ƒ/è®¢é˜…é€šé“\nç¡®è®¤masterä¸‹çº¿ä¿¡æ¯<br>note right of sentinel[2]: è¶…è¿‡ä¸€å®šæ•°é‡çš„å“¨å…µè®¤ä¸ºmasterä¸‹çº¿\nï¼ˆæ•°é‡åœ¨å“¨å…µé…ç½®æ–‡ä»¶é…ç½®ï¼‰\nmasterè¢«æ ‡è®°ä¸ºï¼šSRI_O_DOWN\nO_DOWNï¼šå®¢è§‚ä¸‹çº¿<br></code></pre></td></tr></table></figure><p>æŠ•ç¥¨é€‰æ‹©å“¨å…µé—´çš„leaderï¼š</p><p>æ¯ä¸ªå“¨å…µå‘å“¨å…µé—´å‘å¸ƒ/è®¢é˜…é€šé“å†…å‘é€ä¿¡æ¯ï¼š</p><p>SENTINEL is-master-down-by-addr ....</p><ul><li>ä¸‹çº¿çš„masterçš„ip</li><li>ä¸‹çº¿çš„masterçš„ç«¯å£å·</li><li>å“¨å…µè‡ªå·±å‚ä¸å“¨å…µleaderç«é€‰çš„æ¬¡æ•°</li><li>å“¨å…µè‡ªå·±çš„runid</li></ul><p>æ¯ä¸€ä¸ªå“¨å…µä½œä¸ºå‚é€‰è€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æŠ•ç¥¨è€…ï¼Œæ¯ä¸ªå“¨å…µæœ‰ä¸€ç¥¨ã€‚å“¨å…µæ ¹æ®è‡ªå·±æ¥æ”¶åˆ°å…¶ä»–å“¨å…µå‘é€ä¿¡æ¯çš„å…ˆåé¡ºåºï¼ŒæŠŠè‡ªå·±çš„ç¥¨æŠ•ç»™å¯¹åº”çš„å“¨å…µã€‚æœ€ç»ˆæ±‡æ€»å¾—ç¥¨ç»“æœï¼Œé€‰å‡ºå“¨å…µleaderã€‚å¦‚æœç¬¬ä¸€è½®æ²¡æœ‰é€‰å‡ºæ¥leaderï¼Œå†è¿›è¡Œä¸€è½®æŠ•ç¥¨ï¼Œç›´è‡³å¾—å‡ºå“¨å…µleaderã€‚æ¯å¢åŠ ä¸€è½®ï¼Œå“¨å…µçš„å‚ä¸ç«é€‰æ¬¡æ•°ä¼šå¢åŠ 1ã€‚</p><p>å“¨å…µleader ä»slaveæœåŠ¡å™¨é‡Œåˆ—è¡¨ä¸­æŒ‘é€‰å¤‡ç”¨masterè½¬æ­£ï¼Œé€‰æ‹©çš„åŸåˆ™ï¼š</p><ol type="1"><li>å¤‡é€‰çš„slaveéœ€è¦æ˜¯åœ¨çº¿çš„</li><li>ç»™slaveä¸åœå‘é€helloæ¶ˆæ¯ï¼Œæ·˜æ±°æ‰å“åº”æ…¢çš„</li><li>æ·˜æ±°ä¸åŸmasteræ–­å¼€æ—¶é—´ä¹…çš„</li><li>ä¼˜å…ˆåŸåˆ™<ul><li>æ¯”è¾ƒä¼˜å…ˆçº§</li><li>æ¯”è¾ƒæ•°æ®åŒæ­¥çš„offset</li><li>é€‰æ‹©runidæ¯”è¾ƒå°çš„</li></ul></li></ol><p>å“¨å…µleaderå‘é€æŒ‡ä»¤å‘ŠçŸ¥æ–°çš„masterï¼š</p><ul><li>å‘æ–°çš„masterå‘é€<code>slaveof no one</code> æŒ‡ä»¤</li><li>å‘å…¶ä»–slaveå‘é€<code>slaveof æ–°masterçš„ip ç«¯å£å·</code></li></ul>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. ä¸»ä»å¤åˆ¶</title>
    <link href="/2024/12/07/Redis/13-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"/>
    <url>/2024/12/07/Redis/13-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="äº’è”ç½‘ä¸‰é«˜æ¶æ„">äº’è”ç½‘ä¸‰é«˜æ¶æ„</h1><p>äº’è”ç½‘â€œä¸‰é«˜â€æ¶æ„ï¼š</p><ul><li>é«˜å¹¶å‘</li><li>é«˜æ€§èƒ½</li><li>é«˜å¯ç”¨</li></ul><p>å¤§æ•°æ®æ—¶ä»£çš„â€œ3Vâ€ï¼š</p><ul><li>æµ·é‡ï¼ˆVolumeï¼‰</li><li>å¤šæ ·ï¼ˆVarietyï¼‰</li><li>å®æ—¶ï¼ˆVelocityï¼‰</li></ul><p>å¯ç”¨æ€§ï¼š<code>ï¼ˆå…¨å¹´çš„ç§’æ•° - å½“å¹´å®•æœºåœç”¨çš„ç§’æ•°ï¼‰/ å…¨å¹´çš„ç§’æ•° * 100%</code>ã€‚</p><p>é«˜å¯ç”¨ï¼šä¸šç•Œé«˜å¯ç”¨æ€§ç›®æ ‡5ä¸ª9ï¼ˆå³99.999%)ï¼Œå³æœåŠ¡å™¨å¹´å®•æœºæ—¶é•¿ä½äº315ç§’ï¼Œçº¦5.25åˆ†é’Ÿã€‚</p><p>ä¸ºäº†é¿å…å•ç‚¹RedisæœåŠ¡å™¨æ•…éšœï¼Œå‡†å¤‡å¤šå°æœåŠ¡å™¨ï¼Œäº’ç›¸è¿é€šã€‚å°†æ•°æ®å¤åˆ¶å¤šä¸ªå‰¯æœ¬ä¿å­˜åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿æ¥åœ¨ä¸€èµ·ï¼Œå¹¶ä¿è¯æ•°æ®æ˜¯åŒæ­¥çš„ã€‚å³ä½¿æœ‰å…¶ä¸­ä¸€å°æœåŠ¡å™¨å®•æœºï¼Œå…¶ä»–æœåŠ¡å™¨ä¾ç„¶å¯ä»¥ç»§ç»­æä¾›æœåŠ¡ï¼Œå®ç°Redisçš„é«˜å¯ç”¨ï¼ŒåŒæ—¶å®ç°æ•°æ®å†—ä½™å¤‡ä»½ã€‚</p><h1 id="ä¸»ä»å¤åˆ¶">ä¸»ä»å¤åˆ¶</h1><p>ä¸»ä»å¤åˆ¶å³ å°†masterä¸­çš„æ•°æ®åŠæ—¶ã€æœ‰æ•ˆçš„å¤åˆ¶åˆ°slaveä¸­ã€‚</p><p>ç‰¹å¾ï¼šä¸€ä¸ªmasterå¯ä»¥æ‹¥æœ‰å¤šä¸ªslaveï¼Œä¸€ä¸ªslaveåªå¯¹åº”ä¸€ä¸ªmasterã€‚</p><p>èŒè´£ï¼š</p><ul><li>master<ul><li>å†™æ•°æ®</li><li>æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œå°†å‡ºç°å˜åŒ–çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ°slave</li><li>è¯»æ•°æ®ï¼ˆå¯å¿½ç•¥ï¼‰</li></ul></li><li>slave<ul><li>è¯»æ•°æ®</li><li>å†™æ•°æ®ï¼ˆç¦æ­¢ï¼‰</li></ul></li></ul><p>ä½œç”¨ï¼š</p><ul><li>è¯»å†™åˆ†ç¦»ï¼šmasterå†™ã€slaveè¯»ï¼Œæé«˜æœåŠ¡å™¨çš„è¯»å†™è´Ÿè½½èƒ½åŠ›ã€‚</li><li>è´Ÿè½½å‡è¡¡ï¼šåŸºäºä¸»ä»ç»“æ„ï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”±slaveåˆ†æ‹…masterè´Ÿè½½ï¼Œå¹¶æ ¹æ®éœ€æ±‚çš„å˜åŒ–ï¼Œæ”¹å˜slaveçš„æ•°é‡ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…æ•°æ®è¯»å–è´Ÿè½½ï¼Œå¤§å¤§æé«˜RedisæœåŠ¡å™¨å¹¶å‘é‡ä¸æ•°æ®ååé‡ã€‚</li><li>æ•…éšœæ¢å¤ï¼šå½“masterå‡ºç°é—®é¢˜æ—¶ï¼Œç”±slaveæä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤ã€‚</li><li>æ•°æ®å†—ä½™ï¼šå®ç°æ•°æ®çƒ­å¤‡ä»½ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼ã€‚</li><li>é«˜å¯ç”¨åŸºçŸ³ï¼šåŸºäºä¸»ä»å¤åˆ¶ï¼Œæ„å»ºå“¨å…µæ¨¡å¼ä¸é›†ç¾¤ï¼Œå®ç°Redisçš„é«˜å¯ç”¨æ–¹æ¡ˆ</li></ul><h1 id="å·¥ä½œæµç¨‹">å·¥ä½œæµç¨‹</h1><p>å¤§è‡´åˆ†ä¸º3ä¸ªé˜¶æ®µï¼š</p><ol type="1"><li>å»ºç«‹è¿æ¥é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰</li><li>æ•°æ®åŒæ­¥é˜¶æ®µ</li><li>å‘½ä»¤ä¼ æ’­é˜¶æ®µ</li></ol><h2 id="å»ºç«‹è¿æ¥é˜¶æ®µ">å»ºç«‹è¿æ¥é˜¶æ®µ</h2><p>æ­¥éª¤ï¼š</p><ol type="1"><li>è®¾ç½®masterçš„åœ°å€å’Œç«¯å£ï¼Œä¿å­˜masterä¿¡æ¯</li><li>å»ºç«‹socketè¿æ¥</li><li>å‘é€pingæŒ‡ä»¤ï¼ˆå®šæ—¶å™¨ä»»åŠ¡ï¼‰</li><li>èº«ä»½éªŒè¯</li><li>å‘é€slaveç«¯å£ä¿¡æ¯</li><li>ä¸»ä»è¿æ¥æˆåŠŸ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plain">slave-&gt;master: å‘é€æŒ‡ä»¤ï¼šslaveof ip port<br>master-&gt;slave: æ¥æ”¶åˆ°æŒ‡ä»¤ï¼Œå“åº”ç»™slave<br>note left of slave: ä¿å­˜masterçš„IPä¸ç«¯å£ \n masterhost \n masterport<br>note left of slave: æ ¹æ®ä¿å­˜çš„ä¿¡æ¯,\n åˆ›å»ºè¿æ¥masterçš„socket <br>slave-&gt;master: å‘¨æœŸæ€§å‘é€æŒ‡ä»¤ï¼šping<br>master-&gt;slave: å“åº”pong<br>note right of master: éªŒè¯æˆæƒ<br>slave-&gt;master: å‘é€æŒ‡ä»¤ï¼šreplconf listening-port &lt;port-number&gt;<br>note right of master: ä¿å­˜slaveçš„ç«¯å£å·<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆçŠ¶æ€ï¼š</p><p>slaveç«¯ï¼šä¿å­˜masterçš„åœ°å€å’Œç«¯å£</p><p>masterç«¯ï¼šä¿å­˜slaveçš„ç«¯å£</p><p>æ€»ä½“ï¼šslaveå’Œmasterä¹‹é—´åˆ›å»ºäº†socketè¿æ¥</p><p>ä¸»ä»è¿æ¥ï¼ˆslaveè¿æ¥masterï¼‰æ–¹å¼ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼šå®¢æˆ·ç«¯å‘é€å‘½ä»¤</li></ul><blockquote><p>å¯åŠ¨slaveæœåŠ¡å™¨ä¹‹åï¼Œåœ¨slaveæœåŠ¡å™¨çš„å®¢æˆ·ç«¯ä½¿ç”¨slaveofæŒ‡ä»¤</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">slaveof &lt;masterip&gt; &lt;masterport&gt;<br></code></pre></td></tr></table></figure><ul><li>æ–¹å¼äºŒï¼šå¯åŠ¨æœåŠ¡å™¨æ—¶ï¼Œæ·»åŠ å‚æ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-server --slaveof &lt;masterip&gt; &lt;masterport&gt;<br></code></pre></td></tr></table></figure><ul><li>æ–¹å¼ä¸‰ï¼šæœåŠ¡å™¨é…ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">slaveof &lt;masterip&gt; &lt;masterport&gt;<br></code></pre></td></tr></table></figure><ul><li>slaveç³»ç»Ÿä¿¡æ¯<ul><li>master_link_down_since_seconds</li><li>masterhost</li><li>masterport</li></ul></li><li>masterç³»ç»Ÿä¿¡æ¯<ul><li>slave_listening_port(å¤šä¸ª)</li></ul></li></ul><p>ä¸»ä»æ–­å¼€è¿æ¥ï¼š</p><ul><li>åœ¨ä»æœºå®¢æˆ·ç«¯å‘é€æŒ‡ä»¤ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">slaveof no one<br></code></pre></td></tr></table></figure><p>æˆæƒè®¿é—®ï¼š</p><p>masteræœåŠ¡å™¨è®¾ç½®å¯†ç ï¼š</p><ul><li>masteré…ç½®æ–‡ä»¶è®¾ç½®å¯†ç </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">requirepass &lt;password&gt;<br></code></pre></td></tr></table></figure><ul><li>masterå®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">config set requirepass &lt;password&gt;<br>config get requirepass<br></code></pre></td></tr></table></figure><p>slaveè®¿é—®å¸¦æœ‰å¯†ç çš„masterï¼š</p><ul><li>slaveå®¢æˆ·ç«¯å‘é€å‘½åè®¾ç½®å¯†ç </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">auth &lt;password&gt;<br></code></pre></td></tr></table></figure><ul><li>slaveé…ç½®æ–‡ä»¶è®¾ç½®å¯†ç </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">masterauth &lt;password&gt;<br></code></pre></td></tr></table></figure><ul><li>å¯åŠ¨å®¢æˆ·ç«¯è®¾ç½®å¯†ç </li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli -a &lt;password&gt;<br></code></pre></td></tr></table></figure><h2 id="æ•°æ®åŒæ­¥é˜¶æ®µ">æ•°æ®åŒæ­¥é˜¶æ®µ</h2><p>åœ¨slaveåˆæ¬¡è¿æ¥masteråï¼Œå¤åˆ¶masterä¸­æ‰€æœ‰æ•°æ®åˆ°slaveã€‚</p><p>å°†slaveçš„æ•°æ®åº“çŠ¶æ€æ›´æ–°æˆmasterå½“å‰çš„æ•°æ®åº“çŠ¶æ€ã€‚</p><p>æ­¥éª¤ï¼š</p><ol type="1"><li>è¯·æ±‚åŒæ­¥æ•°æ®</li><li>åˆ›å»ºRDBåŒæ­¥æ•°æ®</li><li>æ¢å¤RDBåŒæ­¥æ•°æ®</li></ol><blockquote><p>ä»¥ä¸Šç§°ä¸ºå…¨é‡å¤åˆ¶ã€‚</p></blockquote><ol start="4" type="1"><li>è¯·æ±‚éƒ¨åˆ†åŒæ­¥æ•°æ®</li><li>æ¢å¤éƒ¨åˆ†åŒæ­¥æ•°æ®</li></ol><blockquote><p>åœ¨slaveè¿æ¥masteræ—¶ï¼Œmasterå°†è‡ªå·±çš„æ•°æ®åˆ›å»ºRDBå¿«ç…§ç»™slaveã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œmasterå¯èƒ½ä¼šæ”¶åˆ°å…¶ä»–çš„æ•°æ®æ“ä½œæŒ‡ä»¤ï¼Œmasterä¼šåˆ›å»ºä¸€ä¸ªå¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œä¿å­˜è¿™äº›ä¸åœ¨RDBå¿«ç…§ä¸­çš„æ“ä½œã€‚æœ€åå°†å¤åˆ¶ç§¯å‹ç¼“å†²åŒºå†…å®¹å‘ç»™slaveï¼Œslaveä½¿ç”¨aofçš„æ–¹å¼å°†æœ€åçš„éƒ¨åˆ†åŒæ­¥æ•°æ®è¿›è¡Œæ¢å¤ã€‚è¿™ä¸ªæ“ä½œç§°ä¸ºéƒ¨åˆ†å¤åˆ¶ã€‚</p></blockquote><ol start="6" type="1"><li>æ•°æ®åŒæ­¥å·¥ä½œå®Œæˆ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain">slave-&gt;master: å‘é€æŒ‡ä»¤ï¼špsync2<br>note right of master: æ‰§è¡Œbgsaveï¼Œ\nä½¿ç”¨RDBåŒæ­¥æ•°æ®<br>note right of master: ç¬¬ä¸€ä¸ªslaveè¿æ¥æ—¶,\n åˆ›å»ºå¤åˆ¶ç§¯å‹ç¼“å†²åŒºã€‚\n(å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä½œç”¨ï¼šå­˜å‚¨åœ¨slaveè¿æ¥è¿‡ç¨‹ä¸­\nmasteræ¥æ”¶åˆ°çš„æ•°æ®æ“ä½œæŒ‡ä»¤)<br>master-&gt;slave: ç”ŸæˆRDBæ–‡ä»¶ï¼Œé€šè¿‡socketå‘é€ç»™slave<br>note left of slave: æ¥æ”¶RDB,æ¸…ç©ºæ•°æ®ï¼Œ\n æ‰§è¡ŒRDBæ–‡ä»¶æ¢å¤è¿‡ç¨‹<br>slave-&gt;master: å‘é€å‘½ä»¤å‘ŠçŸ¥RDBæ¢å¤å·²ç»å®Œæˆ<br>master-&gt;slave: å‘é€å¤åˆ¶ç§¯å‹ç¼“å†²åŒºä¿¡æ¯<br>note left of slave: æ¥æ”¶å¤åˆ¶ç§¯å‹ç¼“å†²åŒºå†…çš„æ•°æ®æ“ä½œæŒ‡ä»¤ï¼Œ\n æ‰§è¡Œbgrewriteaofæ¢å¤æ•°æ®<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆçŠ¶æ€ï¼š</p><p>slaveç«¯ï¼šå…·æœ‰masterç«¯å…¨éƒ¨æ•°æ®ï¼ŒåŒ…å«RDBè¿‡ç¨‹ä¸­æ¥æ”¶çš„æ•°æ®ã€‚</p><p>masterç«¯ï¼šä¿å­˜slaveå½“å‰æ•°æ®åŒæ­¥çš„ä½ç½®ã€‚</p><p>æ€»ä½“ï¼šä¹‹é—´å®Œæˆæ•°æ®å…‹éš†</p><p>masterç«¯æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¦‚æœmasteræ•°æ®é‡å·¨å¤§ï¼Œæ•°æ®åŒæ­¥é˜¶æ®µåº”é¿å¼€æµé‡é«˜å³°æœŸï¼Œé¿å…é€ æˆmasteré˜»å¡ï¼Œå½±å“ä¸šåŠ¡æ­£å¸¸æ‰§è¡Œã€‚</li><li>å¤åˆ¶ç¼“å†²åŒºå¤§å°è®¾å®šä¸åˆç†ï¼Œä¼šå¯¼è‡´æ•°æ®æº¢å‡ºã€‚å¦‚æœè¿›è¡Œå…¨é‡å¤åˆ¶å‘¨æœŸå¤ªé•¿ï¼Œè¿›è¡Œéƒ¨åˆ†å¤åˆ¶æ—¶å‘ç°æ•°æ®å·²ç»å­˜åœ¨ä¸¢å¤±çš„æƒ…å†µï¼Œå¿…é¡»è¿›è¡Œç¬¬äºŒæ¬¡å…¨é‡å¤åˆ¶ï¼Œè‡´ä½¿slaveé™·å…¥æ­»å¾ªç¯çŠ¶æ€ã€‚<br>é€šè¿‡é…ç½®é¡¹ä¿®æ”¹masterçš„å¤åˆ¶ç¼“å†²åŒºå¤§å°ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">repl-backlog-size 1mb<br></code></pre></td></tr></table></figure><ul><li>masterå•æœºå†…å­˜å ç”¨ä¸»æœºå†…å­˜çš„æ¯”ä¾‹ä¸åº”è¿‡å¤§ï¼Œå»ºè®®ä½¿ç”¨50% - 70%çš„å†…å­˜ï¼Œç•™ä¸‹30%-50%çš„å†…å­˜ç”¨äºæ‰§è¡Œbgsaveå‘½ä»¤å’Œåˆ›å»ºå¤åˆ¶ç¼“å†²åŒº</li></ul><p>slaveç«¯æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>ä¸ºé¿å…slaveå…¨é‡å¤åˆ¶ã€éƒ¨åˆ†å¤åˆ¶æ—¶æœåŠ¡å™¨å“åº”é˜»å¡æˆ–æ•°æ®ä¸åŒæ­¥ï¼Œå»ºè®®å…³é—­æ­¤æœŸé—´çš„å¯¹å¤–æœåŠ¡ã€‚<br>é€šè¿‡é…ç½®é¡¹ä¿®æ”¹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">slave-serve-stale-data yes|no<br></code></pre></td></tr></table></figure><ul><li>æ•°æ®åŒæ­¥é˜¶æ®µï¼Œmasterå‘é€ç»™slaveä¿¡æ¯å¯ä»¥ç†è§£masteræ˜¯slaveçš„ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä¸»åŠ¨å‘slaveå‘é€å‘½ä»¤</li><li>å¤šä¸ªslaveåŒæ—¶å¯¹masterè¯·æ±‚æ•°æ®åŒæ­¥ï¼Œmasterå‘é€çš„RDBæ–‡ä»¶å¢å¤šï¼Œä¼šå¯¹masterå¸¦å®½é€ æˆå·¨å¤§å†²å‡»ï¼Œå› æ­¤æ•°æ®åŒæ­¥éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œé€‚é‡é”™å³°ã€‚</li><li>slaveè¿‡å¤šæ—¶ï¼Œå»ºè®®è°ƒæ•´æ‹“æ‰‘ç»“æ„ï¼Œç”±ä¸€ä¸»å¤šä»ç»“æ„å˜ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œä¸­é—´çš„èŠ‚ç‚¹æ—¢æ˜¯masterï¼Œä¹Ÿæ˜¯slaveã€‚æ³¨æ„ä½¿ç”¨æ ‘çŠ¶ç»“æ„æ—¶ï¼Œç”±äºå±‚çº§æ·±åº¦ï¼Œå¯¼è‡´æ·±åº¦è¶Šé«˜çš„slaveä¸æœ€é¡¶å±‚masteré—´æ•°æ®åŒæ­¥å»¶è¿Ÿè¾ƒå¤§ï¼Œæ•°æ®ä¸€è‡´æ€§å˜å·®ï¼Œåº”è°¨æ…é€‰æ‹©ã€‚</li></ul><h2 id="å‘½ä»¤ä¼ æ’­é˜¶æ®µ">å‘½ä»¤ä¼ æ’­é˜¶æ®µ</h2><p>å½“masteræ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹åï¼Œå¯¼è‡´ä¸»ä»æœåŠ¡å™¨æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´ï¼Œæ­¤æ—¶éœ€è¦è®©ä¸»ä»æ•°æ®åŒæ­¥åˆ°ä¸€è‡´çš„çŠ¶æ€ï¼ŒåŒæ­¥çš„åŠ¨ä½œç§°ä¸ºå‘½ä»¤ä¼ æ’­ã€‚</p><p>masterå°†æ¥æ”¶åˆ°çš„æ•°æ®å˜æ›´å‘½ä»¤å‘é€ç»™slaveï¼Œslaveæ¥æ”¶å‘½ä»¤åæ‰§è¡Œå‘½ä»¤ã€‚</p><p>å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶ï¼š</p><ul><li>å‘½ä»¤ä¼ æ’­é˜¶æ®µå‡ºç°äº†æ–­ç½‘ç°è±¡<ul><li>ç½‘ç»œé—ªæ–­é—ªè¿</li></ul></li></ul><blockquote><p>å¿½ç•¥ï¼Œæ— éœ€å¤„ç†</p></blockquote><pre><code class="hljs">-  çŸ­æ—¶é—´ç½‘ç»œä¸­æ–­ </code></pre><blockquote><p>éƒ¨åˆ†å¤åˆ¶</p></blockquote><pre><code class="hljs">-  é•¿æ—¶é—´ç½‘ç»œä¸­æ–­ </code></pre><blockquote><p>å…¨é‡å¤åˆ¶</p></blockquote><h1 id="éƒ¨åˆ†å¤åˆ¶">éƒ¨åˆ†å¤åˆ¶</h1><p>éƒ¨åˆ†å¤åˆ¶çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼š</p><ul><li>æœåŠ¡å™¨çš„è¿è¡Œidï¼ˆrun idï¼‰</li><li>ä¸»æœåŠ¡å™¨çš„å¤åˆ¶ç§¯å‹ç¼“å†²åŒº</li><li>ä¸»ä»æœåŠ¡å™¨çš„å¤åˆ¶åç§»é‡</li></ul><p>æœåŠ¡å™¨è¿è¡ŒIDï¼š</p><ul><li>æ¦‚å¿µï¼šæœåŠ¡è¿è¡ŒIDæ˜¯æ¯ä¸€å°æœåŠ¡å™¨æ¯æ¬¡è¿è¡Œçš„èº«ä»½è¯†åˆ«ç ï¼Œä¸€å°æœåŠ¡å™¨å¤šæ¬¡è¿è¡Œå¯ä»¥ç”Ÿæˆå¤šä¸ªè¿è¡Œid</li><li>ç»„æˆï¼šè¿è¡Œidç”±40 ä½å­—ç¬¦ç»„æˆï¼Œæ˜¯ä¸€ä¸ªéšæœºçš„åå…­è¿›åˆ¶å­—ç¬¦</li><li>ä½œç”¨ï¼šè¿è¡Œidè¢«ç”¨äºåœ¨æœåŠ¡å™¨é—´è¿›è¡Œä¼ è¾“ï¼Œè¯†åˆ«èº«ä»½ã€‚å¦‚æœæƒ³ä¸¤æ¬¡æ“ä½œå‡å¯¹åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œï¼Œå¿…é¡»æ¯æ¬¡æ“ä½œæºå¸¦å¯¹åº”çš„è¿è¡Œidï¼Œç”¨äºå¯¹æ–¹è¯†åˆ«</li><li>å®ç°æ–¹å¼ï¼šè¿è¡Œidåœ¨æ¯å°æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œmasteråœ¨é¦–æ¬¡è¿æ¥slaveæ—¶ï¼Œä¼šå°†è‡ªå·±çš„è¿è¡Œidå‘é€ç»™slaveï¼Œslaveä¿å­˜æ­¤idï¼Œé€šè¿‡<code>info server</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹èŠ‚ç‚¹çš„runid</li></ul><p>å¤åˆ¶ç¼“å†²åŒºï¼š</p><ul><li>æ¦‚å¿µï¼šå¤åˆ¶ç¼“å†²åŒºï¼Œåˆç§°å¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æœåŠ¡å™¨æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼Œæ¯æ¬¡ä¼ æ’­å‘½ä»¤ï¼Œmasteréƒ½ä¼šå°†ä¼ æ’­çš„å‘½ä»¤è®°å½•ä¸‹æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å¤åˆ¶ç¼“å†²åŒºã€‚</li><li>ç»„æˆï¼š<ul><li>åç§»é‡</li></ul></li></ul><blockquote><p>æ¯ä¸ªå­—èŠ‚çš„ç´¢å¼•ä½ç½®ã€‚</p><p>åç»­å¯ä»¥æ ¹æ®åç§»é‡çŸ¥é“ä¸‹ä¸€ä¸ªåº”å‘é€å‘½ä»¤</p></blockquote><pre><code class="hljs">-  å­—èŠ‚å€¼ </code></pre><blockquote><p>å­˜å‚¨çš„å®é™…å†…å®¹ã€‚Rediså°†æ•°æ®æŒ‡ä»¤æ‹†åˆ†æˆé€ä¸ªå­—èŠ‚è¿›è¡Œå­˜å‚¨ã€‚</p><p>ä¾‹å¦‚ï¼›<code>set name lisi</code>ï¼Œ</p><p>å…ˆè½¬æ¢æˆAOFæ ¼å¼ï¼š</p><p>ç„¶åå°†æ¢è¡Œè½¬æ¢æˆ<code>\r\n</code>ï¼ŒæŒ‰å­—èŠ‚å­˜å‚¨ã€‚</p><p>ä¾‹å¦‚ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain">$3   # setä¸‰ä¸ªå­—æ¯çš„é•¿åº¦<br>set<br>$4  # nameå››ä¸ªå­—æ¯çš„é•¿åº¦<br>name<br>$4  # lisiå››ä¸ªå­—æ¯çš„é•¿åº¦<br>lisi<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs plain">åç§»é‡9001ä½ç½®ï¼š$<br>åç§»é‡9002ä½ç½®ï¼š3<br>åç§»é‡9003ä½ç½®ï¼šs<br>åç§»é‡9004ä½ç½®ï¼še<br>åç§»é‡9005ä½ç½®ï¼št<br>åç§»é‡9006ä½ç½®ï¼š\r<br>åç§»é‡9007ä½ç½®ï¼š\n<br>åç§»é‡9008ä½ç½®ï¼š$<br>åç§»é‡9009ä½ç½®ï¼š4<br>åç§»é‡9010ä½ç½®ï¼šn<br>åç§»é‡9011ä½ç½®ï¼ša<br>.......<br></code></pre></td></tr></table></figure><ul><li>å·¥ä½œåŸç†ï¼šæ¯ä¸ªslaveè®°å½•å½“å‰ä¼ æ’­çš„offsetåç§»é‡ï¼Œmasterä¹Ÿä¼šè®°å½•æ¯ä¸ªslaveä¼ æ’­çš„offsetï¼ˆé˜²æ­¢ç½‘ç»œåŸå› slaveå’Œmasterä¸ä¸€è‡´ï¼‰ï¼Œé€šè¿‡offsetåç§»é‡åŒºåˆ†ä¸åŒçš„slaveå½“å‰æ•°æ®ä¼ æ’­çš„å·®å¼‚ã€‚</li><li>å¤åˆ¶ç¼“å†²åŒºé»˜è®¤å­˜å‚¨ç©ºé—´å¤§å°æ˜¯1Mï¼Œç”±äºå­˜å‚¨ç©ºé—´å¤§å°æ˜¯å›ºå®šçš„ï¼Œå½“å…¥é˜Ÿå…ƒç´ çš„æ•°é‡å¤§äºé˜Ÿåˆ—é•¿åº¦æ—¶ï¼Œæœ€å…ˆå…¥é˜Ÿçš„å…ƒç´ ä¼šè¢«å¼¹å‡ºï¼Œè€Œæ–°å…ƒç´ ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ã€‚</li><li>ç”±æ¥ï¼šæ¯å°æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå¦‚æœå¼€å¯æœ‰AOFæ´»è¢«è¿æ¥æˆä¸ºmasterèŠ‚ç‚¹ï¼Œå³åˆ›å»ºå¤åˆ¶ç¼“å†²åŒºã€‚</li><li>ä½œç”¨ï¼šä¿å­˜masteræ”¶åˆ°çš„æ‰€æœ‰æŒ‡ä»¤ï¼ˆä»…å½±å“æ•°æ®å˜æ›´çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚setã€selectï¼‰</li><li>æ•°æ®æ¥æºï¼šå½“masteræ¥æ”¶åˆ°ä¸»å®¢æˆ·ç«¯çš„æŒ‡ä»¤æ—¶ï¼Œé™¤äº†å°†æŒ‡ä»¤æ‰§è¡Œï¼Œä¼šå°†è¯¥æŒ‡ä»¤å­˜å‚¨åˆ°ç¼“å†²åŒºä¸­ã€‚</li></ul><p>ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡ï¼ˆoffsetï¼‰ï¼š</p><ul><li>æ¦‚å¿µï¼šä¸€ä¸ªæ•°å­—ï¼Œæè¿°å¤åˆ¶ç¼“å†²åŒºä¸­çš„æŒ‡ä»¤å­—èŠ‚ä½ç½®</li><li>åˆ†ç±»ï¼š<ul><li>masterå¤åˆ¶åç§»é‡ï¼šè®°å½•å‘é€ç»™æ‰€æœ‰slaveçš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆå¤šä¸ªï¼‰</li><li>slaveå¤åˆ¶åç§»é‡ï¼šè®°å½•slaveæ¥æ”¶masterå‘é€è¿‡æ¥çš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆä¸€ä¸ªï¼‰</li></ul></li><li>æ•°æ®æ¥æºï¼š<ul><li>masterç«¯ï¼šå‘é€ä¸€æ¬¡è®°å½•ä¸€æ¬¡</li><li>slaveç«¯ï¼šæ¥æ”¶ä¸€æ¬¡è®°å½•ä¸€æ¬¡</li></ul></li><li>ä½œç”¨ï¼šåŒæ­¥ä¿¡æ¯ï¼Œæ¯”å¯¹masterä¸slaveçš„å·®å¼‚ï¼Œå½“slaveæ–­çº¿åï¼Œæ¢å¤æ•°æ®ä½¿ç”¨ã€‚</li></ul><p>æ•°æ®åŒæ­¥æµç¨‹ï¼ˆè¯¦ç»†ç‰ˆï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plain">slave-&gt;master: å‘é€æŒ‡ä»¤ï¼š psync2 &lt;runid&gt; &lt;offset&gt; \n ç¬¬ä¸€æ¬¡å‘é€æ—¶ä¸çŸ¥é“runidå’Œoffsetï¼Œæ‰€ä»¥\nç¬¬ä¸€æ¬¡å‘é€çš„æŒ‡ä»¤ä¸ºï¼špsync2 ? -1<br>note right of master: æ‰§è¡Œbgsaveç”ŸæˆRDBæ–‡ä»¶ï¼Œ\n è®°å½•å½“å‰çš„å¤åˆ¶åç§»é‡offset \n æœŸé—´æ¥æ”¶æ–°çš„å®¢æˆ·ç«¯å‘½ä»¤ï¼Œoffsetå‘ç”Ÿå˜åŒ–<br>master-&gt;slave: å‘é€ +FULLRESYNC runid offset \n é€šè¿‡socketå‘é€RDBæ–‡ä»¶ç»™slave<br>note left of slave: æ”¶åˆ° +FULLSYNC \n ä¿å­˜masterçš„runidå’Œoffset \n æ¸…ç©ºå½“å‰å…¨éƒ¨æ•°æ®\n é€šè¿‡socketæ¥æ”¶RDBæ–‡ä»¶ï¼Œæ¢å¤RDBæ•°æ®<br>slave-&gt;master: å‘é€æŒ‡ä»¤ï¼špsync2 runid offset<br>note right of master: æ¥æ”¶å‘½ä»¤ï¼Œ\nåˆ¤å®šrunidæ˜¯å¦åŒ¹é…ï¼Œ\nåˆ¤å®šoffsetæ˜¯å¦åœ¨å¤åˆ¶ç¼“å†²åŒºä¸­ã€‚<br>note right of master: å¦‚æœrunidæˆ–offsetæœ‰ä¸€ä¸ªä¸æ»¡è¶³æ¡ä»¶,\nåˆ™æ‰§è¡Œå…¨é‡å¤åˆ¶;<br>note right of master: å¦‚æœrunidå’Œoffsetæ ¡éªŒé€šè¿‡ï¼Œ\nä¸”slaveçš„offsetå’Œmasterå½“å‰offsetç›¸åŒï¼Œ\nåˆ™å¿½ç•¥<br>note right of master: å¦‚æœrunidå’Œoffsetæ ¡éªŒé€šè¿‡ï¼Œ\nä½†slaveçš„offsetå’Œmasterçš„offsetä¸åŒï¼Œ\nåˆ™è¿›è¡Œéƒ¨åˆ†å¤åˆ¶<br>master-&gt;slave: å‘é€ +CONTINUE &lt;masterå½“å‰çš„offset&gt; \n é€šè¿‡socketå‘é€å¤åˆ¶ç¼“å†²åŒºä¸­\nä»slaveçš„offsetåˆ°masterçš„offset\nä¹‹é—´çš„æ•°æ®<br>note left of slave: æ”¶åˆ° +CONTINUE \nä¿å­˜masterçš„offsetï¼Œ\næ¥æ”¶ä¿¡æ¯åï¼Œæ‰§è¡Œbgrewriteaofï¼Œ\næ¢å¤æ•°æ®<br></code></pre></td></tr></table></figure><h1 id="å¿ƒè·³æœºåˆ¶">å¿ƒè·³æœºåˆ¶</h1><p>è¿›å…¥å‘½ä»¤ä¼ æ’­é˜¶æ®µæ—¶å€™ï¼Œmasterä¸slaveä¹‹é—´éœ€è¦è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œä½¿ç”¨å¿ƒè·³æœºåˆ¶è¿›è¡Œç»´æŠ¤ï¼Œå®ç°åŒæ–¹è¿æ¥ä¿æŒåœ¨çº¿ã€‚</p><p>masterå¿ƒè·³ï¼š</p><ul><li>æŒ‡ä»¤ï¼š<code>ping</code></li><li>å‘¨æœŸï¼šç”± repl-ping-slave-period å†³å®šï¼Œé»˜è®¤10ç§’</li><li>ä½œç”¨ï¼šåˆ¤æ–­slaveæ˜¯å¦åœ¨çº¿</li><li>æŸ¥è¯¢ï¼šINFO replication</li></ul><blockquote><p>è·å–slaveæœ€åä¸€æ¬¡è¿æ¥æ—¶é—´é—´éš”ï¼Œlagé¡¹ç»´æŒåœ¨0æˆ–1è§†ä¸ºæ­£å¸¸</p></blockquote><p>slaveå¿ƒè·³ä»»åŠ¡ï¼š</p><ul><li>æŒ‡ä»¤ï¼š<code>replconf ack &#123;offset&#125;</code></li><li>å‘¨æœŸï¼š1ç§’</li><li>ä½œç”¨1ï¼šæ±‡æŠ¥slaveè‡ªå·±çš„å¤åˆ¶åç§»é‡ï¼Œè·å–ç½ªè¡Œçš„æ•°æ®å˜æ›´æŒ‡ä»¤</li><li>ä½œç”¨2ï¼šåˆ¤æ–­masteræ˜¯å¦åœ¨çº¿</li></ul><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å½“slaveå¤šæ•°æ‰çº¿ï¼Œæˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œmasterä¸ºä¿éšœæ•°æ®ç¨³å®šæ€§ï¼Œå°†æ‹’ç»æ‰€æœ‰ä¿¡æ¯åŒæ­¥æ“ä½œ<br>ç›¸å…³é…ç½®ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">min-slaves-to-write 2<br>min-slaves-max-lag 8<br></code></pre></td></tr></table></figure><p>slaveæ•°é‡å°‘äº2ä¸ªï¼Œæˆ–è€…æ‰€æœ‰slaveçš„å»¶è¿Ÿéƒ½å¤§äº10ç§’æ—¶ï¼Œå¼ºåˆ¶å…³é—­masterå†™åŠŸèƒ½ï¼Œåœæ­¢æ•°æ®åŒæ­¥</p><ul><li>slaveæ•°é‡ç”±slaveå‘é€ <code>replconf ack</code> å‘½ä»¤åšç¡®è®¤</li><li>slaveå»¶è¿Ÿç”±slaveå‘é€<code>replconf ack</code>å‘½ä»¤åšç¡®è®¤</li></ul><p>å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">slave-&gt;master: å‘é€æŒ‡ä»¤ï¼šreplconf ack &lt;slaveä¿å­˜çš„offset&gt; \n(æ•°æ®åŒæ­¥é˜¶æ®µæ­¤å¤„å‘é€çš„æ˜¯: pysnc2æŒ‡ä»¤)<br>note right of master: æ¥æ”¶å‘½ä»¤ï¼Œ\nåˆ¤å®šoffsetæ˜¯å¦åœ¨å¤åˆ¶ç¼“å†²åŒºä¸­ã€‚<br>note right of master: å¦‚æœoffsetä¸åœ¨ç¼“å†²åŒº,\nåˆ™æ‰§è¡Œå…¨é‡å¤åˆ¶;<br>note right of master: å¦‚æœoffsetåœ¨ç¼“å†²åŒºï¼Œ\nä¸”slaveçš„offsetå’Œmasterå½“å‰offsetç›¸åŒï¼Œ\nåˆ™å¿½ç•¥<br>note right of master: å¦‚æœoffsetåœ¨ç¼“å†²åŒºï¼Œ\nä½†slaveçš„offsetå’Œmasterçš„offsetä¸åŒï¼Œ\nåˆ™è¿›è¡Œéƒ¨åˆ†å¤åˆ¶<br>master-&gt;slave: å‘é€ +CONTINUE &lt;masterå½“å‰çš„offset&gt; \n é€šè¿‡socketå‘é€å¤åˆ¶ç¼“å†²åŒºä¸­\nä»slaveçš„offsetåˆ°masterçš„offset\nä¹‹é—´çš„æ•°æ®<br>note left of slave: æ”¶åˆ° +CONTINUE \nä¿å­˜masterçš„offsetï¼Œ\næ¥æ”¶ä¿¡æ¯åï¼Œæ‰§è¡Œbgrewriteaofï¼Œ\næ¢å¤æ•°æ®<br></code></pre></td></tr></table></figure><h1 id="ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜">ä¸»ä»å¤åˆ¶å¸¸è§é—®é¢˜</h1><h2 id="é¢‘ç¹çš„å…¨é‡å¤åˆ¶">é¢‘ç¹çš„å…¨é‡å¤åˆ¶</h2><p>å…¨é‡å¤åˆ¶é—®é¢˜1ï¼š</p><p>ä¼´éšç€ç³»ç»Ÿçš„è¿è¡Œï¼Œmasterçš„æ•°æ®é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸€æ—¦masteré‡å¯ï¼Œrunidå°†å‘ç”Ÿå˜åŒ–ï¼Œä¼šå¯¼è‡´å…¨éƒ¨slaveçš„å…¨é‡å¤åˆ¶æ“ä½œã€‚</p><p>å†…éƒ¨ä¼˜åŒ–è°ƒæ•´æ–¹æ¡ˆï¼šï¼ˆä¸éœ€è¦è°ƒæ•´ï¼‰</p><ol type="1"><li>Masterå†…éƒ¨åˆ›å»º master_replidå˜é‡ï¼Œä½¿ç”¨runidç›¸åŒçš„ç­–ç•¥ç”Ÿæˆï¼Œé•¿åº¦41ä½ï¼Œå¹¶å‘é€ç»™æ‰€æœ‰slave</li><li>åœ¨masterå…³é—­æ—¶æ‰§è¡Œå‘½ä»¤ <code>shutdown save</code>ï¼Œè¿›è¡Œ RDBæŒä¹…åŒ–ï¼Œå°†runidä¸offsetä¿å­˜åˆ°RDBæ–‡ä»¶ä¸­<ul><li>repl-id repl-offset</li><li>é€šè¿‡redis-check-rdbå‘½ä»¤ï¼ˆlinuxå‘½ä»¤ï¼Œä¸æ˜¯åœ¨redis-cliå®¢æˆ·ç«¯æ‰§è¡Œï¼‰å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯</li></ul></li><li>masteré‡å¯ååŠ è½½RDBæ–‡ä»¶ï¼Œæ¢å¤æ•°æ®<br>é‡å¯åï¼Œå°†RDBæ–‡ä»¶ä¸­ä¿å­˜çš„ repl-id ä¸ repl-offset åŠ è½½åˆ°å†…å­˜ä¸­<ul><li>master_repl_id=repl Â master_repl_offset=repl-offset</li><li>é€šè¿‡infoå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯</li></ul></li></ol><p>ä½œç”¨ï¼šæœ¬æœºä¿å­˜ä¸Šæ¬¡runidï¼Œé‡å¯åæ¢å¤è¯¥å€¼ï¼Œä½¿æ‰€æœ‰slaveè®¤ä¸ºè¿˜æ˜¯ä¹‹å‰çš„master</p><p>å…¨é‡å¤åˆ¶é—®é¢˜2ï¼š</p><p>ç°è±¡ï¼šç½‘ç»œç¯å¢ƒä¸ä½³ï¼Œå‡ºç°ç½‘ç»œä¸­æ–­ï¼Œslaveä¸æä¾›æœåŠ¡ã€‚</p><p>åŸå› ï¼šå¤åˆ¶ç¼“å†²åŒºè¿‡å°ï¼Œæ–­ç½‘åslaveçš„offsetè¶Šç•Œï¼Œè§¦å‘å…¨é‡å¤åˆ¶</p><p>æœ€ç»ˆç»“æœï¼šslaveåå¤è¿›è¡Œå…¨é‡å¤åˆ¶</p><p>è§£å†³æ–¹æ¡ˆï¼šä¿®æ”¹å¤åˆ¶ç¼“å†²åŒºå¤§å°</p><p>å»ºè®®è®¾ç½®å¦‚ä¸‹ï¼š</p><ol type="1"><li>æµ‹ç®—ä»masteråˆ°slaveçš„é‡è¿å¹³å‡æ—¶é•¿second</li><li>è·å–masterå¹³å‡æ¯ç§’äº§ç”Ÿå†™å‘½ä»¤æ•°æ®æ€»é‡ write_size_per_second</li><li><code>æœ€ä¼˜å¤åˆ¶ç¼“å†²åŒºç©ºé—´ = 2 * second * write_size_per_second</code></li></ol><h2 id="é¢‘ç¹çš„ç½‘ç»œä¸­æ–­">é¢‘ç¹çš„ç½‘ç»œä¸­æ–­</h2><p>ç½‘ç»œä¸­æ–­é—®é¢˜1ï¼š</p><p>ç°è±¡ï¼šmasterçš„cpuå ç”¨è¿‡é«˜ï¼Œæˆ–è€…slaveé¢‘ç¹æ–­å¼€è¿æ¥</p><p>åŸå› ï¼š</p><ul><li>slaveæ¯1ç§’å‘é€ <code>replconf ack</code> å‘½ä»¤åˆ°master</li><li>å½“slaveæ¥æ”¶åˆ°äº†æ…¢æŸ¥è¯¢ï¼ˆ<code>keys *</code>ã€<code>hgetall</code>ç­‰ï¼‰ï¼Œä¼šå¤§é‡å ç”¨cpuæ€§èƒ½</li><li>masteræ¯1ç§’è°ƒç”¨å¤åˆ¶å®šæ—¶å‡½æ•°<code>replicationCron()</code>ï¼Œæ¯”å¯¹slaveå‘ç°é•¿æ—¶é—´æ²¡æœ‰è¿›è¡Œå“åº”</li></ul><p>æœ€ç»ˆç»“æœï¼šmasterå„ç§èµ„æºï¼ˆè¾“å‡ºç¼“å†²åŒºã€å¸¦å®½ã€è¿æ¥ç­‰ï¼‰è¢«ä¸¥é‡å ç”¨</p><p>è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œç¡®è®¤æ˜¯å¦é‡Šæ”¾slaveã€‚</p><p>å¯¹åº”çš„é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">repl-timeout<br></code></pre></td></tr></table></figure><p>è¯¥å‚æ•°å®šä¹‰äº†è¶…æ—¶æ—¶é—´çš„é˜ˆå€¼ï¼ˆé»˜è®¤60ç§’ï¼‰ï¼Œè¶…è¿‡è¯¥å€¼ï¼Œé‡Šæ”¾slaveã€‚</p><p>ç½‘ç»œä¸­æ–­é—®é¢˜2ï¼š</p><p>ç°è±¡ï¼šslaveä¸masterè¿æ¥æ–­å¼€</p><p>åŸå› ï¼š</p><ul><li>masterå‘é€pingæŒ‡ä»¤é¢‘åº¦è¾ƒä½</li><li>masterè®¾å®šè¶…æ—¶æ—¶é—´è¾ƒçŸ­</li><li>pingæŒ‡ä»¤åœ¨ç½‘ç»œä¸­å­˜åœ¨ä¸¢åŒ…</li></ul><p>è§£å†³æ–¹æ¡ˆï¼šæé«˜pingæŒ‡ä»¤å‘é€çš„é¢‘åº¦</p><p>å¯¹åº”çš„é…ç½®é¡¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">repl-ping-slave-period<br></code></pre></td></tr></table></figure><p>è¶…æ—¶æ—¶é—´repl-timeçš„æ—¶é—´è‡³å°‘æ˜¯pingæŒ‡ä»¤é¢‘åº¦çš„5åˆ°10å€ï¼Œå¦åˆ™slaveå¾ˆå®¹æ˜“åˆ¤å®šè¶…æ—¶</p><h2 id="æ•°æ®ä¸ä¸€è‡´">æ•°æ®ä¸ä¸€è‡´</h2><p>ç°è±¡ï¼šå¤šä¸ªslaveè·å–ç›¸åŒæ•°æ®ä¸åŒæ­¥</p><p>åŸå› ï¼šç½‘ç»œä¿¡æ¯ä¸åŒæ­¥ï¼Œæ•°æ®å‘é€æœ‰å»¶è¿Ÿ</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä¼˜åŒ–ä¸»ä»é—´çš„ç½‘ç»œç¯å¢ƒï¼Œé€šå¸¸æ”¾ç½®åœ¨åŒä¸€ä¸ªæœºæˆ¿éƒ¨ç½²ï¼Œå¦‚ä½¿ç”¨é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å™¨æ—¶è¦æ³¨æ„æ­¤ç°è±¡</li><li>ç›‘æ§ä¸»ä»èŠ‚ç‚¹å»¶è¿Ÿï¼ˆé€šè¿‡offsetåˆ¤æ–­ï¼‰ï¼Œå¦‚æœslaveå»¶è¿Ÿè¿‡å¤§ï¼Œæš‚æ—¶å±è”½ç¨‹åºå¯¹è¯¥slaveçš„æ•°æ®è®¿é—®<br>å¯¹åº”é…ç½®ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">slave-serve-stale-data yes|no<br></code></pre></td></tr></table></figure><p>å¼€å¯åä»…å“åº”infoã€slaveofç­‰å°‘æ•°å‘½ä»¤ï¼ˆæ…ç”¨ï¼Œé™¤éå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜ï¼‰</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. é«˜çº§æ•°æ®ç±»å‹</title>
    <link href="/2024/12/07/Redis/12-%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/2024/12/07/Redis/12-%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="bitmaps">Bitmaps</h1><p>æŒ‰ä½æ“ä½œã€‚</p><p>åŸºç¡€æ“ä½œï¼š</p><ul><li>è·å–æŒ‡å®šKyeå¯¹åº”åç§»é‡ä¸Šçš„bitå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">getbit key offset<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®æŒ‡å®škeyå¯¹åº”åç§»é‡ä¸Šçš„bitå€¼ï¼Œvalueåªèƒ½æ˜¯1æˆ–0</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">setbit key offset value<br></code></pre></td></tr></table></figure><p>æ‰©å±•æ“ä½œï¼š</p><ul><li>å¯¹æŒ‡å®škeyæŒ‰ä½è¿›è¡Œäº¤ã€å¹¶ã€éã€å¼‚æˆ–æ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°destKeyä¸­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bitop op destKey key1 [key2 ...]<br></code></pre></td></tr></table></figure><p>opé€‰é¡¹ï¼š</p><pre><code class="hljs">- andï¼šäº¤- orï¼šå¹¶- not ï¼šé- xorï¼šå¼‚æˆ–</code></pre><ul><li>ç»Ÿè®¡æŒ‡å®škeyä¸­1çš„æ•°é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bitcount key [start end]<br></code></pre></td></tr></table></figure><h1 id="hyperloglog">HyperLogLog</h1><p>ç»Ÿè®¡ä¸é‡å¤çš„æ•°æ®æ•°é‡ã€‚</p><p>åŸºæ•°ï¼šæ•°æ®é›†ä¸é‡å¤çš„å…ƒç´ ä¸ªæ•°</p><p>HyperLogLogæ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ï¼Œè¿ç”¨äº†LogLogç®—æ³•</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pfadd key element [element ...]<br></code></pre></td></tr></table></figure><ul><li>ç»Ÿè®¡æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pfcount key [key ...]<br></code></pre></td></tr></table></figure><ul><li>åˆå¹¶æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pfmerge destKey sourceKey [sourceKey ...]<br></code></pre></td></tr></table></figure><p>HyperLogLogç”¨äºè¿›è¡ŒåŸºæ•°ç»Ÿè®¡ï¼Œä¸æ˜¯é›†åˆï¼Œä¸ä¿å­˜æ•°æ®ï¼Œåªè®°å½•æ•°é‡è€Œä¸æ˜¯å…·ä½“æ•°æ®ã€‚</p><p>æ ¸å¿ƒæ˜¯æŠ€æœ¯ä¼°ç®—ç®—æ³•ï¼Œæœ€ç»ˆæ•°å€¼å­˜åœ¨ä¸€å®šè¯¯å·®ã€‚</p><p>è¯¯å·®èŒƒå›´ï¼šæŠ€æœ¯ä¼°è®¡çš„ç»“æœæ˜¯ä¸€ä¸ªå¸¦æœ‰ 0.81% æ ‡å‡†é”™è¯¯çš„è¿‘ä¼¼å€¼ã€‚</p><p>è€—è´¹ç©ºé—´æå°ï¼Œæ¯ä¸ªhyperloglog keyå ç”¨äº†12Kçš„å†…å­˜ç”¨äºæ ‡è®°åŸºæ•°ã€‚</p><p>pfaddå‘½ä»¤ä¸æ˜¯ä¸€æ¬¡æ€§åˆ†é…12Kå†…å­˜ä½¿ç”¨ï¼Œä¼šéšç€åŸºæ•°çš„å¢åŠ è€Œå†…å­˜é€æ¸å¢å¤§ã€‚</p><p>pfmergeå‘½ä»¤åˆå¹¶åå ç”¨çš„å­˜å‚¨ç©ºé—´ä¸º12Kï¼Œæ— è®ºåˆå¹¶ä¹‹å‰æ•°æ®é‡å¤šå°‘ã€‚</p><h1 id="geo">GEO</h1><p>è®¡ç®—åœ°å›¾ä¸Šä¸¤ä¸ªåœ°ç†åæ ‡ç‚¹è·ç¦»ï¼ˆæŒ‰ç…§ç»çº¬åº¦ç®—çš„æ°´å¹³äºŒç»´ä½ç½®è·ç¦»ï¼Œä¸è®¡ç®—é«˜åº¦ï¼‰ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ åæ ‡ç‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">geoadd key longitude latitude member [longitude latitude memeber...]<br></code></pre></td></tr></table></figure><ul><li>è·å–åæ ‡ç‚¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">geopos key memebr [member ...]<br></code></pre></td></tr></table></figure><ul><li>è®¡ç®—åæ ‡ç‚¹è·ç¦»</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">geodist key member1 member2 [unit]<br></code></pre></td></tr></table></figure><ul><li>æ ¹æ®åæ ‡æ±‚èŒƒå›´å†…çš„æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">georadius key longitude latitude radius m|km|ft|mi [widthcoord] [withdist] [withhash] [count count]<br></code></pre></td></tr></table></figure><ul><li>æ ¹æ®ç‚¹æ±‚èŒƒå›´å†…æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">georadiusbymembers key member radius m|km|ft|mi [withcoord] [withdist] [withhash] [count count]<br></code></pre></td></tr></table></figure><ul><li>è·å–æŒ‡å®šç‚¹å¯¹åº”çš„åæ ‡hash</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">geohash key member [member ...]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. æœåŠ¡å™¨é…ç½®</title>
    <link href="/2024/12/07/Redis/11-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"/>
    <url>/2024/12/07/Redis/11-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="æœåŠ¡å™¨åŸºç¡€é…ç½®">æœåŠ¡å™¨åŸºç¡€é…ç½®</h1><p>å•ä½ï¼š</p><p>Redisçš„å•ä½å¤§å°å†™ä¸æ•æ„Ÿã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain"># 1k =&gt; 1000 bytes<br># 1kb =&gt; 1024 bytes<br># 1m =&gt; 1000000 bytes<br># 1mb =&gt; 1024*1024 bytes<br># 1g =&gt; 1000000000 bytes<br># 1gb =&gt; 1024*1024*1024 bytes<br></code></pre></td></tr></table></figure><p>ç½‘ç»œé…ç½®ï¼š</p><ul><li>ç»‘å®šä¸»æœºåœ°å€</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">bind 127.0.0.1<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®æœåŠ¡å™¨ç«¯å£å·</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">port 6379<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®tcpçš„backlog</li></ul><blockquote><p>backlogå…¶å®æ˜¯ä¸€ä¸ªè¿æ¥é˜Ÿåˆ—ã€‚</p><p>backlogé˜Ÿåˆ—æ€»å’Œ = æœªå®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ— + å·²ç»å®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ—ã€‚</p><p>åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œéœ€è¦ä¸€ä¸ªé«˜backlogå€¼æ¥é¿å…æ…¢å®¢æˆ·ç«¯è¿æ¥é—®é¢˜ã€‚æ³¨æ„Linuxå†…æ ¸ä¼šå°†è¿™ä¸ªå€¼å‡å°åˆ°/proc/sys/net/core/somaxconnçš„å€¼ï¼Œæ‰€ä»¥éœ€è¦ç¡®è®¤å¢å¤§somaxconnå’Œtcp_max_syn_backlogä¸¤ä¸ªå€¼æ¥è¾¾åˆ°æƒ³è¦çš„æ•ˆæœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">tcp-backlog 511<br></code></pre></td></tr></table></figure><ul><li>å®¢æˆ·ç«¯é—²ç½®ç­‰å¾…æœ€å¤§æ—¶é•¿ï¼Œè¾¾åˆ°æœ€å¤§å€¼åå…³é—­è¿æ¥ã€‚å¦‚éœ€å…³é—­è¯¥åŠŸèƒ½ï¼Œè®¾ç½®ä¸º0</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">timeout 0<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®tcp-keepalive</li></ul><blockquote><p>å•ä½ä¸ºç§’ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™ä¸ä¼šè¿›è¡ŒKeepaliveæ£€æµ‹ï¼Œå»ºè®®è®¾ç½®æˆ60</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">tcp-keepalive 300<br></code></pre></td></tr></table></figure><p>æœåŠ¡å™¨ç«¯è®¾å®šï¼š</p><ul><li>è®¾ç½®æœåŠ¡å™¨ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">daemonize yes|no<br></code></pre></td></tr></table></figure><p>å½“ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨æ—¶ï¼ŒRediså°†ä¼šç”Ÿæˆä¸€ä¸ªpidæ–‡ä»¶ã€‚pidæ–‡ä»¶è·¯å¾„é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">pidfile /var/run/redis_6379.pid<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®æ•°æ®åº“æ•°é‡</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">databases 16<br></code></pre></td></tr></table></figure><p>æ—¥å¿—é…ç½®ï¼š</p><ul><li>è®¾ç½®æœåŠ¡å™¨ä»¥æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«<br>é»˜è®¤ä¸ºverboseã€‚å¼€å‘æœŸå¯ä»¥è®¾ç½®ä¸ºverboseï¼Œç”Ÿäº§ç¯å¢ƒé…ç½®ä¸ºnoticeï¼Œç®€åŒ–æ—¥å¿—è¾“å‡º</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">loglevel debug|verbose|notice|warning<br></code></pre></td></tr></table></figure><ul><li>æ—¥å¿—æ–‡ä»¶å</li></ul><blockquote><p>å¦‚æœè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼ŒRediså°†ä¼šä½¿ç”¨æ ‡å‡†è¾“å‡ºæµè¾“å‡ºæ—¥å¿—ã€‚</p><p>å¦‚æœä½¿ç”¨çš„å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨ï¼Œæ ‡å‡†è¾“å‡ºæµå°†è¢«å‘é€åˆ° /dev/null</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">logfile &quot;&quot;<br></code></pre></td></tr></table></figure><ul><li>æ˜¯å¦å°†æ—¥å¿—è¾“å‡ºåˆ°syslogä¸­</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">syslog-enabled no<br></code></pre></td></tr></table></figure><ul><li>æŒ‡å®šsyslogé‡Œçš„æ—¥å¿—æ ‡å¿—</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">syslog-ident redis<br></code></pre></td></tr></table></figure><ul><li>æŒ‡å®šsyslogè®¾å¤‡ï¼Œå€¼å¯ä»¥æ˜¯USERæˆ–è€… LOCAL0-LOCAL7</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">syslog-facility local0<br></code></pre></td></tr></table></figure><p>å¯¹å®¢æˆ·ç«¯é…ç½®ï¼š</p><ul><li>è®¾ç½®åŒä¸€æ—¶é—´æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ã€‚å½“å®¢æˆ·ç«¯è¿æ¥åˆ°è¾¾ä¸Šé™ï¼ŒRedisä¼šå…³é—­æ–°çš„è¿æ¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">maxclients 10000<br></code></pre></td></tr></table></figure><p>å¤šæœåŠ¡å™¨å¿«æ·é…ç½®ï¼š</p><ul><li>å¯¼å…¥å¹¶åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶ä¿¡æ¯ï¼Œç”¨äºå¿«é€Ÿåˆ›å»ºrediså…¬å…±é…ç½®è¾ƒå¤šçš„rediså®ä¾‹é…ç½®æ–‡ä»¶ï¼Œä¾¿äºç»´æŠ¤</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">include /path/server-ç«¯å£å·.conf<br></code></pre></td></tr></table></figure><p>å®‰å…¨é…ç½®ï¼š</p><ul><li>é…ç½®å¯†ç </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">requirepass å¯†ç <br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨authæŒ‡ä»¤ç™»å½•</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">auth å¯†ç <br></code></pre></td></tr></table></figure><p>åœ¨redis-cliå®¢æˆ·ç«¯è·å–é…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">config get å¯¹åº”é…ç½®<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š<code>config get dir</code></p><p>è®¾ç½®é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">config set é…ç½®é¡¹ value<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. åˆ é™¤ç­–ç•¥</title>
    <link href="/2024/12/07/Redis/10-%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/"/>
    <url>/2024/12/07/Redis/10-%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="redisä¸­çš„æ•°æ®ç‰¹å¾">Redisä¸­çš„æ•°æ®ç‰¹å¾</h1><p>Redisæ˜¯ä¸€ç§å†…å­˜çº§æ•°æ®åº“ï¼Œæ‰€æœ‰æ•°æ®å‡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡TTLæŒ‡ä»¤è·å–å…¶çŠ¶æ€ã€‚</p><ul><li>XXï¼šå…·æœ‰æ—¶æ•ˆæ€§çš„æ•°æ®</li><li>-1 ï¼šæ°¸ä¹…æœ‰æ•ˆçš„æ•°æ®</li><li>-2 ï¼šå·²ç»è¿‡æœŸçš„æ•°æ®ï¼Œæˆ–è¢«åˆ é™¤çš„æ•°æ®ï¼Œæˆ–æœªå®šä¹‰çš„æ•°æ®</li></ul><p>Redisçš„æ•°æ®åˆ é™¤ç­–ç•¥ï¼š</p><ul><li>å®šæ—¶åˆ é™¤</li><li>æƒ°æ€§åˆ é™¤</li><li>å®šæœŸåˆ é™¤</li></ul><p>åˆ é™¤ç­–ç•¥çš„ç›®çš„ï¼šåœ¨å†…å­˜å ç”¨ä¸CPUå ç”¨ä¹‹é—´å¯»æ±‚å¹³è¡¡ï¼ˆåˆ é™¤ä¸åŠæ—¶ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œåˆ é™¤è¿‡äºé¢‘ç¹åˆä¼šå¢åŠ CPUè´Ÿæ‹…ï¼‰ã€‚</p><p>æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨æœºæ„ï¼š</p><p>expireã€expireatã€pexpireã€pexpireatéƒ½å¯ä»¥è®¾ç½®æ—¶æ•ˆæ€§æ•°æ®ï¼Œä½¿ç”¨è¿™äº›å‘½ä»¤åï¼Œredisä¼šå…ˆå–åˆ°è®¾ç½®äº†æ—¶æ•ˆæ€§çš„key å¯¹åº”çš„valueæ‰€åœ¨å†…å­˜åœ°å€ã€‚</p><p>redisçš„æ¯ä¸€ä¸ªæ•°æ®åº“ä¸­éƒ½æœ‰ä¸€å—expiresç©ºé—´ä¸“é—¨å­˜å‚¨æ—¶æ•ˆæ€§æ•°æ®ï¼Œå°†valueçš„å†…å­˜åœ°å€ä½œä¸ºkeyï¼Œå°†è®¾ç½®çš„æ—¶é—´ä½œä¸ºvalueå­˜å‚¨åœ¨expiresç©ºé—´å†…ã€‚</p><h1 id="å®šæ—¶åˆ é™¤">å®šæ—¶åˆ é™¤</h1><p>åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“keyè®¾ç½®æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸”è¿‡æœŸæ—¶é—´åˆ°è¾¾æ—¶ï¼Œç”±å®šæ—¶å™¨ä»»åŠ¡ç«‹å³æ‰§è¡Œå¯¹é”®çš„åˆ é™¤æ“ä½œã€‚</p><p>ä¼˜ç‚¹ï¼šèŠ‚çº¦å†…å­˜ï¼Œåˆ°æ—¶å°±åˆ é™¤ï¼Œå¿«é€Ÿé‡Šæ”¾æ‰ä¸å¿…è¦çš„å†…å­˜å ç”¨ã€‚</p><p>ç¼ºç‚¹ï¼šCPUå‹åŠ›å¤§ï¼Œæ— è®ºCPUæ­¤æ—¶è´Ÿè½½é‡å¤šé«˜ï¼Œå‡å ç”¨å†…å­˜ï¼Œä¼šå½±å“redisæœåŠ¡å™¨å“åº”æ—¶é—´å’ŒæŒ‡ä»¤ååé‡ã€‚</p><h1 id="æƒ°æ€§åˆ é™¤">æƒ°æ€§åˆ é™¤</h1><p>æ•°æ®åˆ°è¾¾è¿‡æœŸæ—¶é—´ï¼Œä¸ä½œå¤„ç†ï¼Œç­‰ä¸‹æ¬¡è®¿é—®è¯¥æ•°æ®æ—¶åˆ é™¤ã€‚</p><p>ä¼˜ç‚¹ï¼šèŠ‚çº¦CPUæ€§èƒ½ï¼Œå‘ç°å¿…é¡»åˆ é™¤çš„æ—¶å€™æ‰åˆ é™¤</p><p>ç¼ºç‚¹ï¼šå†…å­˜å‹åŠ›å¤§ï¼Œå‡ºç°é•¿æœŸå ç”¨å†…å­˜çš„æ•°æ®</p><h1 id="å®šæœŸåˆ é™¤">å®šæœŸåˆ é™¤</h1><ol type="1"><li>Rediså¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–æ—¶ï¼Œè¯»å–é…ç½®server.hzçš„å€¼ï¼Œé»˜è®¤ä¸º10ï¼›</li><li>æ¯ç§’æ‰§è¡Œ server.hz æ¬¡çš„<code>serverCron()</code>è½®è¯¢ï¼›</li><li><code>serverCron()</code>ä¸­è°ƒç”¨<code>databasesCron()</code>å¯¹æ¯ä¸€ä¸ªæ•°æ®åº“çš„expiresè½®è¯¢ï¼›</li><li><code>databasesCron()</code>è°ƒç”¨<code>activeExpireCycle()</code>å¯¹expiresç©ºé—´è¿›è¡Œæ£€æŸ¥ï¼›</li><li><code>activeExpireCycle()</code>å¯¹redisä¸­æ¯ä¸ªæ•°æ®åº“çš„expiresç©ºé—´é€ä¸€è¿›è¡Œæ£€æµ‹ï¼Œæ¯æ¬¡æ‰§è¡Œ250ms/server.hz</li><li>å¯¹æŸä¸ªexpiresç©ºé—´æ£€æŸ¥æ—¶ï¼ŒéšæœºæŒ‘é€‰Wä¸ªkeyæ£€æµ‹<br>å¦‚æœkeyè¶…æ—¶ï¼Œåˆ é™¤keyã€‚<br>å¦‚æœä¸€ä¸ªè½®æ¬¡ä¸­åˆ é™¤çš„keyçš„æ•°é‡ &gt; W<em>25%ï¼Œåˆ™å¾ªç¯è¯¥è¿‡ç¨‹ã€‚<br>å¦‚æœå½“å‰è½®æ¬¡ä¸­åˆ é™¤çš„keyçš„æ•°é‡ &lt;=W</em>25%ï¼Œæ£€æŸ¥ä¸‹ä¸€ä¸ªexpiresç©ºé—´ï¼Œæ¯ä¸ªæ•°æ®åº“çš„expireséƒ½æ£€æŸ¥ä¸€é<br>Wçš„å–å€¼ = ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOPå±æ€§å€¼</li><li>å‚æ•° current_db ç”¨äºè®°å½•<code>activeExpireCycle()</code>è¿›å…¥å“ªä¸ªexpiresç©ºé—´æ‰§è¡Œ</li><li>å¦‚æœ<code>activeExpireCycle()</code>æ‰§è¡Œæ—¶é—´åˆ°æœŸï¼Œä¸‹æ¬¡ä»current_dbç»§ç»­å‘ä¸‹æ‰§è¡Œ</li></ol><p>å®šæœŸåˆ é™¤æ˜¯å‘¨æœŸæ€§è½®è¯¢redisåº“ä¸­çš„æ—¶æ•ˆæ€§æ•°æ®ï¼Œé‡‡ç”¨éšæœºæŠ½å–çš„ç­–ç•¥ï¼Œåˆ©ç”¨è¿‡æœŸæ•°æ®å æ¯”çš„æ–¹å¼æ§åˆ¶åˆ é™¤é¢‘åº¦ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>cpuæ€§èƒ½å ç”¨è®¾ç½®æœ‰å³°å€¼ï¼Œæ£€æµ‹é¢‘åº¦å¯è‡ªå®šä¹‰è®¾ç½®ã€‚</li><li>å†…å­˜å‹åŠ›ä¸æ˜¯å¾ˆå¤§ï¼Œé•¿æœŸå ç”¨å†…å­˜çš„å†·æ•°æ®ä¼šè¢«æŒç»­æ¸…ç†</li></ul><p>Redisä½¿ç”¨çš„æ˜¯ å®šæ—¶åˆ é™¤ + å®šæœŸåˆ é™¤</p><h1 id="é€å‡ºç®—æ³•">é€å‡ºç®—æ³•</h1><p>Redisä½¿ç”¨å†…å­˜å­˜å‚¨æ•°æ®ï¼Œåœ¨æ‰§è¡Œæ¯ä¸€ä¸ªå‘½ä»¤å‰ï¼Œä¼šè°ƒç”¨<code>freeMemoryIfNeeded()</code>æ£€æµ‹å†…å­˜æ˜¯å¦å……è¶³ã€‚å¦‚æœå†…å­˜ä¸æ»¡è¶³æ–°åŠ å…¥æ•°æ®çš„æœ€ä½å­˜å‚¨è¦æ±‚ï¼ŒRedisè¦ä¸´æ—¶åˆ é™¤ä¸€äº›æ•°æ®ä¸ºå½“å‰æŒ‡ä»¤æ¸…ç†å­˜å‚¨ç©ºé—´ï¼ˆæ•°æ®æ·˜æ±°ï¼Œä¹Ÿç§°ä¸ºæ•°æ®é€å‡ºï¼‰ã€‚æ¸…ç†æ•°æ®çš„ç­–ç•¥ç§°ä¸ºé€å‡ºç®—æ³•ã€‚</p><p>é€å‡ºæ•°æ®çš„è¿‡ç¨‹ä¸æ˜¯100%èƒ½å¤Ÿæ¸…ç†å‡ºè¶³å¤Ÿçš„å¯ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå¦‚æœä¸æˆåŠŸåˆ™åå¤æ‰§è¡Œã€‚å½“å¯¹æ‰€æœ‰æ•°æ®å°è¯•å®Œæ¯•åï¼Œå¦‚æœä¸èƒ½è¾¾åˆ°å†…å­˜æ¸…ç†çš„è¦æ±‚ï¼Œå°†å‡ºç°é”™è¯¯ä¿¡æ¯ã€‚</p><p>å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®ï¼š</p><ul><li>æœ€å¤§å¯ä½¿ç”¨å†…å­˜ï¼ˆé…ç½®ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">maxmemory<br></code></pre></td></tr></table></figure><p>ä½œç”¨ï¼šå ç”¨ç‰©ç†å†…å­˜çš„æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶ã€‚ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®éœ€æ±‚è®¾å®šï¼Œé€šå¸¸è®¾ç½®åœ¨50%ä»¥ä¸Šã€‚</p><ul><li>æ¯æ¬¡é€‰å–å¾…åˆ é™¤æ•°æ®çš„ä¸ªæ•°</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">maxmemory-samples<br></code></pre></td></tr></table></figure><p>é€‰å–æ•°æ®æ˜¯å¹¶ä¸ä¼šå…¨åº“æ‰«æã€‚å…¨åº“æ‰«æä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½æ¶ˆè€—ï¼Œé™ä½è¯»å†™æ€§èƒ½ã€‚å› æ­¤é‡‡ç”¨éšæœºè·å–æ•°æ®çš„æ–¹å¼ä½œä¸ºå¾…æ£€æµ‹åˆ é™¤æ•°æ®ã€‚</p><ul><li>é€å‡ºç®—æ³•ç­–ç•¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">maxmemory-policy<br></code></pre></td></tr></table></figure><p>è¾¾åˆ°æœ€å¤§å†…å­˜åçš„ï¼Œå¯¹è¢«æŒ‘é€‰å‡ºæ¥çš„æ•°æ®è¿›è¡Œåˆ é™¤çš„ç­–ç•¥</p><p>é€å‡ºç®—æ³•ç­–ç•¥ï¼ˆmaxmemory-policyï¼‰å¯ä»¥é…ç½®çš„é€‰é¡¹ï¼š</p><ul><li>æ£€æµ‹æ˜“å¤±æ•°æ®ï¼ˆå¯èƒ½ä¼šè¿‡æœŸçš„æ•°æ®é›†server.db[i].expiresï¼‰<ul><li>volatile-lru</li></ul></li></ul><blockquote><p>ï¼ˆLeast RecentlyUsedï¼‰æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ï¼ˆç¦»ç°åœ¨æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼‰</p><p>å»ºè®®é…ç½®</p></blockquote><pre><code class="hljs">-  volatile-lfu </code></pre><blockquote><p>ï¼ˆLeast Frequently Usedï¼‰æŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±°</p></blockquote><pre><code class="hljs">-  volatile-ttl </code></pre><blockquote><p>æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°</p></blockquote><pre><code class="hljs">-  volatile-random </code></pre><blockquote><p>ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</p></blockquote><ul><li>æ£€æµ‹å…¨åº“æ•°æ®ï¼ˆæ‰€æœ‰æ•°æ®é›† server.db[i].dictï¼‰<ul><li>allkeys-lru</li></ul></li></ul><blockquote><p>æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°</p></blockquote><pre><code class="hljs">-  allkeys-lfu </code></pre><blockquote><p>æŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±°</p></blockquote><pre><code class="hljs">-  allkeys-random </code></pre><blockquote><p>ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</p></blockquote><ul><li>æ”¾å¼ƒæ•°æ®é©±é€<ul><li>no-enviction</li></ul></li></ul><blockquote><p>ç¦æ­¢é©±é€æ•°æ®ï¼ˆredis 4.0 çš„é»˜è®¤ç­–ç•¥ï¼‰ï¼Œä¼šå¼•å‘é”™è¯¯ OOMï¼ˆOut OfMemoryï¼‰</p></blockquote><p>å¯ä»¥ä½¿ç”¨ <code>info</code> å‘½ä»¤è¾“å‡ºç›‘æ§ä¿¡æ¯ï¼ŒæŸ¥è¯¢ç¼“å­˜ hitï¼ˆå‘½ä¸­ï¼‰ å’Œmiss çš„æ¬¡æ•°ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒä¼˜redisé…ç½®</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>09. äº‹åŠ¡</title>
    <link href="/2024/12/07/Redis/09-%E4%BA%8B%E5%8A%A1/"/>
    <url>/2024/12/07/Redis/09-%E4%BA%8B%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="redisäº‹åŠ¡">Redisäº‹åŠ¡</h1><p>Redisäº‹åŠ¡å°±æ˜¯ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œçš„é˜Ÿåˆ—ï¼Œå°†ä¸€ç³»åˆ—é¢„å®šä¹‰å‘½ä»¤åŒ…è£…æˆä¸€ä¸ªæ•´ä½“ï¼ˆä¸€ä¸ªé˜Ÿåˆ—ï¼‰ã€‚å½“æ‰§è¡Œæ—¶ï¼Œä¸€æ¬¡æ€§æŒ‰ç…§æ·»åŠ é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«æ‰“æ–­æˆ–è€…å¹²æ‰°ã€‚</p><p>ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œä¸€æ¬¡æ€§ã€é¡ºåºæ€§ã€æ’ä»–æ€§çš„æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>å¼€å¯äº‹åŠ¡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">multi<br></code></pre></td></tr></table></figure><p>è®¾å®šäº‹åŠ¡çš„å¼€å§‹ä½ç½®ï¼Œæ‰§è¡Œæ­¤æŒ‡ä»¤åï¼Œåç»­çš„æ‰€æœ‰æŒ‡ä»¤å‡åŠ å…¥åˆ°äº‹åŠ¡ä¸­ã€‚</p><ul><li>æ‰§è¡Œäº‹åŠ¡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">exec<br></code></pre></td></tr></table></figure><p>è®¾ç½®äº‹åŠ¡çš„ç»“æŸä½ç½®ï¼ŒåŒæ—¶æ‰§è¡Œäº‹åŠ¡ã€‚ä¸ <code>multi</code>æˆå¯¹å‡ºç°ã€æˆå¯¹ä½¿ç”¨ã€‚</p><ul><li>å–æ¶ˆäº‹åŠ¡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">discard<br></code></pre></td></tr></table></figure><p>ç»ˆæ­¢å½“å‰äº‹åŠ¡çš„å®šä¹‰ï¼Œå‘ç”Ÿåœ¨multiä¹‹åã€‚</p><p>ä½¿ç”¨<code>multi</code>åŠ å…¥äº‹åŠ¡çš„å‘½ä»¤æš‚æ—¶è¿›å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¹¶æ²¡æœ‰ç«‹å³æ‰§è¡Œï¼Œåªæœ‰æ‰§è¡Œexecå‘½ä»¤æ‰å¼€å§‹æ‰§è¡Œã€‚å¦‚æœä½¿ç”¨äº†discardï¼Œä¾¿é”€æ¯è¯¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å¦‚æœå‘½ä»¤è¾“å…¥æ—¶è¯­æ³•ä¹¦å†™æœ‰è¯¯ï¼Œä¾‹å¦‚<code>seta name zhangsan</code>ï¼Œåˆ™æ•´ä½“äº‹åŠ¡ä¸­æ‰€æœ‰å‘½ä»¤å‡ä¸ä¼šæ‰§è¡Œï¼ˆåŒ…æ‹¬å“ªäº›è¯­æ³•æ­£ç¡®çš„å‘½ä»¤ä¹Ÿä¸ä¼šæ‰§è¡Œï¼‰</li><li>å¦‚æœå‘½ä»¤æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯æ— æ³•æ­£ç¡®çš„æ‰§è¡Œï¼Œä¾‹å¦‚å¯¹listè¿›è¡Œincræ“ä½œã€‚æ­¤æ—¶äº‹åŠ¡èƒ½å¤Ÿå¯¹æ­£ç¡®çš„å‘½ä»¤è¿›è¡Œæ‰§è¡Œï¼Œå¯¹è¿è¡Œé”™è¯¯çš„å‘½ä»¤ä¸ä¼šæ‰§è¡Œã€‚å·²ç»æ‰§è¡Œå®Œæ¯•çš„å‘½ä»¤å¯¹åº”çš„æ•°æ®ä¸ä¼šè‡ªåŠ¨å›æ»šï¼Œéœ€è¦ç¨‹åºå‘˜è‡ªå·±åœ¨ä»£ç ä¸­å®ç°å›æ»šã€‚</li></ul><h1 id="é”">é”</h1><p>å¯¹keyæ·»åŠ ç›‘è§†é”ï¼Œåœ¨æ‰§è¡Œexecå‰å¦‚æœkeyå‘ç”Ÿäº†å˜åŒ–ï¼Œç»ˆæ­¢äº‹åŠ¡æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">watch key1 [key2 ...]<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼šwatchå‘½ä»¤å¿…é¡»åœ¨multiä¹‹å‰ä½¿ç”¨ï¼Œwatchå’Œmultiä¸­é—´å¯ä»¥è¿›è¡Œå…¶ä»–å‘½ä»¤æ“ä½œã€‚ä¸å¯ä»¥åœ¨multiå¼€å¯äº‹åŠ¡åå†watchã€‚</p><p>watchåªå¯¹ä¸‹ä¸€ä¸ªmultiæœ‰æ•ˆã€‚</p><p>å–æ¶ˆå¯¹æ‰€æœ‰keyçš„ç›‘è§†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">unwatch<br></code></pre></td></tr></table></figure><h1 id="åˆ†å¸ƒå¼é”">åˆ†å¸ƒå¼é”</h1><p>ä½¿ç”¨stringçš„ setnx è®¾ç½®ä¸€ä¸ªkeyç”¨ä½œå…¬å…±é”ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">setnx lock-key value<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨stringç±»å‹çš„ setnxå‘½ä»¤çš„è¿”å›å€¼ç‰¹å¾ï¼Œæœ‰å€¼åˆ™è¿”å›è®¾ç½®å¤±è´¥ï¼Œæ— å€¼åˆ™è¿”å›è®¾ç½®æˆåŠŸã€‚</p><ul><li>å¯¹äºè®¾ç½®æˆåŠŸçš„ï¼Œæ‹¥æœ‰æ§åˆ¶æƒï¼Œè¿›è¡Œä¸‹ä¸€æ­¥çš„å…·ä½“ä¸šåŠ¡æ“ä½œ</li><li>å¯¹äºè®¾ç½®å¤±è´¥çš„ï¼Œä¸å…·æœ‰æ§åˆ¶æƒï¼Œæ’é˜Ÿæˆ–è€…ç­‰å¾…ã€‚</li></ul><p>æ“ä½œå®Œæ¯•ï¼Œä½¿ç”¨ <code>del</code> é‡Šæ”¾é”ã€‚</p><p>è¯¥æ–¹æ¡ˆæ˜¯ä¸€ç§è®¾è®¡æ¦‚å¿µï¼Œä¾èµ–è§„èŒƒä¿éšœï¼Œå…·æœ‰é£é™©æ€§ã€‚</p><p>ä¸ºé˜²æ­¢æ­»é”ï¼ˆä¾‹å¦‚æŸä¸ªæœåŠ¡å™¨è®¾ç½®ä¸Šåˆ†å¸ƒå¼é”ä¹‹åå®•æœºï¼Œä½†æ˜¯æ²¡æœ‰delæ‰è¿™ä¸ªé”æ ‡å¿—ï¼‰ï¼Œå¯ä»¥è¿›è¡Œä¸€äº›æ”¹è‰¯ï¼š</p><p>ä½¿ç”¨expireä¸ºé”keyæ·»åŠ æ—¶é—´é™å®šï¼Œåˆ°æ—¶é—´ä¸é‡Šæ”¾åˆ™æ”¾å¼ƒé”ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">expire lock-key second<br>pexire lock-key milliseconds<br></code></pre></td></tr></table></figure><p>ç”±äºæ“ä½œé€šå¸¸éƒ½æ˜¯å¾®ç§’æˆ–æ¯«ç§’çº§ï¼Œå› æ­¤è¯¥é”å®šæ—¶é—´ä¸å®œè®¾ç½®è¿‡å¤§ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>æµ‹è¯•ç™¾ä¸‡æ¬¡æœ€é•¿æ‰§è¡Œæ—¶é—´å¯¹åº”å‘½ä»¤çš„æœ€å¤§è€—æ—¶ï¼Œæµ‹è¯•ç™¾ä¸‡æ¬¡ç½‘ç»œå»¶è¿Ÿå¹³å‡è€—æ—¶</li><li>é”æ—¶é—´è®¾å®šæ¨èï¼šæœ€å¤§è€—æ—¶x120% + å¹³å‡ç½‘ç»œå»¶è¿Ÿx110%</li><li>å¦‚æœä¸šåŠ¡æœ€å¤§è€—æ—¶è¿œå¤§äºç½‘ç»œå¹³å‡å»¶è¿Ÿï¼ˆä¾‹å¦‚2ä¸ªæ•°é‡çº§ï¼‰ï¼Œå–å…¶ä¸­å•ä¸ªè€—æ—¶è¾ƒé•¿çš„å³å¯ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>08. æŒä¹…åŒ–</title>
    <link href="/2024/12/07/Redis/08-%E6%8C%81%E4%B9%85%E5%8C%96/"/>
    <url>/2024/12/07/Redis/08-%E6%8C%81%E4%B9%85%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="æŒä¹…åŒ–">æŒä¹…åŒ–</h1><p>åˆ©ç”¨æ°¸ä¹…æ€§å­˜å‚¨ä»‹è´¨å°†æ•°æ®è¿›è¡Œä¿å­˜ï¼Œåœ¨ç‰¹å®šçš„æ—¶é—´å°†ä¿å­˜çš„æ•°æ®è¿›è¡Œæ¢å¤çš„å·¥ä½œæœºåˆ¶ç§°ä¸ºæŒä¹…åŒ–ã€‚</p><p>ç›®çš„ï¼šé˜²æ­¢æ•°æ®æ„å¤–ä¸¢å¤±ï¼Œç¡®ä¿æ•°æ®å®‰å…¨æ€§</p><p>æŒä¹…åŒ–è¿‡ç¨‹ä¿å­˜çš„å†…å®¹ï¼š</p><ul><li>å°†å½“å‰æ•°æ®çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œå¿«ç…§å½¢å¼ï¼Œå­˜å‚¨æ•°æ®ç»“æœï¼Œå­˜å‚¨æ ¼å¼ç®€å•ï¼Œå…³æ³¨ç‚¹åœ¨æ•°æ®</li></ul><blockquote><p>å¯¹åº”Redisçš„RDB</p></blockquote><ul><li>å°†æ•°æ®çš„æ“ä½œè¿‡ç¨‹è¿›è¡Œä¿å­˜ï¼Œæ—¥å¿—å½¢å¼ï¼Œå­˜å‚¨æ“ä½œè¿‡ç¨‹ï¼Œå­˜å‚¨æ ¼å¼å¤æ‚ï¼Œå…³æ³¨ç‚¹åœ¨æ•°æ®çš„æ“ä½œè¿‡ç¨‹ã€‚</li></ul><blockquote><p>å¯¹åº”Redisçš„AOF</p></blockquote><h1 id="rdb">RDB</h1><h2 id="saveå‘½ä»¤">saveå‘½ä»¤</h2><p>å¯åŠ¨æ–¹å¼ï¼šsaveå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">save<br></code></pre></td></tr></table></figure><p>ä½œç”¨ï¼šæ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡ä¿å­˜æ“ä½œï¼Œä¼šç”Ÿæˆæˆ–æ›´æ–°æŒä¹…åŒ–æ–‡ä»¶å¤¹å†…çš„dump.rdbæ–‡ä»¶</p><p>saveæŒ‡ä»¤çš„æ‰§è¡Œä¼šé˜»å¡å½“å‰RedisæœåŠ¡å™¨ï¼Œç›´åˆ°å½“å‰RDBè¿‡ç¨‹å®Œæˆä¸ºæ­¢ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆé•¿æ—¶é—´é˜»å¡ï¼Œçº¿ä¸Šç¯å¢ƒä¸å»ºè®®ä½¿ç”¨ã€‚</p><h2 id="ç›¸å…³é…ç½®">ç›¸å…³é…ç½®</h2><p>saveæŒ‡ä»¤ç›¸å…³é…ç½®ï¼š</p><ul><li>dbfilename dump.rdb</li></ul><blockquote><p>è¯´æ˜ï¼šè®¾ç½®æœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸º dump.rdb</p><p>ç»éªŒï¼šé€šå¸¸è®¾ç½®ä¸º dump-ç«¯å£å·.rbd</p></blockquote><ul><li>dir</li></ul><blockquote><p>è¯´æ˜ï¼šè®¾ç½®å­˜å‚¨ .rdb æ–‡ä»¶çš„è·¯å¾„</p><p>ç»éªŒï¼šé€šå¸¸è®¾ç½®æˆå­˜å‚¨ç©ºé—´è¾ƒå¤§çš„ç›®å½•ä¸­ï¼Œç›®å½•åç§°é€šå¸¸ä¸ºdata</p></blockquote><ul><li>rdbcompression yes</li></ul><blockquote><p>è¯´æ˜ï¼šè®¾ç½®å­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸ºyesï¼Œé‡‡ç”¨LZFå‹ç¼©</p><p>ç»éªŒï¼šé€šå¸¸é»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ï¼Œå¦‚æœè®¾ç½®ä¸ºnoï¼Œå¯ä»¥èŠ‚çœcpuæ—¶é—´ï¼Œä½†æ˜¯ä¼šä½¿å­˜å‚¨çš„æ–‡ä»¶å˜å¤§</p></blockquote><ul><li>rdbchecksum yes</li></ul><blockquote><p>è¯´æ˜ï¼šè®¾ç½®æ˜¯å¦è¿›è¡ŒRDBæ–‡ä»¶æ ¼å¼æ ¡éªŒï¼Œè¯¥æ ¡éªŒè¿‡ç¨‹åœ¨å†™æ–‡ä»¶å’Œè¯»æ–‡ä»¶è¿‡ç¨‹å‡è¿›è¡Œ</p><p>ç»éªŒï¼šé€šå¸¸é»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œå¯ä»¥èŠ‚çº¦è¯»å†™æ€§è¿‡ç¨‹çº¦10%æ—¶é—´æ¶ˆè€—ï¼Œæ˜¯å­˜å‚¨ä¸€å®šçš„æ•°æ®æŸåé£é™©</p></blockquote><p>ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plain">port 6379<br>daemonize yes<br>logfile &quot;6379.log&quot;<br>dir /home/redis/data<br>dbfilename dump-6379.rdb<br>rdbcompression yes<br>rdbchecksum yes<br></code></pre></td></tr></table></figure><h2 id="bgsaveæŒ‡ä»¤">bgsaveæŒ‡ä»¤</h2><p>å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bgsave<br></code></pre></td></tr></table></figure><p>ä½œç”¨ï¼šæ‰‹åŠ¨å¯åŠ¨åå°ä¿å­˜æ“ä½œï¼Œä½†æ˜¯ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œä¼šåœ¨åˆé€‚çš„æ—¶é—´è¿›è¡Œæ‰§è¡Œï¼Œé˜²æ­¢å› ä¸ºä¿å­˜æ“ä½œé€ æˆRedisçš„é•¿æ—¶é—´é˜»å¡ã€‚</p><p>bgsaveå‘½ä»¤æ˜¯é’ˆå¯¹saveé˜»å¡é—®é¢˜åšçš„ä¼˜åŒ–ã€‚Rediså†…éƒ¨æ‰€æœ‰æ¶‰åŠåˆ°RDBæ“ä½œéƒ½é‡‡ç”¨bgsaveçš„æ–¹å¼ï¼Œsaveå‘½ä»¤å¯ä»¥æ”¾å¼ƒä½¿ç”¨ã€‚</p><p>bgsaveåå°æ‰§è¡Œå·¥ä½œåŸç†ï¼š</p><pre><code class=" mermaid">graph LR A[&quot;æ§åˆ¶å°&quot;] --&gt;|1.å‘é€æŒ‡ä»¤| B[&quot;RedisæœåŠ¡å™¨&quot;] B --&gt;|2.è¿”å›æ¶ˆæ¯| A B --&gt;|2.è°ƒç”¨forkå‡½æ•°ç”Ÿæˆå­è¿›ç¨‹| C[&quot;å­è¿›ç¨‹&quot;] C --&gt;|4.è¿”å›æ¶ˆæ¯| B C --&gt;|3.åˆ›å»ºrdbæ–‡ä»¶| D[&quot;.rdbæ–‡ä»¶&quot;]</code></pre><p>bgsaveçš„ç‰¹æ®Šé…ç½®ï¼š</p><ul><li>stop-writes-on-bgsave-error yes</li></ul><blockquote><p>è¯´æ˜ï¼šåå°å­˜å‚¨è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°é”™è¯¯ç°è±¡ï¼Œæ˜¯å¦åœæ­¢ä¿å­˜æ“ä½œ</p><p>ç»éªŒï¼šé€šå¸¸é»˜è®¤ä¸ºå¼€å¯çŠ¶æ€</p></blockquote><p>å’Œsaveå¯¹æ¯”ï¼š</p><table><thead><tr><th>æ–¹å¼</th><th>save</th><th>bgsave</th></tr></thead><tbody><tr><td>è¯»å†™</td><td>åŒæ­¥</td><td>å¼‚æ­¥</td></tr><tr><td>é˜»å¡å®¢æˆ·ç«¯æŒ‡ä»¤</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>é¢å¤–å†…å­˜æ¶ˆè€—</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>å¯åŠ¨æ–°è¿›ç¨‹</td><td>å¦</td><td>æ˜¯</td></tr></tbody></table><h2 id="è‡ªåŠ¨ä¿å­˜">è‡ªåŠ¨ä¿å­˜</h2><p>åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥é…ç½®ï¼š</p><p>save second changes</p><p>ä½œç”¨ï¼šæ»¡è¶³é™å®šæ—¶é—´èŒƒå›´å†…keyçš„å˜åŒ–æ•°é‡è¾¾åˆ°æŒ‡å®šæ•°é‡å³è¿›è¡ŒæŒä¹…åŒ–</p><p>å‚æ•°</p><ul><li>second</li></ul><blockquote><p>ç›‘æ§æ—¶é—´èŒƒå›´</p></blockquote><ul><li>changes</li></ul><blockquote><p>ç›‘æ§keyçš„å˜åŒ–é‡</p><p>å¢åˆ æ”¹éƒ½ç®—åšå˜åŒ–</p></blockquote><p>ä½ç½®ï¼šåœ¨confæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚</p><p>saveé…ç½®è¦æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œé¢‘åº¦è¿‡é«˜æˆ–è¿‡ä½éƒ½ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ï¼Œç»“æœå¯èƒ½æ˜¯ç¾éš¾æ€§çš„ã€‚</p><p>saveé…ç½®ä¸­å¯¹äºsecondä¸changesè®¾ç½®é€šå¸¸å…·æœ‰äº’è¡¥å¯¹åº”å…³ç³»ï¼ˆä¸€ä¸ªå€¼å¤§ä¸€ä¸ªå€¼å°ï¼‰ï¼Œå°½é‡ä¸è¦è®¾ç½®æˆåŒ…å«å…³ç³»ã€‚</p><p>saveé…ç½®å¯åŠ¨åæ‰§è¡Œçš„æ˜¯bgsaveæ“ä½œ</p><h2 id="rdbå…¶ä»–å¯åŠ¨æ–¹å¼">RDBå…¶ä»–å¯åŠ¨æ–¹å¼</h2><ul><li>å…¨é‡å¤åˆ¶</li><li>æœåŠ¡å™¨è¿è¡Œè¿‡ç¨‹ä¸­é‡å¯</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">debug reload<br></code></pre></td></tr></table></figure><ul><li>å…³é—­æœåŠ¡å™¨æ—¶æŒ‡å®šä¿å­˜æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">shutdown save<br></code></pre></td></tr></table></figure><h2 id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹</h2><p>ä¼˜ç‚¹ï¼š</p><ul><li>RDBæ˜¯ä¸€ä¸ªç´§å‡‘å‹ç¼©çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå­˜å‚¨æ•ˆç‡è¾ƒé«˜</li><li>RDBå†…éƒ¨å­˜å‚¨çš„æ˜¯redisåœ¨æŸä¸ªæ—¶é—´ç‚¹çš„æ•°æ®å¿«ç…§ï¼Œéå¸¸é€‚åˆç”¨äºæ•°æ®å¤‡ä»½ï¼Œå…¨é‡å¤åˆ¶ç­‰åœºæ™¯</li><li>RDBæ¢å¤æ•°æ®çš„é€Ÿåº¦è¦æ¯”AOFå¿«å¾ˆå¤š</li><li>åº”ç”¨ï¼šæœåŠ¡å™¨ä¸­æ¯Xå°æ—¶æ‰§è¡Œbgsaveå¤‡ä»½ï¼Œå¹¶å°†RDBæ–‡ä»¶æ‹·è´åˆ°è¿œç¨‹æœºå™¨ä¸­ï¼Œç”¨äºç¾éš¾æ¢å¤ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>RDBæ–¹å¼æ— è®ºæ˜¯æ‰§è¡ŒæŒ‡ä»¤è¿˜æ˜¯åˆ©ç”¨é…ç½®ï¼Œæ— æ³•åšåˆ°å®æ—¶æŒä¹…åŒ–ï¼Œå…·æœ‰è¾ƒå¤§çš„å¯èƒ½æ€§ä¸¢å¤±æ•°æ®</li><li>bgsaveæŒ‡ä»¤æ¯æ¬¡è¿è¡Œè¦æ‰§è¡Œforkæ“ä½œåˆ›å»ºå­è¿›ç¨‹ï¼Œè¦ç‰ºç‰²æ‰ä¸€äº›æ€§èƒ½</li><li>Redisçš„ä¼—å¤šç‰ˆæœ¬ä¸­æœªè¿›è¡ŒRDBæ–‡ä»¶æ ¼å¼çš„ç‰ˆæœ¬ç»Ÿä¸€ï¼Œæœ‰å¯èƒ½å‡ºç°å„ç‰ˆæœ¬æœåŠ¡ä¹‹é—´æ•°æ ¼å¼æ— æ³•å…¼å®¹çš„ç°è±¡ã€‚</li></ul><h1 id="aof">AOF</h1><h2 id="æ¦‚è¿°">æ¦‚è¿°</h2><p>RDBå­˜å‚¨çš„å¼Šç«¯ï¼š</p><ul><li>å­˜å‚¨æ•°æ®é‡è¾ƒå¤§ï¼Œæ•ˆç‡è¾ƒä½</li></ul><blockquote><p>åŸºäºå¿«ç…§æ€æƒ³ï¼Œæ¯æ¬¡è¯»å†™éƒ½æ˜¯å…¨éƒ¨æ•°æ®ï¼Œå½“æ•°æ®é‡å·¨å¤§æ—¶ï¼Œæ•ˆç‡éå¸¸ä½ã€‚</p></blockquote><ul><li>å¤§æ•°æ®é‡ä¸‹çš„IOæ€§èƒ½è¾ƒä½</li><li>åŸºäºforkåˆ›å»ºå­è¿›ç¨‹ï¼Œå†…å­˜äº§ç”Ÿé¢å¤–æ¶ˆè€—</li><li>å®•æœºå¸¦æ¥çš„æ•°æ®ä¸¢å¤±é£é™©</li></ul><p>è§£å†³æ€è·¯ï¼š</p><ul><li>ä¸å†™å…¨æ•°æ®ï¼Œä»…è®°å½•éƒ¨åˆ†æ•°æ®</li><li>æ”¹è®°å½•æ•°æ®ä¸ºè®°å½•æ“ä½œè¿‡ç¨‹</li><li>å¯¹æ‰€æœ‰æ“ä½œå‡è®°å½•ï¼Œæ’é™¤ä¸¢å¤±æ•°æ®çš„é£é™©</li></ul><p>AOFï¼ˆAppend OnlyFileï¼‰æŒä¹…åŒ–ï¼šä»¥ç‹¬ç«‹æ—¥å¿—çš„æ–¹å¼è®°å½•æ¯æ¬¡å†™å‘½ä»¤ï¼Œé‡å¯æ—¶å†é‡æ–°æ‰§è¡ŒAOFæ–‡ä»¶ä¸­å‘½ä»¤ï¼Œè¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„ã€‚ä¸RDBç›¸æ¯”å¯ä»¥ç®€å•æè¿°ä¸ºæ”¹è®°å½•æ•°æ®ä¸ºè®°å½•æ•°æ®äº§ç”Ÿçš„è¿‡ç¨‹ã€‚</p><p>AOFçš„ä¸»è¦ä½œç”¨æ˜¯è§£å†³äº†æ•°æ®æŒä¹…åŒ–çš„å®æ—¶æ€§ï¼Œç›®å‰å·²ç»æ˜¯RedisæŒä¹…åŒ–çš„ä¸»æµæ–¹å¼ã€‚</p><p>AOFå†™æ•°æ®è¿‡ç¨‹ï¼š</p><pre><code class=" mermaid">graph LR A[&quot;æ§åˆ¶å°å†™å‘½ä»¤ï¼ˆset name zhangsan)&quot;] --&gt; B[&quot;RedisæœåŠ¡å™¨&quot;] B --&gt;|AOFåˆ·æ–°ç¼“å­˜åŒº| C[&quot;AOFå†™å‘½ä»¤ç¼“å­˜åŒº&quot;] C --&gt;|å°†å‘½ä»¤åŒæ­¥åˆ°AOFæ–‡ä»¶| D[&quot;.aofæ–‡ä»¶&quot;]</code></pre><h2 id="å†™æ•°æ®ç­–ç•¥">å†™æ•°æ®ç­–ç•¥</h2><p>AOFå†™æ•°æ®ä¸‰ç§ç­–ç•¥ï¼šï¼ˆappendfsyncï¼‰</p><ul><li>alwaysï¼ˆæ¯æ¬¡ï¼‰</li></ul><blockquote><p>æ¯æ¬¡å†™å…¥æ“ä½œå‡åŒæ­¥åˆ°AOFæ–‡ä»¶ä¸­ï¼Œæ•°æ®é›¶è¯¯å·®ï¼Œæ€§èƒ½è¾ƒä½ï¼Œä¸å»ºè®®ä½¿ç”¨</p></blockquote><ul><li>everysecï¼ˆæ¯ç§’ï¼‰</li></ul><blockquote><p>æ¯ç§’å°†ç¼“å†²åŒºçš„æŒ‡ä»¤åŒæ­¥åˆ°AOFæ–‡ä»¶ä¸­ï¼Œæ•°æ®å‡†ç¡®æ€§è¾ƒé«˜ï¼Œæ€§èƒ½è¾ƒé«˜ã€‚å»ºè®®ä½¿ç”¨ï¼Œä¹Ÿæ˜¯é»˜è®¤é…ç½®</p><p>åœ¨ç³»ç»Ÿçªç„¶å®•æœºçš„æƒ…å†µä¸‹ä¸¢å¤±1ç§’å†…çš„æ•°æ®</p></blockquote><ul><li>noï¼ˆç³»ç»Ÿæ§åˆ¶ï¼‰</li></ul><blockquote><p>æœ‰æ“ä½œç³»ç»Ÿæ§åˆ¶æ¯æ¬¡åŒæ­¥åŒ–åˆ°AOFæ–‡ä»¶çš„å‘¨æœŸï¼Œæ•´ä½“ä¸å¯æ§</p></blockquote><h2 id="é…ç½®">é…ç½®</h2><p>å¼€å¯AOFï¼š</p><p>é…ç½®ï¼š<code>appendonly yes|no</code></p><p>ä½œç”¨ï¼šæ˜¯å¦å¼€å¯AOFæŒä¹…åŒ–åŠŸèƒ½ï¼Œé»˜è®¤ä¸ºä¸å¼€å¯çŠ¶æ€ã€‚</p><p>é…ç½®ï¼š<code>appendfsync always|everysec|no</code></p><p>ä½œç”¨ï¼šAOFå†™æ•°æ®ç­–ç•¥</p><p>é…ç½®ï¼š<code>appendfilename filename</code></p><p>ä½œç”¨ï¼šAOFæŒä¹…åŒ–æ–‡ä»¶åï¼Œé»˜è®¤æ–‡ä»¶åä¸º appendonly.aofï¼Œå»ºè®®é…ç½®ä¸ºappendonly-ç«¯å£å·.aof</p><p>é…ç½®ï¼š<code>dir</code></p><p>ä½œç”¨ï¼šAOFæŒä¹…åŒ–æ–‡ä»¶ä¿å­˜è·¯å¾„ï¼Œä¸RDBæŒä¹…åŒ–æ–‡ä»¶ä¿æŒä¸€è‡´å³å¯</p><h2 id="é‡å†™">é‡å†™</h2><p>éšç€å‘½ä»¤ä¸æ–­å†™å…¥AOFï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒRediså¼•å…¥äº†AOFé‡å†™æœºåˆ¶å‹ç¼©æ–‡ä»¶ä½“ç§¯ã€‚AOFæ–‡ä»¶é‡å†™æ˜¯å°†Redisè¿›ç¨‹å†…çš„æ•°æ®è½¬åŒ–ä¸ºå†™å‘½ä»¤åŒæ­¥åˆ°æ–°AOFæ–‡ä»¶çš„è¿‡ç¨‹ã€‚ç®€å•è¯´å°±æ˜¯å°†å¯¹åŒä¸€ä¸ªæ•°æ®çš„è‹¥å¹²ä¸ªå‘½ä»¤æ‰§è¡Œç»“æœè½¬åŒ–æˆæœ€ç»ˆç»“æœæ•°æ®å¯¹åº”çš„æŒ‡ä»¤è¿›è¡Œè®°å½•ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">set age 18<br>set age 20<br>set age 22<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆé‡å†™ä¸ºï¼š<code>set age 22</code>ã€‚</p><p>é‡å†™è§„åˆ™ï¼š</p><ul><li>è¿›ç¨‹å†…å·²è¶…æ—¶çš„æ•°æ®ä¸å†å†™å…¥æ–‡ä»¶</li><li>å¿½ç•¥æ— æ•ˆæŒ‡ä»¤ï¼Œé‡å†™æ—¶ä½¿ç”¨è¿›ç¨‹å†…æ•°æ®ç›´æ¥ç”Ÿæˆï¼Œè¿™æ ·æ–°çš„AOFæ–‡ä»¶åªä¿ç•™æœ€ç»ˆæ•°æ®çš„å†™å…¥å‘½ä»¤</li><li>å¯¹åŒä¸€æ•°æ®çš„å¤šæ¡å†™å‘½ä»¤åˆå¹¶ä¸ºä¸€æ¡å‘½ä»¤</li></ul><blockquote><p>å¦‚ï¼š<code>lpush list1 a</code>ã€<code>lpush list1 b</code>ã€<code>lpush list1 c</code>ï¼Œåˆå¹¶ä¸ºï¼š<code>lpush list1 a b c</code></p><p>ä¸ºé˜²æ­¢æ•°æ®é‡è¿‡å¤§é€ æˆå®¢æˆ·ç«¯ç¼“å†²åŒºæº¢å‡ºï¼Œå¯¹listã€setã€hashã€zsetç­‰ç±»å‹ï¼Œæ¯æ¡æŒ‡ä»¤æœ€å¤šå†™å…¥64ä¸ªå…ƒç´ ã€‚</p></blockquote><p>é‡å†™æ–¹å¼ï¼š</p><ul><li>æ‰‹åŠ¨é‡å†™ï¼ˆæŒ‡ä»¤ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">bgrewriteaof<br></code></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨é‡å†™ï¼ˆé…ç½®ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">auto-aof-rewrite-min-size size<br>auto-aof-rewrite-percentage percentage<br></code></pre></td></tr></table></figure><p>è‡ªåŠ¨é‡å†™ï¼š</p><ul><li>è‡ªåŠ¨é‡å†™è§¦å‘æ¡ä»¶è®¾ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">auto-aof-rewrite-min-size size<br>auto-aof-rewrite-percentage percent<br></code></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨é‡å†™è§¦å‘æ¯”å¯¹å‚æ•°ï¼ˆè¿è¡ŒæŒ‡ä»¤ info Persistenceè·å–å…·ä½“ä¿¡æ¯ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">aof_current_size<br>aof_base_size<br></code></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨é‡å†™è§¦å‘æ¡ä»¶</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">aof_current_size &gt; auto-aof-rewrite-min-size<br><br>((aof_current_size - aof_base_size) / aof_base_size) &gt;= auto-aof-rewrite-percentage<br></code></pre></td></tr></table></figure><h2 id="å’Œrdbæ¯”è¾ƒ">å’ŒRDBæ¯”è¾ƒ</h2><table><thead><tr><th>æŒä¹…åŒ–æ–¹å¼</th><th>RDB</th><th>AOF</th></tr></thead><tbody><tr><td>å ç”¨å­˜å‚¨ç©ºé—´</td><td>å°ï¼ˆæ•°æ®çº§ï¼šå‹ç¼©ï¼‰</td><td>å¤§ï¼ˆæŒ‡ä»¤çº§ï¼šé‡å†™ï¼‰</td></tr><tr><td>å­˜å‚¨é€Ÿåº¦</td><td>æ…¢</td><td>å¿«</td></tr><tr><td>æ¢å¤é€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>æ•°æ®å®‰å…¨æ€§</td><td>ä¼šä¸¢å¤±æ•°æ®</td><td>ä¾æ®ç­–ç•¥å†³å®š</td></tr><tr><td>èµ„æºæ¶ˆè€—</td><td>é«˜/é‡é‡çº§</td><td>ä½/è½»é‡çº§</td></tr><tr><td>å¯åŠ¨ä¼˜å…ˆçº§</td><td>ä½</td><td>é«˜</td></tr></tbody></table><p>é€‰æ‹©ï¼š</p><ul><li>å¯¹æ•°æ®éå¸¸æ•æ„Ÿï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤çš„AOFæŒä¹…åŒ–æ–¹æ¡ˆ<ul><li>AOFæŒä¹…åŒ–ç­–ç•¥ä½¿ç”¨everysecondï¼Œæ¯ç§’é’Ÿfsyncä¸€æ¬¡ã€‚è¯¥ç­–ç•¥redisä»å¯ä»¥ä¿æŒå¾ˆå¥½çš„å¤„ç†æ€§èƒ½ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œæœ€å¤šä¸¢å¤±0-1ç§’å†…çš„æ•°æ®</li><li>æ³¨æ„ï¼šAOFæ–‡ä»¶å­˜å‚¨ä½“ç§¯è¾ƒå¤§ï¼Œä¸”æ¢å¤é€Ÿåº¦è¾ƒæ…¢</li></ul></li><li>æ•°æ®å‘ˆç°é˜¶æ®µæœ‰æ•ˆæ€§ï¼Œå»ºè®®ä½¿ç”¨RDBæŒä¹…åŒ–æ–¹æ¡ˆ<ul><li>æ•°æ®å¯ä»¥è‰¯å¥½çš„åšåˆ°é˜¶æ®µå†…æ— ä¸¢å¤±ï¼ˆè¯¥é˜¶æ®µæ˜¯å¼€å‘è€…æˆ–è€…è¿ç»´äººå‘˜æ‰‹å·¥ç»´æŠ¤çš„ï¼‰ï¼Œä¸”æ¢å¤é€Ÿåº¦è¾ƒå¿«ï¼Œé˜¶æ®µç‚¹æ•°æ®æ¢å¤é€šå¸¸é‡‡ç”¨RDBæ–¹æ¡ˆ</li><li>æ³¨æ„ï¼šä½¿ç”¨RDBå®ç°ç´§å‡‘çš„æ•°æ®æŒä¹…åŒ–ä¼šä½¿Redisé™çš„å¾ˆä½</li></ul></li><li>ç»¼åˆæ¯”å¯¹<ul><li>RDBä¸AOF çš„é€‰æ‹©å®é™…ä¸Šæ˜¯åœ¨åšä¸€ç§æƒè¡¡ï¼Œæ¯ç§éƒ½æœ‰åˆ©æœ‰å¼Š</li><li>å¦‚ä¸èƒ½æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œå¯¹ä¸šåŠ¡æ•°æ®éå¸¸æ•æ„Ÿï¼Œé€‰ç”¨AOF</li><li>å¦‚èƒ½æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œä¸”è¿½æ±‚å¤§æ•°æ®é›†çš„æ¢å¤é€Ÿåº¦ï¼Œé€‰ç”¨RDB</li><li>ç¾éš¾æ¢å¤é€‰ç”¨RDB</li><li>åŒä¿é™©ç­–ç•¥ï¼ŒåŒæ—¶å¼€å¯RDBå’ŒAOFï¼Œé‡å¯åï¼ŒRedisä¼˜å…ˆä½¿ç”¨AOFæ¥æ¢å¤æ•°æ®ï¼Œé™ä½ä¸¢å¤±æ•°æ®çš„é‡ã€‚</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>07. Linuxæ“ä½œRedis</title>
    <link href="/2024/12/07/Redis/07-Linux%E6%93%8D%E4%BD%9CRedis/"/>
    <url>/2024/12/07/Redis/07-Linux%E6%93%8D%E4%BD%9CRedis/</url>
    
    <content type="html"><![CDATA[<h1 id="centos7å®‰è£…redis">CentOS7å®‰è£…Redis</h1><ol type="1"><li>Rediså®˜ç½‘ä¸‹è½½æºç åŒ…ï¼š<a href="https://download.redis.io/releases/redis-6.0.10.tar.gz">redis-6.0.10.tar.gz</a></li><li>ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œè§£å‹</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -xvf redis-6.0.10.tar.gz<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å®‰è£…GCCç›¸å…³</li></ol><blockquote><p>redisæºç éœ€è¦ä½¿ç”¨gccè¿›è¡Œç¼–è¯‘</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install cpp<br>yum install binutils<br>yum install glibc<br>yum install glibc-kernheaders<br>yum install glibc-common<br>yum install glibc-devel<br>yum install gcc<br>yum install make<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>å‡çº§GCC</li></ol><blockquote><p>CentOS7é»˜è®¤å®‰è£…çš„gccç‰ˆæœ¬æ˜¯4.8.5ï¼Œä¸æ»¡è¶³redisçš„ç¼–è¯‘è¦æ±‚ï¼ˆGCCç‰ˆæœ¬5ä»¥ä¸Šï¼‰ï¼Œéœ€è¦è¿›è¡Œå‡çº§</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum -y install centos-release-scl<br>yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ä½¿ç”¨gcc9è¿›è¡Œç¼–è¯‘</li></ol><blockquote><p>scl enableåªå¯¹å½“å‰å±å¹•æœ‰æ•ˆï¼Œæ–°å¼€çª—å£éœ€è¦é‡æ–°æ‰§è¡Œè¯¥å‘½ä»¤</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">scl enable devtoolset-9 bash<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>ç¼–è¯‘å¹¶å®‰è£…</li></ol><blockquote><p>è¿›å…¥redisçš„è§£å‹ç›®å½•ï¼Œé‡Œé¢å¸¦æœ‰Makefileæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨makeå‘½ä»¤è¿›è¡Œç¼–è¯‘</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ç¼–è¯‘</span><br>make<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ç¼–è¯‘å¹¶å®‰è£…(redisè§£å‹çš„Makefileæ–‡ä»¶é…ç½®äº†installå‚æ•°)</span><br>make install<br></code></pre></td></tr></table></figure><p>å¦‚æœæœ‰æç¤ºjemallocçš„é”™ï¼Œæœ‰å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡å®‰è£…å¤±è´¥æ—¶å€™å‡ºç°äº†åƒåœ¾æ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤è¿›è¡Œæ¸…ç†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make distclean<br></code></pre></td></tr></table></figure><h1 id="rediså¯åŠ¨å’Œè¿æ¥">Rediså¯åŠ¨å’Œè¿æ¥</h1><p>æ­£å¸¸å¯åŠ¨ï¼š</p><p>æœåŠ¡ç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-server<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-cli<br></code></pre></td></tr></table></figure><p>æŒ‡å®šç«¯å£å¯åŠ¨ï¼›</p><p>æœåŠ¡ç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">portå‚æ•°ä¸¤ä¸ªçŸ­æ¨ª</span><br>redis-server --port ç«¯å£å·<br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">på‚æ•°ä¸€ä¸ªçŸ­æ¨ª</span><br>redis-cli -p ç«¯å£å·<br>redis-cli -h ipåœ°å€<br></code></pre></td></tr></table></figure><p>æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨ï¼š</p><p>Redisè§£å‹ç›®å½•å¸¦æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼šredis.conf</p><p>æ‘˜å‡ºå…¶ä¸­æœ‰ç”¨çš„éƒ¨åˆ†ï¼ˆå»æ‰æ³¨é‡Šã€ç©ºè¡Œï¼‰ï¼Œå¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat redis.conf | grep -v &quot;#&quot; | grep -v &quot;^$&quot; &gt; redis-6379.conf<br></code></pre></td></tr></table></figure><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain"># æŒ‡å®šå¯åŠ¨çš„ç«¯å£å·<br>port 6379<br># ä»¥åå°å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨ï¼Œæ—¥å¿—å°†ä¸å†æ‰“å°åˆ°å‘½ä»¤çª—å£ä¸­<br>daemonize yes<br># æ—¥å¿—æ–‡ä»¶<br>logfile &quot;6379.log&quot;<br># æ—¥å¿—æ–‡ä»¶ã€æŒä¹…åŒ–æ–‡ä»¶ç­‰æ‰€åœ¨è·¯å¾„<br>dir /home/redis/data<br></code></pre></td></tr></table></figure><p>ä»¥é…ç½®æ–‡ä»¶å¯åŠ¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-server redis-6379.conf<br></code></pre></td></tr></table></figure><p>å¯ä»¥å¯åŠ¨å¤šä¸ªé…ç½®æ–‡ä»¶ã€å¤šä¸ªæœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">redis-server redis-6379.conf<br>redis-server redis-6380.conf<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>06. Jedis</title>
    <link href="/2024/12/07/Redis/06-Jedis/"/>
    <url>/2024/12/07/Redis/06-Jedis/</url>
    
    <content type="html"><![CDATA[<p>Javaè¯­è¨€è¿æ¥RedisæœåŠ¡çš„å·¥å…·ï¼š</p><ul><li>Jedis</li><li>SpringData Redis</li><li>Lettuce</li></ul><h1 id="jedisæ“ä½œredis">Jedisæ“ä½œRedis</h1><ol type="1"><li>å¼•å…¥å¯¹åº”çš„ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ç¼–å†™ç¨‹åº</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testJedis</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1.è¿æ¥reids</span><br>    <span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-number">6379</span>);<br><br>    <span class="hljs-comment">// 2.æ“ä½œredis</span><br>    <span class="hljs-comment">// jedisçš„æ–¹æ³•åå’Œreidså¯¹åº”çš„å‘½ä»¤åå®Œå…¨ä¸€æ ·</span><br>    jedis.set(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;zhangsan&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">&quot;name&quot;</span>);<br>    System.out.println(name);<br><br>    <span class="hljs-comment">// 3.å…³é—­è¿æ¥</span><br>    jedis.close();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨jedisè¿æ¥æ± ">ä½¿ç”¨Jedisè¿æ¥æ± </h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">JedisPool</span> <span class="hljs-variable">jp</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">static</span> &#123;<br>    <span class="hljs-type">JedisPoolConfig</span> <span class="hljs-variable">jpc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPoolConfig</span>();<br>    jpc.setMaxTotal(<span class="hljs-number">30</span>);<br>    jpc.setMaxIdle(<span class="hljs-number">10</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">host</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">port</span> <span class="hljs-operator">=</span> <span class="hljs-number">6379</span>;<br>    jp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JedisPool</span>(jpc, host, port);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Jedis <span class="hljs-title function_">getJedis</span><span class="hljs-params">()</span> &#123;    <br>    <span class="hljs-keyword">return</span> jp.getResource();<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>05. é€šç”¨æŒ‡å®š</title>
    <link href="/2024/12/07/Redis/05-%E9%80%9A%E7%94%A8%E6%8C%87%E5%AE%9A/"/>
    <url>/2024/12/07/Redis/05-%E9%80%9A%E7%94%A8%E6%8C%87%E5%AE%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="keyé€šç”¨æ“ä½œ">Keyé€šç”¨æ“ä½œ</h1><p>Key æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡keyè·å–redisä¸­ä¿å­˜çš„æ•°æ®ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>è·å–å½“å‰æ•°æ®åº“çš„keyæ•°é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">dbsize<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æŒ‡å®škey</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">del key<br></code></pre></td></tr></table></figure><ul><li>è·å–keyæ˜¯å¦å­˜åœ¨</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">exists key<br></code></pre></td></tr></table></figure><ul><li>è·å–keyå¯¹åº”å€¼çš„ç±»å‹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">type key<br></code></pre></td></tr></table></figure><p>æ‰©å±•æ“ä½œï¼ˆæ—¶æ•ˆæ€§æ§åˆ¶ï¼‰</p><ul><li>ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">expire key seconds<br>pexpire key milliseconds<br>expireat key timestamp<br>pexpireat key milliseconds-timestap<br></code></pre></td></tr></table></figure><ul><li>è·å–keyçš„æœ‰æ•ˆæ—¶é—´</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ttl key  # æŸ¥çœ‹è¿˜æœ‰å¤šä¹…è¿‡æœŸï¼ˆTime To Liveï¼‰ã€‚æ°¸ä¹…æœ‰æ•ˆçš„keyè¿”å›å€¼ä¸º-1ï¼Œå·²ç»å¤±æ•ˆçš„keyè¿”å›å€¼ä¸º-2ï¼Œå¸¦æœ‰æ—¶æ•ˆæ€§çš„è¿”å›å‰©ä½™æ—¶é•¿<br>pttl key<br></code></pre></td></tr></table></figure><ul><li>åˆ‡æ¢keyä»æ—¶æ•ˆæ€§è½¬æ¢ä¸ºæ°¸ä¹…æ€§</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">persist key<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢key</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">keys pattern<br></code></pre></td></tr></table></figure><p>patternçš„æ¨¡å¼è§„åˆ™ï¼š<br><code>*</code>ï¼šåŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„ç¬¦å·<br><code>?</code>ï¼šåŒ¹é…ä¸€ä¸ªä»»æ„ç¬¦å·<br><code>[]</code>ï¼šåŒ¹é…ä¸€ä¸ªæŒ‡å®šç¬¦å·</p><blockquote><p>ä¾‹å¦‚ï¼š<code>keys u[st]er:1</code> ï¼ŒæŸ¥è¯¢æ‰€æœ‰ä»¥ u å¼€å¤´ï¼Œä»¥ er:1ç»“å°¾ï¼Œä¸­é—´åŒ…å«ä¸€ä¸ªå­—æ¯ s æˆ– t ã€‚</p></blockquote><ul><li>ä¸ºkeyæ”¹å</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">rename key newkey  # å¦‚æœrediså·²ç»å­˜åœ¨newkeyï¼Œåˆ™ä¼šè¦†ç›–åŸæ¥çš„newkeyé‡Œé¢çš„å€¼<br>renamenx key newkey # redisä¸å­˜åœ¨newkeyæ—¶æ‰å…è®¸è¿›è¡Œé‡å‘½å<br></code></pre></td></tr></table></figure><ul><li>å¯¹æ‰€æœ‰keyæ’åº<br>æ’åºå¯¹è±¡æ˜¯listã€setã€sorted_set</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sort<br></code></pre></td></tr></table></figure><ul><li>å…¶ä»–keyé€šç”¨æ“ä½œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">help @generic<br></code></pre></td></tr></table></figure><h1 id="æ•°æ®åº“é€šç”¨æ“ä½œ">æ•°æ®åº“é€šç”¨æ“ä½œ</h1><p>dbåŸºæœ¬æ“ä½œï¼š</p><ul><li>åˆ‡æ¢æ•°æ®åº“<br>0åˆ°15æ•°æ®åº“ï¼Œé»˜è®¤ä¸ºæ•°æ®åº“0</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">select [dbid]<br></code></pre></td></tr></table></figure><ul><li>å…¶ä»–æ“ä½œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">quit # é€€å‡ºå®¢æˆ·ç«¯<br>ping # æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦è¿é€š<br>echo message<br></code></pre></td></tr></table></figure><ul><li>æ•°æ®ç§»åŠ¨åˆ°å…¶ä»–æ•°æ®åº“</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">move key db<br></code></pre></td></tr></table></figure><ul><li>æ•°æ®æ¸…é™¤æ“ä½œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">flushdb # æ¸…é™¤å½“å‰æ•°æ®åº“æ•°æ®<br>flushall # æ¸…é™¤æ‰€æœ‰æ•°æ®åº“æ•°æ®<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>04. æ•°æ®ç±»å‹</title>
    <link href="/2024/12/07/Redis/04-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/2024/12/07/Redis/04-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="redisæ•°æ®ç±»å‹">Redisæ•°æ®ç±»å‹</h1><p>5ç§å¸¸ç”¨æ•°æ®ç±»å‹ï¼š</p><ul><li>string</li></ul><blockquote><p>ç±»æ¯”javaçš„String</p></blockquote><ul><li>hash</li></ul><blockquote><p>ç±»æ¯”javaçš„HashMap</p></blockquote><ul><li>list</li></ul><blockquote><p>ç±»æ¯”javaçš„ LinkedList</p></blockquote><ul><li>set</li></ul><blockquote><p>ç±»æ¯”Javaçš„ HashSet</p></blockquote><ul><li>sorted_set</li></ul><blockquote><p>ä¹Ÿç§°Zsetï¼Œç±»æ¯”javaçš„ TreeSet</p></blockquote><p>redisæ•°æ®å­˜å‚¨æ ¼å¼ï¼š</p><p>redisè‡ªèº«æ˜¯ä¸€ä¸ªMapï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é‡‡ç”¨ key:valueçš„å½¢å¼å­˜å‚¨ã€‚æ‰€æœ‰çš„ key éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œ value çš„å­˜å‚¨å¯ä»¥åˆ†å¤šç§æ•°æ®ç±»å‹ã€‚</p><h1 id="stringç±»å‹">stringç±»å‹</h1><p>å­˜å‚¨çš„æ•°æ®ï¼šå•ä¸ªæ•°æ®ï¼Œæœ€ç®€å•çš„æ•°æ®å­˜å‚¨ç±»å‹ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®å­˜å‚¨ç±»å‹</p><p>å­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜ä¸€ä¸ªæ•°æ®</p><p>å­˜å‚¨å†…å®¹ï¼šé€šå¸¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥æ•´æ•°çš„å½¢å¼å±•ç¤ºï¼Œå¯ä»¥ä½œä¸ºæ•°æ®æ“ä½œä½¿ç”¨ã€‚</p><p>stringç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œæ„æ€æ˜¯redisçš„stringå¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ /ä¿®æ”¹æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set key value<br></code></pre></td></tr></table></figure><ul><li>è·å–æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">get key<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">del key<br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœåˆ é™¤æˆåŠŸï¼Œä¼šè¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">127.0.0.1:6379&gt; del age<br>(integer) 1<br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœåˆ é™¤å¤±è´¥ï¼ˆä¾‹å¦‚åˆ é™¤ä¸å­˜åœ¨çš„keyï¼‰ï¼Œä¼šè¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">127.0.0.1:6379&gt; del age<br>(integer) 0<br></code></pre></td></tr></table></figure><ul><li>æ·»åŠ /ä¿®æ”¹å¤šä¸ªæ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mset key1 value1 key2 value2 ...<br></code></pre></td></tr></table></figure><ul><li>è·å–å¤šä¸ªæ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mget key1 key2 ....<br></code></pre></td></tr></table></figure><ul><li>è·å–æ•°æ®å­—ç¬¦ä¸ªæ•°ï¼ˆå­—ç¬¦ä¸²é•¿åº¦ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">strlen key<br></code></pre></td></tr></table></figure><ul><li>è¿½åŠ ä¿¡æ¯åˆ°åŸå§‹ä¿¡æ¯åéƒ¨<br>å¦‚æœåŸå§‹ä¿¡æ¯å­˜åœ¨åˆ™è¿½åŠ ï¼Œå¦åˆ™æ–°å»ºã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">append key value<br></code></pre></td></tr></table></figure><blockquote><p>appendå‘½ä»¤è¿”å›çš„ç»“æœæ˜¯valueçš„å­—ç¬¦ä¸²é•¿åº¦</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">127.0.0.1:6379&gt;append mn 100<br>(integer) 3<br></code></pre></td></tr></table></figure><p>æ‰©å±•æ“ä½œï¼š</p><ul><li>è®¾ç½®æ•°å€¼æ•°æ®å¢åŠ èŒƒå›´çš„å€¼ï¼ˆå¯ä»¥ä¸ºè´Ÿæ•°ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">incr key<br>incrby key increment<br>incrbyfloat key increment<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®æ•°å€¼æ•°æ®å‡å°‘æŒ‡å®šèŒƒå›´çš„å€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">decr key<br>decrby key increment<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®æ•°æ®å…·æœ‰æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">setex key seconds value  # set with expire<br>psetex key milliseconds value<br></code></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½¿ç”¨ <code>setex name zhangsan 10</code>è®¾ç½®nameä¸º10ç§’æœ‰æ•ˆæœŸï¼Œç„¶ååˆæ‰§è¡Œäº† <code>set name lisi</code>ï¼Œæ­¤æ—¶å°†ä¸å†æœ‰10ç§’æœ‰æ•ˆæœŸçš„é™åˆ¶</p></blockquote><ul><li>è·å–æˆªå–æŒ‡å®šåŒºé—´çš„å­—ç¬¦ä¸²</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">getrange key start end<br></code></pre></td></tr></table></figure><ul><li>ä»æŒ‡å®šä½ç½®è®¾ç½®å­—ç¬¦ä¸²</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">setrange key offset value<br></code></pre></td></tr></table></figure><ul><li>keyä¸å­˜åœ¨æ—¶æ‰è®¾ç½®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">setnx key value # set if not exist<br></code></pre></td></tr></table></figure><ul><li>å¤šä¸ªKeyéƒ½ä¸å­˜åœ¨æ—¶æ‰è®¾ç½®</li></ul><blockquote><p>å½“key1 ã€key2ã€key3éƒ½ä¸å­˜åœ¨æ—¶æ‰èƒ½è®¾ç½®æˆåŠŸ</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">msetnx key1 value1 [key2 value2 key3 value3....]<br></code></pre></td></tr></table></figure><p>stringä½œä¸ºæ•°å€¼æ“ä½œï¼š</p><ul><li>stringåœ¨rediså†…éƒ¨å­˜å‚¨é»˜è®¤å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“é‡åˆ°å¢å‡ç±»æ“ä½œincrã€decræ—¶ä¼šè½¬æˆæ•°å€¼å‹è¿›è¡Œè®¡ç®—</li><li>redisæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œé‡‡ç”¨å•çº¿ç¨‹å¤„ç†æ‰€æœ‰ä¸šåŠ¡ï¼Œå‘½ä»¤æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œçš„ï¼Œå› æ­¤æ— éœ€è€ƒè™‘å¹¶å‘å¸¦æ¥çš„æ•°æ®å½±å“</li><li>æ³¨æ„ï¼šæŒ‰æ•°å€¼è¿›è¡Œæ“ä½œçš„æ•°æ®ï¼Œå¦‚æœåŸå§‹æ•°æ®ä¸èƒ½è½¬æ¢æˆæ•°å€¼ï¼Œæˆ–è¶…è¶Šäº†redisæ•°å€¼ä¸Šé™ï¼Œå°†æŠ¥é”™</li></ul><blockquote><p>9223372036854775807 ï¼ˆå¯¹åº” javaä¸­çš„longå‹æœ€å¤§å€¼ï¼ŒLong.MAX_VALUEï¼‰</p></blockquote><ul><li>æ•°æ®æœªè·å–åˆ°æ—¶ï¼š(nil) è¡¨ç¤ºnull</li><li>æ•°æ®æœ€å¤§å­˜å‚¨é‡ï¼š512M</li></ul><p>rediså¯ä»¥ç”¨äºæ§åˆ¶æ•°æ®åº“è¡¨ä¸»é”®ï¼Œä¸ºæ•°æ®åº“è¡¨ä¸»é”®æä¾›ç”Ÿæˆç­–ç•¥ï¼Œä¿éšœæ•°æ®åº“è¡¨çš„ä¸»é”®å”¯ä¸€æ€§ã€‚æ­¤æ–¹æ¡ˆé€‚ç”¨äºæ‰€æœ‰æ•°æ®åº“ï¼Œä¸”æ”¯æŒæ•°æ®åº“é›†ç¾¤ã€‚</p><p>rediså¯ä»¥åº”ç”¨äºå„ç§ç»“æ„æ€§å’Œéç»“æ„å‹é«˜çƒ­åº¦æ•°æ®è®¿é—®åŠ é€Ÿ</p><p>redisä¸­çš„keyå‘½åæƒ¯ä¾‹ä¸ºå†’å·åˆ†éš”ï¼Œä¾‹å¦‚ï¼š</p><p>key = <code>customer:id:2010010200001:name</code>, value =<code>å¼ ä¸‰</code></p><p>key = <code>customer:id:202001010004</code> , value =<code>&#123;"name", "zhangsan", "age" : 10&#125;</code></p><h1 id="hashç±»å‹">hashç±»å‹</h1><p>æ–°çš„å­˜å‚¨éœ€æ±‚ï¼šå¯¹ä¸€ç³»åˆ—å­˜å‚¨çš„æ•°æ®è¿›è¡Œç¼–ç»„ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œå…¸å‹åº”ç”¨å­˜å‚¨å¯¹è±¡ä¿¡æ¯</p><p>éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªé”®å€¼å¯¹æ•°æ®</p><p>hashç»“æ„ï¼š</p><p>ä¸€ä¸ª key å¯¹åº” hash å­˜å‚¨ç©ºé—´ï¼Œ ä¸€ä¸ªhashå­˜å‚¨ç©ºé—´å†…åˆå¯å­˜å¤šä¸ª field -value é”®å€¼å¯¹ã€‚</p><p>hashç»“æ„ä¼˜åŒ–ï¼š</p><ul><li>å¦‚æœfieldæ•°é‡è¾ƒå°‘ï¼Œå­˜å‚¨ç»“æ„ä¼˜åŒ–ä¸ºç±»æ•°ç»„ç»“æ„</li><li>å¦‚æœfieldæ•°é‡è¾ƒå¤šï¼Œå­˜å‚¨ç»“æ„ä½¿ç”¨HashMapç»“æ„</li></ul><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ /ä¿®æ”¹æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hset key field value<br></code></pre></td></tr></table></figure><ul><li>è·å–æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hget key field<br>hgetall key<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hdel key field1 [field2]<br></code></pre></td></tr></table></figure><ul><li>æ·»åŠ /ä¿®æ”¹å¤šä¸ªæ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hmset key field1 value1 field2 value2 ....<br></code></pre></td></tr></table></figure><ul><li>è·å–å¤šä¸ªæ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hmget key field1 field2 ...<br></code></pre></td></tr></table></figure><ul><li>è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hlen key<br></code></pre></td></tr></table></figure><ul><li>è·å–å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—æ®µ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexists key field<br></code></pre></td></tr></table></figure><ul><li>keyä¸‹å­˜åœ¨æŒ‡å®šçš„å­—æ®µï¼Œåˆ™ä¸æ“ä½œï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hsetnx key field value<br></code></pre></td></tr></table></figure><p>æ‰©å±•æ“ä½œï¼š</p><ul><li>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„å­—æ®µåæˆ–å­—æ®µå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hkeys key  # è·å–è¯¥keyä¸‹æ‰€æœ‰çš„fieldå<br>hvals key  # è·å–è¯¥keyä¸‹æ‰€ä»¥çš„valueï¼ˆä¸ä¼šå»é™¤é‡å¤é¡¹ï¼‰<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®æŒ‡å®šå­—æ®µçš„æ•°é‡æ•°æ®å¢åŠ æŒ‡å®šè¿”å›çš„å€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hincrby key field increment<br>hincrbyfloat key field increment<br></code></pre></td></tr></table></figure><p>hashç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>hashç±»å‹ä¸‹çš„valueåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä¸å…è®¸å­˜å‚¨å…¶ä»–æ•°æ®ç±»å‹ï¼Œä¸å­˜åœ¨åµŒå¥—ç°è±¡ã€‚å¦‚æœæ•°æ®æœªè·å–åˆ°ï¼Œå¯¹è±¡çš„å€¼ä¸ºç©ºï¼ˆnilï¼‰</li><li>æ¯ä¸ªhashå¯ä»¥å­˜å‚¨ 2^32 -1 ä¸ªé”®å€¼å¯¹</li><li>hashç±»å‹ååˆ†è´´è¿‘å¯¹è±¡çš„æ•°æ®å­˜å‚¨å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»æ·»åŠ åˆ é™¤å¯¹è±¡å±æ€§ã€‚ä½†hashè®¾è®¡åˆè¡·ä¸æ˜¯ä¸ºäº†å­˜å‚¨å¤§é‡å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œä¸å¯ä»¥æ»¥ç”¨ï¼Œæ›´ä¸å¯ä»¥å°†hashä½œä¸ºå¯¹è±¡åˆ—è¡¨ä½¿ç”¨ã€‚</li><li>hgetallæ“ä½œå¯ä»¥è·å–å…¨éƒ¨å±æ€§ï¼Œå¦‚æœå†…éƒ¨fieldè¿‡å¤šï¼Œéå†æ•´ä½“æ•°æ®æ•ˆç‡å°±ä¼šå¾ˆä½ï¼Œæœ‰å¯èƒ½æˆä¸ºæ•°æ®è®¿é—®ç“¶é¢ˆã€‚</li></ul><h1 id="listç±»å‹">listç±»å‹</h1><p>æ•°æ®å­˜å‚¨éœ€æ±‚ï¼šå­˜å‚¨å¤šä¸ªæ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›å…¥å­˜å‚¨ç©ºé—´çš„é¡ºåºè¿›è¡ŒåŒºåˆ†ã€‚</p><p>éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œä¸”é€šè¿‡æ•°æ®å¯ä»¥ä½“ç°è¿›å…¥é¡ºåº</p><p>listç±»å‹ï¼šä¿å­˜å¤šä¸ªæ•°æ®ï¼Œåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ç»“æ„å®ç°ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ /ä¿®æ”¹æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">lpush key value1 [value2] ...  # å‘å·¦è¾¹æ’å…¥<br>rpush key value1 [value2] ...  # å‘å³è¾¹æ’å…¥<br></code></pre></td></tr></table></figure><ul><li>è·å–æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">lrange key start stop # ä»å·¦è¾¹è¯»æŒ‡å®šèŒƒå›´ï¼Œä»startåˆ°stopçš„ç´¢å¼•ä½ç½®<br>lindex key index # è·å–æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ <br>llen key  # è·å–é•¿åº¦<br></code></pre></td></tr></table></figure><ul><li>è·å–å¹¶ç§»é™¤æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">lpop key  # ä»å·¦è¾¹ç§»å‡º<br>rpop key # ä»å³è¾¹ç§»å‡º<br></code></pre></td></tr></table></figure><p>æ‰©å±•æ“ä½œï¼š</p><ul><li>è§„å®šæ—¶é—´å†…è·å–å¹¶ç§»é™¤æ•°æ®<br>å¦‚æœå½“å‰æŒ‡å®šçš„keyæœ‰å€¼åˆ™ç›´æ¥å–å‡ºï¼Œå¦‚æœæ²¡æœ‰å€¼åˆ™ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä¸€æ—¦æœ‰å€¼æ’å…¥ç«‹å³å–å‡ºï¼Œå¦‚æœè¶…å‡ºæŒ‡å®šæ—¶é—´åˆ™é€€å‡ºã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">blpop key1 [key2] timeout<br>brpop key1 [key2] timeout<br></code></pre></td></tr></table></figure><ul><li>ç§»é™¤æŒ‡å®šæ•°æ®<br>listå­˜å‚¨çš„å†…å®¹å¯ä»¥é‡å¤ï¼Œè¦æŒ‡å®šç§»é™¤å¤šå°‘ä¸ªæŒ‡å®šå€¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">lrem key count value<br></code></pre></td></tr></table></figure><ul><li>æˆªå–æŒ‡å®šèŒƒå›´çš„å€¼åå†èµ‹å€¼ç»™key</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ltrim key start end<br></code></pre></td></tr></table></figure><p>redisåº”ç”¨äºå…·æœ‰æ“ä½œå…ˆåé¡ºåºçš„æ•°æ®æ§åˆ¶</p><p>listæ³¨æ„äº‹é¡¹ï¼š</p><ul><li>listä¸­ä¿å­˜çš„æ•°æ®éƒ½æ˜¯stringç±»å‹çš„ï¼Œæ•°æ®æ€»å®¹é‡æ˜¯æœ‰é™çš„ï¼Œæœ€å¤š 2^32 -1ä¸ªå…ƒç´ </li><li>listå…·æœ‰ç´¢å¼•çš„æ¦‚å¿µï¼Œä½†æ˜¯æ“ä½œæ•°æ®æ—¶é€šå¸¸ä»¥é˜Ÿåˆ—çš„å½¢å¼è¿›è¡Œå…¥é˜Ÿå‡ºé˜Ÿæ“ä½œï¼Œæˆ–ä»¥æ ˆçš„å½¢å¼è¿›è¡Œå…¥æ ˆå‡ºæ ˆæ“ä½œ</li><li>è·å–å…¨éƒ¨æ“ä½œæ•°æ®ç»“æŸç´¢å¼•è®¾ç½®ä¸º-1ï¼Œä¾‹å¦‚ï¼ˆ<code>lrange mylist 0 -1</code>ï¼‰</li><li>listå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†é¡µæ“ä½œï¼Œé€šå¸¸ç¬¬ä¸€é¡µçš„ä¿¡æ¯æ¥è‡ªlistï¼Œç¬¬2é¡µåŠæ›´å¤šçš„ä¿¡æ¯é€šè¿‡æ•°æ®åº“çš„å½¢å¼åŠ è½½</li></ul><h1 id="setç±»å‹">setç±»å‹</h1><p>å­˜å‚¨éœ€æ±‚ï¼šå­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œåœ¨æŸ¥è¯¢æ–¹é¢æä¾›æ›´é«˜çš„æ•ˆç‡ã€‚</p><p>å­˜å‚¨ç»“æ„ï¼šèƒ½å¤Ÿä¿å­˜å¤§é‡çš„æ•°æ®ï¼Œé«˜æ•ˆçš„å†…å­˜å­˜å‚¨æœºåˆ¶ï¼Œä¾¿äºæŸ¥è¯¢ã€‚</p><p>setç±»å‹ï¼šä¸hashå­˜å‚¨ç»“æ„å®Œå…¨ç›¸åŒï¼Œç”¨valueä»…ä¿å­˜å­—æ®µåï¼Œä¸ä¿å­˜å­—æ®µå€¼ï¼Œå¹¶ä¸”valueä¸å…è®¸é‡å¤ã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sadd key member1 [member2]<br></code></pre></td></tr></table></figure><ul><li>è·å–å…¨éƒ¨æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">smembers key<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">srem key member1 [member2]<br></code></pre></td></tr></table></figure><ul><li>è·å–é›†åˆæ•°æ®æ€»é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">scard key<br></code></pre></td></tr></table></figure><ul><li>åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šæ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sismember key member<br></code></pre></td></tr></table></figure><p>æ‰©å±•æ“ä½œï¼š</p><ul><li>éšæœºè·å–é›†åˆä¸­æŒ‡å®šæ•°é‡çš„æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">srandmember key [count]<br></code></pre></td></tr></table></figure><ul><li>éšæœºè·å–é›†åˆä¸­çš„æŸä¸ªæ•°æ®å¹¶å°†è¯¥æ•°æ®ç§»å‡ºé›†åˆ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">spop key<br></code></pre></td></tr></table></figure><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sinter key1 [key2]  # äº¤é›†<br>sunion key1 [key2]  # å¹¶é›†<br>sdiff key1 [key2]  # å·®é›†ï¼ˆå¸¦æ–¹å‘ï¼‰<br></code></pre></td></tr></table></figure><ul><li>æ±‚ä¸¤ä¸ªé›†åˆçš„äº¤ã€å¹¶ã€å·®é›†å¹¶å­˜å‚¨åˆ°æŒ‡å®šé›†åˆä¸­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sinterstore destination key1 [key2]<br>sunionstore destination key1 [key2]<br>sdiffstore destination key1 [key2]<br></code></pre></td></tr></table></figure><ul><li>å°†æŒ‡å®šæ•°æ®ä»åŸå§‹é›†åˆä¸­ç§»åŠ¨åˆ°ç›®æ ‡é›†åˆä¸­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">smove source destination member<br></code></pre></td></tr></table></figure><p>setç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>setç±»å‹ä¸å…è®¸æ•°æ®é‡å¤ï¼Œå¦‚æœæ·»åŠ çš„æ•°æ®åœ¨setä¸­å·²ç»å­˜åœ¨ï¼Œå°†åªä¿ç•™ä¸€ä»½</li><li>setè™½ç„¶ä¸hashçš„å­˜å‚¨ç»“æ„ç›¸åŒï¼Œä½†æ˜¯æ— æ³•å¯ç”¨hashä¸­å­˜å‚¨å€¼çš„ç©ºé—´</li></ul><p>rediså¯ä»¥åº”ç”¨äºåŒç±»å‹ä¸é‡å¤æ•°æ®çš„åˆå¹¶æ“ä½œã€‚</p><p>reidså¯ä»¥åº”ç”¨äºåŒç±»å‹æ•°æ®çš„å¿«é€Ÿå»é‡ã€‚</p><p>rediså¯ä»¥åº”ç”¨äºåŸºäºé»‘åå•ã€ç™½åå•è®¾å®šçš„æœåŠ¡æ§åˆ¶ã€‚</p><h1 id="sorted_setç±»å‹">sorted_setç±»å‹</h1><p>å­˜å‚¨éœ€æ±‚ï¼šæ•°æ®æ’åºæœ‰åˆ©äºæ•°æ®çš„æœ‰æ•ˆå±•ç¤ºï¼Œéœ€è¦æä¾›ä¸€ç§å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹å¾è¿›è¡Œæ’åºçš„æ–¹å¼ã€‚</p><p>å­˜å‚¨ç»“æ„ï¼šæ–°çš„å­˜å‚¨æ¨¡å‹ï¼Œå¯ä»¥ä¿å­˜å¯æ’åºçš„æ•°æ®ã€‚</p><p>sorted_setç±»å‹ï¼šåœ¨setçš„å­˜å‚¨ç»“æ„åŸºç¡€ä¸Šæ·»åŠ å¯æ’åºçš„åˆ—ï¼ˆscoreï¼‰</p><p>scoreæ˜¯ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ï¼ŒRedisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚</p><p>sorted_setçš„æˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯scoreæ˜¯å¯ä»¥é‡å¤çš„ã€‚</p><p>sorted_setä¹Ÿå«åšZSetã€‚</p><p>åŸºæœ¬æ“ä½œï¼š</p><ul><li>æ·»åŠ æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zadd key score1 member1 [score2 memeber2]<br></code></pre></td></tr></table></figure><ul><li>è·å–æ•°æ®</li></ul><blockquote><p>è·å–å…¨éƒ¨æ•°æ®ï¼š<code>zrange key 0 -1</code> ï¼Œæˆ–è€…<code>zrevrange key 0 -1</code></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrange key start stop [WITHSCORES]  # åŠ ä¸ŠWITHSCORESå‚æ•°åï¼Œå¯ä»¥æŠŠscoreä¹Ÿä¸€èµ·è¿”å›<br>zrevrange key start stop [WITHSCORES]  # å€’åºæŸ¥çœ‹<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrem key member [member ...]<br></code></pre></td></tr></table></figure><ul><li>æŒ‰æ¡ä»¶è·å–æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrangebyscore key min max [WITHSCORES] [LIMIT]<br>zrevrangebyscore key max min [WITHSCORES]<br></code></pre></td></tr></table></figure><p>å·¦æ‹¬å·è¡¨ç¤ºä¸åŒ…å«ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrangebyscore zset01 60 (90  # å¤§äºç­‰äº60ï¼Œå°äº90<br></code></pre></td></tr></table></figure><p>limitå¯ä»¥é™åˆ¶è¿”å›çš„ç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrangebyscore zset01 60 (90 limit å¼€å§‹çš„ä¸‹æ ‡ æˆªå–çš„ä¸ªæ•°<br></code></pre></td></tr></table></figure><ul><li>æ¡ä»¶åˆ é™¤æ•°æ®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zremrangebyrank key start stop<br>zremrangebyscore key min max<br></code></pre></td></tr></table></figure><ul><li>è·å–é›†åˆæ•°æ®æ€»é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zcard key<br>zcount key min max<br></code></pre></td></tr></table></figure><ul><li>é›†åˆäº¤ã€å¹¶æ“ä½œ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zinterstore destination numkeys key [key ...]<br>zunionstore destination numkeys key [key ...]<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>minä¸maxç”¨äºé™å®šæœç´¢æŸ¥è¯¢çš„æ¡ä»¶</li><li>startä¸stopç”¨äºé™å®šæŸ¥è¯¢çš„èŒƒå›´ï¼Œä½œç”¨äºç´¢å¼•ï¼Œè¡¨ç¤ºå¼€å§‹å’Œç»“æŸç´¢å¼•</li><li>offsetä¸countç”¨äºé™å®šæŸ¥è¯¢èŒƒå›´ï¼Œä½œç”¨äºæŸ¥è¯¢ç»“æœï¼Œè¡¨ç¤ºå¼€å§‹ä½ç½®å’Œæ•°æ®æ€»é‡</li></ul><p>æ‰©å±•æ“ä½œï¼š</p><ul><li>è·å–æ•°æ®å¯¹åº”çš„ç´¢å¼•ï¼ˆæ’åï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zrank key member<br>zrevrank key member<br></code></pre></td></tr></table></figure><ul><li>scoreå€¼è·å–ä¸ä¿®æ”¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">zscore key member<br>zincrby key increment member<br></code></pre></td></tr></table></figure><p>rediså¯ä»¥ç”¨äºè®¡æ•°å™¨ç»„åˆæ’åºåŠŸèƒ½å¯¹åº”çš„æ’å</p><p>æ³¨æ„äº‹é¡¹</p><ul><li>scoreä¿å­˜çš„æ•°æ®å­˜å‚¨ç©ºé—´æ˜¯64ä½ï¼Œå¦‚æœæ˜¯æ•´æ•°èŒƒå›´æ˜¯ -9007199254740992 ~9007199254740992</li><li>scoreä¿å­˜çš„æ•°æ®ä¹Ÿå¯ä»¥æ˜¯åŒç²¾åº¦çš„doubleå€¼ï¼ŒåŸºäºåŒç²¾åº¦æµ®ç‚¹æ•°çš„ç‰¹å¾ï¼Œå¯èƒ½ä¼šä¸¢å¤±ç²¾åº¦ï¼Œä½¿ç”¨æ—¶è¦æ…é‡</li><li>sorted_setåº•å±‚å­˜å‚¨è¿˜æ˜¯åŸºäºsetç»“æ„çš„ï¼Œå› æ­¤æ•°æ®ä¸èƒ½é‡å¤ï¼Œå¦‚æœé‡å¤æ·»åŠ ç›¸åŒçš„æ•°æ®ï¼Œscoreå€¼å°†è¢«åå¤è¦†ç›–ï¼Œä¿ç•™æœ€åä¸€æ¬¡ä¿®æ”¹çš„ç»“æœã€‚</li></ul><p>è·å–å½“å‰redisç³»ç»Ÿæ—¶é—´ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">time<br></code></pre></td></tr></table></figure><p>rediså¯ä»¥åº”ç”¨äºå®šæ—¶ä»»åŠ¡æ‰§è¡Œé¡ºåºç®¡ç†æˆ–ä»»åŠ¡è¿‡æœŸç®¡ç†ã€‚</p><p>rediså¯ä»¥åº”ç”¨äºå¸¦æœ‰æƒé‡çš„å³æ—¶ä»»åŠ¡/æ¶ˆæ¯é˜Ÿåˆ—æ‰§è¡Œç®¡ç†</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>03. åŸºæœ¬æ“ä½œ</title>
    <link href="/2024/12/07/Redis/03-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <url>/2024/12/07/Redis/03-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤</h1><h2 id="æµ‹è¯•æ˜¯å¦è¿é€š">æµ‹è¯•æ˜¯å¦è¿é€š</h2><p>åŠŸèƒ½ï¼šæµ‹è¯•å®¢æˆ·ç«¯æ˜¯å¦è¿ä¸Šäº†redisæœåŠ¡</p><p>å‘½ä»¤æ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ping<br></code></pre></td></tr></table></figure><p>æˆåŠŸæ—¶å“åº”ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">PONG<br></code></pre></td></tr></table></figure><h2 id="ä¿¡æ¯æ·»åŠ ">ä¿¡æ¯æ·»åŠ </h2><p>åŠŸèƒ½ï¼šè®¾ç½® key, valueæ•°æ®</p><p>å‘½ä»¤æ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set key value<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">set name zhangsan<br></code></pre></td></tr></table></figure><h2 id="ä¿¡æ¯æŸ¥è¯¢">ä¿¡æ¯æŸ¥è¯¢</h2><p>åŠŸèƒ½ï¼šæ ¹æ®keyæŸ¥è¯¢å¯¹åº”çš„valueï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›ç©ºï¼ˆnilï¼‰</p><p>å‘½ä»¤æ ¼å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">get key<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">get name<br></code></pre></td></tr></table></figure><h2 id="æ¸…é™¤å±å¹•ä¿¡æ¯">æ¸…é™¤å±å¹•ä¿¡æ¯</h2><p>åŠŸèƒ½ï¼šæ¸…ç©ºå±å¹•</p><p>å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">clear<br></code></pre></td></tr></table></figure><h2 id="å¸®åŠ©">å¸®åŠ©</h2><p>åŠŸèƒ½ï¼šè·å–å¸®åŠ©ä¿¡æ¯</p><p>å‘½ä»¤æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">help å‘½ä»¤å<br>help @ç»„å<br></code></pre></td></tr></table></figure><p>å¸®åŠ©ä¿¡æ¯çš„å±•ç¤ºæ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plain">GET KEY   # å‘½ä»¤æ ¼å¼<br>summary: Get the value of a key  # åŠŸèƒ½æè¿°<br>sinceï¼š1.0.0  # å‡ºç°çš„ç‰ˆæœ¬<br>groupï¼šstring # æ‰€å±ç¾¤ç»„<br></code></pre></td></tr></table></figure><p>å‘½ä»¤åŠæ‰€å±ç»„åœ¨ï¼š/src/server.c æ–‡ä»¶ä¸­å®šä¹‰</p><h2 id="é€€å‡ºå®¢æˆ·ç«¯">é€€å‡ºå®¢æˆ·ç«¯</h2><p>åŠŸèƒ½ï¼šé€€å‡ºå®¢æˆ·ç«¯</p><p>å‘½ä»¤æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">quit<br>exit<br>&lt;ESC&gt;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>02. Redisç®€ä»‹</title>
    <link href="/2024/12/07/Redis/02-Redis%E7%AE%80%E4%BB%8B/"/>
    <url>/2024/12/07/Redis/02-Redis%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="redisç®€ä»‹">Redisç®€ä»‹</h1><p>Redisï¼š(Remote Dictionary Serverçš„æ¯ä¸ªå•è¯å‰ä¸¤ä¸ªå­—æ¯ï¼‰ï¼Œæ˜¯ç”¨Cè¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºé«˜æ€§èƒ½é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰æ•°æ®åº“ã€‚</p><p>éµå®ˆBSDåè®®ï¼Œå®Œå…¨å¼€æºå…è´¹ï¼ŒåŸºäºå†…å­˜è¿è¡Œï¼Œå¹¶æ”¯æŒæŒä¹…åŒ–ã€‚ä¹Ÿç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ã€‚</p><p>ç‰¹å¾ï¼š</p><ul><li>æ•°æ®é—´æ²¡æœ‰å¿…ç„¶çš„å…³è”å…³ç³»</li><li>å†…éƒ¨é‡‡ç”¨å•çº¿ç¨‹æœºåˆ¶è¿›è¡Œå·¥ä½œ</li><li>é«˜æ€§èƒ½</li><li>å¤šæ•°æ®ç±»å‹æ”¯æŒ<ul><li>å­—ç¬¦ä¸²ç±»å‹</li></ul></li></ul><blockquote><p>string</p></blockquote><pre><code class="hljs">-  åˆ—è¡¨ç±»å‹ </code></pre><blockquote><p>list</p></blockquote><pre><code class="hljs">-  æ•£åˆ—ç±»å‹ </code></pre><blockquote><p>hash</p></blockquote><pre><code class="hljs">-  é›†åˆç±»å‹ </code></pre><blockquote><p>set</p></blockquote><pre><code class="hljs">-  æœ‰åºé›†åˆç±»å‹ </code></pre><blockquote><p>sorted_set</p></blockquote><ul><li>æŒä¹…åŒ–æ”¯æŒï¼Œå¯ä»¥è¿›è¡Œæ•°æ®ç¾éš¾æ¢å¤</li><li>æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½</li></ul><p>åº”ç”¨ï¼š</p><ul><li>ä¸ºçƒ­ç‚¹æ•°æ®åŠ é€ŸæŸ¥è¯¢ï¼Œå¦‚çƒ­ç‚¹å•†å“ã€æ–°é—»ã€èµ„è®¯ã€æ¨å¹¿ç­‰é«˜è®¿é—®é‡ä¿¡æ¯</li><li>ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚ç§’æ€ã€æŠ¢è´­ã€è´­ç¥¨æ’é˜Ÿ</li><li>å³æ—¶ä¿¡æ¯æŸ¥è¯¢ï¼Œå¦‚æ’è¡Œæ¦œã€ç½‘ç«™è®¿é—®ç»Ÿè®¡ç­‰</li><li>æ—¶æ•ˆæ€§ä¿¡æ¯æ§åˆ¶ï¼Œå¦‚éªŒè¯ç ã€æŠ•ç¥¨æ§åˆ¶</li><li>åˆ†å¸ƒå¼æ•°æ®å…±äº«ï¼Œå¦‚åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ä¸­çš„sessionåˆ†ç¦»</li><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>åˆ†å¸ƒå¼é”</li></ul><p>Redisæ˜¯å•è¿›ç¨‹æ¨¡å‹æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å¯¹è¯»å†™ç­‰äº‹ä»¶çš„å“åº”æ˜¯é€šè¿‡å¯¹epollå‡½æ•°çš„åŒ…è£…æ¥åšåˆ°çš„ã€‚</p><blockquote><p>Epollæ˜¯Linuxå†…æ ¸ä¸ºå¤„ç†å¤§æ‰¹é‡æ–‡ä»¶æè¿°ç¬¦è€Œåšäº†æ”¹è¿›çš„epollï¼Œæ˜¯Linuxä¸‹å¤šè·¯å¤ç”¨IOæ¥å£select/pollçš„å¢å¼ºç‰ˆæœ¬ï¼Œå®ƒèƒ½æ˜¾è‘—æé«˜ç¨‹åºåœ¨å¤§é‡å¹¶å‘è¿æ¥ä¸­åªæœ‰å°‘é‡æ´»è·ƒçš„æƒ…å†µä¸‹çš„ç³»ç»ŸCPUä½¿ç”¨ç‡ã€‚</p></blockquote><p>Redisçš„å®é™…å¤„ç†é€Ÿåº¦å®Œå…¨ä¾é ä¸»è¿›ç¨‹çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>Redisé»˜è®¤æ˜¯16ä¸ªæ•°æ®åº“ï¼Œç±»ä¼¼æ•°ç»„ä¸‹æ ‡ï¼Œä»0å¼€å§‹ï¼Œåˆå§‹é»˜è®¤ä½¿ç”¨0å·æ•°æ®åº“ã€‚å¯ä»¥ç”¨<code>select</code>å‘½ä»¤åˆ‡æ¢æ•°æ®åº“ã€‚</p><p>Redisé»˜è®¤ç«¯å£å·æ˜¯6379ï¼Œå¯¹åº”åˆ°æ‰‹æœºæ•°å­—é”®ç›˜ä¸Šæ˜¯å­—æ¯ï¼šMERZã€‚</p><blockquote><p>merzå–è‡ªæ„å¤§åˆ©æ­Œå¥³AlessiaMerzçš„åå­—ã€‚Redisä½œè€…è®¤ä¸ºMerzæ„šè ¢å¯ç¬‘ï¼Œå°±é€ äº†ä¸€ä¸ªæ¢—å«"merz"è¡¨ç¤ºæ„šè ¢ã€‚</p></blockquote><h1 id="ä¸‹è½½å’Œå®‰è£…">ä¸‹è½½å’Œå®‰è£…</h1><h2 id="windowsç‰ˆ">windowsç‰ˆ</h2><p>ä¸‹è½½åœ°å€ï¼šgithubä¸Šçš„ microsoftarchiveä¸‹çš„redisï¼š<a href="https://github.com/microsoftarchive/redis"><strong>microsoftarchive/redis</strong></a></p><p>ä¸‹è½½zipå‹ç¼©åŒ…ï¼Œç›´æ¥è§£å‹å°±å¯ä»¥è¿è¡Œã€‚</p><p>è§£å‹åçš„æ–‡ä»¶ä½œç”¨ï¼š</p><ul><li>redis-server.exe</li></ul><blockquote><p>æœåŠ¡å™¨å¯åŠ¨å‘½ä»¤</p></blockquote><ul><li>redis-cli.exe</li></ul><blockquote><p>å‘½ä»¤è¡Œå®¢æˆ·ç«¯</p></blockquote><ul><li>redis.windows.conf</li></ul><blockquote><p>redisæ ¸å¿ƒé…ç½®æ–‡ä»¶</p></blockquote><ul><li>redis-benchmark.exe</li></ul><blockquote><p>æ€§èƒ½æµ‹è¯•å·¥å…·</p></blockquote><ul><li>redis-check-aof.exe</li></ul><blockquote><p>AOFæ–‡ä»¶ä¿®å¤å·¥å…·</p></blockquote><ul><li>redis-check-dump.exe</li></ul><blockquote><p>RDBæ–‡ä»¶æ£€æŸ¥å·¥å…·ï¼ˆå¿«ç…§æŒä¹…åŒ–æ–‡ä»¶ï¼‰</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>01. NoSqlç®€ä»‹</title>
    <link href="/2024/12/07/Redis/01-NoSql%E7%AE%80%E4%BB%8B/"/>
    <url>/2024/12/07/Redis/01-NoSql%E7%AE%80%E4%BB%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="nosqlç®€ä»‹">NoSqlç®€ä»‹</h1><p>å…³ç³»å‹æ•°æ®åº“ï¼š</p><ul><li>æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜IOæ€§èƒ½ä½ä¸‹</li><li>æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤ã€‚</li></ul><p>è§£å†³æ€è·¯ï¼š</p><ul><li>é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ã€‚</li></ul><blockquote><p>ä½¿ç”¨å†…å­˜å­˜å‚¨</p></blockquote><ul><li>å°½é‡å»é™¤æ•°æ®é—´çš„å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½</li></ul><blockquote><p>ä¸å­˜å‚¨å…³ç³»ï¼Œä»…å­˜å‚¨æ•°æ®</p></blockquote><p>NoSql ï¼š å³ Not-Only SQLï¼ˆæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚</p><p>ä½œç”¨ï¼šåº”å¯¹åŸºäºæµ·é‡ç”¨æˆ·å’Œæµ·é‡æ•°æ®å‰æä¸‹çš„æ•°æ®å¤„ç†é—®é¢˜ã€‚</p><p>ç‰¹å¾ï¼š</p><ul><li>å¯æ‰©å®¹ï¼Œå¯ä¼¸ç¼©</li><li>å¤§æ•°æ®é‡ä¸‹é«˜æ€§èƒ½</li><li>çµæ´»çš„æ•°æ®æ¨¡å‹</li><li>é«˜å¯ç”¨</li></ul><p>NoSqlæ•°æ®åº“çš„äº§ç”Ÿå°±æ˜¯ä¸ºäº†è§£å†³å¤§è§„æ¨¡æ•°æ®é›†åˆå¤šé‡æ•°æ®ç§ç±»å¸¦æ¥çš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯å¤§æ•°æ®åº”ç”¨éš¾é¢˜ï¼ŒåŒ…æ‹¬è¶…å¤§è§„æ¨¡çš„å­˜å‚¨ã€‚</p><p>è¿™äº›ç±»å‹çš„æ•°æ®å­˜å‚¨ä¸éœ€è¦å›ºå®šçš„æ¨¡å¼ï¼Œæ— éœ€å¤šä½™æ“ä½œå°±å¯ä»¥æ¨ªå‘æ‰©å±•ã€‚</p><p>å¸¸è§çš„NoSqlæ•°æ®åº“ï¼š</p><ul><li>Redis</li><li>memcache</li><li>HBase</li><li>MongoDB</li></ul><p>å¸¸è§çš„ç”µå•†è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>å•†å“åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ä»·æ ¼ã€å‚å•†ï¼‰ï¼Œå­˜æ”¾åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œä¾‹å¦‚MySQL</li><li>å•†å“é™„åŠ ä¿¡æ¯ï¼ˆæè¿°ã€è¯¦æƒ…ã€è¯„è®ºï¼‰ï¼Œè®¿é—®é‡è¾ƒé«˜ï¼Œå­˜æ”¾åœ¨ MongoDB ä¸­</li><li>å›¾ç‰‡ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¾‹å¦‚ FastDFS</li><li>æœç´¢å…³é”®å­—ï¼Œå­˜æ”¾åœ¨å…¨æ–‡æ£€ç´¢ä¸­ï¼Œä¾‹å¦‚ ESã€Luceneã€Solr</li><li>çƒ­ç‚¹ä¿¡æ¯ï¼ˆé«˜é¢‘ã€æ³¢æ®µæ€§ï¼‰ï¼Œå­˜æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œä¾‹å¦‚Redisã€Memcacheã€Tair</li></ul><p>NoSQLæ•°æ®åº“ä¸»è¦åˆ†ç±»ï¼š</p><table style="width:100%;"><thead><tr><th>åˆ†ç±»</th><th>Examples</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th><th>æ•°æ®æ¨¡å‹</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>é”®å€¼(key-value)</td><td>Tokyo Cabinet/Tyrantï¼Œ Redis, Voldmort, Oracle BDB</td><td>å†…å®¹ç¼“å­˜ï¼Œä¸»è¦ç”¨äºå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ï¼Œä¹Ÿç”¨äºä¸€äº›æ—¥å¿—ç³»ç»Ÿç­‰</td><td>keyæŒ‡å‘valueçš„é”®å€¼å¯¹ï¼Œé€šå¸¸ç”¨hash tableæ¥å®ç°</td><td>æŸ¥æ‰¾é€Ÿåº¦å¿«</td><td>æ•°æ®æ— ç»“æ„åŒ–ï¼Œé€šå¸¸åªè¢«å½“åšå­—ç¬¦ä¸²æˆ–äºŒè¿›åˆ¶æ•°æ®</td></tr><tr><td>åˆ—å­˜å‚¨æ•°æ®åº“</td><td>Cassandra, Hbase, Riak</td><td>åˆ†å¸ƒå¼çš„æ–‡ä»¶ç³»ç»Ÿ</td><td>ä»¥åˆ—ç°‡å¼å­˜å‚¨ï¼Œå°†åŒä¸€åˆ—æ•°æ®å­˜åœ¨ä¸€èµ·</td><td>æŸ¥æ‰¾é€Ÿåº¦å¿«ï¼Œå¯æ‰©å±•æ€§å¼ºï¼Œæ›´å®¹æ˜“è¿›è¡Œåˆ†å¸ƒå¼æ‰©å±•</td><td>åŠŸèƒ½ç›¸å¯¹å±€é™</td></tr><tr><td>æ–‡æ¡£å‹æ•°æ®åº“</td><td>CouchDB, MongoDB</td><td>Webåº”ç”¨ï¼ˆä¸key-valueç±»ä¼¼ï¼Œvalueæ˜¯ç»“æ„åŒ–çš„ï¼Œä¸åŒçš„æ˜¯æ•°æ®åº“èƒ½å¤Ÿäº†è§£valueçš„å†…å®¹ï¼‰</td><td>key-valueå¯¹åº”çš„é”®å€¼å¯¹ï¼Œvalueä¸ºç»“æ„åŒ–æ•°æ®</td><td>æ•°æ®ç»“æ„è¦æ±‚ä¸ä¸¥æ ¼ï¼Œè¡¨ç»“æ„å¯å˜ï¼Œä¸éœ€è¦åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ ·é¢„å…ˆå®šä¹‰è¡¨ç»“æ„</td><td>æŸ¥è¯¢æ€§èƒ½ä¸é«˜ï¼Œè€Œä¸”ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•</td></tr><tr><td>å›¾æ•°æ®åº“ï¼ˆGraphï¼‰</td><td>Neo4J, InfoGrid, Infinite Graph</td><td>ç¤¾äº¤ç½‘ç»œï¼Œæ¨èç³»ç»Ÿç­‰ã€‚ä¸“æ³¨äºæ„å»ºå…³ç³»å›¾è°±</td><td>å›¾ç»“æ„</td><td>åˆ©ç”¨å›¾ç»“æ„ç›¸å…³ç®—æ³•ã€‚æ¯”å¦‚æœ€çŸ­è·¯å¾„å¯»å€ï¼ŒNåº¦å…³ç³»æŸ¥æ‰¾ç­‰</td><td>å¾ˆå¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºéœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸”è¿™ç§ç»“æ„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼çš„é›†ç¾¤æ–¹æ¡ˆ</td></tr></tbody></table><p>BSONï¼šBSONæ˜¯ä¸€ç§ç±»jsonçš„ä¸€ç§äºŒè¿›åˆ¶å½¢å¼çš„å­˜å‚¨æ ¼å¼ï¼Œç®€ç§°BinaryJSONã€‚å®ƒå’ŒJSONä¸€æ ·ï¼Œæ”¯æŒå†…åµŒçš„æ–‡æ¡£å¯¹è±¡å’Œæ•°ç»„å¯¹è±¡ã€‚</p><p>MongoDBï¼šæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±C++ç¼–å†™ï¼Œæ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚MongoDBæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œã€æœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚</p><p>ä¼ ç»Ÿçš„RDBMSï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰çš„äº‹åŠ¡çš„ACIDï¼šåŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€ç‹¬ç«‹æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><p>CAPç†è®ºï¼šå¼ºä¸€è‡´æ€§ï¼ˆConsisitencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabityï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPartitiontoleranceï¼‰ã€‚</p><p>CAPç†è®ºçš„æ ¸å¿ƒæ˜¯ï¼šä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶å¾ˆå¥½çš„æ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§è¿™ä¸‰ä¸ªéœ€æ±‚ï¼Œæœ€å¤šåªèƒ½è¾ƒå¥½çš„æ»¡è¶³ä¸¤ä¸ªã€‚</p><p>å› æ­¤ï¼Œæ ¹æ®CAPåŸç†ï¼Œå°†NoSQLæ•°æ®åº“åˆ†æˆäº†æ»¡è¶³CAåŸåˆ™ã€æ»¡è¶³CPåŸåˆ™ã€æ»¡è¶³APåŸåˆ™ä¸‰ä¸ªå¤§ç±»ã€‚</p><p>å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ä¸€å®šè¦æ»¡è¶³åˆ†åŒºå®¹é”™æ€§ã€‚</p><ul><li>CA</li></ul><blockquote><p>å•ç‚¹é›†ç¾¤ï¼Œæ»¡è¶³ä¸€è‡´æ€§ã€å¯ç”¨æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸åœ¨å¯æ‰©å±•æ€§ä¸Šä¸å¤ªå¼ºå¤§ã€‚</p><p>ä¾‹å¦‚ï¼šRDBMS</p></blockquote><ul><li>CP</li></ul><blockquote><p>æ»¡è¶³ä¸€è‡´æ€§ã€åˆ†åŒºå®¹å¿æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸æ€§èƒ½ä¸æ˜¯ç‰¹åˆ«é«˜ã€‚</p><p>ä¾‹å¦‚ï¼šMongoDBã€Hbaseã€Redis</p></blockquote><ul><li>AP</li></ul><blockquote><p>æ»¡è¶³å¯ç”¨æ€§ã€‚åˆ†åŒºå®¹å¿æ€§çš„ç³»ç»Ÿï¼Œé€šå¸¸å¯èƒ½å¯¹ä¸€è‡´æ€§è¦æ±‚ä½ä¸€äº›ã€‚</p><p>ä¾‹å¦‚ï¼šCouchDBã€Cassandraã€DynamoDB</p></blockquote><p>å¯¹äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼Œä¸»è¦æ»¡è¶³CAã€‚</p><p>å¯¹äºNoSQLæ•°æ®åº“ï¼Œåˆ†åŒºå®¹å¿æ€§æ˜¯å¿…é¡»å®ç°çš„ï¼Œå‰©ä¸‹çš„åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´å–èˆã€‚</p><p>BASEï¼šåŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ã€è½¯çŠ¶æ€ï¼ˆSoftstateï¼‰ã€æœ€ç»ˆä¸€è‡´ï¼ˆEventually consistentï¼‰ã€‚</p><p>BASEæ˜¯ä¸ºäº†è§£å†³å…³ç³»æ•°æ®åº“å¼ºä¸€è‡´æ€§å¼•èµ·çš„é—®é¢˜è€Œå¼•èµ·çš„å¯ç”¨æ€§é™ä½è€Œæå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚</p><p>å®ƒçš„æ€æƒ³æ˜¯é€šè¿‡è®©ç³»ç»Ÿæ”¾æ¾å¯¹æŸä¸€æ—¶åˆ»æ•°æ®å¼ºä¸€è‡´æ€§çš„è¦æ±‚ï¼Œæ¥æ¢å–ç³»ç»Ÿæ•´ä½“ä¼¸ç¼©æ€§å’Œæ€§èƒ½ä¸Šæ”¹è§‚ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œç¼˜ç”±å°±åœ¨äºå¤§å‹ç³»ç»Ÿå¾€å¾€ç”±äºåœ°åŸŸåˆ†å¸ƒå’Œæé«˜æ€§èƒ½çš„è¦æ±‚ï¼Œä¸å¯èƒ½é‡‡ç”¨åˆ†å¸ƒå¼äº‹åŠ¡æ¥å®Œæˆè¿™äº›æŒ‡æ ‡ï¼Œè¦æƒ³è·å¾—è¿™äº›æŒ‡æ ‡ï¼Œæˆ‘ä»¬å¿…é¡»é‡‡ç”¨å¦å¤–ä¸€ç§æ–¹å¼æ¥å®Œæˆï¼Œè¿™é‡ŒBASEå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•ã€‚</p><p>CAP + BASEç¤ºä¾‹ï¼šç”µå•†æ´»åŠ¨é«˜å³°æœŸï¼Œä¸ºäº†æ»¡è¶³è®¢å•ç­‰å®æ—¶æ€§ï¼Œå¯ä»¥æš‚æ—¶è®©æ¯ä¸ªç”¨æˆ·çœ‹åˆ°çš„è®¢å•æ€»æ•°ç¨æœ‰åå·®ï¼Œç‰ºç‰²å¼ºä¸€è‡´æ€§ã€‚ç­‰é«˜å³°æœŸè¿‡å»ä¹‹åï¼Œæœ€ç»ˆè¿˜æ˜¯è¦è¾¾åˆ°ä¸€è‡´æ€§ã€‚</p><p>åˆ†å¸ƒå¼å’Œé›†ç¾¤</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆDistributedsystemï¼‰ï¼šç”±å¤šæ€è®¡ç®—æœºå’Œé€šä¿¡çš„è½¯ä»¶ç»„ä»¶é€šè¿‡è®¡ç®—æœºç½‘è·¯è¿æ¥ï¼ˆæœ¬åœ°ç½‘ç»œæˆ–å¹¿åŸŸç½‘ï¼‰ç»„æˆã€‚åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯å»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿã€‚æ­£å¼å› ä¸ºè½¯ä»¶çš„ç‰¹æ€§ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼ç³»ç»Ÿå…·æœ‰é«˜åº¦çš„å†…èšæ€§å’Œé€æ˜æ€§ã€‚å› æ­¤ï¼Œç½‘ç»œå’Œåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´çš„åŒºåˆ«æ›´å¤šçš„åœ¨äºé«˜å±‚è½¯ä»¶ï¼ˆç‰¹åˆ«æ˜¯æ“ä½œç³»ç»Ÿï¼‰ï¼Œè€Œä¸æ˜¯ç¡¬ä»¶ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥åº”ç”¨åœ¨ä¸åŒçš„å¹³å°ä¸Šï¼Œå¦‚ï¼šPCã€å·¥ä½œç«™ã€å±€åŸŸç½‘ã€å¹¿åŸŸç½‘ç­‰ã€‚</p><p>åˆ†å¸ƒå¼ï¼šä¸åŒçš„å¤šå°æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸åŒçš„æœåŠ¡å™¨æ¨¡å—ï¼ˆå·¥ç¨‹ï¼‰ï¼Œä»–ä»¬ä¹‹é—´é€šè¿‡RPC/RMIä¹‹é—´é€šä¿¡å’Œè°ƒç”¨ï¼Œå¯¹å¤–æä¾›æœåŠ¡å’Œç»„å†…åä½œã€‚</p><p>é›†ç¾¤ï¼šä¸åŒçš„å¤šæ€æœåŠ¡å™¨ä¸Šé¢éƒ¨ç½²ç›¸åŒçš„æœåŠ¡æ¨¡å—ï¼Œé€šè¿‡åˆ†å¸ƒå¼è°ƒåº¦è½¯ä»¶è¿›è¡Œç»Ÿä¸€çš„è°ƒåº¦ï¼Œå¯¹å¤–æä¾›æœåŠ¡å’Œè®¿é—®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>Redis</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. å¼ºåŒ–å­¦ä¹ </title>
    <link href="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>å¼ºåŒ–å­¦ä¹ åº”ç”¨<ol type="1"><li>ä¸¤ä¸ªåº”ç”¨</li></ol></li><li><font style="color:#DF2A3F;">å¼ºåŒ–å­¦ä¹ å¸¸ç”¨ä»€ä¹ˆè¿‡ç¨‹æè¿°</font><ol type="1"><li>é©¬å°”ç§‘å¤«æ€§æ˜¯ä»€ä¹ˆ</li></ol></li><li>å¼ºåŒ–å­¦ä¹ é—®é¢˜åŸºæœ¬è®¾ç½®<ol type="1"><li>æœºå™¨æ‰€å¤„ç¯å¢ƒE</li><li>çŠ¶æ€ç©ºé—´ï¼šæ˜¯æœºå™¨æ„ŸçŸ¥åˆ°çš„ç¯å¢ƒçš„æè¿°</li><li>æœºå™¨èƒ½é‡‡å–çš„è¡Œä¸ºç©ºé—´A</li><li>ç­–ç•¥(policy)Ï€ï¼šXâ†’A(æˆ–Ï€ï¼šXÃ—Aâ†’R)</li><li>æ½œåœ¨çš„çŠ¶æ€è½¬ç§»(æ¦‚ç‡)å‡½æ•°ï¼°ï¼šXÃ—XÃ—Aâ†’R</li><li>æ½œåœ¨çš„å¥–èµ(reward)å‡½æ•°ï¼²ï¼šXÃ—XÃ—Aâ†’Ræˆ–ï¼²ï¼šXÃ—Xâ†’R</li><li>å¼ºåŒ–å­¦ä¹ å¯¹åº”å››å…ƒç»„<ol type="1"><li>E=&lt;X,A,P,R&gt;</li></ol></li><li>ç›®æ ‡<ol type="1"><li><font style="color:#DF2A3F;">æœºå™¨é€šè¿‡åœ¨ç¯å¢ƒä¸­ä¸æ–­å°è¯•ä»è€Œå­¦åˆ°ä¸€ä¸ªç­–ç•¥Ï€ï¼Œä½¿å¾—é•¿æœŸæ‰§è¡Œè¯¥ç­–ç•¥åå¾—åˆ°çš„ç´¯ç§¯å¥–èµæœ€å¤§</font></li></ol></li></ol></li><li>å¼ºåŒ–å­¦ä¹ vsç›‘ç£å­¦ä¹ <ol type="1"><li>ç›‘ç£å­¦ä¹ ï¼šç»™æœ‰æ ‡è®°æ ·æœ¬</li><li>å¼ºåŒ–å­¦ä¹ ï¼šæ²¡æœ‰æ ‡è®°æ ·æœ¬ï¼Œé€šè¿‡æ‰§è¡ŒåŠ¨ä½œä¹‹ååé¦ˆçš„å¥–èµæ¥å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ åœ¨æŸç§æ„ä¹‰ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯å…·æœ‰â€œå»¶è¿Ÿæ ‡è®°ä¿¡æ¯â€çš„ç›‘ç£å­¦ä¹ </li></ol></li><li>K-æ‘‡è‡‚èµŒåšæœº<ol type="1"><li>ç‰¹ç‚¹<ol type="1"><li>åªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼ŒKä¸ªåŠ¨ä½œ</li><li>æ¯ä¸ªæ‘‡è‡‚çš„å¥–èµæœä»æŸä¸ªæœŸæœ›æœªçŸ¥çš„åˆ†å¸ƒ</li><li>æ‰§è¡Œæœ‰é™æ¬¡åŠ¨ä½œ</li><li>æœ€å¤§åŒ–ç´¯ç§¯å¥–èµ</li></ol></li><li>æ¢ç´¢-åˆ©ç”¨(Exploration-Exploitation)<ol type="1"><li>æ¢ç´¢ï¼šä¼°è®¡ä¸åŒæ‘‡è‡‚çš„ä¼˜åŠ£(å¥–èµæœŸæœ›çš„å¤§å°)</li><li>åˆ©ç”¨ï¼šé€‰æ‹©å½“å‰æœ€ä¼˜çš„æ‘‡è‡‚</li></ol></li><li>åœ¨æ¢ç´¢ä¸åˆ©ç”¨ä¹‹é—´è¿›è¡ŒæŠ˜ä¸­<ol type="1"><li>e-è´ªå¿ƒ<ol type="1"><li>ä»¥eçš„æ¦‚ç‡æ¢ç´¢ï¼šå‡åŒ€éšæœºé€‰æ‹©ä¸€ä¸ªæ‘‡è‡‚</li><li>ä»¥1-eçš„æ¦‚ç‡åˆ©ç”¨ï¼šé€‰æ‹©å½“å‰å¹³å‡å¥–èµæœ€é«˜çš„æ‘‡è‡‚</li></ol></li><li>Softmax</li></ol></li></ol></li><li>æœ‰æ¨¡å‹å­¦ä¹ (model-basedlearning)<ol type="1"><li>E=&lt;X,A,P,R&gt;<ol type="1"><li>X,A,P,Rå‡å·²çŸ¥</li><li>æ–¹ä¾¿èµ·è§ï¼Œå‡è®¾çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´å‡æœ‰é™</li></ol></li><li><font style="color:#DF2A3F;">å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡ï¼šæ‰¾åˆ°ä½¿ç´¯ç§¯å¥–èµæœ€å¤§çš„ç­–ç•¥Ï€</font></li><li>ç­–ç•¥è¯„ä¼°ï¼šä½¿ç”¨æŸç­–ç•¥æ‰€å¸¦æ¥çš„ç´¯ç§¯å¥–èµ<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703981515300-cf7c1206-92a2-4c1c-9569-4f13b5dfb180.png"></li><li>ç»™å®šÏ€ï¼Œå€¼å‡½æ•°çš„è®¡ç®—ï¼šå€¼å‡½æ•°å…·æœ‰ç®€å•çš„é€’å½’å½¢å¼<ol type="1"><li>Bellmanç­‰å¼</li></ol></li><li>çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°ä¸çŠ¶æ€å€¼å‡½æ•°å¯ä»¥ç›¸äº’è®¡ç®—</li><li>è´å°”æ›¼æ–¹ç¨‹<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703981648075-7e285667-d4de-4880-acdc-491d7182a85a.png"><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703981680887-4920a237-c032-4da4-951a-0de053729910.png"></li><li>å½“å‰çŠ¶æ€ä¸ä¸‹ä¸€çŠ¶æ€ä»·å€¼å‡½æ•°ä¹‹é—´çš„é€’å½’å…³ç³»</li></ol></li><li>ç­–ç•¥è¯„ä¼°<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703981802560-14ceb442-0641-4a52-a48c-c8e5a1de0598.png"></li><li>åœ¨æ¨¡å‹å·²çŸ¥æ—¶ï¼Œå¯¹ä»»æ„ç­–ç•¥ä¼°è®¡å‡ºæœ‰è¯¥ç­–ç•¥å¸¦æ¥çš„æœŸæœ›ç´¯ç§¯å¥–åŠ±â€”â€”ç­–ç•¥è¯„ä¼°</li></ol></li><li>ç­–ç•¥è¯„ä¼°ï¼šä½¿ç”¨æŸç­–ç•¥æ‰€å¸¦æ¥çš„æœŸæœ›ç´¯ç§¯å¥–èµï¼›</li><li>ç­–ç•¥æ”¹è¿›ï¼šå°†éæœ€ä¼˜ç­–ç•¥æ”¹è¿›ä¸ºæœ€ä¼˜ç­–ç•¥<ol type="1"><li>éæœ€ä¼˜ç­–ç•¥çš„æ”¹è¿›æ–¹å¼ï¼šå°†ç­–ç•¥é€‰æ‹©çš„åŠ¨ä½œæ”¹ä¸ºå½“å‰æœ€ä¼˜çš„åŠ¨ä½œ</li></ol></li><li>ç­–ç•¥è¿­ä»£(policyiteration)ï¼šæ±‚è§£æœ€ä¼˜ç­–ç•¥çš„æ–¹æ³•<ol type="1"><li>éšæœºç­–ç•¥ä½œä¸ºåˆå§‹ç­–ç•¥ç­–ç•¥è¯„ä¼°+ç­–ç•¥æ”¹è¿›+ç­–ç•¥è¯„ä¼°+ç­–ç•¥æ”¹è¿›+â€¦â€¦ç›´åˆ°ç­–ç•¥æ”¶æ•›</li><li>ç­–ç•¥è¿­ä»£ç®—æ³•çš„ç¼ºç‚¹ï¼šæ¯æ¬¡æ”¹è¿›ç­–ç•¥åéƒ½è¦é‡æ–°è¯„ä¼°ç­–ç•¥ï¼Œå¯¼è‡´è€—æ—¶</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982176074-33a48030-8c24-4439-a72b-5f94dccff3c1.png"></li></ol></li><li>å€¼è¿­ä»£<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982230635-4afb458c-8eee-4c27-a495-f146709bcb1d.png"></li></ol></li><li>æœ‰æ¨¡å‹å­¦ä¹ å°ç»“<ol type="1"><li>å¼ºåŒ–å­¦ä¹ ä»»åŠ¡å¯å½’ç»“ä¸ºåŸºäºåŠ¨æ€è§„åˆ’çš„å¯»ä¼˜é—®é¢˜</li><li>ä¸ç›‘ç£å­¦ä¹ ä¸åŒï¼Œè¿™é‡Œå¹¶æœªæ¶‰åŠåˆ°æ³›åŒ–èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸ºæ¯ä¸€ä¸ªçŠ¶æ€æ‰¾åˆ°æœ€å¥½çš„åŠ¨ä½œ</li></ol></li></ol></li><li>å…æ¨¡å‹å­¦ä¹ (model-freelearning)ï¼šæ›´åŠ ç¬¦åˆå®é™…æƒ…å†µ<ol type="1"><li>æƒ…å†µ<ol type="1"><li>è½¬ç§»æ¦‚ç‡ï¼Œå¥–èµå‡½æ•°æœªçŸ¥</li><li>ç”šè‡³ç¯å¢ƒä¸­çš„çŠ¶æ€æ•°ç›®ä¹ŸæœªçŸ¥</li><li>å‡å®šçŠ¶æ€ç©ºé—´æœ‰é™</li></ol></li><li>å…æ¨¡å‹å­¦ä¹ æ‰€é¢ä¸´çš„å›°éš¾<ol type="1"><li>ç­–ç•¥æ— æ³•è¯„ä¼°</li><li>æ— æ³•é€šè¿‡çŠ¶æ€å€¼å‡½æ•°è®¡ç®—çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°</li><li>æœºå™¨åªèƒ½ä»ä¸€ä¸ªèµ·å§‹çŠ¶æ€å¼€å§‹æ¢ç´¢ç¯å¢ƒ</li></ol></li><li>è§£å†³å›°éš¾çš„åŠæ³•<ol type="1"><li>å¤šæ¬¡é‡‡æ ·</li><li>ç›´æ¥ä¼°è®¡æ¯ä¸€å¯¹çŠ¶æ€-åŠ¨ä½œçš„å€¼å‡½æ•°</li><li>åœ¨æ¢ç´¢è¿‡ç¨‹ä¸­é€æ¸å‘ç°å„ä¸ªçŠ¶æ€</li></ol></li><li>è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ï¼šé‡‡æ ·è½¨è¿¹ï¼Œç”¨æ ·æœ¬å‡å€¼è¿‘ä¼¼æœŸæœ›<ol type="1"><li>ç­–ç•¥è¯„ä¼°ï¼šè’™ç‰¹å¡ç½—æ³•<ol type="1"><li>ä»æŸçŠ¶æ€å‡ºå‘ï¼Œæ‰§è¡ŒæŸç­–ç•¥</li><li>å¯¹è½¨è¿¹ä¸­å‡ºç°çš„æ¯å¯¹çŠ¶æ€-åŠ¨ä½œï¼Œè®°å½•å…¶åçš„å¥–èµä¹‹å’Œ</li><li>é‡‡æ ·å¤šæ¡è½¨è¿¹ï¼Œæ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹çš„ç´¯ç§¯å¥–èµå–å¹³å‡<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982461291-a50ed993-4513-46f7-9452-57a5c6e4092a.png"></li></ol></li><li>ç­–ç•¥æ”¹è¿›ï¼šæ¢å…¥å½“å‰æœ€ä¼˜åŠ¨ä½œ</li><li>è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šè½¨è¿¹çš„å•ä¸€æ€§<ol type="1"><li>è§£å†³é—®é¢˜çš„åŠæ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982538314-4722b41b-5846-4770-9a79-b8eb999ffebb.png"></li><li>åŒç­–ç•¥è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ç®—æ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982580369-98a74fac-bcd9-44aa-8bbe-fb6f24cc8a24.png"></li></ol></li><li>å¼‚ç­–ç•¥è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ç®—æ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982618153-80fc6d80-2e02-4c77-9db5-199743ae6094.png"></li></ol></li></ol></li></ol></li><li>è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ çš„ç¼ºç‚¹ï¼šä½æ•ˆ<ol type="1"><li>æ±‚å¹³å‡æ—¶ä»¥â€œæ‰¹å¤„ç†å¼â€è¿›è¡Œ</li><li>åœ¨ä¸€ä¸ªå®Œæ•´çš„é‡‡æ ·è½¨è¿¹å®Œæˆåæ‰å¯¹çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°è¿›è¡Œæ›´æ–°</li></ol></li><li>å…‹æœç¼ºç‚¹çš„åŠæ³•ï¼šæ—¶åºå·®åˆ†(temporaldifferenceï¼ŒTD)å­¦ä¹ </li></ol></li><li>æ—¶åºå·®åˆ†å­¦ä¹ <ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982696771-30826fd8-5a0b-4cab-a20d-b629259c3b3c.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982727550-ebccde81-5b15-4bb2-830e-fe340ea6d210.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703982744263-87c0f194-11d4-49ed-8549-8bb3797eba00.png"></li></ol></li></ol></li><li>æ·±åº¦å¼ºåŒ–å­¦ä¹ <ol type="1"><li>AlphaGo</li></ol></li><li>å¼ºåŒ–å­¦ä¹ åº”ç”¨<ol type="1"><li>AlphaGo</li><li>ä½“å½©ä¸–ç•Œæ¯</li></ol></li><li><font style="color:#DF2A3F;">å¼ºåŒ–å­¦ä¹ å¸¸ç”¨é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹(MDP,MarkovDecisionProcessï¼‰æè¿°</font><ol type="1"><li>é©¬å°”ç§‘å¤«æ€§ï¼šå½“å‰æ—¶åˆ»çš„çŠ¶æ€ä»…ä¸å‰ä¸€æ—¶åˆ»çš„çŠ¶æ€å’ŒåŠ¨ä½œæœ‰å…³ï¼Œä¸å…¶ä»–æ—¶åˆ»çš„çŠ¶æ€å’ŒåŠ¨ä½œæ¡ä»¶ç‹¬ç«‹</li></ol></li><li>å¼ºåŒ–å­¦ä¹ é—®é¢˜åŸºæœ¬è®¾ç½®<ol type="1"><li>æœºå™¨æ‰€å¤„ç¯å¢ƒE<ol type="1"><li>ä¾‹å¦‚åœ¨ç§è¥¿ç“œä»»åŠ¡ä¸­,ç¯å¢ƒæ˜¯è¥¿ç“œç”Ÿé•¿çš„è‡ªç„¶ä¸–ç•Œ</li></ol></li><li>çŠ¶æ€ç©ºé—´ï¼šæ˜¯æœºå™¨æ„ŸçŸ¥åˆ°çš„ç¯å¢ƒçš„æè¿°<ol type="1"><li>ç“œè‹—é•¿åŠ¿çš„æè¿°</li></ol></li><li>æœºå™¨èƒ½é‡‡å–çš„è¡Œä¸ºç©ºé—´A<ol type="1"><li>æµ‡æ°´æ–½è‚¥ç­‰</li></ol></li><li>ç­–ç•¥(policy)Ï€ï¼šXâ†’A(æˆ–Ï€ï¼šXÃ—Aâ†’R)<ol type="1"><li>æ ¹æ®ç“œè‹—çŠ¶æ€æ˜¯ç¼ºæ°´æ—¶ï¼Œè¿”å›åŠ¨ä½œæµ‡æ°´</li></ol></li><li>æ½œåœ¨çš„çŠ¶æ€è½¬ç§»(æ¦‚ç‡)å‡½æ•°ï¼°ï¼šXÃ—XÃ—Aâ†’R<ol type="1"><li>ç“œè‹—å½“å‰çŠ¶æ€ç¼ºæ°´ï¼Œé€‰æ‹©åŠ¨ä½œæµ‡æ°´ï¼Œæœ‰ä¸€å®šæ¦‚ç‡æ¢å¤å¥åº·ï¼Œä¹Ÿæœ‰ä¸€å®šæ¦‚ç‡æ— æ³•æ¢å¤</li><li><font style="color:#DF2A3F;">ä»ä¸€ä¸ªçŠ¶æ€åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€çš„è½¬ç§»ï¼Œè¦ä¹ˆä¸ºç¡®å®šæ€§è½¬ç§»è¿‡ç¨‹ï¼Œè¦ä¹ˆéšæœºæ€§è½¬ç§»è¿‡ç¨‹</font></li></ol></li><li>æ½œåœ¨çš„å¥–èµ(reward)å‡½æ•°ï¼²ï¼šXÃ—XÃ—Aâ†’Ræˆ–ï¼²ï¼šXÃ—Xâ†’R<ol type="1"><li>ç“œè‹—å¥åº·å¯¹åº”å¥–èµ+1ï¼Œç“œè‹—å‡‹é›¶å¯¹åº”å¥–èµ-10</li></ol></li><li>å¼ºåŒ–å­¦ä¹ å¯¹åº”å››å…ƒç»„<ol type="1"><li>E=&lt;X,A,P,R&gt;</li></ol></li><li>ç›®æ ‡<ol type="1"><li><font style="color:#DF2A3F;">æœºå™¨é€šè¿‡åœ¨ç¯å¢ƒä¸­ä¸æ–­å°è¯•ä»è€Œå­¦åˆ°ä¸€ä¸ªç­–ç•¥Ï€ï¼Œä½¿å¾—é•¿æœŸæ‰§è¡Œè¯¥ç­–ç•¥åå¾—åˆ°çš„ç´¯ç§¯å¥–èµæœ€å¤§</font></li></ol></li></ol></li><li>å¼ºåŒ–å­¦ä¹ vsç›‘ç£å­¦ä¹ <ol type="1"><li>ç›‘ç£å­¦ä¹ ï¼šç»™æœ‰æ ‡è®°æ ·æœ¬</li><li>å¼ºåŒ–å­¦ä¹ ï¼šæ²¡æœ‰æ ‡è®°æ ·æœ¬ï¼Œé€šè¿‡æ‰§è¡ŒåŠ¨ä½œä¹‹ååé¦ˆçš„å¥–èµæ¥å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ åœ¨æŸç§æ„ä¹‰ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯å…·æœ‰â€œå»¶è¿Ÿæ ‡è®°ä¿¡æ¯â€çš„ç›‘ç£å­¦ä¹ </li></ol></li><li>K-æ‘‡è‡‚èµŒåšæœº<ol type="1"><li>ç‰¹ç‚¹<ol type="1"><li>åªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼ŒKä¸ªåŠ¨ä½œ</li><li>æ¯ä¸ªæ‘‡è‡‚çš„å¥–èµæœä»æŸä¸ªæœŸæœ›æœªçŸ¥çš„åˆ†å¸ƒ</li><li>æ‰§è¡Œæœ‰é™æ¬¡åŠ¨ä½œ</li><li>æœ€å¤§åŒ–ç´¯ç§¯å¥–èµ</li></ol></li><li>æ¢ç´¢-åˆ©ç”¨(Exploration-Exploitation)<ol type="1"><li>æ¢ç´¢ï¼šä¼°è®¡ä¸åŒæ‘‡è‡‚çš„ä¼˜åŠ£(å¥–èµæœŸæœ›çš„å¤§å°)</li><li>åˆ©ç”¨ï¼šé€‰æ‹©å½“å‰æœ€ä¼˜çš„æ‘‡è‡‚</li></ol></li><li>åœ¨æ¢ç´¢ä¸åˆ©ç”¨ä¹‹é—´è¿›è¡ŒæŠ˜ä¸­<ol type="1"><li>e-è´ªå¿ƒ<ol type="1"><li>ä»¥eçš„æ¦‚ç‡æ¢ç´¢ï¼šå‡åŒ€éšæœºé€‰æ‹©ä¸€ä¸ªæ‘‡è‡‚</li><li>ä»¥1-eçš„æ¦‚ç‡åˆ©ç”¨ï¼šé€‰æ‹©å½“å‰å¹³å‡å¥–èµæœ€é«˜çš„æ‘‡è‡‚</li></ol></li><li>Softmax<ol type="1"><li>åŸºäºå½“å‰å·²çŸ¥çš„æ‘‡è‡‚å¹³å‡å¥–èµæ¥å¯¹æ¢ç´¢ä¸åˆ©ç”¨æŠ˜ä¸­</li><li>è‹¥æŸä¸ªæ‘‡è‡‚å½“å‰çš„å¹³å‡å¥–èµè¶Šå¤§ï¼Œåˆ™å®ƒè¢«é€‰æ‹©çš„æ¦‚ç‡è¶Šé«˜,æ¦‚ç‡åˆ†é…ä½¿ç”¨Boltzmannåˆ†å¸ƒï¼š<img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703981239439-1e6b1754-2560-4c34-ab93-32572506ecea.png"></li></ol></li><li>ä¸¤ç§ç®—æ³•éƒ½æœ‰ä¸€ä¸ªæŠ˜ä¸­å‚æ•°<img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703981314299-1a4909dc-091b-4b02-a2f9-845ac044886c.png">ï¼Œç®—æ³•æ€§èƒ½å­°å¥½å­°åå–å†³äºå…·ä½“åº”ç”¨é—®é¢˜</li></ol></li></ol></li><li>æœ‰æ¨¡å‹å­¦ä¹ (model-basedlearning)<ol type="1"><li>E=&lt;X,A,P,R&gt;<ol type="1"><li>X,A,P,Rå‡å·²çŸ¥</li><li>æ–¹ä¾¿èµ·è§ï¼Œå‡è®¾çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´å‡æœ‰é™</li></ol></li><li><font style="color:#DF2A3F;">å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡ï¼šæ‰¾åˆ°ä½¿ç´¯ç§¯å¥–èµæœ€å¤§çš„ç­–ç•¥Ï€</font></li><li>ç­–ç•¥è¯„ä¼°ï¼šä½¿ç”¨æŸç­–ç•¥æ‰€å¸¦æ¥çš„ç´¯ç§¯å¥–èµ<img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703981515300-cf7c1206-92a2-4c1c-9569-4f13b5dfb180.png"></li><li>ç»™å®šÏ€ï¼Œå€¼å‡½æ•°çš„è®¡ç®—ï¼šå€¼å‡½æ•°å…·æœ‰ç®€å•çš„é€’å½’å½¢å¼<ol type="1"><li>Bellmanç­‰å¼</li></ol></li><li>çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°ä¸çŠ¶æ€å€¼å‡½æ•°å¯ä»¥ç›¸äº’è®¡ç®—</li><li>è´å°”æ›¼æ–¹ç¨‹<ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703981648075-7e285667-d4de-4880-acdc-491d7182a85a.png"><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703981680887-4920a237-c032-4da4-951a-0de053729910.png"></li><li>å½“å‰çŠ¶æ€ä¸ä¸‹ä¸€çŠ¶æ€ä»·å€¼å‡½æ•°ä¹‹é—´çš„é€’å½’å…³ç³»</li></ol></li><li>ç­–ç•¥è¯„ä¼°<ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703981802560-14ceb442-0641-4a52-a48c-c8e5a1de0598.png"></li><li>åœ¨æ¨¡å‹å·²çŸ¥æ—¶ï¼Œå¯¹ä»»æ„ç­–ç•¥ä¼°è®¡å‡ºæœ‰è¯¥ç­–ç•¥å¸¦æ¥çš„æœŸæœ›ç´¯ç§¯å¥–åŠ±â€”â€”ç­–ç•¥è¯„ä¼°</li></ol></li><li>ç­–ç•¥è¯„ä¼°ï¼šä½¿ç”¨æŸç­–ç•¥æ‰€å¸¦æ¥çš„æœŸæœ›ç´¯ç§¯å¥–èµï¼›</li><li>ç­–ç•¥æ”¹è¿›ï¼šå°†éæœ€ä¼˜ç­–ç•¥æ”¹è¿›ä¸ºæœ€ä¼˜ç­–ç•¥<ol type="1"><li>éæœ€ä¼˜ç­–ç•¥çš„æ”¹è¿›æ–¹å¼ï¼šå°†ç­–ç•¥é€‰æ‹©çš„åŠ¨ä½œæ”¹ä¸ºå½“å‰æœ€ä¼˜çš„åŠ¨ä½œ</li></ol></li><li>ç­–ç•¥è¿­ä»£(policyiteration)ï¼šæ±‚è§£æœ€ä¼˜ç­–ç•¥çš„æ–¹æ³•<ol type="1"><li>éšæœºç­–ç•¥ä½œä¸ºåˆå§‹ç­–ç•¥ç­–ç•¥è¯„ä¼°+ç­–ç•¥æ”¹è¿›+ç­–ç•¥è¯„ä¼°+ç­–ç•¥æ”¹è¿›+â€¦â€¦ç›´åˆ°ç­–ç•¥æ”¶æ•›</li><li>ç­–ç•¥è¿­ä»£ç®—æ³•çš„ç¼ºç‚¹ï¼šæ¯æ¬¡æ”¹è¿›ç­–ç•¥åéƒ½è¦é‡æ–°è¯„ä¼°ç­–ç•¥ï¼Œå¯¼è‡´è€—æ—¶</li><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982176074-33a48030-8c24-4439-a72b-5f94dccff3c1.png"></li></ol></li><li>å€¼è¿­ä»£<ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982230635-4afb458c-8eee-4c27-a495-f146709bcb1d.png"></li></ol></li><li>æœ‰æ¨¡å‹å­¦ä¹ å°ç»“<ol type="1"><li>å¼ºåŒ–å­¦ä¹ ä»»åŠ¡å¯å½’ç»“ä¸ºåŸºäºåŠ¨æ€è§„åˆ’çš„å¯»ä¼˜é—®é¢˜</li><li>ä¸ç›‘ç£å­¦ä¹ ä¸åŒï¼Œè¿™é‡Œå¹¶æœªæ¶‰åŠåˆ°æ³›åŒ–èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸ºæ¯ä¸€ä¸ªçŠ¶æ€æ‰¾åˆ°æœ€å¥½çš„åŠ¨ä½œ</li></ol></li></ol></li><li>å…æ¨¡å‹å­¦ä¹ (model-freelearning)ï¼šæ›´åŠ ç¬¦åˆå®é™…æƒ…å†µ<ol type="1"><li>æƒ…å†µ<ol type="1"><li>è½¬ç§»æ¦‚ç‡ï¼Œå¥–èµå‡½æ•°æœªçŸ¥</li><li>ç”šè‡³ç¯å¢ƒä¸­çš„çŠ¶æ€æ•°ç›®ä¹ŸæœªçŸ¥</li><li>å‡å®šçŠ¶æ€ç©ºé—´æœ‰é™</li></ol></li><li>å…æ¨¡å‹å­¦ä¹ æ‰€é¢ä¸´çš„å›°éš¾<ol type="1"><li>ç­–ç•¥æ— æ³•è¯„ä¼°</li><li>æ— æ³•é€šè¿‡çŠ¶æ€å€¼å‡½æ•°è®¡ç®—çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°</li><li>æœºå™¨åªèƒ½ä»ä¸€ä¸ªèµ·å§‹çŠ¶æ€å¼€å§‹æ¢ç´¢ç¯å¢ƒ</li></ol></li><li>è§£å†³å›°éš¾çš„åŠæ³•<ol type="1"><li>å¤šæ¬¡é‡‡æ ·</li><li>ç›´æ¥ä¼°è®¡æ¯ä¸€å¯¹çŠ¶æ€-åŠ¨ä½œçš„å€¼å‡½æ•°</li><li>åœ¨æ¢ç´¢è¿‡ç¨‹ä¸­é€æ¸å‘ç°å„ä¸ªçŠ¶æ€</li></ol></li><li>è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ï¼šé‡‡æ ·è½¨è¿¹ï¼Œç”¨æ ·æœ¬å‡å€¼è¿‘ä¼¼æœŸæœ›<ol type="1"><li>ç­–ç•¥è¯„ä¼°ï¼šè’™ç‰¹å¡ç½—æ³•<ol type="1"><li>ä»æŸçŠ¶æ€å‡ºå‘ï¼Œæ‰§è¡ŒæŸç­–ç•¥</li><li>å¯¹è½¨è¿¹ä¸­å‡ºç°çš„æ¯å¯¹çŠ¶æ€-åŠ¨ä½œï¼Œè®°å½•å…¶åçš„å¥–èµä¹‹å’Œ</li><li>é‡‡æ ·å¤šæ¡è½¨è¿¹ï¼Œæ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹çš„ç´¯ç§¯å¥–èµå–å¹³å‡<img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982461291-a50ed993-4513-46f7-9452-57a5c6e4092a.png"></li></ol></li><li>ç­–ç•¥æ”¹è¿›ï¼šæ¢å…¥å½“å‰æœ€ä¼˜åŠ¨ä½œ</li><li>è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šè½¨è¿¹çš„å•ä¸€æ€§<ol type="1"><li>è§£å†³é—®é¢˜çš„åŠæ³•<ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982538314-4722b41b-5846-4770-9a79-b8eb999ffebb.png"></li><li>åŒç­–ç•¥è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ç®—æ³•<ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982580369-98a74fac-bcd9-44aa-8bbe-fb6f24cc8a24.png"></li></ol></li><li>å¼‚ç­–ç•¥è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ ç®—æ³•<ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982618153-80fc6d80-2e02-4c77-9db5-199743ae6094.png"></li></ol></li></ol></li></ol></li><li>è’™ç‰¹å¡ç½—å¼ºåŒ–å­¦ä¹ çš„ç¼ºç‚¹ï¼šä½æ•ˆ<ol type="1"><li>æ±‚å¹³å‡æ—¶ä»¥â€œæ‰¹å¤„ç†å¼â€è¿›è¡Œ</li><li>åœ¨ä¸€ä¸ªå®Œæ•´çš„é‡‡æ ·è½¨è¿¹å®Œæˆåæ‰å¯¹çŠ¶æ€-åŠ¨ä½œå€¼å‡½æ•°è¿›è¡Œæ›´æ–°</li></ol></li><li>å…‹æœç¼ºç‚¹çš„åŠæ³•ï¼šæ—¶åºå·®åˆ†(temporaldifferenceï¼ŒTD)å­¦ä¹ </li></ol></li><li>æ—¶åºå·®åˆ†å­¦ä¹ <ol type="1"><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982696771-30826fd8-5a0b-4cab-a20d-b629259c3b3c.png"></li><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982727550-ebccde81-5b15-4bb2-830e-fe340ea6d210.png"></li><li><img src="/2024/12/07/PR-ML/12-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1703982744263-87c0f194-11d4-49ed-8549-8bb3797eba00.png"></li></ol></li></ol></li><li>æ·±åº¦å¼ºåŒ–å­¦ä¹ <ol type="1"><li>AlphaGo</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. æ·±åº¦å­¦ä¹ </title>
    <link href="/2024/12/07/PR-ML/11-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/12/07/PR-ML/11-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>ç¥ç»ç½‘ç»œ<ol type="1"><li>ç¥ç»ç½‘ç»œæ˜¯ç”±å…·æœ‰é€‚åº”æ€§çš„ç®€å•å•å…ƒç»„æˆçš„å¹¿æ³›å¹¶è¡Œäº’è”çš„ç½‘ç»œ,å®ƒçš„ç»„ç»‡èƒ½å¤Ÿæ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»ç³»ç»Ÿå¯¹çœŸå®ä¸–ç•Œç‰©ä½“æ‰€ä½œå‡ºçš„ååº”</li><li>æœºå™¨å­¦ä¹ ä¸­çš„ç¥ç»ç½‘ç»œé€šå¸¸æ˜¯æŒ‡â€œç¥ç»ç½‘ç»œå­¦ä¹ â€æˆ–è€…æœºå™¨å­¦ä¹ ä¸ç¥ç»ç½‘ç»œä¸¤ä¸ªå­¦ç§‘çš„äº¤å‰éƒ¨åˆ†</li></ol></li><li>ç¥ç»å…ƒæ¨¡å‹<ol type="1"><li>M-Pç¥ç»å…ƒæ¨¡å‹<ol type="1"><li>è¾“å…¥ï¼šæ¥è‡ªå…¶ä»–ä¸ªç¥ç»å…ƒä¼ é€’è¿‡æ¥çš„è¾“å…¥ä¿¡å·</li><li>å¤„ç†ï¼šè¾“å…¥ä¿¡å·é€šè¿‡å¸¦æƒé‡çš„è¿æ¥è¿›è¡Œä¼ é€’,ç¥ç»å…ƒæ¥å—åˆ°æ€»è¾“å…¥å€¼å°†ä¸ç¥ç»å…ƒçš„é˜ˆå€¼è¿›è¡Œæ¯”è¾ƒ</li><li>è¾“å‡ºï¼šé€šè¿‡æ¿€æ´»å‡½æ•°çš„å¤„ç†ä»¥å¾—åˆ°è¾“å‡º</li></ol></li><li>æ¿€æ´»å‡½æ•°<ol type="1"><li>é˜¶è·ƒå‡½æ•°</li><li>Sigmoidå‡½æ•°</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703983235226-909d2021-b65a-470b-8512-8e2e8e5ea180.png"></li><li>ç†æƒ³æ¿€æ´»å‡½æ•°æ˜¯é˜¶è·ƒå‡½æ•°,0è¡¨ç¤ºæŠ‘åˆ¶ç¥ç»å…ƒè€Œ1è¡¨ç¤ºæ¿€æ´»ç¥ç»å…ƒ</li><li>é˜¶è·ƒå‡½æ•°å…·æœ‰ä¸è¿ç»­ã€ä¸å…‰æ»‘ç­‰ä¸å¥½çš„æ€§è´¨,å¸¸ç”¨çš„æ˜¯Sigmoidå‡½æ•°</li></ol></li></ol></li><li>æ„ŸçŸ¥æœº<ol type="1"><li>æ„ŸçŸ¥æœºç”±ä¸¤å±‚ç¥ç»å…ƒç»„æˆ,è¾“å…¥å±‚æ¥å—å¤–ç•Œè¾“å…¥ä¿¡å·ä¼ é€’ç»™è¾“å‡ºå±‚,è¾“å‡ºå±‚æ˜¯M-Pç¥ç»å…ƒï¼ˆé˜ˆå€¼é€»è¾‘å•å…ƒï¼‰</li><li>æ„ŸçŸ¥æœºèƒ½å¤Ÿå®¹æ˜“åœ°å®ç°é€»è¾‘ä¸ã€æˆ–ã€éè¿ç®—</li><li>æ„ŸçŸ¥æœºå­¦ä¹ <ol type="1"><li>ç»™å®šè®­ç»ƒæ•°æ®é›†,æƒé‡wä¸é˜ˆå€¼Î¸å¯ä»¥é€šè¿‡å­¦ä¹ å¾—åˆ°</li><li>æ„ŸçŸ¥æœºå­¦ä¹ è§„åˆ™<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703983384363-4d1d5e90-60b1-4728-a2d4-14c3934d5100.png"></li></ol></li></ol></li><li>æ„ŸçŸ¥æœºæ±‚è§£ä¸ã€æˆ–ã€éé—®é¢˜å’Œå¼‚æˆ–é—®é¢˜<ol type="1"><li>è‹¥ä¸¤ç±»æ¨¡å¼çº¿æ€§å¯åˆ†,åˆ™æ„ŸçŸ¥æœºçš„å­¦ä¹ è¿‡ç¨‹ä¸€å®šä¼šæ”¶æ•›ï¼›å¦åˆ™æ„ŸçŸ¥æœºçš„å­¦ä¹ è¿‡ç¨‹å°†ä¼šå‘ç”Ÿéœ‡è¡</li><li><font style="color:#DF2A3F;">å•å±‚æ„ŸçŸ¥æœºçš„å­¦ä¹ èƒ½åŠ›éå¸¸æœ‰é™,åªèƒ½è§£å†³çº¿æ€§å¯åˆ†é—®é¢˜</font></li><li>äº‹å®ä¸Š,ä¸ã€æˆ–ã€éé—®é¢˜æ˜¯çº¿æ€§å¯åˆ†çš„,å› æ­¤æ„ŸçŸ¥æœºå­¦ä¹ è¿‡ç¨‹èƒ½å¤Ÿæ±‚å¾—é€‚å½“çš„æƒå€¼å‘é‡.è€Œå¼‚æˆ–é—®é¢˜ä¸æ˜¯çº¿æ€§å¯åˆ†çš„,æ„ŸçŸ¥æœºå­¦ä¹ ä¸èƒ½æ±‚å¾—åˆé€‚è§£</li></ol></li></ol></li><li>å¤šå±‚æ„ŸçŸ¥æœº<ol type="1"><li>è§£å†³å¼‚æˆ–é—®é¢˜çš„ä¸¤å±‚æ„ŸçŸ¥æœº<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703983616018-29888694-847b-45da-b972-f3ba0439788b.png"></li></ol></li><li>è¾“å‡ºå±‚ä¸è¾“å…¥å±‚ä¹‹é—´çš„ä¸€å±‚ç¥ç»å…ƒ,è¢«ç§°ä¹‹ä¸ºéšå±‚æˆ–éšå«å±‚,éšå«å±‚å’Œè¾“å‡ºå±‚ç¥ç»å…ƒéƒ½æ˜¯å…·æœ‰æ¿€æ´»å‡½æ•°çš„åŠŸèƒ½ç¥ç»å…ƒ</li><li>å¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œ<ol type="1"><li>å®šä¹‰ï¼šæ¯å±‚ç¥ç»å…ƒä¸ä¸‹ä¸€å±‚ç¥ç»å…ƒå…¨äº’è”,ç¥ç»å…ƒä¹‹é—´ä¸å­˜åœ¨åŒå±‚è¿æ¥ä¹Ÿä¸å­˜åœ¨è·¨å±‚è¿æ¥</li><li>å‰é¦ˆï¼šè¾“å…¥å±‚æ¥å—å¤–ç•Œè¾“å…¥,éšå«å±‚ä¸è¾“å‡ºå±‚ç¥ç»å…ƒå¯¹ä¿¡å·è¿›è¡ŒåŠ å·¥,æœ€ç»ˆç»“æœç”±è¾“å‡ºå±‚ç¥ç»å…ƒè¾“å‡º</li><li>å­¦ä¹ ï¼šæ ¹æ®è®­ç»ƒæ•°æ®æ¥è°ƒæ•´ç¥ç»å…ƒä¹‹é—´çš„â€œè¿æ¥æƒâ€ä»¥åŠæ¯ä¸ªåŠŸèƒ½ç¥ç»å…ƒçš„â€œé˜ˆå€¼â€</li><li>å¤šå±‚ç½‘ç»œï¼šåŒ…å«éšå±‚çš„ç½‘ç»œ</li></ol></li></ol></li><li>è¯¯å·®é€†ä¼ æ’­ç®—æ³•<ol type="1"><li>è¯¯å·®é€†ä¼ æ’­ç®—æ³•ï¼ˆErrorBackPropagation,ç®€ç§°BPï¼‰æ˜¯æœ€æˆåŠŸçš„è®­ç»ƒå¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œçš„å­¦ä¹ ç®—æ³•.</li><li>BPç®—æ³•åŸºäºæ¢¯åº¦ä¸‹é™ç­–ç•¥,ä»¥ç›®æ ‡çš„è´Ÿæ¢¯åº¦æ–¹å‘å¯¹å‚æ•°è¿›è¡Œè°ƒæ•´.å¯¹è¯¯å·®Ek,ç»™å®šå­¦ä¹ ç‡n,å­¦ä¹ ç‡nâˆˆ(0,1)æ§åˆ¶ç€ç®—æ³•æ¯ä¸€è½®è¿­ä»£ä¸­çš„æ›´æ–°æ­¥é•¿,è‹¥å¤ªé•¿åˆ™è®©å®¹æ˜“éœ‡è¡,å¤ªå°åˆ™æ”¶æ•›é€Ÿåº¦åˆä¼šè¿‡æ…¢</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703983973386-d1f6b130-9700-4fee-98f5-3b4486bb69f1.png"></li><li>æ ‡å‡†BPç®—æ³•<ol type="1"><li>æ¯æ¬¡é’ˆå¯¹å•ä¸ªè®­ç»ƒæ ·ä¾‹æ›´æ–°æƒå€¼ä¸é˜ˆå€¼.</li><li>å‚æ•°æ›´æ–°é¢‘ç¹,ä¸åŒæ ·ä¾‹å¯èƒ½æŠµæ¶ˆ,éœ€è¦å¤šæ¬¡è¿­ä»£.</li></ol></li><li>ç´¯è®¡BPç®—æ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703984030847-b871251f-6267-4069-a757-3665a59fe9fa.png"></li></ol></li><li>ä½†åœ¨å¾ˆå¤šä»»åŠ¡ä¸­,ç´¯è®¡è¯¯å·®ä¸‹é™åˆ°ä¸€å®šç¨‹åº¦å,è¿›ä¸€æ­¥ä¸‹é™ä¼šéå¸¸ç¼“æ…¢,è¿™æ—¶æ ‡å‡†BPç®—æ³•å¾€å¾€ä¼šè·å¾—è¾ƒå¥½çš„è§£,å°¤å…¶å½“è®­ç»ƒé›†éå¸¸å¤§æ—¶æ•ˆæœæ›´æ˜æ˜¾.</li><li>å¤šå±‚å‰é¦ˆç½‘ç»œè¡¨ç¤ºèƒ½åŠ›<ol type="1"><li>åªéœ€è¦ä¸€ä¸ªåŒ…å«è¶³å¤Ÿå¤šç¥ç»å…ƒçš„éšå±‚,å¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œå°±èƒ½ä»¥ä»»æ„ç²¾åº¦é€¼è¿‘ä»»æ„å¤æ‚åº¦çš„è¿ç»­å‡½æ•°</li></ol></li><li>å¤šå±‚å‰é¦ˆç½‘ç»œå±€é™<ol type="1"><li>ç¥ç»ç½‘ç»œç”±äºå¼ºå¤§çš„è¡¨ç¤ºèƒ½åŠ›,ç»å¸¸é­é‡è¿‡æ‹Ÿåˆï¼Œè¡¨ç°ä¸ºï¼šè®­ç»ƒè¯¯å·®æŒç»­é™ä½,ä½†æµ‹è¯•è¯¯å·®å´å¯èƒ½ä¸Šå‡</li><li>å¦‚ä½•è®¾ç½®éšå±‚ç¥ç»å…ƒçš„ä¸ªæ•°ä»ç„¶æ˜¯ä¸ªæœªå†³é—®é¢˜ï¼Œå®é™…åº”ç”¨ä¸­é€šå¸¸ä½¿ç”¨â€œè¯•é”™æ³•â€è°ƒæ•´</li></ol></li><li>ç¼“è§£è¿‡æ‹Ÿåˆçš„ç­–ç•¥<ol type="1"><li>æ—©åœï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­,è‹¥è®­ç»ƒè¯¯å·®é™ä½,ä½†éªŒè¯è¯¯å·®å‡é«˜,åˆ™åœæ­¢è®­ç»ƒ</li><li>æ­£åˆ™åŒ–ï¼šåœ¨è¯¯å·®ç›®æ ‡å‡½æ•°ä¸­å¢åŠ ä¸€é¡¹æè¿°ç½‘ç»œå¤æ‚ç¨‹åº¦çš„éƒ¨åˆ†,ä¾‹å¦‚è¿æ¥æƒå€¼ä¸é˜ˆå€¼çš„å¹³æ–¹å’Œ</li></ol></li></ol></li><li>å…¨å±€æœ€å°ä¸å±€éƒ¨æœ€å°<ol type="1"><li>â€œè·³å‡ºâ€å±€éƒ¨æœ€å°çš„ç­–ç•¥<ol type="1"><li>åŸºäºæ¢¯åº¦çš„æœç´¢æ˜¯ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„å‚æ•°å¯»ä¼˜æ–¹æ³•ã€‚å¦‚æœè¯¯å·®å‡½æ•°ä»…æœ‰ä¸€ä¸ªå±€éƒ¨æå°,é‚£ä¹ˆæ­¤æ—¶æ‰¾åˆ°çš„å±€éƒ¨æå°å°±æ˜¯å…¨å±€æœ€å°ï¼›ç„¶è€Œ,å¦‚æœè¯¯å·®å‡½æ•°å…·æœ‰å¤šä¸ªå±€éƒ¨æå°,åˆ™ä¸èƒ½ä¿è¯æ‰¾åˆ°çš„è§£æ˜¯å…¨å±€æœ€å°ã€‚åœ¨ç°å®ä»»åŠ¡ä¸­,é€šå¸¸é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥â€œè·³å‡ºâ€å±€éƒ¨æå°,ä»è€Œè¿›ä¸€æ­¥è¾¾åˆ°å…¨å±€æœ€å°ã€‚</li><li>å¤šç»„ä¸åŒçš„åˆå§‹å‚æ•°ä¼˜åŒ–ç¥ç»ç½‘ç»œ,é€‰å–è¯¯å·®æœ€å°çš„è§£ä½œä¸ºæœ€ç»ˆå‚æ•°ï¼›</li><li>æ¨¡æ‹Ÿé€€ç«æŠ€æœ¯[AartsandKorst,1989]æ¯ä¸€æ­¥éƒ½ä»¥ä¸€å®šçš„æ¦‚ç‡æ¥å—æ¯”å½“å‰è§£æ›´å·®çš„ç»“æœ,ä»è€Œæœ‰åŠ©äºè·³å‡ºå±€éƒ¨æå°ï¼›</li><li>éšæœºæ¢¯åº¦ä¸‹é™ä¸æ ‡å‡†æ¢¯åº¦ä¸‹é™æ³•ç²¾ç¡®è®¡ç®—æ¢¯åº¦ä¸åŒ,éšæœºæ¢¯åº¦ä¸‹é™æ³•åœ¨è®¡ç®—æ¢¯åº¦æ—¶åŠ å…¥äº†éšæœºå› ç´ ï¼›</li><li>é—ä¼ ç®—æ³•[Goldberg,1989]é—ä¼ ç®—æ³•ä¹Ÿå¸¸ç”¨æ¥è®­ç»ƒç¥ç»ç½‘ç»œä»¥æ›´å¥½åœ°é€¼è¿‘å…¨å±€æå°</li></ol></li></ol></li><li>æ·±åº¦å­¦ä¹ <ol type="1"><li>æ·±åº¦å­¦ä¹ æ¨¡å‹<ol type="1"><li>å…¸å‹çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å°±æ˜¯å¾ˆæ·±å±‚çš„ç¥ç»ç½‘ç»œ</li><li>æ¨¡å‹å¤æ‚åº¦<ol type="1"><li>å¢åŠ éšå±‚ç¥ç»å…ƒçš„æ•°ç›®(æ¨¡å‹å®½åº¦)</li><li>å¢åŠ éšå±‚æ•°ç›®ï¼ˆæ¨¡å‹æ·±åº¦ï¼‰</li><li>ä»å¢åŠ æ¨¡å‹å¤æ‚åº¦çš„è§’åº¦çœ‹,å¢åŠ éšå±‚çš„æ•°ç›®æ¯”å¢åŠ éšå±‚ç¥ç»å…ƒçš„æ•°ç›®æ›´æœ‰æ•ˆï¼Œè¿™æ˜¯å› ä¸ºå¢åŠ éšå±‚æ•°ä¸ä»…å¢åŠ æ‹¥æœ‰æ¿€æ´»å‡½æ•°çš„ç¥ç»å…ƒæ•°ç›®ï¼Œè¿˜å¢åŠ äº†æ¿€æ´»å‡½æ•°åµŒå¥—çš„å±‚æ•°</li></ol></li><li>å¤æ‚æ¨¡å‹éš¾ç‚¹<ol type="1"><li>å¤šéšå±‚ç½‘ç»œéš¾ä»¥ç›´æ¥ç”¨ç»å…¸ç®—æ³•ï¼ˆä¾‹å¦‚æ ‡å‡†BPç®—æ³•ï¼‰è¿›è¡Œè®­ç»ƒ,å› ä¸ºè¯¯å·®åœ¨å¤šéšå±‚å†…é€†ä¼ æ’­æ—¶,å¾€å¾€ä¼šâ€å‘æ•£â€è€Œä¸èƒ½æ”¶æ•›åˆ°ç¨³å®šçŠ¶æ€.</li></ol></li></ol></li><li>å·ç§¯ç¥ç»ç½‘ç»œCNN<ol type="1"><li>å·ç§¯ç¥ç»ç½‘ç»œ<ol type="1"><li>å·ç§¯å±‚ï¼šæ¯ä¸ªå·ç§¯å±‚åŒ…å«å¤šä¸ªç‰¹å¾æ˜ å°„,æ¯ä¸ªç‰¹å¾æ˜ å°„æ˜¯ä¸€ä¸ªç”±å¤šä¸ªç¥ç»å…ƒæ„æˆçš„â€œå¹³é¢â€,é€šè¿‡ä¸€ç§å·ç§¯æ»¤æ³¢å™¨æå–çš„ä¸€ç§ç‰¹å¾ï¼›</li><li>é‡‡æ ·å±‚ï¼ˆPoolingå±‚ï¼‰ï¼šäº¦ç§°â€œæ±‡åˆå±‚â€,å…¶ä½œç”¨æ˜¯åŸºäºå±€éƒ¨ç›¸å…³æ€§åŸç†è¿›è¡Œäºšé‡‡æ ·,ä»è€Œåœ¨å‡å°‘æ•°æ®é‡çš„åŒæ—¶ä¿ç•™æœ‰ç”¨ä¿¡æ¯ï¼›</li><li>è¿æ¥å±‚ï¼šæ¯ä¸ªç¥ç»å…ƒè¢«å…¨è¿æ¥åˆ°è¾“å‡ºå±‚æ¯ä¸ªç¥ç»å…ƒ,æœ¬è´¨å°±æ˜¯ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œ,å…¶ç›®çš„æ˜¯é€šè¿‡è¿æ¥å±‚å’Œè¾“å‡ºå±‚çš„è¿æ¥å®Œæˆè¯†åˆ«ä»»åŠ¡ã€‚</li></ol></li></ol></li><li>å·ç§¯ç¥ç»ç½‘ç»œæ¿€æ´»å‡½æ•°<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703984523805-ecbc049f-1735-44df-827e-40af131c70c9.png"></li></ol></li><li>å·ç§¯ç¥ç»ç½‘ç»œè®­ç»ƒ<ol type="1"><li>CNNå¯ä»¥ç”¨BPè¿›è¡Œè®­ç»ƒ,ä½†åœ¨è®­ç»ƒä¸­,æ— è®ºæ˜¯å·ç§¯å±‚è¿˜æ˜¯é‡‡æ ·å±‚,æ¯ä¸€ç»„ç¥ç»å…ƒéƒ½æ˜¯ç”¨ç›¸åŒçš„è¿æ¥æƒ,ä»è€Œå¤§å¹…å‡å°‘äº†éœ€è¦è®­ç»ƒçš„å‚æ•°æ•°ç›®</li></ol></li><li>å¤æ‚æ¨¡å‹è®­ç»ƒæ–¹æ³•<ol type="1"><li>æƒå…±äº«<ol type="1"><li>ä¸€ç»„ç¥ç»å…ƒä½¿ç”¨ç›¸åŒçš„è¿æ¥æƒå€¼</li><li>æƒå…±äº«ç­–ç•¥åœ¨å·ç§¯ç¥ç»ç½‘ç»œ(CNN)ä¸­å‘æŒ¥äº†é‡è¦ä½œç”¨</li></ol></li><li>å·ç§¯ç¥ç»ç½‘ç»œ<ol type="1"><li>ç»“æ„ï¼šCNNå¤åˆå¤šä¸ªå·ç§¯å±‚å’Œé‡‡æ ·å±‚å¯¹è¾“å…¥ä¿¡å·è¿›è¡ŒåŠ å·¥,ç„¶ååœ¨è¿æ¥å±‚å®ç°ä¸è¾“å‡ºç›®æ ‡ä¹‹é—´çš„æ˜ å°„</li></ol></li></ol></li><li>æ·±åº¦å¤æ‚æ¨¡å‹è®­ç»ƒæ–¹æ³•<ol type="1"><li>é¢„è®­ç»ƒ+å¾®è°ƒ<ol type="1"><li>é¢„è®­ç»ƒï¼šé€å±‚è®­ç»ƒæ˜¯å¤šéšå±‚ç½‘ç»œè®­ç»ƒçš„æœ‰æ•ˆæ‰‹æ®µ,æ¯æ¬¡è®­ç»ƒä¸€å±‚éšå±‚ç»“ç‚¹,è®­ç»ƒæ—¶å°†ä¸Šä¸€å±‚éšå±‚ç»“ç‚¹çš„è¾“å‡ºä½œä¸ºè¾“å…¥,è€Œæœ¬å±‚éšç»“ç‚¹çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€å±‚éšç»“ç‚¹çš„è¾“å…¥,è¿™ç§°ä¸ºâ€é¢„è®­ç»ƒâ€ï¼›</li><li>å¾®è°ƒï¼šåœ¨é¢„è®­ç»ƒå…¨éƒ¨å®Œæˆå,å†å¯¹æ•´ä¸ªç½‘ç»œè¿›è¡Œå¾®è°ƒè®­ç»ƒï¼›å¾®è°ƒä¸€èˆ¬ä½¿ç”¨BPç®—æ³•ã€‚</li><li>ä¾‹å­ï¼šæ·±åº¦ä¿¡å¿µç½‘ç»œ<ol type="1"><li>ç»“æ„ï¼šæ¯ä¸€å±‚éƒ½æ˜¯ä¸€ä¸ªå—é™Boltzmannæœº</li><li>è®­ç»ƒæ–¹æ³•ï¼šæ— ç›‘ç£é¢„è®­ç»ƒ+BPå¾®è°ƒ</li></ol></li><li>åˆ†æ<ol type="1"><li>é¢„è®­ç»ƒ+å¾®è°ƒçš„åšæ³•å¯ä»¥è§†ä¸ºå°†å¤§é‡å‚æ•°åˆ†ç»„,å¯¹æ¯ç»„å…ˆæ‰¾åˆ°å±€éƒ¨çœ‹èµ·æ¥æ¯”è¾ƒå¥½çš„è®¾ç½®,ç„¶åå†åŸºäºè¿™äº›å±€éƒ¨è¾ƒä¼˜çš„ç»“æœè”åˆèµ·æ¥è¿›è¡Œå…¨å±€å¯»ä¼˜.</li></ol></li></ol></li></ol></li></ol></li><li>å…¶ä»–å¸¸è§æ·±åº¦ç¥ç»ç½‘ç»œ<ol type="1"><li>RNNå¾ªç¯ç¥ç»ç½‘ç»œ<ol type="1"><li>éšå±‚å¾ªç¯</li></ol></li><li>LSTMé•¿çŸ­æ—¶è®°å¿†æ¨¡å‹<ol type="1"><li>RNNæœ‰æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜</li><li>å¾ˆéš¾å¤„ç†é•¿åºåˆ—çš„æ•°æ®</li><li>LSTMç”±ä¸‰ä¸ªé—¨æ¥æ§åˆ¶ç¥ç»å…ƒçŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºå¿˜è®°é—¨ã€è¾“å…¥é—¨å’Œè¾“å‡ºé—¨<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703984828152-14ecca85-92e0-4784-8085-01ded5625b91.png"></li></ol></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703984842532-ec097488-6444-4486-8441-b25e38bc3707.png"></li></ol></li><li>è‡ªç¼–ç å™¨</li><li>é™åˆ¶æ€§ç»å°”å…¹æ›¼æœº<ol type="1"><li>èƒ½é‡æ¨¡å‹<ol type="1"><li>ç¥ç»ç½‘ç»œä¸­æœ‰ä¸€ç±»æ¨¡å‹ä¸ºç½‘ç»œå®šä¹‰ä¸€ä¸ªâ€œèƒ½é‡â€,èƒ½é‡æœ€å°åŒ–æ—¶ç½‘ç»œè¾¾åˆ°ç†æƒ³çŠ¶æ€,è€Œç½‘ç»œçš„è®­ç»ƒå°±æ˜¯åœ¨æœ€å°åŒ–è¿™ä¸ªèƒ½é‡å‡½æ•°</li></ol></li><li>Boltzmannæœº<ol type="1"><li>Boltzmannæœºå°±æ˜¯ä¸€ç§åŸºäºèƒ½é‡çš„æ¨¡å‹</li><li>ç»“æ„ï¼šæ˜¾å±‚ä¸éšå±‚<ol type="1"><li>æ˜¾å±‚ï¼šæ•°æ®çš„è¾“å…¥è¾“å‡º</li><li>éšå±‚ï¼šæ•°æ®çš„å†…åœ¨è¡¨è¾¾</li></ol></li><li>ç¥ç»å…ƒ<ol type="1"><li>å¸ƒå°”å‹,å³åªèƒ½å–0å’Œ1ä¸¤ç§çŠ¶æ€,å…¶ä¸­1è¡¨ç¤ºæ¿€æ´»,0è¡¨ç¤ºæŠ‘åˆ¶</li></ol></li><li>ç½‘ç»œä¸­çš„ç¥ç»å…ƒä»¥ä»»æ„ä¸ä¾èµ–äºè¾“å…¥å€¼çš„é¡ºåºè¿›è¡Œæ›´æ–°,åˆ™ç½‘ç»œæœ€ç»ˆå°†è¾¾åˆ°Boltzmannåˆ†å¸ƒ,æ­¤æ—¶çŠ¶æ€å‘é‡å‡ºç°çš„æ¦‚ç‡å°†ä»…ç”±å…¶èƒ½é‡ä¸æ‰€æœ‰å¯èƒ½çŠ¶æ€å‘é‡çš„èƒ½é‡ç¡®å®šï¼š<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985000493-5987c9c2-c7d0-4516-b7a5-32b5ba8608f4.png"></li><li>Boltzmannæœºè®­ç»ƒ<ol type="1"><li>å°†æ¯ä¸ªè®­ç»ƒæ ·æœ¬è§†ä¸ºä¸€ä¸ªçŠ¶æ€å‘é‡,ä½¿å…¶å‡ºç°çš„æ¦‚ç‡å°½å¯èƒ½å¤§</li><li>æ ‡å‡†çš„Boltzmannæœºæ˜¯ä¸€ä¸ªå…¨è¿æ¥å›¾,è®­ç»ƒç½‘ç»œçš„å¤æ‚åº¦å¾ˆé«˜,è¿™ä½¿å…¶éš¾ä»¥ç”¨äºè§£å†³ç°å®ä»»åŠ¡</li><li>ç°å®ä¸­å¸¸ç”¨å—é™Boltzmannæœº,ç®€ç§°RBMï¼ŒRBMä»…ä¿ç•™æ˜¾å±‚ä¸éšå±‚ä¹‹é—´çš„è¿æ¥,ä»è€Œå°†Boltzmannæœºç»“æ„æœ‰å®Œå…¨å›¾ç®€åŒ–ä¸ºäºŒéƒ¨å›¾</li></ol></li></ol></li><li>å—é™Boltzmannæœº<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985091168-b000bf11-2326-4003-acd2-96e97261f06f.png"></li></ol></li></ol></li><li>æ·±åº¦ä¿¡å¿µç½‘ç»œ</li><li>ç”Ÿæˆæ¨¡å‹<ol type="1"><li>VAE</li><li>GAN</li></ol></li></ol></li><li>æ¢¯åº¦è®¡ç®—<ol type="1"><li>æ•°å€¼æ¢¯åº¦ï¼šè¿‘ä¼¼ï¼Œæ…¢ï¼Œå®¹æ˜“è®¡ç®—ï¼›</li><li>è§£ææ¢¯åº¦ï¼šå‡†ç¡®ï¼Œå¿«ï¼Œä½†æ˜¯æ˜“äºå‡ºé”™ï¼›</li><li>å®é™…ï¼šé€šå¸¸é‡‡ç”¨è§£ææ¢¯åº¦æ¥è®¡ç®—ï¼Œä½†æ˜¯åˆ©ç”¨æ•°å€¼æ¢¯åº¦åšæ‰§è¡Œæ£€æŸ¥ï¼Œè¢«ç§°ä¸ºGradientcheck</li></ol></li><li>æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸</li><li>æ®‹å·®ç»“æ„<ol type="1"><li>ResNet</li><li>æ¯”CNNæ›´å®¹æ˜“è®­ç»ƒï¼Œæ®‹å·®å—ä½¿ç”¨äº†è·³è·ƒè¿æ¥ï¼Œå¯ä»¥ç¼“è§£åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­å¢åŠ æ·±åº¦å¸¦æ¥çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985200955-afa9df3c-1b00-42e7-8a10-3695249f916e.png"></li></ol></li><li>Batchsize+BatchNormalization</li><li>æ­£åˆ™åŒ–<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985240132-407271b6-b11e-474d-ada6-0e6dc9956dab.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985258742-dfc18ed1-d989-44b2-828b-1b0b70f3e2dc.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985284504-a0c03406-470a-49b8-ae0e-263e42c70f42.png"></li></ol></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985308240-44ce28c7-1a42-4d49-8233-107d7c956f44.png"><br></li><li>è®­ç»ƒå¤šä¹…<ol type="1"><li>å½“æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šç²¾åº¦ä¸‹é™æ—¶ï¼Œåœæ­¢è®­ç»ƒï¼›</li><li>æˆ–è€…è®­ç»ƒå¾ˆé•¿çš„æ—¶é—´ï¼Œä½†ä¸€ç›´ä¿å­˜æ¯æ­¥çš„è®­ç»ƒç»“æœï¼Œè·Ÿè¸ªæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985363637-9ade2311-5e92-4ec9-a3e1-40609a0627b8.png"></li></ol></li><li>ç†è§£æ·±åº¦å­¦ä¹ <ol type="1"><li>â€œç‰¹å¾å·¥ç¨‹â€VSâ€œç‰¹å¾å­¦ä¹ â€æˆ–è€…â€œè¡¨ç¤ºå­¦ä¹ â€<ol type="1"><li>ç‰¹å¾å·¥ç¨‹ç”±äººç±»ä¸“å®¶æ ¹æ®ç°å®ä»»åŠ¡æ¥è®¾è®¡,ç‰¹å¾æå–ä¸è¯†åˆ«æ˜¯å•ç‹¬çš„ä¸¤ä¸ªé˜¶æ®µ<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985419163-9f266d9a-ba6a-4283-9817-6bde565d6941.png"></li></ol></li><li>ç‰¹å¾å­¦ä¹ é€šè¿‡æ·±åº¦å­¦ä¹ æŠ€æœ¯è‡ªåŠ¨äº§ç”Ÿæœ‰ç›Šäºåˆ†ç±»çš„ç‰¹å¾,æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„å­¦ä¹ æ¡†æ¶ã€‚<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985433127-08b797cd-1c68-45f6-892d-a201b516688e.png"></li></ol></li></ol></li><li>å‡½æ•°æ‹Ÿåˆ<ol type="1"><li>åªéœ€è¦ä¸€ä¸ªåŒ…å«è¶³å¤Ÿå¤šç¥ç»å…ƒçš„éšå±‚,å¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œå°±èƒ½ä»¥ä»»æ„ç²¾åº¦é€¼è¿‘ä»»æ„å¤æ‚åº¦çš„è¿ç»­å‡½æ•°</li></ol></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. é›†æˆå­¦ä¹ </title>
    <link href="/2024/12/07/PR-ML/10-%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/12/07/PR-ML/10-%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>ä¸ªä½“ä¸é›†æˆ<ol type="1"><li><font style="color:#DF2A3F;">é›†æˆå­¦ä¹ (ensemblelearning)é€šè¿‡æ„å»ºå¹¶ç»“åˆå¤šä¸ªå­¦ä¹ å™¨æ¥æå‡æ€§èƒ½</font></li><li>é›†æˆä¸ªä½“åº”ï¼šå¥½è€Œä¸åŒ</li><li>å‡è®¾åŸºåˆ†ç±»å™¨çš„é”™è¯¯ç‡ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™ç”±Hoeffdingä¸ç­‰å¼å¯å¾—é›†æˆçš„é”™è¯¯ç‡ä¸ºï¼š<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989821315-63314fd8-ca54-4a94-9f01-e6a60635761c.png"></li><li>ä¸Šå¼æ˜¾ç¤ºï¼Œåœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œéšç€é›†æˆåˆ†ç±»å™¨æ•°ç›®çš„å¢åŠ ï¼Œé›†æˆçš„é”™è¯¯ç‡å°†æŒ‡æ•°çº§ä¸‹é™ï¼Œæœ€ç»ˆè¶‹å‘äº0</li><li>åˆ†æ<ol type="1"><li>ä¸Šé¢çš„åˆ†ææœ‰ä¸€ä¸ªå…³é”®å‡è®¾ï¼šåŸºå­¦ä¹ å™¨çš„è¯¯å·®ç›¸äº’ç‹¬ç«‹</li><li>ç°å®ä»»åŠ¡ä¸­ï¼Œä¸ªä½“å­¦ä¹ å™¨æ˜¯ä¸ºè§£å†³åŒä¸€ä¸ªé—®é¢˜è®­ç»ƒå‡ºæ¥çš„ï¼Œæ˜¾ç„¶ä¸å¯èƒ½äº’ç›¸ç‹¬ç«‹</li><li>äº‹å®ä¸Šï¼Œä¸ªä½“å­¦ä¹ å™¨çš„â€œå‡†ç¡®æ€§â€å’Œâ€œå¤šæ ·æ€§â€æœ¬èº«å°±å­˜åœ¨å†²çª</li><li>å¦‚ä½•äº§ç”Ÿâ€œå¥½è€Œä¸åŒâ€çš„ä¸ªä½“å­¦ä¹ å™¨æ˜¯é›†æˆå­¦ä¹ ç ”ç©¶çš„æ ¸å¿ƒ</li><li>é›†æˆå­¦ä¹ å¤§è‡´å¯åˆ†ä¸ºä¸¤å¤§ç±»</li></ol></li></ol></li><li>Boosting<ol type="1"><li>ä¸ªä½“å­¦ä¹ å™¨å­˜åœ¨å¼ºä¾èµ–å…³ç³»</li><li>ä¸²è¡Œç”Ÿæˆ</li><li>æ¯æ¬¡è°ƒæ•´è®­ç»ƒæ•°æ®çš„æ ·æœ¬åˆ†å¸ƒ</li><li>Boostingæ—ç®—æ³•æœ€è‘—åçš„ä»£è¡¨æ˜¯AdaBoost<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990169473-49551828-1a70-4fa0-adc7-1d2552c3428b.png"></li><li>åŸºå­¦ä¹ å™¨çš„çº¿æ€§ç»„åˆ</li><li>è¾¾åˆ°äº†è´å¶æ–¯æœ€ä¼˜é”™è¯¯ç‡ï¼Œè¯´æ˜æŒ‡æ•°æŸå¤±å‡½æ•°æ˜¯åˆ†ç±»ä»»åŠ¡åŸæ¥0/1æŸå¤±å‡½æ•°çš„ä¸€è‡´æ›¿ä»£å‡½æ•°ã€‚</li><li>æ•°æ®åˆ†å¸ƒçš„å­¦ä¹ <ol type="1"><li>é‡èµ‹æƒæ³•ï¼šåœ¨è®­ç»ƒçš„æ¯ä¸€è½®ä¸­ï¼Œæ ¹æ®æ ·æœ¬åˆ†å¸ƒä¸ºæ¯ä¸ªè®­ç»ƒæ ·æœ¬é‡æ–°èµ‹äºˆä¸€ä¸ªæƒé‡ã€‚</li><li>é‡é‡‡æ ·æ³•ï¼šåœ¨è®­ç»ƒçš„æ¯ä¸€è½®ä¸­ï¼Œæ ¹æ®æ ·æœ¬åˆ†å¸ƒå¯¹è®­ç»ƒé›†é‡æ–°é‡‡æ ·ï¼Œå†ç”¨é‡é‡‡æ ·è€Œå¾—çš„æ ·æœ¬é›†å¯¹åŸºå­¦ä¹ å™¨è¿›è¡Œè®­ç»ƒã€‚</li></ol></li><li>é‡å¯åŠ¨ï¼Œé¿å…è®­ç»ƒè¿‡ç¨‹è¿‡æ—©åœæ­¢</li><li>ä»åå·®-æ–¹å·®çš„è§’åº¦ï¼šé™ä½åå·®ï¼Œå¯å¯¹æ³›åŒ–æ€§èƒ½ç›¸å½“å¼±çš„å­¦ä¹ å™¨æ„é€ å‡ºå¾ˆå¼ºçš„é›†æˆ</li></ol></li></ol></li><li>Baggingä¸éšæœºæ£®æ—<ol type="1"><li>ä¸ªä½“å­¦ä¹ å™¨ä¸å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼šæ¬²å¾—åˆ°æ³›åŒ–æ€§èƒ½å¼ºçš„é›†æˆï¼Œé›†æˆä¸­çš„ä¸ªä½“å­¦ä¹ å™¨åº”å°½å¯èƒ½ç›¸äº’ç‹¬ç«‹ï¼Œä½†â€œç‹¬ç«‹â€åœ¨ç°å®ä¸­æ— æ³•åšåˆ°ï¼Œå¯ä»¥è®¾æ³•ä½¿åŸºå­¦ä¹ å™¨å°½å¯èƒ½å…·æœ‰è¾ƒå¤§çš„å·®å¼‚ã€‚ä¾‹å¦‚äº§ç”Ÿè‹¥å¹²ä¸ªä¸åŒçš„å­é›†ï¼Œå†ä»æ¯ä¸ªæ•°æ®å­é›†ä¸­è®­ç»ƒå‡ºä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼›</li><li>ä½†å¦‚æœæ¯ä¸ªå­é›†å®Œå…¨ä¸ä¸€æ ·ï¼Œåˆ™æ¯ä¸ªåŸºå­¦ä¹ å™¨åªç”¨åˆ°ä¸€å°éƒ¨åˆ†æ•°æ®è®­ç»ƒï¼Œåˆæ— æ³•ä¿è¯ä¸ªä½“å­¦ä¹ å™¨çš„æ€§èƒ½ã€‚</li><li>å¹¶è¡ŒåŒ–ç”Ÿæˆ<ol type="1"><li>è‡ªåŠ©é‡‡æ ·æ³•â€”â€”Bagging</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990343138-9d86f58c-8703-4274-985c-69c69a6a6188.png"></li><li>ç‰¹ç‚¹<ol type="1"><li>æ—¶é—´å¤æ‚åº¦ä½<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990404390-d401131f-1def-4688-99ae-24ee12990a07.png"></li></ol></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990422414-a71eb40f-f569-4369-a2fb-6a28289c15be.png"></li></ol></li><li>è‡ªåŠ©é‡‡æ ·æ³•--è‡ªåŠ©æ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990684055-3443c3dc-cfd4-4c1e-ad72-ecc6e673aebd.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990715727-bd61ae96-18b2-49ba-94cc-1e8510fc7b16.png"></li></ol></li><li>è¯„ä¼°æ–¹æ³•<ol type="1"><li>ç•™å‡ºæ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990792305-b435d0a4-2f9e-40cb-b788-81065ef7f36f.png"></li></ol></li><li>äº¤å‰éªŒè¯æ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990831975-da3d608b-faa1-4bd4-abb3-8c6a9fbaa48b.png"></li></ol></li><li>ç•™ä¸€æ³•<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703990872153-0021dcf3-552a-4324-8835-a8a1c06eb647.png"></li></ol></li></ol></li><li>baggingå®éªŒ<ol type="1"><li>ä»åå·®-æ–¹å·®çš„è§’åº¦ï¼šé™ä½æ–¹å·®ï¼Œåœ¨ä¸å‰ªæçš„å†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œç­‰æ˜“å—æ ·æœ¬å½±å“çš„å­¦ä¹ å™¨ä¸Šæ•ˆæœæ›´å¥½<br></li></ol></li><li>éšæœºæ£®æ—<ol type="1"><li>éšæœºæ£®æ—(RandomForestï¼Œç®€ç§°RF)æ˜¯Baggingçš„ä¸€ä¸ªæ‰©å±•å˜ç§ï¼Œä»¥å†³ç­–æ ‘ä¸ºåŸºç¡€ï¼Œè¿›ä¸€æ­¥åœ¨å†³ç­–æ ‘çš„è®­ç»ƒè¿‡ç¨‹ä¸­å¼•å…¥äº†éšæœºå±æ€§é€‰æ‹©ã€‚</li><li>é‡‡æ ·çš„éšæœºæ€§ï¼šè®­ç»ƒé›†çš„åˆ’åˆ†ï¼›</li><li>å±æ€§é€‰æ‹©çš„éšæœºæ€§ï¼šåœ¨éšæœºé€‰æ‹©çš„kä¸ªå±æ€§é›†åˆä¸­ï¼Œä¾æ¬¡é€‰æ‹©æœ€ä¼˜å±æ€§è¿›è¡Œåˆ’åˆ†ï¼Œkä¸ºéšæœºæ€§çš„å¼•å…¥ç¨‹åº¦</li><li>éšæœºæ£®æ—çš„ä¼˜ç‚¹<ol type="1"><li>RFç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œè®¡ç®—å¼€é”€å°ï¼›åœ¨å¾ˆå¤šç°å®ä»»åŠ¡ä¸­å±•ç°å‡ºå¼ºå¤§çš„æ€§èƒ½ï¼Œè¢«èª‰ä¸ºä»£è¡¨é›†æˆå­¦ä¹ æ°´å¹³çš„æ–¹æ³•ã€‚</li><li>RFä¸­çš„åŸºå­¦ä¹ å™¨çš„å¤šæ ·æ€§ä¸ä»…æ¥è‡ªäºæ ·æœ¬çš„æ‰°åŠ¨ï¼Œè¿˜æ¥è‡ªå±æ€§çš„æ‰°åŠ¨ï¼Œä½¿å¾—æœ€ç»ˆé›†æˆçš„æ³›åŒ–æ€§èƒ½å¯ä»¥é€šè¿‡ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´çš„å·®å¼‚åº¦å¢åŠ è€Œè¿›ä¸€æ­¥æå‡ã€‚</li><li>éšç€ä¸ªä½“å­¦ä¹ å™¨æ•°ç›®çš„å¢åŠ ï¼Œéšæœºæ£®æ—é€šå¸¸å¯ä»¥æ”¶æ•›åˆ°æ›´ä½çš„æ³›åŒ–è¯¯å·®ï¼›è®­ç»ƒæ•ˆç‡å¸¸å¸¸ä¼˜äºå…¶ä»–Baggingæ–¹æ³•ã€‚</li></ol></li></ol></li></ol></li></ol></li><li>ç»“åˆç­–ç•¥<ol type="1"><li>å¹³å‡æ³•<ol type="1"><li>ç®€å•å¹³å‡æ³•</li><li>åŠ æƒå¹³å‡æ³•</li><li>ç‰¹ç‚¹<ol type="1"><li>ç®€å•å¹³å‡æ³•æ˜¯åŠ æƒå¹³å‡æ³•çš„ç‰¹ä¾‹</li><li>åŠ æƒå¹³å‡æ³•åœ¨äºŒåä¸–çºªäº”åå¹´ä»£è¢«å¹¿æ³›ä½¿ç”¨</li><li>é›†æˆå­¦ä¹ ä¸­çš„å„ç§ç»“åˆæ–¹æ³•éƒ½å¯ä»¥çœ‹æˆæ˜¯åŠ æƒå¹³å‡æ³•çš„å˜ç§æˆ–ç‰¹ä¾‹</li><li>åŠ æƒå¹³å‡æ³•å¯è®¤ä¸ºæ˜¯é›†æˆå­¦ä¹ ç ”ç©¶çš„åŸºæœ¬å‡ºå‘ç‚¹</li><li>åŠ æƒå¹³å‡æ³•æœªå¿…ä¸€å®šä¼˜äºç®€å•å¹³å‡æ³•</li></ol></li></ol></li><li>æŠ•ç¥¨æ³•<ol type="1"><li>ç»å¯¹å¤šæ•°æŠ•ç¥¨æ³•</li><li>ç›¸å¯¹å¤šæ•°æŠ•ç¥¨æ³•</li><li>åŠ æƒæŠ•ç¥¨æ³•</li></ol></li><li>å­¦ä¹ æ³•<ol type="1"><li>Stackingæ˜¯å­¦ä¹ æ³•çš„å…¸å‹ä»£è¡¨<ol type="1"><li>ä»åˆå§‹æ•°æ®é›†è®­ç»ƒå‡ºåˆçº§å­¦ä¹ å™¨ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°æ•°æ®é›†ç”¨äºè®­ç»ƒæ¬¡çº§å­¦ä¹ å™¨ï¼Œåˆçº§å­¦ä¹ å™¨çš„è¾“å‡ºè¢«å½“æˆæ ·ä¾‹è¾“å…¥ç‰¹å¾ï¼Œè€Œåˆçº§æ ·æœ¬çš„æ ‡è®°ä»å½“åšæ ·ä¾‹çš„æ ‡è®°ã€‚</li><li>å¤šå“åº”çº¿æ€§å›å½’(MLR)ä½œä¸ºæ¬¡çº§å­¦ä¹ å™¨çš„å­¦ä¹ ç®—æ³•ï¼Œæ•ˆæœè¾ƒå¥½</li></ol></li><li>KæŠ˜äº¤å‰éªŒè¯/ç•™ä¸€æ³•ï¼Œå­¦ä¹ Tä¸ªåˆçº§å­¦ä¹ å™¨</li></ol></li></ol></li><li>è¯¯å·®-åˆ†æ­§åˆ†è§£<ol type="1"><li>åˆ†æ­§é¡¹ä»£è¡¨äº†ä¸ªä½“å­¦ä¹ å™¨åœ¨æ ·æœ¬å›ä¸Šçš„ä¸ä¸€è‡´æ€§ï¼Œå³åœ¨ä¸€å®šç¨‹åº¦ä¸Šåæ˜ äº†ä¸ªä½“å­¦ä¹ å™¨çš„å¤šæ ·æ€§ï¼Œ<ol type="1"><li>ä¸ªä½“å’Œé›†æˆ<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703991548117-08f0eace-c868-41c7-ba2f-34ab52229522.png"></li></ol></li><li>ä¸ªä½“å­¦ä¹ å™¨å‡†ç¡®ç‡è¶Šé«˜ï¼Œå¤šæ ·æ€§è¶Šå¤§ï¼Œåˆ™é›†æˆè¶Šå¥½ã€‚</li><li>å¤šæ ·æ€§åº¦é‡(diversitymeasure)ç”¨äºåº¦é‡é›†æˆä¸­ä¸ªä½“å­¦ä¹ å™¨çš„å¤šæ ·æ€§</li><li>å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œåˆ†ç±»å™¨â„ï¿½ä¸â„ï¿½çš„é¢„æµ‹ç»“æœè”ç«‹è¡¨(contingencytable)ä¸º<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703991610747-ad899da1-3378-4d5c-9884-c336ec1ccfb3.png"></li><li>å¸¸è§çš„å¤šæ ·æ€§åº¦é‡<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703991626705-299eefd9-b651-4dd8-ba49-e0e158b2c008.png"></li><li>Qç»Ÿè®¡é‡</li><li>Kç»Ÿè®¡é‡</li></ol></li></ol></li></ol></li><li>å¤šæ ·æ€§å¢å¼º<ol type="1"><li>å¸¸è§çš„å¢å¼ºä¸ªä½“å­¦ä¹ å™¨å¤šæ ·æ€§çš„æ–¹æ³•<ol type="1"><li>æ•°æ®æ ·æœ¬æ‰°åŠ¨</li><li>è¾“å…¥å±æ€§æ‰°åŠ¨</li><li>è¾“å‡ºè¡¨ç¤ºæ‰°åŠ¨</li><li>ç®—æ³•å‚æ•°æ‰°åŠ¨<ol type="1"><li>åŸºå­¦ä¹ æ³•ä¸€èˆ¬éƒ½æœ‰å‚æ•°éœ€è¦è®¾ç½®ï¼Œä¾‹å¦‚ç¥ç»ç½‘ç»œçš„éšå±‚ç¥ç»å…ƒæ•°ï¼Œåˆå§‹è¿æ¥æƒå€¼ï¼Œé€šè¿‡éšæœºè®¾ç½®ä¸åŒçš„å‚æ•°ï¼Œå¾€å¾€å¯äº§ç”Ÿå·®åˆ«è¾ƒå¤§çš„ä¸ªä½“å­¦ä¹ å™¨ï¼›</li><li>è´Ÿç›¸å…³æ³•ï¼šæ˜¾å¼çš„é€šè¿‡æ­£åˆ™åŒ–é¡¹æ¥å¼ºåˆ¶ä¸ªä½“ç¥ç»ç½‘ç»œä½¿ç”¨ä¸åŒçš„å‚æ•°ï¼›</li><li>ä¸åŒçš„å¤šæ ·æ€§å¢å¼ºæœºåˆ¶åŒæ—¶ä½¿ç”¨ï¼šä¾‹å¦‚éšæœºæ£®æ—ä¸­åŒæ—¶ä½¿ç”¨æ•°æ®æ ·æœ¬æ‰°åŠ¨å’Œè¾“å…¥å±æ€§æ‰°åŠ¨</li></ol></li></ol></li><li>æ•°æ®æ ·æœ¬æ‰°åŠ¨é€šå¸¸æ˜¯åŸºäºé‡‡æ ·æ³•<ol type="1"><li>Baggingä¸­çš„è‡ªåŠ©é‡‡æ ·æ³•</li><li>Adaboostä¸­çš„åºåˆ—é‡‡æ ·</li><li>æ•°æ®æ ·æœ¬æ‰°åŠ¨å¯¹â€œä¸ç¨³å®šåŸºå­¦ä¹ å™¨â€å¾ˆæœ‰æ•ˆ</li></ol></li><li>å¯¹æ•°æ®æ ·æœ¬æ‰°åŠ¨æ•æ„Ÿçš„åŸºå­¦ä¹ å™¨(ä¸ç¨³å®šåŸºå­¦ä¹ å™¨)<ol type="1"><li>å†³ç­–æ ‘</li><li>ç¥ç»ç½‘ç»œç­‰</li></ol></li><li>å¯¹æ•°æ®æ ·æœ¬æ‰°åŠ¨ä¸æ•æ„Ÿçš„åŸºå­¦ä¹ å™¨(ç¨³å®šåŸºå­¦ä¹ å™¨)<ol type="1"><li>çº¿æ€§å­¦ä¹ å™¨ï¼Œæ”¯æŒå‘é‡æœºï¼Œæœ´ç´ è´å¶æ–¯ï¼Œkè¿‘é‚»ç­‰</li></ol></li><li>è¾“å‡ºè¡¨ç¤ºæ‰°åŠ¨<ol type="1"><li>å°†è¾“å‡ºè¡¨ç¤ºè¿›è¡Œæ“æ§ä»¥å¢å¼ºå¤šæ ·æ€§ï¼›</li><li>ç¿»è½¬æ³•(FlippingOutput)ï¼šéšæœºæ”¹å˜ä¸€äº›è®­ç»ƒæ ·æœ¬çš„æ ‡è®°ï¼›</li><li>è¾“å‡ºè°ƒå‰‚æ³•(OutputSmearing)ï¼šå¯¹è¾“å‡ºè¡¨ç¤ºè¿›è¡Œè½¬æ¢ï¼Œä¾‹å¦‚å°†åˆ†ç±»è¾“å‡ºè½¬åŒ–ä¸ºå›å½’è¾“å‡ºåæ„å»ºä¸ªä½“åˆ†ç±»å™¨ï¼›</li><li>ECOCæ³•ï¼šåˆ©ç”¨çº é”™è¾“å‡ºç å°†å¤šç±»ä»»åŠ¡æ‹†è§£ä¸ºä¸€ç³»åˆ—äºŒåˆ†ç±»ä»»åŠ¡æ¥è®­ç»ƒåŸºå­¦ä¹ å™¨ï¼›</li></ol></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. éç›‘ç£å­¦ä¹ </title>
    <link href="/2024/12/07/PR-ML/9-%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/12/07/PR-ML/9-%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>éç›‘ç£å­¦ä¹ <ol type="1"><li>ç›‘ç£å­¦ä¹ <ol type="1"><li>æ ¹æ®ä¸€äº›ç»™å®šçš„å·²çŸ¥ç±»åˆ«æ ‡å·çš„æ ·æœ¬ï¼Œè®­ç»ƒæŸç§å­¦ä¹ æœºå™¨ï¼Œä½¿å…¶èƒ½å¤Ÿå¯¹æœªçŸ¥ç±»åˆ«çš„æ ·æœ¬è¿›è¡Œåˆ†ç±»</li></ol></li><li>éç›‘ç£å­¦ä¹ <ol type="1"><li>äº‹å…ˆå¹¶ä¸çŸ¥é“ä»»ä½•æ ·æœ¬çš„ç±»åˆ«æ ‡å·ï¼Œå¸Œæœ›é€šè¿‡æŸç§ç®—æ³•æŠŠä¸€ç»„æœªçŸ¥ç±»åˆ«çš„æ ·æœ¬åˆ’åˆ†æˆè‹¥å¹²ç±»åˆ«ã€‚ä¹Ÿç§°ä¸ºèšç±»é—®é¢˜</li></ol></li></ol></li><li>èšç±»åˆ†æ<ol type="1"><li>åŸºæœ¬æ€æƒ³<ol type="1"><li>ç›¸ä¼¼çš„å½’ä¸ºä¸€ç±»ã€‚</li><li>æ¨¡å¼ç›¸ä¼¼æ€§çš„åº¦é‡ã€‚</li><li>æ— ç›‘ç£åˆ†ç±»ç®—æ³•ã€‚</li></ol></li><li>ç‰¹å¾é‡çš„ç±»å‹<ol type="1"><li>ç‰©ç†é‡ï¼šé‡é‡ã€é•¿åº¦ã€é€Ÿåº¦</li><li>æ¬¡åºé‡ï¼šç­‰çº§ã€æŠ€èƒ½ã€å­¦è¯†</li><li>åä¹‰é‡ï¼šæ€§åˆ«ã€çŠ¶æ€ã€ç§ç±»</li></ol></li></ol></li><li>èšç±»è¿‡ç¨‹éµå¾ªçš„åŸºæœ¬æ­¥éª¤<ol type="1"><li>ç‰¹å¾é€‰æ‹©</li><li>è¿‘é‚»æµ‹åº¦</li><li>èšç±»å‡†åˆ™</li><li>èšç±»ç®—æ³•</li><li>ç»“æœåˆ¤å®š</li></ol></li><li>æ¨¡å¼ç›¸ä¼¼æ€§æµ‹åº¦<ol type="1"><li>ç”¨äºæè¿°å„æ¨¡å¼ä¹‹é—´ç‰¹å¾çš„ç›¸ä¼¼ç¨‹åº¦<ol type="1"><li>è·ç¦»æµ‹åº¦<ol type="1"><li>æ¬§æ°è·ç¦»</li><li>ç»å¯¹å€¼è·ç¦»</li><li>é©¬æ°è·ç¦»<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985926609-a444a0d0-5688-4d94-90e7-a71020e2bdb5.png"></li><li>é©¬æ°è·ç¦»å¯¹ä¸€åˆ‡éå¥‡å¼‚çº¿æ€§å˜æ¢éƒ½æ˜¯ä¸å˜çš„ï¼Œè¿™è¯´æ˜å®ƒä¸å—ç‰¹å¾é‡çº²é€‰æ‹©çš„å½±å“ï¼Œå¹¶ä¸”æ˜¯å¹³ç§»ä¸å˜çš„ã€‚ä¸Šé¢çš„Vçš„å«ä¹‰æ˜¯è¿™ä¸ªçŸ¢é‡é›†çš„åæ–¹å·®é˜µçš„ç»Ÿè®¡é‡ï¼Œæ•…é©¬æ°è·ç¦»åŠ å…¥äº†å¯¹ç‰¹å¾çš„ç›¸å…³æ€§çš„è€ƒè™‘ã€‚</li></ol></li></ol></li><li>ç›¸ä¼¼æµ‹åº¦<ol type="1"><li>è§’åº¦ç›¸ä¼¼ç³»æ•°(å¤¹è§’ä½™å¼¦<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703985975830-98b24117-0da3-42c0-8e9e-4cf914460e1a.png"></li><li>åæ ‡ç³»çš„æ—‹è½¬å’Œå°ºåº¦çš„ç¼©æ”¾æ˜¯ä¸å˜çš„,ä½†å¯¹ä¸€èˆ¬çš„çº¿å½¢å˜æ¢å’Œåæ ‡ç³»çš„å¹³ç§»ä¸å…·æœ‰ä¸å˜æ€§</li></ol></li><li>ç›¸å…³ç³»æ•°<ol type="1"><li>å®ƒå®é™…ä¸Šæ˜¯æ•°æ®ä¸­å¿ƒåŒ–åçš„çŸ¢é‡å¤¹è§’ä½™å¼¦ã€‚</li></ol></li></ol></li><li>åŒ¹é…æµ‹åº¦</li></ol></li></ol></li><li>ç±»<ol type="1"><li>ç±»çš„å®šä¹‰<ol type="1"><li>ç±»çš„å®šä¹‰æœ‰å¾ˆå¤šç§ï¼Œç±»çš„åˆ’åˆ†å…·æœ‰äººä¸ºè§„å®šæ€§ï¼Œè¿™åæ˜ åœ¨å®šä¹‰çš„é€‰å–åŠå‚æ•°çš„é€‰æ‹©ä¸Šã€‚ä¸€ä¸ªåˆ†ç±»ç»“æœçš„ä¼˜åŠ£æœ€ååªèƒ½æ ¹æ®å®é™…æ¥è¯„ä»·ã€‚</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986074357-1b72ab74-7241-4fce-ad31-d84ce45c2d00.png"></li></ol></li><li>ç±»é—´è·ç¦»æµ‹åº¦æ–¹æ³•<ol type="1"><li>æœ€è¿‘è·ç¦»æ³•<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986642695-29bb18e4-cd01-4860-b9c9-a18d9653c6df.png"></li><li>æœ€è¿œè·ç¦»æ³•<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986661898-94b626db-d45b-41fc-bbfc-527696b7e112.png"></li><li>å¹³å‡è·ç¦»æ³•<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986676846-57b7e72e-a9eb-4319-933e-78f9e84ae85c.png"></li></ol></li><li>èšç±»çš„å‡†åˆ™å‡½æ•°<ol type="1"><li><font style="color:#DF2A3F;">åˆ¤åˆ«åˆ†ç±»ç»“æœå¥½åçš„ä¸€èˆ¬æ ‡å‡†ï¼šç±»å†…è·ç¦»å°ï¼Œç±»é—´è·ç¦»å¤§ã€‚</font></li><li>ç±»å†…è·ç¦»å‡†åˆ™<ol type="1"><li>cç±»mjä¸ºå‡å€¼çŸ¢é‡</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986794276-08f65686-b2fc-4fa2-94b0-17937dee14c3.png"></li></ol></li><li>ç±»é—´è·ç¦»å‡†åˆ™<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986853670-28bd52b9-e4b7-4574-ad35-04c292714baf.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703986875242-e73f3e9a-d633-472d-82ee-23a2a955fff1.png"></li></ol></li><li>åŸºäºç±»å†…è·ç¦»ç±»é—´è·ç¦»çš„å‡†åˆ™å‡½æ•°<br></li></ol></li></ol></li><li>èšç±»ç®—æ³•<ol type="1"><li>åŸºäºæ•°æ®çš„æ–¹æ³•<ol type="1"><li>ä¸å°è¯•ä¼°è®¡æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œç›´æ¥ä»æ•°æ®å‡ºå‘è¿›è¡Œèšç±»</li><li>åˆ†ç±»<ol type="1"><li>æŒ‰æœ€å°è·ç¦»åŸåˆ™ç®€å•èšç±»æ–¹æ³•<ol type="1"><li>é’ˆå¯¹å…·ä½“é—®é¢˜ç¡®å®šç›¸ä¼¼æ€§é˜ˆå€¼ï¼Œå°†æ¨¡å¼åˆ°å„èšç±»ä¸­å¿ƒé—´çš„è·ç¦»ä¸é˜ˆå€¼æ¯”è¾ƒï¼Œå½“å¤§äºé˜ˆå€¼æ—¶è¯¥æ¨¡å¼å°±ä½œä¸ºå¦ä¸€ç±»çš„ç±»å¿ƒï¼Œå°äºé˜ˆå€¼æ—¶æŒ‰æœ€å°è·ç¦»åŸåˆ™å°†å…¶åˆ†åˆ’åˆ°æŸä¸€ç±»ä¸­ã€‚</li><li>è¿™ç±»ç®—æ³•è¿è¡Œä¸­æ¨¡å¼çš„ç±»åˆ«åŠç±»çš„ä¸­å¿ƒä¸€æ—¦ç¡®å®šå°†ä¸ä¼šæ”¹å˜ã€‚</li></ol></li><li>æŒ‰æœ€å°è·ç¦»åŸåˆ™è¿›è¡Œä¸¤ç±»åˆå¹¶çš„æ–¹æ³•<ol type="1"><li>é¦–å…ˆè§†å„æ¨¡å¼è‡ªæˆä¸€ç±»ç±»åˆå¹¶æˆä¸€ç±»,,ç„¶åå°†è·ç¦»æœ€å°çš„ä¸¤ä¸æ–­åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æˆä¸ºä¸¤ç±»ä¸ºæ­¢ã€‚</li><li>è¿™ç±»ç®—æ³•è¿è¡Œä¸­ï¼Œç±»å¿ƒä¸æ–­åœ°ä¿®æ­£ï¼Œä½†æ¨¡å¼ç±»åˆ«ä¸€æ—¦æŒ‡å®šåå°±ä¸å†æ”¹å˜ï¼Œå°±æ˜¯æ¨¡å¼ä¸€æ—¦åˆ’ä¸ºä¸€ç±»åå°±ä¸å†è¢«åˆ’åˆ†å¼€ï¼Œè¿™ç±»ç®—æ³•ä¹Ÿç§°ä¸ºåˆ†çº§èšç±»æ³•ã€‚</li></ol></li><li>ä¾æ®å‡†åˆ™å‡½æ•°åŠ¨æ€èšç±»æ–¹æ³•<ol type="1"><li>è®¾å®šä¸€äº›åˆ†ç±»çš„æ§åˆ¶å‚æ•°ï¼Œå®šä¹‰ä¸€ä¸ªèƒ½è¡¨å¾èšç±»ç»“æœä¼˜åŠ£çš„å‡†åˆ™å‡½æ•°ï¼Œèšç±»è¿‡ç¨‹å°±æ˜¯ä½¿å‡†åˆ™å‡½æ•°å–æå€¼çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚</li><li>ç®—æ³•è¿è¡Œä¸­ï¼Œç±»å¿ƒä¸æ–­åœ°ä¿®æ­£ï¼Œå„æ¨¡å¼çš„ç±»åˆ«çš„æŒ‡å®šä¹Ÿä¸æ–­åœ°æ›´æ”¹ã€‚è¿™ç±»æ–¹æ³•æœ‰C-å‡å€¼æ³•ï¼ŒISODATAæ³•ç­‰ã€‚</li></ol></li></ol></li><li>ç±»åˆ«åˆ†ç¦»çš„é—´æ¥æ–¹æ³•<ol type="1"><li>åŠ¨æ€èšç±»æ–¹æ³•<ol type="1"><li>èšç±»åˆ†æä¸­ï¼Œè¾ƒæ™®éé‡‡ç”¨çš„æ–¹æ³•</li></ol></li><li>è¿‡ç¨‹ï¼š<ol type="1"><li>é€‰æ‹©æŸç§æ ·æœ¬ç›¸ä¼¼æ€§åº¦é‡ï¼ˆä¾‹å¦‚è·ç¦»åº¦é‡ï¼‰</li><li>ç¡®å®šé€‚å½“çš„èšç±»å‡†åˆ™å‡½æ•°ï¼ˆè¯„ä»·èšç±»ç»“æœè´¨é‡ï¼‰</li><li>åœ¨åˆå§‹åˆ†ç±»åŸºç¡€ä¸Šï¼Œç”¨è¿­ä»£ç®—æ³•ï¼Œé€æ­¥ä¼˜åŒ–èšç±»ç»“æœï¼Œä½¿å‡†åˆ™å‡½æ•°è¾¾æå€¼ï¼ˆè¾¾æœ€ä¼˜èšç±»ç»“æœï¼‰</li></ol></li><li>å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š<ol type="1"><li>é€‰ä»£è¡¨ç‚¹æ•°ç›®ç­‰äºç±»åˆ«æ•°ç›®cã€‚è‹¥cæœªçŸ¥ï¼Œåˆ™èšç±»è¿‡ç¨‹ä¸­å½¢æˆçš„ç±»å‹æ•°ç›®æ˜¯ä¸€ä¸ªå€¼å¾—ç ”ç©¶çš„é—®é¢˜</li><li>å¦‚ä½•å°†æ‰€æœ‰æ ·æœ¬åˆ†åˆ°ä»¥ä»£è¡¨ç‚¹ä¸ºåˆå§‹èšåˆä¸­å¿ƒçš„èŒƒå›´å†…ï¼Œå½¢æˆåˆå§‹åˆ’åˆ†ï¼Œå³å¦‚ä½•é€‰å–åˆå§‹é—®é¢˜ï¼Œæ˜¯ç®—æ³•çš„å¦ä¸€å…³é”®é—®é¢˜</li></ol></li><li>C-å‡å€¼ç®—æ³•ï¼ˆåŸºäºè¯¯å·®å¹³æ–¹å’Œå‡†åˆ™Jeï¼‰<ol type="1"><li>ä¼˜ç‚¹ï¼šç®—æ³•ç®€å•ï¼Œå®é™…ä¸­è¡¨ç°å‡ºè‰²ï¼Œæ˜¯ä¸€ç§ä¸»è¦èšç±»æ–¹æ³•</li><li>ç”¨æ ·æœ¬é—´çš„è·ç¦»ä½œä¸ºç›¸ä¼¼æ€§åº¦é‡</li><li>ç”¨å„ç±»æ ·æœ¬ä¸ç±»å‡å€¼é—´çš„å¹³æ–¹è¯¯å·®å’Œä½œä¸ºèšç±»å‡†åˆ™</li><li>åŸºæœ¬æ€æƒ³ï¼š<ol type="1"><li>å–å®šcç±»ï¼Œé€‰å–cä¸ªåˆå§‹èšç±»ä¸­å¿ƒï¼Œå³ä»£è¡¨ç‚¹ã€‚æŒ‰æœ€å°è·ç¦»åŸåˆ™å°†å„æ ·æœ¬åˆ†é…åˆ°ç¦»ä»£è¡¨ç‚¹æœ€è¿‘çš„ç±»ä¸­ï¼Œä¸æ–­é‡æ–°è®¡ç®—ç±»ä¸­å¿ƒï¼Œè°ƒæ•´å„æ ·æœ¬ç±»åˆ«ï¼Œæœ€ç»ˆä½¿èšç±»å‡†åˆ™å‡½æ•°Jeæœ€å°ã€‚</li><li>ç®—æ³•æ­¥éª¤<ol type="1"><li>ä»»é€‰å–cä¸ªåˆå§‹èšç±»ä¸­å¿ƒï¼ˆä»£è¡¨ç‚¹ï¼‰m1,m2,...,mc</li><li>è®¡ç®—æ¯ä¸ªæ ·æœ¬ä¸èšç±»ä¸­å¿ƒï¼ˆä»£è¡¨ç‚¹ï¼‰çš„è·ç¦»ï¼ŒæŒ‰æœ€å°è·ç¦»åŸåˆ™å°†æ ·æœ¬é€ä¸ªå½’å…¥ç›¸åº”ä¸€ç±»ï¼Œå³<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987507093-79514f05-ea8e-4d75-bcb9-f4d36cf47c0d.png"></li><li>é‡æ–°è®¡ç®—å„ç±»ä¸­å¿ƒ<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987534985-21997450-1f01-4d91-8b4b-931ff6487db4.png"></li><li>è¿™ä¸€æ­¥æ˜¯é‡‡å–å¹³å‡çš„æ–¹æ³•æ¥è®¡ç®—è°ƒæ•´åçš„å„ç±»ä¸­å¿ƒï¼Œä¸”å®šä¸ºcç±»ï¼Œæ•…ç§°ä¸ºC-å‡å€¼æ³•ã€‚</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987644952-7d2925ec-7a3f-45ee-a12a-717489791ef1.png"></li></ol></li><li>è°ƒæ•´åˆ†ç±»<ol type="1"><li>ä¾æ®å‡†åˆ™å‡½æ•°è°ƒæ•´æ¯ä¸ªèšç±»ä¸­çš„æ¯ä¸ªæ ·æœ¬ã€‚æ˜¯å¦è°ƒæ•´ï¼Œç”±ä¸‹å¼å†³å®š</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987713833-02b90b0e-0ab1-46cb-808f-13652d84c729.png"></li></ol></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987765168-9c3b9bdc-d668-4e80-9d50-3be23b633aef.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987798204-ac84069b-aa4e-4486-8772-d49432e7cff3.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987811128-94e3c73f-da9e-4d56-af58-3b4ab8eb2a61.png"></li></ol></li><li>è‹¥cæœªçŸ¥ï¼Œä»¤c=1ï¼Œ2ï¼Œ3ï¼Œ...ç›¸åº”ä½¿ç”¨c-å‡å€¼ç®—æ³•ï¼Œåˆ™æœ‰Jeéšcå¢åŠ è€Œå•è°ƒå‡å°</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987891777-9b0dfc3c-0c7a-4230-aeff-67c76123517b.png"><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703987907861-a486f2c0-897a-412a-9c76-68c7914e6198.png"></li></ol></li></ol></li><li>ISODATAç®—æ³•ï¼ˆè¿­ä»£è‡ªç»„ç»‡æ•°æ®åˆ†æç®—æ³•ï¼‰<ol type="1"><li>ä¸C-å‡å€¼ç®—æ³•çš„ç›¸ä¼¼ä¹‹å¤„ï¼šèšç±»ä¸­å¿ƒéƒ½æ˜¯é€šè¿‡æ ·æœ¬å‡å€¼çš„è¿­ä»£è¿ç®—æ¥å†³å®š</li><li>ä¸C-å‡å€¼ç®—æ³•çš„åŒºåˆ«ï¼šC-å‡å€¼ç®—æ³•æ¯æ¬¡ä¿®æ”¹å„ç±»æ ·æœ¬å‡å€¼ï¼Œè®¡ç®—å¤ªç¹ã€‚ISODATAç®—æ³•æ”¹ä¸ºæ¯æ¬¡æŠŠå…¨éƒ¨æ ·æœ¬éƒ½è°ƒæ•´å®Œæ¯•åï¼Œæ‰é‡æ–°è®¡ç®—æ ·æœ¬çš„å‡å€¼</li><li>Cå‡å€¼ï¼šISODATAå’Œåˆå¹¶é€ä¸ªï¼šæ ·æœ¬ä¿®æ­£æ³•æˆæ‰¹æ ·æœ¬ä¿®æ­£æ³•ï¼Œè¿˜å¢åŠ äº†ç±»çš„åˆ†è£‚åˆå¹¶åŠŸèƒ½ã€‚</li><li>æ­¥éª¤<ol type="1"><li>è®¾å®šåˆå§‹èšç±»ä¸­å¿ƒmi</li><li>å°†æ‰€æœ‰æ ·æœ¬åˆ†ç»™æœ€è¿‘çš„èšç±»</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703988074124-d559a990-6fae-474a-a8a7-92751cac5ff7.png"></li><li>ä¿®æ­£å„èšç±»ä¸­å¿ƒå€¼</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703988138058-2387c2cd-e92a-4fa0-a627-2ab906afb06b.png"></li><li>è®¡ç®—æ‰€æœ‰æ ·æœ¬å¯¹å…¶ç›¸åº”èšç±»ä¸­å¿ƒçš„æ€»å¹³å‡è·ç¦»</li><li>åˆ¤åˆ«åˆ†è£‚ã€åˆå¹¶åŠè¿­ä»£è¿ç®—ç­‰æ­¥éª¤<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703988214159-336ce114-be3f-404a-894a-017b7fdb748e.png"></li></ol></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703988534324-d50a8e29-079e-4d4a-9dbc-b6d8ada93415.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703988550334-9fbf190d-63dd-4478-8b2c-6d5c1c199531.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703988580800-9c280432-f359-409a-b150-5cc8dd11d500.png"></li></ol></li></ol></li></ol></li></ol></li><li>åˆ†çº§èšç±»æ–¹æ³•<ol type="1"><li>å…ˆæŠŠæ‰€æœ‰æ ·æœ¬å„è‡ªè§†ä½œä¸€ç±»ï¼Œé€çº§èšåˆç±»ï¼Œâ€œèšåˆæ³•â€ã€‚ï¼ˆåˆå¹¶æˆä¸€agglomerative</li><li>å…ˆæŠŠæ‰€æœ‰æ ·æœ¬è§†ä½œä¸€ç±»æœ¬ä¸€ç±»ï¼Œâ€œåˆ†è§£æ³•ï¼‰ï¼Œé€çº§åˆ†è§£ä¸ºæ¯ä¸€æ ·â€ã€‚ï¼ˆåˆ†è£‚divisiveï¼‰</li><li>nä¸ªæ··åˆæ ·æœ¬ï¼Œçº§èšåˆï¼Œâˆ´å…ˆåˆ†ä¸ºæ¯çº§åªæŠŠnç±»ï¼Œä¾æ®ç›¸ä¼¼æ€§æœ€å¤§ç›¸ä¼¼æ€§å¤§å°ï¼Œé€çš„ä¸¤ç±»èšåˆæˆä¸€ç±»å½¢æˆä¸€æ£µå®Œæ•´çš„æ ‘</li><li>å…³é”®é—®é¢˜ï¼š<ol type="1"><li>å¦‚ä½•é€‰å–ç±»é—´ç›¸ä¼¼æ€§åº¦é‡</li><li>èšåˆè¿‡ç¨‹åº”åœç•™åœ¨å“ªä¸€çº§å†³å®šæœ€åèšåˆæˆå‡ ç±»<ol type="1"><li>è‹¥äº‹å…ˆå·²çŸ¥ç±»å‹æ•°ç›®c,åˆ™åº”åœç•™åœ¨n-c+1çº§ä¸Š</li><li>è‹¥é¢„å…ˆç»™å®šç±»é—´è·ç¦»é˜ˆå€¼D0,å½“ç±»é—´è·ç¦»å¤§äºé˜ˆå€¼ï¼Œåˆ™ç»ˆæ­¢èšç±»è¿‡ç¨‹</li><li>è‹¥cã€D0å‡ä¸çŸ¥ï¼Œå…ˆå®Œæˆnâ†’1å…¨éƒ¨èšç±»è¿‡ç¨‹ï¼Œç„¶åæ ¹æ®ç±»é—´ç›¸ä¼¼æ€§ç­‰ï¼Œè·å–é€‚å½“çš„èšç±»çº§ä½œä¸ºæœ€ä½³ç»“æœã€‚</li></ol></li></ol></li></ol></li><li>åŸºäºæ¨¡å‹çš„æ–¹æ³•<ol type="1"><li>ä¼°è®¡æ ·æœ¬çš„æ¦‚ç‡å¯†åº¦å‡½æ•°</li><li>åŸºäºæ¨¡å‹çš„æ–¹æ³•ï¼šå•å³°å­é›†åˆ†ç¦»æ³•<ol type="1"><li>åŸºæœ¬å‡å®šï¼šå„ç±»æ ·æœ¬çš„åˆ†å¸ƒæ˜¯å•å³°çš„ï¼Œæ ¹æ®æ€»ä½“åˆ†å¸ƒä¸­çš„å•å³°æ¥åˆ’åˆ†å­é›†</li><li>æ ·æœ¬åœ¨æ•´ä¸ªç‰¹å¾ç©ºé—´ä¸­å‘ˆç°ä¸¤ä¸ªåˆ†å¸ƒé«˜å³°ã€‚</li><li>å¦‚æœä»åˆ†å¸ƒçš„è°·ç‚¹å°†æ­¤ç‰¹å¾ç©ºé—´åˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåˆ™å¯¹åº”æ¯ä¸ªåŒºåŸŸï¼Œæ ·æœ¬åˆ†å¸ƒå°±åªæœ‰ä¸€ä¸ªå³°å€¼è¿™äº›åŒºåŸŸè¢«ç§°ä¸ºå•å³°åŒºåŸŸã€‚</li><li>æ¯ä¸ªå•å³°åŒºåŸŸçœ‹ä½œä¸€ä¸ªä¸åŒçš„å†³ç­–åŸŸã€‚è½åœ¨åŒä¸€å•å³°åŒºåŸŸçš„å¾…åˆ†ç±»æ ·æœ¬å°±è¢«åˆ’åˆ†æˆåŒä¸€ç±»ï¼Œç§°ä¸ºå•å³°å­ç±»</li></ol></li><li>æ··åˆæ¨¡å‹<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989363811-2b112c3a-dbfb-4da7-9c82-1d3db790f35c.png"></li></ol></li><li>é«˜æ–¯æ··åˆæ¨¡å‹<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989400944-f84d4d8a-93eb-4313-96dd-43f5fa5f581f.png"></li></ol></li><li>æ··åˆæ¨¡å‹å‚æ•°ä¼°è®¡<ol type="1"><li>å›°éš¾ï¼š<ol type="1"><li>å·²çŸ¥ä¸€ä¸ªæ•°æ®é›†ï¼ŒåŒ…å«æœªçŸ¥ç±»åˆ«æ ‡å·çš„æ ·æœ¬ä½†çŸ¥é“å®ƒä»¬æ˜¯ä»è‹¥å¹²ä¸ªæœä»ä¸åŒåˆ†å¸ƒçš„èšç±»ä¸­ç‹¬ç«‹æŠ½å–å‡ºæ¥çš„</li><li>è¦æ ¹æ®è¿™äº›æ ·æœ¬åŒæ—¶ä¼°è®¡å‡ºå„ä¸ªèšç±»çš„æ¦‚ç‡å¯†åº¦å‡½æ•°.</li></ol></li><li>éç›‘ç£å‚æ•°ä¼°è®¡<ol type="1"><li>éç›‘ç£æå¤§ä¼¼ç„¶ä¼°è®¡<ol type="1"><li>ç†è®ºä¸Šå¯è§£ï¼Œä½†å®é™…æ±‚è§£ç›¸å½“å¤æ‚</li></ol></li><li>GMMå‚æ•°ä¼°è®¡<ol type="1"><li>æ³¨æ„é—®é¢˜ï¼š<ol type="1"><li>1.ç‚¹é›†çš„æ•°æ®ç»“æ„</li><li>2.æ ·æœ¬çš„æ•°é‡</li><li>3.æ‰€é‡‡ç”¨çš„è·ç¦»åº¦é‡å’Œç›¸ä¼¼æ€§åº¦é‡</li><li>4.èšç±»å‡†åˆ™</li><li>5.èšç±»æ•°</li><li>6.æ ·æœ¬å„åˆ†é‡ä¹‹é—´çš„å°ºåº¦æ¯”ä¾‹</li></ol></li></ol></li><li>E-Mç®—æ³•<ol type="1"><li>æ­¥éª¤ï¼š</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989588358-e2f69fe3-d2ad-41d8-90bf-4a5df18435ab.png"></li><li>1.åˆå§‹åŒ–åˆ†å¸ƒå‚æ•°2.é‡å¤ç›´åˆ°æ”¶æ•›</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989646174-dbee4fd9-a09d-406c-a206-73f76e8339ae.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989657376-63c9e4fc-b1d1-4c9b-a5c7-0521502d7e77.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703989672134-df461dbc-507e-472d-b48f-8c06be3ce93a.png"></li><li></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. SVM</title>
    <link href="/2024/12/07/PR-ML/8-SVM/"/>
    <url>/2024/12/07/PR-ML/8-SVM/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>å°†è®­ç»ƒæ ·æœ¬åˆ†å¼€çš„è¶…å¹³é¢å¯èƒ½æœ‰å¾ˆå¤š,å“ªä¸€ä¸ªå¥½å‘¢?<ol type="1"><li>åº”é€‰æ‹©â€æ­£ä¸­é—´â€,å®¹å¿æ€§å¥½,é²æ£’æ€§é«˜,æ³›åŒ–èƒ½åŠ›æœ€å¼º</li></ol></li><li>è¶…å¹³é¢æ–¹ç¨‹<img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703991900223-9f16fbd9-cc47-4f63-8bd5-97432929ddfd.png"><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703991915422-cd3f3ab1-ebde-405b-9cbf-72bef355e08d.png"></li><li>svmåŸºæœ¬å‹<ol type="1"><li>æœ€å¤§é—´éš”:å¯»æ‰¾å‚æ•°wå’Œb,ä½¿å¾—Î³æœ€å¤§.</li></ol></li><li>è§£çš„ç¨€ç–æ€§<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992018245-3e7af13c-3c19-459e-8018-fc9665a4b0fc.png"></li><li><font style="color:#DF2A3F;">æ”¯æŒå‘é‡æœºè§£çš„ç¨€ç–æ€§:è®­ç»ƒå®Œæˆå,å¤§éƒ¨åˆ†çš„è®­ç»ƒæ ·æœ¬éƒ½ä¸éœ€ä¿ç•™,æœ€ç»ˆæ¨¡å‹ä»…ä¸æ”¯æŒå‘é‡æœ‰å…³.</font></li></ol></li><li>æ ¸å‡½æ•°<ol type="1"><li>éš¾ä»¥çŸ¥é“æ˜¾å¼çš„æ ¸æ˜ å°„å‡½æ•°åŸºæœ¬æƒ³æ³•ï¼šä¸æ˜¾å¼åœ°è®¾è®¡æ ¸æ˜ å°„,è€Œæ˜¯è®¾è®¡æ ¸å‡½æ•°</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992106391-4619dcdc-87b7-421f-9b1d-3ab311973629.png"></li><li>åªè¦ä¸€ä¸ªå¯¹ç§°å‡½æ•°æ‰€å¯¹åº”çš„æ ¸çŸ©é˜µåŠæ­£å®š,åˆ™å®ƒå°±èƒ½ä½œä¸ºæ ¸å‡½æ•°æ¥ä½¿ç”¨</li><li>å¯¹äºä¸€ä¸ªåŠæ­£å®šæ ¸çŸ©é˜µï¼Œæ€»èƒ½æ‰¾åˆ°ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„æ ¸æ˜ å°„ï¼›æ¯ä¸€ä¸ªæ ¸å‡½æ•°éƒ½éšå¼çš„å®šä¹‰äº†ä¸€ä¸ªå†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´çš„ç‰¹å¾ç©ºé—´ã€‚</li><li>å¸¸ç”¨æ ¸å‡½æ•°<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992302798-cd00f637-7c0e-402e-8543-f3ea50d61f11.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992340433-3407881f-45ca-4da1-9e98-347664960727.png"></li></ol></li></ol></li><li>è½¯é—´éš”<ol type="1"><li>ç°å®ä¸­,å¾ˆéš¾ç¡®å®šåˆé€‚çš„æ ¸å‡½æ•°ä½¿å¾—è®­ç»ƒæ ·æœ¬åœ¨ç‰¹å¾ç©ºé—´ä¸­çº¿æ€§å¯åˆ†;åŒæ—¶ä¸€ä¸ªçº¿æ€§å¯åˆ†çš„ç»“æœä¹Ÿå¾ˆéš¾æ–­å®šæ˜¯å¦æœ‰è¿‡æ‹Ÿåˆé€ æˆçš„.</li><li>å¼•å…¥â€è½¯é—´éš”â€çš„æ¦‚å¿µ,å…è®¸æ”¯æŒå‘é‡æœºåœ¨ä¸€äº›æ ·æœ¬ä¸Šä¸æ»¡è¶³çº¦æŸ</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992427189-9e248e4a-dc07-488d-be9f-c35e3e605199.png"></li><li>0/1æŸå¤±å‡½æ•°<ol type="1"><li>åŸºæœ¬æƒ³æ³•ï¼šæœ€å¤§åŒ–é—´éš”çš„åŒæ—¶,è®©ä¸æ»¡è¶³çº¦æŸçš„æ ·æœ¬åº”å°½å¯èƒ½å°‘</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992462151-50e9c1ea-6c37-44d5-8532-add25f1a1f8e.png"></li><li>å­˜åœ¨çš„é—®é¢˜ï¼š0/1æŸå¤±å‡½æ•°éå‡¸ã€éè¿ç»­,ä¸æ˜“ä¼˜åŒ–ï¼</li></ol></li><li>æ›¿ä»£æŸå¤±å‡½æ•°æ•°å­¦æ€§è´¨è¾ƒå¥½,ä¸€èˆ¬æ˜¯0/1æŸå¤±å‡½æ•°çš„ä¸Šç•Œ</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992506344-2f92cf5f-23b9-4f2f-acd7-a12f2182d24a.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992643592-b07c24ca-7e75-4845-b361-2b3873f097d2.png"></li><li>æ ¹æ®KKTæ¡ä»¶å¯æ¨å¾—æœ€ç»ˆæ¨¡å‹ä»…ä¸æ”¯æŒå‘é‡æœ‰å…³,ä¹Ÿå³hingeæŸå¤±å‡½æ•°ä¾ç„¶ä¿æŒäº†æ”¯æŒå‘é‡æœºè§£çš„ç¨€ç–æ€§</li><li>æ­£åˆ™åŒ–<ol type="1"><li>ç»“æ„é£é™©,æè¿°æ¨¡å‹çš„æŸäº›æ€§è´¨ï¼ˆè¶…å¹³é¢çš„é—´éš”å¤§å°ï¼‰</li><li>ç»éªŒé£é™©,æè¿°æ¨¡å‹ä¸è®­ç»ƒæ•°æ®çš„å¥‘åˆç¨‹åº¦ï¼Œå³è®­ç»ƒé›†ä¸Šçš„è¯¯å·®</li><li>é€šè¿‡æ›¿æ¢ä¸Šé¢ä¸¤ä¸ªéƒ¨åˆ†,å¯ä»¥å¾—åˆ°è®¸å¤šå…¶ä»–å­¦ä¹ æ¨¡å‹<ol type="1"><li>å¯¹æ•°å‡ ç‡å›å½’(LogisticRegression)</li><li>æœ€å°ç»å¯¹æ”¶ç¼©é€‰æ‹©ç®—å­(LASSO</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992708694-4ce0a5bb-2477-42de-a4e3-025ca6447fd1.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992730256-f637a6f0-1386-45fc-bd11-d42b856246e8.png"></li></ol></li></ol></li><li>è½¯é—´éš”æ”¯æŒå‘é‡æœº+å¯¹ç‡æŸå¤±<ol type="1"><li>å¦‚æœç”¨å¯¹ç‡æŸå¤±å‡½æ•°æ¥æ›¿ä»£0/1æŸå¤±å‡½æ•°ï¼Œå‡ ä¹å°±å¾—åˆ°å¯¹ç‡å›å½’æ¨¡å‹ã€‚</li><li>ä¸»è¦ä¼˜åŠ¿åœ¨äºè¾“å‡ºå…·æœ‰è‡ªç„¶æ¦‚ç‡æ„ä¹‰ï¼Œå³ç»™å‡ºé¢„æµ‹æ ‡è®°çš„åŒæ—¶ä¹Ÿç»™å‡ºäº†æ¦‚ç‡ï¼›</li><li>å¦‚æœç”¨äºå¤šåˆ†ç±»ä»»åŠ¡ï¼›SVMåˆ™éœ€è¦è¿›ä¸€æ­¥æ¨å¹¿ï¼›</li><li>å¯¹ç‡æŸå¤±å‡½æ•°æ˜¯å…‰æ»‘çš„å•è°ƒé€’å‡å‡½æ•°ï¼Œä¸èƒ½å¯¼å‡ºç±»ä¼¼æ”¯æŒå‘é‡çš„æ¦‚å¿µï¼›</li><li>å¯¹ç‡å›å½’çš„è§£ä¾èµ–äºæ›´å¤šçš„è®­ç»ƒæ ·æœ¬ï¼Œå…¶é¢„æµ‹å¼€é”€æ›´å¤§ï¼›</li></ol></li></ol></li><li>SVMå›å½’<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703992816265-b03f84f6-eb25-4a2d-8a15-cc61fa96538f.png"></li><li>æŸå¤±å‡½æ•°<ol type="1"><li>è½å…¥ä¸­é—´é—´éš”å¸¦çš„æ ·æœ¬ä¸è®¡ç®—æŸå¤±,å³è¢«è®¤ä¸ºæ˜¯é¢„æµ‹æ­£ç¡®ï¼Œä»è€Œä½¿å¾—æ¨¡å‹è·å¾—ç¨€ç–æ€§.</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993032662-34aeefa7-05df-4a3d-8467-edd888013398.png"></li><li>é—´éš”å¸¦ä¸¤ä¾§çš„æ¾å¼›ç¨‹åº¦å¯æœ‰æ‰€ä¸åŒ</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993065058-a17e6f6f-1e48-4124-b2b4-005505f5e4b4.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993083218-978f8ce6-8e9c-446a-be24-6716de6a6ce8.png"></li></ol></li></ol></li><li>æ ¸æ–¹æ³•<ol type="1"><li>æ— è®ºæ˜¯æ”¯æŒå‘é‡æœºè¿˜æ˜¯æ”¯æŒå‘é‡å›å½’,å­¦å¾—çš„æ¨¡å‹æ€»å¯ä»¥è¡¨ç¤ºæˆæ ¸å‡½æ•°çš„çº¿æ€§ç»„åˆ</li><li>æ”¯æŒå‘é‡æœºçš„â€æœ€å¤§é—´éš”â€æ€æƒ³</li><li>å¯¹å¶é—®é¢˜åŠå…¶è§£çš„ç¨€ç–æ€§</li><li>é€šè¿‡å‘é«˜ç»´ç©ºé—´æ˜ å°„è§£å†³çº¿æ€§ä¸å¯åˆ†çš„é—®é¢˜</li><li>å¼•å…¥â€è½¯é—´éš”â€ç¼“è§£ç‰¹å¾ç©ºé—´ä¸­çº¿æ€§ä¸å¯åˆ†çš„é—®é¢˜</li><li>å°†æ”¯æŒå‘é‡çš„æ€æƒ³åº”ç”¨åˆ°å›å½’é—®é¢˜ä¸Šå¾—åˆ°æ”¯æŒå‘é‡å›å½’</li><li>å°†æ ¸æ–¹æ³•æ¨å¹¿åˆ°å…¶ä»–å­¦ä¹ æ¨¡å‹</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. å†³ç­–æ ‘</title>
    <link href="/2024/12/07/PR-ML/7-%E5%86%B3%E7%AD%96%E6%A0%91/"/>
    <url>/2024/12/07/PR-ML/7-%E5%86%B3%E7%AD%96%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>å†³ç­–æ ‘<ol type="1"><li>åŸºäºæ ‘ç»“æ„æ¥è¿›è¡Œé¢„æµ‹</li><li>å†³ç­–è¿‡ç¨‹ä¸­æå‡ºçš„æ¯ä¸ªåˆ¤å®šé—®é¢˜éƒ½æ˜¯å¯¹æŸä¸ªå±æ€§çš„â€œæµ‹è¯•â€</li><li>å†³ç­–è¿‡ç¨‹çš„æœ€ç»ˆç»“è®ºå¯¹åº”äº†æˆ‘ä»¬æ‰€å¸Œæœ›çš„åˆ¤å®šç»“æœ</li><li>æ¯ä¸ªæµ‹è¯•çš„ç»“æœæˆ–æ˜¯å¯¼å‡ºæœ€ç»ˆç»“è®ºï¼Œæˆ–è€…å¯¼å‡ºè¿›ä¸€æ­¥çš„åˆ¤å®šé—®é¢˜ï¼Œå…¶è€ƒè™‘èŒƒå›´æ˜¯åœ¨ä¸Šæ¬¡å†³ç­–ç»“æœçš„é™å®šèŒƒå›´ä¹‹å†…</li><li>ä»æ ¹ç»“ç‚¹åˆ°æ¯ä¸ªå¶ç»“ç‚¹çš„è·¯å¾„å¯¹åº”äº†ä¸€ä¸ªåˆ¤å®šæµ‹è¯•åºåˆ—</li><li><font style="color:#DF2A3F;">å†³ç­–æ ‘å­¦ä¹ çš„ç›®çš„:ä¸ºäº†äº§ç”Ÿä¸€æ£µæ³›åŒ–èƒ½åŠ›å¼ºï¼Œå³å¤„ç†æœªè§ç¤ºä¾‹èƒ½åŠ›å¼ºçš„å†³ç­–æ ‘</font></li></ol></li><li>åŸºæœ¬ç®—æ³•<ol type="1"><li>å½“å‰ç»“ç‚¹åŒ…å«çš„æ ·æœ¬å…¨éƒ¨å±äºåŒä¸€ç±»åˆ«</li><li>å½“å‰å±æ€§é›†ä¸ºç©ºï¼Œæˆ–æ‰€æœ‰æ ·æœ¬åœ¨æ‰€æœ‰å±æ€§ä¸Šå–å€¼ç›¸åŒ</li><li>å½“å‰ç»“ç‚¹åŒ…å«çš„æ ·æœ¬é›†åˆä¸ºç©º</li></ol></li><li>åˆ’åˆ†é€‰æ‹©<ol type="1"><li><font style="color:#DF2A3F;">å†³ç­–æ ‘å­¦ä¹ çš„å…³é”®åœ¨äºå¦‚ä½•é€‰æ‹©æœ€ä¼˜åˆ’åˆ†å±æ€§</font>ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œéšç€åˆ’åˆ†è¿‡ç¨‹ä¸æ–­è¿›è¡Œï¼Œ<font style="color:#DF2A3F;">æˆ‘ä»¬å¸Œæœ›å†³ç­–æ ‘çš„åˆ†æ”¯ç»“ç‚¹æ‰€åŒ…å«çš„æ ·æœ¬å°½å¯èƒ½å±äºåŒä¸€ç±»åˆ«ï¼Œå³ç»“ç‚¹çš„â€œçº¯åº¦â€(purity)è¶Šæ¥è¶Šé«˜</font></li><li>é›†åˆå±äºåŒä¸€ç±»åˆ«çš„çº¯åº¦ï¼›å±æ€§åˆ’åˆ†é›†åˆå±äºåŒä¸€ç±»åˆ«çš„çº¯åº¦</li><li>ç»å…¸çš„å±æ€§åˆ’åˆ†æ–¹æ³•ï¼š<ol type="1"><li>ä¿¡æ¯å¢ç›Š<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993422314-0a6df2a6-10d5-467a-8da8-4bad6011ccfa.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993438274-45da96e5-6d57-40c7-be8f-1c9ab894f299.png"></li><li>å­˜åœ¨çš„é—®é¢˜<ol type="1"><li>è‹¥æŠŠâ€œç¼–å·â€ä¹Ÿä½œä¸ºä¸€ä¸ªå€™é€‰åˆ’åˆ†å±æ€§ï¼Œåˆ™å…¶ä¿¡æ¯å¢ç›Šä¸€èˆ¬è¿œå¤§äºå…¶ä»–å±æ€§ã€‚æ˜¾ç„¶ï¼Œè¿™æ ·çš„å†³ç­–æ ‘ä¸å…·æœ‰æ³›åŒ–èƒ½åŠ›ï¼Œæ— æ³•å¯¹æ–°æ ·æœ¬è¿›è¡Œæœ‰æ•ˆé¢„æµ‹</li><li><font style="color:#DF2A3F;">ä¿¡æ¯å¢ç›Šå¯¹å¯å–å€¼æ•°ç›®è¾ƒå¤šçš„å±æ€§æœ‰æ‰€åå¥½</font></li></ol></li></ol></li><li>å¢ç›Šç‡<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993580339-e2671f4a-bf87-4d66-95ac-2761cb28ee34.png"></li></ol></li><li>åŸºå°¼æŒ‡æ•°<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993624311-5baf3d62-8760-497f-90f2-b2a31393c439.png"></li></ol></li></ol></li></ol></li><li>å‰ªæå¤„ç†<ol type="1"><li>ä¸ºä»€ä¹ˆå‰ªæ<ol type="1"><li><font style="color:#DF2A3F;">â€œå‰ªæâ€æ˜¯å†³ç­–æ ‘å­¦ä¹ ç®—æ³•å¯¹ä»˜â€œè¿‡æ‹Ÿåˆâ€çš„ä¸»è¦æ‰‹æ®µ</font></li><li>å¯é€šè¿‡â€œå‰ªæâ€æ¥ä¸€å®šç¨‹åº¦é¿å…å› å†³ç­–åˆ†æ”¯è¿‡å¤šï¼Œä»¥è‡´äºæŠŠè®­ç»ƒé›†è‡ªèº«çš„ä¸€äº›ç‰¹ç‚¹å½“åšæ‰€æœ‰æ•°æ®éƒ½å…·æœ‰çš„ä¸€èˆ¬æ€§è´¨è€Œå¯¼è‡´çš„è¿‡æ‹Ÿåˆ</li></ol></li><li>å‰ªæçš„åŸºæœ¬ç­–ç•¥<ol type="1"><li>é¢„å‰ªæ</li><li>åå‰ªæ</li></ol></li><li><font style="color:#DF2A3F;">åˆ¤æ–­å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æ˜¯å¦æå‡çš„æ–¹æ³•</font><ol type="1"><li><font style="color:#DF2A3F;">ç•™å‡ºæ³•ï¼šé¢„ç•™ä¸€éƒ¨åˆ†æ•°æ®ç”¨ä½œâ€œéªŒè¯é›†â€ä»¥è¿›è¡Œæ€§èƒ½è¯„ä¼°</font></li></ol></li><li>é¢„å‰ªæ<ol type="1"><li>å†³ç­–æ ‘ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸ªç»“ç‚¹åœ¨åˆ’åˆ†å‰å…ˆè¿›è¡Œä¼°è®¡ï¼Œè‹¥å½“å‰ç»“ç‚¹çš„åˆ’åˆ†ä¸èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æå‡ï¼Œåˆ™åœæ­¢åˆ’åˆ†å¹¶å°†å½“å‰ç»“ç‚¹è®°ä¸ºå¶ç»“ç‚¹ï¼Œå…¶ç±»åˆ«æ ‡è®°ä¸ºè®­ç»ƒæ ·ä¾‹æ•°æœ€å¤šçš„ç±»åˆ«ï¼›</li><li>é’ˆå¯¹ä¸Šè¿°æ•°æ®é›†ï¼ŒåŸºäºä¿¡æ¯å¢ç›Šå‡†åˆ™ï¼Œé€‰å–å±æ€§â€œè„éƒ¨â€åˆ’åˆ†è®­ç»ƒé›†ã€‚åˆ†åˆ«è®¡ç®—åˆ’åˆ†å‰ï¼ˆå³ç›´æ¥å°†è¯¥ç»“ç‚¹ä½œä¸ºå¶ç»“ç‚¹ï¼‰åŠåˆ’åˆ†åçš„éªŒè¯é›†ç²¾åº¦ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦åˆ’åˆ†ã€‚è‹¥åˆ’åˆ†åèƒ½æé«˜éªŒè¯é›†ç²¾åº¦ï¼Œåˆ™åˆ’åˆ†ï¼Œå¯¹åˆ’åˆ†åçš„å±æ€§ï¼Œæ‰§è¡ŒåŒæ ·åˆ¤æ–­ï¼›å¦åˆ™ï¼Œä¸åˆ’åˆ†ã€‚</li><li><font style="color:#DF2A3F;">é¢„å‰ªæçš„ä¼˜ç¼ºç‚¹</font><ol type="1"><li>ä¼˜ç‚¹<ol type="1"><li>é™ä½è¿‡æ‹Ÿåˆé£é™©</li><li>æ˜¾è‘—å‡å°‘è®­ç»ƒæ—¶é—´å’Œæµ‹è¯•æ—¶é—´å¼€é”€</li></ol></li><li>ç¼ºç‚¹<ol type="1"><li>æ¬ æ‹Ÿåˆé£é™©ï¼šæœ‰äº›åˆ†æ”¯çš„å½“å‰åˆ’åˆ†è™½ç„¶ä¸èƒ½æå‡æ³›åŒ–æ€§èƒ½ï¼Œä½†åœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œçš„åç»­åˆ’åˆ†å´æœ‰å¯èƒ½å¯¼è‡´æ€§èƒ½æ˜¾è‘—æé«˜ã€‚é¢„å‰ªæåŸºäºâ€œè´ªå¿ƒâ€æœ¬è´¨ç¦æ­¢è¿™äº›åˆ†æ”¯å±•å¼€ï¼Œå¸¦æ¥äº†æ¬ æ‹Ÿåˆé£é™©</li></ol></li></ol></li></ol></li><li>åå‰ªæ<ol type="1"><li>å…ˆä»è®­ç»ƒé›†ç”Ÿæˆä¸€æ£µå®Œæ•´çš„å†³ç­–æ ‘ï¼Œç„¶åè‡ªåº•å‘ä¸Šçš„å¯¹éå¶ç»“ç‚¹è¿›è¡Œè€ƒå¯Ÿï¼Œè‹¥å°†è¯¥ç»“ç‚¹å¯¹åº”çš„å­æ ‘æ›¿æ¢ä¸ºå¶ç»“ç‚¹èƒ½å¸¦æ¥å†³ç­–æ ‘æ³›åŒ–æ€§èƒ½æå‡ï¼Œåˆ™å°†è¯¥å­æ ‘æ›¿æ¢ä¸ºå¶ç»“ç‚¹</li><li><font style="color:#DF2A3F;">åå‰ªæçš„ä¼˜ç¼ºç‚¹</font><ol type="1"><li>ä¼˜ç‚¹<ol type="1"><li>åå‰ªææ¯”é¢„å‰ªæä¿ç•™äº†æ›´å¤šçš„åˆ†æ”¯ï¼Œæ¬ æ‹Ÿåˆé£é™©å°ï¼Œæ³›åŒ–æ€§èƒ½å¾€å¾€ä¼˜äºé¢„å‰ªæå†³ç­–æ ‘</li></ol></li><li>ç¼ºç‚¹<ol type="1"><li>è®­ç»ƒæ—¶é—´å¼€é”€å¤§ï¼šåå‰ªæè¿‡ç¨‹æ˜¯åœ¨ç”Ÿæˆå®Œå…¨å†³ç­–æ ‘ä¹‹åè¿›è¡Œçš„ï¼Œéœ€è¦è‡ªåº•å‘ä¸Šå¯¹æ‰€æœ‰éå¶ç»“ç‚¹é€ä¸€è€ƒå¯Ÿ</li></ol></li></ol></li></ol></li></ol></li><li>è¿ç»­ä¸ç¼ºå¤±å€¼ä¸€è¿ç»­å€¼å¤„ç†<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993860465-a4cc59dc-3f80-4317-8254-a211c4f00c01.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993897067-b0b1a19e-5eae-4949-a64f-ae561f0a5479.png"></li><li>ä¸ç¦»æ•£å±æ€§ä¸åŒï¼Œè‹¥å½“å‰ç»“ç‚¹åˆ’åˆ†å±æ€§ä¸ºè¿ç»­å±æ€§ï¼Œè¯¥å±æ€§è¿˜å¯ä½œä¸ºå…¶åä»£ç»“ç‚¹çš„åˆ’åˆ†å±æ€§</li><li>ä¸å®Œæ•´æ ·æœ¬ï¼Œå³æ ·æœ¬çš„å±æ€§å€¼ç¼ºå¤±<ol type="1"><li>ä»…ä½¿ç”¨æ— ç¼ºå¤±çš„æ ·æœ¬è¿›è¡Œå­¦ä¹ ?</li><li>å¯¹æ•°æ®ä¿¡æ¯æå¤§çš„æµªè´¹</li></ol></li><li>ç¼ºå¤±å€¼å¤„ç†<ol type="1"><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993967497-b5a61536-0f47-416b-b523-cdbc2df091fa.png"></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993985245-134d9b80-5536-462a-8b37-2dce72ef62db.png"></li><li>æ ¹æ®æ— ç¼ºå¤±æ ·æœ¬æ‰€å æ¯”ä¾‹æ¥æ‰“æŠ˜<br></li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1703993998706-e82214eb-e945-4f03-ae2d-1483fa701f4d.png"></li></ol></li></ol></li><li>å¤šå˜é‡å†³ç­–æ ‘<ol type="1"><li>å•å˜é‡å†³ç­–æ ‘åˆ†ç±»è¾¹ç•Œ:è½´å¹³è¡Œ</li><li>å¤šå˜é‡å†³ç­–æ ‘<br></li><li>éšæœºæ£®æ—<ol type="1"><li>å»ºç«‹å¤šä¸ªå†³ç­–æ ‘ï¼Œé€šè¿‡å¤šæ£µæ ‘çš„æŠ•ç¥¨æ¥è¿›è¡Œå†³ç­–ï¼›</li><li>é‡‡ç”¨è‡ªåŠ©æ³•ï¼ˆè‡ªä¸¾é‡ï¼‰é‡‡æ ·ï¼Œå¾—åˆ°å¤šä¸ªæ ·æœ¬é›†ä¸ºæ¯ä¸ªæ ·æœ¬é›†æ„é€ ä¸€ä¸ªå†³ç­–æ ‘ï¼Œå¾—åˆ°å¤šæ£µå†³ç­–æ ‘ï¼›</li><li>å¯¹å¤šæ£µå†³ç­–æ ‘çš„è¾“å‡ºè¿›è¡ŒæŠ•ç¥¨ï¼Œä»¥å¾—ç¥¨æœ€å¤šçš„ç±»ä½œä¸ºéšæœºæ£®æ—çš„å†³ç­–ï¼Œ</li><li>è¢«è®¤ä¸ºæ˜¯ä¸€ç§é›†æˆå­¦ä¹ æ–¹æ³•ã€‚</li></ol></li></ol></li><li>homemessage 1. å±æ€§åˆ’åˆ†é€‰æ‹© 2. å‰ªæå¤„ç†ï¼ˆé¢„å‰ªæï¼Œåå‰ªæï¼‰ 3.å±æ€§è¿ç»­å€¼å’Œç¼ºå¤±å€¼çš„å¤„ç† 4. å•å˜é‡å†³ç­–æ ‘åˆ°å¤šå˜é‡å†³ç­–æ ‘</li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. çº¿æ€§åˆ†ç±»å™¨</title>
    <link href="/2024/12/07/PR-ML/6-%E7%BA%BF%E6%80%A7%E5%88%86%E7%B1%BB%E5%99%A8/"/>
    <url>/2024/12/07/PR-ML/6-%E7%BA%BF%E6%80%A7%E5%88%86%E7%B1%BB%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>æœºå™¨å­¦ä¹ <ol type="1"><li>â€œå‡è®¾ç”¨Pæ¥è¯„ä¼°è®¡ç®—æœºç¨‹åºåœ¨æŸä»»åŠ¡ç±»Tä¸Šçš„æ€§èƒ½ï¼Œè‹¥ä¸€ä¸ªç¨‹åºé€šè¿‡åˆ©ç”¨ç»éªŒEåœ¨Tä¸­ä»»åŠ¡ä¸Šè·å¾—äº†æ€§èƒ½æ”¹å–„ï¼Œåˆ—åˆ™æˆ‘ä»¬å°±è¯´å…³äºTå’ŒP,è¯¥ç¨‹åºå¯¹Eè¿›è¡Œäº†å­¦ä¹ â€</li><li>æœºå™¨å­¦ä¹ è‡´åŠ›äºç ”ç©¶å¦‚ä½•é€šè¿‡è®¡ç®—çš„æ‰‹æ®µï¼Œåˆ©ç”¨ç»éªŒæ¥æ”¹å–„ç³»ç»Ÿè‡ªèº«çš„æ€§èƒ½ï¼Œä»è€Œåœ¨è®¡ç®—æœºä¸Šä»æ•°æ®ä¸­äº§ç”Ÿâ€œæ¨¡å‹â€ï¼Œç”¨äºå¯¹æ–°çš„æƒ…å†µç»™å‡ºåˆ¤æ–­</li><li>åº”ç”¨<ol type="1"><li>Learningtoclassifytextdocuments</li><li>Learningtodetectobjectsinimages</li><li>LearningtoPredictEmergencyC-Sections</li></ol></li><li>é¢„æµ‹ç›®æ ‡<ol type="1"><li>åˆ†ç±»ï¼šç¦»æ•£å€¼<ol type="1"><li>äºŒåˆ†ç±»</li><li>å¤šåˆ†ç±»</li></ol></li><li>å›å½’ï¼šè¿ç»­å€¼</li><li>èšç±»ï¼šæ— æ ‡è®°ä¿¡æ¯</li></ol></li><li>ç”±äºæ ‡è®°ä¿¡æ¯<ol type="1"><li>ç›‘ç£å­¦ä¹ ï¼šåˆ†ç±»ã€å›å½’</li><li>æ— ç›‘ç£å­¦ä¹ ï¼šèšç±»</li><li>åŠç›‘ç£å­¦ä¹ ï¼šä¸¤è€…ç»“åˆ</li></ol></li></ol></li><li>æ³›åŒ–èƒ½åŠ›<ol type="1"><li>æœºå™¨å­¦ä¹ çš„ç›®æ ‡æ˜¯ä½¿å¾—å­¦åˆ°çš„æ¨¡å‹èƒ½å¾ˆå¥½çš„é€‚ç”¨äºâ€œæ–°æ ·æœ¬â€,è€Œä¸ä»…ä»…æ˜¯è®­ç»ƒé›†åˆï¼Œæˆ‘ä»¬ç§°æ¨¡å‹é€‚ç”¨äºæ–°æ ·æœ¬çš„èƒ½åŠ›ä¸ºæ³›åŒ–(generalization)èƒ½åŠ›ã€‚</li><li><img src="https://cdn.nlark.com/yuque/0/2023/png/35229143/1704005694509-93aaa60c-b9e8-417d-82b3-e2e5c249fe32.png">ç‹¬ç«‹åŒåˆ†å¸ƒ</li></ol></li><li>å½’çº³åå¥½<ol type="1"><li>å½’çº³åå¥½å¯çœ‹ä½œå­¦ä¹ ç®—æ³•è‡ªèº«åœ¨ä¸€ä¸ªå¯èƒ½å¾ˆåºå¤§çš„å‡è®¾ç©ºé—´ä¸­å¯¹å‡è®¾è¿›è¡Œé€‰æ‹©çš„å¯å‘å¼æˆ–â€œä»·å€¼è§‚â€.</li><li>â€œå¥¥å¡å§†å‰ƒåˆ€â€æ˜¯ä¸€ç§å¸¸ç”¨çš„ã€è‡ªç„¶ç§‘å­¦ç ”ç©¶ä¸­æœ€åŸºæœ¬çš„åŸåˆ™ï¼Œå³â€œè‹¥æœ‰å¤šä¸ªå‡è®¾ä¸è§‚å¯Ÿä¸€è‡´ï¼Œé€‰æœ€ç®€å•çš„é‚£ä¸ªâ€.</li><li>å…·ä½“çš„ç°å®é—®é¢˜ä¸­ï¼Œå­¦ä¹ ç®—æ³•æœ¬èº«æ‰€åšçš„å‡è®¾æ˜¯å¦æˆç«‹ï¼Œä¹Ÿå³ç®—æ³•çš„å½’çº³åå¥½æ˜¯å¦ä¸é—®é¢˜æœ¬èº«åŒ¹é…ï¼Œå¤§å¤šæ•°æ—¶å€™ç›´æ¥å†³å®šäº†ç®—æ³•èƒ½å¦å–å¾—å¥½çš„æ€§èƒ½.</li><li>å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹æŸç§ç±»å‹å‡è®¾çš„åå¥½ç§°ä½œå½’çº³åå¥½<br></li><li>æ€»è¯¯å·®ä¸å­¦ä¹ ç®—æ³•æ— å…³ï¼</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. ç‰¹å¾é€‰æ‹©</title>
    <link href="/2024/12/07/PR-ML/4-%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/"/>
    <url>/2024/12/07/PR-ML/4-%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>é€šå¸¸åœ¨å¾—åˆ°å®é™…å¯¹è±¡çš„è‹¥å¹²å…·ä½“ç‰¹å¾ä¹‹åï¼Œå†ç”±è¿™äº›åŸå§‹ç‰¹å¾äº§ç”Ÿå‡ºå¯¹åˆ†ç±»è¯†åˆ«æœ€æœ‰æ•ˆã€æ•°ç›®æœ€å°‘çš„ç‰¹å¾ï¼Œè¿™å°±æ˜¯ç‰¹å¾æå–ä¸é€‰æ‹©çš„ä»»åŠ¡<ol type="1"><li>ç›®çš„æ˜¯ä½¿åœ¨æœ€å°ç»´æ•°ç‰¹å¾ç©ºé—´ä¸­å¼‚ç±»æ¨¡å¼ç‚¹ç›¸è·è¾ƒè¿œï¼ˆç±»é—´è·ç¦»è¾ƒå¤§ï¼‰ï¼Œè€ŒåŒç±»æ¨¡å¼ç‚¹ç›¸è·è¾ƒè¿‘ï¼ˆç±»å†…è·ç¦»è¾ƒå°ï¼‰</li></ol></li><li>ç‰¹å¾é€‰æ‹©ä¸æå–çš„ä»»åŠ¡ï¼š<ol type="1"><li>é€‰å‡ºæœ€æœ‰ä»£è¡¨æ€§çš„ç‰¹å¾ï¼Œå®ç°ç‰¹å¾ç©ºé—´ç»´æ•°çš„å‹ç¼©ï¼Œç”¨æœ€å°‘çš„ç‰¹å¾è¾¾åˆ°æ‰€è¦æ±‚çš„åˆ†ç±»è¯†åˆ«æ­£ç¡®ç‡ã€‚</li><li>å­˜åœ¨å›°éš¾<ol type="1"><li>è·å¾—çš„ç‰¹å¾æµ‹é‡å€¼ä¸å¤šã€‚å®ç°æ–¹æ³•åŠç»æµä¸Šçš„é™åˆ¶ç­‰æä¾›çš„åˆ†ç±»ä¿¡æ¯æ˜¯å¦è¶³å¤Ÿï¼Œæ˜¯å¦èƒ½è·å¾—è¾ƒå¥½çš„åˆ†ç±»æ•ˆæœ</li><li>è·å¾—çš„æµ‹é‡å€¼å¤ªå¤šã€‚ç‰¹å¾ç»´æ•°ç¾éš¾</li></ol></li></ol></li><li>å¦‚ä½•å»æ‰å†—ä½™ç‰¹å¾,å¦‚ä½•ä¿è¯åˆ†ç±»è¯†åˆ«ç²¾åº¦çš„å‰æä¸‹ï¼Œå‡å°‘ç‰¹å¾ç»´æ•°ï¼Œæé«˜åˆ†ç±»å™¨è¿ç®—æ•ˆç‡å’Œå‡†ç¡®åº¦</li><li>ç‰¹å¾é€‰æ‹©ä¸æå–çš„ä¸¤ä¸ªåŸºæœ¬é€”å¾„<ol type="1"><li>ç›´æ¥é€‰æ‹©æ³•<ol type="1"><li>ç»Ÿè®¡æ£€éªŒæ³•ã€åˆ†æ”¯å®šç•Œæ³•ã€é—ä¼ ç®—æ³•</li></ol></li><li>å˜æ¢æ³•<ol type="1"><li>åŸºäºå¯åˆ†æ€§åˆ¤æ®çš„ç‰¹å¾é€‰æ‹©ã€åŸºäºè¯¯åˆ¤æ¦‚ç‡çš„ç‰¹å¾é€‰æ‹©ã€ç¦»æ•£K-Lå˜æ¢æ³•(DKLT)ã€åŸºäºå†³ç­–ç•Œçš„ç‰¹å¾é€‰æ‹©</li><li>åŸºäºç±»çš„æ¦‚ç‡å¯†åº¦å‡½æ•°çš„å¯åˆ†æ€§åˆ¤æ®</li><li>åŸºäºç†µçš„å¯åˆ†æ€§åˆ¤æ®</li></ol></li></ol></li><li>é¢„å¤„ç†<ol type="1"><li>æ•°æ®å½’ä¸€åŒ–</li><li>å‰”é™¤ç¦»ç¾¤å€¼(outlier)</li><li>ç¼ºå¤±æ•°æ®å¤„ç†</li></ol></li><li>æœ€ä¼˜æœç´¢æ³•<ol type="1"><li>åˆ†æ”¯å®šç•Œæ³•</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©</title>
    <link href="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/"/>
    <url>/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/</url>
    
    <content type="html"><![CDATA[<p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104275645-ae83eb1d-2aa6-44f3-9495-2f80d6273c5d.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104285344-81b01d2e-a4e6-4b68-976f-c3cf3f9ea527.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104294421-ef8303c7-da6f-4a40-817b-0486d20561ba.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104316742-518ffd2b-2293-4385-bfea-4ee6ee3b795e.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104329899-4736ca94-9e3e-495c-846a-2c80138897e1.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104338921-ec46bebb-2d39-462d-9040-a9db43f4a4c9.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104346256-9b5a8682-ea30-4c68-a3bc-b55e59142d84.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104355646-6dc8b2cb-d77d-45da-9cec-fdf8b9428d9d.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104375262-a41629e6-bb0e-483b-a5b1-9ed00e07f61c.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104390026-1b3742cf-b743-4b5c-9244-b3315f4c4a82.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104396432-4229f3b8-528d-4dd9-bff7-860a2713a217.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104409063-eab13c30-516f-488c-9b22-a5ab4ebb25fb.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104462011-3aac4126-8a0b-4ec4-9dcf-2f4bb41ccb3d.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104478573-17303a80-eb58-4130-892b-00bc0aaceaf1.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104508003-1738f440-6520-458d-8d13-da43bc37eefc.png"></p><p><img src="/2024/12/07/PR-ML/3-%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E9%80%89%E6%8B%A9/1704104527106-5d56cdd6-1f93-432a-85f0-5630cbba018e.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. è´å¶æ–¯åˆ†ç±»å™¨</title>
    <link href="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/"/>
    <url>/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<ol type="1"><li>é‡‡ç”¨è´å¶æ–¯å†³ç­–ç†è®ºåˆ†ç±»çš„å‰æï¼š<ol type="1"><li>ç›®æ ‡ï¼ˆäº‹ç‰©ï¼‰çš„è§‚å¯Ÿå€¼æ˜¯éšæœºçš„ï¼Œæœä»ä¸€å®šçš„æ¦‚ç‡åˆ†å¸ƒã€‚</li><li>å³ï¼šæ¨¡å¼ä¸æ˜¯ä¸€ä¸ªç¡®å®šå‘é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªéšæœºå‘é‡ã€‚</li></ol></li><li>ç”¨è´å¶æ–¯å†³ç­–ç†è®ºåˆ†ç±»çš„è¦æ±‚ï¼š<img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1704100452756-b1cc3f81-0bf8-4c2c-98d0-28eb5994f9e0.png"><ol type="1"><li>å„ç±»åˆ«æ€»ä½“æ¦‚ç‡åˆ†å¸ƒæ˜¯å·²çŸ¥çš„</li><li>å†³ç­–åˆ†ç±»çš„ç±»åˆ«ä¸€å®šï¼Œä¾‹ï¼šæœ‰Cç±»</li></ol></li></ol><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103082532-54e864ec-100d-4cea-b5fc-a37d156ca03c.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704102729892-92dfc030-dd12-44b5-93ae-1037fb341f7c.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704102786264-f9d6a164-b1f3-4a52-91ae-5131967c264d.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103181498-1b128033-32a5-4798-96b5-0c7cd993c48e.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103598175-ac8b51b7-7d79-4ca6-9808-e46a27208b36.png"><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103753365-67a4d050-0232-43c0-94ce-39ef9a0bbbcf.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103806617-83268800-8eb7-4e60-ba0b-879109cf69e7.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103919864-8ff17589-75d6-4e5f-b826-7b271c188062.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103937303-458900b4-5dc9-4ef8-be84-5cfdea609962.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704103963053-4db62972-6c06-43ae-b726-65ab4b76e07b.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104018805-dd26773e-9521-48dc-9b30-6c77af8da43b.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104042606-00397034-1c3a-4a19-b64a-b3d63ba82d31.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104055574-46e35028-9508-43ad-b1b9-8e16620b2aca.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104069850-928e71b9-eda5-428b-8929-5e48538aaac6.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104086349-86ea3699-c004-4429-84de-255060370fbc.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104108389-ca407756-70eb-4840-b6a8-64ded6adb36f.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104138093-5666ca99-a0f4-4c4d-8ae8-b8b5174e2416.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104161307-99908719-eb8d-431d-8484-5d3deab0a46d.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104181733-9dad63df-a8d3-41ed-93b6-2ef0bb8932f3.png"></p><p><img src="/2024/12/07/PR-ML/2-%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8/1704104213264-6e0a1063-0ede-49b5-87b3-28e9f8409184.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. ç»ªè®º</title>
    <link href="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/"/>
    <url>/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1703913032049-847ee94d-93a4-41a5-b278-92a19f537d29.png"></p><h2 id="æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿçš„ç»„æˆ">æ™ºèƒ½è¯†åˆ«ç³»ç»Ÿçš„ç»„æˆï¼š</h2><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701571936566-b1fb59ad-d79a-4c1b-813b-38eb8de2eff1.png"></p><p>1.ä¿¡æ¯è·å–ï¼ˆæ•°æ®é‡‡é›†ï¼‰ï¼š</p><ul><li>å¯¹<strong>ä¿¡å·ã€å›¾åƒã€æ•°å€¼è¡¨(æ•°æ®)</strong>çš„é‡‡é›†ã€‚</li><li>å³ï¼šè¦ç”¨è®¡ç®—æœºå¯ä»¥è¿ç®—çš„ç¬¦å·æ¥è¡¨ç¤ºæ‰€ç ”ç©¶çš„å¯¹è±¡ã€‚å¦‚å›¾åƒï¼š<strong>æµ‹é‡ã€é‡‡æ ·ã€é‡åŒ–</strong>ç­‰ã€‚</li></ul><p>2.é¢„å¤„ç†ï¼š</p><ul><li>å‡å°æˆ–æ¶ˆé™¤æ¨¡å¼è·å–è¿‡ç¨‹ä¸­çš„å™ªå£°ã€å¹²æ‰°ã€æé«˜SN;</li><li>åŠ å¼ºæœ‰ç”¨ä¿¡æ¯ï¼Œè¿›è¡Œå¤åŸç­‰ï¼Œå¦‚å‡å°æ•°æ®å›¾åƒæ¨¡ç³ŠåŠå‡ ä½•å¤±çœŸï¼Œæé«˜æ¸…æ™°åº¦ï¼›</li><li>éçº¿æ€§æ¨¡å¼è½¬åŒ–æˆçº¿æ€§æ¨¡å¼ã€‚</li><li>è¿™ä¸ªç¯èŠ‚çš„å†…å®¹åŠæ–¹æ³•å¾ˆå¤šï¼šå¦‚æ»¤æ³¢ã€å˜æ¢ã€ç¼–ç ã€æ ‡å‡†åŒ–ç­‰</li></ul><p>3.ç‰¹å¾é€‰æ‹©å’Œå˜æ¢</p><ul><li>ä»¥æŸç§<strong>åˆ¤å†³è§„åˆ™</strong>ä¸ºå‡†åˆ™ï¼Œé€‰å–æœ‰æ•ˆçš„ç‰¹å¾ï¼Œå³ä¸º<strong>ç‰¹å¾é€‰æ‹©ã€‚</strong></li><li>é‡‡ç”¨æŸç§<strong>å˜æ¢</strong>å¯¹ç‰¹å¾ç©ºé—´çš„å‹ç¼©ï¼Œç§°<strong>ä¸ºç‰¹å¾å˜æ¢</strong>ã€‚</li><li><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701572163877-a341fb09-320b-49c1-ac1b-a7571b80a690.png"></li></ul><p>4.åˆ†ç±»å™¨è®¾è®¡</p><ul><li>åˆ†ç±»å™¨è®¾è®¡å°±æ˜¯æ‰€è°“çš„<strong>å­¦ä¹ è®­ç»ƒè¿‡ç¨‹</strong>ã€‚</li><li>ç”¨ä¸€å®šæ•°é‡çš„æ ·æœ¬ç¡®å®šæŸç§åˆ¤åˆ«å‡†åˆ™ï¼Œé€šè¿‡åå¤è¾“å…¥ã€ä¿®æ­£ï¼Œ<strong>ç›´åˆ°åˆ†ç±»é”™è¯¯ç‡ä¸è¶…è¿‡ç»™å®šå€¼ä¸ºæ­¢</strong>(æˆ–é”™è¯¯ç‡æœ€å°ï¼Œæˆ–æŸå¤±æœ€å°)ï¼Œå®Œæˆå­¦ä¹ è¿‡ç¨‹ã€‚</li><li>è®­ç»ƒå­¦ä¹ æ–¹æ³•ï¼š<ul><li><strong>ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ </strong>ï¼ˆæ— å…ˆéªŒçŸ¥è¯†ï¼Œç”šè‡³ç±»åˆ«æ•°ä¹ŸæœªçŸ¥)ï¼ŒåŠç›‘ç£å­¦ä¹ ã€‚</li></ul></li><li>æ€§èƒ½è¯„ä¼°ï¼šé‡‡ç”¨<strong>äº¤å‰éªŒè¯</strong>ç­‰æ–¹æ³•è¯„ä¼°è®­ç»ƒæ¨¡å‹çš„æ€§èƒ½</li></ul><p>5.åˆ†ç±»å†³ç­–</p><ul><li>æŒ‰<strong>åˆ†ç±»åˆ¤åˆ«å‡†åˆ™</strong>ï¼Œå°†è¢«è¯†åˆ«æ¨¡å¼è¿›è¡Œåˆ†ç±»åˆ¤å†³ï¼Œè¾“å‡ºåˆ†ç±»ç»“æœ</li></ul><h2 id="å½’çº³åå¥½">å½’çº³åå¥½</h2><p>å­¦ä¹ è¿‡ç¨‹ä¸­<strong>å¯¹æŸç§ç±»å‹å‡è®¾çš„åå¥½</strong>ç§°ä½œå½’çº³åå¥½</p><ul><li>å½’çº³åå¥½å¯çœ‹ä½œå­¦ä¹ ç®—æ³•è‡ªèº«åœ¨ä¸€ä¸ªå¯èƒ½å¾ˆåºå¤§çš„å‡è®¾ç©ºé—´ä¸­å¯¹å‡è®¾è¿›è¡Œé€‰æ‹©çš„å¯å‘å¼æˆ–â€œä»·å€¼è§‚â€</li><li>â€œ<strong>å¥¥å¡å§†å‰ƒåˆ€</strong>â€æ˜¯ä¸€ç§å¸¸ç”¨çš„ã€è‡ªç„¶ç§‘å­¦ç ”ç©¶ä¸­æœ€åŸºæœ¬çš„åŸåˆ™ï¼Œå³â€œè‹¥æœ‰å¤šä¸ªå‡è®¾ä¸è§‚å¯Ÿä¸€è‡´ï¼Œé€‰<strong>æœ€ç®€å•</strong>çš„é‚£ä¸ªâ€</li><li>å…·ä½“çš„ç°å®é—®é¢˜ä¸­ï¼Œå­¦ä¹ ç®—æ³•æœ¬èº«æ‰€åšçš„å‡è®¾æ˜¯å¦æˆç«‹ï¼Œä¹Ÿå³<strong>ç®—æ³•çš„å½’çº³åå¥½æ˜¯å¦ä¸é—®é¢˜æœ¬èº«åŒ¹é…</strong>ï¼Œå¤§å¤šæ•°æ—¶å€™ç›´æ¥å†³å®šäº†ç®—æ³•èƒ½å¦å–å¾—å¥½çš„æ€§èƒ½</li></ul><h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2><ul><li>æ¨¡å¼ï¼šå¯¹è±¡çš„<strong>ç»„æˆæˆåˆ†</strong>æˆ–<strong>å½±å“å› ç´ </strong>é—´å­˜åœ¨çš„ä¸€æ¡<strong>è§„å¾‹æ€§</strong>å…³ç³»ã€‚</li><li>æ¨¡å¼ç±»ï¼ˆæ¨¡å‹ï¼‰ï¼šå…·æœ‰æŸäº›<strong>å…±åŒç‰¹å¾çš„æ¨¡å¼</strong>çš„é›†åˆ</li><li>æ¨¡å¼è¯†åˆ«ï¼šç ”ç©¶ä¸€ç§<strong>è‡ªåŠ¨æŠ€æœ¯</strong>ï¼Œä¾é è¿™ç§æŠ€æœ¯ï¼Œæœºå™¨å°†<strong>è‡ªåŠ¨ï¼ˆæˆ–äººå°½é‡å°‘çš„å¹²æ¶‰ï¼‰</strong>æŠŠå¾…è¯†åˆ«æ¨¡å¼åˆ†é…åˆ°å„è‡ªçš„æ¨¡å¼ç±»ä¸­å»</li><li>å­¦ä¹ ï¼šä»<strong>æ•°æ®ä¸­å­¦å¾—æ¨¡å‹</strong>çš„è¿‡ç¨‹</li><li>æ ·æœ¬ï¼ˆç¤ºä¾‹ï¼‰ï¼šä¸€ä¸ªå…·ä½“çš„<strong>ç ”ç©¶ï¼ˆå®¢è§‚ï¼‰å¯¹è±¡</strong>ã€‚å¦‚æ‚£è€…ï¼ŒæŸäººå†™çš„ä¸€ä¸ªæ±‰å­—ï¼Œä¸€å¹…å›¾ç‰‡ç­‰ã€‚</li><li>ç‰¹å¾ï¼ˆå±æ€§ï¼‰ï¼šèƒ½æè¿°<strong>æ¨¡å¼ç‰¹æ€§</strong>çš„é‡ã€‚é€šå¸¸ç”¨ä¸€ä¸ªçŸ¢é‡<img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701572774910-0567c044-6497-45d3-b272-2bc0617f6045.png">è¡¨ç¤ºï¼Œç§°ä¹‹ä¸º<strong>ç‰¹å¾çŸ¢é‡</strong>ï¼Œè®°ä¸º<img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701572810100-f778c9bc-6c7f-4620-bb53-23dd47a31fed.png"></li></ul><h2 id="éšæœºçŸ¢é‡çš„æè¿°">éšæœºçŸ¢é‡çš„æè¿°</h2><p>åœ¨æ¨¡å¼è¯†åˆ«è¿‡ç¨‹ä¸­ï¼Œè¦å¯¹è®¸å¤šå…·ä½“å¯¹è±¡è¿›è¡Œæµ‹é‡ï¼Œä»¥è·å¾—è®¸å¤šæ¬¡è§‚æµ‹å€¼ã€‚æ¯æ¬¡è§‚æµ‹å€¼ä¸ä¸€å®šç›¸åŒï¼Œæ‰€ä»¥å¯¹è®¸å¤šå¯¹è±¡è€Œè¨€ï¼Œå„ä¸ªç‰¹å¾åˆ†é‡éƒ½æ˜¯éšæœºå˜é‡ï¼Œå³<strong>è®¸å¤šå¯¹è±¡çš„ç‰¹å¾å‘é‡åœ¨nç»´ç©ºé—´ä¸­å‘ˆéšæœºæ€§åˆ†å¸ƒ</strong>ï¼Œç§°ä¸º<strong>éšæœºçŸ¢é‡</strong>ã€‚</p><p>(ä¸€)éšæœºçŸ¢é‡çš„åˆ†å¸ƒå‡½æ•°ï¼š</p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701573000621-33a7e818-c7c8-42d9-bed3-af67c8a0d6dd.png"></p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701573235972-ecadd41f-6700-430c-9b6d-4580853e0737.png"></p><p>(äºŒ)éšæœºçŸ¢é‡çš„æ•°å­—ç‰¹å¾ï¼š</p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701573320476-addf517b-d5ef-4802-9964-05d44122e144.png"></p><p>â‘µ æ¡ä»¶æœŸæœ›</p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701573369880-6a75fbb7-5997-489e-b35d-d255d4faf27d.png"></p><p>â‘¶ åæ–¹å·®çŸ©é˜µ</p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701573729163-68a1f0b6-8b32-4290-a4c5-0943dc6a9fe2.png"></p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701573796171-f9130d31-6e72-4065-b90e-18bb88aeedd8.png"></p><p>(4)è‡ªç›¸å…³çŸ©é˜µ</p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701574074582-b1ea4435-3bb9-4db9-95e0-bf5869450658.png"></p><ol start="5" type="1"><li>ç›¸å…³ç³»æ•°</li></ol><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1701574139149-fd358de8-5c43-438a-b759-4b4cfe6e4f87.png"></p><p>ä¸€ç»´æ­£æ€åˆ†å¸ƒ</p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1704100109817-e9a6908f-6eea-4ac8-b7fb-bca232651af6.png"></p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1704100146196-5d511052-b8d4-4618-9f6b-99702c13a3ac.png"></p><p><img src="/2024/12/07/PR-ML/1-%E7%BB%AA%E8%AE%BA/1704100242672-7ea0b4ba-119d-47e8-9be8-71641e494300.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>PR &amp; ML</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>17. è¯»å†™åˆ†ç¦»</title>
    <link href="/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/"/>
    <url>/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="è¯»å†™åˆ†ç¦»">1. è¯»å†™åˆ†ç¦»</h1><h2 id="ä»‹ç»">1.1 ä»‹ç»</h2><p><img src="/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/image-20241206170049337.png"></p><p>è¯»å†™åˆ†ç¦»ï¼Œç®€å•åœ°è¯´æ˜¯æŠŠå¯¹æ•°æ®åº“çš„è¯»å’Œå†™æ“ä½œåˆ†å¼€ï¼Œä»¥å¯¹åº”ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ã€‚ä¸»æ•°æ®åº“æä¾›å†™æ“ä½œï¼Œä»æ•°æ®åº“æä¾›è¯»æ“ä½œï¼Œè¿™æ ·èƒ½æœ‰æ•ˆåœ°å‡è½»å•å°æ•°æ®åº“çš„å‹åŠ›ã€‚</p><p>é€šè¿‡MyCatå³å¯è½»æ˜“å®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œä¸ä»…å¯ä»¥æ”¯æŒMySQL,ä¹Ÿå¯ä»¥æ”¯æŒOracleå’ŒSQLServerã€‚</p><h2 id="ä¸€ä¸»ä¸€ä»">1.2 ä¸€ä¸»ä¸€ä»</h2><p>MySQLçš„ä¸»ä»å¤åˆ¶ï¼Œæ˜¯åŸºäºäºŒè¿›åˆ¶æ—¥å¿—(binlog)å®ç°çš„ã€‚</p><p><img src="/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/image-20241206170246375.png"></p><h2 id="ä¸€ä¸»ä¸€ä»è¯»å†™åˆ†ç¦»">1.3 ä¸€ä¸»ä¸€ä»è¯»å†™åˆ†ç¦»</h2><p><img src="/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/image-20241206170431217.png"></p><p>balanceé…ç½®</p><ul><li>è´Ÿè½½å‡è¡¡ç­–ç•¥</li></ul><table><thead><tr><th>å‚æ•°å€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>0</td><td>ä¸å¼€å¯è¯»å†™åˆ†ç¦»æœºåˆ¶ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½å‘é€åˆ°å½“å‰å¯ç”¨çš„writeHostä¸Š</td></tr><tr><td>1</td><td>å…¨éƒ¨çš„readHostä¸å¤‡ç”¨çš„writeHostéƒ½å‚ä¸selectè¯­å¥çš„è´Ÿè½½å‡è¡¡ï¼ˆä¸»è¦é’ˆå¯¹äºåŒä¸»åŒä»æ¨¡å¼ï¼‰</td></tr><tr><td>2</td><td>æ‰€æœ‰çš„è¯»å†™æ“ä½œéƒ½éšæœºåœ¨writeHost, readHostä¸Šåˆ†å‘</td></tr><tr><td>3</td><td>æ‰€æœ‰çš„è¯»è¯·æ±‚éšæœºåˆ†å‘åˆ°writeHostå¯¹åº”çš„readHostä¸Šæ‰§è¡Œï¼ŒwriteHostä¸è´Ÿæ‹…è¯»å‹åŠ›</td></tr></tbody></table><p>è®¾ç½®ä¸º1æˆ–è€…3å¯å®ç°è¯»å†™åˆ†ç¦»</p><h2 id="åŒä¸»åŒä»">1.4 åŒä¸»åŒä»</h2><p>ä¸€ä¸ªä¸»æœºMaster:1ç”¨äºå¤„ç†æ‰€æœ‰å†™è¯·æ±‚ï¼Œå®ƒçš„ä»æœºSlave1å’Œå¦ä¸€å°ä¸»æœºMaster2è¿˜æœ‰å®ƒçš„ä»æœºSlave2è´Ÿè´£æ‰€æœ‰è¯»è¯·æ±‚ã€‚å½“Master1ä¸»æœºå®•æœºåï¼ŒMaster2ä¸»æœºè´Ÿè´£å†™è¯·æ±‚ï¼ŒMaster1ã€Master2äº’ä¸ºå¤‡æœºã€‚æ¶æ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/image-20241206171335488.png"></p><ul><li>æ­å»º</li></ul><p>ä»¥ä¸‹æ˜¯å›¾ä¸­å†…å®¹è½¬æ¢ä¸ºMarkdownæ ¼å¼çš„å†…å®¹ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs txt">ä¸»åº“é…ç½® (Master1-192.168.200.211)<br><br>1. ä¿®æ”¹é…ç½®æ–‡ä»¶ `/etc/my.cnf`<br><br> mysqlæœåŠ¡ID, ä¿è¯æ•´ä¸ªé›†ç¾¤ç¯å¢ƒä¸­å”¯ä¸€, å–å€¼èŒƒå›´: 1 - 2^32-1, é»˜è®¤ä¸º1<br>server-id=1<br> æŒ‡å®šåŒæ­¥çš„æ•°æ®åº“<br>binlog-do-db=db01<br>binlog-do-db=db02<br>binlog-do-db=db03<br> åœ¨ä½œä¸ºä»æ•°æ®åº“çš„æ—¶å€™ï¼Œæœ‰å†™å…¥æ“ä½œä¹Ÿè¦æ›´æ–°äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶<br>log-slave-updates<br></code></pre></td></tr></table></figure><h2 id="é‡å¯mysqlæœåŠ¡å™¨">2. é‡å¯MySQLæœåŠ¡å™¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">systemctl restart mysqld<br></code></pre></td></tr></table></figure><h2 id="åŒä¸»åŒä»è¯»å†™åˆ†ç¦»">1.5 åŒä¸»åŒä»è¯»å†™åˆ†ç¦»</h2><p><img src="/2024/12/06/MySQL/17-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/image-20241206171956580.png"></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. åˆ†åº“åˆ†è¡¨</title>
    <link href="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/"/>
    <url>/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»‹ç»">3.1 ä»‹ç»</h1><h2 id="é—®é¢˜åˆ†æ">3.1.1 é—®é¢˜åˆ†æ</h2><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684131667223-1d3c10ec-fcac-4588-a3d8-c4d1ede94535.png" alt="image.png">éšç€äº’è”ç½‘åŠç§»åŠ¨äº’è”ç½‘çš„å‘å±•ï¼Œåº”ç”¨ç³»ç»Ÿçš„æ•°æ®é‡ä¹Ÿæ˜¯æˆæŒ‡æ•°å¼å¢é•¿ï¼Œè‹¥é‡‡ç”¨å•æ•°æ®åº“è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œå­˜åœ¨ä»¥ä¸‹æ€§èƒ½ç“¶é¢ˆï¼š</p><ul><li>IOç“¶é¢ˆï¼šçƒ­ç‚¹æ•°æ®å¤ªå¤šï¼Œæ•°æ®åº“ç¼“å­˜ä¸è¶³ï¼Œäº§ç”Ÿå¤§é‡ç£ç›˜IOï¼Œæ•ˆç‡è¾ƒä½ã€‚è¯·æ±‚æ•°æ®å¤ªå¤šï¼Œå¸¦å®½ä¸å¤Ÿï¼Œç½‘ç»œIOç“¶é¢ˆã€‚</li><li>CPUç“¶é¢ˆï¼šæ’åºã€åˆ†ç»„ã€è¿æ¥æŸ¥è¯¢ã€èšåˆç»Ÿè®¡ç­‰SQLä¼šè€—è´¹å¤§é‡çš„CPUèµ„æºï¼Œè¯·æ±‚æ•°å¤ªå¤šï¼ŒCPUå‡ºç°ç“¶é¢ˆã€‚</li></ul><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œåˆ†åº“åˆ†è¡¨å¤„ç†ã€‚ <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684131731892-2dee07ba-8232-488d-a2ca-d55b2c06b5ab.png" alt="image.png">åˆ†åº“åˆ†è¡¨çš„ä¸­å¿ƒæ€æƒ³éƒ½æ˜¯å°†æ•°æ®åˆ†æ•£å­˜å‚¨ï¼Œä½¿å¾—å•ä¸€æ•°æ®åº“/è¡¨çš„æ•°æ®é‡å˜å°æ¥ç¼“è§£å•ä¸€æ•°æ®åº“çš„æ€§èƒ½é—®é¢˜ï¼Œä»è€Œè¾¾åˆ°æå‡æ•°æ®åº“æ€§èƒ½çš„ç›®çš„ã€‚</p><h2 id="æ‹†åˆ†ç­–ç•¥">3.1.2 æ‹†åˆ†ç­–ç•¥</h2><p>åˆ†åº“åˆ†è¡¨çš„å½¢å¼ï¼Œä¸»è¦æ˜¯ä¸¤ç§ï¼šå‚ç›´æ‹†åˆ†å’Œæ°´å¹³æ‹†åˆ†ã€‚è€Œæ‹†åˆ†çš„ç²’åº¦ï¼Œä¸€èˆ¬åˆåˆ†ä¸ºåˆ†åº“å’Œåˆ†è¡¨ï¼Œæ‰€ä»¥ç»„æˆçš„æ‹†åˆ†ç­–ç•¥æœ€ç»ˆå¦‚ä¸‹ï¼š <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132373667-566a1876-197e-4dd2-9d8a-bd927fe1d029.png" alt="image.png"></p><h2 id="å‚ç›´æ‹†åˆ†">3.1.3 å‚ç›´æ‹†åˆ†</h2><p><strong>å‚ç›´åˆ†åº“</strong> <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132416195-8bc94a86-a2c6-4420-a3e2-6e109d3be242.png" alt="image.png">å‚ç›´åˆ†åº“ï¼šä»¥è¡¨ä¸ºä¾æ®ï¼Œæ ¹æ®ä¸šåŠ¡å°†ä¸åŒè¡¨æ‹†åˆ†åˆ°ä¸åŒåº“ä¸­ã€‚ ç‰¹ç‚¹ï¼š</p><ul><li>æ¯ä¸ªåº“çš„è¡¨ç»“æ„éƒ½ä¸ä¸€æ ·ã€‚</li><li>æ¯ä¸ªåº“çš„æ•°æ®ä¹Ÿä¸ä¸€æ ·ã€‚</li><li>æ‰€æœ‰åº“çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ã€‚</li></ul><p><strong>å‚ç›´åˆ†è¡¨</strong> <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241205155054161.png" alt="image-20241205155054161">å‚ç›´åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼Œæ ¹æ®å­—æ®µå±æ€§å°†ä¸åŒå­—æ®µæ‹†åˆ†åˆ°ä¸åŒè¡¨ä¸­ã€‚ç‰¹ç‚¹ï¼š</p><ul><li>æ¯ä¸ªè¡¨çš„ç»“æ„éƒ½ä¸ä¸€æ ·ã€‚</li><li>æ¯ä¸ªè¡¨çš„æ•°æ®ä¹Ÿä¸ä¸€æ ·ï¼Œä¸€èˆ¬é€šè¿‡ä¸€åˆ—ï¼ˆä¸»é”®/å¤–é”®ï¼‰å…³è”ã€‚</li><li>æ‰€æœ‰è¡¨çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ã€‚</li></ul><h2 id="æ°´å¹³æ‹†åˆ†">3.1.4 æ°´å¹³æ‹†åˆ†</h2><p><strong>æ°´å¹³åˆ†åº“</strong> <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132592195-2e7068d7-37c0-418e-9241-aa2f4703ab69.png" alt="image.png">æ°´å¹³åˆ†åº“ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼Œå°†ä¸€ä¸ªåº“çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ã€‚ç‰¹ç‚¹ï¼š</p><ul><li>æ¯ä¸ªåº“çš„è¡¨ç»“æ„éƒ½ä¸€æ ·ã€‚</li><li>æ¯ä¸ªåº“çš„æ•°æ®éƒ½ä¸ä¸€æ ·ã€‚</li><li>æ‰€æœ‰åº“çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ã€‚</li></ul><p><strong>æ°´å¹³åˆ†è¡¨</strong> <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132634861-37db8e53-f0cf-4ae9-a927-b6a5964528a9.png" alt="image.png">æ°´å¹³åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼Œå°†ä¸€ä¸ªè¡¨çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ã€‚ç‰¹ç‚¹ï¼š</p><ul><li>æ¯ä¸ªè¡¨çš„è¡¨ç»“æ„éƒ½ä¸€æ ·ã€‚</li><li>æ¯ä¸ªè¡¨çš„æ•°æ®éƒ½ä¸ä¸€æ ·ã€‚</li><li>æ‰€æœ‰è¡¨çš„å¹¶é›†æ˜¯å…¨é‡æ•°æ®ã€‚</li></ul><p>åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œä¸ºäº†ç¼“è§£ç£ç›˜IOåŠCPUçš„æ€§èƒ½ç“¶é¢ˆï¼Œåˆ°åº•æ˜¯å‚ç›´æ‹†åˆ†ï¼Œè¿˜æ˜¯æ°´å¹³æ‹†åˆ†ï¼›å…·ä½“æ˜¯åˆ†åº“ï¼Œè¿˜æ˜¯åˆ†è¡¨ï¼Œéƒ½éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å…·ä½“åˆ†æã€‚</p><h2 id="å®ç°æŠ€æœ¯">3.1.5 å®ç°æŠ€æœ¯</h2><ul><li>shardingJDBCï¼šåŸºäºAOPåŸç†ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­å¯¹æœ¬åœ°æ‰§è¡Œçš„SQLè¿›è¡Œæ‹¦æˆªï¼Œè§£æã€æ”¹å†™ã€è·¯ç”±å¤„ç†ã€‚éœ€è¦è‡ªè¡Œç¼–ç é…ç½®å®ç°ï¼Œåªæ”¯æŒjavaè¯­è¨€ï¼Œæ€§èƒ½è¾ƒé«˜ã€‚</li><li>MyCatï¼šæ•°æ®åº“åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼Œä¸ç”¨è°ƒæ•´ä»£ç å³å¯å®ç°åˆ†åº“åˆ†è¡¨ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼Œæ€§èƒ½ä¸åŠå‰è€…ã€‚</li><li><figure><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132847430-534e6b0d-2a93-41dd-99d2-fa2f27f724e8.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure></li></ul><h1 id="mycatæ¦‚è¿°">3.2 Mycatæ¦‚è¿°</h1><p>Mycatæ˜¯å¼€æºçš„ã€æ´»è·ƒçš„ã€åŸºäºJavaè¯­è¨€ç¼–å†™çš„MySQLæ•°æ®åº“ä¸­é—´ä»¶ã€‚å¯ä»¥åƒä½¿ç”¨mysqlä¸€æ ·æ¥ä½¿ç”¨mycatï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´æ ¹æœ¬æ„Ÿè§‰ä¸åˆ°mycatçš„å­˜åœ¨ã€‚å¼€å‘äººå‘˜åªéœ€è¦è¿æ¥MyCatå³å¯ï¼Œè€Œå…·ä½“åº•å±‚ç”¨åˆ°å‡ å°æ•°æ®åº“ï¼Œæ¯ä¸€å°æ•°æ®åº“æœåŠ¡å™¨é‡Œé¢å­˜å‚¨äº†ä»€ä¹ˆæ•°æ®ï¼Œéƒ½æ— éœ€å…³å¿ƒã€‚å…·ä½“çš„åˆ†åº“åˆ†è¡¨çš„ç­–ç•¥ï¼Œåªéœ€è¦åœ¨MyCatä¸­é…ç½®å³å¯ã€‚ <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132892710-d9cace9d-4d62-4127-a62f-533de44556e9.png" alt="image.png"> ä¼˜åŠ¿ï¼š</p><ul><li>æ€§èƒ½å¯é ç¨³å®š</li><li>å¼ºå¤§çš„æŠ€æœ¯å›¢é˜Ÿ</li><li>ä½“ç³»å®Œå–„</li><li>ç¤¾åŒºæ´»è·ƒ</li></ul><h2 id="å®‰è£…">3.2.1 å®‰è£…</h2><p>Mycatæ˜¯é‡‡ç”¨javaè¯­è¨€å¼€å‘çš„å¼€æºçš„æ•°æ®åº“ä¸­é—´ä»¶ï¼Œæ”¯æŒWindowså’ŒLinuxè¿è¡Œç¯å¢ƒï¼Œä¸‹é¢ä»‹ç»MyCatçš„Linuxä¸­çš„ç¯å¢ƒæ­å»ºã€‚æˆ‘ä»¬éœ€è¦åœ¨å‡†å¤‡å¥½çš„æœåŠ¡å™¨ä¸­å®‰è£…å¦‚ä¸‹è½¯ä»¶ã€‚ <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684132973833-dfe2d67a-185d-41b4-b5b5-1077714680cf.png" alt="image.png"> å®‰è£…æ–‡æ¡£ <a href="https://www.yuque.com/attachments/yuque/0/2023/pdf/35653686/1684133124805-2bbdf19c-cb4a-436d-8f1e-e36f3558bc05.pdf?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fpdf%2F35653686%2F1684133124805-2bbdf19c-cb4a-436d-8f1e-e36f3558bc05.pdf%22%2C%22name%22%3A%22MyCat%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3.pdf%22%2C%22size%22%3A658633%2C%22ext%22%3A%22pdf%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22uf569e9fb-0266-4f23-9876-aefec7a3a61%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fpdf%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22JXxrS%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">MyCatå®‰è£…æ–‡æ¡£.pdf</a></p><h2 id="æ¦‚å¿µä»‹ç»">3.2.2 æ¦‚å¿µä»‹ç»</h2><p>åœ¨MyCatçš„æ•´ä½“ç»“æ„ä¸­ï¼Œåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸Šé¢çš„é€»è¾‘ç»“æ„ã€ä¸‹é¢çš„ç‰©ç†ç»“æ„ã€‚<img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684135201347-bc6c2e6d-0000-46a9-9863-1ebd1d19fbaf.png" alt="image.png">åœ¨MyCatçš„é€»è¾‘ç»“æ„ä¸»è¦è´Ÿè´£é€»è¾‘åº“ã€é€»è¾‘è¡¨ã€åˆ†ç‰‡è§„åˆ™ã€åˆ†ç‰‡èŠ‚ç‚¹ç­‰é€»è¾‘ç»“æ„çš„å¤„ç†ï¼Œè€Œå…·ä½“çš„æ•°æ®å­˜å‚¨è¿˜æ˜¯åœ¨ç‰©ç†ç»“æ„ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“æœåŠ¡å™¨ä¸­å­˜å‚¨çš„</p><h1 id="mycatå…¥é—¨">3.3 Mycatå…¥é—¨</h1><h2 id="éœ€æ±‚">3.3.1 éœ€æ±‚</h2><p>ç”±äº tb_order è¡¨ä¸­æ•°æ®é‡å¾ˆå¤§ï¼Œç£ç›˜IOåŠå®¹é‡éƒ½åˆ°è¾¾äº†ç“¶é¢ˆï¼Œç°åœ¨éœ€è¦å¯¹tb_orderè¡¨è¿›è¡Œæ•°æ®åˆ†ç‰‡ï¼Œåˆ†ä¸ºä¸‰ä¸ªæ•°æ®èŠ‚ç‚¹ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸»æœºä½äºä¸åŒçš„æœåŠ¡å™¨ä¸Š,å…·ä½“çš„ç»“æ„ï¼Œå‚è€ƒä¸‹å›¾ï¼š <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684135557698-f316e8a3-4e0c-425d-8bff-9649a91ec2cc.png" alt="image.png"></p><h2 id="ç¯å¢ƒå‡†å¤‡">3.3.2 ç¯å¢ƒå‡†å¤‡</h2><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684135730946-32eca814-b222-44a1-a9fc-d74c3e0dce9e.png" alt="image.png"> å¹¶ä¸”åœ¨ä¸Šè¿°3å°æ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®åº“ db01</p><h2 id="é…ç½®">3.3.3 é…ç½®</h2><p><strong>schema.xml</strong>åœ¨schema.xmlä¸­é…ç½®é€»è¾‘åº“ã€é€»è¾‘è¡¨ã€æ•°æ®èŠ‚ç‚¹ã€èŠ‚ç‚¹ä¸»æœºç­‰ç›¸å…³ä¿¡æ¯ã€‚å…·ä½“çš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mycat</span>:schema <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;schema.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mycat:schema</span> <span class="hljs-attr">xmlns:mycat</span>=<span class="hljs-string">&quot;http://io.mycat/&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">schema</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;DB01&quot;</span> <span class="hljs-attr">checkSQLschema</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">sqlMaxLimit</span>=<span class="hljs-string">&quot;100&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;TB_ORDER&quot;</span> <span class="hljs-attr">dataNode</span>=<span class="hljs-string">&quot;dn1,dn2,dn3&quot;</span> <span class="hljs-attr">rule</span>=<span class="hljs-string">&quot;auto-sharding-long&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">dataNode</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dn1&quot;</span> <span class="hljs-attr">dataHost</span>=<span class="hljs-string">&quot;dhost1&quot;</span> <span class="hljs-attr">database</span>=<span class="hljs-string">&quot;db01&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dataNode</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dn2&quot;</span> <span class="hljs-attr">dataHost</span>=<span class="hljs-string">&quot;dhost2&quot;</span> <span class="hljs-attr">database</span>=<span class="hljs-string">&quot;db01&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dataNode</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dn3&quot;</span> <span class="hljs-attr">dataHost</span>=<span class="hljs-string">&quot;dhost3&quot;</span> <span class="hljs-attr">database</span>=<span class="hljs-string">&quot;db01&quot;</span> /&gt;</span><br> <br><span class="hljs-tag">&lt;<span class="hljs-name">dataHost</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dhost1&quot;</span> <span class="hljs-attr">maxCon</span>=<span class="hljs-string">&quot;1000&quot;</span> <span class="hljs-attr">minCon</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">balance</span>=<span class="hljs-string">&quot;0&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">writeType</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">dbType</span>=<span class="hljs-string">&quot;mysql&quot;</span> <span class="hljs-attr">dbDriver</span>=<span class="hljs-string">&quot;jdbc&quot;</span> <span class="hljs-attr">switchType</span>=<span class="hljs-string">&quot;1&quot;</span>  <span class="hljs-attr">slaveThreshold</span>=<span class="hljs-string">&quot;100&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">heartbeat</span>&gt;</span>select user()<span class="hljs-tag">&lt;/<span class="hljs-name">heartbeat</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">writeHost</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;master&quot;</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;jdbc:mysql://192.168.10.101:3306?useSSL=false<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;980918&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dataHost</span>&gt;</span><br> <br> <span class="hljs-tag">&lt;<span class="hljs-name">dataHost</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dhost2&quot;</span> <span class="hljs-attr">maxCon</span>=<span class="hljs-string">&quot;1000&quot;</span> <span class="hljs-attr">minCon</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">balance</span>=<span class="hljs-string">&quot;0&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">writeType</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">dbType</span>=<span class="hljs-string">&quot;mysql&quot;</span> <span class="hljs-attr">dbDriver</span>=<span class="hljs-string">&quot;jdbc&quot;</span> <span class="hljs-attr">switchType</span>=<span class="hljs-string">&quot;1&quot;</span>  <span class="hljs-attr">slaveThreshold</span>=<span class="hljs-string">&quot;100&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">heartbeat</span>&gt;</span>select user()<span class="hljs-tag">&lt;/<span class="hljs-name">heartbeat</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">writeHost</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;master&quot;</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;jdbc:mysql://192.168.10.107:3316?useSSL=false<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;980918&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dataHost</span>&gt;</span><br> <br> <span class="hljs-tag">&lt;<span class="hljs-name">dataHost</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dhost3&quot;</span> <span class="hljs-attr">maxCon</span>=<span class="hljs-string">&quot;1000&quot;</span> <span class="hljs-attr">minCon</span>=<span class="hljs-string">&quot;10&quot;</span> <span class="hljs-attr">balance</span>=<span class="hljs-string">&quot;0&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">writeType</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">dbType</span>=<span class="hljs-string">&quot;mysql&quot;</span> <span class="hljs-attr">dbDriver</span>=<span class="hljs-string">&quot;jdbc&quot;</span> <span class="hljs-attr">switchType</span>=<span class="hljs-string">&quot;1&quot;</span>  <span class="hljs-attr">slaveThreshold</span>=<span class="hljs-string">&quot;100&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">heartbeat</span>&gt;</span>select user()<span class="hljs-tag">&lt;/<span class="hljs-name">heartbeat</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">writeHost</span> <span class="hljs-attr">host</span>=<span class="hljs-string">&quot;master&quot;</span> <span class="hljs-attr">url</span>=<span class="hljs-string">&quot;jdbc:mysql://192.168.10.108:3306?useSSL=false<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span> <span class="hljs-attr">user</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">password</span>=<span class="hljs-string">&quot;980918&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dataHost</span>&gt;</span><br> <br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mycat:schema</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>server.xml</strong>éœ€è¦åœ¨server.xmlä¸­é…ç½®ç”¨æˆ·åã€å¯†ç ï¼Œä»¥åŠç”¨æˆ·çš„è®¿é—®æƒé™ä¿¡æ¯ï¼Œå…·ä½“çš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">user</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">defaultAccount</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span>980918<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;schemas&quot;</span>&gt;</span>DB01<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- è¡¨çº§ DML æƒé™è®¾ç½® --&gt;</span><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">&lt;privileges check=&quot;false&quot;&gt;</span><br><span class="hljs-comment">&lt;schema name=&quot;TESTDB&quot; dml=&quot;0110&quot; &gt;</span><br><span class="hljs-comment">&lt;table name=&quot;tb01&quot; dml=&quot;0000&quot;&gt;&lt;/table&gt;</span><br><span class="hljs-comment">&lt;table name=&quot;tb02&quot; dml=&quot;1111&quot;&gt;&lt;/table&gt;</span><br><span class="hljs-comment">&lt;/schema&gt;</span><br><span class="hljs-comment">&lt;/privileges&gt;</span><br><span class="hljs-comment"> --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">user</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">user</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span>980918<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;schemas&quot;</span>&gt;</span>DB01<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;readOnly&quot;</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">user</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°çš„é…ç½®è¡¨ç¤ºï¼Œå®šä¹‰äº†ä¸¤ä¸ªç”¨æˆ· root å’Œ user ï¼Œè¿™ä¸¤ä¸ªç”¨æˆ·éƒ½å¯ä»¥è®¿é—®DB01 è¿™ä¸ªé€»è¾‘åº“ï¼Œè®¿é—®å¯†ç éƒ½æ˜¯123456ï¼Œä½†æ˜¯rootç”¨æˆ·è®¿é—®DB01é€»è¾‘åº“ï¼Œæ—¢å¯ä»¥è¯»ï¼Œåˆå¯ä»¥å†™ï¼Œä½†æ˜¯userç”¨æˆ·è®¿é—® DB01é€»è¾‘åº“æ˜¯åªè¯»çš„ã€‚</p><h2 id="æµ‹è¯•">3.3.4 æµ‹è¯•</h2><p>é…ç½®å®Œæ¯•åï¼Œå…ˆå¯åŠ¨æ¶‰åŠåˆ°çš„3å°åˆ†ç‰‡æœåŠ¡å™¨ï¼Œç„¶åå¯åŠ¨MyCatæœåŠ¡å™¨ã€‚åˆ‡æ¢åˆ°Mycatçš„å®‰è£…ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼Œå¯åŠ¨Mycatï¼š å¯åŠ¨ï¼š<code>bin/mycat start</code>åœæ­¢ï¼š<code>bin/mycat stop</code> Mycatå¯åŠ¨ä¹‹åï¼Œå ç”¨ç«¯å£å· 8066ã€‚å¯åŠ¨å®Œæ¯•ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹logsç›®å½•ä¸‹çš„å¯åŠ¨æ—¥å¿—ï¼ŒæŸ¥çœ‹Mycatæ˜¯å¦å¯åŠ¨å®Œæˆã€‚ <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684136813294-5f6c0be2-fee4-4fe0-9e99-0749cf410cbe.png" alt="image.png"> è¿æ¥Mycat<code>mysql -h 192.168.200.210 -P 8066 -uroot -p123456</code>æˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬æ˜¯é€šè¿‡MySQLçš„æŒ‡ä»¤æ¥è¿æ¥çš„MyCatï¼Œå› ä¸ºMyCatåœ¨åº•å±‚å®é™…ä¸Šæ˜¯æ¨¡æ‹Ÿäº†MySQLçš„åè®®ã€‚ç„¶åå°±å¯ä»¥åœ¨MyCatä¸­æ¥åˆ›å»ºè¡¨ï¼Œå¹¶å¾€è¡¨ç»“æ„ä¸­æ’å…¥æ•°æ®ï¼ŒæŸ¥çœ‹æ•°æ®åœ¨MySQLä¸­çš„åˆ†å¸ƒæƒ…å†µã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> TB_ORDER (<br> id <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> ,<br> <span class="hljs-keyword">PRIMARY</span> KEY (id)<br>) ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 ;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;goods1&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;goods2&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;goods3&#x27;</span>);<br> <br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;goods1&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;goods2&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;goods3&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">5000000</span>,<span class="hljs-string">&#x27;goods5000000&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">10000000</span>,<span class="hljs-string">&#x27;goods10000000&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">10000001</span>,<span class="hljs-string">&#x27;goods10000001&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">15000000</span>,<span class="hljs-string">&#x27;goods15000000&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TB_ORDER(id,title) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">15000001</span>,<span class="hljs-string">&#x27;goods15000001&#x27;</span>);<br><br></code></pre></td></tr></table></figure><p>ç»è¿‡æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨å¾€ TB_ORDER è¡¨ä¸­æ’å…¥æ•°æ®æ—¶ï¼š</p><ul><li>å¦‚æœidçš„å€¼åœ¨1-500wä¹‹é—´ï¼Œæ•°æ®å°†ä¼šå­˜å‚¨åœ¨ç¬¬ä¸€ä¸ªåˆ†ç‰‡æ•°æ®åº“ä¸­ã€‚</li><li>å¦‚æœidçš„å€¼åœ¨500w-1000wä¹‹é—´ï¼Œæ•°æ®å°†ä¼šå­˜å‚¨åœ¨ç¬¬äºŒä¸ªåˆ†ç‰‡æ•°æ®åº“ä¸­ã€‚</li><li>å¦‚æœidçš„å€¼åœ¨1000w-1500wä¹‹é—´ï¼Œæ•°æ®å°†ä¼šå­˜å‚¨åœ¨ç¬¬ä¸‰ä¸ªåˆ†ç‰‡æ•°æ®åº“ä¸­ã€‚</li><li>å¦‚æœidçš„å€¼è¶…å‡º1500wï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå°†ä¼šæŠ¥é”™ã€‚</li></ul><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§ç°è±¡ï¼Œæ•°æ®åˆ°åº•è½åœ¨å“ªä¸€ä¸ªåˆ†ç‰‡æœåŠ¡å™¨åˆ°åº•æ˜¯å¦‚ä½•å†³å®šçš„å‘¢ï¼Ÿè¿™æ˜¯ç”±é€»è¾‘è¡¨é…ç½®æ—¶çš„ä¸€ä¸ªå‚æ•° ruleå†³å®šçš„ï¼Œè€Œè¿™ä¸ªå‚æ•°é…ç½®çš„å°±æ˜¯åˆ†ç‰‡è§„åˆ™ï¼Œå…³äºåˆ†ç‰‡è§„åˆ™çš„é…ç½®ï¼Œåœ¨åé¢çš„è¯¾ç¨‹ä¸­ä¼šè¯¦ç»†è®²è§£ã€‚</p><h1 id="mycaté…ç½®">3.4 Mycaté…ç½®</h1><h2 id="schema.xml">3.4.1 schema.xml</h2><p>schema.xml ä½œä¸ºMyCatä¸­æœ€é‡è¦çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ ,æ¶µç›–äº†MyCatçš„é€»è¾‘åº“ã€é€»è¾‘è¡¨ã€åˆ†ç‰‡è§„åˆ™ã€åˆ†ç‰‡èŠ‚ç‚¹åŠæ•°æ®æºçš„é…ç½®ã€‚ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç»„æ ‡ç­¾ï¼š</p><ul><li>schemaæ ‡ç­¾</li><li>datanodeæ ‡ç­¾</li><li>datahostæ ‡ç­¾</li></ul><h3 id="schemaæ ‡ç­¾">schemaæ ‡ç­¾</h3><figure><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684137759231-a7bc29c6-dec3-47f1-888c-d7df84da7bc0.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> DB01.TB_ORDER;<br></code></pre></td></tr></table></figure><figure><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684137861277-a26e3734-e211-4161-b1b1-ed873aa38a57.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure><h3 id="datanodeæ ‡ç­¾">datanodeæ ‡ç­¾</h3><figure><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684137982668-2fda6b31-4e8e-42d5-abb3-95142400ddc3.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure><h3 id="datahostæ ‡ç­¾">datahostæ ‡ç­¾</h3><figure><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684137994571-1671956d-0c47-49e7-bf2b-ece556988ae0.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure><h2 id="rule.xml">3.4.2 rule.xml</h2><p>rule.xmlä¸­å®šä¹‰æ‰€æœ‰æ‹†åˆ†è¡¨çš„è§„åˆ™, åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¯ä»¥çµæ´»çš„ä½¿ç”¨åˆ†ç‰‡ç®—æ³•,æˆ–è€…å¯¹åŒä¸€ä¸ªåˆ†ç‰‡ç®—æ³•ä½¿ç”¨ä¸åŒçš„å‚æ•°,å®ƒè®©åˆ†ç‰‡è¿‡ç¨‹å¯é…ç½®åŒ–ã€‚ä¸»è¦åŒ…å«ä¸¤ç±»æ ‡ç­¾ï¼štableRuleã€Functionã€‚ <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684138272209-2c0ecefd-1aa3-4fe3-a359-83a3feb86d84.png" alt="image.png"></p><h2 id="server.xml">3.4.3 server.xml</h2><p>server.xmlé…ç½®æ–‡ä»¶åŒ…å«äº†MyCatçš„ç³»ç»Ÿé…ç½®ä¿¡æ¯ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªé‡è¦çš„æ ‡ç­¾ï¼šsystemã€userã€‚</p><h3 id="systemæ ‡ç­¾">systemæ ‡ç­¾</h3><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684138341423-96dab3e9-6683-4ba7-b020-cb5303a12f24.png" alt="image.png"> <a href="https://www.yuque.com/attachments/yuque/0/2023/xlsx/35653686/1684138375179-cf299206-5ce7-48b3-b3ee-31d397dfec2f.xlsx?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2023%2Fxlsx%2F35653686%2F1684138375179-cf299206-5ce7-48b3-b3ee-31d397dfec2f.xlsx%22%2C%22name%22%3A%22server%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E5%90%AB%E4%B9%89.xlsx%22%2C%22size%22%3A12830%2C%22ext%22%3A%22xlsx%22%2C%22source%22%3A%22%22%2C%22status%22%3A%22done%22%2C%22download%22%3Atrue%2C%22taskId%22%3A%22ua156721e-db55-4161-977f-7f8fe83dffb%22%2C%22taskType%22%3A%22upload%22%2C%22type%22%3A%22application%2Fvnd.openxmlformats-officedocument.spreadsheetml.sheet%22%2C%22__spacing%22%3A%22both%22%2C%22mode%22%3A%22title%22%2C%22id%22%3A%22pDpyr%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22file%22%7D">serverç³»ç»Ÿé…ç½®ä¿¡æ¯å«ä¹‰.xlsx</a></p><h3 id="useræ ‡ç­¾">useræ ‡ç­¾</h3><p>é…ç½®MyCatä¸­çš„ç”¨æˆ·ã€è®¿é—®å¯†ç ï¼Œä»¥åŠç”¨æˆ·é’ˆå¯¹äºé€»è¾‘åº“ã€é€»è¾‘è¡¨çš„æƒé™ä¿¡æ¯ï¼Œå…·ä½“çš„æƒé™æè¿°æ–¹å¼åŠé…ç½®è¯´æ˜å¦‚ä¸‹ï¼š <img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/1684138427556-1a3b1e9d-15e4-4647-a812-6322e756dc86.png" alt="image.png"> åœ¨æµ‹è¯•æƒé™æ“ä½œæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°† privilegesæ ‡ç­¾çš„æ³¨é‡Šæ”¾å¼€ã€‚åœ¨ privileges ä¸‹çš„schemaæ ‡ç­¾ä¸­é…ç½®çš„dmlå±æ€§é…ç½®çš„æ˜¯é€»è¾‘åº“çš„æƒé™ã€‚åœ¨privilegesçš„schemaä¸‹çš„tableæ ‡ç­¾çš„dmlå±æ€§ä¸­é…ç½®é€»è¾‘è¡¨çš„æƒé™ã€‚</p><h1 id="mycatåˆ†ç‰‡">3.5 Mycatåˆ†ç‰‡</h1><p>å‚ç›´æ‹†åˆ†</p><ul><li>åœºæ™¯<ul><li>åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œæ¶‰åŠä»¥ä¸‹è¡¨ç»“æ„ï¼Œä½†æ˜¯ç”±äºç”¨æˆ·ä¸è®¢å•æ¯å¤©éƒ½ä¼šäº§ç”Ÿå¤§é‡çš„æ•°æ®ï¼Œå•å°æœåŠ¡å™¨çš„æ•°æ®å­˜å‚¨åŠå¤„ç†èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥å¯¹æ•°æ®åº“è¡¨è¿›è¡Œæ‹†åˆ†ï¼ŒåŸæœ‰çš„æ•°æ®åº“è¡¨å¦‚ä¸‹ã€‚</li></ul></li></ul><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206145104929.png"></p><ul><li>é…ç½®</li></ul><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206145332251.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206145600422.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206150752724.png"></p><h2 id="èŒƒå›´åˆ†ç‰‡">3.5.1 èŒƒå›´åˆ†ç‰‡</h2><p>æŒ‰ç…§ç‰¹æ€§çš„èŒƒå›´åŒºé—´ï¼ˆæ¯”å¦‚æ—¶é—´åŒºé—´ã€ID åŒºé—´ï¼‰æ¥åˆ†é…æ•°æ®ï¼Œæ¯”å¦‚ å°† id ä¸º1~299999 çš„è®°å½•åˆ†åˆ°ç¬¬ä¸€ä¸ªåº“ï¼Œ 300000~599999çš„åˆ†åˆ°ç¬¬äºŒä¸ªåº“ã€‚èŒƒå›´åˆ†ç‰‡é€‚åˆéœ€è¦ç»å¸¸è¿›è¡ŒèŒƒå›´æŸ¥æ‰¾çš„åœºæ™¯ï¼Œä¸å¤ªé€‚åˆéšæœºè¯»å†™çš„åœºæ™¯ï¼ˆæ•°æ®æœªè¢«åˆ†æ•£ï¼Œå®¹æ˜“å‡ºç°çƒ­ç‚¹æ•°æ®çš„é—®é¢˜ï¼‰ã€‚</p><h2 id="å–æ¨¡åˆ†ç‰‡">3.5.2 å–æ¨¡åˆ†ç‰‡</h2><p>æ ¹æ®æŒ‡å®šçš„å­—æ®µå€¼ä¸èŠ‚ç‚¹æ•°é‡è¿›è¡Œæ±‚æ¨¡è¿ç®—ï¼Œæ ¹æ®è¿ç®—ç»“æœï¼Œæ¥å†³å®šè¯¥æ•°æ®å±äºå“ªä¸€ä¸ªåˆ†ç‰‡ã€‚æŒ‡å®šèŠ‚ç‚¹æ•°</p><h2 id="å“ˆå¸Œåˆ†ç‰‡">3.5.3 å“ˆå¸Œåˆ†ç‰‡</h2><p>æ±‚æŒ‡å®š keyï¼ˆæ¯”å¦‚ idï¼‰çš„å“ˆå¸Œï¼Œç„¶åæ ¹æ®å“ˆå¸Œå€¼ç¡®å®šæ•°æ®åº”è¢«æ”¾ç½®åœ¨å“ªä¸ªè¡¨ä¸­ã€‚å“ˆå¸Œåˆ†ç‰‡æ¯”è¾ƒé€‚åˆéšæœºè¯»å†™çš„åœºæ™¯ï¼Œä¸å¤ªé€‚åˆç»å¸¸éœ€è¦èŒƒå›´æŸ¥è¯¢çš„åœºæ™¯ã€‚</p><h2 id="ä¸€è‡´æ€§å“ˆå¸Œåˆ†ç‰‡">3.5.4 ä¸€è‡´æ€§å“ˆå¸Œåˆ†ç‰‡</h2><p>ä¸€è‡´æ€§å“ˆå¸Œåˆ†ç‰‡ç®—æ³•åˆ©ç”¨å“ˆå¸Œç¯çš„æ€æƒ³ï¼Œå¯¹æ•°æ®è¿›è¡Œå“ˆå¸Œæ˜ å°„ï¼Œå¹¶é€šè¿‡é¡ºæ—¶é’ˆå¯»æ‰¾æœ€è¿‘çš„æœåŠ¡èŠ‚ç‚¹æ¥è¿›è¡Œæ•°æ®çš„å­˜å‚¨ã€‚</p><h2 id="æšä¸¾åˆ†ç‰‡">3.5.5 æšä¸¾åˆ†ç‰‡</h2><p>é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¯èƒ½çš„æšä¸¾å€¼ï¼ŒæŒ‡å®šæ•°æ®åˆ†å¸ƒåˆ°ä¸åŒæ•°æ®èŠ‚ç‚¹ä¸Šï¼Œæœ¬è§„åˆ™é€‚ç”¨äºæŒ‰ç…§çœä»½ã€æ€§åˆ«ã€çŠ¶æ€æ‹†åˆ†æ•°æ®ç­‰ä¸šåŠ¡ã€‚</p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206153405063.png"></p><h2 id="åº”ç”¨æŒ‡å®šè§„åˆ™">3.5.6 åº”ç”¨æŒ‡å®šè§„åˆ™</h2><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206154626699.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206154557898.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206154607306.png"></p><h2 id="å›ºå®šåˆ†ç‰‡hashç®—æ³•">3.5.7 å›ºå®šåˆ†ç‰‡hashç®—æ³•</h2><ul><li>è¯¥ç®—æ³•ç±»ä¼¼äºåè¿›åˆ¶çš„æ±‚æ¨¡è¿ç®—ï¼Œä½†æ˜¯ä¸ºäºŒè¿›åˆ¶çš„æ“ä½œï¼Œä¾‹å¦‚ï¼Œå–idçš„äºŒè¿›åˆ¶ä½10ä½ä¸1111111111è¿›è¡Œä½&amp;è¿ç®—ã€‚</li></ul><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206154902270.png"></p><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¦‚æœæ˜¯æ±‚æ¨¡ï¼Œè¿ç»­çš„å€¼ï¼Œåˆ†åˆ«åˆ†é…åˆ°å„ä¸ªä¸åŒçš„åˆ†ç‰‡ï¼›ä½†æ˜¯æ­¤ç®—æ³•ä¼šå°†è¿ç»­çš„å€¼å¯èƒ½åˆ†é…åˆ°ç›¸åŒçš„åˆ†ç‰‡ï¼Œé™ä½äº‹åŠ¡å¤„ç†çš„éš¾åº¦ã€‚</li><li>å¯ä»¥å‡åŒ€åˆ†é…ï¼Œä¹Ÿå¯ä»¥éå‡åŒ€åˆ†é…ã€‚</li><li>åˆ†ç‰‡å­—æ®µå¿…é¡»ä¸ºæ•°å­—ç±»å‹ã€‚</li></ul><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206155709235.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206155657731.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206155644282.png"></p><h2 id="å­—ç¬¦ä¸²hashè§£æç®—æ³•">3.5.8 å­—ç¬¦ä¸²hashè§£æç®—æ³•</h2><p>æˆªå–å­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šä½ç½®çš„å­å­—ç¬¦ä¸²ï¼Œè¿›è¡Œhashç®—æ³•ï¼Œç®—å‡ºåˆ†ç‰‡ã€‚</p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206160601441.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206160905946.png"></p><h2 id="æŒ‰å¤©åˆ†ç‰‡">3.5.9 æŒ‰å¤©åˆ†ç‰‡</h2><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206161250786.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206161324940.png"></p><h2 id="è‡ªç„¶æœˆ">3.5.10 è‡ªç„¶æœˆ</h2><p>ä½¿ç”¨åœºæ™¯ä¸ºæŒ‰ç…§æœˆä»½æ¥åˆ†ç‰‡ï¼Œæ¯ä¸ªè‡ªç„¶æœˆä¸ºä¸€ä¸ªåˆ†ç‰‡ã€‚</p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206161945243.png"></p><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206162013822.png"></p><h1 id="mycatç®¡ç†åŠç›‘æ§">3.6 Mycatç®¡ç†åŠç›‘æ§</h1><h2 id="mycatåŸç†">3.6.1 MycatåŸç†</h2><p><img src="/2024/12/06/MySQL/16-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/image-20241206163039878.png"></p><h2 id="mycatç®¡ç†">3.6.2 Mycatç®¡ç†</h2><p>Mycaté»˜è®¤å¼€é€š2ä¸ªç«¯å£ï¼Œå¯ä»¥åœ¨server.xmlä¸­è¿›è¡Œä¿®æ”¹ã€‚</p><ul><li>8066æ•°æ®è®¿é—®ç«¯å£ï¼Œå³è¿›è¡ŒDMLå’ŒDDLæ“ä½œã€‚</li><li>9066æ•°æ®åº“ç®¡ç†ç«¯å£ï¼Œå³mycatæœåŠ¡ç®¡ç†æ§åˆ¶åŠŸèƒ½ï¼Œç”¨äºç®¡ç†mycatçš„æ•´ä¸ªé›†ç¾¤çŠ¶æ€</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql <span class="hljs-operator">-</span>h <span class="hljs-number">192.168</span><span class="hljs-number">.200</span><span class="hljs-number">.210</span> <span class="hljs-operator">-</span>P <span class="hljs-number">9066</span> <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>p123456<br></code></pre></td></tr></table></figure><table><thead><tr><th>å‘½ä»¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>show @<span class="citation" data-cites="help">@help</span></td><td>æŸ¥çœ‹Mycatç®¡ç†å·¥å…·å¸®åŠ©æ–‡æ¡£</td></tr><tr><td>show @<span class="citation" data-cites="version">@version</span></td><td>æŸ¥çœ‹Mycatçš„ç‰ˆæœ¬</td></tr><tr><td>reload @<span class="citation" data-cites="config">@config</span></td><td>é‡æ–°åŠ è½½Mycatçš„é…ç½®æ–‡ä»¶</td></tr><tr><td>show @<span class="citation" data-cites="datasource">@datasource</span></td><td>æŸ¥çœ‹Mycatçš„æ•°æ®æºä¿¡æ¯</td></tr><tr><td>show @<span class="citation" data-cites="datanode">@datanode</span></td><td>æŸ¥çœ‹MyCatç°æœ‰çš„åˆ†ç‰‡èŠ‚ç‚¹ä¿¡æ¯</td></tr><tr><td>show @<span class="citation" data-cites="threadpool">@threadpool</span></td><td>æŸ¥çœ‹Mycatçš„çº¿ç¨‹æ± ä¿¡æ¯</td></tr><tr><td>show @<span class="citation" data-cites="sql">@sql</span></td><td>æŸ¥çœ‹æ‰§è¡Œçš„SQL</td></tr><tr><td>show @<span class="citation" data-cites="sql.sum">@sql.sum</span></td><td>æŸ¥çœ‹æ‰§è¡Œçš„SQLç»Ÿè®¡</td></tr></tbody></table><h2 id="ç›‘æ§">3.6.3 ç›‘æ§</h2><p>mycat-eye</p><p>zookeeper</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. ä¸»ä»å¤åˆ¶</title>
    <link href="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"/>
    <url>/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚è¿°">2.1 æ¦‚è¿°</h1><p>ä¸»ä»å¤åˆ¶æ˜¯æŒ‡å°†ä¸»æ•°æ®åº“çš„ DDL å’Œ DMLæ“ä½œé€šè¿‡äºŒè¿›åˆ¶æ—¥å¿—ä¼ åˆ°ä»åº“æœåŠ¡å™¨ä¸­ï¼Œç„¶ååœ¨ä»åº“ä¸Šå¯¹è¿™äº›æ—¥å¿—é‡æ–°æ‰§è¡Œï¼ˆä¹Ÿå«é‡åšï¼‰ï¼Œä»è€Œä½¿å¾—ä»åº“å’Œä¸»åº“çš„æ•°æ®ä¿æŒåŒæ­¥ã€‚MySQLæ”¯æŒä¸€å°ä¸»åº“åŒæ—¶å‘å¤šå°ä»åº“è¿›è¡Œå¤åˆ¶ï¼Œä»åº“åŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–ä»æœåŠ¡å™¨çš„ä¸»åº“ï¼Œå®ç°é“¾çŠ¶å¤åˆ¶ã€‚<img src="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/1684128112951-0cd4b40b-a815-437d-9bd6-c18096fbd133.png" alt="image.png"> MySQL å¤åˆ¶çš„ä¼˜ç‚¹ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li>ä¸»åº“å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡æ¢åˆ°ä»åº“æä¾›æœåŠ¡ã€‚</li><li>å®ç°è¯»å†™åˆ†ç¦»ï¼Œé™ä½ä¸»åº“çš„è®¿é—®å‹åŠ›ã€‚</li><li>å¯ä»¥åœ¨ä»åº“ä¸­æ‰§è¡Œå¤‡ä»½ï¼Œä»¥é¿å…å¤‡ä»½æœŸé—´å½±å“ä¸»åº“æœåŠ¡ã€‚</li></ul><h2 id="åŸç†">2.2 åŸç†</h2><p>MySQLä¸»ä»å¤åˆ¶çš„æ ¸å¿ƒå°±æ˜¯äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå…·ä½“çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š <img src="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/1684128165471-d3a65879-da12-489e-bd0f-c8496e40ef7b.png" alt="image.png"> ä»ä¸Šå›¾æ¥çœ‹ï¼Œå¤åˆ¶åˆ†æˆä¸‰æ­¥ï¼š</p><ol type="1"><li>Master ä¸»åº“åœ¨äº‹åŠ¡æäº¤æ—¶ï¼Œä¼šæŠŠæ•°æ®å˜æ›´è®°å½•åœ¨äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ Binlogä¸­ã€‚</li><li>ä»åº“è¯»å–ä¸»åº“çš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ Binlog ï¼Œå†™å…¥åˆ°ä»åº“çš„ä¸­ç»§æ—¥å¿— RelayLog</li><li>slaveé‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå°†æ”¹å˜åæ˜ å®ƒè‡ªå·±çš„æ•°æ®ã€‚</li></ol><h2 id="æ­å»º">2.3 æ­å»º</h2><h3 id="å‡†å¤‡">å‡†å¤‡</h3><figure><img src="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/1684130779942-736e38ee-e197-4b09-8d67-ff84e1d104ba.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure><h3 id="ä¸»åº“å‡†å¤‡">ä¸»åº“å‡†å¤‡</h3><ol type="1"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/my.cnf</code></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">#mysql æœåŠ¡IDï¼Œä¿è¯æ•´ä¸ªé›†ç¾¤ç¯å¢ƒä¸­å”¯ä¸€ï¼Œå–å€¼èŒƒå›´ï¼š<span class="hljs-number">1</span> â€“ <span class="hljs-number">232</span><span class="hljs-number">-1</span>ï¼Œé»˜è®¤ä¸º<span class="hljs-number">1</span><br><br>server<span class="hljs-operator">-</span>id<span class="hljs-operator">=</span><span class="hljs-number">1</span><br><br>#æ˜¯å¦åªè¯»,<span class="hljs-number">1</span> ä»£è¡¨åªè¯», <span class="hljs-number">0</span> ä»£è¡¨è¯»å†™<br><br>read<span class="hljs-operator">-</span><span class="hljs-keyword">only</span><span class="hljs-operator">=</span><span class="hljs-number">0</span><br><br>#å¿½ç•¥çš„æ•°æ®, æŒ‡ä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“<br><br>#binlog<span class="hljs-operator">-</span>ignore<span class="hljs-operator">-</span>db<span class="hljs-operator">=</span>mysql<br>#æŒ‡å®šåŒæ­¥çš„æ•°æ®åº“<br><br>#binlog<span class="hljs-operator">-</span>do<span class="hljs-operator">-</span>db<span class="hljs-operator">=</span>db01<br><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>é‡å¯MySQLæœåŠ¡å™¨ <code>systemctl restart mysqld</code></li><li>ç™»å½•mysqlï¼Œåˆ›å»ºè¿œç¨‹è¿æ¥çš„è´¦å·ï¼Œå¹¶æˆäºˆä¸»ä»å¤åˆ¶æƒé™</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">#åˆ›å»ºitcastç”¨æˆ·ï¼Œå¹¶è®¾ç½®å¯†ç ï¼Œè¯¥ç”¨æˆ·å¯åœ¨ä»»æ„ä¸»æœºè¿æ¥è¯¥MySQLæœåŠ¡<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;itcast&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;Root@123456&#x27;</span> <br>;<br>#ä¸º <span class="hljs-string">&#x27;itcast&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> ç”¨æˆ·åˆ†é…ä¸»ä»å¤åˆ¶æƒé™<br><br><span class="hljs-keyword">GRANT</span> REPLICATION SLAVE <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;itcast&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>é€šè¿‡æŒ‡ä»¤ï¼ŒæŸ¥çœ‹äºŒè¿›åˆ¶æ—¥å¿—åæ ‡ <code>show master status ;</code><ol type="1"><li><figure><img src="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/1684130963675-1da0aca0-b2cd-4fd1-8a1f-42fb70c0c2c0.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure></li><li>å­—æ®µå«ä¹‰è¯´æ˜ï¼š file : ä»å“ªä¸ªæ—¥å¿—æ–‡ä»¶å¼€å§‹æ¨é€æ—¥å¿—æ–‡ä»¶ positionï¼šä»å“ªä¸ªä½ç½®å¼€å§‹æ¨é€æ—¥å¿— ï¼Œ binlog_ignore_db :æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“</li></ol></li></ol><h3 id="ä»åº“é…ç½®">ä»åº“é…ç½®</h3><ol type="1"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/my.cnf</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">#mysql æœåŠ¡IDï¼Œä¿è¯æ•´ä¸ªé›†ç¾¤ç¯å¢ƒä¸­å”¯ä¸€ï¼Œå–å€¼èŒƒå›´ï¼š<span class="hljs-number">1</span> â€“ <span class="hljs-number">2</span><span class="hljs-operator">^</span><span class="hljs-number">32</span><span class="hljs-number">-1</span>ï¼Œå’Œä¸»åº“ä¸ä¸€æ ·å³å¯<br><br>server<span class="hljs-operator">-</span>id<span class="hljs-operator">=</span><span class="hljs-number">2</span><br><br>#æ˜¯å¦åªè¯»,<span class="hljs-number">1</span> ä»£è¡¨åªè¯», <span class="hljs-number">0</span> ä»£è¡¨è¯»å†™<br><br>read<span class="hljs-operator">-</span><span class="hljs-keyword">only</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>é‡å¯MySQLæœåŠ¡</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">systemctl restart mysqld<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ç™»å½•MySQLï¼Œè®¾ç½®ä¸»åº“é…ç½®</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">CHANGE REPLICATION SOURCE <span class="hljs-keyword">TO</span> SOURCE_HOST<span class="hljs-operator">=</span><span class="hljs-string">&#x27;192.168.200.200&#x27;</span>, SOURCE_USER<span class="hljs-operator">=</span><span class="hljs-string">&#x27;itcast&#x27;</span>, <br>SOURCE_PASSWORD<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Root@123456&#x27;</span>, SOURCE_LOG_FILE<span class="hljs-operator">=</span><span class="hljs-string">&#x27;binlog.000010&#x27;</span>, <br>SOURCE_LOG_POS<span class="hljs-operator">=</span><span class="hljs-number">984</span>;<br></code></pre></td></tr></table></figure><figure><img src="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/1684131033564-1b738c26-1b1e-468c-a02b-d1d3ef1b5ea7.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure><ol start="4" type="1"><li>å¼€å¯åŒæ­¥æ“ä½œ<code>start replica ;</code></li><li>æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€<code>show replica status ;</code><ol type="1"><li>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸»ä»åº“çš„<code>server-uuid</code>ä¸èƒ½ä¸€æ ·ï¼Œå…·æœ‰å”¯ä¸€æ€§<code>vim /var/lib/mysql/auto.cnf</code></li><li><figure><img src="/2024/12/06/MySQL/15-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/1684131070718-6c5f441b-8426-4adc-b923-ca99634fe63e.png" alt="image.png"><figcaption aria-hidden="true">image.png</figcaption></figure></li></ol></li></ol><h3 id="æµ‹è¯•">æµ‹è¯•</h3><p>åœ¨ä¸»åº“åšæ“ä½œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database db01;<br>use db01;<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tb_user(<br> id <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">primary</span> key <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> auto_increment,<br> name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br> sex <span class="hljs-type">varchar</span>(<span class="hljs-number">1</span>)<br>)engine<span class="hljs-operator">=</span>innodb <span class="hljs-keyword">default</span> charset<span class="hljs-operator">=</span>utf8mb4;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tb_user(id,name,sex) <span class="hljs-keyword">values</span>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;Trigger&#x27;</span>,<span class="hljs-string">&#x27;0&#x27;</span>),<br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;Dawn&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>);<br></code></pre></td></tr></table></figure><p>åœ¨ä»åº“æŸ¥éªŒæ•°æ®ï¼ŒéªŒè¯ä¸»ä»æ˜¯å¦åŒæ­¥</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. æ—¥å¿—</title>
    <link href="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/"/>
    <url>/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="é”™è¯¯æ—¥å¿—">1.1 é”™è¯¯æ—¥å¿—</h1><p>é”™è¯¯æ—¥å¿—æ˜¯ MySQL ä¸­æœ€é‡è¦çš„æ—¥å¿—ä¹‹ä¸€ï¼Œå®ƒè®°å½•äº†å½“ mysqldå¯åŠ¨å’Œåœæ­¢æ—¶ï¼Œä»¥åŠæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿä»»ä½•ä¸¥é‡é”™è¯¯æ—¶çš„ç›¸å…³ä¿¡æ¯ã€‚å½“æ•°æ®åº“å‡ºç°ä»»ä½•æ•…éšœå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œå»ºè®®é¦–å…ˆæŸ¥çœ‹æ­¤æ—¥å¿—ã€‚è¯¥æ—¥å¿—æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œé»˜è®¤å­˜æ”¾ç›®å½• /var/log/ï¼Œé»˜è®¤çš„æ—¥å¿—æ–‡ä»¶åä¸ºmysqld.log ã€‚æŸ¥çœ‹æ—¥å¿— ç½®ï¼š<code>show variables like '%log_error%';</code> <img src="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/1684127028346-598bae76-afe0-4b53-ab77-d94744b42295.png" alt="image.png"></p><h1 id="äºŒè¿›åˆ¶æ—¥å¿—">1.2 äºŒè¿›åˆ¶æ—¥å¿—</h1><p>äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBINLOGï¼‰è®°å½•äº†æ‰€æœ‰çš„ DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰è¯­å¥å’ŒDMLï¼ˆæ•°æ®æ“çºµè¯­è¨€ï¼‰è¯­å¥ï¼Œä½†ä¸åŒ…æ‹¬æ•°æ®æŸ¥è¯¢ï¼ˆSELECTã€SHOWï¼‰è¯­å¥ã€‚ ä½œç”¨ï¼šâ‘ . ç¾éš¾æ—¶çš„æ•°æ®æ¢å¤ï¼› â‘¡.MySQLçš„ä¸»ä»å¤åˆ¶ã€‚åœ¨MySQL8ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤äºŒè¿›åˆ¶æ—¥å¿—æ˜¯å¼€å¯ç€çš„ï¼Œæ¶‰åŠåˆ°çš„å‚æ•°å¦‚ä¸‹ï¼š<code>show variables like '%log_bin%';</code> <img src="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/1684127103697-5e0d7d7e-33ed-404e-91b7-ab91ea2451df.png" alt="image.png"> å‚æ•°è¯´æ˜ï¼š</p><ul><li>log_bin_basenameï¼šå½“å‰æ•°æ®åº“æœåŠ¡å™¨çš„binlogæ—¥å¿—çš„åŸºç¡€åç§°(å‰ç¼€)ï¼Œå…·ä½“çš„binlogæ–‡ä»¶åéœ€è¦å†è¯¥basenameçš„åŸºç¡€ä¸ŠåŠ ä¸Šç¼–å·(ç¼–å·ä»000001å¼€å§‹)ã€‚</li><li>log_bin_indexï¼šbinlogçš„ç´¢å¼•æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†å½“å‰æœåŠ¡å™¨å…³è”çš„binlogæ–‡ä»¶æœ‰å“ªäº›ã€‚</li></ul><p><img src="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/1684127210313-747d60c1-b5b2-481e-9a0a-2f1f8b54787c.png" alt="image.png"> <code>show variables like'%binlog_format%';</code><img src="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/1684127249740-2b9cd808-4fb5-48b0-ac5e-ff13bfbe896e.png" alt="image.png">ç”±äºæ—¥å¿—æ˜¯ä»¥äºŒè¿›åˆ¶æ–¹å¼å­˜å‚¨çš„ï¼Œä¸èƒ½ç›´æ¥è¯»å–ï¼Œéœ€è¦é€šè¿‡äºŒè¿›åˆ¶æ—¥å¿—æŸ¥è¯¢å·¥å…·mysqlbinlogæ¥ çœ‹ï¼Œå…·ä½“è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysqlbinlog [ å‚æ•°é€‰é¡¹ ] logfilename<br><br>å‚æ•°é€‰é¡¹ï¼š<br><br> <span class="hljs-operator">-</span>d æŒ‡å®šæ•°æ®åº“åç§°ï¼Œåªåˆ—å‡ºæŒ‡å®šçš„æ•°æ®åº“ç›¸å…³æ“ä½œã€‚<br><br> <span class="hljs-operator">-</span>o å¿½ç•¥æ‰æ—¥å¿—ä¸­çš„å‰nè¡Œå‘½ä»¤ã€‚<br><br> <span class="hljs-operator">-</span>v å°†è¡Œäº‹ä»¶(æ•°æ®å˜æ›´)é‡æ„ä¸º<span class="hljs-keyword">SQL</span>è¯­å¥<br><br> <span class="hljs-operator">-</span>vv å°†è¡Œäº‹ä»¶(æ•°æ®å˜æ›´)é‡æ„ä¸º<span class="hljs-keyword">SQL</span>è¯­å¥ï¼Œå¹¶è¾“å‡ºæ³¨é‡Šä¿¡æ¯<br><br></code></pre></td></tr></table></figure><p>å¯¹äºæ¯”è¾ƒç¹å¿™çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œæ¯å¤©ç”Ÿæˆçš„binlogæ•°æ®å·¨å¤§ï¼Œå¦‚æœé•¿æ—¶é—´ä¸æ¸…é™¤ï¼Œå°†ä¼šå ç”¨å¤§é‡ç£ç›˜ç©ºé—´ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¸…ç†æ—¥å¿—ï¼š<img src="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/1684127556074-51342b98-89da-4576-a7d0-fcee4ce32b9a.png" alt="image.png">ä¹Ÿå¯ä»¥åœ¨mysqlçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äºŒè¿›åˆ¶æ—¥å¿—çš„è¿‡æœŸæ—¶é—´ï¼Œè®¾ç½®äº†ä¹‹åï¼ŒäºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸä¼šè‡ªåŠ¨åˆ é™¤ã€‚ï¼ˆé»˜è®¤30å¤©ï¼‰<code>show variables like'%binlog_expire_logs_seconds%';</code></p><h1 id="æŸ¥è¯¢æ—¥å¿—">1.3 æŸ¥è¯¢æ—¥å¿—</h1><p>æŸ¥è¯¢æ—¥å¿—ä¸­è®°å½•äº†å®¢æˆ·ç«¯çš„æ‰€æœ‰æ“ä½œè¯­å¥ï¼Œè€ŒäºŒè¿›åˆ¶æ—¥å¿—ä¸åŒ…å«æŸ¥è¯¢æ•°æ®çš„SQLè¯­å¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢æ—¥å¿—æ˜¯æœªå¼€å¯çš„ã€‚<img src="/2024/12/06/MySQL/14-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/1684127618677-955313b9-780d-494c-8302-1bc0dd402e0b.png" alt="image.png"> å¦‚æœéœ€è¦å¼€å¯æŸ¥è¯¢æ—¥å¿—ï¼Œå¯ä»¥ä¿®æ”¹MySQLçš„é…ç½®æ–‡ä»¶/etc/my.cnf æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">#è¯¥é€‰é¡¹ç”¨æ¥å¼€å¯æŸ¥è¯¢æ—¥å¿— ï¼Œ å¯é€‰å€¼ ï¼š <span class="hljs-number">0</span> æˆ–è€… <span class="hljs-number">1</span> ï¼› <span class="hljs-number">0</span> ä»£è¡¨å…³é—­ï¼Œ <span class="hljs-number">1</span> ä»£è¡¨å¼€å¯ <br><br>general_log<span class="hljs-operator">=</span><span class="hljs-number">1</span><br><br>#è®¾ç½®æ—¥å¿—çš„æ–‡ä»¶å ï¼Œ å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œ é»˜è®¤çš„æ–‡ä»¶åä¸º host_name.log <br><br>general_log_file<span class="hljs-operator">=</span>mysql_query.log<br><br></code></pre></td></tr></table></figure><p>å¼€å¯äº†æŸ¥è¯¢æ—¥å¿—ä¹‹åï¼Œåœ¨MySQLçš„æ•°æ®å­˜æ”¾ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ /var/lib/mysql/ç›®å½•ä¸‹å°±ä¼šå‡ºç° mysql_query.logæ–‡ä»¶ã€‚ä¹‹åæ‰€æœ‰çš„å®¢æˆ·ç«¯çš„å¢åˆ æ”¹æŸ¥æ“ä½œéƒ½ä¼šè®°å½•åœ¨è¯¥æ—¥å¿—æ–‡ä»¶ä¹‹ä¸­ï¼Œé•¿æ—¶é—´è¿è¡Œåï¼Œè¯¥æ—¥å¿—æ–‡ä»¶å°†ä¼šéå¸¸å¤§ã€‚</p><h1 id="æ…¢æŸ¥è¯¢æ—¥å¿—">1.4 æ…¢æŸ¥è¯¢æ—¥å¿—</h1><p>æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡å‚æ•° long_query_timeè®¾ç½®å€¼å¹¶ä¸”æ‰«æè®°å½•æ•°ä¸å°äº min_examined_row_limitçš„æ‰€æœ‰çš„SQLè¯­å¥çš„æ—¥å¿—ï¼Œé»˜è®¤æœªå¼€å¯ã€‚long_query_time é»˜è®¤ä¸º 10 ç§’ï¼Œæœ€å°ä¸º0ï¼Œç²¾åº¦å¯ä»¥åˆ°å¾®ç§’ã€‚å¦‚æœéœ€è¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œéœ€è¦åœ¨MySQLçš„é…ç½®æ–‡ä»¶/etc/my.cnf ä¸­é…ç½®å¦‚ä¸‹å‚æ•°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">#æ…¢æŸ¥è¯¢æ—¥å¿—<br><br>slow_query_log<span class="hljs-operator">=</span><span class="hljs-number">1</span><br><br>#æ‰§è¡Œæ—¶é—´å‚æ•°<br><br>long_query_time<span class="hljs-operator">=</span><span class="hljs-number">2</span><br><br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ä¼šè®°å½•ç®¡ç†è¯­å¥ï¼Œä¹Ÿä¸ä¼šè®°å½•ä¸ä½¿ç”¨ç´¢å¼•è¿›è¡ŒæŸ¥æ‰¾çš„æŸ¥è¯¢ã€‚å¯ä»¥ä½¿ç”¨<code>log_slow_admin_statements</code>å’Œæ›´æ”¹æ­¤è¡Œä¸º<code>log_queries_not_using_indexes</code>ï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">#è®°å½•æ‰§è¡Œè¾ƒæ…¢çš„ç®¡ç†è¯­å¥<br><br>log_slow_admin_statements <span class="hljs-operator">=</span><span class="hljs-number">1</span><br><br>#è®°å½•æ‰§è¡Œè¾ƒæ…¢çš„æœªä½¿ç”¨ç´¢å¼•çš„è¯­å¥<br><br>log_queries_not_using_indexes <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æ‰€æœ‰çš„å‚æ•°é…ç½®å®Œæˆä¹‹åï¼Œéƒ½éœ€è¦é‡æ–°å¯åŠ¨MySQLæœåŠ¡å™¨æ‰å¯ä»¥ç”Ÿæ•ˆã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9.1 å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ </title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h1><p>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ æœ‰å››ç§å¸¸è§çš„è®¾å®šï¼š</p><ul><li>Fullycooperativeï¼šå„ä¸ªagentçš„åˆ©ç›Šä¸€è‡´ï¼Œè·å¾—çš„å¥–åŠ±ç›¸åŒï¼Œæ¯”å¦‚åŒä¸€æ¡ç”Ÿäº§æµæ°´çº¿ä¸Šçš„å„ä¸ªæœºå™¨ã€‚</li><li>Fullycompetitiveï¼šå„ä¸ªagentç›¸äº’ç«äº‰ï¼Œä¸€æ–¹çš„æ”¶è·æ˜¯å¦ä¸€æ–¹çš„æŸå¤±ã€‚</li><li>Mixed Cooperative &amp;competitiveï¼šå„ä¸ªagentä¹‹é—´å³å­˜åœ¨åˆä½œä¹Ÿå­˜åœ¨ç«äº‰ï¼Œæ¯”å¦‚mobaæ¸¸æˆä¸­å¤šäººä¸€é˜Ÿï¼Œé˜Ÿä¼ä¹‹é—´ç›¸äº’å¯¹æŠ—ï¼Œé˜Ÿä¼å†…éƒ¨ç›¸äº’åˆä½œã€‚</li><li>Self-interestedï¼šåˆ©å·±ä¸»ä¹‰ï¼Œæ˜¯æŒ‡æ¯ä¸ªagentåªæƒ³æœ€å¤§åŒ–è‡ªå·±æ”¶ç›Šï¼Œè‡³äºåˆ«äººæ”¶ç›Šçš„é«˜ä½å®ƒä¸åœ¨ä¹ã€‚</li></ul><p>ç¬¬<span class="math inline">\(i\)</span>ä¸ªæ™ºèƒ½ä½“çš„Discountedreturn<span class="math inline">\(U_t^i\)</span>å®šä¹‰ä¸ºï¼š</p><p><span class="math inline">\(U_t^i = R_t^i + \gamma R_{t+1}^i +\gamma^2 R_{t+2}^i + \gamma^3 R_{t+3}^i + \ldots + \gamma^nR_n^i\)</span></p><p>æ¯ä¸ªagentéƒ½æœ‰è‡ªå·±çš„policy network<span class="math inline">\(\pi(a^i| s; \theta^i)\)</span>ã€‚</p><p>ç¬¬<span class="math inline">\(i\)</span>ä¸ªagentçš„state-valuefunction<span class="math inline">\(V^i(s_t; \theta^1, \ldots,\theta^n)\)</span>å®šä¹‰ä¸ºï¼š</p><p><span class="math inline">\(V^i(s_t; \theta^1, \ldots, \theta^n) =E[U_t^i | S_t = s_t]\)</span></p><p>å•æ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯ä½¿<span class="math inline">\(J(\theta) =E_S(V(S, \theta))\)</span>ã€‚</p><p>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ åˆ¤æ–­æ”¶æ•›çš„æ ‡å‡†æ˜¯çº³ä»€å‡è¡¡ï¼Œæ¯ä¸ªç©å®¶éƒ½æœ‰è‡ªå·±çš„<span class="math inline">\(J^i(\theta^1, \theta^2, \ldots, \theta^n) =E_S(V^i(S, \theta^1, \theta^2, \ldots, \theta^n))\)</span>ï¼Œ</p><p>å¦‚æœå¯¹äºä»»æ„ä¸€ä¸ªç©å®¶æ¥è¯´ï¼Œå¦‚æœå…¶ä»–ç©å®¶é€‰æ‹©çš„ç­–ç•¥ä¸å˜ï¼Œé‚£ä¹ˆä¸èƒ½é€šè¿‡æ”¹å˜å½“å‰ç­–ç•¥æ¥æé«˜<span class="math inline">\(J^i\)</span>å€¼çš„è¯ï¼Œå°±è¯´æ˜è¾¾åˆ°äº†nashå‡è¡¡ã€‚</p><h1 id="ä¸‰ç§æ¶æ„">ä¸‰ç§æ¶æ„</h1><p>ä¸‰ç§æ¶æ„åˆ†åˆ«ä¸ºï¼š</p><ul><li>Fullydecentralizedï¼šå®Œå…¨å»ä¸­å¿ƒåŒ–ï¼šæ¯ä¸ªagentä½¿ç”¨è‡ªå·±çš„è§‚æµ‹å’Œå¥–åŠ±æ¥å­¦ä¹ è‡ªå·±çš„ç­–ç•¥ã€‚Agentsdo not communicateã€‚</li><li>Fully centralizedï¼šå®Œå…¨ä¸­å¿ƒåŒ–ï¼šThe agents send everything to thecentral controller. The controller makes decisions for all theagentsã€‚</li><li>Centralized training with decentralized executionï¼šA centralcontroller is used during training. The controller is disabled aftertraining.</li></ul><ol type="1"><li>Fully decentralizedä¸­æ¯ä¸ªagentå•ç‹¬è®­ç»ƒè‡ªå·±çš„ç½‘ç»œï¼Œå®ƒåŸºäºè‡ªå·±çš„ç­–ç•¥ç½‘ç»œé‡‡å–åŠ¨ä½œï¼Œå¹¶è§‚æµ‹åŠ¨ä½œå‘ç”Ÿåè‡ªå·±çš„çŠ¶æ€å’Œå¥–åŠ±ï¼Œè·Ÿå‰é¢çš„å•æ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä¸€æ ·ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1733287218172-30524f6c-849e-4f05-86a1-16e712f608d5.png"></p><ol start="2" type="1"><li>Fully centralizedç”±ä¸­å¿ƒå†³å®šè¯¥åšä»€ä¹ˆï¼Œä¸­å¿ƒæœ‰nä¸ªç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œï¼Œå¯¹åº”nä¸ªagentsï¼Œå®ƒæ¥æ”¶è§‚æµ‹å€¼æ¥æ›´æ–°ç½‘ç»œå¹¶å†³å®šåŠ¨ä½œã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸­å¿ƒçŸ¥é“æ‰€æœ‰çš„çŠ¶æ€å’Œä»·å€¼ï¼Œå¯ä»¥æ›´å¥½çš„è®­ç»ƒç½‘ç»œå’Œå†³å®šåŠ¨ä½œï¼Œåå¤„æ˜¯é€Ÿåº¦ä¼šå˜æ…¢ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1733287227571-e2b99d87-ab3b-4150-beaa-482cf496993a.png"></p><p>Centralized training with decentralizedexecutionï¼Œæ¯ä¸ªagentç‹¬ç«‹æŒæœ‰è‡ªå·±çš„ç­–ç•¥å‡½æ•°ï¼Œä¸­å¿ƒæŒæœ‰nä¸ªä»·å€¼å‡½æ•°ï¼Œå¯¹åº”nä¸ªagentã€‚è®­ç»ƒè¿‡ç¨‹æ˜¯ä¸­å¿ƒåŒ–çš„ï¼Œä¸­å¿ƒçŸ¥é“æ‰€æœ‰çš„è§‚æµ‹çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ï¼›è®­ç»ƒç»“æœæ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œæ¯ä¸ªagentå·²ç»è®­ç»ƒå¥½äº†è‡ªå·±çš„ç­–ç•¥å‡½æ•°ï¼Œä¸­å¿ƒçš„ä»·å€¼å‡½æ•°å°±æ²¡å¿…è¦å­˜åœ¨äº†ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¯ä¸ªagentåŸºäºè‡ªå·±çš„ç­–ç•¥å‡½æ•°é‡‡å–åŠ¨ä½œï¼Œç„¶åç›¸å…³ä¿¡æ¯ä¼ ç»™ä¸­å¿ƒã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1733287242079-2cdb22a0-2312-4e80-af06-644be1e40ab5.png"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œä¸­å¿ƒæ¥æ”¶åˆ°ä¿¡æ¯åï¼Œè®­ç»ƒå¹¶è°ƒç”¨qå‡½æ•°ï¼Œè®¡ç®—qå€¼è¿”å›ç»™å„ä¸ªagentã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1733287250212-b1e49ff2-b812-42cf-88ff-7dbb87143aa6.png"></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/9-1-%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1733287861024-26be5065-4a1a-4e96-89c2-6dc856b287f5.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8.1 ç­–ç•¥å­¦ä¹ çš„é«˜çº§æŠ€å·§ï¼šç½®ä¿¡åŸŸç­–ç•¥ä¼˜åŒ– (TRPO)</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/8-1-%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7-%E7%BD%AE%E4%BF%A1%E5%9F%9F%E7%AD%96%E7%95%A5%E4%BC%98%E5%8C%96-TRPO/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/8-1-%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7-%E7%BD%AE%E4%BF%A1%E5%9F%9F%E7%AD%96%E7%95%A5%E4%BC%98%E5%8C%96-TRPO/</url>
    
    <content type="html"><![CDATA[<p>ç­–ç•¥å­¦ä¹ çš„é«˜çº§æŠ€å·§ï¼šç½®ä¿¡åŸŸç­–ç•¥ä¼˜åŒ– (TRPO)</p><p>PPOç®—æ³•å°±æ˜¯åœ¨TRPOçš„åŸºç¡€ä¸Šæ¨å‡ºçš„ã€‚</p><h1 id="trust-region-policy-optimization-trpo">Trust Region PolicyOptimization (TRPO)</h1><p>ç½®ä¿¡åŸŸç­–ç•¥ä¼˜åŒ– (trust region policy optimization, TRPO)æ˜¯ä¸€ç§ç­–ç•¥å­¦ä¹ æ–¹æ³•ï¼Œè·Ÿä»¥å‰å­¦çš„ç­–ç•¥æ¢¯åº¦æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ã€‚è·Ÿç­–ç•¥æ¢¯åº¦æ–¹æ³•ç›¸æ¯”ï¼ŒTRPOæœ‰ä¸¤ä¸ªä¼˜åŠ¿ï¼šç¬¬ä¸€ï¼ŒTRPOè¡¨ç°æ›´ç¨³å®šï¼Œæ”¶æ•›æ›²çº¿ä¸ä¼šå‰§çƒˆæ³¢åŠ¨ï¼Œè€Œä¸”å¯¹å­¦ä¹ ç‡ä¸æ•æ„Ÿï¼›ç¬¬äºŒï¼ŒTRPOç”¨æ›´å°‘çš„ç»éªŒ(å³ æ™ºèƒ½ä½“ æ”¶é›†åˆ°çš„çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±)å°±èƒ½è¾¾åˆ°ä¸ç­–ç•¥æ¢¯åº¦æ–¹æ³•ç›¸åŒçš„è¡¨ç°ã€‚</p><p>å­¦ä¹ TRPO çš„å…³é”®åœ¨äºç†è§£ç½®ä¿¡åŸŸæ–¹æ³•(trust regionmethods)ã€‚ç½®ä¿¡åŸŸæ–¹æ³•ä¸æ˜¯TRPOçš„è®ºæ–‡æå‡ºçš„ï¼Œè€Œæ˜¯æ•°å€¼æœ€ä¼˜åŒ–é¢†åŸŸä¸­ä¸€ç±»ç»å…¸çš„ç®—æ³•ï¼Œå†å²è‡³å°‘å¯ä»¥è¿½æº¯åˆ°1970 å¹´ã€‚TRPOè®ºæ–‡çš„è´¡çŒ®åœ¨äºå·§å¦™åœ°æŠŠç½®ä¿¡åŸŸæ–¹æ³•åº”ç”¨åˆ°å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œå–å¾—éå¸¸å¥½çš„æ•ˆæœã€‚</p><h2 id="ç½®ä¿¡åŸŸæ–¹æ³•">ç½®ä¿¡åŸŸæ–¹æ³•</h2><p>æœ‰è¿™æ ·ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼š<span class="math inline">\(\max_\thetaJ(\theta)\)</span>è¿™é‡Œçš„<span class="math inline">\(J(\theta)\)</span>æ˜¯ç›®æ ‡å‡½æ•°ï¼Œ<span class="math inline">\(\theta\)</span>æ˜¯ä¼˜åŒ–å˜é‡ã€‚æ±‚è§£è¿™ä¸ªä¼˜åŒ–é—®é¢˜çš„ç›®çš„æ˜¯æ‰¾åˆ°ä¸€ä¸ªå˜é‡<span class="math inline">\(\theta\)</span>ä½¿å¾—ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å–å¾—æœ€å¤§å€¼ã€‚æœ‰å„ç§å„æ ·çš„ä¼˜åŒ–ç®—æ³•ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜ã€‚å‡ ä¹æ‰€æœ‰çš„æ•°å€¼ä¼˜åŒ–ç®—æ³•éƒ½æ˜¯åšè¿™æ ·çš„è¿­ä»£ï¼š</p><p><span class="math inline">\(\theta_{\text{new}} \leftarrow\text{Update}(Data; \theta_{\text{now}})\)</span></p><p>æ­¤å¤„çš„<span class="math inline">\(\theta_{\text{now}}\)</span>å’Œ<span class="math inline">\(\theta_{\text{new}}\)</span>åˆ†åˆ«æ˜¯ä¼˜åŒ–å˜é‡å½“å‰çš„å€¼å’Œæ–°çš„å€¼ã€‚ä¸åŒç®—æ³•çš„åŒºåˆ«åœ¨äºå…·ä½“æ€ä¹ˆæ ·åˆ©ç”¨æ•°æ®æ›´æ–°ä¼˜åŒ–å˜é‡ã€‚</p><p>ç½®ä¿¡åŸŸæ–¹æ³•ç”¨åˆ°ä¸€ä¸ªæ¦‚å¿µâ€”â€”ç½®ä¿¡åŸŸã€‚ä¸‹é¢ä»‹ç»ç½®ä¿¡åŸŸã€‚ç»™å®šå˜é‡å½“å‰çš„å€¼<span class="math inline">\(\theta_{\text{now}}\)</span>,ç”¨<span class="math inline">\(\mathcal{N}(\theta_{\text{now}})\)</span>è¡¨ç¤º<span class="math inline">\(\theta_{\text{now}}\)</span>çš„ä¸€ä¸ªé‚»åŸŸã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><p><span class="math inline">\(\mathcal{N}(\theta_{\text{now}}) = \{\theta \mid \|\theta - \theta_{\text{now}}\|_2 \leq \Delta\}\)</span></p><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œé›†åˆ<span class="math inline">\(\mathcal{N}(\theta_{\text{now}})\)</span>æ˜¯ä»¥<span class="math inline">\(\theta_{\text{now}}\)</span>ä¸ºçƒå¿ƒã€ ä»¥<span class="math inline">\(\Delta\)</span>ä¸ºåŠå¾„çš„çƒï¼›è§å³å›¾ã€‚çƒä¸­çš„ç‚¹éƒ½è¶³å¤Ÿæ¥è¿‘<span class="math inline">\(\theta_{\text{now}}\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/8-1-%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7-%E7%BD%AE%E4%BF%A1%E5%9F%9F%E7%AD%96%E7%95%A5%E4%BC%98%E5%8C%96-TRPO/1733296514045-1a242c1d-85fc-4b1f-946a-bbd03cafe3f5.png"></p><p>ç½®ä¿¡åŸŸæ–¹æ³•éœ€è¦æ„é€ ä¸€ä¸ªå‡½æ•°<span class="math inline">\(L(\theta |\theta_{\text{now}})\)</span>,è¿™ä¸ªå‡½æ•°è¦æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼š</p><p><span class="math inline">\(L(\theta | \theta_{\text{now}}) \text{å¾ˆæ¥è¿‘ } J(\theta), \quad \forall \theta \in\mathcal{N}(\theta_{\text{now}})\)</span></p><p>é‚£ä¹ˆé›†åˆ<span class="math inline">\(\mathcal{N}(\theta_{\text{now}})\)</span>å°±è¢«ç§°ä½œç½®ä¿¡åŸŸã€‚é¡¾åæ€ä¹‰ï¼Œåœ¨<span class="math inline">\(\theta_{\text{now}}\)</span>çš„é‚»åŸŸä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¿¡ä»»<span class="math inline">\(L(\theta | \theta_{\text{now}})\)</span>,å¯ä»¥æ‹¿<span class="math inline">\(L(\theta |\theta_{\text{now}})\)</span>æ¥æ›¿ä»£ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>ã€‚</p><p>å›¾ 9.2 ç”¨ä¸€ä¸ªä¸€å…ƒå‡½æ•°çš„ä¾‹å­è§£é‡Š<span class="math inline">\(J(\theta)\)</span>å’Œ<span class="math inline">\(L(\theta |\theta_{\text{now}})\)</span>çš„å…³ç³»ã€‚å›¾ä¸­æ¨ªè½´æ˜¯ä¼˜åŒ–å˜é‡<span class="math inline">\(\theta\)</span>,çºµè½´æ˜¯å‡½æ•°å€¼ã€‚å¦‚å›¾9.2(a)æ‰€ç¤ºï¼Œå‡½æ•°<span class="math inline">\(L(\theta |\theta_{\text{now}})\)</span>æœªå¿…åœ¨æ•´ä¸ªå®šä¹‰åŸŸä¸Šéƒ½æ¥è¿‘<span class="math inline">\(J(\theta)\)</span>,è€Œåªæ˜¯åœ¨<span class="math inline">\(\theta_{\text{now}}\)</span>çš„é¢†åŸŸé‡Œæ¥è¿‘<span class="math inline">\(J(\theta)\)</span>ã€‚<span class="math inline">\(\theta_{\text{now}}\)</span>çš„é‚»åŸŸå°±å«åšç½®ä¿¡åŸŸã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/8-1-%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7-%E7%BD%AE%E4%BF%A1%E5%9F%9F%E7%AD%96%E7%95%A5%E4%BC%98%E5%8C%96-TRPO/1733296582100-f7896c8c-f2f3-406c-933e-4d6c8319fed1.png"></p><p>é€šå¸¸æ¥è¯´ï¼Œ<span class="math inline">\(J\)</span>æ˜¯ä¸ªå¾ˆå¤æ‚çš„å‡½æ•°ï¼Œæˆ‘ä»¬ç”šè‡³å¯èƒ½ä¸çŸ¥é“<span class="math inline">\(J\)</span>çš„è§£æè¡¨è¾¾å¼(æ¯”å¦‚<span class="math inline">\(J\)</span>æ˜¯æŸä¸ªå‡½æ•°çš„æœŸæœ›)ã€‚è€Œæˆ‘ä»¬äººä¸ºæ„é€ å‡ºçš„å‡½æ•°<span class="math inline">\(L\)</span>ç›¸å¯¹è¾ƒä¸ºç®€å•ï¼Œæ¯”å¦‚<span class="math inline">\(L\)</span>æ˜¯<span class="math inline">\(J\)</span>çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œæˆ–è€…æ˜¯<span class="math inline">\(J\)</span>åœ¨<span class="math inline">\(\theta_{\text{now}}\)</span>è¿™ä¸ªç‚¹çš„äºŒé˜¶æ³°å‹’å±•å¼€ã€‚æ—¢ç„¶å¯ä»¥ä¿¡ä»»<span class="math inline">\(L\)</span>,é‚£ä¹ˆä¸å¦¨ç”¨<span class="math inline">\(L\)</span>ä»£æ›¿å¤æ‚çš„å‡½æ•°<span class="math inline">\(J\)</span>,ç„¶åå¯¹<span class="math inline">\(L\)</span>åšæœ€å¤§åŒ–ã€‚è¿™æ ·æ¯”ç›´æ¥ä¼˜åŒ–<span class="math inline">\(J\)</span>è¦å®¹æ˜“å¾—å¤šã€‚è¿™å°±æ˜¯ç½®ä¿¡åŸŸæ–¹æ³•çš„æ€æƒ³ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œç½®ä¿¡åŸŸæ–¹æ³•åšä¸‹é¢è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸€ç›´é‡å¤ä¸‹å»ï¼Œå½“æ— æ³•è®©<span class="math inline">\(J\)</span>çš„å€¼å¢å¤§çš„æ—¶å€™ç»ˆæ­¢ç®—æ³•ã€‚</p><p>ç¬¬ä¸€æ­¥â€”â€”åšè¿‘ä¼¼ï¼šç»™å®š<span class="math inline">\(\theta_{\text{now}}\)</span>,æ„é€ å‡½æ•°<span class="math inline">\(L(\theta |\theta_{\text{now}})\)</span>,ä½¿å¾—å¯¹äºæ‰€æœ‰çš„<span class="math inline">\(\theta \in\mathcal{N}(\theta_{\text{now}})\)</span>,å‡½æ•°å€¼<span class="math inline">\(L(\theta | \theta_{\text{now}})\)</span>ä¸<span class="math inline">\(J(\theta)\)</span>è¶³å¤Ÿæ¥è¿‘ã€‚å›¾9.2(b)è§£é‡Šäº†åšè¿‘ä¼¼è¿™ä¸€æ­¥ã€‚</p><p>ç¬¬äºŒæ­¥ä¸€ä¸€æœ€å¤§åŒ–ï¼šåœ¨ç½®ä¿¡åŸŸ<span class="math inline">\(\mathcal{N}(\theta_{\text{now}})\)</span>ä¸­å¯»æ‰¾å˜é‡<span class="math inline">\(\theta\)</span>çš„å€¼ï¼Œ ä½¿å¾—å‡½æ•°<span class="math inline">\(L\)</span>çš„å€¼æœ€å¤§åŒ–ã€‚æŠŠæ‰¾åˆ°çš„å€¼è®°ä½œï¼š</p><p><span class="math inline">\(\theta_{\text{new}} =\mathrm{argmax}_{\theta \in \mathcal{N}(\theta_{\text{now}})} L(\theta |\theta_{\text{now}})\)</span></p><p>å›¾ 9.2( c) è§£é‡Šäº†æœ€å¤§åŒ–è¿™ä¸€æ­¥ã€‚</p><p>ç½®ä¿¡åŸŸæ–¹æ³•å…¶å®æ˜¯ä¸€ç±»ç®—æ³•æ¡†æ¶ï¼Œè€Œéä¸€ä¸ªå…·ä½“çš„ç®—æ³•ã€‚æœ‰å¾ˆå¤šç§æ–¹å¼å®ç°å®ç°ç½®ä¿¡åŸŸæ–¹æ³•ã€‚ç¬¬ä¸€æ­¥éœ€è¦åšè¿‘ä¼¼ï¼Œè€Œåšè¿‘ä¼¼çš„æ–¹æ³•æœ‰å¤šç§å¤šæ ·ï¼Œæ¯”å¦‚è’™ç‰¹å¡æ´›ã€äºŒé˜¶æ³°å‹’å±•å¼€ã€‚ç¬¬äºŒæ­¥éœ€è¦è§£ä¸€ä¸ªå¸¦çº¦æŸçš„æœ€å¤§åŒ–é—®é¢˜ï¼›æ±‚è§£è¿™ä¸ªé—®é¢˜åˆéœ€è¦å•ç‹¬çš„æ•°å€¼ä¼˜åŒ–ç®—æ³•ï¼Œæ¯”å¦‚æ¢¯åº¦æŠ•å½±ç®—æ³•ã€æ‹‰æ ¼æœ—æ—¥æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç½®ä¿¡åŸŸ<span class="math inline">\(\mathcal{N}(\theta_{\text{now}})\)</span>ä¹Ÿæœ‰å¤šç§å¤šæ ·çš„é€‰æ‹©ï¼Œæ—¢å¯ä»¥æ˜¯çƒï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„ KL æ•£åº¦ (KL Divergence)ã€‚</p><p>ChatGPTå¯¹æ¢¯åº¦æŠ•å½±ç®—æ³•çš„ä»‹ç»</p><p>æ¢¯åº¦æŠ•å½±ç®—æ³•çš„åŸºæœ¬æ­¥éª¤å¯ä»¥é€šè¿‡æ•°å­¦å…¬å¼è¿›è¡Œä»‹ç»ã€‚è€ƒè™‘å¸¦æœ‰çº¦æŸçš„ä¼˜åŒ–é—®é¢˜ï¼š</p><p><span class="math inline">\(min_{x} f(x)\)</span></p><p>å…¶ä¸­ (f(x)) æ˜¯ç›®æ ‡å‡½æ•°ï¼Œ(x) æ˜¯ä¼˜åŒ–å˜é‡ï¼ŒåŒæ—¶æ»¡è¶³ä¸€ç»„çº¦æŸæ¡ä»¶ï¼š</p><p><span class="math inline">\(g_i(x) \leq 0, \quad i = 1, 2, \ldots,m\)</span></p><p>æ¢¯åº¦æŠ•å½±ç®—æ³•çš„è¿­ä»£è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol type="1"><li>åˆå§‹åŒ–ï¼š é€‰æ‹©åˆå§‹è§£ (<span class="math inline">\(x_0\)</span>)ï¼Œè®¾ç½®å­¦ä¹ ç‡ (<span class="math inline">\(\alpha\)</span>) å’Œåœæ­¢å‡†åˆ™ã€‚</li><li>æ¢¯åº¦è®¡ç®—ï¼š è®¡ç®—ç›®æ ‡å‡½æ•°åœ¨å½“å‰è§£ (<span class="math inline">\(x_k\)</span>) å¤„çš„æ¢¯åº¦ (<span class="math inline">\(\nabla f(x_k)\)</span>)ã€‚</li><li>æ¢¯åº¦æŠ•å½±ï¼š å°†æ¢¯åº¦æŠ•å½±åˆ°æ»¡è¶³çº¦æŸæ¡ä»¶çš„ç©ºé—´ä¸­ã€‚å‡è®¾æŠ•å½±æ“ä½œä¸º(P(x))ï¼Œåˆ™æ›´æ–°æ–¹å‘ä¸º (<span class="math inline">\(\Delta x_k = P(x_k -\alpha \nabla f(x_k)) - x_k\)</span>)ã€‚</li><li>æ›´æ–°å˜é‡ï¼š ä½¿ç”¨æŠ•å½±åçš„æ¢¯åº¦ä¿¡æ¯æ¥æ›´æ–°å˜é‡ (<span class="math inline">\(x_k\)</span>)ï¼š</li></ol><p><span class="math inline">\(x_{k+1} = x_k + \alpha \Deltax_k\)</span></p><ol start="5" type="1"><li>æ”¶æ•›åˆ¤æ–­ï¼šåˆ¤æ–­ç®—æ³•æ˜¯å¦è¾¾åˆ°åœæ­¢æ¡ä»¶ï¼Œä¾‹å¦‚ç›®æ ‡å‡½æ•°çš„å˜åŒ–è¶³å¤Ÿå°æˆ–è€…è¾¾åˆ°é¢„å®šçš„è¿­ä»£æ¬¡æ•°ã€‚</li></ol><p>åœ¨è¿™é‡Œï¼Œæ¢¯åº¦æŠ•å½±çš„å…³é”®åœ¨äºæŠ•å½±æ“ä½œ (P(x))çš„å®šä¹‰ã€‚å…·ä½“çš„æŠ•å½±å½¢å¼å–å†³äºçº¦æŸæ¡ä»¶çš„æ€§è´¨ã€‚ä¾‹å¦‚ï¼Œå¯¹äºçº¿æ€§çº¦æŸ (<span class="math inline">\(g_i(x) \leq 0\)</span>)ï¼ŒæŠ•å½±æ“ä½œå¯ä»¥è¡¨ç¤ºä¸º (<span class="math inline">\(P(x) =\max(0,g_i(x))\)</span>)ã€‚å¯¹äºæ›´ä¸€èˆ¬çš„éçº¿æ€§çº¦æŸï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ä¸“é—¨çš„æ•°å­¦å·¥å…·æˆ–ç®—æ³•æ¥è¿›è¡Œæ¢¯åº¦æŠ•å½±ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“é—®é¢˜å¯¹ç®—æ³•è¿›è¡Œè°ƒæ•´å’Œå®šåˆ¶ã€‚</p><h2 id="ç­–ç•¥å­¦ä¹ ">ç­–ç•¥å­¦ä¹ </h2><p>é¦–å…ˆå¤ä¹ ç­–ç•¥å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ã€‚ç­–ç•¥ç½‘ç»œè®°ä½œ<span class="math inline">\(\pi(a | s; \theta)\)</span>,å®ƒæ˜¯ä¸ªæ¦‚ç‡è´¨é‡å‡½æ•°ã€‚åŠ¨ä½œä»·å€¼å‡½æ•°è®°ä½œ<span class="math inline">\(Q_{\pi}(s,a)\)</span>,å®ƒæ˜¯å›æŠ¥çš„æœŸæœ›ã€‚çŠ¶æ€ä»·å€¼å‡½æ•°è®°ä½œï¼š</p><p><span class="math inline">\(V_{\pi}(s) = \mathbb{E}_{A \sim \pi(\cdot| s; \theta)}[Q_{\pi}(s, A)] = \sum_{a \in A} \pi(a | s; \theta) \cdotQ_{\pi}(s, a)\)</span></p><p>æ³¨æ„ï¼Œ<span class="math inline">\(V_{\pi}(s)\)</span>ä¾èµ–äºç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>, æ‰€ä»¥ä¾èµ–äº<span class="math inline">\(\pi\)</span>çš„å‚æ•°<span class="math inline">\(\theta\)</span>ã€‚ç­–ç•¥å­¦ä¹ çš„ç›®æ ‡å‡½æ•°æ˜¯ï¼š</p><p><span class="math inline">\(J(\theta) =\mathbb{E}_S[V_{\pi}(S)]\)</span></p><p><span class="math inline">\(J(\theta)\)</span>åªä¾èµ–äº<span class="math inline">\(\theta\)</span>,ä¸ä¾èµ–äºçŠ¶æ€<span class="math inline">\(S\)</span>å’ŒåŠ¨ä½œ<span class="math inline">\(A\)</span>ã€‚å‰é¢ä»‹ç»çš„ç­–ç•¥æ¢¯åº¦æ–¹æ³• (åŒ…æ‹¬ REINFORCEå’Œ Actor-Critic) ç”¨è’™ç‰¹å¡æ´›è¿‘ä¼¼æ¢¯åº¦<span class="math inline">\(\nabla_{\theta}J(\theta)\)</span>,å¾—åˆ°éšæœºæ¢¯åº¦ï¼Œç„¶ååšéšæœºæ¢¯åº¦ä¸Šå‡æ›´æ–°<span class="math inline">\(\theta\)</span>,ä½¿å¾—ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å¢å¤§ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬è¦æŠŠç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å˜æ¢æˆä¸€ç§ç­‰ä»·å½¢å¼ã€‚ä»ç­‰å¼å‡ºå‘ï¼ŒæŠŠçŠ¶æ€ä»·å€¼å†™æˆï¼š</p><p><span class="math inline">\(V_{\pi}(s) = \sum_{a \in A} \pi(a | s;\theta_{\text{now}}) \cdot \frac{\pi(a | s; \theta)}{\pi(a | s;\theta_{\text{now}})} \cdot Q_{\pi}(s, a) = \mathbb{E}_{A \sim \pi(\cdot| s; \theta_{\text{now}})}[\frac{\pi(A | s; \theta)}{\pi(A | s;\theta_{\text{now}})} \cdot Q_{\pi}(s, A)]\)</span></p><p>ç¬¬ä¸€ä¸ªç­‰å¼å¾ˆæ˜¾ç„¶ï¼Œå› ä¸ºè¿åŠ ä¸­çš„ç¬¬ä¸€é¡¹å¯ä»¥æ¶ˆæ‰ç¬¬äºŒé¡¹çš„åˆ†æ¯ã€‚ç¬¬äºŒä¸ªç­‰å¼æŠŠç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(A | s;\theta_{\text{now}})\)</span>çœ‹åšåŠ¨ä½œ<span class="math inline">\(A\)</span>çš„æ¦‚ç‡è´¨é‡å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥æŠŠè¿åŠ å†™æˆæœŸæœ›ã€‚ç”±å…¬å¼å¯å¾—å®šç† 9.1ã€‚å®šç† 9.1 æ˜¯ TRPO çš„å…³é”®æ‰€åœ¨ï¼Œç”šè‡³å¯ä»¥è¯´ TRPOå°±æ˜¯ä»è¿™ä¸ªå…¬å¼æ¨å‡ºçš„ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/8-1-%E7%AD%96%E7%95%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7-%E7%BD%AE%E4%BF%A1%E5%9F%9F%E7%AD%96%E7%95%A5%E4%BC%98%E5%8C%96-TRPO/1733297357437-8f83c470-83c3-4dda-bfd1-b60217fed8f0.png"></p><p>å®šç† 9.1. ç›®æ ‡å‡½æ•°çš„ç­‰ä»·å½¢å¼ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å¯ä»¥ç­‰ä»·å†™æˆï¼š</p><p><span class="math inline">\(J(\theta) = \mathbb{E}_S \left[\mathbb{E}_{A \sim \pi(\cdot | S, \theta_{\text{now}})} \left[\frac{\pi(A | S; \theta)}{\pi(A | S; \theta_{\text{now}})} \cdotQ_{\pi}(S, A) \right] \right]\)</span></p><p>ä¸Šé¢<span class="math inline">\(Q_{\pi}\)</span>ä¸­çš„<span class="math inline">\(\pi\)</span>æŒ‡çš„æ˜¯<span class="math inline">\(\pi(A | S; \theta)\)</span>ã€‚</p><p>å…¬å¼ä¸­çš„æœŸæœ›æ˜¯å…³äºçŠ¶æ€<span class="math inline">\(S\)</span>å’ŒåŠ¨ä½œ<span class="math inline">\(A\)</span>æ±‚çš„ã€‚çŠ¶æ€<span class="math inline">\(S\)</span>çš„æ¦‚ç‡å¯†åº¦å‡½æ•°åªæœ‰ç¯å¢ƒçŸ¥é“ï¼Œè€Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä»ç¯å¢ƒä¸­è·å–<span class="math inline">\(S\)</span>çš„è§‚æµ‹å€¼ã€‚åŠ¨ä½œ<span class="math inline">\(A\)</span>çš„æ¦‚ç‡è´¨é‡å‡½æ•°æ˜¯ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(A | S; \theta_{\text{now}})\)</span>;æ³¨æ„ï¼Œç­–ç•¥ç½‘ç»œçš„å‚æ•°æ˜¯æ—§çš„å€¼<span class="math inline">\(\theta_{\text{now}}\)</span>.</p><h2 id="trpo-æ•°å­¦æ¨å¯¼">TRPO æ•°å­¦æ¨å¯¼</h2><p>å‰é¢ä»‹ç»äº†æ•°å€¼ä¼˜åŒ–çš„åŸºç¡€å’Œä»·å€¼å­¦ä¹ çš„åŸºç¡€ï¼Œç»ˆäºå¯ä»¥å¼€å§‹æ¨å¯¼ TRPOã€‚TRPOæ˜¯ç½®ä¿¡åŸŸæ–¹æ³•åœ¨ç­–ç•¥å­¦ä¹ ä¸­çš„åº”ç”¨ï¼Œæ‰€ä»¥ TRPOä¹Ÿéµå¾ªç½®ä¿¡åŸŸæ–¹æ³•çš„æ¡†æ¶ï¼Œé‡å¤åšè¿‘ä¼¼å’Œæœ€å¤§åŒ–è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´åˆ°ç®—æ³•æ”¶æ•›ã€‚æ”¶æ•›æŒ‡çš„æ˜¯æ— æ³•å¢å¤§ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>, å³æ— æ³•å¢å¤§æœŸæœ›å›æŠ¥ã€‚</p><p><strong>ç¬¬ä¸€æ­¥â€”â€”åšè¿‘ä¼¼</strong>ï¼š</p><p>æˆ‘ä»¬ä»å®šç† 9.1 å‡ºå‘ã€‚å®šç†æŠŠç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å†™æˆäº†æœŸæœ›çš„å½¢å¼ã€‚æˆ‘ä»¬æ— æ³•ç›´æ¥ç®—å‡ºæœŸæœ›ï¼Œæ— æ³•å¾—åˆ°<span class="math inline">\(J(\theta)\)</span>çš„è§£æè¡¨è¾¾å¼ï¼›åŸå› åœ¨äºåªæœ‰ç¯å¢ƒçŸ¥é“çŠ¶æ€<span class="math inline">\(S\)</span>çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œè€Œæˆ‘ä»¬ä¸çŸ¥é“ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œä»è€ŒæŠŠå‡½æ•°<span class="math inline">\(J\)</span>è¿‘ä¼¼æˆå‡½æ•°<span class="math inline">\(L\)</span>ã€‚ç”¨ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(A | S;\theta_{\text{now}})\)</span>æ§åˆ¶æ™ºèƒ½ä½“è·Ÿç¯å¢ƒäº¤äº’ï¼Œä»å¤´åˆ°å°¾ç©å®Œä¸€å±€æ¸¸æˆè§‚æµ‹åˆ°ä¸€æ¡è½¨è¿¹ï¼š</p><p><span class="math inline">\(s_1, a_1, r_1, s_2, a_2, r_2, \cdots,s_n, a_n, r_n.\)</span></p><p>å…¶ä¸­çš„çŠ¶æ€<span class="math inline">\(\{s_t\}_{t=1}^n\)</span>éƒ½æ˜¯ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°çš„ï¼Œå…¶ä¸­çš„åŠ¨ä½œ<span class="math inline">\(\{a_t\}_{t=1}^n\)</span>éƒ½æ˜¯æ ¹æ®ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(\cdot | s_t;\theta_{\text{now}})\)</span>æŠ½å–çš„æ ·æœ¬ã€‚æ‰€ä»¥ï¼Œ</p><p><span class="math inline">\(\frac{\pi(a_t | s_t; \theta)}{\pi(a_t |s_t; \theta_{\text{now}})} \cdot Q_{\pi}(s_t, a_t)\)</span></p><p>æ˜¯å¯¹å®šç† 9.1 ä¸­æœŸæœ›çš„æ— åä¼°è®¡ã€‚æˆ‘ä»¬è§‚æµ‹åˆ°äº†<span class="math inline">\(n\)</span>ç»„çŠ¶æ€å’ŒåŠ¨ä½œï¼Œäºæ˜¯åº”è¯¥å¯¹å…¬å¼æ±‚å¹³å‡ï¼ŒæŠŠå¾—åˆ°å‡å€¼è®°ä½œï¼š</p><p><span class="math inline">\(L(\theta | \theta_{\text{now}}) =\frac{1}{n} \sum_{t=1}^{n} \frac{\pi(a_t | s_t; \theta)}{\pi(a_t | s_t;\theta_{\text{now}})} \cdot Q_{\pi}(s_t, a_t)\)</span></p><p>æ—¢ç„¶è¿åŠ é‡Œæ¯ä¸€é¡¹éƒ½æ˜¯æœŸæœ›çš„æ— åä¼°è®¡ï¼Œé‚£ä¹ˆ<span class="math inline">\(n\)</span>é¡¹çš„å‡å€¼<span class="math inline">\(L\)</span>ä¹Ÿæ˜¯æ— åä¼°è®¡ã€‚æ‰€ä»¥å¯ä»¥æ‹¿<span class="math inline">\(L\)</span>ä½œä¸ºç›®æ ‡å‡½æ•°<span class="math inline">\(J\)</span>çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚</p><p>å…¬å¼ä¸­çš„<span class="math inline">\(L(\theta |\theta_{\text{now}})\)</span>æ˜¯å¯¹ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>çš„è¿‘ä¼¼ã€‚å¯æƒœæˆ‘ä»¬è¿˜æ— æ³•ç›´æ¥å¯¹<span class="math inline">\(L\)</span>æ±‚æœ€å¤§åŒ–ï¼ŒåŸå› æ˜¯æˆ‘ä»¬ä¸çŸ¥é“åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_{\pi}(s_t,a_t)\)</span>ã€‚è§£å†³æ–¹æ³•æ˜¯åšä¸¤æ¬¡è¿‘ä¼¼ï¼š</p><p><span class="math inline">\(Q_{\pi}(s_t, a_t) \LongrightarrowQ_{\pi_{\text{old}}}(s_t, a_t) \Longrightarrow u_t.\)</span></p><p>å…¬å¼ä¸­<span class="math inline">\(Q_{\pi}\)</span>ä¸­çš„ç­–ç•¥æ˜¯<span class="math inline">\(\pi(a_t | s_t; \theta)\)</span>, è€Œ<span class="math inline">\(Q_{\pi_{\text{old}}}\)</span>ä¸­çš„ç­–ç•¥åˆ™æ˜¯æ—§ç­–ç•¥<span class="math inline">\(\pi(a_t | s_t;\theta_{\text{now}})\)</span>ã€‚æˆ‘ä»¬ç”¨æ—§ç­–ç•¥<span class="math inline">\(\pi(a_t | s_t;\theta_{\text{now}})\)</span>ç”Ÿæˆè½¨è¿¹<span class="math inline">\(\{(s_j,a_j, r_j, s_{j+1})\}_{j=1}^n\)</span>ã€‚æ‰€ä»¥æŠ˜æ‰£å›æŠ¥</p><p><span class="math inline">\(u_t = r_t + \gamma \cdot r_{t+1} +\gamma^2 \cdot r_{t+2} + \cdots + \gamma^{n-t} \cdot r_n\)</span></p><p>æ˜¯å¯¹<span class="math inline">\(Q_{\pi_{\text{old}}}\)</span>çš„è¿‘ä¼¼ï¼Œè€Œæœªå¿…æ˜¯å¯¹<span class="math inline">\(Q_{\pi}\)</span>çš„è¿‘ä¼¼ã€‚ä»…å½“<span class="math inline">\(\theta\)</span>æ¥è¿‘<span class="math inline">\(\theta_{\text{now}}\)</span>çš„æ—¶å€™ï¼Œ<span class="math inline">\(u_t\)</span>æ‰æ˜¯<span class="math inline">\(Q_{\pi}\)</span>çš„æœ‰æ•ˆè¿‘ä¼¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦å¼ºè°ƒç½®ä¿¡åŸŸï¼Œå³<span class="math inline">\(\theta\)</span>åœ¨<span class="math inline">\(\theta_{\text{now}}\)</span>çš„é‚»åŸŸä¸­ã€‚</p><p>æ‹¿<span class="math inline">\(u_t\)</span>æ›¿ä»£<span class="math inline">\(Q_{\pi}(s_t, a_t)\)</span>,é‚£ä¹ˆå…¬å¼ä¸­çš„<span class="math inline">\(L(\theta | \theta_{\text{now}})\)</span>å˜æˆäº†</p><p><span class="math inline">\(\tilde{L}(\theta | \theta_{\text{now}}) =\frac{1}{n} \sum_{t=1}^{n} \frac{\pi(a_t | s_t; \theta)}{\pi(a_t | s_t;\theta_{\text{now}})} \cdot u_t.\)</span></p><p>æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠç›®æ ‡å‡½æ•°<span class="math inline">\(J\)</span>è¿‘ä¼¼æˆ<span class="math inline">\(L\)</span>,ç„¶ååˆæŠŠ<span class="math inline">\(L\)</span>è¿‘ä¼¼æˆ<span class="math inline">\(\tilde{L}\)</span>ã€‚åœ¨ç¬¬äºŒæ­¥è¿‘ä¼¼ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å‡è®¾<span class="math inline">\(\theta\)</span>æ¥è¿‘<span class="math inline">\(\theta_{\text{now}}\)</span>ã€‚</p><p><strong>ç¬¬äºŒæ­¥â€”â€”æœ€å¤§åŒ–</strong>ï¼š</p><p>TRPO æŠŠå…¬å¼ ä¸­çš„<span class="math inline">\(\tilde{L}(\theta |\theta_{\text{now}})\)</span>ä½œä¸ºå¯¹ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>çš„è¿‘ä¼¼ï¼Œç„¶åæ±‚è§£è¿™ä¸ªå¸¦çº¦æŸçš„æœ€å¤§åŒ–é—®é¢˜ï¼š</p><p><span class="math inline">\(\max_{\theta} \tilde{L}(\theta |\theta_{\text{now}}); \quad \text{s.t.} \quad \theta \in\mathcal{N}(\theta_{\text{now}}).\)</span></p><p>å…¬å¼ä¸­çš„<span class="math inline">\(\mathcal{N}(\theta_{\text{now}})\)</span>æ˜¯ç½®ä¿¡åŸŸï¼Œå³<span class="math inline">\(\theta_{\text{now}}\)</span>çš„ä¸€ä¸ªé‚»åŸŸã€‚è¯¥ç”¨ä»€ä¹ˆæ ·çš„ç½®ä¿¡åŸŸå‘¢ï¼Ÿ</p><ul><li>ä¸€ç§æ–¹æ³•æ˜¯ç”¨ä»¥<span class="math inline">\(\theta_{\text{now}}\)</span>ä¸ºçƒå¿ƒã€ä»¥<span class="math inline">\(\Delta\)</span>ä¸ºåŠå¾„çš„çƒä½œä¸ºç½®ä¿¡åŸŸã€‚è¿™æ ·çš„è¯ï¼Œå…¬å¼å°±å˜æˆ</li></ul><p><span class="math inline">\(\max_{\theta} \tilde{L}(\theta |\theta_{\text{now}}); \quad \text{s.t.} \quad \|\theta -\theta_{\text{now}}\|_2 \leq \Delta.\)</span></p><ul><li>å¦ä¸€ç§æ–¹æ³•æ˜¯ç”¨ KL æ•£åº¦è¡¡é‡ä¸¤ä¸ªæ¦‚ç‡è´¨é‡å‡½æ•°â€”â€”<span class="math inline">\(\pi(\cdot | s_i;\theta_{\text{now}})\)</span>å’Œ<span class="math inline">\(\pi(\cdot |s_i; \theta)\)</span>â€”â€” çš„è·ç¦»ã€‚ä¸¤ä¸ªæ¦‚ç‡è´¨é‡å‡½æ•°åŒºåˆ«è¶Šå¤§ï¼Œå®ƒä»¬çš„ KLæ•£åº¦å°±è¶Šå¤§ã€‚åä¹‹ï¼Œå¦‚æœ<span class="math inline">\(\theta\)</span>å¾ˆæ¥è¿‘<span class="math inline">\(\theta_{\text{now}}\)</span>,é‚£ä¹ˆä¸¤ä¸ªæ¦‚ç‡è´¨é‡å‡½æ•°å°±è¶Šæ¥è¿‘ã€‚ç”¨KL æ•£åº¦çš„è¯ï¼Œå…¬å¼å°±å˜æˆ</li></ul><p><span class="math inline">\(\max_{\theta} \tilde{L}(\theta |\theta_{\text{now}}); \quad \text{s.t.} \quad \frac{1}{t} \sum_{i=1}^{t}\text{KL}[\pi(\cdot | s_i; \theta_{\text{now}}) \| \pi(\cdot | s_i;\theta)] \leq \Delta.\)</span></p><p>ç”¨çƒä½œä¸ºç½®ä¿¡åŸŸçš„å¥½å¤„æ˜¯ç½®ä¿¡åŸŸæ˜¯ç®€å•çš„å½¢çŠ¶ï¼Œæ±‚è§£æœ€å¤§åŒ–é—®é¢˜æ¯”è¾ƒå®¹æ˜“ï¼Œä½†æ˜¯ç”¨çƒåšç½®ä¿¡åŸŸçš„å®é™…æ•ˆæœä¸å¦‚ç”¨KL æ•£åº¦ã€‚</p><p>TRPOçš„ç¬¬äºŒæ­¥â€”æœ€å¤§åŒ–â€”éœ€è¦æ±‚è§£å¸¦çº¦æŸçš„æœ€å¤§åŒ–é—®é¢˜ã€‚æ³¨æ„ï¼Œè¿™ç§é—®é¢˜çš„æ±‚è§£å¹¶ä¸å®¹æ˜“ï¼›ç®€å•çš„æ¢¯åº¦ä¸Šå‡ç®—æ³•å¹¶ä¸èƒ½è§£å¸¦çº¦æŸçš„æœ€å¤§åŒ–é—®é¢˜ã€‚æ•°å€¼ä¼˜åŒ–æ•™æé€šå¸¸æœ‰ä»‹ç»å¸¦çº¦æŸé—®é¢˜çš„æ±‚è§£ï¼Œæœ‰å…´è¶£çš„è¯è‡ªå·±å»é˜…è¯»æ•°å€¼ä¼˜åŒ–æ•™æï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è§£é‡Šå¦‚ä½•æ±‚è§£é—®é¢˜ã€‚è¯»è€…å¯ä»¥è¿™æ ·çœ‹å¾…ä¼˜åŒ–é—®é¢˜ï¼šåªè¦ä½ èƒ½æŠŠä¸€ä¸ªä¼˜åŒ–é—®é¢˜çš„ç›®æ ‡å‡½æ•°å’Œçº¦æŸæ¡ä»¶è§£æåœ°å†™å‡ºæ¥ï¼Œé€šå¸¸ä¼šæœ‰æ•°å€¼ç®—æ³•èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="è®­ç»ƒæµç¨‹">è®­ç»ƒæµç¨‹</h2><p>åœ¨æœ¬èŠ‚çš„æœ€åï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ç”¨ TRPO è®­ç»ƒç­–ç•¥ç½‘ç»œçš„æµç¨‹ã€‚TRPOéœ€è¦é‡å¤åšè¿‘ä¼¼å’Œæœ€å¤§åŒ–è¿™ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol type="1"><li>åšè¿‘ä¼¼â€”â€”æ„é€ å‡½æ•°<span class="math inline">\(\tilde{L}\)</span>è¿‘ä¼¼ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>:<ul><li>è®¾å½“å‰ç­–ç•¥ç½‘ç»œå‚æ•°æ˜¯<span class="math inline">\(\theta_{\text{now}}\)</span>ã€‚ç”¨ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a | s;\theta_{\text{now}})\)</span>æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼Œç©å®Œä¸€å±€æ¸¸æˆï¼Œè®°å½•ä¸‹è½¨è¿¹<span class="math inline">\(s_1, a_1, r_1, s_2, a_2, r_2, \cdots, s_n, a_n,r_n\)</span>.</li><li>å¯¹äºæ‰€æœ‰çš„<span class="math inline">\(t = 1, \cdots, n\)</span>,è®¡ç®—æŠ˜æ‰£å›æŠ¥<span class="math inline">\(u_t = \sum_{k=t}^n \gamma^{k-t}\cdot r_k\)</span>.</li><li>å¾—å‡ºè¿‘ä¼¼å‡½æ•°ï¼š<span class="math inline">\(\tilde{L}(\theta |\theta_{\text{now}}) = \frac{1}{n} \sum_{t=1}^{n} \frac{\pi(a_t | s_t;\theta)}{\pi(a_t | s_t; \theta_{\text{now}})} \cdot u_t.\)</span></li></ul></li><li>æœ€å¤§åŒ–â€”â€”ç”¨æŸç§æ•°å€¼ç®—æ³•æ±‚è§£å¸¦çº¦æŸçš„æœ€å¤§åŒ–é—®é¢˜ï¼š</li></ol><p><span class="math inline">\(\theta_{\text{new}} = \arg\max_{\theta}\tilde{L}(\theta | \theta_{\text{now}}) ; \quad \text{s.t.} \quad\|\theta - \theta_{\text{now}}\|_2 \leq \Delta.\)</span></p><p>æ­¤å¤„çš„çº¦æŸæ¡ä»¶æ˜¯äºŒèŒƒæ•°è·ç¦»ã€‚å¯ä»¥æŠŠå®ƒæ›¿æ¢æˆ KL æ•£åº¦ï¼Œå³å…¬å¼(9.10)ã€‚</p><p>TRPO ä¸­æœ‰ä¸¤ä¸ªéœ€è¦è°ƒçš„è¶…å‚æ•°ï¼šä¸€ä¸ªæ˜¯ç½®ä¿¡åŸŸçš„åŠå¾„<span class="math inline">\(\Delta\)</span>,å¦ä¸€ä¸ªæ˜¯æ±‚è§£æœ€å¤§åŒ–é—®é¢˜çš„æ•°å€¼ç®—æ³•çš„å­¦ä¹ ç‡ã€‚é€šå¸¸æ¥è¯´ï¼Œ<span class="math inline">\(\Delta\)</span>åœ¨ç®—æ³•çš„è¿è¡Œè¿‡ç¨‹ä¸­è¦é€æ¸ç¼©å°ã€‚è™½ç„¶TRPO éœ€è¦è°ƒå‚ï¼Œä½†æ˜¯ TRPOå¯¹è¶…å‚æ•°çš„è®¾ç½®å¹¶ä¸æ•æ„Ÿã€‚å³ä½¿è¶…å‚æ•°è®¾ç½®ä¸å¤Ÿå¥½ï¼ŒTRPOçš„è¡¨ç°ä¹Ÿä¸ä¼šå¤ªå·®ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç­–ç•¥æ¢¯åº¦ç®—æ³•å¯¹è¶…å‚æ•°æ›´æ•æ„Ÿã€‚</p><p>TRPOç®—æ³•çœŸæ­£å®ç°èµ·æ¥å¹¶ä¸å®¹æ˜“ï¼Œä¸»è¦éš¾ç‚¹åœ¨äºç¬¬äºŒæ­¥ä¸€ä¸€æœ€å¤§åŒ–ã€‚ä¸å»ºè®®è¯»è€…è‡ªå·±å»å®ç°TRPOã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7.2 ç¡®å®šç­–ç•¥æ¢¯åº¦ (DPG)</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¡®å®šç­–ç•¥æ¢¯åº¦-dpg">ç¡®å®šç­–ç•¥æ¢¯åº¦ (DPG)</h1><p>ç¡®å®šç­–ç•¥æ¢¯åº¦ (deterministic policy gradient, DPG)æ˜¯æœ€å¸¸ç”¨çš„è¿ç»­æ§åˆ¶æ–¹æ³•ã€‚DPG æ˜¯ä¸€ç§ actor-critic æ–¹æ³•ï¼Œå®ƒæœ‰ä¸€ä¸ªç­–ç•¥ç½‘ç»œ(æ¼”å‘˜), ä¸€ä¸ªä»·å€¼ç½‘ç»œ (è¯„å§”)ã€‚ç­–ç•¥ç½‘ç»œæ§åˆ¶æ™ºèƒ½ä½“åšè¿åŠ¨ï¼Œå®ƒåŸºäºçŠ¶æ€<span class="math inline">\(s\)</span>åšå‡ºåŠ¨ä½œ<span class="math inline">\(a\)</span>ã€‚ä»·å€¼ç½‘ç»œä¸æ§åˆ¶æ™ºèƒ½ä½“ï¼Œåªæ˜¯åŸºäºçŠ¶æ€<span class="math inline">\(s\)</span>ç»™åŠ¨ä½œ<span class="math inline">\(a\)</span>æ‰“åˆ†ï¼Œä»è€ŒæŒ‡å¯¼ç­–ç•¥ç½‘ç»œåšå‡ºæ”¹è¿›ã€‚å›¾ 10.2æ˜¯ä¸¤ä¸ªç¥ç»ç½‘ç»œçš„å…³ç³»ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733276393148-f6ec8fbe-9457-4d14-a32c-78836eed2d46.png"></p><h1 id="ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œ">ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œ</h1><p>æœ¬èŠ‚çš„ç­–ç•¥ç½‘ç»œä¸åŒäºå‰é¢ç« èŠ‚çš„ç­–ç•¥ç½‘ç»œã€‚åœ¨ä¹‹å‰ç« èŠ‚é‡Œï¼Œç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>æ˜¯ä¸€ä¸ªæ¦‚ç‡è´¨é‡å‡½æ•°ï¼Œå®ƒè¾“å‡ºçš„æ˜¯æ¦‚ç‡å€¼ã€‚æœ¬èŠ‚çš„ç¡®å®šç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>çš„è¾“å‡ºæ˜¯<span class="math inline">\(d\)</span>ç»´çš„å‘é‡<span class="math inline">\(a\)</span>,ä½œä¸ºåŠ¨ä½œã€‚ä¸¤ç§ç­–ç•¥ç½‘ç»œä¸€ä¸ªæ˜¯éšæœºçš„ï¼Œä¸€ä¸ªæ˜¯ç¡®å®šæ€§çš„ï¼š</p><ul><li>ä¹‹å‰ç« èŠ‚ä¸­çš„ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>å¸¦æœ‰éšæœºæ€§ï¼šç»™å®šçŠ¶æ€<span class="math inline">\(s\)</span>, ç­–ç•¥ç½‘ç»œè¾“å‡ºçš„æ˜¯ç¦»æ•£åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼›</li><li>æœ¬èŠ‚çš„ç¡®å®šç­–ç•¥ç½‘ç»œæ²¡æœ‰éšæœºæ€§ï¼šå¯¹äºç¡®å®šçš„çŠ¶æ€<span class="math inline">\(s\)</span>, ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu\)</span>è¾“å‡ºçš„åŠ¨ä½œ<span class="math inline">\(a\)</span>æ˜¯ç¡®å®šçš„ã€‚åŠ¨ä½œ<span class="math inline">\(a\)</span>ç›´æ¥æ˜¯<span class="math inline">\(\mu\)</span>çš„è¾“å‡ºï¼Œè€ŒééšæœºæŠ½æ ·å¾—åˆ°çš„ã€‚</li></ul><p>ç¡®å®šç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu\)</span>çš„ç»“æ„å¦‚å›¾ 10.3æ‰€ç¤ºã€‚å¦‚æœè¾“å…¥çš„çŠ¶æ€<span class="math inline">\(s\)</span>æ˜¯ä¸ªçŸ©é˜µæˆ–è€…å¼ é‡(ä¾‹å¦‚å›¾ç‰‡ã€è§†é¢‘),é‚£ä¹ˆ<span class="math inline">\(\mu\)</span>å°±ç”±è‹¥å¹²å·ç§¯å±‚ã€å…¨è¿æ¥å±‚ç­‰ç»„æˆã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733277234294-77dea5b6-056c-420c-b568-9bdfd8e824e5.png"></p><p>ç¡®å®šç­–ç•¥å¯ä»¥çœ‹åšæ˜¯éšæœºç­–ç•¥çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚ç¡®å®šç­–ç•¥<span class="math inline">\(\mu(s;\theta)\)</span>çš„è¾“å‡ºæ˜¯<span class="math inline">\(d\)</span>ç»´å‘é‡ï¼Œå®ƒçš„ç¬¬<span class="math inline">\(i\)</span>ä¸ªå…ƒç´ è®°ä½œ<span class="math inline">\(\hat{\mu}_i=[\mu(s;\theta)]_i\)</span>ã€‚å®šä¹‰ä¸‹é¢è¿™ä¸ªéšæœºç­–ç•¥ï¼š</p><p><span class="math inline">\(\pi(a|s;\theta,\sigma)=\prod_{i=1}^d\frac{1}{\sqrt{6.28}\sigma_i}\cdot\exp\left(-\frac{[a_i-\hat{\mu}_i]^2}{2\sigma_i^2}\right).\quad{(10.1)}\)</span></p><p>è¿™ä¸ªéšæœºç­–ç•¥æ˜¯å‡å€¼ä¸º<span class="math inline">\(\mu(s;\theta)\)</span>ã€åæ–¹å·®çŸ©é˜µä¸º<span class="math inline">\(\text{diag}(\sigma_1,\cdots,\sigma_d)\)</span>çš„å¤šå…ƒæ­£æ€åˆ†å¸ƒã€‚æœ¬èŠ‚çš„ç¡®å®šç­–ç•¥å¯ä»¥çœ‹åšæ˜¯ä¸Šè¿°éšæœºç­–ç•¥åœ¨<span class="math inline">\(\sigma=[\sigma_1,\cdots,\sigma_d]\)</span>ä¸ºå…¨é›¶å‘é‡æ—¶çš„ç‰¹ä¾‹ã€‚</p><p>æœ¬èŠ‚çš„ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>æ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>çš„è¿‘ä¼¼ã€‚ä»·å€¼ç½‘ç»œçš„ç»“æ„å¦‚å›¾10.4 æ‰€ç¤ºã€‚ä»·å€¼ç½‘ç»œçš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>å’ŒåŠ¨ä½œ<span class="math inline">\(a\)</span>,è¾“å‡ºçš„ä»·å€¼<span class="math inline">\(\hat{q}=q(s,a;w)\)</span>æ˜¯ä¸ªå®æ•°ï¼Œå¯ä»¥åæ˜ åŠ¨ä½œçš„å¥½åï¼›åŠ¨ä½œ<span class="math inline">\(a\)</span>è¶Šå¥½ï¼Œåˆ™ä»·å€¼<span class="math inline">\(\hat{q}\)</span>å°±è¶Šå¤§ã€‚æ‰€ä»¥ä»·å€¼ç½‘ç»œå¯ä»¥è¯„ä»·ç­–ç•¥ç½‘ç»œçš„è¡¨ç°ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œä»·å€¼ç½‘ç»œå¸®åŠ©è®­ç»ƒç­–ç•¥ç½‘ç»œï¼›åœ¨è®­ç»ƒç»“æŸä¹‹åï¼Œä»·å€¼ç½‘ç»œå°±è¢«ä¸¢å¼ƒï¼Œç”±ç­–ç•¥ç½‘ç»œæ§åˆ¶æ™ºèƒ½ä½“ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733277392319-e425876e-ca82-4235-8d9e-8ade3dde110b.png"></p><h1 id="ç®—æ³•æ¨å¯¼">ç®—æ³•æ¨å¯¼</h1><h2 id="ç”¨è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒ">ç”¨è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒï¼š</h2><p>æœ¬èŠ‚çš„ç¡®å®šç­–ç•¥ç½‘ç»œå±äºå¼‚ç­–ç•¥(off-policy) æ–¹æ³•ï¼Œå³è¡Œä¸ºç­–ç•¥ (behaviorpolicy) å¯ä»¥ä¸åŒäºç›®æ ‡ç­–ç•¥ (target policy)ã€‚ç›®æ ‡ç­–ç•¥å³ç¡®å®šç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu(s;\theta_{now})\)</span>,å…¶ä¸­<span class="math inline">\(\theta_{now}\)</span>æ˜¯ç­–ç•¥ç½‘ç»œæœ€æ–°çš„å‚æ•°ã€‚è¡Œä¸ºç­–ç•¥å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œæ¯”å¦‚</p><p><span class="math inline">\(a=\mu(s;\theta_{old})+\epsilon\)</span>.</p><p>å…¬å¼çš„æ„æ€æ˜¯è¡Œä¸ºç­–ç•¥å¯ä»¥ç”¨è¿‡æ—¶çš„ç­–ç•¥ç½‘ç»œå‚æ•°ï¼Œè€Œä¸”å¯ä»¥å¾€åŠ¨ä½œä¸­åŠ å…¥å™ªå£°<span class="math inline">\(\epsilon \in\mathbb{R}^d\)</span>ã€‚å¼‚ç­–ç•¥çš„å¥½å¤„åœ¨äºå¯ä»¥æŠŠæ”¶é›†ç»éªŒä¸è®­ç»ƒç¥ç»ç½‘ç»œåˆ†å‰²å¼€ï¼›æŠŠæ”¶é›†åˆ°çš„ç»éªŒå­˜å…¥ç»éªŒå›æ”¾æ•°ç»„(replaybuffer),åœ¨åšè®­ç»ƒçš„æ—¶å€™é‡å¤åˆ©ç”¨æ”¶é›†åˆ°çš„ç»éªŒã€‚è§å›¾ 10.5ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733277422761-a61031d2-0c98-4cba-903e-d7dcefa69533.png"></p><p>ç”¨è¡Œä¸ºç­–ç•¥æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼ŒæŠŠæ™ºèƒ½ä½“çš„è½¨è¿¹(trajectory)æ•´ç†æˆ<span class="math inline">\((s_t,a_t,r_t,s_{t+1})\)</span>è¿™æ ·çš„å››å…ƒç»„ï¼Œå­˜å…¥ç»éªŒå›æ”¾æ•°ç»„ã€‚åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œéšæœºä»æ•°ç»„ä¸­æŠ½å–ä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j,a_j,r_j,s_{j+1})\)</span>ã€‚åœ¨è®­ç»ƒç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>çš„æ—¶å€™ï¼Œåªç”¨åˆ°çŠ¶æ€<span class="math inline">\(s_j\)</span>ã€‚åœ¨è®­ç»ƒä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>çš„æ—¶å€™ï¼Œè¦ç”¨åˆ°å››å…ƒç»„ä¸­å…¨éƒ¨å››ä¸ªå…ƒç´ ï¼š<span class="math inline">\(s_j,a_j,r_j,s_{j+1}\)</span>ã€‚</p><h2 id="è®­ç»ƒç­–ç•¥ç½‘ç»œ">è®­ç»ƒç­–ç•¥ç½‘ç»œï¼š</h2><p>é¦–å…ˆé€šä¿—è§£é‡Šè®­ç»ƒç­–ç•¥ç½‘ç»œçš„åŸç†ã€‚å¦‚å›¾ 10.6 æ‰€ç¤ºï¼Œç»™å®šçŠ¶æ€<span class="math inline">\(s\)</span>,ç­–ç•¥ç½‘ç»œè¾“å‡ºä¸€ä¸ªåŠ¨ä½œ<span class="math inline">\(a=\mu(s;\theta)\)</span>,ç„¶åä»·å€¼ç½‘ç»œä¼šç»™<span class="math inline">\(a\)</span>æ‰“ä¸€ä¸ªåˆ†æ•°ï¼š<span class="math inline">\(\hat{q}=q(s,a;w)\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733277473657-212a4de1-9f2c-44a7-9d15-d3b4a3506952.png"></p><p>å‚æ•°<span class="math inline">\(\theta\)</span>å½±å“<span class="math inline">\(a\)</span>, ä»è€Œå½±å“<span class="math inline">\(\hat{q}\)</span>ã€‚åˆ†æ•°<span class="math inline">\(\hat{q}\)</span>å¯ä»¥åæ˜ å‡º<span class="math inline">\(\theta\)</span>çš„å¥½åç¨‹åº¦ã€‚è®­ç»ƒç­–ç•¥ç½‘ç»œçš„ç›®æ ‡å°±æ˜¯æ”¹è¿›å‚æ•°<span class="math inline">\(\theta\)</span>,ä½¿<span class="math inline">\(\hat{q}\)</span>å˜å¾—æ›´å¤§ã€‚æŠŠç­–ç•¥ç½‘ç»œçœ‹åšæ¼”å‘˜ï¼Œä»·å€¼ç½‘ç»œçœ‹åšè¯„å§”ã€‚è®­ç»ƒæ¼”å‘˜(ç­–ç•¥ç½‘ç»œ)çš„ç›®çš„å°±æ˜¯è®©ä»–è¿åˆè¯„å§”(ä»·å€¼ç½‘ç»œ) çš„å–œå¥½ï¼Œæ”¹å˜è‡ªå·±çš„è¡¨æ¼”æŠ€å·§ (å³å‚æ•°<span class="math inline">\(\theta\)</span>), ä½¿å¾—è¯„å§”æ‰“åˆ†<span class="math inline">\(\hat{q}\)</span>çš„å‡å€¼æ›´é«˜ã€‚</p><p>æ ¹æ®ä»¥ä¸Šè§£é‡Šï¼Œæˆ‘ä»¬æ¥æ¨å¯¼ç›®æ ‡å‡½æ•°ã€‚å¦‚æœå½“å‰çŠ¶æ€æ˜¯<span class="math inline">\(s\)</span>, é‚£ä¹ˆä»·å€¼ç½‘ç»œçš„æ‰“åˆ†å°±æ˜¯ï¼š</p><p><span class="math inline">\(q(s,\mu(s;\theta);w)\)</span>ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›æ‰“åˆ†çš„æœŸæœ›å°½é‡é«˜ï¼Œæ‰€ä»¥æŠŠç›®æ ‡å‡½æ•°å®šä¹‰ä¸ºæ‰“åˆ†çš„æœŸæœ›ï¼š</p><p><span class="math inline">\(J(\theta)=\mathbb{E}_S[q(S,\mu(S;\theta);w)]\)</span>ã€‚</p><p>å…³äºçŠ¶æ€<span class="math inline">\(S\)</span>æ±‚æœŸæœ›æ¶ˆé™¤æ‰äº†<span class="math inline">\(S\)</span>çš„å½±å“ï¼›ä¸ç®¡é¢å¯¹ä»€ä¹ˆæ ·çš„çŠ¶æ€<span class="math inline">\(S\)</span>,ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)éƒ½åº”è¯¥åšå‡ºå¾ˆå¥½çš„åŠ¨ä½œï¼Œä½¿å¾—å¹³å‡åˆ†<span class="math inline">\(J(\theta)\)</span>å°½é‡é«˜ã€‚ç­–ç•¥ç½‘ç»œçš„å­¦ä¹ å¯ä»¥å»ºæ¨¡æˆè¿™æ ·ä¸€ä¸ªæœ€å¤§åŒ–é—®é¢˜ï¼š</p><p><span class="math inline">\(\max_{\theta}J(\theta)\)</span>ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬åªè®­ç»ƒç­–ç•¥ç½‘ç»œï¼Œæ‰€ä»¥æœ€å¤§åŒ–é—®é¢˜ä¸­çš„ä¼˜åŒ–å˜é‡æ˜¯ç­–ç•¥ç½‘ç»œçš„å‚æ•°<span class="math inline">\(\theta\)</span>,è€Œä»·å€¼ç½‘ç»œçš„å‚æ•°<span class="math inline">\(w\)</span>è¢«å›ºå®šä½ã€‚</p><p>å¯ä»¥ç”¨æ¢¯åº¦ä¸Šå‡æ¥å¢å¤§<span class="math inline">\(J(\theta)\)</span>ã€‚æ¯æ¬¡ç”¨éšæœºå˜é‡<span class="math inline">\(S\)</span>çš„ä¸€ä¸ªè§‚æµ‹å€¼(è®°ä½œ<span class="math inline">\(s_j\)</span>) æ¥è®¡ç®—æ¢¯åº¦ï¼š<span class="math inline">\(g_j \triangleq\nabla_{\theta}q(s_j,\mu(s_j;\theta);w)\)</span>ã€‚</p><p>å®ƒæ˜¯<span class="math inline">\(\nabla_{\theta}J(\theta)\)</span>çš„æ— åä¼°è®¡ã€‚<span class="math inline">\(g_j\)</span>å«åšç¡®å®šç­–ç•¥æ¢¯åº¦ (deterministic policygradient), ç¼©å†™DPGã€‚</p><p>å¯ä»¥ç”¨é“¾å¼æ³•åˆ™æ±‚å‡ºæ¢¯åº¦<span class="math inline">\(g_j\)</span>ã€‚å¤ä¹ ä¸€ä¸‹é“¾å¼æ³•åˆ™ã€‚å¦‚æœæœ‰è¿™æ ·çš„å‡½æ•°å…³ç³»<span class="math inline">\(\theta \to a \to q\)</span>,é‚£ä¹ˆ<span class="math inline">\(q\)</span>å…³äº<span class="math inline">\(\theta\)</span>çš„å¯¼æ•°å¯ä»¥å†™æˆ</p><p><span class="math inline">\(\frac{\partial q}{\partial \theta} =\frac{\partial a}{\partial \theta} \cdot \frac{\partial q}{\partiala}\)</span>ã€‚</p><p>ä»·å€¼ç½‘ç»œçš„è¾“å‡ºä¸<span class="math inline">\(\theta\)</span>çš„å‡½æ•°å…³ç³»å¦‚å›¾ 10.6æ‰€ç¤ºã€‚åº”ç”¨é“¾å¼æ³•åˆ™ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸‹é¢çš„å®šç†ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733278437394-8e56538f-e36f-46ab-ad4b-dd94dcb05a51.png"></p><p>å®šç† 10.1. ç¡®å®šç­–ç•¥æ¢¯åº¦</p><p><span class="math inline">\(\nabla_{\theta}q(s_j,\mu(s_j;\theta);w)=\nabla_{\theta}\mu(s_j;\theta)\cdot \nabla_a q(s_j,\hat{a}_j;w), \quad \text{å…¶ä¸­} \quad\hat{a}_j=\mu(s_j;\theta).\)</span></p><p>ç”±æ­¤æˆ‘ä»¬å¾—åˆ°æ›´æ–°<span class="math inline">\(\theta\)</span>çš„ç®—æ³•ã€‚æ¯æ¬¡ä»ç»éªŒå›æ”¾æ•°ç»„é‡ŒéšæœºæŠ½å–ä¸€ä¸ªçŠ¶æ€ï¼Œè®°ä½œ<span class="math inline">\(s_j\)</span>ã€‚è®¡ç®—<span class="math inline">\(\hat{a}_j=\mu(s_j;\theta)\)</span>ã€‚ç”¨æ¢¯åº¦ä¸Šå‡æ›´æ–°ä¸€æ¬¡<span class="math inline">\(\theta\)</span>:</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\nabla_{\theta}\mu(s_j;\theta) \cdot \nabla_aq(s_j,\hat{a}_j;w).\)</span></p><p>æ­¤å¤„çš„<span class="math inline">\(\beta\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒã€‚è¿™æ ·åšæ¢¯åº¦ä¸Šå‡ï¼Œå¯ä»¥é€æ¸è®©ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å¢å¤§ï¼Œä¹Ÿå°±æ˜¯è®©è¯„å§”ç»™æ¼”å‘˜çš„å¹³å‡æ‰“åˆ†æ›´é«˜ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733279212098-876f0c1c-0a9e-4abe-b074-c89d4c1be535.png"></p><p>è§£å†³åŠæ³•ï¼š</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733279236156-29520efa-80d5-4f6b-9fed-ebee63fc47d5.png"></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733279312061-79ba30b5-1cc4-4573-9e0e-df095537af29.png"></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733279390737-2cd4e7b6-a4ed-4ca9-80f5-d42b9aea27f4.png"></p><h2 id="è®­ç»ƒä»·å€¼ç½‘ç»œ">è®­ç»ƒä»·å€¼ç½‘ç»œï¼š</h2><p>é¦–å…ˆé€šä¿—è§£é‡Šè®­ç»ƒä»·å€¼ç½‘ç»œçš„åŸç†ã€‚è®­ç»ƒä»·å€¼ç½‘ç»œçš„ç›®æ ‡æ˜¯è®©ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>çš„é¢„æµ‹è¶Šæ¥è¶Šæ¥è¿‘çœŸå®ä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>ã€‚å¦‚æœæŠŠä»·å€¼ç½‘ç»œçœ‹åšè¯„å§”ï¼Œé‚£ä¹ˆè®­ç»ƒè¯„å§”çš„ç›®æ ‡å°±æ˜¯è®©ä»–çš„æ‰“åˆ†è¶Šæ¥è¶Šå‡†ç¡®ã€‚æ¯ä¸€è½®è®­ç»ƒéƒ½è¦ç”¨åˆ°ä¸€ä¸ªå®é™…è§‚æµ‹çš„å¥–åŠ±<span class="math inline">\(r\)</span>,å¯ä»¥æŠŠ<span class="math inline">\(r\)</span>çœ‹åšâ€œçœŸç†â€,ç”¨å®ƒæ¥æ ¡å‡†è¯„å§”çš„æ‰“åˆ†ã€‚</p><p>è®­ç»ƒä»·å€¼ç½‘ç»œè¦ç”¨ TD ç®—æ³•ã€‚è¿™é‡Œçš„ TD ç®—æ³•ä¸ä¹‹å‰å­¦è¿‡çš„æ ‡å‡† actor-criticç±»ä¼¼ï¼Œéƒ½æ˜¯è®©ä»·å€¼ç½‘ç»œå»æ‹Ÿåˆ TDç›®æ ‡ã€‚æ¯æ¬¡ä»ç»éªŒå›æ”¾æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªå››å…ƒç»„<span class="math inline">\((s_j,a_j,r_j,s_{j+1})\)</span>,ç”¨å®ƒæ›´æ–°ä¸€æ¬¡å‚æ•°<span class="math inline">\(w\)</span>ã€‚é¦–å…ˆè®©ä»·å€¼ç½‘ç»œåšé¢„æµ‹ï¼š</p><p><span class="math inline">\(\hat{q}_j=q(s_j,a_j;w) \quad \text{å’Œ}\quad \hat{q}_{j+1}=q(s_{j+1},\mu(s_{j+1};\theta);w)\)</span></p><p>è®¡ç®— TD ç›®æ ‡<span class="math inline">\(\hat{y}_j=r_j+\gamma \cdot\hat{g}_{j+1}\)</span>.å®šä¹‰æŸå¤±å‡½æ•°</p><p><span class="math inline">\(L(w)=\frac{1}{2}\left[q(s_j,a_j;w)-\hat{y}_j\right]^2,\)</span></p><p>è®¡ç®—æ¢¯åº¦</p><p><span class="math inline">\(\nabla_{w} L(w) =\underbrace{\left(\hat{q}_{j} - \hat{y}_{j}\right)}_{\text{TDè¯¯å·®}\delta_{j}} \cdot \nabla_{w} q\left(s_{j}, a_{j}; w\right),\)</span></p><p>åšä¸€è½®æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°<span class="math inline">\(w\)</span>:</p><p><span class="math inline">\(w \leftarrow w - \alpha \cdot \nabla_{w}L(w)\)</span></p><p>è¿™æ ·å¯ä»¥è®©æŸå¤±å‡½æ•°<span class="math inline">\(L(w)\)</span>å‡å°ï¼Œä¹Ÿå°±æ˜¯è®©ä»·å€¼ç½‘ç»œçš„é¢„æµ‹<span class="math inline">\(\hat{q}_j=q(s,a;w)\)</span>æ›´æ¥è¿‘ TD ç›®æ ‡<span class="math inline">\(\hat{y}_j\)</span>ã€‚å…¬å¼ä¸­çš„<span class="math inline">\(\alpha\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒã€‚</p><p><strong>è®­ç»ƒæµç¨‹</strong>ï¼š<br>åšè®­ç»ƒçš„æ—¶å€™ï¼Œå¯ä»¥åŒæ—¶å¯¹ä»·å€¼ç½‘ç»œå’Œç­–ç•¥ç½‘ç»œåšè®­ç»ƒã€‚æ¯æ¬¡ä»ç»éªŒå›æ”¾æ•°ç»„ä¸­æŠ½å–ä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j,a_j,r_j,s_{j+1})\)</span>ã€‚æŠŠç¥ç»ç½‘ç»œå½“å‰å‚æ•°è®°ä½œ<span class="math inline">\(w_{now}\)</span>å’Œ<span class="math inline">\(\theta_{now}\)</span>ã€‚æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ›´æ–°ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œï¼š</p><ol type="1"><li>è®©ç­–ç•¥ç½‘ç»œåšé¢„æµ‹ï¼š<span class="math inline">\(\hat{a}_j=\mu(s_j;\theta_{now})\)</span>å’Œ<span class="math inline">\(\hat{a}_{j+1}=\mu(s_{j+1};\theta_{now})\)</span>.</li><li>è®©ä»·å€¼ç½‘ç»œåšé¢„æµ‹ï¼š<span class="math inline">\(\hat{q}_j=q(s_j,a_j;w_{now})\)</span>å’Œ<span class="math inline">\(\hat{q}_{j+1}=q(s_{j+1},\hat{a}_{j+1};w_{now})\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_j=r_j+\gamma \cdot\hat{q}_{j+1}\)</span>å’Œ<span class="math inline">\(\delta_j=\hat{q}_j-\hat{y}_j\)</span>.</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œï¼š<span class="math inline">\(w_{new}=w_{now}-\alpha\cdot \delta_j \cdot \nabla_w q(s_j,a_j;w_{now})\)</span>.</li><li>æ›´æ–°ç­–ç•¥ç½‘ç»œï¼š<span class="math inline">\(\theta_{new}=\theta_{now}+\beta \cdot\nabla_{\theta}\mu(s_j;\theta_{now}) \cdot \nabla_aq(s_j,\hat{a}j;w_{now})\)</span>.</li></ol><p>åœ¨å®è·µä¸­ï¼Œä¸Šè¿°ç®—æ³•çš„è¡¨ç°å¹¶ä¸å¥½ï¼›è¯»è€…åº”å½“é‡‡ç”¨åé¢ä»‹ç»çš„æŠ€å·§è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733277619102-cbf150fb-2913-49e7-afa0-e8d5499baa46.png"></p><h1 id="æ·±å…¥åˆ†æ-dpg">æ·±å…¥åˆ†æ DPG</h1><p>ä¸Šä¸€èŠ‚ä»‹ç»çš„ DPG æ˜¯ä¸€ç§â€œå››ä¸åƒâ€çš„æ–¹æ³•ã€‚DPGä¹çœ‹èµ·æ¥å¾ˆåƒå‰é¢ä»‹ç»çš„ç­–ç•¥å­¦ä¹ æ–¹æ³•ï¼Œå› ä¸º DPG çš„ç›®çš„æ˜¯å­¦ä¹ ä¸€ä¸ªç­–ç•¥<span class="math inline">\(\mu\)</span>,è€Œä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>åªèµ·è¾…åŠ©ä½œç”¨ã€‚ç„¶è€Œ DPG åˆå¾ˆåƒä¹‹å‰ä»‹ç»çš„DQN, ä¸¤è€…éƒ½æ˜¯å¼‚ç­–ç•¥ (Off-policy), è€Œä¸”ä¸¤è€…å­˜åœ¨é«˜ä¼°é—®é¢˜ã€‚é‰´äº DPGçš„é‡è¦æ€§ï¼Œæˆ‘ä»¬æ›´æ·±å…¥åˆ†æ DPGã€‚</p><h2 id="ä»ç­–ç•¥å­¦ä¹ çš„è§’åº¦çœ‹å¾…-dpg">ä»ç­–ç•¥å­¦ä¹ çš„è§’åº¦çœ‹å¾… DPG</h2><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733280642243-5fa19640-5b83-438e-aaee-e64bff97fa84.png"></p><p>ç­”æ¡ˆæ˜¯åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>ã€‚ä¸Šä¸€èŠ‚ DPGçš„è®­ç»ƒæµç¨‹ä¸­ï¼Œæ›´æ–°ä»·å€¼ç½‘ç»œç”¨åˆ° TD ç›®æ ‡ï¼š<span class="math inline">\(\hat{y}_j=r_j+\gamma \cdotq(s_{j+1},\mu(s_{j+1};\theta_{now});w_{now})\)</span>ã€‚</p><p>å¾ˆæ˜¾ç„¶ï¼Œå½“å‰çš„ç­–ç•¥<span class="math inline">\(\mu(s;\theta_{now})\)</span>ä¼šç›´æ¥å½±å“ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>ã€‚ç­–ç•¥ä¸åŒï¼Œå¾—åˆ°çš„ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>å°±ä¸åŒã€‚</p><p>è™½ç„¶ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>é€šå¸¸æ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>çš„è¿‘ä¼¼ï¼Œä½†æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡æ˜¯è®©<span class="math inline">\(q(s,a;w)\)</span>è¶‹è¿‘äºæœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^{\star}(s,a)\)</span>ã€‚å›å¿†ä¸€ä¸‹ï¼Œå¦‚æœ<span class="math inline">\(\pi\)</span>æ˜¯æœ€ä¼˜ç­–ç•¥<span class="math inline">\(\pi^{\star}\)</span>, é‚£ä¹ˆ<span class="math inline">\(Q_{\pi}(s,a)\)</span>å°±ç­‰äº<span class="math inline">\(Q^{\star}(s,a)\)</span>ã€‚è®­ç»ƒ DPG çš„ç›®çš„æ˜¯è®©<span class="math inline">\(\mu(s;\theta)\)</span>è¶‹è¿‘äºæœ€ä¼˜ç­–ç•¥<span class="math inline">\(\pi^{\star}\)</span>é‚£ä¹ˆç†æƒ³æƒ…å†µä¸‹ï¼Œ<span class="math inline">\(q(s,a;w)\)</span>æœ€ç»ˆè¶‹è¿‘äº<span class="math inline">\(Q^{\star}(s,a)\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733280692694-384edfe4-ceed-417b-9fbf-a933c5a2e5a4.png"></p><p>ç­”æ¡ˆæ˜¯ç›®æ ‡ç­–ç•¥<span class="math inline">\(\mu(s;\theta_{now})\)</span>,å› ä¸ºç›®æ ‡ç­–ç•¥å¯¹ä»·å€¼ç½‘ç»œçš„å½±å“å¾ˆå¤§ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œè¡Œä¸ºç­–ç•¥å¯¹ä»·å€¼ç½‘ç»œæ²¡æœ‰å½±å“ã€‚æˆ‘ä»¬ç”¨TD ç®—æ³•è®­ç»ƒä»·å€¼ç½‘ç»œï¼ŒTD ç®—æ³•çš„ç›®çš„åœ¨äºé¼“åŠ±ä»·å€¼ç½‘ç»œçš„é¢„æµ‹è¶‹è¿‘äº TDç›®æ ‡ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œ</p><p><span class="math inline">\(q(s_j,a_j;w)=r_j+\gamma \cdotQ(s_{j+1},\mu(s_{j+1};\theta_{now});w_{now}), \quad \forall(s_j,a_j,r_j,s_{j+1}).\)</span></p><p>åœ¨æ”¶é›†ç»éªŒçš„è¿‡ç¨‹ä¸­ï¼Œè¡Œä¸ºç­–ç•¥å†³å®šäº†å¦‚ä½•åŸºäº<span class="math inline">\(s_j\)</span>ç”Ÿæˆ<span class="math inline">\(a_j\)</span>,ç„¶è€Œè¿™ä¸é‡è¦ã€‚ä¸Šé¢çš„å…¬å¼åªå¸Œæœ›ç­‰å¼å·¦è¾¹å»æ‹Ÿåˆç­‰å¼å³è¾¹ï¼Œè€Œä¸åœ¨ä¹<span class="math inline">\(a_j\)</span>æ˜¯å¦‚ä½•ç”Ÿæˆçš„ã€‚</p><h2 id="ä»ä»·å€¼å­¦ä¹ çš„è§’åº¦çœ‹å¾…-dpg">ä»ä»·å€¼å­¦ä¹ çš„è§’åº¦çœ‹å¾… DPG</h2><p>å‡å¦‚æˆ‘ä»¬çŸ¥é“æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^{\star}(s,a;w)\)</span>,æˆ‘ä»¬å¯ä»¥è¿™æ ·åšå†³ç­–ï¼šç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,é€‰æ‹©æœ€å¤§åŒ– Q å€¼çš„åŠ¨ä½œ</p><p><span class="math inline">\(a_t=\arg\max_{a \in A}Q^{\star}(s_t,a)\)</span>.</p><p>DQN è®°ä½œ<span class="math inline">\(Q(s,a;w)\)</span>,å®ƒæ˜¯<span class="math inline">\(Q^{\star}(s,a;w)\)</span>çš„å‡½æ•°è¿‘ä¼¼ã€‚è®­ç»ƒ DQNçš„ç›®çš„æ˜¯è®©<span class="math inline">\(Q(s,a;w)\)</span>è¶‹è¿‘<span class="math inline">\(Q^{\star}(s,a;w)\)</span>,<span class="math inline">\(\forall s \in S, a \in A\)</span>ã€‚åœ¨è®­ç»ƒå¥½ DQNä¹‹åï¼Œå¯ä»¥è¿™æ ·åšå†³ç­–ï¼š</p><p><span class="math inline">\(a_t=\arg\max_{a \in A}Q(s_t,a;w).\)</span></p><p>å¦‚æœåŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>æ˜¯ç¦»æ•£é›†åˆï¼Œé‚£ä¹ˆä¸Šè¿°æœ€å¤§åŒ–å¾ˆå®¹æ˜“å®ç°ã€‚å¯æ˜¯å¦‚æœ<span class="math inline">\(A\)</span>æ˜¯è¿ç»­é›†åˆï¼Œåˆ™å¾ˆéš¾å¯¹<span class="math inline">\(Q\)</span>æ±‚æœ€å¤§åŒ–ã€‚</p><p>å¯ä»¥æŠŠ DPG çœ‹åšå¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^{\star}(s,a)\)</span>çš„å¦ä¸€ç§è¿‘ä¼¼æ–¹å¼ï¼Œç”¨äºè¿ç»­æ§åˆ¶é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›å­¦åˆ°ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>å’Œä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>, ä½¿å¾—</p><p><span class="math inline">\(q(s,\mu(s;\theta);w) \approx \max_{a \inA} Q^{\star}(s,a), \quad \forall s \in S.\)</span></p><p>æˆ‘ä»¬å¯ä»¥æŠŠ<span class="math inline">\(\mu\)</span>å’Œ<span class="math inline">\(q\)</span>çœ‹åšæ˜¯<span class="math inline">\(Q^{\star}\)</span>çš„è¿‘ä¼¼åˆ†è§£ï¼Œè€Œè¿™ç§åˆ†è§£çš„ç›®çš„åœ¨äºæ–¹ä¾¿åšå†³ç­–ï¼š</p><p><span class="math inline">\(a_t = \mu(s_t;\theta) \approx \arg\max_{a\in A} Q^{\star}(s_t,a).\)</span></p><h1 id="dpg-çš„é«˜ä¼°é—®é¢˜">DPG çš„é«˜ä¼°é—®é¢˜</h1><p>åœ¨ä¹‹å‰çš„ç¬”è®° æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆç‹æ ‘æ£®ï¼‰ç¬”è®°08-CSDNåšå®¢ï¼Œæˆ‘ä»¬è®¨è¿‡ DQNçš„é«˜ä¼°é—®é¢˜ï¼šå¦‚æœç”¨ Q å­¦ä¹ ç®—æ³•è®­ç»ƒ DQN, åˆ™ DQNä¼šé«˜ä¼°çœŸå®æœ€ä¼˜ä»·å€¼å‡½æ•°<span class="math inline">\(Q^{\star}\)</span>ã€‚æŠŠDQN è®°ä½œ<span class="math inline">\(Q(s,a;w)\)</span>ã€‚å¦‚æœç”¨ Qå­¦ä¹ ç®—æ³•è®­ç»ƒ DQN, é‚£ä¹ˆ TD ç›®æ ‡æ˜¯</p><p><span class="math inline">\(\hat{y}_j=r_j+\gamma \cdot \max_{a \in A}Q(s_{j+1},a;w).\)</span></p><p>ä¹‹å‰å¾—å‡ºç»“è®ºï¼šå¦‚æœ<span class="math inline">\(Q(s,a;w)\)</span>æ˜¯æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^{\star}(s,a)\)</span>çš„æ— åä¼°è®¡ï¼Œé‚£ä¹ˆ<span class="math inline">\(\hat{y}_j\)</span>æ˜¯å¯¹<span class="math inline">\(Q^{\star}(s_j,a_j)\)</span>çš„é«˜ä¼°ã€‚ç”¨<span class="math inline">\(\hat{y}_j\)</span>ä½œä¸ºç›®æ ‡å»æ›´æ–° DQN, ä¼šå¯¼è‡´<span class="math inline">\(Q(s_j,a_j;w)\)</span>é«˜ä¼°<span class="math inline">\(Q^{\star}(s_j,a_j)\)</span>ã€‚å¦ä¸€ä¸ªç»“è®ºæ˜¯è‡ªä¸¾ä¼šå¯¼è‡´é«˜ä¼°çš„ä¼ æ’­ï¼Œé€ æˆé«˜ä¼°è¶Šæ¥è¶Šä¸¥é‡ã€‚</p><p>DPG ä¹Ÿå­˜åœ¨é«˜ä¼°é—®é¢˜ï¼Œç”¨ä¸Šä¸€èŠ‚çš„ç®—æ³•è®­ç»ƒå‡ºçš„ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>ä¼šé«˜ä¼°çœŸå®åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_{\pi}(s,a)\)</span>ã€‚é€ æˆ DPG é«˜ä¼°çš„åŸå› ä¸ DQNç±»ä¼¼ï¼šç¬¬ä¸€ï¼ŒTDç›®æ ‡æ˜¯å¯¹çœŸå®åŠ¨ä½œä»·å€¼çš„é«˜ä¼°ï¼›ç¬¬äºŒï¼Œè‡ªä¸¾å¯¼è‡´é«˜ä¼°çš„ä¼ æ’­ã€‚ä¸‹é¢å…·ä½“åˆ†æä¸¤ä¸ªåŸå› ï¼›å¦‚æœè¯»è€…ä¸æ„Ÿå…´è¶£ï¼Œåªéœ€è¦è®°ä½ä¸Šè¿°ç»“è®ºå³å¯ï¼Œå¯ä»¥è·³è¿‡ä¸‹é¢çš„å†…å®¹ã€‚</p><p><strong>æœ€å¤§åŒ–é€ æˆé«˜ä¼°</strong>ï¼š<br>è®­ç»ƒç­–ç•¥ç½‘ç»œçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›ç­–ç•¥ç½‘ç»œè®¡ç®—å‡ºçš„åŠ¨ä½œ<span class="math inline">\(\hat{a}=a=\mu(s;\theta)\)</span>èƒ½å¾—åˆ°ä»·å€¼ç½‘ç»œå°½é‡é«˜çš„è¯„ä»·ï¼Œä¹Ÿå°±æ˜¯è®©<span class="math inline">\(q(s,\hat{a};w)\)</span>å°½é‡å¤§ã€‚æˆ‘ä»¬é€šè¿‡æ±‚è§£ä¸‹é¢çš„ä¼˜åŒ–æ¨¡å‹æ¥å­¦ä¹ ç­–ç•¥ç½‘ç»œï¼š</p><p><span class="math inline">\(\theta^{\star}=\operatorname{argmax}_{\theta}\mathbb{E}_S[q(S,\hat{A};w)],\quad \text{s.t.} \quad \hat{A}=\mu(S;\theta).\)</span></p><p>è¿™ä¸ªå…¬å¼çš„æ„æ€æ˜¯<span class="math inline">\(\mu(s;\theta^{\star})\)</span>æ˜¯æœ€ä¼˜çš„ç¡®å®šç­–ç•¥ç½‘ç»œã€‚ä¸Šé¢çš„å…¬å¼ä¸ä¸‹é¢çš„å…¬å¼æ„ä¹‰ç›¸åŒ(è™½ç„¶ä¸ä¸¥æ ¼ç­‰ä»·)ï¼š</p><p><span class="math inline">\(\mu(s;\theta^{\star})=\arg\max_{a \in A}q(s,a;w), \quad \forall s \in S.\)</span></p><p>è¿™ä¸ªå…¬å¼çš„æ„æ€ä¹Ÿæ˜¯<span class="math inline">\(\mu(s;\theta^{\star})\)</span>æ˜¯æœ€ä¼˜çš„ç¡®å®šç­–ç•¥ç½‘ç»œã€‚è®­ç»ƒä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>æ—¶ç”¨çš„ TD ç›®æ ‡æ˜¯</p><p><span class="math inline">\(\begin{align*}\widehat{y}_{j} &amp;= r_{j} + \gamma \cdot q\left(s_{j+1},\mu\left(s_{j+1}; \theta\right); w\right) \\&amp;\approx r_{j} + \gamma \cdot \max_{a_{j+1}} q\left(s_{j+1},a_{j+1}; w\right).\end{align*}\)</span></p><p>æ ¹æ®å‰é¢çš„åˆ†æï¼Œä¸Šé¢å…¬å¼ä¸­çš„<span class="math inline">\(\max\)</span>ä¼šå¯¼è‡´<span class="math inline">\(\hat{y}_j\)</span>é«˜ä¼°çœŸå®åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_{\pi}(s_j,a_j)\)</span>ã€‚åœ¨è®­ç»ƒ<span class="math inline">\(q\)</span>æ—¶ï¼Œæˆ‘ä»¬æŠŠ<span class="math inline">\(\hat{y}_j\)</span>ä½œä¸ºç›®æ ‡ï¼Œé¼“åŠ±ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s_j,a_j;w)\)</span>æ¥è¿‘<span class="math inline">\(\hat{y}_j\)</span>, è¿™ä¼šå¯¼è‡´<span class="math inline">\(q(s_j,a_j;w)\)</span>é«˜ä¼°çœŸå®åŠ¨ä½œä»·å€¼ã€‚</p><p><strong>è‡ªä¸¾é€ æˆåå·®ä¼ æ’­</strong>ï¼š<br>å‰é¢çš„ç¬”è®°ä¸­è®¨è®ºè¿‡è‡ªä¸¾(bootstrapping)é€ æˆåå·®çš„ä¼ æ’­ã€‚</p><p>TD ç›®æ ‡</p><p><span class="math inline">\(\hat{y}_j = r_j + \gamma \cdotq(s_{j+1},\mu(s_{j+1};\theta);w)\)</span></p><p>æ˜¯ç”¨ä»·å€¼ç½‘ç»œç®—å‡ºæ¥çš„ï¼Œè€Œå®ƒåˆè¢«ç”¨äºæ›´æ–°ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>æœ¬èº«ï¼Œè¿™å±äºè‡ªä¸¾ã€‚å‡å¦‚ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s_{j+1},a_{j+1};\theta)\)</span>é«˜ä¼°äº†çœŸå®åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_{\pi}(s_{j+1},a_{j+1})\)</span>,é‚£ä¹ˆ TDç›®æ ‡<span class="math inline">\(\hat{y}_j\)</span>åˆ™æ˜¯å¯¹<span class="math inline">\(Q_{\pi}(s_j,a_j)\)</span>çš„é«˜ä¼°ï¼Œè¿™ä¼šå¯¼è‡´<span class="math inline">\(q(s_j,a_j;w)\)</span>é«˜ä¼°<span class="math inline">\(Q_{\pi}(s_j,a_j)\)</span>ã€‚è‡ªä¸¾è®©é«˜ä¼°ä»<span class="math inline">\((s_{j+1},a_{j+1})\)</span>ä¼ æ’­åˆ°<span class="math inline">\((s_j,a_j)\)</span>ã€‚</p><h1 id="åŒå»¶æ—¶ç¡®å®šç­–ç•¥æ¢¯åº¦-td3">åŒå»¶æ—¶ç¡®å®šç­–ç•¥æ¢¯åº¦ (TD3)</h1><p>ç”±äºå­˜åœ¨é«˜ä¼°ç­‰é—®é¢˜ï¼ŒDPG å®é™…è¿è¡Œçš„æ•ˆæœå¹¶ä¸å¥½ã€‚æœ¬èŠ‚ä»‹ç»çš„ Twin DelayedDeep Deterministic Policy Gradient (TD3)å¯ä»¥å¤§å¹…æå‡ç®—æ³•çš„è¡¨ç°ï¼ŒæŠŠç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œè®­ç»ƒå¾—æ›´å¥½ã€‚æ³¨æ„ï¼Œæœ¬èŠ‚åªæ˜¯æ”¹è¿›è®­ç»ƒç”¨çš„ç®—æ³•ï¼Œå¹¶ä¸æ”¹å˜ç¥ç»ç½‘ç»œçš„ç»“æ„ã€‚</p><h2 id="é«˜ä¼°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ">é«˜ä¼°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ</h2><p><strong>è§£å†³æ–¹æ¡ˆâ€”â€”ç›®æ ‡ç½‘ç»œ</strong>ï¼š<br>ä¸ºäº†è§£å†³è‡ªä¸¾å’Œæœ€å¤§åŒ–é€ æˆçš„é«˜ä¼°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç›®æ ‡ç½‘ç»œ (Target Networks)è®¡ç®— TD ç›®æ ‡<span class="math inline">\(\hat{y}_j\)</span>ã€‚è®­ç»ƒä¸­éœ€è¦ä¸¤ä¸ªç›®æ ‡ç½‘ç»œï¼š</p><p><span class="math inline">\(q(s,a;w^-)\)</span>å’Œ<span class="math inline">\(\mu(s;\theta^-)\)</span>.</p><p>å®ƒä»¬ä¸ä»·å€¼ç½‘ç»œã€ç­–ç•¥ç½‘ç»œçš„ç»“æ„å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚TDç›®æ ‡æ˜¯ç”¨ç›®æ ‡ç½‘ç»œç®—çš„ï¼š</p><p><span class="math inline">\(\hat{y}_j = r_j + \gamma \cdotq(s_{j+1},\hat{a}_{j+1};w^-), \quad \text{å…¶ä¸­} \quad\hat{a}_{j+1}=\mu(s_{j+1};\theta^-).\)</span></p><p>æŠŠ<span class="math inline">\(\hat{y}_j\)</span>ä½œä¸ºç›®æ ‡ï¼Œæ›´æ–°<span class="math inline">\(w\)</span>,é¼“åŠ±<span class="math inline">\(q(s_j,a_j;w)\)</span>æ¥è¿‘<span class="math inline">\(\hat{y}_j\)</span>ã€‚å››ä¸ªç¥ç»ç½‘ç»œä¹‹é—´çš„å…³ç³»å¦‚å›¾10.7æ‰€ç¤ºã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733280970215-074c9b2c-1dcd-43bc-a735-92cf1c805a34.png"></p><p>è¿™ç§æ–¹æ³•å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£é«˜ä¼°ï¼Œä½†æ˜¯å®éªŒè¡¨æ˜é«˜ä¼°ä»ç„¶å¾ˆä¸¥é‡ã€‚</p><p><strong>æ›´å¥½çš„è§£å†³æ–¹æ¡ˆâ€”â€”æˆªæ–­åŒ Q å­¦ä¹  (clipped doubleQ-learning)</strong>:<br>è¿™ç§æ–¹æ³•ä½¿ç”¨ä¸¤ä¸ªä»·å€¼ç½‘ç»œå’Œä¸€ä¸ªç­–ç•¥ç½‘ç»œï¼š</p><p><span class="math inline">\(q(s,a;w_1)\)</span>,<span class="math inline">\(q(s,a;w_2)\)</span>,<span class="math inline">\(\mu(s;\theta)\)</span>.</p><p>ä¸‰ä¸ªç¥ç»ç½‘ç»œå„å¯¹åº”ä¸€ä¸ªç›®æ ‡ç½‘ç»œï¼š</p><p><span class="math inline">\(q(s,a;w_1^-)\)</span>,<span class="math inline">\(q(s,a;w_2^-)\)</span>,<span class="math inline">\(\mu(s;\theta^-)\)</span>.</p><p>ç”¨ç›®æ ‡ç­–ç•¥ç½‘ç»œè®¡ç®—åŠ¨ä½œï¼š</p><p><span class="math inline">\(\hat{a}_{j+1}^-=\mu(s_{j+1};\theta^-),\)</span></p><p>ç„¶åç”¨ä¸¤ä¸ªç›®æ ‡ä»·å€¼ç½‘ç»œè®¡ç®—ï¼š</p><p><span class="math inline">\(\hat{y}_{j,1} = r_j + \gamma \cdotq(s_{j+1},\hat{a}_{j+1}^-;w_1^-),\)</span></p><p><span class="math inline">\(\hat{y}_{j,2} = r_j + \gamma \cdotq(s_{j+1},\hat{a}_{j+1}^-;w_2^-).\)</span></p><p>å–ä¸¤è€…è¾ƒå°è€…ä¸ºTD ç›®æ ‡ï¼š</p><p><span class="math inline">\(\hat{y}_j = \min\{\hat{y}_{j,1},\hat{y}_{j,2}\}.\)</span></p><p><font style="color:rgb(77, 77, 77);">æˆªæ–­åŒ Qå­¦ä¹ ä¸­çš„å…­ä¸ªç¥ç»ç½‘ç»œçš„å…³ç³»å¦‚å›¾ 10.8 æ‰€ç¤ºã€‚</font></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733281046414-16ca9237-4b69-43a3-a03c-a06bfa4062ad.png"></p><h2 id="å…¶ä»–æ”¹è¿›æ–¹æ³•">å…¶ä»–æ”¹è¿›æ–¹æ³•</h2><p>å¯ä»¥åœ¨æˆªæ–­åŒ Qå­¦ä¹ ç®—æ³•çš„åŸºç¡€ä¸Šåšä¸¤å¤„å°çš„æ”¹è¿›ã€è¿›ä¸€æ­¥æå‡ç®—æ³•çš„è¡¨ç°ã€‚ä¸¤ç§æ”¹è¿›åˆ†åˆ«æ˜¯å¾€åŠ¨ä½œä¸­åŠ å™ªå£°ã€å‡å°æ›´æ–°ç­–ç•¥ç½‘ç»œå’Œç›®æ ‡ç½‘ç»œçš„é¢‘ç‡ã€‚</p><p><strong>å¾€åŠ¨ä½œä¸­åŠ å™ªå£°</strong>ï¼š<br>ä¸Šä¸€å°èŠ‚ä¸­æˆªæ–­åŒ Q å­¦ä¹ ç”¨ç›®æ ‡ç­–ç•¥ç½‘ç»œè®¡ç®—åŠ¨ä½œï¼š</p><p><span class="math inline">\(\hat{a}_{j+1}^-=\mu(s_{j+1};\theta^-).\)</span></p><p>æŠŠè¿™ä¸€æ­¥æ”¹æˆï¼š</p><p><span class="math inline">\(\hat{a}_{j+1}^-=\mu(s_{j+1};\theta^-)+\xi.\)</span></p><p>å…¬å¼ä¸­çš„<span class="math inline">\(\xi\)</span>æ˜¯ä¸ªéšæœºå‘é‡ï¼Œè¡¨ç¤ºå™ªå£°ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ç‹¬ç«‹éšæœºä»æˆªæ–­æ­£æ€åˆ†å¸ƒ<span class="math inline">\(\mathcal{CN}(0,\sigma^2,-c,c)\)</span>ä¸­æŠ½å–ã€‚æŠŠæˆªæ–­æ­£æ€åˆ†å¸ƒè®°ä½œ<span class="math inline">\(\mathcal{CN}(0,\sigma^2,-c,c)\)</span>,æ„æ€æ˜¯å‡å€¼ä¸ºé›¶ï¼Œæ ‡å‡†å·®ä¸º<span class="math inline">\(\sigma\)</span>çš„æ­£æ€åˆ†å¸ƒï¼Œä½†æ˜¯å˜é‡è½åœ¨åŒºé—´<span class="math inline">\([-c,c]\)</span>ä¹‹å¤–çš„æ¦‚ç‡ä¸ºé›¶ã€‚æ­£æ€åˆ†å¸ƒä¸æˆªæ–­æ­£æ€åˆ†å¸ƒçš„å¯¹æ¯”å¦‚å›¾10.9 æ‰€ç¤ºã€‚ä½¿ç”¨æˆªæ–­æ­£æ€åˆ†å¸ƒï¼Œè€Œéæ­£æ€åˆ†å¸ƒï¼Œæ˜¯ä¸ºäº†é˜²æ­¢å™ªå£°<span class="math inline">\(\xi\)</span>è¿‡å¤§ã€‚ä½¿ç”¨æˆªæ–­ï¼Œä¿è¯å™ªå£°å¤§å°ä¸ä¼šè¶…è¿‡-c å’Œ cã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733281171745-ab054b7e-eddc-4142-9319-678bd6ea4d3c.png"></p><p><strong>å‡å°æ›´æ–°ç­–ç•¥ç½‘ç»œå’Œç›®æ ‡ç½‘ç»œçš„é¢‘ç‡</strong>ï¼š</p><p>Actor-critic ç”¨ä»·å€¼ç½‘ç»œæ¥æŒ‡å¯¼ç­–ç•¥ç½‘ç»œçš„æ›´æ–°ã€‚å¦‚æœä»·å€¼ç½‘ç»œ qæœ¬èº«ä¸å¯é ï¼Œé‚£ä¹ˆç”¨ä»·å€¼ç½‘ç»œ qç»™åŠ¨ä½œæ‰“çš„åˆ†æ•°æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ— åŠ©äºæ”¹è¿›ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu\)</span>ã€‚åœ¨ä»·å€¼ç½‘ç»œ qè¿˜å¾ˆå·®çš„æ—¶å€™å°±æ€¥äºæ›´æ–°<span class="math inline">\(\mu\)</span>,éä½†ä¸èƒ½æ”¹è¿›<span class="math inline">\(\mu\)</span>,åè€Œä¼šç”±äº<span class="math inline">\(\mu\)</span>çš„å˜åŒ–å¯¼è‡´ q çš„è®­ç»ƒä¸ç¨³å®šã€‚<br>å®éªŒè¡¨æ˜ï¼Œåº”å½“è®©ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\mu\)</span>ä»¥åŠä¸‰ä¸ªç›®æ ‡ç½‘ç»œçš„æ›´æ–°æ…¢äºä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>ã€‚ä¼ ç»Ÿçš„actor-criticçš„æ¯ä¸€è½®è®­ç»ƒéƒ½å¯¹ç­–ç•¥ç½‘ç»œã€ä»·å€¼ç½‘ç»œã€ä»¥åŠç›®æ ‡ç½‘ç»œåšä¸€æ¬¡æ›´æ–°ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯æ¯ä¸€è½®æ›´æ–°ä¸€æ¬¡ä»·å€¼ç½‘ç»œï¼Œä½†æ˜¯æ¯éš”<span class="math inline">\(k\)</span>è½®æ›´æ–°ä¸€æ¬¡ç­–ç•¥ç½‘ç»œå’Œä¸‰ä¸ªç›®æ ‡ç½‘ç»œã€‚<span class="math inline">\(k\)</span>æ˜¯è¶…å‚æ•°ï¼Œéœ€è¦è°ƒã€‚</p><h3 id="è®­ç»ƒæµç¨‹">è®­ç»ƒæµç¨‹</h3><p>æœ¬èŠ‚ä»‹ç»äº†ä¸‰ç§æŠ€å·§ï¼Œæ”¹è¿› DPG çš„è®­ç»ƒã€‚ç¬¬ä¸€ï¼Œç”¨æˆªæ–­åŒ Qå­¦ä¹ ï¼Œç¼“è§£ä»·å€¼ç½‘ç»œçš„é«˜ä¼°ã€‚ç¬¬äºŒï¼Œå¾€ç›®æ ‡ç­–ç•¥ç½‘ç»œä¸­åŠ å™ªå£°ï¼Œèµ·åˆ°å¹³æ»‘ä½œç”¨ã€‚ç¬¬ä¸‰ï¼Œé™ä½ç­–ç•¥ç½‘ç»œå’Œä¸‰ä¸ªç›®æ ‡ç½‘ç»œçš„æ›´æ–°é¢‘ç‡ã€‚ä½¿ç”¨è¿™ä¸‰ç§æŠ€å·§çš„ç®—æ³•è¢«ç§°ä½œåŒå»¶æ—¶ç¡®å®šç­–ç•¥æ¢¯åº¦(twin delayed deep deterministic policy gradient), ç¼©å†™æ˜¯ TD3ã€‚</p><p>TD3 ä¸ DPG éƒ½å±äºå¼‚ç­–ç•¥ (off-policy),å¯ä»¥ç”¨ä»»æ„çš„è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒï¼Œäº‹ååšç»éªŒå›æ”¾è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œã€‚æ”¶é›†ç»éªŒçš„æ–¹å¼ä¸åŸå§‹çš„è®­ç»ƒç®—æ³•ç›¸åŒï¼Œç”¨<span class="math inline">\(\mu(s_t;\theta)+\epsilon\)</span>ä¸ç¯å¢ƒäº¤äº’ï¼ŒæŠŠè§‚æµ‹åˆ°çš„å››å…ƒç»„<span class="math inline">\((s_t,a_t,r_t,s_{t+1})\)</span>å­˜å…¥ç»éªŒå›æ”¾æ•°ç»„ã€‚</p><p>åˆå§‹çš„æ—¶å€™ï¼Œç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œçš„å‚æ•°éƒ½æ˜¯éšæœºçš„ã€‚è¿™æ ·åˆå§‹åŒ–ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š</p><p><span class="math inline">\(w_1^- \leftarrow w_1, \quad w_2^-\leftarrow w_2, \quad \theta^- \leftarrow \theta.\)</span></p><p>è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œçš„æ—¶å€™ï¼Œæ¯æ¬¡ä»æ•°ç»„ä¸­éšæœºæŠ½å–ä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j,a_j,r_j,s_{j+1})\)</span>ã€‚ç”¨ä¸‹æ ‡ nowè¡¨ç¤ºç¥ç»ç½‘ç»œå½“å‰çš„å‚æ•°ï¼Œç”¨ä¸‹æ ‡ newè¡¨ç¤ºæ›´æ–°åçš„å‚æ•°ã€‚ç„¶åæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œæ›´æ–°ä»·å€¼ç½‘ç»œã€ç­–ç•¥ç½‘ç»œã€ç›®æ ‡ç½‘ç»œã€‚</p><ol type="1"><li>è®©ç›®æ ‡ç­–ç•¥ç½‘ç»œåšé¢„æµ‹ï¼š</li></ol><p>$<em>{j+1}<sup>-=(s_{j+1};</sup>-</em>{now})+. $</p><p>å…¶ä¸­å‘é‡<span class="math inline">\(\xi\)</span>çš„æ¯ä¸ªå…ƒç´ éƒ½ç‹¬ç«‹ä»æˆªæ–­æ­£æ€åˆ†å¸ƒ<span class="math inline">\(\mathcal{CN}(0,\sigma^2,-c,c)\)</span>ä¸­æŠ½å–.</p><ol start="2" type="1"><li>è®©ä¸¤ä¸ªç›®æ ‡ä»·å€¼ç½‘ç»œåšé¢„æµ‹ï¼š</li></ol><p><span class="math inline">\(\hat{q}_{1,j+1}^-=q(s_{j+1},\hat{a}_{j+1}^-;w_{1,now}^-)\quad \text{å’Œ} \quad\hat{q}_{2,j+1}^-=q(s_{j+1},\hat{a}_{j+1}^-;w_{2,now}^-).\)</span></p><ol start="3" type="1"><li>è®¡ç®— TD ç›®æ ‡ï¼š</li></ol><p><span class="math inline">\(\hat{y}_j = r_j + \gamma \cdot\min\{\hat{q}_{1,j+1}^-, \hat{q}_{2,j+1}^-\}.\)</span></p><ol start="4" type="1"><li>è®©ä¸¤ä¸ªä»·å€¼ç½‘ç»œåšé¢„æµ‹ï¼š</li></ol><p><span class="math inline">\(\hat{q}_{1,j}=q(s_j,a_j;w_{1,now}) \quad\text{å’Œ} \quad \hat{q}_{2,j}=q(s_j,a_j;w_{2,now}).\)</span></p><ol start="5" type="1"><li>è®¡ç®— TD è¯¯å·®ï¼š</li></ol><p><span class="math inline">\(\delta_{1,j}=\hat{q}_{1,j}-\hat{y}_j\quad \text{å’Œ} \quad \delta_{2,j}=\hat{q}_{2,j}-\hat{y}_j.\)</span></p><ol start="6" type="1"><li>æ›´æ–°ä»·å€¼ç½‘ç»œï¼š</li></ol><p><span class="math inline">\(w_{1,new} \leftarrow w_{1,now} - \alpha\cdot \delta_{1,j} \cdot \nabla_w q(s_j,a_j;w_{1,now}),\)</span></p><p><span class="math inline">\(w_{2,new} \leftarrow w_{2,now} - \alpha\cdot \delta_{2,j} \cdot \nabla_w q(s_j,a_j;w_{2,now}).\)</span></p><ol start="7" type="1"><li>æ¯éš”<span class="math inline">\(k\)</span>è½®æ›´æ–°ä¸€æ¬¡ç­–ç•¥ç½‘ç»œå’Œä¸‰ä¸ªç›®æ ‡ç½‘ç»œï¼š</li></ol><ul><li>è®©ç­–ç•¥ç½‘ç»œåšé¢„æµ‹ï¼š</li></ul><p><span class="math inline">\(\hat{a}_j=\mu(s_j;\theta_{now}). \quad\text{ç„¶åæ›´æ–°ç­–ç•¥ç½‘ç»œï¼š}\)</span></p><p><span class="math inline">\(\theta_{new} \leftarrow \theta_{now} +\beta \cdot \nabla_{\theta}\mu(s_j;\theta_{now}) \cdot \nabla_aq(s_j,\hat{a}_j;w_{1,now}).\)</span></p><ul><li>æ›´æ–°ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š</li></ul><p><span class="math inline">\(\theta_{new}^- \leftarrow \tau \cdot\theta_{new} + (1-\tau) \cdot \theta_{now}^-,\)</span></p><p><span class="math inline">\(w_{1,new}^- \leftarrow \tau \cdotw_{1,new} + (1-\tau) \cdot w_{1,now}^-,\)</span></p><p><span class="math inline">\(w_{2,new}^- \leftarrow \tau \cdotw_{2,new} + (1-\tau) \cdot w_{2,now}^-.\)</span></p><h1 id="éšæœºé«˜æ–¯ç­–ç•¥">éšæœºé«˜æ–¯ç­–ç•¥</h1><p>ä¸Šä¸€èŠ‚ç”¨ç¡®å®šç­–ç•¥ç½‘ç»œè§£å†³è¿ç»­æ§åˆ¶é—®é¢˜ã€‚æœ¬èŠ‚ç”¨ä¸åŒçš„æ–¹æ³•åšè¿ç»­æ§åˆ¶ï¼Œæœ¬èŠ‚çš„ç­–ç•¥ç½‘ç»œæ˜¯éšæœºçš„ï¼Œå®ƒæ˜¯éšæœºæ­£æ€åˆ†å¸ƒ(ä¹Ÿå«é«˜æ–¯åˆ†å¸ƒ)ã€‚</p><h2 id="åŸºæœ¬æ€è·¯">åŸºæœ¬æ€è·¯</h2><p>æˆ‘ä»¬å…ˆç ”ç©¶æœ€ç®€å•çš„æƒ…å½¢ï¼šè‡ªç”±åº¦ç­‰äº 1, ä¹Ÿå°±æ˜¯è¯´åŠ¨ä½œ<span class="math inline">\(a\)</span>æ˜¯å®æ•°ï¼ŒåŠ¨ä½œç©ºé—´<span class="math inline">\(A \subset\mathbb{R}\)</span>ã€‚æŠŠåŠ¨ä½œçš„å‡å€¼è®°ä½œ<span class="math inline">\(\mu(s)\)</span>,æ ‡å‡†å·®è®°ä½œ<span class="math inline">\(\sigma(s)\)</span>, å®ƒä»¬éƒ½æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>çš„å‡½æ•°ã€‚ç”¨æ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä½œä¸ºç­–ç•¥å‡½æ•°ï¼š<span class="math inline">\(\pi(a|s)=\frac{1}{\sqrt{6.28}\cdot\sigma(s)}\cdot\exp\left(-\frac{(a-\mu(s))^2}{2\cdot\sigma^2(s)}\right).\quad (10.2)\)</span></p><p>å‡å¦‚æˆ‘ä»¬çŸ¥é“å‡½æ•°<span class="math inline">\(\mu(s)\)</span>å’Œ<span class="math inline">\(\sigma(s)\)</span>çš„è§£æè¡¨è¾¾å¼ï¼Œå¯ä»¥è¿™æ ·åšæ§åˆ¶ï¼š</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s\)</span>, é¢„æµ‹å‡å€¼<span class="math inline">\(\widehat{\mu} = \mu(s)\)</span>å’Œæ ‡å‡†å·®<span class="math inline">\(\widehat{\sigma} = \sigma(s).\)</span>ã€‚</li><li>ä»æ­£æ€åˆ†å¸ƒä¸­åšéšæœºæŠ½æ ·<span class="math inline">\(a \simN(\mu^,\sigma^2)\)</span>; æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a\)</span>ã€‚</li></ol><p>ç„¶è€Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“<span class="math inline">\(\mu(s)\)</span>å’Œ<span class="math inline">\(\sigma(s)\)</span>æ˜¯æ€ä¹ˆæ ·çš„å‡½æ•°ã€‚ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ç”¨ç¥ç»ç½‘ç»œæ¥è¿‘ä¼¼è¿™ä¸¤ä¸ªå‡½æ•°ã€‚æŠŠç¥ç»ç½‘ç»œè®°ä½œ<span class="math inline">\(\mu(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho(s;\theta)\)</span>,å…¶ä¸­<span class="math inline">\(\theta\)</span>è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­çš„å¯è®­ç»ƒå‚æ•°ã€‚ä½†å®è·µä¸­æœ€å¥½ä¸è¦ç›´æ¥è¿‘ä¼¼æ ‡å‡†å·®<span class="math inline">\(\sigma\)</span>,è€Œæ˜¯è¿‘ä¼¼æ–¹å·®å¯¹æ•°<span class="math inline">\(\ln \sigma^2\)</span>ã€‚å®šä¹‰ä¸¤ä¸ªç¥ç»ç½‘ç»œï¼š</p><p><span class="math inline">\(\mu(s;\theta) \quad \text{å’Œ} \quad\rho(s;\theta),\)</span></p><p>åˆ†åˆ«ç”¨äºé¢„æµ‹å‡å€¼å’Œæ–¹å·®å¯¹æ•°ã€‚å¯ä»¥æŒ‰ç…§å›¾10.10æ¥æ­å»ºç¥ç»ç½‘ç»œã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733281722169-2371d191-945c-4db2-b338-ccb673693049.png"></p><p>ç¥ç»ç½‘ç»œçš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>,é€šå¸¸æ˜¯å‘é‡ã€çŸ©é˜µæˆ–è€…å¼ é‡ã€‚ç¥ç»ç½‘ç»œæœ‰ä¸¤ä¸ªè¾“å‡ºå¤´ï¼Œåˆ†åˆ«è®°ä½œ<span class="math inline">\(\mu(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho(s;\theta)\)</span>å¯ä»¥è¿™æ ·ç”¨ç¥ç»ç½‘ç»œåšæ§åˆ¶ï¼š</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s\)</span>, è®¡ç®—å‡å€¼<span class="math inline">\(\widehat{\mu} = \mu(s;\theta)\)</span>,æ–¹å·®å¯¹æ•°<span class="math inline">\(\widehat{\rho} =\rho(s;\theta)\)</span>, ä»¥åŠæ–¹å·®$ ^2 = ()$.</li><li>ä»æ­£æ€åˆ†å¸ƒä¸­åšéšæœºæŠ½æ ·ï¼š<span class="math inline">\(a \sim\mathcal{N}(\widehat{\mu}, \widehat{\sigma}^2)\)</span>;æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a\)</span>.</li></ol><p>ç”¨ç¥ç»ç½‘ç»œè¿‘ä¼¼å‡å€¼å’Œæ ‡å‡†å·®ä¹‹åï¼Œå…¬å¼ (10.2) ä¸­çš„ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi(a|s)\)</span>å˜æˆäº†ä¸‹é¢çš„ç­–ç•¥ç½‘ç»œï¼š</p><p><span class="math inline">\(\pi(a|s;\theta)=\frac{1}{\sqrt{6.28\cdot\exp[\rho(s;\theta)]}}\cdot\exp\left(-\frac{(a-\mu(s;\theta))^2}{2\cdot\exp[\rho(s;\theta)]}\right).\)</span></p><p>å®é™…åšæ§åˆ¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ç¥ç»ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho(s;\theta)\)</span>,ç”¨ä¸åˆ°çœŸæ­£çš„ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>.</p><h2 id="éšæœºé«˜æ–¯ç­–ç•¥ç½‘ç»œ">éšæœºé«˜æ–¯ç­–ç•¥ç½‘ç»œ</h2><p>ä¸Šä¸€å°èŠ‚å‡è®¾æ§åˆ¶é—®é¢˜çš„è‡ªç”±åº¦æ˜¯<span class="math inline">\(d=1\)</span>,ä¹Ÿå°±æ˜¯è¯´åŠ¨ä½œ<span class="math inline">\(a\)</span>æ˜¯æ ‡é‡ã€‚å®é™…é—®é¢˜ä¸­çš„è‡ªç”±åº¦<span class="math inline">\(d\)</span>å¾€å¾€å¤§äº 1, é‚£ä¹ˆåŠ¨ä½œ<span class="math inline">\(a\)</span>æ˜¯<span class="math inline">\(d\)</span>ç»´å‘é‡ã€‚å¯¹äºè¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ç¥ç»ç½‘ç»œç»“æ„ï¼Œè®©ä¸¤ä¸ªè¾“å‡º<span class="math inline">\(\mu(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho(s;\theta)\)</span>éƒ½<span class="math inline">\(d\)</span>ç»´å‘é‡ï¼›è§å›¾10.11ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733282010401-80abc816-ce3a-42ed-9859-abadc0c73217.png"></p><p>ç”¨æ ‡é‡<span class="math inline">\(a_i\)</span>è¡¨ç¤ºåŠ¨ä½œå‘é‡<span class="math inline">\(a\)</span>çš„ç¬¬<span class="math inline">\(i\)</span>ä¸ªå…ƒç´ ã€‚ç”¨å‡½æ•°<span class="math inline">\(\mu_i(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho_i(s;\theta)\)</span>åˆ†åˆ«è¡¨ç¤º<span class="math inline">\(\mu(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho(s;\theta)\)</span>çš„ç¬¬<span class="math inline">\(i\)</span>ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ä¸ªç‰¹æ®Šçš„å¤šå…ƒæ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä½œä¸ºç­–ç•¥ç½‘ç»œï¼š</p><p><span class="math inline">\(\pi(a|s;\theta)=\prod_{i=1}^{d}\frac{1}{\sqrt{6.28\cdot\exp[\rho_i(s;\theta)]}}\cdot\exp\left(-\frac{(a_i-\mu_i(s;\theta))^2}{2\cdot\exp[\rho_i(s;\theta)]}\right).\)</span></p><p>åšæ§åˆ¶çš„æ—¶å€™åªéœ€è¦å‡å€¼ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>å’Œæ–¹å·®å¯¹æ•°ç½‘ç»œ<span class="math inline">\(\rho(s;\theta)\)</span>,ä¸éœ€è¦ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>åšè®­ç»ƒçš„æ—¶å€™ä¹Ÿä¸éœ€è¦<span class="math inline">\(\pi(a|s;\theta)\)</span>, è€Œæ˜¯è¦ç”¨è¾…åŠ©ç½‘ç»œ<span class="math inline">\(f(s,a;\theta)\)</span>ã€‚æ€»è€Œè¨€ä¹‹ï¼Œç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>åªæ˜¯å¸®åŠ©ä½ ç†è§£æœ¬èŠ‚çš„æ–¹æ³•è€Œå·²ï¼Œå®é™…ç®—æ³•ä¸­ä¸ä¼šå‡ºç°<span class="math inline">\(\pi\)</span>ã€‚</p><p>å›¾10.11æè¿°äº†è¾…åŠ©ç½‘ç»œ<span class="math inline">\(f(s,a;\theta)\)</span>ä¸<span class="math inline">\(\mu\)</span>ã€<span class="math inline">\(\rho\)</span>ã€<span class="math inline">\(a\)</span>çš„å…³ç³»ã€‚è¾…åŠ©ç½‘ç»œå…·ä½“æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p><p><span class="math inline">\(f(s,a;\theta)=-\frac{1}{2}\sum_{i=1}^{d}\left(\rho_i(s;\theta)+\frac{(a_i-\mu_i(s;\theta))^2}{\exp[\rho_i(s;\theta)]}\right).\)</span></p><p>å®ƒçš„å¯è®­ç»ƒå‚æ•°<span class="math inline">\(\theta\)</span>éƒ½æ˜¯ä»<span class="math inline">\(\mu(s;\theta)\)</span>å’Œ<span class="math inline">\(\rho(s;\theta)\)</span>ä¸­æ¥çš„ã€‚ä¸éš¾å‘ç°ï¼Œè¾…åŠ©ç½‘ç»œä¸ç­–ç•¥ç½‘ç»œæœ‰è¿™æ ·çš„å…³ç³»ï¼š</p><p><span class="math inline">\(f(s,a;\theta)=\ln\pi(a|s;\theta)+\text{Constant}.\quad (10.3)\)</span></p><h2 id="ç­–ç•¥æ¢¯åº¦">ç­–ç•¥æ¢¯åº¦</h2><p>å›å¿†ä¸€ä¸‹ä¹‹å‰å­¦è¿‡çš„å†…å®¹ã€‚åœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»çš„æŠ˜æ‰£å›æŠ¥è®°ä½œéšæœºå˜é‡<span class="math inline">\(U_t=R_t+\gamma \cdot R_{t+1}+\gamma^2 \cdotR_{t+2}+\cdots+\gamma^{n-t} \cdot R_n\)</span>.</p><p>åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s_t,a_t)\)</span>æ˜¯å¯¹æŠ˜æ‰£å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æ¡ä»¶æœŸæœ›ã€‚å‰é¢ç« èŠ‚æ¨å¯¼è¿‡ç­–ç•¥æ¢¯åº¦çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼š</p><p><span class="math inline">\(g=Q_{\pi}(s,a) \cdot\nabla_{\theta}\ln\pi(a|s;\theta).\)</span></p><p>ç”±å…¬å¼ (10.3) å¯å¾—ï¼š</p><p><span class="math inline">\(g=Q_{\pi}(s,a) \cdot\nabla_{\theta}f(s,a;\theta). \quad (10.4)\)</span></p><p>æœ‰äº†ç­–ç•¥æ¢¯åº¦ï¼Œå°±å¯ä»¥å­¦ä¹ å‚æ•°<span class="math inline">\(\theta\)</span>ã€‚è®­ç»ƒçš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ol type="1"><li><p>æ­å»ºå‡å€¼ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>ã€æ–¹å·®å¯¹æ•°ç½‘ç»œ<span class="math inline">\(\rho(s;\theta)\)</span>ã€è¾…åŠ©ç½‘ç»œ<span class="math inline">\(f(s,a;\theta)\)</span>ã€‚</p></li><li><p>è®©æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼Œè®°å½•æ¯ä¸€æ­¥çš„çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ï¼Œå¹¶å¯¹å‚æ•°<span class="math inline">\(\theta\)</span>åšæ›´æ–°ï¼š</p><p>(a). è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s\)</span>,è®¡ç®—å‡å€¼ã€æ–¹å·®å¯¹æ•°ã€æ–¹å·®ï¼š<span class="math inline">\(\hat{\mu}=\mu(s;\theta)\)</span>,<span class="math inline">\(\hat{\rho}=\rho(s;\theta)\)</span>,<span class="math inline">\(\hat{\sigma}^2=\exp(\hat{\rho})\)</span>.</p><p>æ­¤å¤„çš„æŒ‡æ•°å‡½æ•°<span class="math inline">\(\exp(\cdot)\)</span>åº”ç”¨åˆ°å‘é‡çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šã€‚</p><p>(b). è®¾<span class="math inline">\(\hat{\mu}_i\)</span>å’Œ<span class="math inline">\(\hat{\sigma}_i\)</span>åˆ†åˆ«æ˜¯<span class="math inline">\(d\)</span>ç»´å‘é‡<span class="math inline">\(\hat{\mu}\)</span>å’Œ<span class="math inline">\(\hat{\sigma}\)</span>çš„ç¬¬<span class="math inline">\(i\)</span>ä¸ªå…ƒç´ ã€‚ä»æ­£æ€åˆ†å¸ƒä¸­åšæŠ½æ ·ï¼š<span class="math inline">\(a_i \simN(\hat{\mu}_i,\hat{\sigma}_i^2)\)</span>,<span class="math inline">\(\forall i=1,\cdots,d\)</span>.æŠŠå¾—åˆ°çš„åŠ¨ä½œè®°ä½œ<span class="math inline">\(a=[a_1,\cdots,a_d]\)</span>.</p><p>(c). è¿‘ä¼¼è®¡ç®—åŠ¨ä½œä»·å€¼ï¼š<span class="math inline">\(\hat{q} \approxQ_{\pi}(s,a)\)</span>.</p><p>(d). ç”¨åå‘ä¼ æ’­è®¡ç®—å‡ºè¾…åŠ©ç½‘ç»œå…³äºå‚æ•°<span class="math inline">\(\theta\)</span>çš„æ¢¯åº¦ï¼š<span class="math inline">\(\nabla_{\theta}f(s,a;\theta)\)</span>.</p><p>(e). ç”¨ç­–ç•¥æ¢¯åº¦ä¸Šå‡æ›´æ–°å‚æ•°ï¼š<span class="math inline">\(\theta\leftarrow \theta + \beta \cdot \hat{q} \cdot\nabla_{\theta}f(s,a;\theta)\)</span>. æ­¤å¤„çš„<span class="math inline">\(\beta\)</span>æ˜¯å­¦ä¹ ç‡ã€‚</p></li></ol><h3 id="ç”¨-reinforce-å­¦ä¹ å‚æ•°">ç”¨ REINFORCE å­¦ä¹ å‚æ•°</h3><p>REINFORCE ç”¨å®é™…è§‚æµ‹çš„æŠ˜æ‰£å›æŠ¥<span class="math inline">\(u_t=\sum_{k=t}^n\gamma^{k-t} \cdotr_k\)</span>ä»£æ›¿åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_{\pi}(s_t,a_t)\)</span>ã€‚</p><p>é“ç†æ˜¯è¿™æ ·çš„ã€‚åŠ¨ä½œä»·å€¼æ˜¯å›æŠ¥çš„æœŸæœ›ï¼š</p><p><span class="math inline">\(Q_{\pi}(s_t,a_t)=\mathbb{E}[U_t|S_t=s_t,A_t=a_t]\)</span>.</p><p>éšæœºå˜é‡<span class="math inline">\(U_t\)</span>çš„ä¸€ä¸ªå®é™…è§‚æµ‹å€¼<span class="math inline">\(u_t\)</span>æ˜¯æœŸæœ›çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œå…¬å¼(10.4) ä¸­çš„ç­–ç•¥æ¢¯åº¦å°±èƒ½è¿‘ä¼¼æˆ<span class="math inline">\(g \approx u_t\cdot \nabla_{\theta}f(s,a;\theta)\)</span>.</p><p>åœ¨æ­å»ºå¥½å‡å€¼ç½‘ç»œ<span class="math inline">\(\mu(s;\theta)\)</span>ã€æ–¹å·®å¯¹æ•°ç½‘ç»œ<span class="math inline">\(\rho(s;\theta)\)</span>ã€è¾…åŠ©ç½‘ç»œ<span class="math inline">\(f(s,a;\theta)\)</span>ä¹‹åï¼Œæˆ‘ä»¬ç”¨REINFORCEæ›´æ–°å‚æ•°<span class="math inline">\(\theta\)</span>ã€‚è®¾å½“å‰å‚æ•°ä¸º<span class="math inline">\(\theta_{now}\)</span>ã€‚REINFORCEé‡å¤ä»¥ä¸‹æ­¥éª¤ï¼Œç›´åˆ°æ”¶æ•›ï¼š</p><ol type="1"><li>ç”¨<span class="math inline">\(\mu(s;\theta_{now})\)</span>å’Œ<span class="math inline">\(\rho(s;\theta_{now})\)</span>æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼Œå®Œæˆä¸€å±€æ¸¸æˆï¼Œå¾—åˆ°ä¸€æ¡è½¨è¿¹<span class="math inline">\(s_1,a_1,r_1,s_2,a_2,r_2,\cdots,s_n,a_n,r_n\)</span>.</li><li>è®¡ç®—æ‰€æœ‰çš„å›æŠ¥ï¼š<span class="math inline">\(u_t=\sum_{k=t}^T\gamma^{k-t} \cdot r_k, \quad\forall t=1,\cdots,n\)</span>.</li><li>å¯¹è¾…åŠ©ç½‘ç»œåšåå‘ä¼ æ’­ï¼Œå¾—åˆ°æ‰€æœ‰çš„æ¢¯åº¦ï¼š<span class="math inline">\(\nabla_{\theta}f(s_t,a_t;\theta_{now}), \quad\forall t=1,\cdots,n\)</span>.</li><li>ç”¨ç­–ç•¥æ¢¯åº¦ä¸Šå‡æ›´æ–°å‚æ•°ï¼š<span class="math inline">\(\theta_{new}\leftarrow \theta_{now} + \beta \cdot \sum_{t=1}^{n}\gamma^{t-1} \cdotu_t \cdot \nabla_{\theta}f(s_t,a_t;\theta_{now})\)</span>.</li></ol><p>ä¸Šè¿°ç®—æ³•æ ‡å‡†çš„ REINFORCE, æ•ˆæœä¸å¦‚ä½¿ç”¨åŸºçº¿çš„REINFORCEã€‚å¯ä»¥ç”¨åŸºçº¿æ”¹è¿›ä¸Šé¢æè¿°çš„ç®—æ³•ã€‚REINFORCEç®—æ³•å±äºåŒç­–ç•¥(on-policy),ä¸èƒ½ä½¿ç”¨ç»éªŒå›æ”¾ã€‚</p><h3 id="ç”¨-actor-critic-å­¦ä¹ å‚æ•°">ç”¨ Actor-Critic å­¦ä¹ å‚æ•°</h3><p>Actor-critic éœ€è¦æ­å»ºä¸€ä¸ªä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>, ç”¨äºè¿‘ä¼¼åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>ã€‚ä»·å€¼ç½‘ç»œçš„ç»“æ„å¦‚å›¾ 10.12æ‰€ç¤ºã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªç›®æ ‡ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w^-)\)</span>,ç½‘ç»œç»“æ„ç›¸åŒï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-2-%E7%A1%AE%E5%AE%9A%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6-DPG/1733282448343-5c0b3c82-4f80-452a-8908-2503c42f7ecc.png"></p><p>åœ¨æ­å»ºå¥½å‡å€¼ç½‘ç»œ<span class="math inline">\(\mu\)</span>ã€æ–¹å·®å¯¹æ•°ç½‘ç»œ<span class="math inline">\(\rho\)</span>ã€è¾…åŠ©ç½‘ç»œ<span class="math inline">\(f\)</span>ã€ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>ä¹‹åï¼Œæˆ‘ä»¬ç”¨ SARSAç®—æ³•æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°<span class="math inline">\(w\)</span>,ç”¨è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦æ›´æ–°æ§åˆ¶å™¨å‚æ•°<span class="math inline">\(\theta\)</span>ã€‚è®¾å½“å‰å‚æ•°ä¸º<span class="math inline">\(w_{now}\)</span>å’Œ<span class="math inline">\(\theta_{now}\)</span>ã€‚é‡å¤ä»¥ä¸‹æ­¥éª¤æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°ã€æ§åˆ¶å™¨å‚æ•°ï¼Œç›´åˆ°æ”¶æ•›ï¼š</p><ol type="1"><li>å®é™…è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,ç”¨æ§åˆ¶å™¨ç®—å‡ºå‡å€¼<span class="math inline">\(\mu(s_t;\theta_{now})\)</span>å’Œæ–¹å·®å¯¹æ•°<span class="math inline">\(\rho(s_t;\theta_{now})\)</span>,ç„¶åéšæœºæŠ½æ ·å¾—åˆ°åŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>, è§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>ä¸æ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚</li><li>è®¡ç®—å‡å€¼<span class="math inline">\(\mu(s_{t+1};\theta_{now})\)</span>å’Œæ–¹å·®å¯¹æ•°<span class="math inline">\(\rho(s_{t+1};\theta_{now})\)</span>,ç„¶åéšæœºæŠ½æ ·å¾—åˆ°åŠ¨ä½œ<span class="math inline">\(\tilde{a}_{t+1}\)</span>ã€‚è¿™ä¸ªåŠ¨ä½œåªæ˜¯å‡æƒ³åŠ¨ä½œï¼Œæ™ºèƒ½ä½“ä¸äºˆæ‰§è¡Œã€‚</li><li>ç”¨ä»·å€¼ç½‘ç»œè®¡ç®—å‡ºï¼š<span class="math inline">\(\hat{q}_t=q(s_t,a_t;w_{now})\)</span>.</li><li>ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®—å‡ºï¼š<span class="math inline">\(\hat{q}_{t+1}=q(s_{t+1},\tilde{a}_{t+1};w_{now}^-)\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t=r_t+\gamma \cdot\hat{q}_{t+1}\)</span>,<span class="math inline">\(\delta_t=\hat{q}_t-\hat{y}_t\)</span>.</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œçš„å‚æ•°ï¼š<span class="math inline">\(w_{new} \leftarroww_{now} - \alpha \cdot \delta_t \cdot \nabla_wq(s_t,a_t;w_{now})\)</span>.</li><li>æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°å‚æ•°ï¼š<span class="math inline">\(\theta_{new}\leftarrow \theta_{now} + \beta \cdot \hat{q}_t \cdot\nabla_{\theta}f(s_t,a_t;\theta_{now})\)</span>.</li><li>æ›´æ–°ç›®æ ‡ç½‘ç»œå‚æ•°ï¼š<span class="math inline">\(w_{new}^- \leftarrow\tau \cdot w_{new} + (1-\tau) \cdot w_{now}^-\)</span>.</li></ol><p>ç®—æ³•ä¸­çš„<span class="math inline">\(\alpha\)</span>ã€<span class="math inline">\(\beta\)</span>ã€<span class="math inline">\(\tau\)</span>éƒ½æ˜¯è¶…å‚æ•°ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚ä¸Šè¿°ç®—æ³•æ˜¯æ ‡å‡†çš„actor-critic. æ•ˆæœä¸å¦‚advantage actor-critic(A2C)ã€‚å¯ä»¥ç”¨A2Cæ”¹è¿›ä¸Šè¿°æ–¹æ³•ã€‚</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>ç¦»æ•£æ§åˆ¶é—®é¢˜çš„åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>æ˜¯ä¸ªæœ‰é™çš„ç¦»æ•£é›†ï¼Œè¿ç»­æ§åˆ¶é—®é¢˜çš„åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>æ˜¯ä¸ªè¿ç»­é›†ã€‚å¦‚æœæƒ³å°† DQNç­‰ç¦»æ•£æ§åˆ¶æ–¹æ³•åº”ç”¨åˆ°è¿ç»­æ§åˆ¶é—®é¢˜ï¼Œå¯ä»¥å¯¹è¿ç»­åŠ¨ä½œç©ºé—´åšç¦»æ•£åŒ–ï¼Œä½†è¿™åªé€‚ç”¨äºè‡ªç”±åº¦è¾ƒå°çš„é—®é¢˜ã€‚</p><p>å¯ä»¥ç”¨ç¡®å®šç­–ç•¥ç½‘ç»œ<span class="math inline">\(a=\mu(s;\theta)\)</span>åšè¿ç»­æ§åˆ¶ã€‚ç½‘ç»œçš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>, è¾“å‡ºæ˜¯åŠ¨ä½œ<span class="math inline">\(a\)</span>,<span class="math inline">\(a\)</span>æ˜¯å‘é‡ï¼Œå¤§å°ç­‰äºé—®é¢˜çš„è‡ªç”±åº¦ã€‚</p><p>ç¡®å®šç­–ç•¥æ¢¯åº¦ (DPG) å€ŸåŠ©ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>è®­ç»ƒç¡®å®šç­–ç•¥ç½‘ç»œã€‚DPGå±äºå¼‚ç­–ç•¥ï¼Œç”¨è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒï¼Œåšç»éªŒå›æ”¾æ›´æ–°ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œã€‚</p><p>DPG ä¸ DQN æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œè€Œä¸”å®ƒä»¬çš„è®­ç»ƒéƒ½å­˜åœ¨é«˜ä¼°ç­‰é—®é¢˜ã€‚TD3ä½¿ç”¨å‡ ç§æŠ€å·§æ”¹è¿› DPG: æˆªæ–­åŒ Qå­¦ä¹ ã€å¾€åŠ¨ä½œä¸­åŠ å™ªå£°ã€é™ä½æ›´æ–°ç­–ç•¥ç½‘ç»œå’Œç›®æ ‡ç½‘ç»œçš„é¢‘ç‡ã€‚</p><p>å¯ä»¥ç”¨éšæœºé«˜æ–¯ç­–ç•¥åšè¿ç»­æ§åˆ¶ã€‚ç”¨ä¸¤ä¸ªç¥ç»ç½‘ç»œåˆ†åˆ«è¿‘ä¼¼é«˜æ–¯åˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®å¯¹æ•°ï¼Œå¹¶ç”¨ç­–ç•¥æ¢¯åº¦æ›´æ–°ä¸¤ä¸ªç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7.1 è¿ç»­æ§åˆ¶</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-1-%E8%BF%9E%E7%BB%AD%E6%8E%A7%E5%88%B6/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-1-%E8%BF%9E%E7%BB%AD%E6%8E%A7%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿ç»­æ§åˆ¶">è¿ç»­æ§åˆ¶</h1><p>å‰é¢çš„å†…å®¹å…¨éƒ¨éƒ½æ˜¯ç¦»æ•£æ§åˆ¶ï¼Œå³åŠ¨ä½œç©ºé—´æ˜¯ä¸€ä¸ªç¦»æ•£çš„é›†åˆï¼Œæ¯”å¦‚è¶…çº§ç›ä¸½æ¸¸æˆä¸­çš„åŠ¨ä½œç©ºé—´<span class="math inline">\(A=\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>æ˜¯ä¸ªç¦»æ•£é›†åˆã€‚æœ¬ç« çš„å†…å®¹æ˜¯è¿ç»­æ§åˆ¶ï¼Œå³åŠ¨ä½œç©ºé—´æ˜¯ä¸ªè¿ç»­é›†åˆï¼Œæ¯”å¦‚æ±½è½¦çš„è½¬å‘<span class="math inline">\(A=[-40^{\circ},40^{\circ}]\)</span>å°±æ˜¯è¿ç»­é›†åˆã€‚<font style="color:rgb(77, 77, 77);">å¦‚æœæŠŠè¿ç»­åŠ¨ä½œç©ºé—´åšç¦»æ•£åŒ–ï¼Œé‚£ä¹ˆç¦»æ•£æ§åˆ¶çš„æ–¹æ³•å°±èƒ½ç›´æ¥è§£å†³è¿ç»­æ§åˆ¶é—®é¢˜ï¼›å…ˆè®¨è®ºè¿ç»­é›†åˆçš„ç¦»æ•£åŒ–ã€‚ç„¶è€Œæ›´å¥½çš„åŠæ³•æ˜¯ç›´æ¥ç”¨è¿ç»­æ§åˆ¶æ–¹æ³•ï¼Œè€Œéç¦»æ•£åŒ–ä¹‹åå€Ÿç”¨ç¦»æ•£æ§åˆ¶æ–¹æ³•ã€‚æœ¬ç« ä»‹ç»ä¸¤ç§è¿ç»­æ§åˆ¶æ–¹æ³•ï¼šç¡®å®šç­–ç•¥ç½‘ç»œå’Œéšæœºç­–ç•¥ç½‘ç»œã€‚</font></p><p><font style="color:rgb(77, 77, 77);">ChatGPTå¯¹DPGçš„è§£é‡Šï¼š</font></p><p><font style="color:rgb(77, 77, 77);">ç¡®å®šæ€§ç­–ç•¥æ¢¯åº¦ï¼ˆDeterministicPolicyGradientï¼ŒDPGï¼‰æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­ä¸€ç§ç”¨äºè®­ç»ƒç¡®å®šæ€§ç­–ç•¥çš„æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿçš„éšæœºç­–ç•¥ä¸åŒï¼Œç¡®å®šæ€§ç­–ç•¥ç›´æ¥æ˜ å°„çŠ¶æ€åˆ°å…·ä½“çš„åŠ¨ä½œï¼Œè€Œä¸æ˜¯è¾“å‡ºä¸€ä¸ªåŠ¨ä½œçš„æ¦‚ç‡åˆ†å¸ƒã€‚DPGä¸»è¦åº”ç”¨äºè¿ç»­åŠ¨ä½œç©ºé—´çš„é—®é¢˜ï¼Œå…¶ä¸­åŠ¨ä½œæ˜¯å®æ•°ç©ºé—´ä¸­çš„è¿ç»­å€¼ã€‚</font></p><p><font style="color:rgb(77, 77, 77);">ä¸‹é¢æ˜¯ DPGçš„åŸºæœ¬æ€æƒ³å’Œä¸»è¦è¦ç´ ï¼š</font></p><ol type="1"><li><strong><font style="color:rgb(77, 77, 77);">ç¡®å®šæ€§ç­–ç•¥</font></strong><font style="color:rgb(77, 77, 77);">ï¼šåœ¨ DPGä¸­ï¼Œæ™ºèƒ½ä½“çš„ç­–ç•¥æ˜¯ç¡®å®šæ€§çš„ï¼Œå³ç»™å®šä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒç›´æ¥è¾“å‡ºä¸€ä¸ªå…·ä½“çš„åŠ¨ä½œã€‚è¿™æ ·çš„ç¡®å®šæ€§ç­–ç•¥å¯ä»¥è¡¨ç¤ºä¸º(</font><span class="math inline">\(a =\mu(s)\)</span><font style="color:rgb(77, 77, 77);">)ï¼Œå…¶ä¸­(</font><span class="math inline">\(\mu\)</span><font style="color:rgb(77, 77, 77);">)æ˜¯ç­–ç•¥å‡½æ•°ï¼Œè¾“å…¥ä¸ºçŠ¶æ€ (s)ï¼Œè¾“å‡ºä¸ºåŠ¨ä½œ (a)ã€‚</font></li><li><strong><font style="color:rgb(77, 77, 77);">å€¼å‡½æ•°</font></strong><font style="color:rgb(77, 77, 77);">ï¼šDPG ä½¿ç”¨å€¼å‡½æ•°æ¥è¯„ä¼°ç­–ç•¥çš„å¥½åã€‚é€šå¸¸ï¼ŒåŒ…æ‹¬çŠ¶æ€å€¼å‡½æ•°ï¼ˆState ValueFunctionï¼‰å’ŒåŠ¨ä½œå€¼å‡½æ•°ï¼ˆAction ValueFunctionï¼‰ã€‚å…¶ä¸­ï¼ŒçŠ¶æ€å€¼å‡½æ•°è¡¨ç¤ºåœ¨ç»™å®šçŠ¶æ€ä¸‹çš„æœŸæœ›ç´¯ç§¯å›æŠ¥ï¼ŒåŠ¨ä½œå€¼å‡½æ•°è¡¨ç¤ºåœ¨ç»™å®šçŠ¶æ€å’ŒåŠ¨ä½œçš„æƒ…å†µä¸‹çš„æœŸæœ›ç´¯ç§¯å›æŠ¥ã€‚</font></li><li><strong><font style="color:rgb(77, 77, 77);">ç­–ç•¥æ¢¯åº¦</font></strong><font style="color:rgb(77, 77, 77);">ï¼šDPGä½¿ç”¨ç­–ç•¥æ¢¯åº¦æ–¹æ³•æ¥æ›´æ–°ç­–ç•¥å‚æ•°ã€‚ç­–ç•¥æ¢¯åº¦æ˜¯å…³äºç­–ç•¥å‚æ•°çš„æ¢¯åº¦ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬å¦‚ä½•è°ƒæ•´ç­–ç•¥ä»¥æœ€å¤§åŒ–æœŸæœ›ç´¯ç§¯å›æŠ¥ã€‚åœ¨DPG ä¸­ï¼Œé€šè¿‡å¯¹å€¼å‡½æ•°å¯¹åŠ¨ä½œçš„æ¢¯åº¦æ¥è®¡ç®—ç­–ç•¥æ¢¯åº¦ã€‚</font></li><li><strong><font style="color:rgb(77, 77, 77);">Actor-Criticç»“æ„</font></strong><font style="color:rgb(77, 77, 77);">ï¼š DPG é€šå¸¸é‡‡ç”¨Actor-Critic ç»“æ„ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ª Actor ç½‘ç»œè´Ÿè´£è¾“å‡ºåŠ¨ä½œï¼Œä¸€ä¸ª Criticç½‘ç»œè´Ÿè´£ä¼°è®¡å€¼å‡½æ•°ã€‚è¿™ä¸¤ä¸ªç½‘ç»œå…±åŒå·¥ä½œï¼ŒActor çš„å‚æ•°é€šè¿‡ Criticçš„ä¼°è®¡å€¼å‡½æ•°çš„æ¢¯åº¦è¿›è¡Œæ›´æ–°ã€‚</font></li></ol><p><font style="color:rgb(77, 77, 77);">æ€»ä½“æ¥è¯´ï¼ŒDPGçš„è®­ç»ƒè¿‡ç¨‹æ¶‰åŠé€šè¿‡ç­–ç•¥æ¢¯åº¦æ¥è°ƒæ•´ Actor ç½‘ç»œçš„å‚æ•°ï¼Œä»¥æœ€å¤§åŒ– Criticç½‘ç»œä¼°è®¡çš„å€¼å‡½æ•°ã€‚è¿™æ ·ï¼ŒDPGå¯ä»¥åœ¨è¿ç»­åŠ¨ä½œç©ºé—´ä¸­æœ‰æ•ˆåœ°è®­ç»ƒç¡®å®šæ€§ç­–ç•¥ã€‚</font></p><h1 id="ç¦»æ•£æ§åˆ¶ä¸è¿ç»­æ§åˆ¶çš„åŒºåˆ«">ç¦»æ•£æ§åˆ¶ä¸è¿ç»­æ§åˆ¶çš„åŒºåˆ«</h1><p>è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦æ§åˆ¶ä¸€åªæœºæ¢°æ‰‹è‡‚ï¼Œå®ŒæˆæŸäº›ä»»åŠ¡ï¼Œè·å–å¥–åŠ±ã€‚æœºæ¢°æ‰‹è‡‚æœ‰ä¸¤ä¸ªå…³èŠ‚ï¼Œåˆ†åˆ«å¯ä»¥åœ¨<span class="math inline">\([0^{\circ},360^{\circ}]\)</span>ä¸<span class="math inline">\([0^{\circ},180^{\circ}]\)</span>çš„èŒƒå›´å†…è½¬åŠ¨ã€‚è¿™ä¸ªé—®é¢˜çš„è‡ªç”±åº¦æ˜¯<span class="math inline">\(d=2\)</span>,åŠ¨ä½œæ˜¯äºŒç»´å‘é‡ï¼ŒåŠ¨ä½œç©ºé—´æ˜¯è¿ç»­é›†åˆ<span class="math inline">\(A=[0,360]\times [0,180]\)</span>ã€‚</p><p>æ­¤å‰æˆ‘ä»¬å­¦è¿‡çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•å…¨éƒ¨éƒ½æ˜¯é’ˆå¯¹ç¦»æ•£åŠ¨ä½œç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è§£å†³ä¸Šè¿°è¿ç»­æ§åˆ¶é—®é¢˜ã€‚æƒ³æŠŠæ­¤å‰å­¦è¿‡çš„ç¦»æ•£æ§åˆ¶æ–¹æ³•åº”ç”¨åˆ°è¿ç»­æ§åˆ¶ä¸Šï¼Œå¿…é¡»è¦å¯¹è¿ç»­åŠ¨ä½œç©ºé—´åšç¦»æ•£åŒ–(ç½‘æ ¼åŒ–)ã€‚æ¯”å¦‚æŠŠè¿ç»­é›†åˆ<span class="math inline">\(A=[0,360] \times[0,180]\)</span>å˜æˆç¦»æ•£é›†åˆ<span class="math inline">\(\{0,20,40,\cdots,360\} \times\{0,20,40,\cdots,180\}\)</span>; è§å›¾ 10.1ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/7-1-%E8%BF%9E%E7%BB%AD%E6%8E%A7%E5%88%B6/1733276346262-c89dc0ca-689a-4338-a1fc-4773b2fb139f.png"></p><p>å¯¹åŠ¨ä½œç©ºé—´åšç¦»æ•£åŒ–ä¹‹åï¼Œå°±å¯ä»¥åº”ç”¨ä¹‹å‰å­¦è¿‡çš„æ–¹æ³•è®­ç»ƒ DQNæˆ–è€…ç­–ç•¥ç½‘ç»œï¼Œç”¨äºæ§åˆ¶æœºæ¢°æ‰‹è‡‚ã€‚å¯æ˜¯ç”¨ç¦»æ•£åŒ–è§£å†³è¿ç»­æ§åˆ¶é—®é¢˜æœ‰ä¸ªç¼ºç‚¹ã€‚æŠŠè‡ªç”±åº¦è®°ä½œ<span class="math inline">\(d\)</span>ã€‚è‡ªç”±åº¦<span class="math inline">\(d\)</span>è¶Šå¤§ï¼Œç½‘æ ¼ä¸Šçš„ç‚¹å°±è¶Šå¤šï¼Œè€Œä¸”æ•°é‡éšç€<span class="math inline">\(d\)</span>æŒ‡æ•°å¢é•¿ï¼Œä¼šé€ æˆç»´åº¦ç¾éš¾ã€‚åŠ¨ä½œç©ºé—´çš„å¤§å°å³ç½‘æ ¼ä¸Šç‚¹çš„æ•°é‡ã€‚å¦‚æœåŠ¨ä½œç©ºé—´å¤ªå¤§ï¼ŒDQNå’Œç­–ç•¥ç½‘ç»œçš„è®­ç»ƒéƒ½å˜å¾—å¾ˆå›°éš¾ï¼Œå¼ºåŒ–å­¦ä¹ çš„ç»“æœä¼šä¸å¥½ã€‚ä¸Šè¿°ç¦»æ•£åŒ–æ–¹æ³•åªé€‚ç”¨äºè‡ªç”±åº¦<span class="math inline">\(d\)</span>å¾ˆå°çš„æƒ…å†µï¼›å¦‚æœ<span class="math inline">\(d\)</span>ä¸æ˜¯å¾ˆå°ï¼Œå°±åº”è¯¥ä½¿ç”¨è¿ç»­æ§åˆ¶æ–¹æ³•ã€‚åé¢ä¸¤èŠ‚ä»‹ç»ä¸¤ç§è¿ç»­æ§åˆ¶çš„æ–¹æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.3 Advantage Actor-Critic (A2C)</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-3-Advantage-Actor-Critic-A2C/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-3-Advantage-Actor-Critic-A2C/</url>
    
    <content type="html"><![CDATA[<h1 id="advantage-actor-critic-a2c">Advantage Actor-Critic (A2C)</h1><p>ä¹‹å‰æˆ‘ä»¬æ¨å¯¼å‡ºäº†å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦ï¼Œå¹¶ä¸”å¯¹ç­–ç•¥æ¢¯åº¦åšäº†è’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œå¾—åˆ°ç­–ç•¥æ¢¯åº¦çš„ä¸€ä¸ªæ— åä¼°è®¡ï¼š</p><p><span class="math inline">\(g(s, a; \theta) = \left[ Q_\pi(s, a) -V_\pi(s) \right] \cdot \nabla_\theta \ln \pi(a | s; \theta). \quad(8.2)\)</span></p><p>å…¬å¼ä¸­çš„<span class="math inline">\(Q_\pi -V_\pi\)</span>è¢«ç§°ä½œä¼˜åŠ¿å‡½æ•° (advantagefunction)ã€‚å› æ­¤ï¼ŒåŸºäºä¸Šé¢å…¬å¼å¾—åˆ°çš„actor-critic æ–¹æ³•è¢«ç§°ä¸º advantageactor-critic, ç¼©å†™ A2Cã€‚</p><p>A2C å±äº actor-critic æ–¹æ³•ã€‚æœ‰ä¸€ä¸ªç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>,ç›¸å½“äºæ¼”å‘˜ï¼Œç”¨äºæ§åˆ¶æ™ºèƒ½ä½“è¿åŠ¨ã€‚è¿˜æœ‰ä¸€ä¸ªä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>,ç›¸å½“äºè¯„å§”ï¼Œä»–çš„è¯„åˆ†å¯ä»¥å¸®åŠ©ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)æ”¹è¿›æŠ€æœ¯ã€‚ä¸¤ä¸ªç¥ç»ç½‘ç»œçš„ç»“æ„ä¸ä¸Šä¸€èŠ‚ä¸­çš„å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯æœ¬èŠ‚å’Œä¸Šä¸€èŠ‚ç”¨ä¸åŒçš„æ–¹æ³•è®­ç»ƒä¸¤ä¸ªç¥ç»ç½‘ç»œã€‚</p><h2 id="ç®—æ³•æ¨å¯¼">ç®—æ³•æ¨å¯¼</h2><p><strong>è®­ç»ƒä»·å€¼ç½‘ç»œ</strong>ï¼šè®­ç»ƒä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>çš„ç®—æ³•æ˜¯ä»è´å°”æ›¼å…¬å¼æ¥çš„ï¼š</p><p><span class="math inline">\(V_\pi(s_t) = \mathbb{E}_{A_t \sim\pi(\cdot|s_t;\theta)}\left[ \mathbb{E}_{S_{t+1} \simp(\cdot|s_t,A_t)}\left[R_t + \gamma \cdot V_\pi(S_{t+1})\right]\right].\)</span></p><p>æˆ‘ä»¬å¯¹è´å°”æ›¼æ–¹ç¨‹å·¦å³ä¸¤è¾¹åšè¿‘ä¼¼ï¼š</p><ul><li>æ–¹ç¨‹å·¦è¾¹çš„<span class="math inline">\(V_\pi(s_t)\)</span>å¯ä»¥è¿‘ä¼¼æˆ<span class="math inline">\(v(s_t;w)\)</span>ã€‚<span class="math inline">\(v(s_t;w)\)</span>æ˜¯ä»·å€¼ç½‘ç»œåœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»å¯¹<span class="math inline">\(V_\pi(s_t)\)</span>åšå‡ºçš„ä¼°è®¡ã€‚</li><li>æ–¹ç¨‹å³è¾¹çš„æœŸæœ›æ˜¯å…³äºå½“å‰æ—¶åˆ»åŠ¨ä½œ<span class="math inline">\(A_t\)</span>ä¸ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€<span class="math inline">\(S_{t+1}\)</span>æ±‚çš„ã€‚ç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>,ç¯å¢ƒä¼šç»™å‡ºå¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚ç”¨è§‚æµ‹åˆ°çš„<span class="math inline">\(r_t\)</span>ã€<span class="math inline">\(s_{t+1}\)</span>å¯¹æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œå¾—åˆ°ï¼š</li></ul><p><span class="math inline">\(r_t + \gamma \cdotV_\pi(s_{t+1}).\)</span></p><ul><li>è¿›ä¸€æ­¥æŠŠå…¬å¼ä¸­çš„<span class="math inline">\(V_\pi(s_{t+1})\)</span>è¿‘ä¼¼æˆ<span class="math inline">\(v(s_{t+1};w)\)</span>, å¾—åˆ°</li></ul><p><span class="math inline">\(\hat{y}_t \triangleq r_t + \gamma \cdotv(s_{t+1};w).\)</span></p><p>æŠŠå®ƒç§°ä½œ TD ç›®æ ‡ã€‚å®ƒæ˜¯ä»·å€¼ç½‘ç»œåœ¨<span class="math inline">\(t+1\)</span>æ—¶åˆ»å¯¹<span class="math inline">\(V_\pi(s_t)\)</span>åšå‡ºçš„ä¼°è®¡ã€‚<span class="math inline">\(v(s_t;w)\)</span>å’Œ<span class="math inline">\(\hat{y}_t\)</span>éƒ½æ˜¯å¯¹åŠ¨ä½œä»·å€¼<span class="math inline">\(V_\pi(s_t)\)</span>çš„ä¼°è®¡ã€‚ç”±äº<span class="math inline">\(\hat{y}_t\)</span>éƒ¨åˆ†åŸºäºçœŸå®è§‚æµ‹åˆ°çš„å¥–åŠ±<span class="math inline">\(r_t\)</span>,æˆ‘ä»¬è®¤ä¸º<span class="math inline">\(\hat{y}_t\)</span>æ¯”<span class="math inline">\(v(s_t;w)\)</span>æ›´å¯é ã€‚æ‰€ä»¥æŠŠ<span class="math inline">\(\hat{y}_t\)</span>å›ºå®šä½ï¼Œæ›´æ–°<span class="math inline">\(w\)</span>, ä½¿å¾—<span class="math inline">\(v(s_t;w)\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚</p><p>å…·ä½“è¿™æ ·æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°<span class="math inline">\(w\)</span>ã€‚å®šä¹‰æŸå¤±å‡½æ•°</p><p><span class="math inline">\(L(w) \triangleq \frac{1}{2} [v(s_t;w) -\hat{y}_t]^2.\)</span></p><p>è®¾<span class="math inline">\(\hat{v}_t \triangleqv(s_t;w)\)</span>ã€‚æŸå¤±å‡½æ•°çš„æ¢¯åº¦æ˜¯ï¼š</p><p><span class="math inline">\(\nabla_w L(w) = (\hat{v}_t - \hat{y}_t)\cdot \nabla_w v(s_t;w).\)</span></p><p>å®šä¹‰ TD è¯¯å·®ä¸º</p><p><span class="math inline">\(\delta_t \triangleq \hat{v}_t -\hat{y}_t.\)</span></p><p>åšä¸€è½®æ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(w\)</span>ï¼š</p><p><span class="math inline">\(w \leftarrow w - \alpha \cdot \delta_t\cdot \nabla_w v(s_t;w).\)</span></p><p>è¿™æ ·å¯ä»¥è®©ä»·å€¼ç½‘ç»œçš„é¢„æµ‹<span class="math inline">\(v(s_t;w)\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚</p><p><strong>è®­ç»ƒç­–ç•¥ç½‘ç»œ</strong>ï¼šA2C ä»å…¬å¼å‡ºå‘ï¼Œå¯¹<span class="math inline">\(\boldsymbol{g}(s,a;\theta)\)</span>åšè¿‘ä¼¼ï¼Œè®°ä½œ<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>, ç„¶åç”¨<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°<span class="math inline">\(\theta\)</span>ã€‚ä¸‹é¢æˆ‘ä»¬åšæ•°å­¦æ¨å¯¼ã€‚å›å¿†ä¸€ä¸‹è´å°”æ›¼å…¬å¼ï¼š</p><p><span class="math inline">\(Q_\pi(s_t,a_t) = \mathbb{E}_{S_{t+1} \simp(\cdot|s_t,a_t)}\left[R_t + \gamma \cdotV_\pi(S_{t+1})\right].\)</span></p><p>æŠŠè¿‘ä¼¼ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\boldsymbol{g}(s_t,u_t;\theta)\)</span>ä¸­çš„<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>æ›¿æ¢æˆä¸Šé¢çš„æœŸæœ›ï¼Œå¾—åˆ°ï¼š</p><p><span class="math inline">\(\begin{align*}g(s_t, a_t; \theta) &amp;= \left[Q_{\pi}(s_t, a_t) - V_{\pi}(s_t)\right]\cdot \nabla_{\theta} \ln \pi(a_t \mid s_t; \theta) \\&amp;= \left[E_{S_{t+1}}\left[R_t + \gamma \cdot V_{\pi}(S_{t+1})\right]- V_{\pi}(s_t)\right] \cdot \nabla_{\theta} \ln \pi(a_t \mid s_t;\theta).\end{align*}\)</span></p><p>å½“æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¹‹åï¼Œç¯å¢ƒç»™å‡ºæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>å’Œå¥–åŠ±<span class="math inline">\(r_t\)</span>; åˆ©ç”¨<span class="math inline">\(s_{t+1}\)</span>å’Œ<span class="math inline">\(r_t\)</span>å¯¹ä¸Šé¢çš„æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œå¾—åˆ°ï¼š</p><p><span class="math inline">\(\boldsymbol{g}(s_t,a_t;\theta) \approx[r_t + \gamma \cdot V_\pi(s_{t+1}) - V_\pi(s_t)] \cdot \nabla_\theta \ln\pi(a_t | s_t; \theta).\)</span></p><p>è¿›ä¸€æ­¥æŠŠçŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(s)\)</span>æ›¿æ¢æˆä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>, å¾—åˆ°ï¼š</p><p><span class="math inline">\(\tilde{\boldsymbol{g}}(s_t,a_t;\theta)\triangleq [r_t + \gamma \cdot v(s_{t+1};w) - v(s_t;w)] \cdot\nabla_\theta \ln \pi(a_t | s_t; \theta).\)</span></p><p>å‰é¢å®šä¹‰äº† TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š</p><p><span class="math inline">\(\hat{y}_t \triangleq r_t + \gamma \cdotv(s_{t+1};w)\)</span>å’Œ<span class="math inline">\(\delta_t \triangleq\hat{v}_t - \hat{y}_t.\)</span></p><p>å› æ­¤ï¼Œå¯ä»¥æŠŠ<span class="math inline">\(\tilde{\boldsymbol{g}}(s_t,a_t;\theta)\)</span>å†™æˆï¼š</p><p><span class="math inline">\(\tilde{\boldsymbol{g}}(s_t,a_t;\theta)\triangleq -\delta_t \cdot \nabla_\theta \ln \pi(a_t | s_t;\theta).\)</span></p><p><span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>æ˜¯<span class="math inline">\(\boldsymbol{g}\)</span>çš„è¿‘ä¼¼ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_\theta J(\theta)\)</span>çš„è¿‘ä¼¼ã€‚ç”¨<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°<span class="math inline">\(\theta\)</span>ï¼š</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\tilde{\boldsymbol{g}}(s_t,a_t;\theta).\)</span></p><p>è¿™æ ·å¯ä»¥è®©ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>å˜å¤§ã€‚</p><p><strong>ç­–ç•¥ç½‘ç»œä¸ä»·å€¼ç½‘ç»œçš„å…³ç³»</strong> : A2C ä¸­ç­–ç•¥ç½‘ç»œ (æ¼”å‘˜)å’Œä»·å€¼ç½‘ç»œ (è¯„å§”) çš„å…³ç³»å¦‚å›¾ 8.4 æ‰€ç¤ºã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-3-Advantage-Actor-Critic-A2C/1733230865685-1d606c3d-93ab-4bee-a308-631ac01f41f1.png"></p><p>æ™ºèƒ½ä½“ç”±ç­–ç•¥ç½‘ç»œ Ï€æ§åˆ¶ï¼Œä¸ç¯å¢ƒäº¤äº’ï¼Œå¹¶æ”¶é›†çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ã€‚ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜) åŸºäºçŠ¶æ€<span class="math inline">\(s_t\)</span>åšå‡ºåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚ä»·å€¼ç½‘ç»œ (è¯„å§”) åŸºäº<span class="math inline">\(s_t\)</span>ã€<span class="math inline">\(s_{t+1}\)</span>ã€<span class="math inline">\(r_t\)</span>ç®—å‡º TD è¯¯å·®<span class="math inline">\(\delta_t\)</span>ã€‚ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜) ä¾é <span class="math inline">\(\delta_t\)</span>æ¥åˆ¤æ–­è‡ªå·±åŠ¨ä½œçš„å¥½åï¼Œä»è€Œæ”¹è¿›è‡ªå·±çš„æ¼”æŠ€(å³å‚æ•°<span class="math inline">\(\theta\)</span>)ã€‚</p><p>è¯»è€…å¯èƒ½ä¼šæœ‰ç–‘é—®: ä»·å€¼ç½‘ç»œ<span class="math inline">\(v\)</span>åªçŸ¥é“ä¸¤ä¸ªçŠ¶æ€<span class="math inline">\(s_t\)</span>ã€<span class="math inline">\(s_{t+1}\)</span>,è€Œå¹¶ä¸çŸ¥é“åŠ¨ä½œ<span class="math inline">\(a_t\)</span>,é‚£ä¹ˆä»·å€¼ç½‘ç»œä¸ºä»€ä¹ˆèƒ½è¯„ä»·<span class="math inline">\(a_t\)</span>çš„å¥½åå‘¢ï¼Ÿä»·å€¼ç½‘ç»œ<span class="math inline">\(v\)</span>å‘Šè¯‰ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>çš„å”¯ä¸€ä¿¡æ¯æ˜¯<span class="math inline">\(\delta_t\)</span>ã€‚å›é¡¾ä¸€ä¸‹<span class="math inline">\(\delta_t\)</span>çš„å®šä¹‰ï¼š</p><p><span class="math inline">\(-\delta_t = \underbrace{r_t + \gamma\cdot v(s_{t+1}; \boldsymbol{w})}_{\text{TDç›®æ ‡} \hat{y}_t} -\underbrace{v(s_t; \boldsymbol{w})}_{\text{åŸºçº¿}}.\)</span></p><p>åŸºçº¿<span class="math inline">\(v(s_t;w)\)</span>æ˜¯ä»·å€¼ç½‘ç»œåœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»å¯¹<span class="math inline">\(\mathbb{E}[U_t]\)</span>çš„ä¼°è®¡ï¼›æ­¤æ—¶æ™ºèƒ½ä½“å°šæœªæ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚è€Œ TD ç›®æ ‡<span class="math inline">\(\hat{y}_t\)</span>æ˜¯ä»·å€¼ç½‘ç»œåœ¨<span class="math inline">\(t+1\)</span>æ—¶åˆ»å¯¹<span class="math inline">\(\mathbb{E}[U_t]\)</span>çš„ä¼°è®¡ï¼›æ­¤æ—¶æ™ºèƒ½ä½“å·²ç»æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚</p><ul><li>å¦‚æœ<span class="math inline">\(\hat{y}_t &gt;v(s_t;w)\)</span>,è¯´æ˜åŠ¨ä½œ<span class="math inline">\(a_t\)</span>å¾ˆå¥½ï¼Œä½¿å¾—å¥–åŠ±<span class="math inline">\(r_t\)</span>è¶…å‡ºé¢„æœŸï¼Œæˆ–è€…æ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>æ¯”é¢„æœŸå¥½ï¼›è¿™ç§æƒ…å†µä¸‹åº”è¯¥æ›´æ–°<span class="math inline">\(\theta\)</span>,ä½¿å¾—<span class="math inline">\(\pi(a_t | s_t;\theta)\)</span>å˜å¤§ã€‚</li><li>å¦‚æœ<span class="math inline">\(\hat{y}_t &lt;v(s_t;w)\)</span>,è¯´æ˜åŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¸å¥½ï¼Œå¯¼è‡´å¥–åŠ±<span class="math inline">\(r_t\)</span>ä¸åŠé¢„æœŸï¼Œæˆ–è€…æ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>æ¯”é¢„æœŸå·®ï¼›è¿™ç§æƒ…å†µä¸‹åº”è¯¥æ›´æ–°<span class="math inline">\(\theta\)</span>,ä½¿å¾—<span class="math inline">\(\pi(a_t | s_t;\theta)\)</span>å‡å°ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<span class="math inline">\(\delta_t\)</span>ä¸­è™½ç„¶ä¸åŒ…å«åŠ¨ä½œ<span class="math inline">\(a_t\)</span>,ä½†æ˜¯<span class="math inline">\(\delta_t\)</span>å¯ä»¥é—´æ¥åæ˜ å‡ºåŠ¨ä½œ<span class="math inline">\(a_t\)</span>çš„å¥½åï¼Œå¯ä»¥å¸®åŠ©ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)æ”¹è¿›æ¼”æŠ€ã€‚</p><p>è®­ç»ƒæµç¨‹ä¸‹é¢æ¦‚æ‹¬ A2C è®­ç»ƒæµç¨‹ã€‚è®¾å½“å‰ç­–ç•¥ç½‘ç»œå‚æ•°æ˜¯<span class="math inline">\(\theta_{\text{now}}\)</span>,ä»·å€¼ç½‘ç»œå‚æ•°æ˜¯<span class="math inline">\(w_{\text{now}}\)</span>ã€‚æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œå°†å‚æ•°æ›´æ–°æˆ<span class="math inline">\(\theta_{\text{new}}\)</span>å’Œ<span class="math inline">\(w_{\text{new}}\)</span>:</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ ¹æ®ç­–ç•¥ç½‘ç»œåšå†³ç­–<span class="math inline">\(a_t \sim\pi(\cdot|s_t;\theta_{\text{now}})\)</span>,å¹¶è®©æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚</li><li>ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚</li><li>è®©ä»·å€¼ç½‘ç»œæ‰“åˆ†ï¼š<span class="math inline">\(\hat{v}_t = v(s_t;w_{\text{now}})\)</span>å’Œ<span class="math inline">\(\hat{v}_{t+1} =v(s_{t+1}; w_{\text{now}})\)</span>ã€‚</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t = r_t+ \gamma \cdot \hat{v}_{t+1}\)</span>å’Œ<span class="math inline">\(\delta_t = \hat{v}_t - \hat{y}_t\)</span>ã€‚</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œï¼š</li></ol><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot \delta_t \cdot \nabla_w v(s_t;w_{\text{now}}).\)</span></p><ol start="6" type="1"><li>æ›´æ–°ç­–ç•¥ç½‘ç»œï¼š</li></ol><p><span class="math inline">\(\theta_{\text{new}} \leftarrow\theta_{\text{now}} - \beta \cdot \delta_t \cdot \nabla_\theta \ln\pi(a_t | s_t; \theta_{\text{now}}).\)</span></p><p>æ³¨æ­¤å¤„è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œçš„æ–¹æ³•å±äºåŒç­–ç•¥(on-policy),è¦æ±‚è¡Œä¸ºç­–ç•¥(behavionpolicy)ä¸ç›®æ ‡ç­–ç•¥ (target policy) ç›¸åŒï¼Œéƒ½æ˜¯æœ€æ–°çš„ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta_{\text{now}})\)</span>ã€‚ä¸èƒ½ä½¿ç”¨ç»éªŒå›æ”¾ï¼Œå› ä¸ºç»éªŒå›æ”¾æ•°ç»„ä¸­çš„æ•°æ®æ˜¯ç”¨æ—§çš„ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta_{\text{old}})\)</span>è·å–çš„ï¼Œä¸èƒ½åœ¨å½“å‰é‡å¤åˆ©ç”¨ã€‚</p><h2 id="ç”¨ç›®æ ‡ç½‘ç»œæ”¹è¿›è®­ç»ƒ">ç”¨ç›®æ ‡ç½‘ç»œæ”¹è¿›è®­ç»ƒ</h2><p>ä¸Šè¿°è®­ç»ƒä»·å€¼ç½‘ç»œçš„ç®—æ³•å­˜åœ¨è‡ªä¸¾â€”â€”å³ç”¨ä»·å€¼ç½‘ç»œè‡ªå·±çš„ä¼°å€¼<span class="math inline">\(\hat{v}_{t+1}\)</span>å»æ›´æ–°ä»·å€¼ç½‘ç»œè‡ªå·±ã€‚ä¸ºäº†ç¼“è§£è‡ªä¸¾é€ æˆçš„åå·®ï¼Œå¯ä»¥ä½¿ç”¨ç›®æ ‡ç½‘ç»œ(targetnetwork) è®¡ç®— TD ç›®æ ‡ã€‚æŠŠç›®æ ‡ç½‘ç»œè®°ä½œ<span class="math inline">\(v(s;w^-)\)</span>,å®ƒçš„ç»“æ„ä¸ä»·å€¼ç½‘ç»œçš„ç»“æ„ç›¸åŒï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚ä½¿ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®— TDç›®æ ‡ï¼Œé‚£ä¹ˆ A2C çš„è®­ç»ƒå°±å˜æˆäº†ï¼š</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ ¹æ®ç­–ç•¥ç½‘ç»œåšå†³ç­–<span class="math inline">\(a_t \sim\pi(\cdot|s_t;\theta_{\text{now}})\)</span>, å¹¶è®©æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚</li><li>ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚</li><li>è®©ä»·å€¼ç½‘ç»œç»™<span class="math inline">\(s_t\)</span>æ‰“åˆ†ï¼š<span class="math inline">\(\hat{v}_t = v(s_t; w_{\text{now}})\)</span>ã€‚</li><li>è®©ç›®æ ‡ç½‘ç»œç»™<span class="math inline">\(s_{t+1}\)</span>æ‰“åˆ†ï¼š<span class="math inline">\(\hat{v}_{t+1}^- = v(s_{t+1};w_{\text{now}}^-)\)</span>ã€‚</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t^- =r_t + \gamma \cdot \hat{v}_{t+1}^-\)</span>å’Œ<span class="math inline">\(\delta_t = \hat{v}_t - \hat{y}_t^-\)</span>ã€‚</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œï¼š</li></ol><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot \delta_t \cdot \nabla_w v(s_t;w_{\text{now}}).\)</span></p><ol start="7" type="1"><li>æ›´æ–°ç­–ç•¥ç½‘ç»œï¼š</li></ol><p><span class="math inline">\(\theta_{\text{new}} \leftarrow\theta_{\text{now}} - \beta \cdot \delta_t \cdot \nabla\theta \ln\pi(a_t | s_t; \theta{\text{now}}).\)</span></p><ol start="8" type="1"><li>è®¾<span class="math inline">\(\tau \in(0,1)\)</span>æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒçš„è¶…å‚æ•°ã€‚åšåŠ æƒå¹³å‡æ›´æ–°ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š</li></ol><p><span class="math inline">\(\bar{w}_{\text{new}} \leftarrow \tau\cdot w_{\text{new}} + (1-\tau) \cdot w_{\text{now}}^-.\)</span></p><h2 id="æ€»ç»“">æ€»ç»“</h2><ul><li>åœ¨ç­–ç•¥æ¢¯åº¦ä¸­åŠ å…¥åŸºçº¿ (baseline)å¯ä»¥é™ä½æ–¹å·®ï¼Œæ˜¾è‘—æå‡å®éªŒæ•ˆæœã€‚å®è·µä¸­å¸¸ç”¨<span class="math inline">\(b= V_\pi(s)\)</span>ä½œä¸ºåŸºçº¿ã€‚</li><li>å¯ä»¥ç”¨åŸºçº¿æ¥æ”¹è¿› REINFORCE ç®—æ³•ã€‚ä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>è¿‘ä¼¼çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(s)\)</span>,æŠŠ<span class="math inline">\(v(s;w)\)</span>ä½œä¸ºåŸºçº¿ã€‚ç”¨ç­–ç•¥æ¢¯åº¦ä¸Šå‡æ¥æ›´æ–°ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>ã€‚ç”¨è’™ç‰¹å¡æ´›(è€Œéè‡ªä¸¾)æ¥æ›´æ–°ä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>ã€‚</li><li>å¯ä»¥ç”¨åŸºçº¿æ¥æ”¹è¿› actor-critic, å¾—åˆ°çš„æ–¹æ³•å«åš advantageactor-critic(A2C),å®ƒä¹Ÿæœ‰ä¸€ä¸ªç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>å’Œä¸€ä¸ªä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;\theta)\)</span>ã€‚ç”¨ç­–ç•¥æ¢¯åº¦ä¸Šå‡æ¥æ›´æ–°ç­–ç•¥ç½‘ç»œï¼Œç”¨TD ç®—æ³•æ¥æ›´æ–°ä»·å€¼ç½‘ç»œã€‚</li><li>å¤šæ­¥TD target</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-3-Advantage-Actor-Critic-A2C/1733231407692-5bab22b8-e88e-445e-8ac1-eadd83991c27.png"></p><ul><li>a2c vs REINFORCE</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-3-Advantage-Actor-Critic-A2C/1733231596323-61ca3f3b-8397-4cfa-a3ae-c90aa5dd97cf.png"></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-3-Advantage-Actor-Critic-A2C/1733231619423-392d201b-c689-484b-883e-11e9872db7d2.png"></p><p>reinforceæ˜¯a2cçš„ç‰¹ä¾‹ ï¼Œ a2cæ˜¯reinforceçš„ç‰¹ä¾‹</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.2 å¸¦åŸºçº¿çš„ REINFORCE ç®—æ³•</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-2-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84-REINFORCE-%E7%AE%97%E6%B3%95/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-2-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84-REINFORCE-%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="å¸¦åŸºçº¿çš„-reinforce-ç®—æ³•">å¸¦åŸºçº¿çš„ REINFORCE ç®—æ³•</h1><p>ä¸Šä¸€èŠ‚æ¨å¯¼å‡ºäº†å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦ï¼Œå¹¶ä¸”å¯¹ç­–ç•¥æ¢¯åº¦åšäº†è’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çŠ¶æ€ä»·å€¼<span class="math inline">\(V_\pi(s)\)</span>ä½œåŸºçº¿ï¼Œå¾—åˆ°ç­–ç•¥æ¢¯åº¦çš„ä¸€ä¸ªæ— åä¼°è®¡ï¼š</p><p><span class="math inline">\(\boldsymbol{g}(s,a;\theta) =\left[Q_\pi(s,a) - V_\pi(s)\right] \cdot \nabla_\theta \ln\pi(a|s;\theta).\)</span></p><p>æˆ‘ä»¬åœ¨ æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆç‹æ ‘æ£®ï¼‰ç¬”è®°03: ä¸»è¦ä»‹ç»policy networkï¼Œ policygradientï¼ŒREINFORCE ä¸­å­¦è¿‡ REINFORCE, å®ƒä½¿ç”¨å®é™…è§‚æµ‹çš„å›æŠ¥<span class="math inline">\(u\)</span>æ¥ä»£æ›¿åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_\pi(S,A)\)</span>ã€‚ æ­¤å¤„æˆ‘ä»¬åŒæ ·ç”¨<span class="math inline">\(u\)</span>ä»£æ›¿<span class="math inline">\(Q_\pi(S,A)\)</span>ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>è¿‘ä¼¼çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(S)\)</span>ã€‚è¿™æ ·ä¸€æ¥ï¼Œ<span class="math inline">\(\boldsymbol{g}(s,a;\theta)\)</span>å°±è¢«è¿‘ä¼¼æˆäº†ï¼š</p><p><span class="math inline">\(\tilde{\boldsymbol{g}}(s,a;\theta) =\left[u - v(s;w)\right] \cdot \nabla_\theta \ln\pi(a|s;\theta).\)</span></p><p>å¯ä»¥ç”¨<span class="math inline">\(\tilde{\boldsymbol{g}}(s,a;\theta)\)</span>ä½œä¸ºç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_\thetaJ(\theta)\)</span>çš„è¿‘ä¼¼ï¼Œæ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°ï¼š</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\tilde{\boldsymbol{g}}(s,a;\theta).\)</span></p><h2 id="ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œ">ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œ</h2><p>å¸¦åŸºçº¿çš„ REINFORCE éœ€è¦ä¸¤ä¸ªç¥ç»ç½‘ç»œï¼šç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>å’Œä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>;</p><p>ç¥ç»ç½‘ç»œç»“æ„å¦‚å›¾ 8.2 å’Œ 8.3æ‰€ç¤ºã€‚ç­–ç•¥ç½‘ç»œä¸ä¹‹å‰ç« èŠ‚ä¸€æ ·ï¼šè¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>,è¾“å‡ºæ˜¯ä¸€ä¸ªå‘é‡ï¼Œæ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªåŠ¨ä½œçš„æ¦‚ç‡ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-2-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84-REINFORCE-%E7%AE%97%E6%B3%95/1733226096824-e09bdd2a-efba-4f46-aead-de4313d08003.png"></p><p>æ­¤å¤„çš„ä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>ä¸ä¹‹å‰ä½¿ç”¨çš„ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;w)\)</span>åŒºåˆ«è¾ƒå¤§ã€‚æ­¤å¤„çš„<span class="math inline">\(v(s;w)\)</span>æ˜¯å¯¹çŠ¶æ€ä»·å€¼<span class="math inline">\(V_\pi\)</span>çš„è¿‘ä¼¼ï¼Œè€Œéå¯¹åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_\pi\)</span>çš„è¿‘ä¼¼ã€‚<span class="math inline">\(v(s;w)\)</span>çš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>,è¾“å‡ºæ˜¯ä¸€ä¸ªå®æ•°ï¼Œä½œä¸ºåŸºçº¿ã€‚ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œçš„è¾“å…¥éƒ½æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>,å› æ­¤å¯ä»¥è®©ä¸¤ä¸ªç¥ç»ç½‘ç»œå…±äº«å·ç§¯ç½‘ç»œçš„å‚æ•°ï¼Œè¿™æ˜¯ç¼–ç¨‹å®ç°ä¸­å¸¸ç”¨çš„æŠ€å·§ã€‚</p><p>è™½ç„¶å¸¦åŸºçº¿çš„ REINFORCEæœ‰ä¸€ä¸ªç­–ç•¥ç½‘ç»œå’Œä¸€ä¸ªä»·å€¼ç½‘ç»œï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¸æ˜¯actor-criticã€‚ä»·å€¼ç½‘ç»œæ²¡æœ‰èµ·åˆ°â€œè¯„å§”â€çš„ä½œç”¨ï¼Œåªæ˜¯ä½œä¸ºåŸºçº¿è€Œå·²ï¼Œç›®çš„åœ¨äºé™ä½æ–¹å·®ï¼ŒåŠ é€Ÿæ”¶æ•›ã€‚çœŸæ­£å¸®åŠ©ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)æ”¹è¿›å‚æ•°<span class="math inline">\(\theta\)</span>çš„ä¸æ˜¯ä»·å€¼ç½‘ç»œï¼Œè€Œæ˜¯å®é™…è§‚æµ‹åˆ°çš„å›æŠ¥<span class="math inline">\(u\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-2-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84-REINFORCE-%E7%AE%97%E6%B3%95/1733229158735-749356a6-c3bf-40d5-ba6c-e6e085c70cca.png"></p><h2 id="ç®—æ³•çš„æ¨å¯¼">ç®—æ³•çš„æ¨å¯¼</h2><p><strong>è®­ç»ƒç­–ç•¥ç½‘ç»œ</strong> çš„æ–¹æ³•æ˜¯è¿‘ä¼¼çš„ç­–ç•¥æ¢¯åº¦ä¸Šå‡ã€‚ä»<span class="math inline">\(t\)</span>æ—¶åˆ»å¼€å§‹ï¼Œæ™ºèƒ½ä½“å®Œæˆä¸€å±€æ¸¸æˆï¼Œè§‚æµ‹åˆ°å…¨éƒ¨å¥–åŠ±<span class="math inline">\(r_t,r_{t+1}, \cdots, r_n\)</span>ç„¶åè®¡ç®—å›æŠ¥<span class="math inline">\(u_t= \sum_{k=t}^n \gamma^{k-t} \cdot r_k\)</span>ã€‚è®©ä»·å€¼ç½‘ç»œåšå‡ºé¢„æµ‹<span class="math inline">\(\hat{v}_t =v(s_t;w)\)</span>ï¼Œä½œä¸ºåŸºçº¿ã€‚è¿™æ ·å°±å¾—åˆ°äº†å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦ï¼š</p><p><span class="math inline">\(\tilde{\boldsymbol{g}}(s_t,a_t;\theta) =(u_t - \hat{v}_t) \cdot \nabla_\theta \ln \pi(a_t | s_t;\theta).\)</span></p><p>å®ƒæ˜¯ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_\thetaJ(\theta)\)</span>çš„è¿‘ä¼¼ã€‚æœ€ååšæ¢¯åº¦ä¸Šå‡æ›´æ–°<span class="math inline">\(\theta\)</span>ï¼š</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\tilde{\boldsymbol{g}}(s_t,a_t;\theta).\)</span></p><p>è¿™æ ·å¯ä»¥è®©ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>é€æ¸å¢å¤§ã€‚</p><p><strong>è®­ç»ƒä»·å€¼ç½‘ç»œ</strong> çš„æ–¹æ³•æ˜¯å›å½’(regression)ã€‚å›å¿†ä¸€ä¸‹ï¼ŒçŠ¶æ€ä»·å€¼æ˜¯å›æŠ¥çš„æœŸæœ›ï¼š</p><p><span class="math inline">\(V_\pi(s_t) = \mathbb{E}[U_t | S_t =s_t],\)</span></p><p>æœŸæœ›æ¶ˆæ‰äº†åŠ¨ä½œ<span class="math inline">\(A_t, A_{t+1}, \cdots,A_n\)</span>å’ŒçŠ¶æ€<span class="math inline">\(S_{t+1}, \cdots,S_n\)</span>ã€‚è®­ç»ƒä»·å€¼ç½‘ç»œçš„ç›®çš„æ˜¯è®©<span class="math inline">\(v(s_t;w)\)</span>æ‹Ÿåˆ<span class="math inline">\(V_\pi(s_t)\)</span></p><p>,å³æ‹Ÿåˆ<span class="math inline">\(u_t\)</span>çš„æœŸæœ›ã€‚å®šä¹‰æŸå¤±å‡½æ•°ï¼š</p><p><span class="math inline">\(L(w) = \frac{1}{2n} \sum_{t=1}^{n}[v(s_t;w) - u_t]^2.\)</span></p><p>è®¾<span class="math inline">\(\hat{v}_t =v(s_t;w)\)</span>ã€‚æŸå¤±å‡½æ•°çš„æ¢¯åº¦æ˜¯ï¼š</p><p><span class="math inline">\(\nabla_w L(w) = \frac{1}{n}\sum_{t=1}^{n} (\hat{v}_t - u_t) \cdot \nabla_w v(s_t;w).\)</span></p><p>åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(w\)</span>ï¼š</p><p><span class="math inline">\(w \leftarrow w - \alpha \cdot \nabla_wL(w).\)</span></p><h2 id="è®­ç»ƒæµç¨‹">è®­ç»ƒæµç¨‹</h2><p>å½“å‰ç­–ç•¥ç½‘ç»œçš„å‚æ•°æ˜¯<span class="math inline">\(\theta_{\text{now}}\)</span>,ä»·å€¼ç½‘ç»œçš„å‚æ•°æ˜¯<span class="math inline">\(w_{\text{now}}\)</span>ã€‚æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œå¯¹å‚æ•°åšä¸€è½®æ›´æ–°ã€‚</p><ol type="1"><li>ç”¨ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\theta_{\text{now}}\)</span>æ§åˆ¶æ™ºèƒ½ä½“ä»å¤´å¼€å§‹ç©ä¸€å±€æ¸¸æˆï¼Œå¾—åˆ°ä¸€æ¡è½¨è¿¹(trajectory)ï¼š</li></ol><p><span class="math inline">\(s_1, a_1, r_1, s_2, a_2, r_2, \cdots,s_n, a_n, r_n.\)</span></p><ol start="2" type="1"><li>è®¡ç®—æ‰€æœ‰çš„å›æŠ¥ï¼š</li></ol><p><span class="math inline">\(u_t = \sum_{k=t}^n \gamma^{k-t} \cdotr_k, \quad \forall t = 1, \cdots, n.\)</span></p><ol start="3" type="1"><li>è®©ä»·å€¼ç½‘ç»œåšé¢„æµ‹ï¼š</li></ol><p><span class="math inline">\(\hat{v}_t = v(s_t; w_{\text{now}}), \quad\forall t = 1, \cdots, n.\)</span></p><ol start="4" type="1"><li>è®¡ç®—è¯¯å·®</li></ol><p><span class="math inline">\(\delta_t = \hat{v}_t - u_t, \quad \forallt = 1, \cdots, n.\)</span></p><ol start="5" type="1"><li>ç”¨<span class="math inline">\(\{s_t\}_{t=1}^n\)</span>ä½œä¸ºä»·å€¼ç½‘ç»œè¾“å…¥ï¼Œåšåå‘ä¼ æ’­è®¡ç®—ï¼š</li></ol><p><span class="math inline">\(\nabla_w v(s_t; w_{\text{now}}), \quad\forall t = 1, \cdots, n.\)</span></p><ol start="6" type="1"><li>æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°ï¼š</li></ol><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot \sum_{t=1}^{n} \delta_t \cdot \nabla_w v(s_t;w_{\text{now}}).\)</span></p><ol start="7" type="1"><li>ç”¨<span class="math inline">\(\{(s_t,a_t)\}_{t=1}^n\)</span>ä½œä¸ºæ•°æ®ï¼Œåšåå‘ä¼ æ’­è®¡ç®—ï¼š</li></ol><p><span class="math inline">\(\nabla_\theta \ln \pi(a_t | s_t;\theta_{\text{now}}), \quad \forall t = 1, \cdots, n.\)</span></p><ol start="8" type="1"><li>åšéšæœºæ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°ï¼š</li></ol><p><span class="math inline">\(\theta_{\text{new}} \leftarrow\theta_{\text{now}} - \beta \cdot \sum_{t=1}^{n} \gamma^{t-1} \cdot\delta_t \cdot \nabla_\theta \ln \pi(a_t | s_t;\theta_{\text{now}}).\)</span></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.1 å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦æ–¹æ³•</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-1-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6%E6%96%B9%E6%B3%95/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-1-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦æ–¹æ³•">å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦æ–¹æ³•</h1><p>ä¸Šä¸€ç« æ¨å¯¼å‡ºç­–ç•¥æ¢¯åº¦ï¼Œå¹¶ä»‹ç»äº†ä¸¤ç§ç­–ç•¥æ¢¯åº¦æ–¹æ³•â€”â€”REINFORCE å’Œactor-criticã€‚</p><p>è™½ç„¶ä¸Šä¸€ç« çš„æ–¹æ³•åœ¨ç†è®ºä¸Šæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯åœ¨å®è·µä¸­æ•ˆæœå¹¶ä¸ç†æƒ³ã€‚æœ¬ç« ä»‹ç»çš„å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦(policy gradient with baseline)å¯ä»¥å¤§å¹…æå‡ç­–ç•¥æ¢¯åº¦æ–¹æ³•çš„è¡¨ç°ã€‚ä½¿ç”¨åŸºçº¿(baseline) ä¹‹åï¼ŒREINFORCE å˜æˆREINFORCE with baseline, actor-critic å˜æˆ advantage actor-critic(A2C)ã€‚</p><h2 id="ç­–ç•¥æ¢¯åº¦ä¸­çš„åŸºçº¿">ç­–ç•¥æ¢¯åº¦ä¸­çš„åŸºçº¿</h2><p>é¦–å…ˆå›é¡¾ä¸Šä¸€ç« çš„å†…å®¹ã€‚ç­–ç•¥å­¦ä¹ é€šè¿‡æœ€å¤§åŒ–ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta) =\mathbb{E}_S[V_\pi(S)]\)</span>è®­ç»ƒå‡ºç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>ã€‚å¯ä»¥ç”¨ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_\theta J(\theta)\)</span>æ¥æ›´æ–°å‚æ•°<span class="math inline">\(\theta\)</span></p><p><span class="math inline">\(\theta_{\text{new}} \leftarrow\theta_{\text{now}} + \beta \cdot \nabla_\thetaJ(\theta_{\text{now}}).\)</span></p><p>ç­–ç•¥æ¢¯åº¦å®šç†è¯æ˜ï¼š</p><p><span class="math inline">\(\nabla_\theta J(\theta) =\mathbb{E}_S\left[\mathbb{E}_{A\sim\pi(\cdot|S,\theta)}\left[Q_\pi(S,A)\cdot \nabla_\theta \ln \pi(A|S;\theta)\right]\right].\)</span></p><p>ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_\thetaJ(\theta)\)</span>åšè¿‘ä¼¼ï¼Œæ¨å¯¼å‡º REINFORCE å’Œ actor-critic;ä¸¤ç§æ–¹æ³•åŒºåˆ«åœ¨äºå…·ä½“å¦‚ä½•åšè¿‘ä¼¼ã€‚</p><h2 id="åŸºçº¿-baseline">åŸºçº¿ (Baseline)</h2><p>åŸºäºç­–ç•¥æ¢¯åº¦å…¬å¼ (8.1) å¾—å‡ºçš„ REINFORCE å’Œ actor-criticæ–¹æ³•æ•ˆæœé€šå¸¸ä¸å¥½ã€‚åªéœ€å¯¹ç­–ç•¥æ¢¯åº¦å…¬å¼ (8.1)åšä¸€ä¸ªå¾®å°çš„æ”¹åŠ¨ï¼Œå°±èƒ½å¤§å¹…æå‡è¡¨ç°ï¼šæŠŠ<span class="math inline">\(b\)</span>ä½œä¸ºåŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(S,A)\)</span>çš„åŸºçº¿ (baseline), ç”¨<span class="math inline">\(Q_\pi(S,A) - b\)</span></p><p>æ›¿æ¢æ‰<span class="math inline">\(Q_\pi\)</span>ã€‚è®¾<span class="math inline">\(b\)</span>æ˜¯ä»»æ„çš„å‡½æ•°ï¼Œåªè¦ä¸ä¾èµ–äºåŠ¨ä½œ<span class="math inline">\(A\)</span>å°±å¯ä»¥ï¼Œä¾‹å¦‚<span class="math inline">\(b\)</span>å¯ä»¥æ˜¯çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(S)\)</span>ã€‚</p><p>å®šç† 8.1. å¸¦åŸºçº¿çš„ç­–ç•¥æ¢¯åº¦å®šç†</p><p>è®¾<span class="math inline">\(b\)</span>æ˜¯ä»»æ„çš„å‡½æ•°ï¼Œä½†æ˜¯<span class="math inline">\(b\)</span>ä¸èƒ½ä¾èµ–äº<span class="math inline">\(A\)</span>ã€‚æŠŠ<span class="math inline">\(b\)</span>ä½œä¸ºåŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(S,A)\)</span>çš„åŸºçº¿ï¼Œå¯¹ç­–ç•¥æ¢¯åº¦æ²¡æœ‰å½±å“ï¼š</p><p><span class="math inline">\(\nabla_\theta J(\theta) =\mathbb{E}_S\left[\mathbb{E}_{A\sim\pi(\cdot|S;\theta)}\left[(Q_\pi(S,A)- b) \cdot \nabla_\theta \ln \pi(A|S;\theta)\right]\right].\)</span></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-1-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6%E6%96%B9%E6%B3%95/c3d57c264988c4213064eeef36151b5a.png"></p><p>å®šç† 8.1 è¯´æ˜<span class="math inline">\(b\)</span>çš„å–å€¼ä¸å½±å“ç­–ç•¥æ¢¯åº¦çš„æ­£ç¡®æ€§ã€‚ä¸è®ºæ˜¯è®©<span class="math inline">\(b = 0\)</span>è¿˜æ˜¯è®©<span class="math inline">\(b= V_\pi(S)\)</span>, å¯¹æœŸæœ›çš„ç»“æœæ¯«æ— å½±å“ï¼ŒæœŸæœ›çš„ç»“æœéƒ½ä¼šç­‰äº<span class="math inline">\(\nabla_\theta J(\theta)\)</span>ã€‚å…¶åŸå› åœ¨äº</p><p><span class="math inline">\(\mathbb{E}_S\left[\mathbb{E}_{A\sim\pi(\cdot|S;\theta)}\left[b\cdot \nabla_\theta \ln \pi(A|S;\theta)\right]\right] = 0.\)</span></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-1-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6%E6%96%B9%E6%B3%95/1733224482543-ea224a19-4b62-467b-92f0-5a68098b84a3.png"></p><p>å®šç†ä¸­çš„ç­–ç•¥æ¢¯åº¦è¡¨ç¤ºæˆäº†æœŸæœ›çš„å½¢å¼ï¼Œæˆ‘ä»¬å¯¹æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°ä¸€ä¸ªçŠ¶æ€<span class="math inline">\(s\)</span>,ç„¶åæ ¹æ®ç­–ç•¥ç½‘ç»œæŠ½æ ·å¾—åˆ°<span class="math inline">\(a \sim\pi(\cdot|s;\theta)\)</span>ã€‚é‚£ä¹ˆç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_\thetaJ(\theta)\)</span>å¯ä»¥è¿‘ä¼¼ä¸ºä¸‹é¢çš„éšæœºæ¢¯åº¦ï¼š</p><p><span class="math inline">\(\boldsymbol{g}_b(s,a;\theta) =\left[Q_\pi(s,a) - b\right] \cdot \nabla_\theta \ln\pi(a|s;\theta).\)</span></p><p>ä¸è®º<span class="math inline">\(b\)</span>çš„å–å€¼æ˜¯ 0 è¿˜æ˜¯<span class="math inline">\(V_\pi(s)\)</span>, å¾—åˆ°çš„éšæœºæ¢¯åº¦<span class="math inline">\(\boldsymbol{g}_b(s,a;\theta)\)</span>éƒ½æ˜¯<span class="math inline">\(\nabla_\theta J(\theta)\)</span>çš„æ— åä¼°è®¡ï¼š</p><p><span class="math inline">\(\text{Bias} =\mathbb{E}_{S,A}\left[\boldsymbol{g}_b(S,A;\theta)\right] -\nabla_\theta J(\theta) = 0.\)</span></p><p>è™½ç„¶<span class="math inline">\(b\)</span>çš„å–å€¼å¯¹<span class="math inline">\(\mathbb{E}_{S,A}\left[\boldsymbol{g}_b(S,A;\theta)\right]\)</span>æ¯«æ— å½±å“ï¼Œä½†æ˜¯<span class="math inline">\(b\)</span>å¯¹éšæœºæ¢¯åº¦<span class="math inline">\(\boldsymbol{g}_b(s,a;\theta)\)</span>æ˜¯æœ‰å½±å“çš„ã€‚ç”¨ä¸åŒçš„<span class="math inline">\(b\)</span></p><p>, å¾—åˆ°çš„æ–¹å·®</p><p><span class="math inline">\(\text{Var} =\mathbb{E}_{S,A}\left\|\boldsymbol{g}_b(S,A;\theta) - \nabla_\thetaJ(\theta)\right\|^2\)</span></p><p>ä¼šæœ‰æ‰€ä¸åŒã€‚å¦‚æœ<span class="math inline">\(b\)</span>å¾ˆæ¥è¿‘<span class="math inline">\(Q_\pi(s,a)\)</span>å…³äº<span class="math inline">\(a\)</span>çš„å‡å€¼ï¼Œé‚£ä¹ˆæ–¹å·®ä¼šæ¯”è¾ƒå°ã€‚å› æ­¤ï¼Œ<span class="math inline">\(b = V_\pi(S)\)</span>æ˜¯å¾ˆå¥½çš„åŸºçº¿ã€‚</p><h2 id="åŸºçº¿çš„ç›´è§‚è§£é‡Š">åŸºçº¿çš„ç›´è§‚è§£é‡Š</h2><p>ç­–ç•¥æ¢¯åº¦å…¬å¼æœŸæœ›ä¸­çš„<span class="math inline">\(Q_\pi(S,A) \cdot\nabla_\theta \ln \pi(A|S;\theta)\)</span>çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»¥å›¾8.1ä¸­çš„å·¦å›¾ä¸ºä¾‹ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/6-1-%E5%B8%A6%E5%9F%BA%E7%BA%BF%E7%9A%84%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6%E6%96%B9%E6%B3%95/1733224326893-df037946-f4bf-4673-834a-ac957d5ac53d.png"></p><p>ç»™å®šçŠ¶æ€<span class="math inline">\(s_t\)</span>, åŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(A=\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>,åŠ¨ä½œä»·å€¼å‡½æ•°ç»™æ¯ä¸ªåŠ¨ä½œæ‰“åˆ†ï¼š</p><p><span class="math inline">\(Q_\pi(s_t,å·¦)=80, Q_\pi(s_t,å³)=-20,Q_\pi(s_t,ä¸Š)=180\)</span></p><p>è¿™äº›åˆ†å€¼ä¼šä¹˜åˆ°æ¢¯åº¦<span class="math inline">\(\nabla_\theta \ln\pi(A|S;\theta)\)</span>ä¸Šã€‚åœ¨åšå®Œæ¢¯åº¦ä¸Šå‡ä¹‹åï¼Œæ–°çš„ç­–ç•¥ä¼šå€¾å‘äºåˆ†å€¼é«˜çš„åŠ¨ä½œã€‚</p><ul><li>åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_\pi(s_t,ä¸Š)=180\)</span>å¾ˆå¤§ï¼Œè¯´æ˜åŸºäºçŠ¶æ€<span class="math inline">\(s_t\)</span>é€‰æ‹©åŠ¨ä½œâ€œä¸Šâ€æ˜¯å¾ˆå¥½çš„å†³ç­–ã€‚è®©æ¢¯åº¦<span class="math inline">\(\nabla_\theta \ln\pi(ä¸Š|s_t;\theta)\)</span>ä¹˜ä»¥å¤§çš„ç³»æ•°<span class="math inline">\(Q_\pi(s_t,ä¸Š)=180\)</span>,é‚£ä¹ˆåšæ¢¯åº¦ä¸Šå‡æ›´æ–°<span class="math inline">\(\theta\)</span>ä¹‹åï¼Œä¼šè®©<span class="math inline">\(\pi(ä¸Š|s_t;\theta)\)</span>å˜å¤§ï¼Œåœ¨çŠ¶æ€<span class="math inline">\(s_t\)</span>çš„æƒ…å†µä¸‹æ›´å€¾å‘äºåŠ¨ä½œâ€œä¸Šâ€ã€‚</li><li>ç›¸åï¼Œ<span class="math inline">\(Q_\pi(s_t,å³)=-20\)</span>è¯´æ˜åŸºäºçŠ¶æ€<span class="math inline">\(s_t\)</span>é€‰æ‹©åŠ¨ä½œâ€œå³â€æ˜¯ç³Ÿç³•çš„å†³ç­–ã€‚è®©æ¢¯åº¦<span class="math inline">\(\nabla_\theta \ln\pi(å³|s_t;\theta)\)</span>ä¹˜ä»¥è´Ÿçš„ç³»æ•°<span class="math inline">\(Q_\pi(s_t,å³)=-20\)</span>,é‚£ä¹ˆåšæ¢¯åº¦ä¸Šå‡æ›´æ–°<span class="math inline">\(\theta\)</span>ä¹‹åï¼Œ ä¼šè®©<span class="math inline">\(\pi(å³|s_t;\theta)\)</span>å˜å°ï¼Œåœ¨çŠ¶æ€<span class="math inline">\(s_t\)</span>çš„æƒ…å†µä¸‹é€‰æ‹©åŠ¨ä½œâ€œå³â€çš„æ¦‚ç‡æ›´å°ã€‚</li></ul><p>æ ¹æ®ä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬åœ¨ä¹çš„æ˜¯åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_\pi(s_t,å·¦)\)</span>ã€<span class="math inline">\(Q_\pi(s_t,å³)\)</span>ã€<span class="math inline">\(Q_\pi(s_t,ä¸Š)\)</span>ä¸‰è€…çš„ç›¸å¯¹å¤§å°ï¼Œè€Œéç»å¯¹å¤§å°ã€‚å¦‚æœç»™ä¸‰è€…éƒ½å‡å»<span class="math inline">\(b=60\)</span>,é‚£ä¹ˆä¸‰è€…çš„ç›¸å¯¹å¤§å°æ˜¯ä¸å˜çš„ï¼›åŠ¨ä½œâ€œä¸Šâ€ä»ç„¶æ˜¯æœ€å¥½çš„ï¼ŒåŠ¨ä½œâ€œå³â€ä»ç„¶æ˜¯æœ€å·®çš„ã€‚å› æ­¤<span class="math inline">\([Q_\pi(s_t,a_t) - b] \cdot \nabla_\theta \ln\pi(A|S;\theta)\)</span>ä¾ç„¶èƒ½æŒ‡å¯¼<span class="math inline">\(\theta\)</span>åšè°ƒæ•´ï¼Œä½¿å¾—<span class="math inline">\(\pi(ä¸Š|s_t;\theta)\)</span>å˜å¤§ï¼Œè€Œ<span class="math inline">\(\pi(å³|s_t;\theta)\)</span>å˜å°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.3 Dueling Network</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-3-Dueling-Network/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-3-Dueling-Network/</url>
    
    <content type="html"><![CDATA[<h1 id="å¯¹å†³ç½‘ç»œ-dueling-network">å¯¹å†³ç½‘ç»œ (Dueling Network)</h1><p>æœ¬èŠ‚ä»‹ç»å¯¹å†³ç½‘ç»œ (dueling network), å®ƒæ˜¯å¯¹ DQNçš„ç¥ç»ç½‘ç»œç»“æ„çš„æ”¹è¿›ã€‚å®ƒçš„åŸºæœ¬æƒ³æ³•æ˜¯å°†æœ€ä¼˜åŠ¨ä½œä»·å€¼<span class="math inline">\(Q^*\)</span>åˆ†è§£æˆæœ€ä¼˜çŠ¶æ€ä»·å€¼<span class="math inline">\(V^*\)</span>åŠ æœ€ä¼˜ä¼˜åŠ¿<span class="math inline">\(D^*\)</span>ã€‚å¯¹å†³ç½‘ç»œçš„è®­ç»ƒä¸ DQNå®Œå…¨ç›¸åŒï¼Œå¯ä»¥ç”¨ Q å­¦ä¹ ç®—æ³•æˆ–è€…åŒ Q å­¦ä¹ ç®—æ³• ã€‚</p><h2 id="æœ€ä¼˜ä¼˜åŠ¿å‡½æ•°">æœ€ä¼˜ä¼˜åŠ¿å‡½æ•°</h2><p>åœ¨ä»‹ç»å¯¹å†³ç½‘ç»œ (duelingnetwork)ä¹‹å‰ï¼Œå…ˆå¤ä¹ ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s, a)\)</span>æ˜¯å›æŠ¥çš„æœŸæœ›ï¼š</p><p><span class="math inline">\(Q_\pi(s, a) = \mathbb{E}[U_t | S_t = s,A_t = a]\)</span>.</p><p>æœ€ä¼˜åŠ¨ä½œä»·å€¼<span class="math inline">\(Q^*\)</span>çš„å®šä¹‰æ˜¯ï¼š</p><p><span class="math inline">\(Q^*(s, a) = \max_\pi Q_\pi(s, a), \foralls \in S, a \in A\)</span>.</p><p>çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(s)\)</span>æ˜¯<span class="math inline">\(Q_\pi(s, a)\)</span>å…³äº<span class="math inline">\(a\)</span>çš„æœŸæœ›ï¼š</p><p><span class="math inline">\(V_\pi(s) = \mathbb{E}_{A \sim\pi}[Q_\pi(s, A)]\)</span>.</p><p>æœ€ä¼˜çŠ¶æ€ä»·å€¼<span class="math inline">\(V^*\)</span>çš„å®šä¹‰æ˜¯ï¼š</p><p><span class="math inline">\(V^*(s) = \max_\pi V_\pi(s), \forall s \inS\)</span>.</p><p>æœ€ä¼˜ä¼˜åŠ¿å‡½æ•° (optimal advantage function) çš„å®šä¹‰æ˜¯ï¼š</p><p><span class="math inline">\(D^*(s, a) \triangleq Q^*(s, a) -V^*(s)\)</span>.</p><p>é€šè¿‡æ•°å­¦æ¨å¯¼ï¼Œå¯ä»¥è¯æ˜ä¸‹é¢çš„å®šç†ï¼š</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-3-Dueling-Network/1733215260567-a6f5c97f-8176-40e9-b342-7e0e9696aaf9.png"></p><p><span class="math inline">\(Q^*(s, a) = V^*(s) + D^*(s, a) - \max_aD^*(s, a) \quad \forall s \in S, a \in A\)</span>.</p><h2 id="å¯¹å†³ç½‘ç»œ">å¯¹å†³ç½‘ç»œ</h2><p>ä¸ DQN ä¸€æ ·ï¼Œå¯¹å†³ç½‘ç»œ (dueling network) ä¹Ÿæ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ã€‚å¯¹å†³ç½‘ç»œä¸ DQNçš„åŒºåˆ«åœ¨äºç¥ç»ç½‘ç»œç»“æ„ä¸åŒã€‚ç›´è§‚ä¸Šï¼Œå¯¹å†³ç½‘ç»œå¯ä»¥äº†è§£åˆ°å“ªäº›çŠ¶æ€æœ‰ä»·å€¼æˆ–è€…æ²¡ä»·å€¼ï¼Œè€Œæ— éœ€äº†è§£æ¯ä¸ªåŠ¨ä½œå¯¹æ¯ä¸ªçŠ¶æ€çš„å½±å“ã€‚å®è·µä¸­ï¼Œå¯¹å†³ç½‘ç»œå…·æœ‰æ›´å¥½çš„æ•ˆæœã€‚ç”±äºå¯¹å†³ç½‘ç»œä¸DQN éƒ½æ˜¯å¯¹<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ï¼Œå¯ä»¥ç”¨å®Œå…¨ç›¸åŒçš„ç®—æ³•è®­ç»ƒä¸¤ç§ç¥ç»ç½‘ç»œã€‚</p><p>å¯¹å†³ç½‘ç»œç”±ä¸¤ä¸ªç¥ç»ç½‘ç»œç»„æˆã€‚ä¸€ä¸ªç¥ç»ç½‘ç»œè®°ä½œ<span class="math inline">\(D(s, a; w^D)\)</span>, å®ƒæ˜¯å¯¹æœ€ä¼˜ä¼˜åŠ¿å‡½æ•°<span class="math inline">\(D^*(s, a)\)</span>çš„è¿‘ä¼¼ã€‚å¦ä¸€ä¸ªç¥ç»ç½‘ç»œè®°ä½œ<span class="math inline">\(V(s; w^V)\)</span>,å®ƒæ˜¯å¯¹æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V^*(s)\)</span>çš„è¿‘ä¼¼ã€‚æŠŠå®šç† 6.1 ä¸­çš„<span class="math inline">\(D^*\)</span>å’Œ<span class="math inline">\(V^*\)</span>æ›¿æ¢æˆç›¸åº”çš„ç¥ç»ç½‘ç»œï¼Œé‚£ä¹ˆæœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>å°±è¢«è¿‘ä¼¼æˆä¸‹é¢çš„ç¥ç»ç½‘ç»œï¼š</p><p><span class="math inline">\(Q(s, a; w) \triangleq V(s; w^V) + D(s, a;w^D) - \max_{a \in \mathcal{A}} D(s, a; w^D).\)</span>.</p><p>å…¬å¼å·¦è¾¹çš„<span class="math inline">\(Q(s, a;w)\)</span>å°±æ˜¯å¯¹å†³ç½‘ç»œï¼Œå®ƒæ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ã€‚å®ƒçš„å‚æ•°è®°ä½œ<span class="math inline">\(w \triangleq (w^V; w^D)\)</span>ã€‚</p><p>å¯¹å†³ç½‘ç»œçš„ç»“æ„å¦‚å›¾ 6.6 æ‰€ç¤ºã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-3-Dueling-Network/1733215564829-2b8fcd67-d02d-42ee-b881-92026b097436.png"></p><p>å¯ä»¥è®©ä¸¤ä¸ªç¥ç»ç½‘ç»œ<span class="math inline">\(D(s, a;w^D)\)</span>ä¸<span class="math inline">\(V(s;w^V)\)</span>å…±äº«éƒ¨åˆ†å·ç§¯å±‚ï¼›è¿™äº›å·ç§¯å±‚æŠŠè¾“å…¥çš„çŠ¶æ€<span class="math inline">\(s\)</span>æ˜ å°„æˆç‰¹å¾å‘é‡ï¼Œç‰¹å¾å‘é‡æ˜¯â€œä¼˜åŠ¿å¤´â€ä¸â€œçŠ¶æ€ä»·å€¼å¤´â€çš„è¾“å…¥ã€‚ä¼˜åŠ¿å¤´è¾“å‡ºä¸€ä¸ªå‘é‡ï¼Œå‘é‡çš„ç»´åº¦æ˜¯åŠ¨ä½œç©ºé—´çš„å¤§å°<span class="math inline">\(\|A\|\)</span>,å‘é‡æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªåŠ¨ä½œã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒåŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>ã€‚ä¼˜åŠ¿å¤´çš„è¾“å‡ºæ˜¯ä¸‰ä¸ªå€¼ï¼š</p><p><span class="math inline">\(D(s, å·¦; w^D) = -90, D(s, å³; w^D) =-420, D(s, ä¸Š; w^D) = 30\)</span>.</p><p>çŠ¶æ€ä»·å€¼å¤´è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå®æ•°ï¼Œæ¯”å¦‚</p><p><span class="math inline">\(V(s; w^V) = 300\)</span>.</p><p>é¦–å…ˆè®¡ç®—</p><p><span class="math inline">\(\max_a D(s, a; w^D) = \max\{-90, -420,30\} = 30\)</span>.</p><p>ç„¶åç”¨å…¬å¼ (6.1) è®¡ç®—å‡ºï¼š</p><p><span class="math inline">\(Q(s, å·¦; w) = 180, Q(s, å³; w) = -150,Q(s, ä¸Š; w) = 300\)</span>.</p><p>è¿™æ ·å°±å¾—åˆ°äº†å¯¹å†³ç½‘ç»œçš„æœ€ç»ˆè¾“å‡ºã€‚</p><h2 id="è§£å†³ä¸å”¯ä¸€æ€§">è§£å†³ä¸å”¯ä¸€æ€§</h2><p>è¯»è€…å¯èƒ½ä¼šæœ‰ä¸‹é¢çš„ç–‘é—®ã€‚å¯¹å†³ç½‘ç»œæ˜¯ç”±å®šç† 6.1æ¨å¯¼å‡ºçš„ï¼Œè€Œå®šç†ä¸­æœ€å³çš„ä¸€é¡¹æ’ç­‰äºé›¶ï¼š</p><p><span class="math inline">\(\max_a D^*(s, a) = 0, \forall s \inS\)</span>.</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥æŠŠæœ€ä¼˜åŠ¨ä½œä»·å€¼å†™æˆä¸¤ç§ç­‰ä»·å½¢å¼ï¼š</p><p><span class="math inline">\(\begin{array}{lll}Q_{\star}(s, a) &amp;=&amp; V_{\star}(s) + D_{\star}(s, a) &amp;\text{(ç¬¬ä¸€ç§å½¢å¼)} \\&amp;=&amp; V_{\star}(s) + D_{\star}(s, a) - \max_{a \in \mathcal{A}}D_{\star}(s, a). &amp; \text{(ç¬¬äºŒç§å½¢å¼)}\end{array}\)</span></p><p>ä¹‹å‰æˆ‘ä»¬æ ¹æ®ç¬¬äºŒç§å½¢å¼å®ç°å¯¹å†³ç½‘ç»œã€‚æˆ‘ä»¬å¯å¦æ ¹æ®ç¬¬ä¸€ç§å½¢å¼ï¼ŒæŠŠå¯¹å†³ç½‘ç»œæŒ‰ç…§ä¸‹é¢çš„æ–¹å¼å®ç°å‘¢ï¼š</p><p><span class="math inline">\(Q(s, a; w) = V(s; w^V) + D(s, a;w^D)\)</span>?</p><p>ç­”æ¡ˆæ˜¯ä¸å¯ä»¥è¿™æ ·å®ç°å¯¹å†³ç½‘ç»œï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´ä¸å”¯ä¸€æ€§ã€‚å‡å¦‚è¿™æ ·å®ç°å¯¹å†³ç½‘ç»œï¼Œé‚£ä¹ˆ<span class="math inline">\(V\)</span>å’Œ<span class="math inline">\(D\)</span>å¯ä»¥éšæ„ä¸Šä¸‹æ³¢åŠ¨ï¼Œæ¯”å¦‚ä¸€ä¸ªå¢å¤§ 100,å¦ä¸€ä¸ªå‡å° 100ï¼š</p><p><span class="math inline">\(V(s; w^{\tilde{V}}) \triangleq V(s; w^V)+ 100, D(s, a; w^{\tilde{D}}) \triangleq D(s, a; w^D) -100\)</span>.</p><p>è¿™æ ·çš„ä¸Šä¸‹æ³¢åŠ¨ä¸å½±å“æœ€ç»ˆçš„è¾“å‡ºï¼š</p><p><span class="math inline">\(V(s; w^V) + D(s, a; w^D) = V(s;w^{\tilde{V}}) + D(s, a; w^{\tilde{D}})\)</span>.</p><p>è¿™å°±æ„å‘³ç€<span class="math inline">\(V\)</span>å’Œ<span class="math inline">\(D\)</span>çš„å‚æ•°å¯ä»¥å¾ˆéšæ„åœ°å˜åŒ–ï¼Œå´ä¸ä¼šå½±å“è¾“å‡ºçš„Qã€‚æˆ‘ä»¬ä¸å¸Œæœ›è¿™ç§æƒ…å†µå‡ºç°ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´è®­ç»ƒçš„è¿‡ç¨‹ä¸­å‚æ•°ä¸ç¨³å®šã€‚</p><p>å› æ­¤å¾ˆæœ‰å¿…è¦åœ¨å¯¹å†³ç½‘ç»œä¸­åŠ å…¥<span class="math inline">\(\max_a D(s,a; w^D)\)</span>è¿™ä¸€é¡¹ã€‚å®ƒä½¿å¾—<span class="math inline">\(V\)</span>å’Œ<span class="math inline">\(D\)</span>ä¸èƒ½éšæ„ä¸Šä¸‹æ³¢åŠ¨ã€‚å‡å¦‚è®©<span class="math inline">\(V\)</span>å˜å¤§ 100,è®©<span class="math inline">\(D\)</span>å˜å° 100, åˆ™å¯¹å†³ç½‘ç»œçš„è¾“å‡ºä¼šå¢å¤§100,è€Œéä¸å˜ï¼š</p><p><span class="math inline">\(V\left(s; \tilde{w}^{V}\right) +D\left(s, a; \tilde{w}^{D}\right) - \max_{a} D\left(s, a;\tilde{w}^{D}\right)\)</span>.</p><p><span class="math inline">\(= V\left(s; w^{V}\right) + D\left(s, a;w^{D}\right) - \max_{a} D\left(s, a; w^{D}\right) + 100.\)</span></p><p>ä»¥ä¸Šè®¨è®ºè¯´æ˜äº†ä¸ºä»€ä¹ˆ<span class="math inline">\(\max_a D(s, a;w^D)\)</span>è¿™ä¸€é¡¹ä¸èƒ½çœç•¥ã€‚</p><h2 id="å¯¹å†³ç½‘ç»œçš„å®é™…å®ç°">å¯¹å†³ç½‘ç»œçš„å®é™…å®ç°</h2><p>æŒ‰ç…§å®šç† 6.1, å¯¹å†³ç½‘ç»œåº”è¯¥å®šä¹‰æˆï¼š</p><p><span class="math inline">\(Q(s, a; w) \triangleq V(s; w^V) + D(s, a;w^D) - \max_a D(s, a; w^D)\)</span>.</p><p>æœ€å³è¾¹çš„ max é¡¹çš„ç›®çš„æ˜¯è§£å†³ä¸å”¯ä¸€æ€§ã€‚å®é™…å®ç°çš„æ—¶å€™ï¼Œç”¨ mean ä»£æ›¿ maxä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚æ‰€ä»¥å®é™… ä¸Šä¼šè¿™æ ·å®šä¹‰å¯¹å†³ç½‘ç»œï¼š</p><p><span class="math inline">\(Q(s, a; w) \triangleq V(s; w^V) + D(s, a;w^D) - \text{mean}_{a \in \mathcal{A}} D(s, a; w^D).\)</span>.</p><p>å¯¹å†³ç½‘ç»œä¸ DQN éƒ½æ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ï¼Œæ‰€ä»¥å¯¹å†³ç½‘ç»œçš„è®­ç»ƒå’Œå†³ç­–ä¸ DQNå®Œå…¨ä¸€æ ·ã€‚æ¯”å¦‚å¯ä»¥è¿™æ ·è®­ç»ƒå¯¹å†³ç½‘ç»œï¼š</p><ul><li>ç”¨<span class="math inline">\(\epsilon\)</span>-greedyç®—æ³•æ§åˆ¶æ™ºèƒ½ä½“ï¼Œæ”¶é›†ç»éªŒï¼ŒæŠŠ<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>è¿™æ ·çš„å››å…ƒç»„å­˜å…¥ç»éªŒå›æ”¾æ•°ç»„ã€‚</li><li>ä»æ•°ç»„é‡ŒéšæœºæŠ½å–å››å…ƒç»„ï¼Œç”¨åŒ Q å­¦ä¹ ç®—æ³•æ›´æ–°å¯¹å†³ç½‘ç»œå‚æ•°<span class="math inline">\(w = (w^D, w^V)\)</span>ã€‚</li></ul><p>å®Œæˆè®­ç»ƒä¹‹åï¼ŒåŸºäºå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,è®©å¯¹å†³ç½‘ç»œç»™æ‰€æœ‰åŠ¨ä½œæ‰“åˆ†ï¼Œç„¶åé€‰æ‹©åˆ†æ•°æœ€é«˜çš„åŠ¨ä½œï¼š</p><p><span class="math inline">\(a_t = \underset{a \inA}{\operatorname{argmax}} Q(s_t, a; w)\)</span>.</p><p>ç®€è€Œè¨€ä¹‹ï¼Œæ€ä¹ˆæ ·è®­ç»ƒ DQN,å°±æ€ä¹ˆæ ·è®­ç»ƒå¯¹å†³ç½‘ç»œï¼›æ€ä¹ˆæ ·ç”¨ DQNåšæ§åˆ¶ï¼Œå°±æ€ä¹ˆæ ·ç”¨å¯¹å†³ç½‘ç»œåšæ§åˆ¶ã€‚å¦‚æœä¸€ä¸ªæŠ€å·§èƒ½æ”¹è¿› DQNçš„è®­ç»ƒï¼Œè¿™ä¸ªæŠ€å·§ä¹Ÿèƒ½æ”¹è¿›å¯¹å†³ç½‘ç»œã€‚åŒæ ·çš„é“ç†ï¼Œå› ä¸º Q å­¦ä¹ ç®—æ³•å¯¼è‡´ DQNå‡ºç°é«˜ä¼°ï¼Œæ‰€ä»¥ Q å­¦ä¹ ç®—æ³•ä¹Ÿä¼šå¯¼è‡´å¯¹å†³ç½‘ç»œå‡ºç°é«˜ä¼°ã€‚</p><h1 id="å™ªå£°ç½‘ç»œ">å™ªå£°ç½‘ç»œ</h1><p>æœ¬èŠ‚ä»‹ç»å™ªå£°ç½‘ç»œ(noisy net),è¿™æ˜¯ä¸€ç§éå¸¸ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥æ˜¾è‘—æé«˜ DQNçš„è¡¨ç°ã€‚å™ªå£°ç½‘ç»œçš„åº”ç”¨ä¸å±€é™äº DQN,å®ƒå¯ä»¥ç”¨äºå‡ ä¹æ‰€æœ‰çš„æ·±åº¦å¼ºåŒ–å­¦ä¹ æ–¹æ³•ã€‚</p><h2 id="å™ªå£°ç½‘ç»œçš„åŸç†">å™ªå£°ç½‘ç»œçš„åŸç†</h2><p>æŠŠç¥ç»ç½‘ç»œä¸­çš„å‚æ•°<span class="math inline">\(w\)</span>æ›¿æ¢æˆ<span class="math inline">\(\mu + \sigma \circ \xi\)</span>ã€‚æ­¤å¤„çš„<span class="math inline">\(\mu\)</span>ã€<span class="math inline">\(\sigma\)</span>ã€<span class="math inline">\(\xi\)</span>çš„å½¢çŠ¶ä¸<span class="math inline">\(w\)</span>å®Œå…¨ç›¸åŒã€‚</p><p><span class="math inline">\(\mu\)</span>ã€<span class="math inline">\(\sigma\)</span>åˆ†åˆ«è¡¨ç¤ºå‡å€¼å’Œæ ‡å‡†å·®ï¼Œå®ƒä»¬æ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œéœ€è¦ä»ç»éªŒä¸­å­¦ä¹ ã€‚<span class="math inline">\(\xi\)</span>æ˜¯éšæœºå™ªå£°ï¼Œå®ƒçš„æ¯ä¸ªå…ƒç´ ç‹¬ç«‹ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒ<span class="math inline">\(\mathcal{N}(0,1)\)</span>ä¸­éšæœºæŠ½å–ã€‚ç¬¦å·â€œ<span class="math inline">\(\circ\)</span>â€è¡¨ç¤ºé€é¡¹ä¹˜ç§¯ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-3-Dueling-Network/1733216326369-7ef961a9-6932-415c-83e2-9a584cc9a6f2.png"></p><p>å¦‚æœ<span class="math inline">\(w\)</span>æ˜¯å‘é‡ï¼Œé‚£ä¹ˆæœ‰</p><p><span class="math inline">\(w_i = \mu_i + \sigma_i \cdot\xi_i\)</span>.</p><p>å¦‚æœ<span class="math inline">\(w\)</span>æ˜¯çŸ©é˜µï¼Œé‚£ä¹ˆæœ‰</p><p><span class="math inline">\(w_{ij} = \mu_{ij} + \sigma_{ij} \cdot\xi_{ij}\)</span>.</p><p>å™ªå£°ç½‘ç»œçš„æ„æ€æ˜¯å‚æ•°<span class="math inline">\(w\)</span>çš„æ¯ä¸ªå…ƒç´ <span class="math inline">\(w_i\)</span>ä»å‡å€¼ä¸º<span class="math inline">\(\mu_i\)</span>ã€æ ‡å‡†å·®ä¸º<span class="math inline">\(\sigma_i\)</span>çš„æ­£æ€åˆ†å¸ƒä¸­æŠ½å–ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼ŒæŸä¸€ä¸ªå…¨è¿æ¥å±‚è®°ä½œï¼š</p><p><span class="math inline">\(z = \text{ReLU}(Wx + b)\)</span>.</p><p>å…¬å¼ä¸­çš„å‘é‡<span class="math inline">\(x\)</span>æ˜¯è¾“å…¥ï¼ŒçŸ©é˜µ<span class="math inline">\(W\)</span>å’Œå‘é‡<span class="math inline">\(b\)</span>æ˜¯å‚æ•°ï¼ŒReLU æ˜¯æ¿€æ´»å‡½æ•°ï¼Œ<span class="math inline">\(z\)</span>æ˜¯è¿™ä¸€å±‚çš„è¾“å‡ºã€‚å™ªå£°ç½‘ç»œæŠŠè¿™ä¸ªå…¨è¿æ¥å±‚æ›¿æ¢æˆï¼š</p><p><span class="math inline">\(z = \text{ReLU}((W^\mu + W^\sigma \circW^\xi)x + (b^\mu + b^\sigma \circ b^\xi))\)</span>.</p><p>å…¬å¼ä¸­çš„<span class="math inline">\(W^\mu\)</span>ã€<span class="math inline">\(W^\sigma\)</span>ã€<span class="math inline">\(b^\mu\)</span>ã€<span class="math inline">\(b^\sigma\)</span>æ˜¯å‚æ•°ï¼Œéœ€è¦ä»ç»éªŒä¸­å­¦ä¹ ã€‚çŸ©é˜µ<span class="math inline">\(W^\xi\)</span>å’Œå‘é‡<span class="math inline">\(b^\xi\)</span>çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç‹¬ç«‹ä»<span class="math inline">\(\mathcal{N}(0,1)\)</span>ä¸­éšæœºæŠ½å–çš„ï¼Œè¡¨ç¤ºå™ªå£°ã€‚</p><p>è®­ç»ƒå™ªå£°ç½‘ç»œçš„æ–¹æ³•ä¸è®­ç»ƒæ ‡å‡†çš„ç¥ç»ç½‘ç»œå®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯åšåå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦ï¼Œç„¶åç”¨æ¢¯åº¦æ›´æ–°ç¥ç»å‚æ•°ã€‚æŠŠæŸå¤±å‡½æ•°è®°ä½œ<span class="math inline">\(L\)</span>ã€‚å·²çŸ¥æ¢¯åº¦<span class="math inline">\(\frac{\partial L}{\partialz}\)</span>,å¯ä»¥ç”¨é“¾å¼æ³•åˆ™ç®—å‡ºæŸå¤±å…³äºå‚æ•°çš„æ¢¯åº¦ï¼š</p><p><span class="math inline">\(\frac{\partial L}{\partial W^\mu} =\frac{\partial z}{\partial W^\mu} \cdot \frac{\partial L}{\partial z},\frac{\partial L}{\partial b^\mu} = \frac{\partial z}{\partial b^\mu}\cdot \frac{\partial L}{\partial z}, \frac{\partial L}{\partialW^\sigma} = \frac{\partial z}{\partial W^\sigma} \cdot \frac{\partialL}{\partial z}, \frac{\partial L}{\partial b^\sigma} = \frac{\partialz}{\partial b^\sigma} \cdot \frac{\partial L}{\partial z}\)</span>.</p><p>ç„¶åå¯ä»¥åšæ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°<span class="math inline">\(W^\mu\)</span>ã€<span class="math inline">\(W^\sigma\)</span>ã€<span class="math inline">\(b^\mu\)</span>ã€<span class="math inline">\(b^\sigma\)</span>ã€‚</p><h2 id="å™ªå£°-dqn">å™ªå£° DQN</h2><p>å™ªå£°ç½‘ç»œå¯ä»¥ç”¨äº DQNã€‚æ ‡å‡†çš„ DQN è®°ä½œ<span class="math inline">\(Q(s,a; w)\)</span>, å…¶ä¸­çš„<span class="math inline">\(w\)</span>è¡¨ç¤ºå‚æ•°ã€‚æŠŠ<span class="math inline">\(w\)</span>æ›¿æ¢æˆ<span class="math inline">\(\mu +\sigma \circ \xi\)</span>, å¾—åˆ°å™ªå£° DQN, è®°ä½œï¼š</p><p><span class="math inline">\(\tilde{Q}(s, a, \xi; \mu, \sigma)\triangleq Q(s, a; \mu + \sigma \circ \xi)\)</span>.</p><p>å…¶ä¸­çš„<span class="math inline">\(\mu\)</span>å’Œ<span class="math inline">\(\sigma\)</span>æ˜¯å‚æ•°ï¼Œä¸€å¼€å§‹éšæœºåˆå§‹åŒ–ï¼Œç„¶åä»ç»éªŒä¸­å­¦ä¹ ï¼›è€Œ<span class="math inline">\(\xi\)</span>åˆ™æ˜¯éšæœºç”Ÿæˆï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä»<span class="math inline">\(\mathcal{N}(0, 1)\)</span>ä¸­æŠ½å–ã€‚å™ªå£° DQNçš„å‚æ•°æ•°é‡æ¯”æ ‡å‡† DQN å¤šä¸€å€ã€‚</p><h2 id="æ”¶é›†ç»éªŒ">æ”¶é›†ç»éªŒï¼š</h2><p>DQN å±äºå¼‚ç­–ç•¥ (off-policy)ã€‚æˆ‘ä»¬ç”¨ä»»æ„çš„è¡Œä¸ºç­–ç•¥ (behavior policy)æ§åˆ¶æ™ºèƒ½ä½“ï¼Œæ”¶é›†ç»éªŒï¼Œäº‹ååšç»éªŒå›æ”¾æ›´æ–°å‚æ•°ã€‚åœ¨ä¹‹å‰ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç”¨<span class="math inline">\(\epsilon\)</span>-greedy ä½œä¸ºè¡Œä¸ºç­–ç•¥ï¼š</p><p><span class="math inline">\(a_t = \begin{cases} \underset{a \inA}{\operatorname{argmax}} Q(s_t, a; w), &amp; \text{ä»¥æ¦‚ç‡ }(1-\epsilon); \\ \text{å‡åŒ€æŠ½å– } A \text{ ä¸­çš„ä¸€ä¸ªåŠ¨ä½œ}, &amp;\text{ä»¥æ¦‚ç‡ } \epsilon. \end{cases}\)</span></p><p><span class="math inline">\(\epsilon\)</span>-greedyç­–ç•¥å¸¦æœ‰ä¸€å®šçš„éšæœºæ€§ï¼Œå¯ä»¥è®©æ™ºèƒ½ä½“å°è¯•æ›´å¤šåŠ¨ä½œï¼Œæ¢ç´¢æ›´å¤šçŠ¶æ€ã€‚</p><p>å™ªå£° DQN æœ¬èº«å°±å¸¦æœ‰éšæœºæ€§ï¼Œå¯ä»¥é¼“åŠ±æ¢ç´¢ï¼Œèµ·åˆ°ä¸<span class="math inline">\(\epsilon\)</span>-greedyç­–ç•¥ç›¸åŒçš„ä½œç”¨ã€‚æˆ‘ä»¬ç›´æ¥ç”¨</p><p><span class="math inline">\(a_t = \underset{a \inA}{\operatorname{argmax}} \tilde{Q}(s, a, \xi; \mu, \sigma)\)</span></p><p>ä½œä¸ºè¡Œä¸ºç­–ç•¥ï¼Œæ•ˆæœæ¯”<span class="math inline">\(\epsilon\)</span>-greedyæ›´å¥½ã€‚æ¯åšä¸€ä¸ªå†³ç­–ï¼Œè¦é‡æ–°éšæœºç”Ÿæˆä¸€ä¸ª<span class="math inline">\(\xi\)</span>ã€‚</p><h2 id="q-å­¦ä¹ ç®—æ³•">Q å­¦ä¹ ç®—æ³•:</h2><p>è®­ç»ƒçš„æ—¶å€™ï¼Œæ¯ä¸€è½®ä»ç»éªŒå›æ”¾æ•°ç»„ä¸­éšæœºæŠ½æ ·å‡ºä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>ã€‚ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­åšæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(\xi&#39;\)</span>çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚è®¡ç®— TD ç›®æ ‡ï¼š</p><p><span class="math inline">\(\widehat{y}_j = r_j + \gamma \cdot \max_a\tilde{Q}(s_{j+1}, a, \xi&#39;; \mu, \sigma)\)</span>.</p><p>æŠŠæŸå¤±å‡½æ•°è®°ä½œï¼š</p><p><span class="math inline">\(L(\mu, \sigma) = \frac{1}{2}[\tilde{Q}(s_j, a_j, \xi; \mu, \sigma) - \widehat{y}_j]^2\)</span>,</p><p>å…¶ä¸­çš„<span class="math inline">\(\xi\)</span>ä¹Ÿæ˜¯éšæœºç”Ÿæˆçš„å™ªå£°ï¼Œä½†æ˜¯å®ƒä¸<span class="math inline">\(\xi&#39;\)</span>ä¸åŒã€‚ç„¶ååšæ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ï¼š</p><p><span class="math inline">\(\mu \leftarrow \mu - \alpha_\mu \cdot\nabla_\mu L(\mu, \sigma), \sigma \leftarrow \sigma - \alpha_\sigma\cdot \nabla_\sigma L(\mu, \sigma)\)</span>.</p><p>å…¬å¼ä¸­çš„<span class="math inline">\(\alpha_\mu\)</span>å’Œ<span class="math inline">\(\alpha_\sigma\)</span>æ˜¯å­¦ä¹ ç‡ã€‚è¿™æ ·åšæ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ï¼Œå¯ä»¥è®©æŸå¤±å‡½æ•°å‡å°ï¼Œè®©å™ªå£°DQN çš„é¢„æµ‹æ›´æ¥è¿‘ TD ç›®æ ‡ã€‚</p><h3 id="åšå†³ç­–">åšå†³ç­– :</h3><p>åšå®Œè®­ç»ƒä¹‹åï¼Œå¯ä»¥ç”¨å™ªå£° DQNåšå†³ç­–ã€‚åšå†³ç­–çš„æ—¶å€™ä¸å†éœ€è¦å™ªå£°ï¼Œå› æ­¤å¯ä»¥æŠŠå‚æ•°<span class="math inline">\(\sigma\)</span>è®¾ç½®æˆå…¨é›¶ï¼Œåªä¿ç•™å‚æ•°<span class="math inline">\(\mu\)</span>ã€‚è¿™æ ·ä¸€æ¥ï¼Œå™ªå£° DQN å°±å˜æˆæ ‡å‡†çš„DQN:</p><p><span class="math inline">\(\tilde{Q}(s, a, \xi&#39;; \mu, 0) = Q(s,a; \mu)\)</span>.</p><p>åœ¨è®­ç»ƒçš„æ—¶å€™å¾€ DQNçš„å‚æ•°ä¸­åŠ å…¥å™ªå£°ï¼Œä¸ä»…æœ‰åˆ©äºæ¢ç´¢ï¼Œè¿˜èƒ½å¢å¼ºé²æ£’æ€§ã€‚é²æ£’æ€§çš„æ„æ€æ˜¯å³ä½¿å‚æ•°è¢«æ‰°åŠ¨ï¼ŒDQNä¹Ÿèƒ½å¯¹åŠ¨ä½œä»·å€¼<span class="math inline">\(Q^*\)</span>åšå‡ºå¯é çš„ä¼°è®¡ã€‚ä¸ºä»€ä¹ˆå™ªå£°å¯ä»¥è®© DQNæœ‰æ›´å¼ºçš„é²æ£’æ€§å‘¢ï¼Ÿ</p><p>å‡è®¾åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ä¸åŠ å…¥å™ªå£°ã€‚æŠŠå­¦å‡ºçš„å‚æ•°è®°ä½œ<span class="math inline">\(\mu\)</span>ã€‚å½“å‚æ•°ä¸¥æ ¼ç­‰äº<span class="math inline">\(\mu\)</span>çš„æ—¶å€™ DQNå¯ä»¥å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼åšå‡ºè¾ƒä¸ºå‡†ç¡®çš„ä¼°è®¡ã€‚ä½†æ˜¯å¯¹<span class="math inline">\(\mu\)</span>åšè¾ƒå°çš„æ‰°åŠ¨ï¼Œå°±å¯èƒ½ä¼šè®© DQNçš„è¾“å‡ºåç¦»å¾ˆè¿œã€‚æ‰€è°“â€œå¤±ä¹‹æ¯«å˜ï¼Œè°¬ä»¥åƒé‡Œâ€ã€‚</p><p>å™ªå£° DQN è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œå‚æ•°å¸¦æœ‰å™ªå£°ï¼š</p><p><span class="math inline">\(w = \mu + \sigma \circ \xi\)</span>.</p><p>è®­ç»ƒè¿«ä½¿ DQN åœ¨å‚æ•°å¸¦å™ªå£°çš„æƒ…å†µä¸‹æœ€å°åŒ– TD è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯è¿«ä½¿ DQNå®¹å¿å¯¹å‚æ•°çš„æ‰°åŠ¨ã€‚è®­ç»ƒå‡ºçš„ DQN å…·æœ‰é²æ£’æ€§ï¼šå‚æ•°ä¸ä¸¥æ ¼ç­‰äº<span class="math inline">\(\mu\)</span>ä¹Ÿæ²¡å…³ç³»ï¼Œåªè¦å‚æ•°åœ¨<span class="math inline">\(\mu\)</span>çš„é‚»åŸŸå†…ï¼ŒDQNåšå‡ºçš„é¢„æµ‹éƒ½åº”è¯¥æ¯”è¾ƒåˆç†ã€‚ç”¨å™ªå£° DQN, ä¸ä¼šå‡ºç°â€œå¤±ä¹‹æ¯«å˜ï¼Œè°¬ä»¥åƒé‡Œâ€ã€‚</p><h3 id="è®­ç»ƒæµç¨‹">è®­ç»ƒæµç¨‹</h3><p>å®é™…ç¼–ç¨‹å®ç° DQN çš„æ—¶å€™ï¼Œåº”è¯¥å°†æœ¬ç« çš„å››ç§æŠ€å·§â€”â€”ä¼˜å…ˆç»éªŒå›æ”¾ã€åŒQå­¦ä¹ ã€å¯¹å†³ç½‘ç»œã€å™ªå£°DQNâ€”â€”å…¨éƒ¨ç”¨åˆ°ã€‚åº”è¯¥ç”¨å¯¹å†³ç½‘ç»œçš„ç¥ç»ç½‘ç»œç»“æ„ï¼Œè€Œä¸æ˜¯ç®€å•çš„ DQNç»“æ„ã€‚å¾€å¯¹å†³ç½‘ç»œä¸­çš„å‚æ•°<span class="math inline">\(w\)</span>ä¸­åŠ å…¥å™ªå£°ï¼Œå¾—åˆ°å™ªå£° DQN, è®°ä½œ<span class="math inline">\(\tilde{Q}(s, a, \xi; \mu,\sigma)\)</span>ã€‚è®­ç»ƒè¦ç”¨åŒ Qå­¦ä¹ ã€ä¼˜å…ˆç»éªŒå›æ”¾ï¼Œè€Œä¸æ˜¯åŸå§‹çš„ Qå­¦ä¹ ã€‚åŒ Qå­¦ä¹ éœ€è¦ç›®æ ‡ç½‘ç»œ<span class="math inline">\(\tilde{Q}(s, a,\xi; \mu^-, \sigma^-)\)</span>è®¡ç®— TD ç›®æ ‡ã€‚å®ƒè·Ÿå™ªå£° DQNçš„ç»“æ„ç›¸åŒï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚</p><p>åˆå§‹åŒ–çš„æ—¶å€™ï¼Œéšæœºåˆå§‹åŒ–<span class="math inline">\(\mu\)</span>ã€<span class="math inline">\(\sigma\)</span>,å¹¶ä¸”æŠŠå®ƒä»¬èµ‹å€¼ç»™ç›®æ ‡ç½‘ç»œå‚æ•°ï¼š</p><p><span class="math inline">\(\mu^- \leftarrow \mu. \sigma^- \leftarrow\sigma\)</span>.</p><p>ç„¶åé‡å¤ä¸‹é¢çš„æ­¥éª¤æ›´æ–°å‚æ•°ã€‚æŠŠå½“å‰çš„å‚æ•°è®°ä½œ<span class="math inline">\(\mu_{\text{now}}\)</span>ã€<span class="math inline">\(\sigma_{\text{now}}\)</span>ã€<span class="math inline">\(\mu_{\text{now}}^-\)</span>ã€<span class="math inline">\(\sigma_{\text{now}}^-\)</span>.</p><ol type="1"><li>ç”¨ä¼˜å…ˆç»éªŒå›æ”¾ï¼Œä»æ•°ç»„ä¸­æŠ½å–ä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j, a_j, r_j, s_{j+1})\)</span>ã€‚</li><li>ç”¨æ ‡å‡†æ­£æ€åˆ†å¸ƒç”Ÿæˆ<span class="math inline">\(\xi\)</span>ã€‚å¯¹å™ªå£°DQN åšæ­£å‘ä¼ æ’­ï¼Œå¾—åˆ°ï¼š</li></ol><p><span class="math inline">\(\widehat{q}_j = \tilde{Q}(s_j, a_j, \xi;\mu_{\text{now}}, \sigma_{\text{now}})\)</span>.</p><ol start="3" type="1"><li>ç”¨å™ªå£° DQN é€‰å‡ºæœ€ä¼˜åŠ¨ä½œï¼š</li></ol><p><span class="math inline">\(\tilde{a}_{j+1} = \underset{a \inA}{\operatorname{argmax}} \tilde{Q}(s_{j+1}, a, \xi; \mu_{\text{now}},\sigma_{\text{now}})\)</span>.</p><ol start="4" type="1"><li>ç”¨æ ‡å‡†æ­£æ€åˆ†å¸ƒç”Ÿæˆ<span class="math inline">\(\xi&#39;\)</span>ã€‚ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®—ä»·å€¼ï¼š</li></ol><p><span class="math inline">\(\widehat{q}_{j+1}^- = \tilde{Q}(s_{j+1},\tilde{a}_{j+1}, \xi&#39;; \mu_{\text{now}}^-,\sigma_{\text{now}}^-)\)</span>.</p><ol start="5" type="1"><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š</li></ol><p><span class="math inline">\(\widehat{y}_j^- = r_j + \gamma \cdot\widehat{q}_{j+1}^-\)</span>å’Œ<span class="math inline">\(\delta_j =\widehat{q}_j - \widehat{y}_j^-\)</span>.</p><ol start="6" type="1"><li>è®¾<span class="math inline">\(\alpha_\mu\)</span>å’Œ<span class="math inline">\(\alpha_\sigma\)</span>ä¸ºå­¦ä¹ ç‡ã€‚åšæ¢¯åº¦ä¸‹é™æ›´æ–°å™ªå£°DQN çš„å‚æ•°ï¼š</li></ol><p><span class="math inline">\(\begin{align*}\mu_{\text{new}} &amp;\leftarrow \mu_{\text{now}} - \alpha_\mu \cdot\delta_j \cdot \nabla_\mu \widetilde{Q}(s_j, a_j, \xi; \mu_{\text{now}},\sigma_{\text{now}}), \\\sigma_{\text{new}} &amp;\leftarrow \sigma_{\text{now}} - \alpha_\sigma\cdot \delta_j \cdot \nabla_\sigma \widetilde{Q}(s_j, a_j, \xi;\mu_{\text{now}}, \sigma_{\text{now}}).\end{align*}\)</span>.</p><ol start="7" type="1"><li>è®¾<span class="math inline">\(\tau \in (0,1)\)</span>æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒæ•´çš„è¶…å‚æ•°ã€‚åšåŠ æƒå¹³å‡æ›´æ–°ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š</li></ol><p><span class="math inline">\(\begin{align*}\mu_{\text{new}}^{-} &amp;\leftarrow \tau \cdot \mu_{\text{new}} + (1 -\tau) \cdot \mu_{\text{now}}^{-}, \\\sigma_{\text{new}}^{-} &amp;\leftarrow \tau \cdot \sigma_{\text{new}} +(1 - \tau) \cdot \sigma_{\text{now}}^{-}.\end{align*}\)</span>.</p><h1 id="æ€»ç»“">æ€»ç»“</h1><ul><li>ç»éªŒå›æ”¾å¯ä»¥ç”¨äºå¼‚ç­–ç•¥ç®—æ³•ã€‚ç»éªŒå›æ”¾æœ‰ä¸¤ä¸ªå¥½å¤„ï¼šæ‰“ç ´ç›¸é‚»ä¸¤æ¡ç»éªŒçš„ç›¸å…³æ€§ã€é‡å¤åˆ©ç”¨æ”¶é›†çš„ç»éªŒã€‚</li><li>ä¼˜å…ˆç»éªŒå›æ”¾æ˜¯å¯¹ç»éªŒå›æ”¾çš„ä¸€ç§æ”¹è¿›ã€‚åœ¨åšç»éªŒå›æ”¾çš„æ—¶å€™ï¼Œä»ç»éªŒå›æ”¾æ•°ç»„ä¸­åšåŠ æƒéšæœºæŠ½æ ·ï¼ŒTDè¯¯å·®çš„ç»å¯¹å€¼å¤§çš„ç»éªŒè¢«èµ‹äºˆè¾ƒå¤§çš„æŠ½æ ·æ¦‚ç‡ã€è¾ƒå°çš„å­¦ä¹ ç‡ã€‚</li><li>Q å­¦ä¹ ç®—æ³•ä¼šé€ æˆ DQNé«˜ä¼°çœŸå®çš„ä»·å€¼ã€‚é«˜ä¼°çš„åŸå› æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼Œæœ€å¤§åŒ–é€ æˆTDç›®æ ‡é«˜ä¼°çœŸå®ä»·å€¼ï¼›ç¬¬äºŒï¼Œè‡ªä¸¾å¯¼è‡´é«˜ä¼°ä¼ æ’­ã€‚é«˜ä¼°å¹¶ä¸æ˜¯ç”± DQNæœ¬èº«çš„ç¼ºé™·é€ æˆçš„ï¼Œè€Œæ˜¯ç”±äº Qå­¦ä¹ ç®—æ³•ä¸å¤Ÿå¥½ã€‚åŒ Qå­¦ä¹ æ˜¯å¯¹ Qå­¦ä¹ ç®—æ³•çš„æ”¹è¿›ï¼Œå¯ä»¥æœ‰æ•ˆç¼“è§£é«˜ä¼°ã€‚</li><li>å¯¹å†³ç½‘ç»œä¸ DQN ä¸€æ ·ï¼Œéƒ½æ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ï¼›ä¸¤è€…çš„å”¯ä¸€åŒºåˆ«åœ¨äºç¥ç»ç½‘ç»œç»“æ„ã€‚å¯¹å†³ç½‘ç»œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<span class="math inline">\(D(s, a; w^D)\)</span>æ˜¯å¯¹æœ€ä¼˜ä¼˜åŠ¿å‡½æ•°çš„è¿‘ä¼¼ï¼Œ<span class="math inline">\(V(s;w^V)\)</span>æ˜¯å¯¹æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°çš„è¿‘ä¼¼ã€‚å¯¹å†³ç½‘ç»œçš„è®­ç»ƒä¸ DQNå®Œå…¨ç›¸åŒã€‚</li><li>å™ªå£°ç½‘ç»œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¥ç»ç½‘ç»œç»“æ„ï¼Œç¥ç»ç½‘ç»œä¸­çš„å‚æ•°å¸¦æœ‰éšæœºå™ªå£°ã€‚å™ªå£°ç½‘ç»œå¯ä»¥ç”¨äºDQNç­‰å¤šç§æ·±åº¦å¼ºåŒ–å­¦ä¹ æ¨¡å‹ã€‚å™ªå£°ç½‘ç»œä¸­çš„å™ªå£°å¯ä»¥é¼“åŠ±æ¢ç´¢ï¼Œè®©æ™ºèƒ½ä½“å°è¯•ä¸åŒçš„åŠ¨ä½œï¼Œè¿™æœ‰åˆ©äºå­¦åˆ°æ›´å¥½çš„ç­–ç•¥ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.2 é«˜ä¼°é—®é¢˜</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="é«˜ä¼°é—®é¢˜åŠè§£å†³æ–¹æ³•">é«˜ä¼°é—®é¢˜åŠè§£å†³æ–¹æ³•</h1><p>Q å­¦ä¹ ç®—æ³•æœ‰ä¸€ä¸ªç¼ºé™·ï¼šç”¨ Q å­¦ä¹ è®­ç»ƒå‡ºçš„ DQNä¼šé«˜ä¼°çœŸå®çš„ä»·å€¼ï¼Œè€Œä¸”é«˜ä¼°é€šå¸¸æ˜¯éå‡åŒ€çš„ã€‚è¿™ä¸ªç¼ºé™·å¯¼è‡´ DQNçš„è¡¨ç°å¾ˆå·®ã€‚é«˜ä¼°é—®é¢˜å¹¶ä¸æ˜¯ DQN æ¨¡å‹çš„ç¼ºé™·ï¼Œè€Œæ˜¯ Q å­¦ä¹ ç®—æ³•çš„ç¼ºé™·ã€‚</p><p>Qå­¦ä¹ äº§ç”Ÿé«˜ä¼°çš„åŸå› æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼Œè‡ªä¸¾å¯¼è‡´åå·®çš„ä¼ æ’­ï¼›ç¬¬äºŒï¼Œæœ€å¤§åŒ–å¯¼è‡´ TDç›®æ ‡é«˜ä¼°çœŸå®ä»·å€¼ã€‚ä¸ºäº†ç¼“è§£é«˜ä¼°ï¼Œéœ€è¦ä»å¯¼è‡´é«˜ä¼°çš„ä¸¤ä¸ªåŸå› ä¸‹æ‰‹ï¼Œæ”¹è¿›Qå­¦ä¹ ç®—æ³•ã€‚åŒ Qå­¦ä¹ ç®—æ³•æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ”¹è¿›ï¼Œå¯ä»¥å¤§å¹…ç¼“è§£é«˜ä¼°åŠå…¶å±å®³ã€‚</p><h2 id="è‡ªä¸¾å¯¼è‡´åå·®çš„ä¼ æ’­">è‡ªä¸¾å¯¼è‡´åå·®çš„ä¼ æ’­</h2><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œè‡ªä¸¾æ„æ€æ˜¯â€œç”¨ä¸€ä¸ªä¼°ç®—å»æ›´æ–°åŒç±»çš„ä¼°ç®—â€,ç±»ä¼¼äºâ€œè‡ªå·±æŠŠè‡ªå·±ç»™ä¸¾èµ·æ¥â€ã€‚æˆ‘ä»¬åœ¨å‰é¢çš„ç¬”è®°ä¸­è®¨è®ºè¿‡SARSA ç®—æ³•ä¸­çš„è‡ªä¸¾ã€‚ä¸‹é¢å›é¡¾è®­ç»ƒ DQN ç”¨çš„Qå­¦ä¹ ç®—æ³•ï¼Œç ”ç©¶å…¶ä¸­å­˜åœ¨çš„è‡ªä¸¾ã€‚ç®—æ³•æ¯æ¬¡ä»ç»éªŒå›æ”¾æ•°ç»„ä¸­æŠ½å–ä¸€ä¸ªå››å…ƒç»„<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>ã€‚ç„¶åæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼Œå¯¹ DQN çš„å‚æ•°åšä¸€è½®æ›´æ–°ï¼š</p><p>1.è®¡ç®—TDç›®æ ‡ï¼š</p><p><span class="math inline">\(y_j^{\hat{}} = r_j + \gamma \cdot \max_aQ(s_{j+1}, a; w_{\text{now}})\)</span></p><p>2.å®šä¹‰æŸå¤±å‡½æ•°</p><p><span class="math inline">\(L(w) = \frac{1}{2} [Q(s_j, a_j; w) -y_j^{\hat{}}]^2\)</span></p><p>3.æŠŠ<span class="math inline">\(y_j^{\hat{}}\)</span>çœ‹åšå¸¸æ•°ï¼Œåšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ï¼š</p><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot \nabla_w L(w_{\text{now}})\)</span></p><p>ç¬¬ä¸€æ­¥ä¸­çš„ TD ç›®æ ‡<span class="math inline">\(y_j^{\hat{}}\)</span>éƒ¨åˆ†åŸºäº DQNè‡ªå·±åšå‡ºçš„ä¼°è®¡ã€‚ç¬¬äºŒæ­¥è®© DQN å»æ‹Ÿåˆ<span class="math inline">\(y_j^{\hat{}}\)</span>ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬ç”¨äº† DQNè‡ªå·±åšå‡ºçš„ä¼°è®¡å»æ›´æ–° DQN è‡ªå·±ï¼Œè¿™å±äºè‡ªä¸¾ã€‚</p><p>è‡ªä¸¾å¯¹ DQN çš„è®­ç»ƒæœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿ</p><p><span class="math inline">\(Q(s, a; w)\)</span>æ˜¯å¯¹ä»·å€¼<span class="math inline">\(Q^*(s, a)\)</span>çš„è¿‘ä¼¼ï¼Œæœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œ<span class="math inline">\(Q(s, a; w) = Q^*(s, a)\)</span>ï¼Œ<span class="math inline">\(\forall s, a\)</span>ã€‚å‡å¦‚ç¢°å·§<span class="math inline">\(Q(s_{j+1}, a_{j+1};w)\)</span>ä½ä¼°(æˆ–é«˜ä¼°)çœŸå®ä»·å€¼<span class="math inline">\(Q^*(s_{j+1},a_{j+1})\)</span>, åˆ™ä¼šå‘ç”Ÿä¸‹é¢çš„æƒ…å†µï¼š</p><p><span class="math inline">\(\begin{align*}Q(s_{j+1}, a_{j+1}; w) &amp; \quad \text{ä½ä¼°(æˆ–é«˜ä¼°)} \quadQ^*(s_{j+1}, a_{j+1}) \\\implies \widehat{y}_j &amp; \quad \text{ä½ä¼°(æˆ–é«˜ä¼°)} \quad Q^*(s_j,a_j) \\\implies Q(s_j, a_j; w) &amp; \quad \text{ä½ä¼°(æˆ–é«˜ä¼°)} \quad Q^*(s_j,a_j).\end{align*}\)</span></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/1733209029314-ef1f00eb-3e4a-4a1e-9444-d06b2426864b.png"></p><p>å¦‚æœ<span class="math inline">\(Q(s_{j+1},a_{j+1};\boldsymbol{w})\)</span>æ˜¯å¯¹çœŸå®ä»·å€¼<span class="math inline">\(Q_\star(s_{j+1},a_{j+1})\)</span>çš„ä½ä¼° (æˆ–é«˜ä¼°),å°±ä¼šå¯¼è‡´<span class="math inline">\(Q(s_j,a_j;\boldsymbol{w})\)</span>ä½ä¼° (æˆ–é«˜ä¼°)ä»·å€¼<span class="math inline">\(Q_\star(s_j,a_j)\)</span>,ä¹Ÿå°±æ˜¯è¯´ä½ä¼°(æˆ–é«˜ä¼°) ä»<span class="math inline">\((s_{j+1},a_{j+1})\)</span>ä¼ æ’­åˆ°<span class="math inline">\((s_j,a_j)\)</span>, è®©æ›´å¤šçš„ä»·å€¼è¢«ä½ä¼°(æˆ–é«˜ä¼°)ã€‚</p><h2 id="æœ€å¤§åŒ–å¯¼è‡´é«˜ä¼°">æœ€å¤§åŒ–å¯¼è‡´é«˜ä¼°</h2><p>é¦–å…ˆç”¨æ•°å­¦è§£é‡Šä¸ºä»€ä¹ˆæœ€å¤§åŒ–ä¼šå¯¼è‡´é«˜ä¼°ã€‚è®¾<span class="math inline">\(x_1, \cdots, x_d\)</span>ä¸ºä»»æ„<span class="math inline">\(d\)</span>ä¸ªå®æ•°ã€‚å¾€<span class="math inline">\(x_1, \cdots,x_d\)</span>ä¸­åŠ å…¥ä»»æ„å‡å€¼ä¸ºé›¶çš„éšæœºå™ªå£°ï¼Œå¾—åˆ°<span class="math inline">\(Z_1, \cdots,Z_d\)</span>,å®ƒä»¬æ˜¯éšæœºå˜é‡ï¼Œéšæœºæ€§æ¥æºäºéšæœºå™ªå£°ã€‚å¾ˆå®¹æ˜“è¯æ˜å‡å€¼ä¸ºé›¶çš„éšæœºå™ªå£°ä¸ä¼šå½±å“å‡å€¼ï¼š</p><p><span class="math inline">\(\mathbb{E}[mean(Z_1, \cdots, Z_d)] =mean(x_1, \cdots, x_d)\)</span>.</p><p>ç”¨ç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯æ˜ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><p><span class="math inline">\(\mathbb{E}[max(Z_1, \cdots, Z_d)] \geqmax(x_1, \cdots, x_d)\)</span>.</p><p><span class="math inline">\(E[max(Z1,â‹¯,Zd)]â‰¥max(x1,â‹¯,xd).\)</span></p><p>å…¬å¼ä¸­çš„æœŸæœ›æ˜¯å…³äºå™ªå£°æ±‚çš„ã€‚è¿™ä¸ªä¸ç­‰å¼æ„å‘³ç€å…ˆåŠ å…¥å‡å€¼ä¸ºé›¶çš„å™ªå£°ï¼Œç„¶åæ±‚æœ€å¤§å€¼ï¼Œä¼šäº§ç”Ÿé«˜ä¼°ã€‚</p><p>å‡è®¾å¯¹äºæ‰€æœ‰çš„åŠ¨ä½œ<span class="math inline">\(a \inA\)</span>å’ŒçŠ¶æ€<span class="math inline">\(s \in S\)</span>, DQNçš„è¾“å‡ºæ˜¯çœŸå®ä»·å€¼<span class="math inline">\(Q^*(s,a)\)</span>åŠ ä¸Šå‡å€¼ä¸ºé›¶çš„éšæœºå™ªå£°<span class="math inline">\(\epsilon\)</span>:</p><p><span class="math inline">\(Q(s, a; w) = Q^*(s, a) +\epsilon\)</span>.</p><p>æ˜¾ç„¶<span class="math inline">\(Q(s, a; w)\)</span>æ˜¯å¯¹çœŸå®ä»·å€¼<span class="math inline">\(Q^*(s,a)\)</span>çš„æ— åä¼°è®¡ã€‚ç„¶è€Œæœ‰è¿™ä¸ªä¸ç­‰å¼ï¼š</p><p><span class="math inline">\(\mathbb{E}_{\epsilon} \left[ \max_{a \in\mathcal{A}} Q(s, a; w) \right] \geq \max_{a \in \mathcal{A}}Q^{\star}(s, a).\)</span></p><p>å…¬å¼è¯´æ˜å“ªæ€• DQN æ˜¯å¯¹çœŸå®ä»·å€¼çš„æ— åä¼°è®¡ï¼Œä½†æ˜¯å¦‚æœæ±‚æœ€å¤§åŒ–ï¼ŒDQNå°±ä¼šé«˜ä¼°çœŸå®ä»·å€¼ã€‚å¤ä¹ ä¸€ä¸‹ï¼ŒTD ç›®æ ‡æ˜¯è¿™æ ·ç®—å‡ºæ¥çš„ï¼š</p><p><span class="math inline">\(\widehat{y}_{j} = r_{j} + \gamma \cdot\underbrace{\max_{a \in \mathcal{A}} Q\left(s_{j+1}, a;w\right)}_{\text{é«˜ä¼°} \max_{a \in \mathcal{A}} Q^{\star}\left(s_{j+1},a\right)}.\)</span></p><p>è¿™è¯´æ˜ TD ç›®æ ‡<span class="math inline">\(y_j^{\hat{}}\)</span>é€šå¸¸æ˜¯å¯¹çœŸå®ä»·å€¼<span class="math inline">\(Q^*(s_j, a_j)\)</span>çš„é«˜ä¼°ã€‚TD ç®—æ³•é¼“åŠ±<span class="math inline">\(Q(s_j, a_j; w)\)</span>æ¥è¿‘ TD ç›®æ ‡<span class="math inline">\(y_j^{\hat{}}\)</span>, è¿™ä¼šå¯¼è‡´<span class="math inline">\(Q(s_j, a_j; w)\)</span>é«˜ä¼°çœŸå®ä»·å€¼<span class="math inline">\(Q^*(s_j, a_j)\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/1733209830691-ec5c92c3-4caa-4c33-b0c6-0e84065befa9.png"></p><p>å³ä½¿ DQN æ˜¯çœŸå®ä»·å€¼<span class="math inline">\(Q^*\)</span>çš„æ— åä¼°è®¡ï¼Œåªè¦ DQN ä¸æ’ç­‰äº<span class="math inline">\(Q^*\)</span>, TD ç›®æ ‡å°±ä¼šé«˜ä¼°çœŸå®ä»·å€¼ã€‚TDç›®æ ‡æ˜¯é«˜ä¼°ï¼Œè€Œ Qå­¦ä¹ ç®—æ³•é¼“åŠ± DQN é¢„æµ‹æ¥è¿‘ TD ç›®æ ‡ï¼Œå› æ­¤ DQNä¼šå‡ºç°é«˜ä¼°ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/1733209869899-5b0d912c-5060-4590-8822-43f665b62853.png"></p><h2 id="é«˜ä¼°çš„å±å®³">é«˜ä¼°çš„å±å®³</h2><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦é¿å…é«˜ä¼°ï¼Ÿé«˜ä¼°çœŸçš„æœ‰å®³å—ï¼Ÿå¦‚æœé«˜ä¼°æ˜¯å‡åŒ€çš„ï¼Œåˆ™é«˜ä¼°æ²¡æœ‰å±å®³ï¼›å¦‚æœé«˜ä¼°éå‡åŒ€ï¼Œå°±ä¼šæœ‰å±å®³ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒåŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(A = \{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>ã€‚ç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s\)</span>, æ¯ä¸ªåŠ¨ä½œæœ‰ä¸€ä¸ªçœŸå®ä»·å€¼ï¼š</p><p><span class="math inline">\(Q^*(s, å·¦) = 200, Q^*(s, å³) = 100,Q^*(s, ä¸Š) = 230\)</span>.</p><p>æ™ºèƒ½ä½“åº”å½“é€‰æ‹©åŠ¨ä½œâ€œä¸Šâ€,å› ä¸ºâ€œä¸Šâ€çš„ä»·å€¼æœ€é«˜ã€‚å‡å¦‚é«˜ä¼°æ˜¯å‡åŒ€çš„ï¼Œæ‰€æœ‰çš„ä»·å€¼éƒ½è¢«é«˜ä¼°äº†100ï¼š</p><p><span class="math inline">\(Q(s, å·¦; w) = 300, Q(s, å³; w) = 200,Q(s, ä¸Š; w) = 330\)</span>.</p><p>é‚£ä¹ˆåŠ¨ä½œâ€œä¸Šâ€ä»ç„¶æœ‰æœ€å¤§çš„ä»·å€¼ï¼Œæ™ºèƒ½ä½“ä¼šé€‰æ‹©â€œä¸Šâ€ã€‚è¿™ä¸ªä¾‹å­è¯´æ˜é«˜ä¼°æœ¬èº«ä¸æ˜¯é—®é¢˜ï¼Œåªè¦æ‰€æœ‰åŠ¨ä½œä»·å€¼è¢«åŒç­‰é«˜ä¼°ã€‚</p><p>ä½†å®è·µä¸­ï¼Œæ‰€æœ‰çš„åŠ¨ä½œä»·å€¼ä¼šè¢«åŒç­‰é«˜ä¼°å—ï¼Ÿæ¯å½“å–å‡ºä¸€ä¸ªå››å…ƒç»„<span class="math inline">\((s, a, r, s&#39;)\)</span>ç”¨æ¥æ›´æ–°ä¸€æ¬¡ DQN,å°±å¾ˆæœ‰å¯èƒ½åŠ é‡ DQN å¯¹<span class="math inline">\(Q^*(s,a)\)</span>çš„é«˜ä¼°ã€‚å¯¹äºåŒä¸€ä¸ªçŠ¶æ€<span class="math inline">\(s\)</span>,ä¸‰ç§ç»„åˆ<span class="math inline">\((s, å·¦)\)</span>ã€<span class="math inline">\((s, å³)\)</span>ã€<span class="math inline">\((s,ä¸Š)\)</span>å‡ºç°åœ¨ç»éªŒå›æ”¾æ•°ç»„ä¸­çš„é¢‘ç‡æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ä¸‰ç§åŠ¨ä½œè¢«é«˜ä¼°çš„ç¨‹åº¦æ˜¯ä¸åŒçš„ã€‚å‡å¦‚åŠ¨ä½œä»·å€¼è¢«é«˜ä¼°çš„ç¨‹åº¦ä¸åŒï¼Œæ¯”å¦‚</p><p><span class="math inline">\(Q(s, å·¦; w) = 280, Q(s, å³; w) = 300,Q(s, ä¸Š; w) = 260\)</span>,</p><p>é‚£ä¹ˆæ™ºèƒ½ä½“åšå‡ºçš„å†³ç­–å°±æ˜¯å‘å³èµ°ï¼Œå› ä¸ºâ€œå³â€çš„ä»·å€¼è²Œä¼¼æœ€é«˜ã€‚ä½†å®é™…ä¸Šâ€œå³â€æ˜¯æœ€å·®çš„åŠ¨ä½œï¼Œå®ƒçš„å®é™…ä»·å€¼ä½äºå…¶ä½™ä¸¤ä¸ªåŠ¨ä½œã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œç”¨ Qå­¦ä¹ ç®—æ³•è®­ç»ƒ DQN æ€»ä¼šå¯¼è‡´ DQNé«˜ä¼°çœŸå®ä»·å€¼ã€‚å¯¹äºå¤šæ•°çš„<span class="math inline">\(s \inS\)</span>å’Œ<span class="math inline">\(a \in A\)</span>,æœ‰è¿™æ ·çš„ä¸ç­‰å¼ï¼š</p><p><span class="math inline">\(Q(s, a; w) &gt; Q^*(s, a)\)</span>.</p><p>é«˜ä¼°æœ¬èº«ä¸æ˜¯é—®é¢˜ï¼ŒçœŸæ­£çš„éº»çƒ¦åœ¨äº DQN çš„é«˜ä¼°å¾€å¾€æ˜¯éå‡åŒ€çš„ã€‚å¦‚æœ DQNæœ‰éå‡åŒ€çš„é«˜ä¼°ï¼Œé‚£ä¹ˆç”¨ DQNåšå‡ºçš„å†³ç­–æ˜¯ä¸å¯é çš„ã€‚æˆ‘ä»¬å·²ç»åˆ†æè¿‡å¯¼è‡´é«˜ä¼°çš„åŸå› ï¼š</p><ul><li>TD ç®—æ³•å±äºâ€œè‡ªä¸¾â€,å³ç”¨ DQN çš„ä¼°è®¡å€¼å»æ›´æ–° DQNè‡ªå·±ã€‚è‡ªä¸¾ä¼šå¯¼è‡´åå·®çš„ä¼ æ’­ã€‚å¦‚æœ<span class="math inline">\(Q(s_{j+1},a_{j+1}; w)\)</span>æ˜¯å¯¹<span class="math inline">\(Q^*(s_{j+1},a_{j+1})\)</span>çš„é«˜ä¼°ï¼Œé‚£ä¹ˆé«˜ä¼°ä¼šä¼ æ’­åˆ°<span class="math inline">\((s_j, a_j)\)</span>è®©<span class="math inline">\(Q(s_j, a_j; w)\)</span>é«˜ä¼°<span class="math inline">\(Q^*(s_j, a_j)\)</span>ã€‚è‡ªä¸¾å¯¼è‡´ DQNçš„é«˜ä¼°ä»ä¸€ä¸ªäºŒå…ƒç»„<span class="math inline">\((s,a)\)</span>ä¼ æ’­åˆ°æ›´å¤šçš„äºŒå…ƒç»„ã€‚</li><li>TD ç›®æ ‡<span class="math inline">\(y_j^{\hat{}}\)</span>ä¸­åŒ…å«ä¸€é¡¹æœ€å¤§åŒ–ï¼Œè¿™ä¼šå¯¼è‡´ TDç›®æ ‡é«˜ä¼°çœŸå®ä»·å€¼<span class="math inline">\(Q_*\)</span>ã€‚Q å­¦ä¹ ç®—æ³•é¼“åŠ±DQN çš„é¢„æµ‹æ¥è¿‘ TD ç›®æ ‡ï¼Œå› æ­¤ DQN ä¼šé«˜ä¼°<span class="math inline">\(Q_*\)</span>ã€‚</li></ul><p>æ‰¾åˆ°äº†äº§ç”Ÿé«˜ä¼°çš„åŸå› ï¼Œå°±å¯ä»¥æƒ³åŠæ³•è§£å†³é—®é¢˜ã€‚æƒ³è¦é¿å… DQNçš„é«˜ä¼°ï¼Œè¦ä¹ˆåˆ‡æ–­è‡ªä¸¾ï¼Œè¦ä¹ˆé¿å…æœ€å¤§åŒ–é€ æˆé«˜ä¼°ã€‚æ³¨æ„ï¼Œé«˜ä¼°å¹¶ä¸æ˜¯ DQNè‡ªèº«çš„å±æ€§ï¼Œé«˜ä¼°çº¯ç²¹æ˜¯ç®—æ³•é€ æˆçš„ã€‚æƒ³è¦é¿å…é«˜ä¼°ï¼Œå°±è¦ç”¨æ›´å¥½çš„ç®—æ³•æ›¿ä»£åŸå§‹çš„Q å­¦ä¹ ç®—æ³•ã€‚</p><h2 id="ä½¿ç”¨ç›®æ ‡ç½‘ç»œ">ä½¿ç”¨ç›®æ ‡ç½‘ç»œ</h2><p>ä¸Šæ–‡å·²ç»è®¨è®ºè¿‡ï¼Œåˆ‡æ–­â€œè‡ªä¸¾â€å¯ä»¥é¿å…åå·®çš„ä¼ æ’­ï¼Œä»è€Œç¼“è§£ DQNçš„é«˜ä¼°ã€‚å›é¡¾ä¸€ä¸‹ï¼ŒQ å­¦ä¹ ç®—æ³•è¿™æ ·è®¡ç®— TD ç›®æ ‡ï¼š</p><p><span class="math inline">\(\widehat{y}_j = r_j + \gamma \cdot\max_{a \in \mathcal{A}} Q(s_{j+1}, a; w) \,.\)</span></p><p>ç„¶ååšæ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(w\)</span>,ä½¿å¾—<span class="math inline">\(Q(s_j, a_j; w)\)</span>æ›´æ¥è¿‘<span class="math inline">\(y_j^{\hat{}}\)</span>ã€‚æƒ³è¦åˆ‡æ–­è‡ªä¸¾ï¼Œå¯ä»¥ç”¨å¦ä¸€ä¸ªç¥ç»ç½‘ç»œè®¡ç®—TD ç›®æ ‡ï¼Œè€Œä¸æ˜¯ç”¨ DQN è‡ªå·±è®¡ç®— TD ç›®æ ‡ã€‚å¦ä¸€ä¸ªç¥ç»ç½‘ç»œè¢«ç§°ä½œ<strong>ç›®æ ‡ç½‘ç»œ (target network)</strong> ã€‚æŠŠç›®æ ‡ç½‘ç»œè®°ä½œï¼š</p><p><span class="math inline">\(Q(s, a; w^-)\)</span>.</p><p>å®ƒçš„ç¥ç»ç½‘ç»œç»“æ„ä¸ DQN å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å‚æ•°<span class="math inline">\(w^-\)</span>ä¸åŒäº<span class="math inline">\(w\)</span>ã€‚</p><p>ä½¿ç”¨ç›®æ ‡ç½‘ç»œçš„è¯ï¼ŒQå­¦ä¹ ç®—æ³•ç”¨ä¸‹é¢çš„æ–¹å¼å®ç°ã€‚æ¯æ¬¡éšæœºä»ç»éªŒå›æ”¾æ•°ç»„ä¸­å–ä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j, a_j, r_j, s_{j+1})\)</span>ã€‚è®¾ DQNå’Œç›®æ ‡ç½‘ç»œå½“å‰çš„å‚æ•°åˆ†åˆ«ä¸º<span class="math inline">\(w_{\text{now}}\)</span>å’Œ<span class="math inline">\(\bar{w}_{\text{now}}\)</span>,æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤å¯¹å‚æ•°åšä¸€æ¬¡æ›´æ–°ï¼š</p><p>1.å¯¹ DQN åšæ­£å‘ä¼ æ’­ï¼Œå¾—åˆ°ï¼š</p><p><span class="math inline">\(q_j^{\hat{}} = Q(s_j, a_j;w_{\text{now}})\)</span></p><p>2.å¯¹ç›®æ ‡ç½‘ç»œåšæ­£å‘ä¼ æ’­ï¼Œå¾—åˆ°</p><p><span class="math inline">\(q_{j+1}^{-} = \max_a Q(s_{j+1}, a;w_{\text{now}}^-)\)</span></p><p>3.è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š</p><p><span class="math inline">\(y_j^- = r_j + \gamma \cdotq_{j+1}^{-}\)</span>å’Œ<span class="math inline">\(\delta_j =q_j^{\hat{}} - y_j^-\)</span></p><p>4.å¯¹ DQN åšåå‘ä¼ æ’­ï¼Œå¾—åˆ°æ¢¯åº¦</p><p><span class="math inline">\(\nabla_w Q(s_j, a_j;w_{\text{now}})\)</span></p><p>5.åšæ¢¯åº¦ä¸‹é™æ›´æ–° DQN çš„å‚æ•°ï¼š</p><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot \delta_j \cdot \nabla_w Q(s_j, a_j;w_{\text{now}})\)</span></p><p>6.è®¾<span class="math inline">\(\tau \in (0,1)\)</span>æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒçš„è¶…å‚æ•°ã€‚åšåŠ æƒå¹³å‡æ›´æ–°ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š</p><p><span class="math inline">\(\bar{w}_{\text{new}} \leftarrow \tau\cdot w_{\text{new}} + (1 - \tau) \cdot\bar{w}_{\text{now}}\)</span></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/1733210558085-bccc9371-1de2-4bf3-a61a-d99f62c93653.png"></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/1733210648273-45d7e502-b270-4f5b-a7a2-925700f52d0d.png"></p><p>å¦‚å›¾ 6.4 (å·¦) æ‰€ç¤ºï¼ŒåŸå§‹çš„ Qå­¦ä¹ ç®—æ³•ç”¨ DQN è®¡ç®—<span class="math inline">\(y_j^{\hat{}}\)</span>,ç„¶åæ‹¿<span class="math inline">\(y_j^{\hat{}}\)</span>æ›´æ–° DQN è‡ªå·±ï¼Œé€ æˆè‡ªä¸¾ã€‚å¦‚å›¾ 6.4(å³)æ‰€ç¤ºï¼Œå¯ä»¥æ”¹ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®—<span class="math inline">\(y_j^{\hat{}}\)</span>,è¿™æ ·å°±é¿å…äº†ç”¨ DQNçš„ä¼°è®¡æ›´æ–° DQNè‡ªå·±ï¼Œé™ä½è‡ªä¸¾é€ æˆçš„å±å®³ã€‚ç„¶è€Œè¿™ç§æ–¹æ³•ä¸èƒ½å®Œå…¨é¿å…è‡ªä¸¾ï¼ŒåŸå› æ˜¯ç›®æ ‡ç½‘ç»œçš„å‚æ•°ä»ç„¶ä¸DQN ç›¸å…³ã€‚</p><h2 id="åŒ-q-å­¦ä¹ ç®—æ³•">åŒ Q å­¦ä¹ ç®—æ³•</h2><p>é€ æˆ DQN é«˜ä¼°çš„åŸå› ä¸æ˜¯ DQN æ¨¡å‹æœ¬èº«çš„ç¼ºé™·ï¼Œè€Œæ˜¯ Qå­¦ä¹ ç®—æ³•æœ‰ä¸è¶³ä¹‹å¤„ï¼šç¬¬ä¸€ï¼Œè‡ªä¸¾é€ æˆåå·®çš„ä¼ æ’­ï¼›ç¬¬äºŒï¼Œæœ€å¤§åŒ–é€ æˆ TDç›®æ ‡çš„é«˜ä¼°ã€‚åœ¨ Qå­¦ä¹ ç®—æ³•ä¸­ä½¿ç”¨ç›®æ ‡ç½‘ç»œï¼Œå¯ä»¥ç¼“è§£è‡ªä¸¾é€ æˆçš„åå·®ï¼Œä½†æ˜¯æ— åŠ©äºç¼“è§£æœ€å¤§åŒ–é€ æˆçš„é«˜ä¼°ã€‚æœ¬å°èŠ‚ä»‹ç»åŒQ å­¦ä¹  (double Q learning)ç®—æ³•ï¼Œå®ƒåœ¨ç›®æ ‡ç½‘ç»œçš„åŸºç¡€ä¸Šåšæ”¹è¿›ï¼Œç¼“è§£æœ€å¤§åŒ–é€ æˆçš„é«˜ä¼°ã€‚</p><p>æ³¨ æœ¬å°èŠ‚ä»‹ç»çš„åŒ Q å­¦ä¹ ç®—æ³•åœ¨æ–‡çŒ®ä¸­è¢«ç§°ä½œ double DQN, ç¼©å†™DDQNã€‚æœ¬ä¹¦ä¸é‡‡ç”¨ DDQNè¿™åå­—ï¼Œå› ä¸ºè¿™ä¸ªåå­—æ¯”è¾ƒè¯¯å¯¼ã€‚åŒ Q å­¦ä¹  (å³æ‰€è°“çš„DDQN) åªæ˜¯ä¸€ç§ TD ç®—æ³•è€Œå·²ï¼Œå®ƒå¯ä»¥æŠŠ DQN è®­ç»ƒå¾—æ›´å¥½ã€‚åŒ Qå­¦ä¹ å¹¶æ²¡æœ‰ç”¨åŒºåˆ«äº DQN çš„æ¨¡å‹ã€‚æœ¬èŠ‚ä¸­çš„æ¨¡å‹åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯DQNã€‚æˆ‘ä»¬è®¨è®ºçš„åªæ˜¯è®­ç»ƒ DQN çš„ä¸‰ç§ TD ç®—æ³•ï¼šåŸå§‹çš„ Q å­¦ä¹ ã€ ç”¨ç›®æ ‡ç½‘ç»œçš„Q å­¦ä¹ ã€åŒ Q å­¦ä¹ ã€‚</p><p>ä¸ºäº†è§£é‡ŠåŸå§‹çš„ Q å­¦ä¹ ã€ç”¨ç›®æ ‡ç½‘ç»œçš„ Q å­¦ä¹ ã€ä»¥åŠåŒ Qå­¦ä¹ ä¸‰è€…çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å†å›é¡¾ä¸€ä¸‹Q å­¦ä¹ ç®—æ³•ä¸­çš„ TD ç›®æ ‡ï¼š</p><p><span class="math inline">\(\widehat{y}_j = r_j + \gamma \cdot\max_{a \in \mathcal{A}} Q(s_{j+1}, a; w) \,.\)</span></p><p>ä¸å¦¨æŠŠæœ€å¤§åŒ–æ‹†æˆä¸¤æ­¥ï¼š</p><p>1.é€‰æ‹©â€”â€”å³åŸºäºçŠ¶æ€<span class="math inline">\(s_{j+1}\)</span>,é€‰å‡ºä¸€ä¸ªåŠ¨ä½œä½¿å¾— DQNçš„è¾“å‡ºæœ€å¤§åŒ–ï¼š</p><p><span class="math inline">\(a^{\star} = \underset{a \inA}{\operatorname{argmax}} Q(s_{j+1}, a; w)\)</span></p><p>2.æ±‚å€¼â€”â€”å³è®¡ç®—<span class="math inline">\((s_{j+1},a^{\star})\)</span>çš„ä»·å€¼ï¼Œä»è€Œç®—å‡º TD ç›®æ ‡ï¼š</p><p><span class="math inline">\(y_j^{\hat{}} = r_j + Q(s_{j+1},a^{\star}; w)\)</span></p><p>ä»¥ä¸Šæ˜¯åŸå§‹çš„ Q å­¦ä¹ ç®—æ³•ï¼Œé€‰æ‹©å’Œæ±‚å€¼éƒ½ç”¨ DQNã€‚ä¸Šä¸€å°èŠ‚æ”¹è¿›äº† Qå­¦ä¹ ï¼Œé€‰æ‹©å’Œæ±‚å€¼éƒ½ç”¨ç›®æ ‡ç½‘ç»œï¼š</p><p>é€‰æ‹©ï¼š</p><p><span class="math inline">\(a^- = \underset{a \inA}{\operatorname{argmax}} Q(s_{j+1}, a; w^-)\)</span>,</p><p>æ±‚å€¼ï¼š</p><p><span class="math inline">\(\widetilde{y}_j = r_j + Q(s_{j+1}, a^-;w^-)\)</span>.</p><p>æœ¬å°èŠ‚ä»‹ç»åŒ Q å­¦ä¹ ï¼Œç¬¬ä¸€æ­¥çš„é€‰æ‹©ç”¨ DQN, ç¬¬äºŒæ­¥çš„æ±‚å€¼ç”¨ç›®æ ‡ç½‘ç»œï¼š</p><p>é€‰æ‹©ï¼š</p><p><span class="math inline">\(a^{\star} = \underset{a \inA}{\operatorname{argmax}} Q(s_{j+1}, a; w)\)</span>,</p><p>æ±‚å€¼ï¼š</p><p><span class="math inline">\(\widetilde{y}_j = r_j + Q(s_{j+1},a^{\star}; w^-)\)</span>.</p><p>ä¸ºä»€ä¹ˆåŒ Q å­¦ä¹ å¯ä»¥ç¼“è§£æœ€å¤§åŒ–é€ æˆçš„é«˜ä¼°å‘¢ï¼Ÿä¸éš¾è¯æ˜å‡ºè¿™ä¸ªä¸ç­‰å¼ï¼š</p><p><span class="math inline">\(\underbrace{Q\left(s_{j+1}, a^{*};w^{-}\right)}_{\text{åŒ Qå­¦ä¹ }} \leq \underbrace{\max_{a \in\mathcal{A}} Q\left(s_{j+1}, a; w^{-}\right)}_{\text{ç”¨ç›®æ ‡ç½‘ç»œçš„Qå­¦ä¹ }}.\)</span>.</p><p>å› æ­¤ï¼Œ</p><p><span class="math inline">\(\underbrace{\widetilde{y}_{t}}_{\text{åŒQå­¦ä¹ }}\leq\underbrace{\widehat{y}_{t}}_{\text{ç”¨ç›®æ ‡ç½‘ç»œçš„Qå­¦ä¹ }}.\)</span></p><p>è¿™ä¸ªå…¬å¼è¯´æ˜åŒ Q å­¦ä¹ å¾—åˆ°çš„ TD ç›®æ ‡æ›´å°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç”¨ç›®æ ‡ç½‘ç»œçš„ Qå­¦ä¹ ç›¸æ¯”ï¼ŒåŒ Qå­¦ä¹ ç¼“è§£äº†é«˜ä¼°ã€‚</p><p>åŒ Qå­¦ä¹ ç®—æ³•çš„æµç¨‹å¦‚ä¸‹ã€‚æ¯æ¬¡éšæœºä»ç»éªŒå›æ”¾æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j, a_j, r_j, s_{j+1})\)</span>ã€‚è®¾ DQNå’Œç›®æ ‡ç½‘ç»œå½“å‰çš„å‚æ•°åˆ†åˆ«ä¸º<span class="math inline">\(w_{\text{now}}\)</span>å’Œ<span class="math inline">\(w_{\text{now}}^-\)</span>,æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤å¯¹å‚æ•°åšä¸€æ¬¡æ›´æ–°ï¼š</p><p>1.å¯¹ DQN åšæ­£å‘ä¼ æ’­ï¼Œå¾—åˆ°ï¼š</p><p><span class="math inline">\(q_j^{\hat{}} = Q(s_j, a_j;w_{\text{now}})\)</span></p><p>2.é€‰æ‹©ï¼š</p><p><span class="math inline">\(a^{\star} = \underset{a \inA}{\operatorname{argmax}} Q(s_{j+1}, a; w_{\text{now}})\)</span></p><p>3.æ±‚å€¼ï¼š</p><p><span class="math inline">\(q_{j+1} = Q(s_{j+1}, a^{\star};\bar{w}_{\text{now}})\)</span></p><p>4.è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š</p><p><span class="math inline">\(\widetilde{y}_j = r_j + \gamma \cdotq_{j+1}\)</span>å’Œ<span class="math inline">\(\delta_j = q_j^{\hat{}} -\widetilde{y}_j\)</span></p><p>5.å¯¹ DQN åšåå‘ä¼ æ’­ï¼Œå¾—åˆ°æ¢¯åº¦</p><p><span class="math inline">\(\nabla_w Q(s_j, a_j;w_{\text{now}})\)</span></p><p>6.åšæ¢¯åº¦ä¸‹é™æ›´æ–° DQN çš„å‚æ•°ï¼š</p><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot \delta_j \cdot \nabla_w Q(s_j, a_j;w_{\text{now}})\)</span></p><p>7.è®¾<span class="math inline">\(\tau \in (0,1)\)</span>æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒæ•´çš„è¶…å‚æ•°ã€‚åšåŠ æƒå¹³å‡æ›´æ–°ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š</p><p><span class="math inline">\(\bar{w}_{\text{new}} \leftarrow \tau\cdot w_{\text{new}} + (1 - \tau) \cdot\bar{w}_{\text{now}}\)</span></p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>æœ¬èŠ‚ç ”ç©¶äº† DQN çš„é«˜ä¼°é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚DQN çš„é«˜ä¼°ä¸æ˜¯ DQNæ¨¡å‹é€ æˆçš„ï¼Œä¸æ˜¯ DQN çš„æœ¬è´¨å±æ€§ã€‚é«˜ä¼°åªæ˜¯å› ä¸ºåŸå§‹ Q å­¦ä¹ ç®—æ³•ä¸å¥½ã€‚Qå­¦ä¹ ç®—æ³•äº§ç”Ÿé«˜ä¼°çš„åŸå› æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ï¼Œè‡ªä¸¾å¯¼è‡´åå·®ä»ä¸€ä¸ª<span class="math inline">\((s,a)\)</span>äºŒå…ƒç»„ä¼ æ’­åˆ°æ›´å¤šçš„äºŒå…ƒç»„ï¼›ç¬¬äºŒï¼Œæœ€å¤§åŒ–é€ æˆ TDç›®æ ‡é«˜ä¼°çœŸå®ä»·å€¼ã€‚</p><p>æƒ³è¦è§£å†³é«˜ä¼°é—®é¢˜ï¼Œå°±è¦ä»è‡ªä¸¾ã€æœ€å¤§åŒ–è¿™ä¸¤æ–¹é¢ä¸‹æ‰‹ã€‚æœ¬èŠ‚ä»‹ç»äº†ä¸¤ç§ç¼“è§£é«˜ä¼°çš„ç®—æ³•ï¼šä½¿ç”¨ç›®æ ‡ç½‘ç»œã€åŒQå­¦ä¹ ã€‚Q å­¦ä¹ ç®—æ³•ä¸ç›®æ ‡ç½‘ç»œçš„ç»“åˆå¯ä»¥ç¼“è§£è‡ªä¸¾é€ æˆçš„åå·®ã€‚åŒQå­¦ä¹ åŸºäºç›®æ ‡ç½‘ç»œçš„æƒ³æ³•ï¼Œè¿›ä¸€æ­¥å°† TD ç›®æ ‡çš„è®¡ç®—åˆ†è§£æˆé€‰æ‹©å’Œæ±‚å€¼ä¸¤æ­¥ï¼Œç¼“è§£äº†æœ€å¤§åŒ–é€ æˆçš„é«˜ä¼°ã€‚å›¾ 6.5 æ€»ç»“äº†æœ¬èŠ‚ç ”ç©¶çš„ä¸‰ç§ç®—æ³•ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-2-%E9%AB%98%E4%BC%B0%E9%97%AE%E9%A2%98/1733212786643-e1052770-7aba-41fb-9fbc-8c193827c04e.png"></p><p>æ³¨ å¦‚æœä½¿ç”¨åŸå§‹ Qå­¦ä¹ ç®—æ³•ï¼Œè‡ªä¸¾å’Œæœ€å¤§åŒ–éƒ½ä¼šé€ æˆä¸¥é‡é«˜ä¼°ã€‚åœ¨å®è·µä¸­ï¼Œåº”å½“å°½é‡ä½¿ç”¨åŒQå­¦ä¹ ï¼Œå®ƒæ˜¯ä¸‰ç§ç®—æ³•ä¸­æœ€å¥½çš„ã€‚</p><p>æ³¨ å¦‚æœä½¿ç”¨ SARSA ç®—æ³• (æ¯”å¦‚åœ¨ actor-critic ä¸­),è‡ªä¸¾çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯ä¸å­˜åœ¨æœ€å¤§åŒ–é€ æˆé«˜ä¼°è¿™ä¸€é—®é¢˜ã€‚å¯¹äº SARSA,åªéœ€è¦è§£å†³è‡ªä¸¾é—®é¢˜ï¼Œæ‰€ä»¥åº”å½“å°†ç›®æ ‡ç½‘ç»œåº”ç”¨åˆ° SARSA ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.1 ç»éªŒå›æ”¾</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-1-%E7%BB%8F%E9%AA%8C%E5%9B%9E%E6%94%BE/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-1-%E7%BB%8F%E9%AA%8C%E5%9B%9E%E6%94%BE/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»·å€¼å­¦ä¹ é«˜çº§æŠ€å·§">ä»·å€¼å­¦ä¹ é«˜çº§æŠ€å·§</h1><p>å‰é¢ä»‹ç»äº† DQN, å¹¶ä¸”ç”¨ Qå­¦ä¹ ç®—æ³•è®­ç»ƒ DQNã€‚å¦‚æœç”¨æœ€åŸå§‹çš„ Qå­¦ä¹ ç®—æ³•ï¼Œé‚£ä¹ˆè®­ç»ƒå‡ºçš„ DQN æ•ˆæœä¼šå¾ˆä¸ç†æƒ³ã€‚æƒ³è¦æå‡ DQNçš„è¡¨ç°ï¼Œéœ€è¦ç”¨æœ¬ç« çš„é«˜çº§æŠ€å·§ã€‚æ–‡çŒ®ä¸­å·²ç»æœ‰å……åˆ†å®éªŒç»“æœè¡¨æ˜è¿™äº›é«˜çº§æŠ€å·§å¯¹DQNéå¸¸æœ‰æ•ˆï¼Œè€Œä¸”è¿™äº›æŠ€å·§ä¸å†²çªï¼Œå¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚æœ‰äº›æŠ€å·§å¹¶ä¸å±€é™äºDQNï¼Œè€Œæ˜¯å¯ä»¥åº”ç”¨äºå¤šç§ä»·å€¼å­¦ä¹ å’Œç­–ç•¥å­¦ä¹ æ–¹æ³•ã€‚</p><p>ä»‹ç»ç»éªŒå›æ”¾ (experience replay) å’Œä¼˜å…ˆç»éªŒå›æ”¾(prioritizedexperience replay)ã€‚è®¨è®º DQN çš„é«˜ä¼°é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆâ€”â€”ç›®æ ‡ç½‘ç»œ(targetnetwork) å’ŒåŒ Q å­¦ä¹ ç®—æ³•(double Q-learning)ã€‚</p><p>ä»‹ç»ä¸¤ç§æ–¹æ³•æ”¹è¿› DQN çš„ç¥ç»ç½‘ç»œç»“æ„ (ä¸æ˜¯å¯¹ Qå­¦ä¹ ç®—æ³•çš„æ”¹è¿›)ï¼šå¯¹å†³ç½‘ç»œ (dueling network),å®ƒæŠŠåŠ¨ä½œä»·å€¼ (action value)åˆ†è§£æˆçŠ¶æ€ä»·å€¼(state value) ä¸ä¼˜åŠ¿ (advantage)ï¼›å™ªå£°ç½‘ç»œ (noisy net),å®ƒå¾€ç¥ç»ç½‘ç»œçš„å‚æ•°ä¸­åŠ å…¥éšæœºå™ªå£°,é¼“åŠ±æ¢ç´¢ã€‚</p><h1 id="ç»éªŒå›æ”¾">ç»éªŒå›æ”¾</h1><p>ç»éªŒå›æ”¾(experiencereplay)æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­ä¸€ä¸ªé‡è¦çš„æŠ€å·§ï¼Œå¯ä»¥å¤§å¹…æå‡å¼ºåŒ–å­¦ä¹ çš„è¡¨ç°ã€‚ç»éªŒå›æ”¾çš„æ„æ€æ˜¯æŠŠæ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’çš„è®°å½•(å³ç»éªŒ)å‚¨å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œï¼Œäº‹ååå¤åˆ©ç”¨è¿™äº›ç»éªŒè®­ç»ƒæ™ºèƒ½ä½“ã€‚è¿™ä¸ªæ•°ç»„è¢«ç§°ä¸ºç»éªŒå›æ”¾æ•°ç»„(replay buffer)ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-1-%E7%BB%8F%E9%AA%8C%E5%9B%9E%E6%94%BE/1733201744660-70545f81-e6a4-44ee-a10a-d8bb5762d746.png"></p><p>å…·ä½“æ¥è¯´ï¼ŒæŠŠæ™ºèƒ½ä½“çš„è½¨è¿¹åˆ’åˆ†æˆ<span class="math inline">\(s_t, a_t,r_t, s_{t+1}\)</span>è¿™æ ·çš„å››å…ƒç»„ï¼Œå­˜å…¥ä¸€ä¸ªæ•°ç»„ã€‚éœ€è¦äººä¸ºæŒ‡å®šæ•°ç»„çš„å¤§å°(è®°ä½œ<span class="math inline">\(b\)</span>)ã€‚æ•°ç»„ä¸­åªä¿ç•™æœ€è¿‘<span class="math inline">\(b\)</span>æ¡æ•°æ®ï¼›å½“æ•°ç»„å­˜æ»¡ä¹‹åï¼Œåˆ é™¤æ‰æœ€æ—§çš„æ•°æ®ã€‚æ•°ç»„çš„å¤§å°<span class="math inline">\(b\)</span>æ˜¯ä¸ªéœ€è¦è°ƒçš„è¶…å‚æ•°ï¼Œä¼šå½±å“è®­ç»ƒçš„ç»“æœã€‚é€šå¸¸è®¾ç½®<span class="math inline">\(b\)</span>ä¸º<span class="math inline">\(10^5\sim10^6\)</span>ã€‚</p><p>åœ¨å®è·µä¸­ï¼Œè¦ç­‰å›æ”¾æ•°ç»„ä¸­æœ‰è¶³å¤Ÿå¤šçš„å››å…ƒç»„æ—¶ï¼Œæ‰å¼€å§‹åšç»éªŒå›æ”¾æ›´æ–°DQNã€‚æ ¹æ®è®ºæ–‡çš„å®éªŒåˆ†æï¼Œå¦‚æœå°† DQN ç”¨äº Atari æ¸¸æˆï¼Œæœ€å¥½æ˜¯åœ¨æ”¶é›†åˆ° 20ä¸‡æ¡å››å…ƒç»„æ—¶æ‰å¼€å§‹åšç»éªŒå›æ”¾æ›´æ–° DQN; å¦‚æœæ˜¯ç”¨æ›´å¥½çš„ Rainbow DQN, æ”¶é›†åˆ°8 ä¸‡æ¡å››å…ƒç»„æ—¶å°±å¯ä»¥å¼€å§‹æ›´æ–°DQNã€‚åœ¨å›æ”¾æ•°ç»„ä¸­çš„å››å…ƒç»„æ•°é‡ä¸å¤Ÿçš„æ—¶å€™ï¼ŒDQN åªä¸ç¯å¢ƒäº¤äº’ï¼Œè€Œä¸å»æ›´æ–°DQN å‚æ•°ï¼Œå¦åˆ™å®éªŒæ•ˆæœä¸å¥½ã€‚</p><h1 id="ç»éªŒå›æ”¾çš„ä¼˜ç‚¹">ç»éªŒå›æ”¾çš„ä¼˜ç‚¹</h1><p>ç»éªŒå›æ”¾çš„ä¸€ä¸ªå¥½å¤„åœ¨äºæ‰“ç ´åºåˆ—çš„ç›¸å…³æ€§ã€‚è®­ç»ƒ DQNçš„æ—¶å€™ï¼Œæ¯æ¬¡æˆ‘ä»¬ç”¨ä¸€ä¸ªå››å…ƒç»„å¯¹ DQNçš„å‚æ•°åšä¸€æ¬¡æ›´æ–°ã€‚æˆ‘ä»¬å¸Œæœ›ç›¸é‚»ä¸¤æ¬¡ä½¿ç”¨çš„å››å…ƒç»„æ˜¯ç‹¬ç«‹çš„ã€‚ç„¶è€Œå½“æ™ºèƒ½ä½“æ”¶é›†ç»éªŒçš„æ—¶å€™ï¼Œç›¸é‚»ä¸¤ä¸ªå››å…ƒç»„<span class="math inline">\((s_t, a_t, r_t, s_{t+1})\)</span>å’Œ<span class="math inline">\((s_{t+1}, a_{t+1}, r_{t+1},s_{t+2})\)</span>æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§ã€‚ä¾æ¬¡ä½¿ç”¨è¿™äº›å¼ºå…³è”çš„å››å…ƒç»„è®­ç»ƒ DQN,æ•ˆæœå¾€å¾€ä¼šå¾ˆå·®ã€‚ç»éªŒå›æ”¾æ¯æ¬¡ä»æ•°ç»„é‡ŒéšæœºæŠ½å–ä¸€ä¸ªå››å…ƒç»„ï¼Œç”¨æ¥å¯¹ DQNå‚æ•°åšä¸€æ¬¡æ›´æ–°ã€‚è¿™æ ·éšæœºæŠ½åˆ°çš„å››å…ƒç»„éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ¶ˆé™¤äº†ç›¸å…³æ€§ã€‚</p><p>ç»éªŒå›æ”¾çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯é‡å¤åˆ©ç”¨æ”¶é›†åˆ°çš„ç»éªŒã€è€Œä¸æ˜¯ç”¨ä¸€æ¬¡å°±ä¸¢å¼ƒï¼Œè¿™æ ·å¯ä»¥ç”¨æ›´å°‘çš„æ ·æœ¬æ•°é‡è¾¾åˆ°åŒæ ·çš„è¡¨ç°ã€‚é‡å¤åˆ©ç”¨ç»éªŒã€ä¸é‡å¤åˆ©ç”¨ç»éªŒçš„æ”¶æ•›æ›²çº¿é€šå¸¸å¦‚å›¾6.2 æ‰€ç¤ºã€‚å›¾çš„æ¨ªè½´æ˜¯æ ·æœ¬æ•°é‡ï¼Œçºµè½´æ˜¯å¹³å‡å›æŠ¥ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-1-%E7%BB%8F%E9%AA%8C%E5%9B%9E%E6%94%BE/1733201838369-eb1a4f6e-ab3a-45b9-83d7-03c73331017c.png"></p><p>æ³¨ åœ¨é˜…è¯»æ–‡çŒ®çš„æ—¶å€™è¯·æ³¨æ„â€œæ ·æœ¬æ•°é‡"(sample complexity)ä¸â€œæ›´æ–°æ¬¡æ•°"ä¸¤è€…çš„åŒºåˆ«ã€‚æ ·æœ¬æ•°é‡æ˜¯æŒ‡æ™ºèƒ½ä½“ä»ç¯å¢ƒä¸­è·å–çš„å¥–åŠ±<span class="math inline">\(r\)</span>çš„æ•°é‡ã€‚è€Œä¸€æ¬¡æ›´æ–°çš„æ„æ€æ˜¯ä»ç»éªŒå›æ”¾æ•°ç»„é‡Œå–å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå››å…ƒç»„ï¼Œç”¨å®ƒå¯¹å‚æ•°<span class="math inline">\(w\)</span>åšä¸€æ¬¡æ›´æ–°ã€‚é€šå¸¸æ¥è¯´ï¼Œæ ·æœ¬æ•°é‡æ›´é‡è¦ï¼Œå› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­æ”¶é›†ç»éªŒæ¯”è¾ƒå›°éš¾ã€‚æ¯”å¦‚ï¼Œåœ¨æœºå™¨äººçš„åº”ç”¨ä¸­ï¼Œéœ€è¦åœ¨ç°å®ä¸–ç•Œåšä¸€æ¬¡å®éªŒæ‰èƒ½æ”¶é›†åˆ°ä¸€æ¡ç»éªŒï¼ŒèŠ±è´¹çš„æ—¶é—´å’Œé‡‘é’±è¿œå¤§äºåšä¸€æ¬¡è®¡ç®—ã€‚ç›¸å¯¹è€Œè¨€ï¼Œåšæ›´æ–°çš„æ¬¡æ•°ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œæ›´æ–°æ¬¡æ•°åªä¼šå½±å“è®­ç»ƒæ—¶çš„è®¡ç®—é‡è€Œå·²ã€‚</p><h1 id="ç»éªŒå›æ”¾çš„å±€é™æ€§">ç»éªŒå›æ”¾çš„å±€é™æ€§</h1><p>éœ€è¦æ³¨æ„ï¼Œå¹¶éæ‰€æœ‰çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•éƒ½å…è®¸é‡å¤ä½¿ç”¨è¿‡å»çš„ç»éªŒã€‚ç»éªŒå›æ”¾æ•°ç»„é‡Œçš„æ•°æ®å…¨éƒ½æ˜¯ç”¨è¡Œä¸ºç­–ç•¥(behavior policy)æ§åˆ¶æ™ºèƒ½ä½“æ”¶é›†åˆ°çš„ã€‚åœ¨æ”¶é›†ç»éªŒåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ä¸æ–­åœ°æ”¹è¿›ç­–ç•¥ã€‚ç­–ç•¥çš„å˜åŒ–å¯¼è‡´æ”¶é›†ç»éªŒæ—¶ç”¨çš„è¡Œä¸ºç­–ç•¥æ˜¯è¿‡æ—¶çš„ç­–ç•¥ï¼Œä¸åŒäºå½“å‰æˆ‘ä»¬æƒ³è¦æ›´æ–°çš„ç­–ç•¥â€”â€”å³ç›®æ ‡ç­–ç•¥(targetpolicy)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»éªŒå›æ”¾æ•°ç»„ä¸­çš„ç»éªŒé€šå¸¸æ˜¯è¿‡æ—¶çš„è¡Œä¸ºç­–ç•¥æ”¶é›†çš„ï¼Œè€Œæˆ‘ä»¬çœŸæ­£æƒ³è¦å­¦çš„ç›®æ ‡ç­–ç•¥ä¸åŒäºè¿‡æ—¶çš„è¡Œä¸ºç­–ç•¥ã€‚</p><p>æœ‰äº›å¼ºåŒ–å­¦ä¹ æ–¹æ³•å…è®¸è¡Œä¸ºç­–ç•¥ä¸åŒäºç›®æ ‡ç­–ç•¥ã€‚è¿™æ ·çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•å«åšå¼‚ç­–ç•¥(off-policy)ã€‚æ¯”å¦‚Q å­¦ä¹ ã€ç¡®å®šç­–ç•¥æ¢¯åº¦ (DPG)éƒ½å±äºå¼‚ç­–ç•¥ã€‚ç”±äºå®ƒä»¬å…è®¸è¡Œä¸ºç­–ç•¥ä¸åŒäºç›®æ ‡ç­–ç•¥ï¼Œè¿‡æ—¶çš„è¡Œä¸ºç­–ç•¥æ”¶é›†åˆ°çš„ç»éªŒå¯ä»¥è¢«é‡å¤åˆ©ç”¨ã€‚ç»éªŒå›æ”¾é€‚ç”¨äºå¼‚ç­–ç•¥ã€‚</p><p>æœ‰äº›å¼ºåŒ–å­¦ä¹ æ–¹æ³•è¦æ±‚è¡Œä¸ºç­–ç•¥ä¸ç›®æ ‡ç­–ç•¥å¿…é¡»ç›¸åŒã€‚è¿™æ ·çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•å«åšåŒç­–ç•¥(on-policy)ã€‚æ¯”å¦‚ SARSAã€REINFORCEã€A2Céƒ½å±äºåŒç­–ç•¥ã€‚å®ƒä»¬è¦æ±‚ç»éªŒå¿…é¡»æ˜¯å½“å‰çš„ç›®æ ‡ç­–ç•¥æ”¶é›†åˆ°çš„ï¼Œè€Œä¸èƒ½ä½¿ç”¨è¿‡æ—¶çš„ç»éªŒã€‚ç»éªŒå›æ”¾ä¸é€‚ç”¨äºåŒç­–ç•¥ã€‚</p><h1 id="ä¼˜å…ˆç»éªŒå›æ”¾">ä¼˜å…ˆç»éªŒå›æ”¾</h1><p>ä¼˜å…ˆç»éªŒå›æ”¾ (prioritized experience replay)æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»éªŒå›æ”¾æ–¹æ³•ï¼Œå®ƒæ¯”æ™®é€šçš„ç»éªŒå›æ”¾æ•ˆæœæ›´å¥½ï¼šæ—¢èƒ½è®©æ”¶æ•›æ›´å¿«ï¼Œä¹Ÿèƒ½è®©æ”¶æ•›æ—¶çš„å¹³å‡å›æŠ¥æ›´é«˜ã€‚ç»éªŒå›æ”¾æ•°ç»„é‡Œæœ‰<span class="math inline">\(b\)</span>ä¸ªå››å…ƒç»„ï¼Œæ™®é€šç»éªŒå›æ”¾æ¯æ¬¡å‡åŒ€æŠ½æ ·å¾—åˆ°ä¸€ä¸ªæ ·æœ¬â€”â€”å³å››å…ƒç»„<span class="math inline">\((s_j, a_j, r_j, s_{j+1})\)</span>ã€‚ç”¨å®ƒæ¥æ›´æ–° DQNçš„å‚æ•°ã€‚ä¼˜å…ˆç»éªŒå›æ”¾ç»™æ¯ä¸ªå››å…ƒç»„ä¸€ä¸ªæƒé‡ï¼Œç„¶åæ ¹æ®æƒé‡åšéå‡åŒ€éšæœºæŠ½æ ·ã€‚å¦‚æœDQN å¯¹<span class="math inline">\((s_j,a_j)\)</span>çš„ä»·å€¼åˆ¤æ–­ä¸å‡†ç¡®ï¼Œå³<span class="math inline">\(Q(s_j, a_j;w)\)</span>ç¦»<span class="math inline">\(Q^*(s_j,a_j)\)</span>è¾ƒè¿œï¼Œåˆ™å››å…ƒç»„<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>åº”å½“æœ‰è¾ƒé«˜çš„æƒé‡ã€‚</p><p>ä¸ºä»€ä¹ˆæ ·æœ¬çš„é‡è¦æ€§ä¼šæœ‰æ‰€ä¸åŒå‘¢ï¼Ÿè®¾æƒ³ä½ ç”¨å¼ºåŒ–å­¦ä¹ è®­ç»ƒä¸€è¾†æ— äººè½¦ã€‚ç»éªŒå›æ”¾æ•°ç»„ä¸­çš„æ ·æœ¬ç»å¤§å¤šæ•°éƒ½æ˜¯è½¦è¾†æ­£å¸¸è¡Œé©¶çš„æƒ…å½¢ï¼Œåªæœ‰æå°‘æ•°æ ·æœ¬æ˜¯æ„å¤–æƒ…å†µï¼Œæ¯”å¦‚æ—è¾¹è½¦è¾†å¼ºè¡Œå˜é“ã€è¡Œäººæ¨ªç©¿é©¬è·¯ã€è­¦å¯Ÿå°è·¯è¦æ±‚ç»•è¡Œã€‚æ•°ç»„ä¸­çš„æ ·æœ¬çš„é‡è¦æ€§æ˜¾ç„¶æ˜¯ä¸åŒçš„ã€‚ç»å¤§å¤šæ•°çš„æ ·æœ¬éƒ½æ˜¯è½¦è¾†æ­£å¸¸è¡Œé©¶ï¼Œè€Œä¸”æ­£å¸¸è¡Œé©¶çš„æƒ…å½¢å¾ˆå®¹æ˜“å¤„ç†ï¼Œå‡ºé”™çš„å¯èƒ½æ€§éå¸¸å°ã€‚æ„å¤–æƒ…å†µçš„æ ·æœ¬éå¸¸å°‘ï¼Œä½†æ˜¯åˆæå…¶é‡è¦ï¼Œå¤„ç†ä¸å¥½å°±ä¼šè½¦æ¯äººäº¡ã€‚æ‰€ä»¥æ„å¤–æƒ…å†µçš„æ ·æœ¬åº”å½“æœ‰æ›´é«˜çš„æƒé‡ï¼Œå—åˆ°æ›´å¤šå…³æ³¨ã€‚è¿™ä¸¤ç§æ ·æœ¬ä¸åº”è¯¥åŒç­‰å¯¹å¾…ã€‚</p><p>å¦‚ä½•è‡ªåŠ¨åˆ¤æ–­å“ªäº›æ ·æœ¬æ›´é‡è¦å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œè‡ªåŠ¨é©¾é©¶ä¸­çš„æ„å¤–æƒ…å†µæ•°é‡å°‘ã€è€Œä¸”éš¾ä»¥å¤„ç†ï¼Œå¯¼è‡´DQN çš„é¢„æµ‹<span class="math inline">\(Q(s_j, a_j;w)\)</span>ä¸¥é‡åç¦»çœŸå®ä»·å€¼<span class="math inline">\(Q^*(s_j,a_j)\)</span>ã€‚å› æ­¤ï¼Œè¦æ˜¯<span class="math inline">\(|Q(s_j, a_j; w) -Q^*(s_j, a_j)|\)</span>è¾ƒå¤§ï¼Œåˆ™åº”è¯¥ç»™æ ·æœ¬<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>è¾ƒé«˜çš„æƒé‡ã€‚ç„¶è€Œå®é™…ä¸Šæˆ‘ä»¬ä¸çŸ¥é“<span class="math inline">\(Q^*\)</span>ï¼Œå› æ­¤æ— ä»å¾—çŸ¥<span class="math inline">\(|Q(s_j, a_j; w) - Q^*(s_j,a_j)|\)</span>ã€‚ä¸å¦¨æŠŠå®ƒæ›¿æ¢æˆ TD è¯¯å·®ã€‚å›å¿†ä¸€ä¸‹ï¼ŒTD è¯¯å·®çš„å®šä¹‰æ˜¯ï¼š</p><p><span class="math inline">\(\delta_j = \Delta Q(s_j, a_j;w_{\text{now}}) - [r_t + \gamma \cdot \max_a Q(s_{j+1}, a;w_{\text{now}})]\)</span></p><p>å¦‚æœ TD è¯¯å·®çš„ç»å¯¹å€¼<span class="math inline">\(|\delta_j|\)</span>å¤§ï¼Œè¯´æ˜ DQN å¯¹<span class="math inline">\((s_j,a_j)\)</span>çš„çœŸå®ä»·å€¼çš„è¯„ä¼°ä¸å‡†ç¡®ï¼Œé‚£ä¹ˆåº”è¯¥ç»™<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>è®¾ç½®è¾ƒé«˜çš„æƒé‡ã€‚</p><p>ä¼˜å…ˆç»éªŒå›æ”¾å¯¹æ•°ç»„é‡Œçš„æ ·æœ¬åšéå‡åŒ€æŠ½æ ·ã€‚å››å…ƒç»„<span class="math inline">\((s_j, a_j, r_j, s_{j+1})\)</span>çš„æƒé‡æ˜¯ TDè¯¯å·®çš„ç»å¯¹å€¼<span class="math inline">\(|\delta_j|\)</span>ã€‚æœ‰ä¸¤ç§æ–¹æ³•è®¾ç½®æŠ½æ ·æ¦‚ç‡ã€‚ä¸€ç§æŠ½æ ·æ¦‚ç‡æ˜¯ï¼š</p><p><span class="math inline">\(p_j \propto |\delta_j| +\epsilon\)</span>.</p><p>æ­¤å¤„çš„<span class="math inline">\(\epsilon\)</span>æ˜¯ä¸ªå¾ˆå°çš„æ•°ï¼Œé˜²æ­¢æŠ½æ ·æ¦‚ç‡æ¥è¿‘é›¶ï¼Œç”¨äºä¿è¯æ‰€æœ‰æ ·æœ¬éƒ½ä»¥éé›¶çš„æ¦‚ç‡è¢«æŠ½åˆ°ã€‚å¦ä¸€ç§æŠ½æ ·æ–¹å¼å…ˆå¯¹<span class="math inline">\(|\delta_j|\)</span>åšé™åºæ’åˆ—ï¼Œç„¶åè®¡ç®—</p><p><span class="math inline">\(p_j \propto\frac{1}{\text{rank}(j)}\)</span>.</p><p>æ­¤å¤„çš„<span class="math inline">\(\text{rank}(j)\)</span>æ˜¯<span class="math inline">\(|\delta_j|\)</span>çš„åºå·ã€‚å¤§çš„<span class="math inline">\(|\delta_j|\)</span>çš„åºå·å°ï¼Œå°çš„<span class="math inline">\(|\delta_j|\)</span>çš„åºå·å¤§ã€‚ä¸¤ç§æ–¹å¼çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œ<span class="math inline">\(|\delta_j|\)</span>å¤§çš„æ ·æœ¬è¢«æŠ½æ ·åˆ°çš„æ¦‚ç‡å¤§ã€‚</p><p>ä¼˜å…ˆç»éªŒå›æ”¾åšéå‡åŒ€æŠ½æ ·ï¼Œå››å…ƒç»„<span class="math inline">\((s_j,a_j, r_j, s_{j+1})\)</span>è¢«æŠ½åˆ°çš„æ¦‚ç‡æ˜¯<span class="math inline">\(p_j\)</span>ã€‚æŠ½æ ·æ˜¯éå‡åŒ€çš„ï¼Œä¸åŒçš„æ ·æœ¬æœ‰ä¸åŒçš„æŠ½æ ·æ¦‚ç‡ï¼Œè¿™æ ·ä¼šå¯¼è‡´DQN çš„é¢„æµ‹æœ‰åå·®ã€‚åº”è¯¥ç›¸åº”è°ƒæ•´å­¦ä¹ ç‡ï¼ŒæŠµæ¶ˆæ‰ä¸åŒæŠ½æ ·æ¦‚ç‡é€ æˆçš„åå·®ã€‚TDç®—æ³•ç”¨â€œéšæœºæ¢¯åº¦ä¸‹é™â€æ¥æ›´æ–°å‚æ•°ï¼š</p><p><span class="math inline">\(w_{\text{new}} \leftarrow w_{\text{now}}- \alpha \cdot g\)</span>,</p><p>æ­¤å¤„çš„<span class="math inline">\(\alpha\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œ<span class="math inline">\(g\)</span>æ˜¯æŸå¤±å‡½æ•°å…³äº<span class="math inline">\(w\)</span>çš„æ¢¯åº¦ã€‚å¦‚æœç”¨å‡åŒ€æŠ½æ ·ï¼Œé‚£ä¹ˆæ‰€æœ‰æ ·æœ¬æœ‰ç›¸åŒçš„å­¦ä¹ ç‡<span class="math inline">\(\alpha\)</span>ã€‚å¦‚æœåšéå‡åŒ€æŠ½æ ·çš„è¯ï¼Œåº”è¯¥æ ¹æ®æŠ½æ ·æ¦‚ç‡æ¥è°ƒæ•´å­¦ä¹ ç‡<span class="math inline">\(\alpha\)</span>ã€‚å¦‚æœä¸€æ¡æ ·æœ¬è¢«æŠ½æ ·çš„æ¦‚ç‡å¤§ï¼Œé‚£ä¹ˆå®ƒçš„å­¦ä¹ ç‡å°±åº”è¯¥æ¯”è¾ƒå°ã€‚å¯ä»¥è¿™æ ·è®¾ç½®å­¦ä¹ ç‡ï¼š</p><p><span class="math inline">\(\alpha_j = \frac{\alpha}{(b \cdotp_j)^\beta}\)</span>,</p><p>æ­¤å¤„çš„<span class="math inline">\(b\)</span>æ˜¯ç»éªŒå›æ”¾æ•°ç»„ä¸­æ ·æœ¬çš„æ€»æ•°ï¼Œ<span class="math inline">\(\beta \in (0,1)\)</span>æ˜¯ä¸ªéœ€è¦è°ƒçš„è¶…å‚æ•°ï¼ˆè®ºæ–‡é‡Œå»ºè®®ä¸€å¼€å§‹è®©<span class="math inline">\(\beta\)</span>æ¯”è¾ƒå°ï¼Œæœ€ç»ˆå¢é•¿åˆ° 1ï¼‰ã€‚</p><p>æ³¨ å‡åŒ€æŠ½æ ·æ˜¯ä¸€ç§ç‰¹ä¾‹ï¼Œå³æ‰€æœ‰æŠ½æ ·æ¦‚ç‡éƒ½ç›¸ç­‰ï¼š</p><p><span class="math inline">\(p_1 = \cdots = p_b =\frac{1}{b}\)</span>.</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰<span class="math inline">\((b \cdot p_j)^\beta =1\)</span>, å› æ­¤å­¦ä¹ ç‡éƒ½ç›¸åŒï¼š</p><p><span class="math inline">\(\alpha_1 = \cdots = \alpha_b =\alpha_o\)</span>.</p><p>æ³¨ è¯»è€…å¯èƒ½ä¼šé—®ä¸‹é¢çš„é—®é¢˜ã€‚å¦‚æœæ ·æœ¬<span class="math inline">\((s_j,a_j, r_j, s_{j+1})\)</span>å¾ˆé‡è¦ï¼Œå®ƒè¢«æŠ½åˆ°çš„æ¦‚ç‡<span class="math inline">\(p_j\)</span>å¾ˆå¤§ï¼Œå¯æ˜¯å®ƒçš„å­¦ä¹ ç‡å´å¾ˆå°ã€‚å½“<span class="math inline">\(\beta = 1\)</span>æ—¶ï¼Œå¦‚æœæŠ½æ ·æ¦‚ç‡<span class="math inline">\(p_j\)</span>å˜å¤§ 10 å€ï¼Œåˆ™å­¦ä¹ ç‡<span class="math inline">\(\alpha_j\)</span>å‡å° 10å€ã€‚æŠ½æ ·æ¦‚ç‡ã€å­¦ä¹ ç‡ä¸¤è€…å²‚ä¸æ˜¯æŠµæ¶ˆäº†å—ï¼Œé‚£ä¹ˆä¼˜å…ˆç»éªŒå›æ”¾æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿå¤§æŠ½æ ·æ¦‚ç‡ã€å°å­¦ä¹ ç‡ä¸¤è€…å…¶å®å¹¶æ²¡æœ‰æŠµæ¶ˆï¼Œå› ä¸ºä¸‹é¢ä¸¤ç§æ–¹å¼å¹¶ä¸ç­‰ä»·ï¼š</p><ul><li>è®¾ç½®å­¦ä¹ ç‡ä¸º<span class="math inline">\(\alpha\)</span>,ä½¿ç”¨æ ·æœ¬<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>è®¡ç®—ä¸€æ¬¡æ¢¯åº¦ï¼Œæ›´æ–°ä¸€æ¬¡å‚æ•°<span class="math inline">\(w\)</span>;</li><li>è®¾ç½®å­¦ä¹ ç‡ä¸º<span class="math inline">\(\frac{\alpha}{10}\)</span>,ä½¿ç”¨æ ·æœ¬<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>è®¡ç®—åæ¬¡æ¢¯åº¦ï¼Œæ›´æ–°åæ¬¡å‚æ•°<span class="math inline">\(w\)</span>ã€‚</li></ul><p>ä¹çœ‹èµ·æ¥ä¸¤ç§æ–¹å¼åŒºåˆ«ä¸å¤§ï¼Œä½†å…¶å®ç¬¬äºŒç§æ–¹å¼æ˜¯å¯¹æ ·æœ¬æ›´æœ‰æ•ˆçš„åˆ©ç”¨ã€‚ç¬¬äºŒç§æ–¹å¼çš„ç¼ºç‚¹åœ¨äºè®¡ç®—é‡å¤§äº†åå€ï¼Œæ‰€ä»¥ç¬¬äºŒç§æ–¹å¼åªè¢«ç”¨äºé‡è¦çš„æ ·æœ¬ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/5-1-%E7%BB%8F%E9%AA%8C%E5%9B%9E%E6%94%BE/1733202010568-2c83e20c-97ce-4227-aeea-8a893769e0cd.png"></p><p>ä¼˜å…ˆç»éªŒå›æ”¾æ•°ç»„å¦‚å›¾ 6.3 æ‰€ç¤ºã€‚è®¾<span class="math inline">\(b\)</span>ä¸ºæ•°ç»„å¤§å°ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚å¦‚æœæ ·æœ¬(å³å››å…ƒç»„) çš„æ•°é‡è¶…è¿‡äº†<span class="math inline">\(b\)</span>,é‚£ä¹ˆè¦åˆ é™¤æœ€æ—§çš„æ ·æœ¬ã€‚æ•°ç»„é‡Œè®°å½•äº†å››å…ƒç»„ã€TDè¯¯å·®ã€æŠ½æ ·æ¦‚ç‡ã€ä»¥åŠå­¦ä¹ ç‡ã€‚æ³¨æ„ï¼Œæ•°ç»„é‡Œå­˜çš„ TD è¯¯å·®<span class="math inline">\(\delta_j\)</span>æ˜¯ç”¨å¾ˆå¤šæ­¥ä¹‹å‰è¿‡æ—¶çš„ DQNå‚æ•°è®¡ç®—å‡ºæ¥çš„ï¼š</p><p><span class="math inline">\(\delta_j = Q(s_j, a_j; w_{\text{old}}) -[r_t + \gamma \cdot \max_a Q(s_{j+1}, a; w_{\text{old}})]\)</span>.</p><p>åšç»éªŒå›æ”¾çš„æ—¶å€™ï¼Œæ¯æ¬¡å–å‡ºä¸€ä¸ªå››å…ƒç»„ï¼Œç”¨å®ƒè®¡ç®—å‡ºæ–°çš„ TD è¯¯å·®ï¼š</p><p><span class="math inline">\(\delta_j&#39; = Q(s_j, a_j;w_{\text{now}}) - [r_t + \gamma \cdot \max_a Q(s_{j+1}, a;w_{\text{now}})]\)</span>,</p><p>ç„¶åç”¨å®ƒæ›´æ–° DQN çš„å‚æ•°ã€‚ç”¨è¿™ä¸ªæ–°çš„<span class="math inline">\(\delta_j&#39;\)</span>å–ä»£æ•°ç»„ä¸­æ—§çš„<span class="math inline">\(\delta_j\)</span>ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.3 å¤šæ­¥ TDç›®æ ‡</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-3-%E5%A4%9A%E6%AD%A5-TD%E7%9B%AE%E6%A0%87/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-3-%E5%A4%9A%E6%AD%A5-TD%E7%9B%AE%E6%A0%87/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤šæ­¥-td-ç›®æ ‡">å¤šæ­¥ TD ç›®æ ‡</h1><p>é¦–å…ˆå›é¡¾ä¸€ä¸‹ SARSA ç®—æ³•ã€‚ç»™å®šäº”å…ƒç»„<span class="math inline">\((s_t,a_t, r_t, s_{t+1}, a_{t+1})\)</span>, SARSA è®¡ç®— TD ç›®æ ‡ï¼š</p><p><span class="math inline">\(\hat{y}_t = r_t + \gamma \cdot q(s_{t+1},a_{t+1}; \boldsymbol{w}).\)</span></p><p>å…¬å¼ä¸­åªç”¨åˆ°ä¸€ä¸ªå¥–åŠ±<span class="math inline">\(r_t\)</span>,è¿™æ ·å¾—åˆ°çš„<span class="math inline">\(\hat{y}_t\)</span>å«åšå•æ­¥ TD ç›®æ ‡ã€‚å¤šæ­¥ TDç›®æ ‡ç”¨<span class="math inline">\(m\)</span>ä¸ªå¥–åŠ±å¯ä»¥è§†ä½œå•æ­¥ TDç›®æ ‡çš„æ¨å¹¿ã€‚ä¸‹é¢æˆ‘ä»¬æ¨å¯¼å¤šæ­¥ TD ç›®æ ‡ã€‚</p><h2 id="æ•°å­¦æ¨å¯¼">æ•°å­¦æ¨å¯¼ï¼š</h2><p>è®¾ä¸€å±€æ¸¸æˆçš„é•¿åº¦ä¸º<span class="math inline">\(n\)</span>ã€‚æ ¹æ®å®šä¹‰ï¼Œ<span class="math inline">\(t\)</span>æ—¶åˆ»çš„å›æŠ¥<span class="math inline">\(U_t\)</span>æ˜¯<span class="math inline">\(t\)</span>æ—¶åˆ»ä¹‹åçš„æ‰€æœ‰å¥–åŠ±çš„åŠ æƒå’Œï¼š</p><p><span class="math inline">\(U_t = R_t + \gamma R_{t+1} + \gamma^2R_{t+2} + \cdots + \gamma^{n-t} R_n.\)</span></p><p>åŒç†ï¼Œ<span class="math inline">\(t+m\)</span>æ—¶åˆ»çš„å›æŠ¥å¯ä»¥å†™æˆï¼š</p><p><span class="math inline">\(U_{t+m} = R_{t+m} + \gamma R_{t+m+1} +\gamma^2 R_{t+m+2} + \cdots + \gamma^{n-t-m} R_n.\)</span></p><p>ä¸‹é¢æˆ‘ä»¬æ¨å¯¼ä¸¤ä¸ªå›æŠ¥çš„å…³ç³»ã€‚æŠŠ<span class="math inline">\(U_t\)</span>å†™æˆï¼š</p><p><span class="math inline">\(\begin{align*}U_{t} &amp;= \left(R_{t} + \gamma R_{t+1} + \cdots + \gamma^{m-1}R_{t+m-1}\right) + \left(\gamma^{m} R_{t+m} + \cdots + \gamma^{n-t}R_{n}\right) \\&amp;= \left(\sum_{i=0}^{m-1} \gamma^{i} R_{t+i}\right) + \gamma^{m}\underbrace{\left(R_{t+m} + \gamma R_{t+m+1} + \cdots + \gamma^{n-t-m}R_{n}\right)}_{\text{ç­‰äº} U_{t+m}}.\end{align*}\)</span></p><p>å› æ­¤ï¼Œå›æŠ¥å¯ä»¥å†™æˆè¿™ç§å½¢å¼ï¼š</p><p><span class="math inline">\(U_t = ( \sum_{i=0}^{m-1} \gamma^i R_{t+i}) + \gamma^m U_{t+m}.\)</span></p><p>åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>æ˜¯å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›ï¼Œè€Œ<span class="math inline">\(Q_\pi(s_{t+m}, a_{t+m})\)</span>æ˜¯å›æŠ¥<span class="math inline">\(U_{t+m}\)</span>çš„æœŸæœ›ã€‚åˆ©ç”¨å…¬å¼ï¼Œå†æŒ‰ç…§è´å°”æ›¼æ–¹ç¨‹çš„è¯æ˜ï¼Œä¸éš¾å¾—å‡ºä¸‹é¢çš„å®šç†ï¼š</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-3-%E5%A4%9A%E6%AD%A5-TD%E7%9B%AE%E6%A0%87/1733200971858-f2d763c8-9406-4c2c-986a-4a5acff344b4.png"></p><p>è®¾<span class="math inline">\(R_k\)</span>æ˜¯<span class="math inline">\(S_k, A_k\)</span>çš„å‡½æ•°ï¼Œ<span class="math inline">\(\forall k = 1, \cdots, n\)</span>ã€‚é‚£ä¹ˆ</p><p><span class="math inline">\(\underbrace{Q_\pi(s_t, a_t)}_{U_t\text{çš„æœŸæœ›}} = \mathbb{E} \left[ \left( \sum_{i=0}^{m-1} \gamma^iR_{t+i} \right) + \gamma^m \cdot \underbrace{Q_\pi(S_{t+m},A_{t+m})}_{U_{t+m} \text{çš„æœŸæœ›}} \bigg \| S_t = s_t, A_t = a_t\right].\)</span></p><p>å…¬å¼ä¸­çš„æœŸæœ›æ˜¯å…³äºéšæœºå˜é‡<span class="math inline">\(S_{t+1},A_{t+1}, \cdots, S_{t+m}, A_{t+m}\)</span>æ±‚çš„ã€‚</p><p>æ³¨ å›æŠ¥<span class="math inline">\(U_t\)</span>çš„éšæœºæ€§æ¥è‡ªäº<span class="math inline">\(t\)</span>åˆ°<span class="math inline">\(n\)</span>æ—¶åˆ»çš„çŠ¶æ€å’ŒåŠ¨ä½œï¼š</p><p><span class="math inline">\(S_t, A_t, S_{t+1}, A_{t+1}, \cdots,S_{t+m}, A_{t+m}, S_{t+m+1}, A_{t+m+1}, \cdots, S_n, A_n.\)</span></p><p>å®šç†ä¸­æŠŠ<span class="math inline">\(S_t = s_t\)</span>å’Œ<span class="math inline">\(A_t = a_t\)</span>çœ‹åšæ˜¯è§‚æµ‹å€¼ï¼Œç”¨æœŸæœ›æ¶ˆæ‰<span class="math inline">\(S_{t+1}, A_{t+1}, \cdots, S_{t+m},A_{t+m}\)</span>, è€Œ<span class="math inline">\(Q_\pi(S_{t+m},A_{t+m})\)</span>åˆ™æ¶ˆæ‰äº†å‰©ä½™çš„éšæœºå˜é‡<span class="math inline">\(S_{t+m+1}, A_{t+m+1}, \cdots, S_n,A_n\)</span>ã€‚</p><h2 id="å¤šæ­¥-tdç›®æ ‡">å¤šæ­¥ TDç›®æ ‡ï¼š</h2><p>æˆ‘ä»¬å¯¹å®šç†ä¸­çš„æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œç„¶åå†ç”¨ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s, a;\boldsymbol{w})\)</span>è¿‘ä¼¼åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s, a)\)</span>ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p><ul><li>åœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»ï¼Œä»·å€¼ç½‘ç»œåšå‡ºé¢„æµ‹<span class="math inline">\(\hat{q}_t = q(s_t, a_t; \boldsymbol{w})\)</span>,å®ƒæ˜¯å¯¹<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>çš„ä¼°è®¡ã€‚</li><li>å·²çŸ¥å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>, ç”¨ç­–ç•¥<span class="math inline">\(\pi\)</span>æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’<span class="math inline">\(m\)</span>æ¬¡ï¼Œå¾—åˆ°è½¨è¿¹<span class="math inline">\(r_t, s_{t+1}, a_{t+1}, r_{t+1}, \cdots, s_{t+m-1},a_{t+m-1}, r_{t+m-1}, s_{t+m}, a_{t+m}\)</span>.</li><li>åœ¨<span class="math inline">\(t+m\)</span>æ—¶åˆ»ï¼Œç”¨è§‚æµ‹åˆ°çš„è½¨è¿¹å¯¹å®šç†ä¸­çš„æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼ŒæŠŠè¿‘ä¼¼çš„ç»“æœè®°ä½œï¼š</li></ul><p><span class="math inline">\(\left(\sum_{i=0}^{m-1} \gamma^ir_{t+i}\right) + \gamma^m \cdot Q_\pi(s_{t+m}, a_{t+m}).\)</span></p><ul><li>è¿›ä¸€æ­¥ç”¨<span class="math inline">\(q(s_{t+m}, a_{t+m};\boldsymbol{w})\)</span>è¿‘ä¼¼<span class="math inline">\(Q_\pi(s_{t+m},a_{t+m})\)</span>, å¾—åˆ°ï¼š</li></ul><p><span class="math inline">\(\hat{y}_t \triangleq\left(\sum_{i=0}^{m-1} \gamma^i r_{t+i}\right) + \gamma^m \cdotq(s_{t+m}, a_{t+m}; \boldsymbol{w}).\)</span></p><p>æŠŠ<span class="math inline">\(\hat{y}_t\)</span>ç§°ä½œ<span class="math inline">\(m\)</span>æ­¥TD ç›®æ ‡ã€‚</p><p><span class="math inline">\(\hat{q}_t = q(s_t, a_t;\boldsymbol{w})\)</span>å’Œ<span class="math inline">\(\hat{y}_t\)</span>åˆ†åˆ«æ˜¯ä»·å€¼ç½‘ç»œåœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»å’Œ<span class="math inline">\(t+m\)</span>æ—¶åˆ»åšå‡ºçš„é¢„æµ‹ï¼Œä¸¤è€…éƒ½æ˜¯å¯¹<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>çš„ä¼°è®¡å€¼ã€‚<span class="math inline">\(\hat{q}_t\)</span>æ˜¯çº¯ç²¹çš„é¢„æµ‹ï¼Œè€Œ<span class="math inline">\(\hat{y}_t\)</span>åˆ™åŸºäº<span class="math inline">\(m\)</span>ç»„å®é™…è§‚æµ‹ï¼Œå› æ­¤<span class="math inline">\(\hat{y}_t\)</span>æ¯”<span class="math inline">\(\hat{q}_t\)</span>æ›´å¯é ã€‚æˆ‘ä»¬é¼“åŠ±<span class="math inline">\(\hat{q}_t\)</span>æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚è®¾æŸå¤±å‡½æ•°ä¸ºï¼š</p><p><span class="math inline">\(L(\boldsymbol{w}) \triangleq \frac{1}{2}\Big[q(s_t, a_t; \boldsymbol{w}) - \hat{y}_t\Big]^2.\)</span></p><p>åšä¸€æ­¥æ¢¯åº¦ä¸‹é™æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>:</p><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot (\hat{q}_t - \hat{y}_t) \cdot \nabla_{\boldsymbol{w}}q(s_t, a_t; \boldsymbol{w}).\)</span></p><p><strong>è®­ç»ƒæµç¨‹</strong>ï¼š</p><p>è®¾å½“å‰ä»·å€¼ç½‘ç»œçš„å‚æ•°ä¸º<span class="math inline">\(\boldsymbol{w}_{\text{now}}\)</span>,å½“å‰ç­–ç•¥ä¸º<span class="math inline">\(\pi_{\text{now}}\)</span>ã€‚æ‰§è¡Œä»¥ä¸‹æ­¥éª¤æ›´æ–°ä»·å€¼ç½‘ç»œå’Œç­–ç•¥ã€‚</p><ol type="1"><li>ç”¨ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi_{\text{now}}\)</span>æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼Œå®Œæˆä¸€ä¸ªå›åˆï¼Œå¾—åˆ°è½¨è¿¹<span class="math inline">\(s_1, a_1, r_1, s_2, a_2, r_2, \cdots, s_n, a_n,r_n\)</span>.</li><li>å¯¹äºæ‰€æœ‰çš„<span class="math inline">\(t = 1, \cdots, n-m\)</span>,è®¡ç®—<span class="math inline">\(\hat{q}_t = q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.<br>3.å¯¹äºæ‰€æœ‰çš„<span class="math inline">\(t = 1, \cdots,n-m\)</span>,è®¡ç®—å¤šæ­¥ TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š</li></ol><p><span class="math inline">\(\hat{y}_t = \sum_{i=0}^{m-1} \gamma^ir_{t+i} + \gamma^m \hat{q}_{t+m}, \quad \delta_t = \hat{q}_t -\hat{y}_t.\)</span></p><ol start="4" type="1"><li>å¯¹äºæ‰€æœ‰çš„<span class="math inline">\(t = 1, \cdots, n-m\)</span>,å¯¹ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>åšåå‘ä¼ æ’­ï¼Œè®¡ç®—<span class="math inline">\(q\)</span>å…³äº<span class="math inline">\(\boldsymbol{w}\)</span>çš„æ¢¯åº¦ï¼š<span class="math inline">\(\nabla_{\boldsymbol{w}} q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°ï¼š</li></ol><p><span class="math inline">\(\boldsymbol{w}_{\text{new}} \leftarrow\boldsymbol{w}_{\text{now}} - \alpha \cdot \sum_{t=1}^{n-m} \delta_t\cdot \nabla_{\boldsymbol{w}} q(s_t, a_t;\boldsymbol{w}_{\text{now}}).\)</span></p><ol start="6" type="1"><li>ç”¨æŸç§ç®—æ³•æ›´æ–°ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi\)</span>ã€‚è¯¥ç®—æ³•ä¸ SARSA ç®—æ³•æ— å…³ã€‚</li></ol><h2 id="è’™ç‰¹å¡æ´›ä¸è‡ªä¸¾">è’™ç‰¹å¡æ´›ä¸è‡ªä¸¾</h2><p>ä¸Šä¸€èŠ‚ä»‹ç»äº†å¤šæ­¥ TD ç›®æ ‡ã€‚å•æ­¥ TD ç›®æ ‡ã€å›æŠ¥æ˜¯å¤šæ­¥ TDç›®æ ‡çš„ä¸¤ç§ç‰¹ä¾‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœè®¾<span class="math inline">\(m=1\)</span>,é‚£ä¹ˆå¤šæ­¥ TD ç›®æ ‡å˜æˆå•æ­¥ TDç›®æ ‡ã€‚å¦‚æœè®¾<span class="math inline">\(m=n-t+1\)</span>,é‚£ä¹ˆå¤šæ­¥ TDç›®æ ‡å˜æˆå®é™…è§‚æµ‹çš„å›æŠ¥<span class="math inline">\(u_t\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-3-%E5%A4%9A%E6%AD%A5-TD%E7%9B%AE%E6%A0%87/1733201036864-2bc98eb5-101c-4e51-b254-dfd667733d36.png"></p><h3 id="è’™ç‰¹å¡æ´›">è’™ç‰¹å¡æ´›</h3><p>è®­ç»ƒä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s, a;\boldsymbol{w})\)</span>çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€å±€æ¸¸æˆè¿›è¡Œåˆ°åº•ï¼Œè§‚æµ‹åˆ°æ‰€æœ‰çš„å¥–åŠ±<span class="math inline">\(r_1, \cdots, r_n\)</span>,ç„¶åè®¡ç®—å›æŠ¥<span class="math inline">\(u_t = \sum_{i=0}^{n-t} \gamma^ir_{t+i}\)</span>ã€‚æ‹¿<span class="math inline">\(u_t\)</span>ä½œä¸ºç›®æ ‡ï¼Œé¼“åŠ±ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s_t, a_t; \boldsymbol{w})\)</span>æ¥è¿‘<span class="math inline">\(u_t\)</span>ã€‚å®šä¹‰æŸå¤±å‡½æ•°ï¼š</p><p><span class="math inline">\(L(\boldsymbol{w}) = \frac{1}{2}\left[q(s_t, a_t; \boldsymbol{w}) - u_t\right]^2.\)</span></p><p>ç„¶ååšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>:</p><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot \nabla_{\boldsymbol{w}} L(\boldsymbol{w}),\)</span></p><p>è¿™æ ·å¯ä»¥è®©ä»·å€¼ç½‘ç»œçš„é¢„æµ‹<span class="math inline">\(q(s_t, a_t;\boldsymbol{w})\)</span>æ›´æ¥è¿‘<span class="math inline">\(u_t\)</span>ã€‚è¿™ç§è®­ç»ƒä»·å€¼ç½‘ç»œçš„æ–¹æ³•ä¸æ˜¯ TDã€‚</p><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œè®­ç»ƒä»·å€¼ç½‘ç»œçš„æ—¶å€™ä»¥<span class="math inline">\(u_t\)</span>ä½œä¸ºç›®æ ‡ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä½œâ€œè’™ç‰¹å¡æ´›â€ã€‚åŸå› æ˜¯è¿™æ ·çš„ï¼ŒåŠ¨ä½œä»·å€¼å‡½æ•°å¯ä»¥å†™ä½œ<span class="math inline">\(Q_{\pi}(s_{t}, a_{t}) = \mathbb{E}[U_{t} \midS_{t} = s_{t}, A_{t} = a_{t}].\)</span>, è€Œæˆ‘ä»¬ç”¨å®é™…è§‚æµ‹<span class="math inline">\(u_t\)</span>å»è¿‘ä¼¼æœŸæœ›ï¼Œè¿™å°±æ˜¯å…¸å‹çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚</p><p>è’™ç‰¹å¡æ´›çš„å¥½å¤„æ˜¯æ— åæ€§ï¼š<span class="math inline">\(u_t\)</span>æ˜¯<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>çš„æ— åä¼°è®¡ã€‚ç”±äº<span class="math inline">\(u_t\)</span>çš„æ— åæ€§ï¼Œæ‹¿<span class="math inline">\(u_t\)</span>ä½œä¸ºç›®æ ‡è®­ç»ƒä»·å€¼ç½‘ç»œï¼Œå¾—åˆ°çš„ä»·å€¼ç½‘ç»œä¹Ÿæ˜¯æ— åçš„ã€‚</p><p>è’™ç‰¹å¡æ´›çš„åå¤„æ˜¯æ–¹å·®å¤§ã€‚éšæœºå˜é‡<span class="math inline">\(U_t\)</span>ä¾èµ–äº<span class="math inline">\(S_{t+1}, A_{t+1}, \cdots, S_n,A_n\)</span>è¿™äº›éšæœºå˜é‡ï¼Œå…¶ä¸­ä¸ç¡®å®šæ€§å¾ˆå¤§ã€‚è§‚æµ‹å€¼<span class="math inline">\(u_t\)</span>è™½ç„¶æ˜¯<span class="math inline">\(U_t\)</span>çš„æ— åä¼°è®¡ï¼Œä½†å¯èƒ½å®é™…ä¸Šç¦»<span class="math inline">\(\mathbb{E}\{U_t\}\)</span>å¾ˆè¿œã€‚</p><p>å› æ­¤ï¼Œæ‹¿<span class="math inline">\(u_t\)</span>ä½œä¸ºç›®æ ‡è®­ç»ƒä»·å€¼ç½‘ç»œï¼Œæ”¶æ•›ä¼šå¾ˆæ…¢ã€‚</p><h3 id="è‡ªä¸¾">è‡ªä¸¾</h3><p>åœ¨ä»‹ç»ä»·å€¼å­¦ä¹ çš„è‡ªä¸¾ä¹‹å‰ï¼Œå…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆå«è‡ªä¸¾ã€‚å¤§å®¶å¯èƒ½ç»å¸¸åœ¨å¼ºåŒ–å­¦ä¹ å’Œç»Ÿè®¡å­¦çš„æ–‡ç« é‡Œè§åˆ°bootstrapping è¿™ä¸ªè¯ã€‚å®ƒçš„å­—é¢æ„æ€æ˜¯â€œæ‹”è‡ªå·±çš„é‹å¸¦ï¼ŒæŠŠè‡ªå·±ä¸¾èµ·æ¥â€ã€‚æ‰€ä»¥bootstrapping ç¿»è¯‘æˆâ€œè‡ªä¸¾â€,å³è‡ªå·±æŠŠè‡ªå·±ä¸¾èµ·æ¥ã€‚è‡ªä¸¾å¬èµ·æ¥å¾ˆè’è°¬ã€‚å³ä½¿ä½ â€œåŠ›æ‹”å±±å…®æ°”ç›–ä¸–â€,ä½ ä¹Ÿæ²¡åŠæ³•æ‹”è‡ªå·±çš„é‹å¸¦ï¼ŒæŠŠè‡ªå·±ä¸¾èµ·æ¥ã€‚è™½ç„¶è‡ªä¸¾ä¹çœ‹èµ·æ¥ä¸ç°å®ï¼Œä½†æ˜¯åœ¨ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹  æ˜¯å¯ä»¥åšåˆ°è‡ªä¸¾çš„ï¼›è‡ªä¸¾åœ¨ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ é‡Œé¢éå¸¸å¸¸ç”¨ã€‚</p><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œâ€œè‡ªä¸¾â€çš„æ„æ€æ˜¯â€œç”¨ä¸€ä¸ªä¼°ç®—å»æ›´æ–°åŒç±»çš„ä¼°ç®—â€,ç±»ä¼¼äºâ€œè‡ªå·±æŠŠè‡ªå·±ç»™ä¸¾èµ·æ¥â€ã€‚SARSAä½¿ç”¨çš„å•æ­¥ TD ç›®æ ‡å®šä¹‰ä¸ºï¼š</p><p>SARSA é¼“åŠ±<span class="math inline">\(q(s_t, a_t;\boldsymbol{w})\)</span>æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>, æ‰€ä»¥å®šä¹‰æŸå¤±å‡½æ•°ï¼š</p><p><span class="math inline">\(L(w) = \frac{1}{2} \left[q(s_t, a_t;\boldsymbol{w}) - \hat{y}_t\right]^2.\)</span></p><p>TD ç›®æ ‡<span class="math inline">\(\hat{y}_t\)</span>çš„ä¸€éƒ¨åˆ†æ˜¯ä»·å€¼ç½‘ç»œåšå‡ºçš„ä¼°è®¡<span class="math inline">\(\gamma \cdot q(s_{t+1}, a_{t+1};\boldsymbol{w})\)</span>, ç„¶å SARSA è®©<span class="math inline">\(q(s_t, a_t; \boldsymbol{w})\)</span>å»æ‹Ÿåˆ<span class="math inline">\(\hat{y}_t\)</span>ã€‚è¿™å°±æ˜¯ç”¨ä»·å€¼ç½‘ç»œè‡ªå·±åšå‡ºçš„ä¼°è®¡å»æ›´æ–°ä»·å€¼ç½‘ç»œè‡ªå·±ï¼Œè¿™å±äºâ€œè‡ªä¸¾â€ã€‚(ä¸¥æ ¼åœ°è¯´ï¼ŒTDç›®æ ‡<span class="math inline">\(\hat{y}_t\)</span>ä¸­æ—¢æœ‰è‡ªä¸¾çš„æˆåˆ†ï¼Œä¹Ÿæœ‰è’™ç‰¹å¡æ´›çš„æˆåˆ†ã€‚TDç›®æ ‡ä¸­çš„<span class="math inline">\(\gamma \cdot q(s_{t+1}, a_{t+1};\boldsymbol{w})\)</span>æ˜¯è‡ªä¸¾ï¼Œå› ä¸ºå®ƒæ‹¿ä»·å€¼ç½‘ç»œè‡ªå·±çš„ä¼°è®¡ä½œä¸ºç›®æ ‡ã€‚TDç›®æ ‡ä¸­çš„<span class="math inline">\(r_t\)</span>æ˜¯å®é™…è§‚æµ‹ï¼Œå®ƒæ˜¯å¯¹<span class="math inline">\(\mathbb{E}[R_t]\)</span>çš„è’™ç‰¹å¡æ´›ã€‚)</p><p>è‡ªä¸¾çš„å¥½å¤„æ˜¯æ–¹å·®å°ã€‚å•æ­¥ TD ç›®æ ‡çš„éšæœºæ€§åªæ¥è‡ªäº<span class="math inline">\(S_{t+1}, A_{t+1}\)</span>, è€Œå›æŠ¥<span class="math inline">\(U_t\)</span>çš„éšæœºæ€§æ¥è‡ªäº<span class="math inline">\(S_{t+1}, A_{t+1}, \cdots, S_n,A_n\)</span>ã€‚å¾ˆæ˜¾ç„¶ï¼Œå•æ­¥ TDç›®æ ‡çš„éšæœºæ€§è¾ƒå°ï¼Œå› æ­¤æ–¹å·®è¾ƒå°ã€‚ç”¨è‡ªä¸¾è®­ç»ƒä»·å€¼ç½‘ç»œï¼Œæ”¶æ•›æ¯”è¾ƒå¿«ã€‚</p><p>è‡ªä¸¾çš„åå¤„æ˜¯æœ‰åå·®ã€‚ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s, a;\boldsymbol{w})\)</span>æ˜¯å¯¹åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_\pi(s,a)\)</span>çš„è¿‘ä¼¼ã€‚æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œ<span class="math inline">\(q(s, a;\boldsymbol{w}) = Q_\pi(s, a), \forall s, a\)</span>ã€‚å‡å¦‚ç¢°å·§<span class="math inline">\(q(s_{j+1}, a_{j+1};\boldsymbol{w})\)</span>ä½ä¼°(æˆ–é«˜ä¼°)çœŸå®ä»·å€¼<span class="math inline">\(Q_\pi(s_{j+1},a_{j+1})\)</span>,åˆ™ä¼šå‘ç”Ÿä¸‹é¢çš„æƒ…å†µï¼š</p><p><span class="math inline">\(\begin{align*}&amp;\Longrightarrow\quad q(s_{j+1}, a_{j+1}; w) \quad\text{ä½ä¼°(æˆ–é«˜ä¼°)} \quad Q_{\pi}(s_{j+1}, a_{j+1}) \\&amp;\Longrightarrow\quad \widehat{y_{j}} \quad \text{ä½ä¼°(æˆ–é«˜ä¼°)}\quad Q_{\pi}(s_{j}, a_{j}) \\&amp;\Longrightarrow\quad q(s_{j}, a_{j}; w) \quad \text{ä½ä¼°(æˆ–é«˜ä¼°)}\quad Q_{\pi}(s_{j}, a_{j}).\end{align*}\)</span></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè‡ªä¸¾ä¼šè®©åå·®ä»<span class="math inline">\((s_{t+1},a_{t+1})\)</span>ä¼ æ’­åˆ°<span class="math inline">\((s_t,a_t)\)</span>ã€‚åé¢è¯¦ç»†è®¨è®ºè‡ªä¸¾é€ æˆçš„åå·®ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚</p><h3 id="è’™ç‰¹å¡æ´›å’Œè‡ªä¸¾çš„å¯¹æ¯”">è’™ç‰¹å¡æ´›å’Œè‡ªä¸¾çš„å¯¹æ¯”</h3><p>åœ¨ä»·å€¼å­¦ä¹ ä¸­ï¼Œç”¨å®é™…è§‚æµ‹çš„å›æŠ¥<span class="math inline">\(u_t\)</span>ä½œä¸ºç›®æ ‡çš„æ–¹æ³•è¢«ç§°ä¸ºè’™ç‰¹å¡æ´›ï¼Œå³å›¾ 5.5ä¸­çš„è“è‰²çš„ç®±å‹å›¾ã€‚</p><p><span class="math inline">\(u_t\)</span>æ˜¯<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>çš„æ— åä¼°è®¡ï¼Œå³<span class="math inline">\(\mathbb{E}\{U_t\} = Q_\pi(s_t,a_t)\)</span>ã€‚ä½†æ˜¯å®ƒçš„æ–¹å·®å¾ˆå¤§ï¼Œä¹Ÿå°±æ˜¯è¯´å®é™…è§‚æµ‹åˆ°çš„<span class="math inline">\(u_t\)</span>å¯èƒ½ç¦»<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>å¾ˆè¿œã€‚</p><p>ç”¨å•æ­¥ TD ç›®æ ‡<span class="math inline">\(\hat{y}_t\)</span>ä½œä¸ºç›®æ ‡çš„æ–¹æ³•è¢«ç§°ä¸ºè‡ªä¸¾ï¼Œå³å›¾5.5ä¸­çš„çº¢è‰²çš„ç®±å‹å›¾ã€‚è‡ªä¸¾çš„å¥½å¤„åœ¨äºæ–¹å·®å°ï¼Œ<span class="math inline">\(\hat{y}_t\)</span>ä¸ä¼šåç¦»æœŸæœ›å¤ªè¿œã€‚ä½†æ˜¯<span class="math inline">\(\hat{y}_t\)</span>å¾€å¾€æ˜¯æœ‰åçš„ï¼Œå®ƒçš„æœŸæœ›å¾€å¾€ä¸ç­‰äº<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>ã€‚ç”¨è‡ªä¸¾è®­ç»ƒå‡ºçš„ä»·å€¼ç½‘ç»œå¾€å¾€æœ‰ç³»ç»Ÿæ€§çš„åå·®(ä½ä¼°æˆ–è€…é«˜ä¼°)ã€‚å®è·µä¸­ï¼Œè‡ªä¸¾é€šå¸¸æ¯”è’™ç‰¹å¡æ´›æ”¶æ•›æ›´å¿«ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®­ç»ƒ DQNå’Œä»·å€¼ç½‘ç»œé€šå¸¸ç”¨ TD ç®—æ³•ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-3-%E5%A4%9A%E6%AD%A5-TD%E7%9B%AE%E6%A0%87/1733201216510-1e04b391-1f6b-4ffc-84aa-c413475ed842.png"></p><p>å¦‚å›¾ 5.4 æ‰€ç¤ºï¼Œå¤šæ­¥ TD ç›®æ ‡<span class="math inline">\(\hat{y}_t =\left(\sum_{i=0}^{m-1} \gamma^i r_{t+i}\right) + \gamma^m \cdotq(s_{t+m}, a_{t+m}; \boldsymbol{w})\)</span>ä»‹äºè’™ç‰¹å¡æ´›å’Œè‡ªä¸¾ä¹‹é—´ã€‚å¤šæ­¥TD ç›®æ ‡æœ‰å¾ˆå¤§çš„è’™ç‰¹å¡æ´›æˆåˆ†ï¼Œå…¶ä¸­çš„<span class="math inline">\(\sum_{i=0}^{m-1} \gamma^ir_{t+i}\)</span>åŸºäº<span class="math inline">\(m\)</span>ä¸ªå®é™…è§‚æµ‹åˆ°çš„å¥–åŠ±ã€‚å¤šæ­¥ TDç›®æ ‡ä¹Ÿæœ‰è‡ªä¸¾çš„æˆåˆ†ï¼Œå…¶ä¸­çš„<span class="math inline">\(\gamma^m \cdotq(s_{t+m}, a_{t+m};\boldsymbol{w})\)</span>æ˜¯ç”¨ä»·å€¼ç½‘ç»œè‡ªå·±ç®—å‡ºæ¥çš„ã€‚å¦‚æœæŠŠ<span class="math inline">\(m\)</span>è®¾ç½®å¾—æ¯”è¾ƒå¥½ï¼Œå¯ä»¥åœ¨æ–¹å·®å’Œåå·®ä¹‹é—´æ‰¾åˆ°å¥½çš„å¹³è¡¡ï¼Œä½¿å¾—å¤šæ­¥TD ç›®æ ‡ä¼˜äºå•æ­¥ TD ç›®æ ‡ï¼Œä¹Ÿä¼˜äºå›æŠ¥<span class="math inline">\(u_t\)</span>ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.2 Q-learningç®—æ³•</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-2-Q-learning%E7%AE%97%E6%B3%95/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-2-Q-learning%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="q-å­¦ä¹ ä¸-sarsa-çš„å¯¹æ¯”">Q å­¦ä¹ ä¸ SARSA çš„å¯¹æ¯”ï¼š</h1><p>Qå­¦ä¹ ä¸ä¾èµ–äº<span class="math inline">\(\pi\)</span>,å› æ­¤Qå­¦ä¹ å±äºå¼‚ç­–ç•¥ (off-policy), å¯ä»¥ç”¨ç»éªŒå›æ”¾ã€‚è€Œ SARSA ä¾èµ–äº<span class="math inline">\(\pi\)</span>, å› æ­¤ SARSA å±äºåŒç­–ç•¥(on-policy),ä¸èƒ½ç”¨ç»éªŒå›æ”¾ã€‚ä¸¤ç§ç®—æ³•çš„å¯¹æ¯”å¦‚å›¾ 5.2 æ‰€ç¤ºã€‚</p><p>Qå­¦ä¹ çš„ç›®æ ‡æ˜¯å­¦åˆ°è¡¨æ ¼<span class="math inline">\(\tilde{Q}\)</span>,ä½œä¸ºæœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ã€‚å› ä¸º<span class="math inline">\(Q^*\)</span>ä¸<span class="math inline">\(\pi\)</span>æ— å…³ï¼Œæ‰€ä»¥åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸è®ºæ”¶é›†ç»éªŒç”¨çš„è¡Œä¸ºç­–ç•¥<span class="math inline">\(\pi\)</span>æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸å½±å“Qå­¦ä¹ å¾—åˆ°çš„æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°ã€‚å› æ­¤ï¼ŒQå­¦ä¹ å±äºå¼‚ç­–ç•¥(off-policy),å…è®¸è¡Œä¸ºç­–ç•¥åŒºåˆ«äºç›®æ ‡ç­–ç•¥ã€‚Qå­¦ä¹ å…è®¸ä½¿ç”¨ç»éªŒå›æ”¾ï¼Œå¯ä»¥é‡å¤åˆ©ç”¨è¿‡æ—¶çš„ç»éªŒã€‚</p><p>SARSA ç®—æ³•çš„ç›®æ ‡æ˜¯å­¦åˆ°è¡¨æ ¼<span class="math inline">\(q\)</span>,ä½œä¸ºåŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi\)</span>çš„è¿‘ä¼¼ã€‚<span class="math inline">\(Q_\pi\)</span>ä¸ä¸€ä¸ªç­–ç•¥<span class="math inline">\(\pi\)</span>ç›¸å¯¹åº”ï¼Œç”¨ä¸åŒçš„ç­–ç•¥<span class="math inline">\(\pi\)</span>, å¯¹åº”<span class="math inline">\(Q_\pi\)</span>å°±ä¼šä¸åŒã€‚ç­–ç•¥<span class="math inline">\(\pi\)</span>è¶Šå¥½ï¼Œ<span class="math inline">\(Q_\pi\)</span>çš„å€¼è¶Šå¤§ã€‚ç»éªŒå›æ”¾æ•°ç»„é‡Œçš„ç»éªŒ<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>æ˜¯è¿‡æ—¶çš„è¡Œä¸ºç­–ç•¥<span class="math inline">\(\pi_{\text{old}}\)</span>æ”¶é›†åˆ°çš„ï¼Œä¸å½“å‰ç­–ç•¥<span class="math inline">\(\pi_{\text{now}}\)</span>åº”çš„ä»·å€¼<span class="math inline">\(Q_{\pi_{\text{now}}}\)</span>å¯¹åº”ä¸ä¸Šã€‚æƒ³è¦å­¦ä¹ <span class="math inline">\(Q_\pi\)</span>çš„è¯ï¼Œå¿…é¡»è¦ç”¨ä¸å½“å‰ç­–ç•¥<span class="math inline">\(\pi_{\text{now}}\)</span>æ”¶é›†åˆ°çš„ç»éªŒï¼Œè€Œä¸èƒ½ç”¨è¿‡æ—¶çš„<span class="math inline">\(\pi_{\text{old}}\)</span>æ”¶é›†åˆ°çš„ç»éªŒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆSARSA ä¸èƒ½ç”¨ç»éªŒå›æ”¾çš„åŸå› ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-2-Q-learning%E7%AE%97%E6%B3%95/1733196209962-673cefaf-0128-4011-9ec9-dea4bdd088d8.png"></p><h1 id="qå­¦ä¹ ç®—æ³•">Qå­¦ä¹ ç®—æ³•</h1><p>Qå­¦ä¹ ç®—æ³•ä¸Šä¸€èŠ‚ç”¨ TD ç®—æ³•è®­ç»ƒDQNï¼ˆä»‹ç»DQNçš„ç¬”è®°åœ¨è¿™é‡Œï¼šæ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆç‹æ ‘æ£®ï¼‰ç¬”è®°02ï¼‰,æ›´å‡†ç¡®åœ°è¯´ï¼Œæˆ‘ä»¬ç”¨çš„ TD ç®—æ³•å«åš Q å­¦ä¹ ç®—æ³• (Q- learning)ã€‚TDç®—æ³•æ˜¯ä¸€å¤§ç±»ç®—æ³•ï¼Œå¸¸è§çš„æœ‰ Q å­¦ä¹ å’Œ SARSAã€‚Qå­¦ä¹ çš„ç›®çš„æ˜¯å­¦åˆ°æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>ï¼Œè€Œ SARSAçš„ç›®çš„æ˜¯å­¦ä¹ åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi\)</span>ã€‚ä¸‹ä¸€ç« ä¼šä»‹ç» SARSA ç®—æ³•ã€‚</p><p>Q å­¦ä¹ æ˜¯åœ¨ 1989 å¹´æå‡ºçš„ï¼Œè€Œ DQN åˆ™æ˜¯ 2013 å¹´æ‰æå‡ºã€‚ä» DQN çš„åå­—(æ·±åº¦ Q ç½‘ç»œ)å°±èƒ½çœ‹å‡º DQN ä¸ Q å­¦ä¹ çš„è”ç³»ã€‚æœ€åˆçš„ Qå­¦ä¹ éƒ½æ˜¯ä»¥è¡¨æ ¼å½¢å¼å‡ºç°çš„ã€‚è™½ç„¶è¡¨æ ¼å½¢å¼çš„ Qå­¦ä¹ åœ¨å®è·µä¸­ä¸å¸¸ç”¨ï¼Œä½†è¿˜æ˜¯å»ºè®®è¯»è€…æœ‰æ‰€äº†è§£ã€‚</p><h2 id="ç”¨è¡¨æ ¼è¡¨ç¤ºq">ç”¨è¡¨æ ¼è¡¨ç¤º<span class="math inline">\(Q^*\)</span>:</h2><p>å‡è®¾çŠ¶æ€ç©ºé—´<span class="math inline">\(S\)</span>å’ŒåŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}\)</span>éƒ½æ˜¯æœ‰é™é›†ï¼Œå³é›†åˆä¸­å…ƒç´ æ•°é‡æœ‰é™ã€‚æ¯”å¦‚ï¼Œ<span class="math inline">\(S\)</span>ä¸­ä¸€å…±æœ‰3ç§çŠ¶æ€ï¼Œ<span class="math inline">\(\mathcal{A}\)</span>ä¸­ä¸€å…±æœ‰4ç§åŠ¨ä½œã€‚é‚£ä¹ˆæœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*(s,a)\)</span>å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ª3Ã—4çš„è¡¨æ ¼ï¼Œæ¯”å¦‚å³è¾¹çš„è¡¨æ ¼ã€‚åŸºäºå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,åšå†³ç­–æ—¶ä½¿ç”¨çš„å…¬å¼<span class="math inline">\(a_t = \mathop{\mathrm{argmax}}_{a \in \mathcal{A}}Q^*(s_t,a)\)</span>çš„æ„æ€æ˜¯æ‰¾åˆ°<span class="math inline">\(s_t\)</span>å¯¹åº”çš„è¡Œ(3è¡Œä¸­çš„æŸä¸€è¡Œ),æ‰¾åˆ°è¯¥è¡Œæœ€å¤§çš„ä»·å€¼ï¼Œè¿”å›è¯¥å…ƒç´ å¯¹åº”çš„åŠ¨ä½œã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>æ˜¯ç¬¬2ç§çŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŸ¥çœ‹ç¬¬2è¡Œï¼Œå‘ç°è¯¥è¡Œæœ€å¤§çš„ä»·å€¼æ˜¯210,å¯¹åº”ç¬¬4ç§åŠ¨ä½œã€‚é‚£ä¹ˆåº”å½“æ‰§è¡Œçš„åŠ¨ä½œ<span class="math inline">\(a_t\)</span>å°±æ˜¯ç¬¬4ç§åŠ¨ä½œã€‚</p><p>è¯¥å¦‚ä½•é€šè¿‡æ™ºèƒ½ä½“çš„è½¨è¿¹æ¥å­¦ä¹ è¿™æ ·ä¸€ä¸ªè¡¨æ ¼å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ç”¨ä¸€ä¸ªè¡¨æ ¼<span class="math inline">\(\tilde{Q}\)</span>æ¥è¿‘ä¼¼<span class="math inline">\(Q^*\)</span>ã€‚</p><p>é¦–å…ˆåˆå§‹åŒ–<span class="math inline">\(\tilde{Q}\)</span>,å¯ä»¥è®©å®ƒæ˜¯å…¨é›¶çš„è¡¨æ ¼ã€‚ç„¶åç”¨è¡¨æ ¼å½¢å¼çš„Qå­¦ä¹ ç®—æ³•æ›´æ–°<span class="math inline">\(\tilde{Q}\)</span>,æ¯æ¬¡æ›´æ–°è¡¨æ ¼çš„ä¸€ä¸ªå…ƒç´ ã€‚æœ€ç»ˆ<span class="math inline">\(\tilde{Q}\)</span>ä¼šæ”¶æ•›åˆ°<span class="math inline">\(Q^*\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-2-Q-learning%E7%AE%97%E6%B3%95/1733199888226-65ba1f32-75a4-4ffa-8288-9fa892eebbe9.png"></p><h2 id="ç®—æ³•æ¨å¯¼">ç®—æ³•æ¨å¯¼ï¼š</h2><p>é¦–å…ˆå¤ä¹ ä¸€ä¸‹æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹ï¼š</p><p><span class="math inline">\(Q^*(s_t, a_t) = \mathbb{E}_{S_{t+1} \simp(\cdot|s_t, a_t)} \Big[ R_t + \gamma \cdot \max_{A \in \mathcal{A}}Q^*(S_{t+1}, A) \Big| S_t = s_t, A_t = a_t \Big].\)</span></p><p>æˆ‘ä»¬å¯¹æ–¹ç¨‹å·¦å³ä¸¤è¾¹åšè¿‘ä¼¼ï¼š</p><ul><li>æ–¹ç¨‹å·¦è¾¹çš„<span class="math inline">\(Q^*(s_t,a_t)\)</span>å¯ä»¥è¿‘ä¼¼æˆ<span class="math inline">\(\tilde{Q}(s_t,a_t)\)</span>ã€‚</li><li>æ–¹ç¨‹å³è¾¹çš„æœŸæœ›æ˜¯å…³äºä¸‹ä¸€æ—¶åˆ»çŠ¶æ€<span class="math inline">\(S_{t+1}\)</span>æ±‚çš„ã€‚ç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>, æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>,ç¯å¢ƒä¼šç»™å‡ºå¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚ç”¨è§‚æµ‹åˆ°çš„<span class="math inline">\(r_t\)</span>å’Œ<span class="math inline">\(s_{t+1}\)</span>å¯¹æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œå¾—åˆ°ï¼š<span class="math inline">\(r_t + \gamma \cdot \max_{a \in \mathcal{A}}Q^*(s_{t+1}, a)\)</span>.</li><li>è¿›ä¸€æ­¥æŠŠå…¬å¼ä¸­çš„<span class="math inline">\(Q^*\)</span>è¿‘ä¼¼æˆ<span class="math inline">\(\tilde{Q}\)</span>, å¾—åˆ°</li></ul><p><span class="math inline">\(\widehat{y}_{t} \triangleq r_{t} + \gamma\cdot \max_{a \in \mathcal{A}} \widetilde{Q}(s_{t+1}, a).\)</span></p><p>æŠŠå®ƒç§°ä½œ TD ç›®æ ‡ã€‚å®ƒæ˜¯è¡¨æ ¼åœ¨ t+1æ—¶åˆ»å¯¹<span class="math inline">\(Q^*(s_t, a_t)\)</span>åšå‡ºçš„ä¼°è®¡ã€‚</p><p><span class="math inline">\(\tilde{Q}(s_t, a_t)\)</span>å’Œ<span class="math inline">\(\hat{y}_t\)</span>éƒ½æ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼<span class="math inline">\(Q^*(s_t, a_t)\)</span>çš„ä¼°è®¡ã€‚ç”±äº<span class="math inline">\(\hat{y}_t\)</span>éƒ¨åˆ†åŸºäºçœŸå®è§‚æµ‹åˆ°çš„å¥–åŠ±<span class="math inline">\(r_t\)</span>,æˆ‘ä»¬è®¤ä¸º<span class="math inline">\(\hat{y}_t\)</span>æ˜¯æ›´å¯é çš„ä¼°è®¡ï¼Œæ‰€ä»¥é¼“åŠ±<span class="math inline">\(\tilde{Q}(s_t, a_t)\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚æ›´æ–°è¡¨æ ¼<span class="math inline">\(\tilde{Q}\)</span>ä¸­<span class="math inline">\((s_t, a_t)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ ï¼š</p><p><span class="math inline">\(\tilde{Q}(s_t, a_t) \leftarrow (1-\alpha)\cdot \tilde{Q}(s_t, a_t) + \alpha \cdot \hat{y}_t.\)</span></p><p>è¿™æ ·å¯ä»¥ä½¿å¾—<span class="math inline">\(\tilde{Q}(s_t,a_t)\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚Qå­¦ä¹ çš„ç›®çš„æ˜¯è®©<span class="math inline">\(\tilde{Q}\)</span>é€æ¸è¶‹è¿‘äº<span class="math inline">\(Q^*\)</span>ã€‚</p><h2 id="æ”¶é›†è®­ç»ƒæ•°æ®">æ”¶é›†è®­ç»ƒæ•°æ®ï¼š</h2><p>Qå­¦ä¹ æ›´æ–°<span class="math inline">\(\tilde{Q}\)</span>çš„å…¬å¼ä¸ä¾èµ–äºå…·ä½“çš„ç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä»»æ„ç­–ç•¥æ§åˆ¶æ™ºèƒ½ä½“ï¼Œä¸ç¯å¢ƒäº¤äº’ï¼ŒæŠŠå¾—åˆ°çš„è½¨è¿¹åˆ’åˆ†æˆ<span class="math inline">\((s_t, a_t, r_t,s_{t+1})\)</span>è¿™æ ·çš„å››å…ƒç»„ï¼Œå­˜å…¥ç»éªŒå›æ”¾æ•°ç»„ã€‚è¿™ä¸ªæ§åˆ¶æ™ºèƒ½ä½“çš„ç­–ç•¥å«åšè¡Œä¸ºç­–ç•¥(behaviorpolicy), æ¯”è¾ƒå¸¸ç”¨çš„è¡Œä¸ºç­–ç•¥æ˜¯<span class="math inline">\(\epsilon\)</span>-greedy:</p><p><span class="math inline">\(a_t = \left\{ \begin{array}{ll}\mathrm{argmax}_a \tilde{Q}(s_t, a), &amp; \text{ä»¥æ¦‚ç‡ } (1-\epsilon);\\ \text{å‡åŒ€æŠ½å– } A \text{ ä¸­çš„ä¸€ä¸ªåŠ¨ä½œ}, &amp; \text{ä»¥æ¦‚ç‡ }\epsilon. \end{array} \right.\)</span></p><p>äº‹åç”¨ç»éªŒå›æ”¾æ›´æ–°è¡¨æ ¼<span class="math inline">\(\tilde{Q}\)</span>,å¯ä»¥é‡å¤åˆ©ç”¨æ”¶é›†åˆ°çš„å››å…ƒç»„ã€‚</p><p><strong>ç»éªŒå›æ”¾æ›´æ–°è¡¨æ ¼</strong><span class="math inline">\(\tilde{Q}\)</span>:</p><p>éšæœºä»ç»éªŒå›æ”¾æ•°ç»„ä¸­æŠ½å–ä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j, a_j, r_j,s_{j+1})\)</span>ã€‚è®¾å½“å‰è¡¨æ ¼ä¸º<span class="math inline">\(\tilde{Q}_{\text{now}}\)</span>ã€‚æ›´æ–°è¡¨æ ¼ä¸­<span class="math inline">\((s_j,a_j)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ ï¼ŒæŠŠæ›´æ–°ä¹‹åçš„è¡¨æ ¼è®°ä½œ<span class="math inline">\(\tilde{Q}_{\text{new}}\)</span>ã€‚</p><ol type="1"><li>æŠŠè¡¨æ ¼<span class="math inline">\(\tilde{Q}_{\text{now}}\)</span>ä¸­ç¬¬<span class="math inline">\((s_j, a_j)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ è®°ä½œï¼š<span class="math inline">\(\hat{q}_j = \tilde{Q}_{\text{now}}(s_j,a_j)\)</span>.</li><li>æŸ¥çœ‹è¡¨æ ¼<span class="math inline">\(\tilde{Q}_{\text{now}}\)</span>çš„ç¬¬<span class="math inline">\(s_{j+1}\)</span>è¡Œï¼ŒæŠŠè¯¥è¡Œçš„æœ€å¤§å€¼è®°ä½œï¼š<span class="math inline">\(\hat{q}_{j+1} = \max_a\tilde{Q}_{\text{now}}(s_{j+1}, a)\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_j = r_j+ \gamma \cdot \hat{q}_{j+1}, \quad \delta_j = \hat{q}_j -\hat{y}_j\)</span>.</li><li>æ›´æ–°è¡¨æ ¼ä¸­<span class="math inline">\((s_j,a_j)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ ï¼š<span class="math inline">\(\tilde{Q}_{\text{new}}(s_j, a_j) \leftarrow\tilde{Q}_{\text{now}}(s_j, a_j) - \alpha \cdot \delta_j\)</span>.</li></ol><p>æ”¶é›†ç»éªŒä¸æ›´æ–°è¡¨æ ¼<span class="math inline">\(\tilde{Q}\)</span>å¯ä»¥åŒæ—¶è¿›è¡Œã€‚æ¯å½“æ™ºèƒ½ä½“æ‰§è¡Œä¸€æ¬¡åŠ¨ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç»éªŒå›æ”¾å¯¹<span class="math inline">\(\tilde{Q}\)</span>åšå‡ æ¬¡æ›´æ–°ã€‚ä¹Ÿå¯ä»¥æ¯å½“å®Œæˆä¸€å±€æ¸¸æˆï¼Œå¯¹<span class="math inline">\(\tilde{Q}\)</span>åšå‡ æ¬¡æ›´æ–°ã€‚</p><h2 id="åŒç­–ç•¥-on-policy-ä¸å¼‚ç­–ç•¥-off-policy">åŒç­–ç•¥ (On-policy)ä¸å¼‚ç­–ç•¥ (Off-policy)</h2><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸¤ä¸ªä¸“ä¸šæœ¯è¯­ï¼šåŒç­–ç•¥(on-policy) å’Œå¼‚ç­–ç•¥(off-policy)ã€‚</p><p>ä¸ºäº†è§£é‡ŠåŒç­–ç•¥å’Œå¼‚ç­–ç•¥ï¼Œæˆ‘ä»¬è¦ä»è¡Œä¸ºç­–ç•¥ (behavior policy) å’Œç›®æ ‡ç­–ç•¥(target policy) è®²èµ·ã€‚</p><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬è®©æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼Œè®°å½•ä¸‹è§‚æµ‹åˆ°çš„çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ï¼Œç”¨è¿™äº›ç»éªŒæ¥å­¦ä¹ ä¸€ä¸ªç­–ç•¥å‡½æ•°ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’çš„ç­–ç•¥è¢«ç§°ä½œè¡Œä¸ºç­–ç•¥ã€‚è¡Œä¸ºç­–ç•¥çš„ä½œç”¨æ˜¯æ”¶é›†ç»éªŒ(experience),å³è§‚æµ‹çš„çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ã€‚</p><p>å¼ºåŒ–å­¦ä¹ çš„ç›®çš„æ˜¯å¾—åˆ°ä¸€ä¸ªç­–ç•¥å‡½æ•°ï¼Œç”¨è¿™ä¸ªç­–ç•¥å‡½æ•°æ¥æ§åˆ¶æ™ºèƒ½ä½“ã€‚è¿™ä¸ªç­–ç•¥å‡½æ•°å°±å«åšç›®æ ‡ç­–ç•¥ã€‚åœ¨æœ¬ç« ä¸­ï¼Œç›®æ ‡ç­–ç•¥æ˜¯ä¸€ä¸ªç¡®å®šæ€§çš„ç­–ç•¥ï¼Œå³ç”¨DQN æ§åˆ¶æ™ºèƒ½ä½“ï¼š</p><p><span class="math inline">\(a_t :=\underset{a}{\operatorname*{argmax}}\: Q(s_t, a;\boldsymbol{w}).\)</span></p><p>æœ¬ç« çš„ Q å­¦ä¹ ç®—æ³•ç”¨ä»»æ„çš„è¡Œä¸ºç­–ç•¥æ”¶é›†<span class="math inline">\((s_t, a_t, r_t,s_{t+1})\)</span>è¿™æ ·çš„å››å…ƒç»„ï¼Œç„¶åæ‹¿å®ƒä»¬è®­ç»ƒç›®æ ‡ç­–ç•¥ï¼Œå³ DQNã€‚</p><p>è¡Œä¸ºç­–ç•¥å’Œç›®æ ‡ç­–ç•¥å¯ä»¥ç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¸åŒã€‚åŒç­–ç•¥æ˜¯æŒ‡ç”¨ç›¸åŒçš„è¡Œä¸ºç­–ç•¥å’Œç›®æ ‡ç­–ç•¥ï¼Œåé¢ç« èŠ‚ä¼šä»‹ç»åŒç­–ç•¥ã€‚å¼‚ç­–ç•¥æ˜¯æŒ‡ç”¨ä¸åŒçš„è¡Œä¸ºç­–ç•¥å’Œç›®æ ‡ç­–ç•¥ï¼Œæœ¬ç« çš„DQN å±äºå¼‚ç­–ç•¥ã€‚åŒç­–ç•¥å’Œå¼‚ç­–ç•¥å¦‚å›¾ 4.6ã€4.7 æ‰€ç¤ºã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-2-Q-learning%E7%AE%97%E6%B3%95/1733200093902-6f272eca-a75d-4476-b836-45a6e8b417ee.png"></p><p>ç”±äºDQNæ˜¯å¼‚ç­–ç•¥ï¼Œè¡Œä¸ºç­–ç•¥å¯ä»¥ä¸åŒäºç›®æ ‡ç­–ç•¥ï¼Œå¯ä»¥ç”¨ä»»æ„çš„è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒï¼Œ<font style="color:rgb(77, 77, 77);">æ¯”å¦‚æœ€å¸¸ç”¨çš„è¡Œä¸ºç­–ç•¥æ˜¯</font><span class="math inline">\(\epsilon-greedy\)</span><font style="color:rgb(77, 77, 77);">:</font></p><p><span class="math inline">\(a_{t} = \left\{  \begin{array}{ll}    \operatorname{argmax}_{a} Q(s_{t}, a; w), &amp;\text{ä»¥æ¦‚ç‡}(1-\epsilon); \\    \text{å‡åŒ€æŠ½å–}\mathcal{A}\text{ä¸­çš„ä¸€ä¸ªåŠ¨ä½œ}, &amp;\text{ä»¥æ¦‚ç‡}\epsilon.  \end{array}\right.\)</span></p><p>è®©è¡Œä¸ºç­–ç•¥å¸¦æœ‰éšæœºæ€§çš„å¥½å¤„åœ¨äºèƒ½æ¢ç´¢æ›´å¤šæ²¡è§è¿‡çš„çŠ¶æ€ã€‚åœ¨å®éªŒä¸­ï¼Œåˆå§‹çš„æ—¶å€™è®©<span class="math inline">\(\epsilon\)</span>æ¯”è¾ƒå¤§ (æ¯”å¦‚<span class="math inline">\(\epsilon=0.5)\)</span>; åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œè®©<span class="math inline">\(\epsilon\)</span>é€æ¸è¡°å‡ï¼Œåœ¨å‡ åä¸‡æ­¥ä¹‹åè¡°å‡åˆ°è¾ƒå°çš„å€¼(<span class="math inline">\(\epsilon=0.01\)</span>), æ­¤åå›ºå®šä½<span class="math inline">\(\epsilon=0.01\)</span>ã€‚</p><p>å¼‚ç­–ç•¥çš„å¥½å¤„æ˜¯å¯ä»¥ç”¨è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒï¼ŒæŠŠ<span class="math inline">\((s_t, a_t, r_t,s_{t+1})\)</span>è¿™æ ·çš„å››å…ƒç»„è®°å½•åˆ°ä¸€ä¸ªæ•°ç»„é‡Œï¼Œåœ¨äº‹ååå¤åˆ©ç”¨è¿™äº›ç»éªŒå»æ›´æ–°ç›®æ ‡ç­–ç•¥ã€‚è¿™ä¸ªæ•°ç»„è¢«ç§°ä½œç»éªŒå›æ”¾æ•°ç»„(replaybuffer), è¿™ç§è®­ç»ƒæ–¹å¼è¢«ç§°ä½œç»éªŒå›æ”¾ (experiencereplay)ã€‚æ³¨æ„ï¼Œç»éªŒå›æ”¾åªé€‚ç”¨äºå¼‚ç­–ç•¥ï¼Œä¸é€‚ç”¨äºåŒç­–ç•¥ï¼Œå…¶åŸå› æ˜¯æ”¶é›†ç»éªŒæ—¶ç”¨çš„è¡Œä¸ºç­–ç•¥ä¸åŒäºæƒ³è¦è®­ç»ƒå‡ºçš„ç›®æ ‡ç­–ç•¥ã€‚</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>DQN æ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>çš„è¿‘ä¼¼ã€‚DQN çš„è¾“å…¥æ˜¯å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>, è¾“å‡ºæ˜¯æ¯ä¸ªåŠ¨ä½œçš„ Q å€¼ã€‚DQNè¦æ±‚åŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}\)</span>æ˜¯ç¦»æ•£é›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ æ•°é‡æœ‰é™ã€‚å¦‚æœåŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}\)</span>çš„å¤§å°æ˜¯ k,é‚£ä¹ˆ DQN çš„è¾“å‡ºå°±æ˜¯k ç»´å‘é‡ã€‚DQN å¯ä»¥ç”¨äºåšå†³ç­–ï¼Œæ™ºèƒ½ä½“æ‰§è¡Œ Q å€¼æœ€å¤§çš„åŠ¨ä½œã€‚</p><p>TD ç®—æ³•çš„ç›®çš„åœ¨äºè®©é¢„æµ‹æ›´æ¥è¿‘å®é™…è§‚æµ‹ã€‚ä»¥é©¾è½¦é—®é¢˜ä¸ºä¾‹ï¼Œå¦‚æœä½¿ç”¨ TDç®—æ³•ï¼Œæ— éœ€å®Œæˆæ•´ä¸ªæ—…é€”å°±èƒ½åšæ¢¯åº¦ä¸‹é™æ›´æ–°æ¨¡å‹ã€‚è¯·è¯»è€…ç†è§£å¹¶è®°å¿† TDç›®æ ‡ã€TD è¯¯å·®çš„å®šä¹‰ï¼Œå®ƒä»¬å°†å‡ºç°åœ¨æ‰€æœ‰ä»·å€¼å­¦ä¹ çš„ç« èŠ‚ä¸­ã€‚</p><p>Q å­¦ä¹ ç®—æ³•æ˜¯ TD ç®—æ³•çš„ä¸€ç§ï¼Œå¯ä»¥ç”¨äºè®­ç»ƒ DQNã€‚Qå­¦ä¹ ç®—æ³•ç”±æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹æ¨å¯¼å‡ºã€‚Qå­¦ä¹ ç®—æ³•å±äºå¼‚ç­–ç•¥ï¼Œå…è®¸ä½¿ç”¨ç»éªŒå›æ”¾ã€‚ç”±ä»»æ„è¡Œä¸ºç­–ç•¥æ”¶é›†ç»éªŒï¼Œå­˜å…¥ç»éªŒå›æ”¾æ•°ç»„ã€‚äº‹ååšç»éªŒå›æ”¾ï¼Œç”¨ TD ç®—æ³•æ›´æ–° DQN å‚æ•°ã€‚</p><p>å¦‚æœçŠ¶æ€ç©ºé—´<span class="math inline">\(S\)</span>ã€åŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}\)</span>éƒ½æ˜¯è¾ƒå°çš„æœ‰é™ç¦»æ•£é›†åˆï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¡¨æ ¼å½¢å¼çš„Qå­¦ä¹ ç®—æ³•å­¦ä¹ <span class="math inline">\(Q^*\)</span>ã€‚å¦‚ä»Šè¡¨æ ¼å½¢å¼çš„ Qå­¦ä¹ å·²ç»ä¸å¸¸ç”¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.1 Sarsaç®—æ³•</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-1-Sarsa%E7%AE%97%E6%B3%95/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-1-Sarsa%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>TD ç®—æ³•æ˜¯ä¸€å¤§ç±»ç®—æ³•çš„æ€»ç§°ã€‚Q å­¦ä¹ æ˜¯ä¸€ç§ TD ç®—æ³•ï¼ŒQå­¦ä¹ çš„ç›®çš„æ˜¯å­¦ä¹ æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*\)</span>ã€‚è¿™é‡Œä»‹ç» SARSA, å®ƒä¹Ÿæ˜¯ä¸€ç§ TDç®—æ³•ï¼ŒSARSA çš„ç›®çš„æ˜¯å­¦ä¹ åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s,a)\)</span>ã€‚</p><h1 id="è¡¨æ ¼å½¢å¼çš„-sarsa">è¡¨æ ¼å½¢å¼çš„ SARSA</h1><p>å‡è®¾çŠ¶æ€ç©ºé—´<span class="math inline">\(S\)</span>å’ŒåŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}\)</span>éƒ½æ˜¯æœ‰é™é›†ï¼Œå³é›†åˆä¸­å…ƒç´ æ•°é‡æœ‰é™ã€‚æ¯”å¦‚ï¼Œ<span class="math inline">\(S\)</span>ä¸­ä¸€å…±æœ‰ 3 ç§çŠ¶æ€ï¼Œ<span class="math inline">\(\mathcal{A}\)</span>ä¸­ä¸€å…±æœ‰ 4ç§åŠ¨ä½œã€‚é‚£ä¹ˆåŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s,a)\)</span>å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ª 3Ã—4çš„è¡¨æ ¼ï¼Œæ¯”å¦‚å³è¾¹çš„è¡¨æ ¼ã€‚è¯¥è¡¨æ ¼ä¸ä¸€ä¸ªç­–ç•¥å‡½æ•°<span class="math inline">\(\pi(a|s)\)</span>ç›¸å…³è”ï¼›å¦‚æœ<span class="math inline">\(\pi\)</span>å‘ç”Ÿå˜åŒ–ï¼Œ è¡¨æ ¼<span class="math inline">\(Q_\pi\)</span>ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-1-Sarsa%E7%AE%97%E6%B3%95/1733195913964-02d289b3-9568-4e46-87d9-35b541bab6bc.png"></p><p>æˆ‘ä»¬ç”¨è¡¨æ ¼<span class="math inline">\(q\)</span>è¿‘ä¼¼<span class="math inline">\(Q_\pi\)</span>ã€‚è¯¥å¦‚ä½•é€šè¿‡æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„äº¤äº’æ¥å­¦ä¹ è¡¨æ ¼<span class="math inline">\(q\)</span>å‘¢ï¼Ÿé¦–å…ˆåˆå§‹åŒ–<span class="math inline">\(q\)</span>,å¯ä»¥è®©å®ƒæ˜¯å…¨é›¶çš„è¡¨æ ¼ã€‚ç„¶åç”¨è¡¨æ ¼å½¢å¼çš„SARSA ç®—æ³•æ›´æ–°<span class="math inline">\(q\)</span>,æ¯æ¬¡æ›´æ–°è¡¨æ ¼çš„ä¸€ä¸ªå…ƒç´ ã€‚æœ€ç»ˆ<span class="math inline">\(q\)</span>æ”¶æ•›åˆ°<span class="math inline">\(Q_\pi\)</span>ã€‚</p><h2 id="æ¨å¯¼">æ¨å¯¼ :</h2><p>SARSA ç®—æ³•ç”±ä¸‹é¢çš„è´å°”æ›¼æ–¹ç¨‹æ¨å¯¼å‡ºï¼š</p><p><span class="math inline">\(Q_\pi(s_t, a_t) = \mathbb{E}_{S_{t+1},A_{t+1}} \big[R_t + \gamma \cdot Q_\pi(S_{t+1}, A_{t+1}) \big| S_t =s_t, A_t = a_t\big]\)</span></p><p>æˆ‘ä»¬å¯¹è´å°”æ›¼æ–¹ç¨‹å·¦å³ä¸¤è¾¹åšè¿‘ä¼¼ï¼š</p><ul><li>æ–¹ç¨‹å·¦è¾¹çš„<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>å¯ä»¥è¿‘ä¼¼æˆ<span class="math inline">\(q(s_t,a_t)\)</span>ã€‚</li><li>æ–¹ç¨‹å³è¾¹çš„æœŸæœ›æ˜¯å…³äºä¸‹ä¸€æ—¶åˆ»çŠ¶æ€<span class="math inline">\(S_{t+1}\)</span>å’ŒåŠ¨ä½œ<span class="math inline">\(A_{t+1}\)</span>æ±‚çš„ã€‚ç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>, æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>,ç¯å¢ƒä¼šç»™å‡ºå¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚ç„¶ååŸºäº<span class="math inline">\(s_{t+1}\)</span>åšéšæœºæŠ½æ ·ï¼Œå¾—åˆ°æ–°çš„åŠ¨ä½œ<span class="math inline">\(\tilde{a}_{t+1} \sim\pi(\cdot|s_{t+1})\)</span>ã€‚ç”¨è§‚æµ‹åˆ°çš„<span class="math inline">\(r_t\)</span>ã€<span class="math inline">\(s_{t+1}\)</span>å’Œè®¡ç®—å‡ºçš„<span class="math inline">\(\tilde{a}_{t+1}\)</span>å¯¹æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼Œå¾—åˆ°ï¼š</li></ul><p><span class="math inline">\(r_t + \gamma \cdot Q_\pi(s_{t+1},\tilde{a}_{t+1})\)</span>.</p><ul><li>è¿›ä¸€æ­¥æŠŠå…¬å¼ä¸­çš„<span class="math inline">\(Q_\pi\)</span>è¿‘ä¼¼æˆ<span class="math inline">\(q\)</span>, å¾—åˆ°</li></ul><p><span class="math inline">\(\hat{y}_t \triangleq r_t + \gamma \cdotq(s_{t+1}, \tilde{a}_{t+1})\)</span>.</p><p>æŠŠå®ƒç§°ä½œ TD ç›®æ ‡ã€‚å®ƒæ˜¯è¡¨æ ¼åœ¨<span class="math inline">\(t+1\)</span>æ—¶åˆ»å¯¹<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>åšå‡ºçš„ä¼°è®¡ã€‚</p><p><span class="math inline">\(q(s_t, a_t)\)</span>å’Œ<span class="math inline">\(\hat{y}_t\)</span>éƒ½æ˜¯å¯¹åŠ¨ä½œä»·å€¼<span class="math inline">\(Q_\pi(s_t, a_t)\)</span>çš„ä¼°è®¡ã€‚</p><p>ç”±äº<span class="math inline">\(\hat{y}_t\)</span>éƒ¨åˆ†åŸºäºçœŸå®è§‚æµ‹åˆ°çš„å¥–åŠ±<span class="math inline">\(r_t\)</span>, æˆ‘ä»¬è®¤ä¸º<span class="math inline">\(\hat{y}_t\)</span>æ˜¯æ›´å¯é çš„ä¼°è®¡ï¼Œæ‰€ä»¥é¼“åŠ±<span class="math inline">\(q(s_t, a_t)\)</span>è¶‹è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚æ›´æ–°è¡¨æ ¼<span class="math inline">\((s_t, a_t)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ ï¼š</p><p><span class="math inline">\(q(s_t, a_t) \leftarrow (1-\alpha) \cdotq(s_t, a_t) + \alpha \cdot \hat{y}_t.\)</span></p><p>è¿™æ ·å¯ä»¥ä½¿å¾—<span class="math inline">\(q(s_t,a_t)\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚</p><p>SARSA æ˜¯ State-Action-Reward-State-Action çš„ç¼©å†™ï¼ŒåŸå› æ˜¯ SARSAç®—æ³•ç”¨åˆ°äº†è¿™ä¸ªäº”å…ƒç»„<span class="math inline">\((s_t, a_t, r_t, s_{t+1},\tilde{a}_{t+1})\)</span>ã€‚SARSA ç®—æ³•å­¦åˆ°çš„<span class="math inline">\(q\)</span>ä¾èµ–äºç­–ç•¥<span class="math inline">\(\pi\)</span>, è¿™æ˜¯å› ä¸ºäº”å…ƒç»„ä¸­çš„<span class="math inline">\(\tilde{a}_{t+1}\)</span>æ˜¯æ ¹æ®<span class="math inline">\(\pi(\cdot|s_{t+1})\)</span>æŠ½æ ·å¾—åˆ°çš„ã€‚</p><h2 id="è®­ç»ƒæµç¨‹">è®­ç»ƒæµç¨‹ï¼š</h2><p>è®¾å½“å‰è¡¨æ ¼ä¸º<span class="math inline">\(q_{\text{now}}\)</span>,å½“å‰ç­–ç•¥ä¸º<span class="math inline">\(\pi_{\text{now}}\)</span>ã€‚æ¯ä¸€è½®æ›´æ–°è¡¨æ ¼ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ŒæŠŠæ›´æ–°ä¹‹åçš„è¡¨æ ¼è®°ä½œ<span class="math inline">\(q_{\text{new}}\)</span>ã€‚</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ ¹æ®å½“å‰ç­–ç•¥åšæŠ½æ ·<span class="math inline">\(a_t \sim\pi_{\text{now}}(\cdot|s_t)\)</span>ã€‚</li><li>æŠŠè¡¨æ ¼<span class="math inline">\(q_{\text{now}}\)</span>ä¸­ç¬¬<span class="math inline">\((s_t, a_t)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ è®°ä½œï¼š<span class="math inline">\(\hat{q}_t = q_{\text{now}}(s_t,a_t)\)</span>.</li><li>æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¹‹åï¼Œè§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚</li><li>æ ¹æ®å½“å‰ç­–ç•¥åšæŠ½æ ·<span class="math inline">\(\tilde{a}_{t+1} \sim\pi_{\text{now}}(\cdot|s_{t+1})\)</span>ã€‚æ³¨æ„ï¼Œ<span class="math inline">\(\tilde{a}_{t+1}\)</span>åªæ˜¯å‡æƒ³çš„åŠ¨ä½œï¼Œæ™ºèƒ½ä½“ä¸äºˆæ‰§è¡Œã€‚</li><li>æŠŠè¡¨æ ¼<span class="math inline">\(q_{\text{now}}\)</span>ä¸­ç¬¬<span class="math inline">\((s_{t+1},\tilde{a}_{t+1})\)</span>ä½ç½®ä¸Šçš„å…ƒç´ è®°ä½œï¼š<span class="math inline">\(\hat{q}_{t+1} = q_{\text{now}}(s_{t+1},\tilde{a}_{t+1})\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t = r_t+ \gamma \cdot \hat{q}_{t+1}, \quad \delta_t = \hat{q}_t -\hat{y}_t\)</span>.</li><li>æ›´æ–°è¡¨æ ¼ä¸­<span class="math inline">\((s_t,a_t)\)</span>ä½ç½®ä¸Šçš„å…ƒç´ ï¼š<span class="math inline">\(q_{\text{new}}(s_t, a_t) \leftarrowq_{\text{now}}(s_t, a_t) - \alpha \cdot \delta_t\)</span>.</li><li>ç”¨æŸç§ç®—æ³•æ›´æ–°ç­–ç•¥å‡½æ•°ã€‚è¯¥ç®—æ³•ä¸ SARSA ç®—æ³•æ— å…³ã€‚</li></ol><h1 id="ç¥ç»ç½‘ç»œå½¢å¼çš„-sarsa">ç¥ç»ç½‘ç»œå½¢å¼çš„ SARSA</h1><h2 id="ä»·å€¼ç½‘ç»œ">ä»·å€¼ç½‘ç»œï¼š</h2><p>å¦‚æœçŠ¶æ€ç©ºé—´<span class="math inline">\(S\)</span>æ˜¯æ— é™é›†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ— æ³•ç”¨ä¸€å¼ è¡¨æ ¼è¡¨ç¤º<span class="math inline">\(Q_\pi\)</span>,å¦åˆ™è¡¨æ ¼çš„è¡Œæ•°æ˜¯æ— ç©·ã€‚ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆæ˜¯ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œ<span class="math inline">\(q(s, a; \boldsymbol{w})\)</span>æ¥è¿‘ä¼¼<span class="math inline">\(Q_\pi(s, a)\)</span>; ç†æƒ³æƒ…å†µä¸‹ï¼Œ<span class="math inline">\(q(s, a; \boldsymbol{w}) = Q_\pi(s, a), \forall s\in \mathcal{S}, a \in \mathcal{A}\)</span>.</p><p>ç¥ç»ç½‘ç»œ<span class="math inline">\(q(s, a;\boldsymbol{w})\)</span>è¢«ç§°ä¸ºä»·å€¼ç½‘ç»œ (value network), å…¶ä¸­çš„<span class="math inline">\(\boldsymbol{w}\)</span>è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­å¯è®­ç»ƒçš„å‚æ•°ã€‚ç¥ç»ç½‘ç»œçš„ç»“æ„æ˜¯äººé¢„å…ˆè®¾å®šçš„ï¼ˆæ¯”å¦‚æœ‰å¤šå°‘å±‚ï¼Œæ¯ä¸€å±‚çš„å®½åº¦æ˜¯å¤šå°‘ï¼‰,è€Œå‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>éœ€è¦é€šè¿‡æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„äº¤äº’æ¥å­¦ä¹ ã€‚é¦–å…ˆéšæœºåˆå§‹åŒ–<span class="math inline">\(\boldsymbol{w}\)</span>,ç„¶åç”¨ SARSA ç®—æ³•æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>ã€‚</p><p>ç¥ç»ç½‘ç»œçš„ç»“æ„è§å›¾ 5.3ã€‚ä»·å€¼ç½‘ç»œçš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>ã€‚å¦‚æœ<span class="math inline">\(s\)</span>æ˜¯çŸ©é˜µæˆ–å¼ é‡ (tensor),é‚£ä¹ˆå¯ä»¥ç”¨å·ç§¯ç½‘ç»œå¤„ç†<span class="math inline">\(s\)</span>(å¦‚å›¾5.3)ã€‚å¦‚æœ<span class="math inline">\(s\)</span>æ˜¯å‘é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å…¨è¿æ¥å±‚å¤„ç†<span class="math inline">\(s\)</span>ã€‚ä»·å€¼ç½‘ç»œçš„è¾“å‡ºæ˜¯æ¯ä¸ªåŠ¨ä½œçš„ä»·å€¼ã€‚åŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}\)</span>ä¸­æœ‰å¤šå°‘ç§åŠ¨ä½œï¼Œåˆ™ä»·å€¼ç½‘ç»œçš„è¾“å‡ºå°±æ˜¯å¤šå°‘ç»´çš„å‘é‡ï¼Œå‘é‡æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªåŠ¨ä½œã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒåŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>, ä»·å€¼ç½‘ç»œçš„è¾“å‡ºæ˜¯</p><p><span class="math inline">\(q(s, å·¦; \boldsymbol{w}) = 219, q(s, å³;\boldsymbol{w}) = -73, q(s, ä¸Š; \boldsymbol{w}) = 580\)</span>.</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/4-1-Sarsa%E7%AE%97%E6%B3%95/1733196263670-b083519b-5bee-4071-87c1-b90c0cccc87a.png"></p><h2 id="ç®—æ³•æ¨å¯¼">ç®—æ³•æ¨å¯¼ï¼š</h2><p>ç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>,ç¯å¢ƒä¼šç»™å‡ºå¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚ç„¶ååŸºäº<span class="math inline">\(s_{t+1}\)</span>åšéšæœºæŠ½æ ·ï¼Œå¾—åˆ°æ–°çš„åŠ¨ä½œ<span class="math inline">\(\tilde{a}_{t+1} \sim\pi(\cdot|s_{t+1})\)</span>ã€‚å®šä¹‰ TD ç›®æ ‡ï¼š</p><p><span class="math inline">\(\hat{y}_t \triangleq r_t + \gamma \cdotq(s_{t+1}, \tilde{a}_{t+1}; \boldsymbol{w}).\)</span></p><p>æˆ‘ä»¬é¼“åŠ±<span class="math inline">\(q(s_t, a_t;\boldsymbol{w})\)</span>æ¥è¿‘ TD ç›®æ ‡<span class="math inline">\(\hat{y}_t\)</span>, æ‰€ä»¥å®šä¹‰æŸå¤±å‡½æ•°ï¼š</p><p><span class="math inline">\(L(\boldsymbol{w}) \triangleq \frac{1}{2}\Big[q(s_t, a_t; \boldsymbol{w}) - \hat{y}_t\Big]^2.\)</span></p><p>æŸå¤±å‡½æ•°çš„å˜é‡æ˜¯<span class="math inline">\(\boldsymbol{w}\)</span>,è€Œ<span class="math inline">\(\hat{y}_t\)</span>è¢«è§†ä¸ºå¸¸æ•°ã€‚(å°½ç®¡<span class="math inline">\(\hat{y}_t\)</span>ä¹Ÿä¾èµ–äºå‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>, ä½†è¿™ä¸€ç‚¹è¢«å¿½ç•¥æ‰.)è®¾<span class="math inline">\(\hat{q}_t = q(s_t, a_t;\boldsymbol{w})\)</span>ã€‚æŸå¤±å‡½æ•°å…³äº<span class="math inline">\(\boldsymbol{w}\)</span>çš„æ¢¯åº¦æ˜¯ï¼š</p><p><span class="math inline">\(\nabla_{\boldsymbol{w}} L(\boldsymbol{w})= (\hat{q}_t - \hat{y}_t) \cdot \nabla_{\boldsymbol{w}} q(s_t, a_t;\boldsymbol{w}).\)</span></p><p>åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>:</p><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot \delta_t \cdot \nabla_{\boldsymbol{w}} q(s_t, a_t;\boldsymbol{w}).\)</span></p><p>è¿™æ ·å¯ä»¥ä½¿å¾—<span class="math inline">\(q(s_t, a_t;\boldsymbol{w})\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚æ­¤å¤„çš„<span class="math inline">\(\alpha\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚</p><p><strong>è®­ç»ƒæµç¨‹</strong>ï¼š</p><p>è®¾å½“å‰ä»·å€¼ç½‘ç»œçš„å‚æ•°ä¸º<span class="math inline">\(\boldsymbol{w}_{\text{now}}\)</span>,å½“å‰ç­–ç•¥ä¸º<span class="math inline">\(\pi_{\text{now}}\)</span>ã€‚æ¯ä¸€è½®è®­ç»ƒç”¨äº”å…ƒç»„<span class="math inline">\((s_t, a_t, r_t, s_{t+1},\tilde{a}_{t+1})\)</span>å¯¹ä»·å€¼ç½‘ç»œå‚æ•°åšä¸€æ¬¡æ›´æ–°ã€‚</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ ¹æ®å½“å‰ç­–ç•¥åšæŠ½æ ·ï¼š<span class="math inline">\(a_t \sim\pi_{\text{now}}(\cdot|s_t)\)</span>ã€‚</li><li>ç”¨ä»·å€¼ç½‘ç»œè®¡ç®—<span class="math inline">\((s_t,a_t)\)</span>çš„ä»·å€¼ï¼š<span class="math inline">\(\hat{q}_t = q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¹‹åï¼Œè§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚</li><li>æ ¹æ®å½“å‰ç­–ç•¥åšæŠ½æ ·<span class="math inline">\(\tilde{a}_{t+1} \sim\pi_{\text{now}}(\cdot|s_{t+1})\)</span>ã€‚æ³¨æ„ï¼Œ<span class="math inline">\(\tilde{a}_{t+1}\)</span>åªæ˜¯å‡æƒ³çš„åŠ¨ä½œï¼Œæ™ºèƒ½ä½“ä¸äºˆæ‰§è¡Œã€‚</li><li>ç”¨ä»·å€¼ç½‘ç»œè®¡ç®—<span class="math inline">\((s_{t+1},\tilde{a}_{t+1})\)</span>çš„ä»·å€¼ï¼š<span class="math inline">\(\hat{q}_{t+1} = q(s_{t+1}, \tilde{a}_{t+1};\boldsymbol{w}_{\text{now}})\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t = r_t+ \gamma \cdot \hat{q}_{t+1}, \quad \delta_t = \hat{q}_t -\hat{y}_t\)</span>.</li><li>å¯¹ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>åšåå‘ä¼ æ’­ï¼Œè®¡ç®—<span class="math inline">\(q\)</span>å…³äº<span class="math inline">\(\boldsymbol{w}\)</span>çš„æ¢¯åº¦ï¼š<span class="math inline">\(\nabla_{\boldsymbol{w}} q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°ï¼š<span class="math inline">\(\boldsymbol{w}_{\text{new}} \leftarrow\boldsymbol{w}_{\text{now}} - \alpha \cdot \delta_t \cdot\nabla_{\boldsymbol{w}} q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>ç”¨æŸç§ç®—æ³•æ›´æ–°ç­–ç•¥å‡½æ•°ã€‚è¯¥ç®—æ³•ä¸ SARSA ç®—æ³•æ— å…³ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.1 éšæœºæ’åˆ—</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/3-1-Random-Permutation/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/3-1-Random-Permutation/</url>
    
    <content type="html"><![CDATA[<h1 id="random-permutationéšæœºæ’åˆ—">Random Permutationï¼ˆéšæœºæ’åˆ—ï¼‰</h1><p>What is uniform random permutation?</p><h2 id="fisher-yates-æ´—ç‰Œç®—æ³•">Fisher-Yates æ´—ç‰Œç®—æ³•</h2><p>æ’åˆ—æ•°ç­‰äºn!</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/3-1-Random-Permutation/5ee370a88aadf06f3d80c94cb32e0342.png"></p><p>â€œuniform randompermutationâ€ï¼ˆå‡åŒ€éšæœºæ’åˆ—ï¼‰æ˜¯æŒ‡ç”Ÿæˆä¸€ä¸ªæ’åˆ—ï¼Œå…¶ä¸­æ¯ä¸ªå¯èƒ½çš„æ’åˆ—éƒ½ä»¥ç›¸ç­‰çš„æ¦‚ç‡å‡ºç°ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºå«æœ‰nä¸ªå…ƒç´ çš„é›†åˆï¼Œå®ƒçš„æ‰€æœ‰n!ä¸ªæ’åˆ—ä¸­çš„æ¯ä¸€ä¸ªéƒ½æœ‰ç›¸åŒçš„æ¦‚ç‡è¢«é€‰ä¸­ã€‚</p><p>å®ç°å‡åŒ€éšæœºæ’åˆ—çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯ Fisher-Yatesæ´—ç‰Œç®—æ³•ã€‚è¯¥ç®—æ³•åŸºäºè¿­ä»£ï¼Œä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯æ¬¡éšæœºé€‰æ‹©å½“å‰ä½ç½®åŠä¹‹å‰çš„ä¸€ä¸ªä½ç½®ï¼Œå¹¶å°†å®ƒä»¬çš„å…ƒç´ äº¤æ¢ã€‚é€šè¿‡ä¸æ–­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå‡åŒ€éšæœºæ’åˆ—ã€‚</p><p>è¿™ç§æ’åˆ—æ–¹æ³•åœ¨å„ç§åº”ç”¨ä¸­éƒ½å¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚åœ¨éšæœºåŒ–ç®—æ³•ã€æ¨¡æ‹Ÿå®éªŒå’Œå¯†ç å­¦ä¸­ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå‡åŒ€éšæœºæ’åˆ—é€šå¸¸è¦æ±‚å…·æœ‰è‰¯å¥½çš„éšæœºæ€§è´¨ï¼Œä»¥ç¡®ä¿ç”Ÿæˆçš„æ’åˆ—æ»¡è¶³ç»Ÿè®¡å­¦ä¸Šçš„éšæœºæ€§è¦æ±‚ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/3-1-Random-Permutation/cde60544fcaa6ad0ee23f46ab4cece6f.png"></p><h2 id="fisher-yates-shuffle">Fisher-Yates Shuffle</h2><p>Fisher-YatesShuffleï¼Œåˆç§°ä¸ºæ´—ç‰Œç®—æ³•ï¼Œæ˜¯ä¸€ç§ç”¨äºéšæœºæ’åˆ—æ•°ç»„å…ƒç´ çš„æœ‰æ•ˆä¸”ç®€å•çš„ç®—æ³•ã€‚å…¶ç›®æ ‡æ˜¯ç”Ÿæˆä¸€ä¸ªå‡åŒ€éšæœºçš„æ’åˆ—ï¼Œå³æ¯ä¸ªå…ƒç´ åœ¨æ’åˆ—ä¸­å‡ºç°çš„æ¦‚ç‡ç›¸ç­‰ã€‚ä¸‹é¢æ˜¯Fisher-YatesShuffleçš„è¯¦ç»†æ­¥éª¤ï¼š</p><ol type="1"><li><strong>åˆå§‹åŒ–ï¼š</strong>ç®—æ³•å¼€å§‹æ—¶ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æŒ‰ç…§å…¶åŸå§‹é¡ºåºæ’åˆ—ã€‚</li><li><strong>è¿­ä»£ï¼š</strong>ä»æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡å‘å‰è¿­ä»£åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><strong>éšæœºé€‰æ‹©ï¼š</strong>å¯¹äºå½“å‰è¿­ä»£çš„ä½ç½®ï¼ˆå‡è®¾ä¸ºiï¼‰ï¼Œç”Ÿæˆä¸€ä¸ª[0, i]èŒƒå›´å†…çš„éšæœºæ•´æ•° jã€‚</li><li><strong>äº¤æ¢å…ƒç´ ï¼š</strong>å°†å½“å‰ä½ç½®ï¼ˆiï¼‰çš„å…ƒç´ ä¸éšæœºé€‰æ‹©ä½ç½®ï¼ˆjï¼‰çš„å…ƒç´ è¿›è¡Œäº¤æ¢ã€‚</li><li><strong>é€’å‡è¿­ä»£ï¼š</strong>ç»§ç»­è¿­ä»£ï¼Œå‡å°å½“å‰ä½ç½®ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li></ol><p>é€šè¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰æœºä¼šè¢«é€‰æ‹©åˆ°ä»»ä½•ä¸€ä¸ªä½ç½®ï¼Œè€Œä¸”æ¯ä¸ªä½ç½®è¢«é€‰æ‹©çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ã€‚å› æ­¤ï¼Œç»è¿‡è¶³å¤Ÿçš„è¿­ä»£æ¬¡æ•°åï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å°†è¢«æ´—ç‰Œæˆä¸€ä¸ªå‡åŒ€éšæœºçš„æ’åˆ—ã€‚</p><p>Fisher-YatesShuffleæ˜¯ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„æ´—ç‰Œç®—æ³•ï¼Œå¹¿æ³›åº”ç”¨äºè®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œå°¤å…¶åœ¨å®ç°éšæœºç®—æ³•ã€æ¨¡æ‹Ÿå®éªŒå’Œæ¸¸æˆå¼€å‘ç­‰æ–¹é¢ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨Pythonå®ç°Fisher-Yates Shuffleçš„ç®€å•ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fisher_yates_shuffle</span>(<span class="hljs-params">arr</span>):<br>    <span class="hljs-comment"># ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹è¿­ä»£</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr) - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># ç”Ÿæˆéšæœºç´¢å¼•ï¼ŒèŒƒå›´æ˜¯ [0, i]</span><br>        j = random.randint(<span class="hljs-number">0</span>, i)<br><br>        <span class="hljs-comment"># äº¤æ¢å½“å‰ä½ç½®çš„å…ƒç´ ä¸éšæœºé€‰æ‹©ä½ç½®çš„å…ƒç´ </span><br>        arr[i], arr[j] = arr[j], arr[i]<br><br><span class="hljs-comment"># ç¤ºä¾‹ç”¨æ³•</span><br>my_array = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>fisher_yates_shuffle(my_array)<br><span class="hljs-built_in">print</span>(my_array)<br></code></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä½¿ç”¨äº†Pythonçš„ <code>random</code> æ¨¡å—ä¸­çš„<code>randint</code> å‡½æ•°æ¥ç”Ÿæˆéšæœºæ•´æ•°ã€‚é€šè¿‡è°ƒç”¨<code>fisher_yates_shuffle</code> å‡½æ•°ï¼Œå¯ä»¥å¯¹ä»»æ„æ•°ç»„è¿›è¡ŒFisher-YatesShuffleã€‚åœ¨ç¤ºä¾‹ç”¨æ³•ä¸­ï¼Œæ•°ç»„ <code>[1, 2, 3, 4, 5]</code>è¢«æ´—ç‰Œï¼Œæ‰“å°ç»“æœå¯èƒ½æ˜¯ç±»ä¼¼ <code>[3, 5, 1, 4, 2]</code> çš„éšæœºæ’åˆ—ã€‚</p><p><code>range(len(arr) - 1, 0, -1)</code> æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆè¿­ä»£ç´¢å¼•çš„Python å†…ç½®å‡½æ•° <code>range</code>çš„è°ƒç”¨ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯èµ·å§‹å€¼ã€ç»“æŸå€¼å’Œæ­¥é•¿ã€‚</p><ul><li><code>len(arr) - 1</code>:è¿™æ˜¯èµ·å§‹å€¼ï¼Œè¡¨ç¤ºä»æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ã€‚</li><li><code>0</code>: è¿™æ˜¯ç»“æŸå€¼ï¼ˆä¸åŒ…å«åœ¨èŒƒå›´å†…ï¼‰ï¼Œè¡¨ç¤ºç´¢å¼•é€’å‡è‡³0ã€‚</li><li><code>-1</code>: è¿™æ˜¯æ­¥é•¿ï¼Œè¡¨ç¤ºé€’å‡çš„æ­¥é•¿ä¸º 1ã€‚</li></ul><p>å› æ­¤ï¼Œ <code>range(len(arr) - 1, 0, -1)</code>ç”Ÿæˆäº†ä¸€ä¸ªé€†åºçš„ç´¢å¼•åºåˆ—ï¼Œä»æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹é€’å‡åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚è¿™ä¸ªé€†åºçš„ç´¢å¼•åºåˆ—ç”¨äºåœ¨Fisher-Yates Shuffleç®—æ³•ä¸­è¿­ä»£æ•°ç»„çš„ä½ç½®ã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä¼šéšæœºé€‰æ‹©ä¸€ä¸ªä¹‹å‰çš„ä½ç½®ï¼Œå¹¶ä¸å½“å‰ä½ç½®çš„å…ƒç´ äº¤æ¢ï¼Œä»è€Œå®Œæˆæ´—ç‰Œçš„è¿‡ç¨‹ã€‚</p><p>Fisher-Yates Shuffle çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œå…¶ä¸­ næ˜¯æ•°ç»„çš„é•¿åº¦ã€‚è¿™æ˜¯å› ä¸ºç®—æ³•éœ€è¦å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œä¸€æ¬¡è¿­ä»£ï¼Œå¹¶åœ¨æ¯æ¬¡è¿­ä»£ä¸­è¿›è¡Œä¸€æ¬¡äº¤æ¢ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.1 è’™ç‰¹å¡æ´›ä¼°è®¡</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/2-1-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/2-1-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="chatgptå¯¹è’™ç‰¹å¡æ´›æ–¹æ³•çš„ä»‹ç»">ChatGPTå¯¹è’™ç‰¹å¡æ´›æ–¹æ³•çš„ä»‹ç»</h1><p>è’™ç‰¹å¡æ´›æ–¹æ³•æ˜¯ä¸€ç±»åŸºäºéšæœºæŠ½æ ·å’Œç»Ÿè®¡å­¦åŸç†çš„æ•°å€¼è®¡ç®—æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡éšæœºæŠ½æ ·æ¥è¿‘ä¼¼è§£å†³é—®é¢˜ã€‚è¿™ç§æ–¹æ³•åœ¨å¼ºåŒ–å­¦ä¹ ã€ä¼˜åŒ–é—®é¢˜ã€æ¦‚ç‡ä¼°è®¡ç­‰é¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚ä»¥ä¸‹æ˜¯å…³äºè’™ç‰¹å¡æ´›æ–¹æ³•çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼š</p><ol type="1"><li>åŸºæœ¬æ€æƒ³<ul><li><strong>éšæœºæŠ½æ ·ï¼š</strong>è’™ç‰¹å¡æ´›æ–¹æ³•åˆ©ç”¨éšæœºæŠ½æ ·çš„æ–¹å¼æ¥è¿‘ä¼¼è®¡ç®—æŸä¸ªé—®é¢˜çš„æ•°å€¼è§£ã€‚é€šè¿‡å¤§é‡çš„éšæœºæ ·æœ¬ï¼Œå¯ä»¥å¾—åˆ°å¯¹é—®é¢˜çš„æ¦‚ç‡åˆ†å¸ƒã€æœŸæœ›å€¼ç­‰è¿›è¡Œä¼°è®¡çš„ç»“æœã€‚</li></ul></li><li>åº”ç”¨é¢†åŸŸ<ul><li><strong>å¼ºåŒ–å­¦ä¹ ï¼š</strong>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œè’™ç‰¹å¡æ´›æ–¹æ³•ç”¨äºä¼°è®¡çŠ¶æ€å€¼ã€åŠ¨ä½œå€¼ï¼Œä»¥åŠè®¡ç®—ç­–ç•¥çš„æœŸæœ›å›æŠ¥ã€‚é€šè¿‡é‡‡æ ·å¤šæ¡è½¨è¿¹ï¼Œå¯ä»¥è¿‘ä¼¼åœ°è®¡ç®—æœŸæœ›å€¼ã€‚</li><li><strong>æ•°å€¼ç§¯åˆ†ï¼š</strong>è’™ç‰¹å¡æ´›æ–¹æ³•å¯ä»¥ç”¨äºä¼°è®¡å¤æ‚å‡½æ•°çš„ç§¯åˆ†å€¼ã€‚é€šè¿‡åœ¨å‡½æ•°å®šä¹‰åŸŸå†…éšæœºé‡‡æ ·ï¼Œè®¡ç®—å‡½æ•°å€¼çš„å¹³å‡å€¼ï¼Œå¯ä»¥å¾—åˆ°ç§¯åˆ†çš„è¿‘ä¼¼å€¼ã€‚</li><li><strong>æ¦‚ç‡ä¼°è®¡ï¼š</strong>è’™ç‰¹å¡æ´›æ–¹æ³•åœ¨æ¦‚ç‡ä¼°è®¡ä¸­ä¹Ÿæœ‰åº”ç”¨ï¼Œä¾‹å¦‚é€šè¿‡é‡‡æ ·ä¼°è®¡éšæœºå˜é‡çš„æœŸæœ›ã€æ–¹å·®ç­‰ç»Ÿè®¡é‡ã€‚</li></ul></li><li>ç®—æ³•æ­¥éª¤<ol type="1"><li><strong>éšæœºæŠ½æ ·ï¼š</strong>æ ¹æ®é—®é¢˜çš„ç‰¹æ€§ï¼Œé€šè¿‡éšæœºæŠ½æ ·ç”Ÿæˆä¸€ç³»åˆ—æ ·æœ¬ç‚¹ã€‚</li><li><strong>è®¡ç®—ç»Ÿè®¡é‡ï¼š</strong>å¯¹æ¯ä¸ªæ ·æœ¬ç‚¹è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°éœ€è¦ä¼°è®¡çš„ç»Ÿè®¡é‡ï¼Œä¾‹å¦‚æœŸæœ›å€¼ã€æ–¹å·®ç­‰ã€‚</li><li><strong>å¹³å‡ä¼°è®¡ï¼š</strong>å¯¹æ‰€æœ‰æ ·æœ¬ç‚¹è®¡ç®—çš„ç»Ÿè®¡é‡è¿›è¡Œå¹³å‡ï¼Œå¾—åˆ°æœ€ç»ˆçš„è¿‘ä¼¼è§£ã€‚</li></ol></li><li>ä¼˜ç¼ºç‚¹<ul><li><strong>ä¼˜ç‚¹ï¼š</strong>è’™ç‰¹å¡æ´›æ–¹æ³•æ˜¯ä¸€ç§é€šç”¨çš„æ•°å€¼è®¡ç®—æ–¹æ³•ï¼Œå¯¹äºå¤æ‚é—®é¢˜å…·æœ‰å¾ˆå¼ºçš„é€‚åº”æ€§ã€‚å®ƒä¸ä¾èµ–äºé—®é¢˜çš„å…·ä½“å½¢å¼ï¼Œè€Œæ˜¯é€šè¿‡éšæœºæŠ½æ ·æ¥é€¼è¿‘è§£ã€‚</li><li><strong>ç¼ºç‚¹ï¼š</strong>æ”¶æ•›é€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œç‰¹åˆ«æ˜¯åœ¨ç»´åº¦è¾ƒé«˜çš„é—®é¢˜ä¸­ï¼Œéœ€è¦å¤§é‡çš„æ ·æœ¬æ‰èƒ½è·å¾—å‡†ç¡®çš„ä¼°è®¡ã€‚åŒæ—¶ï¼Œå¯¹äºä¸€äº›é—®é¢˜ï¼Œå¯èƒ½å­˜åœ¨æŠ½æ ·åå·®ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼Œè’™ç‰¹å¡æ´›æ–¹æ³•æ˜¯ä¸€ç§å¼ºå¤§çš„æ•°å€¼è®¡ç®—å·¥å…·ï¼Œå°¤å…¶åœ¨é¢å¯¹å¤æ‚ã€é«˜ç»´åº¦çš„é—®é¢˜æ—¶æ˜¾ç¤ºå‡ºå…¶ä¼˜è¶Šæ€§ã€‚</p><p>è’™ç‰¹å¡æ´›(Monte Carlo) æ˜¯ä¸€å¤§ç±»éšæœºç®—æ³•(randomized algorithms)çš„æ€»ç§°ï¼Œå®ƒä»¬é€šè¿‡éšæœºæ ·æœ¬æ¥ä¼°ç®—çœŸå®å€¼ã€‚æœ¬èŠ‚ç”¨å‡ ä¸ªä¾‹å­è®²è§£è’™ç‰¹å¡æ´›ç®—æ³•ã€‚</p><h1 id="ä¾‹ä¸€è¿‘ä¼¼piå€¼">ä¾‹ä¸€ï¼šè¿‘ä¼¼<span class="math inline">\(\pi\)</span>å€¼</h1><p>æˆ‘ä»¬éƒ½çŸ¥é“åœ†å‘¨ç‡<span class="math inline">\(\pi\)</span>çº¦ç­‰äº3.1415927ã€‚ç°åœ¨å‡è£…æˆ‘ä»¬ä¸çŸ¥é“<span class="math inline">\(\pi\)</span>,è€Œæ˜¯è¦æƒ³åŠæ³•è¿‘ä¼¼ä¼°ç®—<span class="math inline">\(\pi\)</span>å€¼ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª (ä¼ª)éšæœºæ•°ç”Ÿæˆå™¨ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ç”¨éšæœºæ ·æœ¬æ¥è¿‘ä¼¼<span class="math inline">\(\pi\)</span>å‘¢ï¼Ÿè¿™ä¸€å°èŠ‚è®¨è®ºä½¿ç”¨è’™ç‰¹å¡æ´›å¦‚ä½•è¿‘ä¼¼<span class="math inline">\(\pi\)</span>å€¼ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª (ä¼ª) éšæœºæ•°ç”Ÿæˆå™¨ï¼Œå¯ä»¥å‡åŒ€ç”Ÿæˆ -1 åˆ° +1ä¹‹é—´çš„æ•°ã€‚æ¯æ¬¡ç”Ÿæˆä¸¤ä¸ªéšæœºæ•°ï¼Œä¸€ä¸ªä½œä¸º<span class="math inline">\(x\)</span>,å¦ä¸€ä¸ªä½œä¸º<span class="math inline">\(y\)</span>ã€‚äºæ˜¯æ¯æ¬¡ç”Ÿæˆäº†ä¸€ä¸ªå¹³é¢åæ ‡ç³»ä¸­çš„ç‚¹<span class="math inline">\((x,y)\)</span>, è§å›¾ 2.3(å·¦)ã€‚å› ä¸º<span class="math inline">\(x\)</span>å’Œ<span class="math inline">\(y\)</span>éƒ½æ˜¯åœ¨ ([-1,1])åŒºé—´ä¸Šå‡åŒ€åˆ†å¸ƒï¼Œæ‰€ä»¥è¿™ä¸ªæ­£æ–¹å½¢å†…çš„ç‚¹è¢«æŠ½åˆ°çš„æ¦‚ç‡æ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬é‡å¤æŠ½æ ·<span class="math inline">\(n\)</span>æ¬¡ï¼Œå¾—åˆ°äº†<span class="math inline">\(n\)</span>ä¸ªæ­£æ–¹å½¢å†…çš„ç‚¹ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/2-1-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1/b5c4792d8e806dea2de245eb613c8f50.png"></p><p>å¦‚å›¾2.3(å³)æ‰€ç¤ºï¼Œè“è‰²æ­£æ–¹å½¢é‡Œé¢åŒ…å«ä¸€ä¸ªç»¿è‰²çš„åœ†ï¼Œåœ†å¿ƒæ˜¯(0,0),åŠå¾„ç­‰äº1ã€‚åˆšæ‰éšæœºç”Ÿæˆçš„<span class="math inline">\(n\)</span>ä¸ªç‚¹æœ‰äº›è½åœ¨åœ†å¤–é¢ï¼Œæœ‰äº›è½åœ¨åœ†é‡Œé¢ã€‚</p><p>è¯·é—®ä¸€ä¸ªç‚¹è½åœ¨åœ†é‡Œé¢çš„æ¦‚ç‡æœ‰å¤šå¤§å‘¢ï¼Ÿç”±äºæŠ½æ ·æ˜¯å‡åŒ€çš„ï¼Œå› æ­¤è¿™ä¸ªæ¦‚ç‡æ˜¾ç„¶æ˜¯åœ†çš„é¢ç§¯ä¸æ­£æ–¹å½¢é¢ç§¯çš„æ¯”å€¼ã€‚æ­£æ–¹å½¢çš„é¢ç§¯æ˜¯è¾¹é•¿çš„å¹³æ–¹ï¼Œå³<span class="math inline">\(a_1=2^2=4\)</span>ã€‚åœ†çš„é¢ç§¯æ˜¯<span class="math inline">\(\pi \times1^2=\pi\)</span>ã€‚é‚£ä¹ˆä¸€ä¸ªç‚¹è½åœ¨åœ†é‡Œé¢çš„æ¦‚ç‡å°±æ˜¯<span class="math inline">\(p=\frac{a_2}{a_1}=\frac{\pi}{4}\)</span>ã€‚</p><p>è®¾æˆ‘ä»¬éšæœºæŠ½æ ·äº†<span class="math inline">\(n\)</span>ä¸ªç‚¹ï¼Œè®¾åœ†å†…çš„ç‚¹çš„æ•°é‡ä¸ºéšæœºå˜é‡<span class="math inline">\(M\)</span>ã€‚æ˜¾ç„¶ï¼Œ<span class="math inline">\(M\)</span>çš„æœŸæœ›ç­‰äº<span class="math inline">\(\mathbb{E}[M]=pn=\frac{\pi n}{4}\)</span>ã€‚</p><p>æ³¨æ„ï¼Œè¿™åªæ˜¯æœŸæœ›ï¼Œå¹¶ä¸æ˜¯å®é™…å‘ç”Ÿçš„ç»“æœã€‚å¦‚æœä½ æŠ½<span class="math inline">\(n=5\)</span>ä¸ªç‚¹ï¼Œé‚£ä¹ˆæœŸæœ›æœ‰<span class="math inline">\(\mathbb{E}[M]=\frac{5\pi}{4}\)</span>ä¸ªç‚¹è½åœ¨åœ†å†…ã€‚ä½†å®é™…è§‚æµ‹å€¼<span class="math inline">\(m\)</span>å¯èƒ½ç­‰äº 0ã€1ã€2ã€3ã€4ã€5ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚</p><p>ç»™å®šä¸€ä¸ªç‚¹çš„åæ ‡<span class="math inline">\((x,y)\)</span>,å¦‚ä½•åˆ¤æ–­è¯¥ç‚¹æ˜¯å¦åœ¨åœ†å†…å‘¢ï¼Ÿå·²çŸ¥åœ†å¿ƒåœ¨åŸç‚¹ï¼ŒåŠå¾„ç­‰äº1,æˆ‘ä»¬ç”¨ä¸€ä¸‹åœ†çš„æ–¹ç¨‹ã€‚å¦‚æœ<span class="math inline">\((x,y)\)</span>æ»¡è¶³ï¼š<span class="math inline">\(x^2+y^2\leq1\)</span>,åˆ™è¯´æ˜<span class="math inline">\((x,y)\)</span>è½åœ¨åœ†é‡Œé¢ï¼›åä¹‹ï¼Œç‚¹å°±åœ¨åœ†å¤–é¢ã€‚</p><p>æˆ‘ä»¬å‡åŒ€éšæœºæŠ½æ ·å¾—åˆ°<span class="math inline">\(n\)</span>ä¸ªç‚¹ï¼Œé€šè¿‡åœ†çš„æ–¹ç¨‹å¯¹æ¯ä¸ªç‚¹åšåˆ¤åˆ«ï¼Œå‘ç°æœ‰<span class="math inline">\(m\)</span>ä¸ªç‚¹è½åœ¨åœ†é‡Œé¢ã€‚å¦‚æœ<span class="math inline">\(n\)</span>éå¸¸å¤§ï¼Œé‚£ä¹ˆéšæœºå˜é‡<span class="math inline">\(M\)</span>çš„çœŸå®è§‚æµ‹å€¼<span class="math inline">\(m\)</span>å°±ä¼šéå¸¸æ¥è¿‘æœŸæœ›<span class="math inline">\(\mathbb{E}[M]=\frac{\pi n}{4}\)</span>:</p><p><span class="math inline">\(m \approx \frac{\pi n}{4}.\)</span></p><p>ç”±æ­¤å¾—åˆ°ï¼š</p><p><span class="math inline">\(\pi \approx \frac{4m}{n}.\)</span></p><p>æˆ‘ä»¬å¯ä»¥ä¾æ®è¿™ä¸ªå…¬å¼åšç¼–ç¨‹å®ç°ã€‚ä¸‹é¢æ˜¯ä¼ªä»£ç ï¼š</p><ol type="1"><li>åˆå§‹åŒ–<span class="math inline">\(m=0\)</span>ã€‚ç”¨æˆ·æŒ‡å®šæ ·æœ¬æ•°é‡<span class="math inline">\(n\)</span>çš„å¤§å°ã€‚<span class="math inline">\(n\)</span>è¶Šå¤§ï¼Œç²¾åº¦è¶Šé«˜ï¼Œä½†æ˜¯è®¡ç®—é‡è¶Šå¤§ã€‚</li><li>æŠŠä¸‹é¢çš„æ­¥éª¤é‡å¤<span class="math inline">\(n\)</span>æ¬¡ï¼š(a).ä»åŒºé—´ ([-1,1]) ä¸Šåšä¸¤æ¬¡å‡åŒ€éšæœºæŠ½æ ·å¾—åˆ°å®æ•°<span class="math inline">\(x\)</span>å’Œ<span class="math inline">\(y\)</span>ã€‚(b). å¦‚æœ<span class="math inline">\(x^2+y^2\leq1\)</span>, é‚£ä¹ˆ<span class="math inline">\(m \leftarrow m+1\)</span>ã€‚</li><li>è¿”å›<span class="math inline">\(\frac{4m}{n}\)</span>ä½œä¸ºå¯¹<span class="math inline">\(\pi\)</span>çš„ä¼°è®¡ã€‚</li></ol><p>å¤§æ•°å®šå¾‹ä¿è¯äº†è’™ç‰¹å¡æ´›çš„æ­£ç¡®æ€§ï¼šå½“<span class="math inline">\(n\)</span>è¶‹äºæ— ç©·ï¼Œ<span class="math inline">\(\frac{4m}{n}\)</span>è¶‹äº<span class="math inline">\(\pi\)</span>ã€‚å…¶å®è¿˜èƒ½è¿›ä¸€æ­¥ç”¨æ¦‚ç‡ä¸ç­‰å¼åˆ†æè¯¯å·®çš„ä¸Šç•Œã€‚æ¯”å¦‚ä½¿ç”¨Bernstein ä¸ç­‰å¼ï¼Œå¯ä»¥è¯æ˜å‡ºä¸‹é¢ç»“è®ºï¼š</p><p><span class="math inline">\(\left\|\frac{4m}{n}-\pi\right\|=O\left(\frac{1}{\sqrt{n}}\right).\)</span></p><p>è¿™ä¸ªä¸ç­‰å¼è¯´æ˜<span class="math inline">\(\frac{4m}{n}\)</span>(å³å¯¹<span class="math inline">\(\pi\)</span>çš„ä¼°è®¡) ä¼šæ”¶æ•›åˆ°<span class="math inline">\(\pi\)</span>, æ”¶æ•›ç‡æ˜¯<span class="math inline">\(\frac{1}{\sqrt{n}}\)</span>ã€‚ç„¶è€Œè¿™ä¸ªæ”¶æ•›ç‡å¹¶ä¸å¿«ï¼šæ ·æœ¬æ•°é‡<span class="math inline">\(n\)</span>å¢åŠ ä¸€ä¸‡å€ï¼Œç²¾åº¦æ‰èƒ½æé«˜ä¸€ç™¾å€ã€‚</p><h1 id="ä¾‹äºŒä¼°ç®—é˜´å½±éƒ¨åˆ†é¢ç§¯">ä¾‹äºŒï¼šä¼°ç®—é˜´å½±éƒ¨åˆ†é¢ç§¯</h1><p>å›¾2.4ä¸­æœ‰æ­£æ–¹å½¢ã€åœ†ã€æ‰‡å½¢ï¼Œå‡ ä¸ªå½¢çŠ¶ç›¸äº¤ã€‚è¯·ä¼°ç®—é˜´å½±éƒ¨åˆ†é¢ç§¯ã€‚è¿™ä¸ªé—®é¢˜å¸¸è§äºåˆä¸­æ•°å­¦ç«èµ›ã€‚å‡å¦‚ä½ ä¸ä¼šå¾®ç§¯åˆ†ï¼Œä¹Ÿä¸ä¼šå‡ ä½•æŠ€å·§ï¼Œä½ æ˜¯å¦æœ‰åŠæ³•è¿‘ä¼¼ä¼°ç®—é˜´å½±éƒ¨åˆ†é¢ç§¯å‘¢ï¼Ÿç”¨è’™ç‰¹å¡æ´›å¯ä»¥å¾ˆå®¹æ˜“è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/2-1-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1/1733135856255-36277529-c6c9-4205-ad78-21f6c177226b.png"></p><p>å›¾ 2.5 ä¸­ç»¿è‰²åœ†çš„åœ†å¿ƒæ˜¯ (1,1), åŠå¾„ç­‰äº 1;è“è‰²æ‰‡å½¢çš„åœ†å¿ƒæ˜¯(0,0)ã€åŠå¾„ç­‰äº2ã€‚ç›®çš„ç‚¹<span class="math inline">\((x,y)\)</span>åœ¨ç»¿è‰²çš„åœ†ä¸­ï¼Œè€Œä¸åœ¨è“è‰²çš„æ‰‡å½¢ä¸­ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/2-1-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1/4743c4dfdc896695524ef4a49289d47b.png"></p><p>åˆ©ç”¨åœ†çš„æ–¹ç¨‹å¯ä»¥åˆ¤å®šç‚¹<span class="math inline">\((x,y)\)</span>æ˜¯å¦åœ¨ç»¿è‰²åœ†é‡Œé¢ã€‚å¦‚æœ<span class="math inline">\((x,y)\)</span>æ»¡è¶³æ–¹ç¨‹<span class="math inline">\((x-1)^2+(y-1)^2\leq1\)</span>,</p><p>åˆ™è¯´æ˜<span class="math inline">\((x,y)\)</span>åœ¨ç»¿è‰²åœ†é‡Œé¢ã€‚</p><p>åˆ©ç”¨æ‰‡å½¢çš„æ–¹ç¨‹å¯ä»¥åˆ¤å®šç‚¹<span class="math inline">\((x,y)\)</span>æ˜¯å¦åœ¨è“è‰²æ‰‡å½¢å¤–é¢ã€‚å¦‚æœç‚¹<span class="math inline">\((x,y)\)</span>æ»¡è¶³æ–¹ç¨‹</p><p><span class="math inline">\(x^2+y^2&gt;4\)</span>,</p><p>åˆ™è¯´æ˜<span class="math inline">\((x,y)\)</span>åœ¨è“è‰²æ‰‡å½¢å¤–é¢ã€‚</p><p>å¦‚æœä¸€ä¸ªç‚¹åŒæ—¶æ»¡è¶³æ–¹ç¨‹ (2.1)å’Œ(2.2),é‚£ä¹ˆè¿™ä¸ªç‚¹ä¸€å®šåœ¨é˜´å½±åŒºåŸŸå†…ã€‚ä»<span class="math inline">\([0,2]\times [0,2]\)</span>è¿™ä¸ªæ­£æ–¹å½¢ä¸­åšéšæœºæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(n\)</span>ä¸ªç‚¹ã€‚ç„¶åç”¨ä¸¤ä¸ªæ–¹ç¨‹ç­›é€‰è½åœ¨é˜´å½±éƒ¨åˆ†çš„ç‚¹ã€‚</p><p>æˆ‘ä»¬åœ¨æ­£æ–¹å½¢<span class="math inline">\([0,2] \times[0,2]\)</span>ä¸­éšæœºå‡åŒ€æŠ½æ ·ï¼Œå¾—åˆ°çš„ç‚¹æœ‰ä¸€å®šæ¦‚ç‡ä¼šè½åœ¨é˜´å½±éƒ¨åˆ†ã€‚æˆ‘ä»¬æ¥è®¡ç®—è¿™ä¸ªæ¦‚ç‡ã€‚æ­£æ–¹å½¢çš„è¾¹é•¿ç­‰äº2ï¼Œæ‰€ä»¥é¢ç§¯<span class="math inline">\(a_1=4\)</span>ã€‚è®¾é˜´å½±éƒ¨åˆ†é¢ç§¯ä¸º<span class="math inline">\(a_2\)</span>ã€‚é‚£ä¹ˆç‚¹è½åœ¨é˜´å½±éƒ¨åˆ†æ¦‚ç‡æ˜¯</p><p><span class="math inline">\(p=\frac{a_2}{a_1}=\frac{a_2}{4}\)</span>ã€‚</p><p>æˆ‘ä»¬ä»æ­£æ–¹å½¢ä¸­éšæœºæŠ½<span class="math inline">\(n\)</span>ä¸ªç‚¹ï¼Œè®¾æœ‰<span class="math inline">\(M\)</span>ä¸ªç‚¹è½åœ¨é˜´å½±éƒ¨åˆ†å†…(<span class="math inline">\(M\)</span>æ˜¯ä¸ªéšæœºå˜é‡)ã€‚æ¯ä¸ªç‚¹è½åœ¨é˜´å½±éƒ¨åˆ†çš„æ¦‚ç‡æ˜¯<span class="math inline">\(p\)</span>,æ‰€ä»¥<span class="math inline">\(M\)</span>çš„æœŸæœ›ç­‰äº<span class="math inline">\(\mathbb{E}[M]=np=\frac{na_2}{4}\)</span>ã€‚</p><p>ç”¨æ–¹ç¨‹ (2.1)å’Œ (2.2) å¯¹<span class="math inline">\(n\)</span>ä¸ªç‚¹åšç­›é€‰ï¼Œå‘ç°å®é™…ä¸Šæœ‰<span class="math inline">\(m\)</span>ä¸ªç‚¹è½åœ¨é˜´å½±éƒ¨åˆ†å†… (<span class="math inline">\(m\)</span>æ˜¯éšæœºå˜é‡<span class="math inline">\(M\)</span>çš„è§‚æµ‹å€¼)ã€‚å¦‚æœ<span class="math inline">\(n\)</span>å¾ˆå¤§ï¼Œé‚£ä¹ˆ<span class="math inline">\(m\)</span>ä¼šæ¯”è¾ƒæ¥è¿‘æœŸæœ›<span class="math inline">\(\mathbb{E}[M]=\frac{na_2}{4}\)</span>, å³<span class="math inline">\(m \approx \frac{na_2}{4}\)</span>ã€‚</p><p>ä¹Ÿå³<span class="math inline">\(a_2 \approx\frac{4m}{n}\)</span>ã€‚</p><p>è¿™ä¸ªå…¬å¼å°±æ˜¯å¯¹é˜´å½±éƒ¨åˆ†é¢ç§¯çš„ä¼°è®¡ã€‚æˆ‘ä»¬ä¾æ®è¿™ä¸ªå…¬å¼åšç¼–ç¨‹å®ç°ã€‚ä¸‹é¢æ˜¯ä¼ªä»£ç ï¼š</p><ol type="1"><li>åˆå§‹åŒ–<span class="math inline">\(m=0\)</span>ã€‚ç”¨æˆ·æŒ‡å®šæ ·æœ¬æ•°é‡<span class="math inline">\(n\)</span>çš„å¤§å°ã€‚<span class="math inline">\(n\)</span>è¶Šå¤§ï¼Œç²¾åº¦è¶Šé«˜ï¼Œä½†æ˜¯è®¡ç®—é‡è¶Šå¤§ã€‚</li><li>æŠŠä¸‹é¢çš„æ­¥éª¤é‡å¤<span class="math inline">\(n\)</span>æ¬¡ï¼š(a).ä»åŒºé—´<span class="math inline">\([0,2]\)</span>ä¸Šå‡åŒ€éšæœºæŠ½æ ·å¾—åˆ°<span class="math inline">\(x\)</span>; å†åšä¸€æ¬¡å‡åŒ€éšæœºæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(y\)</span>ã€‚(b). å¦‚æœ<span class="math inline">\((x-1)^2+(y-1)^2\leq1\)</span>å’Œ<span class="math inline">\(x^2+y^2&gt;4\)</span>ä¸¤ä¸ªä¸ç­‰å¼éƒ½æˆç«‹ï¼Œé‚£ä¹ˆè®©<span class="math inline">\(m \leftarrow m+1\)</span>ã€‚</li><li>è¿”å›<span class="math inline">\(\frac{4m}{n}\)</span>ä½œä¸ºå¯¹é˜´å½±éƒ¨åˆ†é¢ç§¯çš„ä¼°è®¡ã€‚</li></ol><h1 id="ä¾‹ä¸‰è¿‘ä¼¼å®šç§¯åˆ†">ä¾‹ä¸‰ï¼šè¿‘ä¼¼å®šç§¯åˆ†</h1><p>è¿‘ä¼¼æ±‚ç§¯åˆ†æ˜¯è’™ç‰¹å¡æ´›æœ€é‡è¦çš„åº”ç”¨ä¹‹ä¸€ï¼Œåœ¨ç§‘å­¦å’Œå·¥ç¨‹ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œç»™å®šä¸€ä¸ªå‡½æ•°ï¼š</p><p><span class="math inline">\(f(x)=\frac{1}{1+(\sin x)\cdot(\lnx)^2},\)</span></p><p>è¦æ±‚è®¡ç®—<span class="math inline">\(f\)</span>åœ¨åŒºé—´ 0.8 åˆ° 3ä¸Šçš„å®šç§¯åˆ†ï¼š</p><p><span class="math inline">\(I=\int_{0.8}^{3}f(x)dx.\)</span></p><p>æœ‰å¾ˆå¤šç§‘å­¦å’Œå·¥ç¨‹é—®é¢˜éœ€è¦è®¡ç®—å®šç§¯åˆ†ï¼Œè€Œå‡½æ•°<span class="math inline">\(f(x)\)</span>å¯èƒ½å¾ˆå¤æ‚ï¼Œæ±‚å®šç§¯åˆ†ä¼šå¾ˆå›°éš¾ï¼Œç”šè‡³æœ‰å¯èƒ½ä¸å­˜åœ¨è§£æè§£ã€‚å¦‚æœæ±‚è§£æè§£å¾ˆå›°éš¾ï¼Œæˆ–è€…è§£æè§£ä¸å­˜åœ¨ï¼Œåˆ™å¯ä»¥ç”¨è’™ç‰¹å¡æ´›è¿‘ä¼¼è®¡ç®—æ•°å€¼è§£ã€‚</p><p><strong>ä¸€å…ƒå‡½æ•°çš„å®šç§¯åˆ†</strong>æ˜¯ç›¸å¯¹æ¯”è¾ƒç®€å•çš„é—®é¢˜ã€‚ä¸€å…ƒå‡½æ•°çš„æ„æ€æ˜¯å˜é‡<span class="math inline">\(x\)</span>æ˜¯ä¸ªæ ‡é‡ã€‚ç»™å®šä¸€å…ƒå‡½æ•°<span class="math inline">\(f(x)\)</span>, æ±‚å‡½æ•°åœ¨<span class="math inline">\(a\)</span>åˆ°<span class="math inline">\(b\)</span>åŒºé—´ä¸Šçš„å®šç§¯åˆ†ï¼š</p><p><span class="math inline">\(I=\int_{a}^{b}f(x)dx.\)</span></p><p>è’™ç‰¹å¡æ´›æ–¹æ³•é€šè¿‡ä¸‹é¢çš„æ­¥éª¤è¿‘ä¼¼å®šç§¯åˆ†ï¼š</p><ol type="1"><li>åœ¨åŒºé—´<span class="math inline">\([a,b]\)</span>ä¸ŠåšéšæœºæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(n\)</span>ä¸ªæ ·æœ¬ï¼Œè®°ä½œï¼š<span class="math inline">\(x_1,\cdots,x_n\)</span>ã€‚æ ·æœ¬æ•°é‡<span class="math inline">\(n\)</span>ç”±ç”¨æˆ·è‡ªå·±å®šï¼Œ<span class="math inline">\(n\)</span>è¶Šå¤§ï¼Œè®¡ç®—é‡è¶Šå¤§ï¼Œè¿‘ä¼¼è¶Šå‡†ç¡®ã€‚</li><li>å¯¹å‡½æ•°å€¼<span class="math inline">\(f(x_1),\cdots,f(x_n)\)</span>æ±‚å¹³å‡ï¼Œå†ä¹˜ä»¥åŒºé—´é•¿åº¦<span class="math inline">\(b-a\)</span>:</li></ol><p><span class="math inline">\(q_n=(b-a)\cdot\frac{1}{n}\sum_{i=1}^{n}f(x_i).\)</span></p><ol start="3" type="1"><li>è¿”å›<span class="math inline">\(q_n\)</span>ä½œä¸ºå®šç§¯åˆ†<span class="math inline">\(I\)</span>çš„ä¼°è®¡å€¼ã€‚</li></ol><p><strong>å¤šå…ƒå‡½æ•°çš„å®šç§¯åˆ†</strong> è¦å¤æ‚ä¸€äº›ã€‚è®¾<span class="math inline">\(f:\mathbb{R}^d\mapsto\mathbb{R}\)</span>æ˜¯ä¸€ä¸ªå¤šå…ƒå‡½æ•°ï¼Œå˜é‡<span class="math inline">\(x\)</span>æ˜¯<span class="math inline">\(d\)</span>ç»´å‘é‡ã€‚è¦æ±‚è®¡ç®—<span class="math inline">\(f\)</span>åœ¨é›†åˆ<span class="math inline">\(\Omega\)</span>ä¸Šçš„å®šç§¯åˆ†ï¼š</p><p><span class="math inline">\(I=\int_{\Omega}f(\boldsymbol{x})d\boldsymbol{x}.\)</span></p><p>è’™ç‰¹å¡æ´›æ–¹æ³•é€šè¿‡ä¸‹é¢çš„æ­¥éª¤è¿‘ä¼¼å®šç§¯åˆ†ï¼š</p><ol type="1"><li>åœ¨é›†åˆ<span class="math inline">\(\Omega\)</span>ä¸Šåšå‡åŒ€éšæœºæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(n\)</span>ä¸ªæ ·æœ¬ï¼Œè®°ä½œå‘é‡<span class="math inline">\(x_1,\cdots,x_n\)</span>ã€‚æ ·æœ¬æ•°é‡<span class="math inline">\(n\)</span>ç”±ç”¨æˆ·è‡ªå·±å®šï¼Œ<span class="math inline">\(n\)</span>è¶Šå¤§ï¼Œè®¡ç®—é‡è¶Šå¤§ï¼Œè¿‘ä¼¼è¶Šå‡†ç¡®ã€‚</li><li>è®¡ç®—é›†åˆ<span class="math inline">\(\Omega\)</span>çš„ä½“ç§¯ï¼š<span class="math inline">\(v=\int_{\Omega}d\boldsymbol{x}.\)</span></li><li>å¯¹å‡½æ•°å€¼<span class="math inline">\(f(x_1),\cdots,f(x_n)\)</span>æ±‚å¹³å‡ï¼Œå†ä¹˜ä»¥<span class="math inline">\(\Omega\)</span>çš„ä½“ç§¯<span class="math inline">\(v\)</span>:</li></ol><p><span class="math inline">\(q_n=v\cdot\frac{1}{n}\sum_{i=1}^{n}f(x_i).\)</span>(2.3)</p><ol start="4" type="1"><li>è¿”å›<span class="math inline">\(q_n\)</span>ä½œä¸ºå®šç§¯åˆ†<span class="math inline">\(I\)</span>çš„ä¼°è®¡å€¼ã€‚</li></ol><p>æ³¨æ„ï¼Œç®—æ³•ç¬¬äºŒæ­¥éœ€è¦æ±‚<span class="math inline">\(\Omega\)</span>çš„ä½“ç§¯ã€‚å¦‚æœ<span class="math inline">\(\Omega\)</span>æ˜¯é•¿æ–¹ä½“ã€çƒä½“ç­‰è§„åˆ™å½¢çŠ¶ï¼Œé‚£ä¹ˆå¯ä»¥è§£æåœ°ç®—å‡ºä½“ç§¯<span class="math inline">\(v\)</span>ã€‚å¯æ˜¯å¦‚æœ<span class="math inline">\(\Omega\)</span>æ˜¯ä¸è§„åˆ™å½¢çŠ¶ï¼Œé‚£ä¹ˆå°±éœ€è¦å®šç§¯åˆ†æ±‚<span class="math inline">\(\Omega\)</span>çš„ä½“ç§¯<span class="math inline">\(v\)</span>,è¿™æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚å¯ä»¥ç”¨ç±»ä¼¼äºä¸Šä¸€å°èŠ‚â€œæ±‚é˜´å½±éƒ¨åˆ†é¢ç§¯â€çš„æ–¹æ³•è¿‘ä¼¼è®¡ç®—ä½“ç§¯<span class="math inline">\(v\)</span>ã€‚</p><p>ä¸¾ä¾‹è®²è§£å¤šå…ƒå‡½æ•°çš„è’™ç‰¹å¡æ´›ç§¯åˆ†ï¼šè¿™ä¸ªä¾‹å­ä¸­è¢«ç§¯åˆ†çš„å‡½æ•°æ˜¯äºŒå…ƒå‡½æ•°ï¼š</p><p><span class="math inline">\(f(x,y)=\left\{\begin{array}{ll}1,&amp;\text{if}x^2+y^2\leq1;\\0,&amp;\text{otherwise}.\end{array}\right.\)</span>(2.4)</p><p>ç›´è§‚åœ°è¯´ï¼Œå¦‚æœç‚¹<span class="math inline">\((x,y)\)</span>è½åœ¨å³å›¾çš„ç»¿è‰²åœ†å†…ï¼Œé‚£ä¹ˆå‡½æ•°å€¼å°±æ˜¯1; å¦åˆ™å‡½æ•°å€¼å°±æ˜¯ 0ã€‚å®šä¹‰é›†åˆ<span class="math inline">\(\Omega=[-1,1]\times[-1,1]\)</span>,å³å³å›¾ä¸­è“è‰²çš„æ­£æ–¹å½¢ï¼Œå®ƒçš„é¢ç§¯æ˜¯<span class="math inline">\(v=4\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/2-1-%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E4%BC%B0%E8%AE%A1/1733136459845-bbf7be59-ef0e-451a-aed7-b19052789cd7.png"></p><p>å®šç§¯åˆ†<span class="math inline">\(I=\int_{\Omega}f(x,y)dxdy\)</span></p><p>ç­‰äºå¤šå°‘å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œå®šç§¯åˆ†ç­‰äºåœ†çš„é¢ç§¯ï¼Œå³<span class="math inline">\(\pi \cdot 1^2=\pi\)</span>ã€‚å› æ­¤ï¼Œå®šç§¯åˆ†<span class="math inline">\(I=\pi\)</span>ã€‚ç”¨è’™ç‰¹å¡æ´›æ±‚å‡º<span class="math inline">\(I\)</span>,å°±å¾—åˆ°äº†<span class="math inline">\(\pi\)</span>ã€‚ä»é›†åˆ<span class="math inline">\(\Omega=[-1,1]\times[-1,1]\)</span>ä¸Šå‡åŒ€éšæœºæŠ½æ ·<span class="math inline">\(n\)</span>ä¸ªç‚¹ï¼Œè®°ä½œ<span class="math inline">\((x_1,y_1),\cdots,(x_n,y_n)\)</span>ã€‚åº”ç”¨å…¬å¼(2.3),å¯å¾—</p><p><span class="math inline">\(q_n=v\cdot\frac{1}{n}\sum_{i=1}^{n}f(x_i,y_i)=\frac{4}{n}\sum_{i=1}^{n}f(x_i,y_i).\)</span>(2.5)</p><p>æŠŠ<span class="math inline">\(q_n\)</span>ä½œä¸ºå¯¹å®šç§¯åˆ†<span class="math inline">\(I=\pi\)</span>çš„è¿‘ä¼¼ã€‚è¿™ä¸å‰é¢è¿‘ä¼¼<span class="math inline">\(\pi\)</span>çš„ç®—æ³•å®Œå…¨ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºæ­¤å¤„çš„ç®—æ³•æ˜¯ä»å¦ä¸€ä¸ªè§’åº¦æ¨å¯¼å‡ºçš„ã€‚</p><h1 id="ä¾‹å››è¿‘ä¼¼æœŸæœ›">ä¾‹å››ï¼šè¿‘ä¼¼æœŸæœ›</h1><p>è’™ç‰¹å¡æ´›è¿˜å¯ä»¥ç”¨æ¥è¿‘ä¼¼æœŸæœ›ï¼Œè¿™åœ¨æ•´æœ¬ä¹¦ä¸­ä¼šåå¤åº”ç”¨ã€‚è®¾<span class="math inline">\(X\)</span>æ˜¯<span class="math inline">\(d\)</span>ç»´éšæœºå˜é‡ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯é›†åˆ<span class="math inline">\(\Omega \subset \mathbb{R}^d\)</span>ã€‚å‡½æ•°<span class="math inline">\(p(x)\)</span>æ˜¯<span class="math inline">\(X\)</span>çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚è®¾<span class="math inline">\(f:\Omega \mapsto\mathbb{R}\)</span>æ˜¯ä»»æ„çš„å¤šå…ƒå‡½æ•°ï¼Œå®ƒå…³äºå˜é‡<span class="math inline">\(X\)</span>çš„æœŸæœ›æ˜¯ï¼š</p><p><span class="math inline">\(\mathbb{E}_{X\simp(\cdot)}\Big[f(X)\Big]=\int_{\Omega}p(x)\cdot f(x)d x.\)</span></p><p>ç”±äºæœŸæœ›æ˜¯å®šç§¯åˆ†ï¼Œæ‰€ä»¥å¯ä»¥æŒ‰ç…§ä¸Šä¸€å°èŠ‚çš„æ–¹æ³•ï¼Œç”¨è’™ç‰¹å¡æ´›æ±‚å®šç§¯åˆ†ã€‚ä¸Šä¸€å°èŠ‚åœ¨é›†åˆ<span class="math inline">\(\Omega\)</span>ä¸Šåšå‡åŒ€æŠ½æ ·ï¼Œç”¨å¾—åˆ°çš„æ ·æœ¬è¿‘ä¼¼ä¸Šé¢å…¬å¼ä¸­çš„å®šç§¯åˆ†ã€‚</p><p>ä¸‹é¢ä»‹ç»ä¸€ç§æ›´å¥½çš„ç®—æ³•ã€‚æ—¢ç„¶æˆ‘ä»¬çŸ¥é“æ¦‚ç‡å¯†åº¦å‡½æ•°<span class="math inline">\(p(x)\)</span>, æˆ‘ä»¬æœ€å¥½æ˜¯æŒ‰ç…§<span class="math inline">\(p(x)\)</span>åšéå‡åŒ€æŠ½æ ·ï¼Œè€Œä¸æ˜¯å‡åŒ€æŠ½æ ·ã€‚æŒ‰ç…§<span class="math inline">\(p(x)\)</span>åšéå‡åŒ€æŠ½æ ·ï¼Œå¯ä»¥æ¯”å‡åŒ€æŠ½æ ·æœ‰æ›´å¿«çš„æ”¶æ•›ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol type="1"><li>æŒ‰ç…§æ¦‚ç‡å¯†åº¦å‡½æ•°<span class="math inline">\(p(x)\)</span>,åœ¨é›†åˆ<span class="math inline">\(\Omega\)</span>ä¸Šåšéå‡åŒ€éšæœºæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(n\)</span>ä¸ªæ ·æœ¬ï¼Œè®°ä½œå‘é‡<span class="math inline">\(x_1,\cdots,x_n \simp(\cdot)\)</span>ã€‚æ ·æœ¬æ•°é‡<span class="math inline">\(n\)</span>ç”±ç”¨æˆ·è‡ªå·±å®šï¼Œ<span class="math inline">\(n\)</span>è¶Šå¤§ï¼Œè®¡ç®—é‡è¶Šå¤§ï¼›è¿‘ä¼¼è¶Šå‡†ç¡®ã€‚</li><li>å¯¹å‡½æ•°å€¼<span class="math inline">\(f(x_1),\cdots,f(x_n)\)</span>æ±‚å¹³å‡ï¼š</li></ol><p><span class="math inline">\(q_n=\frac{1}{n}\sum_{i=1}^{n}f(x_i).\)</span></p><ol start="3" type="1"><li>è¿”å›<span class="math inline">\(q_n\)</span>ä½œä¸ºæœŸæœ›<span class="math inline">\(\mathbb{E}_{X\simp(\cdot)}\Big[f(X)\Big]\)</span>çš„ä¼°è®¡å€¼ã€‚</li></ol><p>æ³¨ å¦‚æœæŒ‰ç…§ä¸Šè¿°æ–¹å¼åšç¼–ç¨‹å®ç°ï¼Œéœ€è¦å‚¨å­˜å‡½æ•°å€¼<span class="math inline">\(f(x_1),\cdots,f(x_n)\)</span>ã€‚ä½†ç”¨å¦‚ä¸‹çš„æ–¹å¼åšç¼–ç¨‹å®ç°ï¼Œå¯ä»¥å‡å°å†…å­˜å¼€é”€ã€‚åˆå§‹åŒ–<span class="math inline">\(q_0=0\)</span>ã€‚ä»<span class="math inline">\(t=1\)</span>åˆ°<span class="math inline">\(n\)</span>,ä¾æ¬¡è®¡ç®—</p><p><span class="math inline">\(q_t=(1-\frac{1}{t})\cdotq_{t-1}+\frac{1}{t}\cdot f(x_t).\)</span>(2.6)</p><p>ä¸éš¾è¯æ˜ï¼Œè¿™æ ·å¾—åˆ°çš„<span class="math inline">\(q_n\)</span>ç­‰äº<span class="math inline">\(\frac{1}{n}\sum_{i=1}^{n}f(x_i)\)</span>ã€‚è¿™æ ·æ— éœ€å­˜å‚¨æ‰€æœ‰çš„<span class="math inline">\(f(x_1),\cdots,f(x_n)\)</span>ã€‚å¯ä»¥è¿›ä¸€æ­¥æŠŠå…¬å¼(2.6)ä¸­çš„<span class="math inline">\(\frac{1}{t}\)</span>æ›¿æ¢æˆ<span class="math inline">\(\alpha_t\)</span>,å¾—åˆ°å…¬å¼ï¼š</p><p><span class="math inline">\(q_t=(1-\alpha_t)\cdotq_{t-1}+\alpha_t\cdot f(x_t).\)</span></p><p>è¿™ä¸ªå…¬å¼å«åš Robbins-Monro ç®—æ³•ï¼Œå…¶ä¸­<span class="math inline">\(\alpha_n\)</span>ç§°ä¸ºå­¦ä¹ æ­¥é•¿æˆ–å­¦ä¹ ç‡ã€‚åªè¦<span class="math inline">\(\alpha_t\)</span>æ»¡è¶³ä¸‹é¢çš„æ€§è´¨ï¼Œå°±èƒ½ä¿è¯ç®—æ³•çš„æ­£ç¡®æ€§ï¼š</p><p><span class="math inline">\(\lim_{n\to\infty}\sum_{t=1}^{n}\alpha_t=\infty\)</span>å’Œ<span class="math inline">\(\lim_{n\to\infty}\sum_{t=1}^{n}\alpha_t^2&lt;\infty.\)</span></p><p>æ˜¾ç„¶ï¼Œ<span class="math inline">\(\alpha_t=\frac{1}{t}\)</span>æ»¡è¶³ä¸Šè¿°æ€§è´¨ã€‚Robbins-Monroç®—æ³•å¯ä»¥åº”ç”¨åœ¨ Q å­¦ä¹ ç®—æ³•ä¸­ã€‚</p><h1 id="ä¾‹äº”éšæœºæ¢¯åº¦">ä¾‹äº”ï¼šéšæœºæ¢¯åº¦</h1><p>æˆ‘ä»¬å¯ä»¥ç”¨è’™ç‰¹å¡æ´›è¿‘ä¼¼æœŸæœ›æ¥ç†è§£éšæœºæ¢¯åº¦ç®—æ³•ã€‚</p><p>è®¾éšæœºå˜é‡<span class="math inline">\(X\)</span>ä¸ºä¸€ä¸ªæ•°æ®æ ·æœ¬ï¼Œä»¤<span class="math inline">\(w\)</span>ä¸ºç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚è®¾<span class="math inline">\(p(x)\)</span>ä¸ºéšæœºå˜é‡<span class="math inline">\(X\)</span>çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚å®šä¹‰æŸå¤±å‡½æ•°<span class="math inline">\(L(X;w)\)</span>ã€‚å®ƒçš„å€¼è¶Šå°ï¼Œæ„å‘³ç€æ¨¡å‹åšå‡ºçš„é¢„æµ‹è¶Šå‡†ç¡®ï¼›åä¹‹ï¼Œå®ƒçš„å€¼è¶Šå¤§ï¼Œåˆ™æ„å‘³ç€æ¨¡å‹åšå‡ºçš„é¢„æµ‹è¶Šå·®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›è°ƒæ•´ç¥ç»ç½‘ç»œçš„å‚æ•°<span class="math inline">\(w\)</span>,ä½¿å¾—æŸå¤±å‡½æ•°çš„æœŸæœ›å°½é‡å°ã€‚ç¥ç»ç½‘ç»œçš„è®­ç»ƒå¯ä»¥å®šä¹‰ä¸ºè¿™æ ·çš„ä¼˜åŒ–é—®é¢˜ï¼š</p><p><span class="math inline">\(\min_{\boldsymbol{w}}\mathbb{E}_{X\simp(\cdot)}\Big[L(X;\boldsymbol{w})\Big].\)</span></p><p>ç›®æ ‡å‡½æ•°<span class="math inline">\(\mathbb{E}_X[L(X;\boldsymbol{w})]\)</span>å…³äº<span class="math inline">\(\boldsymbol{w}\)</span>çš„æ¢¯åº¦æ˜¯ï¼š</p><p><span class="math inline">\(\boldsymbol{g} \triangleq\nabla_{\boldsymbol{w}}\mathbb{E}_{X\simp(\cdot)}\Big[L(X;\boldsymbol{w})\Big]=\mathbb{E}_{X\simp(\cdot)}\Big[\nabla_{\boldsymbol{w}}L(X;\boldsymbol{w})\Big].\)</span>(2.7)</p><p>å¯ä»¥åšæ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>, ä»¥å‡å°ç›®æ ‡å‡½æ•°<span class="math inline">\(\mathbb{E}_X[L(X;\boldsymbol{w})]\)</span>:</p><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot \boldsymbol{g}.\)</span></p><p>æ­¤å¤„çš„<span class="math inline">\(\alpha\)</span>è¢«ç§°ä½œå­¦ä¹ ç‡(learning rate)ã€‚ç›´æ¥è®¡ç®—æ¢¯åº¦<span class="math inline">\(\boldsymbol{g}\)</span>é€šå¸¸ä¼šæ¯”è¾ƒæ…¢ã€‚ä¸ºäº†åŠ é€Ÿè®¡ç®—ï¼Œå¯ä»¥å¯¹æœŸæœ›</p><p><span class="math inline">\(\boldsymbol{g}=\mathbb{E}_{X\simp(\cdot)}\Big[\nabla_{\boldsymbol{w}}L(X;\boldsymbol{w})\Big]\)</span></p><p>åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼ŒæŠŠå¾—åˆ°çš„è¿‘ä¼¼æ¢¯åº¦<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>ç§°ä½œéšæœºæ¢¯åº¦(stochastic gradient), ç”¨<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>ä»£æ›¿<span class="math inline">\(\boldsymbol{g}\)</span>æ¥æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>ã€‚</p><ol type="1"><li>æ ¹æ®æ¦‚ç‡å¯†åº¦å‡½æ•°<span class="math inline">\(p(x)\)</span>åšéšæœºæŠ½æ ·ï¼Œå¾—åˆ°<span class="math inline">\(B\)</span>ä¸ªæ ·æœ¬ï¼Œè®°ä½œ<span class="math inline">\(\tilde{x}_1,\ldots,\tilde{x}_B\)</span>ã€‚</li><li>è®¡ç®—æ¢¯åº¦<span class="math inline">\(\nabla_{\boldsymbol{w}}L(\tilde{x}_j;\boldsymbol{w}),\forall j=1,\ldots,B\)</span>ã€‚å¯¹å®ƒä»¬æ±‚å¹³å‡ï¼š</li></ol><p><span class="math inline">\(\tilde{\boldsymbol{g}}:=\frac{1}{B}\sum_{j=1}^{B}\nabla_{\boldsymbol{w}}L(\tilde{x}_j;\boldsymbol{w}).\)</span></p><p>æˆ‘ä»¬ç§°<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>ä¸º<strong>éšæœºæ¢¯åº¦</strong>ã€‚å› ä¸º<span class="math inline">\(\mathbb{E}[\tilde{\boldsymbol{g}}]=\boldsymbol{g}\)</span>,å®ƒæ˜¯<span class="math inline">\(\boldsymbol{g}\)</span>çš„ä¸€ä¸ªæ— åä¼°è®¡ã€‚</p><ol start="3" type="1"><li>åšéšæœºæ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>:</li></ol><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot \tilde{\boldsymbol{g}}.\)</span></p><p>æ ·æœ¬æ•°é‡<span class="math inline">\(B\)</span>ç§°ä½œæ‰¹é‡å¤§å° (batchsize), é€šå¸¸æ˜¯ä¸€ä¸ªæ¯”è¾ƒå°çš„æ­£æ•´æ•°ï¼Œæ¯”å¦‚ 1ã€8ã€16ã€32ã€‚æ‰€ä»¥æˆ‘ä»¬ç§°ä¹‹ä¸º<strong>æœ€å°æ‰¹ (mini-batch) SGD</strong>ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ ·æœ¬çœŸå®çš„æ¦‚ç‡å¯†åº¦å‡½æ•°<span class="math inline">\(p(x)\)</span>ä¸€èˆ¬æ˜¯æœªçŸ¥çš„ã€‚åœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ”¶é›†ä¸€ä¸ªè®­ç»ƒæ•°æ®é›†<span class="math inline">\(\mathcal{X}=\{x_1,\cdots,x_n\}\)</span>,å¹¶æ±‚è§£è¿™æ ·ä¸€ä¸ªç»éªŒé£é™©æœ€å°åŒ– (empirical risk minimization) é—®é¢˜ï¼š</p><p><span class="math inline">\(\min_{\boldsymbol{w}}\frac{1}{n}\sum_{i=1}^{n}L(\boldsymbol{x}_i;\boldsymbol{w}).\)</span>(2.8)</p><p>è¿™ç›¸å½“äºæˆ‘ä»¬ç”¨ä¸‹é¢è¿™ä¸ªæ¦‚ç‡è´¨é‡å‡½æ•°ä»£æ›¿çœŸå®çš„<span class="math inline">\(p(x)\)</span>:</p><p><span class="math inline">\(p(x) =\begin{cases}\frac{1}{n}, &amp; \text{å¦‚æœ } x \in \mathcal{X}; \\0, &amp; \text{å¦‚æœ } x \notin \mathcal{X}.\end{cases}\)</span></p><p>å…¬å¼çš„æ„æ€æ˜¯éšæœºå˜é‡<span class="math inline">\(X\)</span>çš„å–å€¼æ˜¯<span class="math inline">\(n\)</span>ä¸ªæ•°æ®ç‚¹ä¸­çš„ä¸€ä¸ªï¼Œæ¦‚ç‡éƒ½æ˜¯<span class="math inline">\(\frac{1}{n}\)</span>ã€‚é‚£ä¹ˆæœ€å°æ‰¹ SGDçš„æ¯ä¸€è½®éƒ½ä»é›†åˆ<span class="math inline">\(\{x_1,\cdots,x_n\}\)</span>ä¸­å‡åŒ€éšæœºæŠ½å–<span class="math inline">\(B\)</span>ä¸ªæ ·æœ¬ï¼Œè®¡ç®—éšæœºæ¢¯åº¦ï¼Œæ›´æ–°æ¨¡å‹å‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>ã€‚</p><h1 id="æ€»ç»“">æ€»ç»“</h1><p>æœ¬æ–‡è¯¦ç»†è®²è§£äº†è’™ç‰¹å¡æ´›çš„åº”ç”¨ã€‚å…¶ä¸­æœ€é‡è¦çš„çŸ¥è¯†ç‚¹æ˜¯è’™ç‰¹å¡æ´›è¿‘ä¼¼æœŸæœ›ï¼šè®¾<span class="math inline">\(X\)</span>æ˜¯éšæœºå˜é‡ï¼Œ<span class="math inline">\(x\)</span>æ˜¯è§‚æµ‹å€¼ï¼Œè’™ç‰¹å¡æ´›ç”¨<span class="math inline">\(f(x)\)</span>è¿‘ä¼¼æœŸæœ›<span class="math inline">\(\mathbb{E}[f(X)]\)</span>ã€‚å¼ºåŒ–å­¦ä¹ ä¸­çš„ Qå­¦ä¹ ã€SARSAã€ç­–ç•¥æ¢¯åº¦ç­‰ç®—æ³•éƒ½éœ€è¦è¿™æ ·ç”¨è’™ç‰¹å¡æ´›è¿‘ä¼¼æœŸæœ›ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.5 ALPHAGO</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/</url>
    
    <content type="html"><![CDATA[<p>å›´æ£‹æ¸¸æˆä»‹ç»</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733122092352-f6e13ed7-09d6-4188-837a-6e2f22fbc16a.png"></p><h1 id="high-level-ideas">High level Ideas</h1><p>è®­ç»ƒåŒ…å«3æ­¥ï¼š</p><ol type="1"><li>ç”¨behavior cloningåˆå§‹åŒ–ç­–ç•¥ç½‘ç»œ</li><li>ç”¨ç­–ç•¥æ¢¯åº¦è®­ç»ƒç­–ç•¥ç½‘ç»œ</li><li>ç­–ç•¥ç½‘ç»œè®­ç»ƒå®Œä¹‹åï¼Œç”¨å®ƒæ¥è®­ç»ƒä»·å€¼ç½‘ç»œã€‚</li></ol><h2 id="behavior-cloning">Behavior Cloning</h2><h3 id="chatgptä»‹ç»ä»€ä¹ˆæ˜¯behavior-cloning">ChatGPTä»‹ç»ä»€ä¹ˆæ˜¯Behaviorcloningï¼š</h3><p>Behaviorcloningï¼ˆè¡Œä¸ºå…‹éš†ï¼‰æ˜¯ä¸€ç§å¼ºåŒ–å­¦ä¹ ä¸­çš„å­¦ä¹ æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªæ¨¡å‹ï¼ˆé€šå¸¸æ˜¯ç¥ç»ç½‘ç»œï¼‰è¢«è®­ç»ƒæ¥æ¨¡ä»¿ä»ä¸“å®¶æˆ–ç»éªŒæ•°æ®ä¸­æ”¶é›†çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯é€šè¿‡è¯•é”™å’Œå¥–åŠ±ä¿¡å·çš„æ–¹å¼å­¦ä¹ ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒBehavior Cloning çš„æ­¥éª¤é€šå¸¸åŒ…æ‹¬ï¼š</p><ol type="1"><li><strong>æ•°æ®æ”¶é›†ï¼š</strong>ä»ä¸€ä¸ªç»éªŒä¸°å¯Œçš„ç­–ç•¥ï¼ˆé€šå¸¸æ˜¯äººç±»ä¸“å®¶ï¼‰ä¸­æ”¶é›†è¡Œä¸ºæ•°æ®ã€‚è¿™äº›æ•°æ®åŒ…æ‹¬çŠ¶æ€å’Œç›¸åº”çš„è¡Œä¸ºã€‚</li><li><strong>æ¨¡å‹è®­ç»ƒï¼š</strong>ä½¿ç”¨è¿™äº›æ”¶é›†åˆ°çš„ä¸“å®¶æ•°æ®æ¥è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œã€‚æ¨¡å‹çš„ç›®æ ‡æ˜¯å­¦ä¹ è¾“å…¥çŠ¶æ€ä¸ç›¸åº”çš„åŠ¨ä½œä¹‹é—´çš„æ˜ å°„ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°æ¨¡ä»¿ä¸“å®¶çš„è¡Œä¸ºã€‚</li><li><strong>è¯„ä¼°å’Œéƒ¨ç½²ï¼š</strong>å¯¹è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼Œçœ‹å®ƒåœ¨æ¨¡ä»¿ä¸“å®¶è¡Œä¸ºæ–¹é¢çš„è¡¨ç°ã€‚å¦‚æœè¡¨ç°è‰¯å¥½ï¼Œå¯ä»¥å°†è¯¥æ¨¡å‹éƒ¨ç½²åˆ°å®é™…ç¯å¢ƒä¸­ï¼Œè®©å®ƒæ‰§è¡Œç›¸ä¼¼çš„ä»»åŠ¡ã€‚</li></ol><h3 id="behavior-cloning-1">Behavior Cloning</h3><p>Behavior Cloningçš„ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥é€šè¿‡ç›´æ¥æ¨¡ä»¿ä¸“å®¶çš„è¡Œä¸ºï¼Œå¿«é€Ÿå­¦ä¹ å¤æ‚çš„ä»»åŠ¡ï¼Œè€Œä¸éœ€è¦é€šè¿‡å¼ºåŒ–å­¦ä¹ ä¸­çš„å¥–åŠ±ä¿¡å·è¿›è¡Œè°ƒæ•´ã€‚ç„¶è€Œï¼Œå®ƒçš„å±€é™æ€§åœ¨äºå¦‚æœä¸“å®¶çš„è¡Œä¸ºåœ¨æŸäº›æƒ…å†µä¸‹æ˜¯ä¸å®Œç¾çš„ï¼Œæ¨¡å‹ä¹Ÿä¼šæ¨¡ä»¿è¿™äº›ä¸å®Œç¾çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼Œå¯¹äºæŸäº›å¤æ‚çš„ä»»åŠ¡ï¼Œä»…ä»…é€šè¿‡è¡Œä¸ºå…‹éš†å¯èƒ½æ— æ³•è·å¾—é²æ£’ä¸”é«˜æ•ˆçš„ç­–ç•¥ã€‚</p><h2 id="è’™ç‰¹å¡æ´›æ ‘æœç´¢">è’™ç‰¹å¡æ´›æ ‘æœç´¢</h2><p>æ‰§è¡Œï¼ˆçœŸæ­£å’Œäººä¸‹æ£‹ï¼‰çš„æ—¶å€™ï¼šç”¨ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œè¿›è¡Œè’™ç‰¹å¡æ´›æ ‘æœç´¢ï¼ˆMCTSï¼‰</p><h3 id="cahtgptä»‹ç»ä»€ä¹ˆæ˜¯mcts">CahtGPTä»‹ç»ä»€ä¹ˆæ˜¯MCTSï¼š</h3><p>è’™ç‰¹å¡æ´›æ ‘æœç´¢ï¼ˆMonte Carlo TreeSearchï¼ŒMCTSï¼‰æ˜¯ä¸€ç§ç”¨äºå†³ç­–æ ‘æœç´¢çš„æ¦‚ç‡æ¨¡å‹ï¼Œä¸»è¦ç”¨äºè§£å†³ä¸ç¡®å®šæ€§å’Œéƒ¨åˆ†å¯è§‚å¯Ÿæ€§é—®é¢˜ã€‚å®ƒæœ€åˆæ˜¯ä¸ºè§£å†³æ£‹ç±»æ¸¸æˆçš„äººå·¥æ™ºèƒ½é—®é¢˜è€Œæå‡ºçš„ï¼Œä½†åæ¥è¢«æ‰©å±•åº”ç”¨åˆ°å„ç§é¢†åŸŸã€‚</p><p>MCTSçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡æ¨¡æ‹Ÿéšæœºé‡‡æ ·çš„æ–¹å¼æ¥ä¼°è®¡æ¯ä¸ªå†³ç­–èŠ‚ç‚¹çš„å€¼ï¼Œä»è€Œæ„å»ºä¸€ä¸ªæœç´¢æ ‘ï¼Œå¸®åŠ©åœ¨å†³ç­–æ—¶æ‰¾åˆ°æœ€ä¼˜çš„è·¯å¾„ã€‚æ•´ä¸ªæœç´¢è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å››ä¸ªé˜¶æ®µï¼š</p><ol type="1"><li><strong>é€‰æ‹©ï¼ˆSelectionï¼‰ï¼š</strong>ä»æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®ä¸€å®šçš„ç­–ç•¥é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´åˆ°è¾¾åˆ°ä¸€ä¸ªæœªè¢«å®Œå…¨æ‰©å±•çš„èŠ‚ç‚¹ã€‚</li><li><strong>æ‰©å±•ï¼ˆExpansionï¼‰ï¼š</strong>å¯¹äºé€‰æ‹©çš„èŠ‚ç‚¹ï¼Œæ ¹æ®å¯è¡Œçš„åŠ¨ä½œæ‰©å±•ä¸€å±‚èŠ‚ç‚¹ï¼Œé€‰æ‹©ä¸€ä¸ªæœªè¢«è®¿é—®çš„å­èŠ‚ç‚¹ã€‚</li><li><strong>æ¨¡æ‹Ÿï¼ˆSimulationï¼‰ï¼š</strong>ä»æ‰©å±•çš„èŠ‚ç‚¹å¼€å§‹ï¼Œä½¿ç”¨éšæœºç­–ç•¥æˆ–å¯å‘å¼æ–¹æ³•æ¨¡æ‹Ÿè‹¥å¹²æ­¥ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªç»ˆæ­¢çŠ¶æ€ï¼Œå¾—åˆ°ä¸€ä¸ªæ¨¡æ‹Ÿçš„ç»“æœã€‚</li><li><strong>åå‘ä¼ æ’­ï¼ˆBackpropagationï¼‰ï¼š</strong>å°†æ¨¡æ‹Ÿç»“æœåå‘ä¼ æ’­åˆ°é€‰æ‹©çš„è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ›´æ–°å®ƒä»¬çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œè®¿é—®æ¬¡æ•°å’Œç´¯ç§¯å¥–åŠ±ï¼‰ï¼Œä»¥å¸®åŠ©æ›´å¥½åœ°ä¼°è®¡èŠ‚ç‚¹çš„ä»·å€¼ã€‚</li></ol><p>è¿™å››ä¸ªé˜¶æ®µä¸æ–­è¿­ä»£æ‰§è¡Œï¼Œç›´åˆ°åˆ†é…ç»™æœç´¢çš„è®¡ç®—æ—¶é—´è¾¾åˆ°é¢„å®šçš„é™åˆ¶ã€‚æœ€ç»ˆï¼Œæ ¹æ®èŠ‚ç‚¹çš„ç»Ÿè®¡ä¿¡æ¯é€‰æ‹©ä¸€ä¸ªæœ€æœ‰å¸Œæœ›çš„å†³ç­–ã€‚</p><p>MCTS çš„ä¸€ä¸ªå…¸å‹åº”ç”¨æ˜¯åœ¨æ£‹ç±»æ¸¸æˆä¸­ï¼Œå¦‚AlphaGoå°±ä½¿ç”¨äº†å˜ç§çš„ MCTSç®—æ³•ã€‚ç„¶è€Œï¼ŒMCTS ä¹Ÿå¯ä»¥åº”ç”¨äºå…¶ä»–é¢†åŸŸï¼Œå¦‚è§„åˆ’é—®é¢˜å’Œå†³ç­–é—®é¢˜ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733122496590-7c53504c-8501-4f5f-8d4e-4b96a3e4c1cc.png"></p><h2 id="alphago-zeroçš„çŠ¶æ€"><font style="color:rgb(77, 77, 77);">AlphaGozeroçš„çŠ¶æ€</font></h2><p><font style="color:rgb(77, 77, 77);">19 x 19 x 17 stack</font></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733122536989-fcca24af-d85a-4c8b-9fbc-232d9354e197.png"></p><p>AlphaGo 2016 ç‰ˆæœ¬ä½¿ç”¨ 19 Ã— 19 Ã— 48 çš„å¼ é‡ (tensor)è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ã€‚AlphaGo Zero ä½¿ç”¨ 19 Ã— 19 Ã— 17çš„å¼ é‡è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ã€‚æœ¬ä¹¦åªè§£é‡Šåè€…ï¼›è§å›¾ 18.1ã€‚ä¸‹é¢è§£é‡Š 19 Ã— 19 Ã— 17çš„çŠ¶æ€å¼ é‡çš„æ„ä¹‰ã€‚</p><ul><li>å¼ é‡æ¯ä¸ªåˆ‡ç‰‡(slice)æ˜¯ 19Ã—19 çš„çŸ©é˜µï¼Œå¯¹åº” 19 Ã— 19 çš„æ£‹ç›˜ã€‚ä¸€ä¸ª 19Ã—19çš„çŸ©é˜µå¯ä»¥è¡¨ç¤ºæ£‹ç›˜ä¸Šæ‰€æœ‰é»‘å­çš„ä½ç½®ã€‚å¦‚æœä¸€ä¸ªä½ç½®ä¸Šæœ‰é»‘å­ï¼ŒçŸ©é˜µå¯¹åº”çš„å…ƒç´ å°±æ˜¯1,å¦åˆ™å°±æ˜¯ 0ã€‚åŒæ ·çš„é“ç†ï¼Œç”¨ä¸€ä¸ª 19Ã—19 çš„çŸ©é˜µæ¥è¡¨ç¤ºå½“å‰æ£‹ç›˜ä¸Šæ‰€æœ‰ç™½å­çš„ä½ç½®ã€‚</li><li>å¼ é‡ä¸­ä¸€å…±æœ‰ 17 ä¸ªè¿™æ ·çš„çŸ©é˜µï¼›17 æ˜¯è¿™æ ·å¾—æ¥çš„ã€‚è®°å½•æœ€è¿‘8æ­¥æ£‹ç›˜ä¸Šé»‘å­çš„ä½ç½®ï¼Œéœ€è¦ 8 ä¸ªçŸ©é˜µã€‚åŒç†ï¼Œè¿˜éœ€è¦ 8ä¸ªçŸ©é˜µè®°å½•ç™½å­çš„ä½ç½®ã€‚è¿˜å¦å¤–éœ€è¦ä¸€ä¸ªçŸ©é˜µè¡¨ç¤ºè¯¥å“ªä¸€æ–¹ä¸‹æ£‹ï¼›å¦‚æœè¯¥ä¸‹é»‘å­ï¼Œé‚£ä¹ˆè¯¥çŸ©é˜µå…ƒç´ å…¨éƒ¨ç­‰äº1ï¼›å¦‚æœè¯¥ä¸‹ç™½å­ï¼Œé‚£ä¹ˆè¯¥çŸ©é˜µçš„å…ƒç´ å…¨éƒ½ç­‰äº0ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733122761265-81b27c27-7dfa-42d4-9a8e-0223a7980ef9.png"></p><p>ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\boldsymbol{\theta})\)</span>çš„ç»“æ„å¦‚å›¾18.2 æ‰€ç¤ºã€‚ç­–ç•¥ç½‘ç»œçš„è¾“å…¥æ˜¯ 19 Ã— 19 Ã— 17 çš„çŠ¶æ€ s ã€‚ ç­–ç•¥ç½‘ç»œçš„è¾“å‡ºæ˜¯361 ç»´çš„å‘é‡ f , å®ƒçš„æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªåŠ¨ä½œ(å³åœ¨æ£‹ç›˜ä¸Šä¸€ä¸ªä½ç½®æ”¾æ£‹å­)ã€‚å‘é‡ f æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ­£æ•°ï¼Œè€Œä¸”ç›¸åŠ ç­‰äº1ã€‚</p><p>AlphaGo è¿˜æœ‰ä¸€ä¸ªä»·å€¼ç½‘ç»œ<span class="math inline">\(v(s;w)\)</span>,å®ƒæ˜¯å¯¹çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(s)\)</span>çš„è¿‘ä¼¼ã€‚ä»·å€¼ç½‘ç»œçš„ç»“æ„å¦‚å›¾ 18.3æ‰€ç¤ºã€‚ä»·å€¼ç½‘ç»œçš„è¾“å…¥æ˜¯ 19Ã— 19Ã— 17 çš„çŠ¶æ€ sã€‚ä»·å€¼ç½‘ç»œçš„è¾“å‡ºæ˜¯ä¸€ä¸ªå®æ•°ï¼Œå®ƒçš„å¤§å°è¯„ä»·å½“å‰çŠ¶æ€ s çš„å¥½å</p><p>ç­–ç•¥ç½‘ç»œå’Œä»·å€¼çš„è¾“å…¥ç›¸åŒï¼Œéƒ½æ˜¯çŠ¶æ€ sã€‚å®ƒä»¬éƒ½ç”¨å¤šä¸ªå·ç§¯å±‚æŠŠ sæ˜ å°„åˆ°ç‰¹å¾å‘é‡ã€‚å› æ­¤å¯ä»¥è®©ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œå…±ç”¨å·ç§¯å±‚ã€‚è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œçš„æ–¹æ³•åœ¨ä¹‹åè§£é‡Šã€‚</p><h2 id="initialize-policy-network-by-behavior-cloning">Initialize PolicyNetwork by Behavior Cloning</h2><p>ä»äººçš„è®°å½•ä¸­å­¦ä¹ </p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733123168117-7f8f4d70-03de-4cc1-ae16-118e7f3ade5c.png"></p><p>ç”¨åˆ°çš„æ˜¯behaviorcloningï¼Œè¿™ä¸æ˜¯å¼ºåŒ–å­¦ä¹ ï¼Œè¿™æ˜¯æ¨¡ä»¿å­¦ä¹ ã€‚æ¨¡ä»¿å­¦ä¹ æ²¡æœ‰rewardã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733123416559-2c244024-c94b-4ba4-a7b9-7c78b22248e1.png"></p><p>ç”¨æ£‹ç›˜ä¸Šçš„åŠ¨ä½œæ¥çœ‹behaviorcloningï¼šå°±æ˜¯å¤šåˆ†ç±»ï¼ˆ361ä¸ªåˆ†ç±»ï¼Œå…·ä½“æŒ‡çš„æ˜¯ä¸‹åœ¨æ£‹ç›˜çš„å“ªä¸ªä½ç½®ï¼‰ï¼ŒæŠŠäººç±»ç©å®¶çš„åŠ¨ä½œçœ‹ä½œæ˜¯groundtruthï¼ˆçœŸå®çš„æ ‡ç­¾ï¼‰</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733123482029-b1a7610a-35dd-46ef-86a8-67d308e48e31.png"></p><p>ä½†æ˜¯behavior cloningå­˜åœ¨ç¼ºé™·ï¼Œå®ƒçš„æ•ˆæœä¸å¦‚å¼ºåŒ–å­¦ä¹ ã€‚</p><p>ä¸‹é¢æ˜¯ChatGPTç»™å‡ºçš„ç­”æ¡ˆï¼š</p><p>æ˜¯çš„ï¼Œè¡Œä¸ºå…‹éš†ï¼ˆBehaviorCloningï¼‰è™½ç„¶åœ¨æŸäº›æƒ…å¢ƒä¸‹è¡¨ç°å¾—å¾ˆå¥½ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºé™·å’Œé™åˆ¶ï¼š</p><ol type="1"><li><strong>æ•°æ®åˆ†å¸ƒåå·®ï¼š</strong>è¡Œä¸ºå…‹éš†æ˜¯åŸºäºä¸“å®¶ç¤ºèŒƒæ•°æ®çš„å­¦ä¹ æ–¹æ³•ï¼Œå¦‚æœä¸“å®¶ç¤ºèŒƒçš„æ•°æ®ä¸èƒ½å……åˆ†è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼Œæ¨¡å‹åœ¨æœªè§è¿‡çš„æƒ…å†µä¸‹å¯èƒ½è¡¨ç°ä¸ä½³ã€‚æ¨¡å‹åªèƒ½å¤åˆ¶ç¤ºèŒƒçš„è¡Œä¸ºï¼Œè€Œä¸ä¸€å®šèƒ½å¤Ÿæ³›åŒ–åˆ°æœªçŸ¥æƒ…å†µã€‚</li><li><strong>é”™è¯¯ä¼ é€’ï¼š</strong>å¦‚æœä¸“å®¶ç¤ºèŒƒä¸­å­˜åœ¨é”™è¯¯çš„å†³ç­–æˆ–ä¸è‰¯ç­–ç•¥ï¼Œè¡Œä¸ºå…‹éš†æ¨¡å‹ä¹Ÿä¼šå­¦åˆ°è¿™äº›é”™è¯¯ã€‚æ¨¡å‹æ— æ³•çº æ­£ç¤ºèŒƒæ•°æ®ä¸­çš„é”™è¯¯ï¼Œè€Œæ˜¯ç®€å•åœ°å¤åˆ¶äº†è¿™äº›é”™è¯¯çš„å†³ç­–ã€‚</li><li><strong>ç¼ºä¹æ¢ç´¢ï¼š</strong>è¡Œä¸ºå…‹éš†ä¸å…·å¤‡ä¸»åŠ¨æ¢ç´¢æ–°çš„ç­–ç•¥çš„èƒ½åŠ›ã€‚å®ƒä»…ä»…å¤åˆ¶äº†ä¸“å®¶çš„è¡Œä¸ºï¼Œè€Œæ— æ³•åœ¨æœªçŸ¥ç¯å¢ƒä¸­è¿›è¡Œæ¢ç´¢å’Œå‘ç°æ›´å¥½çš„ç­–ç•¥ã€‚</li><li><strong>åˆ†å¸ƒå˜åŒ–æ•æ„Ÿï¼š</strong>å¦‚æœç¯å¢ƒçš„åˆ†å¸ƒå‘ç”Ÿå˜åŒ–ï¼Œè¡Œä¸ºå…‹éš†æ¨¡å‹å¯èƒ½ä¼šå¤±æ•ˆã€‚å®ƒå¯¹è®­ç»ƒæ—¶çš„æ•°æ®åˆ†å¸ƒæ•æ„Ÿï¼Œè€Œæ— æ³•é€‚åº”æ–°çš„åˆ†å¸ƒã€‚</li><li><strong>ç¼ºä¹ç†è§£ï¼š</strong>è¡Œä¸ºå…‹éš†æ¨¡å‹é€šå¸¸æ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œæ— æ³•ç†è§£å…¶å†…éƒ¨å†³ç­–è¿‡ç¨‹ã€‚è¿™åœ¨éœ€è¦è§£é‡Šå’Œç†è§£æ¨¡å‹è¡Œä¸ºçš„åœºæ™¯ä¸­å¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</li><li><strong>éœ€è¦å¤§é‡ä¸“å®¶ç¤ºèŒƒæ•°æ®ï¼š</strong>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¡Œä¸ºå…‹éš†éœ€è¦å¤§é‡çš„ä¸“å®¶ç¤ºèŒƒæ•°æ®æ‰èƒ½å­¦åˆ°é²æ£’çš„æ¨¡å‹ã€‚è¿™å¯èƒ½å¯¹äºä¸€äº›å¤æ‚ä»»åŠ¡æ¥è¯´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå› ä¸ºè·å–ä¸“å®¶ç¤ºèŒƒæ•°æ®å¯èƒ½å¾ˆæ˜‚è´µæˆ–å›°éš¾ã€‚</li></ol><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…ä»¬æå‡ºäº†è®¸å¤šæ”¹è¿›æ–¹æ³•ï¼Œå¦‚ç»“åˆå¼ºåŒ–å­¦ä¹ å’Œè‡ªæˆ‘å¯¹å¼ˆæ¥å¼•å…¥æ¢ç´¢ã€ä½¿ç”¨é€†å¼ºåŒ–å­¦ä¹ æ¥æ›´å¥½åœ°ç†è§£ä»»åŠ¡ç›®æ ‡ç­‰ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å­¦ä¹ æ–¹æ³•å–å†³äºå…·ä½“é—®é¢˜çš„ç‰¹æ€§å’Œéœ€æ±‚ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733123697170-9a9cef05-cb15-44c7-9c23-b3cf751c85c8.png"></p><h2 id="train-policy-network-using-policy-gradient">Train Policy NetworkUsing Policy Gradient</h2><p>å…·ä½“æ€ä¹ˆç”¨å¼ºåŒ–å­¦ä¹ æ¥è®­ç»ƒç­–ç•¥ç½‘ç»œå‘¢ï¼ŸAlphaGoè®©ä¸¤ä¸ªç­–ç•¥ç½‘ç»œè¿›è¡Œåšå¼ˆï¼Œä¸€ä¸ªå«åšPlayerï¼Œå¦ä¸€ä¸ªå«åšOpponentã€‚</p><p>Playeræ˜¯agentï¼Œå®ƒæ˜¯ç”±ç­–ç•¥ç½‘ç»œæ¥æ§åˆ¶çš„ï¼Œç”¨çš„æ˜¯ç­–ç•¥ç½‘ç»œæœ€æ–°çš„æ¨¡å‹å‚æ•°ï¼ˆæ¯ä¸‹å®Œä¸€å±€å›´æ£‹æŠŠèƒœè´Ÿä½œä¸ºå¥–åŠ±ï¼Œé å¥–åŠ±æ¥æ›´æ–°playerçš„å‚æ•°ï¼‰</p><p>Opponentç›¸å½“äºenvironmentï¼Œå®ƒè´Ÿè´£é™ªç©ï¼ˆplayerä¸‹ä¸€æ­¥æ£‹ï¼Œopponentè·Ÿç€ä¸‹ä¸€æ­¥ï¼‰ï¼Œå®ƒä¹Ÿæ˜¯ç”¨ç­–ç•¥ç½‘ç»œæ¥æ§åˆ¶çš„ï¼Œä½†æ˜¯opponentçš„å‚æ•°æ— éœ€å­¦ä¹ ï¼Œéšæœºä»æ—§çš„ç­–ç•¥ç½‘ç»œçš„å‚æ•°ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªå³å¯ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733123885302-ccb59f3b-6e07-4248-9d6e-399be3d00311.png"></p><p>è®©â€œç©å®¶â€å’Œâ€œå¯¹æ‰‹â€åšå¼ˆï¼Œå°†ä¸€å±€æ¸¸æˆè¿›è¡Œåˆ°åº•ï¼Œå‡è®¾èµ°äº†<span class="math inline">\(n\)</span>æ­¥ã€‚æ¸¸æˆæ²¡ç»“æŸçš„æ—¶å€™ï¼Œå¥–åŠ±å…¨éƒ½æ˜¯é›¶ï¼š<span class="math inline">\(r_1 = r_2 = \cdots = r_{n-1} = 0\)</span>.</p><p>æ¸¸æˆç»“æŸçš„æ—¶å€™ï¼Œå¦‚æœâ€œç©å®¶â€èµ¢äº†ï¼Œå¥–åŠ±æ˜¯<span class="math inline">\(r_n= +1\)</span>ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å›æŠ¥éƒ½æ˜¯ +1:<span class="math inline">\(u_1 =u_2 = \cdots = u_n = +1\)</span>.</p><p>å¦‚æœâ€œç©å®¶â€è¾“äº†ï¼Œå¥–åŠ±æ˜¯<span class="math inline">\(r_n =-1\)</span>ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å›æŠ¥éƒ½æ˜¯ -1:<span class="math inline">\(u_1 = u_2= \cdots = u_n = -1\)</span>.</p><p>æ‰€æœ‰<span class="math inline">\(n\)</span>æ­¥éƒ½ç”¨åŒæ ·çš„å›æŠ¥ï¼Œè¿™ç›¸å½“äºä¸åŒºåˆ†å“ªä¸€æ­¥æ£‹èµ°å¾—å¥½ï¼Œå“ªä¸€æ­¥èµ°å¾—çƒ‚ï¼›åªè¦èµ¢äº†ï¼Œæ¯ä¸€æ­¥éƒ½è¢«è§†ä¸ºâ€œå¥½æ£‹â€, å‡å¦‚è¾“äº†ï¼Œæ¯ä¸€æ­¥éƒ½è¢«çœ‹æˆâ€œè‡­æ£‹â€ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733123986612-7353bfeb-3860-4610-bdda-18f32a61642a.png"></p><p>å›é¡¾ç­–ç•¥æ¢¯åº¦ï¼šç­–ç•¥æ¢¯åº¦æ˜¯çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V\)</span>å…³äº<span class="math inline">\(\theta\)</span>çš„å¯¼æ•°</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733124014380-6ac87f63-62a5-48ba-976f-932a6fa6dd78.png"></p><p>ä¸¤ä¸ªç­–ç•¥ç½‘ç»œç©æ¸¸æˆåˆ°ç»ˆå±€ï¼Œå¾—åˆ°æ¯ä¸ªæ—¶åˆ»çš„å›æŠ¥returnï¼Œç„¶åç”¨è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦æ›´æ–°ç­–ç•¥ç½‘ç»œã€‚</p><p>è¿™é‡Œåªæ›´æ–°ç­–ç•¥ç½‘ç»œplayerçš„å‚æ•°ï¼Œæ— éœ€æ›´æ–°ç­–ç•¥ç½‘ç»œopponentçš„å‚æ•°ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733124096680-565c66db-63e4-4c4b-8214-11c3f455daa5.png"></p><p>ç­–ç•¥ç½‘ç»œçš„æ–¹æ³•è¿˜ä¸å¤Ÿå¥½ï¼Œéœ€è¦ç”¨åˆ°åé¢çš„è’™ç‰¹å¡æ´›æ ‘æœç´¢ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733124241034-4ffb9182-f48e-42f0-881e-9f89924b618d.png"></p><p>ä¸ºäº†ä»‹ç»è’™ç‰¹å¡æ´›æ ‘æœç´¢ï¼Œå…ˆä»‹ç»ä»·å€¼ç½‘ç»œã€‚</p><h2 id="train-the-value-network">Train the Value Network</h2><p>è¿™é‡Œçš„ä»·å€¼ç½‘ç»œæ˜¯å¯¹çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V\)</span>çš„è¿‘ä¼¼ï¼Œä¸æ˜¯<span class="math inline">\(Q\)</span>çš„è¿‘ä¼¼</p><p>ç”¨ç¥ç»ç½‘ç»œè¿‘ä¼¼çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œç”¨æ¥è¯„ä¼°å½“å‰å½¢åŠ¿çš„å¥½åï¼Œèƒœç®—æœ‰å¤šå¤§ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733124303703-d7f87ab8-d272-4955-86c1-670dc247fbe3.png"></p><p>AlphaGo Zeroä¸­è®©ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>å’Œä»·å€¼ç½‘ç»œ<span class="math inline">\(v\)</span>å…±äº«å‰é¢çš„å·ç§¯å±‚ã€‚</p><p>ç­–ç•¥ç½‘ç»œçš„è¾“å‡ºæ˜¯361ä¸ªæ¦‚ç‡å€¼ï¼Œæ¯ä¸ªå€¼ä»£è¡¨ä¸€ä¸ªåŠ¨ä½œã€‚ç­–ç•¥ç½‘ç»œçš„è¾“å‡ºè¯´æ˜ä¸‹ä¸€æ­¥è¯¥å¦‚ä½•èµ°åŠ¨ã€‚</p><p>ä»·å€¼ç½‘ç»œçš„è¾“å‡ºæ˜¯1ä¸ªæ ‡é‡ï¼Œæ˜¯å¯¹å½“å‰çŠ¶æ€<span class="math inline">\(s\)</span>çš„æ‰“åˆ†ï¼Œåæ˜ å‡ºå½“å‰çŠ¶æ€çš„èƒœç®—æœ‰å¤šå¤§ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733124405946-902e1d04-7e5b-4c4c-9a78-bd60e380c157.png"></p><p>ç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œæ˜¯åˆ†åˆ«è®­ç»ƒçš„ï¼Œä¸æ˜¯åŒæ—¶è®­ç»ƒçš„ã€‚é¦–å…ˆè®­ç»ƒç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>ï¼Œç„¶åè®­ç»ƒä»·å€¼ç½‘ç»œ<span class="math inline">\(v\)</span>ã€‚åè€…éœ€è¦å‰è€…çš„å¸®åŠ©ã€‚è¿™ä¸ç®—actor-criticæ–¹æ³•ï¼Œå› ä¸ºacæ–¹æ³•æ˜¯åŒæ—¶è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œã€‚</p><p>ä»·å€¼ç½‘ç»œæ˜¯è¿™æ ·è®­ç»ƒçš„ï¼šè®©ä¸¤ä¸ªç­–ç•¥ç½‘ç»œåšå¼ˆï¼Œæ¯ä¸‹å®Œä¸€å±€ï¼Œæ›´æ–°ä¸€æ¬¡ä»·å€¼ç½‘ç»œã€‚ä»·å€¼ç½‘ç»œçš„å­¦ä¹ æ˜¯ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œè®©é¢„æµ‹å€¼<span class="math inline">\(v\)</span>å’Œè§‚æµ‹å€¼<span class="math inline">\(u_t\)</span>å°½å¯èƒ½æ¥è¿‘ï¼Œç”¨éšæœºæ¢¯åº¦ä¸‹é™æ›´æ–°ä»·å€¼ç½‘ç»œçš„å‚æ•°ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733124957443-ffae2865-d79a-4170-b666-de7a85fa22f5.png"></p><h2 id="monte-carlo-tree-searchmcst">Monte Carlo Tree Search(MCST)</h2><p>ä¹‹å‰è®­ç»ƒç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œçš„ç›®çš„æ˜¯å¸®åŠ©è’™ç‰¹å¡æ´›æ ‘æœç´¢</p><p>å›å¿†ä¸€ä¸‹é«˜æ‰‹ä¸‹å›´æ£‹ï¼Œéœ€è¦å‘å‰çœ‹å¥½å¤šæ­¥ï¼Œçœ‹çœ‹å„ç§å¯èƒ½çš„ç»“æœï¼Œç„¶ååšå†³ç­–ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733125115904-1045855a-1ab3-4663-98d7-e3b5e5497fa0.png"></p><p>æœç´¢æœªæ¥å¯èƒ½å‘ç”Ÿçš„çŠ¶æ€ï¼Œä»ä¸­é€‰å‡ºä¸€ä¸ªèƒœç®—æœ€å¤§çš„ã€‚</p><p>è’™ç‰¹å¡æ´›æ ‘æœç´¢çš„ä¸»è¦æ€æƒ³ï¼šé€‰æ‹©ä¸€ä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>ï¼ˆæŒ‰ç…§åŠ¨ä½œçš„å¥½åç¨‹åº¦é€‰æ‹©ï¼ŒåŸºäºç­–ç•¥å‡½æ•°æ’é™¤ä¸å¥½çš„åŠ¨ä½œï¼‰ï¼Œç„¶åè®©ç­–ç•¥ç½‘ç»œè‡ªæˆ‘åšå¼ˆä¸€ç›´åˆ°æ¸¸æˆç»“æŸï¼Œçœ‹æ˜¯å¦èƒœåˆ©ï¼Œç„¶åæ ¹æ®èƒœè´Ÿå’Œä»·å€¼å‡½æ•°ä¸¤ä¸ªå› ç´ æ¥ç»™åŠ¨ä½œ<span class="math inline">\(a\)</span>æ‰“åˆ†ã€‚é‡å¤ä¸Šè¿°è¿‡ç¨‹å¾ˆå¤šæ¬¡ï¼Œæ‰€ä»¥æ¯ä¸ªåŠ¨ä½œéƒ½æœ‰å¾ˆå¤šåˆ†æ•°ï¼Œé€‰æ‹©ä¸€ä¸ªåˆ†æ•°æœ€é«˜çš„åŠ¨ä½œã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733125143034-b79a4a24-22bb-4e6b-b172-4f3211106648.png"></p><p>è’™ç‰¹å¡æ´›æ ‘æœç´¢æœ‰å¦‚ä¸‹4æ­¥ï¼šselectionï¼Œexpansionï¼Œevaluationï¼Œbackup</p><p>AlphaGoæ¯ä¸‹ä¸€ä¸ªæ£‹å­ï¼Œéƒ½è¦æŠŠè¿™å››æ­¥é‡å¤å¾ˆå¤šæ¬¡ã€‚</p><ol type="1"><li>selectionï¼šplayeræ‰§è¡ŒåŠ¨ä½œaï¼Œè¿™æ˜¯å‡æƒ³åŠ¨ä½œï¼Œä¸ä¼šå®é™…æ‰§è¡Œã€‚</li><li>expansionï¼šopponentä¹Ÿæ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œæ­¤æ—¶çŠ¶æ€æ›´æ–°ã€‚è¿™é‡Œä¹Ÿæ˜¯å‡æƒ³åŠ¨ä½œã€‚ä½¿ç”¨ç­–ç•¥ç½‘ç»œä½œä¸ºå‡æƒ³å¯¹æ‰‹ï¼Œä¸æ˜¯çœŸæ­£çš„å®é™…çš„å¯¹æ‰‹ã€‚</li><li>evaluationï¼šç»™ä¸Šè¿°é€‰æ‹©çš„åŠ¨ä½œaæ‰“åˆ†ï¼Œåˆ†æ•°æœ‰ä¸¤éƒ¨åˆ†æ„æˆï¼šä¸€æ˜¯ä»·å€¼ç½‘ç»œçš„æ‰“åˆ†vï¼Œå¦ä¸€ä¸ªæ˜¯æ¸¸æˆçš„ç»“æœï¼ˆç­–ç•¥ç½‘ç»œè‡ªæˆ‘åšå¼ˆåˆ°æ¸¸æˆç»“æŸï¼‰è·å¾—å¥–åŠ±rã€‚ä¸¤è€…çš„å¹³å‡å€¼ä½œä¸ºåˆ†æ•°ã€‚</li><li>backupï¼šåå‘ä¼ æ’­ï¼Œç”¨ä¸Šè¿°æ‰“åˆ†æ¥æ›´æ–°åŠ¨ä½œçš„åˆ†æ•°ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733127734885-ee76b526-bdcd-4f77-84e3-08603fbe2bc0.png"></p><h3 id="ç¬¬ä¸€æ­¥é€‰æ‹©selection">ç¬¬ä¸€æ­¥â€”â€”é€‰æ‹©(Selection)</h3><p>è§‚æµ‹æ£‹ç›˜ä¸Šå½“å‰çš„æ ¼å±€ï¼Œæ‰¾å‡ºæ‰€æœ‰ç©ºä½ï¼Œç„¶ååˆ¤æ–­å…¶ä¸­å“ªäº›ä½ç½®ç¬¦åˆå›´æ£‹è§„åˆ™ï¼›æ¯ä¸ªç¬¦åˆè§„åˆ™çš„ä½ç½®å¯¹åº”ä¸€ä¸ªå¯è¡Œçš„åŠ¨ä½œã€‚æ¯ä¸€æ­¥è‡³å°‘æœ‰å‡ åã€ç”šè‡³ä¸Šç™¾ä¸ªå¯è¡Œçš„åŠ¨ä½œï¼›å‡å¦‚æŒ¨ä¸ªæœç´¢å’Œè¯„ä¼°æ‰€æœ‰å¯è¡ŒåŠ¨ä½œï¼Œè®¡ç®—é‡ä¼šå¤§åˆ°æ— æ³•æ‰¿å—ã€‚è™½ç„¶æœ‰å‡ åã€ä¸Šç™¾ä¸ªå¯è¡ŒåŠ¨ä½œï¼Œå¥½åœ¨åªæœ‰å°‘æ•°å‡ ä¸ªåŠ¨ä½œæœ‰è¾ƒé«˜çš„èƒœç®—ã€‚ç¬¬ä¸€æ­¥â€”â€”é€‰æ‹©â€”â€”çš„ç›®çš„å°±æ˜¯æ‰¾å‡ºèƒœç®—è¾ƒé«˜çš„åŠ¨ä½œï¼Œåªæœç´¢è¿™äº›å¥½çš„åŠ¨ä½œï¼Œå¿½ç•¥æ‰å…¶ä»–çš„åŠ¨ä½œã€‚</p><p>å¦‚ä½•åˆ¤æ–­åŠ¨ä½œ<span class="math inline">\(a\)</span>çš„å¥½åå‘¢ï¼Ÿæœ‰ä¸¤ä¸ªæŒ‡æ ‡ï¼šç¬¬ä¸€ï¼ŒåŠ¨ä½œ<span class="math inline">\(a\)</span>çš„èƒœç‡ï¼›ç¬¬äºŒï¼Œç­–ç•¥ç½‘ç»œç»™åŠ¨ä½œ<span class="math inline">\(a\)</span>çš„è¯„åˆ†ï¼ˆæ¦‚ç‡å€¼ï¼‰ã€‚ç”¨ä¸‹é¢è¿™ä¸ªåˆ†å€¼è¯„ä»·<span class="math inline">\(a\)</span>çš„å¥½åï¼š</p><p><span class="math inline">\(\mathrm{score}(a) \triangleq Q(a) +\frac{\eta}{1+N(a)} \cdot \pi(a|s;\boldsymbol{\theta}).\quad{(18.1)}\)</span></p><p>æ­¤å¤„çš„<span class="math inline">\(\eta\)</span>æ˜¯ä¸ªéœ€è¦è°ƒçš„è¶…å‚æ•°ã€‚å…¬å¼ä¸­çš„<span class="math inline">\(N(a)\)</span>ã€<span class="math inline">\(Q(a)\)</span>çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><p>+<span class="math inline">\(N(a)\)</span>æ˜¯åŠ¨ä½œ<span class="math inline">\(a\)</span>å·²ç»è¢«è®¿é—®è¿‡çš„æ¬¡æ•°ã€‚åˆå§‹çš„æ—¶å€™ï¼Œå¯¹äºæ‰€æœ‰çš„<span class="math inline">\(a\)</span>,ä»¤<span class="math inline">\(N(a)\gets 0\)</span>ã€‚åŠ¨ä½œ<span class="math inline">\(a\)</span>æ¯è¢«é€‰ä¸­ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°±æŠŠ<span class="math inline">\(N(a)\)</span>åŠ ä¸€ï¼š<span class="math inline">\(N(a) \gets N(a) + 1\)</span>ã€‚ +<span class="math inline">\(Q(a)\)</span>æ˜¯ä¹‹å‰<span class="math inline">\(N(a)\)</span>æ¬¡æ¨¡æ‹Ÿç®—å‡ºæ¥çš„åŠ¨ä½œä»·å€¼ï¼Œä¸»è¦ç”±èƒœç‡å’Œä»·å€¼å‡½æ•°å†³å®šã€‚<span class="math inline">\(Q(a)\)</span>çš„åˆå§‹å€¼æ˜¯ 0; åŠ¨ä½œ<span class="math inline">\(a\)</span>æ¯è¢«é€‰ä¸­ä¸€æ¬¡ï¼Œå°±ä¼šæ›´æ–°ä¸€æ¬¡<span class="math inline">\(Q(a)\)</span>ï¼›åé¢ä¼šè¯¦è§£ã€‚</p><p>å¯ä»¥è¿™æ ·ç†è§£å…¬å¼ (18.1):</p><ul><li>å¦‚æœåŠ¨ä½œ<span class="math inline">\(a\)</span>è¿˜æ²¡è¢«é€‰ä¸­è¿‡ï¼Œé‚£ä¹ˆ<span class="math inline">\(Q(a)\)</span>å’Œ<span class="math inline">\(N(a)\)</span>éƒ½ç­‰äºé›¶ï¼Œå› æ­¤å¯å¾—<span class="math inline">\(\operatorname{score}(a) \propto\pi(a|s;\boldsymbol{\theta}),\)</span>ä¹Ÿå°±æ˜¯è¯´å®Œå…¨ç”±ç­–ç•¥ç½‘ç»œè¯„ä»·åŠ¨ä½œ<span class="math inline">\(a\)</span>çš„å¥½åã€‚</li><li>å¦‚æœåŠ¨ä½œ<span class="math inline">\(a\)</span>å·²ç»è¢«é€‰ä¸­è¿‡å¾ˆå¤šæ¬¡ï¼Œé‚£ä¹ˆ<span class="math inline">\(N(a)\)</span>å°±å¾ˆå¤§ï¼Œå¯¼è‡´ç­–ç•¥ç½‘ç»œåœ¨<span class="math inline">\(\operatorname{score}(a)\)</span>ä¸­çš„æƒé‡é™ä½ã€‚å½“<span class="math inline">\(N(a)\)</span>å¾ˆå¤§çš„æ—¶å€™ï¼Œæœ‰<span class="math inline">\(\operatorname{score}(a) \approxQ(a),\)</span>æ­¤æ—¶ä¸»è¦åŸºäº<span class="math inline">\(Q(a)\)</span>åˆ¤æ–­<span class="math inline">\(a\)</span>çš„å¥½åï¼Œè€Œç­–ç•¥ç½‘ç»œå·²ç»æ— å…³ç´§è¦ã€‚</li><li>ç³»æ•°<span class="math inline">\(\frac{1}{1+N(a)}\)</span>çš„å¦ä¸€ä¸ªä½œç”¨æ˜¯é¼“åŠ±æ¢ç´¢ï¼Œä¹Ÿå°±æ˜¯è®©è¢«é€‰ä¸­æ¬¡æ•°å°‘çš„åŠ¨ä½œæœ‰æ›´å¤šçš„æœºä¼šè¢«é€‰ä¸­ã€‚å‡å¦‚ä¸¤ä¸ªåŠ¨ä½œæœ‰ç›¸è¿‘çš„<span class="math inline">\(Q\)</span>åˆ†æ•°å’Œ<span class="math inline">\(\pi\)</span>åˆ†æ•°ï¼Œé‚£ä¹ˆè¢«é€‰ä¸­æ¬¡æ•°å°‘çš„åŠ¨ä½œçš„<span class="math inline">\(\operatorname{score}\)</span>ä¼šæ›´é«˜ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130349731-608a91d1-3179-4c1f-9149-11481b1ade28.png"></p><p>MCTS æ ¹æ®å…¬å¼ (18.1) ç®—å‡ºæ‰€æœ‰åŠ¨ä½œçš„åˆ†æ•°<span class="math inline">\(\operatorname{score}(a), \forall a\)</span>ã€‚MCTSé€‰æ‹©åˆ†æ•°æœ€é«˜çš„åŠ¨ä½œã€‚å›¾18.4 çš„ä¾‹å­ä¸­æœ‰3ä¸ªå¯è¡ŒåŠ¨ä½œï¼Œåˆ†æ•°åˆ†åˆ«ä¸º0.4ã€0.3ã€0.5ã€‚ç¬¬ä¸‰ä¸ªåŠ¨ä½œåˆ†æ•°æœ€é«˜ï¼Œä¼šè¢«é€‰ä¸­ï¼Œè¿™ä¸€è½®æ¨¡æ‹Ÿä¼šæ‰§è¡Œè¿™ä¸ªåŠ¨ä½œã€‚(åªæ˜¯åœ¨æ¨¡æ‹Ÿä¸­æ‰§è¡Œè€Œå·²ï¼Œä¸æ˜¯AlphaGo çœŸçš„èµ°ä¸€æ­¥æ£‹)ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130359339-30e1e4eb-d9d1-4161-a6b6-881b35dc5599.png"></p><h3 id="ç¬¬äºŒæ­¥æ‰©å±•-expansion">ç¬¬äºŒæ­¥â€”â€”æ‰©å±• (Expansion)</h3><p>æŠŠç¬¬ä¸€æ­¥é€‰ä¸­çš„åŠ¨ä½œè®°ä½œ<span class="math inline">\(a_t\)</span>ï¼Œå®ƒåªæ˜¯ä¸ªå‡æƒ³çš„åŠ¨ä½œï¼Œåªåœ¨â€œæ¨¡æ‹Ÿå™¨â€ä¸­æ‰§è¡Œï¼Œè€Œä¸æ˜¯AlphaGo çœŸæ­£æ‰§è¡Œçš„åŠ¨ä½œã€‚</p><p>AlphaGo éœ€è¦è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå‡å¦‚å®ƒæ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ï¼Œé‚£ä¹ˆå¯¹æ‰‹ä¼šæ‰§è¡Œä»€ä¹ˆåŠ¨ä½œå‘¢ï¼Ÿå¯¹æ‰‹è‚¯å®šä¸ä¼šæŠŠè‡ªå·±çš„æƒ³æ³•å‘Šè¯‰AlphaGo, é‚£ä¹ˆ AlphaGo åªèƒ½è‡ªå·±çŒœæµ‹å¯¹æ‰‹çš„åŠ¨ä½œã€‚AlphaGo å¯ä»¥â€œæ¨å·²åŠäººâ€:å¦‚æœ AlphaGo è®¤ä¸ºå‡ ä¸ªåŠ¨ä½œå¾ˆå¥½ï¼Œå¯¹æ‰‹ä¹Ÿä¼šè¿™ä¹ˆè®¤ä¸ºã€‚æ‰€ä»¥ AlphaGoç”¨ç­–ç•¥ç½‘ç»œæ¨¡æ‹Ÿå¯¹æ‰‹ï¼Œ æ ¹æ®ç­–ç•¥ç½‘ç»œéšæœºæŠ½æ ·ä¸€ä¸ªåŠ¨ä½œï¼š<span class="math inline">\(a_t&#39; \sim \pi(\cdot|s_t&#39;;\boldsymbol{\theta})\)</span>.</p><p>æ­¤å¤„çš„çŠ¶æ€<span class="math inline">\(s&#39;\)</span>æ˜¯ç«™åœ¨å¯¹æ‰‹çš„è§’åº¦è§‚æµ‹åˆ°çš„æ£‹ç›˜ä¸Šçš„æ ¼å±€ï¼ŒåŠ¨ä½œ<span class="math inline">\(a_t&#39;\)</span>æ˜¯ (å‡æƒ³) å¯¹æ‰‹é€‰æ‹©çš„åŠ¨ä½œã€‚</p><p>å›¾ 18.5 çš„ä¾‹å­ä¸­å¯¹æ‰‹æœ‰å››ç§å¯è¡ŒåŠ¨ä½œï¼ŒAlphaGoç”¨ç­–ç•¥ç½‘ç»œç®—å‡ºæ¯ä¸ªåŠ¨ä½œçš„æ¦‚ç‡å€¼ï¼Œç„¶åæ ¹æ®æ¦‚ç‡å€¼éšæœºæŠ½æ ·ä¸€ä¸ªå¯¹æ‰‹çš„åŠ¨ä½œï¼Œè®°ä½œ<span class="math inline">\(a_t&#39;\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130369357-69dd4530-4e0d-43fc-a40b-740f8410052b.png"></p><p>å‡è®¾æ ¹æ®æ¦‚ç‡å€¼ 0.1,0.3,0.2, 0.4 åšéšæœºæŠ½æ ·ï¼Œé€‰ä¸­ç¬¬äºŒç§åŠ¨ä½œï¼›è§å›¾18.6ã€‚ä» AlphaGo çš„è§’åº¦æ¥çœ‹ï¼Œå¯¹æ‰‹çš„åŠ¨ä½œå°±æ˜¯AlphaGo æ–°çš„çŠ¶æ€ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130390456-2c790d49-1bd5-4a41-8b57-f476bba3e6e6.png"></p><p>AlphaGoéœ€è¦åœ¨æ¨¡æ‹Ÿä¸­è·Ÿå¯¹æ‰‹å°†ä¸€å±€æ¸¸æˆè¿›è¡Œä¸‹å»ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ¨¡æ‹Ÿå™¨(å³ç¯å¢ƒ)ã€‚åœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼ŒAlphaGoæ¯æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œ<span class="math inline">\(a_k\)</span>ï¼Œæ¨¡æ‹Ÿå™¨å°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€<span class="math inline">\(s_{k+1}\)</span>ã€‚æƒ³è¦æ­å»ºä¸€ä¸ªå¥½çš„æ¨¡æ‹Ÿå™¨ï¼Œå…³é”®åœ¨äºä½¿ç”¨æ­£ç¡®çš„çŠ¶æ€è½¬ç§»å‡½æ•°<span class="math inline">\(p(s_{k+1}|s_k,a_k);\)</span>ã€‚å¦‚æœçŠ¶æ€è½¬ç§»å‡½æ•°ä¸äº‹å®åç¦»å¤ªè¿œï¼Œé‚£ä¹ˆç”¨æ¨¡æ‹Ÿå™¨åšMCTS æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚</p><p>AlphaGo æ¨¡æ‹Ÿå™¨åˆ©ç”¨äº†å›´æ£‹æ¸¸æˆçš„å¯¹ç§°æ€§ï¼šAlphaGoçš„ç­–ç•¥ï¼Œåœ¨å¯¹æ‰‹çœ‹æ¥æ˜¯çŠ¶æ€è½¬ç§»å‡½æ•°ï¼›å¯¹æ‰‹çš„ç­–ç•¥ï¼Œåœ¨ AlphaGoçœ‹æ¥æ˜¯çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ¨¡æ‹Ÿå™¨çš„çŠ¶æ€è½¬ç§»å‡½æ•°æ˜¯å¯¹æ‰‹çš„çœŸå®ç­–ç•¥ï¼›ç„¶è€ŒAlphaGo å¹¶ä¸çŸ¥é“å¯¹æ‰‹çš„çœŸå®ç­–ç•¥ã€‚AlphaGo é€€è€Œæ±‚å…¶æ¬¡ï¼Œç”¨ AlphaGoè‡ªå·±è®­ç»ƒå‡ºçš„ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>ä»£æ›¿å¯¹æ‰‹çš„ç­–ç•¥ï¼Œä½œä¸ºæ¨¡æ‹Ÿå™¨çš„çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚</p><p>æƒ³è¦ç”¨ MCTSåšå†³ç­–ï¼Œå¿…é¡»è¦æœ‰æ¨¡æ‹Ÿå™¨ï¼Œè€Œæ­å»ºæ¨¡æ‹Ÿå™¨çš„å…³é”®åœ¨äºæ„é€ æ­£ç¡®çš„çŠ¶æ€è½¬ç§»å‡½æ•°<span class="math inline">\(p(s_{k+1}|s_k,a_k)\)</span>ã€‚ä»æ­å»ºæ¨¡æ‹Ÿå™¨çš„è§’åº¦æ¥çœ‹ï¼Œå›´æ£‹æ˜¯éå¸¸ç®€å•çš„é—®é¢˜ï¼šç”±äºå›´æ£‹çš„å¯¹ç§°æ€§ï¼Œå¯ä»¥ç”¨ç­–ç•¥ç½‘ç»œä½œä¸ºçŠ¶æ€è½¬ç§»å‡½æ•°ã€‚ä½†æ˜¯å¯¹äºå¤§å¤šæ•°çš„å®é™…é—®é¢˜ï¼Œæ„é€ çŠ¶æ€è½¬ç§»å‡½æ•°æ˜¯éå¸¸å›°éš¾çš„ã€‚æ¯”å¦‚æœºå™¨äººã€æ— äººè½¦ç­‰åº”ç”¨ï¼ŒçŠ¶æ€è½¬ç§»çš„æ„é€ éœ€è¦ç‰©ç†æ¨¡å‹ï¼Œè¦è€ƒè™‘åˆ°åŠ›ã€è¿åŠ¨ã€ä»¥åŠå¤–éƒ¨ä¸–ç•Œçš„å¹²æ‰°ã€‚å¦‚æœç‰©ç†æ¨¡å‹ä¸å¤Ÿå‡†ç¡®ï¼Œå¯¼è‡´çŠ¶æ€è½¬ç§»å‡½æ•°åç¦»äº‹å®å¤ªè¿œï¼Œé‚£ä¹ˆMCTS çš„æ¨¡æ‹Ÿç»“æœå°±ä¸å¯é ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130412531-447db396-ad87-43a1-ba86-a194aad31cf4.png"></p><h3 id="ç¬¬ä¸‰æ­¥ä¸€ä¸€æ±‚å€¼-evaluation">ç¬¬ä¸‰æ­¥ä¸€ä¸€æ±‚å€¼ (Evaluation)</h3><p>ä»çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>å¼€å§‹ï¼ŒåŒæ–¹éƒ½ç”¨ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>åšå†³ç­–ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­äº¤æ›¿è½å­ï¼Œç›´åˆ°åˆ†å‡ºèƒœè´Ÿï¼›è§å›¾18.7ã€‚AlphaGo åŸºäºçŠ¶æ€<span class="math inline">\(s_k\)</span>ï¼Œæ ¹æ®ç­–ç•¥ç½‘ç»œæŠ½æ ·å¾—åˆ°åŠ¨ä½œ</p><p><span class="math inline">\(a_k \sim\pi(\cdot|s_k;\boldsymbol{\theta})\)</span>.</p><p>å¯¹æ‰‹åŸºäºçŠ¶æ€<span class="math inline">\(s_k&#39;\)</span>ï¼ˆä»å¯¹æ‰‹è§’åº¦è§‚æµ‹åˆ°çš„æ£‹ç›˜ä¸Šçš„æ ¼å±€ï¼‰,æ ¹æ®ç­–ç•¥ç½‘ç»œæŠ½æ ·å¾—åˆ°åŠ¨ä½œ</p><p><span class="math inline">\(a_k&#39; \sim\pi(\cdot|s_k&#39;;\boldsymbol{\theta})\)</span>.</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130463388-82373845-cbad-46b5-a09f-8781db9b585f.png"></p><p>å½“è¿™å±€æ¸¸æˆç»“æŸæ—¶ï¼Œå¯ä»¥è§‚æµ‹åˆ°å¥–åŠ±ã€‚å¦‚æœ AlphaGo èƒœåˆ©ï¼Œåˆ™<span class="math inline">\(r=+1\)</span>ï¼Œå¦åˆ™<span class="math inline">\(r=-1\)</span>ã€‚</p><p>å›é¡¾ä¸€ä¸‹ï¼Œæ£‹ç›˜ä¸ŠçœŸå®çš„çŠ¶æ€æ˜¯<span class="math inline">\(s_t\)</span>ï¼ŒAlphaGo åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ï¼Œç„¶åæ¨¡æ‹Ÿå™¨ä¸­çš„å¯¹æ‰‹æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t&#39;\)</span>ï¼Œå¸¦æ¥æ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>è¶Šå¥½ï¼Œåˆ™è¿™å±€æ¸¸æˆèƒœç®—è¶Šå¤§ã€‚</p><ul><li>å¦‚æœ AlphaGo èµ¢å¾—è¿™å±€æ¨¡æ‹Ÿ<span class="math inline">\((r=+1)\)</span>ï¼Œåˆ™è¯´æ˜<span class="math inline">\(s_{t+1}\)</span>å¯èƒ½å¾ˆå¥½ï¼›å¦‚æœè¾“äº†<span class="math inline">\((r=-1)\)</span>ï¼Œä»¥åæ˜ å‡º<span class="math inline">\(s_{t+1}\)</span>çš„å¥½åã€‚</li><li>æ­¤å¤–ï¼Œè¿˜å¯ä»¥ç”¨ä»·å€¼ç½‘ç»œ<span class="math inline">\(v\)</span>è¯„ä»·çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>çš„å¥½åã€‚ä»·å€¼<span class="math inline">\(v(s_{t+1};w)\)</span>è¶Šå¤§ï¼Œåˆ™è¯´æ˜çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>è¶Šå¥½ã€‚</li></ul><p>å¥–åŠ±<span class="math inline">\(r\)</span>æ˜¯æ¨¡æ‹Ÿè·å¾—çš„èƒœè´Ÿï¼Œæ˜¯å¯¹<span class="math inline">\(s_{t+1}\)</span>å¾ˆå¯é çš„è¯„ä»·ï¼Œä½†æ˜¯éšæœºæ€§å¤ªå¤§ã€‚ä»·å€¼ç½‘ç»œçš„è¯„ä¼°<span class="math inline">\(v(s_{t+1};w)\)</span>æ²¡æœ‰<span class="math inline">\(r\)</span>å¯é ï¼Œä½†æ˜¯ä»·å€¼ç½‘ç»œæ›´ç¨³å®šã€éšæœºæ€§å°ã€‚AlphaGo çš„è§£å†³æ–¹æ¡ˆæ˜¯æŠŠå¥–åŠ±<span class="math inline">\(r\)</span>ä¸ä»·å€¼ç½‘ç»œçš„è¾“å‡º<span class="math inline">\(v(s_{t+1};w)\)</span>å–å¹³å‡ï¼Œè®°ä½œï¼š<span class="math inline">\(V(s_{t+1}) \triangleq \frac{r +v(s_{t+1};w)}{2},\)</span></p><p>æŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œä½œä¸ºå¯¹çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>çš„è¯„ä»·ã€‚</p><p>å®é™…å®ç°çš„æ—¶å€™ï¼ŒAlphaGoè¿˜è®­ç»ƒäº†ä¸€ä¸ªæ›´å°çš„ç¥ç»ç½‘ç»œï¼Œå®ƒåšå†³ç­–æ›´å¿«ã€‚MCTSåœ¨ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ç”¨å¤§çš„ç­–ç•¥ç½‘ç»œï¼Œç¬¬ä¸‰æ­¥ç”¨å°çš„ç­–ç•¥ç½‘ç»œã€‚è¯»è€…å¯èƒ½å¥½å¥‡ï¼Œä¸ºä»€ä¹ˆåœ¨ä¸”ä»…åœ¨ç¬¬ä¸‰æ­¥ç”¨å°çš„ç­–ç•¥ç½‘ç»œå‘¢ï¼Ÿç¬¬ä¸‰æ­¥ä¸¤ä¸ªç­–ç•¥ç½‘ç»œäº¤æ›¿è½å­ï¼Œé€šå¸¸è¦èµ°ä¸€ä¸¤ç™¾æ­¥ï¼Œå¯¼è‡´ç¬¬ä¸‰æ­¥æˆä¸ºMCTS çš„ç“¶é¢ˆã€‚ç”¨å°çš„ç­–ç•¥ç½‘ç»œä»£æ›¿å¤§çš„ç­–ç•¥ç½‘ç»œï¼Œå¯ä»¥å¤§å¹…åŠ é€Ÿ MCTSã€‚</p><p>è‡ªå·±å’Œå¯¹æ–¹äº¤æ›¿åšå†³ç­–ä¸‹æ£‹çš„è¿‡ç¨‹ç§°ä¸ºfast rolloutã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130533506-b6a9ef30-2409-4fa1-8598-ece3b9226d29.png"></p><p>é™¤äº†ç”¨å¥–åŠ±<span class="math inline">\(r\)</span>æ¥è¯„ä»·çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>,AlphaGoè¿˜ç”¨ä»·å€¼ç½‘ç»œ<span class="math inline">\(v\)</span>æ¥è¯„ä»·çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span></p><p>ä¸¤è€…å–å¹³å‡ï¼Œä½œä¸º<span class="math inline">\(s_{t+1}\)</span>çš„åˆ†æ•°ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130551144-a13751f1-6aa7-4001-8800-b4f118dbd3a3.png"></p><h3 id="ç¬¬å››æ­¥ä¸€ä¸€å›æº¯-backup">ç¬¬å››æ­¥ä¸€ä¸€å›æº¯ (Backup)</h3><p>ç¬¬ä¸‰æ­¥ä¸€ä¸€æ±‚å€¼â€”â€”ç®—å‡ºäº†ç¬¬<span class="math inline">\(t+1\)</span>æ­¥æŸä¸€ä¸ªçŠ¶æ€çš„ä»·å€¼ï¼Œè®°ä½œ<span class="math inline">\(V(s_{t+1})\)</span>ï¼›æ¯ä¸€æ¬¡æ¨¡æ‹Ÿéƒ½ä¼šå¾—å‡ºè¿™æ ·ä¸€ä¸ªä»·å€¼ï¼Œå¹¶ä¸”è®°å½•ä¸‹æ¥ã€‚æ¨¡æ‹Ÿä¼šé‡å¤å¾ˆå¤šæ¬¡ï¼Œäºæ˜¯ç¬¬<span class="math inline">\(t+1\)</span>æ­¥æ¯ä¸€ç§çŠ¶æ€ä¸‹é¢å¯ä»¥æœ‰å¤šæ¡è®°å½•ï¼›å¦‚å›¾18.8 æ‰€ç¤ºã€‚ç¬¬<span class="math inline">\(t\)</span>æ­¥çš„åŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¸‹é¢æœ‰å¤šä¸ªå¯èƒ½çš„çŠ¶æ€(å­èŠ‚ç‚¹),æ¯ä¸ªçŠ¶æ€ä¸‹é¢æœ‰è‹¥å¹²æ¡è®°å½•ã€‚æŠŠ<span class="math inline">\(a_t\)</span>ä¸‹é¢æ‰€æœ‰çš„è®°å½•å–å¹³å‡ï¼Œè®°ä½œä»·å€¼<span class="math inline">\(Q(a_t)\)</span>,å®ƒå¯ä»¥åæ˜ å‡ºåŠ¨ä½œ<span class="math inline">\(a_t\)</span>çš„å¥½åã€‚</p><p>åœ¨å›¾ 18.8 ä¸­ï¼Œ<span class="math inline">\(a_t\)</span>ä¸‹é¢ä¸€å…±æœ‰ 12æ¡è®°å½•ï¼Œ<span class="math inline">\(Q(a_t)\)</span>æ˜¯ 12æ¡è®°å½•çš„å‡å€¼ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130576870-15863743-16e0-4a1d-bd75-16e76f98a188.png"></p><p>ç»™å®šæ£‹ç›˜ä¸Šçš„çœŸå®çŠ¶æ€<span class="math inline">\(s_t\)</span>,æœ‰å¤šä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>å¯ä¾›é€‰æ‹©ã€‚å¯¹äºæ‰€æœ‰çš„<span class="math inline">\(a\)</span>,ä»·å€¼<span class="math inline">\(Q(a)\)</span>çš„åˆå§‹å€¼æ˜¯é›¶ã€‚åŠ¨ä½œ<span class="math inline">\(a\)</span>æ¯è¢«é€‰ä¸­ä¸€æ¬¡ (æˆä¸º<span class="math inline">\(a_t\)</span>),å®ƒä¸‹é¢å°±ä¼šå¤šä¸€æ¡è®°å½•ï¼Œæˆ‘ä»¬å°±å¯¹<span class="math inline">\(Q(a)\)</span>åšä¸€æ¬¡æ›´æ–°ã€‚</p><p>å›é¡¾ç¬¬ä¸€æ­¥â€”â€”é€‰æ‹© (Selection): åŸºäºæ£‹ç›˜ä¸ŠçœŸå®çš„çŠ¶æ€<span class="math inline">\(s_t\)</span>, MCTSéœ€è¦ä»å¯è¡Œçš„åŠ¨ä½œä¸­é€‰å‡ºä¸€ä¸ªï¼Œä½œä¸º<span class="math inline">\(a_t\)</span>ã€‚MCTS è®¡ç®—æ¯ä¸€ä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>çš„åˆ†æ•°ï¼š<span class="math inline">\(\mathrm{score}(a) \triangleq Q(a) +\frac{\eta}{1+N(a)} \cdot \pi(a|s;\boldsymbol{\theta}), \quad \foralla,\)</span></p><p>ç„¶åé€‰æ‹©åˆ†æ•°æœ€é«˜çš„<span class="math inline">\(a\)</span>ã€‚MCTSç®—å‡ºçš„<span class="math inline">\(Q(a)\)</span>çš„ç”¨é€”å°±æ˜¯è¿™é‡Œã€‚</p><p>ç¬¬å››æ­¥ï¼š</p><p>MCTSä¼šé‡å¤ä¸Šè¿°æ¨¡æ‹Ÿå¾ˆå¤šæ¬¡ï¼Œæ‰€ä»¥æ¯ä¸ªçŠ¶æ€ä¸‹éƒ½æœ‰å¾ˆå¤šæ¡è®°å½•ï¼Œæ¯ä¸ªåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¸‹é¢æœ‰å¾ˆå¤šå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥<span class="math inline">\(a_t\)</span>å¯¹åº”å¾ˆå¤šè®°å½•ï¼Œå°†<span class="math inline">\(a_t\)</span>ä¸‹é¢çš„æ‰€æœ‰è®°å½•åšå¹³å‡ä½œä¸º<span class="math inline">\(a_t\)</span>æ–°çš„ä»·å€¼<span class="math inline">\(Q(a_t)\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130656963-4b282a74-cd83-43ec-b817-709acf00ef23.png"></p><h3 id="decision-making-after-mcts">Decision Making after MCTS</h3><p>MCTS çš„å†³ç­–</p><p>ä¸Šé¢è®²è§£äº†å•æ¬¡æ¨¡æ‹Ÿçš„å››ä¸ªæ­¥éª¤ï¼Œæ³¨æ„ï¼Œè¿™åªæ˜¯å•æ¬¡æ¨¡æ‹Ÿè€Œå·²ã€‚MCTSæƒ³è¦çœŸæ­£åšå‡ºä¸€ä¸ªå†³ç­– (å³å¾€çœŸæ­£çš„æ£‹ç›˜ä¸Šè½ä¸€ä¸ªæ£‹å­),éœ€è¦åšæˆåƒä¸Šä¸‡æ¬¡æ¨¡æ‹Ÿã€‚åœ¨åšäº†æ— æ•°æ¬¡æ¨¡æ‹Ÿä¹‹åï¼ŒMCTS åšå‡ºçœŸæ­£çš„å†³ç­–ï¼š</p><p><span class="math inline">\(a_t = \operatorname{argmax}_aN(a).\)</span></p><p>æ­¤æ—¶ AlphaGo æ‰ä¼šçœŸæ­£å¾€æ£‹ç›˜ä¸Šæ”¾ä¸€ä¸ªæ£‹å­ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ä¾æ®<span class="math inline">\(N(a)\)</span>æ¥åšå†³ç­–å‘¢ï¼Ÿåœ¨æ¯ä¸€æ¬¡æ¨¡æ‹Ÿä¸­ï¼ŒMCTSæ‰¾å‡ºæ‰€æœ‰å¯è¡Œçš„åŠ¨ä½œ<span class="math inline">\(\{a\}\)</span>è®¡ç®—å®ƒä»¬çš„åˆ†æ•°<span class="math inline">\(\operatorname{score}(a)\)</span>,ç„¶åé€‰æ‹©å…¶ä¸­åˆ†æ•°æœ€é«˜çš„åŠ¨ä½œï¼Œç„¶ååœ¨æ¨¡æ‹Ÿå™¨é‡Œæ‰§è¡Œã€‚å¦‚æœæŸä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>åœ¨æ¨¡æ‹Ÿä¸­èƒœç‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå®ƒçš„ä»·å€¼<span class="math inline">\(Q(a)\)</span>å°±ä¼šå¾ˆå¤§ï¼Œå®ƒçš„åˆ†æ•°<span class="math inline">\(\operatorname{score}(a)\)</span>ä¼šå¾ˆé«˜ï¼šäºæ˜¯å®ƒè¢«é€‰ä¸­çš„å‡ ç‡å°±å¤§ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœæŸä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>å¾ˆå¥½ï¼Œå®ƒè¢«é€‰ä¸­çš„æ¬¡æ•°<span class="math inline">\(N(a)\)</span>å°±ä¼šå¤§ã€‚</p><p>è§‚æµ‹åˆ°æ£‹ç›˜ä¸Šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>, MCTSåšæˆåƒä¸Šä¸‡æ¬¡æ¨¡æ‹Ÿï¼Œè®°å½•æ¯ä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>è¢«é€‰ä¸­çš„æ¬¡æ•°<span class="math inline">\(N(a)\)</span>,æœ€ç»ˆåšå‡ºå†³ç­–<span class="math inline">\(a_t = \operatorname{argmax}_aN(a)\)</span>ã€‚åˆ°äº†ä¸‹ä¸€æ—¶åˆ»ï¼ŒçŠ¶æ€å˜æˆäº†<span class="math inline">\(s_{t+1}\)</span>, MCTS æŠŠæ‰€æœ‰åŠ¨ä½œ<span class="math inline">\(a\)</span>çš„<span class="math inline">\(Q(a)\)</span>ã€<span class="math inline">\(N(a)\)</span>å…¨éƒ½åˆå§‹åŒ–ä¸ºé›¶ï¼Œç„¶åä»å¤´å¼€å§‹åšæ¨¡æ‹Ÿï¼Œè€Œä¸èƒ½åˆ©ç”¨ä¸Šä¸€æ¬¡çš„ç»“æœã€‚</p><p>AlphaGo ä¸‹æ£‹éå¸¸â€œæš´åŠ›â€æ¯èµ°ä¸€æ­¥æ£‹ä¹‹å‰ï¼Œå®ƒå…ˆåœ¨â€œè„‘æµ·é‡Œâ€æ¨¡æ‹Ÿå‡ åƒã€å‡ ä¸‡å±€ã€å®ƒå¯ä»¥é¢„çŸ¥å®ƒæ¯ä¸€ç§åŠ¨ä½œå¸¦æ¥çš„åæœï¼Œå¯¹æ‰‹æœ€æœ‰å¯èƒ½åšå‡ºçš„ååº”éƒ½åœ¨AlphaGo çš„ç®—è®¡ä¹‹å†…ã€‚ç”±äºè®¡ç®—é‡å·®è·æ‚¬æ®Šï¼Œäººç±»é¢å¯¹ AlphaGoæ—¶ä¸å¤ªå¯èƒ½æœ‰èƒœç®—ã€‚è¿™æ ·çš„æ¯”èµ›å¯¹äººæ¥è¯´æ˜¯ä¸å…¬å¹³çš„ï¼›å‡å¦‚æä¸–çŸ³ä¸‹æ¯ä¸€é¢—æ£‹å­ä¹‹å‰ï¼Œå…ˆè·ŸæŸ¯æ´æ¨¡æ‹Ÿä¸€åƒå±€ï¼Œæˆ–è®¸æä¸–çŸ³çš„èƒœç®—ä¼šå¤§äºAlphaGoã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130752228-209ee0e7-e39e-4c23-8e89-4f6b930908bc.png"></p><h3 id="mcts-summary">MCTS: Summary</h3><p>MCTS 4æ­¥ï¼š</p><p>ç¬¬ä¸€ï¼Œselectionï¼Œæ ¹æ®åŠ¨ä½œçš„åˆ†æ•°ï¼Œé€‰å‡ºåˆ†æ•°æœ€é«˜çš„åŠ¨ä½œã€‚</p><p>ç¬¬äºŒï¼Œexpansionï¼Œç”¨ç­–ç•¥ç½‘ç»œæ¥æ¨¡æ‹Ÿå¯¹æ‰‹çš„åŠ¨ä½œï¼Œäº§ç”Ÿæ–°çš„çŠ¶æ€ã€‚</p><p>ç¬¬ä¸‰ï¼Œevaluationï¼Œé€šè¿‡è‡ªæˆ‘åšå¼ˆå’Œä»·å€¼ç½‘ç»œè¿™ä¸¤ä¸ªé€”å¾„ç®—å‡ºä¸¤ä¸ªåˆ†æ•°ï¼Œè®°å½•å®ƒä»¬çš„å¹³å‡å€¼ã€‚</p><p>ç¬¬å››ï¼Œbackupï¼Œç”¨ç¬¬ä¸‰æ­¥ç®—å‡ºæ¥çš„åˆ†æ•°æ¥æ›´æ–°è¿™ä¸ªåŠ¨ä½œçš„åˆ†æ•°ã€‚</p><p>AlphaGoæ¯èµ°ä¸€æ­¥ï¼Œéƒ½è¦è¿›è¡Œæˆåƒä¸Šä¸‡æ¬¡æ¨¡æ‹Ÿã€‚æ¯æ¬¡æ¨¡æ‹Ÿéƒ½è¦é‡å¤ä»¥ä¸Šå››æ­¥ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130891555-b108e708-121b-4a9b-9545-0d0bec4965c6.png"></p><h2 id="summary">Summary</h2><p>AlphaGoçš„è®­ç»ƒåˆ†ä¸‰æ­¥ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šç”¨behaviorcloningåˆæ­¥è®­ç»ƒä¸€ä¸ªç­–ç•¥ç½‘ç»œï¼Œè¿™ä¸€æ­¥è®­ç»ƒç”¨çš„æ˜¯16ä¸‡å±€æ¸¸æˆçš„æ£‹è°±ï¼Œè®©ç­–ç•¥ç½‘ç»œæ¥æ¨¡ä»¿äººç±»ç©å®¶çš„åŠ¨ä½œã€‚è¿™ä¸€æ­¥ä¹‹åç­–ç•¥ç½‘ç»œå¯ä»¥æ‰“è´¥ä¸šä½™ç©å®¶ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šç”¨ç­–ç•¥æ¢¯åº¦è¿›ä¸€æ­¥è®­ç»ƒç­–ç•¥ç½‘ç»œï¼ŒAlphaGoè®©ç­–ç•¥ç½‘ç»œåšè‡ªæˆ‘åšå¼ˆï¼Œç”¨æ¸¸æˆèƒœè´Ÿè¿™ä¸ªä¿¡æ¯æ¥æ›´æ–°ç­–ç•¥ç½‘ç»œï¼Œç»è¿‡è¿™ä¸ªæ­¥éª¤ï¼Œç­–ç•¥ç½‘ç»œçš„èƒ½åŠ›å˜å¾—æ›´å¼ºã€‚</p><p>ç¬¬ä¸‰æ­¥ï¼šè®­ç»ƒä¸€ä¸ªä»·å€¼ç½‘ç»œï¼Œç”¨æ¥è¯„ä¼°çŠ¶æ€çš„å¥½åã€‚è¿™ä¸€æ­¥è®©ç­–ç•¥ç½‘ç»œåšè‡ªæˆ‘åšå¼ˆï¼Œç”¨èƒœè´Ÿç»“æœä½œä¸ºtargetï¼Œè®©ä»·å€¼ç½‘ç»œæ¥æ‹Ÿåˆè¿™ä¸ªtargetã€‚è®­ç»ƒä»·å€¼ç½‘ç»œï¼Œå®é™…ä¸Šå°±æ˜¯åšå›å½’ï¼ˆregressionï¼‰ã€‚</p><p>è™½ç„¶å¯ä»¥ç”¨ç­–ç•¥ç½‘ç»œæ¥ä¸‹æ£‹ï¼Œä½†æ˜¯æ›´å¥½çš„åŠæ³•æ˜¯ç”¨è’™ç‰¹å¡æ´›æ ‘æœç´¢ã€‚AlphaGoæ¯èµ°ä¸€æ­¥éƒ½è¦åšæˆåƒä¸Šä¸‡æ¬¡æœç´¢ï¼Œè®¡ç®—æ¯ä¸€ä¸ªåŠ¨ä½œçš„èƒœç®—æœ‰å¤šå¤§ï¼Œç»™æ¯ä¸ªåŠ¨ä½œæ‰“åˆ†ï¼Œæœ€ç»ˆAlphaGoä¼šæ‰§è¡Œåˆ†æ•°æœ€é«˜çš„åŠ¨ä½œã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130904644-77e53fec-ebb2-4333-8449-d48bff8af9f3.png"></p><h1 id="alphago-zero">AlphaGo Zero</h1><p>AlphaGo Zeroå®ŒèƒœAlphaGoï¼Œå®ƒä¿©çš„åŒºåˆ«æœ‰ä¸¤ä¸ªï¼š</p><ul><li>AlphaGo Zeroæ²¡æœ‰åšbehavior cloningã€‚</li><li>AlphaGoZeroåœ¨è®­ç»ƒç­–ç•¥ç½‘ç»œçš„æ—¶å€™å°±ç”¨äº†è’™ç‰¹å¡æ´›æ ‘æœç´¢ï¼Œè®©ç­–ç•¥ç½‘ç»œæ¥æ¨¡ä»¿æœç´¢åšå‡ºæ¥çš„åŠ¨ä½œã€‚</li></ul><p>AlphaGoæ˜¯æ¨¡ä»¿äººç±»ç©å®¶ï¼ŒAlphaGo Zeroæ˜¯æ¨¡ä»¿è’™ç‰¹å¡æ´›æ ‘æœç´¢ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733130919135-bc604fa0-963f-42ee-87ff-1277b8be9563.png"></p><p>åœ¨å›´æ£‹æ¸¸æˆä¸­ï¼Œäººç±»ç»éªŒ(behavior cloning)æ˜¯æœ‰å®³çš„ï¼ˆæˆ–è€…è¯´ æ€§èƒ½æœ‰é™ï¼‰ã€‚</p><p>ä½†æ˜¯behaviorcloningè¿˜æ˜¯æœ‰ç”¨çš„å°¤å…¶æ˜¯ç‰©ç†ä¸–ç•Œçš„å®ä½“ï¼Œæ¯”å¦‚æ‰‹æœ¯æœºå™¨äººã€æ— äººé©¾é©¶æ±½è½¦ã€‚å…ˆå­¦ä¹ äººç±»ç»éªŒå†åšå¼ºåŒ–å­¦ä¹ ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733131079632-0ae0523e-7802-4b2e-89cc-fa5f9ab6bf2f.png"></p><p>AlphaGo Zeroæ˜¯å¦‚ä½•è®­ç»ƒç­–ç•¥ç½‘ç»œçš„ï¼šä½¿ç”¨MCTSã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-5-ALPHAGO/1733131200190-b8a7c3e2-516a-40b2-bd06-0ae32cd42fa2.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.4 Actor-Critic Method</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/</url>
    
    <content type="html"><![CDATA[<p>Actor-Criticæ–¹æ³•æŠŠä»·å€¼å­¦ä¹ å’Œç­–ç•¥å­¦ä¹ ç»“åˆèµ·æ¥ã€‚</p><h1 id="value-network-and-policy-network">Value Network and PolicyNetwork</h1><p>ç¦»æ•£çŠ¶æ€ä¸‹çŠ¶æ€ä»·å€¼å‡½æ•°å¯ä»¥å†™æˆï¼š</p><p><span class="math inline">\(V_{\pi}(s) = \sum_{a} \pi(a|s) \cdotQ_{\pi}(s,a).\)</span></p><p>ä½†æ˜¯å…¶ä¸­ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi(a|s)\)</span>å’ŒåŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>éƒ½ä¸çŸ¥é“ï¼Œå¯ä»¥åˆ†åˆ«ç”¨ä¸¤ä¸ªç¥ç»ç½‘ç»œè¿›è¡Œè¿‘ä¼¼ï¼Œè¿™ä¸¤ä¸ªç¥ç»ç½‘ç»œåˆ†åˆ«ç§°ä¸ºç­–ç•¥ç½‘ç»œå’Œä»·å€¼ç½‘ç»œï¼Œåœ¨è¡¨è¿°å½¢å¼ä¸Šé‡Œé¢åˆ†åˆ«æ·»åŠ äº†ä¸€ä¸ª<span class="math inline">\(\theta\)</span>å’Œ<span class="math inline">\(w\)</span>å‚æ•°ï¼Œè¡¨ç¤ºçš„æ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚</p><p>ç­–ç•¥ç½‘ç»œæ§åˆ¶agentè¿åŠ¨ï¼Œæ˜¯actorï¼Œç›¸å½“äºæ˜¯è¿åŠ¨å‘˜ï¼›ä»·å€¼ç½‘ç»œä¸æ§åˆ¶agentè¿åŠ¨ï¼Œå®ƒè´Ÿè´£ç»™agentæ‰“åˆ†ï¼Œæ˜¯criticï¼Œç›¸å½“äºè£åˆ¤ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/357ab1b7876184230ebc401afea086e2.png"></p><p>åˆ†åˆ«çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªç¥ç»ç½‘ç»œ</p><h2 id="ç­–ç•¥ç½‘ç»œactor">ç­–ç•¥ç½‘ç»œactor</h2><p>ç­–ç•¥ç½‘ç»œactorï¼Œå®ƒåªæœ‰ä¸€ä¸ªè¾“å…¥stateï¼Œè¾“å‡ºæ˜¯æ‰€æœ‰actionçš„æ¦‚ç‡åˆ†å¸ƒã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/ab4ce18b88d15879c28c88521cc23026.png"></p><h2 id="ä»·å€¼ç½‘ç»œcritic">ä»·å€¼ç½‘ç»œcritic</h2><p>ä»·å€¼ç½‘ç»œcriticï¼Œæœ‰ä¸¤ä¸ªè¾“å…¥ï¼Œåˆ†åˆ«æ˜¯stateå’Œactionï¼›è¾“å‡ºæ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œè¡¨ç¤ºçš„æ˜¯å¯¹actorçš„æ‰“åˆ†ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/dcab05ee32d8fd26d0829cd28943f4b3.png"></p><p>åŒæ—¶å­¦ä¹ ä¸€ä¸ªç­–ç•¥å’Œä¸€ä¸ªå€¼å‡½æ•°å°±æ˜¯actor-criticæ–¹æ³•ã€‚</p><h2 id="train-the-neural-networks">Train the Neural Networks</h2><p>è®­ç»ƒ<span class="math inline">\(\pi\)</span>ç½‘ç»œæ˜¯æé«˜actorçš„å¹³å‡åˆ†ï¼Œå³è®©çŠ¶æ€ä»·å€¼å‡½æ•°Vå‡½æ•°çš„å€¼æ›´å¤§ï¼›è®©ä»·å€¼ç½‘ç»œqæ¥å½“è£åˆ¤ï¼Œç»™actorçš„è¡¨ç°æ‰“åˆ†ï¼Œæ›´æ–°å®ƒçš„å‚æ•°<span class="math inline">\(w\)</span>æ˜¯ä¸ºäº†è®©å®ƒæ‰“åˆ†è¶Šæ¥è¶Šç²¾å‡†ã€‚é€šè¿‡ä¸¤ä¸ªç½‘ç»œï¼Œè®©è¿åŠ¨å‘˜çš„å¾—åˆ†è¶Šæ¥è¶Šé«˜ï¼Œè£åˆ¤çš„æ‰“åˆ†è¶Šæ¥è¶Šç²¾å‡†ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/79373a6cc0977b9519bccdc95d004948.png"></p><ul><li>é€šè¿‡ä»¥ä¸‹äº”ä¸ªæ­¥éª¤æ¥å¯¹<span class="math inline">\(\theta\)</span>å’Œ<span class="math inline">\(w\)</span>å‚æ•°è¿›è¡Œæ›´æ–°</li></ul><ol type="1"><li>Observe the state<span class="math inline">\(s_t\)</span>.</li><li>Randomly sample action<span class="math inline">\(\alpha_t\)</span>according to<span class="math inline">\(\pi(\cdot|s_t; \theta_t)\)</span>.</li><li>Perform<span class="math inline">\(a_t\)</span>and observe newstate<span class="math inline">\(s_{t+1}\)</span>and reward<span class="math inline">\(r_t\)</span>.</li><li>Update<span class="math inline">\(w\)</span>(in value network) usingtemporal difference (TD).</li><li>Update<span class="math inline">\(\theta\)</span>(in policy network)using policy gradient.</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/c4f09abd96d25ef0d054f54ddea0a703.png"></p><h2 id="update-value-network-q-using-td">Update value network q usingTD</h2><p>ä½¿ç”¨æ—¶é—´å·®åˆ†TDç®—æ³•æ›´æ–°ä»·å€¼ç½‘ç»œqï¼Œè®©è£åˆ¤æ‰“åˆ†æ›´å‡†</p><p>æŸå¤±å‡½æ•°æ˜¯é¢„æµ‹qå’Œtarget<span class="math inline">\(y_t\)</span>ä¹‹é—´å·®çš„å¹³æ–¹</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/f752868b84e9554039c20d217c52b74b.png"></p><ul><li>ä½¿ç”¨ç­–ç•¥æ¢¯åº¦ç®—æ³•æ›´æ–°ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>ï¼Œè®©è¿åŠ¨å‘˜å¾—åˆ†æ›´é«˜</li><li>ä¸‹å›¾ä¸­çš„Væ˜¯çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œç›¸å½“äºè¿åŠ¨å‘˜æ‰€æœ‰åŠ¨ä½œçš„å¹³å‡åˆ†</li><li>ç­–ç•¥æ¢¯åº¦æ˜¯çŠ¶æ€ä»·å€¼å‡½æ•°Vå…³äº<span class="math inline">\(\theta\)</span>çš„å¯¼æ•°</li><li>å®šä¹‰gæ˜¯<span class="math inline">\(\log \pi\)</span>å¯¹<span class="math inline">\(\theta\)</span>çš„å¯¼æ•°ä¹˜ä»¥qï¼Œè¿™é‡Œqæ˜¯è£åˆ¤çš„æ‰“åˆ†</li><li>ç­–ç•¥æ¢¯åº¦ç­‰äºå¯¹å‡½æ•°gæ±‚æœŸæœ›ï¼Œæ¶ˆæ‰åŠ¨ä½œAã€‚</li><li>gå‡½æ•°æ˜¯ç­–ç•¥æ¢¯åº¦çš„æ— åä¼°è®¡ï¼Œç”¨gå‡½æ•°ä»£æ›¿ç­–ç•¥æ¢¯åº¦</li><li>ç„¶åä½¿ç”¨éšæœºæ¢¯åº¦ä¸Šå‡ç®—æ³•æ¥æ›´æ–°<span class="math inline">\(\theta\)</span>çš„å€¼ã€‚</li></ul><h2 id="chatgptè¡¥å……æ¢¯åº¦çš„æ¦‚å¿µ">ChatGPTï¼šè¡¥å……æ¢¯åº¦çš„æ¦‚å¿µ</h2><p>åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ¢¯åº¦æ˜¯ä¸€ä¸ªå‘é‡ï¼Œè¡¨ç¤ºä¸€ä¸ªå¤šå…ƒå‡½æ•°åœ¨æŸä¸€ç‚¹ä¸Šçš„å˜åŒ–ç‡å’Œå˜åŒ–çš„æ–¹å‘ã€‚å¯¹äºä¸€ä¸ªå…·æœ‰å¤šä¸ªè¾“å…¥å˜é‡çš„å‡½æ•°ï¼Œæ¢¯åº¦ç»™å‡ºäº†è¯¥å‡½æ•°å¯¹æ¯ä¸ªè¾“å…¥å˜é‡çš„åå¯¼æ•°ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªå‡½æ•°<span class="math inline">\(f(x_1, x_2, \ldots,x_n)\)</span>ï¼Œå…¶æ¢¯åº¦è®°ä¸º<span class="math inline">\(\boldsymbol{\nabla}f\)</span>æˆ–è€…<span class="math inline">\(\frac{\partial f}{\partial\mathbf{x}}\)</span>ï¼Œå…¶ä¸­<span class="math inline">\(\boldsymbol{\nabla}\)</span>æ˜¯ nablaç¬¦å·ï¼Œè¡¨ç¤ºæ¢¯åº¦è¿ç®—ï¼Œ<span class="math inline">\(\mathbf{x} = [x_1, x_2,\ldots,x_n]\)</span>æ˜¯è¾“å…¥å˜é‡çš„å‘é‡ã€‚æ¢¯åº¦æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå…¶æ¯ä¸ªåˆ†é‡æ˜¯å‡½æ•°å¯¹ç›¸åº”è¾“å…¥å˜é‡çš„åå¯¼æ•°ã€‚</p><p><span class="math inline">\(\boldsymbol{\nabla} f = \left[\frac{\partial f}{\partial x_1}, \frac{\partial f}{\partial x_2},\ldots, \frac{\partial f}{\partial x_n} \right]\)</span></p><p>æ¢¯åº¦çš„æ–¹å‘æ˜¯å‡½æ•°åœ¨æŸä¸€ç‚¹ä¸Šå˜åŒ–æœ€å¿«çš„æ–¹å‘ï¼Œè€Œæ¢¯åº¦çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰è¡¨ç¤ºå˜åŒ–ç‡ã€‚å¦‚æœæ¢¯åº¦çš„æ¨¡è¾ƒå¤§ï¼Œæ„å‘³ç€å‡½æ•°åœ¨è¯¥ç‚¹çš„å˜åŒ–è¾ƒä¸ºå‰§çƒˆã€‚</p><p>åœ¨ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œæ¢¯åº¦çš„ä½¿ç”¨å¾ˆå¸¸è§ã€‚æ¢¯åº¦ä¸‹é™ç®—æ³•å°±æ˜¯ä¸€ç§åŸºäºæ¢¯åº¦çš„ä¼˜åŒ–æ–¹æ³•ï¼Œé€šè¿‡è¿­ä»£æ›´æ–°å‚æ•°ï¼Œä½¿å¾—ç›®æ ‡å‡½æ•°é€æ¸è¶‹å‘æœ€å°å€¼ã€‚æ¢¯åº¦ä¸Šå‡ç®—æ³•åˆ™æ˜¯ç±»ä¼¼çš„ä¼˜åŒ–æ–¹æ³•ï¼Œç”¨äºæœ€å¤§åŒ–ç›®æ ‡å‡½æ•°ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œæ¢¯åº¦æ˜¯ä¸€ä¸ªé‡è¦çš„æ•°å­¦æ¦‚å¿µï¼Œç‰¹åˆ«åœ¨ä¼˜åŒ–ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ç­‰é¢†åŸŸæœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</p><h2 id="æ•´ä¸ªactor-critic-methodçš„æ¡†å›¾">æ•´ä¸ªActor-CriticMethodçš„æ¡†å›¾</h2><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733107575622-b3e5250d-0863-48bd-9405-c11d59319d72.png"></p><p>æ•´ä¸ªç®—æ³•çš„æµç¨‹å…±æœ‰9æ­¥ï¼Œè¿™é‡Œæ˜¯å‰5æ­¥ï¼Œä¸»è¦å¤ä¹ ä»¥ä¸‹TD ç›®æ ‡ã€‚</p><p><span class="math inline">\(r_t + \gamma \cdot q_{t+1}\)</span>æ˜¯TDtargetï¼Œæ—¶é—´å·®åˆ†ç®—æ³•é‡Œé¢çš„ï¼ˆTDç›®æ ‡è¡¨ç¤ºäº†åœ¨å½“å‰æ—¶åˆ» tçš„å¥–åŠ±<span class="math inline">\(r_t\)</span>åŠ ä¸Šæœªæ¥å¥–åŠ±çš„æŠ˜æ‰£ã€‚è¿™ä¸ªç›®æ ‡è¢«ç”¨äºæ›´æ–°å€¼å‡½æ•°ï¼Œé€šè¿‡æ¯”è¾ƒå½“å‰å€¼å‡½æ•°çš„ä¼°è®¡å’Œè¿™ä¸ªç›®æ ‡ï¼Œå¯ä»¥è°ƒæ•´å€¼å‡½æ•°çš„å‚æ•°ä»¥é€æ¸æé«˜ä¼°è®¡çš„å‡†ç¡®æ€§ã€‚ï¼‰</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733107776026-ebb01c65-b6be-4681-bf0f-3844970b84f2.png"></p><p>Actor-Criticç®—æ³•æµç¨‹ï¼šæ›´æ–°ä»·å€¼ç½‘ç»œï¼ˆcriticï¼‰æ˜¯æ¢¯åº¦ä¸‹é™ï¼Œæ›´æ–°ç­–ç•¥ç½‘ç»œï¼ˆactorï¼‰æ˜¯æ¢¯åº¦ä¸Šå‡ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733107789868-990f159a-edee-4b7d-a9db-12cdecc2a019.png"></p><p>ä¸Šé¢ç¬¬9æ­¥ä¸­ç”¨<span class="math inline">\(q_t\)</span>æ›´æ–°ï¼Œä¹Ÿå¯ä»¥ç”¨<span class="math inline">\(\delta_t\)</span>æ¥æ›´æ–°ã€‚ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å¯¹çš„ã€‚</p><h2 id="summary">Summary</h2><h3 id="æ€»ç»“ä¸€ä¸‹actor-criticæ–¹æ³•ä¸­actorå’Œ-criticçš„ä½œç”¨">æ€»ç»“ä¸€ä¸‹Actor-Criticæ–¹æ³•ä¸­Actorå’ŒCriticçš„ä½œç”¨</h3><p>åœ¨è®­ç»ƒä¸­ï¼Œagentæ˜¯è¢«ç­–ç•¥ç½‘ç»œæ§åˆ¶çš„ï¼Œä»·å€¼ç½‘ç»œæ‰“åˆ†æä¾›åé¦ˆï¼›è®­ç»ƒåï¼Œagentè¿˜æ˜¯è¢«ç­–ç•¥ç½‘ç»œæ§åˆ¶ï¼Œä½†æ­¤æ—¶ä»·å€¼ç½‘ç»œï¼ˆcriticï¼‰å°±æ²¡ç”¨äº†ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733107801627-a4fccf87-3bf3-4921-a97e-cb88fa7f4113.png"></p><h3 id="æ€æ ·è®­ç»ƒä¸¤ä¸ªç½‘ç»œ">æ€æ ·è®­ç»ƒä¸¤ä¸ªç½‘ç»œï¼š</h3><p>ç­–ç•¥ç½‘ç»œæ˜¯ç­–ç•¥æ¢¯åº¦æ¥è®­ç»ƒã€‚ç”¨<strong>æ¢¯åº¦ä¸Šå‡</strong>ï¼Œè®©çŠ¶æ€ä»·å€¼å‡½æ•°Vçš„å€¼å¢åŠ ï¼Œè¿™å°±æ„å‘³ç€è¿åŠ¨å‘˜çš„å¹³å‡åˆ†æé«˜ã€‚</p><p>ä»·å€¼ç½‘ç»œæ˜¯ç”¨TDç®—æ³•æ¥è®­ç»ƒã€‚TDç®—æ³•è¦ç”¨åˆ°ä»·å€¼ç½‘ç»œçš„é¢„æµ‹<span class="math inline">\(q_t\)</span>ï¼ˆä»·å€¼ç½‘ç»œå¯¹æœŸæœ›å›æŠ¥çš„ä¼°è®¡ï¼‰ä»¥åŠTDtargetï¼ˆä¹Ÿæ˜¯å¯¹æœŸæœ›å›æŠ¥çš„ä¼°è®¡ï¼Œç”±äºå®ƒç”¨åˆ°çœŸå®çš„å¥–åŠ±<span class="math inline">\(r_t\)</span>,æ‰€ä»¥å®ƒçš„ä¼°è®¡æ¯”<span class="math inline">\(q_t\)</span>æ›´é è°±ï¼Œ<span class="math inline">\(y_t\)</span>ä½œä¸ºTDtargetï¼Œç›¸å½“äºç›‘ç£å­¦ä¹ ä¸­çš„æ ‡ç­¾ï¼‰ï¼Œå¯¹æŸå¤±å‡½æ•°å…³äºä»·å€¼ç½‘ç»œå‡½æ•°çš„å‚æ•°<span class="math inline">\(w\)</span>æ±‚å¯¼å¾—åˆ°æ¢¯åº¦ï¼Œç„¶åç”¨<strong>æ¢¯åº¦ä¸‹é™</strong>ï¼Œè®©ä¼°è®¡<span class="math inline">\(q_t\)</span>æ›´æ¥è¿‘TD target ä¹Ÿå°±æ˜¯<span class="math inline">\(y_t\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733113503811-82b20e6d-854f-48ca-9f66-2a13d1ce6803.png"></p><h3 id="ä¸ºä»€ä¹ˆç”¨æŸå¤±å‡½æ•°å¯¹wæ±‚å¯¼chatgptçš„å›ç­”">ä¸ºä»€ä¹ˆç”¨æŸå¤±å‡½æ•°å¯¹<span class="math inline">\(w\)</span>æ±‚å¯¼ï¼ŸChatGPTçš„å›ç­”ï¼š</h3><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œä½¿ç”¨æŸå¤±å‡½æ•°å¯¹æ¨¡å‹å‚æ•°ï¼ˆä¾‹å¦‚æƒé‡<span class="math inline">\(w\)</span>ï¼‰æ±‚å¯¼çš„ç›®çš„æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™æˆ–å…¶ä»–ä¼˜åŒ–ç®—æ³•æ¥æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œä»¥æœ€å°åŒ–æˆ–æœ€å¤§åŒ–æŸå¤±å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºæŸå¤±å‡½æ•°è¡¡é‡äº†æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„æ€§èƒ½ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¡¨ç°å¾—è¶Šå¥½è¶Šå¥½ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œå…¶ä¸­æˆ‘ä»¬æœ‰è¾“å…¥ç‰¹å¾ (X) å’Œå¯¹åº”çš„ç›®æ ‡å˜é‡(Y)ï¼Œæˆ‘ä»¬çš„æ¨¡å‹é€šè¿‡ä¸€äº›å‚æ•° (w) è¿›è¡Œå‚æ•°åŒ–ï¼Œè¡¨ç¤ºä¸º<span class="math inline">\(Y = f(X; w)\)</span>ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä¼˜çš„å‚æ•°(w)ï¼Œä½¿å¾—æ¨¡å‹é¢„æµ‹çš„ (Y) ä¸çœŸå®çš„ç›®æ ‡ (Y) ä¹‹é—´çš„å·®è·æœ€å°ã€‚</p><p>è¿™ä¸ªå·®è·é€šå¸¸é€šè¿‡æŸå¤±å‡½æ•°ï¼ˆä¹Ÿå«ç›®æ ‡å‡½æ•°ï¼‰æ¥å®šä¹‰ï¼Œè¡¨ç¤ºä¸º<span class="math inline">\(L(Y, f(X;w))\)</span>ã€‚æ¢¯åº¦ä¸‹é™çš„æ€æƒ³æ˜¯æ²¿ç€æŸå¤±å‡½æ•°ä¸‹é™æœ€å¿«çš„æ–¹å‘æ›´æ–°å‚æ•°ï¼Œç›´è‡³æ‰¾åˆ°ä½¿æŸå¤±æœ€å°åŒ–çš„å‚æ•°ã€‚</p><p>ä¸ºäº†æ›´æ–°å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æŸå¤±å‡½æ•°å…³äºå‚æ•° (w)çš„æ¢¯åº¦ï¼ˆå¯¼æ•°ï¼‰ã€‚æ¢¯åº¦æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå…¶ä¸­æ¯ä¸ªåˆ†é‡è¡¨ç¤ºæŸå¤±å‡½æ•°å…³äºç›¸åº”å‚æ•°çš„åå¯¼æ•°ã€‚é€šè¿‡æ¢¯åº¦ä¸‹é™ï¼Œæˆ‘ä»¬æŒ‰ç…§æ¢¯åº¦çš„åæ–¹å‘æ›´æ–°å‚æ•°ï¼Œä½¿å¾—æŸå¤±å‡½æ•°é€æ¸å‡å°ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå¯¹äºå‚æ•° (w)ï¼Œæˆ‘ä»¬ä½¿ç”¨é“¾å¼æ³•åˆ™è®¡ç®—æŸå¤±å‡½æ•°å…³äº (w)çš„æ¢¯åº¦ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªæ¢¯åº¦æ¥æ›´æ–°(w)ã€‚è¿™ä¸ªè¿‡ç¨‹åå¤è¿›è¡Œï¼Œç›´åˆ°è¾¾åˆ°åœæ­¢æ¡ä»¶ï¼ˆä¾‹å¦‚è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°æˆ–æ¢¯åº¦å˜åŒ–å¾ˆå°ï¼‰ã€‚</p><p>æ€»ä¹‹ï¼Œä½¿ç”¨æŸå¤±å‡½æ•°å¯¹å‚æ•° (w)æ±‚å¯¼çš„ç›®çš„æ˜¯ä¼˜åŒ–æ¨¡å‹ï¼Œä½¿å…¶åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„æ€§èƒ½è¾¾åˆ°æœ€ä¼˜ã€‚</p><h1 id="ä¹¦">ä¹¦</h1><p>ç­–ç•¥æ¢¯åº¦æ–¹æ³•ç”¨ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\boldsymbol{\nabla}_{\boldsymbol{\theta}}J(\boldsymbol{\theta})\)</span>æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°<span class="math inline">\(\boldsymbol{\theta}\)</span>,ä»è€Œå¢å¤§ç›®æ ‡å‡½æ•°ã€‚å‰é¢æ¨å¯¼å‡ºç­–ç•¥æ¢¯åº¦<span class="math inline">\(\boldsymbol{\nabla}_{\boldsymbol{\theta}}J(\boldsymbol{\theta})\)</span>çš„æ— åä¼°è®¡ï¼Œå³ä¸‹é¢çš„éšæœºæ¢¯åº¦ï¼š</p><p><span class="math inline">\(\boldsymbol{g}(s,a;\boldsymbol{\theta})\triangleq Q_{\pi}(s,a) \cdot\boldsymbol{\nabla}_{\boldsymbol{\theta}}\ln\pi(a\|s;\boldsymbol{\theta}).\)</span></p><p>ä½†æ˜¯å…¶ä¸­çš„åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}\)</span>æ˜¯æœªçŸ¥çš„ï¼Œå¯¼è‡´æ— æ³•ç›´æ¥è®¡ç®—<span class="math inline">\(\boldsymbol{g}(s,a;\boldsymbol{\theta})\)</span>ã€‚ä¸Šä¸€èŠ‚çš„REINFORCE ç”¨å®é™…è§‚æµ‹çš„å›æŠ¥è¿‘ä¼¼<span class="math inline">\(Q_{\pi}\)</span>, æœ¬èŠ‚çš„ actor-criticæ–¹æ³•ç”¨ç¥ç»ç½‘ç»œè¿‘ä¼¼<span class="math inline">\(Q_{\pi}\)</span>ã€‚</p><h2 id="ä»·å€¼ç½‘ç»œ">ä»·å€¼ç½‘ç»œ</h2><p>Actor-critic æ–¹æ³•ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œè¿‘ä¼¼åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>, è¿™ä¸ªç¥ç»ç½‘ç»œå«åšâ€œä»·å€¼ç½‘ç»œ",è®°ä¸º<span class="math inline">\(q(s,a;\boldsymbol{w})\)</span>,å…¶ä¸­çš„<span class="math inline">\(\boldsymbol{w}\)</span>è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­å¯è®­ç»ƒçš„å‚æ•°ã€‚ä»·å€¼ç½‘ç»œçš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>, è¾“å‡ºæ˜¯æ¯ä¸ªåŠ¨ä½œçš„ä»·å€¼ã€‚åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>ä¸­æœ‰å¤šå°‘ç§åŠ¨ä½œï¼Œé‚£ä¹ˆä»·å€¼ç½‘ç»œçš„è¾“å‡ºå°±æ˜¯å¤šå°‘ç»´çš„å‘é‡ï¼Œå‘é‡æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªåŠ¨ä½œã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒåŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(A=\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>,</p><p><span class="math inline">\(q(s, å·¦; w) = 219, \quad q(s, å³; w) =-73, \quad q(s, ä¸Š; w) = 580.\)</span></p><p>ç¥ç»ç½‘ç»œçš„ç»“æ„è§å›¾ 7.2ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733113794334-099e1ce6-f491-4d03-a070-25a281d5c2d0.png"></p><p>è™½ç„¶ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;\boldsymbol{w})\)</span>ä¸ä¹‹å‰å­¦çš„ DQNæœ‰ç›¸åŒçš„ç»“æ„ï¼Œä½†æ˜¯ä¸¤è€…çš„æ„ä¹‰ä¸åŒï¼Œè®­ç»ƒç®—æ³•ä¹Ÿä¸åŒã€‚</p><ul><li>ä»·å€¼ç½‘ç»œæ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>çš„è¿‘ä¼¼ã€‚è€Œ DQNåˆ™æ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*(s,a)\)</span>çš„è¿‘ä¼¼ã€‚</li><li>å¯¹ä»·å€¼ç½‘ç»œçš„è®­ç»ƒä½¿ç”¨çš„æ˜¯ SARSAç®—æ³•ï¼Œå®ƒå±äºåŒç­–ç•¥ï¼Œä¸èƒ½ç”¨ç»éªŒå›æ”¾ã€‚å¯¹ DQNçš„è®­ç»ƒä½¿ç”¨çš„æ˜¯ Qå­¦ä¹ ç®—æ³•ï¼Œå®ƒå±äºå¼‚ç­–ç•¥ï¼Œå¯ä»¥ç”¨ç»éªŒå›æ”¾ã€‚</li></ul><h2 id="ç®—æ³•æ¨å¯¼">ç®—æ³•æ¨å¯¼</h2><p>Actor-critic ç¿»è¯‘æˆâ€œæ¼”å‘˜ä¸€è¯„å§”â€æ–¹æ³•ã€‚ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\boldsymbol{\theta})\)</span>ç›¸å½“äºæ¼”å‘˜ï¼Œå®ƒåŸºäºçŠ¶æ€<span class="math inline">\(s\)</span>åšå‡ºåŠ¨ä½œ<span class="math inline">\(a\)</span>ã€‚ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;\boldsymbol{w})\)</span>ç›¸å½“äºè¯„å§”ï¼Œå®ƒç»™æ¼”å‘˜çš„è¡¨ç°æ‰“åˆ†ï¼Œè¯„ä»·åœ¨çŠ¶æ€<span class="math inline">\(s\)</span>çš„æƒ…å†µä¸‹åšå‡ºåŠ¨ä½œ<span class="math inline">\(a\)</span>çš„å¥½åç¨‹åº¦ã€‚ç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)å’Œä»·å€¼ç½‘ç»œ(è¯„å§”)çš„å…³ç³»å¦‚å›¾7.3æ‰€ç¤ºã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-4-Actor-Critic-Method/1733113845596-bb4a6e86-c013-48f7-ba33-a6eb95462f00.png"></p><p>è¯»è€…å¯èƒ½ä¼šå¯¹å›¾ 7.3 æ„Ÿåˆ°ä¸è§£ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠå¥–åŠ±<span class="math inline">\(R\)</span>åé¦ˆç»™ç­–ç•¥ç½‘ç»œ (æ¼”å‘˜),è€Œè¦ç”¨ä»·å€¼ç½‘ç»œ(è¯„å§”) è¿™æ ·ä¸€ä¸ªä¸­ä»‹å‘¢ï¼ŸåŸå› æ˜¯è¿™æ ·çš„ï¼šç­–ç•¥å­¦ä¹ çš„ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\boldsymbol{\theta})\)</span>æ˜¯å›æŠ¥<span class="math inline">\(U\)</span>çš„æœŸæœ›ï¼Œè€Œä¸æ˜¯å¥–åŠ±<span class="math inline">\(R\)</span>çš„æœŸæœ›ï¼›æ³¨æ„å›æŠ¥<span class="math inline">\(U\)</span>å’Œå¥–åŠ±<span class="math inline">\(R\)</span>çš„åŒºåˆ«ã€‚è™½ç„¶èƒ½è§‚æµ‹åˆ°å½“å‰çš„å¥–åŠ±<span class="math inline">\(R\)</span>,ä½†æ˜¯å®ƒå¯¹ç­–ç•¥ç½‘ç»œæ˜¯æ¯«æ— æ„ä¹‰çš„ï¼›è®­ç»ƒç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)éœ€è¦çš„æ˜¯å›æŠ¥<span class="math inline">\(U\)</span>,è€Œä¸æ˜¯å¥–åŠ±<span class="math inline">\(R\)</span>ã€‚ä»·å€¼ç½‘ç»œ (è¯„å§”) èƒ½å¤Ÿä¼°ç®—å‡ºå›æŠ¥<span class="math inline">\(U\)</span>çš„æœŸæœ›ï¼Œå› æ­¤èƒ½å¸®åŠ©è®­ç»ƒç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)ã€‚</p><h3 id="è®­ç»ƒç­–ç•¥ç½‘ç»œ-æ¼”å‘˜">è®­ç»ƒç­–ç•¥ç½‘ç»œ (æ¼”å‘˜)</h3><p>ç­–ç•¥ç½‘ç»œ (æ¼”å‘˜)æƒ³è¦æ”¹è¿›è‡ªå·±çš„æ¼”æŠ€ï¼Œä½†æ˜¯æ¼”å‘˜è‡ªå·±ä¸çŸ¥é“ä»€ä¹ˆæ ·çš„è¡¨æ¼”æ‰ç®—æ›´å¥½ï¼Œæ‰€ä»¥éœ€è¦ä»·å€¼ç½‘ç»œ(è¯„å§”)çš„å¸®åŠ©ã€‚åœ¨æ¼”å‘˜åšå‡ºåŠ¨ä½œ<span class="math inline">\(a\)</span>ä¹‹åï¼Œè¯„å§”ä¼šæ‰“ä¸€ä¸ªåˆ†æ•°<span class="math inline">\(\hat{q} \triangleqq(s,a;\boldsymbol{w})\)</span>,å¹¶æŠŠåˆ†æ•°åé¦ˆç»™æ¼”å‘˜ï¼Œå¸®åŠ©æ¼”å‘˜åšå‡ºæ”¹è¿›ã€‚æ¼”å‘˜åˆ©ç”¨å½“å‰çŠ¶æ€<span class="math inline">\(s\)</span>, è‡ªå·±çš„åŠ¨ä½œ<span class="math inline">\(a\)</span>, ä»¥åŠè¯„å§”çš„æ‰“åˆ†<span class="math inline">\(\hat{q}\)</span>,è®¡ç®—è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦ï¼Œç„¶åæ›´æ–°è‡ªå·±çš„å‚æ•°<span class="math inline">\(\boldsymbol{\theta}\)</span>(ç›¸å½“äºæ”¹å˜è‡ªå·±çš„æŠ€æœ¯)ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¼”å‘˜çš„è¡¨ç°è¶Šæ¥è¶Šå—è¯„å§”çš„å¥½è¯„ï¼Œäºæ˜¯æ¼”å‘˜çš„è·å¾—çš„è¯„åˆ†<span class="math inline">\(\hat{q}\)</span>è¶Šæ¥è¶Šé«˜ã€‚</p><p>è®­ç»ƒç­–ç•¥ç½‘ç»œçš„åŸºæœ¬æƒ³æ³•æ˜¯ç”¨ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\boldsymbol{\nabla}_{\boldsymbol{\theta}}J(\boldsymbol{\theta})\)</span>çš„è¿‘ä¼¼æ¥æ›´æ–°å‚æ•°<span class="math inline">\(\boldsymbol{\theta}\)</span>ã€‚ä¹‹å‰æˆ‘ä»¬æ¨å¯¼è¿‡ç­–ç•¥æ¢¯åº¦çš„æ— åä¼°è®¡ï¼š</p><p><span class="math inline">\(g(s,a;\theta) \triangleq Q_{\pi}(s,a)\cdot \nabla_{\theta} \ln \pi(a \mid s; \theta).\)</span></p><p>ä»·å€¼ç½‘ç»œ<span class="math inline">\(q(s,a;\boldsymbol{w})\)</span>æ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>çš„è¿‘ä¼¼ï¼Œæ‰€ä»¥æŠŠä¸Šé¢å…¬å¼ä¸­çš„<span class="math inline">\(Q_{\pi}\)</span>æ›¿æ¢æˆä»·å€¼ç½‘ç»œï¼Œå¾—åˆ°è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦ï¼š</p><p><span class="math inline">\(\widehat{g}\left(s,a;\theta\right) \quad\triangleq \quad \underbrace{q(s,a;w)}_{\text{è¯„å§”çš„æ‰“åˆ†}} \cdot\nabla_{\theta} \ln \pi(a \mid s; \theta).\)</span></p><p>æœ€ååšæ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥ç½‘ç»œçš„å‚æ•°ï¼š</p><p><span class="math inline">\(\boldsymbol{\theta} \leftarrow\boldsymbol{\theta} + \beta \cdot\hat{\boldsymbol{g}}(s,a;\boldsymbol{\theta}).\)</span></p><p>æ³¨:ç”¨ä¸Šè¿°æ–¹å¼æ›´æ–°å‚æ•°ä¹‹åï¼Œä¼šè®©è¯„å§”æ‰“å‡ºçš„åˆ†æ•°è¶Šæ¥è¶Šé«˜ï¼ŒåŸå› æ˜¯è¿™æ ·çš„ã€‚çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_{\pi}(s)\)</span>å¯ä»¥è¿‘ä¼¼æˆä¸ºï¼š</p><p><span class="math inline">\(v(s; \theta) = \mathbb{E}_{A \sim\pi(\cdot | s; \theta)} \left[ q(s, A; w) \right].\)</span></p><p>å› æ­¤å¯ä»¥å°†<span class="math inline">\(v(s;\boldsymbol{\theta})\)</span>çœ‹åšè¯„å§”æ‰“åˆ†çš„å‡å€¼ã€‚ä¸éš¾è¯æ˜ï¼Œå…¬å¼(7.11) ä¸­å®šä¹‰çš„è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\hat{\boldsymbol{g}}(s,a;\boldsymbol{\theta})\)</span>çš„æœŸæœ›ç­‰äº<span class="math inline">\(v(s;\boldsymbol{\theta})\)</span>å…³äº<span class="math inline">\(\boldsymbol{\theta}\)</span>çš„æ¢¯åº¦ï¼š</p><p><span class="math inline">\(\nabla_{\theta v}(s; \theta) =\mathbb{E}_{A \sim \pi(\cdot \mid s; \theta)} \left[ \widehat{g}(s, A;\theta) \right].\)</span></p><p>å› æ­¤ï¼Œç”¨å…¬å¼ 7.12 ä¸­çš„æ¢¯åº¦ä¸Šå‡æ›´æ–°<span class="math inline">\(\boldsymbol{\theta}\)</span>,ä¼šè®©<span class="math inline">\(v(s;\boldsymbol{\theta})\)</span>å˜å¤§ï¼Œä¹Ÿå°±æ˜¯è®©è¯„å§”æ‰“åˆ†çš„å‡å€¼æ›´é«˜ã€‚</p><h3 id="è®­ç»ƒä»·å€¼ç½‘ç»œè¯„å§”">è®­ç»ƒä»·å€¼ç½‘ç»œ(è¯„å§”)</h3><p>é€šè¿‡ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ä¸Šè¿°è®­ç»ƒç­–ç•¥ç½‘ç»œ(æ¼”å‘˜)çš„æ–¹æ³•ä¸æ˜¯çœŸæ­£è®©æ¼”å‘˜è¡¨ç°æ›´å¥½ï¼Œåªæ˜¯è®©æ¼”å‘˜æ›´è¿åˆè¯„å§”çš„å–œå¥½è€Œå·²ã€‚å› æ­¤ï¼Œè¯„å§”çš„æ°´å¹³ä¹Ÿå¾ˆé‡è¦ï¼Œåªæœ‰å½“è¯„å§”çš„æ‰“åˆ†<span class="math inline">\(\hat{q}\)</span>çœŸæ­£åæ˜ å‡ºåŠ¨ä½œä»·å€¼<span class="math inline">\(Q_{\pi}\)</span>,æ¼”å‘˜çš„æ°´å¹³æ‰èƒ½çœŸæ­£æé«˜ã€‚åˆå§‹çš„æ—¶å€™ï¼Œä»·å€¼ç½‘ç»œçš„å‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>æ˜¯éšæœºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¯„å§”çš„æ‰“åˆ†æ˜¯ççŒœã€‚å¯ä»¥ç”¨SARSA ç®—æ³•æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>,æé«˜è¯„å§”çš„æ°´å¹³ã€‚æ¯æ¬¡ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°ä¸€ä¸ªå¥–åŠ±<span class="math inline">\(r\)</span>,æŠŠ<span class="math inline">\(r\)</span>çœ‹åšæ˜¯çœŸç›¸ï¼Œç”¨<span class="math inline">\(r\)</span>æ¥æ ¡å‡†è¯„å§”çš„æ‰“åˆ†<span class="math inline">\(q(s,a;\boldsymbol{w})\)</span>ã€‚</p><p>ç¬¬5.1 èŠ‚å·²ç»æ¨å¯¼è¿‡ SARSA ç®—æ³•ï¼Œç°åœ¨æˆ‘ä»¬å†å›é¡¾ä¸€ä¸‹ã€‚åœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»ï¼Œä»·å€¼ç½‘ç»œè¾“å‡º<span class="math inline">\(\hat{q}_t =q(s_t,a_t;\boldsymbol{w})\)</span>,</p><p>å®ƒæ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s_t,a_t)\)</span>çš„ä¼°è®¡ã€‚åœ¨<span class="math inline">\(t+1\)</span>æ—¶åˆ»ï¼Œå®é™…è§‚æµ‹åˆ°<span class="math inline">\(r_t,s_{t+1},a_{t+1}\)</span>, äºæ˜¯å¯ä»¥è®¡ç®— TDç›®æ ‡</p><p><span class="math inline">\(\hat{y}_t = r_t + \gamma \cdotq(s_{t+1},a_{t+1};\boldsymbol{w})\)</span>,</p><p>å®ƒä¹Ÿæ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s_t,a_t)\)</span>çš„ä¼°è®¡ã€‚ç”±äº<span class="math inline">\(\hat{y}_t\)</span>éƒ¨åˆ†åŸºäºå®é™…è§‚æµ‹åˆ°çš„å¥–åŠ±<span class="math inline">\(r_t\)</span>,æˆ‘ä»¬è®¤ä¸º<span class="math inline">\(\hat{y}_t\)</span>æ¯”<span class="math inline">\(q(s_t,a_t;\boldsymbol{w})\)</span>æ›´æ¥è¿‘äº‹å®çœŸç›¸ã€‚æ‰€ä»¥æŠŠ<span class="math inline">\(\hat{y}_t\)</span>å›ºå®šä½ï¼Œé¼“åŠ±<span class="math inline">\(q(s_t,a_t;\boldsymbol{w})\)</span>å»æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚</p><p>SARSA ç®—æ³•å…·ä½“è¿™æ ·æ›´æ–°ä»·å€¼ç½‘ç»œå‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>ã€‚å®šä¹‰æŸå¤±å‡½æ•°ï¼š</p><p><span class="math inline">\(L(\boldsymbol{w}) \triangleq \frac{1}{2}[q(s_t,a_t;\boldsymbol{w}) - \hat{y}_t]^2.\)</span></p><p>è®¾<span class="math inline">\(\hat{q}_t \triangleqq(s_t,a_t;\boldsymbol{w})\)</span>ã€‚æŸå¤±å‡½æ•°çš„æ¢¯åº¦æ˜¯ï¼š</p><p><span class="math inline">\(\boldsymbol{\nabla}_{\boldsymbol{w}}L(\boldsymbol{w})= (\hat{q}_t - \hat{y}_t) \cdot\boldsymbol{\nabla}_{\boldsymbol{w}}q(s_t,a_t;\boldsymbol{w}).\)</span></p><p>åšä¸€è½®æ¢¯åº¦ä¸‹é™æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>:</p><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot\boldsymbol{\nabla}_{\boldsymbol{w}}L(\boldsymbol{w}).\)</span></p><p>è¿™æ ·æ›´æ–°<span class="math inline">\(\boldsymbol{w}\)</span>å¯ä»¥è®©<span class="math inline">\(q(s_t,a_t;\boldsymbol{w})\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚å¯ä»¥è¿™æ ·ç†è§£ SARSA:ç”¨è§‚æµ‹åˆ°çš„å¥–åŠ±<span class="math inline">\(r\)</span>æ¥â€œæ ¡å‡†â€è¯„å§”çš„æ‰“åˆ†<span class="math inline">\(q(s_t,a_t;\boldsymbol{w})\)</span>ã€‚</p><h2 id="è®­ç»ƒæµç¨‹">è®­ç»ƒæµç¨‹</h2><p>ä¸‹é¢æ¦‚æ‹¬ actor-critic è®­ç»ƒæµç¨‹ã€‚è®¾å½“å‰ç­–ç•¥ç½‘ç»œå‚æ•°æ˜¯<span class="math inline">\(\boldsymbol{\theta}_{\text{now}}\)</span>,ä»·å€¼ç½‘ç»œå‚æ•°æ˜¯<span class="math inline">\(\boldsymbol{w}_{\text{now}}\)</span>ã€‚</p><p>æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œå°†å‚æ•°æ›´æ–°æˆ<span class="math inline">\(\boldsymbol{\theta}_{\text{new}}\)</span>å’Œ<span class="math inline">\(\boldsymbol{w}_{\text{new}}\)</span>:</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ ¹æ®ç­–ç•¥ç½‘ç»œåšå†³ç­–<span class="math inline">\(a_t \sim \pi(\cdot|s_t;\boldsymbol{\theta}_{\text{now}})\)</span>, å¹¶è®©æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚</li><li>ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚</li><li>æ ¹æ®ç­–ç•¥ç½‘ç»œåšå†³ç­–<span class="math inline">\(\tilde{a}_{t+1} \sim\pi(\cdot|s_{t+1};\boldsymbol{\theta}_{\text{now}})\)</span>,ä½†ä¸è®©æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(\tilde{a}_{t+1}\)</span>ã€‚</li><li>è®©ä»·å€¼ç½‘ç»œç»™<span class="math inline">\((s_t,a_t)\)</span>æ‰“åˆ†ï¼š<span class="math inline">\(\hat{q}_t = q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>å’Œ<span class="math inline">\(\hat{q}_{t+1} = q(s_{t+1}, \tilde{a}_{t+1};\boldsymbol{w}_{\text{now}})\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t = r_t+ \gamma \cdot \hat{q}_{t+1}\)</span>å’Œ<span class="math inline">\(\delta_t = \hat{q}_t - \hat{y}_t\)</span>.</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œï¼š<span class="math inline">\(\boldsymbol{w}_{\text{new}} \leftarrow\boldsymbol{w}_{\text{now}} - \alpha \cdot \delta_t \cdot\boldsymbol{\nabla}_{\boldsymbol{w}}q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>æ›´æ–°ç­–ç•¥ç½‘ç»œï¼š<span class="math inline">\(\boldsymbol{\theta}_{\text{new}} \leftarrow\boldsymbol{\theta}_{\text{now}} + \beta \cdot \hat{q}_t \cdot\boldsymbol{\nabla}_{\boldsymbol{\theta}}\ln\pi(a_t \| s_t;\boldsymbol{\theta}_{\text{now}})\)</span>.</li></ol><h2 id="ç”¨ç›®æ ‡ç½‘ç»œæ”¹è¿›è®­ç»ƒ">ç”¨ç›®æ ‡ç½‘ç»œæ”¹è¿›è®­ç»ƒ</h2><p>ç¬¬ 6.2 èŠ‚è®¨è®ºäº† Q å­¦ä¹ ä¸­çš„è‡ªä¸¾åŠå…¶å±å®³ï¼Œä»¥åŠç”¨ç›®æ ‡ç½‘ç»œ (targetnetwork) ç¼“è§£è‡ªä¸¾é€ æˆçš„åå·®ã€‚SARSAç®—æ³•ä¸­ä¹Ÿå­˜åœ¨è‡ªä¸¾ä¸€ä¸€å³ç”¨ä»·å€¼ç½‘ç»œè‡ªå·±çš„ä¼°å€¼<span class="math inline">\(\hat{q}_{t+1}\)</span>å»æ›´æ–°ä»·å€¼ç½‘ç»œè‡ªå·±ï¼›æˆ‘ä»¬åŒæ ·å¯ä»¥ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®—TD ç›®æ ‡ï¼Œä»è€Œç¼“è§£åå·®ã€‚æŠŠç›®æ ‡ç½‘ç»œè®°ä½œ<span class="math inline">\(q(s,a;\boldsymbol{w}^-)\)</span>,å®ƒçš„ç»“æ„ä¸ä»·å€¼ç½‘ç»œç›¸åŒï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚ä½¿ç”¨ç›®æ ‡ç½‘ç»œè®¡ç®—TD ç›®æ ‡ï¼Œé‚£ä¹ˆ actor-critic çš„è®­ç»ƒå°±å˜æˆäº†ï¼š</p><ol type="1"><li>è§‚æµ‹åˆ°å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ ¹æ®ç­–ç•¥ç½‘ç»œåšå†³ç­–<span class="math inline">\(a_t \sim \pi(\cdot|s_t;\boldsymbol{\theta}_{\text{now}})\)</span>, å¹¶è®©æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>.</li><li>ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°å¥–åŠ±<span class="math inline">\(r_t\)</span>å’Œæ–°çš„çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>.</li><li>æ ¹æ®ç­–ç•¥ç½‘ç»œåšå†³ç­–<span class="math inline">\(\tilde{a}_{t+1} \sim\pi(\cdot|s_{t+1};\boldsymbol{\theta}_{\text{now}})\)</span>,ä½†æ˜¯ä¸è®©æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(\tilde{a}_{t+1}\)</span>.</li><li>è®©ä»·å€¼ç½‘ç»œç»™<span class="math inline">\((s_t,a_t)\)</span>æ‰“åˆ†ï¼š<span class="math inline">\(\hat{q}_t = q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>è®©ç›®æ ‡ç½‘ç»œç»™<span class="math inline">\((s_{t+1},\tilde{a}_{t+1})\)</span>æ‰“åˆ†ï¼š<span class="math inline">\(\hat{q}_{t+1}^- = q(s_{t+1}, \tilde{a}_{t+1};\boldsymbol{w}_{\text{now}}^-)\)</span>.</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<span class="math inline">\(\hat{y}_t^- =r_t + \gamma \cdot \hat{q}_{t+1}^-\)</span>å’Œ<span class="math inline">\(\delta_t = \hat{q}_t - \hat{y}_t^-\)</span>.</li><li>æ›´æ–°ä»·å€¼ç½‘ç»œï¼š<span class="math inline">\(\boldsymbol{w}_{\text{new}} \leftarrow\boldsymbol{w}_{\text{now}} - \alpha \cdot \delta_t \cdot\boldsymbol{\nabla}_{\boldsymbol{w}}q(s_t, a_t;\boldsymbol{w}_{\text{now}})\)</span>.</li><li>æ›´æ–°ç­–ç•¥ç½‘ç»œï¼š<span class="math inline">\(\boldsymbol{\theta}_{\text{new}} \leftarrow\boldsymbol{\theta}_{\text{now}} + \beta \cdot \hat{q}_t \cdot\boldsymbol{\nabla}_{\boldsymbol{\theta}}\ln\pi(a_t \| s_t;\boldsymbol{\theta}_{\text{now}})\)</span>.</li><li>è®¾<span class="math inline">\(\tau \in(0,1)\)</span>æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒæ•´çš„è¶…å‚æ•°ã€‚åšåŠ æƒå¹³å‡æ›´æ–°ç›®æ ‡ç½‘ç»œçš„å‚æ•°ï¼š<span class="math inline">\(\boldsymbol{w}_{\text{new}}^- \leftarrow \tau\cdot \boldsymbol{w}_{\text{new}} + (1-\tau) \cdot\boldsymbol{w}_{\text{now}}^-\)</span>.</li></ol><h2 id="æœ¬ç« æ€»ç»“">æœ¬ç« æ€»ç»“</h2><ul><li>å¯ä»¥ç”¨ç¥ç»ç½‘ç»œ<span class="math inline">\(\pi(a|s;\boldsymbol{\theta})\)</span>è¿‘ä¼¼ç­–ç•¥å‡½æ•°ã€‚ç­–ç•¥å­¦ä¹ çš„ç›®æ ‡å‡½æ•°æ˜¯<span class="math inline">\(J(\boldsymbol{\theta}) =\mathbb{E}_S[V_{\pi}(S)]\)</span>, å®ƒçš„å€¼è¶Šå¤§ï¼Œæ„å‘³ç€ç­–ç•¥è¶Šå¥½ã€‚</li><li>ç­–ç•¥æ¢¯åº¦æŒ‡çš„æ˜¯<span class="math inline">\(J(\boldsymbol{\theta})\)</span>å…³äºç­–ç•¥å‚æ•°<span class="math inline">\(\boldsymbol{\theta}\)</span>çš„æ¢¯åº¦ã€‚ç­–ç•¥æ¢¯åº¦å®šç†å°†ç­–ç•¥æ¢¯åº¦è¡¨ç¤ºæˆ<span class="math inline">\(\boldsymbol{g}(s,a;\boldsymbol{\theta}) \triangleqQ_{\pi}(s,a) \cdot\boldsymbol{\nabla}_{\boldsymbol{\theta}}\ln\pi(a|s;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);">çš„æœŸæœ›ã€‚</font></li><li><font style="color:rgb(6, 6, 7);">REINFORCEç®—æ³•ç”¨å®é™…è§‚æµ‹çš„å›æŠ¥<span class="math inline">\(u\)</span>è¿‘ä¼¼</font><span class="math inline">\(Q_{\pi}(s,a)\)</span><font style="color:rgb(6, 6, 7);">,ä»è€ŒæŠŠ </font><span class="math inline">\(\boldsymbol{g}(s,a;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);">è¿‘ä¼¼æˆ </font><span class="math inline">\(\tilde{\boldsymbol{g}}(s,a;\boldsymbol{\theta})\triangleq u \cdot\boldsymbol{\nabla}_{\boldsymbol{\theta}}\ln\pi(a|s;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);">.REINFORCE ç®—æ³•åšæ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥ç½‘ç»œï¼š</font><span class="math inline">\(\boldsymbol{\theta} \leftarrow \boldsymbol{\theta}+ \beta \cdot\tilde{\boldsymbol{g}}(s,a;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);"></font></li><li><font style="color:rgb(6, 6, 7);">Actor-critic ç”¨ä»·å€¼ç½‘ç»œ</font><span class="math inline">\(q(s,a;\boldsymbol{w})\)</span><font style="color:rgb(6, 6, 7);">è¿‘ä¼¼ </font><span class="math inline">\(Q_{\pi}(s,a)\)</span><font style="color:rgb(6, 6, 7);">,ä»è€ŒæŠŠ </font><span class="math inline">\(\boldsymbol{g}(s,a;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);">è¿‘ä¼¼æˆ </font><span class="math inline">\(\hat{\boldsymbol{g}}(s,a;\boldsymbol{\theta})\triangleq q(s,a;\boldsymbol{w}) \cdot\boldsymbol{\nabla}_{\boldsymbol{\theta}}\ln\pi(a|s;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);">.Actor-critic ç”¨ SARSA ç®—æ³•æ›´æ–°ä»·å€¼ç½‘ç»œ<span class="math inline">\(q\)</span>, ç”¨æ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥ç½‘ç»œ </font><span class="math inline">\(\boldsymbol{\theta} \leftarrow \boldsymbol{\theta}+ \beta \cdot\hat{\boldsymbol{g}}(s,a;\boldsymbol{\theta})\)</span><font style="color:rgb(6, 6, 7);">.</font></li></ul>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.3 ç­–ç•¥å­¦ä¹ </title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤ä¹ ç­–ç•¥å‡½æ•°">å¤ä¹ ç­–ç•¥å‡½æ•°</h1><ol type="1"><li>å¤ä¹ ç­–ç•¥å‡½æ•°çš„å®šä¹‰ï¼šç­–ç•¥å‡½æ•°æ˜¯ä¸€ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ŒæŠŠstateä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ªæ‰€æœ‰actionçš„æ¦‚ç‡åˆ†å¸ƒã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/855248240284f24c6bf9d4d98568525f.png"></p><h1 id="ç­–ç•¥ç½‘ç»œpolicy-network">ç­–ç•¥ç½‘ç»œpolicy network</h1><h2 id="ç”¨ç¥ç»ç½‘ç»œæ¥è¿‘ä¼¼ç­–ç•¥å‡½æ•°pi">ç”¨ç¥ç»ç½‘ç»œæ¥è¿‘ä¼¼ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi\)</span>ã€‚</h2><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/e6043f0a92b78f642b1f3c60e40776ce.png"></p><h2 id="çŠ¶æ€ä»·å€¼å‡½æ•°å›é¡¾">çŠ¶æ€ä»·å€¼å‡½æ•°å›é¡¾</h2><ol type="1"><li>çŠ¶æ€ä»·å€¼å‡½æ•°æ˜¯å¯¹åŠ¨ä½œä»·å€¼å‡½æ•°æ±‚æœŸæœ›ï¼ˆå…³äºactionç§¯åˆ†ï¼ˆæˆ–ç´¯åŠ å’Œï¼‰ï¼Œå°†actionæ¶ˆæ‰ï¼‰ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/7f8625fad5c4472dd75f15e4ece9385e.png"></p><ol start="2" type="1"><li>è¿‘ä¼¼çŠ¶æ€ä»·å€¼å‡½æ•°ï¼šç”¨ç­–ç•¥ç½‘ç»œè¿‘ä¼¼ç­–ç•¥å‡½æ•°ï¼Œç„¶åå°†å…¶å¸¦å…¥ä»·å€¼å‡½æ•°ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯é‡Œé¢å¤šäº†ä¸€ä¸ª<span class="math inline">\(\theta\)</span>å˜é‡ï¼Œè¿™æ˜¯ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/a533bac25686fc4f6915343c0b21c260.png"></p><ol start="3" type="1"><li>æ”¹è¿›æ¨¡å‹å‚æ•°<span class="math inline">\(\theta\)</span>ä½¿å¾—Vå‡½æ•°å˜å¤§ï¼Œç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>æ˜¯å¯¹Vå‡½æ•°æ±‚æœŸæœ›ï¼ŒJå‡½æ•°æ˜¯å¯¹ç­–ç•¥ç½‘ç»œçš„è¯„ä»·ï¼Œç­–ç•¥ç½‘ç»œè¶Šå¥½ï¼ŒJå°±è¶Šå¤§ã€‚</li><li>policy based learningçš„ç›®æ ‡å°±æ˜¯æ”¹è¿›æ¨¡å‹å‚æ•°<span class="math inline">\(\theta\)</span>ä½¿å¾—<span class="math inline">\(J(\theta)\)</span>è¶Šå¤§è¶Šå¥½ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/71e911a656746f4bfa3e95112340d2a9.png"></p><h2 id="ç­–ç•¥æ¢¯åº¦policy-gradient">ç­–ç•¥æ¢¯åº¦policy gradient</h2><ol type="1"><li>æ¨å¯¼ç­–ç•¥æ¢¯åº¦</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/9174dae4c25d1077dd025de4073196a4.png"></p><ol start="2" type="1"><li>ä¸‹é¢ç”¨äº†logå‡½æ•°æ±‚å¯¼çš„æ€§è´¨ï¼Œä»ç¬¬ä¸€ä¸ªè“è‰²æ–¹æ¡†æ¨åˆ°åˆ°ç¬¬äºŒä¸ªè“è‰²æ–¹æ¡†ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103261321-337059ac-f3fe-4062-b682-4464cca8b062.png"></p><ul><li>ç¬¬äºŒä¸ªç­‰å¼å…³äº<span class="math inline">\(\pi\)</span>æ±‚å’Œï¼Œå°±æ˜¯å¯¹éšæœºå˜é‡Aæ±‚æœŸæœ›ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103274107-d46805f1-0aaf-4b6e-afc3-7848f74a55ea.png"></p><ul><li>ç»è¿‡æ¨å¯¼ï¼Œå¾—åˆ°ç­–ç•¥æ¢¯åº¦ä¸‹é¢ä¸¤ç§å½¢å¼</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103299239-d6b3ce88-ee11-49b7-ad5a-cb2e5221ddde.png"></p><ol start="3" type="1"><li>å¯¹äºç¦»æ•£åŠ¨ä½œæ±‚ç­–ç•¥æ¢¯åº¦ï¼šç”¨form1</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103315078-3c411bb2-eb87-4b42-bed6-e2be71af9aa5.png"></p><ol start="4" type="1"><li>å¯¹äºè¿ç»­åŠ¨ä½œæ±‚ç­–ç•¥æ¢¯åº¦ï¼šç”¨form2ï¼Œè¿™é‡Œç”¨åˆ°äº†è’™ç‰¹å¡æ´›è¿‘ä¼¼</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103389442-3d60ad49-bfd1-4b69-820c-af093cd6f925.png"></p><h2 id="update-policy-network-using-policy-gradient">Update policynetwork using policy gradient</h2><ul><li>ç­–ç•¥æ¢¯åº¦ç®—æ³•ï¼šæ¯ä¸€è½®è¿­ä»£éƒ½åšå¦‚ä¸‹çš„6æ­¥</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103633521-793fd47d-92aa-4e67-92c8-b7e4fc9ee64f.png"></p><ul><li>å¯¹äºç¬¬ä¸‰æ­¥<span class="math inline">\(q_t \approx Q_{\pi}(s_t,a_t)\)</span>ä¸­çš„åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}\)</span>ä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œæœ‰ä¸¤ä¸ªåŠæ³•è¿‘ä¼¼è®¡ç®—<span class="math inline">\(q_t\)</span><ul><li>ç¬¬ä¸€ä¸ªç®—æ³•ï¼šREINFORCEç®—æ³•<ul><li>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä½†æ˜¯å®ƒéœ€è¦ç©å®Œä¸€è½®æ¸¸æˆï¼Œè§‚æµ‹åˆ°æ‰€æœ‰çš„å¥–åŠ±ï¼Œç„¶åæ‰èƒ½æ›´æ–°ç­–ç•¥ç½‘ç»œã€‚</li></ul><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733103962960-effbf4fc-f109-43b7-b543-71f70c52fa40.png"></li></ul></li><li>ç¬¬äºŒä¸ªæ–¹æ³•ï¼šç”¨ç¥ç»ç½‘ç»œä»£æ›¿<span class="math inline">\(Q_{\pi}\)</span></li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733104000958-79e5150a-14a9-4e6d-8581-b5f7f526f9cb.png"></p><ul><li>æ€»ç»“ä¸€ä¸‹ï¼šå¦‚æœç­–ç•¥å‡½æ•°å·²çŸ¥ï¼Œé‚£ä¹ˆagentçš„åŠ¨ä½œå°±å¯ä»¥é‡‡æ ·è¿™ä¸ªç­–ç•¥å‡½æ•°ï¼Œè¿›è€Œè¢«æ§åˆ¶ã€‚ä½†æ˜¯ç­–ç•¥å‡½æ•°ä¸çŸ¥é“ï¼Œæ‰€ä»¥ç”¨ç­–ç•¥ç½‘ç»œæ¥è¿‘ä¼¼è¿™ä¸ªç­–ç•¥å‡½æ•°ã€‚</li><li>å…·ä½“æ˜¯ç”¨ç­–ç•¥æ¢¯åº¦ç®—æ³•æ¥å­¦ä¹ ç­–ç•¥ç½‘ç»œã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733105009444-077d9874-dad1-401a-b86c-73b4dffd5cd2.png"></p><h1 id="ä¹¦">ä¹¦</h1><ul><li>ç­–ç•¥å­¦ä¹ (policy-based reinforcement learning) ä»¥åŠç­–ç•¥æ¢¯åº¦ (policygradient)ã€‚ç­–ç•¥å­¦ä¹ çš„æ„æ€æ˜¯é€šè¿‡æ±‚è§£ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œå­¦å‡ºæœ€ä¼˜ç­–ç•¥å‡½æ•°æˆ–å®ƒçš„è¿‘ä¼¼å‡½æ•°(æ¯”å¦‚ç­–ç•¥ç½‘ç»œ)ã€‚</li></ul><h2 id="ç­–ç•¥ç½‘ç»œ">ç­–ç•¥ç½‘ç»œ</h2><p>æœ¬ç« å‡è®¾åŠ¨ä½œç©ºé—´æ˜¯ç¦»æ•£çš„ï¼Œæ¯”å¦‚<span class="math inline">\(A=\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>ã€‚ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi\)</span>æ˜¯ä¸ªæ¡ä»¶æ¦‚ç‡è´¨é‡å‡½æ•°ï¼š</p><p><span class="math inline">\(\pi(a|s) \triangleqP(A=a|S=s).\)</span></p><p>ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi\)</span>çš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>å’ŒåŠ¨ä½œ<span class="math inline">\(a\)</span>, è¾“å‡ºæ˜¯ä¸€ä¸ª 0 åˆ° 1 ä¹‹é—´çš„æ¦‚ç‡å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒæŠŠè¶…çº§ç›ä¸½æ¸¸æˆå½“å‰å±å¹•ä¸Šçš„ç”»é¢ä½œä¸º<span class="math inline">\(s\)</span>, ç­–ç•¥å‡½æ•°ä¼šè¾“å‡ºæ¯ä¸ªåŠ¨ä½œçš„æ¦‚ç‡å€¼ï¼š</p><p><span class="math inline">\(\pi(å·¦|s) = 0.5, \quad \pi(å³|s) = 0.2,\quad \pi(ä¸Š|s) = 0.3.\)</span></p><p>å¦‚æœæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªç­–ç•¥å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿å®ƒæ§åˆ¶æ™ºèƒ½ä½“ã€‚æ¯å½“è§‚æµ‹åˆ°ä¸€ä¸ªçŠ¶æ€<span class="math inline">\(s\)</span>,å°±ç”¨ç­–ç•¥å‡½æ•°è®¡ç®—å‡ºæ¯ä¸ªåŠ¨ä½œçš„æ¦‚ç‡å€¼ï¼Œç„¶ååšéšæœºæŠ½æ ·ï¼Œå¾—åˆ°ä¸€ä¸ªåŠ¨ä½œ<span class="math inline">\(a\)</span>,è®©æ™ºèƒ½ä½“æ‰§è¡Œ<span class="math inline">\(a\)</span>ã€‚</p><p>æ€ä¹ˆæ ·æ‰èƒ½å¾—åˆ°è¿™æ ·ä¸€ä¸ªç­–ç•¥å‡½æ•°å‘¢ï¼Ÿå½“å‰æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ç”¨ç¥ç»ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>è¿‘ä¼¼ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi(a|s)\)</span>ã€‚ç¥ç»ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>è¢«ç§°ä¸ºç­–ç•¥ç½‘ç»œã€‚</p><p><span class="math inline">\(\theta\)</span>è¡¨ç¤ºç¥ç»ç½‘ç»œçš„å‚æ•°ï¼›ä¸€å¼€å§‹éšæœºåˆå§‹åŒ–<span class="math inline">\(\theta\)</span>,éšååˆ©ç”¨æ”¶é›†çš„çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±å»æ›´æ–°<span class="math inline">\(\theta\)</span>ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733104100274-e498b077-9362-460d-8886-f1baf20d27c6.png"></p><p>ç­–ç•¥ç½‘ç»œçš„ç»“æ„å¦‚å›¾ 7.1 æ‰€ç¤ºã€‚ç­–ç•¥ç½‘ç»œçš„è¾“å…¥æ˜¯çŠ¶æ€<span class="math inline">\(s\)</span>ã€‚åœ¨ Atariæ¸¸æˆã€å›´æ£‹ç­‰åº”ç”¨ä¸­ï¼ŒçŠ¶æ€æ˜¯å¼ é‡ (æ¯”å¦‚å›¾ç‰‡),é‚£ä¹ˆåº”è¯¥å¦‚å›¾ 7.1æ‰€ç¤ºç”¨å·ç§¯ç½‘ç»œå¤„ç†è¾“å…¥ã€‚åœ¨æœºå™¨äººæ§åˆ¶ç­‰åº”ç”¨ä¸­ï¼ŒçŠ¶æ€<span class="math inline">\(s\)</span>æ˜¯å‘é‡ï¼Œå®ƒçš„å…ƒç´ æ˜¯å¤šä¸ªä¼ æ„Ÿå™¨çš„æ•°å€¼ï¼Œé‚£ä¹ˆåº”è¯¥æŠŠå·ç§¯ç½‘ç»œæ¢æˆå…¨è¿æ¥ç½‘ç»œã€‚ç­–ç•¥ç½‘ç»œè¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°æ˜¯softmax, å› æ­¤è¾“å‡ºçš„å‘é‡ (è®°ä½œ<span class="math inline">\(f\)</span>)æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ­£æ•°ï¼Œè€Œä¸”ç›¸åŠ ç­‰äº1ã€‚åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>çš„å¤§å°æ˜¯å¤šå°‘ï¼Œå‘é‡<span class="math inline">\(f\)</span>çš„ç»´åº¦å°±æ˜¯å¤šå°‘ã€‚åœ¨è¶…çº§ç›ä¸½çš„ä¾‹å­ä¸­ï¼Œ<span class="math inline">\(A=\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>,é‚£ä¹ˆ<span class="math inline">\(f\)</span>å°±æ˜¯ 3 ç»´çš„å‘é‡ï¼Œæ¯”å¦‚<span class="math inline">\(f = [0.2, 0.1, 0.7]\)</span>ã€‚</p><p><span class="math inline">\(f\)</span>æè¿°äº†åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>ä¸Šçš„ç¦»æ•£æ¦‚ç‡åˆ†å¸ƒï¼Œ<span class="math inline">\(f\)</span>æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªåŠ¨ä½œï¼š</p><p><span class="math inline">\(f_1 = \pi(å·¦|s) = 0.2, \quad f_2 =\pi(å³|s) = 0.1, \quad f_3 = \pi(ä¸Š|s) = 0.7.\)</span></p><h2 id="ç­–ç•¥å­¦ä¹ çš„ç›®æ ‡å‡½æ•°">ç­–ç•¥å­¦ä¹ çš„ç›®æ ‡å‡½æ•°</h2><p>ä¸ºäº†æ¨å¯¼ç­–ç•¥å­¦ä¹ çš„ç›®æ ‡å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¤ä¹ å›æŠ¥å’Œä»·å€¼å‡½æ•°ã€‚å›æŠ¥<span class="math inline">\(U_t\)</span>æ˜¯ä»<span class="math inline">\(t\)</span>æ—¶åˆ»å¼€å§‹çš„æ‰€æœ‰å¥–åŠ±ä¹‹å’Œã€‚<span class="math inline">\(U_t\)</span>ä¾èµ–äº<span class="math inline">\(t\)</span>æ—¶åˆ»å¼€å§‹çš„æ‰€æœ‰çŠ¶æ€å’ŒåŠ¨ä½œï¼š</p><p><span class="math inline">\(S_t, A_t, S_{t+1}, A_{t+1}, S_{t+2},A_{t+2}, \cdots\)</span></p><p>åœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»ï¼Œ<span class="math inline">\(U_t\)</span>æ˜¯éšæœºå˜é‡ï¼Œå®ƒçš„ä¸ç¡®å®šæ€§æ¥è‡ªäºæœªæ¥æœªçŸ¥çš„çŠ¶æ€å’ŒåŠ¨ä½œã€‚åŠ¨ä½œä»·å€¼å‡½æ•°çš„å®šä¹‰æ˜¯ï¼š</p><p><span class="math inline">\(Q_{\pi}(s_t, a_t) = \mathbb{E}[U_t | S_t= s_t, A_t = a_t].\)</span></p><p>æ¡ä»¶æœŸæœ›æŠŠ<span class="math inline">\(t\)</span>æ—¶åˆ»çŠ¶æ€<span class="math inline">\(s_t\)</span>å’ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>çœ‹åšå·²çŸ¥è§‚æµ‹å€¼ï¼ŒæŠŠ<span class="math inline">\(t+1\)</span>æ—¶åˆ»åçš„çŠ¶æ€å’ŒåŠ¨ä½œçœ‹åšæœªçŸ¥å˜é‡ï¼Œå¹¶æ¶ˆé™¤è¿™äº›å˜é‡ã€‚çŠ¶æ€ä»·å€¼å‡½æ•°çš„å®šä¹‰æ˜¯ï¼š</p><p><span class="math inline">\(V_{\pi}(s_t) = \mathbb{E}_{A_t \sim\pi(\cdot | s_t; \theta)}[Q_{\pi}(s_t, A_t)].\)</span></p><p>çŠ¶æ€ä»·å€¼æ—¢ä¾èµ–äºå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,ä¹Ÿä¾èµ–äºç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>çš„å‚æ•°<span class="math inline">\(\theta\)</span>ã€‚</p><ul><li>å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>è¶Šå¥½ï¼Œåˆ™<span class="math inline">\(V_{\pi}(s_t)\)</span>è¶Šå¤§ï¼Œå³å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›è¶Šå¤§ã€‚ä¾‹å¦‚ï¼Œåœ¨è¶…çº§ç›ä¸½æ¸¸æˆä¸­ï¼Œå¦‚æœç›ä¸½å¥¥å·²ç»æ¥è¿‘ç»ˆç‚¹(ä¹Ÿå°±æ˜¯è¯´å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>å¾ˆå¥½),é‚£ä¹ˆå›æŠ¥çš„æœŸæœ›å°±ä¼šå¾ˆå¤§ã€‚</li><li>ç­–ç•¥<span class="math inline">\(\pi\)</span>è¶Šå¥½ (å³å‚æ•°<span class="math inline">\(\theta\)</span>è¶Šå¥½),é‚£ä¹ˆ<span class="math inline">\(V_{\pi}(s_t)\)</span>ä¹Ÿä¼šè¶Šå¤§ã€‚ä¾‹å¦‚ï¼Œä»åŒä¸€èµ·ç‚¹å‡ºå‘æ‰“æ¸¸æˆï¼Œé«˜æ‰‹(å¥½çš„ç­–ç•¥) çš„æœŸæœ›å›æŠ¥è¿œé«˜äºåˆå­¦è€… (å·®çš„ç­–ç•¥)ã€‚</li></ul><p>å¦‚æœä¸€ä¸ªç­–ç•¥å¾ˆå¥½ï¼Œé‚£ä¹ˆçŠ¶æ€ä»·å€¼<span class="math inline">\(V_{\pi}(S)\)</span>çš„å‡å€¼åº”å½“å¾ˆå¤§ã€‚å› æ­¤æˆ‘ä»¬å®šä¹‰ç›®æ ‡å‡½æ•°ï¼š</p><p><span class="math inline">\(J(\theta) =\mathbb{E}_S[V_{\pi}(S)].\)</span></p><p>è¿™ä¸ªç›®æ ‡å‡½æ•°æ’é™¤æ‰äº†çŠ¶æ€<span class="math inline">\(S\)</span>çš„å› ç´ ï¼Œåªä¾èµ–äºç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi\)</span>çš„å‚æ•°<span class="math inline">\(\theta\)</span>; ç­–ç•¥è¶Šå¥½ï¼Œåˆ™<span class="math inline">\(J(\theta)\)</span>è¶Šå¤§ã€‚æ‰€ä»¥ç­–ç•¥å­¦ä¹ å¯ä»¥æè¿°ä¸ºè¿™æ ·ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼š</p><p><span class="math inline">\(\max_{\theta} J(\theta).\)</span></p><p>æˆ‘ä»¬å¸Œæœ›é€šè¿‡å¯¹ç­–ç•¥ç½‘ç»œå‚æ•°<span class="math inline">\(\theta\)</span>çš„æ›´æ–°ï¼Œä½¿å¾—ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>è¶Šæ¥è¶Šå¤§ï¼Œä¹Ÿå°±æ„å‘³ç€ç­–ç•¥ç½‘ç»œè¶Šæ¥è¶Šå¼ºã€‚æƒ³è¦æ±‚è§£æœ€å¤§åŒ–é—®é¢˜ï¼Œæ˜¾ç„¶å¯ä»¥ç”¨æ¢¯åº¦ä¸Šå‡æ›´æ–°<span class="math inline">\(\theta\)</span>,ä½¿å¾—<span class="math inline">\(J(\theta)\)</span>å¢å¤§ã€‚è®¾å½“å‰ç­–ç•¥ç½‘ç»œçš„å‚æ•°ä¸º<span class="math inline">\(\theta_{\text{now}}\)</span>,åšæ¢¯åº¦ä¸Šå‡æ›´æ–°å‚æ•°ï¼Œå¾—åˆ°æ–°çš„å‚æ•°<span class="math inline">\(\theta_{\text{new}}\)</span>:</p><p><span class="math inline">\(\theta_{\text{new}} \leftarrow\theta_{\text{now}} + \beta \cdot \nabla_{\theta}J(\theta_{\text{now}}).\)</span></p><p>æ­¤å¤„çš„<span class="math inline">\(\beta\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚ä¸Šé¢çš„å…¬å¼å°±æ˜¯è®­ç»ƒç­–ç•¥ç½‘ç»œçš„åŸºæœ¬æ€è·¯ï¼Œå…¶ä¸­çš„æ¢¯åº¦</p><p><span class="math inline">\(\nabla_{\theta}J\left(\theta_{\text{now}}\right) \triangleq \frac{\partialJ(\theta)}{\partial \theta} \bigg|_{\theta =\theta_{\text{now}}}\)</span></p><p>è¢«ç§°ä½œç­–ç•¥æ¢¯åº¦ã€‚ç­–ç•¥æ¢¯åº¦å¯ä»¥å†™æˆä¸‹é¢å®šç†ä¸­çš„æœŸæœ›å½¢å¼ã€‚ä¹‹åçš„ç®—æ³•æ¨å¯¼éƒ½è¦åŸºäºè¿™ä¸ªå®šç†ï¼Œå¹¶å¯¹å…¶ä¸­çš„æœŸæœ›åšè¿‘ä¼¼ã€‚</p><p><span class="math inline">\(\frac{\partial J(\theta)}{\partial\theta} = \mathbb{E}_S \left[ \mathbb{E}_{A \sim \pi(\cdot|\theta)}\left[ \frac{\partial \ln \pi(A|S;\theta)}{\partial \theta} \cdotQ_{\pi}(S,A) \right] \right].\)</span></p><p>æ³¨ä¸Šé¢çš„ç­–ç•¥æ¢¯åº¦å®šç†æ˜¯ä¸ä¸¥è°¨çš„è¡¨è¿°ï¼Œå°½ç®¡å¤§å¤šæ•°è®ºæ–‡å’Œä¹¦ç±ä½¿ç”¨è¿™ç§è¡¨è¿°ã€‚ä¸¥æ ¼åœ°è®²ï¼Œè¿™ä¸ªå®šç†åªæœ‰åœ¨â€œçŠ¶æ€<span class="math inline">\(S\)</span>æœä»é©¬å°”ç§‘å¤«é“¾çš„ç¨³æ€åˆ†å¸ƒ<span class="math inline">\(d(\cdot)\)</span>â€è¿™ä¸ªå‡è®¾ä¸‹æ‰æˆç«‹ã€‚å®šç†ä¸­çš„ç­‰å·å…¶å®æ˜¯ä¸å¯¹çš„ï¼ŒæœŸæœ›å‰é¢åº”è¯¥æœ‰ä¸€é¡¹ç³»æ•°<span class="math inline">\(\frac{1-\gamma^n}{1-\gamma}\)</span>,å…¶ä¸­<span class="math inline">\(\gamma\)</span>æ˜¯æŠ˜æ‰£ç‡ï¼Œ<span class="math inline">\(n\)</span>æ˜¯ä¸€å±€æ¸¸æˆçš„é•¿åº¦ã€‚ä¸¥æ ¼åœ°è®²ï¼Œç­–ç•¥æ¢¯åº¦å®šç†åº”è¯¥æ˜¯ï¼š</p><p><span class="math inline">\(\frac{\partial J(\theta)}{\partial\theta} = \frac{1-\gamma^n}{1-\gamma} \cdot \mathbb{E}_S \sim d(\cdot)\left[ \mathbb{E}_{A \sim \pi(\cdot|S;\theta)} \left[ \frac{\partial \ln\pi(A|S;\theta)}{\partial \theta} \cdot Q_{\pi}(S,A) \right]\right].\)</span></p><p><span class="math inline">\(1-\gamma^n\)</span>ä¼šè¢«å­¦ä¹ ç‡<span class="math inline">\(\beta\)</span>å¸æ”¶ã€‚</p><h2 id="ç­–ç•¥æ¢¯åº¦å®šç†çš„è¯æ˜">ç­–ç•¥æ¢¯åº¦å®šç†çš„è¯æ˜</h2><p>æŠŠç­–ç•¥ç½‘ç»œ<span class="math inline">\(\pi(a|s;\theta)\)</span>çœ‹åšåŠ¨ä½œçš„æ¦‚ç‡è´¨é‡å‡½æ•°(æˆ–æ¦‚ç‡å¯†åº¦å‡½æ•°)ã€‚çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_{\pi}(s)\)</span>å¯ä»¥å†™æˆï¼š</p><p><span class="math inline">\(V_{\pi}(s) = \mathbb{E}_{A \sim\pi(\cdot|\theta)}[Q_{\pi}(s,A)] = \sum_{a \in A} \pi(a|s;\theta) \cdotQ_{\pi}(s,a).\)</span></p><p>çŠ¶æ€ä»·å€¼<span class="math inline">\(V_{\pi}(s)\)</span>å…³äº<span class="math inline">\(\theta\)</span>çš„æ¢¯åº¦å¯ä»¥å†™ä½œï¼š</p><p><span class="math inline">\(\frac{\partial V_{\pi}(s)}{\partial\theta} = \frac{\partial}{\partial \theta} \sum_{a \in A}\pi(a|s;\theta) \cdot Q_{\pi}(s,a) = \sum_{a \in A} \frac{\partial\pi(a|s;\theta)  \cdot Q_{\pi}(s,a)}{\partial \theta}\)</span></p><p>ä¸Šé¢ç¬¬äºŒä¸ªç­‰å¼æŠŠæ±‚å¯¼æ”¾å…¥è¿åŠ é‡Œé¢ï¼›ç­‰å¼æˆç«‹çš„åŸå› æ˜¯æ±‚å¯¼çš„å¯¹è±¡<span class="math inline">\(\theta\)</span>ä¸è¿åŠ çš„å¯¹è±¡<span class="math inline">\(u\)</span>ä¸åŒã€‚å›å¿†ä¸€ä¸‹é“¾å¼æ³•åˆ™ï¼šè®¾<span class="math inline">\(z = f(x) \cdot g(x)\)</span>, é‚£ä¹ˆ</p><p><span class="math inline">\(\frac{\partial z}{\partial x} =\frac{\partial f(x)}{\partial x} \cdot g(x) + f(x) \cdot \frac{\partialg(x)}{\partial x}\)</span>.</p><p>åº”ç”¨é“¾å¼æ³•åˆ™ï¼Œå…¬å¼ (7.1) ä¸­çš„æ¢¯åº¦å¯ä»¥å†™ä½œï¼š</p><p><span class="math inline">\(\begin{align*}\frac{\partial V_{\pi}(s)}{\partial \theta} &amp;= \sum_{a \in\mathcal{A}} \frac{\partial \pi(a \mid s; \theta)}{\partial \theta}\cdot Q_{\pi}(s, a) + \sum_{a \in \mathcal{A}} \pi(a \mid s; \theta)\cdot \frac{\partial Q_{\pi}(s, a)}{\partial \theta} \\&amp;= \sum_{a \in \mathcal{A}} \frac{\partial \pi(a \mid s;\theta)}{\partial \theta} \cdot Q_{\pi}(s, a) + \underbrace{E_{A \sim\pi(\cdot \mid s; \theta)}}_{\text{è®¾ä¸º } x} \left[ \frac{\partialQ_{\pi}(s, A)}{\partial \theta} \right].\end{align*}\)</span></p><p>ä¸Šé¢å…¬å¼æœ€å³è¾¹ä¸€é¡¹<span class="math inline">\(x\)</span>çš„åˆ†æéå¸¸å¤æ‚ï¼Œæ­¤å¤„ä¸å…·ä½“åˆ†æäº†ã€‚ç”±ä¸Šé¢çš„å…¬å¼å¯å¾—ï¼š</p><p><span class="math inline">\(\begin{align*}\frac{\partial V_{\pi}(s)}{\partial \theta} &amp;= \sum_{A \in\mathcal{A}} \frac{\partial \pi(A \mid S; \theta)}{\partial \theta}\cdot Q_{\pi}(S, A) + x \\&amp;= \sum_{A \in \mathcal{A}} \pi(A \mid S; \theta) \cdot\frac{1}{\pi(A \mid S; \theta)} \cdot \frac{\partial \pi(A \mid S;\theta)}{\partial \theta} \cdot Q_{\pi}(S, A) + x \\&amp;= \sum_{A \in \mathcal{A}} \pi(A \mid S; \theta) \cdot\frac{\partial \ln \pi(A \mid S; \theta)}{\partial \theta} \cdotQ_{\pi}(S, A) + x.\end{align*}\)</span></p><p><span class="math inline">\(\frac{\partial V_{\pi}(s)}{\partial\theta} = \mathbb{E}_{A \sim \pi(\cdot|\theta)} \left[ \frac{\partial\ln \pi(A|S;\theta)}{\partial \theta} \cdot Q_{\pi}(S,A) \right] + x.\quad (7.2)\)</span></p><p>å…¬å¼ä¸­çº¢è‰²æ ‡å‡ºçš„<span class="math inline">\(\pi(A|S;\theta)\)</span>è¢«çœ‹åšæ¦‚ç‡è´¨é‡å‡½æ•°ï¼Œå› æ­¤è¿åŠ å¯ä»¥å†™æˆæœŸæœ›çš„å½¢å¼ã€‚ç”±ç›®æ ‡å‡½æ•°çš„å®šä¹‰<span class="math inline">\(J(\theta) =\mathbb{E}_S[V_{\pi}(S)]\)</span>å¯å¾—ï¼š</p><p><span class="math inline">\(\frac{\partial J(\theta)}{\partial\theta} = \mathbb{E}_S \left[ \frac{\partial V_{\pi}(S)}{\partial\theta} \right] = \mathbb{E}_S \left[ \mathbb{E}_{A \sim\pi(\cdot|\theta)} \left[ \frac{\partial \ln \pi(A|S;\theta)}{\partial\theta} \cdot Q_{\pi}(S,A) \right] \right] +\mathbb{E}_S[x].\)</span></p><p>ä¸ä¸¥è°¨çš„è¯æ˜é€šå¸¸å¿½ç•¥æ‰<span class="math inline">\(x\)</span>,äºæ˜¯å¾—åˆ°å®šç† 7.1ã€‚</p><h2 id="è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦">è¿‘ä¼¼ç­–ç•¥æ¢¯åº¦</h2><p>å…ˆå¤ä¹ ä¸€ä¸‹å‰ä¸¤å°èŠ‚çš„å†…å®¹ã€‚ç­–ç•¥å­¦ä¹ å¯ä»¥è¡¨è¿°ä¸ºè¿™æ ·ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼š</p><p><span class="math inline">\(\max_{\theta} \left\{ J(\theta)\triangleq \mathbb{E}_S \left[ V_{\pi}(S) \right] \right\}.\)</span></p><p>æ±‚è§£è¿™ä¸ªæœ€å¤§åŒ–é—®é¢˜æœ€ç®€å•çš„ç®—æ³•å°±æ˜¯æ¢¯åº¦ä¸Šå‡ï¼š</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\nabla_{\theta} J(\theta).\)</span></p><p>å…¶ä¸­çš„<span class="math inline">\(\nabla_{\theta}J(\theta)\)</span>æ˜¯ç­–ç•¥æ¢¯åº¦ã€‚ç­–ç•¥æ¢¯åº¦å®šç†è¯æ˜ï¼š</p><p><span class="math inline">\(\nabla_{\theta} J(\theta) = \mathbb{E}_S\left[ \mathbb{E}_{A \sim \pi(\cdot|\theta)} \left[ Q_{\pi}(S,A) \cdot\nabla_{\theta} \ln \pi(A|S;\theta) \right] \right].\)</span></p><p>è§£ææ±‚å‡ºè¿™ä¸ªæœŸæœ›æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“çŠ¶æ€<span class="math inline">\(S\)</span>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼›å³ä½¿æˆ‘ä»¬çŸ¥é“<span class="math inline">\(S\)</span>çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œèƒ½å¤Ÿé€šè¿‡è¿åŠ æˆ–è€…å®šç§¯åˆ†æ±‚å‡ºæœŸæœ›ï¼Œæˆ‘ä»¬ä¹Ÿä¸æ„¿æ„è¿™æ ·åšï¼Œå› ä¸ºè¿åŠ æˆ–è€…å®šç§¯åˆ†çš„è®¡ç®—é‡éå¸¸å¤§ã€‚</p><p>å›å¿†ä¸€ä¸‹ï¼Œç¬¬ 2ç« ä»‹ç»äº†æœŸæœ›çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼æ–¹æ³•ï¼Œå¯ä»¥å°†è¿™ç§æ–¹æ³•ç”¨äºè¿‘ä¼¼ç­–ç•¥æ¢¯åº¦ã€‚æ¯æ¬¡ä»ç¯å¢ƒä¸­è§‚æµ‹åˆ°ä¸€ä¸ªçŠ¶æ€<span class="math inline">\(s\)</span>, å®ƒç›¸å½“äºéšæœºå˜é‡<span class="math inline">\(S\)</span>çš„è§‚æµ‹å€¼ã€‚ç„¶åå†æ ¹æ®å½“å‰çš„ç­–ç•¥ç½‘ç»œ(ç­–ç•¥ç½‘ç»œçš„å‚æ•°å¿…é¡»æ˜¯æœ€æ–°çš„) éšæœºæŠ½æ ·å¾—å‡ºä¸€ä¸ªåŠ¨ä½œï¼š</p><p><span class="math inline">\(a \sim \pi(\cdot | s;\theta).\)</span></p><p>è®¡ç®—éšæœºæ¢¯åº¦ï¼š</p><p><span class="math inline">\(\boldsymbol{g}(s,a;\theta) \triangleqQ_{\pi}(s,a) \cdot \nabla_{\theta} \ln \pi(a|s;\theta).\)</span></p><p>å¾ˆæ˜¾ç„¶ï¼Œ<span class="math inline">\(\boldsymbol{g}(s,a;\theta)\)</span>æ˜¯ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_{\theta} J(\theta)\)</span>çš„æ— åä¼°è®¡ï¼š</p><p><span class="math inline">\(\nabla_{\theta} J(\theta) = \mathbb{E}_S\left[ \mathbb{E}_{A \sim \pi(\cdot|\theta)} \left[\boldsymbol{g}(S,A;\theta) \right] \right].\)</span></p><p>äºæ˜¯æˆ‘ä»¬å¾—åˆ°ä¸‹é¢çš„ç»“è®ºï¼š</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-3-Policy-based-RL/1733104886461-fef380bf-3837-4b5c-a44a-649a5cac301f.png"></p><p>å¯¹æ— åä¼°è®¡çš„è§£é‡Šï¼šChatGPT</p><p>åœ¨ç»Ÿè®¡å­¦å’Œæ¦‚ç‡è®ºä¸­ï¼Œä¸€ä¸ªä¼°è®¡é‡å¦‚æœåœ¨å¤šæ¬¡ç‹¬ç«‹é‡å¤é‡‡æ ·ä¸‹çš„æœŸæœ›å€¼ç­‰äºè¢«ä¼°è®¡çš„å‚æ•°çš„çœŸå®å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªä¼°è®¡é‡è¢«ç§°ä¸º<strong>æ— åä¼°è®¡</strong>ã€‚æ¢å¥è¯è¯´ï¼Œæ— åä¼°è®¡çš„æœŸæœ›å€¼ä¸è¢«ä¼°è®¡å‚æ•°çš„çœŸå®å€¼ç›¸ç­‰ï¼Œä¸å­˜åœ¨ç³»ç»Ÿæ€§çš„ä¼°è®¡åå·®ã€‚</p><p>å½¢å¼ä¸Šï¼Œå¯¹äºä¼°è®¡é‡ (<span class="math inline">\(\hat{\theta}\)</span>) å’ŒçœŸå®å‚æ•° (<span class="math inline">\(\theta\)</span>)ï¼Œå¦‚æœæ»¡è¶³ï¼š</p><p><span class="math inline">\(\mathbb{E}[\hat{\theta}] =\theta,\)</span></p><p>å…¶ä¸­ï¼Œ(<span class="math inline">\(\mathbb{E}[\cdot]\)</span>)è¡¨ç¤ºæœŸæœ›å€¼ï¼Œé‚£ä¹ˆä¼°è®¡é‡ (<span class="math inline">\(\hat{\theta}\)</span>) å°±æ˜¯æ— åä¼°è®¡ã€‚</p><p>æ— åæ€§æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œå› ä¸ºå®ƒæ„å‘³ç€åœ¨é•¿æœŸçš„ç»Ÿè®¡å­¦æ„ä¹‰ä¸Šï¼Œä¼°è®¡é‡ä¸ä¼šç³»ç»Ÿæ€§åœ°é«˜ä¼°æˆ–ä½ä¼°çœŸå®å‚æ•°å€¼ã€‚ç„¶è€Œï¼Œæ— åæ€§å¹¶ä¸æ„å‘³ç€åœ¨å•æ¬¡ä¼°è®¡ä¸­ä¼°è®¡å€¼ä¸€å®šä¼šéå¸¸æ¥è¿‘çœŸå®å€¼ã€‚æ–¹å·®å’Œå‡æ–¹è¯¯å·®ä¹Ÿæ˜¯è¯„ä»·ä¼°è®¡é‡æ€§èƒ½çš„é‡è¦æŒ‡æ ‡ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç ”ç©¶äººå‘˜é€šå¸¸å¸Œæœ›ä½¿ç”¨æ— åä¼°è®¡ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç»Ÿè®¡å­¦ç†è®ºä¸­æ›´å®¹æ˜“å¤„ç†ã€‚ä½†å¹¶éæ‰€æœ‰ä¼°è®¡éƒ½èƒ½æ‰¾åˆ°æ— åçš„å½¢å¼ï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦æƒè¡¡æ— åæ€§ä¸å…¶ä»–æ€§è´¨ï¼ˆä¾‹å¦‚æ–¹å·®ï¼‰æ¥é€‰æ‹©åˆé€‚çš„ä¼°è®¡æ–¹æ³•ã€‚</p><p>åº”ç”¨ä¸Šè¿°ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥åšéšæœºæ¢¯åº¦ä¸Šå‡æ¥æ›´æ–°<span class="math inline">\(\theta\)</span>, ä½¿å¾—ç›®æ ‡å‡½æ•°<span class="math inline">\(J(\theta)\)</span>é€æ¸å¢é•¿ï¼š</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\boldsymbol{g}(s,a;\theta).\)</span></p><p>æ­¤å¤„çš„<span class="math inline">\(\beta\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä»ç„¶ä¸å¯è¡Œï¼Œæˆ‘ä»¬è®¡ç®—ä¸å‡º<span class="math inline">\(\boldsymbol{g}(s,a;\theta)\)</span>,åŸå› åœ¨äºæˆ‘ä»¬ä¸çŸ¥é“åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}(s,a)\)</span>ã€‚åœ¨åé¢ä¸¤èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸¤ç§æ–¹æ³•å¯¹<span class="math inline">\(Q_{\pi}(s,a)\)</span>åšè¿‘ä¼¼ï¼šä¸€ç§æ–¹æ³•æ˜¯ REINFORCE,ç”¨å®é™…è§‚æµ‹çš„å›æŠ¥<span class="math inline">\(u\)</span>è¿‘ä¼¼<span class="math inline">\(Q_{\pi}(s,a)\)</span>; å¦ä¸€ç§æ–¹æ³•æ˜¯actor-critic,ç”¨ç¥ç»ç½‘ç»œ<span class="math inline">\(q(s,a;\boldsymbol{w})\)</span>è¿‘ä¼¼<span class="math inline">\(Q_{\pi}(s,a)\)</span>ã€‚</p><h2 id="reinforce">REINFORCE</h2><p>ç­–ç•¥æ¢¯åº¦æ–¹æ³•ç”¨<span class="math inline">\(\nabla_{\theta}J(\theta)\)</span>çš„è¿‘ä¼¼æ¥æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°<span class="math inline">\(\theta\)</span>,ä»è€Œå¢å¤§ç›®æ ‡å‡½æ•°ã€‚ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¨å¯¼å‡ºç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_{\theta}J(\theta)\)</span>çš„æ— åä¼°è®¡ï¼Œå³ä¸‹é¢çš„éšæœºæ¢¯åº¦ï¼š</p><p><span class="math inline">\(\boldsymbol{g}(s,a;\theta) \triangleqQ_{\pi}(s,a) \cdot \nabla_{\theta} \ln \pi(a|s;\theta).\)</span></p><p>ä½†æ˜¯å…¶ä¸­çš„åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\pi}\)</span>æ˜¯æœªçŸ¥çš„ã€å¯¼è‡´æ— æ³•ç›´æ¥è®¡ç®—<span class="math inline">\(\boldsymbol{g}(s,a;\theta)\)</span>ã€‚REINFORCEè¿›ä¸€æ­¥å¯¹<span class="math inline">\(Q_{\pi}\)</span>åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼ŒæŠŠå®ƒæ›¿æ¢æˆå›æŠ¥<span class="math inline">\(u\)</span>ã€‚</p><p><strong>REINFORCE</strong> <strong>çš„ç®€åŒ–æ¨å¯¼</strong></p><p>è®¾ä¸€å±€æ¸¸æˆæœ‰<span class="math inline">\(n\)</span>æ­¥ï¼Œä¸€å±€ä¸­çš„å¥–åŠ±è®°ä½œ<span class="math inline">\(R_1, \cdots, R_n\)</span>ã€‚å›å¿†ä¸€ä¸‹ï¼Œ<span class="math inline">\(t\)</span>æ—¶åˆ»çš„æŠ˜æ‰£å›æŠ¥å®šä¹‰ä¸ºï¼š</p><p><span class="math inline">\(U_t = \sum_{k=t}^n \gamma^{k-t} \cdotR_k.\)</span></p><p>è€ŒåŠ¨ä½œä»·å€¼å®šä¹‰ä¸º<span class="math inline">\(U_t\)</span>çš„æ¡ä»¶æœŸæœ›ï¼š</p><p><span class="math inline">\(Q_{\pi}(s_t, a_t) = \mathbb{E}[U_t | S_t= s_t, A_t = a_t].\)</span></p><p>æˆ‘ä»¬å¯ä»¥ç”¨è’™ç‰¹å¡æ´›è¿‘ä¼¼ä¸Šé¢çš„æ¡ä»¶æœŸæœ›ã€‚ä»æ—¶åˆ»<span class="math inline">\(t\)</span>å¼€å§‹ï¼Œæ™ºèƒ½ä½“å®Œæˆä¸€å±€æ¸¸æˆï¼Œè§‚æµ‹åˆ°å…¨éƒ¨å¥–åŠ±<span class="math inline">\(r_t, \cdots, r_n\)</span>, ç„¶åå¯ä»¥è®¡ç®—å‡º<span class="math inline">\(u_t = \sum_{k=t}^n \gamma^{k-t} \cdotr_k\)</span>ã€‚å› ä¸º<span class="math inline">\(u_t\)</span>æ˜¯éšæœºå˜é‡<span class="math inline">\(U_t\)</span>çš„è§‚æµ‹å€¼ï¼Œæ‰€ä»¥<span class="math inline">\(u_t\)</span>æ˜¯ä¸Šé¢å…¬å¼ä¸­æœŸæœ›çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚åœ¨å®è·µä¸­ï¼Œå¯ä»¥ç”¨<span class="math inline">\(u_t\)</span>ä»£æ›¿<span class="math inline">\(Q_{\pi}(s_t, a_t)\)</span>, é‚£ä¹ˆéšæœºæ¢¯åº¦<span class="math inline">\(\boldsymbol{g}(s_t, a_t;\theta)\)</span>å¯ä»¥è¿‘ä¼¼æˆï¼š</p><p><span class="math inline">\(\tilde{\boldsymbol{g}}(s_t, a_t; \theta)= u_t \cdot \nabla_{\theta} \ln \pi(a_t | s_t; \theta).\)</span></p><p><span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>æ˜¯<span class="math inline">\(\boldsymbol{g}\)</span>çš„æ— åä¼°è®¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç­–ç•¥æ¢¯åº¦<span class="math inline">\(\nabla_{\theta}J(\theta)\)</span>çš„æ— åä¼°è®¡ï¼›<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>ä¹Ÿæ˜¯ä¸€ç§éšæœºæ¢¯åº¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨åå‘ä¼ æ’­è®¡ç®—å‡º<span class="math inline">\(\ln\pi\)</span>å…³äº<span class="math inline">\(\theta\)</span>çš„æ¢¯åº¦ï¼Œè€Œä¸”å¯ä»¥å®é™…è§‚æµ‹åˆ°<span class="math inline">\(u_t\)</span>, äºæ˜¯æˆ‘ä»¬å¯ä»¥å®é™…è®¡ç®—å‡ºéšæœºæ¢¯åº¦<span class="math inline">\(\tilde{\boldsymbol{g}}\)</span>çš„å€¼ã€‚æœ‰äº†éšæœºæ¢¯åº¦çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åšéšæœºæ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°<span class="math inline">\(\theta\)</span>:</p><p><span class="math inline">\(\theta \leftarrow \theta + \beta \cdot\tilde{\boldsymbol{g}}(s_t, a_t; \theta).\)</span></p><p>æ ¹æ®ä¸Šè¿°æ¨å¯¼ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è®­ç»ƒç­–ç•¥ç½‘ç»œçš„ç®—æ³•ï¼Œå³ REINFORCEã€‚</p><p><strong>è®­ç»ƒæµç¨‹</strong></p><p>å½“å‰ç­–ç•¥ç½‘ç»œçš„å‚æ•°æ˜¯<span class="math inline">\(\theta_{\text{now}}\)</span>ã€‚REINFORCEæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤å¯¹ç­–ç•¥ç½‘ç»œçš„å‚æ•°åšä¸€æ¬¡æ›´æ–°ï¼š</p><ol type="1"><li>ç”¨ç­–ç•¥ç½‘ç»œ<span class="math inline">\(\theta_{\text{now}}\)</span>æ§åˆ¶æ™ºèƒ½ä½“ä»å¤´å¼€å§‹ç©ä¸€å±€æ¸¸æˆï¼Œå¾—åˆ°ä¸€æ¡è½¨è¿¹(trajectory):<span class="math inline">\(s_1, a_1, r_1, s_2, a_2, r_2,\cdots, s_n, a_n, r_n\)</span>.</li><li>è®¡ç®—æ‰€æœ‰çš„å›æŠ¥ï¼š<span class="math inline">\(u_t = \sum_{k=t}^n\gamma^{k-t} \cdot r_k, \forall t=1, \cdots, n\)</span>.</li><li>ç”¨<span class="math inline">\(\{(s_t,a_t)\}_{t=1}^n\)</span>ä½œä¸ºæ•°æ®ï¼Œåšåå‘ä¼ æ’­è®¡ç®—ï¼š<span class="math inline">\(\nabla_{\theta} \ln \pi(a_t | s_t;\theta_{\text{now}}), \forall t=1, \cdots, n\)</span>.</li><li>åšéšæœºæ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥ç½‘ç»œå‚æ•°ï¼š<span class="math inline">\(\theta_{\text{new}} \leftarrow \theta_{\text{now}}+ \beta \cdot \sum_{t=1}^n \gamma^{t-1} \cdot u_t \cdot \nabla_{\theta}\ln \pi(a_t | s_t; \theta_{\text{now}})\)</span>.</li></ol><p>æ³¨ï¼šåœ¨ç®—æ³•æœ€åä¸€æ­¥ä¸­ï¼Œéšæœºæ¢¯åº¦å‰é¢ä¹˜ä»¥ç³»æ•°<span class="math inline">\(\gamma^{t-1}\)</span>ã€‚ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªç³»æ•°å‘¢ï¼ŸåŸå› æ˜¯è¿™æ ·çš„ï¼šå‰é¢REINFORCEçš„æ¨å¯¼æ˜¯ç®€åŒ–çš„ï¼Œè€Œéä¸¥è°¨çš„æ•°å­¦æ¨å¯¼ï¼›æŒ‰ç…§æˆ‘ä»¬ç®€åŒ–çš„æ¨å¯¼ï¼Œä¸åº”è¯¥ä¹˜ä»¥ç³»æ•°<span class="math inline">\(\gamma^{t-1}\)</span><font style="color:rgb(6, 6, 7);">ã€‚å½“è¿›è¡Œä¸¥æ ¼çš„æ•°å­¦æ¨å¯¼çš„æ—¶å€™ï¼Œå¾—å‡ºçš„REINFORCE ç®—æ³•éœ€è¦ç³»æ•° </font><span class="math inline">\(\gamma^{t-1}\)</span><font style="color:rgb(6, 6, 7);">ã€‚</font></p><p><font style="color:rgb(6, 6, 7);">æ³¨ï¼šREINFORCE å±äºåŒç­–ç•¥(on-policy), è¦æ±‚è¡Œä¸ºç­–ç•¥ (behavior policy) ä¸ç›®æ ‡ç­–ç•¥ (target policy)ç›¸åŒï¼Œä¸¤è€…éƒ½å¿…é¡»æ˜¯ç­–ç•¥ç½‘ç»œ </font><span class="math inline">\(\pi(a|s;\theta_{\text{now}})\)</span><font style="color:rgb(6, 6, 7);">,å…¶ä¸­ </font><span class="math inline">\(\theta_{\text{now}}\)</span><font style="color:rgb(6, 6, 7);">æ˜¯ç­–ç•¥ç½‘ç»œå½“å‰çš„å‚æ•°ã€‚æ‰€ä»¥ç»éªŒå›æ”¾ä¸é€‚ç”¨äº REINFORCEã€‚</font></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.2 value based RL</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤ä¹ ">å¤ä¹ </h1><ol type="1"><li>åœ¨å­¦ä¹ DQNä¹‹å‰ï¼Œé¦–å…ˆå¤ä¹ ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚åœ¨ä¸€å±€æ¸¸æˆä¸­ï¼ŒæŠŠä»èµ·å§‹åˆ°ç»“æŸçš„æ‰€æœ‰å¥–åŠ±è®°ä½œï¼š<span class="math inline">\(R_1, \cdots, R_t, \cdots, R_n\)</span>ã€‚</li><li>å®šä¹‰æŠ˜æ‰£ç‡<span class="math inline">\(\gamma \in [0,1]\)</span>ã€‚æŠ˜æ‰£å›æŠ¥çš„å®šä¹‰æ˜¯ï¼š</li></ol><p><span class="math inline">\(U_t = R_t + \gamma \cdot R_{t+1} +\gamma^2 \cdot R_{t+2} + \cdots + \gamma^{n-t} \cdot R_n\)</span>ã€‚</p><ol start="3" type="1"><li>åœ¨æ¸¸æˆå°šæœªç»“æŸçš„<span class="math inline">\(t\)</span>æ—¶åˆ»ï¼Œ<span class="math inline">\(U_t\)</span>æ˜¯ä¸€ä¸ªæœªçŸ¥çš„éšæœºå˜é‡ï¼Œå…¶éšæœºæ€§æ¥è‡ªäº<span class="math inline">\(t\)</span>æ—¶åˆ»ä¹‹åçš„æ‰€æœ‰çŠ¶æ€ä¸åŠ¨ä½œã€‚<strong>åŠ¨ä½œä»·å€¼å‡½æ•°</strong>çš„å®šä¹‰æ˜¯ï¼š</li></ol><p><span class="math inline">\(Q_{\pi}(s_t, a_t) = \mathbb{E}[U_t | S_t= s_t, A_t = a_t]\)</span>,</p><ul><li>å…¬å¼ä¸­çš„æœŸæœ›æ¶ˆé™¤äº†t tt æ—¶åˆ»ä¹‹åçš„æ‰€æœ‰çŠ¶æ€<span class="math inline">\(S_{t+1},\cdots,S_n\)</span>ä¸æ‰€æœ‰åŠ¨ä½œ<span class="math inline">\(A_{t+1},\cdots,A_n\)</span></li></ul><ol start="4" type="1"><li>æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°ç”¨æœ€å¤§åŒ–æ¶ˆé™¤ç­–ç•¥<span class="math inline">\(\pi\)</span>ï¼š<span class="math inline">\(Q^*(s_t,a_t) = \max_{\pi} Q_{\pi}(s_t, a_t), \forall s_t \in \mathcal{S}, a_t\in \mathcal{A}\)</span>ã€‚</li><li>å¯ä»¥è¿™æ ·ç†è§£<span class="math inline">\(Q^*\)</span>: å·²çŸ¥<span class="math inline">\(s_t\)</span>å’Œ<span class="math inline">\(a_t\)</span>, ä¸è®ºæœªæ¥é‡‡å–ä»€ä¹ˆæ ·çš„ç­–ç•¥<span class="math inline">\(\pi\)</span>, å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›ä¸å¯èƒ½è¶…è¿‡<span class="math inline">\(Q^*\)</span>ã€‚</li><li>æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°çš„ç”¨é€”ï¼šå‡å¦‚æˆ‘ä»¬çŸ¥é“<span class="math inline">\(Q^*\)</span>, æˆ‘ä»¬å°±èƒ½ç”¨å®ƒåšæ§åˆ¶ã€‚<ol type="1"><li>ä¸¾ä¸ªä¾‹å­ï¼Œè¶…çº§ç›ä¸½æ¸¸æˆä¸­çš„åŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(A =\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>ã€‚</li><li>ç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ™ºèƒ½ä½“è¯¥æ‰§è¡Œå“ªä¸ªåŠ¨ä½œå‘¢ï¼Ÿ</li><li>å‡è®¾æˆ‘ä»¬å·²çŸ¥<span class="math inline">\(Q^*\)</span>å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®©<span class="math inline">\(Q^*\)</span>ç»™ä¸‰ä¸ªåŠ¨ä½œæ‰“åˆ†ï¼Œ</li><li>æ¯”å¦‚ï¼š<span class="math inline">\(Q^*(s_t, å·¦) = 370, Q^*(s_t, å³) =-21, Q^*(s_t, ä¸Š) = 610\)</span>ã€‚</li></ol></li><li>è¿™ä¸‰ä¸ªå€¼æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ 1.<span class="math inline">\(Q^*(s_t, å·¦) =370\)</span>çš„æ„æ€æ˜¯ï¼šå¦‚æœç°åœ¨æ™ºèƒ½ä½“é€‰æ‹©å‘å·¦èµ°ï¼Œä¸è®ºä¹‹åé‡‡å–ä»€ä¹ˆç­–ç•¥<span class="math inline">\(\pi\)</span>, é‚£ä¹ˆå›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›æœ€å¤šä¸ä¼šè¶…è¿‡ 370ã€‚<ol start="2" type="1"><li>åŒç†ï¼Œå…¶ä»–ä¸¤ä¸ªæœ€ä¼˜åŠ¨ä½œä»·å€¼ä¹Ÿæ˜¯å›æŠ¥çš„æœŸæœ›çš„ä¸Šç•Œã€‚</li><li>æ ¹æ®<span class="math inline">\(Q^*\)</span>çš„è¯„åˆ†ï¼Œæ™ºèƒ½ä½“åº”è¯¥é€‰æ‹©å‘ä¸Šè·³ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥æœ€å¤§åŒ–å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›ã€‚</li></ol></li></ol><h1 id="dqn">DQN</h1><ul><li>æˆ‘ä»¬å¸Œæœ›çŸ¥é“<span class="math inline">\(Q^*\)</span>,å› ä¸ºå®ƒå°±åƒæ˜¯å…ˆçŸ¥ä¸€èˆ¬ï¼Œå¯ä»¥é¢„è§æœªæ¥ï¼Œåœ¨<span class="math inline">\(t\)</span>æ—¶åˆ»å°±é¢„è§<span class="math inline">\(t\)</span>åˆ°<span class="math inline">\(n\)</span>æ—¶åˆ»ä¹‹é—´çš„ç´¯è®¡å¥–åŠ±çš„æœŸæœ›ã€‚</li><li>å‡å¦‚æˆ‘ä»¬æœ‰<span class="math inline">\(Q^*\)</span>è¿™ä½å…ˆçŸ¥ï¼Œæˆ‘ä»¬å°±éµç…§å…ˆçŸ¥çš„æŒ‡å¯¼ï¼Œæœ€å¤§åŒ–æœªæ¥çš„ç´¯è®¡å¥–åŠ±ã€‚</li><li>ç„¶è€Œåœ¨å®è·µä¸­æˆ‘ä»¬ä¸çŸ¥é“<span class="math inline">\(Q^*\)</span>çš„å‡½æ•°è¡¨è¾¾å¼ã€‚æ˜¯å¦æœ‰å¯èƒ½è¿‘ä¼¼å‡º<span class="math inline">\(Q^*\)</span>è¿™ä½å…ˆçŸ¥å‘¢ï¼Ÿ</li><li>å¯¹äºè¶…çº§ç›ä¸½è¿™æ ·çš„æ¸¸æˆï¼Œå­¦å‡ºæ¥ä¸€ä¸ªâ€œå…ˆçŸ¥â€å¹¶ä¸éš¾ã€‚å‡å¦‚è®©æˆ‘ä»¬é‡å¤ç©è¶…çº§ç›ä¸½ä¸€äº¿æ¬¡ï¼Œé‚£æˆ‘ä»¬å°±ä¼šåƒå…ˆçŸ¥ä¸€æ ·ï¼Œçœ‹åˆ°å½“å‰çŠ¶æ€ï¼Œå°±èƒ½å‡†ç¡®åˆ¤æ–­å‡ºå½“å‰æœ€ä¼˜çš„åŠ¨ä½œæ˜¯ä»€ä¹ˆã€‚</li><li>è¿™è¯´æ˜åªè¦æœ‰è¶³å¤Ÿå¤šçš„â€œç»éªŒâ€, å°±èƒ½è®­ç»ƒå‡ºè¶…çº§ç›ä¸½ä¸­çš„â€œå…ˆçŸ¥â€ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733056273160-335a712a-e5a2-4b64-8301-8eef4e81d266.png"></p><ol type="1"><li>æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°çš„è¿‘ä¼¼ï¼š<ol type="1"><li>åœ¨å®è·µä¸­ï¼Œè¿‘ä¼¼å­¦ä¹ â€œå…ˆçŸ¥â€<span class="math inline">\(Q^*\)</span>æœ€æœ‰æ•ˆçš„åŠæ³•æ˜¯æ·±åº¦Qç½‘ç»œ(deep Qnetwork, ç¼©å†™ DQN), è®°ä½œ<span class="math inline">\(Q(s, a;\boldsymbol{w})\)</span>, å…¶ç»“æ„å¦‚å›¾æ‰€è¿°ã€‚</li><li>å…¶ä¸­çš„<span class="math inline">\(\boldsymbol{w}\)</span>è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­çš„å‚æ•°ã€‚é¦–å…ˆéšæœºåˆå§‹åŒ–<span class="math inline">\(\boldsymbol{w}\)</span>, éšåç”¨â€œç»éªŒâ€å»å­¦ä¹ <span class="math inline">\(\boldsymbol{w}\)</span>ã€‚</li><li>å­¦ä¹ çš„ç›®æ ‡æ˜¯ï¼šå¯¹äºæ‰€æœ‰çš„<span class="math inline">\(s\)</span>å’Œ<span class="math inline">\(a\)</span>, DQN çš„é¢„æµ‹<span class="math inline">\(Q(s, a; \boldsymbol{w})\)</span>å°½é‡æ¥è¿‘<span class="math inline">\(Q^*(s,a)\)</span>ã€‚åé¢å‡ èŠ‚çš„å†…å®¹éƒ½æ˜¯å¦‚ä½•å­¦ä¹ <span class="math inline">\(\boldsymbol{w}\)</span>!</li></ol></li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733057850676-68df9942-0f13-4c49-bbb7-9a1debcb3004.png"></p><ol start="2" type="1"><li>å¯ä»¥è¿™æ ·ç†è§£ DQN çš„è¡¨è¾¾å¼<span class="math inline">\(Q(s, a;\boldsymbol{w})\)</span>ã€‚<ol type="1"><li>DQN çš„è¾“å‡ºæ˜¯ç¦»æ•£åŠ¨ä½œç©ºé—´<span class="math inline">\(A\)</span>ä¸Šçš„æ¯ä¸ªåŠ¨ä½œçš„ Qå€¼ï¼Œå³ç»™æ¯ä¸ªåŠ¨ä½œçš„è¯„åˆ†ï¼Œåˆ†æ•°è¶Šé«˜æ„å‘³ç€åŠ¨ä½œè¶Šå¥½ã€‚</li><li>ä¸¾ä¸ªä¾‹å­ï¼ŒåŠ¨ä½œç©ºé—´æ˜¯<span class="math inline">\(A =\{å·¦ï¼Œå³ï¼Œä¸Š\}\)</span>, é‚£ä¹ˆåŠ¨ä½œç©ºé—´çš„å¤§å°ç­‰äº<span class="math inline">\(|A| = 3\)</span>, é‚£ä¹ˆ DQN çš„è¾“å‡ºæ˜¯ 3ç»´çš„å‘é‡ï¼Œè®°ä½œ<span class="math inline">\(\hat{q}\)</span>,å‘é‡æ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªåŠ¨ä½œã€‚</li><li>åœ¨å›¾ 4.1 ä¸­ï¼ŒDQN çš„è¾“å‡ºæ˜¯ 4.<span class="math inline">\(q^1 = Q(s,å·¦; \boldsymbol{w}) = 370, q^2 = Q(s, å³; \boldsymbol{w}) = -21, q^3 =Q(s, ä¸Š; \boldsymbol{w}) = 610\)</span>ã€‚</li></ol></li><li>æ€»ç»“ä¸€ä¸‹ï¼ŒDQN çš„è¾“å‡ºæ˜¯<span class="math inline">\(|A|\)</span>ç»´çš„å‘é‡<span class="math inline">\(\hat{q}\)</span>,åŒ…å«æ‰€æœ‰åŠ¨ä½œçš„ä»·å€¼ã€‚è€Œæˆ‘ä»¬å¸¸ç”¨çš„ç¬¦å·<span class="math inline">\(Q(s, a;\boldsymbol{w})\)</span>æ˜¯æ ‡é‡ï¼Œæ˜¯åŠ¨ä½œ<span class="math inline">\(a\)</span>å¯¹åº”çš„åŠ¨ä½œä»·å€¼ï¼Œæ˜¯å‘é‡<span class="math inline">\(\hat{q}\)</span>ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚</li><li>ç”¨DQNç©æ¸¸æˆï¼šagentæ¯æ¬¡é‡‡å–çš„actionæ˜¯ä½¿å¾—Qå‡½æ•°å–æœ€å¤§çš„é‚£ä¸ªåŠ¨ä½œï¼Œä¸€ç›´ç©ä¸‹å»ã€‚ä¸‹å›¾çš„é¡ºåºæ˜¯ä»å·¦å¾€å³çœ‹ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733058037862-263e2333-6531-46b3-a8cd-0d44aec06129.png"></p><ol start="5" type="1"><li>DQN çš„æ¢¯åº¦ï¼šåœ¨è®­ç»ƒ DQN çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ DQN å…³äºç¥ç»ç½‘ç»œå‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>æ±‚æ¢¯åº¦ã€‚ç”¨<span class="math inline">\(\nabla_{w} Q(s, a; w) \triangleq \frac{\partialQ(s, a; w)}{\partial w}\)</span></li></ol><ul><li>è¡¨ç¤ºå‡½æ•°å€¼<span class="math inline">\(Q(s, a;\boldsymbol{w})\)</span>å…³äºå‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>çš„æ¢¯åº¦ã€‚å› ä¸ºå‡½æ•°å€¼<span class="math inline">\(Q(s, a;\boldsymbol{w})\)</span>æ˜¯ä¸€ä¸ªå®æ•°ï¼Œæ‰€ä»¥æ¢¯åº¦çš„å½¢çŠ¶ä¸<span class="math inline">\(\boldsymbol{w}\)</span>å®Œå…¨ç›¸åŒã€‚</li><li>å¦‚æœ<span class="math inline">\(\boldsymbol{w}\)</span>æ˜¯<span class="math inline">\(d \times 1\)</span>çš„å‘é‡ï¼Œé‚£ä¹ˆæ¢¯åº¦ä¹Ÿæ˜¯<span class="math inline">\(d \times 1\)</span>çš„å‘é‡ã€‚å¦‚æœ<span class="math inline">\(\boldsymbol{w}\)</span>æ˜¯<span class="math inline">\(d_1 \times d_2\)</span>çš„çŸ©é˜µï¼Œé‚£ä¹ˆæ¢¯åº¦ä¹Ÿæ˜¯<span class="math inline">\(d_1 \times d_2\)</span>çš„çŸ©é˜µã€‚å¦‚æœ<span class="math inline">\(\boldsymbol{w}\)</span>æ˜¯<span class="math inline">\(d_1 \times d_2 \timesd_3\)</span>çš„å¼ é‡ï¼Œé‚£ä¹ˆæ¢¯åº¦ä¹Ÿæ˜¯<span class="math inline">\(d_1 \timesd_2 \times d_3\)</span>çš„å¼ é‡ã€‚</li></ul><ol start="6" type="1"><li>ç»™å®šè§‚æµ‹å€¼<span class="math inline">\(s\)</span>å’Œ<span class="math inline">\(a\)</span>, æ¯”å¦‚<span class="math inline">\(a =å·¦\)</span>, å¯ä»¥ç”¨åå‘ä¼ æ’­è®¡ç®—å‡ºæ¢¯åº¦<span class="math inline">\(\nabla_{\boldsymbol{w}}Q( s, å·¦;\boldsymbol{w})\)</span>ã€‚<ol type="1"><li>åœ¨ç¼–ç¨‹å®ç°çš„æ—¶å€™ï¼ŒTensorFlow å’ŒPyTorch å¯ä»¥å¯¹ DQNè¾“å‡ºå‘é‡çš„ä¸€ä¸ªå…ƒç´ (æ¯”å¦‚<span class="math inline">\(Q( s, å·¦;\boldsymbol{w})\)</span>è¿™ä¸ªå…ƒç´ ) å…³äºå˜é‡<span class="math inline">\(\boldsymbol{w}\)</span>è‡ªåŠ¨æ±‚æ¢¯åº¦ï¼Œå¾—åˆ°çš„æ¢¯åº¦çš„å½¢çŠ¶ä¸<span class="math inline">\(\boldsymbol{w}\)</span>å®Œå…¨ç›¸åŒã€‚</li></ol></li></ol><h2 id="æ—¶é—´å·®åˆ†tdç®—æ³•">æ—¶é—´å·®åˆ†ï¼ˆTDï¼‰ç®—æ³•</h2><h3 id="é©¾è½¦æ—¶é—´é¢„æµ‹çš„ä¾‹å­">é©¾è½¦æ—¶é—´é¢„æµ‹çš„ä¾‹å­</h3><ol type="1"><li>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å‹<span class="math inline">\(Q(s, d;\boldsymbol{w})\)</span>, å…¶ä¸­<span class="math inline">\(s\)</span>æ˜¯èµ·ç‚¹ï¼Œ<span class="math inline">\(d\)</span>æ˜¯ç»ˆç‚¹ï¼Œ<span class="math inline">\(\boldsymbol{w}\)</span>æ˜¯å‚æ•°ã€‚<ol type="1"><li>æ¨¡å‹<span class="math inline">\(Q\)</span>å¯ä»¥é¢„æµ‹å¼€è½¦å‡ºè¡Œçš„æ—¶é—´å¼€é”€ã€‚</li><li>è¿™ä¸ªæ¨¡å‹ä¸€å¼€å§‹ä¸å‡†ç¡®ï¼Œç”šè‡³æ˜¯çº¯éšæœºçš„ã€‚</li><li>ä½†æ˜¯éšç€å¾ˆå¤šäººç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå¾—åˆ°æ›´å¤šæ•°æ®ã€æ›´å¤šè®­ç»ƒï¼Œè¿™ä¸ªæ¨¡å‹å°±ä¼šè¶Šæ¥è¶Šå‡†ï¼Œä¼šåƒè°·æ­Œåœ°å›¾ä¸€æ ·å‡†ã€‚</li></ol></li><li>æˆ‘ä»¬è¯¥å¦‚ä½•è®­ç»ƒè¿™ä¸ªæ¨¡å‹å‘¢ï¼Ÿ<ol type="1"><li>åœ¨ç”¨æˆ·å‡ºå‘å‰ï¼Œç”¨æˆ·å‘Šè¯‰æ¨¡å‹èµ·ç‚¹<span class="math inline">\(s\)</span>å’Œç»ˆç‚¹<span class="math inline">\(d\)</span>, æ¨¡å‹åšä¸€ä¸ªé¢„æµ‹<span class="math inline">\(\hat{q} = Q(s, d; \boldsymbol{w})\)</span>ã€‚</li><li>å½“ç”¨æˆ·ç»“æŸè¡Œç¨‹çš„æ—¶å€™ï¼ŒæŠŠå®é™…é©¾è½¦æ—¶é—´<span class="math inline">\(y\)</span>åé¦ˆç»™æ¨¡å‹ã€‚</li><li>ä¸¤è€…ä¹‹å·®<span class="math inline">\(\hat{q} -y\)</span>åæ˜ å‡ºæ¨¡å‹æ˜¯é«˜ä¼°è¿˜æ˜¯ä½ä¼°äº†é©¾é©¶æ—¶é—´ï¼Œä»¥æ­¤æ¥ä¿®æ­£æ¨¡å‹ï¼Œä½¿å¾—æ¨¡å‹çš„ä¼°è®¡æ›´å‡†ç¡®ã€‚</li></ol></li><li>å‡è®¾æˆ‘æ˜¯ä¸ªç”¨æˆ·ï¼Œæˆ‘è¦ä»åŒ—äº¬é©¾è½¦å»ä¸Šæµ·ã€‚ä»åŒ—äº¬å‡ºå‘ä¹‹å‰ï¼Œæˆ‘è®©æ¨¡å‹åšé¢„æµ‹ï¼Œæ¨¡å‹å‘Šè¯‰æˆ‘æ€»è½¦ç¨‹æ˜¯14 å°æ—¶ï¼š</li></ol><p><span class="math inline">\(\hat{q} \triangleq Q(â€œåŒ—äº¬â€, â€œä¸Šæµ·â€;\boldsymbol{w}) = 14\)</span>ã€‚</p><ol start="4" type="1"><li>å½“æˆ‘åˆ°è¾¾ä¸Šæµ·ï¼Œæˆ‘çŸ¥é“è‡ªå·±èŠ±çš„å®é™…æ—¶é—´æ˜¯ 16å°æ—¶ï¼Œå¹¶å°†ç»“æœåé¦ˆç»™æ¨¡å‹ï¼›è§å›¾ 4.2ã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733058574342-3aa93422-c020-4430-91d7-f0aebee71156.png"></p><ol start="5" type="1"><li>å¯ä»¥ç”¨æ¢¯åº¦ä¸‹é™å¯¹æ¨¡å‹åšä¸€æ¬¡æ›´æ–°ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ã€‚æŠŠæˆ‘çš„è¿™æ¬¡æ—…ç¨‹ä½œä¸ºä¸€ç»„è®­ç»ƒæ•°æ®ï¼š</li></ol><p><span class="math inline">\(s = â€œåŒ—äº¬â€, d = â€œä¸Šæµ·â€, \hat{q} = 14, y =16\)</span>ã€‚</p><ol start="6" type="1"><li>æˆ‘ä»¬å¸Œæœ›ä¼°è®¡å€¼<span class="math inline">\(\hat{q} = Q(s, d;\boldsymbol{w})\)</span>å°½é‡æ¥è¿‘çœŸå®è§‚æµ‹åˆ°çš„<span class="math inline">\(y\)</span>, æ‰€ä»¥ç”¨ä¸¤è€…å·®çš„å¹³æ–¹ä½œä¸ºæŸå¤±å‡½æ•°ï¼š</li></ol><p><span class="math inline">\(L(\boldsymbol{w}) = \frac{1}{2} [Q(s, d;\boldsymbol{w}) - y]^2\)</span>ã€‚</p><ol start="7" type="1"><li>ç”¨é“¾å¼æ³•åˆ™è®¡ç®—æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¾—åˆ°ï¼š</li></ol><p><span class="math inline">\(\nabla_{\boldsymbol{w}}L(\boldsymbol{w})= (\hat{q} - y) \cdot \nabla_{\boldsymbol{w}}Q(s, d;\boldsymbol{w})\)</span>ã€‚</p><ol start="8" type="1"><li>ç„¶ååšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ›´æ–°æ¨¡å‹å‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>ï¼š</li></ol><p><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w}- \alpha \cdot \nabla_{\boldsymbol{w}}L(\boldsymbol{w})\)</span>ï¼Œ</p><ul><li>æ­¤å¤„çš„<span class="math inline">\(\alpha\)</span>æ˜¯å­¦ä¹ ç‡ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚åœ¨å®Œæˆä¸€æ¬¡æ¢¯åº¦ä¸‹é™ä¹‹åï¼Œå¦‚æœå†è®©æ¨¡å‹åšä¸€æ¬¡é¢„æµ‹ï¼Œé‚£ä¹ˆæ¨¡å‹çš„é¢„æµ‹å€¼</li></ul><p><span class="math inline">\(Q(&quot;åŒ—äº¬&quot;, &quot;ä¸Šæµ·&quot;;\boldsymbol{w})\)</span></p><ul><li>ä¼šæ¯”åŸå…ˆæ›´æ¥è¿‘<span class="math inline">\(y = 16\)</span>ã€‚</li></ul><h3 id="tdç®—æ³•">TDç®—æ³•</h3><ul><li>æ¥ç€ä¸Šæ–‡é©¾è½¦æ—¶é—´çš„ä¾‹å­ã€‚å‡ºå‘å‰æ¨¡å‹ä¼°è®¡å…¨ç¨‹æ—¶é—´ä¸º<span class="math inline">\(\hat{q} =14\)</span>å°æ—¶ï¼›æ¨¡å‹å»ºè®®çš„è·¯çº¿ä¼šé€”å¾„æµå—ã€‚æˆ‘ä»åŒ—äº¬å‡ºå‘ï¼Œè¿‡äº†<span class="math inline">\(r =4.5\)</span>å°æ—¶ï¼Œæˆ‘åˆ°è¾¾æµå—ã€‚æ­¤æ—¶æˆ‘å†è®©æ¨¡å‹åšä¸€æ¬¡é¢„æµ‹ï¼Œæ¨¡å‹å‘Šè¯‰æˆ‘</li></ul><p><span class="math inline">\(\hat{q}&#39; \triangleqQ(&quot;æµå—&quot;, &quot;ä¸Šæµ·&quot;; \boldsymbol{w}) =11\)</span>ã€‚</p><ul><li>è§å›¾ 4.3çš„æè¿°ã€‚å‡å¦‚æ­¤æ—¶æˆ‘çš„è½¦åäº†ï¼Œå¿…é¡»è¦åœ¨æµå—ä¿®ç†ï¼Œæˆ‘ä¸å¾—ä¸å–æ¶ˆæ­¤æ¬¡è¡Œç¨‹ã€‚<ul><li>æˆ‘æ²¡æœ‰å®Œæˆæ—…é€”ï¼Œé‚£ä¹ˆæˆ‘çš„è¿™ç»„æ•°æ®æ˜¯å¦èƒ½å¸®åŠ©è®­ç»ƒæ¨¡å‹å‘¢ï¼Ÿ</li><li>å…¶å®æ˜¯å¯ä»¥çš„ï¼Œç”¨åˆ°çš„ç®—æ³•å«åš <strong>æ—¶é—´å·®åˆ† (temporal difference,ç¼©å†™ TD)</strong>ã€‚</li></ul></li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733058721318-ba8539cc-dae0-42cb-833f-5090f4c3f4e4.png"></p><ul><li>ä¸‹é¢è§£é‡Š TD ç®—æ³•çš„åŸç†ã€‚<ul><li>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬å·²æœ‰çš„æ•°æ®ï¼šæ¨¡å‹ä¼°è®¡ä»åŒ—äº¬åˆ°ä¸Šæµ·ä¸€å…±éœ€è¦<span class="math inline">\(\hat{q} = 14\)</span>å°æ—¶ï¼Œæˆ‘å®é™…ç”¨äº†<span class="math inline">\(r = 4.5\)</span>å°æ—¶åˆ°è¾¾æµå—ï¼Œæ¨¡å‹ä¼°è®¡è¿˜éœ€è¦<span class="math inline">\(\tilde{q}&#39; =11\)</span>å°æ—¶ä»æµå—åˆ°ä¸Šæµ·ã€‚</li><li>åˆ°è¾¾æµå—æ—¶ï¼Œæ ¹æ®æ¨¡å‹æœ€æ–°ä¼°è®¡ï¼Œæ•´ä¸ªæ—…ç¨‹çš„æ€»æ—¶é—´ä¸ºï¼š<br><span class="math inline">\(\hat{y} \triangleq r + \hat{q}&#39; = 4.5 +11 = 15.5\)</span>ã€‚</li></ul></li><li>TD ç®—æ³•å°†<span class="math inline">\(\hat{y} = 15.5\)</span>ç§°ä¸º<strong>TD ç›®æ ‡ (TD target)</strong>, å®ƒæ¯”æœ€åˆçš„é¢„æµ‹<span class="math inline">\(\hat{q} = 14\)</span>æ›´å¯é ã€‚<ul><li>æœ€åˆçš„é¢„æµ‹<span class="math inline">\(\hat{q} =14\)</span>çº¯ç²¹æ˜¯ä¼°è®¡çš„ï¼Œæ²¡æœ‰ä»»ä½•äº‹å®çš„æˆåˆ†ã€‚</li><li>TD ç›®æ ‡<span class="math inline">\(\hat{y} =15.5\)</span>ä¹Ÿæ˜¯ä¸ªä¼°è®¡ï¼Œä½†å…¶ä¸­æœ‰äº‹å®çš„æˆåˆ†ï¼šå…¶ä¸­çš„<span class="math inline">\(r = 4.5\)</span>å°±æ˜¯å®é™…çš„è§‚æµ‹ã€‚</li></ul></li><li>åŸºäºä»¥ä¸Šè®¨è®ºï¼Œæˆ‘ä»¬è®¤ä¸º TD ç›®æ ‡<span class="math inline">\(\hat{y} =15.5\)</span>æ¯”æ¨¡å‹æœ€åˆçš„ä¼°è®¡å€¼<span class="math inline">\(Q(â€œåŒ—äº¬â€,â€œä¸Šæµ·â€; \boldsymbol{w}) = 14\)</span>æ›´å¯é ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<span class="math inline">\(\hat{y}\)</span>å¯¹æ¨¡å‹åšâ€œä¿®æ­£â€ã€‚<ul><li>æˆ‘ä»¬å¸Œæœ›ä¼°è®¡å€¼<span class="math inline">\(\hat{q} = Q(s, d;\boldsymbol{w})\)</span>å°½é‡æ¥è¿‘ TD ç›®æ ‡<span class="math inline">\(\hat{y}\)</span>,æ‰€ä»¥ç”¨ä¸¤è€…å·®çš„å¹³æ–¹ä½œä¸ºæŸå¤±å‡½æ•°ï¼š<br><span class="math inline">\(L(\boldsymbol{w}) = \frac{1}{2} [Q(â€œåŒ—äº¬â€,â€œä¸Šæµ·â€; \boldsymbol{w}) - \hat{y}]^2\)</span>ã€‚</li></ul></li><li>æ­¤å¤„æŠŠ<span class="math inline">\(\hat{y}\)</span>çœ‹åšå¸¸æ•°ï¼Œå°½ç®¡å®ƒä¾èµ–äº<span class="math inline">\(\boldsymbol{w}\)</span>ã€‚è®¡ç®—æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼š</li></ul><p><span class="math inline">\(\nabla_{\boldsymbol{w}}L(\boldsymbol{w})= (\hat{q} - \hat{y}) \cdot \nabla_{\boldsymbol{w}}Q(â€œåŒ—äº¬â€, â€œä¸Šæµ·â€;\boldsymbol{w})\)</span>ï¼Œ</p><ul><li>æ­¤å¤„çš„<span class="math inline">\(\delta = \hat{q} - \hat{y} = 14 -15.5 = -1.5\)</span>ç§°ä½œ <strong>TD è¯¯å·® (TDerror)</strong>ã€‚åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™æ›´æ–°æ¨¡å‹å‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>ï¼š<br><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w} -\alpha \cdot \delta \cdot \nabla_{\boldsymbol{w}}Q(â€œåŒ—äº¬â€, â€œä¸Šæµ·â€;\boldsymbol{w})\)</span>ã€‚</li><li>å¦‚æœä½ ä»ç„¶ä¸ç†è§£ TDç®—æ³•ï¼Œé‚£ä¹ˆè¯·æ¢ä¸ªè§’åº¦æ¥æ€è€ƒé—®é¢˜ã€‚æ¨¡å‹ä¼°è®¡ä»åŒ—äº¬åˆ°ä¸Šæµ·å…¨ç¨‹éœ€è¦<span class="math inline">\(\hat{q} =14\)</span>å°æ—¶ï¼Œæ¨¡å‹è¿˜ä¼°è®¡ä»æµå—åˆ°ä¸Šæµ·éœ€è¦<span class="math inline">\(\vec{q}&#39; =11\)</span>å°æ—¶ã€‚è¿™å°±ç›¸å½“äºæ¨¡å‹åšäº†è¿™æ ·çš„ä¼°è®¡ï¼šä»åŒ—äº¬åˆ°æµå—éœ€è¦çš„æ—¶é—´ä¸º<span class="math inline">\(\hat{q} - \hat{q}&#39; = 14 - 11 =3\)</span>ã€‚</li><li>è€Œæˆ‘çœŸå®èŠ±è´¹<span class="math inline">\(r =4.5\)</span>å°æ—¶ä»åŒ—äº¬åˆ°æµå—ã€‚æ¨¡å‹çš„ä¼°è®¡ä¸æˆ‘çš„çœŸå®è§‚æµ‹ä¹‹å·®ä¸º<span class="math inline">\(\delta = 3 - 4.5 = -1.5\)</span>ã€‚è¿™å°±æ˜¯ TDè¯¯å·®ï¼ä»¥ä¸Šåˆ†æè¯´æ˜ TD è¯¯å·®<span class="math inline">\(\delta\)</span>å°±æ˜¯æ¨¡å‹ä¼°è®¡ä¸çœŸå®è§‚æµ‹ä¹‹å·®ã€‚TDç®—æ³•çš„ç›®çš„æ˜¯é€šè¿‡æ›´æ–°å‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>ä½¿å¾—æŸå¤±<span class="math inline">\(L(\boldsymbol{w}) = \frac{1}{2}\delta^2\)</span>å‡å°ã€‚</li></ul><h3 id="ç”¨tdè®­ç»ƒdqn">ç”¨TDè®­ç»ƒDQN</h3><ul><li>TDç®—æ³•æ˜¯ä¸€ç§åœ¨çº¿å­¦ä¹ ç®—æ³•ï¼Œå¯ä»¥é€æ­¥æ›´æ–°å€¼å‡½æ•°ï¼Œè€Œä¸éœ€è¦ç­‰åˆ°å›åˆç»“æŸã€‚</li><li>è§†é¢‘ä¸­ç”¨åˆ°çš„ä¾‹å­æ˜¯ä»çº½çº¦åˆ°äºšç‰¹å…°å¤§ï¼Œé€”å¾„åç››é¡¿ï¼Œä½†æ˜¯é“ç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733058879180-fb0c4d82-30c6-46fa-90ba-70b1f4fd5c45.png"></p><ul><li>å¦‚ä½•æŠŠTDç®—æ³•ç”¨åˆ°DQNï¼Ÿå’Œé©¾è½¦çš„ä¾‹å­å¾ˆåƒï¼Œç­‰å¼å·¦è¾¹æ˜¯ t æ—¶åˆ»çš„ Qçš„ä¼°è®¡ï¼Œç­‰å¼å³è¾¹æ˜¯ä¸€ä¸ªå®é™…è§‚æµ‹å€¼åŠ ä¸€é¡¹å…³äº t+1 æ—¶åˆ»çš„ Q ä¼°è®¡ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733058956641-3238eaca-6639-4dc9-bca7-6e7ef5d7960e.png"></p><ol type="1"><li>ç­‰å¼<span class="math inline">\(U_t = R_t + \gamma \cdotU_{t+1}\)</span></li></ol><ul><li>è¿™ä¸ªç­‰å¼åæ˜ äº†ç›¸é‚»ä¸¤ä¸ªæŠ˜æ‰£å›æŠ¥ä¹‹é—´çš„å…³ç³»ï¼št æ—¶åˆ»çš„æŠ˜æ‰£å›æŠ¥<span class="math inline">\(U_t\)</span>ç­‰äº t æ—¶åˆ»çš„å¥–åŠ±<span class="math inline">\(R_t\)</span>åŠ ä¸ŠæŠ˜æ‰£å› å­<span class="math inline">\(\gamma\)</span>ä¹˜ä»¥ t+1 æ—¶åˆ»çš„æŠ˜æ‰£å›æŠ¥<span class="math inline">\(U_{t+1}\)</span>ã€‚</li></ul><ol start="2" type="1"><li>å¾—æ¥çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059049529-0201225d-62af-4aea-8538-1a7646a506fd.png"></p><p><span class="math inline">\(Q(s_t, a_t; \mathbf{w}) \approx\mathbb{E}[R_t + \gamma \cdot Q(S_{t+1}, A_{t+1};\mathbf{w})]\)</span>ã€‚è¿™ä¸ªå…¬å¼ä¸¤è¾¹æ˜¯ä¸¤ä¸ªä¼°è®¡ï¼ˆestimateï¼‰</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059063482-983ffd67-cd1d-45e2-8336-c7d95144144e.png"></p><ol start="3" type="1"><li>å·¦è¾¹æ˜¯ predictionï¼Œå³è¾¹æ˜¯ TD targetã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059077203-f8091934-1717-4d41-9ad2-c33bfdf701a9.png"></p><ol start="4" type="1"><li>ä½¿ç”¨TDç®—æ³•è®­ç»ƒDQNçš„è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼šä¸‹å›¾ä¸­çš„ t+1 æ—¶åˆ»çš„ Q ä¸ºä»€ä¹ˆå¯ä»¥å†™æˆmax çš„å½¢å¼ï¼Ÿæ˜¯å› ä¸º t+1 æ—¶åˆ»çš„ action<span class="math inline">\(a_{t+1}\)</span>å°±æ˜¯é€‰æ‹© t æ—¶åˆ»ä½¿å¾— Q æœ€å¤§çš„é‚£ä¸ªactionã€‚</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059096305-e0111d8e-c366-485c-b832-f2cc309dafa5.png"></p><ol start="5" type="1"><li>ä¸‹é¢æ˜¯ç‹æ ‘æ£®ä¹¦ä¸­å…·ä½“çš„æ¨å¯¼è¿‡ç¨‹ï¼š</li></ol><ul><li>ä¸‹é¢æˆ‘ä»¬æ¨å¯¼è®­ç»ƒ DQN çš„ TD ç®—æ³•ï¼ˆä¸¥æ ¼åœ°è®²ï¼Œæ­¤å¤„æ¨å¯¼çš„æ˜¯â€œQ å­¦ä¹ ç®—æ³•â€,å®ƒå±äº TD ç®—æ³•çš„ä¸€ç§ã€‚æœ¬èŠ‚å°±ç§°å…¶ä¸º TD ç®—æ³•ï¼‰ã€‚å›å¿†ä¸€ä¸‹å›æŠ¥çš„å®šä¹‰<span class="math inline">\(U_t = \sum_{k=t}^n \gamma^{k-t} \cdotR_k\)</span>,<span class="math inline">\(U_{t+1} = \sum_{k=t+1}^n\gamma^{k-t-1} \cdot R_k\)</span>ã€‚ç”±<span class="math inline">\(U_t\)</span>å’Œ<span class="math inline">\(U_{t+1}\)</span>çš„å®šä¹‰å¯å¾—ï¼š</li></ul><p><span class="math inline">\(U_t = R_t + \gamma \cdot \sum_{k=t+1}^n\gamma^{k-t-1} \cdot R_k = U_{t+1}\)</span>ã€‚</p><ul><li>å›å¿†ä¸€ä¸‹ï¼Œæœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°å¯ä»¥å†™æˆ</li></ul><p><span class="math inline">\(Q^*(s_t, a_t) = \max_{\pi} \mathbb{E}[U_t | S_t = s_t, A_t = a_t]\)</span>ã€‚</p><ul><li>ä»å…¬å¼å‡ºå‘ï¼Œç»è¿‡ä¸€ç³»åˆ—æ•°å­¦æ¨å¯¼ ,å¯ä»¥å¾—åˆ°ä¸‹é¢çš„å®šç†ã€‚è¿™ä¸ªå®šç†æ˜¯æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹ (optimal Bellman equations)çš„ä¸€ç§å½¢å¼ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059200306-8b0a564c-d901-467a-8802-7891c27ac149.png"></p><ul><li>æœ€ä¼˜è´å°”æ›¼æ–¹ç¨‹å…·ä½“å…¬å¼å¦‚ä¸‹ï¼š</li></ul><p><span class="math inline">\(Q^*(s_t, a_t) = \mathbb{E}{S{t+1} \simp(\cdot | s_t, a_t)} [R_t + \gamma \cdot \max_{A \in \mathcal{A}}Q^*(S_{t+1}, A) | S_t = s_t, A_t = a_t]\)</span>ã€‚</p><ul><li>è´å°”æ›¼æ–¹ç¨‹çš„å³è¾¹æ˜¯ä¸ªæœŸæœ›ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æœŸæœ›åšè’™ç‰¹å¡æ´›è¿‘ä¼¼ã€‚<ul><li>å½“æ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ<span class="math inline">\(a_t\)</span>ä¹‹åï¼Œç¯å¢ƒé€šè¿‡çŠ¶æ€è½¬ç§»å‡½æ•°<span class="math inline">\(p(s_{t+1} | s_t, a_t)\)</span>è®¡ç®—å‡ºæ–°çŠ¶æ€<span class="math inline">\(s_{t+1}\)</span>ã€‚å¥–åŠ±<span class="math inline">\(R_t\)</span>æœ€å¤šåªä¾èµ–äº<span class="math inline">\(S_t\)</span>,<span class="math inline">\(A_t\)</span>,<span class="math inline">\(S_{t+1}\)</span>ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬è§‚æµ‹åˆ°<span class="math inline">\(s_t\)</span>,<span class="math inline">\(a_t\)</span>,<span class="math inline">\(s_{t+1}\)</span>æ—¶ï¼Œåˆ™å¥–åŠ±<span class="math inline">\(R_t\)</span>ä¹Ÿè¢«è§‚æµ‹åˆ°ï¼Œè®°ä½œ<span class="math inline">\(r_t\)</span>ã€‚æœ‰äº†å››å…ƒç»„<span class="math inline">\((s_t, a_t, r_t, s_{t+1})\)</span>,</li><li>æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡º</li></ul></li></ul><p><span class="math inline">\(r_t + \gamma \cdot \max_{a \in\mathcal{A}} Q^*(s_{t+1}, a)\)</span>ã€‚</p><ul><li>å®ƒå¯ä»¥çœ‹åšæ˜¯ä¸‹é¢è¿™é¡¹æœŸæœ›çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼ï¼š</li></ul><p><span class="math inline">\(\mathbb{E}_{S_{t+1} \sim p(\cdot | s_t,a_t)} [R_t + \gamma \cdot \max_{A \in \mathcal{A}} Q^*(S_{t+1}, A) | S_t= s_t, A_t = a_t]\)</span>ã€‚</p><ul><li>ç”±å®šç†å’Œä¸Šè¿°çš„è’™ç‰¹å¡æ´›è¿‘ä¼¼å¯å¾—ï¼š</li></ul><p><span class="math inline">\(Q^*(s_t, a_t) \approx r_t + \gamma \cdot\max_{a \in \mathcal{A}} Q^*(s_{t+1}, a)\)</span>ã€‚</p><ul><li>è¿™æ˜¯ä¸æ˜¯å¾ˆåƒé©¾é©¶æ—¶é—´é¢„æµ‹é—®é¢˜ï¼Ÿå·¦è¾¹çš„<span class="math inline">\(Q^*(s_t,a_t)\)</span>å°±åƒæ˜¯æ¨¡å‹é¢„æµ‹â€œåŒ—äº¬åˆ°ä¸Šæµ·â€çš„æ€»æ—¶é—´ï¼Œ<span class="math inline">\(r_t\)</span>åƒæ˜¯å®é™…è§‚æµ‹çš„â€œåŒ—äº¬åˆ°æµå—â€çš„æ—¶é—´ï¼Œ<span class="math inline">\(\gamma \cdot \max_{a \in \mathcal{A}} Q^*(s_{t+1},a)\)</span>ç›¸å½“äºæ¨¡å‹é¢„æµ‹å‰©ä½™è·¯ç¨‹â€œæµå—åˆ°ä¸Šæµ·â€çš„æ—¶é—´ã€‚è§å›¾ 4.4ä¸­çš„ç±»æ¯”ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059350133-4450f049-cc1c-4a70-9dff-cb5bf2cdaf9e.png"></p><ol start="6" type="1"><li>æŠŠå…¬å¼ä¸­çš„æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q^*(s,a)\)</span>æ›¿æ¢æˆç¥ç»ç½‘ç»œ<span class="math inline">\(Q(s, a;\boldsymbol{w})\)</span>, å¾—åˆ°ï¼š<br><span class="math inline">\(Q(s_t, a_t; \boldsymbol{w}) \approx r_t +\gamma \cdot \max_{a \in \mathcal{A}} Q(s_{t+1}, a;\boldsymbol{w})\)</span>ã€‚</li></ol><ul><li>å·¦è¾¹çš„<span class="math inline">\(\hat{q}_t \triangleq Q(s_t, a_t;\boldsymbol{w})\)</span>æ˜¯ç¥ç»ç½‘ç»œåœ¨ tæ—¶åˆ»åšå‡ºçš„é¢„æµ‹ï¼Œå…¶ä¸­æ²¡æœ‰ä»»ä½•äº‹å®æˆåˆ†ã€‚å³è¾¹çš„ TD ç›®æ ‡<span class="math inline">\(\hat{y}_t\)</span>æ˜¯ç¥ç»ç½‘ç»œåœ¨ t+1æ—¶åˆ»åšå‡ºçš„é¢„æµ‹ï¼Œå®ƒéƒ¨åˆ†åŸºäºçœŸå®è§‚æµ‹åˆ°çš„å¥–åŠ±<span class="math inline">\(r_t\)</span>ã€‚ +<span class="math inline">\(\hat{q}_t\)</span>å’Œ<span class="math inline">\(\hat{y}_t\)</span>ä¸¤è€…éƒ½æ˜¯å¯¹æœ€ä¼˜åŠ¨ä½œä»·å€¼<span class="math inline">\(Q^*(s_t, a_t)\)</span>çš„ä¼°è®¡ï¼Œä½†æ˜¯<span class="math inline">\(\hat{y}_t\)</span>éƒ¨åˆ†åŸºäºäº‹å®ï¼Œå› æ­¤æ¯”<span class="math inline">\(\hat{q}_t\)</span>æ›´å¯ä¿¡ã€‚åº”å½“é¼“åŠ±<span class="math inline">\(\hat{q}_t \triangleq Q(s_t, a_t;\boldsymbol{w})\)</span>æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ã€‚å®šä¹‰æŸå¤±å‡½æ•°ï¼š</li></ul><p><span class="math inline">\(L(\boldsymbol{w}) = \frac{1}{2} [Q(s_t,a_t; \boldsymbol{w}) - \hat{y}_t]^2\)</span>ã€‚</p><ul><li>å‡è£…<span class="math inline">\(\hat{y}_t\)</span>æ˜¯å¸¸æ•°ï¼ˆå®é™…ä¸Š<span class="math inline">\(\hat{y}_t\)</span>ä¾èµ–äº<span class="math inline">\(\boldsymbol{w}\)</span>, ä½†æ˜¯æˆ‘ä»¬å‡è£…<span class="math inline">\(\hat{y}_t\)</span>æ˜¯å¸¸æ•°ï¼‰, è®¡ç®—<span class="math inline">\(L\)</span>å…³äº<span class="math inline">\(\boldsymbol{w}\)</span>çš„æ¢¯åº¦ï¼š<br><span class="math inline">\(\nabla_{\boldsymbol{w}}L(\boldsymbol{w}) =(\hat{q}_t - \hat{y}_t) \cdot \nabla_{\boldsymbol{w}}Q(s_t, a_t;\boldsymbol{w})\)</span>ã€‚</li><li>åšä¸€æ­¥æ¢¯åº¦ä¸‹é™ï¼Œå¯ä»¥è®©<span class="math inline">\(\hat{q}_t\)</span>æ›´æ¥è¿‘<span class="math inline">\(\hat{y}_t\)</span>ï¼š<br><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w} -\alpha \cdot \delta_t \cdot \nabla_{\boldsymbol{w}}Q(s_t, a_t;\boldsymbol{w})\)</span>ã€‚</li><li>è¿™ä¸ªå…¬å¼å°±æ˜¯è®­ç»ƒ DQN çš„ TD ç®—æ³•ã€‚</li><li>æ€»ç»“ä¸€ä¸‹ï¼šæœ€ä¼˜è¡ŒåŠ¨ä»·å€¼å‡½æ•°æ˜¯æœªçŸ¥çš„ï¼ŒDQNç®—æ³•å°±æ˜¯ç”¨ç¥ç»ç½‘ç»œè¿‘ä¼¼è¿™ä¸ªæœ€ä¼˜è¡ŒåŠ¨ä»·å€¼å‡½æ•°ã€‚</li></ul><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059461690-35cc7ae3-b425-4ba0-896a-f163089f497a.png"></p><ol start="7" type="1"><li>TDç®—æ³•å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-2-Value-based-RL/1733059475690-f46bbaf8-c631-4638-9333-1e8e418a8123.png"></p><ol start="8" type="1"><li>ä¹¦ä¸­ä»‹ç»çš„è®­ç»ƒæµç¨‹</li></ol><ul><li>é¦–å…ˆæ€»ç»“ä¸Šé¢çš„ç»“è®ºã€‚ç»™å®šä¸€ä¸ªå››å…ƒç»„<span class="math inline">\((s_t,a_t, r_t, s_{t+1})\)</span>, æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡º DQN çš„é¢„æµ‹å€¼<span class="math inline">\(\hat{q}_t = Q(s_t, a_t; \boldsymbol{w})\)</span>,ä»¥åŠ TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<br><span class="math inline">\(\hat{y}_t = r_t + \gamma \cdot \max_{a \in\mathcal{A}} Q(s_{t+1}, a; \boldsymbol{w})\)</span>å’Œ<span class="math inline">\(\delta_t = \hat{q}_t - \hat{y}_t\)</span>ã€‚</li><li>TD ç®—æ³•ç”¨è¿™ä¸ªå…¬å¼æ›´æ–° DQN çš„å‚æ•°ï¼š<br><span class="math inline">\(\boldsymbol{w} \leftarrow \boldsymbol{w} -\alpha \cdot \delta_t \cdot \nabla_{\boldsymbol{w}}Q(s_t, a_t;\boldsymbol{w})\)</span>ã€‚</li><li>æ³¨æ„ï¼Œç®—æ³•æ‰€éœ€æ•°æ®ä¸ºå››å…ƒç»„<span class="math inline">\((s_t, a_t,r_t, s_{t+1})\)</span>, ä¸æ§åˆ¶æ™ºèƒ½ä½“è¿åŠ¨çš„ç­–ç•¥<span class="math inline">\(\pi\)</span>æ— å…³ã€‚è¿™å°±æ„å‘³ç€å¯ä»¥ç”¨ä»»ä½•ç­–ç•¥æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼ŒåŒæ—¶è®°å½•ä¸‹ç®—æ³•è¿åŠ¨è½¨è¿¹ï¼Œä½œä¸ºè®­ç»ƒæ•°æ®ã€‚å› æ­¤ï¼ŒDQNçš„è®­ç»ƒå¯ä»¥åˆ†å‰²æˆä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼šæ”¶é›†è®­ç»ƒæ•°æ®ã€æ›´æ–°å‚æ•°<span class="math inline">\(\boldsymbol{w}\)</span>ã€‚</li></ul><ol start="9" type="1"><li><strong>æ”¶é›†è®­ç»ƒæ•°æ®</strong>ï¼š</li></ol><ul><li>æˆ‘ä»¬å¯ä»¥ç”¨ä»»ä½•ç­–ç•¥å‡½æ•°<span class="math inline">\(\pi\)</span>å»æ§åˆ¶æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº¤äº’ï¼Œè¿™ä¸ª<span class="math inline">\(\pi\)</span>å°±å«åšè¡Œä¸ºç­–ç•¥ (behaviorpolicy)ã€‚æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<span class="math inline">\(\epsilon\)</span>-greedy ç­–ç•¥ï¼š<br><span class="math inline">\(a_t = \left\{ \begin{array}{ll} \arg\max_aQ(s_t, a; \boldsymbol{w}), &amp; \text{ä»¥æ¦‚ç‡ } (1 - \epsilon); \\\text{å‡åŒ€æŠ½å– } A \text{ ä¸­çš„ä¸€ä¸ªåŠ¨ä½œ}, &amp; \text{ä»¥æ¦‚ç‡ } \epsilon.\end{array} \right.\)</span></li><li>æŠŠæ™ºèƒ½ä½“åœ¨ä¸€å±€æ¸¸æˆä¸­çš„è½¨è¿¹è®°ä½œï¼š<br><span class="math inline">\(s_1, a_1, r_1, s_2, a_2, r_2, \cdots, s_n,a_n, r_n\)</span>ã€‚</li><li>æŠŠä¸€æ¡è½¨è¿¹åˆ’åˆ†æˆ<span class="math inline">\(n\)</span>ä¸ª<span class="math inline">\((s_t, a_t, r_t,s_{t+1})\)</span>è¿™ç§å››å…ƒç»„ï¼Œå­˜å…¥æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„å«åšç»éªŒå›æ”¾æ•°ç»„ (replaybuffer)ã€‚</li></ul><ol start="10" type="1"><li><strong>æ›´æ–° DQN å‚æ•°</strong><span class="math inline">\(\boldsymbol{w}\)</span>ï¼š</li></ol><ul><li>éšæœºä»ç»éªŒå›æ”¾æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªå››å…ƒç»„ï¼Œè®°ä½œ<span class="math inline">\((s_j, a_j, r_j, s_{j+1})\)</span>ã€‚</li><li>è®¾ DQN å½“å‰çš„å‚æ•°ä¸º<span class="math inline">\(\boldsymbol{w}_{\text{now}}\)</span>,æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤å¯¹å‚æ•°åšä¸€æ¬¡æ›´æ–°ï¼Œå¾—åˆ°æ–°çš„å‚æ•°<span class="math inline">\(\boldsymbol{w}_{\text{new}}\)</span>ã€‚<ol type="1"><li>å¯¹ DQN åšæ­£å‘ä¼ æ’­ï¼Œå¾—åˆ° Q å€¼ï¼š<br><span class="math inline">\(\hat{q}_j = Q(s_j, a_j;\boldsymbol{w}_{\text{now}})\)</span>å’Œ<span class="math inline">\(\hat{q}_{j+1} = \max_{a \in \mathcal{A}}Q(s_{j+1}, a; \boldsymbol{w}_{\text{now}})\)</span>ã€‚</li><li>è®¡ç®— TD ç›®æ ‡å’Œ TD è¯¯å·®ï¼š<br><span class="math inline">\(\hat{y}_j = r_j + \gamma \cdot\hat{q}_{j+1}\)</span>å’Œ<span class="math inline">\(\delta_j = \hat{q}_j- \hat{y}_j\)</span>ã€‚</li><li>å¯¹ DQN åšåå‘ä¼ æ’­ï¼Œå¾—åˆ°æ¢¯åº¦ï¼š<br><span class="math inline">\(\boldsymbol{g}_j = \nabla_{\boldsymbol{w}}Q(s_j, a_j; \boldsymbol{w}_{\text{now}})\)</span>ã€‚</li><li>åšæ¢¯åº¦ä¸‹é™æ›´æ–° DQN çš„å‚æ•°ï¼š<br><span class="math inline">\(\boldsymbol{w}_{\text{new}} \leftarrow\boldsymbol{w}_{\text{now}} - \alpha \cdot \delta_j \cdot\boldsymbol{g}_j\)</span>ã€‚</li></ol></li></ul><p>æ™ºèƒ½ä½“æ”¶é›†æ•°æ®ã€æ›´æ–° DQNå‚æ•°è¿™ä¸¤è€…å¯ä»¥åŒæ—¶è¿›è¡Œã€‚å¯ä»¥åœ¨æ™ºèƒ½ä½“æ¯æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œä¹‹åï¼Œå¯¹<span class="math inline">\(\boldsymbol{w}\)</span>åšå‡ æ¬¡æ›´æ–°ã€‚ä¹Ÿå¯ä»¥åœ¨æ¯å®Œæˆä¸€<font style="color:rgb(6, 6, 7);">å±€æ¸¸æˆä¹‹åï¼Œå¯¹</font><span class="math inline">\(\boldsymbol{w}\)</span><font style="color:rgb(6, 6, 7);">åšå‡ æ¬¡æ›´æ–°ã€‚</font></p><h4 id="æ³¨æ„"><font style="color:rgb(6, 6, 7);">æ³¨æ„</font></h4><p><font style="color:rgb(6, 6, 7);">ä¸Šé¢ä»‹ç»ç”¨ TD ç®—æ³•è®­ç»ƒ DQN,æ›´å‡†ç¡®åœ°è¯´ï¼Œæˆ‘ä»¬ç”¨çš„ TD ç®—æ³•å«åš Q å­¦ä¹ ç®—æ³• (Q-learning)ã€‚TDç®—æ³•æ˜¯ä¸€å¤§ç±»ç®—æ³•ï¼Œå¸¸è§çš„æœ‰ Q å­¦ä¹ å’Œ SARSAã€‚Qå­¦ä¹ çš„ç›®çš„æ˜¯å­¦åˆ°æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•° </font><span class="math inline">\(Q^*\)</span><font style="color:rgb(6, 6, 7);">, è€ŒSARSA çš„ç›®çš„æ˜¯å­¦ä¹ åŠ¨ä½œä»·å€¼å‡½æ•° </font><span class="math inline">\(Q_{\pi}\)</span><font style="color:rgb(6, 6, 7);">ã€‚åé¢ä¼šä»‹ç»SARSA ç®—æ³•ã€‚</font></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.1 DRLåŸºç¡€</title>
    <link href="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¦‚ç‡è®ºå¤ä¹ ">æ¦‚ç‡è®ºå¤ä¹ </h1><h2 id="éšæœºå˜é‡">éšæœºå˜é‡</h2><ol type="1"><li>éšæœºå˜é‡æ˜¯æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒç”¨æ¥æè¿°éšæœºè¯•éªŒçš„ç»“æœã€‚</li><li>éšæœºå˜é‡å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç¦»æ•£å‹éšæœºå˜é‡å’Œè¿ç»­å‹éšæœºå˜é‡ã€‚<ol type="1"><li>ç¦»æ•£å‹éšæœºå˜é‡ï¼šè¿™ç§éšæœºå˜é‡çš„å–å€¼æ˜¯å¯æ•°çš„ï¼Œé€šå¸¸æ˜¯æ•´æ•°ã€‚ä¾‹å¦‚ï¼ŒæŠ›ä¸€æšéª°å­ï¼Œéšæœºå˜é‡å¯ä»¥æ˜¯éª°å­çš„ç‚¹æ•°ï¼Œå–å€¼èŒƒå›´ä¸º1åˆ°6ã€‚ç¦»æ•£å‹éšæœºå˜é‡çš„æ¦‚ç‡åˆ†å¸ƒå¯ä»¥é€šè¿‡æ¦‚ç‡è´¨é‡å‡½æ•°ï¼ˆProbabilityMass Functionï¼ŒPMFï¼‰æ¥æè¿°ï¼Œå®ƒç»™å‡ºäº†éšæœºå˜é‡æ¯ä¸ªå¯èƒ½å–å€¼çš„æ¦‚ç‡ã€‚</li><li>è¿ç»­å‹éšæœºå˜é‡ï¼šè¿™ç§éšæœºå˜é‡çš„å–å€¼æ˜¯ä¸å¯æ•°çš„ï¼Œé€šå¸¸æ˜¯å®æ•°ã€‚ä¾‹å¦‚ï¼Œæµ‹é‡ä¸€ä»¶ç‰©å“çš„é•¿åº¦ï¼Œéšæœºå˜é‡å¯ä»¥æ˜¯ä»»æ„å®æ•°å€¼ã€‚è¿ç»­å‹éšæœºå˜é‡çš„æ¦‚ç‡åˆ†å¸ƒå¯ä»¥é€šè¿‡æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆProbabilityDensityFunctionï¼ŒPDFï¼‰æ¥æè¿°ï¼Œå®ƒè¡¨ç¤ºåœ¨æŸä¸€ç‚¹é™„è¿‘çš„æ¦‚ç‡å¯†åº¦ï¼Œè€Œå®é™…æ¦‚ç‡åˆ™æ˜¯é€šè¿‡å¯¹æ¦‚ç‡å¯†åº¦å‡½æ•°è¿›è¡Œç§¯åˆ†å¾—åˆ°ã€‚</li></ol></li><li>æ— è®ºæ˜¯ç¦»æ•£å‹è¿˜æ˜¯è¿ç»­å‹éšæœºå˜é‡ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨æ¥æè¿°éšæœºç°è±¡çš„ä¸ç¡®å®šæ€§ï¼Œä»¥åŠåœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­è¿›è¡Œæ¨æ–­å’Œåˆ†æã€‚</li><li>åœ¨ä½¿ç”¨éšæœºå˜é‡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å…³æ³¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š<ol type="1"><li>åˆ†å¸ƒå‡½æ•°ï¼ˆCumulative Distribution Functionï¼ŒCDFï¼‰ï¼šæè¿°éšæœºå˜é‡å°äºæˆ–ç­‰äºæŸä¸ªç‰¹å®šå€¼çš„æ¦‚ç‡ã€‚</li><li>æœŸæœ›å€¼ï¼ˆExpectationï¼‰ï¼šè¡¨ç¤ºéšæœºå˜é‡çš„å¹³å‡å€¼ï¼Œåæ˜ äº†åˆ†å¸ƒçš„ä¸­å¿ƒä½ç½®ã€‚</li><li>æ–¹å·®ï¼ˆVarianceï¼‰ï¼šè¡¡é‡éšæœºå˜é‡å–å€¼çš„åˆ†æ•£ç¨‹åº¦ï¼Œå³åˆ†å¸ƒçš„å®½çª„ç¨‹åº¦ã€‚</li></ol></li><li>éšæœºå˜é‡å’Œæ¦‚ç‡å¯†åº¦å‡½æ•°æˆ–æ¦‚ç‡è´¨é‡å‡½æ•°çš„æ¦‚å¿µåœ¨æ¦‚ç‡è®ºã€ç»Ÿè®¡å­¦ã€ä»¥åŠåº”ç”¨é¢†åŸŸå¦‚æœºå™¨å­¦ä¹ ç­‰æ–¹é¢éƒ½æ‰®æ¼”ç€å…³é”®çš„è§’è‰²ã€‚</li></ol><h2 id="æ¦‚ç‡å¯†åº¦å‡½æ•°">æ¦‚ç‡å¯†åº¦å‡½æ•°</h2><p>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆProbability DensityFunctionï¼Œç®€ç§°PDFï¼‰æ˜¯æè¿°éšæœºå˜é‡åœ¨å„ä¸ªå–å€¼ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒçš„æ•°å­¦å‡½æ•°ã€‚å¯¹äºè¿ç»­å‹éšæœºå˜é‡ï¼Œæ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯å®šä¹‰åœ¨æ•´ä¸ªå®æ•°è½´ä¸Šçš„éè´Ÿå‡½æ•°ï¼Œå…¶æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol type="1"><li>å¯¹äºä»»æ„å®æ•°xï¼Œæ¦‚ç‡å¯†åº¦å‡½æ•°f(x)éƒ½æ˜¯éè´Ÿçš„ï¼š<span class="math inline">\(f(x) \geq 0\)</span></li><li>æ•´ä¸ªå®æ•°è½´ä¸Šçš„æ¦‚ç‡å¯†åº¦å‡½æ•°çš„ç§¯åˆ†ç­‰äº1ï¼š<span class="math inline">\(\int_{-\infty}^{\infty} f(x) \, dx =1\)</span></li></ol><p>è¿™ä¸¤ä¸ªæ¡ä»¶ç¡®ä¿äº†æ¦‚ç‡å¯†åº¦å‡½æ•°å¯¹äºæ‰€æœ‰å¯èƒ½çš„å–å€¼éƒ½æä¾›äº†éè´Ÿçš„æ¦‚ç‡ï¼Œå¹¶ä¸”æ•´ä¸ªæ¦‚ç‡ç©ºé—´çš„æ€»å’Œæ˜¯1ã€‚</p><p>å¯¹äºä¸€ä¸ªè¿ç»­å‹éšæœºå˜é‡Xï¼Œå®ƒè½åœ¨æŸä¸ªåŒºé—´a ,bä¸Šçš„æ¦‚ç‡å¯ä»¥é€šè¿‡å¯¹æ¦‚ç‡å¯†åº¦å‡½æ•°åœ¨è¯¥åŒºé—´ä¸Šçš„ç§¯åˆ†æ¥è®¡ç®—ï¼š<span class="math inline">\(P(a \leq X \leq b) = \int_{a}^{b} f(x) \,dx\)</span></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¦‚ç‡å¯†åº¦å‡½æ•°å¹¶ä¸ç›´æ¥ç»™å‡ºå…·ä½“çš„æ¦‚ç‡å€¼ï¼Œè€Œæ˜¯åœ¨æŸä¸ªå–å€¼èŒƒå›´å†…çš„æ¦‚ç‡å¯†åº¦ã€‚æ¦‚ç‡å¯†åº¦å‡½æ•°çš„å›¾å½¢åœ¨æŸä¸ªåŒºé—´ä¸Šçš„æ›²çº¿ä¸‹æ–¹çš„é¢ç§¯è¡¨ç¤ºè¯¥åŒºé—´å†…çš„æ¦‚ç‡ã€‚</p><p>å¸¸è§çš„æ¦‚ç‡å¯†åº¦å‡½æ•°åŒ…æ‹¬æ­£æ€åˆ†å¸ƒã€æŒ‡æ•°åˆ†å¸ƒã€å‡åŒ€åˆ†å¸ƒç­‰ã€‚æ¯ç§åˆ†å¸ƒæœ‰å…¶ç‰¹å®šçš„æ•°å­¦å½¢å¼å’Œæ€§è´¨ï¼Œé€‚ç”¨äºä¸åŒç±»å‹çš„éšæœºç°è±¡å»ºæ¨¡ã€‚</p><h2 id="æ•°å­¦æœŸæœ›">æ•°å­¦æœŸæœ›</h2><p>æ•°å­¦æœŸæœ›ï¼ˆæˆ–å‡å€¼ï¼‰æ˜¯éšæœºå˜é‡çš„ä¸€ä¸ªé‡è¦æ€§è´¨ï¼Œå®ƒç”¨æ¥æè¿°éšæœºå˜é‡çš„å¹³å‡å€¼ã€‚å¯¹äºä¸€ä¸ªç¦»æ•£å‹éšæœºå˜é‡Xï¼Œå…¶æ•°å­¦æœŸæœ›ï¼ˆæœŸæœ›å€¼ï¼‰è¡¨ç¤ºä¸ºE(X)ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><p><span class="math inline">\(E(X) = \sum_i x_i \cdot P(X =x_i)\)</span></p><p>å¯¹äºä¸€ä¸ªè¿ç»­å‹éšæœºå˜é‡Xï¼Œå…¶æ•°å­¦æœŸæœ›è¡¨ç¤ºä¸ºE(X)ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><p><span class="math inline">\(E(X) = \int_{-\infty}^{\infty} x \cdotf(x) \, dx\)</span></p><p>å…¶ä¸­ï¼Œ<span class="math inline">\(x_i\)</span>æ˜¯ç¦»æ•£å‹éšæœºå˜é‡Xçš„å¯èƒ½å–å€¼ï¼Œ<span class="math inline">\(P(X =x_i)\)</span>æ˜¯ç›¸åº”å–å€¼çš„æ¦‚ç‡ã€‚å¯¹äºè¿ç»­å‹éšæœºå˜é‡Xï¼Œf(x)æ˜¯å…¶æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚</p><p>æ•°å­¦æœŸæœ›çš„ç›´è§‚ç†è§£æ˜¯éšæœºå˜é‡åœ¨é•¿æœŸé‡å¤è¯•éªŒä¸­çš„å¹³å‡å€¼ã€‚å®ƒæ˜¯ä¸€ä¸ªå¯¹åˆ†å¸ƒä¸­å¿ƒä½ç½®çš„åº¦é‡ï¼Œåæ˜ äº†éšæœºå˜é‡çš„é›†ä¸­è¶‹åŠ¿ã€‚</p><p>æ•°å­¦æœŸæœ›å…·æœ‰ä¸€äº›æ€§è´¨ï¼Œä¾‹å¦‚ï¼š</p><ol type="1"><li>çº¿æ€§æ€§è´¨ï¼š å¯¹äºå¸¸æ•°aå’Œbä»¥åŠéšæœºå˜é‡Xã€Yï¼Œæœ‰<span class="math inline">\(E(aX + bY) = aE(X) + bE(Y)\)</span></li><li>ç‹¬ç«‹æ€§è´¨ï¼š å¦‚æœXå’ŒYæ˜¯ç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡ï¼Œåˆ™<span class="math inline">\(E(XY) = E(X)E(Y)\)</span></li></ol><p>æ•°å­¦æœŸæœ›åœ¨æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå®ƒä¸ä»…ç”¨äºæè¿°éšæœºå˜é‡çš„å¹³å‡å€¼ï¼Œè¿˜åœ¨æ¨æ–­ã€å†³ç­–ç†è®ºç­‰é¢†åŸŸä¸­å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚</p><h2 id="éšæœºæŠ½æ ·">éšæœºæŠ½æ ·</h2><p>éšæœºæŠ½æ ·æ˜¯ä¸€ç§ç”¨æ¥é€‰æ‹©æ ·æœ¬çš„æ–¹æ³•ï¼Œå…¶ä¸­æ¯ä¸ªä¸ªä½“æœ‰ç›¸ç­‰çš„æœºä¼šè¢«é€‰ä¸­ï¼Œä»è€Œç¡®ä¿æ ·æœ¬æ˜¯ä»£è¡¨æ€»ä½“çš„ã€‚éšæœºæŠ½æ ·æ˜¯ç»Ÿè®¡å­¦ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼Œå®ƒæœ‰åŠ©äºå‡å°é€‰æ‹©åå·®ï¼Œä½¿æ ·æœ¬æ›´å…·æœ‰ä»£è¡¨æ€§ï¼Œä»è€Œæ›´å¥½åœ°åæ˜ æ€»ä½“çš„ç‰¹å¾ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„éšæœºæŠ½æ ·æ–¹æ³•ï¼š</p><ol type="1"><li>ç®€å•éšæœºæŠ½æ ·ï¼šåœ¨ç®€å•éšæœºæŠ½æ ·ä¸­ï¼Œæ¯ä¸ªä¸ªä½“è¢«é€‰ä¸­çš„æ¦‚ç‡æ˜¯ç›¸ç­‰çš„ï¼Œä¸”æ¯ä¸ªæ ·æœ¬çš„é€‰æ‹©æ˜¯ç‹¬ç«‹çš„ã€‚è¿™é€šå¸¸é€šè¿‡éšæœºæ•°ç”Ÿæˆå™¨æ¥å®ç°ï¼Œç¡®ä¿æ¯ä¸ªä¸ªä½“éƒ½æœ‰ç­‰æ¦‚ç‡åœ°è¿›å…¥æ ·æœ¬ã€‚</li><li>åˆ†å±‚éšæœºæŠ½æ ·ï¼šå°†æ€»ä½“åˆ’åˆ†ä¸ºè‹¥å¹²å±‚ï¼ˆæˆ–ç§°ä¸ºåˆ†å±‚ï¼‰ï¼Œç„¶ååœ¨æ¯ä¸ªå±‚å†…è¿›è¡Œç®€å•éšæœºæŠ½æ ·ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¯ä¸ªå­ç¾¤ä½“åœ¨æ ·æœ¬ä¸­éƒ½æœ‰ä»£è¡¨æ€§ï¼Œç‰¹åˆ«é€‚ç”¨äºæ€»ä½“å†…å­˜åœ¨æ˜æ˜¾å·®å¼‚çš„æƒ…å†µã€‚</li><li>ç³»ç»ŸéšæœºæŠ½æ ·ï¼šé€‰æ‹©ä¸€ä¸ªéšæœºçš„èµ·å§‹ç‚¹ï¼Œç„¶åæŒ‰ç…§ä¸€ä¸ªå›ºå®šçš„æ­¥é•¿æˆ–é—´éš”è¿›è¡ŒæŠ½æ ·ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæ€»ä½“ä¸­ä¸ªä½“çš„æ’åˆ—æ˜¯æœ‰è§„å¾‹çš„æƒ…å†µã€‚</li><li>æ•´ç¾¤æŠ½æ ·ï¼šå°†æ€»ä½“åˆ’åˆ†ä¸ºè‹¥å¹²ç¾¤ï¼Œç„¶åéšæœºé€‰æ‹©ä¸€äº›ç¾¤ï¼Œå†ä»é€‰ä¸­çš„ç¾¤ä¸­æŠ½å–æ‰€æœ‰ä¸ªä½“ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæ€»ä½“å†…ç¾¤ä¸ç¾¤ä¹‹é—´å­˜åœ¨ç›¸ä¼¼æ€§ï¼Œä½†ç¾¤å†…ä¸ªä½“å·®å¼‚è¾ƒå¤§çš„æƒ…å†µã€‚</li><li>å¤šé˜¶æ®µæŠ½æ ·ï¼šå°†æŠ½æ ·è¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µåœ¨å‰ä¸€é˜¶æ®µçš„åŸºç¡€ä¸Šè¿›è¡ŒæŠ½æ ·ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºæ€»ä½“å†…å­˜åœ¨å±‚çº§ç»“æ„çš„æƒ…å†µã€‚</li></ol><p>éšæœºæŠ½æ ·çš„ç›®çš„æ˜¯ç¡®ä¿æ ·æœ¬æ˜¯éšæœºçš„ã€æ— åçš„ï¼Œä»è€Œä½¿æ ·æœ¬ç»“æœå¯¹æ€»ä½“å…·æœ‰ä»£è¡¨æ€§ã€‚è¿™æœ‰åŠ©äºæ¨æ–­æ€§ç»Ÿè®¡åˆ†æï¼Œä½¿å¾—é€šè¿‡æ ·æœ¬çš„ç»“æœèƒ½å¤Ÿå¯¹æ€»ä½“çš„ç‰¹å¾è¿›è¡Œæ¨æ–­ã€‚</p><h1 id="å¼ºåŒ–å­¦ä¹ ä¸“ä¸šæœ¯è¯­">å¼ºåŒ–å­¦ä¹ ä¸“ä¸šæœ¯è¯­</h1><h2 id="state-å’Œ-action">state å’Œ action</h2><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒçŠ¶æ€ï¼ˆstateï¼‰å’ŒåŠ¨ä½œï¼ˆactionï¼‰æ˜¯ä¸¤ä¸ªå…³é”®çš„æ¦‚å¿µï¼Œå®ƒä»¬ç”¨äºæè¿°æ™ºèƒ½ä½“ï¼ˆagentï¼‰ä¸ç¯å¢ƒï¼ˆenvironmentï¼‰ä¹‹é—´çš„äº¤äº’å’Œå­¦ä¹ è¿‡ç¨‹ã€‚</p><ol type="1"><li>çŠ¶æ€ï¼ˆStateï¼‰ï¼šçŠ¶æ€æ˜¯æè¿°ç³»ç»Ÿæˆ–ç¯å¢ƒçš„ç‰¹å®šç¬æ—¶æ¡ä»¶çš„è¡¨ç¤ºã€‚åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒçŠ¶æ€æ˜¯æ™ºèƒ½ä½“è§‚å¯Ÿåˆ°çš„å…³é”®ä¿¡æ¯ï¼Œå®ƒåŒ…å«äº†æœ‰å…³ç¯å¢ƒçš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼Œä»¥ä¾¿æ™ºèƒ½ä½“å¯ä»¥åšå‡ºå†³ç­–ã€‚çŠ¶æ€å¯ä»¥æ˜¯ç¦»æ•£çš„æˆ–è¿ç»­çš„ï¼Œå…·ä½“å–å†³äºé—®é¢˜çš„æ€§è´¨ã€‚æ™ºèƒ½ä½“çš„ç­–ç•¥å’ŒåŠ¨ä½œé€šå¸¸ä¾èµ–äºå½“å‰çš„çŠ¶æ€ã€‚</li><li>åŠ¨ä½œï¼ˆActionï¼‰ï¼šåŠ¨ä½œæ˜¯æ™ºèƒ½ä½“åŸºäºå½“å‰çŠ¶æ€æ‰€é‡‡å–çš„è¡Œä¸ºæˆ–å†³ç­–ã€‚åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæ™ºèƒ½ä½“ä»å¯é€‰çš„åŠ¨ä½œä¸­é€‰æ‹©ä¸€ä¸ªæ¥å½±å“ç¯å¢ƒï¼Œå¹¶è¿›å…¥æ–°çš„çŠ¶æ€ã€‚åŠ¨ä½œå¯ä»¥æ˜¯ç¦»æ•£çš„ï¼Œä¾‹å¦‚åœ¨æ£‹ç›˜æ¸¸æˆä¸­çš„ç§»åŠ¨ä¸€æšæ£‹å­ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¾‹å¦‚åœ¨æœºå™¨äººæ§åˆ¶ä¸­çš„è¿ç»­è¿åŠ¨ã€‚</li></ol><p>åœ¨å¼ºåŒ–å­¦ä¹ çš„æ¡†æ¶ä¸­ï¼Œæ™ºèƒ½ä½“ä¸ç¯å¢ƒä¹‹é—´çš„äº’åŠ¨é€šå¸¸å¯ä»¥æè¿°ä¸ºä¸€ä¸ªåºåˆ—çš„çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±ï¼ˆrewardï¼‰å’Œä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚è¿™è¢«ç§°ä¸ºé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMarkovDecision Processï¼ŒMDPï¼‰ã€‚</p><p>å¥–åŠ±ï¼ˆRewardï¼‰ï¼šæ¯ä¸ªåŠ¨ä½œæ‰§è¡Œåï¼Œæ™ºèƒ½ä½“ä¼šæ”¶åˆ°ä¸€ä¸ªå¥–åŠ±ä¿¡å·ï¼Œè¡¨ç¤ºè¯¥åŠ¨ä½œçš„å¥½åç¨‹åº¦ã€‚å¥–åŠ±æ˜¯æ™ºèƒ½ä½“å­¦ä¹ çš„é©±åŠ¨åŠ›ï¼Œå…¶ç›®æ ‡æ˜¯æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ã€‚</p><p>æ™ºèƒ½ä½“çš„ç›®æ ‡æ˜¯é€šè¿‡å­¦ä¹ ä»çŠ¶æ€åˆ°åŠ¨ä½œçš„æ˜ å°„ï¼Œå³ç­–ç•¥ï¼Œä»¥æœ€å¤§åŒ–æœŸæœ›ç´¯ç§¯å¥–åŠ±ã€‚è¿™ä¸ªå­¦ä¹ è¿‡ç¨‹å¯ä»¥é€šè¿‡ä¸åŒçš„å¼ºåŒ–å­¦ä¹ ç®—æ³•æ¥å®ç°ï¼Œå¦‚Qå­¦ä¹ ã€æ·±åº¦Qç½‘ç»œï¼ˆDQNï¼‰ã€ç­–ç•¥æ¢¯åº¦æ–¹æ³•ç­‰ã€‚</p><p>æ€»ä¹‹ï¼ŒçŠ¶æ€æè¿°äº†ç¯å¢ƒçš„å½“å‰æƒ…å†µï¼ŒåŠ¨ä½œæ˜¯æ™ºèƒ½ä½“å¯¹å½“å‰çŠ¶æ€çš„å“åº”ï¼Œè€Œå¥–åŠ±æ˜¯ç³»ç»Ÿæä¾›çš„åé¦ˆï¼Œç”¨äºæŒ‡å¯¼æ™ºèƒ½ä½“å­¦ä¹ æ­£ç¡®çš„è¡Œä¸ºã€‚è¿™ä¸‰ä¸ªå…ƒç´ å…±åŒæ„æˆäº†å¼ºåŒ–å­¦ä¹ ä¸­çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p><h2 id="policy">policy</h2><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œç­–ç•¥ï¼ˆpolicyï¼‰æ˜¯æ™ºèƒ½ä½“ï¼ˆagentï¼‰åœ¨ç‰¹å®šçŠ¶æ€ä¸‹é€‰æ‹©åŠ¨ä½œçš„è§„åˆ™æˆ–ç­–ç•¥å‡½æ•°ã€‚ç­–ç•¥å®šä¹‰äº†ä»ç¯å¢ƒçš„çŠ¶æ€åˆ°æ™ºèƒ½ä½“é€‰æ‹©çš„åŠ¨ä½œçš„æ˜ å°„ã€‚å½¢å¼ä¸Šï¼Œå¯¹äºæŸä¸€çŠ¶æ€(s)ï¼Œç­–ç•¥å¯ä»¥è¡¨ç¤ºä¸ºï¼š<span class="math inline">\(\pi(a|s)\)</span></p><p>å…¶ä¸­ï¼Œ(<span class="math inline">\(\pi\)</span>)æ˜¯ç­–ç•¥å‡½æ•°ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬åœ¨çŠ¶æ€ (s) ä¸‹é€‰æ‹©åŠ¨ä½œ (a)çš„æ¦‚ç‡ã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ªç¡®å®šæ€§ç­–ç•¥ï¼ˆç¡®å®šæ€§åœ°é€‰æ‹©ä¸€ä¸ªåŠ¨ä½œï¼‰æˆ–ä¸€ä¸ªæ¦‚ç‡æ€§ç­–ç•¥ï¼ˆä»¥ä¸€å®šæ¦‚ç‡é€‰æ‹©ä¸åŒçš„åŠ¨ä½œï¼‰ã€‚</p><p>å¼ºåŒ–å­¦ä¹ ä¸­çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªæœ€ä¼˜ç­–ç•¥ï¼Œä½¿å¾—æ™ºèƒ½ä½“åœ¨ä¸ç¯å¢ƒçš„äº¤äº’ä¸­è·å¾—æœ€å¤§çš„ç´¯ç§¯å¥–åŠ±ã€‚å­¦ä¹ æœ€ä¼˜ç­–ç•¥çš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç±»ï¼š</p><ol type="1"><li>å€¼å‡½æ•°æ–¹æ³•ï¼ˆValue Function Methodsï¼‰ï¼šè¿™ç±»æ–¹æ³•é€šè¿‡ä¼°è®¡æ¯ä¸ªçŠ¶æ€æˆ–çŠ¶æ€åŠ¨ä½œå¯¹çš„å€¼æ¥æŒ‡å¯¼ç­–ç•¥çš„æ›´æ–°ã€‚å€¼å‡½æ•°å¯ä»¥æ˜¯çŠ¶æ€å€¼å‡½æ•°ï¼ˆV-functionï¼‰æˆ–åŠ¨ä½œå€¼å‡½æ•°ï¼ˆQ-functionï¼‰ã€‚æ ¹æ®å€¼å‡½æ•°ï¼Œå¯ä»¥é€‰æ‹©ä½¿å€¼æœ€å¤§åŒ–çš„åŠ¨ä½œã€‚</li><li>ç›´æ¥ç­–ç•¥ä¼˜åŒ–æ–¹æ³•ï¼ˆDirect Policy Optimization Methodsï¼‰ï¼šè¿™ç±»æ–¹æ³•ç›´æ¥å¯¹ç­–ç•¥è¿›è¡Œä¼˜åŒ–ï¼Œé€šè¿‡å‚æ•°åŒ–çš„ç­–ç•¥å‡½æ•°æ¥å¯»æ‰¾æœ€ä¼˜çš„ç­–ç•¥ã€‚å¸¸è§çš„æ–¹æ³•åŒ…æ‹¬ç­–ç•¥æ¢¯åº¦æ–¹æ³•ï¼Œå…¶ä¸­é€šè¿‡æ¢¯åº¦ä¸Šå‡æ›´æ–°ç­–ç•¥çš„å‚æ•°ï¼Œä½¿å¾—ç´¯ç§¯å¥–åŠ±å¢åŠ ã€‚</li></ol><p>ä¸€äº›å¸¸è§çš„ç­–ç•¥è¡¨ç¤ºæ–¹å¼åŒ…æ‹¬ï¼š</p><ol type="1"><li>ç¡®å®šæ€§ç­–ç•¥ï¼š (<span class="math inline">\(\pi(s) =a\)</span>)ï¼Œå³åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹ç›´æ¥é€‰æ‹©ä¸€ä¸ªç¡®å®šçš„åŠ¨ä½œã€‚</li><li>æ¦‚ç‡æ€§ç­–ç•¥ï¼š (<span class="math inline">\(\pi(a|s)\)</span>)ï¼Œå³åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹ä»¥ä¸€å®šçš„æ¦‚ç‡åˆ†å¸ƒé€‰æ‹©ä¸åŒçš„åŠ¨ä½œã€‚</li><li>å‚æ•°åŒ–ç­–ç•¥ï¼šä½¿ç”¨ä¸€ç»„å‚æ•°åŒ–çš„å‡½æ•°æ¥è¡¨ç¤ºç­–ç•¥ï¼Œä¾‹å¦‚ç¥ç»ç½‘ç»œã€‚è¿™ç§ç­–ç•¥å¯ä»¥é€šè¿‡å­¦ä¹ å‚æ•°çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚</li></ol><p>å¼ºåŒ–å­¦ä¹ ä¸­ç­–ç•¥çš„é€‰æ‹©å¯¹äºæ™ºèƒ½ä½“åœ¨ç¯å¢ƒä¸­çš„è¡¨ç°è‡³å…³é‡è¦ã€‚åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ™ºèƒ½ä½“é€šè¿‡ä¸æ–­å°è¯•ä¸åŒçš„ç­–ç•¥ï¼Œæ ¹æ®å¥–åŠ±ä¿¡å·æ¥æ›´æ–°ç­–ç•¥ï¼Œä»è€Œé€æ¸ä¼˜åŒ–å…¶è¡Œä¸ºã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733038505321-c20b5b78-b478-4b86-9f5f-5bc94f7b2ad8.png"></p><h2 id="reward">reward</h2><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œå¥–åŠ±ï¼ˆrewardï¼‰æ˜¯ç¯å¢ƒæä¾›ç»™æ™ºèƒ½ä½“ï¼ˆagentï¼‰çš„ä¸€ä¸ªä¿¡å·ï¼Œç”¨äºè¯„ä¼°æ™ºèƒ½ä½“åœ¨ç‰¹å®šçŠ¶æ€ä¸‹é‡‡å–ç‰¹å®šåŠ¨ä½œçš„å¥½åã€‚å¥–åŠ±æ˜¯æ™ºèƒ½ä½“å­¦ä¹ å’Œæ”¹è¿›å…¶ç­–ç•¥çš„ä¸»è¦é©±åŠ¨åŠ›ã€‚</p><p>å¥–åŠ±çš„ä½œç”¨æ˜¯å¼•å¯¼æ™ºèƒ½ä½“æœç€åœ¨ç‰¹å®šç¯å¢ƒä¸‹å–å¾—æ›´å¥½ç»“æœçš„æ–¹å‘å­¦ä¹ ã€‚æ™ºèƒ½ä½“çš„ç›®æ ‡é€šå¸¸æ˜¯æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ï¼Œè€Œå¥–åŠ±ä¿¡å·åˆ™åœ¨æ¯ä¸ªæ—¶é—´æ­¥é¼“åŠ±æˆ–æƒ©ç½šæ™ºèƒ½ä½“çš„è¡Œä¸ºã€‚</p><p>å¼ºåŒ–å­¦ä¹ ä¸­çš„å¥–åŠ±å…·æœ‰ä»¥ä¸‹ä¸€äº›é‡è¦æ€§è´¨ï¼š</p><ol type="1"><li>å³æ—¶å¥–åŠ±ï¼ˆImmediate Rewardï¼‰ï¼šæŒ‡çš„æ˜¯åœ¨æ™ºèƒ½ä½“æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œåç«‹å³è·å¾—çš„å¥–åŠ±ã€‚å³æ—¶å¥–åŠ±æœ‰åŠ©äºæ™ºèƒ½ä½“å¿«é€Ÿå­¦ä¹ é€‚åº”ç¯å¢ƒã€‚</li><li>å»¶è¿Ÿå¥–åŠ±ï¼ˆDelayed Rewardï¼‰ï¼šæŒ‡çš„æ˜¯ä¸æ™ºèƒ½ä½“çš„åŠ¨ä½œç›¸å¯¹åº”ä½†ä¸æ˜¯ç«‹å³è·å¾—çš„å¥–åŠ±ã€‚ä¾‹å¦‚ï¼Œæ™ºèƒ½ä½“åœ¨è¿·å®«ä¸­èµ°äº†ä¸€æ®µè·¯ç¨‹åæ‰è·å¾—å¥–åŠ±ã€‚å»¶è¿Ÿå¥–åŠ±è¦æ±‚æ™ºèƒ½ä½“å…·å¤‡é•¿æœŸè§„åˆ’å’Œè®°å¿†èƒ½åŠ›ã€‚</li><li>ç¨€ç–å¥–åŠ±ï¼ˆSparse Rewardï¼‰ï¼šæŒ‡çš„æ˜¯åœ¨è®¸å¤šçŠ¶æ€ä¸‹ï¼Œå¥–åŠ±ä¸ºé›¶æˆ–éå¸¸å°ã€‚è¿™å¯èƒ½ä½¿å¾—æ™ºèƒ½ä½“é¢ä¸´æŒ‘æˆ˜ï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨å¤§é‡æ— å¥–åŠ±çš„æƒ…å†µä¸‹å­¦ä¼šæ­£ç¡®çš„è¡Œä¸ºã€‚</li><li>ç¨ å¯†å¥–åŠ±ï¼ˆDense Rewardï¼‰ï¼šæŒ‡çš„æ˜¯åœ¨è®¸å¤šçŠ¶æ€ä¸‹ï¼Œå¥–åŠ±éƒ½æœ‰éé›¶å€¼ã€‚ç¨ å¯†å¥–åŠ±æœ‰åŠ©äºæ›´é¢‘ç¹åœ°æä¾›åé¦ˆï¼Œä¿ƒä½¿æ™ºèƒ½ä½“æ›´å¿«åœ°è°ƒæ•´å…¶ç­–ç•¥ã€‚</li></ol><p>åœ¨å¼ºåŒ–å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œè®¾è®¡æœ‰æ•ˆçš„å¥–åŠ±ç»“æ„å¯¹äºè®­ç»ƒç¨³å®šã€é«˜æ•ˆçš„æ™ºèƒ½ä½“è‡³å…³é‡è¦ã€‚åˆç†çš„å¥–åŠ±è®¾ç½®å¯ä»¥å¸®åŠ©å…‹æœæŒ‘æˆ˜ï¼Œå¼•å¯¼æ™ºèƒ½ä½“å­¦åˆ°æœŸæœ›çš„è¡Œä¸ºã€‚ä¸åŒçš„å¼ºåŒ–å­¦ä¹ é—®é¢˜å¯èƒ½éœ€è¦ä¸åŒçš„å¥–åŠ±è®¾è®¡ï¼Œä»¥ä¾¿å¹³è¡¡å³æ—¶å¥–åŠ±å’Œé•¿æœŸç›®æ ‡ï¼Œä»¥åŠç¨€ç–å’Œç¨ å¯†å¥–åŠ±ä¹‹é—´çš„å…³ç³»ã€‚</p><h2 id="state-transition">state transition</h2><p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒçŠ¶æ€è½¬ç§»ï¼ˆstatetransitionï¼‰æ˜¯æŒ‡æ™ºèƒ½ä½“ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„è¿‡ç¨‹ã€‚çŠ¶æ€è½¬ç§»æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMarkovDecisionProcessï¼ŒMDPï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­æ™ºèƒ½ä½“ä¸ç¯å¢ƒäº’åŠ¨ï¼Œå¹¶æ ¹æ®å…¶é‡‡å–çš„åŠ¨ä½œå’Œç¯å¢ƒçš„åé¦ˆæ¥æ”¹å˜çŠ¶æ€ã€‚</p><p>å…·ä½“è€Œè¨€ï¼ŒçŠ¶æ€è½¬ç§»å¯ä»¥é€šè¿‡ä¸€ä¸ªè½¬ç§»æ¦‚ç‡å‡½æ•°æ¥è¡¨ç¤ºã€‚å¯¹äºä¸€ä¸ªç¦»æ•£æ—¶é—´æ­¥(t)ï¼ŒçŠ¶æ€ (<span class="math inline">\(s_t\)</span>)ï¼Œå’ŒåŠ¨ä½œ (<span class="math inline">\(a_t\)</span>)ï¼ŒçŠ¶æ€è½¬ç§»å‡½æ•° (P) ç»™å‡ºäº†ä¸‹ä¸€ä¸ªçŠ¶æ€(<span class="math inline">\(s_{t+1}\)</span>) çš„æ¦‚ç‡åˆ†å¸ƒï¼š</p><p><span class="math inline">\(P(s_{t+1} | s_t, a_t)\)</span></p><p>è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒè¡¨ç¤ºåœ¨å½“å‰çŠ¶æ€ (<span class="math inline">\(s_t\)</span>)ä¸‹ï¼Œæ‰§è¡ŒåŠ¨ä½œ (<span class="math inline">\(a_t\)</span>)åè½¬ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ (<span class="math inline">\(s_{t+1}\)</span>)çš„æ¦‚ç‡ã€‚åœ¨é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ä¸­ï¼ŒçŠ¶æ€è½¬ç§»æ»¡è¶³é©¬å°”å¯å¤«æ€§è´¨ï¼Œå³ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æ¦‚ç‡åªä¾èµ–äºå½“å‰çŠ¶æ€å’Œæ‰§è¡Œçš„åŠ¨ä½œã€‚</p><p>çŠ¶æ€è½¬ç§»æ¦‚ç‡æ˜¯å¼ºåŒ–å­¦ä¹ ç®—æ³•ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºå®ƒå½±å“äº†æ™ºèƒ½ä½“å¯¹ç¯å¢ƒçš„ç†è§£å’Œå­¦ä¹ ã€‚æ™ºèƒ½ä½“æ ¹æ®çŠ¶æ€è½¬ç§»çš„æ¦‚ç‡åˆ†å¸ƒæ¥ä¼°è®¡åœ¨ä¸åŒçŠ¶æ€ä¸‹é‡‡å–ä¸åŒåŠ¨ä½œçš„ç»“æœï¼Œä»è€Œé€‰æ‹©æœ€ä¼˜çš„ç­–ç•¥æ¥æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ã€‚</p><p>åœ¨è¿ç»­çŠ¶æ€ç©ºé—´ä¸­ï¼ŒçŠ¶æ€è½¬ç§»å‡½æ•°å¯èƒ½è¢«æ›¿ä»£ä¸ºçŠ¶æ€è½¬ç§»å¯†åº¦å‡½æ•°ï¼Œé€šå¸¸ç”¨æ¦‚ç‡å¯†åº¦å‡½æ•°æ¥è¡¨ç¤ºçŠ¶æ€è½¬ç§»åˆ°æŸä¸ªåŒºåŸŸçš„æ¦‚ç‡ã€‚è¿™åœ¨è¿ç»­æ—¶é—´çš„å¼ºåŒ–å­¦ä¹ é—®é¢˜ä¸­å¾ˆå¸¸è§ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒçŠ¶æ€è½¬ç§»æ˜¯æè¿°å¼ºåŒ–å­¦ä¹ é—®é¢˜ä¸­æ™ºèƒ½ä½“ä¸ç¯å¢ƒä¹‹é—´äº¤äº’çš„é‡è¦æ¦‚å¿µï¼Œå¯¹äºæ™ºèƒ½ä½“çš„å†³ç­–å’Œå­¦ä¹ è¿‡ç¨‹è‡³å…³é‡è¦ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733038769556-3d1641ce-3033-4937-88b8-261c8bf78f77.png"></p><h2 id="rlä¸­çš„agentå’Œenvironmentçš„äº¤äº’">RLä¸­çš„agentå’Œenvironmentçš„äº¤äº’</h2><p>agenté‡‡å–è¡ŒåŠ¨<span class="math inline">\(a_{t}\)</span>ï¼Œç¯å¢ƒä¼šå°†çŠ¶æ€å˜æˆ<span class="math inline">\(s_{t+1}\)</span>,å¹¶ä¸”ç»™ä¸€ä¸ªå¥–åŠ±<span class="math inline">\(r_{t}\)</span></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733038880989-9bfb59c4-3fde-4c23-a862-a9b6f1af81e5.png"></p><p>è®©æˆ‘ä»¬é€šè¿‡ã€Šè¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿã€‹ï¼ˆSuper MarioBros.ï¼‰è¿™ä¸ªæ¸¸æˆæ¥è§£é‡Šå¼ºåŒ–å­¦ä¹ ä¸­çš„å‡ ä¸ªé‡è¦æ¦‚å¿µã€‚</p><ol type="1"><li>çŠ¶æ€ï¼ˆStateï¼‰ï¼šåœ¨ã€Šè¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿã€‹ä¸­ï¼ŒçŠ¶æ€å¯ä»¥æ˜¯æ¸¸æˆä¸­é©¬é‡Œå¥¥æ‰€å¤„çš„å…·ä½“ä½ç½®ã€å½“å‰çš„ç”Ÿå‘½å€¼ã€å…³å¡çš„æ—¶é—´ç­‰ã€‚æ¯ä¸€ä¸ªç¬æ—¶çš„æ¸¸æˆçŠ¶æ€éƒ½å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ªçŠ¶æ€ï¼Œå®ƒæè¿°äº†æ¸¸æˆçš„å½“å‰æƒ…å†µã€‚</li><li>åŠ¨ä½œï¼ˆActionï¼‰ï¼šåŠ¨ä½œæ˜¯æ™ºèƒ½ä½“ï¼ˆç©å®¶æˆ–é©¬é‡Œå¥¥ï¼‰å¯ä»¥æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚å‘å·¦ç§»åŠ¨ã€å‘å³è·³è·ƒç­‰ã€‚åœ¨é©¬é‡Œå¥¥æ¸¸æˆä¸­ï¼Œç©å®¶é€šè¿‡æŒ‰é”®æˆ–æ“çºµæ†æ¥æ‰§è¡Œè¿™äº›åŠ¨ä½œï¼Œæ¯ä¸ªåŠ¨ä½œå¯¹åº”ç€ä¸åŒçš„ç©å®¶è¾“å…¥ã€‚</li><li>å¥–åŠ±ï¼ˆRewardï¼‰ï¼šå¥–åŠ±æ˜¯æ™ºèƒ½ä½“æ ¹æ®å…¶åŠ¨ä½œåœ¨ç‰¹å®šçŠ¶æ€ä¸‹è·å¾—çš„åé¦ˆä¿¡å·ã€‚åœ¨ã€Šè¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿã€‹ä¸­ï¼Œå¥–åŠ±å¯ä»¥æ˜¯åƒåˆ°è˜‘è‡å¢åŠ ç”Ÿå‘½å€¼ï¼Œé€šè¿‡ç®¡é“åˆ°è¾¾æ–°çš„åŒºåŸŸï¼Œæˆ–è€…èº²é¿æ•Œäººè€Œä¿æŒç”Ÿå‘½ç­‰ã€‚è·å¾—å¥–åŠ±æœ‰åŠ©äºç©å®¶æœ€ç»ˆå®Œæˆå…³å¡ã€‚</li><li>çŠ¶æ€è½¬ç§»ï¼ˆState Transitionï¼‰ï¼šçŠ¶æ€è½¬ç§»æè¿°äº†æ™ºèƒ½ä½“ä»ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„è¿‡ç¨‹ã€‚åœ¨æ¸¸æˆä¸­ï¼Œè¿™å¯ä»¥æ˜¯ç©å®¶æ§åˆ¶é©¬é‡Œå¥¥ç§»åŠ¨ï¼Œç©¿è¶Šç®¡é“ï¼Œè·³è·ƒåˆ°æ–°çš„å¹³å°ç­‰ã€‚çŠ¶æ€è½¬ç§»ä¸ç©å®¶çš„åŠ¨ä½œå’Œå½“å‰çŠ¶æ€å¯†åˆ‡ç›¸å…³ã€‚</li><li>ç­–ç•¥ï¼ˆPolicyï¼‰ï¼šåœ¨é©¬é‡Œå¥¥æ¸¸æˆä¸­ï¼Œç­–ç•¥æ˜¯æŒ‡ç©å®¶åœ¨ç‰¹å®šçŠ¶æ€ä¸‹é€‰æ‹©çš„åŠ¨ä½œçš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå½“é©¬é‡Œå¥¥é¢ä¸´ä¸€ä¸ªæ·±å‘æ—¶ï¼Œç­–ç•¥å¯èƒ½æ˜¯é€‰æ‹©è·³è·ƒä»¥é¿å…æ‰å…¥å‘ä¸­ã€‚ç­–ç•¥å¯ä»¥éšç€æ¸¸æˆçš„è¿›è¡Œè€Œè°ƒæ•´ï¼Œä»¥æœ€å¤§åŒ–ç´¯ç§¯çš„å¥–åŠ±ã€‚</li><li>ç¯å¢ƒï¼ˆEnvironmentï¼‰ï¼šæ¸¸æˆç¯å¢ƒåŒ…æ‹¬äº†é©¬é‡Œå¥¥ã€æ•Œäººã€å¹³å°ã€ç®¡é“ç­‰æ‰€æœ‰ä¸ç©å®¶äº¤äº’çš„å…ƒç´ ã€‚æ™ºèƒ½ä½“ï¼ˆç©å®¶ï¼‰ä¸ç¯å¢ƒäº’åŠ¨ï¼Œæ™ºèƒ½ä½“çš„åŠ¨ä½œå½±å“ç¯å¢ƒçš„çŠ¶æ€ï¼Œå¹¶äº§ç”Ÿå¥–åŠ±ä¿¡å·ã€‚</li></ol><p>å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªç­–ç•¥ï¼Œä½¿å¾—åœ¨ç»™å®šçŠ¶æ€ä¸‹é€‰æ‹©åŠ¨ä½œçš„æ™ºèƒ½ä½“èƒ½å¤Ÿæœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ï¼Œä»è€Œé«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ï¼Œæ¯”å¦‚é€šå…³å…³å¡ã€‚é€šè¿‡ç†è§£è¿™äº›æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å°†å¼ºåŒ–å­¦ä¹ çš„æ€æƒ³åº”ç”¨äºã€Šè¶…çº§é©¬é‡Œå¥¥å…„å¼Ÿã€‹è¿™æ ·çš„æ¸¸æˆä¸­ï¼Œä»¥è®©æ™ºèƒ½ä½“å­¦ä¼šä¼˜ç§€çš„ç©å®¶ç­–ç•¥ã€‚</p><h2 id="ä¸¤ç§éšæœºæ€§">ä¸¤ç§éšæœºæ€§</h2><ol type="1"><li>åŠ¨ä½œçš„éšæœºæ€§</li></ol><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733038908727-edcac5c5-b037-4458-9ab1-2d819516a0a0.png"></p><ol start="2" type="1"><li>çŠ¶æ€çš„éšæœºæ€§</li></ol><p>ç¯å¢ƒç”¨çŠ¶æ€è½¬ç§»å‡½æ•°ç®—å‡ºæ¦‚ç‡pï¼Œç„¶åéšæœºæŠ½æ ·å¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€<span class="math inline">\(S^{&#39;}\)</span></p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733039713112-9d5cb7e9-dfad-4218-936a-b4285c59dda2.png"></p><p>è¿™ä¸¤è€…çš„éšæœºæ€§åˆ†åˆ«æ¥è‡ªç­–ç•¥å‡½æ•°å’ŒçŠ¶æ€è½¬ç§»å‡½æ•°</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733039734348-1d93db40-e4e4-47e4-979e-fafdc8976d0f.png"></p><h2 id="trajectory">trajectory</h2><p>Trajectoryï¼ˆè½¨è¿¹ï¼‰åœ¨å¼ºåŒ–å­¦ä¹ ä¸­æŒ‡çš„æ˜¯æ™ºèƒ½ä½“ï¼ˆagentï¼‰åœ¨ç¯å¢ƒä¸­æ‰§è¡Œä¸€ç³»åˆ—åŠ¨ä½œçš„åºåˆ—ï¼Œä»åˆå§‹çŠ¶æ€å¼€å§‹ï¼Œé€šè¿‡ä¸ç¯å¢ƒçš„äº¤äº’ï¼Œç»è¿‡ä¸€ç³»åˆ—çŠ¶æ€å’ŒåŠ¨ä½œï¼Œæœ€ç»ˆè¾¾åˆ°ç»ˆæ­¢çŠ¶æ€æˆ–æ»¡è¶³æŸä¸ªç»“æŸæ¡ä»¶ã€‚Trajectoryè®°å½•äº†æ™ºèƒ½ä½“åœ¨ç¯å¢ƒä¸­çš„è½¨è¿¹ï¼Œæè¿°äº†å…¶è¡Œä¸ºçš„å†å²ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„å¼ºåŒ–å­¦ä¹ è½¨è¿¹å¯ä»¥ç”¨å¦‚ä¸‹è¡¨ç¤ºï¼š</p><p><span class="math inline">\((s_0, a_0, r_1, s_1, a_1, r_2, s_2,\ldots, s_{T-1}, a_{T-1}, r_T, s_T)\)</span></p><p>å…¶ä¸­ï¼š</p><ul><li>(<span class="math inline">\(s_t\)</span>) æ˜¯åœ¨æ—¶é—´æ­¥ (t)æ—¶çš„çŠ¶æ€ï¼ˆstateï¼‰ã€‚</li><li>(<span class="math inline">\(a_t\)</span>) æ˜¯åœ¨æ—¶é—´æ­¥ (t)æ—¶æ™ºèƒ½ä½“é€‰æ‹©çš„åŠ¨ä½œï¼ˆactionï¼‰ã€‚</li><li>(<span class="math inline">\(r_{t+1}\)</span>) æ˜¯åœ¨æ‰§è¡ŒåŠ¨ä½œ (<span class="math inline">\(a_t\)</span>) åæ™ºèƒ½ä½“è·å¾—çš„å¥–åŠ±ï¼ˆrewardï¼‰ã€‚</li><li>(<span class="math inline">\(s_{t+1}\)</span>) æ˜¯åœ¨æ‰§è¡ŒåŠ¨ä½œ (<span class="math inline">\(a_t\)</span>)åç¯å¢ƒè½¬ç§»åˆ°çš„ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</li><li><ol start="20" type="A"><li>è¡¨ç¤ºè½¨è¿¹çš„ç»“æŸæ—¶åˆ»ã€‚</li></ol></li></ul><p>TrajectoryåŒ…å«äº†æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„äº¤äº’å†å²ï¼Œå¯¹äºç†è§£æ™ºèƒ½ä½“åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æ˜¯å¦‚ä½•ä¸ç¯å¢ƒäº’åŠ¨çš„è‡³å…³é‡è¦ã€‚åœ¨å¼ºåŒ–å­¦ä¹ çš„è®¸å¤šç®—æ³•ä¸­ï¼Œå­¦ä¹ çš„ç›®æ ‡æ˜¯é€šè¿‡åˆ†æè½¨è¿¹ï¼Œä¼˜åŒ–ç­–ç•¥ä»¥æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ã€‚ä¸€äº›ç®—æ³•å¦‚è’™ç‰¹å¡æ´›æ–¹æ³•å’Œæ—¶åºå·®åˆ†æ–¹æ³•éƒ½æ¶‰åŠåˆ°å¯¹è½¨è¿¹çš„åˆ†æå’Œåˆ©ç”¨ã€‚</p><p>è½¨è¿¹çš„é•¿åº¦å¯ä»¥å› ä»»åŠ¡çš„æ€§è´¨è€Œå¼‚ï¼Œå¯èƒ½æ˜¯æœ‰é™çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯æ— é™çš„ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªè¿ç»­çš„æ§åˆ¶é—®é¢˜ä¸­ï¼‰ã€‚å¯¹è½¨è¿¹çš„ç†è§£æœ‰åŠ©äºç ”ç©¶æ™ºèƒ½ä½“çš„è¡Œä¸ºæ¨¡å¼ã€è¯„ä¼°å­¦ä¹ ç®—æ³•çš„æ€§èƒ½ï¼Œå¹¶æ”¹è¿›æ™ºèƒ½ä½“çš„å†³ç­–ç­–ç•¥ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733039910750-c4e990c2-8bac-4e15-b85b-142380acc786.png"></p><h2 id="return-å’Œ-discounted-return">return å’Œ discounted return</h2><p>å›æŠ¥ï¼ˆreturnï¼‰æ˜¯æŒ‡ä»å½“å‰æ—¶åˆ»å¼€å§‹ï¼Œç›´åˆ°æœ¬å›åˆç»“æŸçš„æ‰€æœ‰å¥–åŠ±çš„æ€»å’Œï¼Œå› æ­¤å›æŠ¥ä¹Ÿè¢«ç§°ä¸ºç´¯è®¡å¥–åŠ±ï¼ˆcumulativefuture rewardï¼‰ã€‚å°†æ—¶åˆ» (t) çš„å›æŠ¥è¡¨ç¤ºä¸ºéšæœºå˜é‡ (<span class="math inline">\(U_t\)</span>)ã€‚å¦‚æœä¸€å›åˆæ¸¸æˆç»“æŸï¼Œå·²ç»è§‚æµ‹åˆ°æ‰€æœ‰å¥–åŠ±ï¼Œé‚£ä¹ˆå°†å›æŠ¥è®°ä½œ(<span class="math inline">\(u_t\)</span>)ã€‚è®¾æœ¬å›åˆåœ¨æ—¶åˆ» (n)ç»“æŸã€‚å®šä¹‰å›æŠ¥ä¸ºï¼š</p><p><span class="math inline">\(U_{t} = R_{t} + R_{t+1} + R_{t+2} +R_{t+3} + \ldots + R_{n}\)</span></p><p>å›æŠ¥çš„åº”ç”¨ä¸»è¦åœ¨äºå®ƒä»£è¡¨äº†æœªæ¥è·å¾—çš„å¥–åŠ±æ€»å’Œï¼Œå› æ­¤æ™ºèƒ½ä½“çš„ç›®æ ‡æ˜¯è®©å›æŠ¥å°½é‡å¤§ï¼Œå³è¶Šå¤§è¶Šå¥½ã€‚å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªç­–ç•¥ï¼Œä½¿å¾—å›æŠ¥çš„æœŸæœ›æœ€å¤§åŒ–ï¼Œè¿™ä¸ªç­–ç•¥è¢«ç§°ä¸ºæœ€ä¼˜ç­–ç•¥ï¼ˆoptimumpolicyï¼‰ã€‚</p><p>å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–å›æŠ¥ï¼Œè€Œä¸æ˜¯æœ€å¤§åŒ–å½“å‰çš„å¥–åŠ±ã€‚ä»¥ä¸‹æ£‹ä¸ºä¾‹ï¼Œç©å®¶çš„ç›®æ ‡æ˜¯èµ¢å¾—ä¸€å±€æ¯”èµ›ï¼ˆå›æŠ¥ï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯åƒæ‰å¯¹æ–¹å½“å‰çš„ä¸€ä¸ªæ£‹å­ï¼ˆå¥–åŠ±ï¼‰ã€‚</p><p>åœ¨é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ä¸­ï¼Œé€šå¸¸ä½¿ç”¨æŠ˜æ‰£å›æŠ¥ï¼ˆdiscountedreturnï¼‰ï¼Œå¯¹æœªæ¥çš„å¥–åŠ±è¿›è¡ŒæŠ˜æ‰£ã€‚æŠ˜æ‰£å›æŠ¥çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><p><span class="math inline">\(U_{t} = R_{t} + \gamma \cdot R_{t+1} +\gamma^{2} \cdot R_{t+2} + \gamma^{3} \cdot R_{t+3} +\ldots\)</span></p><p>å…¶ä¸­ï¼Œ(<span class="math inline">\(\gamma \in\)</span>[0,1])è¢«ç§°ä¸ºæŠ˜æ‰£ç‡ã€‚å¯¹äºè¶Šä¹…è¿œçš„æœªæ¥ï¼Œå¥–åŠ±æ‰“çš„æŠ˜æ‰£è¶Šå¤§ã€‚è¿™ç§æŠ˜æ‰£è€ƒè™‘äº†æ—¶é—´çš„å› ç´ ï¼Œä½¿å¾—åœ¨è®¡ç®—å›æŠ¥æ—¶æ›´åŠ å…³æ³¨å³æ—¶å¥–åŠ±ã€‚</p><p>return: cumulative future reward</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733040109848-0a1a6339-1242-4144-a870-c97634256a09.png"></p><p>discounted returnï¼šcumulative discounted future reward</p><p>æœªæ¥çš„rewardæ¯”ç°åœ¨çš„rewardä»·å€¼ä½ï¼Œæ‰€ä»¥ä¼šåŠ ä¸€ä¸ªæŠ˜æ‰£å› å­ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733040130341-63512a21-c157-4e10-8302-77532c65e1a0.png"></p><p>returnçš„éšæœºæ€§</p><p>discredounted returnä¾èµ–äº<span class="math inline">\(S_t,{A_t},S_{t+1},{A_{t+1}},\cdots,{S_n},{A_n}.\)</span>å³returnä¾èµ–äºä»tæ—¶åˆ»å¼€å§‹çš„çŠ¶æ€å’Œè¡ŒåŠ¨</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733040197542-89477349-5b59-448f-b3dc-d0ea5e9eb60d.png"></p><h2 id="value-functions">value functions</h2><p>action-value function Q(s, a)</p><p>åœ¨t æ—¶åˆ»ï¼Œå‡å¦‚æˆ‘ä»¬çŸ¥é“<span class="math inline">\(U_{t}\)</span>çš„å€¼ï¼Œæˆ‘ä»¬å°±çŸ¥é“æ¸¸æˆæ˜¯å¿«èµ¢äº†è¿˜æ˜¯å¿«è¾“äº†ã€‚ç„¶è€Œåœ¨t æ—¶åˆ»æˆ‘ä»¬å¹¶ä¸çŸ¥é“<span class="math inline">\(U_{t}\)</span>çš„å€¼ï¼Œå› ä¸ºæ­¤æ—¶<span class="math inline">\(U_{t}\)</span>ä»ç„¶æ˜¯ä¸ªéšæœºå˜é‡ã€‚åœ¨ tæ—¶åˆ»ï¼Œæˆ‘ä»¬ä¸çŸ¥é“<span class="math inline">\(U_{t}\)</span>çš„å€¼ï¼Œè€Œæˆ‘ä»¬åˆæƒ³é¢„åˆ¤<span class="math inline">\(U_{t}\)</span>çš„å€¼ä»è€ŒçŸ¥é“å±€åŠ¿çš„å¥½åã€‚è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆå°±æ˜¯å¯¹<span class="math inline">\(U_{t}\)</span>æ±‚æœŸæœ›ï¼Œæ¶ˆé™¤æ‰å…¶ä¸­çš„éšæœºæ€§ã€‚</p><p>å‡è®¾æˆ‘ä»¬å·²ç»è§‚æµ‹åˆ°çŠ¶æ€<span class="math inline">\(s_{t}\)</span>ï¼Œè€Œä¸”åšå®Œå†³ç­–ï¼Œé€‰ä¸­åŠ¨ä½œ<span class="math inline">\(a_{t}\)</span>ã€‚é‚£ä¹ˆ<span class="math inline">\(U_{t}\)</span>ä¸­çš„éšæœºæ€§æ¥è‡ªäº t + 1æ—¶åˆ»èµ·çš„æ‰€æœ‰çš„çŠ¶æ€å’ŒåŠ¨ä½œï¼š</p><p><span class="math inline">\(S_{t+1}, A_{t+1}, \quad S_{t+2}, A_{t+2},\quad \ldots, \quad S_n, A_n.\)</span></p><p>å¯¹<span class="math inline">\(U_t\)</span>å…³äºå˜é‡<span class="math inline">\(S_{t+1},A_{t+1},\cdots,S_n,A_n\)</span>æ±‚æ¡ä»¶æœŸæœ›ï¼Œå¾—åˆ°</p><p><span class="math inline">\(Q_{\pi}(s_{t},a_{t})=\mathbb{E}_{S_{t+1},A_{t+1},\cdots,S_{n},A_{n}}\bigg[U_{t}\bigg|S_{t}=s_{t},A_{t}=a_{t}\bigg].\)</span></p><p>æœŸæœ›ä¸­çš„<span class="math inline">\(S_t=s_t\)</span>å’Œ<span class="math inline">\(A_t=a_t\)</span>æ˜¯æ¡ä»¶ï¼Œæ„æ€æ˜¯å·²ç»è§‚æµ‹åˆ°<span class="math inline">\(S_t\)</span>ä¸<span class="math inline">\(A_t\)</span>çš„å€¼ã€‚æ¡ä»¶æœŸæœ›çš„ç»“æœ<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>è¢«ç§°ä½œåŠ¨ä½œä»·å€¼å‡½æ•°(action-value function)ã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733041025664-87ceab77-561e-4a79-8eba-06774dd45b63.png"></p><p>åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>ä¾èµ–äº<span class="math inline">\(s_t\)</span>ä¸<span class="math inline">\(a_t\)</span>, è€Œä¸ä¾èµ–äº<span class="math inline">\(t+1\)</span>æ—¶åˆ»åŠå…¶ä¹‹åçš„çŠ¶æ€å’ŒåŠ¨ä½œï¼Œå› ä¸ºéšæœºå˜é‡<span class="math inline">\(S_{t+1},A_{t+1},\cdots,S_n,A_n\)</span>éƒ½è¢«æœŸæœ›æ¶ˆé™¤äº†ã€‚ç”±äºåŠ¨ä½œ<span class="math inline">\(A_{t+1},\cdots,A_n\)</span>çš„æ¦‚ç‡è´¨é‡å‡½æ•°éƒ½æ˜¯<span class="math inline">\(\pi\)</span>,å…¬å¼ä¸­çš„æœŸæœ›ä¾èµ–äº<span class="math inline">\(\pi\)</span>;ç”¨ä¸åŒçš„<span class="math inline">\(\pi\)</span>, æ±‚æœŸæœ›å¾—å‡ºçš„ç»“æœå°±ä¼šä¸åŒã€‚å› æ­¤<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>ä¾èµ–äºÏ€,è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŠ¨ä½œä»·å€¼å‡½æ•°æœ‰ä¸‹æ ‡ Ï€ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œtæ—¶åˆ»çš„åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>ä¾èµ–äºä»¥ä¸‹ä¸‰ä¸ªå› ç´ ï¼š</p><ul><li>ç¬¬ä¸€ï¼Œå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>ã€‚å½“å‰çŠ¶æ€è¶Šå¥½ï¼Œé‚£ä¹ˆä»·å€¼<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>è¶Šå¤§ï¼Œä¹Ÿå°±æ˜¯è¯´å›æŠ¥çš„æœŸæœ›å€¼è¶Šå¤§ã€‚åœ¨è¶…çº§ç›ä¸½çš„æ¸¸æˆä¸­ï¼Œå¦‚æœç›ä¸½å¥¥å½“å‰å·²ç»æ¥è¿‘ç»ˆç‚¹ï¼Œé‚£ä¹ˆ<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>å°±éå¸¸å¤§ã€‚</li><li>ç¬¬äºŒï¼Œå½“å‰åŠ¨ä½œ<span class="math inline">\(a_t\)</span>ã€‚æ™ºèƒ½ä½“æ‰§è¡Œçš„åŠ¨ä½œè¶Šå¥½ï¼Œé‚£ä¹ˆä»·å€¼<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>è¶Šå¤§ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç›ä¸½å¥¥åšæ­£å¸¸çš„åŠ¨ä½œï¼Œé‚£ä¹ˆ<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>å°±æ¯”è¾ƒæ­£å¸¸ã€‚å¦‚æœç›ä¸½å¥¥çš„åŠ¨ä½œ<span class="math inline">\(a_t\)</span>æ˜¯è·³ä¸‹æ‚¬å´–ï¼Œé‚£ä¹ˆ<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>å°±ä¼šéå¸¸å°ã€‚</li><li>ç¬¬ä¸‰ï¼Œç­–ç•¥å‡½æ•°Ï€ã€‚ç­–ç•¥å†³å®šæœªæ¥çš„åŠ¨ä½œ<span class="math inline">\(A_{t+1},A_{t+2},\cdots,A_n\)</span>çš„å¥½åï¼šç­–ç•¥è¶Šå¥½ï¼Œé‚£ä¹ˆ<span class="math inline">\(Q_\pi(s_t,a_t)\)</span>å°±è¶Šå¤§ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œé¡¶çº§ç©å®¶ç›¸å½“äºå¥½çš„ç­–ç•¥Ï€,æ–°æ‰‹ç›¸å½“äºå·®çš„ç­–ç•¥ã€‚è®©é¡¶çº§ç©å®¶æ“ä½œæ¸¸æˆï¼Œå›æŠ¥çš„æœŸæœ›éå¸¸é«˜ã€‚æ¢æ–°æ‰‹æ“ä½œæ¸¸æˆï¼Œä»ç›¸åŒçš„çŠ¶æ€å‡ºå‘ï¼Œå›æŠ¥çš„æœŸæœ›ä¼šå¾ˆä½ã€‚</li></ul><p><strong>optimal action-value function</strong>æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°</p><p>æ€ä¹ˆæ ·æ‰èƒ½æ’é™¤æ‰ç­–ç•¥ Ï€çš„å½±å“ï¼Œåªè¯„ä»·å½“å‰çŠ¶æ€å’ŒåŠ¨ä½œçš„å¥½åå‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆå°±æ˜¯æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°(optimal action-value function):</p><p><span class="math inline">\(Q_{\star}(s_{t},a_{t})\:=\:\operatorname*{max}_{\pi}\:Q_{\pi}(s_{t},a_{t}),\quad\forall\:s_{t}\in\mathcal{S},\quada_{t}\in\mathcal{A}.\)</span></p><p>æ„æ€å°±æ˜¯æœ‰å¾ˆå¤šç§ç­–ç•¥å‡½æ•°Ï€å¯ä¾›é€‰æ‹©ï¼Œè€Œæˆ‘ä»¬é€‰æ‹©æœ€å¥½çš„ç­–ç•¥å‡½æ•°ï¼š</p><p><span class="math inline">\(\pi^{\star}\:=\:\operatorname*{argmax}_{\pi}\:Q_{\pi}(s_{t},a_{t}),\quad\forall\:s_{t}\in\mathcal{S},\quada_{t}\in\mathcal{A}.\)</span></p><p>æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_\star(s_t,a_t)\)</span>åªä¾èµ–äº<span class="math inline">\(s_t\)</span>å’Œ<span class="math inline">\(a_t\)</span>, è€Œä¸ç­–ç•¥ Ï€ æ— å…³ã€‚</p><p>æœ€ä¼˜åŠ¨ä½œä»·å€¼å‡½æ•°<span class="math inline">\(Q_{\star}\)</span>éå¸¸æœ‰ç”¨ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ªå…ˆçŸ¥ï¼Œèƒ½æŒ‡å¼•æ™ºèƒ½ä½“åšå‡ºæ­£ç¡®å†³ç­–ã€‚æ¯”å¦‚ç©è¶…çº§ç›ä¸½ï¼Œç»™å®šå½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>,æ™ºèƒ½ä½“è¯¥æ‰§è¡ŒåŠ¨ä½œç©ºé—´<span class="math inline">\(\mathcal{A}=\)</span>{å·¦ï¼Œå³ï¼Œä¸Š}ä¸­çš„å“ªä¸ªåŠ¨ä½œå‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬å·²çŸ¥<span class="math inline">\(Q_{\star}\)</span>å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®©<span class="math inline">\(Q_{\star}\)</span>ç»™ä¸‰ä¸ªåŠ¨ä½œæ‰“åˆ†ï¼Œæ¯”å¦‚ï¼š</p><p><span class="math inline">\(Q_{\star}(s_{t},\:\text{å·¦})\:=\:130,\quadQ_{\star}(s_{t},\:\text{å³})\:=\:-50,\quadQ_{\star}(s_{t},\:\text{ä¸Š})\:=\:296.\)</span></p><p>è¿™ä¸‰ä¸ªå€¼æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p><span class="math inline">\(Q_\star ( s_t, å·¦) =130\)</span>çš„æ„æ€æ˜¯ï¼šå¦‚æœç°åœ¨æ™ºèƒ½ä½“é€‰æ‹©å‘å·¦èµ°ï¼Œé‚£ä¹ˆä¸ç®¡ä»¥åæ™ºèƒ½ä½“ç”¨ä»€ä¹ˆç­–ç•¥å‡½æ•°Ï€,å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›æœ€å¤šä¸ä¼šè¶…è¿‡130ã€‚åŒç†ï¼Œå¦‚æœç°åœ¨å‘å³èµ°ï¼Œåˆ™å›æŠ¥çš„æœŸæœ›æœ€å¤šä¸è¶…è¿‡-50ã€‚å¦‚æœç°åœ¨å‘ä¸Šè·³ï¼Œåˆ™å›æŠ¥çš„æœŸæœ›æœ€å¤šä¸è¶…è¿‡296ã€‚</p><p>æ™ºèƒ½ä½“åº”è¯¥æ‰§è¡Œå“ªä¸ªåŠ¨ä½œå‘¢ï¼Ÿæ¯«æ— ç–‘é—®ï¼Œæ™ºèƒ½ä½“å½“ç„¶åº”è¯¥å‘ä¸Šè·³ï¼Œè¿™æ ·æ‰èƒ½æœ‰å¸Œæœ›è·å¾—å°½é‡é«˜çš„å›æŠ¥ã€‚</p><p><strong>state-value funciton </strong>çŠ¶æ€ä»·å€¼å‡½æ•°</p><p>å‡è®¾ AI ç”¨ç­–ç•¥å‡½æ•° Ï€ ä¸‹å›´æ£‹ã€‚AI æƒ³çŸ¥é“å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>(å³æ£‹ç›˜ä¸Šçš„æ ¼å±€)æ˜¯å¦å¯¹è‡ªå·²æœ‰åˆ©ï¼Œä»¥åŠè‡ªå·±å’Œå¯¹æ‰‹çš„èƒœç®—å„æœ‰å¤šå¤§ã€‚è¯¥ç”¨ä»€ä¹ˆæ¥é‡åŒ–åŒæ–¹çš„èƒœç®—å‘¢ï¼Ÿç­”æ¡ˆæ˜¯çŠ¶æ€ä»·å€¼å‡½æ•°(state-value function):</p><p><span class="math inline">\(V_{\pi}(s_{t}) = \mathbb{E}_{A_{t} \sim\pi(\cdot \mid s_{t})} \left[ Q_{\pi}(s_{t}, A_{t}) \right] \\= \sum_{a\in A} \pi(a \mid s_{t}) \cdot Q_{\pi}(s_{t}, a).\)</span></p><p>å…¬å¼é‡ŒæŠŠåŠ¨ä½œ<span class="math inline">\(A_t\)</span>ä½œä¸ºéšæœºå˜é‡ï¼Œç„¶åå…³äº<span class="math inline">\(A_t\)</span>æ±‚æœŸæœ›ï¼ŒæŠŠ<span class="math inline">\(A_t\)</span>æ¶ˆæ‰ã€‚å¾—åˆ°çš„çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_\pi(s_t)\)</span>åªä¾èµ–äºç­–ç•¥ Ï€ ä¸å½“å‰çŠ¶æ€<span class="math inline">\(s_t\)</span>, ä¸ä¾èµ–äºåŠ¨ä½œã€‚</p><p>çŠ¶æ€ä»·å€¼å‡½æ•°<span class="math inline">\(V_{\pi}(s_t)\)</span>ä¹Ÿæ˜¯å›æŠ¥<span class="math inline">\(U_t\)</span>çš„æœŸæœ›ï¼š</p><p><span class="math inline">\(V_\pi(s_t)~=~\mathbb{E}_{A_t,S_{t+1},A_{t+1},\cdots,S_n,A_n}\left[U_t\Big|S_t=s_t\right].\)</span></p><p>æœŸæœ›æ¶ˆæ‰äº†<span class="math inline">\(U_t\)</span>ä¾èµ–çš„éšæœºå˜é‡<span class="math inline">\(A_t,S_{t+1},A_{t+1},\cdots,S_n,A_n\)</span>ã€‚çŠ¶æ€ä»·å€¼è¶Šå¤§ï¼Œå°±æ„å‘³ç€å›æŠ¥çš„æœŸæœ›è¶Šå¤§ã€‚ç”¨çŠ¶æ€ä»·å€¼å¯ä»¥è¡¡é‡ç­–ç•¥Ï€ä¸çŠ¶æ€<span class="math inline">\(s_t\)</span>çš„å¥½åã€‚</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733043600217-49583593-72fa-4d78-af72-b83537f36023.png"></p><p>ä¸Šé¢çš„æœŸæœ›è®¡ç®—ï¼šå¯¹æ‰€æœ‰å¯èƒ½çš„åŠ¨ä½œæŒ‰ç…§ç­–ç•¥ Ï€ çš„æ¦‚ç‡è¿›è¡ŒåŠ æƒæ±‚å’Œ</p><p>Understanding the Value Functions</p><ul><li>Action-value function:<span class="math inline">\(Q_\pi(s,\color{red}{a})=\mathbb{E}\left[U_t|S_t=s,\color{red}{A_t=a}\right].\)</span></li><li>Given policy Ï€ ,<span class="math inline">\(Q_{\pi}(s,\color{red}{\alpha})\)</span>evaluateshow good it is for an agent to pick action<span class="math inline">\(\color{blue}{a}\)</span>while being in states.</li><li>State-value function:<span class="math inline">\(V_{\pi}(s)=\mathbb{E}_{\color{red}{A}}\left[Q_{\pi}(s,A)\right]\)</span></li><li>For fixed policy Ï€ ,<span class="math inline">\(V_{\pi}(s)\)</span>evaluates how good thesituation is in state s. +<span class="math inline">\(\mathbb{E}_S[V_\pi(S)]\)</span>evaluates how goodthe policy Ï€ is.</li></ul><p>AIå¦‚ä½•æ§åˆ¶agentï¼Ÿ</p><p>ä¸¤ç§æ–¹æ³•ï¼š</p><p>policy-based RL å’Œ value-based RL</p><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733043910681-4e0dd925-e3af-4601-93cf-d3fd43a09cb9.png"></p><p>Policy-based Reinforcement Learningï¼ˆåŸºäºç­–ç•¥çš„å¼ºåŒ–å­¦ä¹ ï¼‰å’ŒValue-based ReinforcementLearningï¼ˆåŸºäºå€¼çš„å¼ºåŒ–å­¦ä¹ ï¼‰æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­ä¸¤ç§ä¸»è¦çš„æ–¹æ³•ï¼Œå®ƒä»¬åœ¨è§£å†³é—®é¢˜çš„ç­–ç•¥å’Œä»·å€¼å‡½æ•°çš„è¡¨ç¤ºä¸Šæœ‰æ‰€ä¸åŒã€‚</p><p>Policy-based RL (åŸºäºç­–ç•¥çš„å¼ºåŒ–å­¦ä¹ ):</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ç›´æ¥å­¦ä¹ æœ€ä¼˜ç­–ç•¥ï¼Œè€Œä¸æ˜¯é€šè¿‡ä»·å€¼å‡½æ•°é—´æ¥å¾—åˆ°ã€‚</li><li>ç­–ç•¥é€šå¸¸è¡¨ç¤ºä¸ºä¸€ä¸ªå‚æ•°åŒ–çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¾‹å¦‚é«˜æ–¯åˆ†å¸ƒã€‚</li><li>ç›´æ¥ä¼˜åŒ–ç­–ç•¥å‚æ•°ä»¥æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ã€‚</li><li>åœ¨è¿ç»­åŠ¨ä½œç©ºé—´å’Œé«˜ç»´çŠ¶æ€ç©ºé—´ä¸­è¡¨ç°è‰¯å¥½ï¼Œé€‚ç”¨äºéç¡®å®šæ€§ç­–ç•¥ã€‚</li></ul><p>ä¼˜åŠ¿ï¼š</p><ul><li>å¯ä»¥å¤„ç†é«˜åº¦éçº¿æ€§å’Œè¿ç»­åŠ¨ä½œç©ºé—´ã€‚</li><li>æ”¶æ•›æ€§æ›´å¥½ï¼Œç‰¹åˆ«é€‚ç”¨äºå¤§è§„æ¨¡ã€é«˜ç»´åº¦çš„é—®é¢˜ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>è®­ç»ƒé€šå¸¸æ›´ä¸ºè®¡ç®—å¯†é›†ã€‚</li><li>å¯¹æ ·æœ¬æ•ˆç‡è¦æ±‚è¾ƒé«˜ã€‚</li></ul><p>Value-based RL (åŸºäºå€¼çš„å¼ºåŒ–å­¦ä¹ ):</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>é€šè¿‡ä»·å€¼å‡½æ•°ï¼ˆé€šå¸¸æ˜¯çŠ¶æ€å€¼å‡½æ•°æˆ–åŠ¨ä½œå€¼å‡½æ•°ï¼‰æ¥è¯„ä¼°åŠ¨ä½œæˆ–çŠ¶æ€çš„å¥½åã€‚</li><li>é€šå¸¸ä½¿ç”¨è´å°”æ›¼æ–¹ç¨‹æ¥æ›´æ–°ä»·å€¼å‡½æ•°ã€‚</li><li>é€šè¿‡æœ€ä¼˜å€¼å‡½æ•°æ¥é€‰æ‹©æœ€ä¼˜åŠ¨ä½œã€‚</li></ul><p>ä¼˜åŠ¿ï¼š</p><ul><li>é€šå¸¸æ›´ä¸ºç¨³å®šï¼Œå¯¹æ ·æœ¬æ•ˆç‡çš„è¦æ±‚è¾ƒä½ã€‚</li><li>åœ¨æœ‰é™çŠ¶æ€ã€ç¦»æ•£åŠ¨ä½œçš„é—®é¢˜ä¸­è¡¨ç°è‰¯å¥½ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å¯¹äºè¿ç»­åŠ¨ä½œç©ºé—´å’Œé«˜ç»´çŠ¶æ€ç©ºé—´çš„å¤„ç†å¯èƒ½ä¸å¤Ÿçµæ´»ã€‚</li><li>å¯èƒ½ä¼šæ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£ï¼Œç‰¹åˆ«æ˜¯åœ¨éçº¿æ€§é—®é¢˜ä¸Šã€‚</li></ul><p>å…±åŒç‚¹ï¼š</p><ul><li>ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªåœ¨ä¸åŒçŠ¶æ€æˆ–çŠ¶æ€-åŠ¨ä½œå¯¹ä¸Šçš„ç­–ç•¥ï¼Œä»¥æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±ã€‚</li><li>ä¸¤è€…éƒ½ä¾èµ–äºç­–ç•¥è¯„ä¼°å’Œæ”¹è¿›çš„è¿­ä»£è¿‡ç¨‹ã€‚</li></ul><p>ç»“è®ºï¼š</p><ul><li>é€‰æ‹©åŸºäºç­–ç•¥çš„æ–¹æ³•è¿˜æ˜¯åŸºäºå€¼çš„æ–¹æ³•é€šå¸¸å–å†³äºå…·ä½“é—®é¢˜çš„æ€§è´¨å’Œå¯¹é—®é¢˜çš„å»ºæ¨¡æ–¹å¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ‰æ—¶ä¼šç»“åˆä¸¤è€…ï¼Œä½¿ç”¨Actor-Criticç­‰æ··åˆæ–¹æ³•ï¼Œä»¥å‘æŒ¥å®ƒä»¬çš„ä¼˜åŠ¿å¹¶å¼¥è¡¥å½¼æ­¤çš„ä¸è¶³ã€‚</li></ul><h2 id="summary">summary</h2><p><img src="/2024/12/04/DRL-%E7%8E%8B%E6%A0%91%E6%A3%AE/1-1-%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/1733044015508-8c2e1424-1677-47cf-8fac-7b19ea83c0a3.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>DRL-ç‹æ ‘æ£®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. åˆæ¢å¼ºåŒ–å­¦ä¹ </title>
    <link href="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/"/>
    <url>/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="å¼ºåŒ–å­¦ä¹ ç®€ä»‹">1. å¼ºåŒ–å­¦ä¹ ç®€ä»‹</h1><h2 id="ä¸¤ç§äººå·¥æ™ºèƒ½ä»»åŠ¡ç±»å‹">1.1 ä¸¤ç§äººå·¥æ™ºèƒ½ä»»åŠ¡ç±»å‹</h2><ol type="1"><li>é¢„æµ‹å‹ä»»åŠ¡<ol type="1"><li>æ ¹æ®æ•°æ®é¢„æµ‹æ‰€éœ€è¾“å‡ºï¼ˆæœ‰ç›‘ç£å­¦ä¹ ï¼‰</li><li>ç”Ÿæˆæ•°æ®å®ä¾‹ï¼ˆæ— ç›‘ç£å­¦ä¹ ï¼‰</li></ol></li><li>å†³ç­–å‹ä»»åŠ¡<ol type="1"><li>åœ¨åŠ¨æ€ç¯å¢ƒä¸­é‡‡å–è¡ŒåŠ¨ï¼ˆå¼ºåŒ–å­¦ä¹ ï¼‰<ol type="1"><li>è½¬å˜åˆ°æ–°çš„çŠ¶æ€</li><li>è·å¾—å³æ—¶å¥–åŠ±</li><li>éšç€æ—¶é—´çš„æ¨ç§»æœ€å¤§åŒ–ç´¯è®¡å¥–åŠ± (Learning from interaction in atrial-and-error manner)</li></ol></li></ol></li></ol><h2 id="å¼ºåŒ–å­¦ä¹ å®šä¹‰">1.2 å¼ºåŒ–å­¦ä¹ å®šä¹‰</h2><ol type="1"><li>é€šè¿‡ä»äº¤äº’ä¸­å­¦ä¹ æ¥å®ç°ç›®æ ‡çš„è®¡ç®—æ–¹æ³•</li></ol><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129165412336.png"></p><ol start="2" type="1"><li>ä¸‰ä¸ªæ–¹é¢ï¼š<ol type="1"><li>æ„ŸçŸ¥ï¼šåœ¨æŸç§ç¨‹åº¦ä¸Šæ„ŸçŸ¥ç¯å¢ƒçš„çŠ¶æ€</li><li>è¡ŒåŠ¨ï¼šå¯ä»¥é‡‡å–è¡ŒåŠ¨æ¥å½±å“çŠ¶æ€æˆ–è€…è¾¾åˆ°ç›®æ ‡</li><li>ç›®æ ‡ï¼šéšç€æ—¶é—´æ¨ç§»æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±</li></ol></li></ol><h2 id="å¼ºåŒ–å­¦ä¹ äº¤äº’è¿‡ç¨‹">1.3 å¼ºåŒ–å­¦ä¹ äº¤äº’è¿‡ç¨‹</h2><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129165606063.png"></p><h2 id="å¼ºåŒ–å­¦ä¹ ç³»ç»Ÿè¦ç´ ">1.4 å¼ºåŒ–å­¦ä¹ ç³»ç»Ÿè¦ç´ </h2><ol type="1"><li>å†å²ï¼ˆHistoryï¼‰æ˜¯è§‚å¯Ÿã€è¡ŒåŠ¨å’Œå¥–åŠ±çš„åºåˆ—</li></ol><figure><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129165858441.png" alt="image-20241129165858441"><figcaption aria-hidden="true">image-20241129165858441</figcaption></figure><ul><li><p>å³ï¼Œä¸€ç›´åˆ°æ—¶é—´t ä¸ºæ­¢çš„æ‰€æœ‰å¯è§‚æµ‹å˜é‡</p></li><li><p>æ ¹æ®è¿™ä¸ªå†å²å¯ä»¥å†³å®šæ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆ</p><ul><li>æ™ºèƒ½ä½“é€‰æ‹©è¡ŒåŠ¨</li><li>ç¯å¢ƒé€‰æ‹©è§‚å¯Ÿå’Œå¥–åŠ±</li></ul></li></ul><ol start="2" type="1"><li>çŠ¶æ€ï¼ˆstateï¼‰æ˜¯ä¸€ç§ç”¨äºç¡®å®šæ¥ä¸‹æ¥ä¼šå‘ç”Ÿçš„äº‹æƒ…ï¼ˆè¡ŒåŠ¨ã€è§‚å¯Ÿã€å¥–åŠ±ï¼‰çš„ä¿¡æ¯</li></ol><ul><li>çŠ¶æ€æ˜¯å…³äºå†å²çš„å‡½æ•°S<sub>t</sub>= ğ‘“(ğ»ğ‘¡)</li></ul><ol start="3" type="1"><li>ç­–ç•¥ï¼ˆPolicyï¼‰æ˜¯å­¦ä¹ æ™ºèƒ½ä½“åœ¨ç‰¹å®šæ—¶é—´çš„è¡Œä¸ºæ–¹å¼</li></ol><ul><li>æ˜¯ä»çŠ¶æ€åˆ°è¡ŒåŠ¨çš„æ˜ å°„</li><li>ç¡®å®šæ€§ç­–ç•¥ï¼ˆDeterministic Policyï¼‰</li></ul><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129170233940.png"></p><ul><li>éšæœºç­–ç•¥ï¼ˆStochastic Policyï¼‰</li></ul><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129170244901.png"></p><ol start="4" type="1"><li>å¥–åŠ±ï¼ˆRewardï¼‰R(ğ‘ ,ğ‘)</li></ol><ul><li>ä¸€ä¸ªå®šä¹‰å¼ºåŒ–å­¦ä¹ ç›®æ ‡çš„æ ‡é‡</li><li>èƒ½ç«‹å³æ„ŸçŸ¥åˆ°ä»€ä¹ˆæ˜¯â€œå¥½â€çš„</li></ul><ol start="5" type="1"><li>ä»·å€¼å‡½æ•°ï¼ˆValue Functionï¼‰</li></ol><ul><li>çŠ¶æ€ä»·å€¼æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œç”¨äºå®šä¹‰å¯¹äºé•¿æœŸæ¥è¯´ä»€ä¹ˆæ˜¯ â€œå¥½â€çš„</li><li>ä»·å€¼å‡½æ•°æ˜¯å¯¹äºæœªæ¥ç´¯ç§¯å¥–åŠ±çš„é¢„æµ‹<ul><li>ç”¨äºè¯„ä¼°åœ¨ç»™å®šçš„ç­–ç•¥ä¸‹ï¼ŒçŠ¶æ€çš„å¥½å</li></ul></li></ul><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129170348176.png"></p><ol start="6" type="1"><li><p>ç¯å¢ƒçš„æ¨¡å‹ï¼ˆModelï¼‰ç”¨äºæ¨¡æ‹Ÿç¯å¢ƒçš„è¡Œä¸º</p></li><li><p>é¢„æµ‹ä¸‹ä¸€ä¸ªçŠ¶æ€(çŠ¶æ€è½¬ç§»)</p></li></ol><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129170621857.png"></p><ol start="2" type="1"><li>é¢„æµ‹ä¸‹ä¸€ä¸ªï¼ˆç«‹å³ï¼‰å¥–åŠ±ï¼ˆå¥–åŠ±å‡½æ•°ï¼‰</li></ol><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129170644835.png"></p><h2 id="å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“åˆ†ç±»">1.5 å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“åˆ†ç±»</h2><ol type="1"><li>åŸºäºæ¨¡å‹çš„å¼ºåŒ–å­¦ä¹ <ol type="1"><li>ç­–ç•¥ï¼ˆå’Œ/æˆ–ï¼‰ä»·å€¼å‡½æ•°</li><li>ç¯å¢ƒæ¨¡å‹</li><li>æ¯”å¦‚ï¼šä¸Šè¿°è¿·å®«æ¸¸æˆï¼Œå›´æ£‹ç­‰å¥–åŠ±</li></ol></li><li>æ¨¡å‹æ— å…³çš„å¼ºåŒ–å­¦ä¹ <ol type="1"><li>ç­–ç•¥ï¼ˆå’Œ/æˆ–ï¼‰ä»·å€¼å‡½æ•°</li><li>æ²¡æœ‰ç¯å¢ƒæ¨¡å‹</li><li>æ¯”å¦‚ï¼šAtariæ¸¸æˆçš„é€šç”¨ç­–ç•¥</li></ol></li></ol><h2 id="å¼ºåŒ–å­¦ä¹ çš„æ–¹æ³•åˆ†ç±»">1.6 å¼ºåŒ–å­¦ä¹ çš„æ–¹æ³•åˆ†ç±»</h2><ol type="1"><li>åŸºäºä»·å€¼ï¼šçŸ¥é“ä»€ä¹ˆæ˜¯å¥½çš„ä»€ä¹ˆæ˜¯åçš„<ol type="1"><li>æ²¡æœ‰ç­–ç•¥ï¼ˆéšå«ï¼‰</li><li>ä»·å€¼å‡½æ•°</li></ol></li></ol><p><img src="/2024/11/29/%E5%8A%A8%E6%89%8B%E5%AD%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/1-%E5%88%9D%E6%8E%A2%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/image-20241129171233751.png"></p><ol start="2" type="1"><li>åŸºäºç­–ç•¥ï¼šçŸ¥é“æ€ä¹ˆè¡ŒåŠ¨<ol type="1"><li>ç­–ç•¥</li><li>æ²¡æœ‰ä»·å€¼å‡½æ•°</li></ol></li><li>Actor-Criticï¼šå­¦ç”Ÿå¬è€å¸ˆçš„<ol type="1"><li>ç­–ç•¥</li><li>ä»·å€¼å‡½æ•°</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>RL</category>
      
      <category>åŠ¨æ‰‹å­¦å¼ºåŒ–å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kimiæŒ‡ä»¤ç²¾è¯»è®ºæ–‡</title>
    <link href="/2024/11/29/tools/kimi%E8%AF%BB%E8%AE%BA%E6%96%87/"/>
    <url>/2024/11/29/tools/kimi%E8%AF%BB%E8%AE%BA%E6%96%87/</url>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…zetore-å’Œ-æµè§ˆå™¨æ’ä»¶">1. å®‰è£…zetore å’Œ æµè§ˆå™¨æ’ä»¶</h1><ol type="1"><li>å®‰è£…Zotero6å’ŒGoogleæµè§ˆå™¨æ’ä»¶Zotero Connector</li><li>è®¾ç½®è¯­è¨€<ol type="1"><li>ç¼–è¾‘-&gt;é¦–é€‰é¡¹-&gt;é«˜çº§-&gt;å¸¸è§„</li><li>é€‰æ‹©ä¸­æ–‡ç®€ä½“</li></ol></li><li>è®¾ç½®æ–‡ä»¶å­˜å‚¨ä½ç½®</li><li>æ–°å»ºåˆ†ç±»</li><li>å¯¼å…¥æ–‡çŒ®<ol type="1"><li>è‹±æ–‡æ–‡çŒ®ï¼Œç‚¹å‡»zoteroæ’ä»¶å³å¯<ol type="1"><li>doi</li></ol></li><li>ä¸­æ–‡<ol type="1"><li>å®‰è£…èŒ‰è‰èŠ±æ’ä»¶ <a href="https://zotero-zh.netlify.app/plugins/#search=Jasminum">https://zotero-zh.netlify.app/plugins/#search=Jasminum</a>é€‰æ‹©å¯¹åº”çš„zoteroç‰ˆæœ¬</li><li>æ‰“å¼€å·¥å…·-&gt;é™„åŠ ç»„ä»¶ï¼Œå°†ä¸‹è½½å¥½çš„èŒ‰è‰èŠ±æ’ä»¶æ‹–å…¥å³å¯</li><li>æ›´æ–°åº”ç”¨æ’ä»¶å’Œæµè§ˆå™¨æ’ä»¶</li></ol></li></ol></li><li>ç§»åŠ¨æ¡ç›®<ol type="1"><li>é•¿æŒ‰shiftæ‹–åŠ¨å³å¯ç§»åŠ¨åˆ°å…¶ä»–åˆ†ç»„</li></ol></li></ol><h1 id="kimiæŒ‡ä»¤ç²¾è¯»è®ºæ–‡">2. kimiæŒ‡ä»¤ç²¾è¯»è®ºæ–‡</h1><ol type="1"><li>æŒ‡ä»¤1è¯·ä½ é˜…è¯»å¹¶ç†è§£è¿™ç¯‡æ–‡çŒ®ï¼Œç„¶åå°†è¯¥ç¯‡æ–‡ç« çš„æ ‡é¢˜ä½œä¸ºä¸€çº§æ ‡é¢˜ï¼Œå°†æ‘˜è¦å’Œå„ä¸ªå¤§æ ‡é¢˜ä½œä¸ºäºŒçº§æ ‡é¢˜ï¼Œå°†å°æ ‡é¢˜ä½œä¸ºä¸‰çº§æ ‡é¢˜å°†å°æ ‡é¢˜ä¸‹æ¯ä¸€éƒ¨åˆ†å†…å®¹ä½œä¸ºå››çº§æ ‡é¢˜ï¼Œç»™æˆ‘ä»¥markdownçš„è¯­è¨€è¾“å‡ºä¸­æ–‡çš„ç¿»è¯‘ã€‚å»æ‰è‡´è°¢å’Œå‚è€ƒæ–‡çŒ®çš„éƒ¨åˆ†ã€‚</li><li>æŒ‡ä»¤2è¯·ä½ ä»¥è¯¥ç¯‡æ–‡ç« çš„æ ‡é¢˜ä¸ºä¸€çº§æ ‡é¢˜ï¼Œåˆ†åˆ«ä»¥1è¯¥ç¯‡æ–‡ç« çš„ç ”ç©¶ç›®çš„ã€â€œ2è¯¥ç¯‡æ–‡ç« çš„ç ”ç©¶æ–¹æ³•â€ã€â€œ3è¯¥ç¯‡æ–‡ç« çš„ç ”ç©¶å†…å®¹ã€â€œ4è¯¥ç¯‡æ–‡ç« çš„æœ€å¤§åˆ›æ–°ç‚¹ã€â€œ5.è¯¥ç¯‡æ–‡ç« ç»™æˆ‘ä»¬çš„å¯å‘â€ä¸ºäºŒçº§æ ‡é¢˜ã€‚æ€»ç»“çš„è¿™äº”éƒ¨åˆ†å†…å®¹ä½œä¸ºä¸‰çº§è¡¨é¢˜ï¼Œæ‹¾æˆ‘æ€»ç»“åä»¥narkdownlçš„è¯­è¨€è¾“å‡ºã€‚</li><li>æŒ‡ä»¤3è¯·ä½ å¯¹è¯¥æ–‡ç« ä¸­çš„æ‰€æœ‰çš„å›¾ä¾‹å’Œè¡¨ä¾‹æŠ€ç…§é¡ºåºç»™æˆ‘ä¾æ¬¡ç¿»è¯‘æˆä¸­æ–‡ã€‚</li><li>æŒ‡ä»¤4è¿™æ˜¯å›¾X,è¯·ä½ ç»“åˆè¯¥ç¯‡æ–‡ç« å†…å®¹ï¼Œé¦–å…ˆç»™æˆ‘ä»‹ç»æ¯ä¸ªå›¾ä¸­çš„æ¨ªåæ ‡å’Œçºµåæ ‡å„è‡ªè¡¨ç¤ºçš„å«ä¹‰ï¼Œç„¶åé’ˆå¯¹æ¯ä¸€ä¸ªå›¾ç»™æˆ‘è¯¦ç»†çš„è§£é‡Šï¼Œ</li><li>æŒ‡ä»¤5æˆ‘å¯¹â€Xå†…å®¹ä¸æ˜¯å¾ˆç†è§£ï¼Œè¯·ä½ ç”¨é€šä¿—çš„è¯­è¨€ç»™æˆ‘è§£é‡Šï¼Œå¹¶ç»™æˆ‘ä¸¾å‡ºä¸€ä¸ªå®ä¾‹ä»¥ä¸Šæˆ‘æ›´åŠ æ·±åˆ»çš„ç†è§£ã€‚</li></ol><h1 id="è¾…åŠ©å·¥å…·">3. è¾…åŠ©å·¥å…·</h1><ol type="1"><li><p>quillbot è‹±æ–‡æ¶¦è‰²</p></li><li><p>grammarly è‹±è¯­è¯­æ³•</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>é˜…è¯»è®ºæ–‡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>kimi</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. std::atomic</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/10-std-atomic/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/10-std-atomic/</url>
    
    <content type="html"><![CDATA[<p><code>std::atomic</code> æ˜¯ C++11æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºå®ç°å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„åŸå­æ“ä½œã€‚å®ƒæä¾›äº†ä¸€ç§çº¿ç¨‹å®‰å…¨çš„æ–¹å¼æ¥è®¿é—®å’Œä¿®æ”¹å…±äº«å˜é‡ï¼Œå¯ä»¥é¿å…å¤šçº¿ç¨‹ç¯å¢ƒä¸­çš„æ•°æ®ç«äº‰é—®é¢˜ã€‚</p><p><code>std::atomic</code> çš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼äºæ™®é€šçš„ C++å˜é‡ï¼Œä½†æ˜¯å®ƒçš„æ“ä½œæ˜¯åŸå­æ€§çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ª<code>std::atomic</code> å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œä¸ä¼šå‡ºç°æ•°æ®ç«äº‰é—®é¢˜ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ <code>std::atomic</code> æ“ä½œï¼š</p><p>\1. <code>load()</code>ï¼šå°† <code>std::atomic</code>å˜é‡çš„å€¼åŠ è½½åˆ°å½“å‰çº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ä¸­ï¼Œå¹¶è¿”å›è¿™ä¸ªå€¼ã€‚</p><p>\2. <code>store(val)</code>ï¼šå°† <code>val</code> çš„å€¼å­˜å‚¨åˆ°<code>std::atomic</code> å˜é‡ä¸­ï¼Œå¹¶ä¿è¯è¿™ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚</p><p>\3. <code>exchange(val)</code>ï¼šå°† <code>val</code> çš„å€¼å­˜å‚¨åˆ°<code>std::atomic</code> å˜é‡ä¸­ï¼Œå¹¶è¿”å›åŸå…ˆçš„å€¼ã€‚</p><p>4.<code>compare_exchange_weak(expected, val)</code> å’Œ<code>compare_exchange_strong(expected, val)</code>ï¼šæ¯”è¾ƒ<code>std::atomic</code> å˜é‡çš„å€¼å’Œ <code>expected</code>çš„å€¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™å°† <code>val</code> çš„å€¼å­˜å‚¨åˆ°<code>std::atomic</code> å˜é‡ä¸­ï¼Œå¹¶è¿”å› <code>true</code>ï¼›å¦åˆ™ï¼Œå°†<code>std::atomic</code> å˜é‡çš„å€¼å­˜å‚¨åˆ° <code>expected</code> ä¸­ï¼Œå¹¶è¿”å›<code>false</code>ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>std::atomic</code>è¿›è¡ŒåŸå­æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;atomic&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br>std::atomic&lt;<span class="hljs-type">int</span>&gt; count = <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; ++i) &#123;<br>        count++;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(increment)</span></span>;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(increment)</span></span>;<br>    t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>    t<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();<br>    std::cout &lt;&lt; count &lt;&lt; std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>std::atomic&lt;int&gt;</code>ç±»å‹çš„å˜é‡ <code>count</code>ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º0ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æ‰§è¡Œ <code>increment</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°† <code>count</code>å˜é‡çš„å€¼åŠ ä¸€ï¼Œæ‰§è¡Œä¸€ç™¾ä¸‡æ¬¡ã€‚æœ€åï¼Œæˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸­è¾“å‡º <code>count</code>å˜é‡çš„å€¼ã€‚ç”±äº <code>count</code> å˜é‡æ˜¯ä¸€ä¸ª <code>std::atomic</code>ç±»å‹çš„å˜é‡ï¼Œå› æ­¤å¯¹å®ƒè¿›è¡Œæ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œä¸ä¼šå‡ºç°æ•°æ®ç«äº‰é—®é¢˜ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæœ€ç»ˆè¾“å‡ºçš„<code>count</code> å˜é‡çš„å€¼åº”è¯¥æ˜¯ 2000000</p><p>åŸå­æ€§æ•°æ®æ•ˆç‡æ›´é«˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9.å¼‚æ­¥å¹¶å‘â€”â€” async future packaged_task promise</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/9-%E5%BC%82%E6%AD%A5%E5%B9%B6%E5%8F%91%E2%80%94%E2%80%94%20async%20future%20packaged_task%20promise/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/9-%E5%BC%82%E6%AD%A5%E5%B9%B6%E5%8F%91%E2%80%94%E2%80%94%20async%20future%20packaged_task%20promise/</url>
    
    <content type="html"><![CDATA[<p><strong>1. async ã€ future</strong></p><p>æ˜¯C++11å¼•å…¥çš„ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œç”¨äºå¼‚æ­¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªstd::futureå¯¹è±¡ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚ä½¿ç”¨std::asyncå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹ï¼Œé¿å…äº†æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å’Œç®¡ç†çº¿ç¨‹çš„éº»çƒ¦ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨std::asyncçš„æ¡ˆä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;future&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calculate</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶çš„è®¡ç®—</span><br>    std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::future&lt;<span class="hljs-type">int</span>&gt; future_result <br>    = std::<span class="hljs-built_in">async</span>(std::launch::async, calculate);<br>    <span class="hljs-comment">// åœ¨è¿™é‡Œå¯ä»¥åšå…¶ä»–çš„äº‹æƒ…</span><br>    <span class="hljs-type">int</span> result = future_result.<span class="hljs-built_in">get</span>(); <span class="hljs-comment">// è·å–å¼‚æ­¥æ“ä½œçš„ç»“æœ</span><br>    std::cout &lt;&lt; result &lt;&lt; std::endl; <span class="hljs-comment">// è¾“å‡º42</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::asyncå‡½æ•°å¼‚æ­¥æ‰§è¡Œäº†ä¸€ä¸ªè€—æ—¶çš„è®¡ç®—ï¼Œè¿™ä¸ªè®¡ç®—å¯ä»¥åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿé¿å…äº†æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å’Œç®¡ç†çº¿ç¨‹çš„éº»çƒ¦ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;future&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++)<br>&#123;<br>i++;<br>&#125;<br><span class="hljs-keyword">return</span> i;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>std::future&lt;<span class="hljs-type">int</span>&gt; future_result = std::<span class="hljs-built_in">async</span>(std::launch::async, func);<br>cout &lt;&lt; <span class="hljs-built_in">func</span>() &lt;&lt; endl;<br><br>cout &lt;&lt; future_result.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>2. packaged_task</strong></p><p>åœ¨C++ä¸­ï¼Œpackaged_taskæ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œç”¨äºå°†ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆå¦‚å‡½æ•°ã€å‡½æ•°å¯¹è±¡æˆ–Lambdaè¡¨è¾¾å¼ï¼‰å°è£…æˆä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªstd::futureå¯¹è±¡ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚packaged_taskå¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ä¸ªå‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œä¾›å…¶ä»–çº¿ç¨‹ä½¿ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯packaged_taskçš„åŸºæœ¬ç”¨æ³•ï¼š</p><p>\1. å®šä¹‰å¯è°ƒç”¨å¯¹è±¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x + y;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°calculateï¼Œç”¨äºå°†ä¸¤ä¸ªæ•´æ•°ç›¸åŠ ã€‚ \2.åˆ›å»ºpackaged_taskå¯¹è±¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::packaged_task&lt;<span class="hljs-title">int</span><span class="hljs-params">(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)</span>&gt; <span class="hljs-title">task</span><span class="hljs-params">(calculate)</span></span>;<br>std::future&lt;<span class="hljs-type">int</span>&gt; future_result = task.<span class="hljs-built_in">get_future</span>();<br></code></pre></td></tr></table></figure><p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªpackaged_taskå¯¹è±¡ï¼Œå°†å‡½æ•°calculateå°è£…æˆå¼‚æ­¥æ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªstd::futureå¯¹è±¡ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚</p><p>\3. åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(std::move(task), <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;<br>t.<span class="hljs-built_in">join</span>();<br></code></pre></td></tr></table></figure><p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚ç”±äºpackaged_taskå¯¹è±¡æ˜¯å¯ç§»åŠ¨çš„ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨std::move()å‡½æ•°å°†taskå¯¹è±¡è½¬ç§»è‡³æ–°çº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p><p>\4. è·å–å¼‚æ­¥æ“ä½œçš„ç»“æœ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> result = future_result.<span class="hljs-built_in">get</span>();<br>std::cout &lt;&lt; result &lt;&lt; std::endl; <span class="hljs-comment">// è¾“å‡º3</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨future_result.get()æ–¹æ³•è·å–å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†ä¸€ä¸ªå‡½æ•°calculateå°è£…æˆäº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œã€‚é€šè¿‡packaged_taskå’Œfutureå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;future&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++)<br>&#123;<br>i++;<br>&#125;<br><span class="hljs-keyword">return</span> i;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">std::packaged_task&lt;<span class="hljs-title">int</span><span class="hljs-params">()</span>&gt; <span class="hljs-title">task</span><span class="hljs-params">(func)</span></span>;<br><span class="hljs-keyword">auto</span> future_result = task.<span class="hljs-built_in">get_future</span>();<br><br><span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(std::move(task))</span></span>;<br>cout &lt;&lt; <span class="hljs-built_in">func</span>() &lt;&lt; endl;<br><br>t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>cout &lt;&lt; future_result.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>3. promise</strong></p><p>åœ¨C++ä¸­ï¼Œpromiseæ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œç”¨äºåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è·å–è¿™ä¸ªå€¼ã€‚promiseé€šå¸¸ä¸futureå’Œasyncä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºå®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚</p><p>ä»¥ä¸‹æ˜¯promiseçš„åŸºæœ¬ç”¨æ³•ï¼š \1. åˆ›å»ºpromiseå¯¹è±¡ std::promise<int>p;</int></p><p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œç”¨äºäº§ç”Ÿä¸€ä¸ªæ•´æ•°å€¼ã€‚</p><p>\2. è·å–futureå¯¹è±¡ std::future<int> f = p.get_future();</int></p><p>é€šè¿‡promiseå¯¹è±¡çš„get_future()æ–¹æ³•ï¼Œå¯ä»¥è·å–ä¸ä¹‹å…³è”çš„futureå¯¹è±¡ï¼Œç”¨äºåœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è·å–promiseå¯¹è±¡äº§ç”Ÿçš„å€¼ã€‚</p><p>\3. åœ¨å…¶ä»–çº¿ç¨‹ä¸­è®¾ç½®å€¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">([&amp;p]() &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">    p.set_value(<span class="hljs-number">42</span>);</span></span><br><span class="hljs-params"><span class="hljs-function">&#125;)</span></span>;<br>t.<span class="hljs-built_in">join</span>();<br></code></pre></td></tr></table></figure><p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶åœ¨è¿™ä¸ªçº¿ç¨‹ä¸­ï¼Œä½¿ç”¨promiseå¯¹è±¡çš„set_value()æ–¹æ³•è®¾ç½®ä¸€ä¸ªæ•´æ•°å€¼42ã€‚</p><p>\4. åœ¨ä¸»çº¿ç¨‹ä¸­è·å–å€¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> result = f.<span class="hljs-built_in">get</span>();<br>std::cout &lt;&lt; result &lt;&lt; std::endl; <span class="hljs-comment">// è¾“å‡º42</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨futureå¯¹è±¡çš„get()æ–¹æ³•è·å–promiseå¯¹è±¡äº§ç”Ÿçš„å€¼ï¼Œå¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸåœ°ä½¿ç”¨promiseå’Œfutureå¯¹è±¡å®ç°äº†è·¨çº¿ç¨‹çš„å€¼ä¼ é€’ã€‚é€šè¿‡promiseå’Œfutureå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œé¿å…äº†æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å’Œç®¡ç†çº¿ç¨‹çš„éº»çƒ¦ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;future&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(std::promise&lt;<span class="hljs-type">int</span>&gt;&amp; f)</span> </span>&#123;<br>f.<span class="hljs-built_in">set_value</span>(<span class="hljs-number">1000</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>std::promise&lt;<span class="hljs-type">int</span>&gt; f;<br><span class="hljs-keyword">auto</span> future_result = f.<span class="hljs-built_in">get_future</span>();<br><br><span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(func, std::ref(f))</span></span>;<br><br>t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br><br>cout &lt;&lt; future_result.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. C++11 è·¨å¹³å°çº¿ç¨‹æ± </title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/8-Cpp11%20%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/8-Cpp11%20%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
    
    <content type="html"><![CDATA[<p><strong>è·¨å¹³å°çº¿ç¨‹æ± å®ç°</strong></p><p>å®ƒä½¿ç”¨ C++11 æ ‡å‡†åº“ä¸­çš„std::threadã€std::mutexã€std::condition_variableã€std::function å’Œstd::queue ç­‰ç»„ä»¶å®ç°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;condition_variable&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPool</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">ThreadPool</span>(<span class="hljs-type">int</span> numThreads) : <span class="hljs-built_in">stop</span>(<span class="hljs-literal">false</span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numThreads; ++i) &#123;<br>        threads.<span class="hljs-built_in">emplace_back</span>([<span class="hljs-keyword">this</span>] &#123;<br>            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>                std::unique_lock&lt;std::mutex&gt; <span class="hljs-built_in">lock</span>(mutex);<br>                condition.<span class="hljs-built_in">wait</span>(lock, [<span class="hljs-keyword">this</span>] &#123; <span class="hljs-keyword">return</span> stop || !tasks.<span class="hljs-built_in">empty</span>(); &#125;);<br>                <span class="hljs-keyword">if</span> (stop &amp;&amp; tasks.<span class="hljs-built_in">empty</span>()) &#123;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>                std::function&lt;<span class="hljs-built_in">void</span>()&gt; <span class="hljs-built_in">task</span>(std::<span class="hljs-built_in">move</span>(tasks.<span class="hljs-built_in">front</span>()));<br>                tasks.<span class="hljs-built_in">pop</span>();<br>                lock.<span class="hljs-built_in">unlock</span>();<br>                <span class="hljs-built_in">task</span>();<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br><br>~<span class="hljs-built_in">ThreadPool</span>() &#123;<br>    &#123;<br>        <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex)</span></span>;<br>        stop = <span class="hljs-literal">true</span>;<br>    &#125;<br>    condition.<span class="hljs-built_in">notify_all</span>();<br>    <span class="hljs-keyword">for</span> (std::thread&amp; thread : threads) &#123;<br>        thread.<span class="hljs-built_in">join</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> F, <span class="hljs-keyword">typename</span>... Args&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span>&#123;<br>    <span class="hljs-function">std::function&lt;<span class="hljs-title">void</span><span class="hljs-params">()</span>&gt; <span class="hljs-title">task</span><span class="hljs-params">(std::bind(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...))</span></span>;<br>    &#123;<br>        <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mutex)</span></span>;<br>        tasks.<span class="hljs-built_in">emplace</span>(std::<span class="hljs-built_in">move</span>(task));<br>    &#125;<br>    condition.<span class="hljs-built_in">notify_one</span>();<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br>std::vector&lt;std::thread&gt; threads;<br>std::queue&lt;std::function&lt;<span class="hljs-type">void</span>()&gt;&gt; tasks;<br>std::mutex mutex;<br>std::condition_variable condition;<br><span class="hljs-type">bool</span> stop;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">ThreadPool <span class="hljs-title">pool</span><span class="hljs-params">(<span class="hljs-number">4</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; ++i) &#123;<br>        pool.<span class="hljs-built_in">enqueue</span>([i] &#123;<br>            std::cout &lt;&lt; <span class="hljs-string">&quot;Task &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; is running in thread &quot;</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() &lt;&lt; std::endl;<br>            std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));<br>            std::cout &lt;&lt; <span class="hljs-string">&quot;Task &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; is done&quot;</span> &lt;&lt; std::endl;<br>        &#125;);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åŒæ ·å®šä¹‰äº†ä¸€ä¸ª ThreadPoolç±»ï¼Œå¹¶ä¸”åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºäº†æŒ‡å®šæ•°ç›®çš„çº¿ç¨‹ã€‚åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸æ–­åœ°ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡å¹¶æ‰§è¡Œï¼Œç›´åˆ°çº¿ç¨‹æ± è¢«åœæ­¢ã€‚åœ¨enqueue() å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†ä»»åŠ¡å°è£…æˆä¸€ä¸ª std::functionå¯¹è±¡ï¼Œå¹¶å°†å®ƒæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚åœ¨ ThreadPoolçš„ææ„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæˆåå†åœæ­¢æ‰€æœ‰çº¿ç¨‹ã€‚</p><p>åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª ThreadPool å¯¹è±¡ï¼Œå¹¶å‘ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ äº† 8ä¸ªä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡ä¼šè¾“å‡ºä¸€äº›ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œå®Œåç­‰å¾… 1ç§’é’Ÿã€‚ç”±äºçº¿ç¨‹æ± ä¸­æœ‰ 4 ä¸ªçº¿ç¨‹ï¼Œå› æ­¤è¿™ 8ä¸ªä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚åœ¨ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç¨‹åºä¼šé€€å‡ºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;condition_variable&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPool</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">ThreadPool</span>(<span class="hljs-type">int</span> numThreads) :<span class="hljs-built_in">stop</span>(<span class="hljs-literal">false</span>) &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numThreads; i++) &#123;<br>threads.<span class="hljs-built_in">emplace_back</span>([<span class="hljs-keyword">this</span>] &#123;<br><span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>std::unique_lock&lt;std::mutex&gt; <span class="hljs-built_in">lock</span>(mtx);<br>condition.<span class="hljs-built_in">wait</span>(lock, [<span class="hljs-keyword">this</span>] &#123;<br><span class="hljs-keyword">return</span> !tasks.<span class="hljs-built_in">empty</span>() || stop;<br>&#125;);<br><span class="hljs-keyword">if</span> (stop &amp;&amp; tasks.<span class="hljs-built_in">empty</span>()) &#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br>std::function&lt;<span class="hljs-built_in">void</span>()&gt; <span class="hljs-built_in">task</span>(std::<span class="hljs-built_in">move</span>(tasks.<span class="hljs-built_in">front</span>()));<br>tasks.<span class="hljs-built_in">pop</span>();<br>lock.<span class="hljs-built_in">unlock</span>();<br><span class="hljs-built_in">task</span>();<br>&#125;<br>&#125;);<br>&#125;<br>&#125;<br><br>~<span class="hljs-built_in">ThreadPool</span>() &#123;<br>&#123;<br><span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>stop = <span class="hljs-literal">true</span>;<br>&#125;<br><br><br>condition.<span class="hljs-built_in">notify_all</span>();<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; t : threads) &#123;<br>t.<span class="hljs-built_in">join</span>();<br>&#125;<br>&#125;<br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">F</span>, <span class="hljs-keyword">class</span>... Args&gt;<span class="hljs-comment">//å‡½æ•°æ¨¡æ¿é‡Œå³å€¼å¼•ç”¨æ˜¯ä¸‡èƒ½å¼•ç”¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span>&#123;<br>std::function&lt;<span class="hljs-type">void</span>()&gt; task = <br>std::<span class="hljs-built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...);<br>&#123;<br><span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;<br>tasks.<span class="hljs-built_in">emplace</span>(std::<span class="hljs-built_in">move</span>(task));<br>&#125;<br>condition.<span class="hljs-built_in">notify_one</span>();<br><br>&#125;<br><br><br><span class="hljs-keyword">private</span>:<br>std::vector&lt;std::thread&gt; threads;<br>std::queue&lt;std::function&lt;<span class="hljs-type">void</span>()&gt;&gt; tasks;<br><br>std::mutex mtx;<br>std::condition_variable condition;<br><br><span class="hljs-type">bool</span> stop;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">ThreadPool <span class="hljs-title">pool</span><span class="hljs-params">(<span class="hljs-number">4</span>)</span></span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>pool.<span class="hljs-built_in">enqueue</span>([i] &#123;<br>std::cout &lt;&lt; <span class="hljs-string">&quot;task : &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; is running&quot;</span> &lt;&lt; std::endl;<br>std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));<br>std::cout &lt;&lt; <span class="hljs-string">&quot;task : &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; is done&quot;</span> &lt;&lt; std::endl;<br>&#125;);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7.condition_variable ä¸å…¶ä½¿ç”¨åœºæ™¯</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/7-condition_variable%E4%B8%8E%E5%85%B6%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/7-condition_variable%E4%B8%8E%E5%85%B6%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
    
    <content type="html"><![CDATA[<p>std::condition_variable çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol type="1"><li>åˆ›å»ºä¸€ä¸ª std::condition_variable å¯¹è±¡ã€‚</li><li>åˆ›å»ºä¸€ä¸ªäº’æ–¥é” std::mutex å¯¹è±¡ï¼Œç”¨æ¥ä¿æŠ¤å…±äº«èµ„æºçš„è®¿é—®ã€‚</li><li>åœ¨éœ€è¦ç­‰å¾…æ¡ä»¶å˜é‡çš„åœ°æ–¹ä½¿ç”¨ std::unique_lock<std::mutex>å¯¹è±¡é”å®šäº’æ–¥é”å¹¶è°ƒç”¨std::condition_variable::wait()ã€std::condition_variable::wait_for() æˆ–std::condition_variable::wait_until() å‡½æ•°ç­‰å¾…æ¡ä»¶å˜é‡ã€‚</std::mutex></li><li>åœ¨å…¶ä»–çº¿ç¨‹ä¸­éœ€è¦é€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹æ—¶ï¼Œè°ƒç”¨std::condition_variable::notify_one() æˆ–std::condition_variable::notify_all() å‡½æ•°é€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ã€‚</li></ol><p><strong>ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å‹</strong></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹çš„æ¡ˆä¾‹ï¼Œå…¶ä¸­ä½¿ç”¨äº†<code>std::condition_variable</code> æ¥å®ç°çº¿ç¨‹çš„ç­‰å¾…å’Œé€šçŸ¥æœºåˆ¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;condition_variable&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br>std::mutex g_mutex;<br>std::condition_variable g_cv;<br>std::queue&lt;<span class="hljs-type">int</span>&gt; g_queue;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Producer</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>        &#123;            <br>            <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(g_mutex)</span></span>;<br>            g_queue.<span class="hljs-built_in">push</span>(i);            <br>            std::cout &lt;&lt; <span class="hljs-string">&quot;Producer: produced &quot;</span> &lt;&lt; i &lt;&lt; std::endl;<br>        &#125;<br>        g_cv.<span class="hljs-built_in">notify_one</span>();        <br>        std::this_thread::<span class="hljs-built_in">sleep_for</span>(std::chrono::<span class="hljs-built_in">milliseconds</span>(<span class="hljs-number">100</span>));<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Consumer</span><span class="hljs-params">()</span> </span>&#123;    <br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;        <br>        <span class="hljs-function">std::unique_lock&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(g_mutex)</span></span>;<br>        g_cv.<span class="hljs-built_in">wait</span>(lock, []() &#123; <span class="hljs-keyword">return</span> !g_queue.<span class="hljs-built_in">empty</span>(); &#125;);        <br>        <span class="hljs-type">int</span> value = g_queue.<span class="hljs-built_in">front</span>();<br>        g_queue.<span class="hljs-built_in">pop</span>();        <br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Consumer: consumed &quot;</span> &lt;&lt; value &lt;&lt; std::endl;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">producer_thread</span><span class="hljs-params">(Producer)</span></span>;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">consumer_thread</span><span class="hljs-params">(Consumer)</span></span>;<br>    producer_thread.<span class="hljs-built_in">join</span>();<br>    consumer_thread.<span class="hljs-built_in">join</span>();    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>std::condition_variable</code>å¯ä»¥å®ç°çº¿ç¨‹çš„ç­‰å¾…å’Œé€šçŸ¥æœºåˆ¶ï¼Œä»è€Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å®ç°åŒæ­¥æ“ä½œã€‚åœ¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œä½¿ç”¨<code>std::condition_variable</code>å¯ä»¥è®©æ¶ˆè´¹è€…çº¿ç¨‹ç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§æ•°æ®åå†è¿›è¡Œæ¶ˆè´¹ï¼Œé¿å…äº†æ•°æ®ä¸¢å¤±æˆ–è€…æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.std::call_onceä¸å…¶ä½¿ç”¨åœºæ™¯</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/6-std-call_once%E4%B8%8E%E5%85%B6%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/6-std-call_once%E4%B8%8E%E5%85%B6%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF/</url>
    
    <content type="html"><![CDATA[<p>å•ä¾‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œç”¨äºç¡®ä¿æŸä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚ç”±äºå•ä¾‹å®ä¾‹æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå› æ­¤åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å•ä¾‹æ¨¡å¼çš„å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">static</span> Singleton&amp; <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">static</span> Singleton instance;<br>    <span class="hljs-keyword">return</span> instance;<br>&#125;    <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setData</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span> </span>&#123;<br>    m_data = data;<br>&#125;    <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> m_data;<br>&#125;<span class="hljs-keyword">private</span>:<br><span class="hljs-built_in">Singleton</span>() &#123;&#125;<br><span class="hljs-built_in">Singleton</span>(<span class="hljs-type">const</span> Singleton&amp;) = <span class="hljs-keyword">delete</span>;<br>Singleton&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Singleton&amp;) = <span class="hljs-keyword">delete</span>;    <br><span class="hljs-type">int</span> m_data = <span class="hljs-number">0</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå•ä¾‹ç±»ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªé™æ€æˆå‘˜å‡½æ•° getInstance()æ¥è·å–å•ä¾‹å®ä¾‹ï¼Œè¯¥å‡½æ•°ä½¿ç”¨äº†ä¸€ä¸ªé™æ€å±€éƒ¨å˜é‡ instanceæ¥å­˜å‚¨å•ä¾‹å®ä¾‹ã€‚ç”±äºé™æ€å±€éƒ¨å˜é‡åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œå› æ­¤è¯¥å®ç°å¯ä»¥ç¡®ä¿å•ä¾‹å®ä¾‹åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ã€‚</p><p>ä½†æ˜¯ï¼Œè¯¥å®ç°å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ getInstance()å‡½æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªå¯¹è±¡è¢«åˆ›å»ºï¼Œä»è€Œè¿åäº†å•ä¾‹æ¨¡å¼çš„è¦æ±‚ã€‚æ­¤å¤–ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨setData() å‡½æ•°æ¥ä¿®æ”¹å•ä¾‹å¯¹è±¡çš„æ•°æ®æˆå‘˜m_dataï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´æˆ–ä¸æ­£ç¡®çš„ç»“æœã€‚</p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ std::call_onceæ¥å®ç°ä¸€æ¬¡æ€§åˆå§‹åŒ–ï¼Œä»è€Œç¡®ä¿å•ä¾‹å®ä¾‹åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨std::call_once çš„å•ä¾‹å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">static</span> Singleton&amp; <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>&#123;<br>    std::<span class="hljs-built_in">call_once</span>(m_onceFlag, &amp;Singleton::init);<br>    <span class="hljs-keyword">return</span> *m_instance;<br>&#125;    <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setData</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span> </span>&#123;<br>    m_data = data;<br>&#125;    <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getData</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;        <br>    <span class="hljs-keyword">return</span> m_data;<br>&#125;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-built_in">Singleton</span>() &#123;&#125;<br><span class="hljs-built_in">Singleton</span>(<span class="hljs-type">const</span> Singleton&amp;) = <span class="hljs-keyword">delete</span>;<br>Singleton&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Singleton&amp;) = <span class="hljs-keyword">delete</span>;    <br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123;<br>    m_instance.<span class="hljs-built_in">reset</span>(<span class="hljs-keyword">new</span> Singleton);<br>&#125;    <br><span class="hljs-type">static</span> std::unique_ptr&lt;Singleton&gt; m_instance;    <br><span class="hljs-type">static</span> std::once_flag m_onceFlag;    <br><span class="hljs-type">int</span> m_data = <span class="hljs-number">0</span>;<br>&#125;;<br>std::unique_ptr&lt;Singleton&gt; Singleton::m_instance;<br>std::once_flag Singleton::m_onceFlag;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ m_instanceæ¥å­˜å‚¨å•ä¾‹å®ä¾‹ï¼Œä½¿ç”¨äº†ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ m_onceFlagæ¥æ ‡è®°åˆå§‹åŒ–æ˜¯å¦å·²ç»å®Œæˆã€‚åœ¨ getInstance() å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::call_once æ¥è°ƒç”¨ init() å‡½æ•°ï¼Œç¡®ä¿å•ä¾‹å®ä¾‹åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ã€‚åœ¨ init()å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† std::unique_ptr æ¥åˆ›å»ºå•ä¾‹å®ä¾‹ã€‚</p><p>ä½¿ç”¨ std::call_onceå¯ä»¥ç¡®ä¿å•ä¾‹å®ä¾‹åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œä»è€Œé¿å…äº†å¤šä¸ªå¯¹è±¡è¢«åˆ›å»ºçš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œä½¿ç”¨std::unique_ptr å¯ä»¥ç¡®ä¿å•ä¾‹å®ä¾‹è¢«æ­£ç¡®åœ°é‡Šæ”¾ï¼Œé¿å…äº†å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚</p><p><code>std::call_once</code> æ˜¯ C++11æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç¡®ä¿æŸä¸ªå‡½æ•°åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚å…¶å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p><p>template&lt;class Callable, class... Args&gt;</p><p>void call_once(std::once_flag&amp; flag, Callable&amp;&amp; func,Args&amp;&amp;... args);</p><p>å…¶ä¸­ï¼Œ<code>flag</code> æ˜¯ä¸€ä¸ª <code>std::once_flag</code>ç±»å‹çš„å¯¹è±¡ï¼Œç”¨äºæ ‡è®°å‡½æ•°æ˜¯å¦å·²ç»è¢«è°ƒç”¨ï¼›<code>func</code>æ˜¯éœ€è¦è¢«è°ƒç”¨çš„å‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡ï¼›<code>args</code>æ˜¯å‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡çš„å‚æ•°ã€‚</p><p><code>std::call_once</code> çš„ä½œç”¨æ˜¯ï¼Œç¡®ä¿åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è°ƒç”¨<code>call_once</code> æ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸæˆåŠŸæ‰§è¡Œ <code>func</code>å‡½æ•°ï¼Œè€Œå…¶ä»–çº¿ç¨‹åˆ™ä¼šç­‰å¾…è¯¥å‡½æ•°æ‰§è¡Œå®Œæˆã€‚</p><p>ä½¿ç”¨ <code>std::call_once</code> çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>\1. <code>flag</code> å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ª <code>std::once_flag</code>ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å¤šæ¬¡è°ƒç”¨ <code>call_once</code> å‡½æ•°æ—¶éœ€è¦ä½¿ç”¨åŒä¸€ä¸ª<code>flag</code> å¯¹è±¡ã€‚</p><p>\2. <code>func</code>å‚æ•°æ˜¯éœ€è¦è¢«è°ƒç”¨çš„å‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡ã€‚è¯¥å‡½æ•°åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå› æ­¤åº”è¯¥ç¡®ä¿è¯¥å‡½æ•°æ˜¯å¹‚ç­‰çš„ã€‚</p><p>\3. <code>args</code> å‚æ•°æ˜¯ <code>func</code>å‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡çš„å‚æ•°ã€‚å¦‚æœ <code>func</code>å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œåˆ™è¯¥å‚æ•°å¯ä»¥çœç•¥ã€‚</p><p>\4. <code>std::call_once</code> å‡½æ•°ä¼šæŠ›å‡º<code>std::system_error</code> å¼‚å¸¸ï¼Œå¦‚æœåœ¨è°ƒç”¨ <code>func</code>å‡½æ•°æ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œåˆ™è¯¥å¼‚å¸¸ä¼šè¢«ä¼ é€’ç»™è°ƒç”¨è€…ã€‚</p><p>ä½¿ç”¨ <code>std::call_once</code>å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å®ç°ä¸€æ¬¡æ€§åˆå§‹åŒ–ï¼Œé¿å…äº†å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆå§‹åŒ–çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œåœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>std::call_once</code> æ¥ä¿è¯å•ä¾‹å®ä¾‹åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.lock_guard ä¸ std::unique_lock</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/5-lock_guard%E4%B8%8Estd-unique_lock/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/5-lock_guard%E4%B8%8Estd-unique_lock/</url>
    
    <content type="html"><![CDATA[<p><strong>lock_guard</strong></p><p>std::lock_guard æ˜¯ C++æ ‡å‡†åº“ä¸­çš„ä¸€ç§äº’æ–¥é‡å°è£…ç±»ï¼Œç”¨äºä¿æŠ¤å…±äº«æ•°æ®ï¼Œé˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€èµ„æºè€Œå¯¼è‡´çš„æ•°æ®ç«äº‰é—®é¢˜ã€‚</p><p>std::lock_guard çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>å½“æ„é€ å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¯¥äº’æ–¥é‡ä¼šè¢«è‡ªåŠ¨é”å®šã€‚</li><li>å½“ææ„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¯¥äº’æ–¥é‡ä¼šè¢«è‡ªåŠ¨è§£é”ã€‚</li><li>std::lock_guardå¯¹è±¡ä¸èƒ½å¤åˆ¶æˆ–ç§»åŠ¨ï¼Œå› æ­¤å®ƒåªèƒ½åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­ä½¿ç”¨ã€‚</li></ul><p><strong>std::unique_lock</strong></p><p>std::unique_lock æ˜¯ C++æ ‡å‡†åº“ä¸­æä¾›çš„ä¸€ä¸ªäº’æ–¥é‡å°è£…ç±»ï¼Œç”¨äºåœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­å¯¹äº’æ–¥é‡è¿›è¡ŒåŠ é”å’Œè§£é”æ“ä½œã€‚å®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯å¯ä»¥å¯¹äº’æ–¥é‡è¿›è¡Œæ›´åŠ çµæ´»çš„ç®¡ç†ï¼ŒåŒ…æ‹¬å»¶è¿ŸåŠ é”ã€æ¡ä»¶å˜é‡ã€è¶…æ—¶ç­‰ã€‚</p><p>std::unique_lock æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæˆå‘˜å‡½æ•°ï¼š</p><ul><li><p>lock()ï¼šå°è¯•å¯¹äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œï¼Œå¦‚æœå½“å‰äº’æ–¥é‡å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°äº’æ–¥é‡è¢«æˆåŠŸåŠ é”ã€‚</p></li><li><p>try_lock()ï¼šå°è¯•å¯¹äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œï¼Œå¦‚æœå½“å‰äº’æ–¥é‡å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™å‡½æ•°ç«‹å³è¿”å›falseï¼Œå¦åˆ™è¿”å› trueã€‚</p></li><li><p>try_lock_for(const std::chrono::duration&lt;Rep, Period&gt;&amp;rel_time)ï¼šå°è¯•å¯¹äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œï¼Œå¦‚æœå½“å‰äº’æ–¥é‡å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°äº’æ–¥é‡è¢«æˆåŠŸåŠ é”ï¼Œæˆ–è€…è¶…è¿‡äº†æŒ‡å®šçš„æ—¶é—´ã€‚</p></li><li><p>try_lock_until(const std::chrono::time_point&lt;Clock,Duration&gt;&amp;abs_time)ï¼šå°è¯•å¯¹äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œï¼Œå¦‚æœå½“å‰äº’æ–¥é‡å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°äº’æ–¥é‡è¢«æˆåŠŸåŠ é”ï¼Œæˆ–è€…è¶…è¿‡äº†æŒ‡å®šçš„æ—¶é—´ç‚¹ã€‚</p></li><li><p>unlock()ï¼šå¯¹äº’æ–¥é‡è¿›è¡Œè§£é”æ“ä½œã€‚</p></li></ul><p>é™¤äº†ä¸Šè¿°æˆå‘˜å‡½æ•°å¤–ï¼Œstd::unique_lock è¿˜æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæ„é€ å‡½æ•°ï¼š</p><ul><li>unique_lock() noexcept =defaultï¼šé»˜è®¤æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªæœªå…³è”ä»»ä½•äº’æ–¥é‡çš„ std::unique_lockå¯¹è±¡ã€‚</li><li>explicit unique_lock(mutex_type&amp; m)ï¼šæ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç»™å®šçš„äº’æ–¥é‡m è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶å¯¹è¯¥äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œã€‚</li><li>unique_lock(mutex_type&amp; m, defer_lock_t)noexceptï¼šæ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç»™å®šçš„äº’æ–¥é‡ mè¿›è¡Œåˆå§‹åŒ–ï¼Œä½†ä¸å¯¹è¯¥äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œã€‚</li><li>unique_lock(mutex_type&amp; m, try_to_lock_t)noexceptï¼šæ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç»™å®šçš„äº’æ–¥é‡ mè¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶å°è¯•å¯¹è¯¥äº’æ–¥é‡è¿›è¡ŒåŠ é”æ“ä½œã€‚å¦‚æœåŠ é”å¤±è´¥ï¼Œåˆ™åˆ›å»ºçš„std::unique_lock å¯¹è±¡ä¸ä¸ä»»ä½•äº’æ–¥é‡å…³è”ã€‚</li><li>unique_lock(mutex_type&amp; m, adopt_lock_t)noexceptï¼šæ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç»™å®šçš„äº’æ–¥é‡ mè¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶å‡è®¾è¯¥äº’æ–¥é‡å·²ç»è¢«å½“å‰çº¿ç¨‹æˆåŠŸåŠ é”ã€‚</li></ul><p>std::unique_lockä½¿ç”¨éå¸¸çµæ´»æ–¹ä¾¿ï¼Œä¸Šè¿°æ“ä½œçš„ä½¿ç”¨æ–¹å¼å°†ä¼šåœ¨è¯¾ç¨‹è§†é¢‘ä¸­ä½œè¯¦ç»†ä»‹ç»ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. äº’æ–¥é‡æ­»é”</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/4-%E4%BA%92%E6%96%A5%E9%87%8F%E6%AD%BB%E9%94%81/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/4-%E4%BA%92%E6%96%A5%E9%87%8F%E6%AD%BB%E9%94%81/</url>
    
    <content type="html"><![CDATA[<p>å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ T1 å’Œ T2ï¼Œå®ƒä»¬éœ€è¦å¯¹ä¸¤ä¸ªäº’æ–¥é‡ mtx1 å’Œ mtx2è¿›è¡Œè®¿é—®ï¼Œè€Œä¸”éœ€è¦æŒ‰ç…§ä»¥ä¸‹é¡ºåºè·å–äº’æ–¥é‡çš„æ‰€æœ‰æƒï¼š</p><p>- T1 å…ˆè·å– mtx1 çš„æ‰€æœ‰æƒï¼Œå†è·å– mtx2 çš„æ‰€æœ‰æƒã€‚</p><p>- T2 å…ˆè·å– mtx2 çš„æ‰€æœ‰æƒï¼Œå†è·å– mtx1 çš„æ‰€æœ‰æƒã€‚</p><p>å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œå°±ä¼šå‡ºç°æ­»é”é—®é¢˜ã€‚å› ä¸º T1 è·å–äº† mtx1çš„æ‰€æœ‰æƒï¼Œä½†æ˜¯æ— æ³•è·å– mtx2 çš„æ‰€æœ‰æƒï¼Œè€Œ T2 è·å–äº† mtx2çš„æ‰€æœ‰æƒï¼Œä½†æ˜¯æ— æ³•è·å– mtx1çš„æ‰€æœ‰æƒï¼Œä¸¤ä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾äº’æ–¥é‡ï¼Œå¯¼è‡´æ­»é”ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è®©ä¸¤ä¸ªçº¿ç¨‹æŒ‰ç…§ç›¸åŒçš„é¡ºåºè·å–äº’æ–¥é‡çš„æ‰€æœ‰æƒã€‚ä¾‹å¦‚ï¼Œéƒ½å…ˆè·å–mtx1 çš„æ‰€æœ‰æƒï¼Œå†è·å– mtx2 çš„æ‰€æœ‰æƒï¼Œæˆ–è€…éƒ½å…ˆè·å– mtx2 çš„æ‰€æœ‰æƒï¼Œå†è·å–mtx1 çš„æ‰€æœ‰æƒã€‚è¿™æ ·å°±å¯ä»¥é¿å…æ­»é”é—®é¢˜ã€‚</p><p>ä»¥ä¸‹æ˜¯æŒ‰ç…§ç¬¬äºŒç§æ–¹æ¡ˆä¿®æ”¹åçš„ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br>std::mutex mtx1, mtx2;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    mtx<span class="hljs-number">2.l</span>ock();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 1 locked mutex 2&quot;</span> &lt;&lt; std::endl;    <br>    mtx<span class="hljs-number">1.l</span>ock();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 1 locked mutex 1&quot;</span> &lt;&lt; std::endl;    <br>    mtx<span class="hljs-number">1.</span><span class="hljs-built_in">unlock</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 1 unlocked mutex 1&quot;</span> &lt;&lt; std::endl;    <br>    mtx<span class="hljs-number">2.</span><span class="hljs-built_in">unlock</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 1 unlocked mutex 2&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    mtx<span class="hljs-number">2.l</span>ock();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 2 locked mutex 2&quot;</span> &lt;&lt; std::endl;    <br>    mtx<span class="hljs-number">1.l</span>ock();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 2 locked mutex 1&quot;</span> &lt;&lt; std::endl;    <br>    mtx<span class="hljs-number">1.</span><span class="hljs-built_in">unlock</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 2 unlocked mutex 1&quot;</span> &lt;&lt; std::endl;<br>    mtx<span class="hljs-number">2.</span><span class="hljs-built_in">unlock</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread 2 unlocked mutex 2&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(func1)</span></span>;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(func2)</span></span>;    <br>    t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();    <br>    t<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒT1 å…ˆè·å– mtx2 çš„æ‰€æœ‰æƒï¼Œå†è·å– mtx1 çš„æ‰€æœ‰æƒï¼Œè€Œ T2ä¹Ÿæ˜¯å…ˆè·å– mtx2 çš„æ‰€æœ‰æƒï¼Œå†è·å– mtx1çš„æ‰€æœ‰æƒï¼Œè¿™æ ·å°±é¿å…äº†æ­»é”é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. äº’æ–¥é‡è§£å†³å¤šçº¿ç¨‹æ•°æ®å…±äº«é—®é¢˜</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/3-%E4%BA%92%E6%96%A5%E9%87%8F%E8%A7%A3%E5%86%B3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E9%97%AE%E9%A2%98/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/3-%E4%BA%92%E6%96%A5%E9%87%8F%E8%A7%A3%E5%86%B3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="æ•°æ®å…±äº«é—®é¢˜åˆ†æ">æ•°æ®å…±äº«é—®é¢˜åˆ†æ</h3><p>åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«æ•°æ®æ—¶ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸”å…¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è¯¥å˜é‡è¿›è¡Œäº†å†™æ“ä½œï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ•°æ®ç«äº‰é—®é¢˜ã€‚æ•°æ®ç«äº‰å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€äº§ç”Ÿæœªå®šä¹‰çš„ç»“æœï¼Œæˆ–è€…å¾—åˆ°é”™è¯¯çš„ç»“æœã€‚</p><p>ä¸ºäº†é¿å…æ•°æ®ç«äº‰é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶æ¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯¹å…±äº«æ•°æ®çš„è®¿é—®æ˜¯å®‰å…¨çš„ã€‚å¸¸è§çš„åŒæ­¥æœºåˆ¶åŒ…æ‹¬äº’æ–¥é‡ã€æ¡ä»¶å˜é‡ã€åŸå­æ“ä½œç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ•°æ®å…±äº«é—®é¢˜çš„ç¤ºä¾‹ä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-type">int</span> shared_data = <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; ++i) &#123;<br>        shared_data++;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(func)</span></span>;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(func)</span></span>;<br>    t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>    t<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;shared_data = &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªåä¸º shared_dataçš„å…¨å±€å˜é‡ï¼Œå¹¶åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­å¯¹å…¶è¿›è¡Œç´¯åŠ æ“ä½œã€‚åœ¨ mainå‡½æ•°ä¸­ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œå¹¶åˆ†åˆ«è°ƒç”¨äº† func å‡½æ•°ã€‚åœ¨ func å‡½æ•°ä¸­ï¼Œå¯¹shared_data å˜é‡è¿›è¡Œäº†ç´¯åŠ æ“ä½œã€‚</p><p>ç”±äº shared_dataå˜é‡æ˜¯å…¨å±€å˜é‡ï¼Œå› æ­¤åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­å…±äº«ã€‚å¯¹äºè¿™ç§å…±äº«çš„æƒ…å†µï¼Œéœ€è¦ä½¿ç”¨äº’æ–¥é‡ç­‰åŒæ­¥æœºåˆ¶æ¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯¹å…±äº«æ•°æ®çš„è®¿é—®æ˜¯å®‰å…¨çš„ã€‚å¦‚æœä¸ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œå°±ä¼šå‡ºç°æ•°æ®ç«äº‰é—®é¢˜ï¼Œå¯¼è‡´å¾—åˆ°é”™è¯¯çš„ç»“æœã€‚</p><h3 id="äº’æ–¥é‡æ¦‚å¿µ">äº’æ–¥é‡æ¦‚å¿µ</h3><p>äº’æ–¥é‡ï¼ˆmutexï¼‰æ˜¯ä¸€ç§ç”¨äºå®ç°å¤šçº¿ç¨‹åŒæ­¥çš„æœºåˆ¶ï¼Œç”¨äºç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯¹å…±äº«èµ„æºçš„è®¿é—®äº’æ–¥ã€‚äº’æ–¥é‡é€šå¸¸ç”¨äºä¿æŠ¤å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä»¥é¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡æˆ–è€…æ•°æ®ç»“æ„è€Œå¯¼è‡´çš„æ•°æ®ç«äº‰é—®é¢˜ã€‚</p><p>äº’æ–¥é‡æä¾›äº†ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼šlock() å’Œ unlock()ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ lock()å‡½æ•°æ—¶ï¼Œå¦‚æœäº’æ–¥é‡å½“å‰æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼Œåˆ™è¯¥çº¿ç¨‹è·å¾—è¯¥äº’æ–¥é‡çš„æ‰€æœ‰æƒï¼Œå¯ä»¥å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®ã€‚å¦‚æœäº’æ–¥é‡å½“å‰å·²ç»è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼Œåˆ™è°ƒç”¨lock() å‡½æ•°çš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°è¯¥äº’æ–¥é‡è¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</p><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨äº’æ–¥é‡ mtx æ¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹å¯¹ shared_dataå˜é‡çš„è®¿é—®æ˜¯å®‰å…¨çš„ã€‚åœ¨ func å‡½æ•°ä¸­ï¼Œå…ˆè°ƒç”¨ mtx.lock()æ¥è·å–äº’æ–¥é‡çš„æ‰€æœ‰æƒï¼Œç„¶åå¯¹ shared_data å˜é‡è¿›è¡Œç´¯åŠ æ“ä½œï¼Œæœ€åå†è°ƒç”¨mtx.unlock() æ¥é‡Šæ”¾äº’æ–¥é‡çš„æ‰€æœ‰æƒã€‚è¿™æ ·å°±å¯ä»¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯¹shared_data å˜é‡çš„è®¿é—®æ˜¯å®‰å…¨çš„ã€‚</p><h3 id="æ¡ˆä¾‹ä»£ç ">æ¡ˆä¾‹ä»£ç </h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»¼åˆäº†åˆ›å»ºå¤šä¸ªçº¿ç¨‹å’Œæ•°æ®å…±äº«é—®é¢˜è§£å†³æ–¹æ¡ˆçš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mutex&gt;</span></span><br><span class="hljs-type">int</span> shared_data = <span class="hljs-number">0</span>;<br>std::mutex mtx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; ++i) &#123;<br>        mtx.<span class="hljs-built_in">lock</span>();<br>        shared_data++;        <br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Thread &quot;</span> &lt;&lt; n <br>            &lt;&lt; <span class="hljs-string">&quot; increment shared_data to &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;<br>        mtx.<span class="hljs-built_in">unlock</span>();<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(func, <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(func, <span class="hljs-number">2</span>)</span></span>;<br><br>    t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>    t<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Final shared_data = &quot;</span> &lt;&lt; shared_data &lt;&lt; std::endl;    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªåä¸º shared_data çš„å…¨å±€å˜é‡ï¼Œå¹¶ä½¿ç”¨äº’æ–¥é‡ mtxæ¥ç¡®ä¿å¤šä¸ªçº¿ç¨‹å¯¹å…¶è¿›è¡Œè®¿é—®æ—¶çš„çº¿ç¨‹å®‰å…¨ã€‚åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­ï¼Œåˆ†åˆ«è°ƒç”¨äº† funcå‡½æ•°ï¼Œå¹¶ä¼ é€’äº†ä¸åŒçš„å‚æ•°ã€‚åœ¨ func å‡½æ•°ä¸­ï¼Œå…ˆè·å–äº’æ–¥é‡çš„æ‰€æœ‰æƒï¼Œç„¶åå¯¹shared_dataå˜é‡è¿›è¡Œç´¯åŠ æ“ä½œï¼Œå¹¶è¾“å‡ºå˜é‡çš„å½“å‰å€¼ã€‚æœ€åå†é‡Šæ”¾äº’æ–¥é‡çš„æ‰€æœ‰æƒã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.çº¿ç¨‹å‡½æ•°ä¸­çš„æ•°æ®æœªå®šä¹‰é”™è¯¯</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/2-%E7%BA%BF%E7%A8%8B%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9C%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/2-%E7%BA%BF%E7%A8%8B%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9C%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF/</url>
    
    <content type="html"><![CDATA[<p>\1. ä¼ é€’ä¸´æ—¶å˜é‡çš„é—®é¢˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span> </span>&#123;<br>    x += <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo, <span class="hljs-number">1</span>)</span></span>; <span class="hljs-comment">// ä¼ é€’ä¸´æ—¶å˜é‡</span><br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>foo</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´æ•°å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†è¯¥å¼•ç”¨åŠ 1ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>t</code>çš„çº¿ç¨‹ï¼Œå°†<code>foo</code>å‡½æ•°ä»¥åŠä¸€ä¸ªä¸´æ—¶å˜é‡<code>1</code>ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚è¿™æ ·ä¼šå¯¼è‡´åœ¨çº¿ç¨‹å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¸´æ—¶å˜é‡<code>1</code>è¢«é”€æ¯ï¼Œä»è€Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</p><p>è§£å†³æ–¹æ¡ˆæ˜¯å°†å˜é‡å¤åˆ¶åˆ°ä¸€ä¸ªæŒä¹…çš„å¯¹è±¡ä¸­ï¼Œç„¶åå°†è¯¥å¯¹è±¡ä¼ é€’ç»™çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†<code>1</code>å¤åˆ¶åˆ°ä¸€ä¸ª<code>int</code>ç±»å‹çš„å˜é‡ä¸­ï¼Œç„¶åå°†è¯¥å˜é‡çš„å¼•ç”¨ä¼ é€’ç»™çº¿ç¨‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span> </span>&#123;<br>    x += <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> x = <span class="hljs-number">1</span>; <span class="hljs-comment">// å°†å˜é‡å¤åˆ¶åˆ°ä¸€ä¸ªæŒä¹…çš„å¯¹è±¡ä¸­</span><br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo, std::ref(x))</span></span>; <span class="hljs-comment">// å°†å˜é‡çš„å¼•ç”¨ä¼ é€’ç»™çº¿ç¨‹</span><br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>\2. ä¼ é€’æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å±€éƒ¨å˜é‡çš„é—®é¢˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>* ptr)</span> </span>&#123;<br>    std::cout &lt;&lt; *ptr &lt;&lt; std::endl; <span class="hljs-comment">// è®¿é—®å·²ç»è¢«é”€æ¯çš„æŒ‡é’ˆ</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> x = <span class="hljs-number">1</span>;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo, &amp;x)</span></span>; <span class="hljs-comment">// ä¼ é€’æŒ‡å‘å±€éƒ¨å˜é‡çš„æŒ‡é’ˆ</span><br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>foo</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´å‹æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œå¹¶è¾“å‡ºè¯¥æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•´æ•°å€¼ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>t</code>çš„çº¿ç¨‹ï¼Œå°†<code>foo</code>å‡½æ•°ä»¥åŠæŒ‡å‘å±€éƒ¨å˜é‡<code>x</code>çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚è¿™æ ·ä¼šå¯¼è‡´åœ¨çº¿ç¨‹å‡½æ•°æ‰§è¡Œæ—¶ï¼ŒæŒ‡å‘å±€éƒ¨å˜é‡<code>x</code>çš„æŒ‡é’ˆå·²ç»è¢«é”€æ¯ï¼Œä»è€Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</p><p>è§£å†³æ–¹æ¡ˆæ˜¯å°†æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å †ä¸Šçš„å˜é‡ï¼Œæˆ–ä½¿ç”¨<code>std::shared_ptr</code>ç­‰æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>new</code>è¿ç®—ç¬¦åœ¨å †ä¸Šåˆ†é…ä¸€ä¸ªæ•´æ•°å˜é‡ï¼Œå¹¶å°†æŒ‡é’ˆæŒ‡å‘è¯¥å˜é‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>* ptr)</span> </span>&#123;<br>    std::cout &lt;&lt; *ptr &lt;&lt; std::endl;<br>    <span class="hljs-keyword">delete</span> ptr; <span class="hljs-comment">// åœ¨ä½¿ç”¨å®ŒæŒ‡é’ˆåï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// åœ¨å †ä¸Šåˆ†é…ä¸€ä¸ªæ•´æ•°å˜é‡</span><br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo, ptr)</span></span>; <span class="hljs-comment">// å°†æŒ‡é’ˆä¼ é€’ç»™çº¿ç¨‹</span><br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>\3. ä¼ é€’æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å·²é‡Šæ”¾çš„å†…å­˜çš„é—®é¢˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span> </span>&#123;<br>    std::cout &lt;&lt; x &lt;&lt; std::endl; <span class="hljs-comment">// è®¿é—®å·²ç»è¢«é‡Šæ”¾çš„å†…å­˜</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span>* ptr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo, *ptr)</span></span>; <span class="hljs-comment">// ä¼ é€’å·²ç»é‡Šæ”¾çš„å†…å­˜</span><br>    <span class="hljs-keyword">delete</span> ptr;<br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>foo</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´æ•°å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œå¹¶è¾“å‡ºè¯¥å¼•ç”¨çš„å€¼ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>t</code>çš„çº¿ç¨‹ï¼Œå°†<code>foo</code>å‡½æ•°ä»¥åŠä¸€ä¸ªå·²ç»è¢«é‡Šæ”¾çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•´æ•°å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒè§£å†³æ–¹æ¡ˆæ˜¯ç¡®ä¿åœ¨çº¿ç¨‹å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œè¢«ä¼ é€’çš„å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æœ‰æ•ˆçš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºå¹¶åˆå§‹åŒ–å¯¹è±¡ï¼Œç„¶åå°†å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™çº¿ç¨‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span> </span>&#123;<br>    std::cout &lt;&lt; x &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> x = <span class="hljs-number">1</span>;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo, std::ref(x))</span></span>; <span class="hljs-comment">// å°†å˜é‡çš„å¼•ç”¨ä¼ é€’ç»™çº¿ç¨‹</span><br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>x</code>çš„æ•´æ•°å˜é‡ï¼Œå¹¶åˆå§‹åŒ–ä¸º<code>1</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>t</code>çš„çº¿ç¨‹ï¼Œå°†<code>foo</code>å‡½æ•°ä»¥åŠå˜é‡<code>x</code>çš„å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨çº¿ç¨‹å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œå˜é‡<code>x</code>çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æœ‰æ•ˆçš„ã€‚</p><p>\4. ç±»æˆå‘˜å‡½æ•°ä½œä¸ºå…¥å£å‡½æ•°ï¼Œç±»å¯¹è±¡è¢«æå‰é‡Šæ”¾</p><p>é”™è¯¯ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread &quot;</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() <br>        &lt;&lt; <span class="hljs-string">&quot; started&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-comment">// do some work</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread &quot;</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() <br>        &lt;&lt; <span class="hljs-string">&quot; finished&quot;</span> &lt;&lt; std::endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    MyClass obj;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(&amp;MyClass::func, &amp;obj)</span></span>;<br>    <span class="hljs-comment">// obj è¢«æå‰é”€æ¯äº†ï¼Œä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸º</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåœ¨åˆ›å»ºçº¿ç¨‹ä¹‹åï¼Œobjå¯¹è±¡ç«‹å³è¢«é”€æ¯äº†ï¼Œè¿™ä¼šå¯¼è‡´åœ¨çº¿ç¨‹æ‰§è¡Œæ—¶æ— æ³•è®¿é—® objå¯¹è±¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–è€…äº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºã€‚</p><p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ std::shared_ptræ¥ç®¡ç†ç±»å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿åœ¨çº¿ç¨‹æ‰§è¡ŒæœŸé—´å¯¹è±¡ä¸ä¼šè¢«é”€æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå¯ä»¥åœ¨åˆ›å»ºçº¿ç¨‹ä¹‹å‰ï¼Œå°†ç±»å¯¹è±¡çš„æŒ‡é’ˆå°è£…åœ¨ä¸€ä¸ªstd::shared_ptrå¯¹è±¡ä¸­ï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™çº¿ç¨‹ã€‚è¿™æ ·ï¼Œåœ¨çº¿ç¨‹æ‰§è¡ŒæœŸé—´ï¼Œå³ä½¿ç±»å¯¹è±¡çš„æ‰€æœ‰è€…é‡Šæ”¾äº†å…¶æ‰€æœ‰æƒï¼Œstd::shared_pträ»ç„¶ä¼šä¿æŒå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç›´åˆ°çº¿ç¨‹ç»“æŸã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ std::shared_ptr ä¿®å¤ä¸Šé¢é”™è¯¯çš„ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread &quot;</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() <br>        &lt;&lt; <span class="hljs-string">&quot; started&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-comment">// do some work</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread &quot;</span> &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() <br>        &lt;&lt; <span class="hljs-string">&quot; finished&quot;</span> &lt;&lt; std::endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::shared_ptr&lt;MyClass&gt; obj = std::<span class="hljs-built_in">make_shared</span>&lt;MyClass&gt;();<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(&amp;MyClass::func, obj)</span></span>;<br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨ std::make_shared åˆ›å»ºäº†ä¸€ä¸ª MyClassç±»å¯¹è±¡ï¼Œå¹¶å°†å…¶å°è£…åœ¨ä¸€ä¸ª std::shared_ptr å¯¹è±¡ä¸­ã€‚ç„¶åï¼Œå°†std::shared_ptr å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™çº¿ç¨‹ã€‚è¿™æ ·ï¼Œåœ¨çº¿ç¨‹æ‰§è¡ŒæœŸé—´ï¼Œå³ä½¿ objå¯¹è±¡çš„æ‰€æœ‰è€…é‡Šæ”¾äº†å…¶æ‰€æœ‰æƒï¼Œstd::shared_pträ»ç„¶ä¼šä¿æŒå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç›´åˆ°çº¿ç¨‹ç»“æŸã€‚</p><p>5.å…¥å£å‡½æ•°ä¸ºç±»çš„ç§æœ‰æˆå‘˜å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">myThreadFunc</span><span class="hljs-params">(MyClass* obj)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">privateFunc</span><span class="hljs-params">()</span></span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread &quot;</span> <br>        &lt;&lt; std::this_thread::<span class="hljs-built_in">get_id</span>() &lt;&lt; <span class="hljs-string">&quot; privateFunc&quot;</span> &lt;&lt; std::endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myThreadFunc</span><span class="hljs-params">(MyClass* obj)</span> </span>&#123;<br>    obj-&gt;<span class="hljs-built_in">privateFunc</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    MyClass obj;<br>    <span class="hljs-function">std::thread <span class="hljs-title">thread_1</span><span class="hljs-params">(myThreadFunc, &amp;obj)</span></span>;<br>    thread_<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°† myThreadFunc å®šä¹‰ä¸º MyClassç±»çš„å‹å…ƒå‡½æ•°ï¼Œå¹¶åœ¨å‡½æ•°ä¸­è°ƒç”¨ privateFuncå‡½æ•°ã€‚åœ¨åˆ›å»ºçº¿ç¨‹æ—¶ï¼Œéœ€è¦å°†ç±»å¯¹è±¡çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ é€’ç»™çº¿ç¨‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. C++11 Theadçº¿ç¨‹åº“çš„åŸºæœ¬ä½¿ç”¨</title>
    <link href="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/1-Cpp11-Thead%E7%BA%BF%E7%A8%8B%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/1-Cpp11-Thead%E7%BA%BF%E7%A8%8B%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>Threadåº“</p><ol type="1"><li>åˆ›å»ºçº¿ç¨‹</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printHelloworld</span><span class="hljs-params">(std::string msg)</span></span><br><span class="hljs-function"></span>&#123;<br>std::cout &lt;&lt; msg &lt;&lt; std::endl;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//1. åˆ›å»ºçº¿ç¨‹</span><br><span class="hljs-function">std::thread <span class="hljs-title">thread1</span><span class="hljs-params">(printHelloworld, <span class="hljs-string">&quot;Hello Thread&quot;</span>)</span></span>;<br>    <span class="hljs-comment">//2. ä¸»ç¨‹åºç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span><br>thread<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>    <span class="hljs-comment">//3. åˆ†ç¦»çº¿ç¨‹ </span><br>thread<span class="hljs-number">1.</span><span class="hljs-built_in">detach</span>();<br>    <span class="hljs-comment">//4. joinable</span><br>    <span class="hljs-type">bool</span> isJoin = thread<span class="hljs-number">1.</span><span class="hljs-built_in">joinable</span>();<br><span class="hljs-keyword">if</span> (isJoin)<br>&#123;<br>thread<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol type="1"><li>join()æ˜¯é˜»å¡çš„</li></ol><figure><img src="/2024/11/27/cpp-%E5%A4%9A%E7%BA%BF%E7%A8%8B/1-Cpp11-Thead%E7%BA%BF%E7%A8%8B%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1708781270952-530255cf-7869-4d4d-bbff-f292eba59e23.gif" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æœ¬æ–‡è¯¦ç»†ä»‹ç»C++11Theadçº¿ç¨‹åº“çš„åŸºæœ¬ä½¿ç”¨ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºçº¿ç¨‹ã€å¯åŠ¨çº¿ç¨‹ã€ç­‰å¾…çº¿ç¨‹å®Œæˆä»¥åŠå¦‚ä½•åˆ†ç¦»çº¿ç¨‹ç­‰ã€‚<strong>åˆ›å»ºçº¿ç¨‹</strong></p><p>è¦åˆ›å»ºçº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°æˆ–å‡½æ•°å¯¹è±¡ï¼Œä½œä¸ºçº¿ç¨‹çš„å…¥å£ç‚¹ã€‚åœ¨C++11ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°æŒ‡é’ˆã€å‡½æ•°å¯¹è±¡æˆ–lambdaè¡¨è¾¾å¼æ¥å®ç°ã€‚åˆ›å»ºçº¿ç¨‹çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><p>#include <thread>std::thread t(function_name, args...);</thread></p><p><code>function_name</code>æ˜¯çº¿ç¨‹å…¥å£ç‚¹çš„å‡½æ•°æˆ–å¯è°ƒç”¨å¯¹è±¡</p><p><code>args...</code>æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°</p><p>åˆ›å»ºçº¿ç¨‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>t.join()</code>ç­‰å¾…çº¿ç¨‹å®Œæˆï¼Œæˆ–è€…ä½¿ç”¨<code>t.detach()</code>åˆ†ç¦»çº¿ç¨‹ï¼Œè®©å®ƒåœ¨åå°è¿è¡Œã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œè¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_message</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Hello, world!&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(print_message)</span></span>;<br>    t.<span class="hljs-built_in">join</span>();    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>print_message</code>çš„å‡½æ•°ï¼Œå®ƒè¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>t</code>çš„çº¿ç¨‹ï¼Œå°†<code>print_message</code>å‡½æ•°ä½œä¸ºå…¥å£ç‚¹ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>t.join()</code>ç­‰å¾…çº¿ç¨‹å®Œæˆã€‚</p><p><strong>ä¼ é€’å‚æ•°</strong></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§æ–¹å¼å‘çº¿ç¨‹ä¼ é€’å‚æ•°ï¼Œä¾‹å¦‚ä½¿ç”¨å‡½æ•°å‚æ•°ã€å…¨å±€å˜é‡ã€å¼•ç”¨ç­‰ã€‚å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_message</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span><br><span class="hljs-function"></span>&#123;    <br>    std::cout &lt;&lt; message &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">increment</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span> </span><br><span class="hljs-function"></span>&#123;    <br>    ++x;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    std::string message = <span class="hljs-string">&quot;Hello, world!&quot;</span>;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(print_message, message)</span></span>;    <br>    t.<span class="hljs-built_in">join</span>();    <br>    <span class="hljs-type">int</span> x = <span class="hljs-number">0</span>;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(increment, std::ref(x))</span></span>;    <br>    t<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();    <br>    std::cout &lt;&lt; x &lt;&lt; std::endl;    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œä¼ é€’ç»™çº¿ç¨‹ã€‚åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå¼•ç”¨æ¥ä¼ é€’ä¸€ä¸ªæ•´æ•°å˜é‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å¼•ç”¨ä¼ é€’å‚æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>std::ref</code>æ¥åŒ…è£…å¼•ç”¨ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p><p><strong>ç­‰å¾…çº¿ç¨‹å®Œæˆ</strong></p><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹åï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç­‰å¾…å®ƒå®Œæˆï¼Œä»¥ä¾¿è·å–çº¿ç¨‹çš„æ‰§è¡Œç»“æœæˆ–æ‰§è¡Œæ¸…ç†æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>t.join()</code>æ–¹æ³•æ¥ç­‰å¾…çº¿ç¨‹å®Œæˆã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆåè¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_message</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span><br><span class="hljs-function"></span>&#123;    <br>    std::cout &lt;&lt; message &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t1</span><span class="hljs-params">(print_message, <span class="hljs-string">&quot;Thread 1&quot;</span>)</span></span>;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t2</span><span class="hljs-params">(print_message, <span class="hljs-string">&quot;Thread 2&quot;</span>)</span></span>;    <br>    t<span class="hljs-number">1.</span><span class="hljs-built_in">join</span>();    <br>    t<span class="hljs-number">2.</span><span class="hljs-built_in">join</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;All threads joined&quot;</span> &lt;&lt; std::endl;    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹<code>t1</code>å’Œ<code>t2</code>ï¼Œå®ƒä»¬éƒ½è°ƒç”¨<code>print_message</code>å‡½æ•°è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>t1.join()</code>å’Œ<code>t2.join()</code>ç­‰å¾…å®ƒä»¬å®Œæˆã€‚æœ€åï¼Œæˆ‘ä»¬è¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºæ‰€æœ‰çº¿ç¨‹éƒ½å·²ç»å®Œæˆã€‚</p><p><strong>åˆ†ç¦»çº¿ç¨‹</strong></p><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹å®Œæˆï¼Œè€Œæ˜¯å¸Œæœ›å®ƒåœ¨åå°è¿è¡Œã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>t.detach()</code>æ–¹æ³•æ¥åˆ†ç¦»çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œåˆ†ç¦»å®ƒåè¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_message</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; message)</span> </span><br><span class="hljs-function"></span>&#123;    <br>    std::cout &lt;&lt; message &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;    <br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(print_message, <span class="hljs-string">&quot;Thread 1&quot;</span>)</span></span>;    <br>    t.<span class="hljs-built_in">detach</span>();    <br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread detached&quot;</span> &lt;&lt; std::endl;    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>t</code>çš„çº¿ç¨‹ï¼Œè°ƒç”¨<code>print_message</code>å‡½æ•°è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>t.detach()</code>æ–¹æ³•åˆ†ç¦»çº¿ç¨‹ï¼Œè®©å®ƒåœ¨åå°è¿è¡Œã€‚æœ€åï¼Œæˆ‘ä»¬è¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨ç¤ºçº¿ç¨‹å·²ç»è¢«åˆ†ç¦»ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦çº¿ç¨‹è¢«åˆ†ç¦»ï¼Œå°±ä¸èƒ½å†ä½¿ç”¨<code>t.join()</code>æ–¹æ³•ç­‰å¾…å®ƒå®Œæˆã€‚è€Œä¸”ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿çº¿ç¨‹ä¸ä¼šåœ¨ä¸»çº¿ç¨‹ç»“æŸå‰é€€å‡ºï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</p><p><strong>joinable()</strong></p><p>joinable()æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœçº¿ç¨‹å¯ä»¥è¢«join()æˆ–detach()ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾å¯¹ä¸€ä¸ªä¸å¯åŠ å…¥çš„çº¿ç¨‹è°ƒç”¨join()æˆ–detach()ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªstd::system_errorå¼‚å¸¸ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨joinable()æ–¹æ³•çš„ä¾‹å­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread started&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(foo)</span></span>;<br>    <span class="hljs-keyword">if</span> (t.<span class="hljs-built_in">joinable</span>()) &#123;<br>        t.<span class="hljs-built_in">join</span>();<br>    &#125;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Thread joined&quot;</span> &lt;&lt; std::endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¸¸è§é”™è¯¯ï¼ˆå°†åœ¨åç»­æ–‡ç« ä¸­è¯¦è§£ä»¥ä¸‹é”™è¯¯çš„è§£å†³æ–¹æ¡ˆï¼‰</strong></p><p>åœ¨ä½¿ç”¨C++11çº¿ç¨‹åº“æ—¶ï¼Œæœ‰ä¸€äº›å¸¸è§çš„é”™è¯¯éœ€è¦æ³¨æ„ã€‚ä¾‹å¦‚ï¼š</p><p>-å¿˜è®°ç­‰å¾…çº¿ç¨‹å®Œæˆæˆ–åˆ†ç¦»çº¿ç¨‹ï¼šå¦‚æœæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ²¡æœ‰ç­‰å¾…å®ƒå®Œæˆæˆ–åˆ†ç¦»å®ƒï¼Œé‚£ä¹ˆåœ¨ä¸»çº¿ç¨‹ç»“æŸæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</p><p>-è®¿é—®å…±äº«æ•°æ®æ—¶æ²¡æœ‰åŒæ­¥ï¼šå¦‚æœæˆ‘ä»¬åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è®¿é—®å…±äº«æ•°æ®ï¼Œä½†æ²¡æœ‰ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ç«äº‰ã€æ­»é”ç­‰é—®é¢˜ã€‚</p><p>-å¼‚å¸¸ä¼ é€’é—®é¢˜ï¼šå¦‚æœåœ¨çº¿ç¨‹ä¸­å‘ç”Ÿäº†å¼‚å¸¸ï¼Œä½†æ²¡æœ‰å¤„ç†å®ƒï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨çº¿ç¨‹ä¸­ä½¿ç”¨try-catchå—æ¥æ•è·å¼‚å¸¸ï¼Œå¹¶åœ¨é€‚å½“çš„åœ°æ–¹å¤„ç†å®ƒã€‚</p><p><strong>æ€»ç»“</strong></p><p>C++11æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„çº¿ç¨‹åº“ï¼Œå³std::threadã€‚å®ƒå¯ä»¥åœ¨C++ç¨‹åºä¸­åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ ç°ä»£åŒ–çš„æ–¹å¼æ¥å¤„ç†å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†std::threadåº“çš„åŸºæœ¬ä½¿ç”¨ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ›å»ºã€å¯åŠ¨å’Œç®¡ç†çº¿ç¨‹ï¼Œä»¥åŠå¦‚ä½•ç­‰å¾…çº¿ç¨‹å®Œæˆå’Œåˆ†ç¦»çº¿ç¨‹ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæåˆ°äº†ä¸€äº›å¸¸è§çš„é”™è¯¯ï¼Œéœ€è¦æ³¨æ„é¿å…ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++11 å¤šçº¿ç¨‹ç¼–ç¨‹</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>google_style_guide</title>
    <link href="/2024/11/27/cpp/google_style_guide/"/>
    <url>/2024/11/27/cpp/google_style_guide/</url>
    
    <content type="html"><![CDATA[<h2 id="å¤´æ–‡ä»¶">1.å¤´æ–‡ä»¶</h2><p>é€šå¸¸æ¯ä¸€ä¸ª.ccæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„.hæ–‡ä»¶.ä¹Ÿæœ‰ä¸€äº›å¸¸è§ä¾‹å¤–,å¦‚å•å…ƒæµ‹è¯•ä»£ç å’ŒåªåŒ…å«main()å‡½æ•°çš„.ccæ–‡ä»¶</p><h3 id="self-containedå¤´æ–‡ä»¶">1.1Self-containedå¤´æ–‡ä»¶</h3><p>æ‰€æœ‰å¤´æ–‡ä»¶è¦èƒ½å¤Ÿè‡ªç»™è‡ªè¶³ã€‚æ¢è¨€ä¹‹ï¼Œç”¨æˆ·å’Œé‡æ„å·¥å…·ä¸éœ€è¦ä¸ºç‰¹åˆ«åœºåˆè€ŒåŒ…å«é¢å¤–çš„å¤´æ–‡ä»¶ã€‚</p><p>è¯¦è¨€ä¹‹ï¼Œä¸€ä¸ªå¤´æ–‡ä»¶è¦æœ‰1.2.#defineä¿æŠ¤ï¼Œç»Ÿç»ŸåŒ…å«å®ƒæ‰€éœ€è¦çš„å…¶å®ƒå¤´æ–‡ä»¶ï¼Œä¹Ÿä¸è¦æ±‚å®šä¹‰ä»»ä½•ç‰¹åˆ«symbols.</p><p>ä¸è¿‡æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå³ä¸€ä¸ªæ–‡ä»¶å¹¶ä¸æ˜¯self-containedçš„ï¼Œè€Œæ˜¯ä½œä¸ºæ–‡æœ¬æ’å…¥åˆ°ä»£ç æŸå¤„ã€‚æˆ–è€…ï¼Œæ–‡ä»¶å†…å®¹å®é™…ä¸Šæ˜¯å…¶å®ƒå¤´æ–‡ä»¶çš„ç‰¹å®šå¹³å°ï¼ˆplatform-specificï¼‰æ‰©å±•éƒ¨åˆ†ã€‚è¿™äº›æ–‡ä»¶å°±è¦ç”¨.incæ–‡ä»¶æ‰©å±•åã€‚</p><p>å¦‚æœ.hæ–‡ä»¶å£°æ˜äº†ä¸€ä¸ªæ¨¡æ¿æˆ–å†…è”å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿåœ¨è¯¥æ–‡ä»¶åŠ ä»¥å®šä¹‰ã€‚å‡¡æ˜¯æœ‰ç”¨åˆ°è¿™äº›çš„.ccæ–‡ä»¶ï¼Œå°±å¾—ç»Ÿç»ŸåŒ…å«è¯¥å¤´æ–‡ä»¶ï¼Œå¦åˆ™ç¨‹åºå¯èƒ½ä¼šåœ¨æ„å»ºä¸­é“¾æ¥å¤±è´¥ã€‚ä¸è¦æŠŠè¿™äº›å®šä¹‰æ”¾åˆ°åˆ†ç¦»çš„-inl.hæ–‡ä»¶é‡Œï¼ˆè¯‘è€…æ³¨ï¼šè¿‡å»è¯¥è§„èŒƒæ›¾æå€¡æŠŠå®šä¹‰æ”¾åˆ°-inl.hé‡Œè¿‡ï¼‰ã€‚</p><p>æœ‰ä¸ªä¾‹å¤–ï¼šå¦‚æœæŸå‡½æ•°æ¨¡æ¿ä¸ºæ‰€æœ‰ç›¸å…³æ¨¡æ¿å‚æ•°æ˜¾å¼å®ä¾‹åŒ–ï¼Œæˆ–æœ¬èº«å°±æ˜¯æŸç±»çš„ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆå®ƒå°±åªèƒ½å®šä¹‰åœ¨å®ä¾‹åŒ–è¯¥æ¨¡æ¿çš„.ccæ–‡ä»¶é‡Œã€‚</p><h3 id="defineä¿æŠ¤">1.2defineä¿æŠ¤</h3><p>æ‰€æœ‰å¤´æ–‡ä»¶éƒ½åº”è¯¥æœ‰#defineä¿æŠ¤æ¥é˜²æ­¢å¤´æ–‡ä»¶è¢«å¤šé‡åŒ…å«,å‘½åæ ¼å¼å½“æ˜¯:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">PROJECT</span>&gt;</span>_<span class="hljs-tag">&lt;<span class="hljs-name">PATH</span>&gt;</span>_<span class="hljs-tag">&lt;<span class="hljs-name">FILE</span>&gt;</span>_H_<br></code></pre></td></tr></table></figure><p>ä¸ºä¿è¯å”¯ä¸€æ€§,å¤´æ–‡ä»¶çš„å‘½ååº”è¯¥åŸºäºæ‰€åœ¨é¡¹ç›®æºä»£ç æ ‘çš„å…¨è·¯å¾„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">#ifndefFOO_BAR_BAZ_H_<br>#defineFOO_BAR_BAZ_H_<br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span><span class="hljs-comment">//FOO_BAR_BAZ_H_</span></span><br></code></pre></td></tr></table></figure><h3 id="å‰ç½®å£°æ˜">1.3å‰ç½®å£°æ˜</h3><p>å°½å¯èƒ½åœ°é¿å…ä½¿ç”¨å‰ç½®å£°æ˜ã€‚ä½¿ç”¨#includeåŒ…å«éœ€è¦çš„å¤´æ–‡ä»¶å³å¯ã€‚</p><p>æ‰€è°“ã€Œå‰ç½®å£°æ˜ã€ï¼ˆforwarddeclarationï¼‰æ˜¯ç±»ã€å‡½æ•°å’Œæ¨¡æ¿çš„çº¯ç²¹å£°æ˜ï¼Œæ²¡ä¼´éšç€å…¶å®šä¹‰.</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å‰ç½®å£°æ˜èƒ½å¤ŸèŠ‚çœç¼–è¯‘æ—¶é—´ï¼Œå¤šä½™çš„#includeä¼šè¿«ä½¿ç¼–è¯‘å™¨å±•å¼€æ›´å¤šçš„æ–‡ä»¶ï¼Œå¤„ç†æ›´å¤šçš„è¾“å…¥ã€‚</li><li>å‰ç½®å£°æ˜èƒ½å¤ŸèŠ‚çœä¸å¿…è¦çš„é‡æ–°ç¼–è¯‘çš„æ—¶é—´ã€‚#includeä½¿ä»£ç å› ä¸ºå¤´æ–‡ä»¶ä¸­æ— å…³çš„æ”¹åŠ¨è€Œè¢«é‡æ–°ç¼–è¯‘å¤šæ¬¡ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å‰ç½®å£°æ˜éšè—äº†ä¾èµ–å…³ç³»ï¼Œå¤´æ–‡ä»¶æ”¹åŠ¨æ—¶ï¼Œç”¨æˆ·çš„ä»£ç ä¼šè·³è¿‡å¿…è¦çš„é‡æ–°ç¼–è¯‘è¿‡ç¨‹ã€‚</li><li>å‰ç½®å£°æ˜å¯èƒ½ä¼šè¢«åº“çš„åç»­æ›´æ”¹æ‰€ç ´åã€‚å‰ç½®å£°æ˜å‡½æ•°æˆ–æ¨¡æ¿æœ‰æ—¶ä¼šå¦¨ç¢å¤´æ–‡ä»¶å¼€å‘è€…å˜åŠ¨å…¶API.ä¾‹å¦‚æ‰©å¤§å½¢å‚ç±»å‹ï¼ŒåŠ ä¸ªè‡ªå¸¦é»˜è®¤å‚æ•°çš„æ¨¡æ¿å½¢å‚ç­‰ç­‰ã€‚</li><li>å‰ç½®å£°æ˜æ¥è‡ªå‘½åç©ºé—´std::çš„symbolæ—¶ï¼Œå…¶è¡Œä¸ºæœªå®šä¹‰ã€‚</li><li>å¾ˆéš¾åˆ¤æ–­ä»€ä¹ˆæ—¶å€™è¯¥ç”¨å‰ç½®å£°æ˜ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨#includeã€‚æç«¯æƒ…å†µä¸‹ï¼Œç”¨å‰ç½®å£°æ˜ä»£æ›¿#includeç”šè‡³éƒ½ä¼šæš—æš—åœ°æ”¹å˜ä»£ç çš„å«ä¹‰ï¼š</li><li>å‰ç½®å£°æ˜äº†ä¸å°‘æ¥è‡ªå¤´æ–‡ä»¶çš„symbolæ—¶ï¼Œå°±ä¼šæ¯”å•å•ä¸€è¡Œçš„includeå†—é•¿ã€‚</li><li>ä»…ä»…ä¸ºäº†èƒ½å‰ç½®å£°æ˜è€Œé‡æ„ä»£ç ï¼ˆæ¯”å¦‚ç”¨æŒ‡é’ˆæˆå‘˜ä»£æ›¿å¯¹è±¡æˆå‘˜ï¼‰ä¼šä½¿ä»£ç å˜å¾—æ›´æ…¢æ›´å¤æ‚</li></ul><p>ç»“è®ºï¼š</p><ul><li>å°½é‡é¿å…å‰ç½®å£°æ˜é‚£äº›å®šä¹‰åœ¨å…¶ä»–é¡¹ç›®ä¸­çš„å®ä½“.</li><li>å‡½æ•°ï¼šæ€»æ˜¯ä½¿ç”¨#include.</li><li>ç±»æ¨¡æ¿ï¼šä¼˜å…ˆä½¿ç”¨#include.</li></ul><p>è‡³äºä»€ä¹ˆæ—¶å€™åŒ…å«å¤´æ–‡ä»¶ï¼Œå‚è§1.5.#includeçš„è·¯å¾„åŠé¡ºåºã€‚</p><h3 id="å†…è”å‡½æ•°">1.4å†…è”å‡½æ•°</h3><p>åªæœ‰å½“å‡½æ•°åªæœ‰10è¡Œç”šè‡³æ›´å°‘æ—¶æ‰å°†å…¶å®šä¹‰ä¸ºå†…è”å‡½æ•°.</p><p>å®šä¹‰:å½“å‡½æ•°è¢«å£°æ˜ä¸ºå†…è”å‡½æ•°ä¹‹å,ç¼–è¯‘å™¨ä¼šå°†å…¶å†…è”å±•å¼€,è€Œä¸æ˜¯æŒ‰é€šå¸¸çš„å‡½æ•°è°ƒç”¨æœºåˆ¶è¿›è¡Œè°ƒç”¨.</p><p>ä¼˜ç‚¹:åªè¦å†…è”çš„å‡½æ•°ä½“è¾ƒå°,å†…è”è¯¥å‡½æ•°å¯ä»¥ä»¤ç›®æ ‡ä»£ç æ›´åŠ é«˜æ•ˆ.å¯¹äºå­˜å–å‡½æ•°ä»¥åŠå…¶å®ƒå‡½æ•°ä½“æ¯”è¾ƒçŸ­,æ€§èƒ½å…³é”®çš„å‡½æ•°,é¼“åŠ±ä½¿ç”¨å†…è”.</p><p>ç¼ºç‚¹:æ»¥ç”¨å†…è”å°†å¯¼è‡´ç¨‹åºå˜å¾—æ›´æ…¢.å†…è”å¯èƒ½ä½¿ç›®æ ‡ä»£ç é‡æˆ–å¢æˆ–å‡,è¿™å–å†³äºå†…è”å‡½æ•°çš„å¤§å°.å†…è”éå¸¸çŸ­å°çš„å­˜å–å‡½æ•°é€šå¸¸ä¼šå‡å°‘ä»£ç å¤§å°,ä½†å†…è”ä¸€ä¸ªç›¸å½“å¤§çš„å‡½æ•°å°†æˆå‰§æ€§çš„å¢åŠ ä»£ç å¤§å°.ç°ä»£å¤„ç†å™¨ç”±äºæ›´å¥½çš„åˆ©ç”¨äº†æŒ‡ä»¤ç¼“å­˜,å°å·§çš„ä»£ç å¾€å¾€æ‰§è¡Œæ›´å¿«ã€‚</p><p>ç»“è®º:</p><ul><li><p>ä¸€ä¸ªè¾ƒä¸ºåˆç†çš„ç»éªŒå‡†åˆ™æ˜¯,ä¸è¦å†…è”è¶…è¿‡10è¡Œçš„å‡½æ•°.è°¨æ…å¯¹å¾…ææ„å‡½æ•°,ææ„å‡½æ•°å¾€å¾€æ¯”å…¶è¡¨é¢çœ‹èµ·æ¥è¦æ›´é•¿,å› ä¸ºæœ‰éšå«çš„æˆå‘˜å’ŒåŸºç±»ææ„å‡½æ•°è¢«è°ƒç”¨!</p></li><li><p>å¦ä¸€ä¸ªå®ç”¨çš„ç»éªŒå‡†åˆ™:å†…è”é‚£äº›åŒ…å«å¾ªç¯æˆ–switchè¯­å¥çš„å‡½æ•°å¸¸å¸¸æ˜¯å¾—ä¸å¿å¤±(é™¤éåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹,è¿™äº›å¾ªç¯æˆ–switchè¯­å¥ä»ä¸è¢«æ‰§è¡Œ)</p></li></ul><p>æœ‰äº›å‡½æ•°å³ä½¿å£°æ˜ä¸ºå†…è”çš„ä¹Ÿä¸ä¸€å®šä¼šè¢«ç¼–è¯‘å™¨å†…è”,è¿™ç‚¹å¾ˆé‡è¦;æ¯”å¦‚è™šå‡½æ•°å’Œé€’å½’å‡½æ•°å°±ä¸ä¼šè¢«æ­£å¸¸å†…è”.é€šå¸¸,é€’å½’å‡½æ•°ä¸åº”è¯¥å£°æ˜æˆå†…è”å‡½æ•°.ï¼ˆYuleFoxæ³¨:é€’å½’è°ƒç”¨å †æ ˆçš„å±•å¼€å¹¶ä¸åƒå¾ªç¯é‚£ä¹ˆç®€å•,æ¯”å¦‚é€’å½’å±‚æ•°åœ¨ç¼–è¯‘æ—¶å¯èƒ½æ˜¯æœªçŸ¥çš„,å¤§å¤šæ•°ç¼–è¯‘å™¨éƒ½ä¸æ”¯æŒå†…è”é€’å½’å‡½æ•°).è™šå‡½æ•°å†…è”çš„ä¸»è¦åŸå› åˆ™æ˜¯æƒ³æŠŠå®ƒçš„å‡½æ•°ä½“æ”¾åœ¨ç±»å®šä¹‰å†…,ä¸ºäº†å›¾ä¸ªæ–¹ä¾¿,æŠ‘æˆ–æ˜¯å½“ä½œæ–‡æ¡£æè¿°å…¶è¡Œä¸º,æ¯”å¦‚ç²¾çŸ­çš„å­˜å–å‡½æ•°.</p><h3 id="includeçš„è·¯å¾„åŠé¡ºåº">1.5#includeçš„è·¯å¾„åŠé¡ºåº</h3><p>ä½¿ç”¨æ ‡å‡†çš„å¤´æ–‡ä»¶åŒ…å«é¡ºåºå¯å¢å¼ºå¯è¯»æ€§,é¿å…éšè—ä¾èµ–:ç›¸å…³å¤´æ–‡ä»¶,Cåº“,C++åº“,å…¶ä»–åº“çš„.h,æœ¬é¡¹ç›®å†…çš„.h.</p><p>é¡¹ç›®å†…å¤´æ–‡ä»¶åº”æŒ‰ç…§é¡¹ç›®æºä»£ç ç›®å½•æ ‘ç»“æ„æ’åˆ—,é¿å…ä½¿ç”¨UNIXç‰¹æ®Šçš„å¿«æ·ç›®å½•.(å½“å‰ç›®å½•)æˆ–..(ä¸Šçº§ç›®å½•).ä¾‹å¦‚,google-awesome-project/src/base/logging.håº”è¯¥æŒ‰å¦‚ä¸‹æ–¹å¼åŒ…å«</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;base/logging.h&quot;</span></span><br></code></pre></td></tr></table></figure><p>åˆå¦‚,dir/foo.ccæˆ–dir/foo_test.ccçš„ä¸»è¦ä½œç”¨æ˜¯å®ç°æˆ–æµ‹è¯•dir2/foo2.hçš„åŠŸèƒ½,foo.ccä¸­åŒ…å«å¤´æ–‡ä»¶çš„æ¬¡åºå¦‚ä¸‹:</p><ol type="1"><li>dir2/foo2.h(ä¼˜å…ˆä½ç½®,è¯¦æƒ…å¦‚ä¸‹)</li><li>Cç³»ç»Ÿæ–‡ä»¶</li><li>C++ç³»ç»Ÿæ–‡ä»¶</li><li>å…¶ä»–åº“çš„.hæ–‡ä»¶</li><li>æœ¬é¡¹ç›®å†….hæ–‡ä»¶</li></ol><p>è¿™ç§ä¼˜å…ˆçš„é¡ºåºæ’åºä¿è¯å½“dir2/foo2.hé—æ¼æŸäº›å¿…è¦çš„åº“æ—¶ï¼Œdir/foo.ccæˆ–dir/foo_test.ccçš„æ„å»ºä¼šç«‹åˆ»ä¸­æ­¢ã€‚å› æ­¤è¿™ä¸€æ¡è§„åˆ™ä¿è¯ç»´æŠ¤è¿™äº›æ–‡ä»¶çš„äººä»¬é¦–å…ˆçœ‹åˆ°æ„å»ºä¸­æ­¢çš„æ¶ˆæ¯è€Œä¸æ˜¯ç»´æŠ¤å…¶ä»–åŒ…çš„äººä»¬ã€‚</p><p>æŒ‰å­—æ¯é¡ºåºåˆ†åˆ«å¯¹æ¯ç§ç±»å‹çš„å¤´æ–‡ä»¶è¿›è¡ŒäºŒæ¬¡æ’åºæ˜¯ä¸é”™çš„ä¸»æ„ã€‚</p><p>æ‚¨æ‰€ä¾èµ–çš„ç¬¦å·(symbols)è¢«å“ªäº›å¤´æ–‡ä»¶æ‰€å®šä¹‰ï¼Œæ‚¨å°±åº”è¯¥åŒ…å«ï¼ˆincludeï¼‰å“ªäº›å¤´æ–‡ä»¶ï¼Œå‰ç½®å£°æ˜(forwarddeclarations)æƒ…å†µé™¤å¤–ã€‚</p><p>ä¾‹å¤–ï¼šæœ‰æ—¶ï¼Œå¹³å°ç‰¹å®šï¼ˆsystem-specificï¼‰ä»£ç éœ€è¦æ¡ä»¶ç¼–è¯‘ï¼ˆconditionalincludesï¼‰ï¼Œè¿™äº›ä»£ç å¯ä»¥æ”¾åˆ°å…¶å®ƒincludesä¹‹åã€‚å½“ç„¶ï¼Œæ‚¨çš„å¹³å°ç‰¹å®šä»£ç ä¹Ÿè¦å¤Ÿç®€ç»ƒä¸”ç‹¬ç«‹ï¼Œæ¯”å¦‚ï¼š</p><h3 id="tips">tips</h3><ol type="1"><li>é¿å…å¤šé‡åŒ…å«æ˜¯å­¦ç¼–ç¨‹æ—¶æœ€åŸºæœ¬çš„è¦æ±‚;</li><li>å‰ç½®å£°æ˜æ˜¯ä¸ºäº†é™ä½ç¼–è¯‘ä¾èµ–ï¼Œé˜²æ­¢ä¿®æ”¹ä¸€ä¸ªå¤´æ–‡ä»¶å¼•å‘å¤šç±³è¯ºæ•ˆåº”;</li><li>å†…è”å‡½æ•°çš„åˆç†ä½¿ç”¨å¯æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡;</li><li>-inl.hå¯æé«˜ä»£ç å¯è¯»æ€§(ä¸€èˆ¬ç”¨ä¸åˆ°å§:D);</li><li>æ ‡å‡†åŒ–å‡½æ•°å‚æ•°é¡ºåºå¯ä»¥æé«˜å¯è¯»æ€§å’Œæ˜“ç»´æŠ¤æ€§(å¯¹å‡½æ•°å‚æ•°çš„å †æ ˆç©ºé—´æœ‰è½»å¾®å½±å“,æˆ‘ä»¥å‰å¤§å¤šæ˜¯ç›¸åŒç±»å‹æ”¾åœ¨ä¸€èµ·);</li><li>åŒ…å«æ–‡ä»¶çš„åç§°ä½¿ç”¨.å’Œ..è™½ç„¶æ–¹ä¾¿å´æ˜“æ··ä¹±,ä½¿ç”¨æ¯”è¾ƒå®Œæ•´çš„é¡¹ç›®è·¯å¾„çœ‹ä¸Šå»å¾ˆæ¸…æ™°,å¾ˆæ¡ç†,åŒ…å«æ–‡ä»¶çš„æ¬¡åºé™¤äº†ç¾è§‚ä¹‹å¤–,æœ€é‡è¦çš„æ˜¯å¯ä»¥å‡å°‘éšè—ä¾èµ–,ä½¿æ¯ä¸ªå¤´æ–‡ä»¶åœ¨â€œæœ€éœ€è¦ç¼–è¯‘â€(å¯¹åº”æºæ–‡ä»¶å¤„:D)çš„åœ°æ–¹ç¼–è¯‘,æœ‰äººæå‡ºåº“æ–‡ä»¶æ”¾åœ¨æœ€å,è¿™æ ·å‡ºé”™å…ˆæ˜¯é¡¹ç›®å†…çš„æ–‡ä»¶,å¤´æ–‡ä»¶éƒ½æ”¾åœ¨å¯¹åº”æºæ–‡ä»¶çš„æœ€å‰é¢,è¿™ä¸€ç‚¹è¶³ä»¥ä¿è¯å†…éƒ¨é”™è¯¯çš„åŠæ—¶å‘ç°äº†</li><li>åŸæ¥è¿˜çœŸæœ‰é¡¹ç›®ç”¨#includesæ¥æ’å…¥æ–‡æœ¬ï¼Œä¸”å…¶æ–‡ä»¶æ‰©å±•å.incçœ‹ä¸Šå»ä¹Ÿå¾ˆç§‘å­¦ã€‚</li><li>Googleå·²ç»ä¸å†æå€¡-inl.hç”¨æ³•ã€‚</li><li>æ³¨æ„ï¼Œå‰ç½®å£°æ˜çš„ç±»æ˜¯ä¸å®Œå…¨ç±»å‹ï¼ˆincompletetypeï¼‰ï¼Œæˆ‘ä»¬åªèƒ½å®šä¹‰æŒ‡å‘è¯¥ç±»å‹çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œæˆ–è€…å£°æ˜ï¼ˆä½†ä¸èƒ½å®šä¹‰ï¼‰ä»¥ä¸å®Œå…¨ç±»å‹ä½œä¸ºå‚æ•°æˆ–è€…è¿”å›ç±»å‹çš„å‡½æ•°ã€‚æ¯•ç«Ÿç¼–è¯‘å™¨ä¸çŸ¥é“ä¸å®Œå…¨ç±»å‹çš„å®šä¹‰ï¼Œæˆ‘ä»¬ä¸èƒ½åˆ›å»ºå…¶ç±»çš„ä»»ä½•å¯¹è±¡ï¼Œä¹Ÿä¸èƒ½å£°æ˜æˆç±»å†…éƒ¨çš„æ•°æ®æˆå‘˜ã€‚</li><li>ç±»å†…éƒ¨çš„å‡½æ•°ä¸€èˆ¬ä¼šè‡ªåŠ¨å†…è”ã€‚æ‰€ä»¥æŸå‡½æ•°ä¸€æ—¦ä¸éœ€è¦å†…è”ï¼Œå…¶å®šä¹‰å°±ä¸è¦å†æ”¾åœ¨å¤´æ–‡ä»¶é‡Œï¼Œè€Œæ˜¯æ”¾åˆ°å¯¹åº”çš„.ccæ–‡ä»¶é‡Œã€‚è¿™æ ·å¯ä»¥ä¿æŒå¤´æ–‡ä»¶çš„ç±»ç›¸å½“ç²¾ç‚¼ï¼Œä¹Ÿå¾ˆå¥½åœ°è´¯å½»äº†å£°æ˜ä¸å®šä¹‰åˆ†ç¦»çš„åŸåˆ™ã€‚</li><li>åœ¨#includeä¸­æ’å…¥ç©ºè¡Œä»¥åˆ†å‰²ç›¸å…³å¤´æ–‡ä»¶,Cåº“,C++åº“,å…¶ä»–åº“çš„.hå’Œæœ¬é¡¹ç›®å†…çš„.hæ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚</li></ol><h2 id="ä½œç”¨åŸŸ">2.ä½œç”¨åŸŸ</h2><h3 id="å‘½åç©ºé—´">2.1å‘½åç©ºé—´</h3><p>é¼“åŠ±åœ¨.ccæ–‡ä»¶å†…ä½¿ç”¨åŒ¿åå‘½åç©ºé—´æˆ–staticå£°æ˜.ä½¿ç”¨å…·åçš„å‘½åç©ºé—´æ—¶,å…¶åç§°å¯åŸºäºé¡¹ç›®åæˆ–ç›¸å¯¹è·¯å¾„.ç¦æ­¢ä½¿ç”¨usingæŒ‡ç¤ºï¼ˆusing-directiveï¼‰ã€‚ç¦æ­¢ä½¿ç”¨å†…è”å‘½åç©ºé—´ï¼ˆinlinenamespaceï¼‰ã€‚</p><p>å®šä¹‰:å‘½åç©ºé—´å°†å…¨å±€ä½œç”¨åŸŸç»†åˆ†ä¸ºç‹¬ç«‹çš„,å…·åçš„ä½œç”¨åŸŸ,å¯æœ‰æ•ˆé˜²æ­¢å…¨å±€ä½œç”¨åŸŸçš„å‘½åå†²çª.</p><p>ä¼˜ç‚¹:</p><ul><li><p>è™½ç„¶ç±»å·²ç»æä¾›äº†ï¼ˆå¯åµŒå¥—çš„ï¼‰å‘½åè½´çº¿(YuleFoxæ³¨:å°†å‘½ååˆ†å‰²åœ¨ä¸åŒç±»çš„ä½œç”¨åŸŸå†…),å‘½åç©ºé—´åœ¨è¿™åŸºç¡€ä¸Šåˆå°è£…äº†ä¸€å±‚.</p></li><li><p>ä¸¾ä¾‹æ¥è¯´,ä¸¤ä¸ªä¸åŒé¡¹ç›®çš„å…¨å±€ä½œç”¨åŸŸéƒ½æœ‰ä¸€ä¸ªç±»Foo,è¿™æ ·åœ¨ç¼–è¯‘æˆ–è¿è¡Œæ—¶é€ æˆå†²çª.å¦‚æœæ¯ä¸ªé¡¹ç›®å°†ä»£ç ç½®äºä¸åŒå‘½åç©ºé—´ä¸­,project1::Fooå’Œproject2::Fooä½œä¸ºä¸åŒç¬¦å·è‡ªç„¶ä¸ä¼šå†²çª.</p></li><li><p>å†…è”å‘½åç©ºé—´ä¼šè‡ªåŠ¨æŠŠå†…éƒ¨çš„æ ‡è¯†ç¬¦æ”¾åˆ°å¤–å±‚ä½œç”¨åŸŸï¼Œæ¯”å¦‚ï¼š</p></li><li><p>```c++ namespaceX{ inlinenamespaceY{ voidfoo(); } //namespaceY }//namespaceX <figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><br><span class="hljs-bullet">-</span> <span class="hljs-string">X::Y::foo()ä¸X::foo()å½¼æ­¤å¯ä»£æ›¿ã€‚å†…è”å‘½åç©ºé—´ä¸»è¦ç”¨æ¥ä¿æŒè·¨ç‰ˆæœ¬çš„ABIå…¼å®¹æ€§ã€‚</span><br><br><span class="hljs-attribute">ç¼ºç‚¹</span><span class="hljs-punctuation">:</span><br><span class="hljs-punctuation"></span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å‘½åç©ºé—´å…·æœ‰è¿·æƒ‘æ€§,å› ä¸ºå®ƒä»¬ä½¿å¾—åŒºåˆ†ä¸¤ä¸ªç›¸åŒå‘½åæ‰€æŒ‡ä»£çš„å®šä¹‰æ›´åŠ å›°éš¾ã€‚</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">å†…è”å‘½åç©ºé—´å¾ˆå®¹æ˜“ä»¤äººè¿·æƒ‘ï¼Œæ¯•ç«Ÿå…¶å†…éƒ¨çš„æˆå‘˜ä¸å†å—å…¶å£°æ˜æ‰€åœ¨å‘½åç©ºé—´çš„é™åˆ¶ã€‚å†…è”å‘½åç©ºé—´åªåœ¨å¤§å‹ç‰ˆæœ¬æ§åˆ¶é‡Œæœ‰ç”¨ã€‚</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">æœ‰æ—¶å€™ä¸å¾—ä¸å¤šæ¬¡å¼•ç”¨æŸä¸ªå®šä¹‰åœ¨è®¸å¤šåµŒå¥—å‘½åç©ºé—´é‡Œçš„å®ä½“ï¼Œä½¿ç”¨å®Œæ•´çš„å‘½åç©ºé—´ä¼šå¯¼è‡´ä»£ç çš„å†—é•¿ã€‚</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨åŒ¿åç©ºé—´å¯¼è‡´è¿èƒŒC++çš„å”¯ä¸€å®šä¹‰åŸåˆ™(OneDefinitionRule(ODR)).</span><br><br>ç»“è®º:æ ¹æ®ä¸‹æ–‡å°†è¦æåˆ°çš„ç­–ç•¥åˆç†ä½¿ç”¨å‘½åç©ºé—´.<br><br><span class="hljs-bullet">-</span> <span class="hljs-string">éµå®ˆå‘½åç©ºé—´å‘½åä¸­çš„è§„åˆ™ã€‚</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-string">åƒä¹‹å‰çš„å‡ ä¸ªä¾‹å­ä¸­ä¸€æ ·ï¼Œåœ¨å‘½åç©ºé—´çš„æœ€åæ³¨é‡Šå‡ºå‘½åç©ºé—´çš„åå­—ã€‚</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨å‘½åç©ºé—´æŠŠæ–‡ä»¶åŒ…å«,gflagsçš„å£°æ˜/å®šä¹‰,ä»¥åŠç±»çš„å‰ç½®å£°æ˜ä»¥å¤–çš„æ•´ä¸ªæºæ–‡ä»¶å°è£…èµ·æ¥,ä»¥åŒºåˆ«äºå…¶å®ƒå‘½åç©ºé—´:</span><br><br><span class="hljs-bullet">-</span> <span class="hljs-string">```c++</span><br>  <span class="hljs-attribute">//.hæ–‡ä»¶</span><br><span class="hljs-attribute">  namespacemynamespace&#123;</span><br><span class="hljs-attribute">  //æ‰€æœ‰å£°æ˜éƒ½ç½®äºå‘½åç©ºé—´ä¸­</span><br><span class="hljs-attribute">  //æ³¨æ„ä¸è¦ä½¿ç”¨ç¼©è¿›</span><br><span class="hljs-attribute">  classMyClass&#123;</span><br><span class="hljs-attribute">  public</span><span class="hljs-punctuation">:</span><br>  ...<br>  voidFoo();<br>  &#125;;<br>  &#125;//namespacemynamespace<br>  <br></code></pre></td></tr></table></figure></p></li><li><p>```c++ //.ccæ–‡ä»¶ namespacemynamespace{ //å‡½æ•°å®šä¹‰éƒ½ç½®äºå‘½åç©ºé—´ä¸­voidMyClass::Foo(){ ... } }//namespacemynamespace <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br>- æ›´å¤æ‚çš„.ccæ–‡ä»¶åŒ…å«æ›´å¤š,æ›´å¤æ‚çš„ç»†èŠ‚,æ¯”å¦‚gflagsæˆ–<span class="hljs-keyword">using</span>å£°æ˜ã€‚<br><br>- ```c++<br>  <span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;a.h&quot;</span></span><br>  <span class="hljs-built_in">DEFINE_FLAG</span>(<span class="hljs-type">bool</span>,someflag,<span class="hljs-literal">false</span>,<span class="hljs-string">&quot;dummyflag&quot;</span>);<br>  namespacea&#123;<br>  ...codefora...<span class="hljs-comment">//å·¦å¯¹é½</span><br>  &#125;<span class="hljs-comment">//namespace</span><br></code></pre></td></tr></table></figure></p></li></ul><h3 id="åŒ¿åå‘½åç©ºé—´å’Œé™æ€å˜é‡">2.2åŒ¿åå‘½åç©ºé—´å’Œé™æ€å˜é‡</h3><ul><li><p>åœ¨.ccæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªä¸éœ€è¦è¢«å¤–éƒ¨å¼•ç”¨çš„å˜é‡æ—¶ï¼Œå¯ä»¥å°†å®ƒä»¬æ”¾åœ¨åŒ¿åå‘½åç©ºé—´æˆ–å£°æ˜ä¸ºstaticã€‚ä½†æ˜¯ä¸è¦åœ¨.hæ–‡ä»¶ä¸­è¿™ä¹ˆåšã€‚</p></li><li><p>å®šä¹‰:æ‰€æœ‰ç½®äºåŒ¿åå‘½åç©ºé—´çš„å£°æ˜éƒ½å…·æœ‰å†…éƒ¨é“¾æ¥æ€§ï¼Œå‡½æ•°å’Œå˜é‡å¯ä»¥ç»ç”±å£°æ˜ä¸ºstaticæ‹¥æœ‰å†…éƒ¨é“¾æ¥æ€§ï¼Œè¿™æ„å‘³ç€ä½ åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å£°æ˜çš„è¿™äº›æ ‡è¯†ç¬¦éƒ½ä¸èƒ½åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­è¢«è®¿é—®ã€‚å³ä½¿ä¸¤ä¸ªæ–‡ä»¶å£°æ˜äº†å®Œå…¨ä¸€æ ·åå­—çš„æ ‡è¯†ç¬¦ï¼Œå®ƒä»¬æ‰€æŒ‡å‘çš„å®ä½“å®é™…ä¸Šæ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p></li><li><p>åŒ¿åå‘½åç©ºé—´çš„å£°æ˜å’Œå…·åçš„æ ¼å¼ç›¸åŒï¼Œåœ¨æœ€åæ³¨é‡Šä¸Šnamespace:</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">namespace</span>&#123;<br>...<br>&#125;<span class="hljs-comment">//namespace</span><br></code></pre></td></tr></table></figure><h3 id="éæˆå‘˜å‡½æ•°é™æ€æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°">2.3éæˆå‘˜å‡½æ•°ã€é™æ€æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°</h3><ul><li>ä½¿ç”¨é™æ€æˆå‘˜å‡½æ•°æˆ–å‘½åç©ºé—´å†…çš„éæˆå‘˜å‡½æ•°,å°½é‡ä¸è¦ç”¨è£¸çš„å…¨å±€å‡½æ•°.å°†ä¸€ç³»åˆ—å‡½æ•°ç›´æ¥ç½®äºå‘½åç©ºé—´ä¸­ï¼Œä¸è¦ç”¨ç±»çš„é™æ€æ–¹æ³•æ¨¡æ‹Ÿå‡ºå‘½åç©ºé—´çš„æ•ˆæœï¼Œç±»çš„é™æ€æ–¹æ³•åº”å½“å’Œç±»çš„å®ä¾‹æˆ–é™æ€æ•°æ®ç´§å¯†ç›¸å…³.</li><li>æŸäº›æƒ…å†µä¸‹,éæˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜å‡½æ•°æ˜¯éå¸¸æœ‰ç”¨çš„,å°†éæˆå‘˜å‡½æ•°æ”¾åœ¨å‘½åç©ºé—´å†…å¯é¿å…æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ.</li><li>å°†éæˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜å‡½æ•°ä½œä¸ºæ–°ç±»çš„æˆå‘˜æˆ–è®¸æ›´æœ‰æ„ä¹‰,å½“å®ƒä»¬éœ€è¦è®¿é—®å¤–éƒ¨èµ„æºæˆ–å…·æœ‰é‡è¦çš„ä¾èµ–å…³ç³»æ—¶æ›´æ˜¯å¦‚æ­¤.</li><li>æœ‰æ—¶,æŠŠå‡½æ•°çš„å®šä¹‰åŒç±»çš„å®ä¾‹è„±é’©æ˜¯æœ‰ç›Šçš„,ç”šè‡³æ˜¯å¿…è¦çš„.è¿™æ ·çš„å‡½æ•°å¯ä»¥è¢«å®šä¹‰æˆé™æ€æˆå‘˜,æˆ–æ˜¯éæˆå‘˜å‡½æ•°.éæˆå‘˜å‡½æ•°ä¸åº”ä¾èµ–äºå¤–éƒ¨å˜é‡,åº”å°½é‡ç½®äºæŸä¸ªå‘½åç©ºé—´å†….ç›¸æ¯”å•çº¯ä¸ºäº†å°è£…è‹¥å¹²ä¸å…±äº«ä»»ä½•é™æ€æ•°æ®çš„é™æ€æˆå‘˜å‡½æ•°è€Œåˆ›å»ºç±»,ä¸å¦‚ä½¿ç”¨2.1.å‘½åç©ºé—´ã€‚ä¸¾ä¾‹è€Œè¨€ï¼Œå¯¹äºå¤´æ–‡ä»¶myproject/foo_bar.h,åº”å½“ä½¿ç”¨</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++">namespacemyproject&#123;<br>namespacefoo_bar&#123;<br><span class="hljs-built_in">voidFunction1</span>();<br><span class="hljs-built_in">voidFunction2</span>();<br>&#125;<span class="hljs-comment">//namespacefoo_bar</span><br>&#125;<span class="hljs-comment">//namespacemyproject</span><br><br><span class="hljs-comment">//è€Œä¸æ˜¯</span><br>namespacemyproject&#123;<br>classFooBar&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">staticvoidFunction1</span>();<br><span class="hljs-built_in">staticvoidFunction2</span>();<br>&#125;;<br>&#125;<span class="hljs-comment">//namespacemyproject</span><br><br></code></pre></td></tr></table></figure><h3 id="å±€éƒ¨å˜é‡">2.4å±€éƒ¨å˜é‡</h3><ul><li>å°†å‡½æ•°å˜é‡å°½å¯èƒ½ç½®äºæœ€å°ä½œç”¨åŸŸå†…,å¹¶åœ¨å˜é‡å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–</li><li>åº”ä½¿ç”¨åˆå§‹åŒ–çš„æ–¹å¼æ›¿ä»£å£°æ˜å†èµ‹å€¼</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++">intj=<span class="hljs-built_in">g</span>();<span class="hljs-comment">//å¥½â€”â€”åˆå§‹åŒ–æ—¶å£°æ˜</span><br><br>vector&lt;<span class="hljs-type">int</span>&gt;v;<br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<span class="hljs-comment">//ç”¨èŠ±æ‹¬å·åˆå§‹åŒ–æ›´å¥½</span><br>v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>&#125;;<span class="hljs-comment">//å¥½â€”â€”vä¸€å¼€å§‹å°±åˆå§‹åŒ–</span><br></code></pre></td></tr></table></figure><ul><li><p>å±äºif,whileå’Œforè¯­å¥çš„å˜é‡åº”å½“åœ¨è¿™äº›è¯­å¥ä¸­æ­£å¸¸åœ°å£°æ˜ï¼Œè¿™æ ·å­è¿™äº›å˜é‡çš„ä½œç”¨åŸŸå°±è¢«é™åˆ¶åœ¨è¿™äº›è¯­å¥ä¸­äº†</p></li><li><p>Warning:æœ‰ä¸€ä¸ªä¾‹å¤–,å¦‚æœå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡,æ¯æ¬¡è¿›å…¥ä½œç”¨åŸŸéƒ½è¦è°ƒç”¨å…¶æ„é€ å‡½æ•°,æ¯æ¬¡é€€å‡ºä½œç”¨åŸŸéƒ½è¦è°ƒç”¨å…¶ææ„å‡½æ•°.è¿™ä¼šå¯¼è‡´æ•ˆç‡é™ä½.</p></li><li><p>åœ¨å¾ªç¯ä½œç”¨åŸŸå¤–é¢å£°æ˜è¿™ç±»å˜é‡è¦é«˜æ•ˆçš„å¤š</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">Foof;<span class="hljs-comment">//æ„é€ å‡½æ•°å’Œææ„å‡½æ•°åªè°ƒç”¨1æ¬¡</span><br><span class="hljs-keyword">for</span>(inti=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">1000000</span>;++i)&#123;<br>f.<span class="hljs-built_in">DoSomething</span>(i);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é™æ€å’Œå…¨å±€å˜é‡">2.5é™æ€å’Œå…¨å±€å˜é‡</h3><ul><li>ç¦æ­¢å®šä¹‰é™æ€å‚¨å­˜å‘¨æœŸéPODå˜é‡ï¼Œç¦æ­¢ä½¿ç”¨å«æœ‰å‰¯ä½œç”¨çš„å‡½æ•°åˆå§‹åŒ–PODå…¨å±€å˜é‡ï¼Œå› ä¸ºå¤šç¼–è¯‘å•å…ƒä¸­çš„é™æ€å˜é‡æ‰§è¡Œæ—¶çš„æ„é€ å’Œææ„é¡ºåºæ˜¯æœªæ˜ç¡®çš„ï¼Œè¿™å°†å¯¼è‡´ä»£ç çš„ä¸å¯ç§»æ¤ã€‚</li><li>ç¦æ­¢ä½¿ç”¨ç±»çš„é™æ€å‚¨å­˜å‘¨æœŸå˜é‡ï¼šç”±äºæ„é€ å’Œææ„å‡½æ•°è°ƒç”¨é¡ºåºçš„ä¸ç¡®å®šæ€§ï¼Œå®ƒä»¬ä¼šå¯¼è‡´éš¾ä»¥å‘ç°çš„bugã€‚ä¸è¿‡constexprå˜é‡é™¤å¤–ï¼Œæ¯•ç«Ÿå®ƒä»¬åˆä¸æ¶‰åŠåŠ¨æ€åˆå§‹åŒ–æˆ–ææ„ã€‚</li><li>é™æ€ç”Ÿå­˜å‘¨æœŸçš„å¯¹è±¡ï¼Œå³åŒ…æ‹¬äº†å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡ï¼Œé™æ€ç±»æˆå‘˜å˜é‡å’Œå‡½æ•°é™æ€å˜é‡ï¼Œéƒ½å¿…é¡»æ˜¯åŸç”Ÿæ•°æ®ç±»å‹(POD:PlainOldData):å³int,charå’Œfloat,ä»¥åŠPODç±»å‹çš„æŒ‡é’ˆã€æ•°ç»„å’Œç»“æ„ä½“</li><li>é™æ€å˜é‡çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°å’Œåˆå§‹åŒ–çš„é¡ºåºåœ¨C++ä¸­æ˜¯åªæœ‰éƒ¨åˆ†æ˜ç¡®çš„ï¼Œç”šè‡³éšç€æ„å»ºå˜åŒ–è€Œå˜åŒ–ï¼Œå¯¼è‡´éš¾ä»¥å‘ç°çš„bug.æ‰€ä»¥é™¤äº†ç¦ç”¨ç±»ç±»å‹çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬ä¹Ÿä¸å…è®¸ç”¨å‡½æ•°è¿”å›å€¼æ¥åˆå§‹åŒ–PODå˜é‡ï¼Œé™¤éè¯¥å‡½æ•°ï¼ˆæ¯”å¦‚getenv()æˆ–getpid()ï¼‰ä¸æ¶‰åŠä»»ä½•å…¨å±€å˜é‡ã€‚å‡½æ•°ä½œç”¨åŸŸé‡Œçš„é™æ€å˜é‡é™¤å¤–ï¼Œæ¯•ç«Ÿå®ƒçš„åˆå§‹åŒ–é¡ºåºæ˜¯æœ‰æ˜ç¡®å®šä¹‰çš„ï¼Œè€Œä¸”åªä¼šåœ¨æŒ‡ä»¤æ‰§è¡Œåˆ°å®ƒçš„å£°æ˜é‚£é‡Œæ‰ä¼šå‘ç”Ÿã€‚</li><li>åŒä¸€ä¸ªç¼–è¯‘å•å…ƒå†…æ˜¯æ˜ç¡®çš„ï¼Œé™æ€åˆå§‹åŒ–ä¼˜å…ˆäºåŠ¨æ€åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–é¡ºåºæŒ‰ç…§å£°æ˜é¡ºåºè¿›è¡Œï¼Œé”€æ¯åˆ™é€†åºã€‚ä¸åŒçš„ç¼–è¯‘å•å…ƒä¹‹é—´åˆå§‹åŒ–å’Œé”€æ¯é¡ºåºå±äºæœªæ˜ç¡®è¡Œä¸º</li><li>æˆ‘ä»¬åªå…è®¸PODç±»å‹çš„é™æ€å˜é‡ï¼Œå³å®Œå…¨ç¦ç”¨vector(ä½¿ç”¨Cæ•°ç»„æ›¿ä»£)å’Œstring(ä½¿ç”¨constchar[])ã€‚</li><li>ä¸Šæ–‡æåŠçš„é™æ€å˜é‡æ³›æŒ‡é™æ€ç”Ÿå­˜å‘¨æœŸçš„å¯¹è±¡,åŒ…æ‹¬:å…¨å±€å˜é‡,é™æ€å˜é‡,é™æ€ç±»æˆå‘˜å˜é‡,ä»¥åŠå‡½æ•°é™æ€å˜é‡</li></ul><h3 id="tips-1">2.6Tips</h3><ol type="1"><li>ccä¸­çš„åŒ¿åå‘½åç©ºé—´å¯é¿å…å‘½åå†²çª,é™å®šä½œç”¨åŸŸ,é¿å…ç›´æ¥ä½¿ç”¨usingå…³é”®å­—æ±¡æŸ“å‘½åç©ºé—´;</li><li>åµŒå¥—ç±»ç¬¦åˆå±€éƒ¨ä½¿ç”¨åŸåˆ™,åªæ˜¯ä¸èƒ½åœ¨å…¶ä»–å¤´æ–‡ä»¶ä¸­å‰ç½®å£°æ˜,å°½é‡ä¸è¦public;</li><li>å°½é‡ä¸ç”¨å…¨å±€å‡½æ•°å’Œå…¨å±€å˜é‡,è€ƒè™‘ä½œç”¨åŸŸå’Œå‘½åç©ºé—´é™åˆ¶,å°½é‡å•ç‹¬å½¢æˆç¼–è¯‘å•å…ƒ;</li><li>å¤šçº¿ç¨‹ä¸­çš„å…¨å±€å˜é‡(å«é™æ€æˆå‘˜å˜é‡)ä¸è¦ä½¿ç”¨classç±»å‹(å«STLå®¹å™¨),é¿å…ä¸æ˜ç¡®è¡Œä¸ºå¯¼è‡´çš„bug.</li><li>ä½œç”¨åŸŸçš„ä½¿ç”¨,é™¤äº†è€ƒè™‘åç§°æ±¡æŸ“,å¯è¯»æ€§ä¹‹å¤–,ä¸»è¦æ˜¯ä¸ºé™ä½è€¦åˆ,æé«˜ç¼–è¯‘/æ‰§è¡Œæ•ˆç‡.</li><li>æ³¨æ„ã€ŒusingæŒ‡ç¤ºï¼ˆusing-directiveï¼‰ã€å’Œã€Œusingå£°æ˜ï¼ˆusing-declarationï¼‰ã€çš„åŒºåˆ«ã€‚</li><li>åŒ¿åå‘½åç©ºé—´è¯´ç™½äº†å°±æ˜¯æ–‡ä»¶ä½œç”¨åŸŸï¼Œå°±åƒCstaticå£°æ˜çš„ä½œç”¨åŸŸä¸€æ ·ï¼Œåè€…å·²ç»è¢«C++æ ‡å‡†æå€¡å¼ƒç”¨ã€‚</li><li>å±€éƒ¨å˜é‡åœ¨å£°æ˜çš„åŒæ—¶è¿›è¡Œæ˜¾å¼å€¼åˆå§‹åŒ–ï¼Œæ¯”èµ·éšå¼åˆå§‹åŒ–å†èµ‹å€¼çš„ä¸¤æ­¥è¿‡ç¨‹è¦é«˜æ•ˆï¼ŒåŒæ—¶ä¹Ÿè´¯å½»äº†è®¡ç®—æœºä½“ç³»ç»“æ„é‡è¦çš„æ¦‚å¿µã€Œå±€éƒ¨æ€§ï¼ˆlocalityï¼‰ã€ã€‚</li><li>æ³¨æ„åˆ«åœ¨å¾ªç¯çŠ¯å¤§é‡æ„é€ å’Œææ„çš„ä½çº§é”™è¯¯ã€‚</li></ol><h2 id="ç±»">3.ç±»</h2><h3 id="æ„é€ å‡½æ•°çš„èŒè´£">3.1æ„é€ å‡½æ•°çš„èŒè´£</h3><ul><li><p>ä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°,ä¹Ÿä¸è¦åœ¨æ— æ³•æŠ¥å‡ºé”™è¯¯æ—¶è¿›è¡Œå¯èƒ½å¤±è´¥çš„åˆå§‹åŒ–.</p></li><li><p>å¦‚æœåœ¨æ„é€ å‡½æ•°å†…è°ƒç”¨äº†è‡ªèº«çš„è™šå‡½æ•°,è¿™ç±»è°ƒç”¨æ˜¯ä¸ä¼šé‡å®šå‘åˆ°å­ç±»çš„è™šå‡½æ•°å®ç°.å³ä½¿å½“å‰æ²¡æœ‰å­ç±»åŒ–å®ç°,å°†æ¥ä»æ˜¯éšæ‚£.</p></li><li><p>åœ¨æ²¡æœ‰ä½¿ç¨‹åºå´©æºƒ(å› ä¸ºå¹¶ä¸æ˜¯ä¸€ä¸ªå§‹ç»ˆåˆé€‚çš„æ–¹æ³•)æˆ–è€…ä½¿ç”¨å¼‚å¸¸(å› ä¸ºå·²ç»è¢«ç¦ç”¨äº†)ç­‰æ–¹æ³•çš„æ¡ä»¶ä¸‹,æ„é€ å‡½æ•°å¾ˆéš¾ä¸ŠæŠ¥é”™è¯¯</p></li><li><p>å¦‚æœæ‰§è¡Œå¤±è´¥,ä¼šå¾—åˆ°ä¸€ä¸ªåˆå§‹åŒ–å¤±è´¥çš„å¯¹è±¡,è¿™ä¸ªå¯¹è±¡æœ‰å¯èƒ½è¿›å…¥ä¸æ­£å¸¸çš„çŠ¶æ€,å¿…é¡»ä½¿ç”¨boolIsValid()æˆ–ç±»ä¼¼è¿™æ ·çš„æœºåˆ¶æ‰èƒ½æ£€æŸ¥å‡ºæ¥,ç„¶è€Œè¿™æ˜¯ä¸€ä¸ªååˆ†å®¹æ˜“è¢«ç–å¿½çš„æ–¹æ³•.</p></li><li><p>æ„é€ å‡½æ•°çš„åœ°å€æ˜¯æ— æ³•è¢«å–å¾—çš„,å› æ­¤,ä¸¾ä¾‹æ¥è¯´,ç”±æ„é€ å‡½æ•°å®Œæˆçš„å·¥ä½œæ˜¯æ— æ³•ä»¥ç®€å•çš„æ–¹å¼äº¤ç»™å…¶ä»–çº¿ç¨‹çš„</p></li></ul><h3 id="éšå¼ç±»å‹è½¬æ¢">3.2éšå¼ç±»å‹è½¬æ¢</h3><ul><li><p>ä¸è¦å®šä¹‰éšå¼ç±»å‹è½¬æ¢.å¯¹äºè½¬æ¢è¿ç®—ç¬¦å’Œå•å‚æ•°æ„é€ å‡½æ•°,è¯·ä½¿ç”¨explicitå…³é”®å­—</p></li><li><p>explicitå…³é”®å­—å¯ä»¥ç”¨äºæ„é€ å‡½æ•°æˆ–(åœ¨C++11å¼•å…¥)ç±»å‹è½¬æ¢è¿ç®—ç¬¦,ä»¥ä¿è¯åªæœ‰å½“ç›®çš„ç±»å‹åœ¨è°ƒç”¨ç‚¹è¢«æ˜¾å¼å†™æ˜æ—¶æ‰èƒ½è¿›è¡Œç±»å‹è½¬æ¢,ä¾‹å¦‚ä½¿ç”¨cast</p></li><li><p>ä¸èƒ½ä»¥ä¸€ä¸ªå‚æ•°è¿›è¡Œè°ƒç”¨çš„æ„é€ å‡½æ•°ä¸åº”å½“åŠ ä¸Šexplicit.æ¥å—ä¸€ä¸ªstd::initializer_listä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°ä¹Ÿåº”å½“çœç•¥explicit,ä»¥ä¾¿æ”¯æŒæ‹·è´åˆå§‹åŒ–(ä¾‹å¦‚MyTypem={1,2};)</p></li></ul><h3 id="å¯æ‹·è´ç±»å‹å’Œå¯ç§»åŠ¨ç±»å‹">3.3å¯æ‹·è´ç±»å‹å’Œå¯ç§»åŠ¨ç±»å‹</h3><ul><li><p>å¦‚æœä½ çš„ç±»å‹éœ€è¦,å°±è®©å®ƒä»¬æ”¯æŒæ‹·è´/ç§»åŠ¨.å¦åˆ™,å°±æŠŠéšå¼äº§ç”Ÿçš„æ‹·è´å’Œç§»åŠ¨å‡½æ•°ç¦ç”¨</p></li><li><p>å¦‚æœéœ€è¦å°±è®©ä½ çš„ç±»å‹å¯æ‹·è´/å¯ç§»åŠ¨.ä½œä¸ºä¸€ä¸ªç»éªŒæ³•åˆ™,å¦‚æœå¯¹äºä½ çš„ç”¨æˆ·æ¥è¯´è¿™ä¸ªæ‹·è´æ“ä½œä¸æ˜¯ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥çš„,é‚£å°±ä¸è¦æŠŠç±»å‹è®¾ç½®ä¸ºå¯æ‹·è´.å¦‚æœè®©ç±»å‹å¯æ‹·è´,ä¸€å®šè¦åŒæ—¶ç»™å‡ºæ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œçš„å®šä¹‰,åä¹‹äº¦ç„¶.å¦‚æœè®©ç±»å‹å¯ç§»åŠ¨,åŒæ—¶ç§»åŠ¨æ“ä½œçš„æ•ˆç‡é«˜äºæ‹·è´æ“ä½œ,é‚£ä¹ˆå°±æŠŠç§»åŠ¨çš„ä¸¤ä¸ªæ“ä½œ(ç§»åŠ¨æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œ)ä¹Ÿç»™å‡ºå®šä¹‰.å¦‚æœç±»å‹ä¸å¯æ‹·è´,ä½†æ˜¯ç§»åŠ¨æ“ä½œçš„æ­£ç¡®æ€§å¯¹ç”¨æˆ·æ˜¾ç„¶å¯è§,é‚£ä¹ˆæŠŠè¿™ä¸ªç±»å‹è®¾ç½®ä¸ºåªå¯ç§»åŠ¨å¹¶å®šä¹‰ç§»åŠ¨çš„ä¸¤ä¸ªæ“ä½œ</p></li><li><p>å¦‚æœä½ çš„ç±»ä¸éœ€è¦æ‹·è´/ç§»åŠ¨æ“ä½œ,è¯·æ˜¾å¼åœ°é€šè¿‡åœ¨publicåŸŸä¸­ä½¿ç”¨=deleteæˆ–å…¶ä»–æ‰‹æ®µç¦ç”¨ä¹‹.</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//MyClassisneithercopyablenormovable.</span><br><span class="hljs-built_in">MyClass</span>(constMyClass&amp;)=<span class="hljs-keyword">delete</span>;<br>MyClass&amp;<span class="hljs-keyword">operator</span>=(constMyClass&amp;)=<span class="hljs-keyword">delete</span>;<br></code></pre></td></tr></table></figure><h3 id="ç»“æ„ä½“vsç±»">3.4ç»“æ„ä½“vsç±»</h3><ul><li>ä»…å½“åªæœ‰æ•°æ®æˆå‘˜æ—¶ä½¿ç”¨struct,å…¶å®ƒä¸€æ¦‚ä½¿ç”¨class</li></ul><h3 id="ç»§æ‰¿">3.5ç»§æ‰¿</h3><ul><li><p>ä½¿ç”¨ç»„åˆ(YuleFoxæ³¨:è¿™ä¸€ç‚¹ä¹Ÿæ˜¯GoFåœ¨&lt;&gt;é‡Œåå¤å¼ºè°ƒçš„)å¸¸å¸¸æ¯”ä½¿ç”¨ç»§æ‰¿æ›´åˆç†.å¦‚æœä½¿ç”¨ç»§æ‰¿çš„è¯,å®šä¹‰ä¸ºpublicç»§æ‰¿</p></li><li><p>å½“å­ç±»ç»§æ‰¿åŸºç±»æ—¶,å­ç±»åŒ…å«äº†çˆ¶åŸºç±»æ‰€æœ‰æ•°æ®åŠæ“ä½œçš„å®šä¹‰.C++å®è·µä¸­,ç»§æ‰¿ä¸»è¦ç”¨äºä¸¤ç§åœºåˆ:å®ç°ç»§æ‰¿,å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å®ç°ä»£ç ;æ¥å£ç»§æ‰¿,å­ç±»ä»…ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•åç§°.</p></li><li><p>å¿…è¦çš„è¯,ææ„å‡½æ•°å£°æ˜ä¸ºvirtual.å¦‚æœä½ çš„ç±»æœ‰è™šå‡½æ•°,åˆ™ææ„å‡½æ•°ä¹Ÿåº”è¯¥ä¸ºè™šå‡½æ•°.</p></li><li><p>å¯¹äºå¯èƒ½è¢«å­ç±»è®¿é—®çš„æˆå‘˜å‡½æ•°,ä¸è¦è¿‡åº¦ä½¿ç”¨protectedå…³é”®å­—.æ³¨æ„,æ•°æ®æˆå‘˜éƒ½å¿…é¡»æ˜¯ç§æœ‰çš„</p></li><li><p>å¯¹äºé‡è½½çš„è™šå‡½æ•°æˆ–è™šææ„å‡½æ•°,ä½¿ç”¨override,æˆ–(è¾ƒä¸å¸¸ç”¨çš„)finalå…³é”®å­—æ˜¾å¼åœ°è¿›è¡Œæ ‡è®°</p></li></ul><h3 id="å¤šé‡ç»§æ‰¿">3.6å¤šé‡ç»§æ‰¿</h3><ul><li>çœŸæ­£éœ€è¦ç”¨åˆ°å¤šé‡å®ç°ç»§æ‰¿çš„æƒ…å†µå°‘ä¹‹åˆå°‘.åªåœ¨ä»¥ä¸‹æƒ…å†µæˆ‘ä»¬æ‰å…è®¸å¤šé‡ç»§æ‰¿:æœ€å¤šåªæœ‰ä¸€ä¸ªåŸºç±»æ˜¯éæŠ½è±¡ç±»;å…¶å®ƒåŸºç±»éƒ½æ˜¯ä»¥Interfaceä¸ºåç¼€çš„çº¯æ¥å£ç±».</li></ul><h3 id="æ¥å£">3.7æ¥å£</h3><ul><li>æ¥å£æ˜¯æŒ‡æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ç±»,è¿™äº›ç±»ä»¥Interfaceä¸ºåç¼€(ä¸å¼ºåˆ¶)</li><li>å½“ä¸€ä¸ªç±»æ»¡è¶³ä»¥ä¸‹è¦æ±‚æ—¶,ç§°ä¹‹ä¸ºçº¯æ¥å£:<ul><li>åªæœ‰çº¯è™šå‡½æ•°(â€=0â€)å’Œé™æ€å‡½æ•°(é™¤äº†ä¸‹æ–‡æåˆ°çš„ææ„å‡½æ•°).</li><li>æ²¡æœ‰éé™æ€æ•°æ®æˆå‘˜.</li><li>æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°.å¦‚æœæœ‰,ä¹Ÿä¸èƒ½å¸¦æœ‰å‚æ•°,å¹¶ä¸”å¿…é¡»ä¸ºprotected</li><li>å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå­ç±»,ä¹Ÿåªèƒ½ä»æ»¡è¶³ä¸Šè¿°æ¡ä»¶å¹¶ä»¥Interfaceä¸ºåç¼€çš„ç±»ç»§æ‰¿.</li></ul></li><li>æ¥å£ç±»ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–,å› ä¸ºå®ƒå£°æ˜äº†çº¯è™šå‡½æ•°.ä¸ºç¡®ä¿æ¥å£ç±»çš„æ‰€æœ‰å®ç°å¯è¢«æ­£ç¡®é”€æ¯,å¿…é¡»ä¸ºä¹‹å£°æ˜è™šææ„å‡½æ•°</li><li>ä»¥Interfaceä¸ºåç¼€å¯ä»¥æé†’å…¶ä»–äººä¸è¦ä¸ºè¯¥æ¥å£ç±»å¢åŠ å‡½æ•°å®ç°æˆ–éé™æ€æ•°æ®æˆå‘˜.è¿™ä¸€ç‚¹å¯¹äºå¤šé‡ç»§æ‰¿å°¤å…¶é‡è¦.</li><li>åªæœ‰åœ¨æ»¡è¶³ä¸Šè¿°æ¡ä»¶æ—¶,ç±»æ‰ä»¥Interfaceç»“å°¾,ä½†åè¿‡æ¥,æ»¡è¶³ä¸Šè¿°éœ€è¦çš„ç±»æœªå¿…ä¸€å®šä»¥Interfaceç»“å°¾.</li></ul><h3 id="è¿ç®—ç¬¦é‡è½½">3.8è¿ç®—ç¬¦é‡è½½</h3><ul><li><p>é™¤å°‘æ•°ç‰¹å®šç¯å¢ƒå¤–,ä¸è¦é‡è½½è¿ç®—ç¬¦.ä¹Ÿä¸è¦åˆ›å»ºç”¨æˆ·å®šä¹‰å­—é¢é‡</p></li><li><p>C++å…è®¸ç”¨æˆ·é€šè¿‡ä½¿ç”¨operatorå…³é”®å­—å¯¹å†…å»ºè¿ç®—ç¬¦è¿›è¡Œé‡è½½å®šä¹‰,åªè¦å…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å‹.operatorå…³é”®å­—è¿˜å…è®¸ç”¨æˆ·ä½¿ç”¨operator""å®šä¹‰æ–°çš„å­—é¢è¿ç®—ç¬¦,å¹¶ä¸”å®šä¹‰ç±»å‹è½¬æ¢å‡½æ•°,ä¾‹å¦‚operatorbool().</p></li></ul><h3 id="å­˜å–æ§åˆ¶">3.9å­˜å–æ§åˆ¶</h3><ul><li>å°†æ‰€æœ‰æ•°æ®æˆå‘˜å£°æ˜ä¸ºprivate,é™¤éæ˜¯staticconstç±»å‹æˆå‘˜(éµå¾ªå¸¸é‡å‘½åè§„åˆ™).å‡ºäºæŠ€æœ¯ä¸Šçš„åŸå› ,åœ¨ä½¿ç”¨GoogleTestæ—¶æˆ‘ä»¬å…è®¸æµ‹è¯•å›ºä»¶ç±»ä¸­çš„æ•°æ®æˆå‘˜ä¸ºprotected</li></ul><h3 id="å£°æ˜é¡ºåº">3.10å£°æ˜é¡ºåº</h3><ul><li><p>å°†ç›¸ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€èµ·,å°†publicéƒ¨åˆ†æ”¾åœ¨æœ€å‰</p></li><li><p>ç±»å®šä¹‰ä¸€èˆ¬åº”ä»¥public:å¼€å§‹,åè·Ÿprotected:,æœ€åæ˜¯private:.çœç•¥ç©ºéƒ¨åˆ†</p></li><li><p>åœ¨å„ä¸ªéƒ¨åˆ†ä¸­,å»ºè®®å°†ç±»ä¼¼çš„å£°æ˜æ”¾åœ¨ä¸€èµ·,å¹¶ä¸”å»ºè®®ä»¥å¦‚ä¸‹çš„é¡ºåº:ç±»å‹(åŒ…æ‹¬typedef,usingå’ŒåµŒå¥—çš„ç»“æ„ä½“ä¸ç±»),å¸¸é‡,å·¥å‚å‡½æ•°,æ„é€ å‡½æ•°,èµ‹å€¼è¿ç®—ç¬¦,ææ„å‡½æ•°,å…¶å®ƒå‡½æ•°,æ•°æ®æˆå‘˜.</p></li></ul><h3 id="tips-2">tips</h3><ol type="1"><li>ä¸åœ¨æ„é€ å‡½æ•°ä¸­åšå¤ªå¤šé€»è¾‘ç›¸å…³çš„åˆå§‹åŒ–;</li><li>ç¼–è¯‘å™¨æä¾›çš„é»˜è®¤æ„é€ å‡½æ•°ä¸ä¼šå¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–,å¦‚æœå®šä¹‰äº†å…¶ä»–æ„é€ å‡½æ•°,ç¼–è¯‘å™¨ä¸å†æä¾›,éœ€è¦ç¼–ç è€…è‡ªè¡Œæä¾›é»˜è®¤æ„é€ å‡½æ•°;</li><li>ä¸ºé¿å…éšå¼è½¬æ¢,éœ€å°†å•å‚æ•°æ„é€ å‡½æ•°å£°æ˜ä¸ºexplicit;</li><li>ä¸ºé¿å…æ‹·è´æ„é€ å‡½æ•°,èµ‹å€¼æ“ä½œçš„æ»¥ç”¨å’Œç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ,å¯å°†å…¶å£°æ˜ä¸ºprivateä¸”æ— éœ€å®ç°;</li><li>ä»…åœ¨ä½œä¸ºæ•°æ®é›†åˆæ—¶ä½¿ç”¨struct;</li><li>ç»„åˆ&gt;å®ç°ç»§æ‰¿&gt;æ¥å£ç»§æ‰¿&gt;ç§æœ‰ç»§æ‰¿,å­ç±»é‡è½½çš„è™šå‡½æ•°ä¹Ÿè¦å£°æ˜virtualå…³é”®å­—,è™½ç„¶ç¼–è¯‘å™¨å…è®¸ä¸è¿™æ ·åš;</li><li>é¿å…ä½¿ç”¨å¤šé‡ç»§æ‰¿,ä½¿ç”¨æ—¶,é™¤ä¸€ä¸ªåŸºç±»å«æœ‰å®ç°å¤–,å…¶ä»–åŸºç±»å‡ä¸ºçº¯æ¥å£;</li><li>æ¥å£ç±»ç±»åä»¥Interfaceä¸ºåç¼€,é™¤æä¾›å¸¦å®ç°çš„è™šææ„å‡½æ•°,é™æ€æˆå‘˜å‡½æ•°å¤–,å…¶ä»–å‡ä¸ºçº¯è™šå‡½æ•°,ä¸å®šä¹‰éé™æ€æ•°æ®æˆå‘˜,ä¸æä¾›æ„é€ å‡½æ•°,æä¾›çš„è¯,å£°æ˜ä¸ºprotected;</li><li>ä¸ºé™ä½å¤æ‚æ€§,å°½é‡ä¸é‡è½½æ“ä½œç¬¦,æ¨¡æ¿,æ ‡å‡†ç±»ä¸­ä½¿ç”¨æ—¶æä¾›æ–‡æ¡£è¯´æ˜;</li><li>å­˜å–å‡½æ•°ä¸€èˆ¬å†…è”åœ¨å¤´æ–‡ä»¶ä¸­;</li><li>å£°æ˜æ¬¡åº:public-&gt;protected-&gt;private;</li><li>å‡½æ•°ä½“å°½é‡çŸ­å°,ç´§å‡‘,åŠŸèƒ½å•ä¸€;</li></ol><h2 id="å‡½æ•°">4.å‡½æ•°</h2><h3 id="è¾“å…¥å’Œè¾“å‡º">4.1è¾“å…¥å’Œè¾“å‡º</h3><p>æˆ‘ä»¬å€¾å‘äºæŒ‰å€¼è¿”å›ï¼Œå¦åˆ™æŒ‰å¼•ç”¨è¿”å›ã€‚é¿å…è¿”å›æŒ‡é’ˆï¼Œé™¤éå®ƒå¯ä»¥ä¸ºç©º</p><h3 id="ç¼–å†™ç®€çŸ­å‡½æ•°">4.2.ç¼–å†™ç®€çŸ­å‡½æ•°</h3><p>æˆ‘ä»¬å€¾å‘äºç¼–å†™ç®€çŸ­,å‡ç»ƒçš„å‡½æ•°</p><p>å¦‚æœå‡½æ•°è¶…è¿‡40è¡Œ,å¯ä»¥æ€ç´¢ä¸€ä¸‹èƒ½ä¸èƒ½åœ¨ä¸å½±å“ç¨‹åºç»“æ„çš„å‰æä¸‹å¯¹å…¶è¿›è¡Œåˆ†å‰².</p><h3 id="å¼•ç”¨å‚æ•°">4.3.å¼•ç”¨å‚æ•°</h3><p>æ‰€æœ‰æŒ‰å¼•ç”¨ä¼ é€’çš„å‚æ•°å¿…é¡»åŠ ä¸Šconst.</p><h3 id="å‡½æ•°é‡è½½">4.4.å‡½æ•°é‡è½½</h3><p>è‹¥è¦ä½¿ç”¨å‡½æ•°é‡è½½,åˆ™å¿…é¡»èƒ½è®©è¯»è€…ä¸€çœ‹è°ƒç”¨ç‚¹å°±èƒ¸æœ‰æˆç«¹,è€Œä¸ç”¨èŠ±å¿ƒæ€çŒœæµ‹è°ƒç”¨çš„é‡è½½å‡½æ•°åˆ°åº•æ˜¯å“ªä¸€ç§.è¿™ä¸€è§„åˆ™ä¹Ÿé€‚ç”¨äºæ„é€ å‡½æ•°</p><p>å¦‚æœé‡è½½å‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†æ”¯æŒä¸åŒæ•°é‡çš„åŒä¸€ç±»å‹å‚æ•°,åˆ™ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨std::vectorä»¥ä¾¿ä½¿ç”¨è€…å¯ä»¥ç”¨åˆ—è¡¨åˆå§‹åŒ–æŒ‡å®šå‚æ•°.</p><h3 id="ç¼ºçœå‚æ•°">4.5.ç¼ºçœå‚æ•°</h3><p>åªå…è®¸åœ¨éè™šå‡½æ•°ä¸­ä½¿ç”¨ç¼ºçœå‚æ•°,ä¸”å¿…é¡»ä¿è¯ç¼ºçœå‚æ•°çš„å€¼å§‹ç»ˆä¸€è‡´.ç¼ºçœå‚æ•°ä¸å‡½æ•°é‡è½½éµå¾ªåŒæ ·çš„è§„åˆ™.ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨å‡½æ•°é‡è½½,å°¤å…¶æ˜¯åœ¨ç¼ºçœå‡½æ•°å¸¦æ¥çš„å¯è¯»æ€§æå‡ä¸èƒ½å¼¥è¡¥ä¸‹æ–‡ä¸­æ‰€æåˆ°çš„ç¼ºç‚¹çš„æƒ…å†µä¸‹.</p><h3 id="å‡½æ•°è¿”å›ç±»å‹åç½®è¯­æ³•">4.6.å‡½æ•°è¿”å›ç±»å‹åç½®è¯­æ³•</h3><p>åªæœ‰åœ¨å¸¸è§„å†™æ³•(è¿”å›ç±»å‹å‰ç½®)ä¸ä¾¿äºä¹¦å†™æˆ–ä¸ä¾¿äºé˜…è¯»æ—¶ä½¿ç”¨è¿”å›ç±»å‹åç½®è¯­æ³•</p><p>C++11å¼•å…¥äº†è¿™ä¸€æ–°çš„å½¢å¼.ç°åœ¨å¯ä»¥åœ¨å‡½æ•°åå‰ä½¿ç”¨autoå…³é”®å­—,åœ¨å‚æ•°åˆ—è¡¨ä¹‹ååç½®è¿”å›ç±»å‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">autofoo</span>(intx)-&gt;<span class="hljs-type">int</span>;<br></code></pre></td></tr></table></figure><ul><li>åç½®è¿”å›ç±»å‹ä¸ºå‡½æ•°ä½œç”¨åŸŸ.å¯¹äºåƒintè¿™æ ·ç®€å•çš„ç±»å‹,ä¸¤ç§å†™æ³•æ²¡æœ‰åŒºåˆ«.ä½†å¯¹äºå¤æ‚çš„æƒ…å†µ,ä¾‹å¦‚ç±»åŸŸä¸­çš„ç±»å‹å£°æ˜æˆ–è€…ä»¥å‡½æ•°å‚æ•°çš„å½¢å¼ä¹¦å†™çš„ç±»å‹,å†™æ³•çš„ä¸åŒä¼šé€ æˆåŒºåˆ«</li><li>åç½®è¿”å›ç±»å‹æ˜¯æ˜¾å¼åœ°æŒ‡å®šLambdaè¡¨è¾¾å¼çš„è¿”å›å€¼çš„å”¯ä¸€æ–¹å¼.æŸäº›æƒ…å†µä¸‹,ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨å¯¼å‡ºLambdaè¡¨è¾¾å¼çš„è¿”å›ç±»å‹,ä½†å¹¶ä¸æ˜¯åœ¨æ‰€æœ‰çš„æƒ…å†µä¸‹éƒ½èƒ½å®ç°.å³ä½¿ç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªåŠ¨æ¨å¯¼,æ˜¾å¼åœ°æŒ‡å®šè¿”å›ç±»å‹ä¹Ÿèƒ½è®©è¯»è€…æ›´æ˜äº†</li><li>æœ‰æ—¶åœ¨å·²ç»å‡ºç°äº†çš„å‡½æ•°å‚æ•°åˆ—è¡¨ä¹‹åæŒ‡å®šè¿”å›ç±»å‹,èƒ½å¤Ÿè®©ä¹¦å†™æ›´ç®€å•,ä¹Ÿæ›´æ˜“è¯»,å°¤å…¶æ˜¯åœ¨è¿”å›ç±»å‹ä¾èµ–äºæ¨¡æ¿å‚æ•°æ—¶.</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">template</span>&lt;classT,classU&gt;<span class="hljs-built_in">autoadd</span>(Tt,Uu)-&gt;<span class="hljs-keyword">decltype</span>(t+u);<br></code></pre></td></tr></table></figure><h2 id="æ¥è‡ªgoogleçš„å¥‡æŠ€">5.æ¥è‡ªGoogleçš„å¥‡æŠ€</h2><h3 id="æ‰€æœ‰æƒä¸æ™ºèƒ½æŒ‡é’ˆ">5.1.æ‰€æœ‰æƒä¸æ™ºèƒ½æŒ‡é’ˆ</h3><p>åŠ¨æ€åˆ†é…å‡ºçš„å¯¹è±¡æœ€å¥½æœ‰å•ä¸€ä¸”å›ºå®šçš„æ‰€æœ‰ä¸»,å¹¶é€šè¿‡æ™ºèƒ½æŒ‡é’ˆä¼ é€’æ‰€æœ‰æƒ</p><p>æ‰€æœ‰æƒæ˜¯ä¸€ç§ç™»è®°ï¼ç®¡ç†åŠ¨æ€å†…å­˜å’Œå…¶å®ƒèµ„æºçš„æŠ€æœ¯.åŠ¨æ€åˆ†é…å¯¹è±¡çš„æ‰€æœ‰ä¸»æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°,åè€…è´Ÿè´£ç¡®ä¿å½“å‰è€…æ— ç”¨æ—¶å°±è‡ªåŠ¨é”€æ¯å‰è€….æ‰€æœ‰æƒæœ‰æ—¶å¯ä»¥å…±äº«,æ­¤æ—¶å°±ç”±æœ€åä¸€ä¸ªæ‰€æœ‰ä¸»æ¥è´Ÿè´£é”€æ¯å®ƒ.ç”šè‡³ä¹Ÿå¯ä»¥ä¸ç”¨å…±äº«,åœ¨ä»£ç ä¸­ç›´æ¥æŠŠæ‰€æœ‰æƒä¼ é€’ç»™å…¶å®ƒå¯¹è±¡</p><p>æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ä¸ªé€šè¿‡é‡è½½*å’Œ-&gt;è¿ç®—ç¬¦ä»¥è¡¨ç°å¾—å¦‚æŒ‡é’ˆä¸€æ ·çš„ç±»</p><p>æ™ºèƒ½æŒ‡é’ˆç±»å‹è¢«ç”¨æ¥è‡ªåŠ¨åŒ–æ‰€æœ‰æƒçš„ç™»è®°å·¥ä½œ,æ¥ç¡®ä¿æ‰§è¡Œé”€æ¯ä¹‰åŠ¡åˆ°ä½.</p><p>std::unique_ptræ˜¯C++11æ–°æ¨å‡ºçš„ä¸€ç§æ™ºèƒ½æŒ‡é’ˆç±»å‹,ç”¨æ¥è¡¨ç¤ºåŠ¨æ€åˆ†é…å‡ºçš„å¯¹è±¡çš„ç‹¬ä¸€æ— äºŒçš„æ‰€æœ‰æƒ;å½“std::unique_ptrç¦»å¼€ä½œç”¨åŸŸæ—¶,å¯¹è±¡å°±ä¼šè¢«é”€æ¯.std::unique_pträ¸èƒ½è¢«å¤åˆ¶,ä½†å¯ä»¥æŠŠå®ƒç§»åŠ¨ï¼ˆmoveï¼‰ç»™æ–°æ‰€æœ‰ä¸».std::shared_ptråŒæ ·è¡¨ç¤ºåŠ¨æ€åˆ†é…å¯¹è±¡çš„æ‰€æœ‰æƒ,ä½†å¯ä»¥è¢«å…±äº«,ä¹Ÿå¯ä»¥è¢«å¤åˆ¶;å¯¹è±¡çš„æ‰€æœ‰æƒç”±æ‰€æœ‰å¤åˆ¶è€…å…±åŒæ‹¥æœ‰,æœ€åä¸€ä¸ªå¤åˆ¶è€…è¢«é”€æ¯æ—¶,å¯¹è±¡ä¹Ÿä¼šéšç€è¢«é”€æ¯</p><p>å¦‚æœå¿…é¡»ä½¿ç”¨åŠ¨æ€åˆ†é…,é‚£ä¹ˆæ›´å€¾å‘äºå°†æ‰€æœ‰æƒä¿æŒåœ¨åˆ†é…è€…æ‰‹ä¸­.å¦‚æœå…¶ä»–åœ°æ–¹è¦ä½¿ç”¨è¿™ä¸ªå¯¹è±¡,æœ€å¥½ä¼ é€’å®ƒçš„æ‹·è´,æˆ–è€…ä¼ é€’ä¸€ä¸ªä¸ç”¨æ”¹å˜æ‰€æœ‰æƒçš„æŒ‡é’ˆæˆ–å¼•ç”¨.å€¾å‘äºä½¿ç”¨std::unique_ptræ¥æ˜ç¡®æ‰€æœ‰æƒä¼ é€’</p><h3 id="cpplint">5.2.Cpplint</h3><p>ä½¿ç”¨cpplint.pyæ£€æŸ¥é£æ ¼é”™è¯¯</p><p>cpplint.pyæ˜¯ä¸€ä¸ªç”¨æ¥åˆ†ææºæ–‡ä»¶,èƒ½æ£€æŸ¥å‡ºå¤šç§é£æ ¼é”™è¯¯çš„å·¥å…·.å®ƒä¸å¹¶å®Œç¾,ç”šè‡³è¿˜ä¼šæ¼æŠ¥å’Œè¯¯æŠ¥,ä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·.åœ¨è¡Œå°¾åŠ //NOLINT,æˆ–åœ¨ä¸Šä¸€è¡ŒåŠ //NOLINTNEXTLINE,å¯ä»¥å¿½ç•¥æŠ¥é”™.æŸäº›é¡¹ç›®ä¼šæŒ‡å¯¼ä½ å¦‚ä½•ä½¿ç”¨ä»–ä»¬çš„é¡¹ç›®å·¥å…·è¿è¡Œcpplint.py.å¦‚æœä½ å‚ä¸çš„é¡¹ç›®æ²¡æœ‰æä¾›,ä½ å¯ä»¥å•ç‹¬ä¸‹è½½cpplint.py.</p><h3 id="tips-3">tipsï¼š</h3><ol type="1"><li>æŠŠæ™ºèƒ½æŒ‡é’ˆå½“æˆå¯¹è±¡æ¥çœ‹å¾…çš„è¯,å°±å¾ˆå¥½é¢†ä¼šå®ƒä¸æ‰€æŒ‡å¯¹è±¡ä¹‹é—´çš„å…³ç³»äº†.</li><li>åŸæ¥Rustçš„Ownershipæ€æƒ³æ˜¯å—åˆ°äº†C++æ™ºèƒ½æŒ‡é’ˆçš„å¾ˆå¤§å¯å‘å•Š.</li><li>scoped_ptrå’Œauto_ptrå·²è¿‡æ—¶.ç°åœ¨æ˜¯shared_ptrå’Œuniqued_ptrçš„å¤©ä¸‹äº†.</li><li>æŒ‰æœ¬æ–‡æ¥è¯´,ä¼¼ä¹é™¤äº†æ™ºèƒ½æŒ‡é’ˆ,è¿˜æœ‰å…¶å®ƒæ‰€æœ‰æƒæœºåˆ¶,å€¼å¾—ç•™æ„.</li><li>ArchLinuxç”¨æˆ·æ³¨æ„äº†,AURæœ‰å¯¹cpplintæ‰“åŒ…</li></ol><h2 id="å…¶ä»–cç‰¹æ€§">6.å…¶ä»–c++ç‰¹æ€§</h2><h3 id="å¼•ç”¨å‚æ•°-1">6.1.å¼•ç”¨å‚æ•°</h3><p>æ‰€æœ‰æŒ‰å¼•ç”¨ä¼ é€’çš„å‚æ•°å¿…é¡»åŠ ä¸Šconst.</p><h3 id="å³å€¼å¼•ç”¨">6.2.å³å€¼å¼•ç”¨</h3><p>åªåœ¨å®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°ä¸ç§»åŠ¨èµ‹å€¼æ“ä½œæ—¶ä½¿ç”¨å³å€¼å¼•ç”¨.ä¸è¦ä½¿ç”¨std::forward</p><p>å³å€¼å¼•ç”¨æ˜¯ä¸€ç§åªèƒ½ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡çš„å¼•ç”¨çš„ä¸€ç§,å…¶è¯­æ³•ä¸ä¼ ç»Ÿçš„å¼•ç”¨è¯­æ³•ç›¸ä¼¼.ä¾‹å¦‚,voidf(string&amp;&amp;s);å£°æ˜äº†ä¸€ä¸ªå…¶å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„å³å€¼å¼•ç”¨çš„å‡½æ•°.</p><p>ç”¨äºå®šä¹‰ç§»åŠ¨æ„é€ å‡½æ•°(ä½¿ç”¨ç±»çš„å³å€¼å¼•ç”¨è¿›è¡Œæ„é€ çš„å‡½æ•°)ä½¿å¾—ç§»åŠ¨ä¸€ä¸ªå€¼è€Œéæ‹·è´ä¹‹æˆä¸ºå¯èƒ½.</p><p>ä¾‹å¦‚,å¦‚æœv1æ˜¯ä¸€ä¸ªvector,åˆ™autov2(std::move(v1))å°†å¾ˆå¯èƒ½ä¸å†è¿›è¡Œå¤§é‡çš„æ•°æ®å¤åˆ¶è€Œåªæ˜¯ç®€å•åœ°è¿›è¡ŒæŒ‡é’ˆæ“ä½œ,åœ¨æŸäº›æƒ…å†µä¸‹è¿™å°†å¸¦æ¥å¤§å¹…åº¦çš„æ€§èƒ½æå‡.</p><p>å³å€¼å¼•ç”¨ä½¿å¾—ç¼–å†™é€šç”¨çš„å‡½æ•°å°è£…æ¥è½¬å‘å…¶å‚æ•°åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•°æˆä¸ºå¯èƒ½,æ— è®ºå…¶å‚æ•°æ˜¯å¦æ˜¯ä¸´æ—¶å¯¹è±¡éƒ½èƒ½æ­£å¸¸å·¥ä½œ.</p><p>å³å€¼å¼•ç”¨èƒ½å®ç°å¯ç§»åŠ¨ä½†ä¸å¯æ‹·è´çš„ç±»å‹,è¿™ä¸€ç‰¹æ€§å¯¹é‚£äº›åœ¨æ‹·è´æ–¹é¢æ²¡æœ‰å®é™…éœ€æ±‚,ä½†æœ‰æ—¶åˆéœ€è¦å°†å®ƒä»¬ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’æˆ–å¡å…¥å®¹å™¨çš„ç±»å‹å¾ˆæœ‰ç”¨.è¦é«˜æ•ˆç‡åœ°ä½¿ç”¨æŸäº›æ ‡å‡†åº“ç±»å‹,ä¾‹å¦‚std::unique_ptr,std::moveæ˜¯å¿…éœ€çš„</p><h3 id="å‡½æ•°é‡è½½-1">6.3.å‡½æ•°é‡è½½</h3><p>è‹¥è¦ç”¨å¥½å‡½æ•°é‡è½½ï¼Œæœ€å¥½èƒ½è®©è¯»è€…ä¸€çœ‹è°ƒç”¨ç‚¹ï¼ˆcallsiteï¼‰å°±èƒ¸æœ‰æˆç«¹ï¼Œä¸ç”¨èŠ±å¿ƒæ€çŒœæµ‹è°ƒç”¨çš„é‡è½½å‡½æ•°åˆ°åº•æ˜¯å“ªä¸€ç§ã€‚è¯¥è§„åˆ™é€‚ç”¨äºæ„é€ å‡½æ•°ã€‚</p><h3 id="ç¼ºçœå‚æ•°-1">6.4.ç¼ºçœå‚æ•°</h3><p>æˆ‘ä»¬ä¸å…è®¸ä½¿ç”¨ç¼ºçœå‡½æ•°å‚æ•°ï¼Œå°‘æ•°æç«¯æƒ…å†µé™¤å¤–ã€‚å°½å¯èƒ½æ”¹ç”¨å‡½æ•°é‡è½½ã€‚</p><h3 id="å˜é•¿æ•°ç»„å’Œalloca">6.5.å˜é•¿æ•°ç»„å’Œalloca()</h3><ul><li>æˆ‘ä»¬ä¸å…è®¸ä½¿ç”¨å˜é•¿æ•°ç»„å’Œalloca().</li><li>å˜é•¿æ•°ç»„å…·æœ‰æµ‘ç„¶å¤©æˆçš„è¯­æ³•.å˜é•¿æ•°ç»„å’Œalloca()ä¹Ÿéƒ½å¾ˆé«˜æ•ˆ.</li><li>å˜é•¿æ•°ç»„å’Œalloca()ä¸æ˜¯æ ‡å‡†C++çš„ç»„æˆéƒ¨åˆ†.æ›´é‡è¦çš„æ˜¯,å®ƒä»¬æ ¹æ®æ•°æ®å¤§å°åŠ¨æ€åˆ†é…å †æ ˆå†…å­˜,ä¼šå¼•èµ·éš¾ä»¥å‘ç°çš„å†…å­˜è¶Šç•Œbugs:â€œåœ¨æˆ‘çš„æœºå™¨ä¸Šè¿è¡Œçš„å¥½å¥½çš„,å‘å¸ƒåå´è«åå…¶å¦™çš„æŒ‚æ‰äº†â€</li><li>æ”¹ç”¨æ›´å®‰å…¨çš„åˆ†é…å™¨ï¼ˆallocatorï¼‰ï¼Œå°±åƒstd::vectoræˆ–std::unique_ptr</li></ul><h3 id="å‹å…ƒ">6.6.å‹å…ƒ</h3><p>æˆ‘ä»¬å…è®¸åˆç†çš„ä½¿ç”¨å‹å…ƒç±»åŠå‹å…ƒå‡½æ•°</p><h3 id="å¼‚å¸¸">6.7.å¼‚å¸¸</h3><p>æˆ‘ä»¬ä¸ä½¿ç”¨C++å¼‚å¸¸</p><h3 id="è¿è¡Œæ—¶ç±»å‹è¯†åˆ«">6.8.è¿è¡Œæ—¶ç±»å‹è¯†åˆ«</h3><p>æˆ‘ä»¬ç¦æ­¢ä½¿ç”¨RTTI.</p><ul><li>RTTIå…è®¸ç¨‹åºå‘˜åœ¨è¿è¡Œæ—¶è¯†åˆ«C++ç±»å¯¹è±¡çš„ç±»å‹.å®ƒé€šè¿‡ä½¿ç”¨typeidæˆ–è€…dynamic_castå®Œæˆ.</li></ul><h3 id="ç±»å‹è½¬æ¢">6.9.ç±»å‹è½¬æ¢</h3><ul><li><p>ä½¿ç”¨C++çš„ç±»å‹è½¬æ¢,å¦‚static_cast&lt;&gt;().ä¸è¦ä½¿ç”¨inty=(int)xæˆ–inty=int(x)ç­‰è½¬æ¢æ–¹å¼</p></li><li><p>ç”¨static_castæ›¿ä»£Cé£æ ¼çš„å€¼è½¬æ¢,æˆ–æŸä¸ªç±»æŒ‡é’ˆéœ€è¦æ˜ç¡®çš„å‘ä¸Šè½¬æ¢ä¸ºçˆ¶ç±»æŒ‡é’ˆæ—¶.</p></li><li><p>ç”¨const_castå»æ‰consté™å®šç¬¦.</p></li><li><p>ç”¨reinterpret_castæŒ‡é’ˆç±»å‹å’Œæ•´å‹æˆ–å…¶å®ƒæŒ‡é’ˆä¹‹é—´è¿›è¡Œä¸å®‰å…¨çš„ç›¸äº’è½¬æ¢.ä»…åœ¨ä½ å¯¹æ‰€åšä¸€åˆ‡äº†ç„¶äºå¿ƒæ—¶ä½¿ç”¨.</p></li><li><p>è‡³äºdynamic_castå‚è§6.8.è¿è¡Œæ—¶ç±»å‹è¯†åˆ«.</p></li></ul><h3 id="æµ">6.10.æµ</h3><ul><li><p>æµç”¨æ¥æ›¿ä»£printf()å’Œscanf().</p></li><li><p>ä¼˜ç‚¹:æœ‰äº†æµ,åœ¨æ‰“å°æ—¶ä¸éœ€è¦å…³å¿ƒå¯¹è±¡çš„ç±»å‹.ä¸ç”¨æ‹…å¿ƒæ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸å‚æ•°åˆ—è¡¨ä¸åŒ¹é…(è™½ç„¶åœ¨gccä¸­ä½¿ç”¨printfä¹Ÿä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜).æµçš„æ„é€ å’Œææ„å‡½æ•°ä¼šè‡ªåŠ¨æ‰“å¼€å’Œå…³é—­å¯¹åº”çš„æ–‡ä»¶.</p></li><li><p>ç¼ºç‚¹:æµä½¿å¾—pread()ç­‰åŠŸèƒ½å‡½æ•°å¾ˆéš¾æ‰§è¡Œ.å¦‚æœä¸ä½¿ç”¨printfé£æ ¼çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²,æŸäº›æ ¼å¼åŒ–æ“ä½œ(å°¤å…¶æ˜¯å¸¸ç”¨çš„æ ¼å¼å­—ç¬¦ä¸²%.*s)ç”¨æµå¤„ç†æ€§èƒ½æ˜¯å¾ˆä½çš„.æµä¸æ”¯æŒå­—ç¬¦ä¸²æ“ä½œç¬¦é‡æ–°æ’åº(%1s),è€Œè¿™ä¸€ç‚¹å¯¹äºè½¯ä»¶å›½é™…åŒ–å¾ˆæœ‰ç”¨.</p></li><li><p>ç»“è®º:ä¸è¦ä½¿ç”¨æµ,é™¤éæ˜¯æ—¥å¿—æ¥å£éœ€è¦.ä½¿ç”¨printfä¹‹ç±»çš„ä»£æ›¿.ä½¿ç”¨æµè¿˜æœ‰å¾ˆå¤šåˆ©å¼Š,ä½†ä»£ç ä¸€è‡´æ€§èƒœè¿‡ä¸€åˆ‡.ä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨æµ.</p></li></ul><h3 id="å‰ç½®è‡ªå¢å’Œè‡ªå‡">6.11.å‰ç½®è‡ªå¢å’Œè‡ªå‡</h3><p>å¯¹äºè¿­ä»£å™¨å’Œå…¶ä»–æ¨¡æ¿å¯¹è±¡ä½¿ç”¨å‰ç¼€å½¢å¼(++i)çš„è‡ªå¢,è‡ªå‡è¿ç®—ç¬¦.</p><p>ä¸è€ƒè™‘è¿”å›å€¼çš„è¯,å‰ç½®è‡ªå¢(++i)é€šå¸¸è¦æ¯”åç½®è‡ªå¢(i++)æ•ˆç‡æ›´é«˜</p><h3 id="constç”¨æ³•">6.12.constç”¨æ³•</h3><p>æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ åœ¨ä»»ä½•å¯èƒ½çš„æƒ…å†µä¸‹éƒ½è¦ä½¿ç”¨const.æ­¤å¤–æœ‰æ—¶æ”¹ç”¨C++11æ¨å‡ºçš„constexpræ›´å¥½ã€‚</p><p>å…³é”®å­—mutableå¯ä»¥ä½¿ç”¨,ä½†æ˜¯åœ¨å¤šçº¿ç¨‹ä¸­æ˜¯ä¸å®‰å…¨çš„,ä½¿ç”¨æ—¶é¦–å…ˆè¦è€ƒè™‘çº¿ç¨‹å®‰å…¨.</p><h3 id="constexprç”¨æ³•">6.13.constexprç”¨æ³•</h3><ul><li><p>åœ¨C++11é‡Œï¼Œç”¨constexpræ¥å®šä¹‰çœŸæ­£çš„å¸¸é‡ï¼Œæˆ–å®ç°å¸¸é‡åˆå§‹åŒ–ã€‚</p></li><li><p>å˜é‡å¯ä»¥è¢«å£°æ˜æˆconstexprä»¥è¡¨ç¤ºå®ƒæ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡ï¼Œå³åœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶éƒ½ä¸å˜ã€‚å‡½æ•°æˆ–æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«å£°æ˜æˆconstexpr,ä»¥ç”¨æ¥å®šä¹‰constexprå˜é‡ã€‚</p></li><li><p>å¦‚ä»Šconstexprå°±å¯ä»¥å®šä¹‰æµ®ç‚¹å¼çš„çœŸÂ·å¸¸é‡ï¼Œä¸ç”¨å†ä¾èµ–å­—é¢å€¼äº†ï¼›ä¹Ÿå¯ä»¥å®šä¹‰ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ä¸Šçš„å¸¸é‡ï¼›ç”šè‡³ä¹Ÿå¯ä»¥å®šä¹‰å‡½æ•°è°ƒç”¨æ‰€è¿”å›çš„å¸¸é‡ã€‚</p></li></ul><h3 id="æ•´å‹">6.14.æ•´å‹</h3><ul><li><p>C++å†…å»ºæ•´å‹ä¸­,ä»…ä½¿ç”¨int.å¦‚æœç¨‹åºä¸­éœ€è¦ä¸åŒå¤§å°çš„å˜é‡,å¯ä»¥ä½¿ç”¨ä¸­é•¿åº¦ç²¾ç¡®çš„æ•´å‹,å¦‚int16_t.</p></li><li><p>ä½¿ç”¨æ–­è¨€æ¥æŒ‡å‡ºå˜é‡ä¸ºéè´Ÿæ•°,è€Œä¸æ˜¯ä½¿ç”¨æ— ç¬¦å·å‹!</p></li></ul><h3 id="ä½ä¸‹çš„å¯ç§»æ¤æ€§">6.15.64ä½ä¸‹çš„å¯ç§»æ¤æ€§</h3><ul><li><p>ä»£ç åº”è¯¥å¯¹64ä½å’Œ32ä½ç³»ç»Ÿå‹å¥½.å¤„ç†æ‰“å°,æ¯”è¾ƒ,ç»“æ„ä½“å¯¹é½æ—¶åº”åˆ‡è®°</p></li><li><p>ä½ è¦éå¸¸å°å¿ƒçš„å¯¹å¾…ç»“æ„ä½“å¯¹é½,å°¤å…¶æ˜¯è¦æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šçš„ç»“æ„ä½“(Yang.Yæ³¨:æŒä¹…åŒ–-å°†æ•°æ®æŒ‰å­—èŠ‚æµé¡ºåºä¿å­˜åœ¨ç£ç›˜æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­).åœ¨64ä½ç³»ç»Ÿä¸­,ä»»ä½•å«æœ‰int64_t/uint64_tæˆå‘˜çš„ç±»/ç»“æ„ä½“,ç¼ºçœéƒ½ä»¥8å­—èŠ‚åœ¨ç»“å°¾å¯¹é½.å¦‚æœ32ä½å’Œ64ä½ä»£ç è¦å…±ç”¨æŒä¹…åŒ–çš„ç»“æ„ä½“,éœ€è¦ç¡®ä¿ä¸¤ç§ä½“ç³»ç»“æ„ä¸‹çš„ç»“æ„ä½“å¯¹é½ä¸€è‡´.å¤§å¤šæ•°ç¼–è¯‘å™¨éƒ½å…è®¸è°ƒæ•´ç»“æ„ä½“å¯¹é½</p></li></ul><h3 id="é¢„å¤„ç†å®">6.16.é¢„å¤„ç†å®</h3><ul><li>ä½¿ç”¨å®æ—¶è¦éå¸¸è°¨æ…,å°½é‡ä»¥å†…è”å‡½æ•°,æšä¸¾å’Œå¸¸é‡ä»£æ›¿ä¹‹</li><li>å¦‚æœä½ è¦å®,å°½å¯èƒ½éµå®ˆ:<ul><li>ä¸è¦åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰å®.</li><li>åœ¨é©¬ä¸Šè¦ä½¿ç”¨æ—¶æ‰è¿›è¡Œ#define,ä½¿ç”¨åè¦ç«‹å³#undef.</li><li>ä¸è¦åªæ˜¯å¯¹å·²ç»å­˜åœ¨çš„å®ä½¿ç”¨#undefï¼Œé€‰æ‹©ä¸€ä¸ªä¸ä¼šå†²çªçš„åç§°ï¼›</li><li>ä¸è¦è¯•å›¾ä½¿ç”¨å±•å¼€åä¼šå¯¼è‡´C++æ„é€ ä¸ç¨³å®šçš„å®,ä¸ç„¶ä¹Ÿè‡³å°‘è¦é™„ä¸Šæ–‡æ¡£è¯´æ˜å…¶è¡Œä¸º.</li><li>ä¸è¦ç”¨##å¤„ç†å‡½æ•°ï¼Œç±»å’Œå˜é‡çš„åå­—ã€‚</li></ul></li></ul><h3 id="nullptrå’Œnull">6.17.0,nullptrå’ŒNULL</h3><p>æ•´æ•°ç”¨0,å®æ•°ç”¨0.0,æŒ‡é’ˆç”¨nullptræˆ–NULL,å­—ç¬¦(ä¸²)ç”¨'\0'.æ•´æ•°ç”¨0,å®æ•°ç”¨0.0,è¿™ä¸€ç‚¹æ˜¯æ¯«æ— äº‰è®®çš„.å¯¹äºæŒ‡é’ˆ(åœ°å€å€¼),åˆ°åº•æ˜¯ç”¨0,NULLè¿˜æ˜¯nullptr.C++11é¡¹ç›®ç”¨nullptr;C++03é¡¹ç›®åˆ™ç”¨NULL,æ¯•ç«Ÿå®ƒçœ‹èµ·æ¥åƒæŒ‡é’ˆã€‚å®é™…ä¸Šï¼Œä¸€äº›C++ç¼–è¯‘å™¨å¯¹NULLçš„å®šä¹‰æ¯”è¾ƒç‰¹æ®Šï¼Œå¯ä»¥è¾“å‡ºæœ‰ç”¨çš„è­¦å‘Šï¼Œç‰¹åˆ«æ˜¯sizeof(NULL)å°±å’Œsizeof(0)ä¸ä¸€æ ·ã€‚å­—ç¬¦(ä¸²)ç”¨'\0',ä¸ä»…ç±»å‹æ­£ç¡®è€Œä¸”å¯è¯»æ€§å¥½ã€‚</p><h3 id="sizeof">6.18.sizeof</h3><p>Tip:å°½å¯èƒ½ç”¨sizeof(varname)ä»£æ›¿sizeof(type).</p><p>ä½¿ç”¨sizeof(varname)æ˜¯å› ä¸ºå½“ä»£ç ä¸­å˜é‡ç±»å‹æ”¹å˜æ—¶ä¼šè‡ªåŠ¨æ›´æ–°.æ‚¨æˆ–è®¸ä¼šç”¨sizeof(type)å¤„ç†ä¸æ¶‰åŠä»»ä½•å˜é‡çš„ä»£ç ï¼Œæ¯”å¦‚å¤„ç†æ¥è‡ªå¤–éƒ¨æˆ–å†…éƒ¨çš„æ•°æ®æ ¼å¼ï¼Œè¿™æ—¶ç”¨å˜é‡å°±ä¸åˆé€‚äº†</p><h3 id="auto">6.19.auto</h3><ul><li><p>ç”¨autoç»•è¿‡çƒ¦ççš„ç±»å‹åï¼Œåªè¦å¯è¯»æ€§å¥½å°±ç»§ç»­ç”¨ï¼Œåˆ«ç”¨åœ¨å±€éƒ¨å˜é‡ä¹‹å¤–çš„åœ°æ–¹ã€‚</p></li><li><p>å®ƒæ¶‰åŠåˆ°C++é²œä¸ºäººçŸ¥çš„å‘ï¼šWhyisvectornotaSTLcontainer?ï¼‰ä¹Ÿæœ‰å¤§åŒå°å¼‚çš„é™·é˜±</p></li><li><p>autoåªèƒ½ç”¨åœ¨å±€éƒ¨å˜é‡é‡Œç”¨ã€‚åˆ«ç”¨åœ¨æ–‡ä»¶ä½œç”¨åŸŸå˜é‡ï¼Œå‘½åç©ºé—´ä½œç”¨åŸŸå˜é‡å’Œç±»æ•°æ®æˆå‘˜é‡Œã€‚æ°¸è¿œåˆ«åˆ—è¡¨åˆå§‹åŒ–autoå˜é‡ã€‚</p></li></ul><h3 id="åˆ—è¡¨åˆå§‹åŒ–">6.20.åˆ—è¡¨åˆå§‹åŒ–</h3><ul><li><p>ä½ å¯ä»¥ç”¨åˆ—è¡¨åˆå§‹åŒ–ã€‚æ—©åœ¨C++03é‡Œï¼Œèšåˆç±»å‹ï¼ˆaggregatetypesï¼‰å°±å·²ç»å¯ä»¥è¢«åˆ—è¡¨åˆå§‹åŒ–äº†ï¼Œæ¯”å¦‚æ•°ç»„å’Œä¸è‡ªå¸¦æ„é€ å‡½æ•°çš„ç»“æ„ä½“ï¼š</p></li><li><p>C++11ä¸­ï¼Œè¯¥ç‰¹æ€§å¾—åˆ°è¿›ä¸€æ­¥çš„æ¨å¹¿ï¼Œä»»ä½•å¯¹è±¡ç±»å‹éƒ½å¯ä»¥è¢«åˆ—è¡¨åˆå§‹åŒ–</p></li><li><p>åƒä¸‡åˆ«ç›´æ¥åˆ—è¡¨åˆå§‹åŒ–autoå˜é‡</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++">autod=&#123;<span class="hljs-number">1.23</span>&#125;;<span class="hljs-comment">//då³æ˜¯std::initializer_list&lt;double&gt;</span><br>autod=<span class="hljs-type">double</span>&#123;<span class="hljs-number">1.23</span>&#125;;<span class="hljs-comment">//å–„å“‰--då³ä¸ºdouble,å¹¶éstd::initializer_list.</span><br></code></pre></td></tr></table></figure><h3 id="lambdaè¡¨è¾¾å¼">6.21.Lambdaè¡¨è¾¾å¼</h3><ul><li>é€‚å½“ä½¿ç”¨lambdaè¡¨è¾¾å¼ã€‚åˆ«ç”¨é»˜è®¤lambdaæ•è·ï¼Œæ‰€æœ‰æ•è·éƒ½è¦æ˜¾å¼å†™å‡ºæ¥ã€‚</li><li>Lambdaè¡¨è¾¾å¼æ˜¯åˆ›å»ºåŒ¿åå‡½æ•°å¯¹è±¡çš„ä¸€ç§ç®€æ˜“é€”å¾„ï¼Œå¸¸ç”¨äºæŠŠå‡½æ•°å½“å‚æ•°ä¼ ï¼Œä¾‹å¦‚ï¼š</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">std::<span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),[](intx,inty)&#123;<br><span class="hljs-built_in">returnWeight</span>(x)&lt;<span class="hljs-built_in">Weight</span>(y);<br>&#125;);<br><br></code></pre></td></tr></table></figure><h3 id="æ¨¡æ¿ç¼–ç¨‹">6.22.æ¨¡æ¿ç¼–ç¨‹</h3><ul><li>ä¸è¦ä½¿ç”¨å¤æ‚çš„æ¨¡æ¿ç¼–ç¨‹</li><li>æ¨¡æ¿ç¼–ç¨‹æŒ‡çš„æ˜¯åˆ©ç”¨c++æ¨¡æ¿å®ä¾‹åŒ–æœºåˆ¶æ˜¯å›¾çµå®Œå¤‡æ€§,å¯ä»¥è¢«ç”¨æ¥å®ç°ç¼–è¯‘æ—¶åˆ»çš„ç±»å‹åˆ¤æ–­çš„ä¸€ç³»åˆ—ç¼–ç¨‹æŠ€å·§</li></ul><h3 id="booståº“">6.23.Booståº“</h3><ul><li>åªä½¿ç”¨Boostä¸­è¢«è®¤å¯çš„åº“.</li><li>Boostä»£ç è´¨é‡æ™®éè¾ƒé«˜,å¯ç§»æ¤æ€§å¥½,å¡«è¡¥äº†C++æ ‡å‡†åº“å¾ˆå¤šç©ºç™½,å¦‚å‹åˆ«çš„ç‰¹æ€§,æ›´å®Œå–„çš„ç»‘å®šå™¨,æ›´å¥½çš„æ™ºèƒ½æŒ‡é’ˆ</li></ul><h3 id="c11">6.24.C++11</h3><ul><li>é€‚å½“ç”¨C++11ï¼ˆå‰èº«æ˜¯C++0xï¼‰çš„åº“å’Œè¯­è¨€æ‰©å±•ï¼Œåœ¨è´µé¡¹ç›®ç”¨C++11ç‰¹æ€§å‰ä¸‰æ€å¯ç§»æ¤æ€§ã€‚</li></ul><h3 id="tips-4">tips</h3><ol type="1"><li>å®é™…ä¸Šï¼Œç¼ºçœå‚æ•°ä¼šæ”¹å˜å‡½æ•°ç­¾åçš„å‰ææ˜¯æ”¹å˜äº†å®ƒæ¥æ”¶çš„å‚æ•°æ•°é‡ï¼Œæ¯”å¦‚æŠŠvoida()æ”¹æˆvoida(intb=0),å¼€å‘è€…æ”¹å˜å…¶ä»£ç çš„åˆè¡·ä¹Ÿè®¸æ˜¯ï¼Œåœ¨ä¸æ”¹å˜ã€Œä»£ç å…¼å®¹æ€§ã€çš„åŒæ—¶ï¼Œåˆæä¾›äº†å¯é€‰intå‚æ•°çš„ä½™åœ°ï¼Œç„¶è€Œè¿™ç»ˆç©¶ä¼šç ´åå‡½æ•°æŒ‡é’ˆä¸Šçš„å…¼å®¹æ€§ï¼Œæ¯•ç«Ÿå‡½æ•°ç­¾åç¡®å®å˜äº†ã€‚</li><li>æ­¤å¤–æŠŠè‡ªå¸¦ç¼ºçœå‚æ•°çš„å‡½æ•°åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆæ—¶ï¼Œä¼šä¸¢å¤±ç¼ºçœå‚æ•°ä¿¡æ¯ã€‚</li><li>æˆ‘è¿˜å‘ç°æ»¥ç”¨ç¼ºçœå‚æ•°ä¼šå®³å¾—è¯»è€…å…‰åªçœ‹è°ƒç”¨ä»£ç çš„è¯ï¼Œä¼šè¯¯ä»¥ä¸ºå…¶å‡½æ•°æ¥å—çš„å‚æ•°æ•°é‡æ¯”å®é™…ä¸Šè¿˜è¦å°‘ã€‚</li><li>friendå®é™…ä¸Šåªå¯¹å‡½æ•°ï¼ç±»èµ‹äºˆäº†å¯¹å…¶æ‰€åœ¨ç±»çš„è®¿é—®æƒé™ï¼Œå¹¶ä¸æ˜¯æœ‰æ•ˆçš„å£°æ˜è¯­å¥ã€‚æ‰€ä»¥é™¤äº†åœ¨å¤´æ–‡ä»¶ç±»å†…éƒ¨å†™friendå‡½æ•°ï¼ç±»ï¼Œè¿˜è¦åœ¨ç±»ä½œç”¨åŸŸä¹‹å¤–æ­£å¼åœ°å£°æ˜ä¸€éï¼Œæœ€ååœ¨å¯¹åº”çš„.ccæ–‡ä»¶åŠ ä»¥å®šä¹‰ã€‚</li><li>æœ¬é£æ ¼æŒ‡å—éƒ½å¼ºè°ƒäº†ã€Œå‹å…ƒåº”è¯¥å®šä¹‰åœ¨åŒä¸€æ–‡ä»¶å†…ï¼Œé¿å…ä»£ç è¯»è€…è·‘åˆ°å…¶å®ƒæ–‡ä»¶æŸ¥æ‰¾ä½¿ç”¨è¯¥ç§æœ‰æˆå‘˜çš„ç±»ã€ã€‚é‚£ä¹ˆå¯ä»¥æŠŠå…¶å£°æ˜æ”¾åœ¨ç±»å£°æ˜æ‰€åœ¨çš„å¤´æ–‡ä»¶ï¼Œå®šä¹‰ä¹Ÿæ”¾åœ¨ç±»å®šä¹‰æ‰€åœ¨çš„æ–‡ä»¶ã€‚</li><li>ç”±äºå‹å…ƒå‡½æ•°ï¼ç±»å¹¶ä¸æ˜¯ç±»çš„ä¸€éƒ¨åˆ†ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šæ˜¯ç±»å¯è°ƒç”¨çš„å…¬æœ‰æ¥å£ï¼Œäºæ˜¯æˆ‘ä¸»å¼ å…¨é›†ä¸­æ”¾åœ¨ç±»çš„å°¾éƒ¨ï¼Œå³çš„æ•°æ®æˆå‘˜ä¹‹åï¼Œå‚è€ƒå£°æ˜é¡ºåºã€‚</li><li>å¯¹ä½¿ç”¨C++å¼‚å¸¸å¤„ç†åº”å…·æœ‰æ€æ ·çš„æ€åº¦ï¼Ÿéå¸¸å€¼å¾—ä¸€è¯»ã€‚</li><li>æ³¨æ„åˆå§‹åŒ–constå¯¹è±¡æ—¶ï¼Œå¿…é¡»åœ¨åˆå§‹åŒ–çš„åŒæ—¶å€¼åˆå§‹åŒ–ã€‚</li><li>ç”¨æ–­è¨€ä»£æ›¿æ— ç¬¦å·æ•´å‹ç±»å‹ï¼Œæ·±æœ‰å¯å‘ã€‚</li><li>autoåœ¨æ¶‰åŠè¿­ä»£å™¨çš„å¾ªç¯è¯­å¥é‡ŒæŒºå¸¸ç”¨ã€‚</li><li>ShouldthetrailingreturntypesyntaxstylebecomethedefaultfornewC++11programs?è®¨è®ºäº†autoä¸å°¾ç½®è¿”å›ç±»å‹ä¸€èµ·ç”¨çš„å…¨æ–°ç¼–ç é£æ ¼ï¼Œå€¼å¾—ä¸€çœ‹ã€‚</li></ol><h2 id="å‘½åçº¦å®š">7.å‘½åçº¦å®š</h2><h3 id="é€šç”¨å‘½åè§„åˆ™">7.1.é€šç”¨å‘½åè§„åˆ™</h3><ul><li>å‡½æ•°å‘½å,å˜é‡å‘½å,æ–‡ä»¶å‘½åè¦æœ‰æè¿°æ€§;å°‘ç”¨ç¼©å†™</li></ul><h3 id="æ–‡ä»¶å‘½å">7.2.æ–‡ä»¶å‘½å</h3><ul><li>æ–‡ä»¶åè¦å…¨éƒ¨å°å†™,å¯ä»¥åŒ…å«ä¸‹åˆ’çº¿(<em>)æˆ–è¿å­—ç¬¦(-),ä¾ç…§é¡¹ç›®çš„çº¦å®š.å¦‚æœæ²¡æœ‰çº¦å®š,é‚£ä¹ˆâ€œ</em>â€æ›´å¥½</li></ul><h3 id="ç±»å‹å‘½å">7.3.ç±»å‹å‘½å</h3><ul><li>ç±»å‹åç§°çš„æ¯ä¸ªå•è¯é¦–å­—æ¯å‡å¤§å†™,ä¸åŒ…å«ä¸‹åˆ’çº¿:MyExcitingClass,MyExcitingEnum</li></ul><h3 id="å˜é‡å‘½å">7.4.å˜é‡å‘½å</h3><ul><li><p>å˜é‡(åŒ…æ‹¬å‡½æ•°å‚æ•°)å’Œæ•°æ®æˆå‘˜åä¸€å¾‹å°å†™,å•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥.ç±»çš„æˆå‘˜å˜é‡ä»¥ä¸‹åˆ’çº¿ç»“å°¾,ä½†ç»“æ„ä½“çš„å°±ä¸ç”¨,å¦‚:a_local_variable,a_struct_data_member,a_class_data_member_.</p></li><li><p>æ™®é€šå˜é‡å‘½åå…¨å°å†™æˆ–è€…ç”¨ä¸‹åˆ’çº¿ï¼Œä¸è¦æ··åˆå¤§å°å†™</p></li><li><p>ç±»æ•°æ®æˆå‘˜ï¼Œå’Œæ™®é€šå˜é‡åä¸€æ ·ï¼Œä½†æ˜¯è¦åœ¨æœ€åæ¥ä¸‹åˆ’çº¿ï¼šstringtable_name_</p></li><li><p>ç»“æ„ä½“å˜é‡ï¼Œå’Œæ™®é€šå˜é‡åä¸€æ ·</p></li></ul><h3 id="å¸¸é‡å‘½å">7.5.å¸¸é‡å‘½å</h3><ul><li>å£°æ˜ä¸ºconstexpræˆ–constçš„å˜é‡,æˆ–åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å…¶å€¼å§‹ç»ˆä¿æŒä¸å˜çš„,å‘½åæ—¶ä»¥â€œkâ€å¼€å¤´,å¤§å°å†™æ··åˆ</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">constintkDaysInWeek=<span class="hljs-number">7</span>;<br></code></pre></td></tr></table></figure><ul><li>æ‰€æœ‰å…·æœ‰é™æ€å­˜å‚¨ç±»å‹çš„å˜é‡(ä¾‹å¦‚é™æ€å˜é‡æˆ–å…¨å±€å˜é‡,å‚è§å­˜å‚¨ç±»å‹)éƒ½åº”å½“ä»¥æ­¤æ–¹å¼å‘½å.å¯¹äºå…¶ä»–å­˜å‚¨ç±»å‹çš„å˜é‡,å¦‚è‡ªåŠ¨å˜é‡ç­‰,è¿™æ¡è§„åˆ™æ˜¯å¯é€‰çš„.å¦‚æœä¸é‡‡ç”¨è¿™æ¡è§„åˆ™,å°±æŒ‰ç…§ä¸€èˆ¬çš„å˜é‡å‘½åè§„åˆ™.</li></ul><h3 id="å‡½æ•°å‘½å">7.6.å‡½æ•°å‘½å</h3><ul><li><p>å¸¸è§„å‡½æ•°ä½¿ç”¨å¤§å°å†™æ··åˆ,å–å€¼å’Œè®¾å€¼å‡½æ•°åˆ™è¦æ±‚ä¸å˜é‡ååŒ¹é…:MyExcitingFunction(),</p></li><li><p>ä¸€èˆ¬æ¥è¯´,å‡½æ•°åçš„æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™(å³â€œé©¼å³°å˜é‡åâ€æˆ–â€œå¸•æ–¯å¡å˜é‡åâ€),æ²¡æœ‰ä¸‹åˆ’çº¿.å¯¹äºé¦–å­—æ¯ç¼©å†™çš„å•è¯,æ›´å€¾å‘äºå°†å®ƒä»¬è§†ä½œä¸€ä¸ªå•è¯è¿›è¡Œé¦–å­—æ¯å¤§å†™(ä¾‹å¦‚,å†™ä½œStartRpc()è€ŒéStartRPC())</p></li><li><p>åŒæ ·çš„å‘½åè§„åˆ™åŒæ—¶é€‚ç”¨äºç±»ä½œç”¨åŸŸä¸å‘½åç©ºé—´ä½œç”¨åŸŸçš„å¸¸é‡</p></li><li><p>å–å€¼å’Œè®¾å€¼å‡½æ•°çš„å‘½åä¸å˜é‡ä¸€è‡´.ä¸€èˆ¬æ¥è¯´å®ƒä»¬çš„åç§°ä¸å®é™…çš„æˆå‘˜å˜é‡å¯¹åº”,ä½†å¹¶ä¸å¼ºåˆ¶è¦æ±‚.ä¾‹å¦‚intcount()ä¸voidset_count(intcount).</p></li></ul><h3 id="å‘½åç©ºé—´å‘½å">7.7.å‘½åç©ºé—´å‘½å</h3><ul><li>å‘½åç©ºé—´ä»¥å°å†™å­—æ¯å‘½å.æœ€é«˜çº§å‘½åç©ºé—´çš„åå­—å–å†³äºé¡¹ç›®åç§°.è¦æ³¨æ„é¿å…åµŒå¥—å‘½åç©ºé—´çš„åå­—ä¹‹é—´å’Œå¸¸è§çš„é¡¶çº§å‘½åç©ºé—´çš„åå­—ä¹‹é—´å‘ç”Ÿå†²çª.</li><li>æ³¨æ„ä¸ä½¿ç”¨ç¼©å†™ä½œä¸ºåç§°çš„è§„åˆ™åŒæ ·é€‚ç”¨äºå‘½åç©ºé—´.å‘½åç©ºé—´ä¸­çš„ä»£ç æå°‘éœ€è¦æ¶‰åŠå‘½åç©ºé—´çš„åç§°,å› æ­¤æ²¡æœ‰å¿…è¦åœ¨å‘½åç©ºé—´ä¸­ä½¿ç”¨ç¼©å†™</li></ul><h3 id="æšä¸¾å‘½å">7.8.æšä¸¾å‘½å</h3><ul><li>æšä¸¾çš„å‘½ååº”å½“å’Œå¸¸é‡æˆ–å®ä¸€è‡´:kEnumNameæˆ–æ˜¯ENUM_NAME</li><li>å•ç‹¬çš„æšä¸¾å€¼åº”è¯¥ä¼˜å…ˆé‡‡ç”¨å¸¸é‡çš„å‘½åæ–¹å¼.ä½†å®æ–¹å¼çš„å‘½åä¹Ÿå¯ä»¥æ¥å—</li></ul><h3 id="å®å‘½å">7.9.å®å‘½å</h3><ul><li>ä½ å¹¶ä¸æ‰“ç®—ä½¿ç”¨å®,å¯¹å§?å¦‚æœä½ ä¸€å®šè¦ç”¨,åƒè¿™æ ·å‘½å:MY_MACRO_THAT_SCARES_SMALL_CHILDREN</li></ul><h3 id="å‘½åè§„åˆ™çš„ç‰¹ä¾‹">7.10.å‘½åè§„åˆ™çš„ç‰¹ä¾‹</h3><ul><li>å¦‚æœä½ å‘½åçš„å®ä½“ä¸å·²æœ‰C/C++å®ä½“ç›¸ä¼¼,å¯å‚è€ƒç°æœ‰å‘½åç­–ç•¥.</li><li>bigopen():å‡½æ•°å,å‚ç…§open()çš„å½¢å¼</li><li>uint:typedef</li><li>bigpos:structæˆ–class,å‚ç…§posçš„å½¢å¼</li><li>sparse_hash_map:STLå‹å®ä½“;å‚ç…§STLå‘½åçº¦å®š</li><li>LONGLONG_MAX:å¸¸é‡,å¦‚åŒINT_MAX</li></ul><h2 id="æ³¨é‡Š">8.æ³¨é‡Š</h2><h3 id="æ³¨é‡Šé£æ ¼">8.1.æ³¨é‡Šé£æ ¼</h3><p>ä½¿ç”¨//æˆ–/**/,ç»Ÿä¸€å°±å¥½.</p><h3 id="æ–‡ä»¶æ³¨é‡Š">8.2.æ–‡ä»¶æ³¨é‡Š</h3><p>åœ¨æ¯ä¸€ä¸ªæ–‡ä»¶å¼€å¤´åŠ å…¥ç‰ˆæƒå…¬å‘Š.æ–‡ä»¶æ³¨é‡Šæè¿°äº†è¯¥æ–‡ä»¶çš„å†…å®¹.å¦‚æœä¸€ä¸ªæ–‡ä»¶åªå£°æ˜,æˆ–å®ç°,æˆ–æµ‹è¯•äº†ä¸€ä¸ªå¯¹è±¡,å¹¶ä¸”è¿™ä¸ªå¯¹è±¡å·²ç»åœ¨å®ƒçš„å£°æ˜å¤„è¿›è¡Œäº†è¯¦ç»†çš„æ³¨é‡Š,é‚£ä¹ˆå°±æ²¡å¿…è¦å†åŠ ä¸Šæ–‡ä»¶æ³¨é‡Š.é™¤æ­¤ä¹‹å¤–çš„å…¶ä»–æ–‡ä»¶éƒ½éœ€è¦æ–‡ä»¶æ³¨é‡Š.</p><p>æ³•å¾‹å…¬å‘Šå’Œä½œè€…ä¿¡æ¯</p><p>â€‹æ¯ä¸ªæ–‡ä»¶éƒ½åº”è¯¥åŒ…å«è®¸å¯è¯å¼•ç”¨.ä¸ºé¡¹ç›®é€‰æ‹©åˆé€‚çš„è®¸å¯è¯ç‰ˆæœ¬.(æ¯”å¦‚,Apache2.0,BSD,LGPL,GPL)å¦‚æœä½ å¯¹åŸå§‹ä½œè€…çš„æ–‡ä»¶åšäº†é‡å¤§ä¿®æ”¹,è¯·è€ƒè™‘åˆ é™¤åŸä½œè€…ä¿¡æ¯.</p><p>æ–‡ä»¶å†…å®¹</p><p>â€‹å¦‚æœä¸€ä¸ª.hæ–‡ä»¶å£°æ˜äº†å¤šä¸ªæ¦‚å¿µ,åˆ™æ–‡ä»¶æ³¨é‡Šåº”å½“å¯¹æ–‡ä»¶çš„å†…å®¹åšä¸€ä¸ªå¤§è‡´çš„è¯´æ˜,åŒæ—¶è¯´æ˜å„æ¦‚å¿µä¹‹é—´çš„è”ç³».ä¸€ä¸ªä¸€åˆ°ä¸¤è¡Œçš„æ–‡ä»¶æ³¨é‡Šå°±è¶³å¤Ÿäº†,å¯¹äºæ¯ä¸ªæ¦‚å¿µçš„è¯¦ç»†æ–‡æ¡£åº”å½“æ”¾åœ¨å„ä¸ªæ¦‚å¿µä¸­,è€Œä¸æ˜¯æ–‡ä»¶æ³¨é‡Šä¸­.</p><p>ä¸è¦åœ¨.hå’Œ.ccä¹‹é—´å¤åˆ¶æ³¨é‡Š,è¿™æ ·çš„æ³¨é‡Šåç¦»äº†æ³¨é‡Šçš„å®é™…æ„ä¹‰</p><h3 id="ç±»æ³¨é‡Š">8.3.ç±»æ³¨é‡Š</h3><p>æ¯ä¸ªç±»çš„å®šä¹‰éƒ½è¦é™„å¸¦ä¸€ä»½æ³¨é‡Š,æè¿°ç±»çš„åŠŸèƒ½å’Œç”¨æ³•,é™¤éå®ƒçš„åŠŸèƒ½ç›¸å½“æ˜æ˜¾</p><h3 id="å‡½æ•°æ³¨é‡Š">8.4.å‡½æ•°æ³¨é‡Š</h3><p>å‡½æ•°å£°æ˜å¤„çš„æ³¨é‡Šæè¿°å‡½æ•°åŠŸèƒ½;å®šä¹‰å¤„çš„æ³¨é‡Šæè¿°å‡½æ•°å®ç°</p><p>åŸºæœ¬ä¸Šæ¯ä¸ªå‡½æ•°å£°æ˜å¤„å‰éƒ½åº”å½“åŠ ä¸Šæ³¨é‡Š,æè¿°å‡½æ•°çš„åŠŸèƒ½å’Œç”¨é€”.åªæœ‰åœ¨å‡½æ•°çš„åŠŸèƒ½ç®€å•è€Œæ˜æ˜¾æ—¶æ‰èƒ½çœç•¥è¿™äº›æ³¨é‡Š(ä¾‹å¦‚,ç®€å•çš„å–å€¼å’Œè®¾å€¼å‡½æ•°).æ³¨é‡Šä½¿ç”¨å™è¿°å¼(â€œOpensthefileâ€)è€ŒéæŒ‡ä»¤å¼(â€œOpenthefileâ€);æ³¨é‡Šåªæ˜¯ä¸ºäº†æè¿°å‡½æ•°,è€Œä¸æ˜¯å‘½ä»¤å‡½æ•°åšä»€ä¹ˆ.é€šå¸¸,æ³¨é‡Šä¸ä¼šæè¿°å‡½æ•°å¦‚ä½•å·¥ä½œ.é‚£æ˜¯å‡½æ•°å®šä¹‰éƒ¨åˆ†çš„äº‹æƒ….</p><p>å‡½æ•°å£°æ˜å¤„æ³¨é‡Šçš„å†…å®¹:</p><ul><li><p>å‡½æ•°çš„è¾“å…¥è¾“å‡º.</p></li><li><p>å¯¹ç±»æˆå‘˜å‡½æ•°è€Œè¨€:å‡½æ•°è°ƒç”¨æœŸé—´å¯¹è±¡æ˜¯å¦éœ€è¦ä¿æŒå¼•ç”¨å‚æ•°,æ˜¯å¦ä¼šé‡Šæ”¾è¿™äº›å‚æ•°</p></li><li><p>å‡½æ•°æ˜¯å¦åˆ†é…äº†å¿…é¡»ç”±è°ƒç”¨è€…é‡Šæ”¾çš„ç©ºé—´.</p></li><li><p>å‚æ•°æ˜¯å¦å¯ä»¥ä¸ºç©ºæŒ‡é’ˆ.</p></li><li><p>æ˜¯å¦å­˜åœ¨å‡½æ•°ä½¿ç”¨ä¸Šçš„æ€§èƒ½éšæ‚£.</p></li><li><p>å¦‚æœå‡½æ•°æ˜¯å¯é‡å…¥çš„,å…¶åŒæ­¥å‰ææ˜¯ä»€ä¹ˆ?</p></li></ul><h3 id="å˜é‡æ³¨é‡Š">8.5.å˜é‡æ³¨é‡Š</h3><ul><li><p>é€šå¸¸å˜é‡åæœ¬èº«è¶³ä»¥å¾ˆå¥½è¯´æ˜å˜é‡ç”¨é€”.æŸäº›æƒ…å†µä¸‹,ä¹Ÿéœ€è¦é¢å¤–çš„æ³¨é‡Šè¯´æ˜</p></li><li><p>ç±»æ•°æ®æˆå‘˜</p><ul><li>æ¯ä¸ªç±»æ•°æ®æˆå‘˜(ä¹Ÿå«å®ä¾‹å˜é‡æˆ–æˆå‘˜å˜é‡)éƒ½åº”è¯¥ç”¨æ³¨é‡Šè¯´æ˜ç”¨é€”.å¦‚æœæœ‰éå˜é‡çš„å‚æ•°(ä¾‹å¦‚ç‰¹æ®Šå€¼,æ•°æ®æˆå‘˜ä¹‹é—´çš„å…³ç³»,ç”Ÿå‘½å‘¨æœŸç­‰)ä¸èƒ½å¤Ÿç”¨ç±»å‹ä¸å˜é‡åæ˜ç¡®è¡¨è¾¾,åˆ™åº”å½“åŠ ä¸Šæ³¨é‡Š.ç„¶è€Œ,å¦‚æœå˜é‡ç±»å‹ä¸å˜é‡åå·²ç»è¶³ä»¥æè¿°ä¸€ä¸ªå˜é‡,é‚£ä¹ˆå°±ä¸å†éœ€è¦åŠ ä¸Šæ³¨é‡Š.</li><li>ç‰¹åˆ«åœ°,å¦‚æœå˜é‡å¯ä»¥æ¥å—NULLæˆ–-1ç­‰è­¦æˆ’å€¼,é¡»åŠ ä»¥è¯´æ˜</li></ul></li><li><p>å…¨å±€å˜é‡å’Œæ•°æ®æˆå‘˜ä¸€æ ·,æ‰€æœ‰å…¨å±€å˜é‡ä¹Ÿè¦æ³¨é‡Šè¯´æ˜å«ä¹‰åŠç”¨é€”,ä»¥åŠä½œä¸ºå…¨å±€å˜é‡çš„åŸå› .</p></li></ul><h3 id="å®ç°æ³¨é‡Š">8.6.å®ç°æ³¨é‡Š</h3><p>å¯¹äºä»£ç ä¸­å·§å¦™çš„,æ™¦æ¶©çš„,æœ‰è¶£çš„,é‡è¦çš„åœ°æ–¹åŠ ä»¥æ³¨é‡Š.</p><h3 id="æ ‡ç‚¹æ‹¼å†™å’Œè¯­æ³•">8.7.æ ‡ç‚¹,æ‹¼å†™å’Œè¯­æ³•</h3><p>æ³¨æ„æ ‡ç‚¹,æ‹¼å†™å’Œè¯­æ³•;å†™çš„å¥½çš„æ³¨é‡Šæ¯”å·®çš„è¦æ˜“è¯»çš„å¤š.</p><h3 id="todoæ³¨é‡Š">8.8.TODOæ³¨é‡Š</h3><p>å¯¹é‚£äº›ä¸´æ—¶çš„,çŸ­æœŸçš„è§£å†³æ–¹æ¡ˆ,æˆ–å·²ç»å¤Ÿå¥½ä½†ä»ä¸å®Œç¾çš„ä»£ç ä½¿ç”¨TODOæ³¨é‡Š.</p><p>TODOæ³¨é‡Šè¦ä½¿ç”¨å…¨å¤§å†™çš„å­—ç¬¦ä¸²TODO,åœ¨éšåçš„åœ†æ‹¬å·é‡Œå†™ä¸Šä½ çš„åå­—,é‚®ä»¶åœ°å€,bugID,æˆ–å…¶å®ƒèº«ä»½æ ‡è¯†å’Œä¸è¿™ä¸€TODOç›¸å…³çš„issue.ä¸»è¦ç›®çš„æ˜¯è®©æ·»åŠ æ³¨é‡Šçš„äºº(ä¹Ÿæ˜¯å¯ä»¥è¯·æ±‚æä¾›æ›´å¤šç»†èŠ‚çš„äºº)å¯æ ¹æ®è§„èŒƒçš„TODOæ ¼å¼è¿›è¡ŒæŸ¥æ‰¾.æ·»åŠ TODOæ³¨é‡Šå¹¶ä¸æ„å‘³ç€ä½ è¦è‡ªå·±æ¥ä¿®æ­£,å› æ­¤å½“ä½ åŠ ä¸Šå¸¦æœ‰å§“åçš„TODOæ—¶,ä¸€èˆ¬éƒ½æ˜¯å†™ä¸Šè‡ªå·±çš„åå­—.</p><h3 id="å¼ƒç”¨æ³¨é‡Š">8.9.å¼ƒç”¨æ³¨é‡Š</h3><ul><li>é€šè¿‡å¼ƒç”¨æ³¨é‡Šï¼ˆDEPRECATEDcommentsï¼‰ä»¥æ ‡è®°æŸæ¥å£ç‚¹å·²å¼ƒç”¨.</li><li>æ‚¨å¯ä»¥å†™ä¸ŠåŒ…å«å…¨å¤§å†™çš„DEPRECATEDçš„æ³¨é‡Š,ä»¥æ ‡è®°æŸæ¥å£ä¸ºå¼ƒç”¨çŠ¶æ€.æ³¨é‡Šå¯ä»¥æ”¾åœ¨æ¥å£å£°æ˜å‰,æˆ–è€…åŒä¸€è¡Œ.</li><li>åœ¨DEPRECATEDä¸€è¯å,åœ¨æ‹¬å·ä¸­ç•™ä¸‹æ‚¨çš„åå­—,é‚®ç®±åœ°å€ä»¥åŠå…¶ä»–èº«ä»½æ ‡è¯†.</li><li>å¼ƒç”¨æ³¨é‡Šåº”å½“åŒ…æ¶µç®€çŸ­è€Œæ¸…æ™°çš„æŒ‡å¼•,ä»¥å¸®åŠ©å…¶ä»–äººä¿®å¤å…¶è°ƒç”¨ç‚¹.åœ¨C++ä¸­,ä½ å¯ä»¥å°†ä¸€ä¸ªå¼ƒç”¨å‡½æ•°æ”¹é€ æˆä¸€ä¸ªå†…è”å‡½æ•°,è¿™ä¸€å‡½æ•°å°†è°ƒç”¨æ–°çš„æ¥å£.</li><li>ä»…ä»…æ ‡è®°æ¥å£ä¸ºDEPRECATEDå¹¶ä¸ä¼šè®©å¤§å®¶ä¸çº¦è€ŒåŒåœ°å¼ƒç”¨,æ‚¨è¿˜å¾—äº²è‡ªä¸»åŠ¨ä¿®æ­£è°ƒç”¨ç‚¹ï¼ˆcallsitesï¼‰,æˆ–æ˜¯æ‰¾ä¸ªå¸®æ‰‹.</li><li>ä¿®æ­£å¥½çš„ä»£ç åº”è¯¥ä¸ä¼šå†æ¶‰åŠå¼ƒç”¨æ¥å£ç‚¹äº†,ç€å®æ”¹ç”¨æ–°æ¥å£ç‚¹.å¦‚æœæ‚¨ä¸çŸ¥ä»ä½•ä¸‹æ‰‹,å¯ä»¥æ‰¾æ ‡è®°å¼ƒç”¨æ³¨é‡Šçš„å½“äº‹äººä¸€èµ·å•†é‡.</li></ul><h3 id="tips-5">tips</h3><ol type="1"><li>å…³äºæ³¨é‡Šé£æ ¼,å¾ˆå¤šC++çš„codersæ›´å–œæ¬¢è¡Œæ³¨é‡Š,Ccodersæˆ–è®¸å¯¹å—æ³¨é‡Šä¾ç„¶æƒ…æœ‰ç‹¬é’Ÿ,æˆ–è€…åœ¨æ–‡ä»¶å¤´å¤§æ®µå¤§æ®µçš„æ³¨é‡Šæ—¶ä½¿ç”¨å—æ³¨é‡Š;</li><li>æ–‡ä»¶æ³¨é‡Šå¯ä»¥ç‚«è€€ä½ çš„æˆå°±,ä¹Ÿæ˜¯ä¸ºäº†æ…äº†ç¯“å­åˆ«äººå¯ä»¥æ‰¾ä½ ;</li><li>æ³¨é‡Šè¦è¨€ç®€æ„èµ…,ä¸è¦æ‹–æ²“å†—ä½™,å¤æ‚çš„ä¸œè¥¿ç®€å•åŒ–å’Œç®€å•çš„ä¸œè¥¿å¤æ‚åŒ–éƒ½æ˜¯è¦è¢«é„™è§†çš„</li><li>å¯¹äºChinesecodersæ¥è¯´,ç”¨è‹±æ–‡æ³¨é‡Šè¿˜æ˜¯ç”¨ä¸­æ–‡æ³¨é‡Š,itisaproblem,ä½†ä¸ç®¡æ€æ ·,æ³¨é‡Šæ˜¯ä¸ºäº†è®©åˆ«äººçœ‹æ‡‚,éš¾é“æ˜¯ä¸ºäº†ç‚«è€€ç¼–ç¨‹è¯­è¨€ä¹‹å¤–çš„ä½ çš„æ¯è¯­æˆ–å¤–è¯­æ°´å¹³å—ï¼›</li><li>æ³¨é‡Šä¸è¦å¤ªä¹±,é€‚å½“çš„ç¼©è¿›æ‰ä¼šè®©äººä¹æ„çœ‹.ä½†ä¹Ÿæ²¡æœ‰å¿…è¦è§„å®šæ³¨é‡Šä»ç¬¬å‡ åˆ—å¼€å§‹(æˆ‘è‡ªå·±å†™ä»£ç çš„æ—¶å€™æ€»å–œæ¬¢è¿™æ ·),UNIX/LINUXä¸‹è¿˜å¯ä»¥çº¦å®šæ˜¯ä½¿ç”¨tabè¿˜æ˜¯space,ä¸ªäººå€¾å‘äºspace;</li><li>TODOå¾ˆä¸é”™,æœ‰æ—¶å€™,æ³¨é‡Šç¡®å®æ˜¯ä¸ºäº†æ ‡è®°ä¸€äº›æœªå®Œæˆçš„æˆ–å®Œæˆçš„ä¸å°½å¦‚äººæ„çš„åœ°æ–¹,è¿™æ ·ä¸€æœç´¢,å°±çŸ¥é“è¿˜æœ‰å“ªäº›æ´»è¦å¹²,æ—¥å¿—éƒ½çœäº†</li></ol><h2 id="æ ¼å¼">9.æ ¼å¼</h2><h3 id="è¡Œé•¿åº¦">9.1è¡Œé•¿åº¦</h3><ul><li><p>æ¯ä¸€è¡Œä»£ç å­—ç¬¦æ•°ä¸è¶…è¿‡80.</p></li><li><p>åŒ…å«é•¿è·¯å¾„çš„#includeè¯­å¥å¯ä»¥è¶…å‡º80åˆ—</p></li><li><p>å¤´æ–‡ä»¶ä¿æŠ¤å¯ä»¥æ— è§†è¯¥åŸåˆ™.</p></li></ul><h3 id="éasciiå­—ç¬¦">9.2éASCIIå­—ç¬¦</h3><ul><li><p>å°½é‡ä¸ä½¿ç”¨éASCIIå­—ç¬¦,ä½¿ç”¨æ—¶å¿…é¡»ä½¿ç”¨UTF-8ç¼–ç </p></li><li><p>å³ä½¿æ˜¯è‹±æ–‡,ä¹Ÿä¸åº”å°†ç”¨æˆ·ç•Œé¢çš„æ–‡æœ¬ç¡¬ç¼–ç åˆ°æºä»£ç ä¸­,å› æ­¤éASCIIå­—ç¬¦åº”å½“å¾ˆå°‘è¢«ç”¨åˆ°.ç‰¹æ®Šæƒ…å†µä¸‹å¯ä»¥é€‚å½“åŒ…å«æ­¤ç±»å­—ç¬¦</p></li></ul><h3 id="ç©ºæ ¼è¿˜æ˜¯åˆ¶è¡¨ä½">9.3ç©ºæ ¼è¿˜æ˜¯åˆ¶è¡¨ä½</h3><ul><li>åªä½¿ç”¨ç©ºæ ¼,æ¯æ¬¡ç¼©è¿›2ä¸ªç©ºæ ¼.</li><li>æˆ‘ä»¬ä½¿ç”¨ç©ºæ ¼ç¼©è¿›.ä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨åˆ¶è¡¨ç¬¦.ä½ åº”è¯¥è®¾ç½®ç¼–è¾‘å™¨å°†åˆ¶è¡¨ç¬¦è½¬ä¸ºç©ºæ ¼</li></ul><h3 id="å‡½æ•°å£°æ˜ä¸å®šä¹‰">9.4å‡½æ•°å£°æ˜ä¸å®šä¹‰</h3><ul><li><p>è¿”å›ç±»å‹å’Œå‡½æ•°ååœ¨åŒä¸€è¡Œ,å‚æ•°ä¹Ÿå°½é‡æ”¾åœ¨åŒä¸€è¡Œ,å¦‚æœæ”¾ä¸ä¸‹å°±å¯¹å½¢å‚åˆ†è¡Œ,åˆ†è¡Œæ–¹å¼ä¸å‡½æ•°è°ƒç”¨ä¸€è‡´.</p></li><li><p>å¦‚æœåŒä¸€è¡Œæ–‡æœ¬å¤ªå¤š,æ”¾ä¸ä¸‹æ‰€æœ‰å‚æ•°:</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">ReturnTypeClassName::<span class="hljs-built_in">ReallyLongFunctionName</span>(Typepar_name1,Typepar_name2,<br>Typepar_name3)&#123;<br><span class="hljs-built_in">DoSomething</span>();<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++">ReturnTypeLongClassName::<span class="hljs-built_in">ReallyReallyReallyLongFunctionName</span>(<br>Typepar_name1,<span class="hljs-comment">//4spaceindent</span><br>Typepar_name2,<br>Typepar_name3)&#123;<br><span class="hljs-built_in">DoSomething</span>();<span class="hljs-comment">//2spaceindent</span><br>...<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ³¨æ„ä»¥ä¸‹å‡ ç‚¹:</p><ul><li>ä½¿ç”¨å¥½çš„å‚æ•°å.</li><li>åªæœ‰åœ¨å‚æ•°æœªè¢«ä½¿ç”¨æˆ–è€…å…¶ç”¨é€”éå¸¸æ˜æ˜¾æ—¶,æ‰èƒ½çœç•¥å‚æ•°å.</li><li>å¦‚æœè¿”å›ç±»å‹å’Œå‡½æ•°ååœ¨ä¸€è¡Œæ”¾ä¸ä¸‹,åˆ†è¡Œ.</li><li>å¦‚æœè¿”å›ç±»å‹ä¸å‡½æ•°å£°æ˜æˆ–å®šä¹‰åˆ†è¡Œäº†,ä¸è¦ç¼©è¿›.</li><li>å·¦åœ†æ‹¬å·æ€»æ˜¯å’Œå‡½æ•°ååœ¨åŒä¸€è¡Œ.</li><li>å‡½æ•°åå’Œå·¦åœ†æ‹¬å·é—´æ°¸è¿œæ²¡æœ‰ç©ºæ ¼.</li><li>åœ†æ‹¬å·ä¸å‚æ•°é—´æ²¡æœ‰ç©ºæ ¼.</li><li>å·¦å¤§æ‹¬å·æ€»åœ¨æœ€åä¸€ä¸ªå‚æ•°åŒä¸€è¡Œçš„æœ«å°¾å¤„,ä¸å¦èµ·æ–°è¡Œ.</li><li>å³å¤§æ‹¬å·æ€»æ˜¯å•ç‹¬ä½äºå‡½æ•°æœ€åä¸€è¡Œ,æˆ–è€…ä¸å·¦å¤§æ‹¬å·åŒä¸€è¡Œ.</li><li>å³åœ†æ‹¬å·å’Œå·¦å¤§æ‹¬å·é—´æ€»æ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼.</li><li>æ‰€æœ‰å½¢å‚åº”å°½å¯èƒ½å¯¹é½.</li><li>ç¼ºçœç¼©è¿›ä¸º2ä¸ªç©ºæ ¼.</li><li>æ¢è¡Œåçš„å‚æ•°ä¿æŒ4ä¸ªç©ºæ ¼çš„ç¼©è¿›</li></ul><h3 id="lambdaè¡¨è¾¾å¼-1">9.5.Lambdaè¡¨è¾¾å¼</h3><p>Lambdaè¡¨è¾¾å¼å¯¹å½¢å‚å’Œå‡½æ•°ä½“çš„æ ¼å¼åŒ–å’Œå…¶ä»–å‡½æ•°ä¸€è‡´;æ•è·åˆ—è¡¨åŒç†,è¡¨é¡¹ç”¨é€—å·éš”å¼€</p><p>è‹¥ç”¨å¼•ç”¨æ•è·,åœ¨å˜é‡åå’Œ&amp;ä¹‹é—´ä¸ç•™ç©ºæ ¼</p><h3 id="å‡½æ•°è°ƒç”¨">9.6.å‡½æ•°è°ƒç”¨</h3><p>è¦ä¹ˆä¸€è¡Œå†™å®Œå‡½æ•°è°ƒç”¨,è¦ä¹ˆåœ¨åœ†æ‹¬å·é‡Œå¯¹å‚æ•°åˆ†è¡Œ,è¦ä¹ˆå‚æ•°å¦èµ·ä¸€è¡Œä¸”ç¼©è¿›å››æ ¼.å¦‚æœæ²¡æœ‰å…¶å®ƒé¡¾è™‘çš„è¯,å°½å¯èƒ½ç²¾ç®€è¡Œæ•°,æ¯”å¦‚æŠŠå¤šä¸ªå‚æ•°é€‚å½“åœ°æ”¾åœ¨åŒä¸€è¡Œé‡Œ.</p><h3 id="åˆ—è¡¨åˆå§‹åŒ–æ ¼å¼">9.7.åˆ—è¡¨åˆå§‹åŒ–æ ¼å¼</h3><p>æ‚¨å¹³æ—¶æ€ä¹ˆæ ¼å¼åŒ–å‡½æ•°è°ƒç”¨,å°±æ€ä¹ˆæ ¼å¼åŒ–åˆ—è¡¨åˆå§‹åŒ–</p><h3 id="æ¡ä»¶è¯­å¥">9.8æ¡ä»¶è¯­å¥</h3><p>å€¾å‘äºä¸åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ç©ºæ ¼.å…³é”®å­—ifå’Œelseå¦èµ·ä¸€è¡Œ</p><p>æ³¨æ„æ‰€æœ‰æƒ…å†µä¸‹ifå’Œå·¦åœ†æ‹¬å·é—´éƒ½æœ‰ä¸ªç©ºæ ¼.å³åœ†æ‹¬å·å’Œå·¦å¤§æ‹¬å·ä¹‹é—´ä¹Ÿè¦æœ‰ä¸ªç©ºæ ¼</p><h3 id="å¾ªç¯å’Œå¼€å…³é€‰æ‹©è¯­å¥">9.9å¾ªç¯å’Œå¼€å…³é€‰æ‹©è¯­å¥</h3><p>switchè¯­å¥å¯ä»¥ä½¿ç”¨å¤§æ‹¬å·åˆ†æ®µ,ä»¥è¡¨æ˜casesä¹‹é—´ä¸æ˜¯è¿åœ¨ä¸€èµ·çš„.åœ¨å•è¯­å¥å¾ªç¯é‡Œ,æ‹¬å·å¯ç”¨å¯ä¸ç”¨.ç©ºå¾ªç¯ä½“åº”ä½¿ç”¨{}æˆ–continue.</p><p>ç©ºå¾ªç¯ä½“åº”ä½¿ç”¨{}æˆ–continue,è€Œä¸æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†å·</p><h3 id="æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼">9.10æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼</h3><p>å¥ç‚¹æˆ–ç®­å¤´å‰åä¸è¦æœ‰ç©ºæ ¼.æŒ‡é’ˆ/åœ°å€æ“ä½œç¬¦(*,&amp;)ä¹‹åä¸èƒ½æœ‰ç©ºæ ¼.</p><h3 id="å¸ƒå°”è¡¨è¾¾å¼">9.11å¸ƒå°”è¡¨è¾¾å¼</h3><p>å¦‚æœä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼è¶…è¿‡æ ‡å‡†è¡Œå®½,æ–­è¡Œæ–¹å¼è¦ç»Ÿä¸€ä¸€ä¸‹</p><p>é€»è¾‘ä¸(&amp;&amp;)æ“ä½œç¬¦æ€»ä½äºè¡Œå°¾:</p><h3 id="å‡½æ•°è¿”å›å€¼">9.12å‡½æ•°è¿”å›å€¼</h3><p>ä¸è¦åœ¨returnè¡¨è¾¾å¼é‡ŒåŠ ä¸Šéå¿…é¡»çš„åœ†æ‹¬å·.</p><h3 id="å˜é‡åŠæ•°ç»„åˆå§‹åŒ–">9.13å˜é‡åŠæ•°ç»„åˆå§‹åŒ–</h3><p>ç”¨=,()å’Œ{}å‡å¯</p><h3 id="é¢„å¤„ç†æŒ‡ä»¤">9.14é¢„å¤„ç†æŒ‡ä»¤</h3><p>é¢„å¤„ç†æŒ‡ä»¤ä¸è¦ç¼©è¿›,ä»è¡Œé¦–å¼€å§‹</p><h3 id="ç±»æ ¼å¼">9.15ç±»æ ¼å¼</h3><p>è®¿é—®æ§åˆ¶å—çš„å£°æ˜ä¾æ¬¡åºæ˜¯public:,protected:,private:,æ¯ä¸ªéƒ½ç¼©è¿›1ä¸ªç©ºæ ¼</p><ul><li>æ‰€æœ‰åŸºç±»ååº”åœ¨80åˆ—é™åˆ¶ä¸‹å°½é‡ä¸å­ç±»åæ”¾åœ¨åŒä¸€è¡Œ.</li><li>å…³é”®è¯public:,protected:,private:è¦ç¼©è¿›1ä¸ªç©ºæ ¼.</li><li>é™¤ç¬¬ä¸€ä¸ªå…³é”®è¯(ä¸€èˆ¬æ˜¯public)å¤–,å…¶ä»–å…³é”®è¯å‰è¦ç©ºä¸€è¡Œ.å¦‚æœç±»æ¯”è¾ƒå°çš„è¯ä¹Ÿå¯ä»¥ä¸ç©º.</li><li>è¿™äº›å…³é”®è¯åä¸è¦ä¿ç•™ç©ºè¡Œ.</li><li>publicæ”¾åœ¨æœ€å‰é¢,ç„¶åæ˜¯protected,æœ€åæ˜¯private.</li><li>å…³äºå£°æ˜é¡ºåºçš„è§„åˆ™è¯·å‚è€ƒå£°æ˜é¡ºåºä¸€èŠ‚</li></ul><h3 id="æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨">9.16æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨</h3><p>æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨æ”¾åœ¨åŒä¸€è¡Œæˆ–æŒ‰å››æ ¼ç¼©è¿›å¹¶æ’å¤šè¡Œ</p><h3 id="å‘½åç©ºé—´æ ¼å¼åŒ–">9.17å‘½åç©ºé—´æ ¼å¼åŒ–</h3><p>å‘½åç©ºé—´å†…å®¹ä¸ç¼©è¿›</p><p>å‘½åç©ºé—´ä¸è¦å¢åŠ é¢å¤–çš„ç¼©è¿›å±‚æ¬¡,</p><p>å£°æ˜åµŒå¥—å‘½åç©ºé—´æ—¶,æ¯ä¸ªå‘½åç©ºé—´éƒ½ç‹¬ç«‹æˆè¡Œ.</p><h3 id="æ°´å¹³ç•™ç™½">9.18æ°´å¹³ç•™ç™½</h3><p>æ°´å¹³ç•™ç™½çš„ä½¿ç”¨æ ¹æ®åœ¨ä»£ç ä¸­çš„ä½ç½®å†³å®š.æ°¸è¿œä¸è¦åœ¨è¡Œå°¾æ·»åŠ æ²¡æ„ä¹‰çš„ç•™ç™½.</p><p>é€šç”¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">voidf</span>(boolb)&#123;<span class="hljs-comment">//å·¦å¤§æ‹¬å·å‰æ€»æ˜¯æœ‰ç©ºæ ¼.</span><br>...<br>inti=<span class="hljs-number">0</span>;<span class="hljs-comment">//åˆ†å·å‰ä¸åŠ ç©ºæ ¼.</span><br><span class="hljs-comment">//åˆ—è¡¨åˆå§‹åŒ–ä¸­å¤§æ‹¬å·å†…çš„ç©ºæ ¼æ˜¯å¯é€‰çš„.</span><br><span class="hljs-comment">//å¦‚æœåŠ äº†ç©ºæ ¼,é‚£ä¹ˆä¸¤è¾¹éƒ½è¦åŠ ä¸Š.</span><br>intx[]=&#123;<span class="hljs-number">0</span>&#125;;<br>intx[]=&#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-comment">//ç»§æ‰¿ä¸åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å†’å·å‰åæ’æœ‰ç©ºæ ¼.</span><br>classFoo:publicBar&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//å¯¹äºå•è¡Œå‡½æ•°çš„å®ç°,åœ¨å¤§æ‹¬å·å†…åŠ ä¸Šç©ºæ ¼</span><br><span class="hljs-comment">//ç„¶åæ˜¯å‡½æ•°å®ç°</span><br><span class="hljs-built_in">Foo</span>(intb):<span class="hljs-built_in">Bar</span>(),<span class="hljs-built_in">baz_</span>(b)&#123;&#125;<span class="hljs-comment">//å¤§æ‹¬å·é‡Œé¢æ˜¯ç©ºçš„è¯,ä¸åŠ ç©ºæ ¼.</span><br><span class="hljs-built_in">voidReset</span>()&#123;baz_=<span class="hljs-number">0</span>;&#125;<span class="hljs-comment">//ç”¨ç©ºæ ¼æŠŠå¤§æ‹¬å·ä¸å®ç°åˆ†å¼€.</span><br>...<br></code></pre></td></tr></table></figure><p>å¾ªç¯å’Œæ¡ä»¶è¯­å¥</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">if</span>(b)&#123;<span class="hljs-comment">//ifæ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥å…³é”®å­—åå‡æœ‰ç©ºæ ¼.</span><br>&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-comment">//elseå‰åæœ‰ç©ºæ ¼.</span><br>&#125;<br><span class="hljs-keyword">while</span>(test)&#123;&#125;<span class="hljs-comment">//åœ†æ‹¬å·å†…éƒ¨ä¸ç´§é‚»ç©ºæ ¼.</span><br><span class="hljs-keyword">switch</span>(i)&#123;<br><span class="hljs-keyword">for</span>(inti=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;++i)&#123;<br><span class="hljs-keyword">switch</span>(i)&#123;<span class="hljs-comment">//å¾ªç¯å’Œæ¡ä»¶è¯­å¥çš„åœ†æ‹¬å·é‡Œå¯ä»¥ä¸ç©ºæ ¼ç´§é‚».</span><br><span class="hljs-keyword">if</span>(test)&#123;<span class="hljs-comment">//åœ†æ‹¬å·,ä½†è¿™å¾ˆå°‘è§.æ€»ä¹‹è¦ä¸€è‡´.</span><br><span class="hljs-keyword">for</span>(inti=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;++i)&#123;<br><span class="hljs-keyword">for</span>(;i&lt;<span class="hljs-number">5</span>;++i)&#123;<span class="hljs-comment">//å¾ªç¯é‡Œå†…;åæ’æœ‰ç©ºæ ¼,;å‰å¯ä»¥åŠ ä¸ªç©ºæ ¼.</span><br><span class="hljs-keyword">switch</span>(i)&#123;<br>case1:<span class="hljs-comment">//switchcaseçš„å†’å·å‰æ— ç©ºæ ¼.</span><br>...<br>case2:<span class="hljs-keyword">break</span>;<span class="hljs-comment">//å¦‚æœå†’å·æœ‰ä»£ç ,åŠ ä¸ªç©ºæ ¼</span><br></code></pre></td></tr></table></figure><p>æ“ä½œç¬¦</p><ul><li>èµ‹å€¼å€¼è¿ç®—ç¬¦å‰åæ€»æ˜¯æœ‰ç©ºæ ¼.</li><li>åœ†æ‹¬å·å†…éƒ¨æ²¡æœ‰ç´§é‚»ç©ºæ ¼</li><li>å‚æ•°å’Œä¸€å…ƒæ“ä½œç¬¦ä¹‹é—´ä¸åŠ ç©ºæ ¼</li></ul><p>æ¨¡æ¿å’Œè½¬æ¢</p><ul><li><p>å°–æ‹¬å·(<and>)ä¸ä¸ç©ºæ ¼ç´§é‚»,&lt;å‰æ²¡æœ‰ç©ºæ ¼,&gt;å’Œ(ä¹‹é—´ä¹Ÿæ²¡æœ‰</and></p></li><li><div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  vector<span class="op">&lt;</span>string<span class="op">&gt;</span>x<span class="op">;</span></span><span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  y<span class="op">=</span><span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">char</span><span class="op">*&gt;(</span>x<span class="op">);</span></span><span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">//åœ¨ç±»å‹ä¸æŒ‡é’ˆæ“ä½œç¬¦ä¹‹é—´ç•™ç©ºæ ¼ä¹Ÿå¯ä»¥,ä½†è¦ä¿æŒä¸€è‡´.</span></span><span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  vector<span class="op">&lt;</span><span class="dt">char</span> <span class="op">*&gt;</span>x<span class="op">;</span></span></code></pre></div></li></ul><h3 id="å‚ç›´ç•™ç™½">9.19å‚ç›´ç•™ç™½</h3><p>å‚ç›´ç•™ç™½è¶Šå°‘è¶Šå¥½</p><p>è¿™ä¸ä»…ä»…æ˜¯è§„åˆ™è€Œæ˜¯åŸåˆ™é—®é¢˜äº†:ä¸åœ¨ä¸‡ä¸å¾—å·²,ä¸è¦ä½¿ç”¨ç©ºè¡Œ.å°¤å…¶æ˜¯:ä¸¤ä¸ªå‡½æ•°å®šä¹‰ä¹‹é—´çš„ç©ºè¡Œä¸è¦è¶…è¿‡2è¡Œ,å‡½æ•°ä½“é¦–å°¾ä¸è¦ç•™ç©ºè¡Œ,å‡½æ•°ä½“ä¸­ä¹Ÿä¸è¦éšæ„æ·»åŠ ç©ºè¡Œ.</p><p>åŸºæœ¬åŸåˆ™æ˜¯:åŒä¸€å±å¯ä»¥æ˜¾ç¤ºçš„ä»£ç è¶Šå¤š,è¶Šå®¹æ˜“ç†è§£ç¨‹åºçš„æ§åˆ¶æµ.å½“ç„¶,è¿‡äºå¯†é›†çš„ä»£ç å—å’Œè¿‡äºç–æ¾çš„ä»£ç å—åŒæ ·éš¾çœ‹,è¿™å–å†³äºä½ çš„åˆ¤æ–­.ä½†é€šå¸¸æ˜¯å‚ç›´ç•™ç™½è¶Šå°‘è¶Šå¥½.</p><p>ä¸‹é¢çš„è§„åˆ™å¯ä»¥è®©åŠ å…¥çš„ç©ºè¡Œæ›´æœ‰æ•ˆ:</p><ul><li>å‡½æ•°ä½“å†…å¼€å¤´æˆ–ç»“å°¾çš„ç©ºè¡Œå¯è¯»æ€§å¾®ä¹å…¶å¾®.</li><li>åœ¨å¤šé‡if-elseå—é‡ŒåŠ ç©ºè¡Œæˆ–è®¸æœ‰ç‚¹å¯è¯»æ€§</li></ul><h3 id="tips-6">tips</h3><ol type="1"><li>å¯¹äºä»£ç æ ¼å¼,å› äºº,ç³»ç»Ÿè€Œå¼‚å„æœ‰ä¼˜ç¼ºç‚¹,ä½†åŒä¸€ä¸ªé¡¹ç›®ä¸­éµå¾ªåŒä¸€æ ‡å‡†è¿˜æ˜¯æœ‰å¿…è¦çš„;</li><li>è¡Œå®½åŸåˆ™ä¸Šä¸è¶…è¿‡80åˆ—,æŠŠ22å¯¸çš„æ˜¾ç¤ºå±éƒ½å å®Œ,æ€ä¹ˆä¹Ÿè¯´ä¸è¿‡å»;</li><li>å°½é‡ä¸ä½¿ç”¨éASCIIå­—ç¬¦,å¦‚æœä½¿ç”¨çš„è¯,å‚è€ƒUTF-8æ ¼å¼(å°¤å…¶æ˜¯UNIX/Linuxä¸‹,Windowsä¸‹å¯ä»¥è€ƒè™‘å®½å­—ç¬¦),å°½é‡ä¸å°†å­—ç¬¦ä¸²å¸¸é‡è€¦åˆåˆ°ä»£ç ä¸­,æ¯”å¦‚ç‹¬ç«‹å‡ºèµ„æºæ–‡ä»¶,è¿™ä¸ä»…ä»…æ˜¯é£æ ¼é—®é¢˜äº†;</li><li>UNIX/Linuxä¸‹æ— æ¡ä»¶ä½¿ç”¨ç©ºæ ¼,MSVCçš„è¯ä½¿ç”¨Tabä¹Ÿæ— å¯åšé;</li><li>å‡½æ•°å‚æ•°,é€»è¾‘æ¡ä»¶,åˆå§‹åŒ–åˆ—è¡¨:è¦ä¹ˆæ‰€æœ‰å‚æ•°å’Œå‡½æ•°åæ”¾åœ¨åŒä¸€è¡Œ,è¦ä¹ˆæ‰€æœ‰å‚æ•°å¹¶æ’åˆ†è¡Œ;</li><li>é™¤å‡½æ•°å®šä¹‰çš„å·¦å¤§æ‹¬å·å¯ä»¥ç½®äºè¡Œé¦–å¤–,åŒ…æ‹¬å‡½æ•°/ç±»/ç»“æ„ä½“/æšä¸¾å£°æ˜,å„ç§è¯­å¥çš„å·¦å¤§æ‹¬å·ç½®äºè¡Œå°¾,æ‰€æœ‰å³å¤§æ‹¬å·ç‹¬ç«‹æˆè¡Œ;</li><li>./-&gt;æ“ä½œç¬¦å‰åä¸ç•™ç©ºæ ¼,*/&amp;ä¸è¦å‰åéƒ½ç•™,ä¸€ä¸ªå°±å¯,é å·¦é å³ä¾å„äººå–œå¥½;</li><li>é¢„å¤„ç†æŒ‡ä»¤/å‘½åç©ºé—´ä¸ä½¿ç”¨é¢å¤–ç¼©è¿›,ç±»/ç»“æ„ä½“/æšä¸¾/å‡½æ•°/è¯­å¥ä½¿ç”¨ç¼©è¿›;</li><li>åˆå§‹åŒ–ç”¨=è¿˜æ˜¯()ä¾ä¸ªäººå–œå¥½,ç»Ÿä¸€å°±å¥½;</li><li>returnä¸è¦åŠ ();</li><li>æ°´å¹³/å‚ç›´ç•™ç™½ä¸è¦æ»¥ç”¨,æ€ä¹ˆæ˜“è¯»æ€ä¹ˆæ¥.</li><li>å…³äºUNIX/Linuxé£æ ¼ä¸ºä»€ä¹ˆè¦æŠŠå·¦å¤§æ‹¬å·ç½®äºè¡Œå°¾(.ccæ–‡ä»¶çš„å‡½æ•°å®ç°å¤„,å·¦å¤§æ‹¬å·ä½äºè¡Œé¦–),æˆ‘çš„ç†è§£æ˜¯ä»£ç çœ‹ä¸Šå»æ¯”è¾ƒç®€çº¦,æƒ³æƒ³è¡Œé¦–é™¤äº†å‡½æ•°ä½“è¢«ä¸€å¯¹å¤§æ‹¬å·å°åœ¨ä¸€èµ·ä¹‹å¤–,åªæœ‰å³å¤§æ‹¬å·çš„ä»£ç çœ‹ä¸Šå»ç¡®å®ä¹Ÿèˆ’æœ;Windowsé£æ ¼å°†å·¦å¤§æ‹¬å·ç½®äºè¡Œé¦–çš„ä¼˜ç‚¹æ˜¯åŒ¹é…æƒ…å†µä¸€ç›®äº†ç„¶.</li><li>80è¡Œé™åˆ¶äº‹å®ä¸Šæœ‰åŠ©äºé¿å…ä»£ç å¯è¯»æ€§å¤±æ§,æ¯”å¦‚è¶…å¤šé‡åµŒå¥—å—,è¶…å¤šé‡å‡½æ•°è°ƒç”¨ç­‰ç­‰.</li><li>Linuxä¸Šè®¾ç½®å¥½äº†Localeå°±å‡ ä¹ä¸€åŠ³æ°¸é€¸è®¾ç½®å¥½æ‰€æœ‰å¼€å‘ç¯å¢ƒçš„ç¼–ç ,ä¸åƒå¥‡è‘©çš„Windows.</li><li>Googleå¼ºè°ƒæœ‰ä¸€å¯¹if-elseæ—¶,ä¸è®ºæœ‰æ²¡æœ‰åµŒå¥—,éƒ½è¦æœ‰å¤§æ‹¬å·.Appleæ­£å¥½æœ‰æ ½è¿‡è·Ÿå¤´.</li><li>å…¶å®æˆ‘ä¸»å¼ æŒ‡é’ˆï¼åœ°å€æ“ä½œç¬¦ä¸å˜é‡åç´§é‚»,int<em>a,bvsint</em>a,b,æ–°æ‰‹ä¼šè¯¯ä»¥ä¸ºå‰è€…çš„bæ˜¯int*å˜é‡,ä½†åè€…å°±ä¸ä¸€æ ·äº†,é«˜ä¸‹ç«‹åˆ¤.</li><li>åœ¨è¿™é£æ ¼æŒ‡å—é‡Œæˆ‘æ‰åˆšçŸ¥é“C++åŸæ¥è¿˜æœ‰æ‰€è°“çš„Alternativeoperatorrepresentations,å¤§æ¦‚æ²¡äººç”¨å§.</li><li>æ³¨æ„æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨ï¼ˆConstructerInitializerListï¼‰ä¸åˆ—è¡¨åˆå§‹åŒ–ï¼ˆInitializerListï¼‰æ˜¯ä¸¤ç äº‹,æˆ‘å°±å·®ç‚¹æ··æ·†äº†å®ƒä»¬çš„ç¿»è¯‘.</li><li>äº‹å®ä¸Š,å¦‚æœæ‚¨ç†Ÿæ‚‰è‹±è¯­æœ¬èº«çš„ä¹¦å†™è§„åˆ™,å°±ä¼šå‘ç°è¯¥é£æ ¼æŒ‡å—åœ¨æ ¼å¼ä¸Šçš„è§„å®šä¸è‹±è¯­è¯­æ³•ç›¸å½“ä¸€è„‰ç›¸æ‰¿.æ¯”å¦‚æ™®é€šæ ‡ç‚¹ç¬¦å·å’Œå•è¯åé¢è¿˜æœ‰æ–‡æœ¬çš„è¯,æ€»ä¼šç•™ä¸€ä¸ªç©ºæ ¼;ç‰¹æ®Šç¬¦å·ä¸å•è¯ä¹‹é—´å°±ä¸ç”¨ç•™äº†,æ¯”å¦‚if(true)ä¸­çš„åœ†æ‹¬å·ä¸true.</li><li>æœ¬é£æ ¼æŒ‡å—æ²¡æœ‰æ˜ç¡®è§„å®švoidå‡½æ•°é‡Œè¦ä¸è¦ç”¨returnè¯­å¥,ä¸è¿‡å°±Googleå¼€æºé¡¹ç›®leveldbå¹¶æ²¡æœ‰å†™;æ­¤å¤–ä»Isablankreturnstatementattheendofafunctionwhosreturntypeisvoidnecessary?æ¥çœ‹,return;æ¯”return;æ›´çº¦å®šä¿—æˆï¼ˆäº‹å®ä¸Šcpplintä¼šå¯¹åè€…æŠ¥é”™,æŒ‡å‡ºåˆ†å·å‰æœ‰å¤šä½™çš„ç©ºæ ¼ï¼‰,ä¸”å¯ç”¨æ¥æå‰è·³å‡ºå‡½æ•°æ ˆ.</li></ol><h2 id="è§„åˆ™ç‰¹ä¾‹">10.è§„åˆ™ç‰¹ä¾‹</h2><ul><li>ä½¿ç”¨MicrosoftVisualC++è¿›è¡Œç¼–è¯‘æ—¶,å°†è­¦å‘Šçº§åˆ«è®¾ç½®ä¸º3æˆ–æ›´é«˜,å¹¶å°†æ‰€æœ‰è­¦å‘Š(warnings)å½“ä½œé”™è¯¯(errors)å¤„ç†.</li><li>ä¸è¦ä½¿ç”¨#pragmaonce;è€Œåº”è¯¥ä½¿ç”¨Googleçš„å¤´æ–‡ä»¶ä¿æŠ¤è§„åˆ™.å¤´æ–‡ä»¶ä¿æŠ¤çš„è·¯å¾„åº”è¯¥ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•</li></ul>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>google_style</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. æ‚é¡¹è®¨è®º</title>
    <link href="/2024/11/27/effective-cpp/9-%E6%9D%82%E9%A1%B9%E8%AE%A8%E8%AE%BA/"/>
    <url>/2024/11/27/effective-cpp/9-%E6%9D%82%E9%A1%B9%E8%AE%A8%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸è¦è½»å¿½ç¼–è¯‘å™¨çš„è­¦å‘Š">53. ä¸è¦è½»å¿½ç¼–è¯‘å™¨çš„è­¦å‘Š</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plain">class B&#123;<br>public:<br>    virtual void f() const;<br>&#125;<br><br>class D&#123;<br>    public:<br>    virtual void f();<br>&#125;<br></code></pre></td></tr></table></figure><p>å¸Œæœ›D::fé‡æ–°å®šä¹‰virtualå‡½æ•°B::fï¼ŒBçš„fæ˜¯ä¸ªconstæˆå‘˜å‡½æ•°ï¼Œè€ŒDä¸­æœªè¢«å£°æ˜ä¸ºconst</p><ol type="1"><li>ä¸¥è‚ƒå¯¹å¾…ç¼–è¯‘å™¨å‘å‡ºçš„è­¦å‘Šä¿¡æ¯ã€‚</li><li>ä¸è¦è¿‡åº¦ä¾èµ–ç¼–è¯‘å™¨çš„æŠ¥è­¦èƒ½åŠ›ï¼Œä¸åŒç¼–è¯‘å™¨çš„è­¦å‘Šä¿¡æ¯å¯èƒ½ä¸åŒ</li></ol><h2 id="è®©è‡ªå·±ç†Ÿæ‚‰åŒ…æ‹¬tr1åœ¨å†…çš„æ ‡å‡†ç¨‹åºåº“">54.è®©è‡ªå·±ç†Ÿæ‚‰åŒ…æ‹¬TR1åœ¨å†…çš„æ ‡å‡†ç¨‹åºåº“</h2><ol type="1"><li>TR1è¡¨ç¤ºâ€œTechnical Report 1"</li><li>TR1ç»„ä»¶å®ä¾‹<ol type="1"><li>æ™ºèƒ½æŒ‡é’ˆ trl::shared_ptrå’Œtr1::weak_ptr<ol type="1"><li>å‰è€…ä½œç”¨å¦‚å†…ç½®æŒ‡é’ˆï¼Œä½†ä¼šè®°å½•æœ‰å¤šå°‘ä¸ªtr1::shared_ptrså…±åŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚è¿™å°±æ˜¯å¼•ç”¨è®¡æ•°referencecounteringã€‚ä¸€æ—¦æœ€åä¸€ä¸ªè¿™æ ·çš„æŒ‡é’ˆè¢«é”€æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸€æ—¦æŸå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°å˜æˆï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚è¿™åœ¨éç¯å½¢æ•°æ®ç»“æ„ä¸­é˜²æ­¢èµ„æºæ³„éœ²å¾ˆæœ‰å¸®åŠ©ï¼Œ</li><li>å¦‚æœä¸¤ä¸ªæˆ–è€…å¤šä¸ªå¯¹è±¡å†…å«trl::shared_ptrså¹¶å½¢æˆç¯çŠ¶ï¼Œè¿™ä¸ªå”¤é†’ä¼šé€ æˆæ¯ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°éƒ½è¶…è¿‡0ï¼Œå³ä½¿æŒ‡å‘è¿™ä¸ªç¯å½¢çš„æ‰€æœ‰æŒ‡é’ˆéƒ½å·²è¢«é”€æ¯</li><li>è¿™å°±æ˜¯æœ‰trl::weak_ptrsçš„åŸå› ï¼Œå¹¶ä¸å‚ä¸å¼•ç”¨è®¡æ•°çš„è®¡ç®—ï¼›å½“æœ€åä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„trl:shared_ptrè¢«é”€æ¯ï¼Œçºµä½¿è¿˜æœ‰ä¸ªtrl::weak_ptrç»§ç»­æŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä»ä¼šè¢«åˆ é™¤ï¼Œè¯¥æƒ…å†µä¸‹çš„weak_ptrè¢«è‡ªåŠ¨æ ‡ç¤ºæ— æ•ˆ</li></ol></li></ol></li><li>trl::function<ol type="1"><li>è¡¨ç¤ºä»»ä½•å¯è°ƒç”¨ç‰©ï¼ˆä»»ä½•å‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡ï¼‰ï¼Œåªè¦ç­¾åç¬¦åˆç›®æ ‡</li><li>å‡è®¾æƒ³æ³¨å†Œä¸€ä¸ªcallbackå‡½æ•°</li><li>void registerCallback(std::stringfunc(int));å‚æ•°åç§°funcå¯æœ‰å¯æ— ï¼Œå¯ä»¥è¿™æ ·å£°æ˜voidregisterCallback(std::string (int));std::string(int)æ˜¯å‡½æ•°ç­¾åtrl::functionæ˜¯ä¸Šè¿°çš„å‡½æ•°æœ‰å¯èƒ½æ›´å¯Œå¼¹æ€§åœ°æ¥å—ä»»ä½•å¯è°ƒç”¨äº”ï¼Œåªè¦è¿™ä¸ªå¯è°ƒç”¨äº”æ¥å—ä¸€ä¸ªintæˆ–ä»»ä½•å¯æ‚²è½¬æ¢ä¸ºintçš„ä¸œè¥¿ï¼Œå¹¶è¿”å›ä¸€ä¸ªstringæˆ–è¿™å’Œå¯è¢«è½¬æ¢ä¸ºstringçš„ä¸œè¥¿</li><li>trl::functionæ˜¯ä¸ªtemplateï¼Œä»¥å…¶ç›®æ ‡å‡½æ•°çš„ç­¾åä¸ºå‚æ•°</li></ol></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">void registerCallback(std::tr1::function&lt;std::string (int)&gt; func);<br>//åªè¦è¯¥å¯è°ƒç”¨ç‰©çš„ç­¾åä¸std::string(int)ä¸€è‡´<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>tr1::bind<ol type="1"><li>èƒ½å¤ŸåšSTLç»‘å®šå™¨bind1stå’Œbind2ndæ‰€åšçš„æ¯ä¸€ä»¶äº‹ï¼Œè€Œåˆæ›´å¤š</li><li>ä¸å‰ä»»ç»‘å®šå™¨ä¸åŒçš„æ˜¯ï¼Œtr1::bindå¯ä»¥å’ŒconståŠnon-constæˆå‘˜å‡½æ•°ååŒè¿ä½œï¼Œå¯ä»¥å’Œby-referenceå‚æ•°ååŒè¿ä½œ</li><li>ä¸éœ€è¦ç‰¹æ®ŠååŠ©å°±å¯ä»¥å¤„ç†å‡½æ•°æŒ‡é’ˆï¼Œæ‰€ä»¥æˆ‘ä»¬è°ƒç”¨tr1::bindä¹‹å‰ä¸å¿…å†è¢«ä»€ä¹ˆptr_fun,men_funæˆ–è€…mem_fun_refæå¾—ä¸€å›¢æ··ä¹±ã€‚</li><li>tr1::bindæ˜¯ç¬¬äºŒä»£ç»‘å®šå·¥å…·ï¼Œæ¯”å‰ä¸€ä»£å¥½å¾ˆå¤š</li></ol></li><li>å½¼æ­¤äº’ä¸ç›¸å¹²çš„ç‹¬ç«‹æœºèƒ½ï¼š<ol type="1"><li>hash tablesï¼š<ol type="1"><li>ç”¨æ¥å®ç°setsï¼Œmultisetsï¼Œmapså’Œmulti-maps</li><li>æ¯ä¸ªæ–°å®¹å™¨çš„æ¥å£éƒ½æ˜¯å…¶å‰ä»»å¯¹åº”å®¹å™¨å¡‘æ¨¡è€Œæˆ</li><li>åç§°tr1::unordered_set, tr1::unordered_multiset, tr1::unordered_map,tr1::unordered_multimap</li><li>è¿™äº›åå­—å¼ºè°ƒä»–ä»¬å’Œsetï¼Œmultiset, mapæˆ–è€…multimapä¸åŒï¼Œä»¥hanshuä¸ºåŸºç¡€çš„è¿™äº›TR1å®¹å™¨å†…çš„å…ƒç´ å¹¶æ— ä»»ä½•å¯é¢„æœŸçš„æ¬¡åº</li></ol></li><li>æ­£åˆ™è¡¨è¾¾å¼<ol type="1"><li>åŒ…æ‹¬æ­£åˆ™è¡¨è¾¾å¼ä¸ºåŸºç¡€çš„å­—ç¬¦ä¸²æŸ¥æ‰¾å’Œæ›¿æ¢ï¼Œ</li><li>æˆ–è€…ä»æŸä¸ªåŒ¹é…å­—ç¬¦ä¸²åˆ°å¦ä¸€åŒ¹é…å­—ç¬¦ä¸²çš„æ³¨æ„è¿­ä»£ç­‰</li></ol></li><li>Tuplesï¼ˆå˜é‡ç»„ï¼‰ï¼Œè¿™æ˜¯æ ‡å‡†ç¨‹åºåº“ä¸­pair templateçš„æ–°ä¸€ä»£åˆ¶å“ã€‚<ol type="1"><li>pairåªèƒ½æœ‰ä¸¤ä¸ªå¯¹è±¡</li><li>tr1::tupleå¯ä»¥æŒæœ‰ä»»æ„ä¸ªæ•°çš„å¯¹è±¡ã€‚</li></ol></li><li>tr1::arrayï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ªSTLåŒ–çš„æ•°ç»„ï¼Œå³ä¸€ä¸ªæ”¯æŒæˆå‘˜å‡½æ•°å¦‚beginå’Œendçš„æ•°ç»„ï¼Œä¸è¿‡tr1::arrayçš„å¤§å°å›ºå®šï¼Œå¹¶ä¸é€‚ç”¨åŠ¨æ€å†…å­˜</li><li>tr1::mem_fn<ol type="1"><li>è¿™æ˜¯ä¸ªè¯­å¥æ„é€ ä¸Šä¸æˆå‘˜å‡½æ•°æŒ‡é’ˆä¸€æ ·çš„ä¸œè¥¿</li><li>çº³å…¥å¹¶æ‰©å……äº†c++98çš„mem_funå’Œmem_fun_refçš„èƒ½åŠ›</li></ol></li><li>tr1::reference_wrapper<ol type="1"><li>è®©referenceçš„è¡Œä¸ºæ›´åƒå¯¹è±¡çš„è®¾æ–½</li><li>å¯ä»¥é€ æˆå®¹å™¨â€œçŠ¹å¦‚æŒæœ‰referenceâ€ï¼Œå®é™…ä¸Šï¼Œå®¹å™¨åªèƒ½åƒæœ‰å¯¹è±¡æˆ–æŒ‡é’ˆ</li></ol></li><li>éšæœºæ•°ç”Ÿæˆå·¥å…·ï¼Œå¤§å¤§è¶…è¶Šäº†rand</li><li>æ•°å­¦ç‰¹æ®Šå‡½æ•°ï¼ŒåŒ…æ‹¬laguerreå¤šé¡¹å¼ï¼ŒBesselå‡½æ•°ï¼Œå®Œå…¨æ¤­åœ†ç§¯åˆ†ä»¥åŠæ›´å¤šæ•°å­¦å‡½æ•°</li><li>C99å…¼å®¹æ‰©å……ã€‚<ol type="1"><li>è¿™æ˜¯ä¸€å¤§å †å‡½æ•°å’Œæ¨¡æ¿ï¼Œç”¨æ¥å°†è®¸å¤šæ–°çš„c99ç¨‹åºåº“ç‰¹æ€§å¸¦è¿›C++</li></ol></li></ol></li><li>æ›´ç²¾å·§çš„templateç¼–ç¨‹<ol type="1"><li>Type traits<ol type="1"><li>ä¸€ç»„trait classesï¼Œç”¨æ¥ä¸€åŒç±»å‹çš„ç¼–è¯‘æœŸä¿¡æ¯</li><li>ç»™äºˆä¸€ä¸ªç±»å‹Tï¼ŒTR1çš„typetraitså¯ä»¥æŒ‡å‡ºTæ˜¯å¦æ˜¯ä¸ªå†…ç½®ç±»å‹ï¼Œæ˜¯å¦ä¸€åŒvirtualææ„å‡½æ•°ï¼Œæ˜¯å¦æ˜¯ä¸ªemptyclassï¼Œå¯éšå¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹U</li><li>ä¹Ÿå¯ä»¥æ˜¾ç°è¯¥ç»™å®šç±»å‹ä¹‹é€‚å½“é½ä½ï¼Œè¿™å¯¹å®šåˆ¶å‹å†…å­˜åˆ†é…å™¨è€Œè¨€æ˜¯å…³é”®ä¿¡æ¯ã€‚</li></ol></li><li>tr1::result_of<ol type="1"><li>è¿™æ˜¯ä¸ªtemplateï¼Œç”¨æ¥æ¨å¯¼å‡½æ•°è°ƒç”¨çš„è¿”å›ç±»å‹</li><li>åœ¨ç¼–å†™templatesæ—¶ï¼Œèƒ½å¤Ÿrefertoå‡½æ•°è°ƒç”¨åŠ¨ä½œè¿”å›çš„å¯¹è±¡çš„ç±»å‹å¾€å¾€å¾ˆé‡è¦ï¼Œä½†æ˜¯è¯¥ç±»å‹æœ‰å¯èƒ½ä»¥å¤æ‚çš„æ–¹å¼å´å†³äºå‡½æ•°çš„å‚æ•°ç±»å‹</li><li>result_ofä½¿å¾—â€refer toå‡½æ•°è¿”å›ç±»å‹â€œå˜å¾—ååˆ†å®¹æ˜“</li></ol></li></ol></li><li>C++æ ‡å‡†ç¨‹åºåº“çš„ä¸»è¦æœºèƒ½ç”±STLã€iostreamsã€localesç»„æˆï¼Œå¹¶åŒ…å«C99æ ‡å‡†ç¨‹åºåº“</li></ol><h2 id="è®©è‡ªå·±ç†Ÿæ‚‰boost">55. è®©è‡ªå·±ç†Ÿæ‚‰Boost</h2><ol type="1"><li>å­—ç¬¦ä¸²ä¸æ–‡æœ¬å¤„ç†<ol type="1"><li>è¦†ç›–å…·å¤‡ç±»å‹å®‰å…¨çš„printf-likeæ ¼å¼åŒ–åŠ¨ä½œã€æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥åŠè¯­æ±‡å•å…ƒåˆ‡å‰²å’Œè§£æ</li></ol></li><li>å®¹å™¨ï¼Œè¦†ç›–â€æ¥å£ä¸STLç›¸ä¼¼ä¸”å¤§å°å›ºå®šâ€œçš„æ•°ç»„ã€å¤§å°å¯å˜çš„bitsetsä»¥åŠå¤šç»´æ•°ç»„</li><li>å‡½æ•°å¯¹è±¡ä¸é«˜çº§ç¼–ç¨‹<ol type="1"><li>è¦†ç›–è‹¥å¹²è¢«ç”¨çˆ±ä½œä¸ºTR1æœºèƒ½åŸºç¡€çš„ç¨‹åºåº“ã€‚å…¶ä¸­ä¸€ä¸ªæœ‰è¶£çš„ç¨‹åºåº“æ˜¯Lambdaï¼Œå¯ä»¥éšæ—¶éšåœ°åˆ›å»ºå‡½æ•°å¯¹è±¡</li><li></li></ol></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">using namespace boost::lambda;<br>std::vector&lt;int&gt; v;<br><br>std::for_each(v.begin(),v.end()),<br>    std::cout &lt;&lt; _1 *2 + 10 &lt;&lt; &quot;\n&quot;);<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>æ³›å‹ç¼–ç¨‹ï¼Œè¦†ç›–ä¸€å¤§ç»„traits classes</li><li>æ¨¡æ¿å…ƒç¼–ç¨‹<ol type="1"><li>è¦†ç›–ä¸€ä¸ªé’ˆå¯¹ç¼–è¯‘æœŸassertionsè€Œå†™çš„ç¨‹åºåº“ï¼Œä»¥åŠBoostMPLç¨‹åºåº“ï¼Œæä¾›äº†æå¥½çš„ä¸œè¥¿ï¼Œå…¶ä¸­æ”¯æŒç¼–è¯‘å™¨å®ç‰©è¯¸å¦‚typesçš„STL-likeæ•°æ®ç»“æ„ç­‰</li><li></li><li>æ•°å­¦å’Œæ•°å€¼<ol type="1"><li>åŒ…æ‹¬æœ‰ç†æ•°ï¼Œå…«å…ƒæ•°å’Œå››å…ƒæ•°ã€å…¬çº¦æ•°å’Œå°‘è§çš„å¤šé‡è¿ç®—ã€éšæœºæ•°</li></ol></li><li>æ­£ç¡®æ€§å’Œæµ‹è¯•<ol type="1"><li>è¦†ç›–ç”¨æ¥å°†éšå¼æ¨¡æ¿æ¥å£å½¢å¼åŒ–çš„ç¨‹åºåº“ï¼Œä»¥åŠé’ˆå¯¹"æµ‹è¯•æœ‰é™"ç¼–ç¨‹å½¢æ€è€Œè®¾è®¡çš„æªæ–½</li></ol></li><li>æ•°æ®ç»“æ„<ol type="1"><li>è¦†ç›–ç±»å‹å®‰å…¨çš„unionsï¼Œä»¥åŠtupleç¨‹åºåº“ï¼ˆæ˜¯TR1åŒç±»æœºèƒ½çš„åŸºç¡€ï¼‰</li></ol></li><li>è¯­è¨€è§çš„æ”¯æŒ<ol type="1"><li>åŒ…æ‹¬å…è®¸C++å’Œpythonä¹‹é—´çš„æ— ç¼äº’æ“ä½œæ€§</li></ol></li><li>å†…å­˜<ol type="1"><li>è¦†ç›–Poolç¨‹åºåº“ï¼Œç”¨æ¥åšå‡ºé«˜æ•ˆç‡è€ŒåŒºå—å¤§å°å›ºå®šçš„åˆ†é…å™¨ä»¥åŠå¤šå˜åŒ–çš„æ™ºèƒ½æŒ‡é’ˆï¼ŒåŒ…æ‹¬ï¼ˆä½†ä¸ä»…ä»…æ˜¯ï¼‰TR1æ™ºèƒ½æŒ‡é’ˆã€‚</li><li>å¦æœ‰ä¸€ä¸ªnon-TR1æ™ºèƒ½æŒ‡é’ˆæ˜¯scoped_arrayï¼Œæ˜¯ä¸ªauto_ptr-likeæ™ºèƒ½æŒ‡é’ˆï¼Œç”¨æ¥åŠ¨æ€åˆ†é…æ•°ç»„</li></ol></li><li>æ‚é¡¹<ol type="1"><li>åŒ…æ‹¬CRCæ£€éªŒã€æ—¥æœŸå’Œæ—¶é—´çš„å¤„ç†ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ¥å›ç§»åŠ¨ç­‰ç­‰</li></ol></li></ol></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">typedef boost::mpl::list&lt;float, double, long double&gt; floats;<br>typedef boost::mpl::push_front&lt;floats, int&gt;::type types;<br></code></pre></td></tr></table></figure><p>è¿™æ ·çš„å®¹å™¨ç±»å‹å¸¸è¢«æˆä¸ºtypelists</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. å®šåˆ¶newå’Œdelete</title>
    <link href="/2024/11/27/effective-cpp/8-%E5%AE%9A%E5%88%B6new%E5%92%8Cdelete/"/>
    <url>/2024/11/27/effective-cpp/8-%E5%AE%9A%E5%88%B6new%E5%92%8Cdelete/</url>
    
    <content type="html"><![CDATA[<h2 id="äº†è§£new-handlerçš„è¡Œä¸º">49. äº†è§£new-handlerçš„è¡Œä¸º</h2><ol type="1"><li>å½“operatornewæ— æ³•æ»¡è¶³æŸä¸€å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä»¥å‰å®ƒä¼šè¿”å›ä¸€ä¸ªu1æŒ‡é’ˆï¼ŒæŸäº›æ—§å¼ç¼–è¯‘å™¨ç›®å‰ä¹Ÿè¿˜é‚£ä¹ˆåšã€‚</li><li>å½“operatornewæŠ›å‡ºå¼‚å¸¸ä»¥åæ˜ ä¸€ä¸ªæœªè·æ»¡è¶³çš„å†…å­˜éœ€æ±‚ä¹‹å‰ï¼Œå®ƒä¼šå…ˆè°ƒç”¨ä¸€ä¸ªå®¢æˆ·æŒ‡å®šçš„é”™è¯¯å¤„ç†å‡½æ•°ï¼Œä¸€ä¸ªæ‰€è°“çš„new_handlerã€‚</li><li>ä¸ºäº†æŒ‡å®šè¿™ä¸ªâ€œç”¨ä»¥å¤„ç†å†…å­˜ä¸è¶³â€çš„å‡½æ•°ï¼Œå®¢æˆ·å¿…é¡»è°ƒç”¨set newhandlerï¼Œé‚£æ˜¯å£°æ˜äº<new>çš„ä¸ªæ ‡å‡†ç¨‹åºåº“å‡½æ•°ï¼š</new></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">namespace</span> std&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*new_handler)</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function">new_handler <span class="hljs-title">set_new_handler</span><span class="hljs-params">(new_handler p)</span> <span class="hljs-title">throw</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>set_new_handlerçš„å‚æ•°æ˜¯ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘operatornewæ— æ³•åˆ†é…è¶³å¤Ÿå†…å­˜æ—¶è¯¥è¢«è°ƒç”¨çš„å‡½æ•°ã€‚å…¶è¿”å›å€¼ä¹Ÿæ˜¯ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘set newhandlerè¢«è°ƒç”¨å‰æ­£åœ¨æ‰§è¡Œï¼ˆä½†é©¬ä¸Šå°±è¦è¢«æ›¿æ¢)çš„é‚£ä¸ªnew-handlerå‡½æ•°ã€‚</li><li>è®¾è®¡è‰¯å¥½çš„new-handlerå‡½æ•°å¿…é¡»åšä»¥ä¸‹äº‹æƒ…ï¼š</li><li>è®©æ›´å¤šå†…å­˜å¯è¢«ä½¿ç”¨ã€‚è¿™ä¾¿é€ æˆoperatornewå†…çš„ä¸‹ä¸€æ¬¡å†…å­˜åˆ†é…åŠ¨ä½œå¯èƒ½æˆåŠŸã€‚å®ç°æ­¤ç­–ç•¥çš„ä¸€ä¸ªåšæ³•æ˜¯ï¼Œç¨‹åºä¸€å¼€å§‹æ‰§è¡Œå°±åˆ†é…ä¸€å¤§å—å†…å­˜ï¼Œè€Œåå½“new-handlerç¬¬ä¸€æ¬¡è¢«è°ƒç”¨ï¼Œå°†å®ƒä»¬é‡Šè¿˜ç»™ç¨‹åºä½¿ç”¨ã€‚</li><li>å®‰è£…å¦ä¸€ä¸ªnew-handlerã€‚å¦‚æœç›®å‰è¿™ä¸ªnew-handleræ— æ³•å–å¾—æ›´å¤šå¯ç”¨å†…å­˜ï¼Œæˆ–è®¸å®ƒçŸ¥é“å¦å¤–å“ªä¸ªnew-handleræœ‰æ­¤èƒ½åŠ›ã€‚æœçœŸå¦‚æ­¤ï¼Œç›®å‰è¿™ä¸ªnew-handlerå°±å¯ä»¥å®‰è£…å¦å¤–é‚£ä¸ªnew-handlerä»¥æ›¿æ¢è‡ªå·±ï¼ˆåªè¦è°ƒç”¨setnew handler)ã€‚ä¸‹æ¬¡å½“operatornewè°ƒç”¨new-handler,`è°ƒç”¨çš„å°†æ˜¯æœ€æ–°å®‰è£…çš„é‚£ä¸ªã€‚ï¼ˆè¿™ä¸ªæ—‹å¾‹çš„å˜å¥ä¹‹ä¸€æ˜¯è®©new-handlerä¿®æ”¹è‡ªå·±çš„è¡Œä¸ºï¼Œäºæ˜¯å½“å®ƒä¸‹æ¬¡è¢«è°ƒç”¨ï¼Œå°±ä¼šåšæŸäº›ä¸åŒçš„äº‹ã€‚ä¸ºè¾¾æ­¤ç›®çš„ï¼Œåšæ³•ä¹‹ä¸€æ˜¯ä»¤new-handlerä¿®æ”¹â€œä¼šå½±å“new-handlerè¡Œä¸ºâ€çš„staticæ•°æ®ã€namespaceæ•°æ®æˆ–globalæ•°æ®ã€‚)</li><li>å¸é™¤new-handler,ä¹Ÿå°±æ˜¯å°†nullæŒ‡é’ˆä¼ ç»™set newhandlerã€‚ä¸€æ—¦æ²¡æœ‰å®‰è£…ä»»ä½•new-handler, operatornewä¼šåœ¨å†…å­˜åˆ†é…ä¸æˆåŠŸæ—¶æŠ›å‡ºå¼‚å¸¸ã€‚</li><li>æŠ›å‡ºbad alloc(æˆ–æ´¾ç”Ÿè‡ªbad alloc)çš„å¼‚å¸¸ã€‚è¿™æ ·çš„å¼‚å¸¸ä¸ä¼šè¢«operatornewæ•æ‰ï¼Œå› æ­¤ä¼šè¢«ä¼ æ’­åˆ°å†…å­˜ç´¢æ±‚å¤„ã€‚</li><li>ä¸è¿”å›ï¼Œé€šå¸¸è°ƒç”¨abortæˆ–exitã€‚</li><li>C++å¹¶ä¸æ”¯æŒclassä¸“å±ä¹‹new-handlers,ä½†å…¶å®ä¹Ÿä¸éœ€è¦ã€‚ä½ å¯ä»¥è‡ªå·±å®ç°å‡ºè¿™ç§è¡Œä¸ºã€‚åªéœ€ä»¤æ¯ä¸€ä¸ªclassæä¾›è‡ªå·±çš„setnew handlerå’Œoperator,newå³å¯ã€‚å…¶ä¸­set newhandlerä½¿å®¢æˆ·å¾—ä»¥æŒ‡å®šclassä¸“å±çš„new-handler(å°±åƒæ ‡å‡†çš„set newhandlerå…è®¸å®¢æˆ·æŒ‡å®šglobal new-handler),è‡³äºoperatornew.åˆ™ç¡®ä¿åœ¨åˆ†é…classå¯¹è±¡å†…å­˜çš„è¿‡ç¨‹ä¸­ä»¥classä¸“å±ä¹‹new-handleræ›¿æ¢globalnew-handlerã€‚</li><li>set_new_handlerå…è®¸å®¢æˆ·æŒ‡å®šä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å†…å­˜åˆ†é…æ— æ³•è·å¾—æ»¡è¶³æ—¶è¢«è°ƒç”¨ã€‚</li><li>Nothrownewæ˜¯ä¸€ä¸ªé¢‡ä¸ºå±€é™çš„å·¥å…·ï¼Œå› ä¸ºå®ƒåªé€‚ç”¨äºå†…å­˜åˆ†é…ï¼›åç»§çš„æ„é€ å‡½æ•°è°ƒç”¨è¿˜æ˜¯å¯èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚</li></ol><h2 id="äº†è§£newå’Œdeleteçš„åˆç†æ›¿æ¢æ—¶æœº">50.äº†è§£newå’Œdeleteçš„åˆç†æ›¿æ¢æ—¶æœº</h2><ol type="1"><li>ä¸ºä»€ä¹ˆæ›¿æ¢ç¼–è¯‘å™¨æä¾›çš„operator newæˆ–operator deleteå‘¢ï¼Ÿ</li><li><strong>ç”¨æ¥æ£€æµ‹è¿ç”¨ä¸Šçš„é”™è¯¯ã€‚</strong>å¦‚æœå°†â€œnewæ‰€å¾—å†…å­˜â€deleteæ‰å´ä¸å¹¸å¤±è´¥ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼(memoryleaks)ã€‚å¦‚æœåœ¨â€œnewæ‰€å¾—å†…å­˜â€èº«ä¸Šå¤šæ¬¡deleteåˆ™ä¼šå¯¼è‡´ä¸ç¡®å®šè¡Œä¸ºã€‚å¦‚æœoperatornewæŒæœ‰ä¸€ä¸²åŠ¨æ€åˆ†é…æ‰€å¾—åœ°å€ï¼Œè€Œoperatordeleteå°†åœ°å€ä»ä¸­ç§»èµ°ï¼Œå€’æ˜¯å¾ˆå®¹æ˜“æ£€æµ‹å‡ºä¸Šè¿°é”™è¯¯ç”¨æ³•ã€‚</li><li>ä¸ºäº†å¼ºåŒ–æ•ˆèƒ½ã€‚ç¼–è¯‘å™¨æ‰€å¸¦çš„operator newå’Œoperatordeleteä¸»è¦ç”¨äºä¸€èˆ¬ç›®çš„ï¼Œå®ƒä»¬ä¸ä½†å¯è¢«é•¿æ—¶é—´æ‰§è¡Œçš„ç¨‹åºï¼ˆä¾‹å¦‚ç½‘é¡µæœåŠ¡å™¨ï¼Œwebservers)æ¥å—ï¼Œä¹Ÿå¯è¢«æ‰§è¡Œæ—¶é—´å°‘äºä¸€ç§’çš„ç¨‹åºæ¥å—ã€‚å®ƒä»¬å¿…é¡»å¤„ç†ä¸€ç³»åˆ—éœ€æ±‚ï¼ŒåŒ…æ‹¬å¤§å—å†…å­˜ã€å°å—å†…å­˜ã€å¤§å°æ··åˆå‹å†…å­˜ã€‚å®ƒä»¬å¿…é¡»æ¥çº³å„ç§åˆ†é…å½¢æ€ï¼ŒèŒƒå›´ä»ç¨‹åºå­˜æ´»æœŸé—´çš„å°‘é‡åŒºå—åŠ¨æ€åˆ†é…ï¼Œåˆ°å¤§æ•°é‡çŸ­å‘½å¯¹è±¡çš„æŒç»­åˆ†é…å’Œå½’è¿˜ã€‚å®ƒä»¬å¿…é¡»è€ƒè™‘ç ´ç¢é—®é¢˜(fragmentation),è¿™æœ€ç»ˆä¼šå¯¼è‡´ç¨‹åºæ— æ³•æ»¡è¶³å¤§åŒºå—å†…å­˜è¦æ±‚ï¼Œå³ä½¿å½¼æ—¶æœ‰æ€»é‡è¶³å¤Ÿä½†åˆ†æ•£ä¸ºè®¸å¤šå°åŒºå—çš„è‡ªç”±å†…å­˜ã€‚</li><li>ç°å®å­˜åœ¨è¿™ä¹ˆäº›ä¸ªå¯¹å†…å­˜ç®¡ç†å™¨çš„è¦æ±‚ï¼Œå› æ­¤ç¼–è¯‘å™¨æ‰€å¸¦çš„operatornewså’Œoperatordeletesé‡‡å–ä¸­åº¸ä¹‹é“ä¹Ÿå°±ä¸ä»¤äººæƒŠè®¶äº†ã€‚å®ƒä»¬çš„å·¥ä½œå¯¹æ¯ä¸ªäººéƒ½æ˜¯é€‚åº¦åœ°å¥½ï¼Œä½†ä¸å¯¹ç‰¹å®šä»»ä½•äººæœ‰æœ€ä½³è¡¨ç°ã€‚å¦‚æœä½ å¯¹ä½ çš„ç¨‹åºçš„åŠ¨æ€å†…å­˜è¿ç”¨å‹æ€æœ‰æ·±åˆ»çš„äº†è§£ï¼Œé€šå¸¸å¯ä»¥å‘ç°ï¼Œå®šåˆ¶ç‰ˆä¹‹peratornewå’Œoperatordeleteæ€§èƒ½èƒœè¿‡ç¼ºçœç‰ˆæœ¬ã€‚è¯´åˆ°èƒœè¿‡ï¼Œæˆ‘çš„æ„æ€æ˜¯å®ƒä»¬æ¯”è¾ƒå¿«ï¼Œæœ‰æ—¶ç”šè‡³å¿«å¾ˆå¤šï¼Œè€Œä¸”å®ƒä»¬éœ€è¦çš„å†…å­˜æ¯”è¾ƒå°‘ï¼Œæœ€é«˜å¯çœ50%ã€‚å¯¹æŸäº›ï¼ˆè™½ç„¶ä¸æ˜¯æ‰€æœ‰ï¼‰åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œå°†æ—§æœ‰çš„ï¼ˆç¼–è¯‘å™¨è‡ªå¸¦çš„ï¼‰newå’Œdeleteæ›¿æ¢ä¸ºå®šåˆ¶ç‰ˆæœ¬ï¼Œæ˜¯è·å¾—é‡å¤§æ•ˆèƒ½æå‡çš„åŠæ³•ä¹‹ä¸€ã€‚</li><li>ä¸ºäº†æ”¶é›†ä½¿ç”¨ä¸Šçš„ç»Ÿè®¡æ•°æ®ã€‚åœ¨ä¸€å¤´æ ½è¿›å®šåˆ¶å‹newså’Œå®šåˆ¶å‹deletesä¹‹å‰ï¼Œç†å½“å…ˆæ”¶é›†ä½ çš„è½¯ä»¶å¦‚ä½•ä½¿ç”¨å…¶åŠ¨æ€å†…å­˜ã€‚åˆ†é…åŒºå—çš„å¤§å°åˆ†å¸ƒå¦‚ä½•ï¼Ÿå¯¿å‘½åˆ†å¸ƒå¦‚ä½•ï¼Ÿå®ƒä»¬å€¾å‘äºä»¥FIFO(å…ˆè¿›å…ˆå‡º)æ¬¡åºæˆ–LFO(åè¿›å…ˆå‡º)æ¬¡åºæˆ–éšæœºæ¬¡åºæ¥åˆ†é…å’Œå½’è¿˜ï¼Ÿå®ƒä»¬çš„è¿ç”¨å‹æ€æ˜¯å¦éšæ—¶é—´æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ çš„è½¯ä»¶åœ¨ä¸åŒçš„æ‰§è¡Œé˜¶æ®µæœ‰ä¸åŒçš„åˆ†é…/å½’è¿˜å½¢æ€å—ï¼Ÿä»»ä½•æ—¶åˆ»æ‰€ä½¿ç”¨çš„æœ€å¤§åŠ¨æ€åˆ†é…é‡(é«˜æ°´ä½)æ˜¯å¤šå°‘ï¼Ÿè‡ªè¡Œå®šä¹‰operatornewå’Œoperator deleteä½¿æˆ‘ä»¬å¾—ä»¥è½»æ¾æ”¶é›†åˆ°è¿™äº›ä¿¡æ¯ã€‚</li><li>å¦ä¸€ä¸ªé€‰æ‹©æ˜¯å¼€æ”¾æºç (opensource)é¢†åŸŸä¸­çš„å†…å­˜ç®¡ç†å™¨ã€‚å®ƒä»¬å¯¹è®¸å¤šå¹³å°éƒ½å¯ç”¨ï¼Œä½ å¯ä»¥ä¸‹è½½å¹¶è¯•è¯•ã€‚Boostç¨‹åºåº“ï¼ˆè§æ¡æ¬¾55ï¼‰çš„Poolå°±æ˜¯è¿™æ ·ä¸€ä¸ªåˆ†é…å™¨ï¼Œå®ƒå¯¹äºæœ€å¸¸è§çš„â€œåˆ†é…å¤§é‡å°å‹å¯¹è±¡â€å¾ˆæœ‰å¸®åŠ©ã€‚</li><li>ä¸ºäº†å¢åŠ åˆ†é…å’Œå½’è¿˜çš„é€Ÿåº¦ã€‚æ³›ç”¨å‹åˆ†é…å™¨å¾€å¾€ï¼ˆè™½ç„¶å¹¶ä¸æ€»æ˜¯ï¼‰æ¯”å®šåˆ¶å‹åˆ†é…å™¨æ…¢ï¼Œç‰¹åˆ«æ˜¯å½“å®šåˆ¶å‹åˆ†é…å™¨ä¸“é—¨é’ˆå¯¹æŸç‰¹å®šç±»å‹ä¹‹å¯¹è±¡è€Œè®¾è®¡æ—¶ã€‚Classä¸“å±åˆ†é…å™¨æ˜¯â€œåŒºå—å°ºå¯¸å›ºå®šâ€ä¹‹åˆ†é…å™¨å®ä¾‹ï¼Œä¾‹å¦‚Boostæä¾›çš„Poolç¨‹åºåº“ä¾¿æ˜¯ã€‚å¦‚æœä½ çš„ç¨‹åºæ˜¯ä¸ªå•çº¿ç¨‹ç¨‹åºï¼Œä½†ä½ çš„ç¼–è¯‘å™¨æ‰€å¸¦çš„å†…å­˜ç®¡ç†å™¨å…·å¤‡çº¿ç¨‹å®‰å…¨ï¼Œä½ æˆ–è®¸å¯ä»¥å†™ä¸ªä¸å…·çº¿ç¨‹å®‰å…¨çš„åˆ†é…å™¨è€Œå¤§å¹…æ”¹å–„é€Ÿåº¦ã€‚å½“ç„¶ï¼Œåœ¨è·å¾—'operatornewå’Œoperatordeleteæœ‰åŠ å¿«ç¨‹åºé€Ÿåº¦çš„ä»·å€¼â€è¿™ä¸ªç»“è®ºä¹‹å‰ï¼Œé¦–å…ˆè¯·åˆ†æä½ çš„ç¨‹åºï¼Œç¡®è®¤ç¨‹åºç“¶é¢ˆçš„ç¡®å‘ç”Ÿåœ¨é‚£äº›å†…å­˜å‡½æ•°èº«ä¸Šã€‚</li><li>ä¸ºäº†é™ä½ç¼ºçœå†…å­˜ç®¡ç†å™¨å¸¦æ¥çš„ç©ºé—´é¢å¤–å¼€é”€ã€‚æ³›ç”¨å‹å†…å­˜ç®¡ç†å™¨å¾€å¾€ï¼ˆè™½ç„¶å¹¶éæ€»æ˜¯)ä¸åªæ¯”å®šåˆ¶å‹æ…¢ï¼Œå®ƒä»¬å¾€å¾€è¿˜ä½¿ç”¨æ›´å¤šå†…å­˜ï¼Œé‚£æ˜¯å› ä¸ºå®ƒä»¬å¸¸å¸¸åœ¨æ¯ä¸€ä¸ªåˆ†é…åŒºå—èº«ä¸Šæ‹›å¼•æŸäº›é¢å¤–å¼€é”€ã€‚é’ˆå¯¹å°å‹å¯¹è±¡è€Œå¼€å‘çš„åˆ†é…å™¨ï¼ˆä¾‹å¦‚Boostçš„Poolç¨‹åºåº“)æœ¬è´¨ä¸Šæ¶ˆé™¤äº†è¿™æ ·çš„é¢å¤–å¼€é”€ã€‚</li><li>ä¸ºäº†å¼¥è¡¥ç¼ºçœåˆ†é…å™¨ä¸­çš„éæœ€ä½³é½ä½(suboptimalalignment)ã€‚ä¸€å¦‚å…ˆå‰æ‰€è¯´ï¼Œåœ¨x86ä½“ç³»ç»“æ„.ä¸Šdoublesçš„è®¿é—®æœ€æ˜¯å¿«é€Ÿä¸€å¦‚æœå®ƒä»¬éƒ½æ˜¯8-byteé½ä½ã€‚ä½†æ˜¯ç¼–è¯‘å™¨è‡ªå¸¦çš„operatornewså¹¶ä¸ä¿è¯å¯¹åŠ¨æ€åˆ†é…è€Œå¾—çš„doublesé‡‡å–8-byteé½ä½ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ç¼ºçœçš„operatornewæ›¿æ¢ä¸ºä¸€ä¸ª8-byteé½ä½ä¿è¯ç‰ˆï¼Œå¯å¯¼è‡´ç¨‹åºæ•ˆç‡å¤§å¹…æå‡ã€‚</li><li>ä¸ºäº†å°†ç›¸å…³å¯¹è±¡æˆç°‡é›†ä¸­ã€‚å¦‚æœä½ çŸ¥é“ç‰¹å®šä¹‹æŸä¸ªæ•°æ®ç»“æ„å¾€å¾€è¢«ä¸€èµ·ä½¿ç”¨ï¼Œè€Œä½ åˆå¸Œæœ›åœ¨å¤„ç†è¿™äº›æ•°æ®æ—¶å°†â€œå†…å­˜é¡µé”™è¯¯â€(pagefaults)çš„é¢‘ç‡é™è‡³æœ€ä½ï¼Œé‚£ä¹ˆä¸ºæ­¤æ•°æ®ç»“æ„åˆ›å»ºå¦ä¸€ä¸ªheapå°±æœ‰æ„ä¹‰ï¼Œè¿™ä¹ˆä¸€æ¥å®ƒä»¬å°±å¯ä»¥è¢«æˆç°‡é›†ä¸­åœ¨å°½å¯èƒ½å°‘çš„å†…å­˜é¡µ(pagesï¼‰.ä¸Šã€‚newå’Œdeleteçš„â€œplacementç‰ˆæœ¬â€ï¼ˆè§æ¡æ¬¾52)æœ‰å¯èƒ½å®Œæˆè¿™æ ·çš„é›†ç°‡è¡Œä¸ºã€‚</li><li>ä¸ºäº†è·å¾—éä¼ ç»Ÿçš„è¡Œä¸ºã€‚æœ‰æ—¶å€™ä½ ä¼šå¸Œæœ›operatorsnewå’Œdeleteåšç¼–è¯‘å™¨é™„å¸¦ç‰ˆæ²¡åšçš„æŸäº›äº‹æƒ…ã€‚ä¾‹å¦‚ä½ å¯èƒ½ä¼šå¸Œæœ›åˆ†é…å’Œå½’è¿˜å…±äº«å†…å­˜(sharedmemory)å†…çš„åŒºå—ï¼Œä½†å”¯ä¸€èƒ½å¤Ÿç®¡ç†è¯¥å†…å­˜çš„åªæœ‰CAPIå‡½æ•°ï¼Œé‚£ä¹ˆå†™ä¸‹ä¸€ä¸ªå®šåˆ¶ç‰ˆnewå’Œdelete(å¾ˆå¯èƒ½æ˜¯placementç‰ˆæœ¬ï¼Œè§æ¡æ¬¾52),ä½ ä¾¿å¾—ä»¥ä¸ºCAPIç©¿ä¸Šä¸€ä»¶C+å¤–å¥—ã€‚ä½ ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªè‡ªå®šçš„operatordelete,åœ¨å…¶ä¸­å°†æ‰€æœ‰å½’è¿˜å†…å­˜å†…å®¹è¦†ç›–ä¸º0ï¼Œè—‰æ­¤å¢åŠ åº”ç”¨ç¨‹åºçš„æ•°æ®å®‰å…¨æ€§ã€‚</li><li>æœ‰è®¸å¤šç†ç”±éœ€è¦å†™ä¸ªè‡ªå®šçš„newå’Œdelete,åŒ…æ‹¬æ”¹å–„æ•ˆèƒ½ã€å¯¹heapè¿ç”¨é”™è¯¯è¿›è¡Œè°ƒè¯•ã€æ”¶é›†heapä½¿ç”¨ä¿¡æ¯ã€‚</li></ol><h2 id="ç¼–å†™newå’Œdeleteæ—¶éœ€å›ºå®ˆå¸¸è§„">51.ç¼–å†™newå’Œdeleteæ—¶éœ€å›ºå®ˆå¸¸è§„</h2><ol type="1"><li>è®©æˆ‘ä»¬ä»operator newå¼€å§‹ã€‚å®ç°ä¸€è‡´æ€§operatornewå¿…å¾—è¿”å›æ­£ç¡®çš„å€¼ï¼Œå†…å­˜ä¸è¶³æ—¶å¿…å¾—è°ƒç”¨new-handlingå‡½æ•°ï¼ˆè§æ¡æ¬¾49)ï¼Œå¿…é¡»æœ‰å¯¹ä»˜é›¶å†…å­˜éœ€æ±‚çš„å‡†å¤‡ï¼Œè¿˜éœ€é¿å…ä¸æ…æ©ç›–æ­£å¸¸å½¢å¼çš„newä¸€è™½ç„¶è¿™æ¯”è¾ƒåè¿‘classçš„æ¥å£è¦æ±‚è€Œéå®ç°è¦æ±‚ã€‚æ­£å¸¸å½¢å¼çš„newæè¿°äºæ¡æ¬¾52ã€‚</li><li>operatornewçš„è¿”å›å€¼ååˆ†å•çº¯ã€‚å¦‚æœå®ƒæœ‰èƒ½åŠ›ä¾›åº”å®¢æˆ·ç”³è¯·çš„å†…å­˜ï¼Œå°±è¿”å›ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘é‚£å—å†…å­˜ã€‚å¦‚æœæ²¡æœ‰é‚£ä¸ªèƒ½åŠ›ï¼Œå°±éµå¾ªæ¡æ¬¾49æè¿°çš„è§„åˆ™ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªbadallocå¼‚å¸¸ã€‚</li><li>ç„¶è€Œå…¶å®ä¹Ÿä¸æ˜¯éå¸¸å•çº¯ï¼Œå› ä¸ºoperatornewå®é™…ä¸Šä¸åªä¸€æ¬¡å°è¯•åˆ†é…å†…å­˜ï¼Œå¹¶åœ¨æ¯æ¬¡å¤±è´¥åè°ƒç”¨new-handlingå‡½æ•°ã€‚è¿™é‡Œå‡è®¾new-handlingå‡½æ•°ä¹Ÿè®¸èƒ½å¤ŸåšæŸäº›åŠ¨ä½œå°†æŸäº›å†…å­˜é‡Šæ”¾å‡ºæ¥ã€‚åªæœ‰å½“æŒ‡å‘new-handlingå‡½æ•°çš„æŒ‡é’ˆæ˜¯null,operatornewæ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>å¥‡æ€ªçš„æ˜¯C++è§„å®šï¼Œå³ä½¿å®¢æˆ·è¦æ±‚0 bytes,.operatornewä¹Ÿå¾—è¿”å›ä¸€ä¸ªåˆæ³•æŒ‡é’ˆã€‚çº¹ç§çœ‹ä»¥æ ¼å¼‚çš„è¡Œä¸ºç”˜ä¸­æ˜¯ä¸ºäº†ç®€åŒ–è¯­è¨€å…¶ä»–éƒ¨åˆ†ã€‚ä¸‹é¢æ˜¯ä¸ªnon-memberoperator newä¼ªç (pseudocode):</li></ol><p><img src="/2024/11/27/effective-cpp/8-%E5%AE%9A%E5%88%B6new%E5%92%8Cdelete/1707576288326-fe376eff-029d-4cef-911d-3bf1a5f603ae.png"></p><p><img src="/2024/11/27/effective-cpp/8-%E5%AE%9A%E5%88%B6new%E5%92%8Cdelete/1707576313400-f019e1ad-e896-431d-a91f-364ef447f553.png"></p><ol start="5" type="1"><li>ä½ ä¹Ÿå¯èƒ½å¸¦ç€æ€€ç–‘çš„çœ¼å…‰æ–œç¨è¿™ä»½ä¼ªç (pseudocode)ï¼Œå› ä¸ºå…¶ä¸­å°†new-handlingå‡½æ•°æŒ‡é’ˆè®¾ä¸ºnullè€Œååˆç«‹åˆ»æ¢å¤åŸæ ·ã€‚é‚£æ˜¯å› ä¸ºæˆ‘ä»¬å¾ˆä¸å¹¸åœ°æ²¡æœ‰ä»»ä½•åŠæ³•å¯ä»¥ç›´æ¥å–å¾—new-handlingå‡½æ•°æŒ‡é’ˆï¼Œæ‰€ä»¥å¿…é¡»è°ƒç”¨setnewhandleræ‰¾å‡ºå®ƒæ¥ã€‚æ‹™åŠ£ï¼Œä½†æœ‰æ•ˆä¸€è‡³å°‘å¯¹å•çº¿ç¨‹ç¨‹åºè€Œè¨€ã€‚è‹¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½ æˆ–è®¸éœ€è¦æŸç§æœºé”(lock)ä»¥ä¾¿å®‰å…¨å¤„ç½®new-handlingå‡½æ•°èƒŒåçš„(global)æ•°æ®ç»“æ„ã€‚</li><li>operatornewåº”è¯¥å†…å«ä¸€ä¸ªæ— ç©·å¾ªç¯ï¼Œå¹¶åœ¨å…¶ä¸­å°è¯•åˆ†é…å†…å­˜ï¼Œå¦‚æœå®ƒæ— æ³•æ»¡è¶³å†…å­˜éœ€æ±‚ï¼Œå°±è¯¥è°ƒç”¨new-handlerã€‚.å®ƒä¹Ÿåº”è¯¥æœ‰èƒ½åŠ›å¤„ç†0bytesç”³è¯·ã€‚Classä¸“å±ç‰ˆæœ¬åˆ™è¿˜åº”è¯¥å¤„ç†â€œæ¯”æ­£ç¡®å¤§å°æ›´å¤§çš„ï¼ˆé”™è¯¯ï¼‰ç”³è¯·â€ã€‚</li><li>operatordeleteåº”è¯¥åœ¨æ”¶åˆ°nullæŒ‡é’ˆæ—¶ä¸åšä»»ä½•äº‹ã€‚Classä¸“å±ç‰ˆæœ¬åˆ™è¿˜åº”è¯¥å¤„ç†â€œæ¯”æ­£ç¡®å¤§å°æ›´å¤§çš„ï¼ˆé”™è¯¯ï¼‰ç”³è¯·â€ã€‚</li></ol><h2 id="å†™äº†placement-newè¿˜è¦å†™placement-delete">52. å†™äº†placementnewè¿˜è¦å†™placement delete</h2><ol type="1"><li><img src="/2024/11/27/effective-cpp/8-%E5%AE%9A%E5%88%B6new%E5%92%8Cdelete/1707574119356-fc7d6c39-f7f8-4fd4-93b7-34f75da1094a.png"></li><li>è¿™ä¸ªç‰ˆæœ¬çš„newå·²è¢«çº³å…¥C++æ ‡å‡†ç¨‹åºåº“ï¼Œä½ åªè¦#include<new>å°±å¯ä»¥å–ç”¨å®ƒã€‚è¿™ä¸ªnewçš„ç”¨é€”ä¹‹ä¸€æ˜¯è´Ÿè´£åœ¨vectorçš„æœªä½¿ç”¨ç©ºé—´ä¸Šåˆ›å»ºå¯¹è±¡ã€‚å®ƒåŒæ—¶ä¹Ÿæ˜¯æœ€æ—©çš„placementnewç‰ˆæœ¬ã€‚å®é™…ä¸Šå®ƒæ­£æ˜¯è¿™ä¸ªå‡½æ•°çš„å‘½åæ ¹æ®ï¼šä¸€ä¸ªç‰¹å®šä½ç½®ä¸Šçš„newã€‚ä»¥ä¸Šè¯´æ˜æ„å‘³æœ¯è¯­placementnewæœ‰å¤šé‡å®šä¹‰ã€‚å½“äººä»¬è°ˆåˆ°placementnew,å¤§å¤šæ•°æ—¶å€™ä»–ä»¬è°ˆçš„æ˜¯æ­¤ä¸€ç‰¹å®šç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯â€œå”¯ä¸€é¢å¤–å®å‚æ˜¯ä¸ªvoid*â€ï¼Œå°‘æ•°æ—¶å€™æ‰æ˜¯æŒ‡æ¥å—ä»»æ„é¢å¤–å®å‚ä¹‹operatornewã€‚ä¸Šä¸‹æ–‡è¯­å¢ƒå¾€å¾€ä¹Ÿèƒ½å¤Ÿä½¿æ„ä¹‰ä¸æ˜ç¡®çš„å«ç³Šè¯è¯­æ¸…æ™°èµ·æ¥ï¼Œä½†äº†è§£è¿™ä¸€ç‚¹ç›¸å½“é‡è¦ï¼šä¸€èˆ¬æ€§æœ¯è¯­"placement</new></li><li>placement deleteåªæœ‰åœ¨â€œä¼´éšplacementnewè°ƒç”¨è€Œè§¦å‘çš„æ„é€ å‡½æ•°â€å‡ºç°å¼‚å¸¸æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å¯¹ç€ä¸€ä¸ªæŒ‡é’ˆï¼ˆä¾‹å¦‚ä¸Šè¿°çš„pw)æ–½è¡Œdeleteç»ä¸ä¼šå¯¼è‡´è°ƒç”¨placementdeleteã€‚ä¸ï¼Œç»å¯¹ä¸ä¼šã€‚</li><li>å½“ä½ å†™ä¸€ä¸ªplacement operator new,è¯·ç¡®å®šä¹Ÿå†™å‡ºäº†å¯¹åº”çš„placementoperatordeleteã€‚å¦‚æœæ²¡æœ‰è¿™æ ·åšï¼Œä½ çš„ç¨‹åºå¯èƒ½ä¼šå‘ç”Ÿéšå¾®è€Œæ—¶æ–­æ—¶ç»­çš„å†…å­˜æ³„æ¼ã€‚</li><li>å½“ä½ å£°æ˜placement newå’Œplacementdelete,è¯·ç¡®å®šä¸è¦æ— æ„è¯†ï¼ˆéæ•…æ„ï¼‰åœ°é®æ©äº†å®ƒä»¬çš„æ­£å¸¸ç‰ˆæœ¬ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. æ¨¡æ¿ä¸æ³›å‹ç¼–ç¨‹</title>
    <link href="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/"/>
    <url>/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="äº†è§£éšå¼æ¥å£å’Œç¼–è¯‘æœŸå¤šæ€">41. äº†è§£éšå¼æ¥å£å’Œç¼–è¯‘æœŸå¤šæ€</h2><ol type="1"><li>é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸–ç•Œæ€»ä»¥æ˜¾ç¤ºæ¥å£å’Œè¿è¡ŒæœŸå¤šæ€è§£å†³é—®é¢˜</li><li>ç”±äºwçš„ç±»å‹è¢«å£°æ˜ä¸ºWidget,æ‰€ä»¥wå¿…é¡»æ”¯æŒWidgetæ¥å£ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­æ‰¾å‡ºè¿™ä¸ªæ¥å£ï¼ˆä¾‹å¦‚åœ¨idgetçš„.hæ–‡ä»¶ä¸­ï¼‰ï¼Œçœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ‰€ä»¥æˆ‘ç§°æ­¤ä¸ºä¸€ä¸ªæ˜¾å¼æ¥å£(explicitinterfaceï¼‰ï¼Œä¹Ÿå°±æ˜¯å®ƒåœ¨æºç ä¸­æ˜ç¡®å¯è§ã€‚</li><li>ç”±äºWidgetçš„æŸäº›æˆå‘˜å‡½æ•°æ˜¯virtual,wå¯¹é‚£äº›å‡½æ•°çš„è°ƒç”¨å°†è¡¨ç°å‡ºè¿è¡ŒæœŸå¤šæ€(runtimepolymorphism)ï¼Œä¹Ÿå°±æ˜¯è¯´å°†äºè¿è¡ŒæœŸæ ¹æ®wçš„åŠ¨æ€ç±»å‹ï¼ˆè§æ¡æ¬¾37)å†³å®šç©¶ç«è°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°ã€‚</li><li>çºµä½¿ä½ ä»æœªç”¨è¿‡templatesï¼Œåº”è¯¥ä¸é™Œç”Ÿâ€œè¿è¡ŒæœŸå¤šæ€â€å’Œâ€œç¼–è¯‘æœŸå¤šæ€â€ä¹‹é—´çš„å·®å¼‚ï¼Œå› ä¸ºå®ƒç±»ä¼¼äºâ€œå“ªä¸€ä¸ªé‡è½½å‡½æ•°è¯¥è¢«è°ƒç”¨â€ï¼ˆå‘ç”Ÿåœ¨ç¼–è¯‘æœŸ)å’Œâ€œå“ªä¸€ä¸ªvirtualå‡½æ•°è¯¥è¢«ç»‘å®šâ€ï¼ˆå‘ç”Ÿåœ¨è¿è¡ŒæœŸï¼‰ä¹‹é—´çš„å·®å¼‚ã€‚</li><li>é€šå¸¸æ˜¾å¼æ¥å£ç”±å‡½æ•°çš„ç­¾åå¼ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°åç§°ã€å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ï¼‰æ„æˆã€‚</li><li>éšå¼æ¥å£å°±å®Œå…¨ä¸åŒäº†ã€‚å®ƒå¹¶ä¸åŸºäºå‡½æ•°ç­¾åå¼ï¼Œè€Œæ˜¯ç”±æœ‰æ•ˆè¡¨è¾¾å¼(validexpressions)ç»„æˆã€‚å†æ¬¡çœ‹çœ‹doProcessing templateä¸€å¼€å§‹çš„æ¡ä»¶ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doProcessing</span><span class="hljs-params">(T &amp;w)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(w.<span class="hljs-built_in">size</span>()&gt;<span class="hljs-number">20</span>&amp;&amp; w!=someNastyWIdget&#123;<br>        &#125;<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>T(wçš„ç±»å‹)çš„éšå¼æ¥å£çœ‹æ¥å¥½åƒæœ‰è¿™äº›çº¦æŸï¼š<ol type="1"><li>å®ƒå¿…é¡»æä¾›ä¸€ä¸ªåä¸ºsizeçš„æˆå‘˜å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ã€‚</li><li>å®ƒå¿…é¡»æ”¯æŒä¸€ä¸ªoperator!=å‡½æ•°ï¼Œç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªTå¯¹è±¡ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾someNastywidgetçš„ç±»å‹ä¸ºTã€‚</li><li>çœŸè¦æ„Ÿè°¢æ“ä½œç¬¦é‡è½½(operatoroverloading)å¸¦æ¥çš„å¯èƒ½æ€§ï¼Œè¿™ä¸¤ä¸ªçº¦æŸéƒ½ä¸éœ€è¦æ»¡è¶³</li></ol></li><li>classeså’Œtemplateséƒ½æ”¯æŒæ¥å£(interfaces)å’Œå¤šæ€(polymorphism)ã€‚</li><li>å¯¹classesè€Œè¨€æ¥å£æ˜¯æ˜¾å¼çš„(explicit),ä»¥å‡½æ•°ç­¾åä¸ºä¸­å¿ƒã€‚å¤šæ€åˆ™æ˜¯é€šè¿‡virtualå‡½æ•°å‘ç”Ÿäºè¿è¡ŒæœŸã€‚</li><li>å¯¹templateå‚æ•°è€Œè¨€ï¼Œæ¥å£æ˜¯éšå¼çš„(implicit).,å¥ åŸºäºæœ‰æ•ˆè¡¨è¾¾å¼ã€‚å¤šæ€åˆ™æ˜¯é€šè¿‡templateå…·ç°åŒ–å’Œå‡½æ•°é‡è½½è§£æ(functionoverloading resolution)å‘ç”Ÿäºç¼–è¯‘æœŸã€‚</li></ol><h2 id="äº†è§£typenameçš„åŒé‡æ„ä¹‰">42. äº†è§£typenameçš„åŒé‡æ„ä¹‰</h2><ol type="1"><li>å½“æˆ‘ä»¬å£°æ˜templateç±»å‹å‚æ•°ï¼Œclasså’Œtypenameçš„æ„ä¹‰å®Œå…¨ç›¸åŒ</li><li>C++å¹¶ä¸æ€»æ˜¯æŠŠclasså’Œtypenameè§†ä¸ºç­‰ä»·ã€‚æœ‰æ—¶å€™ä½ ä¸€å®šå¾—ä½¿ç”¨typenameï¼Œä¸ºäº†è§£å…¶æ—¶æœºï¼Œæˆ‘ä»¬å¿…é¡»å…ˆè°ˆè°ˆä½ å¯ä»¥åœ¨templateå†…æŒ‡æ¶‰(referto).çš„ä¸¤ç§åç§°</li><li>templateå†…å‡ºç°çš„åç§°å¦‚æœç›¸ä¾äºæŸä¸ªtemplateå‚æ•°ï¼Œç§°ä¹‹ä¸ºä»å±åç§°(dependentnames)ã€‚å¦‚æœä»å±åç§°åœ¨classå†…å‘ˆåµŒå¥—çŠ¶ï¼Œæˆ‘ä»¬ç§°å®ƒä¸ºåµŒå¥—ä»å±åç§°(nesteddependent name)ã€‚</li><li>intæ˜¯ä¸€ä¸ªå¹¶ä¸å€šèµ–ä»»ä½•templateå‚æ•°çš„åç§°ã€‚è¿™æ ·çš„åç§°æ˜¯è°“éä»å±åç§°(non-dependentnames).ã€‚</li><li>åµŒå¥—ä»å±åç§°æœ‰å¯èƒ½å¯¼è‡´è§£æ(parsing)å›°éš¾ã€‚</li><li>å¦‚æœè§£æå™¨åœ¨templateä¸­é­é‡ä¸€ä¸ªåµŒå¥—ä»å±åç§°ï¼Œå®ƒä¾¿å‡è®¾è¿™åç§°ä¸æ˜¯ä¸ªç±»å‹ï¼Œé™¤éä½ å‘Šè¯‰å®ƒæ˜¯ã€‚æ‰€ä»¥ç¼ºçœæƒ…å†µä¸‹åµŒå¥—ä»å±åç§°ä¸æ˜¯ç±»å‹ã€‚</li><li>è‹¥è¦çŸ«æ­£è¿™ä¸ªå½¢åŠ¿ï¼Œæˆ‘ä»¬å¿…é¡»å‘Šè¯‰C++è¯´c:constiteratoræ˜¯ä¸ªç±»å‹ã€‚åªè¦ç´§ä¸´å®ƒä¹‹å‰æ”¾ç½®å…³é”®å­—typenameå³å¯ï¼š</li><li>ä¸€èˆ¬æ€§è§„åˆ™å¾ˆç®€å•ï¼šä»»ä½•æ—¶å€™å½“ä½ æƒ³è¦åœ¨templateä¸­æŒ‡æ¶‰ä¸€ä¸ªåµŒå¥—ä»å±ç±»å‹åç§°ï¼Œå°±å¿…é¡»åœ¨ç´§ä¸´å®ƒçš„å‰ä¸€ä¸ªä½ç½®æ”¾ä¸Šå…³é”®å­—typenameã€‚</li><li>typenameåªè¢«ç”¨æ¥éªŒæ˜åµŒå¥—ä»å±ç±»å‹åç§°ï¼›å…¶ä»–åç§°ä¸è¯¥æœ‰å®ƒå­˜åœ¨ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707556429425-d318e2cd-59e8-435d-a4e9-52a7b2da947b.png"></p><ol start="10" type="1"><li>â€œtypenameå¿…é¡»ä½œä¸ºåµŒå¥—ä»å±ç±»å‹åç§°çš„å‰ç¼€è¯â€è¿™ä¸€è§„åˆ™çš„ä¾‹å¤–æ˜¯ï¼Œtypenameä¸å¯ä»¥å‡ºç°åœ¨baseclasses listå†…çš„åµŒå¥—ä»å±ç±»å‹åç§°ä¹‹å‰ï¼Œä¹Ÿä¸å¯åœ¨member initializationlist(æˆå‘˜åˆå€¼åˆ—)ä¸­ä½œä¸ºbase classä¿®é¥°ç¬¦.</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707556584352-036c9314-8409-40b5-81f6-bb6831b15ed9.png"></p><ol start="11" type="1"><li>è®©æˆ‘ä»¬çœ‹çœ‹æœ€åä¸€ä¸ªtypenameä¾‹å­ï¼Œé‚£æ˜¯ä½ å°†åœ¨çœŸå®ç¨‹åºä¸­çœ‹åˆ°çš„ä»£è¡¨æ€§ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬æ­£åœ¨æ’°å†™ä¸€ä¸ªfunctiontemplate,å®ƒæ¥å—ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè€Œæˆ‘ä»¬æ‰“ç®—ä¸ºè¯¥è¿­ä»£å™¨æŒ‡æ¶‰çš„å¯¹è±¡åšä¸€ä»½localå¤ä»¶ï¼ˆå‰¯æœ¬ï¼‰tempã€‚æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> IterT&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">workWithIterator</span><span class="hljs-params">(IterT iter)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">typename</span> std::iterator_traits&lt;IterT&gt;::<span class="hljs-function">value_type <span class="hljs-title">temp</span><span class="hljs-params">(*iter)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="12" type="1"><li>æ ‡å‡†traitsclassï¼ˆè§æ¡æ¬¾47)çš„ä¸€ç§è¿ç”¨ï¼Œç›¸å½“äºè¯´â€œç±»å‹ä¸ºIterTä¹‹å¯¹è±¡æ‰€æŒ‡ä¹‹ç‰©çš„ç±»å‹"ï¼Œè¿™ä¸ªè¯­å¥å£°æ˜ä¸€ä¸ªlocalå˜é‡(temp),ä½¿ç”¨IterTå¯¹è±¡æ‰€æŒ‡ç‰©çš„ç›¸åŒç±»å‹ï¼Œå¹¶å°†tempåˆå§‹åŒ–ä¸ºiteræ‰€æŒ‡ç‰©ã€‚å¦‚æœIterTæ˜¯vector<int>::iterator,tempçš„ç±»å‹å°±æ˜¯intã€‚å¦‚æœIterTæ˜¯list<string>::iterator,tempçš„ç±»å‹å°±æ˜¯stringã€‚ç”±äºstd:iterator_traits.<IterT>:valuetypeæ˜¯ä¸ªåµŒå¥—ä»å±ç±»å‹åç§°(value typeè¢«åµŒå¥—äºiteratortraits<IterT>ä¹‹å†…è€ŒIterTæ˜¯ä¸ªtemplateå‚æ•°)ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨å®ƒä¹‹å‰æ”¾ç½®typenameã€‚</IterT></IterT></string></int></li><li>å£°æ˜templateå‚æ•°æ—¶ï¼Œå‰ç¼€å…³é”®å­—classå’Œtypenameå¯äº’æ¢ã€‚</li><li>è¯·ä½¿ç”¨å…³é”®å­—typenameæ ‡è¯†åµŒå¥—ä»å±ç±»å‹åç§°ï¼›ä½†ä¸å¾—åœ¨base classlists(åŸºç±»åˆ—)æˆ–member initialization list(æˆå‘˜åˆå€¼åˆ—)å†…ä»¥å®ƒä½œä¸ºbaseclassä¿®é¥°ç¬¦ã€‚</li></ol><h2 id="å­¦ä¹ å¤„ç†æ¨¡æ¿åŒ–åŸºç±»å†…çš„åç§°">43. å­¦ä¹ å¤„ç†æ¨¡æ¿åŒ–åŸºç±»å†…çš„åç§°</h2><ol type="1"><li>æ³¨æ„classå®šä¹‰å¼æœ€å‰å¤´çš„"template&lt;&gt;â€è¯­æ³•è±¡å¾è¿™æ—¢ä¸æ˜¯templateä¹Ÿä¸æ˜¯æ ‡å‡†class,è€Œæ˜¯ä¸ªç‰¹åŒ–ç‰ˆçš„MsgSendertemplate,åœ¨templateå®å‚æ˜¯CompanyZæ—¶è¢«ä½¿ç”¨ã€‚è¿™æ˜¯æ‰€è°“çš„æ¨¡æ¿å…¨ç‰¹åŒ–(totaltemplate,specialization)ï¼štemplateMsgSenderé’ˆå¯¹ç±»å‹CompanyZç‰¹åŒ–äº†ï¼Œè€Œä¸”å…¶ç‰¹åŒ–æ˜¯å…¨é¢æ€§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ—¦ç±»å‹å‚æ•°è¢«å®šä¹‰ä¸ºCompanyZ,å†æ²¡æœ‰å…¶ä»–templateå‚æ•°å¯ä¾›å˜åŒ–ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707557788872-b88bf5fe-ff55-47ab-b2de-89c7aabf83d1.png"></p><ol start="2" type="1"><li>ä»¤C++â€œä¸è¿›å…¥templatized base classesè§‚å¯Ÿâ€çš„è¡Œä¸ºå¤±æ•ˆã€‚</li><li>ç¬¬ä¸€æ˜¯åœ¨base classå‡½æ•°è°ƒç”¨åŠ¨ä½œä¹‹å‰åŠ ä¸Š this-&gt;</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707558520152-2b05a9ba-7882-4f12-99ac-4428f4c2dabb.png"></p><ol start="4" type="1"><li>ç¬¬äºŒæ˜¯ä½¿ç”¨usingå£°æ˜å¼ã€‚å¦‚æœä½ å·²è¯»è¿‡æ¡æ¬¾33ï¼Œè¿™ä¸ªè§£æ³•åº”è¯¥ä¼šä»¤ä½ æ„Ÿåˆ°ç†Ÿæ‚‰ã€‚æ¡æ¬¾33æè¿°usingå£°æ˜å¼å¦‚ä½•å°†â€œè¢«æ©ç›–çš„baseclassåç§°â€å¸¦å…¥ä¸€ä¸ªderivedclassä½œç”¨åŸŸå†…ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ä¸‹sendClearMsg:</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707558218801-2272b813-1508-4dd1-bf00-d3ebf10af457.png"></p><ol start="5" type="1"><li>ç¬¬ä¸‰ä¸ªåšæ³•æ˜¯ï¼Œæ˜ç™½æŒ‡å‡ºè¢«è°ƒç”¨çš„å‡½æ•°ä½äºbase classå†…ï¼š</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707558357624-cd637eca-fa50-485b-981d-5ee66fc4e5f8.png"></p><ol start="6" type="1"><li>ä½†è¿™å¾€å¾€æ˜¯æœ€ä¸è®©äººæ»¡æ„çš„ä¸€ä¸ªè§£æ³•ï¼Œå› ä¸ºå¦‚æœè¢«è°ƒç”¨çš„æ˜¯virtualå‡½æ•°ï¼Œä¸Šè¿°çš„æ˜ç¡®èµ„æ ¼ä¿®é¥°(explicitqualification)ä¼šå…³é—­â€œvirtualç»‘å®šè¡Œä¸ºâ€ã€‚</li><li>å¯åœ¨derived class templateså†…é€šè¿‡"this-&gt;"æŒ‡æ¶‰base classtemplateså†…çš„æˆå‘˜åç§°ï¼Œæˆ–è—‰ç”±ä¸€ä¸ªæ˜ç™½å†™å‡ºçš„â€œbaseclassèµ„æ ¼ä¿®é¥°ç¬¦â€å®Œæˆã€‚</li></ol><h2 id="å°†ä¸å‚æ•°æ— å…³çš„ä»£ç æŠ½ç¦»templates">44.å°†ä¸å‚æ•°æ— å…³çš„ä»£ç æŠ½ç¦»templates</h2><ol type="1"><li>Templatesæ˜¯èŠ‚çœæ—¶é—´å’Œé¿å…ä»£ç é‡å¤çš„ä¸€ä¸ªå¥‡æ–¹å¦™æ³•ã€‚</li><li>å¦‚æœä½ ä¸å°å¿ƒï¼Œä½¿ç”¨templateså¯èƒ½ä¼šå¯¼è‡´ä»£ç è†¨èƒ€ï¼šå…¶äºŒè¿›åˆ¶ç å¸¦ç€é‡å¤ï¼ˆæˆ–å‡ ä¹é‡å¤ï¼‰çš„ä»£ç ã€æ•°æ®ï¼Œæˆ–ä¸¤è€…ã€‚å…¶ç»“æœæœ‰å¯èƒ½æºç çœ‹èµ·æ¥åˆèº«è€Œæ•´é½ï¼Œä½†ç›®æ ‡ç (objectcode)å´ä¸æ˜¯é‚£ä¹ˆå›äº‹ã€‚</li><li>å…±æ€§ä¸å˜æ€§åˆ†æ(commonality and variability analysisï¼‰ã€‚</li><li>å¦‚æœä½ æ­£åœ¨ç¼–å†™æŸä¸ªclass,è€Œä½ æ˜ç™½å…¶ä¸­æŸäº›éƒ¨åˆ†å’Œå¦ä¸€ä¸ªclassçš„æŸäº›éƒ¨åˆ†ç›¸åŒï¼Œä½ ä¹Ÿä¸ä¼šé‡å¤è¿™å…±åŒçš„éƒ¨åˆ†ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä½ ä¼šæŠŠå…±åŒéƒ¨åˆ†æ¬ç§»åˆ°æ–°clsså»ï¼Œç„¶åä½¿ç”¨ç»§æ‰¿æˆ–å¤åˆï¼ˆè§æ¡æ¬¾32,38,39)ï¼Œä»¤åŸå…ˆçš„classeså–ç”¨è¿™å…±åŒç‰¹æ€§ã€‚è€ŒåŸclassesçš„äº’å¼‚éƒ¨åˆ†ï¼ˆå˜å¼‚éƒ¨åˆ†ï¼‰ä»ç„¶ç•™åœ¨åŸä½ç½®ä¸åŠ¨ã€‚</li><li>ç¼–å†™templatesæ—¶ï¼Œä¹Ÿæ˜¯åšç›¸åŒçš„åˆ†æï¼Œä»¥ç›¸åŒçš„æ–¹å¼é¿å…é‡å¤ï¼Œä½†å…¶ä¸­æœ‰ä¸ªçªé—¨ã€‚åœ¨non-templateä»£ç ä¸­ï¼Œé‡å¤ååˆ†æ˜ç¡®ï¼šä½ å¯ä»¥â€œçœ‹â€åˆ°ä¸¤ä¸ªå‡½æ•°æˆ–ä¸¤ä¸ªclassesä¹‹é—´æœ‰æ‰€é‡å¤ã€‚ç„¶è€Œåœ¨templateä»£ç ä¸­ï¼Œé‡å¤æ˜¯éšæ™¦çš„ï¼šæ¯•ç«Ÿåªå­˜åœ¨ä¸€ä»½templateæºç ï¼Œæ‰€ä»¥ä½ å¿…é¡»è®­ç»ƒè‡ªå·±å»æ„Ÿå—å½“templateè¢«å…·ç°åŒ–å¤šæ¬¡æ—¶å¯èƒ½å‘ç”Ÿçš„é‡å¤ã€‚</li><li>Templatesç”Ÿæˆå¤šä¸ªclasseså’Œå¤šä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä»»ä½•templateä»£ç éƒ½ä¸è¯¥ä¸æŸä¸ªé€ æˆè†¨èƒ€çš„templateå‚æ•°äº§ç”Ÿç›¸ä¾å…³ç³»ã€‚</li><li>å› éç±»å‹æ¨¡æ¿å‚æ•°(non-type templateparameters)è€Œé€ æˆçš„ä»£ç è†¨èƒ€ï¼Œå¾€å¾€å¯æ¶ˆé™¤ï¼Œåšæ³•æ˜¯ä»¥å‡½æ•°å‚æ•°æˆ–classæˆå‘˜å˜é‡æ›¿æ¢templateå‚æ•°ã€‚</li><li>å› ç±»å‹å‚æ•°(typeparameters)è€Œé€ æˆçš„ä»£ç è†¨èƒ€ï¼Œå¾€å¾€å¯é™ä½ï¼Œåšæ³•æ˜¯è®©å¸¦æœ‰å®Œå…¨ç›¸åŒäºŒè¿›åˆ¶è¡¨è¿°(binaryrepresentations)çš„å…·ç°ç±»å‹(instantiation types)å…±äº«å®ç°ç ã€‚</li></ol><h2 id="è¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹">45.è¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹</h2><ol type="1"><li>æ‰€è°“æ™ºèƒ½æŒ‡é’ˆ(Smartpointers)æ˜¯â€œè¡Œä¸ºåƒæŒ‡é’ˆâ€çš„å¯¹è±¡ï¼Œå¹¶æä¾›æŒ‡é’ˆæ²¡æœ‰çš„æœºèƒ½</li><li>ä¾‹å¦‚æ¡æ¬¾13æ›¾ç»æåŠstd:auto_ptrå’Œtrl:sharedptrå¦‚ä½•èƒ½å¤Ÿè¢«ç”¨æ¥åœ¨æ­£ç¡®æ—¶æœºè‡ªåŠ¨åˆ é™¤heap-basedèµ„æºã€‚STLå®¹å™¨çš„è¿­ä»£å™¨å‡ ä¹æ€»æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼šæ— ç–‘åœ°ä½ ä¸ä¼šå¥¢æœ›ä½¿ç”¨"+"å°†ä¸€ä¸ªå†…ç½®æŒ‡é’ˆä»linkedlistçš„æŸä¸ªèŠ‚ç‚¹ç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†è¿™åœ¨list:iteratorsèº«ä¸ŠåŠå¾—åˆ°ã€‚</li><li>çœŸå®æŒ‡é’ˆåšå¾—å¾ˆå¥½çš„ä¸€ä»¶äº‹æ˜¯ï¼Œæ”¯æŒéšå¼è½¬æ¢(implicitconversions)ã€‚Derived classæŒ‡é’ˆå¯ä»¥éšå¼è½¬æ¢ä¸ºbaseclassæŒ‡é’ˆï¼Œâ€œæŒ‡å‘non-constå¯¹è±¡â€çš„æŒ‡é’ˆå¯ä»¥è½¬æ¢ä¸ºâ€œæŒ‡å‘costå¯¹è±¡â€â€¦ç­‰ç­‰ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707564816041-88e0ddec-3c52-4448-b23c-16ed9a536175.png"></p><ol start="4" type="1"><li>ä½†å¦‚æœæƒ³åœ¨ç”¨æˆ·è‡ªå®šçš„æ™ºèƒ½æŒ‡é’ˆä¸­æ¨¡æ‹Ÿä¸Šè¿°è½¬æ¢ï¼Œç¨ç¨æœ‰ç‚¹éº»çƒ¦</li><li>Templateså’Œæ³›å‹ç¼–ç¨‹(Generic Programming)</li><li>ä¸ºSmartPtrå†™ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ä¸ºå®ƒå†™ä¸€ä¸ªæ„é€ æ¨¡æ¿ã€‚è¿™æ ·çš„æ¨¡æ¿(templates)æ˜¯æ‰€è°“memberfunction templates(å¸¸ç®€ç§°ä¸ºnembertemplates),å…¶ä½œç”¨æ˜¯ä¸ºclassç”Ÿæˆå‡½æ•°ï¼š</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707565419364-bae288b3-bb45-49b0-9116-b0698e6010b7.png"></p><ol start="7" type="1"><li>ä»¥ä¸Šä»£ç çš„æ„æ€æ˜¯ï¼Œå¯¹ä»»ä½•ç±»å‹Tå’Œä»»ä½•ç±»å‹U,è¿™é‡Œå¯ä»¥æ ¹æ®SmartPtr<U>ç”Ÿæˆä¸€ä¸ªSmartPtr<T>ï¼Œå› ä¸ºSmartptr<T>æœ‰ä¸ªæ„é€ å‡½æ•°æ¥å—ä¸ªSmartPtr<U>å‚æ•°ã€‚è¿™ä¸€ç±»æ„é€ å‡½æ•°æ ¹æ®å¯¹è±¡uåˆ›å»ºå¯¹è±¡t(ä¾‹å¦‚æ ¹æ®SmartPtr<U>åˆ›å»ºä¸€ä¸ªSmartPtr<T>),è€Œuå’Œvçš„ç±»å‹æ˜¯åŒä¸€ä¸ªtemplateçš„ä¸åŒå…·ç°ä½“ï¼Œæœ‰æ—¶æˆ‘ä»¬ç§°ä¹‹ä¸ºæ³›åŒ–(generalized)copyæ„é€ å‡½æ•°ã€‚</T></U></U></T></T></U></li><li>æ³›åŒ–copyæ„é€ å‡½æ•°å¹¶æœªè¢«å£°æ˜ä¸ºexplicitã€‚é‚£æ˜¯è“„æ„çš„ï¼Œå› ä¸ºåŸå§‹æŒ‡é’ˆç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼ˆä¾‹å¦‚ä»derivedclassæŒ‡é’ˆè½¬ä¸ºbaseclassæŒ‡é’ˆï¼‰æ˜¯éšå¼è½¬æ¢ï¼Œæ— éœ€æ˜ç™½å†™å‡ºè½¬å‹åŠ¨ä½œ(cst),æ‰€ä»¥è®©æ™ºèƒ½æŒ‡é’ˆä»¿æ•ˆè¿™ç§è¡Œå¾„ä¹Ÿå±åˆç†ã€‚åœ¨æ¨¡æ¿åŒ–æ„é€ å‡½æ•°(templatizedconstructor)ä¸­ç•¥å»explicitå°±æ˜¯ä¸ºäº†è¿™ä¸ªç›®çš„ã€‚</li><li>member functiontemplatesï¼ˆæˆå‘˜å‡½æ•°æ¨¡æ¿)çš„æ•ˆç”¨ä¸é™äºæ„é€ å‡½æ•°ï¼Œå®ƒä»¬å¸¸æ‰®æ¼”çš„å¦ä¸€ä¸ªè§’è‰²æ˜¯æ”¯æŒèµ‹å€¼æ“ä½œã€‚</li><li>ä»æŸä¸ªshared ptrç±»å‹éšå¼è½¬æ¢è‡³å¦ä¸€ä¸ªsharedptrç±»å‹æ˜¯è¢«å…è®¸çš„ï¼Œä½†ä»æŸä¸ªå†…ç½®æŒ‡é’ˆæˆ–ä»å…¶ä»–æ™ºèƒ½æŒ‡é’ˆç±»å‹è¿›è¡Œéšå¼è½¬æ¢åˆ™ä¸è¢«è®¤å¯ï¼ˆå¦‚æœæ˜¯æ˜¾å¼è½¬æ¢å¦‚castå¼ºåˆ¶è½¬å‹åŠ¨ä½œå€’æ˜¯å¯ä»¥)</li><li>è¯·ä½¿ç”¨member functiontemplatesï¼ˆæˆå‘˜å‡½æ•°æ¨¡æ¿)ç”Ÿæˆâ€œå¯æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹â€çš„å‡½æ•°ã€‚</li><li>å¦‚æœä½ å£°æ˜membertemplatesç”¨äºâ€œæ³›åŒ–copyæ„é€ â€æˆ–â€œæ³›åŒ–assignmentæ“ä½œâ€ï¼Œä½ è¿˜æ˜¯éœ€è¦å£°æ˜æ­£å¸¸çš„copyæ„é€ å‡½æ•°å’Œcopyassignmentæ“ä½œç¬¦ã€‚</li></ol><h2 id="éœ€è¦ç±»å‹è½¬æ¢æ—¶è¯·ä¸ºæ¨¡æ¿å®šä¹‰éæˆå‘˜å‡½æ•°">46.éœ€è¦ç±»å‹è½¬æ¢æ—¶è¯·ä¸ºæ¨¡æ¿å®šä¹‰éæˆå‘˜å‡½æ•°</h2><ol type="1"><li>è¿™é¡¹æŠ€æœ¯çš„ä¸€ä¸ªè¶£å‘³ç‚¹æ˜¯ï¼Œæˆ‘ä»¬è™½ç„¶ä½¿ç”¨friend,å´ä¸friendçš„ä¼ ç»Ÿç”¨é€”â€œè®¿é—®classçš„non-publicæˆåˆ†â€æ¯«ä¸ç›¸åƒã€‚ä¸ºäº†è®©ç±»å‹è½¬æ¢å¯èƒ½å‘ç”Ÿäºæ‰€æœ‰å®å‚èº«ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªnon-memberå‡½æ•°ï¼ˆæ¡æ¬¾24)ï¼›ä¸ºäº†ä»¤è¿™ä¸ªå‡½æ•°è¢«è‡ªåŠ¨å…·ç°åŒ–ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒå£°æ˜åœ¨classå†…éƒ¨ï¼›è€Œåœ¨classå†…éƒ¨å£°æ˜non-memberå‡½æ•°çš„å”¯ä¸€åŠæ³•å°±æ˜¯ï¼šä»¤å®ƒæˆä¸ºä¸€ä¸ªfriendã€‚</li><li>ä¸€å¦‚æ¡æ¬¾30æ‰€è¯´ï¼Œå®šä¹‰äºclasså†…çš„å‡½æ•°éƒ½æš—è‡ªæˆä¸ºinline,åŒ…æ‹¬åƒoperator<em>è¿™æ ·çš„friendå‡½æ•°ã€‚ä½ å¯ä»¥å°†è¿™æ ·çš„inlineå£°æ˜æ‰€å¸¦æ¥çš„å†²å‡»æœ€å°åŒ–ï¼Œåšæ³•æ˜¯ä»¤perator</em>ä¸åšä»»ä½•äº‹æƒ…ï¼Œåªè°ƒç”¨ä¸€ä¸ªå®šä¹‰äºclasså¤–éƒ¨çš„è¾…åŠ©å‡½æ•°ã€‚åœ¨æœ¬æ¡æ¬¾çš„ä¾‹å­ä¸­ï¼Œè¿™æ ·åšå¹¶æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œå› ä¸ºoperator*å·²ç»æ˜¯ä¸ªå•è¡Œå‡½æ•°ï¼Œä½†å¯¹æ›´å¤æ‚çš„å‡½æ•°è€Œè¨€ï¼Œé‚£ä¹ˆåšä¹Ÿè®¸å°±æœ‰ä»·å€¼ã€‚â€œä»¤friendå‡½æ•°è°ƒç”¨è¾…åŠ©å‡½æ•°â€çš„åšæ³•çš„ç¡®å€¼å¾—ç»†ç©¶ä¸€ç•ªã€‚</li><li>å½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªclasstemplateï¼Œè€Œå®ƒæ‰€æä¾›ä¹‹â€œä¸æ­¤templateç›¸å…³çš„â€å‡½æ•°æ”¯æŒâ€œæ‰€æœ‰å‚æ•°ä¹‹éšå¼ç±»å‹è½¬æ¢â€æ—¶ï¼Œè¯·å°†é‚£äº›å‡½æ•°å®šä¹‰ä¸ºâ€œclasstemplateå†…éƒ¨çš„friendå‡½æ•°â€ã€‚</li></ol><h2 id="è¯·ä½¿ç”¨traits-classesè¡¨ç°ç±»å‹ä¿¡æ¯">47. è¯·ä½¿ç”¨traitsclassesè¡¨ç°ç±»å‹ä¿¡æ¯</h2><ol type="1"><li>STLä¸»è¦ç”±â€œç”¨ä»¥è¡¨ç°å®¹å™¨ã€è¿­ä»£å™¨å’Œç®—æ³•â€çš„templatesæ„æˆï¼Œä½†ä¹Ÿè¦†ç›–è‹¥å¹²å·¥å…·æ€§templates,å…¶ä¸­ä¸€ä¸ªåä¸ºadvance,.ç”¨æ¥å°†æŸä¸ªè¿­ä»£å™¨ç§»åŠ¨æŸä¸ªç»™å®šè·ç¦»ï¼š</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707567010785-05677fc7-3ce9-4fe3-8c08-40846e028338.png"></p><ol start="2" type="1"><li>randomaccessè¿­ä»£å™¨æ”¯æŒè¿­ä»£å™¨ç®—æœ¯è¿ç®—ï¼Œåªè€—è´¹å¸¸é‡æ—¶é—´ï¼Œå› æ­¤å¦‚æœé¢å¯¹è¿™ç§è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¸Œæœ›è¿ç”¨å…¶ä¼˜åŠ¿ã€‚</li><li>è¿™ç§åšæ³•é¦–å…ˆå¿…é¡»åˆ¤æ–­iteræ˜¯å¦ä¸ºrandomaccessè¿­ä»£å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦çŸ¥é“ç±»å‹IterTæ˜¯å¦ä¸ºrandomaccessè¿­ä»£å™¨åˆ†ç±»ã€‚æ¢å¥è¯è¯´æˆ‘ä»¬éœ€è¦å–å¾—ç±»å‹çš„æŸäº›ä¿¡æ¯ã€‚é‚£å°±æ˜¯traitsè®©ä½ å¾—ä»¥è¿›è¡Œçš„äº‹ï¼šå®ƒä»¬å…è®¸ä½ åœ¨ç¼–è¯‘æœŸé—´å–å¾—æŸäº›ç±»å‹ä¿¡æ¯ã€‚</li><li>Traitså¹¶ä¸æ˜¯C++å…³é”®å­—æˆ–ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„æ„ä»¶ï¼›å®ƒä»¬æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªC++ç¨‹åºå‘˜å…±åŒéµå®ˆçš„åè®®ã€‚è¿™ä¸ªæŠ€æœ¯çš„è¦æ±‚ä¹‹ä¸€æ˜¯ï¼Œå®ƒå¯¹å†…ç½®(built-in)ç±»å‹å’Œç”¨æˆ·è‡ªå®šä¹‰(user-defined)ç±»å‹çš„è¡¨ç°å¿…é¡»ä¸€æ ·å¥½ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸Šè¿°advanceæ”¶åˆ°çš„å®å‚æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆä¾‹å¦‚constchar*)å’Œä¸€ä¸ªint,ä¸Šè¿°advanceä»ç„¶å¿…é¡»æœ‰æ•ˆè¿ä½œï¼Œé‚£æ„å‘³traitsæŠ€æœ¯å¿…é¡»ä¹Ÿèƒ½å¤Ÿæ–½è¡Œäºå†…ç½®ç±»å‹å¦‚æŒ‡é’ˆèº«ä¸Šã€‚</li><li>â€œtraitså¿…é¡»èƒ½å¤Ÿæ–½è¡Œäºå†…ç½®ç±»å‹â€æ„å‘³â€œç±»å‹å†…çš„åµŒå¥—ä¿¡æ¯(nestinginformation)â€è¿™ç§ä¸œè¥¿å‡ºå±€äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•å°†ä¿¡æ¯åµŒå¥—äºåŸå§‹æŒ‡é’ˆå†…ã€‚å› æ­¤ç±»å‹çš„traitsä¿¡æ¯å¿…é¡»ä½äºç±»å‹è‡ªèº«ä¹‹å¤–ã€‚æ ‡å‡†æŠ€æœ¯æ˜¯æŠŠå®ƒæ”¾è¿›ä¸€ä¸ªtemplateåŠå…¶æˆ–å¤šä¸ªç‰¹åŒ–ç‰ˆæœ¬ä¸­ã€‚è¿™æ ·çš„templatesåœ¨æ ‡å‡†ç¨‹åºåº“ä¸­æœ‰è‹¥å¹²ä¸ªï¼Œå…¶ä¸­é’ˆå¯¹è¿­ä»£å™¨è€…è¢«å‘½åä¸ºiterator_traits:</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707568377223-8b9c5bf1-0c40-4613-8c3f-147a892e4293.png"></p><ol start="6" type="1"><li>ç°åœ¨ï¼Œä½ åº”è¯¥çŸ¥é“å¦‚ä½•è®¾è®¡å¹¶å®ç°ä¸€ä¸ªtraits classäº†ï¼š<ol type="1"><li>ç¡®è®¤è‹¥å¹²ä½ å¸Œæœ›å°†æ¥å¯å–å¾—çš„ç±»å‹ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚å¯¹è¿­ä»£å™¨è€Œè¨€ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ¥å¯å–å¾—å…¶åˆ†ç±»(category)ã€‚</li><li>ä¸ºè¯¥ä¿¡æ¯é€‰æ‹©ä¸€ä¸ªåç§°ï¼ˆä¾‹å¦‚iterator_category)ã€‚</li><li>æä¾›ä¸€ä¸ªtemplateå’Œä¸€ç»„ç‰¹åŒ–ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ç¨æ—©è¯´çš„teratortraits)ï¼Œå†…å«ä½ å¸Œæœ›æ”¯æŒçš„ç±»å‹ç›¸å…³ä¿¡æ¯ã€‚</li></ol></li><li>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ€»ç»“å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªtraits classäº†ï¼š<ol type="1"><li>å»ºç«‹ä¸€ç»„é‡è½½å‡½æ•°ï¼ˆèº«ä»½åƒåŠ³å·¥ï¼‰æˆ–å‡½æ•°æ¨¡æ¿ï¼ˆä¾‹å¦‚doAdvance),å½¼æ­¤é—´çš„å·®å¼‚åªåœ¨äºå„è‡ªçš„tçº¢aitså‚æ•°ã€‚ä»¤æ¯ä¸ªå‡½æ•°å®ç°ç ä¸å…¶æ¥å—ä¹‹traitsä¿¡æ¯ç›¸åº”å’Œã€‚</li><li>å»ºç«‹ä¸€ä¸ªæ§åˆ¶å‡½æ•°ï¼ˆèº«ä»½åƒå·¥å¤´ï¼‰æˆ–å‡½æ•°æ¨¡æ¿ï¼ˆä¾‹å¦‚advance)ï¼Œå®ƒè°ƒç”¨ä¸Šè¿°é‚£äº›â€œåŠ³å·¥å‡½æ•°â€å¹¶ä¼ é€’traitsclassæ‰€æä¾›çš„ä¿¡æ¯ã€‚</li></ol></li><li>Traitså¹¿æ³›ç”¨äºæ ‡å‡†ç¨‹åºåº“ã€‚å…¶ä¸­å½“ç„¶æœ‰ä¸Šè¿°è®¨è®ºçš„iteratortraits,.é™¤äº†ä¾›åº”iterator_categoryè¿˜ä¾›åº”å¦å››ä»½è¿­ä»£å™¨ç›¸å…³ä¿¡æ¯ï¼ˆå…¶ä¸­æœ€æœ‰ç”¨çš„æ˜¯valuetype,è§æ¡æ¬¾42)ã€‚æ­¤å¤–è¿˜æœ‰chartraitsç”¨æ¥ä¿å­˜å­—ç¬¦ç±»å‹çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠnumericlimitsç”¨æ¥ä¿å­˜æ•°å€¼ç±»å‹çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚æŸæ•°å€¼ç±»å‹å¯è¡¨ç°ä¹‹æœ€å°å€¼å’Œæœ€å¤§å€¼ç­‰ç­‰ï¼›å‘½åä¸ºnumericlimitsæœ‰ç‚¹è®©äººæƒŠè®¶ï¼Œå› ä¸ºtraitsclassesçš„åç§°å¸¸ä»¥"traitsâ€ç»“æŸï¼Œä½†numeric_limitså´æ²¡æœ‰éµå®ˆè¿™ç§é£æ ¼ã€‚</li><li>TR1(æ¡æ¬¾54)å¯¼å…¥è®¸å¤šæ–°çš„traits classesç”¨ä»¥æä¾›ç±»å‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬isfundamental<T>(åˆ¤æ–­Tæ˜¯å¦ä¸ºå†…ç½®ç±»å‹)ï¼Œisarray<T>(åˆ¤æ–­Tæ˜¯å¦ä¸ºæ•°ç»„ç±»å‹)ï¼Œä»¥åŠis baseof&lt;T1,T2&gt;(T1å’ŒT2ç›¸åŒï¼ŒæŠ‘æˆ–r1æ˜¯T2çš„baseclass)ã€‚æ€»è®¡TR1ä¸€å…±ä¸ºæ ‡å‡†C+æ·»åŠ äº†50ä¸ªä»¥ä¸Šçš„traits classesã€‚</T></T></li><li>Traitsclassesä½¿å¾—â€œç±»å‹ç›¸å…³ä¿¡æ¯â€åœ¨ç¼–è¯‘æœŸå¯ç”¨ã€‚å®ƒä»¬ä»¥templateså’Œâ€œtemplatesç‰¹åŒ–â€å®Œæˆå®ç°ã€‚</li><li>æ•´åˆé‡è½½æŠ€æœ¯(overloading)åï¼Œtraitsclassesæœ‰å¯èƒ½åœ¨ç¼–è¯‘æœŸå¯¹ç±»å‹æ‰§è¡Œif...elseæµ‹è¯•ã€‚</li></ol><h2 id="è®¤è¯†templateå…ƒç¼–ç¨‹">48. è®¤è¯†templateå…ƒç¼–ç¨‹</h2><ol type="1"><li>TMPæœ‰ä¸¤ä¸ªä¼Ÿå¤§çš„æ•ˆåŠ›ã€‚<ol type="1"><li>ç¬¬ä¸€ï¼Œå®ƒè®©æŸäº›äº‹æƒ…æ›´å®¹æ˜“ã€‚å¦‚æœæ²¡æœ‰å®ƒï¼Œé‚£äº›äº‹æƒ…å°†æ˜¯å›°éš¾çš„ï¼Œç”šè‡³ä¸å¯èƒ½çš„ã€‚</li><li>ç¬¬äºŒï¼Œç”±äºtemplatemetaprogramsæ‰§è¡ŒäºC++ç¼–è¯‘æœŸï¼Œå› æ­¤å¯å°†å·¥ä½œä»è¿è¡ŒæœŸè½¬ç§»åˆ°ç¼–è¯‘æœŸã€‚</li></ol></li><li>è¿™å¯¼è‡´çš„ä¸€ä¸ªç»“æœæ˜¯ï¼ŒæŸäº›é”™è¯¯åŸæœ¬é€šå¸¸åœ¨è¿è¡ŒæœŸæ‰èƒ½ä¾¦æµ‹åˆ°ï¼Œç°åœ¨å¯åœ¨ç¼–è¯‘æœŸæ‰¾å‡ºæ¥ã€‚å¦ä¸€ä¸ªç»“æœæ˜¯ï¼Œä½¿ç”¨TMPçš„C++ç¨‹åºå¯èƒ½åœ¨æ¯ä¸€æ–¹é¢éƒ½æ›´é«˜æ•ˆï¼šè¾ƒå°çš„å¯æ‰§è¡Œæ–‡ä»¶ã€è¾ƒçŸ­çš„è¿è¡ŒæœŸã€è¾ƒå°‘çš„å†…å­˜éœ€æ±‚ã€‚ç„¶è€Œå°†å·¥ä½œä»è¿è¡ŒæœŸç§»è½¬è‡³ç¼–è¯‘æœŸçš„å¦ä¸€ä¸ªç»“æœæ˜¯ï¼Œç¼–è¯‘æ—¶é—´å˜é•¿äº†ã€‚æ˜¯çš„ï¼Œç¨‹åºå¦‚æœä½¿ç”¨TMP,å…¶ç¼–è¯‘æ—¶é—´å¯èƒ½è¿œé•¿äºä¸ä½¿ç”¨TMPçš„å¯¹åº”ç‰ˆæœ¬ã€‚</li><li>æ¡æ¬¾47æŒ‡å‡ºï¼Œè¿™ä¸ªtypeid-basedè§£æ³•çš„æ•ˆç‡æ¯”traitsè§£æ³•ä½ï¼Œå› ä¸ºåœ¨æ­¤æ–¹æ¡ˆä¸­ï¼Œ(1)ç±»å‹æµ‹è¯•å‘ç”Ÿäºè¿è¡ŒæœŸè€Œéç¼–è¯‘æœŸï¼Œ(2)â€œè¿è¡ŒæœŸç±»å‹æµ‹è¯•â€ä»£ç ä¼šå‡ºç°åœ¨ï¼ˆæˆ–è¯´è¢«è¿æ¥äº)å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚å®é™…ä¸Šè¿™ä¸ªä¾‹å­æ­£å¯å½°æ˜¾TMPå¦‚ä½•èƒ½å¤Ÿæ¯”â€œæ­£å¸¸çš„â€C++ç¨‹åºæ›´é«˜æ•ˆï¼Œå› ä¸ºtraitsè§£æ³•å°±æ˜¯TMPã€‚åˆ«å¿˜äº†ï¼Œtraitså¼•å‘â€œç¼–è¯‘æœŸå‘ç”Ÿäºç±»å‹èº«ä¸Šçš„if.â€¦elseè®¡ç®—â€ã€‚</li><li>TMPå·²è¢«è¯æ˜æ˜¯ä¸ªâ€œå›¾çµå®Œå…¨â€(Turing-complete)æœºå™¨ï¼Œæ„æ€æ˜¯å®ƒçš„å¨åŠ›å¤§åˆ°è¶³ä»¥è®¡ç®—ä»»ä½•äº‹ç‰©ã€‚ä½¿ç”¨TMPä½ å¯ä»¥å£°æ˜å˜é‡ã€æ‰§è¡Œå¾ªç¯ã€ç¼–å†™åŠè°ƒç”¨å‡½æ•°â€¦ä½†è¿™èˆ¬æ„ä»¶ç›¸å¯¹äºâ€œæ­£å¸¸çš„â€C++å¯¹åº”ç‰©çœ‹èµ·æ¥å¾ˆæ˜¯ä¸åŒï¼Œä¾‹å¦‚æ¡æ¬¾47å±•ç¤ºçš„TMPif..elseæ¡ä»¶å¥æ˜¯è—‰ç”±templateså’Œå…¶ç‰¹åŒ–ä½“è¡¨ç°å‡ºæ¥ã€‚ä¸è¿‡é‚£æ¯•ç«Ÿæ˜¯æ±‡ç¼–è¯­è¨€å±‚çº§çš„TMPã€‚é’ˆå¯¹TMPè€Œè®¾è®¡çš„ç¨‹åºåº“ï¼ˆä¾‹å¦‚Boost'sMPL,è§æ¡æ¬¾55ï¼‰æä¾›æ›´é«˜å±‚çº§çš„è¯­æ³•ä¸€ä¸€å°½ç®¡ç›®å‰è¿˜ä¸è¶³ä»¥è®©ä½ è¯¯ä»¥ä¸ºé‚£æ˜¯â€œæ­£å¸¸çš„â€C++ã€‚</li><li>TMPå¹¶æ²¡æœ‰çœŸæ­£çš„å¾ªç¯æ„ä»¶ï¼Œæ‰€ä»¥å¾ªç¯æ•ˆæœç³»è—‰ç”±é€’å½’(recursion.)å®Œæˆã€‚TMPä¸»è¦æ˜¯ä¸ªâ€œå‡½æ•°å¼è¯­è¨€â€(functionallanguage),è€Œé€’å½’ä¹‹äºè¿™ç±»è¯­è¨€å°±åƒç”µè§†ä¹‹äºç¾å›½é€šä¿—æ–‡åŒ–ä¸€æ ·åœ°æ— æ³•åˆ†å‰²ã€‚TMPçš„é€’å½’ç”šè‡³ä¸æ˜¯æ­£å¸¸ç§ç±»ï¼Œå› ä¸ºTMPå¾ªç¯å¹¶ä¸æ¶‰åŠé€’å½’å‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯æ¶‰åŠâ€œé€’å½’æ¨¡æ¿å…·ç°åŒ–â€(recursivetemplate instantiationï¼‰ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/7-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B/1707571832635-303bc108-4be6-44ec-8d7b-81cdabc631b0.png"></p><ol start="6" type="1"><li>Templatemetaprogramming(TMP,æ¨¡æ¿å…ƒç¼–ç¨‹)å¯å°†å·¥ä½œç”±è¿è¡ŒæœŸç§»å¾€ç¼–è¯‘æœŸï¼Œå› è€Œå¾—ä»¥å®ç°æ—©æœŸé”™è¯¯ä¾¦æµ‹å’Œæ›´é«˜çš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>TMPå¯è¢«ç”¨æ¥ç”Ÿæˆâ€œåŸºäºæ”¿ç­–é€‰æ‹©ç»„åˆâ€(based on combinations of policychoices.)çš„å®¢æˆ·å®šåˆ¶ä»£ç ï¼Œä¹Ÿå¯ç”¨æ¥é¿å…ç”Ÿæˆå¯¹æŸäº›ç‰¹æ®Šç±»å‹å¹¶ä¸é€‚åˆçš„ä»£ç ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. ç»§æ‰¿å’Œé¢å‘å¯¹è±¡è®¾è®¡</title>
    <link href="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/"/>
    <url>/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¡®å®šä½ çš„publicç»§æ‰¿å¡‘æ¨¡å‡ºis-aå…³ç³»">32.ç¡®å®šä½ çš„publicç»§æ‰¿å¡‘æ¨¡å‡ºis-aå…³ç³»</h2><ol type="1"><li>â€œpublicç»§æ‰¿â€æ„å‘³is-a</li><li>is-aå¹¶éæ˜¯å”¯-å­˜åœ¨äºclassesä¹‹é—´çš„å…³ç³»ã€‚å¦ä¸¤ä¸ªå¸¸è§çš„å…³ç³»æ˜¯has-a(æœ‰ä¸€ä¸ª)å’Œis-implemented-in-terms-of(æ ¹æ®æŸç‰©å®ç°å‡º)ã€‚</li><li>â€œpublicç»§æ‰¿â€æ„å‘³is-aã€‚é€‚ç”¨äºbaseclassesèº«ä¸Šçš„æ¯ä¸€ä»¶äº‹æƒ…ä¸€å®šä¹Ÿé€‚ç”¨äºderivedclassesèº«ä¸Šï¼Œå› ä¸ºæ¯ä¸€ä¸ªderived classå¯¹è±¡ä¹Ÿéƒ½æ˜¯ä¸€ä¸ªbase classå¯¹è±¡ã€‚</li></ol><h2 id="é¿å…é®æ©ç»§æ‰¿è€Œæ¥çš„åç§°">33. é¿å…é®æ©ç»§æ‰¿è€Œæ¥çš„åç§°</h2><ol type="1"><li>baseclasså†…çš„æŸç‰©ï¼ˆä¹Ÿè®¸æ˜¯ä¸ªæˆå‘˜å‡½æ•°ã€typedefã€æˆ–æˆå‘˜å˜é‡ï¼‰æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥æ‰¾å‡ºæˆ‘ä»¬æ‰€æŒ‡æ¶‰çš„ä¸œè¥¿ï¼Œå› ä¸ºderivedclassesç»§æ‰¿äº†å£°æ˜äºbase classeså†…çš„æ‰€æœ‰ä¸œè¥¿ã€‚å®é™…è¿ä½œæ–¹å¼æ˜¯ï¼Œderivedclassä½œç”¨åŸŸè¢«åµŒå¥—åœ¨base classä½œç”¨åŸŸå†…<ol type="1"><li><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707472078740-a22bc7ef-2776-4539-b414-6ec3f0d680bb.png"></li></ol></li><li>æœ‰æ—¶å€™ä½ å¹¶ä¸æƒ³ç»§æ‰¿base classesçš„æ‰€æœ‰å‡½æ•°ï¼Œè¿™æ˜¯å¯ä»¥ç†è§£çš„ã€‚<ol type="1"><li>åœ¨publicç»§æ‰¿ä¸‹ï¼Œè¿™ç»å¯¹ä¸å¯èƒ½å‘ç”Ÿï¼Œå› ä¸ºå®ƒè¿åäº†publicç»§æ‰¿æ‰€æš—ç¤ºçš„â€œbaseå’Œderivedclassesä¹‹é—´çš„isaå…³ç³»â€ã€‚ï¼ˆè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä¸Šè¿°usingå£°æ˜å¼è¢«æ”¾åœ¨derivedclassçš„publicåŒºåŸŸçš„åŸå› ï¼šbase classå†…çš„publicåç§°åœ¨publicly derivedclasså†…ä¹Ÿåº”è¯¥æ˜¯publicã€‚)</li><li>ç„¶è€Œåœ¨privateç»§æ‰¿ä¹‹ä¸‹ï¼ˆè§æ¡æ¬¾39)å®ƒå´å¯èƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚å‡è®¾Derivedä»¥privateå½¢å¼ç»§æ‰¿Base,è€ŒDerivedå”¯æƒ³ç»§æ‰¿çš„mf1æ˜¯é‚£ä¸ªæ— å‚æ•°ç‰ˆæœ¬ã€‚usingå£°æ˜å¼åœ¨è¿™é‡Œæ´¾ä¸ä¸Šç”¨åœºï¼Œå› ä¸ºusingå£°æ˜å¼ä¼šä»¤ç»§æ‰¿è€Œæ¥çš„æŸç»™å®šåç§°ä¹‹æ‰€æœ‰åŒåå‡½æ•°åœ¨derivedclassä¸­éƒ½å¯è§ã€‚ä¸ï¼Œæˆ‘ä»¬éœ€è¦ä¸åŒçš„æŠ€æœ¯ï¼Œå³ä¸€ä¸ªç®€å•çš„è½¬äº¤å‡½æ•°(forwardingfunction)</li><li><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707476895583-0a89d8bb-a633-4917-8512-b92d034b8377.png"></li></ol></li><li><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707476841476-416c6a76-60d6-412c-895d-d675ff490a57.png"></li><li>inlineè½¬äº¤å‡½æ•°(forwardingfunction)çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯ä¸ºé‚£äº›ä¸æ”¯æŒusingå£°æ˜å¼ï¼ˆæ³¨ï¼šè¿™å¹¶éæ­£ç¡®è¡Œä¸ºï¼‰çš„è€æ—§ç¼–è¯‘å™¨å¦è¾Ÿä¸€æ¡æ–°è·¯ï¼Œå°†ç»§æ‰¿è€Œå¾—çš„åç§°æ±‡å…¥derivedclassä½œç”¨åŸŸå†…ã€‚</li><li>derived classeså†…çš„åç§°ä¼šé®æ©baseclasseså†…çš„åç§°ã€‚åœ¨publicç»§æ‰¿ä¸‹ä»æ¥æ²¡æœ‰äººå¸Œæœ›å¦‚æ­¤ã€‚</li><li>ä¸ºäº†è®©è¢«é®æ©çš„åç§°å†è§å¤©æ—¥ï¼Œå¯ä½¿ç”¨usingå£°æ˜å¼æˆ–è½¬äº¤å‡½æ•°(forwardingfunctions)</li></ol><h2 id="åŒºåˆ†æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿">34. åŒºåˆ†æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿</h2><ol type="1"><li>publicç»§æ‰¿ç”±å‡½æ•°æ¥å£ç»§æ‰¿å’Œå‡½æ•°å®ç°ç»§æ‰¿</li><li>èº«ä¸ºclassè®¾è®¡è€…ï¼Œæœ‰æ—¶å€™ä½ ä¼šå¸Œæœ›<ol type="1"><li>derived classesåªç»§æ‰¿æˆå‘˜å‡½æ•°çš„æ¥å£ï¼ˆä¹Ÿå°±æ˜¯å£°æ˜)ï¼›</li><li>æœ‰æ—¶å€™ä½ åˆä¼šå¸Œæœ›derivedclassesåŒæ—¶ç»§æ‰¿å‡½æ•°çš„æ¥å£å’Œå®ç°ï¼Œä½†åˆå¸Œæœ›èƒ½å¤Ÿè¦†å†™(override)å®ƒä»¬æ‰€ç»§æ‰¿çš„å®ç°ï¼›</li><li>åˆæœ‰æ—¶å€™ä½ å¸Œæœ›derivedclassesåŒæ—¶ç»§æ‰¿å‡½æ•°çš„æ¥å£å’Œå®ç°ï¼Œå¹¶ä¸”ä¸å…è®¸è¦†å†™ä»»ä½•ä¸œè¥¿ã€‚</li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">error</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; msg)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">objectID</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>: <span class="hljs-keyword">public</span> Shape&#123;&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ellipse</span>: <span class="hljs-keyword">public</span> Shape&#123;&#125;;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>Shapeæ˜¯ä¸ªæŠ½è±¡class;:å®ƒçš„purevirtualå‡½æ•°drawä½¿å®ƒæˆä¸ºä¸€ä¸ªæŠ½è±¡classã€‚æ‰€ä»¥å®¢æˆ·ä¸èƒ½å¤Ÿåˆ›å»ºShapeclassçš„å®ä½“ï¼Œåªèƒ½åˆ›å»ºå…¶derivedclassesçš„å®ä½“ã€‚å°½ç®¡å¦‚æ­¤ï¼ŒShapeè¿˜æ˜¯å¼ºçƒˆå½±å“äº†æ‰€æœ‰ä»¥publicå½¢å¼ç»§æ‰¿å®ƒçš„derivedclasses,å› ä¸ºï¼š<ol type="1"><li>æˆå‘˜å‡½æ•°çš„æ¥å£æ€»æ˜¯ä¼šè¢«ç»§æ‰¿ã€‚purevirtualå‡½æ•°æœ‰ä¸¤ä¸ªæœ€çªå‡ºçš„ç‰¹æ€§ï¼šå®ƒä»¬å¿…é¡»è¢«ä»»ä½•â€œç»§æ‰¿äº†å®ƒä»¬â€çš„å…·è±¡classé‡æ–°å£°æ˜ï¼Œè€Œä¸”å®ƒä»¬åœ¨æŠ½è±¡classä¸­é€šå¸¸æ²¡æœ‰å®šä¹‰ã€‚æŠŠè¿™ä¸¤ä¸ªæ€§è´¨æ‘†åœ¨ä¸€èµ·ï¼Œä½ å°±ä¼šæ˜ç™½ï¼š</li><li>å£°æ˜ä¸€ä¸ªpure virtualå‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†è®©derivedclassesåªç»§æ‰¿å‡½æ•°æ¥å£ã€‚</li><li>ä»¤äººæ„å¤–çš„æ˜¯ï¼Œæˆ‘ä»¬ç«Ÿç„¶å¯ä»¥ä¸ºpurevirtualå‡½æ•°æä¾›å®šä¹‰ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ä¸ºShape::drawä¾›åº”ä¸€ä»½å®ç°ä»£ç ï¼ŒC++å¹¶ä¸ä¼šå‘å‡ºæ€¨è¨€ï¼Œä½†è°ƒç”¨å®ƒçš„å”¯ä¸€é€”å¾„æ˜¯â€œè°ƒç”¨æ—¶æ˜ç¡®æŒ‡å‡ºå…¶classåç§°â€ï¼š</li><li><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707526635349-d4f46534-4348-464c-b582-814b87939a8c.png"></li><li>å¯ä»¥ä¸ºç®€æœ´çš„impure virtual å‡½æ•°æä¾›æ›´å¹³å¸¸æ›´å®‰å…¨çš„ç¼ºçœå®ç°</li></ol></li><li>ç®€æœ´çš„impure virtualå‡½æ•°èƒŒåçš„æ•…äº‹å’Œpurevirtualå‡½æ•°æœ‰ç‚¹ä¸åŒã€‚ä¸€å¦‚å¾€å¸¸ï¼Œderived classesç»§æ‰¿å…¶å‡½æ•°æ¥å£ï¼Œä½†impurevirtualå‡½æ•°ä¼šæä¾›ä¸€ä»½å®ç°ä»£ç ï¼Œderivedclasseså¯èƒ½è¦†å†™(override)å®ƒã€‚</li><li>å£°æ˜ç®€æœ´çš„ï¼ˆéçº¯ï¼‰impure virtualå‡½æ•°çš„ç›®çš„ï¼Œæ˜¯è®©derivedclassesç»§æ‰¿è¯¥å‡½æ•°çš„æ¥å£å’Œç¼ºçœå®ç°ã€‚</li><li>å¯ä»¥â€œæä¾›ç¼ºçœå®ç°ç»™derivedclasses,ä½†é™¤éå®ƒä»¬æ˜ç™½è¦æ±‚å¦åˆ™å…è°ˆâ€ã€‚æ­¤é—´æŠ€ä¿©åœ¨äºåˆ‡æ–­â€œvirtualå‡½æ•°æ¥å£â€å’Œå…¶â€œç¼ºçœå®ç°â€ä¹‹é—´çš„è¿æ¥ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Airplane</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-keyword">protected</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">defaultFly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span></span>;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Airplane::defaultFly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span></span><br><span class="hljs-function"></span>&#123;<br>    ç¼ºçœè¡Œä¸ºï¼Œå°†é£æœºé£è‡³æŒ‡å®šç›®çš„åœ°<br>&#125;<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>è‹¥æƒ³ä½¿ç”¨ç¼ºçœå®ç°ï¼ˆä¾‹å¦‚ModelAå’ŒModelB),å¯ä»¥åœ¨å…¶flyå‡½æ•°ä¸­å¯¹defaultFlyåšä¸€ä¸ªinlineè°ƒç”¨</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelA</span>: <span class="hljs-keyword">public</span> Airplane&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span> </span>&#123;<span class="hljs-built_in">defaultFly</span>(destination)&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>ç°åœ¨Modelcclassä¸å¯èƒ½æ„å¤–ç»§æ‰¿ä¸æ­£ç¡®çš„flyå®ç°ä»£ç äº†ï¼Œå› ä¸ºAirplaneä¸­çš„purevirtualå‡½æ•°è¿«ä½¿ModelCå¿…é¡»æä¾›è‡ªå·±çš„flyç‰ˆæœ¬ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelC</span>: <span class="hljs-keyword">public</span> Airplane&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span></span>;<br>&#125;;<br><br><span class="hljs-type">void</span> ModelC:<span class="hljs-built_in">fly</span>(<span class="hljs-type">const</span> Airport&amp; destination)<br>&#123;<br>    å°†Cå‹é£æœºé£è‡³æŒ‡å®šçš„ç›®çš„åœ°<br>&#125;<br></code></pre></td></tr></table></figure><ol start="9" type="1"><li>pure virtualå‡½æ•°å¿…é¡»åœ¨derivedclassesä¸­é‡æ–°å£°æ˜ï¼Œä½†å®ƒä»¬ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å®ç°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Airplane</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Airplane::fly</span><span class="hljs-params">(cosnt Airport&amp; destiantion)</span></span><br><span class="hljs-function"></span>&#123;<br>    ç¼ºçœè¡Œä¸º<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelA</span>: <span class="hljs-keyword">public</span> Airplane&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span></span><br><span class="hljs-function">    </span>&#123;<br>        Airplane::<span class="hljs-built_in">fly</span>(destination);<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelC</span>: <span class="hljs-keyword">public</span> Airplane&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span></span>;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ModelC::fly</span><span class="hljs-params">(<span class="hljs-type">const</span> Airport&amp; destination)</span></span><br><span class="hljs-function"></span>&#123;<br>    é£æŒ‡å®šåœ°ç‚¹<br>&#125;<br></code></pre></td></tr></table></figure><ol start="10" type="1"><li>å¦‚æœæˆå‘˜å‡½æ•°æ˜¯ä¸ªnon-virtualå‡½æ•°ï¼Œæ„å‘³æ˜¯å®ƒå¹¶ä¸æ‰“ç®—åœ¨derivedclassesä¸­æœ‰ä¸åŒçš„è¡Œä¸ºã€‚å®é™…ä¸Šä¸€ä¸ªnon-virtualæˆå‘˜å‡½æ•°æ‰€è¡¨ç°çš„ä¸å˜æ€§(invariant),å‡Œé©¾å…¶ç‰¹å¼‚æ€§ï¼ˆspecialization),å› ä¸ºå®ƒè¡¨ç¤ºä¸è®ºderivedclasså˜å¾—å¤šä¹ˆç‰¹å¼‚åŒ–ï¼Œå®ƒçš„è¡Œä¸ºéƒ½ä¸å¯ä»¥æ”¹å˜ã€‚å°±å…¶è‡ªèº«è€Œè¨€ï¼š<ol type="1"><li>å£°æ˜non-virtualå‡½æ•°çš„ç›®çš„æ˜¯ä¸ºäº†ä»¤derivedclassesç»§æ‰¿å‡½æ•°çš„æ¥å£åŠä¸€ä»½å¼ºåˆ¶æ€§å®ç°ã€‚</li></ol></li><li>purevirtualå‡½æ•°ã€simple(impure)virtualå‡½æ•°ã€non-virtualå‡½æ•°ä¹‹é—´çš„å·®å¼‚ï¼Œä½¿ä½ å¾—ä»¥ç²¾ç¡®æŒ‡å®šä½ æƒ³è¦derivedclassesç»§æ‰¿çš„ä¸œè¥¿ï¼šåªç»§æ‰¿æ¥å£ï¼Œæˆ–æ˜¯ç»§æ‰¿æ¥å£å’Œä¸€ä»½ç¼ºçœå®ç°ï¼Œæˆ–æ˜¯ç»§æ‰¿æ¥å£å’Œä¸€ä»½å¼ºåˆ¶å®ç°ã€‚</li><li>ç¬¬ä¸€ä¸ªé”™è¯¯æ˜¯å°†æ‰€æœ‰å‡½æ•°å£°æ˜ä¸ºnon-virtualã€‚.è¿™ä½¿å¾—derivedclassesæ²¡æœ‰ä½™è£•ç©ºé—´è¿›è¡Œç‰¹åŒ–å·¥ä½œã€‚</li><li>å¦‚æœä½ å…³å¿ƒvirtualå‡½æ•°çš„æˆæœ¬ï¼Œè¯·å®¹è®¸æˆ‘ä»‹ç»æ‰€è°“çš„80-20æ³•åˆ™ï¼ˆä¹Ÿå¯è§æ¡æ¬¾30)ã€‚è¿™ä¸ªæ³•åˆ™è¯´ï¼Œä¸€ä¸ªå…¸å‹çš„ç¨‹åºæœ‰80å·çš„æ‰§è¡Œæ—¶é—´èŠ±è´¹åœ¨20%çš„ä»£ç èº«ä¸Šã€‚æ­¤ä¸€æ³•åˆ™ååˆ†é‡è¦ï¼Œå› ä¸ºå®ƒæ„å‘³ï¼Œå¹³å‡è€Œè¨€ä½ çš„å‡½æ•°è°ƒç”¨ä¸­å¯ä»¥æœ‰80å·æ˜¯virtualè€Œä¸å†²å‡»ç¨‹åºçš„å¤§ä½“æ•ˆç‡ã€‚æ‰€ä»¥å½“ä½ æ‹…å¿ƒæ˜¯å¦æœ‰èƒ½åŠ›è´Ÿæ‹…virtualå‡½æ•°çš„æˆæœ¬ä¹‹å‰ï¼Œè¯·å…ˆå°†å¿ƒåŠ›æ”¾åœ¨é‚£ä¸¾è¶³è½»é‡çš„20å·ä»£ç ä¸Šå¤´ï¼Œå®ƒæ‰æ˜¯çœŸæ­£çš„å…³é”®ã€‚</li><li>å¦ä¸€ä¸ªå¸¸è§é”™è¯¯æ˜¯å°†æ‰€æœ‰æˆå‘˜å‡½æ•°å£°æ˜ä¸ºvirtualã€‚æœ‰æ—¶å€™è¿™æ ·åšæ˜¯æ­£ç¡®çš„ï¼Œä¾‹å¦‚æ¡æ¬¾31çš„Interfaceclassesã€‚ç„¶è€Œè¿™ä¹Ÿå¯èƒ½æ˜¯classè®¾è®¡è€…ç¼ºä¹åšå®šç«‹åœºçš„å‰å…†ã€‚æŸäº›å‡½æ•°å°±æ˜¯ä¸è¯¥åœ¨derivedclassä¸­è¢«é‡æ–°å®šä¹‰ï¼ŒæœçœŸå¦‚æ­¤ä½ åº”è¯¥å°†é‚£äº›å‡½æ•°å£°æ˜ä¸ºnon-virtualã€‚.æ²¡æœ‰äººæœ‰æƒåˆ©å¦„ç§°ä½ çš„classé€‚ç”¨äºä»»ä½•äººä»»ä½•äº‹ä»»ä½•ç‰©è€Œä»–ä»¬åªéœ€èŠ±ç‚¹æ—¶é—´é‡æ–°å®šä¹‰ä½ çš„å‡½æ•°å°±å¯ä»¥äº«å—ä¸€åˆ‡ã€‚å¦‚æœä½ çš„ä¸å˜æ€§(invariant)å‡Œé©¾ç‰¹å¼‚æ€§(specialization).ï¼Œåˆ«å®³æ€•è¯´å‡ºæ¥ã€‚</li><li>æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿ä¸åŒã€‚åœ¨publicç»§æ‰¿ä¹‹ä¸‹ï¼Œderivedclassesæ€»æ˜¯ç»§æ‰¿base classçš„æ¥å£ã€‚</li><li>pure virtualå‡½æ•°åªå…·ä½“æŒ‡å®šæ¥å£ç»§æ‰¿ã€‚</li><li>ç®€æœ´çš„ï¼ˆéçº¯ï¼‰impurevirtualå‡½æ•°å…·ä½“æŒ‡å®šæ¥å£ç»§æ‰¿åŠç¼ºçœå®ç°ç»§æ‰¿ã€‚</li><li>non-virtualå‡½æ•°å…·ä½“æŒ‡å®šæ¥å£ç»§æ‰¿ä»¥åŠå¼ºåˆ¶æ€§å®ç°ç»§æ‰¿ã€‚</li></ol><h2 id="è€ƒè™‘virtualå‡½æ•°ä»¥å¤–çš„å…¶ä»–é€‰æ‹©">35.è€ƒè™‘virtualå‡½æ•°ä»¥å¤–çš„å…¶ä»–é€‰æ‹©</h2><ol type="1"><li><strong>è—‰ç”±Non-Virtual Interfaceæ‰‹æ³•å®ç°TemplateMethodæ¨¡å¼</strong></li><li>ç›´æ¥åœ¨classå®šä¹‰å¼å†…å‘ˆç°æˆå‘˜å‡½æ•°ï¼Œé‚£ä¹Ÿå°±è®©å®ƒä»¬å…¨éƒ½æš—è‡ªæˆäº†inlineã€‚</li><li>è¿™ä¸€åŸºæœ¬è®¾è®¡ï¼Œä¹Ÿå°±æ˜¯â€œä»¤å®¢æˆ·é€šè¿‡publicnon-virtualæˆå‘˜å‡½æ•°é—´æ¥è°ƒç”¨private virtualå‡½æ•°â€ï¼Œç§°ä¸ºnon-virtualinterface(NVI)æ‰‹æ³•ã€‚å®ƒæ˜¯æ‰€è°“TemplateMethodè®¾è®¡æ¨¡å¼ï¼ˆä¸C+templateså¹¶æ— å…³è”ï¼‰çš„ä¸€ä¸ªç‹¬ç‰¹è¡¨ç°å½¢å¼ã€‚</li><li>NVIæ‰‹æ³•çš„ä¸€ä¸ªä¼˜ç‚¹éšèº«åœ¨ä¸Šè¿°ä»£ç æ³¨é‡Šâ€œåšä¸€äº›äº‹å‰å·¥ä½œâ€å’Œâ€œåšä¸€äº›äº‹åå·¥ä½œâ€ä¹‹ä¸­ã€‚é‚£äº›æ³¨é‡Šç”¨æ¥å‘Šè¯‰ä½ å½“æ—¶çš„ä»£ç ä¿è¯åœ¨â€œvirtualå‡½æ•°è¿›è¡ŒçœŸæ­£å·¥ä½œä¹‹å‰å’Œä¹‹åâ€è¢«è°ƒç”¨ã€‚</li><li>åœ¨NVIæ‰‹æ³•ä¸‹å…¶å®æ²¡æœ‰å¿…è¦è®©virtualå‡½æ•°ä¸€å®šå¾—æ˜¯privateã€‚æŸäº›classç»§æ‰¿ä½“ç³»è¦æ±‚derivedclassåœ¨virtualå‡½æ•°çš„å®ç°å†…å¿…é¡»è°ƒç”¨å…¶baseclassçš„å¯¹åº”å…„å¼Ÿï¼Œè€Œä¸ºäº†è®©è¿™æ ·çš„è°ƒç”¨åˆæ³•ï¼Œvirtualå‡½æ•°å¿…é¡»æ˜¯protected,ä¸èƒ½æ˜¯privateã€‚æœ‰æ—¶å€™virtualå‡½æ•°ç”šè‡³ä¸€å®šå¾—æ˜¯public(ä¾‹å¦‚å…·å¤‡å¤šæ€æ€§è´¨çš„baseclassesçš„ææ„å‡½æ•°ä¸€è§æ¡æ¬¾7)ï¼Œè¿™ä¹ˆä¸€æ¥å°±ä¸èƒ½å®æ–½NVIæ‰‹æ³•äº†ã€‚</li><li><strong>è—‰ç”±Function Pointerså®ç°Strategyæ¨¡å¼</strong></li><li>åŒä¸€äººç‰©ç±»å‹ä¹‹ä¸åŒå®ä½“å¯ä»¥æœ‰ä¸åŒçš„å¥åº·è®¡ç®—å‡½æ•°ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707530940516-84b197b8-7e89-4800-a3ee-0dab8bc0b127.png"></p><ol start="8" type="1"><li>æŸå·±çŸ¥äººç‰©ä¹‹å¥åº·æŒ‡æ•°è®¡ç®—å‡½æ•°å¯åœ¨è¿è¡ŒæœŸå˜æ›´ã€‚</li><li>å®é™…ä¸Šä»»ä½•æ—¶å€™å½“ä½ å°†classå†…çš„æŸä¸ªæœºèƒ½ï¼ˆä¹Ÿè®¸å–é“è‡ªæŸä¸ªæˆå‘˜å‡½æ•°ï¼‰æ›¿æ¢ä¸ºclasså¤–éƒ¨çš„æŸä¸ªç­‰ä»·æœºèƒ½ï¼ˆä¹Ÿè®¸å–é“è‡ªæŸä¸ªnon-membernon-friendå‡½æ•°æˆ–å¦ä¸€ä¸ªcassçš„non-friendæˆå‘˜å‡½æ•°)ï¼Œè¿™éƒ½æ˜¯æ½œåœ¨äº‰è®®ç‚¹ã€‚</li><li>å”¯ä¸€èƒ½å¤Ÿè§£å†³â€œéœ€è¦ä»¥non-memberå‡½æ•°è®¿é—®classçš„non-publicæˆåˆ†â€çš„åŠæ³•å°±æ˜¯ï¼šå¼±åŒ–classçš„å°è£…ã€‚è¿ç”¨å‡½æ•°æŒ‡é’ˆæ›¿æ¢virtualå‡½æ•°ï¼Œå…¶ä¼˜ç‚¹ï¼ˆåƒæ˜¯â€œæ¯ä¸ªå¯¹è±¡å¯å„è‡ªæ‹¥æœ‰è‡ªå·±çš„å¥åº·è®¡ç®—å‡½æ•°â€å’Œâ€œå¯åœ¨è¿è¡ŒæœŸæ”¹å˜è®¡ç®—å‡½æ•°â€)æ˜¯å¦è¶³ä»¥å¼¥è¡¥ç¼ºç‚¹ï¼ˆä¾‹å¦‚å¯èƒ½å¿…é¡»é™ä½GameCharacterå°è£…æ€§)ï¼Œæ˜¯ä½ å¿…é¡»æ ¹æ®æ¯ä¸ªè®¾è®¡æƒ…å†µçš„ä¸åŒè€ŒæŠ‰æ‹©çš„ã€‚</li><li><strong>è—‰ç”±trl:functionå®ŒæˆStrategyæ¨¡å¼</strong></li><li>ä¸€æ—¥ä¹ æƒ¯äº†templatesä»¥åŠå®ƒä»¬å¯¹éšå¼æ¥å£ï¼ˆè§æ¡æ¬¾41)çš„ä½¿ç”¨ï¼ŒåŸºäºå‡½æ•°æŒ‡é’ˆçš„åšæ³•çœ‹èµ·æ¥ä¾¿è¿‡åˆ†è‹›åˆ»è€Œæ­»æ¿äº†ã€‚</li><li>å¦‚æœæˆ‘ä»¬ä¸å†ä½¿ç”¨å‡½æ•°æŒ‡é’ˆï¼ˆå¦‚å‰ä¾‹çš„healthFunc),è€Œæ˜¯æ”¹ç”¨ä¸€ä¸ªç±»å‹ä¸ºtr1::unctionçš„å¯¹è±¡ï¼Œè¿™äº›çº¦æŸå°±å…¨éƒ½æŒ¥å‘ä¸è§äº†ã€‚å°±åƒæ¡æ¬¾54æ‰€è¯´ï¼Œè¿™æ ·çš„å¯¹è±¡å¯æŒæœ‰ï¼ˆä¿å­˜)ä»»ä½•å¯è°ƒç”¨ç‰©(callableentity,ä¹Ÿå°±æ˜¯å‡½æ•°æŒ‡é’ˆã€å‡½æ•°å¯¹è±¡ã€æˆ–æˆå‘˜å‡½æ•°æŒ‡é’ˆ)ï¼Œåªè¦å…¶ç­¾åå¼å…¼å®¹äºéœ€æ±‚ç«¯ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> std::tr1::function&lt;<span class="hljs-type">int</span> (<span class="hljs-type">const</span> GameCharacter&amp;)&gt; HealthCalcFunc;<br></code></pre></td></tr></table></figure><ol start="14" type="1"><li>tr1::functionåƒä¸€èˆ¬çš„å‡½æ•°æŒ‡é’ˆï¼Œè¿™ä¸ªtr1::functionç±»å‹äº§ç”Ÿçš„å¯¹è±¡å¯ä»¥æŒæœ‰ä»»ä½•ä¸æ­¤ç­¾åå¼å…¼å®¹çš„å¯è°ƒç”¨ç‰©ã€‚æ‰€è°“å…¼å®¹ï¼Œå°±æ˜¯è¿™ä¸ªå¯è°ƒç”¨ç‰©çš„å‚æ•°å¯è¢«éšå¼è½¬æ¢ä¸ºconstGameCharacter&amp;ï¼Œè€Œå…¶è¿”å›ç±»å‹å¯è¢«éšå¼è½¬æ¢ä¸ºintã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707532060759-2bde1f88-4e85-4cc5-a399-2d7e09a552da.png"></p><ol start="15" type="1"><li><strong>å¤å…¸çš„Strategyæ¨¡å¼</strong></li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707532579120-22de152a-6b54-4379-bed2-10cd45c99d1a.png"></p><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707532676304-dc836a59-a083-478f-8354-18ceacc6e742.png"></p><ol start="16" type="1"><li>æœ¬æ¡æ¬¾çš„æ ¹æœ¬å¿ å‘Šæ˜¯ï¼Œå½“ä½ ä¸ºè§£å†³é—®é¢˜è€Œå¯»æ‰¾æŸä¸ªè®¾è®¡æ–¹æ³•æ—¶ï¼Œä¸å¦¨è€ƒè™‘virtualå‡½æ•°çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä¸‹é¢å¿«é€Ÿé‡ç‚¹å¤ä¹ æˆ‘ä»¬éªŒè¯è¿‡çš„å‡ ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼š</li><li>ä½¿ç”¨non-virtual interface(NVI)æ‰‹æ³•ï¼Œé‚£æ˜¯TemplateMethodè®¾è®¡æ¨¡å¼çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚å®ƒä»¥publicnon-virtualæˆå‘˜å‡½æ•°åŒ…è£¹è¾ƒä½è®¿é—®æ€§(privateæˆ–protected)çš„virtualå‡½æ•°ã€‚</li><li>å°†virtualå‡½æ•°æ›¿æ¢ä¸ºâ€œå‡½æ•°æŒ‡é’ˆæˆå‘˜å˜é‡â€ï¼Œè¿™æ˜¯Strategyè®¾è®¡æ¨¡å¼çš„ä¸€ç§åˆ†è§£è¡¨ç°å½¢å¼ã€‚</li><li>ä»¥trl:functionæˆå‘˜å˜é‡æ›¿æ¢virtualå‡½æ•°ï¼Œå› è€Œå…è®¸ä½¿ç”¨ä»»ä½•å¯è°ƒç”¨ç‰©(callableentity)æ­é…ä¸€ä¸ªå…¼å®¹äºéœ€æ±‚çš„ç­¾åå¼ã€‚è¿™ä¹Ÿæ˜¯Strategyè®¾è®¡æ¨¡å¼çš„æŸç§å½¢å¼ã€‚</li><li>å°†ç»§æ‰¿ä½“ç³»å†…çš„virtualå‡½æ•°æ›¿æ¢ä¸ºå¦ä¸€ä¸ªç»§æ‰¿ä½“ç³»å†…çš„virtualå‡½æ•°ã€‚è¿™æ˜¯Strategyè®¾è®¡æ¨¡å¼çš„ä¼ ç»Ÿå®ç°æ‰‹æ³•ã€‚</li><li>virtualå‡½æ•°çš„æ›¿ä»£æ–¹æ¡ˆåŒ…æ‹¬NVIæ‰‹æ³•åŠStrategyè®¾è®¡æ¨¡å¼çš„å¤šç§å½¢å¼ã€‚Nâ…¥æ‰‹æ³•è‡ªèº«æ˜¯ä¸€ä¸ªç‰¹æ®Šå½¢å¼çš„TemplateMethodè®¾è®¡æ¨¡å¼ã€‚</li><li>å°†æœºèƒ½ä»æˆå‘˜å‡½æ•°ç§»åˆ°clsså¤–éƒ¨å‡½æ•°ï¼Œå¸¦æ¥çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œéæˆå‘˜å‡½æ•°æ— æ³•è®¿é—®classçš„non-publicæˆå‘˜ã€‚</li><li>trl:functionå¯¹è±¡çš„è¡Œä¸ºå°±åƒä¸€èˆ¬å‡½æ•°æŒ‡é’ˆã€‚è¿™æ ·çš„å¯¹è±¡å¯æ¥çº³â€œä¸ç»™å®šä¹‹ç›®æ ‡ç­¾åå¼(targetsignature)å…¼å®¹â€çš„æ‰€æœ‰å¯è°ƒç”¨ç‰©(callable entities)ã€‚</li></ol><h2 id="ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„non-virtualå‡½æ•°">36.ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„non-virtualå‡½æ•°</h2><ol type="1"><li>ç»å¯¹ä¸è¦é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„non-virtualå‡½æ•°ã€‚</li></ol><h2 id="ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„ç¼ºçœå‚æ•°å€¼">37.ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„ç¼ºçœå‚æ•°å€¼</h2><ol type="1"><li>ç»§æ‰¿ä¸€ä¸ªå¸¦æœ‰ç¼ºçœå‚æ•°å€¼çš„virtualå‡½æ•°</li><li>virtualå‡½æ•°ç³»åŠ¨æ€ç»‘å®šï¼Œè€Œç¼ºçœå‚æ•°å€¼å´æ˜¯é™æ€ç»‘å®šã€‚é™æ€ç»‘å®šåˆå„å‰æœŸç»‘å®šï¼Œearlybinding;åŠ¨æ€ç»‘å®šåˆååæœŸç»‘å®šï¼Œlate bindingã€‚</li><li>virtualå‡½æ•°æ˜¯åŠ¨æ€ç»‘å®šï¼Œè€Œç¼ºçœå‚æ•°å€¼å´æ˜¯é™æ€ç»‘å®šã€‚æ„æ€æ˜¯ä½ å¯èƒ½ä¼šåœ¨â€œè°ƒç”¨ä¸€ä¸ªå®šä¹‰äºderivedclasså†…çš„virtualå‡½æ•°â€çš„åŒæ—¶ï¼Œå´ä½¿ç”¨base classä¸ºå®ƒæ‰€æŒ‡å®šçš„ç¼ºçœå‚æ•°å€¼</li><li>æ¡æ¬¾35åˆ—äº†ä¸å°‘virtualå‡½æ•°çš„æ›¿ä»£è®¾è®¡ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯NVI(non-virtualinterface)æ‰‹æ³•ï¼šä»¤base classå†…çš„ä¸€ä¸ªpublic non-virtualå‡½æ•°è°ƒç”¨privatevirtualå‡½æ•°ï¼Œåè€…å¯è¢«derivedclassesé‡æ–°å®šä¹‰ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥è®©non-virtualå‡½æ•°æŒ‡å®šç¼ºçœå‚æ•°ï¼Œè€Œprivatevirtualå‡½æ•°è´Ÿè´£çœŸæ­£çš„å·¥ä½œï¼š</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707533914463-b881606c-63c1-42e5-b931-dc0cd789ac15.png"></p><ol start="5" type="1"><li>ç»å¯¹ä¸è¦é‡æ–°å®šä¹‰ä¸€ä¸ªç»§æ‰¿è€Œæ¥çš„ç¼ºçœå‚æ•°å€¼ï¼Œå› ä¸ºç¼ºçœå‚æ•°å€¼éƒ½æ˜¯é™æ€ç»‘å®šï¼Œè€Œvirtualå‡½æ•°ä¸€ä½ å”¯ä¸€åº”è¯¥è¦†å†™çš„ä¸œè¥¿ä¸€å´æ˜¯åŠ¨æ€ç»‘å®šã€‚</li></ol><h2 id="é€šè¿‡ç¬¦åˆå¡‘æ¨¡å‡ºhas-aæˆ–æ ¹æ®æŸç‰©å®ç°å‡º">38.é€šè¿‡ç¬¦åˆå¡‘æ¨¡å‡ºhas-aæˆ–æ ¹æ®æŸç‰©å®ç°å‡º</h2><ol type="1"><li>å¤åˆ(composition)è¿™ä¸ªæœ¯è¯­æœ‰è®¸å¤šåŒä¹‰è¯ï¼ŒåŒ…æ‹¬laå››yeringï¼ˆåˆ†å±‚)ï¼Œcontainment(å†…å«)ï¼Œaggregation(èšåˆï¼‰å’Œembedding(å†…åµŒ)ã€‚</li><li>å½“å¤åˆå‘ç”Ÿäºåº”ç”¨åŸŸå†…çš„å¯¹è±¡ä¹‹é—´ï¼Œè¡¨ç°å‡ºhasaçš„å…³ç³»ï¼›å½“å®ƒå‘ç”Ÿäºå®ç°åŸŸå†…åˆ™æ˜¯è¡¨ç°is-implemented-in-terms-ofçš„å…³ç³»</li><li>æ¯”è¾ƒéº»çƒ¦çš„æ˜¯åŒºåˆ†is-a(æ˜¯ä¸€ç§)å’Œis-implemented-in-terms.-of(æ ¹æ®æŸç‰©å®ç°å‡º)è¿™ä¸¤ç§å¯¹è±¡å…³ç³»ã€‚</li><li>å¤åˆ(composition)çš„æ„ä¹‰å’Œpublicç»§æ‰¿å®Œå…¨ä¸åŒã€‚</li><li>åœ¨åº”ç”¨åŸŸ(applicationdomain),å¤åˆæ„å‘³has-a(æœ‰ä¸€ä¸ª)ã€‚åœ¨å®ç°åŸŸ(implementationdomain.),å¤åˆæ„å‘³is-implemented-.in-terms-of(æ ¹æ®æŸç‰©å®ç°å‡º)ã€‚</li></ol><h2 id="æ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨privateç»§æ‰¿">39.æ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨privateç»§æ‰¿</h2><ol type="1"><li>å¦‚æœclassesä¹‹é—´çš„ç»§æ‰¿å…³ç³»æ˜¯private,ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨å°†ä¸€ä¸ªderivedclasså¯¹è±¡ï¼ˆä¾‹å¦‚Student)è½¬æ¢ä¸ºä¸€ä¸ªbaseclasså¯¹è±¡ï¼ˆä¾‹å¦‚Person)ã€‚è¿™å’Œpublicç»§æ‰¿çš„æƒ…å†µä¸åŒã€‚</li><li>ç¬¬äºŒæ¡è§„åˆ™æ˜¯ï¼Œç”±private base classç»§æ‰¿è€Œæ¥çš„æ‰€æœ‰æˆå‘˜ï¼Œåœ¨derivedclassä¸­éƒ½ä¼šå˜æˆprivateå±æ€§ï¼Œçºµä½¿å®ƒä»¬åœ¨baseclassä¸­åŸæœ¬æ˜¯protectedæˆ–publicå±æ€§ã€‚</li><li>Privateç»§æ‰¿æ„å‘³is-implemented-in-terms-of(æ ¹æ®æŸç‰©å®ç°å‡º)ï¼Œè¿™ä¸ªäº‹å®æœ‰ç‚¹ä»¤äººä¸å®‰ï¼Œå› ä¸ºæ¡æ¬¾38æ‰åˆšæŒ‡å‡ºå¤åˆ(composition)çš„æ„ä¹‰ä¹Ÿæ˜¯è¿™æ ·ã€‚ä½ å¦‚ä½•åœ¨ä¸¤è€…ä¹‹é—´å–èˆï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼šå°½å¯èƒ½ä½¿ç”¨å¤åˆï¼Œå¿…è¦æ—¶æ‰ä½¿ç”¨privateç»§æ‰¿ã€‚ä½•æ—¶æ‰æ˜¯å¿…è¦ï¼Ÿä¸»è¦æ˜¯å½“protectedæˆå‘˜å’Œ/æˆ–virtualå‡½æ•°ç‰µæ‰¯è¿›æ¥çš„æ—¶å€™ã€‚å…¶å®è¿˜æœ‰ä¸€ç§æ¿€è¿›æƒ…å†µï¼Œé‚£æ˜¯å½“ç©ºé—´æ–¹é¢çš„åˆ©å®³å…³ç³»è¶³ä»¥è¸¢ç¿»privateç»§æ‰¿çš„æ”¯æŸ±æ—¶ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707537572173-10f98648-129a-40e0-9e2a-41cc51d576cb.png"></p><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707537803594-b7aabf0a-f774-4507-9cbd-025c9830f8ce.png"></p><ol start="4" type="1"><li>ç”¨å¤åˆå–è€Œä»£ä¹‹ï¼Œåœ¨Widgetå†…å£°æ˜ä¸€ä¸ªåµŒå¥—å¼privateclassï¼Œåè€…ä»¥publicå½¢å¼ç»§æ‰¿Timerå¹¶é‡æ–°å®šä¹‰onTick,</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707537869955-7d7f3471-2af4-4f93-a8c8-b7f220d266c3.png"></p><ol start="5" type="1"><li>ç¨æ—©æˆ‘æ›¾è°ˆåˆ°ï¼Œprivateç»§æ‰¿ä¸»è¦ç”¨äºâ€œå½“ä¸€ä¸ªæ„æ¬²æˆä¸ºderivedclassè€…æƒ³è®¿é—®ä¸€ä¸ªæ„æ¬²æˆä¸ºbaseclassè€…çš„protectedæˆåˆ†ï¼Œæˆ–ä¸ºäº†é‡æ–°å®šä¹‰ä¸€æˆ–å¤šä¸ªvirtualå‡½æ•°â€ã€‚ä½†è¿™æ—¶å€™ä¸¤ä¸ªclassesä¹‹é—´çš„æ¦‚å¿µå…³ç³»å…¶å®æ˜¯is-implemented-in-terms-of(æ ¹æ®æŸç‰©å®ç°å‡º)è€Œéis-aã€‚ç„¶è€Œæˆ‘ä¹Ÿè¯´è¿‡ï¼Œæœ‰ä¸€ç§æ¿€è¿›æƒ…å†µæ¶‰åŠç©ºé—´æœ€ä¼˜åŒ–ï¼Œå¯èƒ½ä¼šä¿ƒä½¿ä½ é€‰æ‹©â€œprivateç»§æ‰¿â€è€Œä¸æ˜¯â€œç»§æ‰¿åŠ å¤åˆâ€ã€‚</li><li>è¿™ä¸ªæ¿€è¿›æƒ…å†µçœŸæ˜¯æœ‰å¤Ÿæ¿€è¿›ï¼Œåªé€‚ç”¨äºä½ æ‰€å¤„ç†çš„clssä¸å¸¦ä»»ä½•æ•°æ®æ—¶ã€‚è¿™æ ·çš„classesæ²¡æœ‰non-staticæˆå‘˜å˜é‡ï¼Œæ²¡æœ‰virtualå‡½æ•°ï¼ˆå› ä¸ºè¿™ç§å‡½æ•°çš„å­˜åœ¨ä¼šä¸ºæ¯ä¸ªå¯¹è±¡å¸¦æ¥ä¸€ä¸ªptr,è§æ¡æ¬¾7)ï¼Œä¹Ÿæ²¡æœ‰virtualbase classes(å› ä¸ºè¿™æ ·çš„baseclassesä¹Ÿä¼šæ‹›è‡´ä½“ç§¯ä¸Šçš„é¢å¤–å¼€é”€ï¼Œè§æ¡æ¬¾40)ã€‚äºæ˜¯è¿™ç§æ‰€è°“çš„emptyclasseså¯¹è±¡ä¸ä½¿ç”¨ä»»ä½•ç©ºé—´ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•éš¶å±å¯¹è±¡çš„æ•°æ®éœ€è¦å­˜å‚¨ã€‚ç„¶è€Œç”±äºæŠ€æœ¯ä¸Šçš„ç†ç”±ï¼ŒC++è£å®šå‡¡æ˜¯ç‹¬ç«‹ï¼ˆéé™„å±ï¼‰å¯¹è±¡éƒ½å¿…é¡»æœ‰éé›¶å¤§å°ï¼Œæ‰€ä»¥å¦‚æœä½ è¿™æ ·åšï¼š</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707538435846-92a3eed4-f3de-4ef2-b328-4a62be1096f1.png"></p><ol start="7" type="1"><li>å‡ ä¹å¯ä»¥ç¡®å®šsizeof(HoldsAnInt)=sizeof(int)ã€‚è¿™æ˜¯æ‰€è°“çš„EBO(empy baseoptimization;ç©ºç™½åŸºç±»æœ€ä¼˜åŒ–)ï¼Œæˆ‘è¯•è¿‡çš„æ‰€æœ‰ç¼–è¯‘å™¨éƒ½æœ‰è¿™æ ·çš„ç»“æœã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªç¨‹åºåº“å¼€å‘äººå‘˜ï¼Œè€Œä½ çš„å®¢æˆ·éå¸¸åœ¨æ„ç©ºé—´ï¼Œé‚£ä¹ˆå€¼å¾—æ³¨æ„EBOã€‚å¦å¤–è¿˜å€¼å¾—çŸ¥é“çš„æ˜¯ï¼ŒEBOä¸€èˆ¬åªåœ¨å•ä¸€ç»§æ‰¿ï¼ˆè€Œéå¤šé‡ç»§æ‰¿ï¼‰ä¸‹æ‰å¯è¡Œï¼Œç»Ÿæ²»C++å¯¹è±¡å¸ƒå±€çš„é‚£äº›è§„åˆ™é€šå¸¸è¡¨ç¤ºEBOæ— æ³•è¢«æ–½è¡Œäºâ€œæ‹¥æœ‰å¤šä¸ªbaseâ€çš„derivedclassesèº«ä¸Šã€‚</li><li>ç°å®ä¸­çš„"empty"classeså¹¶ä¸çœŸçš„æ˜¯emptyã€‚è™½ç„¶å®ƒä»¬ä»æœªæ‹¥æœ‰non-staticæˆå‘˜å˜é‡ï¼Œå´å¾€å¾€å†…å«typedefs,enums,.staticæˆå‘˜å˜é‡ï¼Œæˆ–non-virtualå‡½æ•°ã€‚STLå°±æœ‰è®¸å¤šæŠ€æœ¯ç”¨é€”çš„emptyclasses,å…¶ä¸­å†…å«æœ‰ç”¨çš„æˆå‘˜ï¼ˆé€šå¸¸æ˜¯ypedefs),åŒ…æ‹¬base classesunary_functionå’Œbinaryfunction,è¿™äº›æ˜¯â€œç”¨æˆ·è‡ªå®šä¹‰ä¹‹å‡½æ•°å¯¹è±¡â€é€šå¸¸ä¼šç»§æ‰¿çš„classes.æ„Ÿè°¢EBOçš„å¹¿æ³›å®è·µï¼Œä½¿è¿™æ ·çš„ç»§æ‰¿å¾ˆå°‘å¢åŠ derivedclassesçš„å¤§å°ã€‚</li><li>å°½ç®¡å¦‚æ­¤ï¼Œè®©æˆ‘ä»¬å›åˆ°æ ¹æœ¬ã€‚å¤§å¤šæ•°classeså¹¶éempy,æ‰€ä»¥EBOå¾ˆå°‘æˆä¸ºprivateç»§æ‰¿çš„æ­£å½“ç†ç”±ã€‚æ›´è¿›ä¸€æ­¥è¯´ï¼Œå¤§å¤šæ•°ç»§æ‰¿ç›¸å½“äºisa,è¿™æ˜¯æŒ‡publicç»§æ‰¿ï¼Œä¸æ˜¯privateç»§æ‰¿ã€‚å¤åˆå’Œprivateç»§æ‰¿éƒ½æ„å‘³is-implemented-.in-terms-of,ä½†å¤åˆæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œæ‰€ä»¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œåªè¦å¯ä»¥ï¼Œä½ è¿˜æ˜¯åº”è¯¥é€‰æ‹©å¤åˆã€‚</li><li>å½“ä½ é¢å¯¹â€œå¹¶ä¸å­˜åœ¨is-aå…³ç³»â€çš„ä¸¤ä¸ªclasses,å…¶ä¸­ä¸€ä¸ªéœ€è¦è®¿é—®å¦ä¸€ä¸ªçš„protectedæˆå‘˜ï¼Œæˆ–éœ€è¦é‡æ–°å®šä¹‰å…¶ä¸€æˆ–å¤šä¸ªvirtualå‡½æ•°ï¼Œprivateç»§æ‰¿ææœ‰å¯èƒ½æˆä¸ºæ­£ç»Ÿè®¾è®¡ç­–ç•¥ã€‚å³ä¾¿å¦‚æ­¤ä½ ä¹Ÿå·²ç»çœ‹åˆ°ï¼Œä¸€ä¸ªæ··åˆäº†publicç»§æ‰¿å’Œå¤åˆçš„è®¾è®¡ï¼Œå¾€å¾€èƒ½å¤Ÿé‡Šå‡ºä½ è¦çš„è¡Œä¸ºï¼Œå°½ç®¡è¿™æ ·çš„è®¾è®¡æœ‰è¾ƒå¤§çš„å¤æ‚åº¦ã€‚â€œæ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨privateç»§æ‰¿â€æ„å‘³ï¼Œåœ¨è€ƒè™‘è¿‡æ‰€æœ‰å…¶ä»–æ–¹æ¡ˆä¹‹åï¼Œå¦‚æœä»ç„¶è®¤ä¸ºprivateç»§æ‰¿æ˜¯â€œè¡¨ç°ç¨‹åºå†…ä¸¤ä¸ªclassesä¹‹é—´çš„å…³ç³»â€çš„æœ€ä½³åŠæ³•ï¼Œè¿™æ‰ç”¨å®ƒã€‚</li><li>Privateç»§æ‰¿æ„å‘³is-implemented-in-termsof(æ ¹æ®æŸç‰©å®ç°å‡º)ã€‚å®ƒé€šå¸¸æ¯”å¤åˆ(composition)çš„çº§åˆ«ä½ã€‚ä½†æ˜¯å½“derivedclasséœ€è¦è®¿é—®protected baseclassçš„æˆå‘˜ï¼Œæˆ–éœ€è¦é‡æ–°å®šä¹‰ç»§æ‰¿è€Œæ¥çš„virtualå‡½æ•°æ—¶ï¼Œè¿™ä¹ˆè®¾è®¡æ˜¯åˆç†çš„ã€‚</li><li>å’Œå¤åˆ(composition)ä¸åŒï¼Œprivateç»§æ‰¿å¯ä»¥é€ æˆemptybaseæœ€ä¼˜åŒ–ã€‚è¿™å¯¹è‡´åŠ›äºâ€œå¯¹è±¡å°ºå¯¸æœ€å°åŒ–â€çš„ç¨‹åºåº“å¼€å‘è€…è€Œè¨€ï¼Œå¯èƒ½å¾ˆé‡è¦ã€‚</li></ol><h2 id="æ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨å¤šé‡ç»§æ‰¿">40. æ˜æ™ºè€Œå®¡æ…åœ°ä½¿ç”¨å¤šé‡ç»§æ‰¿</h2><ol type="1"><li>å¤šé‡ç»§æ‰¿(multiple inheritance;ML)ï¼Œå•ä¸€ç»§æ‰¿(singleinheritance;SI)</li><li>å½“MIè¿›å…¥è®¾è®¡æ™¯æ¡†ï¼Œç¨‹åºæœ‰å¯èƒ½ä»ä¸€ä¸ªä»¥ä¸Šçš„baseclassesç»§æ‰¿ç›¸åŒåç§°ï¼ˆå¦‚å‡½æ•°ã€typedefç­‰ç­‰ï¼‰ã€‚é‚£ä¼šå¯¼è‡´è¾ƒå¤šçš„æ­§ä¹‰(ambiguity)</li><li>æ³¨æ„æ­¤ä¾‹ä¹‹ä¸­å¯¹checkOutçš„è°ƒç”¨æ˜¯æ­§ä¹‰ï¼ˆæ¨¡æ£±ä¸¤å¯ï¼‰çš„ï¼Œå³ä½¿ä¸¤ä¸ªå‡½æ•°ä¹‹ä¸­åªæœ‰ä¸€ä¸ªå¯å–ç”¨(ä¸€ä¸ªç±»å†…çš„checkOutæ˜¯publicï¼Œå¦ä¸€ä¸ªç±»å†…çš„å´æ˜¯private)ã€‚è¿™ä¸C++ç”¨æ¥è§£æ(resolving)é‡è½½å‡½æ•°è°ƒç”¨çš„è§„åˆ™ç›¸ç¬¦ï¼šåœ¨çœ‹åˆ°æ˜¯å¦æœ‰ä¸ªå‡½æ•°å¯å–ç”¨ä¹‹å‰ï¼ŒC++é¦–å…ˆç¡®è®¤è¿™ä¸ªå‡½æ•°å¯¹æ­¤è°ƒç”¨ä¹‹è¨€æ˜¯æœ€ä½³åŒ¹é…ã€‚æ‰¾å‡ºæœ€ä½³åŒ¹é…å‡½æ•°åæ‰æ£€éªŒå…¶å¯å–ç”¨æ€§ã€‚æœ¬ä¾‹çš„ä¸¤ä¸ªcheckOutsæœ‰ç›¸åŒçš„åŒ¹é…ç¨‹åº¦(è¯‘æ³¨ï¼šå› æ­¤æ‰é€ æˆæ­§ä¹‰)ï¼Œæ²¡æœ‰æ‰€è°“æœ€ä½³åŒ¹é….å› æ­¤ElectronicGadget::checkOutçš„å¯å–ç”¨æ€§ä¹Ÿå°±ä»æœªè¢«ç¼–è¯‘å™¨å®¡æŸ¥ã€‚</li><li>ä¸ºäº†è§£å†³è¿™ä¸ªæ­§ä¹‰ï¼Œä½ å¿…é¡»æ˜ç™½æŒ‡å‡ºä½ è¦è°ƒç”¨å“ª-ä¸ªbaseclasså†…çš„å‡½æ•°ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">mp.BorrowableItem:<span class="hljs-built_in">checkOut</span>();<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>å¤šé‡ç»§æ‰¿çš„æ„æ€æ˜¯ç»§æ‰¿1ä¸ªä»¥ä¸Šçš„base classes,ä½†è¿™äº›baseclasseså¹¶ä¸å¸¸åœ¨ç»§æ‰¿ä½“ç³»ä¸­ä¹‰æœ‰æ›´é«˜çº§çš„baseclasses,å› ä¸ºé‚£ä¼šå¯¼è‡´è¦å‘½çš„â€œé’»çŸ³å‹å¤šé‡ç»§æ‰¿â€ï¼š</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707549791781-4e9c1ae9-f68c-4de5-9778-6e1c08f0fa75.png"></p><ol start="6" type="1"><li>ä»¤æ‰€æœ‰ç›´æ¥ç»§æ‰¿è‡ªå®ƒçš„classesé‡‡ç”¨â€œvirtualç»§æ‰¿</li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707549889972-ccb09a69-7fae-41ef-bbb7-43bf7c28d4ce.png"></p><ol start="7" type="1"><li>C++æ ‡å‡†ç¨‹åºåº“å†…å«ä¸€ä¸ªå¤šé‡ç»§æ‰¿ä½“ç³»ï¼Œclasstemplates,åç§°åˆ†åˆ«æ˜¯basic_ios, basic_istream,basic_ostreamå’Œbasic_iostream</li><li>ä»æ­£ç¡®è¡Œä¸ºçš„è§‚ç‚¹çœ‹ï¼Œpublicç»§æ‰¿åº”è¯¥æ€»æ˜¯virtualã€‚</li><li>è§„åˆ™å¾ˆç®€å•ï¼šä»»ä½•æ—¶å€™å½“ä½ ä½¿ç”¨publicç»§æ‰¿ï¼Œè¯·æ”¹ç”¨virtualpublicç»§æ‰¿.</li><li>ä¸ºé¿å…ç»§æ‰¿å¾—æ¥çš„æˆå‘˜å˜é‡é‡å¤ï¼Œç¼–è¯‘å™¨å¿…é¡»æä¾›è‹¥å¹²å¹•åæˆæ³•ï¼Œè€Œå…¶åæœæ˜¯ï¼šä½¿ç”¨virtualç»§æ‰¿çš„é‚£äº›classesæ‰€äº§ç”Ÿçš„å¯¹è±¡å¾€å¾€æ¯”ä½¿ç”¨non-virtualç»§æ‰¿çš„å…„å¼Ÿä»¬ä½“ç§¯å¤§ï¼Œè®¿é—®virtualbase classesçš„æˆå‘˜å˜é‡æ—¶ï¼Œä¹Ÿæ¯”è®¿é—®non-virtual baseclassesçš„æˆå‘˜å˜é‡é€Ÿåº¦æ…¢ã€‚ç§ç§ç»†èŠ‚å› ç¼–è¯‘å™¨ä¸åŒè€Œå¼‚ï¼Œä½†åŸºæœ¬é‡ç‚¹å¾ˆæ¸…æ¥šï¼šä½ å¾—ä¸ºvirtualç»§æ‰¿ä»˜å‡ºä»£ä»·ã€‚</li><li>virtualç»§æ‰¿çš„æˆæœ¬è¿˜åŒ…æ‹¬å…¶ä»–æ–¹é¢ã€‚æ”¯é…â€œvirtual baseclassesåˆå§‹åŒ–â€çš„è§„åˆ™æ¯”èµ·non-virtual basesçš„æƒ…å†µè¿œä¸ºå¤æ‚ä¸”ä¸ç›´è§‚ã€‚virtualbaseçš„åˆå§‹åŒ–è´£ä»»æ˜¯ç”±ç»§æ‰¿ä½“ç³»ä¸­çš„æœ€ä½å±‚(nost derived)classè´Ÿè´£ï¼Œè¿™æš—ç¤º<ol type="1"><li>(1)classesè‹¥æ´¾ç”Ÿè‡ªvirtual basesè€Œéœ€è¦åˆå§‹åŒ–ï¼Œå¿…é¡»è®¤çŸ¥å…¶virtualbasesä¸€ä¸€ä¸è®ºé‚£äº›basesè·ç¦»å¤šè¿œï¼Œ</li><li>(2)å½“ä¸€ä¸ªæ–°çš„derived classåŠ å…¥ç»§æ‰¿ä½“ç³»ä¸­ï¼Œå®ƒå¿…é¡»æ‰¿æ‹…å…¶virtualbases(ä¸è®ºç›´æ¥æˆ–é—´æ¥)çš„åˆå§‹åŒ–è´£ä»»ã€‚</li></ol></li><li>æˆ‘å¯¹virtual base classes(äº¦ç›¸å½“äºå¯¹virtualç»§æ‰¿)çš„å¿ å‘Šå¾ˆç®€å•ã€‚<ol type="1"><li>ç¬¬ä¸€ï¼Œéå¿…è¦ä¸ä½¿ç”¨virtual basesã€‚å¹³å¸¸è¯·ä½¿ç”¨non-virtualç»§æ‰¿ã€‚</li><li>ç¬¬äºŒï¼Œå¦‚æœä½ å¿…é¡»ä½¿ç”¨virtual baseclasses,å°½å¯èƒ½é¿å…åœ¨å…¶ä¸­æ”¾ç½®æ•°æ®ã€‚è¿™ä¹ˆä¸€æ¥ä½ å°±ä¸éœ€æ‹…å¿ƒè¿™äº›classesèº«ä¸Š</li></ol></li></ol><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707551059636-152e5f8e-fd50-4248-80b3-b5461267d06b.png"></p><p><img src="/2024/11/27/effective-cpp/6-%E7%BB%A7%E6%89%BF%E5%92%8C%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/1707551092898-8edf0efb-f1aa-4349-8d90-7069f57ffcc4.png"></p><ol start="13" type="1"><li>å¤šé‡ç»§æ‰¿æ¯”å•ä¸€ç»§æ‰¿å¤æ‚ã€‚å®ƒå¯èƒ½å¯¼è‡´æ–°çš„æ­§ä¹‰æ€§ï¼Œä»¥åŠå¯¹virtualç»§æ‰¿çš„éœ€è¦ã€‚</li><li>virtualç»§æ‰¿ä¼šå¢åŠ å¤§å°ã€é€Ÿåº¦ã€åˆå§‹åŒ–ï¼ˆåŠèµ‹å€¼ï¼‰å¤æ‚åº¦ç­‰ç­‰æˆæœ¬ã€‚å¦‚æœvirtualbaseclassesä¸å¸¦ä»»ä½•æ•°æ®ï¼Œå°†æ˜¯æœ€å…·å®ç”¨ä»·å€¼çš„æƒ…å†µã€‚</li><li>å¤šé‡ç»§æ‰¿çš„ç¡®æœ‰æ­£å½“ç”¨é€”ã€‚å…¶ä¸­ä¸€ä¸ªæƒ…èŠ‚æ¶‰åŠâ€œpublicç»§æ‰¿æŸä¸ªInterfaceclassâ€å’Œâ€œprivateç»§æ‰¿æŸä¸ªååŠ©å®ç°çš„classâ€çš„ä¸¤ç›¸ç»„åˆã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. å®ç°</title>
    <link href="/2024/11/27/effective-cpp/5-%E5%AE%9E%E7%8E%B0/"/>
    <url>/2024/11/27/effective-cpp/5-%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´">26.å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´</h2><ol type="1"><li>å½“å®šä¹‰äº†ä¸€ä¸ªå˜é‡è€Œå…¶ç±»å‹å¸¦æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ï¼Œé‚£ä¹ˆå½“ç¨‹åºçš„æ§åˆ¶æµ(controlflow)åˆ°è¾¾è¿™ä¸ªå˜é‡å®šä¹‰å¼æ—¶ï¼Œä½ ä¾¿å¾—æ‰¿å—æ„é€ æˆæœ¬ï¼›å½“è¿™ä¸ªå˜é‡ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶ï¼Œä½ ä¾¿å¾—æ‰¿å—ææ„æˆæœ¬ã€‚å³ä½¿è¿™ä¸ªå˜é‡æœ€ç»ˆå¹¶æœªè¢«ä½¿ç”¨ï¼Œä»éœ€è€—è´¹è¿™äº›æˆæœ¬ï¼Œæ‰€ä»¥ä½ åº”è¯¥å°½å¯èƒ½é¿å…è¿™ç§æƒ…å½¢ã€‚</li><li>è¿™è®©æˆ‘ä»¬è”æƒ³èµ·æœ¬æ¡æ¬¾æ‰€è°“â€œå°½å¯èƒ½å»¶åâ€çš„çœŸæ­£æ„ä¹‰ã€‚ä½ ä¸åªåº”è¯¥å»¶åå˜é‡çš„å®šä¹‰ï¼Œç›´åˆ°éå¾—ä½¿ç”¨è¯¥å˜é‡çš„å‰ä¸€åˆ»ä¸ºæ­¢ï¼Œç”šè‡³åº”è¯¥å°è¯•å»¶åè¿™ä»½å®šä¹‰ç›´åˆ°èƒ½å¤Ÿç»™å®ƒåˆå€¼å®å‚ä¸ºæ­¢ã€‚å¦‚æœè¿™æ ·ï¼Œä¸ä»…èƒ½å¤Ÿé¿å…æ„é€ ï¼ˆå’Œææ„ï¼‰éå¿…è¦å¯¹è±¡ï¼Œè¿˜å¯ä»¥é¿å…æ— æ„ä¹‰çš„defaultæ„é€ è¡Œä¸ºã€‚æ›´æ·±ä¸€å±‚è¯´ï¼Œä»¥â€œå…·æ˜æ˜¾æ„ä¹‰ä¹‹åˆå€¼â€å°†å˜é‡åˆå§‹åŒ–ï¼Œè¿˜å¯ä»¥é™„å¸¦è¯´æ˜å˜é‡çš„ç›®çš„ã€‚</li><li>å¾ªç¯</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Widget w;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)&#123;<br>    w = i;<br>&#125;<br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)&#123;<br>    Widget w;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>å¦‚æœclassesçš„ä¸€ä¸ªèµ‹å€¼æˆæœ¬ä½äºä¸€ç»„æ„é€ +ææ„æˆæœ¬ï¼Œåšæ³•Aå¤§ä½“è€Œè¨€æ¯”è¾ƒé«˜æ•ˆã€‚å°¤å…¶å½“nå€¼å¾ˆå¤§çš„æ—¶å€™ã€‚å¦åˆ™åšæ³•Bæˆ–è®¸è¾ƒå¥½ã€‚</li><li>æ­¤å¤–åšæ³•Aé€ æˆåç§°wçš„ä½œç”¨åŸŸï¼ˆè¦†ç›–æ•´ä¸ªå¾ªç¯ï¼‰æ¯”åšæ³•Bæ›´å¤§ï¼Œæœ‰æ—¶é‚£å¯¹ç¨‹åºçš„å¯ç†è§£æ€§å’Œæ˜“ç»´æŠ¤æ€§é€ æˆå†²çªã€‚</li><li>å› æ­¤é™¤é(1)ä½ çŸ¥é“èµ‹å€¼æˆæœ¬æ¯”â€œæ„é€ +ææ„â€æˆæœ¬ä½ï¼Œ(2)ä½ æ­£åœ¨å¤„ç†ä»£ç ä¸­æ•ˆç‡é«˜åº¦æ•æ„Ÿ(performance-sensitive)çš„éƒ¨åˆ†ï¼Œå¦åˆ™ä½ åº”è¯¥ä½¿ç”¨åšæ³•Bã€‚</li><li>å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´ï¼Œè¿™æ ·åšå¯å¢åŠ ç¨‹åºçš„æ¸…æ™°åº¦å¹¶æ”¹å–„ç¨‹åºæ•ˆç‡</li></ol><h2 id="å°½é‡å°‘åšè½¬å‹åŠ¨ä½œ">27. å°½é‡å°‘åšè½¬å‹åŠ¨ä½œ</h2><ol type="1"><li>æ—§å¼è½¬å‹<ol type="1"><li><ol start="20" type="A"><li>expression</li></ol></li><li>T(expression)</li></ol></li><li>æ–°å¼è½¬å‹<ol type="1"><li>const_cast<T> (expression)</T></li><li>dynamic_cast<T> (expression)</T></li><li>reinterpret_cast<T> (expression)</T></li><li>static_cast<T> (expression)</T></li></ol></li><li>const_casté€šå¸¸è¢«ç”¨æ¥å°†å¯¹è±¡çš„å¸¸é‡æ€§è½¬é™¤ï¼Œå®ƒä¹Ÿæ˜¯å”¯ä¸€æœ‰æ­¤èƒ½åŠ›çš„C+-styleè½¬å‹æ“ä½œç¬¦</li><li>dynamic_castä¸»è¦ç”¨æ¥æ‰§è¡Œâ€œå®‰å…¨å‘ä¸‹è½¬å‹â€(safedowncasting),ä¹Ÿå°±æ˜¯ç”¨æ¥å†³å®šæŸå¯¹è±¡æ˜¯å¦å½’å±ç»§æ‰¿ä½“ç³»ä¸­çš„æŸä¸ªç±»å‹ã€‚å®ƒæ˜¯å”¯ä¸€ä¸€æ— æ³•ç”±æ—§å¼è¯­æ³•æ‰§è¡Œçš„åŠ¨ä½œï¼Œä¹Ÿæ˜¯å”¯ä¸€å¯èƒ½è€—è´¹é‡å¤§è¿è¡Œæˆæœ¬çš„è½¬å‹åŠ¨ä½œ</li><li>reinterpret_castæ„å›¾æ‰§è¡Œä½çº§è½¬å‹ï¼Œå®é™…åŠ¨ä½œï¼ˆåŠç»“æœï¼‰å¯èƒ½å–å†³äºç¼–è¯‘å™¨ï¼Œè¿™ä¹Ÿå°±è¡¨ç¤ºå®ƒä¸å¯ç§»æ¤ã€‚ä¾‹å¦‚å°†ä¸€ä¸ªpointertointè½¬å‹ä¸ºä¸€ä¸ªintã€‚è¿™ä¸€ç±»è½¬å‹åœ¨ä½çº§ä»£ç ä»¥å¤–å¾ˆå°‘è§ã€‚æœ¬ä¹¦åªä½¿ç”¨ä¸€æ¬¡ï¼Œé‚£æ˜¯åœ¨è®¨è®ºå¦‚ä½•é’ˆå¯¹åŸå§‹å†…å­˜(rawmemory)å†™å‡ºä¸€ä¸ªè°ƒè¯•ç”¨çš„åˆ†é…å™¨(debugging allocator)æ—¶ï¼Œè§æ¡æ¬¾50ã€‚</li><li>static_castç”¨æ¥å¼ºè¿«éšå¼è½¬æ¢(implicitconversions),ä¾‹å¦‚å°†non-constå¯¹è±¡è½¬ä¸ºconstå¯¹è±¡ï¼ˆå°±åƒæ¡æ¬¾3æ‰€ä¸ºï¼‰ï¼Œæˆ–å°†intè½¬ä¸ºdoubleç­‰ç­‰ã€‚å®ƒä¹Ÿå¯ä»¥ç”¨æ¥æ‰§è¡Œä¸Šè¿°å¤šç§è½¬æ¢çš„åå‘è½¬æ¢ï¼Œä¾‹å¦‚å°†void*æŒ‡é’ˆè½¬ä¸ºtypedæŒ‡é’ˆï¼Œå°†pointer-to-baseè½¬ä¸ºpointer-to-derivedã€‚.ä½†å®ƒæ— æ³•å°†constè½¬ä¸ºnon-constä¸€è¿™ä¸ªåªæœ‰const_castæ‰åŠå¾—åˆ°ã€‚</li><li>ä½¿ç”¨æ—§å¼è½¬å‹çš„æ—¶æœºæ˜¯ï¼Œå½“æˆ‘è¦è°ƒç”¨ä¸€ä¸ªexplicitæ„é€ å‡½æ•°å°†ä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°æ—¶ã€‚</li><li>å¦‚æœå¯ä»¥ï¼Œå°½é‡é¿å…è½¬å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æ³¨é‡æ•ˆç‡çš„ä»£ç ä¸­é¿å…dynamic_castsã€‚å¦‚æœæœ‰ä¸ªè®¾è®¡éœ€è¦è½¬å‹åŠ¨ä½œï¼Œè¯•ç€å‘å±•æ— éœ€è½¬å‹çš„æ›¿ä»£è®¾è®¡</li><li>å¦‚æœè½¬å‹æ˜¯å¿…è¦çš„ï¼Œè¯•ç€å°†å®ƒéšè—äºæŸä¸ªå‡½æ•°èƒŒåã€‚å®¢æˆ·éšåå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œè€Œä¸éœ€å°†è½¬å‹æ”¾è¿›ä»–ä»¬è‡ªå·±çš„ä»£ç å†…</li><li>å®å¯ä½¿ç”¨C++-styleæ–°å¼è½¬å‹ï¼Œä¸è¦ä½¿ç”¨å°±æ˜¯è½¬å‹ã€‚å‰è€…å¾ˆå®¹æ˜“è¾¨è¯†å‡ºæ¥ï¼Œè€Œä¸”ä¹Ÿæ¯”è¾ƒæœ‰ç€åˆ†é—¨åˆ«ç±»çš„èŒæŒã€‚</li></ol><h2 id="é¿å…è¿”å›handlesæŒ‡å‘å¯¹è±¡å†…éƒ¨æˆåˆ†">28.é¿å…è¿”å›handlesæŒ‡å‘å¯¹è±¡å†…éƒ¨æˆåˆ†</h2><ol type="1"><li>é¿å…è¿”å›handlesï¼ˆåŒ…æ‹¬referencesã€æŒ‡é’ˆã€è¿­ä»£å™¨ï¼‰æŒ‡å‘å¯¹è±¡å†…éƒ¨ã€‚éµå®ˆè¿™ä¸ªæ¡æ¬¾å¯å¢åŠ å°è£…æ€§ï¼Œå¸®åŠ©constæˆå‘˜å‡½æ•°çš„è¡Œä¸ºåƒä¸ªconstï¼Œå¹¶å°†å‘ç”Ÿâ€œè™šåŠå·ç ç‰Œâ€çš„å¯èƒ½æ€§é™è‡³æœ€ä½ã€‚</li></ol><h2 id="ä¸ºå¼‚å¸¸å®‰å…¨è€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„">29. ä¸ºâ€å¼‚å¸¸å®‰å…¨â€œè€ŒåŠªåŠ›æ˜¯å€¼å¾—çš„</h2><ol type="1"><li>å¼‚å¸¸å®‰å…¨å‡½æ•°å³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¸ä¼šæ³„éœ²èµ„æºæˆ–å…è®¸ä»»ä½•æ•°æ®ç»“æ„ç ´åã€‚è¿™æ ·çš„å‡½æ•°åŒºåˆ†ä¸ºä¸‰ç§å¯èƒ½çš„ä¿è¯ï¼šåŸºæœ¬å‹ï¼Œå¼ºçƒˆå‹ï¼Œä¸æŠ›å¼‚å¸¸å‹</li><li>åŸºæœ¬æ‰¿è¯ºï¼šå¦‚æœå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºå†…çš„ä»»ä½•äº‹ç‰©ä»ç„¶ä¿æŒåœ¨æœ‰æ•ˆçŠ¶æ€ä¸‹ã€‚æ²¡æœ‰ä»»ä½•å¯¹è±¡æˆ–æ•°æ®ç»“æ„ä¼šå› æ­¤è€Œè´¥åï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å¤„äºä¸€ç§å†…éƒ¨å‰åä¸€è‡´çš„çŠ¶æ€</li><li>å¼ºçƒˆä¿è¯ï¼šå¦‚æœå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºçŠ¶æ€ä¸æ”¹å˜ã€‚è°ƒç”¨è¿™æ ·çš„å‡½æ•°éœ€æœ‰è¿™æ ·çš„è®¤çŸ¥ï¼šå¦‚æœå‡½æ•°æˆåŠŸï¼Œå°±æ˜¯å®Œå…¨æˆåŠŸï¼Œå¦‚æœå‡½æ•°å¤±è´¥ï¼Œç¨‹åºä¼šå›å¤åˆ°â€œè°ƒç”¨å‡½æ•°ä¹‹å‰â€çš„çŠ¶æ€ã€‚</li><li>ä¸æŠ›æ·(nothrow)ä¿è¯ï¼Œæ‰¿è¯ºç»ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯èƒ½å¤Ÿå®Œæˆå®ƒä»¬åŸå…ˆæ‰¿è¯ºçš„åŠŸèƒ½ã€‚ä½œç”¨äºå†…ç½®ç±»å‹ï¼ˆä¾‹å¦‚ints,æŒ‡é’ˆç­‰ç­‰ï¼‰èº«ä¸Šçš„æ‰€æœ‰æ“ä½œéƒ½æä¾›nothrowä¿è¯ã€‚è¿™æ˜¯å¼‚å¸¸å®‰å…¨ç ä¸­ä¸€ä¸ªå¿…ä¸å¯å°‘çš„å…³é”®åŸºç¡€ææ–™ã€‚</li><li>å¼‚å¸¸å®‰å…¨ç (Exception-safecode)å¿…é¡»æä¾›ä¸Šè¿°ä¸‰ç§ä¿è¯ä¹‹ä¸€ã€‚å¦‚æœå®ƒä¸è¿™æ ·åšï¼Œå®ƒå°±ä¸å…·å¤‡å¼‚å¸¸å®‰å…¨æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„æŠ‰æ‹©æ˜¯ï¼Œè¯¥ä¸ºæˆ‘ä»¬æ‰€å†™çš„æ¯ä¸€ä¸ªå‡½æ•°æä¾›å“ªä¸€ç§ä¿è¯ï¼Ÿé™¤éé¢å¯¹ä¸å…·å¼‚å¸¸å®‰å…¨æ€§çš„ä¼ ç»Ÿä»£ç ï¼ˆæˆ‘å°†åœ¨æœ¬æ¡æ¬¾æœ«å°¾è®¨è®ºé‚£ç§æƒ…å†µ)ï¼Œå¦åˆ™ä½ åº”è¯¥åªåœ¨ä¸€ç§æƒ…å†µä¸‹æ‰ä¸æä¾›ä»»ä½•å¼‚å¸¸å®‰å…¨ä¿è¯ï¼šä½ é‚£â€œå¤©æ‰ç­â€éœ€æ±‚åˆ†æå›¢é˜Ÿç¡®è®¤ä½ çš„åº”ç”¨ç¨‹åºæœ‰â€œæ³„æ¼èµ„æºâ€å¹¶â€œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¸¦ç€è´¥åæ•°æ®â€çš„éœ€è¦ã€‚</li><li>æœ‰ä¸ªä¸€èˆ¬åŒ–çš„è®¾è®¡ç­–ç•¥å¾ˆå…¸å‹åœ°ä¼šå¯¼è‡´å¼ºçƒˆä¿è¯ï¼Œå¾ˆå€¼å¾—ç†Ÿæ‚‰å®ƒã€‚è¿™ä¸ªç­–ç•¥è¢«ç§°ä¸ºcopyandswapã€‚åŸåˆ™å¾ˆç®€å•ï¼šä¸ºä½ æ‰“ç®—ä¿®æ”¹çš„å¯¹è±¡ï¼ˆåŸä»¶ï¼‰åšå‡ºä¸€ä»½å‰¯æœ¬ï¼Œç„¶ååœ¨é‚£å‰¯æœ¬èº«ä¸Šåšä¸€åˆ‡å¿…è¦ä¿®æ”¹ã€‚è‹¥æœ‰ä»»ä½•ä¿®æ”¹åŠ¨ä½œæŠ›å‡ºå¼‚å¸¸ï¼ŒåŸå¯¹è±¡ä»ä¿æŒæœªæ”¹å˜çŠ¶æ€ã€‚å¾…æ‰€æœ‰æ”¹å˜éƒ½æˆåŠŸåï¼Œå†å°†ä¿®æ”¹è¿‡çš„é‚£ä¸ªå‰¯æœ¬å’ŒåŸå¯¹è±¡åœ¨ä¸€ä¸ªä¸æŠ›å‡ºå¼‚å¸¸çš„æ“ä½œä¸­ç½®æ¢(swap)ã€‚</li><li>å®ç°ä¸Šé€šå¸¸æ˜¯å°†æ‰€æœ‰â€œéš¶å±å¯¹è±¡çš„æ•°æ®â€ä»åŸå¯¹è±¡æ”¾è¿›å¦ä¸€ä¸ªå¯¹è±¡å†…ï¼Œç„¶åèµ‹äºˆåŸå¯¹è±¡ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘é‚£ä¸ªæ‰€è°“çš„å®ç°å¯¹è±¡(implementationobject,.å³å‰¯æœ¬)ã€‚</li><li>copy-and-swapçš„å…³é”®åœ¨äºâ€œä¿®æ”¹å¯¹è±¡æ•°æ®çš„å‰¯æœ¬ï¼Œç„¶ååœ¨ä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„å‡½æ•°ä¸­å°†ä¿®æ”¹åçš„æ•°æ®å’ŒåŸä»¶ç½®æ¢â€ï¼Œå› æ­¤å¿…é¡»ä¸ºæ¯ä¸€ä¸ªå³å°†è¢«æ”¹åŠ¨çš„å¯¹è±¡åšå‡ºä¸€ä¸ªå‰¯æœ¬ï¼Œé‚£å¾—è€—ç”¨ä½ å¯èƒ½æ— æ³•ï¼ˆæˆ–æ— æ„æ„¿ï¼‰ä¾›åº”çš„æ—¶é—´å’Œç©ºé—´ã€‚</li><li>å¦‚æœç³»ç»Ÿå†…æœ‰ä¸€ä¸ªï¼ˆæƒŸæœ‰ä¸€ä¸ªï¼‰å‡½æ•°ä¸å…·å¤‡å¼‚å¸¸å®‰å…¨æ€§ï¼Œæ•´ä¸ªç³»ç»Ÿå°±ä¸å…·å¤‡å¼‚å¸¸å®‰å…¨æ€§ï¼Œå› ä¸ºè°ƒç”¨é‚£ä¸ªï¼ˆä¸å…·å¤‡å¼‚å¸¸å®‰å…¨æ€§çš„ï¼‰å‡½æ•°æœ‰å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼æˆ–æ•°æ®ç»“æ„è´¥åã€‚</li><li>å¼ºçƒˆä¿è¯å¾€å¾€èƒ½å¤Ÿä»¥copy-and-swapå®ç°å‡ºæ¥ï¼Œä½†â€œå¼ºçƒˆä¿è¯â€å¹¶éå¯¹æ‰€æœ‰å‡½æ•°éƒ½å¯å®ç°æˆ–å…·å¤‡å®ç°æ„ä¹‰</li><li>å‡½æ•°æä¾›çš„â€œå¼‚å¸¸å®‰å…¨ä¿è¯â€é€šå¸¸æœ€é«˜åªç­‰äºå…¶æ‰€è°ƒç”¨ä¹‹å„ä¸ªå‡½æ•°çš„â€œå¼‚å¸¸å®‰å…¨ä¿è¯â€ä¸­çš„æœ€å¼±è€…ã€‚</li></ol><h2 id="é€å½»äº†è§£inliningçš„é‡Œé‡Œå¤–å¤–">30. é€å½»äº†è§£inliningçš„é‡Œé‡Œå¤–å¤–</h2><ol type="1"><li>åœ¨ä¸€å°å†…å­˜æœ‰é™çš„æœºå™¨ä¸Šï¼Œè¿‡åº¦çƒ­è¡·inliningä¼šé€ æˆç¨‹åºä½“ç§¯å¤ªå¤§ï¼ˆå¯¹å¯ç”¨ç©ºé—´è€Œè¨€ï¼‰ã€‚å³ä½¿æ‹¥æœ‰è™šå†…å­˜ï¼Œinlineé€ æˆçš„ä»£ç è†¨èƒ€äº¦ä¼šå¯¼è‡´é¢å¤–çš„æ¢é¡µè¡Œä¸º(paging)ï¼Œé™ä½æŒ‡ä»¤é«˜é€Ÿç¼“å­˜è£…ç½®çš„å‡»ä¸­ç‡(instructioncache hit rate)ï¼Œä»¥åŠä¼´éšè¿™äº›è€Œæ¥çš„æ•ˆç‡æŸå¤±ã€‚</li><li>æ¢ä¸ªè§’åº¦è¯´ï¼Œå¦‚æœinlineå‡½æ•°çš„æœ¬ä½“å¾ˆå°ï¼Œç¼–è¯‘å™¨é’ˆå¯¹â€œå‡½æ•°æœ¬ä½“â€æ‰€äº§å‡ºçš„ç å¯èƒ½æ¯”é’ˆå¯¹â€œå‡½æ•°è°ƒç”¨â€æ‰€äº§å‡ºçš„ç æ›´å°ã€‚æœçœŸå¦‚æ­¤ï¼Œå°†å‡½æ•°inliningç¡®å®å¯èƒ½å¯¼è‡´è¾ƒå°çš„ç›®æ ‡ç (objectcode)å’Œè¾ƒé«˜çš„æŒ‡ä»¤é«˜é€Ÿç¼“å­˜è£…ç½®å‡»ä¸­ç‡ï¼</li><li>å£°æ˜inlineå‡½æ•°çš„åšæ³•åˆ™æ˜¯åœ¨å…¶å®šä¹‰å¼å‰åŠ ä¸Šå…³é”®å­—inline</li><li>inlineå‡½æ•°é€šå¸¸ä¸€å®šè¢«ç½®äºå¤´æ–‡ä»¶å†…ï¼Œå› ä¸ºå¤§å¤šæ•°å»ºç½®ç¯å¢ƒ(buildenvironments).åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¿›è¡Œinlining,è€Œä¸ºäº†å°†ä¸€ä¸ªâ€œå‡½æ•°è°ƒç”¨â€æ›¿æ¢ä¸ºâ€œè¢«è°ƒç”¨å‡½æ•°çš„æœ¬ä½“â€ï¼Œç¼–è¯‘å™¨å¿…é¡»çŸ¥é“é‚£ä¸ªå‡½æ•°é•¿ä»€ä¹ˆæ ·å­ã€‚æŸäº›å»ºç½®ç¯å¢ƒå¯ä»¥åœ¨è¿æ¥æœŸå®Œæˆinlining,å°‘é‡å»ºç½®ç¯å¢ƒå¦‚åŸºäºï¼ŒNETCLI(Common Language Infrastructure;å…¬å…±è¯­è¨€åŸºç¡€è®¾æ–½)çš„æ‰˜ç®¡ç¯å¢ƒ(managedenvironments)ç«å¯åœ¨è¿è¡ŒæœŸå®Œæˆinliningã€‚ç„¶è€Œè¿™æ ·çš„ç¯å¢ƒæ¯•ç«Ÿæ˜¯ä¾‹å¤–ï¼Œä¸æ˜¯é€šä¾‹ã€‚Inliningåœ¨å¤§å¤šæ•°C+ç¨‹åºä¸­æ˜¯ç¼–è¯‘æœŸè¡Œä¸ºã€‚</li><li>Templatesé€šå¸¸ä¹Ÿè¢«ç½®äºå¤´æ–‡ä»¶å†…ï¼Œå› ä¸ºå®ƒä¸€æ—¦è¢«ä½¿ç”¨ï¼Œç¼–è¯‘å™¨ä¸ºäº†å°†å®ƒå…·ç°åŒ–ï¼Œéœ€è¦çŸ¥é“å®ƒé•¿ä»€ä¹ˆæ ·å­ã€‚</li><li>Templateçš„å…·ç°åŒ–ä¸inliningæ— å…³ã€‚å¦‚æœä½ æ­£åœ¨å†™ä¸€ä¸ªtemplateè€Œä½ è®¤ä¸ºæ‰€æœ‰æ ¹æ®æ­¤templateå…·ç°å‡ºæ¥çš„å‡½æ•°éƒ½åº”è¯¥inlined,è¯·å°†æ­¤templateå£°æ˜ä¸ºinline</li><li>å¤§å¤šæ•°ç¼–è¯‘å™¨æ‹’ç»å¤ªè¿‡å¤æ‚ï¼ˆä¾‹å¦‚å¸¦æœ‰å¾ªç¯æˆ–è€…é€’å½’ï¼‰çš„å‡½æ•°inlingï¼Œè€Œæ‰€æœ‰å¯¹virtualå‡½æ•°çš„è°ƒç”¨ä¹Ÿéƒ½ä¼šä½¿inliningè½ç©º</li><li>virtualæ„å‘³â€œç­‰å¾…ï¼Œç›´åˆ°è¿è¡ŒæœŸæ‰ç¡®å®šè°ƒç”¨å“ªä¸ªå‡½æ•°â€ï¼Œè€Œinlineæ„å‘³â€œæ‰§è¡Œå‰ï¼Œå…ˆå°†è°ƒç”¨åŠ¨ä½œæ›¿æ¢ä¸ºè¢«è°ƒç”¨å‡½æ•°çš„æœ¬ä½“â€ã€‚å¦‚æœç¼–è¯‘å™¨ä¸çŸ¥é“è¯¥è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œä½ å°±å¾ˆéš¾è´£å¤‡å®ƒä»¬æ‹’ç»å°†å‡½æ•°æœ¬ä½“inliningã€‚</li><li>ç¨‹åºåº“è®¾è®¡è€…å¿…é¡»è¯„ä¼°â€œå°†å‡½æ•°å£°æ˜ä¸ºinlineâ€çš„å†²å‡»ï¼šinlineå‡½æ•°æ— æ³•éšç€ç¨‹åºåº“çš„å‡çº§è€Œå‡çº§ã€‚æ¢å¥è¯è¯´å¦‚æœfæ˜¯ç¨‹åºåº“å†…çš„ä¸€ä¸ªinlineå‡½æ•°ï¼Œå®¢æˆ·å°†â€œfå‡½æ•°æœ¬ä½“â€ç¼–è¿›å…¶ç¨‹åºä¸­ï¼Œä¸€æ—¦ç¨‹åºåº“è®¾è®¡è€…å†³å®šæ”¹å˜ï¿¡ï¼Œæ‰€æœ‰ç”¨åˆ°ï¿¡çš„å®¢æˆ·ç«¯ç¨‹åºéƒ½å¿…é¡»é‡æ–°ç¼–è¯‘ã€‚è¿™å¾€å¾€æ˜¯å¤§å®¶ä¸æ„¿æ„è§åˆ°çš„ã€‚ç„¶è€Œå¦‚æœfæ˜¯non-inlineå‡½æ•°ï¼Œæ—¦å®ƒæœ‰ä»»ä½•ä¿®æ”¹ï¼Œå®¢æˆ·ç«¯åªéœ€é‡æ–°è¿æ¥å°±å¥½ï¼Œè¿œæ¯”é‡æ–°ç¼–è¯‘çš„è´Ÿæ‹…å°‘å¾ˆå¤šã€‚å¦‚æœç¨‹åºåº“é‡‡å–åŠ¨æ€è¿æ¥ï¼Œå‡çº§ç‰ˆå‡½æ•°ç”šè‡³å¯ä»¥ä¸çŸ¥ä¸è§‰åœ°è¢«åº”ç”¨ç¨‹åºå¸çº³ã€‚</li><li>å¤§éƒ¨åˆ†è°ƒè¯•å™¨é¢å¯¹inlineå‡½æ•°éƒ½æŸæ‰‹æ— ç­–ã€‚</li><li>å°†å¤§å¤šæ•°inliningé™åˆ¶åœ¨å°å‹ã€è¢«é¢‘ç¹è°ƒç”¨çš„å‡½æ•°èº«ä¸Šã€‚è¿™å¯ä½¿æ—¥åçš„è°ƒè¯•è¿‡ç¨‹å’ŒäºŒè¿›åˆ¶å‡çº§æ›´å®¹æ˜“ï¼Œä¹Ÿå¯ä½¿æ½œåœ¨çš„ä»£ç è†¨èƒ€é—®é¢˜æœ€å°åŒ–ï¼Œä½¿ç¨‹åºçš„é€Ÿåº¦æå‡æœºä¼šæœ€å¤§åŒ–ã€‚</li><li>ä¸è¦åªå› ä¸ºfunction templateså‡ºç°åœ¨å¤´æ–‡ä»¶ï¼Œå°±å°†å®ƒä»¬å£°æ˜ä¸ºinline</li></ol><h2 id="å°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜å…³ç³»é™è‡³æœ€ä½">31.å°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜å…³ç³»é™è‡³æœ€ä½</h2><ol type="1"><li>C++å¹¶æ²¡æœ‰æŠŠâ€œå°†æ¥å£ä»å®ç°ä¸­åˆ†ç¦»â€è¿™äº‹åšå¾—å¾ˆå¥½</li><li>classå®šä¹‰å¼åŒ…æ‹¬classæ¥å£ï¼Œå®ç°ç»†ç›®ï¼ˆeg: std::string theName;)</li><li>å°†Personç±»åˆ†å‰²ä¸ºä¸¤ä¸ªclassï¼Œä¸€ä¸ªåªæä¾›æ¥å£ï¼Œå¦ä¸€ä¸ªè´Ÿè´£å®ç°è¯¥æ¥å£</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    ...<br><span class="hljs-keyword">private</span>:<br>    std::tr1::shared_ptr&lt;PersonImpl&gt; pImpl;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>åœ¨è¿™é‡Œï¼Œmain class(Person)åªå†…å«ä¸ªæŒ‡é’ˆæˆå‘˜ï¼ˆè¿™é‡Œä½¿ç”¨trl:sharedptr,è§æ¡æ¬¾13),æŒ‡å‘å…¶å®ç°ç±»(PersonImpl)ã€‚è¿™èˆ¬è®¾è®¡å¸¸è¢«ç§°ä¸ºpimplidiomã€‚è¿™ç§classeså†…çš„æŒ‡é’ˆåç§°å¾€å¾€å°±æ˜¯pImpl</li><li>è¿™ä¸ªåˆ†ç¦»çš„å…³é”®åœ¨äºä»¥â€œå£°æ˜çš„ä¾å­˜æ€§â€æ›¿æ¢â€œå®šä¹‰çš„ä¾å­˜æ€§â€ï¼Œé‚£æ­£æ˜¯ç¼–è¯‘ä¾å­˜æ€§æœ€å°åŒ–çš„æœ¬è´¨ï¼šç°å®ä¸­è®©å¤´æ–‡ä»¶å°½å¯èƒ½è‡ªæˆ‘æ»¡è¶³ï¼Œä¸‡ä¸€åšä¸åˆ°ï¼Œåˆ™è®©å®ƒä¸å…¶ä»–æ–‡ä»¶å†…çš„å£°æ˜å¼ï¼ˆè€Œéå®šä¹‰å¼ï¼‰ç›¸ä¾ã€‚å…¶ä»–æ¯ä¸€ä»¶äº‹éƒ½æºè‡ªäºè¿™ä¸ªç®€å•çš„è®¾è®¡ç­–ç•¥ï¼š</li><li>å¦‚æœä½¿ç”¨object references æˆ–è€…objectpointerså¯ä»¥å®Œæˆä»»åŠ¡ï¼Œå°±ä¸è¦ä½¿ç”¨objectsã€‚ä½ å¯ä»¥åªé ä¸€ä¸ªç±»å‹å£°æ˜å¼å°±å®šä¹‰å‡ºæŒ‡å‘è¯¥ç±»å‹çš„referenceså’Œpointersï¼Œå¦‚æœå®šä¹‰æŸç±»å‹çš„objectsï¼Œå°±éœ€è¦ç”¨åˆ°è¯¥ç±»å‹çš„å®šä¹‰å¼</li><li>å¦‚æœèƒ½å¤Ÿï¼Œå°½é‡ä»¥classå£°æ˜å¼æ›¿æ¢classå®šä¹‰å¼ã€‚å½“ä½ å£°æ˜ä¸€ä¸ªå‡½æ•°è€Œå®ƒç”¨åˆ°æŸä¸ªclassæ—¶ï¼Œä½ å¹¶ä¸éœ€è¦è¯¥classçš„å®šä¹‰ï¼›çºµä½¿å‡½æ•°ä»¥byvalueæ–¹å¼ä¼ é€’è¯¥ç±»å‹çš„å‚æ•°ï¼ˆæˆ–è¿”å›å€¼ï¼‰äº¦ç„¶</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Date</span>;<br><span class="hljs-function">Date <span class="hljs-title">today</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clearAppointment</span><span class="hljs-params">(Date d)</span></span>;<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>ä¸ºå£°æ˜å¼å’Œå®šä¹‰å¼æä¾›ä¸åŒçš„å¤´æ–‡ä»¶ã€‚ä¸ºäº†ä¿ƒè¿›ä¸¥å®ˆä¸Šè¿°å‡†åˆ™ï¼Œéœ€è¦ä¸¤ä¸ªå¤´æ–‡ä»¶ï¼Œä¸€ä¸ªç”¨äºå£°æ˜å¼ï¼Œä¸€ä¸ªç”¨äºå®šä¹‰å¼ã€‚å½“ç„¶ï¼Œè¿™äº›æ–‡ä»¶å¿…é¡»ä¿æŒä¸€è‡´æ€§ï¼Œå¦‚æœæœ‰ä¸ªå£°æ˜å¼è¢«æ”¹å˜äº†ï¼Œä¸¤ä¸ªæ–‡ä»¶éƒ½å¾—æ”¹å˜ã€‚å› æ­¤ç¨‹åºåº“å®¢æˆ·åº”è¯¥æ€»æ˜¯#includeä¸€ä¸ªå£°æ˜æ–‡ä»¶è€Œéå‰ç½®å£°æ˜è‹¥å¹²å‡½æ•°ï¼Œç¨‹åºåº“ä½œè€…ä¹Ÿåº”è¯¥æä¾›è¿™ä¸¤ä¸ªå¤´æ–‡ä»¶ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;datefwd.h&quot;</span> <span class="hljs-comment">//å£°æ˜ä½†æœªå®šä¹‰class Date</span></span><br><span class="hljs-function">Date <span class="hljs-title">today</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clearAppointment</span><span class="hljs-params">(Date d)</span></span>;<br></code></pre></td></tr></table></figure><ol start="9" type="1"><li>"datefwd.h"ï¼Œå‘½åæ–¹å¼å–æ³•c++æ ‡å‡†ç¨‹åºåº“å¤´æ–‡ä»¶çš„<iosfwd>ã€‚<iosfwd>æ·±å…·å¯å‘æ„ä¹‰çš„å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œå®ƒåˆ†å¤–å½°æ˜¾â€œæœ¬æ¡æ¬¾é€‚ç”¨äºtemplatesä¹Ÿè¯ç”¨äºnon-templatesâ€ã€‚</iosfwd></iosfwd></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Person.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;PersonImpl.h&quot;</span></span><br>Person::<span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> std::string&amp;name):<span class="hljs-built_in">pImpl</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">PersonImpl</span>(name))&#123;&#125;<br><span class="hljs-function">std::string <span class="hljs-title">Person::name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> pImpl-&gt;name;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="10" type="1"><li>Personæ„é€ å‡½æ•°ä»¥newè°ƒç”¨PersonImplæ„é€ å‡½æ•°ï¼Œä»¥åŠPerson::nameå‡½æ•°å†…è°ƒç”¨PersonImpl::nameã€‚è®©Personå˜æˆä¸€ä¸ªHandleclasså¹¶ä¸ä¼šæ”¹å˜å®ƒåšçš„äº‹ï¼Œåªä¼šæ”¹å˜å®ƒåšäº‹çš„æ–¹æ³•</li><li>å¦ä¸€ä¸ªåˆ¶ä½œHandle classæ–¹æ³•æ˜¯ï¼Œä»¤Personæˆä¸ºä¸€ç§ç‰¹æ®Šçš„abstract baseclassï¼ˆæŠ½è±¡åŸºç±»ï¼‰ï¼Œç§°ä¸ºinterfaceclassã€‚è¿™ç§classçš„ç›®çš„æ˜¯è¯¦ç»†ä¸€ä¸€æè¿°derivedclassesçš„æ¥å£ï¼Œå› æ­¤å®ƒé€šå¸¸ä¸å¸¦æˆå‘˜å˜é‡ï¼Œä¹Ÿæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œåªæœ‰ä¸€ä¸ªvirtualææ„å‡½æ•°ï¼ˆè§æ¡æ¬¾7ï¼‰ä»¥åŠä¸€ç»„purevirtualå‡½æ•°ï¼Œç”¨æ¥å™è¿°æ•´ä¸ªæ¥å£ã€‚</li><li>åœ¨Handle classesèº«ä¸Šï¼Œæˆå‘˜å‡½æ•°å¿…é¡»é€šè¿‡implementationpointerå–å¾—å¯¹è±¡æ•°æ®ã€‚é‚£ä¼šä¸ºæ¯ä¸€æ¬¡è®¿é—®å¢åŠ ä¸€å±‚é—´æ¥æ€§ã€‚è€Œæ¯ä¸€ä¸ªå¯¹è±¡æ¶ˆè€—çš„å†…å­˜æ•°é‡å¿…é¡»å¢åŠ implementationppinterçš„å¤§å°ã€‚æœ€åï¼Œimplementation pointerå¿…é¡»åˆå§‹åŒ–ï¼ˆåœ¨Handleclassæ„é€ å‡½æ•°å†…)ï¼ŒæŒ‡å‘ä¸€ä¸ªåŠ¨æ€åˆ†é…å¾—æ¥çš„implementationobject,,æ‰€ä»¥ä½ å°†è’™å—å› åŠ¨æ€å†…å­˜åˆ†é…ï¼ˆåŠå…¶åçš„é‡Šæ”¾åŠ¨ä½œ)è€Œæ¥çš„é¢å¤–å¼€é”€ï¼Œä»¥åŠé­é‡badal1ocå¼‚å¸¸ï¼ˆå†…å­˜ä¸è¶³ï¼‰çš„å¯èƒ½æ€§ã€‚</li><li>è‡³äºInterfaceclasses,ç”±äºæ¯ä¸ªå‡½æ•°éƒ½æ˜¯virtual,æ‰€ä»¥ä½ å¿…é¡»ä¸ºæ¯æ¬¡å‡½æ•°è°ƒç”¨ä»˜å‡ºä¸€ä¸ªé—´æ¥è·³è·ƒ(indirectjump)æˆæœ¬ï¼ˆè§æ¡æ¬¾7ï¼‰ã€‚æ­¤å¤–Interfaceclassæ´¾ç”Ÿçš„å¯¹è±¡å¿…é¡»å†…å«ä¸€ä¸ªvptr(virtual tablepointer,å†æ¬¡è§æ¡æ¬¾7)ï¼Œè¿™ä¸ªæŒ‡é’ˆå¯èƒ½ä¼šå¢åŠ å­˜æ”¾å¯¹è±¡æ‰€éœ€çš„å†…å­˜æ•°é‡ä¸€å®é™…å–å†³äºè¿™ä¸ªå¯¹è±¡é™¤äº†Interfaceclassä¹‹å¤–æ˜¯å¦è¿˜æœ‰å…¶ä»–virtualå‡½æ•°æ¥æºã€‚</li><li>æœ€åï¼Œä¸è®ºHandle classesæˆ–Interfaceclasses,ä¸€æ—¦è„±ç¦»inlineå‡½æ•°éƒ½æ— æ³•æœ‰å¤ªå¤§ä½œä¸ºã€‚æ¡æ¬¾30è§£é‡Šè¿‡ä¸ºä»€ä¹ˆå‡½æ•°æœ¬ä½“ä¸ºäº†è¢«inlinedå¿…é¡»ï¼ˆå¾ˆå…¸å‹åœ°ï¼‰ç½®äºå¤´æ–‡ä»¶å†…ï¼Œä½†Handleclasseså’ŒInterfaceclassesæ­£æ˜¯ç‰¹åˆ«è¢«è®¾è®¡ç”¨æ¥éšè—å®ç°ç»†èŠ‚å¦‚å‡½æ•°æœ¬ä½“ã€‚</li><li>æ”¯æŒâ€œç¼–è¯‘ä¾å­˜æ€§æœ€å°åŒ–â€çš„ä¸€èˆ¬æ„æƒ³æ˜¯ï¼šç›¸ä¾äºå£°æ˜å¼ï¼Œä¸è¦ç›¸ä¾äºå®šä¹‰å¼ã€‚åŸºäºæ­¤æ„æƒ³çš„ä¸¤ä¸ªæ‰‹æ®µæ˜¯Handleclasseså’ŒInterface classes</li><li>ç¨‹åºåº“å¤´æ–‡ä»¶åº”è¯¥ä»¥â€œå®Œå…¨ä¸”ä»…æœ‰å£°æ˜å¼â€çš„å½¢å¼å­˜åœ¨ã€‚è¿™ç§åšæ³•ä¸è®ºæ˜¯å¦æ¶‰åŠtemplateséƒ½é€‚ç”¨ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. è®¾è®¡ä¸å£°æ˜</title>
    <link href="/2024/11/27/effective-cpp/4-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/"/>
    <url>/2024/11/27/effective-cpp/4-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/</url>
    
    <content type="html"><![CDATA[<h2 id="è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ä¸æ˜“è¢«è¯¯ç”¨">18.è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Date</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Date</span>(<span class="hljs-type">int</span> month, <span class="hljs-type">int</span> day, <span class="hljs-type">int</span> year);<br>&#125;;<br></code></pre></td></tr></table></figure><ol type="1"><li>å‡½æ•°æ¥å£ å¯èƒ½ä»¥é”™è¯¯çš„æ¬¡åºä¼ é€’å‚æ•°ï¼Œæˆ–è€…ä¼ é€’ä¸€ä¸ªæ— æ•ˆçš„æœˆä»½æˆ–å¤©æ•°</li><li>å¯¼å…¥ç®€å•çš„å¤–è¦†ç±»å‹æ¥åŒºåˆ«å¤©æ•°ï¼Œæœˆä»½ç­‰</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Day</span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Day</span><span class="hljs-params">(<span class="hljs-type">int</span> d)</span></span><br><span class="hljs-function">:val(d)&#123;</span>&#125;<br><span class="hljs-type">int</span> val;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Month</span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Month</span><span class="hljs-params">(<span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function">:val(m)&#123;</span>&#125;<br><span class="hljs-type">int</span> val;<br>&#125;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Year</span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Year</span><span class="hljs-params">(<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function">:val(y)&#123;</span>&#125;<br><span class="hljs-type">int</span> val;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä»¤Dayï¼ŒMonthï¼ŒYearæˆä¸ºæˆç†Ÿä¸”ç»å……åˆ†é”»ç‚¼çš„ç±»å¹¶å°è£…å†…éƒ¨æ•°æ®ï¼Œæ¯”ç®€å•ä½¿ç”¨structså¥½</li><li>é™åˆ¶æ­£ç¡®çš„ç±»å‹çš„å–å€¼ï¼Œæ¯”è¾ƒå®‰å…¨çš„æ–¹æ³•æ—¶é¢„å®šä¹‰æ‰€æœ‰æœ‰æ•ˆçš„Monthsï¼Œä»¥å‡½æ•°æ›¿æ¢å¯¹è±¡ï¼Œè¡¨ç°æŸä¸ªç‰¹å®šæœˆä»½ï¼Œå› ä¸ºnon-localstaticå¯¹è±¡çš„åˆå§‹åŒ–æ¬¡åºå¯èƒ½å‡ºç°é—®é¢˜</li></ol><p><img src="/2024/11/27/effective-cpp/4-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%A3%B0%E6%98%8E/1707183478622-e5fdf8f5-23a5-4374-9a5e-78ff04c69f48.png"></p><ol start="5" type="1"><li>é¢„é˜²å®¢æˆ·é”™è¯¯çš„å¦ä¸€ä¸ªåŠæ³•æ˜¯ï¼Œé™åˆ¶ç±»å‹å†…ä»€ä¹ˆæ˜¯å¯åšï¼Œä»€ä¹ˆæ˜¯ä¸èƒ½åšã€‚å¸¸è§çš„é™åˆ¶æ˜¯åŠ ä¸Šconstã€‚æ¡æ¬¾3ï¼šä»¥constä¿®é¥°operator*çš„è¿”å›ç±»å‹å¯é˜»æ­¢å®¢æˆ·å› ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹è€ŒçŠ¯é”™</li><li>é™¤éæœ‰å¥½ç†ç”±ï¼Œå¦åˆ™åº”è¯¥å°½é‡ä»¤ä½ çš„typesçš„è¡Œä¸ºäºå†…ç½®typesä¸€è‡´</li><li>é¿å…æ— ç«¯ä¸å†…ç½®ç±»å‹ä¸å…¼å®¹ï¼ŒçœŸæ­£çš„ç†ç”±æ˜¯ä¸ºäº†æä¾›è¡Œä¸ºä¸€è‡´çš„æ¥å£ã€‚STLå®¹å™¨çš„æ¥å£ååˆ†ä¸€è‡´ï¼Œè¿™ä½¿å¾—å®ƒä»¬éå¸¸å®¹æ˜“è¢«è°ƒç”¨</li><li>è¾ƒä½³æ¥å£çš„è®¾è®¡åŸåˆ™æ˜¯ä»¤å‡½æ•°è¿”å›ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œäº‹å®ä¸Šï¼Œè¿”å›tr1::shared_ptrè®©æ¥å£è®¾è®¡è€…é˜»æ­¢èµ„æºæ³„éœ²çš„é”™è¯¯</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::<span class="hljs-function">tr1::shared_ptr&lt;Investment&gt; <span class="hljs-title">createInvestment</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><ol start="9" type="1"><li>å‡è®¾ç±»è®¾è®¡è€…æœŸè®¸"ä»createInvestmentå–å¾—Investment*æŒ‡é’ˆ"çš„å®¢æˆ·å°†è¯¥æŒ‡é’ˆä¼ é€’ç»™ä¸€ä¸ªåä¸ºgetRidOfInvestmentçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨deleteã€‚è¿™æ ·ä¸€ä¸ªæ¥å£åˆå¼€å¯é€šå¾€å¦ä¸€ä¸ªå®¢æˆ·é”™è¯¯çš„å¤§é—¨ï¼Œè¯¥é”™è¯¯æ˜¯"ä¼å›¾ä½¿ç”¨é”™è¯¯çš„èµ„æºææ„æœºåˆ¶"ï¼Œè®¾è®¡è€…å¯ä»¥è®¾è®¡ä¸€ä¸ªè¿”å›å°†getRidOfInvestmentç»‘å®šä¸ºåˆ é™¤å™¨"çš„tr1::shared_ptr</li><li>tr1::shared_ptræä¾›çš„æŸä¸ªæ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå®å‚ï¼šä¸€ä¸ªæ˜¯è¢«ç®¡ç†çš„æŒ‡é’ˆï¼Œå¦ä¸€ä¸ªæ˜¯å¼•ç”¨æ¬¡æ•°å˜æˆ0æ—¶å°†è¢«è°ƒç”¨çš„åˆ é™¤å™¨ã€‚è¿™å¯å‘æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªnulltr1::shared_ptrå¹¶ä»¥getRidOfInvestmentä½œä¸ºåˆ é™¤å™¨</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::tr1::shared_ptr&lt;Investment&gt;<span class="hljs-built_in">pInv</span>(<span class="hljs-built_in">static_cast</span>&lt;Investment*&gt;(<span class="hljs-number">0</span>),getRidOfInvestment);<br></code></pre></td></tr></table></figure><ol start="11" type="1"><li>tr1::shared_ptræœ‰ä¸€ä¸ªç‰¹åˆ«å¥½çš„æ€§è´¨æ˜¯ï¼Œå®ƒä¼šè‡ªåŠ¨ä½¿ç”¨å®ƒçš„â€œæ¯ä¸ªæŒ‡é’ˆä¸“å±çš„åˆ é™¤å™¨â€ï¼Œå› è€Œæ¶ˆé™¤å¦ä¸€ä¸ªæ½œåœ¨çš„å®¢æˆ·é”™è¯¯ï¼šæ‰€è°“çš„â€œcross-DLLproblem"ã€‚è¿™ä¸ªé—®é¢˜å‘ç”Ÿäºå¯¹è±¡åœ¨åŠ¨æ€é“¾æ¥ç¨‹åºåº“DLLä¸­è¢«newåˆ›å»ºï¼Œå´åœ¨å¦ä¸€ä¸ªDLLå†…è¢«deleteé”€æ¯ï¼Œåœ¨è®¸å¤šå¹³å°ä¸Šï¼Œè¿™ä¸€ç±»è·¨DLLä¹‹new/deleteæˆå¯¹ä½¿ç”¨ä¼šå¯¼è‡´è¿è¡ŒæœŸé”™è¯¯ã€‚</li><li>å¥½çš„æ¥å£å¾ˆå®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸å®¹æ˜“è¢«è¯¯ç”¨ã€‚ä½ åº”è¯¥åœ¨ä½ çš„æ‰€æœ‰æ¥å£ä¸­åŠªåŠ›è¾¾æˆè¿™äº›æ€§è´¨ã€‚</li><li>â€œä¿ƒè¿›æ­£ç¡®ä½¿ç”¨â€çš„åŠæ³•åŒ…æ‹¬æ¥å£çš„ä¸€è‡´æ€§ï¼Œä»¥åŠä¸å†…ç½®ç±»å‹çš„è¡Œä¸ºå…¼å®¹ã€‚</li><li>â€œé˜»æ­¢è¯¯ç”¨â€çš„åŠæ³•åŒ…æ‹¬å»ºç«‹æ–°ç±»å‹ã€é™åˆ¶ç±»å‹ä¸Šçš„æ“ä½œï¼ŒæŸç¼šå¯¹è±¡å€¼ï¼Œä»¥åŠæ¶ˆé™¤å®¢æˆ·çš„èµ„æºç®¡ç†è´£ä»»ã€‚</li><li>trl::shared_ptræ”¯æŒå®šåˆ¶å‹åˆ é™¤å™¨(customdeleter)ã€‚è¿™å¯é˜²èŒƒDLLé—®é¢˜ï¼Œå¯è¢«ç”¨æ¥è‡ªåŠ¨è§£é™¤äº’æ–¥é”ï¼ˆmutexes;è§æ¡æ¬¾14)ç­‰ç­‰ã€‚</li></ol><h2 id="è®¾è®¡classçŠ¹å¦‚è®¾è®¡type">19. è®¾è®¡classçŠ¹å¦‚è®¾è®¡type</h2><ol type="1"><li>æ–°typeå¯¹è±¡åº”è¯¥å¦‚ä½•è¢«åˆ›å»ºå’Œé”€æ¯ï¼Ÿï¼ˆç¬¬å…«ç« ï¼‰</li><li>å¯¹è±¡çš„åˆå§‹åŒ–å’Œå¯¹è±¡çš„èµ‹å€¼è¯¥æœ‰ä»€ä¹ˆæ ·çš„å·®åˆ«ï¼Ÿï¼ˆæ¡æ¬¾å››ï¼‰</li><li>æ–°typeçš„å¯¹è±¡å¦‚æœè¢«passed by value(ä»¥å€¼ä¼ é€’)ï¼Œæ„å‘³ç€ä»€ä¹ˆï¼Ÿcopyæ„é€ å‡½æ•°ç”¨æ¥å®šä¹‰ä¸€ä¸ªtypeçš„pass-by-valueå¦‚ä½•å®ç°</li><li>ä»€ä¹ˆæ˜¯æ–°typeçš„â€åˆæ³•å€¼â€œ</li><li>ä½ çš„æ–°typeéœ€è¦é…åˆæŸä¸ªç»§æ‰¿å›¾ç³»å—ï¼Ÿ<ol type="1"><li>å¦‚æœç»§æ‰¿è‡ªæŸäº›æ—¢æœ‰çš„ç±»ï¼Œå°±ä¼šå—åˆ°é‚£äº›ç±»çš„è®¾è®¡çš„æŸç¼šï¼Œç‰¹åˆ«æ˜¯ä»–ä»¬çš„å‡½æ•°æ—¶virtualæˆ–non-virtualçš„å½±å“ï¼ˆæ¡æ¬¾34å’Œ36ï¼‰</li><li>å¦‚æœå…è®¸å…¶ä»–ç±»ç»§æ‰¿ä½ çš„classï¼Œé‚£ä¼šå½±å“ä½ æ‰€å£°æ˜çš„å‡½æ•°ï¼Œå°¤å…¶æ˜¯ææ„å‡½æ•°æ˜¯å¦ä¸ºvirtualï¼ˆæ¡æ¬¾7ï¼‰</li></ol></li><li>ä½ çš„æ–°typeéœ€è¦ä»€ä¹ˆæ¨çš„è½¬æ¢<ol type="1"><li>å¦‚æœå…è®¸T1éšå¼è½¬æ¢ä¸ºT2ï¼Œå°±å¿…é¡»åœ¨classT1å†…å†™ä¸€ä¸ªç±»å‹è½¬æ¢å‡½æ•°ï¼ˆoperator T2ï¼‰æˆ–è€…åœ¨classT2å†…å†™ä¸€ä¸ªnon-explicit-one-argumentï¼ˆå¯è¢«å•ä¸€å®å‚è°ƒç”¨ï¼‰çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœåªå…è®¸explicitç‹—åœ¨å‡½æ•°å­˜åœ¨ï¼Œå°±å¾—å†™ä¸“é—¨è´Ÿè´£è½¬æ¢çš„å‡½æ•°ï¼Œä¸”ä¸å¾—ä¸ºç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼ˆtypeconversionoperatorsï¼‰æˆ–è€…non-explicit-one-argumentæ„é€ å‡½æ•°ã€‚ï¼ˆæ¡æ¬¾15ï¼‰</li></ol></li><li>ä»€ä¹ˆæ ·çš„æ“ä½œç¬¦å’Œå‡½æ•°å¯¹æ­¤æ–°typeè€Œè¨€æ—¶åˆç†çš„ï¼Ÿ<ol type="1"><li>å†³å®šäºå°†ä¸ºclasså£°æ˜å“ªäº›å‡½æ•°ï¼Œå…¶ä¸­æŸäº›è¯¥æ˜¯memberå‡½æ•°ï¼ŒæŸäº›åˆ™å¦ï¼ˆè§æ¡æ¬¾23ï¼Œ24ï¼Œ46ï¼‰</li></ol></li><li>ä»€ä¹ˆæ ·çš„æ ‡å‡†å‡½æ•°åº”è¯¥é©³å›ï¼Ÿ<ol type="1"><li>é‚£äº›æ­£æ˜¯ä½ å¿…é¡»å£°æ˜ä¸ºprivateè€…ï¼ˆæ¡æ¬¾6ï¼‰</li></ol></li><li>è°è¯¥å–ç”¨æ–°typeçš„æˆå‘˜<ol type="1"><li>å†³å®šå“ªä¸ªæˆå‘˜ä¸ºpublicï¼Œå“ªä¸ªä¸ºprotectedï¼Œå“ªä¸ªä¸ºprivate</li><li>å†³å®šå“ªä¸€ä¸ªç±»æˆ–è€…å‡½æ•°åº”è¯¥æ˜¯friendsï¼Œä»¥åŠå°†å®ƒä»¬åµŒå¥—äºå¦ä¸€ä¸ªä¹‹å†…æ˜¯å¦åˆç†</li></ol></li><li>ä»€ä¹ˆæ˜¯æ–°typeçš„â€æœªå£°æ˜æ¥å£â€œ<ol type="1"><li>å¯¹æ•ˆç‡ã€å¼‚å¸¸å®‰å…¨æ€§ï¼ˆæ¡æ¬¾29ï¼‰ä»¥åŠèµ„æºè¿ç”¨ï¼ˆä¾‹å¦‚å¤šä»»åŠ¡é”å®šå’ŒåŠ¨æ€å†…å­˜ï¼‰æä¾›ä½•ç§ä¿è¯ï¼Œ</li></ol></li><li>ä½ çš„æ–°typeæœ‰å¤šä¹ˆä¸€èˆ¬åŒ–<ol type="1"><li>å®šä¹‰ä¸€ä¸ªæ–°çš„class templateï¼Œå®šä¹‰ä¸€æ•´ä¸ªtypeså®¶æ—</li></ol></li><li>ä½ çœŸçš„éœ€è¦ä¸€ä¸ªæ–°typeå—<ol type="1"><li>å¦‚æœåªæ˜¯å®šä¹‰æ–°çš„æ´¾ç”Ÿç±»ä»¥ä¾¿ä¸ºæ—¢æœ‰çš„classæ·»åŠ æœºèƒ½ï¼Œè¯´ä¸å®šå•çº¯å®šä¹‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªnon-memberå‡½æ•°æˆ–è€…templatesï¼Œæ›´èƒ½è¾¾åˆ°ç›®æ ‡</li></ol></li></ol><h2 id="å®ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value">20.å®ä»¥pass-by-reference-to-constæ›¿æ¢pass-by-value</h2><ol type="1"><li>ç¼ºçœæƒ…å†µä¸‹C++ä»¥by valueæ–¹å¼ä¼ é€’å¯¹è±¡è‡³å‡½æ•°</li><li>é™¤éå¦å¤–æŒ‡å®šï¼Œå¦åˆ™å‡½æ•°å‚æ•°éƒ½æ˜¯ä»¥å®é™…å‚æ•°çš„å‰¯æœ¬ä¸ºåˆå€¼ï¼Œè€Œè°ƒç”¨ç«¯æ‰€è·å¾—çš„äº¦æ˜¯å‡½æ•°è¿”å›å€¼çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œè¿™äº›å‰¯æœ¬æ˜¯å¯¹è±¡çš„copyæ„é€ å‡½æ•°äº§å‡ºï¼Œä½¿å¾—pass-by-valueæˆä¸ºè´¹æ—¶çš„æ“ä½œã€‚</li><li>å¦‚ä½•å›é¿æ‰€æœ‰çš„æ„é€ å’Œææ„åŠ¨ä½œï¼Ÿpass by reference-to-const</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">validateStudent</span><span class="hljs-params">(<span class="hljs-type">const</span> Student&amp; s)</span></span>;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>è¿™ç§ä¼ é€’æ–¹å¼æ•ˆç‡é«˜ï¼Œæ²¡æœ‰ä»»ä½•æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•æ–°å¯¹è±¡è¢«åˆ›å»ºã€‚constæ˜¯é‡è¦çš„ï¼Œ</li><li>ä»¥byreferenceæ–¹å¼ä¼ é€’å‚æ•°å¯ä»¥é¿å…slicingï¼ˆå¯¹è±¡åˆ‡å‰²ï¼‰é—®é¢˜ã€‚å½“ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡ä»¥byvalueæ–¹å¼ä¼ é€’å¹¶è¢«è§†ä¸ºä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼ŒåŸºç±»çš„copyæ„é€ å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œè€Œé€ æˆæ­¤å¯¹è±¡çš„è¡Œä¸ºåƒä¸ªæ´¾ç”Ÿç±»å¯¹è±¡çš„é‚£äº›ç‰¹åŒ–æ€§è´¨å…¨è¢«åˆ‡å‰²æ‰äº†ï¼Œä»…ä»…ç•™ä¸‹ä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œä½†è¿™å‡ ä¹ä¸æ˜¯æƒ³è¦çš„</li><li>referenceså¾€å¾€ä»¥æŒ‡é’ˆå®ç°å‡ºæ¥ï¼Œå› æ­¤pass byreferenceæ„å‘³çœŸæ­£ä¼ é€’çš„æ˜¯æŒ‡é’ˆã€‚å¦‚æœå¯¹è±¡å±äºå†…ç½®ç±»å‹ï¼ˆintç­‰ï¼‰ï¼Œpass byvalueå¾€å¾€æ¯”pass byreferenceæ•ˆç‡é«˜ã€‚å¯¹äºå†…ç½®ç±»å‹è€Œè¨€ï¼Œæœ‰æœºä¼šé‡‡ç”¨pass-by-valueæˆ–pass-by-reference-to-constæ—¶ï¼Œé€‰æ‹©pass-by-valueå¹¶éæ— é“ç†ã€‚</li><li>åŒæ—¶ä¹Ÿé€‚ç”¨äºSTLè¿­ä»£å™¨å’Œå‡½æ•°å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬ä¹ æƒ¯ä¸Šè¢«è®¾è®¡ä¸ºpassed byvalue</li><li>å†…ç½®ç±»å‹éƒ½ç›¸å½“å°ï¼Œå¯¹è±¡å°å¹¶ä¸æ„å‘³ç€å…¶copyæ„é€ å‡½æ•°ä¸æ˜‚è´µã€‚è®¸å¤šå¯¹è±¡ï¼ŒåŒ…æ‹¬å¤§å¤šæ•°STLå®¹å™¨ï¼Œå†…å«çš„ä¸œè¥¿åªæ¯”æŒ‡é’ˆå¤šä¸€äº›ï¼Œä½†å¤åˆ¶è¿™ç§å¯¹è±¡å´éœ€è¦æ‰¿æ‹…å¤åˆ¶é‚£äº›æŒ‡é’ˆæ‰€æŒ‡çš„æ¯ä¸€æ ·ä¸œè¥¿ï¼Œé‚£å°†éå¸¸æ˜‚è´µ</li><li>å°å‹çš„ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ä¸å¿…ç„¶æˆä¸ºpass by valueä¼˜è‰¯å€™é€‰äºº</li><li>å°½é‡ä»¥pass-by-reference-to-constæ›¿æ¢pass byvalueï¼Œå‰è€…é€šå¸¸é«˜æ•ˆï¼Œå¹¶å¯é¿å…åˆ‡å‰²é—®é¢˜</li><li>ä»¥ä¸Šè§„åˆ™å¹¶ä¸é€‚ç”¨å†…ç½®ç±»å‹ï¼Œä»¥åŠSTLçš„è¿­ä»£å™¨å’Œå‡½æ•°å¯¹è±¡ã€‚å¯¹ä»–ä»¬è€Œè¨€ï¼Œpass-by-valueå¾€å¾€æ¯”è¾ƒé€‚å½“ã€‚</li></ol><h2 id="å¿…é¡»è¿”å›å¯¹è±¡æ—¶åˆ«å¦„æƒ³è¿”å›å…¶reference">21.å¿…é¡»è¿”å›å¯¹è±¡æ—¶ï¼Œåˆ«å¦„æƒ³è¿”å›å…¶reference</h2><ol type="1"><li>å¯èƒ½ä¼šä¼ é€’ä¸€äº›referencesæŒ‡å‘å…¶å®å¹¶ä¸å­˜åœ¨çš„å¯¹è±¡</li><li>å‡½æ•°åˆ›å»ºæ–°å¯¹è±¡çš„é€”å¾„ï¼šåœ¨stackå’Œheapç©ºé—´åˆ›å»º</li><li>ä¸èƒ½è¿”å›referenceæŒ‡å‘çš„local å¯¹è±¡ï¼Œ</li><li>è‹¥åœ¨heapå†…æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›æŒ‡å‘çš„referenceï¼ŒåŒæ ·æœ‰é—®é¢˜ï¼Œdeleteè¯¥å¦‚ä½•è°ƒç”¨ï¼Ÿ</li><li>ä¸€ä¸ªå¿…é¡»è¿”å›æ–°å¯¹è±¡çš„å‡½æ•°çš„æ­£ç¡®å†™æ³•æ˜¯ï¼Œè®©é‚£ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">inline</span> <span class="hljs-type">const</span> Rational <span class="hljs-keyword">operator</span>* (<span class="hljs-type">const</span> Rational &amp;lhs, <span class="hljs-type">const</span> Rational&amp; rhs)<br>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Rational</span>(lhs.n * rhs.n, lhs.d * rhs.d);<br>&#125;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>éœ€è¦æ‰¿å—operator *è¿”å›å€¼çš„æ„é€ å’Œææ„æˆæœ¬</li><li>å½“ä½ å¿…é¡»åœ¨â€œè¿”å›ä¸€ä¸ªreferenceå’Œè¿”å›ä¸€ä¸ªobjectâ€ä¹‹é—´æŠ‰æ‹©æ—¶ï¼Œä½ çš„å·¥ä½œæ—¶æŒ‘å‡ºè¡Œä¸ºæ­£ç¡®çš„é‚£ä¸ª</li><li>ç»ä¸è¦è¿”å›pointeræˆ–referenceæŒ‡å‘ä¸€ä¸ªlocalstackå¯¹è±¡ï¼Œæˆ–è€…è¿”å›referenceæŒ‡å‘ä¸€ä¸ªheap-allocatedå¯¹è±¡æˆ–è¿”å›pointeræˆ–referenceæŒ‡å‘ä¸€ä¸ªlocalstaticå¯¹è±¡è€Œæœ‰å¯èƒ½åŒæ—¶éœ€è¦å¤šä¸ªè¿™æ ·çš„å¯¹è±¡ã€‚æ¡æ¬¾4å·²ç»ä¸ºâ€œå•çº¿ç¨‹ç¯å¢ƒä¸­åˆç†è¿”å›referenceæŒ‡å‘ä¸€ä¸ªlocalstaticå¯¹è±¡â€æä¾›ä¸€ä¸ªè®¾è®¡å®ä¾‹ã€‚</li></ol><h2 id="å°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate">22. å°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivate</h2><ol type="1"><li>å¦‚æœæˆå‘˜å˜é‡ä¸æ˜¯publicï¼Œå®¢æˆ·å”¯ä¸€èƒ½å¤Ÿè®¿é—®å¯¹è±¡çš„åŠæ³•å°±æ˜¯é€šè¿‡æˆå‘˜å‡½æ•°ã€‚å¦‚æœpublicæ¥å£å†…çš„æ¯æ ·ä¸œè¥¿éƒ½æ˜¯å‡½æ•°ï¼Œå®¢æˆ·å°±ä¸éœ€è¦æ‰“ç®—è®¿é—®classæˆå‘˜æ—¶è¿·æƒ‘çš„è¯•ç€è®°ä½æ˜¯å¦è¯¥ä½¿ç”¨å°æ‹¬å·</li><li>å¦‚æœé€šè¿‡å‡½æ•°è®¿é—®æˆå‘˜å˜é‡ï¼Œæ—¥åå¯æ”¹ä»¥æŸä¸ªè®¡ç®—æ›¿æ¢è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œè€Œclasså®¢æˆ·ä¸€ç‚¹ä¹Ÿä¸ä¼šçŸ¥é“classå†…éƒ¨å®ç°å·²ç»èµ·äº†å˜æ¢</li><li>å°†æˆå‘˜å˜é‡éšè—åœ¨å‡½æ•°æ¥å£çš„èƒŒåï¼Œå¯ä»¥ä¸ºâ€œæ‰€æœ‰å¯èƒ½çš„å®ç°â€æä¾›å¼¹æ€§ã€‚ä¾‹å¦‚è¿™å¯ä»¥ä½¿å¾—æˆå‘˜å˜é‡è¢«è¯»æˆ–è¢«å†™æ—¶è½»æ¾é€šçŸ¥å…¶å¯¹è±¡ã€å¯ä»¥éªŒè¯classçš„éªŒè¯æ¡ä»¶ä»¥åŠå‡½æ•°çš„å‰æå’Œæ—¶å€™çŠ¶æ€ã€å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ‰§è¡ŒåŒæ­¥æ§åˆ¶ç­‰</li><li>å°è£…çš„é‡è¦æ€§ã€‚å¯¹å®¢æˆ·éšè—æˆå‘˜å˜é‡ï¼Œå¯ä»¥ç¡®ä¿classçš„çº¦æŸæ¡ä»¶æ€»æ˜¯ä¼šè·å¾—ç»´æŠ¤</li><li>protectedæˆå‘˜å˜é‡çš„è®ºç‚¹ç±»ä¼¼ã€‚æˆå‘˜å˜é‡çš„å°è£…æ€§ä¸â€œæˆå‘˜å˜é‡çš„å†…å®¹æ”¹å˜æ—¶æ‰€ç ´åçš„ä»£ç æ•°é‡â€æˆåæ¯”ã€‚</li><li>å‡è®¾æœ‰ä¸€ä¸ªprotectedæˆå‘˜å˜é‡ï¼Œè€Œæˆ‘ä»¬æœ€ç»ˆå–æ¶ˆäº†å®ƒï¼Œæ‰€æœ‰ä½¿ç”¨å®ƒçš„æ´¾ç”Ÿç±»éƒ½ä¼šè¢«ç ´åï¼ŒåŒæ ·ç¼ºå°‘å°è£…ä¹ æƒ¯ã€‚</li><li>ä»å°è£…è§’åº¦æ¥è¯´ï¼Œåªæœ‰ä¸¤ç§è®¿é—®æƒé™ï¼šprivateï¼ˆæä¾›å°è£…ï¼‰å’Œå…¶ä»–ï¼ˆä¸æä¾›å°è£…ï¼‰</li><li>å°†æˆå‘˜å˜é‡å£°æ˜ä¸ºprivateã€‚è¿™å¯èµ‹äºˆå®¢æˆ·è®¿é—®æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¯ç»†å¾®åˆ’åˆ†è®¿é—®æ§åˆ¶ã€å…è¯ºçº¦æŸæ¡ä»¶è·å¾—ä¿è¯ï¼Œå¹¶æä¾›classä½œè€…ä»¥å……åˆ†çš„å®ç°å¼¹æ€§</li><li>protectedå¹¶ä¸æ¯”publicæ›´å…·å°è£…æ€§ã€‚</li></ol><h2 id="å®ä»¥non-membernon-friendæ›¿æ¢memberå‡½æ•°">23.å®ä»¥non-memberã€non-friendæ›¿æ¢memberå‡½æ•°</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebBrowser</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clearCache</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clearHistory</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><pre><code class="hljs">void clearEverythinng();</code></pre><p>};</p><p>//non-memberå‡½æ•° void clearBrowser(WebBrowser&amp; wb) {wb.clearCache(); wb.clearHistory(); }</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-number">1.</span> é¢å‘å¯¹è±¡å®ˆåˆ™è¦æ±‚ï¼Œæ•°æ®ä»¥åŠæ“ä½œæ•°æ®çš„é‚£äº›å‡½æ•°åº”è¯¥æ†ç»‘åœ¨ä¸€èµ·ï¼Œmemberå‡½æ•°æ—¶è¾ƒå¥½çš„é€‰æ‹©ã€‚è¿™æ˜¯å¯¹åŸºäºå¯¹é¢å‘å¯¹è±¡çœŸå®æ„ä¹‰çš„ä¸€ä¸ªè¯¯è§£ã€‚é¢å‘å¯¹è±¡å®ˆåˆ™è¦æ±‚æ•°æ®åº”è¯¥å°½å¯èƒ½è¢«å°è£…ã€‚<br><span class="hljs-number">2.</span> å¦‚æœmemberå‡½æ•°çš„å°è£…æ€§æ¯”non-memberä½ã€‚<br><span class="hljs-number">3.</span> æ„ˆå¤šä¸œè¥¿è¢«å°è£…ï¼Œæˆ‘ä»¬æ”¹å˜é‚£äº›ä¸œè¥¿çš„èƒ½åŠ›å°±è¶Šå¤§ï¼Œè¿™å°±æ˜¯æ¨å´‡å°è£…çš„åŸå› ï¼Œå®ƒèƒ½ä½¿æ”¹å˜äº‹ç‰©è€Œåªå½±å“æœ‰é™å®¢æˆ·<br><span class="hljs-number">4.</span> èƒ½å¤Ÿè®¿é—®<span class="hljs-keyword">private</span>æˆå‘˜å˜é‡çš„å‡½æ•°åªæœ‰<span class="hljs-keyword">class</span>çš„memberå‡½æ•°åŠ ä¸Š<span class="hljs-keyword">friend</span>å‡½æ•°è€Œå·²<br><span class="hljs-number">5.</span> å¦‚æœåœ¨ä¸€ä¸ªmemberå‡½æ•°å’Œä¸€ä¸ªnon-member,non-<span class="hljs-keyword">friend</span>å‡½æ•°ä¹‹é—´é€‰æ‹©ï¼Œè€Œä¸”ä¸¤è€…æä¾›ç›¸åŒæœºèƒ½ï¼Œé‚£ä¹ˆå¯¼è‡´å°è£…æ€§è¾ƒå¤§çš„æ—¶non-member non-<span class="hljs-keyword">friend</span>å‡½æ•°ï¼Œå› ä¸ºå®ƒå¹¶ä¸å¢åŠ â€œèƒ½å¤Ÿè®¿é—®<span class="hljs-keyword">class</span>å†…ä¹‹<span class="hljs-keyword">private</span>æˆåˆ†â€çš„å‡½æ•°å˜é‡ã€‚<br><span class="hljs-number">6.</span> è®©clearBrowseræˆä¸ºä¸€ä¸ªnon-memberå‡½æ•°å¹¶ä½äºWebBrowseræ‰€åœ¨çš„åŒä¸€ä¸ª<span class="hljs-keyword">namespace</span>å†…<br><br>â€‹```cpp<br><span class="hljs-keyword">namespace</span> WebBrowserStuff&#123;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebBrowser</span>&#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clearBrowser</span><span class="hljs-params">(WebBrowser&amp; wb)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>namespaceå’Œclassesä¸åŒï¼Œå‰è€…å¯ä»¥è·¨è¶Šå¤šä¸ªæºç æ–‡ä»¶è€Œåè€…ä¸èƒ½ã€‚</li><li>å°†æ‰€æœ‰ä¾¿åˆ©å‡½æ•°æ”¾åœ¨å¤šä¸ªå¤´æ–‡ä»¶å†…ä½†éš¶å±åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œæ„å‘³ç€å®¢æˆ·å¯ä»¥è½»æ¾æ‰©å±•è¿™ä¸€ç»„ä¾¿åˆ©å‡½æ•°ã€‚è¦åšçš„æ˜¯æ·»åŠ æ›´å¤šnon-membernon-friendå‡½æ•°åˆ°æ­¤å‘½åç©ºé—´</li><li>å®å¯æ‹¿non-membernon-friendå‡½æ•°æ›¿æ¢memberå‡½æ•°ï¼Œè¿™æ ·åšå¯ä»¥å¢åŠ å°è£…æ€§ã€åŒ…è£¹å¼¹æ€§å’Œæœºèƒ½æ‰©å……æ€§</li></ol><h2 id="è‹¥æ‰€æœ‰å‚æ•°çš†éœ€ç±»å‹è½¬æ¢è¯·ä¸ºæ­¤é‡‡ç”¨non-memberå‡½æ•°">24.è‹¥æ‰€æœ‰å‚æ•°çš†éœ€ç±»å‹è½¬æ¢ï¼Œè¯·ä¸ºæ­¤é‡‡ç”¨non-memberå‡½æ•°</h2><ol type="1"><li>ä»¤classesæ”¯æŒéšå¼è½¬æ¢æ˜¯ä¸ªç³Ÿç³•çš„ä¸»æ„ï¼Œæœ€å¸¸è§çš„ä¾‹å¤–å°±æ˜¯åœ¨å»ºç«‹æ•°å€¼ç±»åˆ«æ—¶ã€‚å‡è®¾è®¾è®¡ä¸€ä¸ªclassç”¨æ¥è¡¨ç°æœ‰ç†æ•°ï¼Œå…è®¸æ•´æ•°â€œéšå¼è½¬æ¢â€åˆç†ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rational</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Rational</span>(<span class="hljs-type">int</span> num1 = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> num2 = <span class="hljs-number">1</span>);<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">num1</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">num2</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;<br>    <span class="hljs-comment">//const Rational operator* (const Rational&amp; rhs) const;</span><br>&#125;;<br><span class="hljs-type">const</span> Rational <span class="hljs-keyword">operator</span>*(<span class="hljs-type">const</span> Rational&amp; lhs, <span class="hljs-type">const</span> Rational&amp; rhs)<br>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Rational</span>(lhs.<span class="hljs-built_in">num1</span>() * rhs.<span class="hljs-built_in">num1</span>(), lhs.<span class="hljs-built_in">num2</span>() * rhs.<span class="hljs-built_in">num2</span>());<br>&#125;<br>Rational result;<br>result = R1 * <span class="hljs-number">2</span>;<br>result = <span class="hljs-number">2</span> * R1;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>memberå‡½æ•°çš„åé¢æ—¶non-memberå‡½æ•°ï¼Œè€Œä¸æ˜¯friendå‡½æ•°</li><li>å¦‚æœéœ€è¦ä¸ºæŸä¸ªå‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼ˆåŒ…æ‹¬è¢«thisæŒ‡é’ˆæ‰€æŒ‡çš„é‚£ä¸ªéšå–»å‚æ•°ï¼‰è¿›è¡Œç±»å‹è½¬æ¢ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å¿…é¡»æ˜¯ä¸ªnon-member</li></ol><h2 id="è€ƒè™‘å†™å‡ºä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„swapå‡½æ•°">25.è€ƒè™‘å†™å‡ºä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„swapå‡½æ•°</h2><ol type="1"><li>swapå‡½æ•°åŸæ¥åªæ˜¯STLçš„ä¸€éƒ¨åˆ†ï¼Œè€Œåæˆä¸ºå¼‚å¸¸å®‰å…¨æ€§ç¼–ç¨‹çš„è„ŠæŸ±ï¼Œä»¥åŠç”¨æ¥å¤„ç†è‡ªæˆ‘å¤åˆ¶çš„å¯èƒ½æ€§çš„ä¸€ä¸ªå¸¸è§æœºåˆ¶ã€‚è¿˜æœ‰éå‡¡çš„å¤æ‚åº¦ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">namespace</span> std&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">    <span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(T&amp; a, T&amp; b)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-function">T <span class="hljs-title">temp</span><span class="hljs-params">(a)</span></span>;<br>        a = b;<br>        b = temp;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ä¸»è¦ç±»å‹Tæ”¯æŒcopyingï¼Œç¼ºçœçš„swapå®ç°ä»£ç ä¼šå¸®ä½ ç½®æ¢ç±»å‹Tçš„å¯¹è±¡</li><li>å£°æ˜ä¸€ä¸ªnon-memberå‡½æ•°è°ƒç”¨memberå‡½æ•°ï¼Œ</li><li>æœ‰äº›ç±»å‹ï¼Œswapçš„ç¼ºçœè¡Œä¸ºä¼šé™ä½é€Ÿåº¦ï¼Œå¦‚ä»¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå†…å«çœŸæ­£æ•°æ®çš„ç±»å‹ï¼Œè¿™ç§ç±»å‹çš„å¸¸è§è¡¨ç°å½¢å¼æ˜¯æ‰€è°“çš„â€œpimplæ‰‹æ³•â€ã€‚</li><li>åªè¦ç½®æ¢å…¶PimplæŒ‡é’ˆï¼Œå°†std::swapé’ˆå¯¹Widgetç‰¹åŒ–</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">namespace</span> std&#123;<br>    <span class="hljs-keyword">template</span>&lt;&gt;<br>    <span class="hljs-type">void</span> <span class="hljs-built_in">swap</span>&lt;Widget&gt;(Widget&amp; a, Widget&amp; b)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(a.pImpl, b.pImpl);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>template&lt;&gt;è¡¨ç¤ºå®ƒæ˜¯std::swapçš„ä¸€ä¸ªå…¨ç‰¹åŒ–ç‰ˆæœ¬ï¼Œå‡½æ•°åç§°ä¹‹åçš„<Widget>è¡¨ç¤ºè¿™ä¸€ç‰¹åŒ–ç‰ˆæœ¬ç³»é’ˆå¯¹â€œTæ˜¯Widgetâ€è€Œè®¾è®¡çš„ã€‚ä¸€èˆ¬æ€§çš„swaptemplateæ–½è¡ŒäºWidgetsèº«ä¸Šä¾¿ä¼šå¯ç”¨è¿™ä¸ªç‰ˆæœ¬ã€‚é€šå¸¸ä¸èƒ½å¤Ÿæ”¹å˜stdå‘½åç©ºé—´å†…çš„ä»»ä½•ä¸œè¥¿ï¼Œä½†å¯ä»¥ä¸ºæ ‡å‡†templatesåˆ¶é€ ç‰¹åŒ–ç‰ˆæœ¬ï¼Œä½¿å®ƒä¸“å±äºæˆ‘ä»¬è‡ªå·±çš„classes</Widget></li><li>ä»¤Widgetå£°æ˜ä¸€ä¸ªåä¸ºswapçš„publicæˆå‘˜å‡½æ•°åšçœŸæ­£çš„ç½®æ¢å·¥ä½œï¼Œç„¶åå°†std::swapç‰¹åŒ–</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Widget</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(Widget&amp; other)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">using</span> std::swap;<br>        <span class="hljs-built_in">swap</span>(pImpl, other.pImpl);<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">namespace</span> std&#123;<br>    <span class="hljs-keyword">template</span>&lt;&gt;<br>    <span class="hljs-type">void</span> <span class="hljs-built_in">swap</span>&lt;Widget&gt;(Widget&amp; a, Widget&amp; b)<br>    &#123;<br>        a.<span class="hljs-built_in">swap</span>(b);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>è¿™ç§åšæ³•ä¸åªèƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Œè¿˜ä¸STLå®¹å™¨æœ‰ä¸€è‡´æ€§ï¼Œå› ä¸ºæ‰€æœ‰STLå®¹å™¨éƒ½æ˜¯æœ‰æä¾›publicswapæˆå‘˜å‡½æ•°å’Œstd::swapç‰¹åŒ–ç‰ˆæœ¬ï¼ˆç”¨ä»¥è°ƒç”¨å‰è€…ï¼‰</li><li>C++åªå…è®¸å¯¹class templateåç‰¹åŒ–(partially specialize)ï¼Œåœ¨functiontemplateåç‰¹åŒ–è¡Œä¸é€š</li><li>å½“æ‰“ç®—åç‰¹åŒ–ä¸€ä¸ªfunctiontemplateæ—¶ï¼Œæƒ¯å¸¸åšæ³•æ˜¯ç®€å•ä¸ºå®ƒæ·»åŠ ä¸€ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œå£°æ˜ä¸€ä¸ªnon-memberswapè®©å®ƒè°ƒç”¨member swapï¼Œä½†ä¸å†å°†é‚£ä¸ªnon-memberswapå£°æ˜ä¸ºstd::swapçš„ç‰¹åŒ–ç‰ˆæœ¬æˆ–è€…é‡è½½ç‰ˆæœ¬ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp">namesapce WidgetStuff&#123;<br>    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Widget</span>&#123;&#125;;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">    <span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(Widget&lt;T&gt;&amp; a, Widget&lt;T&gt;&amp; b)</span></span><br><span class="hljs-function">    </span>&#123;<br>        a.<span class="hljs-built_in">swap</span>(b);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="11" type="1"><li>C++çš„åç§°æŸ¥æ‰¾æ³•åˆ™ç¡®ä¿å°†æ‰¾åˆ°globalä½œç”¨åŸŸTæ‰€åœ¨ä¹‹å‘½åç©ºé—´å†…çš„ä»»ä½•Tä¸“å±çš„swapã€‚å¦‚æœTæ˜¯Widgetå¹¶ä½äºå‘½åç©ºé—´WidgetStuffå†…ï¼Œç¼–è¯‘å™¨ä¼šä½¿ç”¨â€œå®å‚å–å†³ä¹‹æŸ¥æ‰¾è§„åˆ™â€æ‰¾å‡ºWidgetStuffå†…çš„swapã€‚å¦‚æœæ²¡æœ‰Tä¸“å±ä¹‹swapå­˜åœ¨ï¼Œç¼–è¯‘å™¨å°±ä½¿ç”¨stdå†…çš„swapï¼Œè¿™å¾—æ„Ÿè°¢usingè¡¨è¾¾å¼è®©std::swapåœ¨å‡½æ•°å†…æ›å…‰ã€‚å³ä¾¿å¦‚æ­¤ç¼–è¯‘å™¨è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢std::swapçš„Tä¸“å±ç‰¹åŒ–ç‰ˆï¼Œè€Œéä¸€èˆ¬åŒ–çš„é‚£ä¸ªtemplateï¼Œå¦‚æœå·²é’ˆå¯¹Tå°†std::swapç‰¹åŒ–ï¼Œç‰¹åŒ–ç‰ˆä¼šè¢«ç¼–è¯‘å™¨æŒ‘ä¸­ã€‚</li><li>é¦–å…ˆï¼Œå¦‚æœswapçš„ç¼ºçœå®ç°ç å¯¹ä½ çš„classæˆ–classtemplateæä¾›å¯æ¥å—çš„æ•ˆç‡ï¼Œä½ ä¸éœ€è¦é¢å¤–åšä»»ä½•äº‹ã€‚ä»»ä½•å°è¯•ç½®æ¢é‚£ç§å¯¹è±¡çš„äººéƒ½ä¼šå–å¾—ç¼ºçœç‰ˆæœ¬ï¼Œè€Œé‚£å°†æœ‰è‰¯å¥½çš„è¿ä½œã€‚</li><li>å…¶æ¬¡ï¼Œå¦‚æœswapç¼ºçœå®ç°ç‰ˆçš„æ•ˆç‡ä¸è¶³ï¼ˆé‚£å‡ ä¹æ€»æ˜¯æ„å‘³ä½ çš„classæˆ–templateä½¿ç”¨äº†æŸç§pimplæ‰‹æ³•ï¼‰ï¼Œè¯•ç€åšä»¥ä¸‹äº‹æƒ…ï¼š<ol type="1"><li>æä¾›ä¸€ä¸ªpublicswapæˆå‘˜å‡½æ•°ï¼Œè®©ä»–é«˜æ•ˆçš„ç½®æ¢ä½ çš„ç±»å‹çš„ä¸¤ä¸ªå¯¹è±¡å€¼ï¼Œè¿™ä¸ªå‡½æ•°ç»ä¸è¯¥æŠ›å‡ºå¼‚å¸¸</li><li>åœ¨ä½ çš„classæˆ–templateæ‰€åœ¨çš„å‘½åç©ºé—´å†…æä¾›ä¸€ä¸ªnon-memberswapï¼Œå¹¶ä»¤å®ƒè°ƒç”¨ä¸Šè¿°swapæˆå‘˜å‡½æ•°</li><li>å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªclassï¼ˆè€Œéclasstemplateï¼‰ï¼Œä¸ºä½ çš„classç‰¹åŒ–std::swapã€‚å¹¶ä»¤å®ƒè°ƒç”¨ä½ çš„swapæˆå‘˜å‡½æ•°</li></ol></li><li>æœ€åï¼Œå¦‚æœä½ è°ƒç”¨swapï¼Œè¯·ç¡®å®šåŒ…å«ä¸€ä¸ªusingå£°æ˜å¼ï¼Œä»¥ä¾¿è®©std::swapåœ¨ä½ çš„å‡½æ•°å†…æ›å…‰å¯è§ï¼Œç„¶åä¸åŠ ä»»ä½•namespaceä¿®é¥°ç¬¦ï¼Œèµ¤è£¸è£¸åœ°è°ƒç”¨swap</li><li>å½“std::swapå¯¹ä½ çš„ç±»å‹æ•ˆç‡ä¸é«˜æ—¶ï¼Œæä¾›ä¸€ä¸ªswapæˆå‘˜å‡½æ•°ï¼Œå¹¶ç¡®å®šè¿™ä¸ªå‡½æ•°ä¸æŠ›å‡ºå¼‚å¸¸ã€‚</li><li>å¦‚æœä½ æä¾›ä¸€ä¸ªmember swapï¼Œä¹Ÿè¯¥æä¾›ä¸€ä¸ªnon-memberswapç”¨æ¥è°ƒç”¨å‰è€…ã€‚å¯¹äºclassesï¼Œï¼ˆè€Œétemplatesï¼‰ï¼Œä¹Ÿè¯·ç‰¹åŒ–std::swap</li><li>è°ƒç”¨swapæ—¶åº”é’ˆå¯¹std::swapä½¿ç”¨usingå£°æ˜å¼ï¼Œç„¶åè°ƒç”¨swapå¹¶ä¸”ä¸å¸¦ä»»ä½•â€œå‘½åç©ºé—´èµ„æ ¼ä¿®é¥°â€</li><li>ä¸ºâ€œç”¨æˆ·å®šä¹‰ç±»å‹â€è¿›è¡Œstdtemplateså…¨ç‰¹åŒ–æ˜¯å¥½çš„ï¼Œä½†åƒä¸‡ä¸è¦å°è¯•åœ¨stdå†…åŠ å…¥æŸäº›å¯¹stdè€Œè¨€å…¨æ–°çš„ä¸œè¥¿</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. èµ„æºç®¡ç†</title>
    <link href="/2024/11/27/effective-cpp/3-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/"/>
    <url>/2024/11/27/effective-cpp/3-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»¥å¯¹è±¡ç®¡ç†èµ„æº">13. ä»¥å¯¹è±¡ç®¡ç†èµ„æº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Investment *pInv = <span class="hljs-built_in">createInvestment</span>();<br>Â·Â·Â·<br><span class="hljs-keyword">delete</span> pInv;<br>&#125;<br></code></pre></td></tr></table></figure><ol type="1"><li>å¯èƒ½æ— æ³•æ‰§è¡Œdelete<ol type="1"><li>åœ¨Â·Â·Â·ä¸­è¿‡æ—©return</li><li>è‹¥deleteä½äºæŸå¾ªç¯ä¸­ï¼Œç”±äºcontinueæˆ–è€…gotoè¯­å¥è¿‡æ—©é€€å‡º</li><li>Â·Â·Â·å†…æŠ›å‡ºå¼‚å¸¸</li><li>æ³„éœ²çš„ä¸åªæ˜¯å†…å«æŠ•èµ„å¯¹è±¡çš„é‚£å—å†…å­˜ï¼Œè¿˜åŒ…æ‹¬é‚£äº›æŠ•èµ„å¯¹è±¡æ‰€ä¿å­˜çš„ä»»ä½•èµ„æº</li></ol></li><li>ä¸ºç¡®ä¿createInvestmentè¿”å›çš„èµ„æºæ€»æ˜¯è¢«é‡Šæ”¾ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›èµ„æºæ”¾åœ¨å¯¹è±¡å†…ï¼Œå½“æ§åˆ¶æµç¦»å¼€fï¼Œè¯¥å¯¹è±¡çš„ææ„å‡½æ•°ä¼šè‡ªåŠ¨é‡Šæ”¾é‚£äº›èµ„æº</li><li>å®é™…ä¸Šè¿™æ­£æ˜¯éšèº«äºæœ¬æ¡æ¬¾èƒŒåçš„åŠè¾¹æƒ³æ³•ï¼ŒæŠŠèµ„æºæ”¾è¿›å¯¹è±¡å†…ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä¾èµ–c++çš„ææ„å‡½æ•°è‡ªåŠ¨è°ƒç”¨æœºåˆ¶ç¡®ä¿èµ„æºè¢«é‡Šæ”¾</li><li>è®¸å¤šèµ„æºè¢«åŠ¨æ€åˆ†é…äºheapå†…è€Œåè¢«ç”¨äºå•ä¸€åŒºå—æˆ–å‡½æ•°å†…ï¼Œä»–ä»¬åº”è¯¥åœ¨æ§åˆ¶æµç¦»å¼€é‚£ä¸ªåŒºå—æˆ–è€…å‡½æ•°æ—¶è¢«é‡Šæ”¾ï¼Œæ ‡å‡†ç¨‹åºåº“æä¾›çš„auto_ptræ­£æ˜¯é’ˆå¯¹è¿™ç§å½¢å¼è€Œè®¾è®¡çš„ç‰¹åˆ¶äº§å“</li><li>auto_ptræ˜¯ä¸ªâ€ç±»æŒ‡é’ˆå¯¹è±¡â€œï¼Œä¹Ÿå°±æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Œå…¶ææ„å‡½æ•°è‡ªåŠ¨å¯¹é½æ‰€æŒ‡å¯¹è±¡è°ƒç”¨delete</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">std::auto_ptr&lt;Investment&gt; <span class="hljs-title">pInv</span><span class="hljs-params">(createInvestment())</span></span>;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>ä¸¤ä¸ªæƒ³æ³•<ol type="1"><li>è·å¾—èµ„æºåç«‹åˆ»æ”¾è¿›ç®¡ç†å¯¹è±¡å†…</li><li>ç®¡ç†å¯¹è±¡è¿ç”¨ææ„å‡½æ•°ç¡®ä¿èµ„æºè¢«é‡Šæ”¾</li></ol></li><li>ç”±äºauto_ptrè¢«é”€æ¯æ—¶ä¼šè‡ªåŠ¨åˆ é™¤å®ƒæ‰€æŒ‡ä¹‹ç‰©ï¼Œæ‰€ä»¥ä¸€å®šè¦æ³¨æ„åˆ«è®©ç»™å¤šä¸ªauto_ptråŒæ—¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>auto_ptrsæœ‰ä¸€ä¸ªä¸å¯»å¸¸çš„æ€§è´¨ï¼Œè‹¥é€šè¿‡copyæ„é€ å‡½æ•°æˆ–copyassignmentæ“ä½œç¬¦å¤åˆ¶ä»–ä»¬ï¼Œä»–ä»¬ä¼šå˜æˆnullï¼Œè€Œèµ‹å€¼æ‰€å¾—çš„æŒ‡é’ˆå°†å–å¾—èµ„æºçš„å”¯ä¸€æ‹¥æœ‰æƒ</li><li>æ”¶auto_ptrsç®¡ç†çš„èµ„æºå¿…é¡»ç»å¯¹æ²¡æœ‰ä¸€ä¸ªä»¥ä¸Šçš„auto_ptråŒæ—¶æŒ‡å‘å®ƒï¼Œæ„å‘³ç€auto_ptrså¹¶éç®¡ç†åŠ¨æ€åˆ†é…èµ„æºçš„ç¥å…µåˆ©å™¨ã€‚<ol type="1"><li>ä¾‹å¦‚ï¼šSTLå®¹å™¨è¦æ±‚å…¶å…ƒç´ å‘æŒ¥æ­£å¸¸çš„å¤åˆ¶è¡Œä¸ºï¼Œå› æ­¤è¿™äº›å®¹å™¨å®¹ä¸å¾—auto_ptr</li></ol></li><li>auto_ptrçš„æ›¿ä»£æ–¹æ¡ˆæ˜¯â€å¼•ç”¨è®¡æ•°å‹æ™ºæ…§æŒ‡é’ˆï¼ˆreference-counting smartpointer RCSP)<ol type="1"><li>æŒç»­è¿½è¸ªå…±æœ‰å¤šå°‘å¯¹è±¡æŒ‡å‘æŸç¬”èµ„æºï¼Œå¹¶åœ¨æ— äººæŒ‡å‘å®ƒæ—¶è‡ªåŠ¨åˆ é™¤è¯¥èµ„æº</li><li>ç±»ä¼¼äºåƒåœ¾å›æ”¶ï¼Œä½†æ— æ³•æ‰“ç ´ç¯çŠ¶å¼•ç”¨ï¼Œä¾‹å¦‚ä¸¤ä¸ªå…¶å®å·²ç»æ²¡è¢«ä½¿ç”¨çš„å¯¹è±¡å½¼æ­¤äº’æŒ‡ï¼Œå› è€Œå¥½åƒè¿˜å¤„åœ¨â€œè¢«ä½¿ç”¨"çŠ¶æ€</li></ol></li><li>tr1::shared_ptrå°±æ˜¯ä¸ªRCSP</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>std::<span class="hljs-function">tr1::shared_ptr&lt;Investment&gt; <span class="hljs-title">pInv</span><span class="hljs-params">(createInvestment())</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="12" type="1"><li>å¤åˆ¶è¡Œä¸ºæ­£å¸¸</li></ol><h2 id="åœ¨èµ„æºç®¡ç†ç±»ä¸­å°å¿ƒcopyingè¡Œä¸º">14.åœ¨èµ„æºç®¡ç†ç±»ä¸­å°å¿ƒcopyingè¡Œä¸º</h2><ol type="1"><li>èµ„æºå–å¾—æ—¶æœºä¾¿æ˜¯åˆå§‹åŒ–æ—¶æœº</li><li>å¹¶éæ‰€æœ‰èµ„æºéƒ½æ˜¯heap_basedï¼Œauto_ptrå’Œtr1::shared_ptrè¿™æ ·çš„æ™ºèƒ½æŒ‡é’ˆå¾€å¾€ä¸é€‚åˆä½œä¸ºèµ„æºæŒç®¡è€…ï¼Œéœ€è¦å»ºç«‹è‡ªå·±çš„èµ„æºç®¡ç†ç±»</li><li>ä¾‹å¦‚ï¼Œä½¿ç”¨Capiå‡½æ•°å¤„ç†Mutexçš„äº’æ–¥é”ç°è±¡ï¼Œå…±æœ‰lockå’Œunlockä¸¤å‡½æ•°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">lock</span><span class="hljs-params">(Mutex* pm)</span></span>;<span class="hljs-comment">//é”å®špmæ‰€æŒ‡çš„äº’æ–¥å™¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">(Mutex* pm)</span></span>;<span class="hljs-comment">//å°†äº’æ–¥å™¨è§£é™¤é”å®š</span><br></code></pre></td></tr></table></figure><pre><code class="hljs">1. ä¸ºç¡®ä¿ç»ä¸ä¼šå¿˜è®°å°†ä¸€ä¸ªè¢«é”ä½çš„Mutexè§£é”ï¼Œå¸Œæœ›å»ºç«‹ä¸€ä¸ªclassç”¨æ¥ç®¡ç†æœºé”2. è¿™æ ·çš„classçš„åŸºæœ¬ç»“æ„ç”±RAIIå®ˆåˆ™æ”¯é…ï¼Œä¹Ÿå°±æ˜¯â€èµ„æºåœ¨æ„é€ æœŸé—´è·å¾—ï¼Œåœ¨ææ„æœŸé—´é‡Šæ”¾â€œ</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Lock</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">Lock</span><span class="hljs-params">(Mutex* pm)</span>:mutexPtr(pm)</span><br><span class="hljs-function">    &#123;</span><span class="hljs-built_in">lock</span>(mutexPtr);&#125;<span class="hljs-comment">//è·å¾—èµ„æº</span><br>    ~<span class="hljs-built_in">Lock</span>() &#123;<span class="hljs-built_in">unlock</span>(mutexPtr);&#125;<br><span class="hljs-keyword">private</span>:<br>    mutex *mutexPtr;<br>&#125;;<br></code></pre></td></tr></table></figure><p><img src="/2024/11/27/effective-cpp/3-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/1706957067790-f5ba06f3-e9a3-4361-abcc-20e810519b61.png"></p><pre><code class="hljs">3. å½“ä¸€ä¸ªRAIIå¯¹è±¡è¢«å¤åˆ¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹?</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">Lock <span class="hljs-title">ml1</span><span class="hljs-params">(&amp;m)</span></span>;<span class="hljs-comment">//é”å®šm</span><br><span class="hljs-function">Lock <span class="hljs-title">ml2</span><span class="hljs-params">(ml1)</span></span>;<span class="hljs-comment">//å°†ml1å¤åˆ¶åˆ°ml2èº«ä¸Šï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæ˜¯</span><br></code></pre></td></tr></table></figure><pre><code class="hljs">    1. ç¦æ­¢å¤åˆ¶ã€‚è®¸å¤šæ—¶å€™å…è®¸RAIIå¯¹è±¡è¢«å¤åˆ¶å¹¶ä¸åˆç†ï¼Œå› ä¸ºå¾ˆå°‘èƒ½å¤Ÿåˆç†æ‹¥æœ‰â€åŒæ­¥åŒ–åŸºç¡€å™¨ç‰©â€œçš„å‰¯æœ¬ã€‚å¦‚æœå¤åˆ¶åŠ¨ä½œå¯¹RAII classå¹¶ä¸åˆç†ï¼Œä¾¿åº”è¯¥ç¦æ­¢ã€‚æ¡æ¬¾6ï¼šå¦‚æœcoipyingæ“ä½œå£°æ˜ä¸ºprivate</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Lock</span>: <span class="hljs-keyword">private</span> Uncopyable&#123;<br><span class="hljs-keyword">public</span>:<br>&#125;;<br></code></pre></td></tr></table></figure><pre><code class="hljs">    2. å¯¹åº•å±‚èµ„æºåŸºç¡€â€å¼•ç”¨è®¡æ•°æ³•â€œã€‚æœ‰æ—¶éœ€è¦ä¿æœ‰èµ„æºï¼Œç›´åˆ°å®ƒçš„æœ€åä¸€ä¸ªä½¿ç”¨è€…ï¼ˆæŸå¯¹è±¡ï¼‰è¢«é”€æ¯ã€‚è¿™ç§æƒ…å†µä¸‹å¤åˆ¶RAIIå¯¹è±¡æ—¶ï¼Œåº”è¯¥å°†è¯¥èµ„æºçš„â€è¢«å¼•ç”¨æ•°â€é€’å¢ã€‚tr1::shared_ptræ˜¯å¦‚æ­¤ã€‚        1. é€šå¸¸åªè¦å†…å«ä¸€ä¸ªtr1::shared_ptræˆå‘˜å˜é‡ï¼ŒRAII classesä¾¿å¯å‡ºç°reference-counting copyingè¡Œä¸ºã€‚        2. å¦‚æœLockæ‰“ç®—ä½¿ç”¨reference countingï¼Œå¯ä»¥æ”¹å˜mutexPtrç±»å‹ï¼Œå°†Mutex* æ”¹ä¸ºtr1::shared_ptr&lt;Mutex&gt;ã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯tr1::shared_ptrçš„ç¼ºçœè¡Œä¸ºæ˜¯â€œå½“å¼•ç”¨æ¬¡æ•°ä¸º0æ—¶åˆ é™¤å…¶æ‰€æŒ‡ç‰©â€œï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æ‰€è¦çš„è¡Œä¸ºã€‚å½“æˆ‘ä»¬ç”¨ä¸Šä¸€ä¸ªMutexï¼Œæˆ‘ä»¬æƒ³è¦åšçš„é‡Šæ”¾åŠ¨ä½œæ˜¯è§£é™¤é”å®šè€Œéåˆ é™¤        3. å¹¸è¿çš„æ˜¯tr1::shared_ptrå…è®¸æŒ‡å®šæ‰€è°“çš„â€åˆ é™¤å™¨â€ï¼Œé‚£æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…å‡½æ•°å¯¹è±¡ï¼Œå½“å¼•ç”¨æ¬¡æ•°ä¸º0æ—¶ä¾¿è¢«è°ƒç”¨ï¼ˆæ­¤æŠ€èƒ½å¹¶ä¸å­˜åœ¨äºauto_ptrâ€”â€”å®ƒæ€»æ˜¯å°†å…¶æŒ‡é’ˆåˆ é™¤ï¼‰ã€‚åˆ é™¤å™¨å¯¹tr1::shared_ptræ„é€ å‡½æ•°è€Œè¨€æ—¶å¯æœ‰å¯æ— çš„ç¬¬äºŒå‚æ•°ï¼Œ![](https://cdn.nlark.com/yuque/0/2024/png/35229143/1706957885163-8a0df2e6-aa4f-4198-b2a1-3535512eecc7.png)        4. æœ¬ä¾‹Lock classä¸å£°æ˜ææ„å‡½æ•°ï¼Œclassææ„å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨å…¶non-staticæˆå‘˜å˜é‡çš„ææ„å‡½æ•°ã€‚è€ŒmutexPtrçš„ææ„å‡½æ•°ä¼šåœ¨äº’æ–¥å™¨çš„å¼•ç”¨æ¬¡æ•°ä¸º0æ—¶è‡ªåŠ¨è°ƒç”¨tr1::shared_ptrçš„åˆ é™¤å™¨    3. å¤åˆ¶åº•éƒ¨èµ„æº        1. å¤åˆ¶èµ„æºç®¡ç†å¯¹è±¡æ—¶ï¼Œè¿›è¡Œçš„æ—¶æ·±åº¦æ‹·è´        2. æŸäº›æ ‡å‡†å­—ç¬¦ä¸²æ˜¯ç”±æŒ‡å‘heapå†…å­˜ä¹‹æŒ‡é’ˆæ„æˆã€‚é‚£ç§å­—ç¬¦ä¸²å¯¹è±¡å†…å«ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€å—heapå†…å­˜ã€‚å½“è¿™æ ·ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡è¢«å¤åˆ¶ï¼Œä¸è®ºæŒ‡é’ˆæˆ–å…¶æ‰€æŒ‡å†…å­˜éƒ½ä¼šè¢«åˆ¶ä½œå‡ºä¸€ä¸ªå¤ä»¶ã€‚è¿™æ ·çš„å­—ç¬¦ä¸²å±•ç°æ·±åº¦å¤åˆ¶è¡Œä¸º    4. è½¬ç§»åº•éƒ¨èµ„æºçš„æ‹¥æœ‰æƒ        1. æŸäº›ç½•è§åœºåˆä¸‹ä½ å¯èƒ½å¸Œæœ›ç¡®ä¿æ°¸è¿œåªæœ‰ä¸€ä¸ªRAIIå¯¹è±¡æŒ‡å‘ä¸€ä¸ªæœªåŠ å·¥èµ„æºï¼Œå³ä½¿RAIIå¯¹è±¡è¢«å¤åˆ¶ä¾ç„¶å¦‚æ­¤ã€‚æ­¤æ—¶èµ„æºçš„æ‹¥æœ‰æƒä¼šä»è¢«å¤åˆ¶ç‰©è½¬ç§»åˆ°ç›®æ ‡ç‰©ã€‚è¿™æ˜¯auto_ptrå¥‰è¡Œçš„å¤åˆ¶æ„ä¹‰        2. copyingå‡½æ•°æœ‰å¯èƒ½è¢«ç¼–è¯‘å™¨è‡ªåŠ¨åˆ›å»ºå‡ºæ¥ï¼Œå› æ­¤é™¤éç¼–è¯‘å™¨æ‰€ç”Ÿç‰ˆæœ¬åšäº†ä½ æƒ³åšçš„äº‹ï¼Œå¦åˆ™ä½ è¦è‡ªå·±iå®‰æ­‡ä»–ä»¬</code></pre><ol type="1"><li>tipsï¼š<ol type="1"><li>å¤åˆ¶RAIIå¯¹è±¡æŠŠå¿…é¡»ä¸€å¹¶å¤åˆ¶å®ƒæ‰€ç®¡ç†çš„èµ„æºï¼Œæ‰€ä»¥èµ„æºçš„copyingè¡Œä¸ºå†³å®šRAIIå¯¹è±¡çš„copyingè¡Œä¸º</li><li>æ™®éè€Œå¸¸è§çš„RAII classcopyingè¡Œä¸ºæ˜¯ï¼ŒæŠ‘åˆ¶copyingã€æ–½è¡Œå¼•ç”¨è®¡æ•°æ³•ã€‚ä¸è¿‡å…¶ä»–è¡Œä¸ºä¹Ÿéƒ½å¯èƒ½è¢«å®ç°</li></ol></li></ol><h2 id="åœ¨èµ„æºç®¡ç†ç±»ä¸­æä¾›å¯¹åŸå§‹èµ„æºçš„è®¿é—®">15.åœ¨èµ„æºç®¡ç†ç±»ä¸­æä¾›å¯¹åŸå§‹èµ„æºçš„è®¿é—®</h2><ol type="1"><li>èµ„æºç®¡ç†ç±»æ˜¯å¯¹æŠ—èµ„æºæ³„éœ²çš„å ¡å’ï¼Œåœ¨ä¸€ä¸ªå®Œç¾ä¸–ç•Œä¸­ä¾èµ–è¿™æ ·çš„classeså¤„ç†å’Œèµ„æºä¹‹é—´çš„æ‰€æœ‰äº’åŠ¨ï¼Œè€Œä¸æ˜¯ç›´æ¥å¤„ç†åŸå§‹èµ„æº</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::tr1::shared_ptr&lt;Investment&gt;<span class="hljs-built_in">pInv</span>(<span class="hljs-built_in">createInvestment</span>());<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dayHeld</span><span class="hljs-params">(<span class="hljs-type">const</span> Investment* pi)</span></span>;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>éœ€è¦ä¸€ä¸ªå‡½æ•°å¯å°†RAIIclasså¯¹è±¡è½¬æ¢ä¸ºå…¶æ‰€å†…å«ä¹‹åŸå§‹èµ„æºã€‚æœ‰ä¸¤ä¸ªåšæ³•å¯ä»¥è¾¾æˆç›®æ ‡ï¼šæ˜¾ç¤ºè½¬æ¢å’Œéšå¼è½¬æ¢</li><li>æ˜¾ç¤ºè½¬æ¢tr1::shared_ptrå’Œauto_ptréƒ½æä¾›ä¸€ä¸ªgetæˆå‘˜å‡½æ•°ï¼Œç”¨æ¥æ‰§è¡Œæ˜¾ç¤ºè½¬æ¢ï¼Œä¹Ÿå°±æ˜¯å®ƒè¿”å›æ™ºèƒ½æŒ‡é’ˆå†…éƒ¨çš„åŸå§‹æŒ‡é’ˆï¼ˆçš„å¤ä»¶ï¼‰</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> days = <span class="hljs-built_in">daysHeld</span>(pInv.<span class="hljs-built_in">get</span>());    <span class="hljs-comment">//å°†pInvå†…çš„åŸå§‹æŒ‡é’ˆä¼ ç»™daysHeld</span><br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>å°±åƒå‡ ä¹æ‰€æœ‰æ™ºèƒ½æŒ‡é’ˆä¸€æ ·ï¼Œtr1::shared_ptrå’Œauto_pträ¹Ÿé‡è½½äº†æŒ‡é’ˆå–å€¼å’Œæ“ä½œç¬¦ï¼Œå®ƒä»¬å…è®¸éšå¼è½¬æ¢è‡³åº•éƒ¨åŸå§‹æŒ‡é’ˆ</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Investment</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isTaxFree</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;<br>&#125;<br><span class="hljs-function">Investment* <span class="hljs-title">createInvestment</span><span class="hljs-params">()</span></span>;<br><br>std::<span class="hljs-function">tr1::shared_ptr&lt;Investment&gt; <span class="hljs-title">pil</span><span class="hljs-params">(createInvestment())</span></span>;<span class="hljs-comment">//tr1::shared_ptrç®¡ç†ä¸€ç¬”èµ„æº</span><br><br><span class="hljs-type">bool</span> taxable1 = !(pil-&gt;<span class="hljs-built_in">isTaxFree</span>());<span class="hljs-comment">//ç»ç”±operator-&gt;è®¿é—®èµ„æº</span><br><span class="hljs-function">std::auto_ptr&lt;Investment&gt; <span class="hljs-title">pi2</span><span class="hljs-params">(createInvestment())</span></span>;<span class="hljs-comment">//ä»¤auto_ptrç®¡ç†ä¸€ç¬”èµ„æº</span><br><br><span class="hljs-type">bool</span> taxable2 = !((*pi2).<span class="hljs-built_in">isTaxFree</span>());<span class="hljs-comment">//ç»ç”±operator*è®¿é—®èµ„æº</span><br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>å–å¾—RAIIå¯¹è±¡å†…çš„åŸå§‹èµ„æºï¼Œæä¾›ä¸€ä¸ªéšå¼è½¬æ¢å‡½æ•°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Front</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">FontHandle <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<span class="hljs-keyword">return</span> f;&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™ä½¿å¾—å®¢æˆ·æ¯æ¬¡ä½¿ç”¨APIå¿…é¡»è°ƒç”¨get</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">changeFontSize</span><span class="hljs-params">(FontHandle f, <span class="hljs-type">int</span> newSize)</span></span>;<br><span class="hljs-function">Font <span class="hljs-title">f</span><span class="hljs-params">(getFont())</span></span>;<br><span class="hljs-type">int</span> newFontSize;<br><span class="hljs-built_in">changeFontSize</span>(f.<span class="hljs-built_in">get</span>(),newFontSize);<span class="hljs-comment">//æ˜ç™½åœ°å°†Fontè½¬æ¢ä¸ºFontHandle</span><br></code></pre></td></tr></table></figure><p>æä¾›éšå¼å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Font</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">FontHandle</span><span class="hljs-params">()</span> <span class="hljs-type">const</span><span class="hljs-comment">//éšå¼è½¬æ¢å‡½æ•°</span></span><br><span class="hljs-function"></span>&#123;<span class="hljs-keyword">return</span> f;&#125;<br>&#125;;<br><br><span class="hljs-function">Font <span class="hljs-title">f</span><span class="hljs-params">(getFont())</span></span>;<br><span class="hljs-type">int</span> newFontSize;<br><span class="hljs-built_in">changeFontSize</span>(f,newFontSize);<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>ä½†æ˜¯è¿™ä¸ªéšå¼è½¬æ¢ä¼šå¢åŠ é”™è¯¯å‘ç”Ÿæœºä¼šï¼Œä¾‹å¦‚å®¢æˆ·å¯èƒ½ä¼šåœ¨éœ€è¦Fontæ—¶æ„å¤–åˆ›å»ºä¸€ä¸ªFontHandle</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">Font <span class="hljs-title">f1</span><span class="hljs-params">(getFont())</span></span>;<br>FontHandle f2 = f1; <span class="hljs-comment">// åŸæ„è¦æ‹·è´ä¸€ä¸ªFontå¯¹è±¡ï¼Œå´åè€Œå°†f1éšå¼è½¬æ¢ä¸ºå…¶åº•éƒ¨çš„FontHandleæ‰å¤åˆ¶å®ƒ</span><br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>ä»¥ä¸Šç¨‹åºæœ‰ä¸ªFontHandleç”±Fontå¯¹è±¡f1ç®¡ç†ï¼Œä½†é‚£ä¸ªFontHandleä¹Ÿå¯é€šè¿‡ç›´æ¥ä½¿ç”¨f2å–å¾—ã€‚é‚£å‡ ä¹ä¸ä¼šæœ‰å¥½ä¸‹åœºï¼Œä¾‹å¦‚å½“f1è¢«é”€æ¯ï¼Œå­—ä½“è¢«é‡Šæ”¾ï¼Œè€Œf2å› æ­¤æˆä¸º"è™šåŠçš„"dangleã€‚</li><li>æ˜¯å¦è¯¥æä¾›ä¸€ä¸ªæ˜¾ç¤ºè½¬æ¢å‡½æ•°ï¼ˆä¾‹å¦‚getå‡½æ•°ï¼‰å°†RAIIclassè½¬æ¢ä¸ºå…¶åº•éƒ¨èµ„æºï¼Œæˆ–æ˜¯åº”è¯¥æä¾›éšå¼è½¬æ¢ï¼Œç­”æ¡ˆä¸»è¦å–å†³äºRAIIclassè¢«è®¾è®¡æ‰§è¡Œçš„ç‰¹å®šå·¥ä»¶ï¼Œä»¥åŠå®ƒè¢«ä½¿ç”¨çš„æƒ…å†µã€‚æœ€ä½³è®¾è®¡å¯èƒ½æ˜¯åšæŒæ¡æ¬¾18çš„å¿ å‘Šâ€è®©æ¥å£å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ï¼Œä¸æ˜“è¢«è¯¯ç”¨â€œã€‚</li><li>é€šå¸¸æ˜¾ç¤ºè½¬æ¢å‡½æ•°å¦‚getæ˜¯æ¯”è¾ƒå—æ¬¢è¿çš„è·¯å­ï¼Œå› ä¸ºå®ƒå°†éæ•…æ„ä¹‹ç±»å‹è½¬æ¢çš„å¯èƒ½æ€§æœ€å°åŒ–äº†ï¼Œç„¶è€Œæœ‰æ—¶ï¼Œéšå¼ç±»å‹è½¬æ¢æ‰€å¸¦æ¥çš„è‡ªç„¶ç”¨æ³•ä¹Ÿä¼šå¼•å‘å¤©ç§¤å€¾æ–œ</li><li>RAIIclasså†…çš„é‚£ä¸ªè¿”å›åŸå§‹èµ„æºçš„å‡½æ•°ï¼Œä¸â€å°è£…â€œå‘ç”ŸçŸ›ç›¾ï¼Œä½†ä¸€èˆ¬è€Œè¨€ä¸æ˜¯ä»€ä¹ˆè®¾è®¡ç¾éš¾ã€‚RAIIclasså¹¶ä¸æ˜¯ä¸ºäº†å°è£…æŸç‰©å­˜åœ¨ï¼Œå®ƒä»¬çš„å­˜åœ¨æ˜¯ä¸ºäº†ç¡®ä¿ä¸€ä¸ªç‰¹æ®Šè¡Œä¸ºâ€”â€”èµ„æºé‡Šæ”¾â€”â€”ä¼šå‘ç”Ÿã€‚å¦‚æœä¸€å®šè¦ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¿™åŸºæœ¬åŠŸèƒ½ä¹‹ä¸Šå†åŠ ä¸€å±‚èµ„æºå°è£…ï¼Œä½†å¹¶éå¿…è¦ã€‚</li><li>ä¹Ÿå¯ä»¥å’Œèº«ä»½æ¾æ•£çš„åº•å±‚èµ„æºå°è£…ï¼Œè·å¾—çœŸæ­£çš„å°è£…å®ç°<ol type="1"><li>ä¾‹å¦‚tr1::shared_ptrå°†å®ƒæ‰€æœ‰è®¡æ•°æœºæ„å°è£…äº†èµ·æ¥ï¼Œä½†è¿˜æ˜¯è®©å¤–ç•Œå¾ˆå®¹æ˜“è®¿é—®å…¶æ‰€å†…å«çš„åŸå§‹æŒ‡é’ˆã€‚å°±åƒå¤šæ•°è®¾è®¡è‰¯å¥½çš„classesä¸€æ ·ï¼Œå®ƒéšè—äº†å®¢æˆ·ä¸éœ€è¦çœ‹çš„éƒ¨åˆ†ï¼Œä½†å¤‡å¦¥å®¢æˆ·éœ€è¦çš„æ‰€æœ‰ä¸œè¥¿</li></ol></li><li>APIså¾€å¾€è¦æ±‚è®¿é—®åŸå§‹èµ„æºï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªRAIIclassåº”è¯¥æä¾›ä¸€ä¸ªå–å¾—å…¶æ‰€ç®¡ç†ä¹‹èµ„æºçš„åŠæ³•</li><li>å¯¹åŸå§‹èµ„æºçš„è®¿é—®å¯èƒ½ç»ç”±æ˜¾ç¤ºè½¬æ¢æˆ–éšå¼è½¬æ¢ã€‚ä¸€èˆ¬è€Œè¨€æ˜¾ç¤ºè½¬æ¢æ¯”è¾ƒå®‰å…¨ï¼Œä½†éšå¼è½¬æ¢å¯¹å®¢æˆ·æ¯”è¾ƒæ–¹ä¾¿</li></ol><h2 id="æˆå¯¹ä½¿ç”¨newå’Œdeleteæ—¶é‡‡ç”¨ç›¸åŒå½¢å¼">16.æˆå¯¹ä½¿ç”¨newå’Œdeleteæ—¶é‡‡ç”¨ç›¸åŒå½¢å¼</h2><ol type="1"><li>å½“ä½¿ç”¨newæ—¶ï¼Œæœ‰ä¸¤ä»¶äº‹å‘ç”Ÿ<ol type="1"><li>å†…å­˜è¢«åˆ†é…å‡ºæ¥ï¼Œé€šè¿‡åä¸ºoperator newçš„å‡½æ•°ï¼Œ</li><li>é’ˆå¯¹æ­¤å†…å­˜ä¼šæœ‰ä¸€ä¸ªæˆ–æ›´å¤šææ„å‡½æ•°è¢«è°ƒç”¨</li></ol></li><li>å½“ä½¿ç”¨deleteæ—¶ï¼Œä¹Ÿæœ‰ä¸¤ä»¶äº‹å‘ç”Ÿ<ol type="1"><li>é’ˆå¯¹æ­¤å†…å­˜ä¼šæœ‰ä¸€ä¸ªæˆ–æ›´å¤šææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œç„¶åå†…å­˜æ‰è¢«é‡Šæ”¾</li></ol></li><li>å³å°†è¢«åˆ é™¤çš„æŒ‡é’ˆï¼Œæ‰€æŒ‡çš„æ˜¯å•ä¸€å¯¹è±¡è¿˜æ˜¯å¯¹è±¡æ•°ç»„<ol type="1"><li>å•ä¸€å¯¹è±¡çš„å†…å­˜å¸ƒå±€ä¸€èˆ¬è€Œè¨€ä¸åŒäºæ•°ç»„çš„å†…å­˜å¸ƒå±€</li><li>æ•°ç»„æ‰€ç”¨çš„å†…å­˜é€šå¸¸è¿˜åŒ…æ‹¬æ•°ç»„å¤§å°çš„è®°å½•ï¼Œä»¥ä¾¿deleteçŸ¥é“éœ€è¦è°ƒç”¨å¤šå°‘æ¬¡ææ„å‡½æ•°ï¼Œå•ä¸€å¯¹è±¡çš„å†…å­˜åˆ™æ²¡æœ‰è¿™ç¬”è®°å½•ã€‚</li><li><img src="/2024/11/27/effective-cpp/3-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86/1707128830903-6f461996-372d-44ce-9519-3f32f4c53b41.png"></li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">delete</span> stringPtr1; <span class="hljs-comment">//åˆ é™¤ä¸€ä¸ªå¯¹è±¡</span><br><span class="hljs-keyword">delete</span> [] stringPtr2; <span class="hljs-comment">//åˆ é™¤ä¸€ä¸ªç”±å¯¹è±¡ç»„æˆçš„æ•°ç»„</span><br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>è°ƒç”¨newæ—¶ä½¿ç”¨[],å¿…é¡»åœ¨è°ƒç”¨deleteæ—¶ä¹Ÿç”¨[]ï¼Œè°ƒç”¨newæ—¶æ²¡æœ‰ä½¿ç”¨[],ä¹Ÿä¸åº”è¯¥åœ¨å¯¹åº”deleteæ—¶ä½¿ç”¨[]</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> std::string AddressLines[<span class="hljs-number">4</span>];<br>std::string* pal = <span class="hljs-keyword">new</span> AddressLines;<br><span class="hljs-keyword">delete</span> [] pal;<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>å°½é‡ä¸è¦å¯¹æ•°ç»„åštypedefsåŠ¨ä½œï¼Œå¯å°†å…¶æ”¹ä¸ºvector<string></string></li></ol><h2 id="ä»¥ç‹¬ç«‹è¯­å¥å°†newedå¯¹è±¡ç½®å…¥æ™ºèƒ½æŒ‡é’ˆ">17.ä»¥ç‹¬ç«‹è¯­å¥å°†newedå¯¹è±¡ç½®å…¥æ™ºèƒ½æŒ‡é’ˆ</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">priority</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//æ­ç¤ºå¤„ç†ç¨‹åºçš„ä¼˜å…ˆæƒ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processWidget</span><span class="hljs-params">(std::str1::shared_ptr&lt;Widget&gt; pw, <span class="hljs-type">int</span> priority)</span></span>;<br><span class="hljs-comment">//åœ¨æŸåŠ¨æ€åˆ†é…æ‰€å¾—çš„Widgetä¸Šè¿›è¡ŒæŸäº›å¸¦æœ‰ä¼˜å…ˆæƒçš„å¤„ç†</span><br></code></pre></td></tr></table></figure><ol type="1"><li>ç”±äºâ€ä»¥å¯¹è±¡ç®¡ç†èµ„æºâ€œï¼ŒprocessWidgetå†³å®šå¯¹å…¶åŠ¨æ€åˆ†é…å¾—æ¥çš„Widgetè¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆtr1::shared_ptr)</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">processWidget</span>(<span class="hljs-keyword">new</span> Widget, <span class="hljs-built_in">priority</span>());<span class="hljs-comment">//è°ƒç”¨å‡½æ•°</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œtr1::shared_ptræ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ªåŸå§‹æŒ‡é’ˆï¼Œä½†è¯¥æ„é€ å‡½æ•°æ˜¯ä¸ªexplicitæ„é€ å‡½æ•°ï¼Œæ— æ³•è¿›è¡Œéšå¼è½¬æ¢ï¼Œè¦è½¬æ¢ä¸ºæ™ºèƒ½æŒ‡é’ˆ</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">processWidget</span>(std::tr1::<span class="hljs-built_in">shared_ptr</span>&lt;Widget&gt;(<span class="hljs-keyword">new</span> Widget, <span class="hljs-built_in">priority</span>());<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>è™½ç„¶ä½¿ç”¨äº†å¯¹è±¡ç®¡ç†å¼èµ„æºï¼Œå´å¯èƒ½æ³„éœ²èµ„æº</li><li>ç¼–è¯‘å™¨åœ¨äº§å‡ºä¸€ä¸ªprocessWidgetè°ƒç”¨ç ä¹‹å‰ï¼Œå¿…é¡»æ ¸ç®—å³å°†è¢«ä¼ é€’çš„å„ä¸ªå®å‚ï¼Œ<ol type="1"><li>ç¬¬äºŒä¸ªå®å‚åªæ˜¯ä¸€ä¸ªå•çº¯çš„å¯¹priorityå‡½æ•°çš„è°ƒç”¨ï¼Œ</li><li>ç¬¬ä¸€ä¸ªå®å‚std::tr1::shared_ptr<Widget>(new Widget)ç”±ä¸¤éƒ¨åˆ†ç»„æˆ<ol type="1"><li>æ‰§è¡Œâ€new Widget"è¡¨è¾¾å¼</li><li>è°ƒç”¨tr1::shared_ptræ„é€ å‡½æ•°</li></ol></Widget></li><li>åœ¨è°ƒç”¨processWidgetä¹‹å‰ï¼Œç¼–è¯‘å™¨å¿…é¡»åˆ›å»ºä»£ç <ol type="1"><li>è°ƒç”¨priority</li><li>æ‰§è¡Œâ€œnew Widget"</li><li>è°ƒç”¨tr1::shared_ptræ„é€ å‡½æ•°</li></ol></li><li>newWidgetæ‰§è¡Œäºtr1::shared_ptræ„é€ å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰ï¼Œä½†priorityçš„è°ƒç”¨å¯ä»¥æ’åœ¨ç¬¬ä¸€ç¬¬äºŒæˆ–è€…ç¬¬ä¸‰æ‰§è¡Œ</li><li>ä¸‡ä¸€priorityè°ƒç”¨å¼‚å¸¸ï¼ŒnewWidgetè¿”å›çš„æŒ‡é’ˆå°†ä¼šé—å¤±ï¼Œå› ä¸ºå®ƒå°šæœªè¢«ç½®å…¥tr1::shared_ptrå†…ï¼Œåè€…ä½¿æˆ‘ä»¬ç”¨æ¥é˜²æ­¢èµ„æºæ³„éœ²çš„</li><li>èµ„æºè¢«åˆ›å»ºå’Œèµ„æºè¢«è½¬æ¢ä¸ºèµ„æºç®¡ç†å¯¹è±¡ä¹‹é—´å‘ç”Ÿäº†å¼‚å¸¸å¹²æ‰°</li><li>é¿å…æ–¹æ³•ï¼šä½¿ç”¨åˆ†ç¦»è¯­å¥ï¼Œåˆ†åˆ«å†™å‡º<ol type="1"><li>åˆ›å»ºWidget</li><li>å°†å®ƒç½®å…¥ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå†…ï¼Œç„¶åå†æŠŠé‚£ä¸ªæ™ºèƒ½æŒ‡é’ˆä¼ ç»™processWidget</li></ol></li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::<span class="hljs-function">tr1::shared_ptr&lt;Widget&gt; <span class="hljs-title">pw</span><span class="hljs-params">(<span class="hljs-keyword">new</span> Widget)</span></span>;<br><span class="hljs-built_in">processWidget</span>(pw, <span class="hljs-built_in">priority</span>());<span class="hljs-comment">//ä¸ä¼šé€ æˆèµ„æºæ³„éœ²</span><br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>è¯·è®°ä½ï¼Œä»¥ç‹¬ç«‹è¯­å¥å°†newedå¯¹è±¡å­˜å‚¨äºæ™ºèƒ½æŒ‡é’ˆå†…ï¼Œå¦‚æœä¸è¿™æ ·åšï¼Œä¸€æ—¦å¼‚å¸¸è¢«æŠ›å‡ºï¼Œæœ‰å¯èƒ½å¯¼è‡´éš¾ä»¥å¯Ÿè§‰çš„èµ„æºæ³„éœ²</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. æ„é€ ã€ææ„ã€èµ‹å€¼è¿ç®—</title>
    <link href="/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/"/>
    <url>/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<h2 id="äº†è§£cé»˜é»˜ç¼–å†™å¹¶è°ƒç”¨é‚£äº›å‡½æ•°">5.äº†è§£c++é»˜é»˜ç¼–å†™å¹¶è°ƒç”¨é‚£äº›å‡½æ•°</h2><ol type="1"><li>åœ¨C++å¤„ç†ä¹‹åï¼Œemptyclassï¼ˆç©ºç±»ï¼‰ä¸å†æ˜¯ä¸ªç©ºç±»ï¼Œå¦‚æœæ²¡æœ‰å£°æ˜ï¼Œç¼–è¯‘å™¨å°±ä¼šä¸ºå®ƒå£°æ˜ä¸€ä¸ªcopyæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªcopyassignment æ“ä½œç¬¦å’Œä¸€ä¸ªææ„å‡½æ•°ï¼Œæ‰€æœ‰è¿™äº›å‡½æ•°éƒ½æ˜¯publicä¸”inlineçš„ã€‚</li><li>å¦‚æœå£°æ˜äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¸å†ä¸ºå®ƒåˆ›å»ºdefaultæ„é€ å‡½æ•°</li><li>åœ¨ä¸€ä¸ªâ€œå†…å«referenceæˆå‘˜â€çš„classå†…æ”¯æŒèµ‹å€¼æ“ä½œï¼Œå¿…é¡»è‡ªå·±å®šä¹‰copyassignment æ“ä½œç¬¦</li><li>åœ¨é¢å¯¹â€œå†…å«constæˆå‘˜â€ï¼Œç¼–è¯‘å™¨å¤„ç†ä¸ä¸Šç›¸åŒ</li><li>è‹¥æŸä¸ªbase classå°†copyassignmentæ“ä½œç¬¦å£°æ˜ä¸ºprivateï¼Œç¼–è¯‘å™¨æ‹’ç»ä¸ºå…¶derived classç”Ÿæˆä¸€ä¸ªcopyassignment</li></ol><p><img src="/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/1706847938047-ed97f39e-ccba-4b41-bc3f-4f77783f656a.png"></p><h2 id="è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°å°±è¯¥æ˜ç¡®æ‹’ç»">6.è‹¥ä¸æƒ³ä½¿ç”¨ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°ï¼Œå°±è¯¥æ˜ç¡®æ‹’ç»</h2><ol type="1"><li>å°†æˆå‘˜å‡½æ•°å£°æ˜ä¸ºprivateè€Œä¸”æ•…æ„ä¸å®ç°ä»–ä»¬ï¼Œè¢«ç”¨åœ¨c++iostreamä¸­é˜»æ­¢copyingè¡Œä¸ºï¼Œcopyæ„é€ å‡½æ•°å’Œcopyassignmentæ“ä½œç¬¦éƒ½è¢«å£°æ˜ä¸ºprivateä¸”æ²¡æœ‰å®šä¹‰ã€‚</li></ol><p><img src="/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/1706848020516-de923da9-e96d-46d1-ac2b-031376e32334.png"></p><ol start="2" type="1"><li>å½“å®¢æˆ·ä¼å›¾æ‹·è´å¯¹è±¡æ—¶ï¼Œè¿æ¥å™¨æŠ¥é”™</li><li>ä¸ºé˜»æ­¢å¯¹è±¡è¢«è€ƒä¸ï¼Œå”¯ä¸€è¦åšçš„æ—¶ç»§æ‰¿ï¼ˆç§æœ‰ç»§æ‰¿ï¼‰classä¸å†å£°æ˜æ‹·è´æ„é€ å‡½æ•°å’Œcopy assignmentè¿ç®—ç¬¦</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeForSale</span>: <span class="hljs-keyword">private</span> Uncopyable&#123;&#125;; <br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>ä¸ºé©³å›ç¼–è¯‘å™¨è‡ªåŠ¨æä¾›çš„æœºèƒ½ï¼Œå¯å°†ç›¸åº”çš„æˆå‘˜å‡½æ•°å£°æ˜ä¸ºprivateå¹¶ä¸”ä¸äºˆå®ç°ã€‚ä½¿ç”¨åƒUncopyableè¿™æ ·çš„baseclassä¹Ÿæ˜¯ä¸€ç§åšæ³•ã€‚</li></ol><h2 id="ä¸ºå¤šæ€åŸºç±»å£°æ˜virtualææ„å‡½æ•°">7.ä¸ºå¤šæ€åŸºç±»å£°æ˜virtualææ„å‡½æ•°</h2><ol type="1"><li>å½“derived classå¯¹è±¡ç»ç”±ä¸€ä¸ªbase classæŒ‡é’ˆè¢«åˆ é™¤ï¼Œè€Œè¯¥baseclasså¸¦ç€ä¸€ä¸ªnon-virtualææ„å‡½æ•°ï¼Œiç»“æœæœªæœ‰å®šä¹‰ï¼Œå®é™…æ‰§è¡Œæ—¶é€šå¸¸å‘ç”Ÿçš„æ˜¯å¯¹è±¡çš„derivedæˆåˆ†æ²¡æœ‰è¢«é”€æ¯ã€‚é€ æˆä¸€ä¸ªè¯¡å¼‚çš„å±€éƒ¨é”€æ¯ç°è±¡å¯¹è±¡ã€‚</li><li>ç»™base classä¸€ä¸ªvirtualææ„å‡½æ•°ï¼Œæ­¤ååˆ é™¤derived classå¯¹è±¡</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeKeeper</span>&#123;<br>    <span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">TimeKeeper</span>();<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">TimeKeeper</span>();<br>&#125;;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å…¶ä»–çš„virtualå‡½æ•°ï¼Œç›®çš„æ˜¯å…è®¸derived classçš„å®ç°å¾—ä»¥å®¢åˆ¶åŒ–</li><li>å¦‚æœclassä¸å«virtualå‡½æ•°ï¼Œé€šå¸¸è¡¨ç¤ºå®ƒå¹¶ä¸æ„å›¾è¢«ç”¨ä½œä¸€ä¸ªbaseclassã€‚è‹¥ä»¤å…¶ææ„å‡½æ•°ä¸ºvirtualï¼Œæ˜¯ä¸ªé¦Šä¸»æ„</li><li>virtualå‡½æ•°çš„å®ç°ç»†èŠ‚ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯classå†…å«virtualå‡½æ•°ï¼Œå…¶å¯¹è±¡ä½“ç§¯ä¼šå¢åŠ ï¼›åœ¨32ä½çš„è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­å°†å ç”¨64ä½ï¼ˆä¸ºäº†å­˜æ”¾ä¸¤ä¸ªintsï¼‰è‡³96ä½ï¼ˆä¸¤ä¸ªintsåŠ ä¸Švptrï¼‰</li><li>å¿ƒå¾—ï¼šåªæœ‰å½“classå†…å«è‡³å°‘ä¸€ä¸ªvirtualå‡½æ•°ï¼Œæ‰ä¸ºå®ƒå£°æ˜virtualææ„å‡½æ•°</li><li>å³ä½¿classå®Œå…¨ä¸å¸¦virtualå‡½æ•°ï¼Œè¢«éè™šææ„å‡½æ•°â€œå’¬ä¼¤â€è¿˜æ˜¯å­˜åœ¨ã€‚<ol type="1"><li>ä¾‹å¦‚ï¼šæ ‡å‡†stringä¸å«ä»»ä½•virtualå‡½æ•°ï¼Œä½†æœ‰æ—¶å€™ç¨‹åºå‘˜ä¼šé”™è¯¯åœ°æŠŠå®ƒå½“ä½œbaseclass</li></ol></li><li>å¯¹ä»»ä½•ä¸å¸¦virtualææ„å‡½æ•°çš„classï¼ŒåŒ…æ‹¬æ‰€æœ‰STLå®¹å™¨ï¼Œå‡ç¦æ­¢æ´¾ç”Ÿ</li><li>æœ‰æ—¶classå¸¦ä¸€ä¸ªpure virtualææ„å‡½æ•°ï¼Œå¯èƒ½é¢‡ä¸ºé¡ºåˆ©ã€<ol type="1"><li>çº¯è™šå‡½æ•°å¯¼è‡´æŠ½è±¡ç±»ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œä¸èƒ½åˆ›å»ºå¯¹è±¡</li></ol></li><li>ææ„å‡½æ•°çš„è¿ä½œæ–¹å¼æ˜¯ï¼Œæœ€æ·±å±‚æ´¾ç”Ÿçš„classçš„ææ„å‡½æ•°æœ€å…ˆè¢«è°ƒç”¨ï¼Œç„¶åå…¶æ¯ä¸€ä¸ªbaseclassçš„ææ„å‡½æ•°è¢«è°ƒç”¨</li><li>ç»™base classä¸€ä¸ªvirtualææ„å‡½æ•°ï¼Œåªé€‚ç”¨äºå¸¦å¤šæ€æ€§è´¨çš„base classä¸Šï¼Œè¿™ç§åŸºç±»çš„è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†ç”¨æ¥é€šè¿‡åŸºç±»æ¥å£å¤„ç†æ´¾ç”Ÿç±»å¯¹è±¡ã€‚</li><li>å¹¶éæ‰€æœ‰çš„åŸºç±»è®¾è®¡ç›®çš„éƒ½æ˜¯ä¸ºäº†å¤šæ€ï¼Œä¾‹å¦‚æ ‡å‡†stringå’ŒSTLå®¹å™¨éƒ½ä¸èƒ½è¢«è®¾è®¡ä½œä¸ºåŸºç±»ä½¿ç”¨ï¼Œæ›´åˆ«æå¤šæ€äº†</li><li>æŸäº›ç±»è®¾è®¡ç›®çš„æ˜¯ä½œä¸ºåŸºç±»ä½¿ç”¨ï¼Œä½†ä¸æ˜¯ä¸ºäº†å¤šæ€ç”¨é€”ï¼Œä¸éœ€è¦virtualææ„å‡½æ•°</li></ol><h2 id="åˆ«è®©å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°">8. åˆ«è®©å¼‚å¸¸é€ƒç¦»ææ„å‡½æ•°</h2><ol type="1"><li>C++å¹¶ä¸ç¦æ­¢ææ„å‡½æ•°åå‡ºå¼‚å¸¸ï¼Œä½†å®ƒä¸é¼“åŠ±ä½ è¿™æ ·åšï¼ŒC++ææ„å‡½æ•°åå‡ºå¼‚å¸¸ï¼Œç¨‹åºå¯èƒ½è¿‡æ—©ç»“æŸæˆ–è€…å‡ºç°ä¸æ˜ç¡®è¡Œä¸º</li><li>ä¸€ä¸ªç®¡ç†æ•°æ®åº“ç®¡ç†çš„ç±»</li></ol><p><img src="/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/1706848268744-ae573d2f-2d0f-41ff-88a3-35d1f35485cd.png"></p><ol start="3" type="1"><li>å¦‚æœcloseæŠ›å‡ºå¼‚å¸¸å°±ç»“æŸç¨‹åºï¼Œé€šå¸¸é€šè¿‡è°ƒç”¨abortå®Œæˆï¼Œå¦‚æœç¨‹åºé­é‡ä¸€ä¸ªâ€äºææ„æœŸé—´å‘ç”Ÿçš„é”™è¯¯â€œåæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œâ€å¼ºè¿«ç»“æŸç¨‹åºâ€œæ˜¯ä¸ªåˆç†é€‰é¡¹ï¼Œå®ƒå¯ä»¥é˜»æ­¢å¼‚å¸¸ä»ææ„å‡½æ•°ä¼ æ’­å‡ºå»ï¼Œè°ƒç”¨abortå¯ä»¥æŠ¢å…ˆåˆ¶â€ä¸æ˜ç¡®è¡Œä¸ºâ€œäºæ­»åœ°</li></ol><p><img src="/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/1706848322270-e1d844c6-aef8-4c44-b286-4e9c8719d8ee.png"></p><ol start="4" type="1"><li>åä¸‹å› è°ƒç”¨closeè€Œå‘ç”Ÿçš„å¼‚å¸¸<ol type="1"><li>ä¸€èˆ¬æ¥è¯´ï¼Œå°†å¼‚å¸¸åæ‰æ˜¯ä¸ªåä¸»æ„ï¼Œå› ä¸ºå®ƒå‹åˆ¶äº†â€æŸäº›åŠ¨ä½œå¤±è´¥â€œçš„é‡è¦ä¿¡æ¯</li><li>ç„¶è€Œæœ‰æ—¶åä¸‹å¼‚å¸¸ä¹Ÿæ¯”è´Ÿæ‹…â€è‰ç‡ç»“æŸç¨‹åºâ€œæˆ–â€ä¸æ˜ç¡®è¡Œä¸ºå¸¦æ¥çš„é£é™©â€œå¥½ï¼Œæ˜¯ä¸€ä¸ªå¯è¡Œæ–¹æ¡ˆï¼Œç¨‹åºèƒ½å¤Ÿç»§ç»­å¯é çš„æ‰§è¡Œ</li></ol></li><li>é‡æ–°è®¾è®¡DEConnæ¥å£ï¼Œä½¿å…¶å®¢æˆ·æœ‰æœºä¼šå¯¹å¯èƒ½å‡ºç°çš„é—®é¢˜ä½œå‡ºååº”ã€‚<ol type="1"><li>æŠŠè°ƒç”¨closeçš„è´£ä»»ä»DEConnææ„å‡½æ•°æ‰‹ä¸Šç§»åˆ°DBConnå®¢æˆ·æ‰‹ä¸Š</li></ol></li><li>tips<ol type="1"><li>ææ„å‡½æ•°ç»å¯¹ä¸è¦åå‡ºå¼‚å¸¸ï¼Œå¦‚æœä¸€ä¸ªè¢«ææ„å‡½æ•°è°ƒç”¨çš„å‡½æ•°å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œææ„å‡½æ•°åº”è¯¥æ•æ‰ä»»ä½•å¼‚å¸¸ï¼Œç„¶ååä¸‹ä»–ä»¬ï¼ˆä¸ä¼ æ’­ï¼‰æˆ–è€…ç»“æŸç¨‹åºã€‚</li><li>å¦‚æœå®¢æˆ·éœ€è¦å¯¹æŸä¸ªæ“ä½œå‡½æ•°è¿è¡ŒæœŸé—´æŠ›å‡ºçš„å¼‚å¸¸åšå‡ºååº”ï¼Œé‚£ä¹ˆclassåº”è¯¥æä¾›ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆè€Œéåœ¨ææ„å‡½æ•°ä¸­ï¼‰æ‰§è¡Œè¯¥æ“ä½œ</li></ol></li></ol><h2 id="ç»ä¸åœ¨æ„é€ å’Œææ„è¿‡ç¨‹ä¸­è°ƒç”¨virtualå‡½æ•°">9.ç»ä¸åœ¨æ„é€ å’Œææ„è¿‡ç¨‹ä¸­è°ƒç”¨virtualå‡½æ•°</h2><ol type="1"><li>åœ¨åŸºç±»æ„é€ æœŸé—´virtualå‡½æ•°ç»å¯¹ä¸ä¼šä¸‹é™åˆ°æ´¾ç”Ÿç±»é˜¶å±‚ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå¯¹è±¡çš„ä½œä¸ºå°±åƒéš¶å±åŸºç±»å‹ä¸€æ ·ï¼Œéæ­£å¼çš„è¯´æ³•ï¼šåœ¨åŸºç±»æ„é€ æœŸé—´ï¼Œvirtualå‡½æ•°ä¸æ˜¯virtualå‡½æ•°</li><li>åŸºç±»æ„é€ å‡½æ•°çš„æ‰§è¡Œæ›´æ—©äºæ´¾ç”Ÿç±»æ„é€ å‡½æ•°ï¼Œå½“åŸºç±»æ„é€ å‡½æ•°æ‰§è¡Œæ—¶ï¼Œæ´¾ç”Ÿç±»çš„æˆå‘˜å˜é‡å°šæœªåˆå§‹åŒ–ï¼Œå¦‚æœæ­¤æœŸé—´è°ƒç”¨çš„virtualå‡½æ•°ä¸‹é™åˆ°æ´¾ç”Ÿç±»é˜¶å±‚ï¼Œæ´¾ç”Ÿç±»çš„å‡½æ•°å¿…ç„¶å–åˆ°localæˆå‘˜å˜é‡ï¼Œè€Œé‚£äº›æˆå‘˜å˜é‡å°šæœªåˆå§‹åŒ–ã€‚</li><li>åœ¨æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æ„é€ æœŸé—´ï¼Œå¯¹ä¸‹é‚£ä¸ªçš„ç±»å‹æ˜¯åŸºç±»è€Œä¸æ˜¯æ´¾ç”Ÿç±»ã€‚ä¸åªvirtualå‡½æ•°ä¼šè¢«ç¼–è¯‘å™¨è§£æè‡³åŸºç±»ï¼Œè‹¥ä½¿ç”¨è¿è¡ŒæœŸç±»å‹ä¿¡æ¯ï¼ˆå¦‚dynamic_castå’Œtypeidï¼‰ï¼Œä¹Ÿä¼šæŠŠå¯¹è±¡è§†ä¸ºåŸºç±»ç±»å‹</li><li>ç›¸åŒé“ç†ä¹Ÿé€‚ç”¨äºææ„å‡½æ•°ï¼Œä¸€æ—¦æ´¾ç”Ÿç±»ææ„å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œå¯¹è±¡å†…çš„æ´¾ç”Ÿç±»æˆå‘˜å˜é‡ä¾¿å‘ˆç°æœªå®šä¹‰å€¼ï¼Œc++è§†å®ƒä»¬ä»¿ä½›ä¸åœ¨å­˜åœ¨ã€‚è¿›å…¥åŸºç±»ææ„å‡½æ•°åå¯¹è±¡å°±æˆä¸ºä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œè€Œc++çš„ä»»ä½•éƒ¨åˆ†åŒ…æ‹¬è™šå‡½æ•°ï¼Œdynamic_castsä¹Ÿè¿™ä¹ˆçœ‹å¾…å®ƒ</li></ol><h2 id="ä»¤operatorè¿”å›ä¸€ä¸ªreference-to-this">10.ä»¤operator=è¿”å›ä¸€ä¸ªreference to *this</h2><ol type="1"><li>è¿é”èµ‹å€¼ï¼Œèµ‹å€¼æ“ä½œç¬¦å¿…é¡»è¿”å›ä¸€ä¸ªreferenceæŒ‡å‘æ“ä½œç¬¦çš„å·¦ä¾§å®å‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">Widget &amp; <span class="hljs-title">operator</span><span class="hljs-params">()</span></span>=(<span class="hljs-type">const</span> Widget&amp; rhs)<br>&#123;<br><span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<span class="hljs-comment">//è¿”å›å·¦ä¾§å¯¹è±¡</span><br>&#125;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>é€‚ç”¨äºæ‰€æœ‰èµ‹å€¼ç›¸å…³è¿ç®—</li><li>è¿™åªæ˜¯ä¸€ä¸ªåè®®ï¼Œå¹¶æ— å¼ºåˆ¶æ€§ï¼Œä½†è¢«æ‰€æœ‰å†…ç½®ç±»å‹å’ŒSTLæä¾›çš„ç±»å‹æ‰€å…±åŒéµå®ˆ</li></ol><h2 id="ä»¤operatorä¸­å¤„ç†è‡ªæˆ‘èµ‹å€¼">11. ä»¤operator=ä¸­å¤„ç†â€è‡ªæˆ‘èµ‹å€¼â€œ</h2><ol type="1"><li>è‡ªæˆ‘èµ‹å€¼å‘ç”Ÿåœ¨å¯¹è±¡è¢«èµ‹å€¼ç»™è‡ªå·±æ—¶ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹è ¢ï¼Œä½†åˆæ³•</li><li>operator=å®ç°ä»£ç </li></ol><p><img src="/2024/11/27/effective-cpp/2-%E6%9E%84%E9%80%A0%E3%80%81%E6%9E%90%E6%9E%84%E3%80%81%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97/1706848392574-df2d9ec6-d75b-42f1-a3dc-b99e7ac143ba.png"></p><ol start="3" type="1"><li>æ½œåœ¨çš„è‡ªæˆ‘èµ‹å€¼</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">a[i] = a[j]; <span class="hljs-comment">// i==j</span><br>*px = *py; <span class="hljs-comment">//pxå’ŒpyæŒ‡å‘åŒä¸€ä¸ªä¸œè¥¿</span><br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>è¿™æ˜¯åˆ«åå¸¦æ¥çš„ç»“æœï¼Œæ‰€è°“åˆ«åå°±æ˜¯æœ‰ä¸€ä¸ªä»¥ä¸Šçš„æ–¹æ³•æŒ‡ç§°æŸå¯¹è±¡ã€‚ä¸€èˆ¬è€Œè¨€å¦‚æœæŸæ®µä»£ç æ“ä½œpointersæˆ–è€…referencesè€Œå®ƒä»¬è¢«ç”¨æ¥â€œæŒ‡å‘å¤šä¸ªç›¸åŒç±»å‹çš„å¯¹è±¡â€ï¼Œå°±éœ€è€ƒè™‘è¿™äº›å¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªã€‚å®é™…ä¸Šä¸¤ä¸ªå¯¹è±¡åªè¦æ¥è‡ªåŒä¸€ä¸ªç»§æ‰¿ä½“ç³»ï¼Œå®ƒä»¬ç”šè‡³ä¸éœ€å£°æ˜ä¸ºç›¸åŒç±»å‹å°±å¯é¥é€ æˆåˆ«åï¼Œå› ä¸ºä¸€ä¸ªåŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆå¯ä»¥æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>&#123;&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span>:<span class="hljs-keyword">public</span> Base&#123;&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doSomething</span><span class="hljs-params">(<span class="hljs-type">const</span> Base&amp; rb, Derived* pd)</span></span>; <span class="hljs-comment">//rb å’Œ*pdå¯èƒ½å…¶å®æ˜¯åŒä¸€å¯¹è±¡</span><br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ä¼ ç»Ÿåšæ³•æ˜¯ç”±operator=æœ€å‰é¢çš„ä¸€ä¸ªè¯åŒæµ‹è¯•è¾¾åˆ°è‡ªæˆ‘èµ‹å€¼çš„æ£€éªŒç›®çš„</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Widget&amp; Widget::<span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Widget&amp; rhs)<br>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> == &amp;rhs) <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br><br>    <span class="hljs-keyword">delete</span> pb;<br>    pb = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Bitmap</span>(*rhs.pb);<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>å‰ä¸€ç‰ˆoperator=ä¸ä»…ä¸å…·å¤‡â€œè‡ªæˆ‘èµ‹å€¼å®‰å…¨æ€§â€ï¼Œä¹Ÿä¸å…·å¤‡â€œå¼‚å¸¸å®‰å…¨æ€§â€ï¼Œå­˜åœ¨å¼‚å¸¸æ–¹é¢çš„éº»çƒ¦ã€‚å¦‚æœâ€œnewBitmapâ€å¯¼è‡´å¼‚å¸¸ï¼ŒWidgetæœ€ç»ˆä¼šæŒæœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€å—è¢«åˆ é™¤çš„bitmapï¼Œè¿™æ ·çš„æŒ‡é’ˆæœ‰å®³ï¼Œä½ æ— æ³•å®‰å…¨çš„åˆ é™¤ä»–ä»¬ï¼Œä»¥åŠæ— æ³•å®‰å…¨çš„è¯»å–ä»–ä»¬</li><li>è®©operator=å…·å¤‡â€œå¼‚å¸¸å®‰å…¨æ€§â€ä¼šè·å¾—â€œè‡ªæˆ‘èµ‹å€¼å®‰å…¨â€çš„å›æŠ¥ï¼Œå› æ­¤å¯¹è‡ªæˆ‘èµ‹å€¼çš„å¤„ç†æ€åº¦æ˜¯å€¾å‘ä¸ç®¡å®ƒï¼Œç„¦ç‚¹æ”¾åœ¨å®ç°å¼‚å¸¸å®‰å…¨æ€§ä¸Šã€‚æœ¬æ¡æ¬¾åªè¦ä½ æ³¨æ„â€œè®¸å¤šæ—¶å€™ä¸€ç¾¤ç²¾å¿ƒå®‰æ’çš„è¯­å¥å°±å¯ä»¥å¯¼å‡ºä¸€åœºå®‰å…¨ï¼ˆä»¥åŠè‡ªæˆ‘èµ‹å€¼å®‰å…¨çš„ä»£ç ï¼Œå†å¤åˆ¶pbæ‰€æŒ‡ä¸œè¥¿ä¹‹å‰åˆ«åˆ é™¤pb</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Widget&amp; Widget::<span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Widget&amp; rhs)<br>&#123;<br>    Bitmap* pOrig = pb;<br>    pb = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Bitmap</span>(*rhs.pb);<br>    <span class="hljs-keyword">delete</span> pOrig;<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>è¿™ä¸ªä¸»é¢˜çš„å¦ä¸€ä¸ªå˜å¥æ›²æ˜¯åˆ©ç”¨ä»¥ä¸‹äº‹å®ï¼š<ol type="1"><li>æŸclassçš„copy assignmentæ“ä½œç¬¦å¯èƒ½è¢«å£°æ˜ä¸ºâ€œä»¥byvalueæ–¹å¼æ¥å—å®å‚â€</li><li>ä»¥by valueæ–¹å¼ä¼ é€’ä¸œè¥¿ä¼šé€ æˆä¸€ä»½å‰¯æœ¬</li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Widget&amp; Widget::<span class="hljs-keyword">operator</span>=(Widget rhs)  <span class="hljs-comment">//rhsæ˜¯è¢«ä¼ å¯¹è±¡çš„ä¸€ä»½å‰¯æœ¬</span><br>&#123;<span class="hljs-comment">//è¿™é‡Œæ˜¯pass by value</span><br>    <span class="hljs-built_in">swap</span>(rhs);<span class="hljs-comment">//å°†*thisçš„æ•°æ®å’Œå‰¯æœ¬çš„æ•°æ®è¿›è¡Œäº’æ¢</span><br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br></code></pre></td></tr></table></figure><pre><code class="hljs">3. å°†copyingåŠ¨ä½œä»å‡½æ•°æœ¬ä½“å†…ç§»åˆ°å‡½æ•°å‚æ•°æ„é€ é˜¶æ®µå¯ä»¤ç¼–è¯‘å™¨æœ‰æ—¶ç”Ÿæˆæ›´é«˜æ•ˆçš„ä»£ç </code></pre><ol start="9" type="1"><li>ç¡®ä¿å½“å¯¹è±¡è‡ªæˆ‘èµ‹å€¼æ—¶operator=æœ‰è‰¯å¥½è¡Œä¸ºã€‚å…¶ä¸­æŠ€æœ¯åŒ…æ‹¬æ¯”è¾ƒâ€œæ¥æºå¯¹è±¡â€å’Œâ€œç›®æ ‡å¯¹è±¡â€çš„åœ°å€ã€ç²¾å¿ƒå‘¨åˆ°çš„è¯­å¥é¡ºåºã€ä»¥åŠcopy-and-swap</li><li>ç¡®å®šä»»ä½•å‡½æ•°å¦‚æœæ“ä½œä¸€ä¸ªä»¥ä¸Šçš„å¯¹è±¡ï¼Œè€Œå…¶ä¸­å¤šä¸ªå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…¶è¡Œä¸ºä»ç„¶æ­£ç¡®ã€‚</li></ol><h2 id="å¤åˆ¶å¯¹è±¡æ—¶å‹¿å¿˜å…¶æ¯ä¸€ä¸ªæˆåˆ†">12. å¤åˆ¶å¯¹è±¡æ—¶å‹¿å¿˜å…¶æ¯ä¸€ä¸ªæˆåˆ†</h2><ol type="1"><li>é¢å‘å¯¹è±¡ç³»ç»Ÿä¼šå°†å¯¹è±¡çš„å†…éƒ¨å°è£…èµ·æ¥ï¼Œåªç•™ä¸¤ä¸ªå‡½æ•°è´Ÿè´£å¯¹è±¡æ‹·è´ï¼ˆå¤åˆ¶ï¼‰ï¼Œé‚£ä¾¿æ˜¯å¸¦ç€é€‚åˆ‡åç§°çš„copyæ„é€ å‡½æ•°å’Œcopyassignmentæ“ä½œç¬¦ï¼Œæˆä¸ºcopyingå‡½æ•°</li><li>å¦‚æœä¸ºclassæ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œå¿…é¡»åŒæ—¶ä¿®æ”¹copyingå‡½æ•°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityCustomer</span>: <span class="hljs-keyword">public</span> Customer&#123;&#125;;<br>PriorityCustomer::<span class="hljs-built_in">PriorityCustomoer</span>(cosnt PriorityCustomer&amp; rhs):<span class="hljs-built_in">priority</span>(rhs.priority)<br>&#123;<br>    <span class="hljs-built_in">logCall</span>(<span class="hljs-string">&quot;PriorityCustomer copy constructor&quot;</span>);<br>&#125;<br>PriorityCustomer&amp; PriorityCustomer::<span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> PriorityCustomer&amp; rhs)<br>&#123;<br>    <span class="hljs-built_in">logCall</span>(<span class="hljs-string">&quot;PriorityCustomer copy assignment operator&quot;</span>);<br>    priority = rhs.prioroty;<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>åœ¨è¿›è¡Œç±»ç»§æ‰¿æ—¶ï¼Œcopyingå‡½æ•°å¤åˆ¶äº†æˆå‘˜å˜é‡å‰¯æœ¬ï¼Œä½†æ¯ä¸ªPriorityCustomerè¿˜å†…å«å®ƒæ‰€ç»§æ‰¿çš„Customeræˆå‘˜å˜é‡å‰¯æœ¬ï¼Œè€Œé‚£äº›å˜é‡å´æœªè¢«å¤åˆ¶ï¼ŒPriorityCustomerçš„copyæ„é€ å‡½æ•°å¹¶æ²¡æœ‰æŒ‡å®šå®å‚ä¼ ç»™å…¶åŸºç±»æ„é€ å‡½æ•°ï¼Œï¼ˆä¹Ÿå°±æ˜¯è¯´å®ƒåœ¨ä»–çš„æˆå‘˜åˆå€¼åˆ—ä¸­æ²¡æœ‰æåˆ°Customerã€‚ï¼‰å› æ­¤PriorityCustomerå¯¹è±¡çš„Customeræˆåˆ†ä¼šè¢«ä¸å¸¦å®å‚ä¹‹Customerç‹—ä»”å‡½æ•°ï¼ˆå³defaultæ„é€ å‡½æ•°â€”â€”å¿…å®šæœ‰ä¸€ä¸ªå¦åˆ™æ— æ³•é€šè¿‡ç¼–è¯‘ï¼‰åˆå§‹åŒ–ã€‚defaultæ„é€ å‡½æ•°å°†é’ˆå¯¹nameå’ŒlastTransactionæ‰§è¡Œç¼ºçœçš„åˆå§‹åŒ–åŠ¨ä½œã€‚</li><li>å½“ç¼–å†™ä¸€ä¸ªcopyingå‡½æ•°<ol type="1"><li>å¤åˆ¶æ‰€æœ‰localæˆå‘˜å˜é‡</li><li>è°ƒç”¨æ‰€æœ‰base classeså†…é€‚å½“çš„copyingå‡½æ•°</li></ol></li><li>ä»¤copyassignmentæ“ä½œç¬¦è°ƒç”¨copyæ„é€ å‡½æ•°æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºè¿™å°±åƒè¯•å›¾æ„é€ ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ã€‚</li><li>ä»¤copyæ„é€ å‡½æ•°è°ƒç”¨copyassignmentæ“ä½œç¬¦åŒæ ·æ— æ„ä¹‰ã€‚æ„é€ å‡½æ•°ç”¨æ¥åˆå§‹åŒ–æ–°å¯¹è±¡ï¼Œè€Œassignmentæ“ä½œç¬¦åªæ–½è¡Œäºå·²åˆå§‹åŒ–å¯¹è±¡èº«ä¸Šã€‚</li><li>å¦‚æœcopyæ„é€ å‡½æ•°å’Œcopyassignmentæ“ä½œç¬¦æœ‰ç›¸è¿‘çš„ä»£ç ï¼Œæ¶ˆé™¤é‡å¤ä»£ç çš„åšæ³•æ˜¯ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„æˆå‘˜å‡½æ•°ç»™ä¸¤è€…è°ƒç”¨ã€‚è¿™æ ·çš„å‡½æ•°å¾€å¾€æ˜¯privateè€Œä¸”å‘½åä¸ºinitã€‚è¿™ä¸ªç­–ç•¥å¯ä»¥å®‰å…¨æ¶ˆé™¤copyæ„é€ å‡½æ•°å’Œcopyassignmentæ“ä½œç¬¦ä¹‹é—´çš„ä»£ç é‡å¤</li><li>copyingå‡½æ•°åº”è¯¥ç¡®ä¿å¤åˆ¶â€œå¯¹è±¡å†…çš„æ‰€æœ‰æˆå‘˜å˜é‡â€åŠâ€œæ‰€æœ‰åŸºç±»æˆåˆ†â€</li><li>ä¸è¦å°è¯•ä»¥æŸä¸ªcopyingå‡½æ•°å®ç°å¦ä¸€ä¸ªcopyingå‡½æ•°ã€‚åº”è¯¥å°†å…±åŒæœºèƒ½æ”¾è¿›ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸­ï¼Œå¹¶ç”±ä¸¤ä¸ªcopyingå‡½æ•°å…±åŒè°ƒç”¨</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. è®©è‡ªå·±ä¹ æƒ¯C++</title>
    <link href="/2024/11/27/effective-cpp/1-%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B9%A0%E6%83%AFC++/"/>
    <url>/2024/11/27/effective-cpp/1-%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B9%A0%E6%83%AFC++/</url>
    
    <content type="html"><![CDATA[<h2 id="è§†cä¸ºä¸€ä¸ªè¯­è¨€è”é‚¦">1. è§†C++ä¸ºä¸€ä¸ªè¯­è¨€è”é‚¦</h2><ul><li>Cè¯­è¨€</li><li>Object-Oriented C++</li><li>Template C++ã€‚è¿™æ˜¯C++çš„æ³›å‹ç¼–ç¨‹</li><li>STLã€‚STLæ˜¯ä¸ªtemplateç¨‹åºåº“ï¼Œ</li></ul><h2 id="å°½é‡ä»¥constenuminlineæ›¿æ¢define">2.å°½é‡ä»¥const,enum,inlineæ›¿æ¢#define</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> ASPECT_RATIO 1.653</span><br></code></pre></td></tr></table></figure><ol type="1"><li>è®°å·åç§°ASPECT_RATIOä¹Ÿè®¸ä»æœªè¢«ç¼–è¯‘å™¨çœ‹è§ï¼šä¹Ÿè®¸åœ¨ç¼–è¯‘å™¨å¼€å§‹å¤„ç†æºç ä¹‹å‰å®ƒå°±è¢«é¢„å¤„ç†å™¨ç§»èµ°äº†ã€‚äºæ˜¯è®°å·åç§°ASPECT_RATI0æœ‰å¯èƒ½æ²¡è¿›å…¥è®°å·è¡¨(symboltable)å†…ã€‚</li><li>è§£å†³ä¹‹é“æ˜¯ä»¥ä¸€ä¸ªå¸¸é‡æ›¿æ¢ä¸Šè¿°çš„å®(#define):</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">const</span> <span class="hljs-type">double</span> AspectRatio <span class="hljs-number">1.653</span>:<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä½œä¸ºä¸€ä¸ªè¯­è¨€å¸¸é‡ï¼ŒAspectRatioè‚¯å®šä¼šè¢«ç¼–è¯‘å™¨çœ‹åˆ°ï¼Œå½“ç„¶å°±ä¼šè¿›å…¥è®°å·è¡¨å†…ã€‚æ­¤å¤–å¯¹æµ®ç‚¹å¸¸é‡(floatingpointconstant,å°±åƒæœ¬ä¾‹)è€Œè¨€ï¼Œä½¿ç”¨å¸¸é‡å¯èƒ½æ¯”ä½¿ç”¨#defineå¯¼è‡´è¾ƒå°é‡çš„ç ï¼Œå› ä¸ºé¢„å¤„ç†å™¨â€œç›²ç›®åœ°å°†å®åç§°ASPECTRATIOæ›¿æ¢ä¸º1.653â€å¯èƒ½å¯¼è‡´ç›®æ ‡ç (objectcode)å‡ºç°å¤šä»½1.653ï¼Œè‹¥æ”¹ç”¨å¸¸é‡AspectRatioç»ä¸ä¼šå‡ºç°ç›¸åŒæƒ…å†µã€‚</li><li>ä¸¤ç§ç‰¹æ®Šæƒ…å†µ<ol type="1"><li>å®šä¹‰å¸¸é‡æŒ‡é’ˆï¼Œå¸¸é‡å®šä¹‰å¼æ”¾åœ¨å¤´æ–‡ä»¶å†…ï¼ŒæŒ‡é’ˆè¦å£°æ˜ä¸ºconstï¼Œ</li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¸¸é‡çš„char*-basedå­—ç¬¦ä¸²ï¼Œconstä¸¤æ¬¡</span><br><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-type">const</span> authorName = <span class="hljs-string">&quot;Scott&quot;</span>;<br><span class="hljs-comment">//stringå¯¹è±¡æ¯”char*-basedæ›´åˆæ—¶å®œï¼Œå¾€å¾€å®šä¹‰ä¸º</span><br><span class="hljs-function"><span class="hljs-type">const</span> std::string <span class="hljs-title">authorName</span><span class="hljs-params">(<span class="hljs-string">&quot;Scott&quot;</span>)</span></span>;<br></code></pre></td></tr></table></figure><pre><code class="hljs">2. classä¸“å±å¸¸é‡    1. å¸¸é‡çš„ä½œç”¨åŸŸé™åˆ¶äºclasså†…ï¼Œå¿…é¡»è®©å…¶æˆä¸ºclassçš„ä¸€ä¸ªæˆå‘˜ï¼›ä¸ºç¡®ä¿æ­¤å¸¸é‡çº¸å¤šåªæœ‰ä¸€ä¸ªå®ä½“ï¼Œå¿…é¡»è®©ä»–æˆä¸ºä¸€ä¸ªstaticæˆå‘˜ï¼š</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GamePlayer</span><br>&#123;<br><span class="hljs-keyword">private</span>:<br>statin <span class="hljs-type">const</span> <span class="hljs-type">int</span> NumTurns = <span class="hljs-number">5</span>;<span class="hljs-comment">//å¸¸é‡å£°æ˜å¼</span><br><span class="hljs-type">int</span> scores[Numturns];<br>&#125;;<br><br><span class="hljs-comment">//å®šä¹‰å¼</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> GamePlayer::NumTurns; <br></code></pre></td></tr></table></figure><pre><code class="hljs">    2. C++è¦æ±‚å¯¹æ‰€ä½¿ç”¨çš„ä»»ä½•ä¸œè¥¿æä¾›ä¸€ä¸ªå®šä¹‰å¼ï¼Œä½†å¦‚æœä»–æ˜¯ä¸ªclassä¸“å±å¸¸é‡åˆæ˜¯staticä¸”ä¸ºæ•´æ•°ç±»å‹ï¼ˆint,char,bool)ï¼Œåˆ™éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚åªè¦ä¸å–ä»–ä»¬çš„åœ°å€ï¼Œå¯ä»¥å£°æ˜å¹¶ä½¿ç”¨è€Œæ— éœ€æä¾›å®šä¹‰å¼    3. å¦‚æœå–æŸä¸ªclassä¸“å±å¸¸é‡çš„åœ°å€ï¼Œæˆ–è€…ä¸å–åœ°å€è€Œç¼–è¯‘å™¨è¦åšæŒçœ‹åˆ°ä¸€ä¸ªå®šä¹‰å¼ï¼Œå°±è¦ä½¿ç”¨å®šä¹‰å¼    4. å®šä¹‰å¼æ”¾å…¥å®ç°æ–‡ä»¶è€Œéå¤´æ–‡ä»¶ï¼Œç”±äºå£°æ˜æ—¶å·²ç»æœ‰åˆå€¼ï¼Œå› æ­¤å®šä¹‰æ—¶ä¸å¯ä»¥å†è®¾åˆå€¼    5. æˆ‘ä»¬æ— æ³•åˆ©ç”¨#defineåˆ›å»ºä¸€ä¸ªclassä¸“å±å¸¸é‡ï¼Œå› ä¸º#defineä¸é‡è§†ä½œç”¨åŸŸ    6. è‹¥ç¼–è¯‘å™¨ä¸é¢„åºstaticæ•´æ•°å‹classå¸¸é‡ï¼Œå¯ç”¨æšä¸¾ç±»å‹è¡¥å¿</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GamePlayer</span><br>&#123;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-keyword">enum</span> &#123; NumTurns = <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span> scores[Numturns];<br>&#125;;<br><br></code></pre></td></tr></table></figure><pre><code class="hljs">    7. enum hackçš„è¡Œä¸ºæ›´åƒæ˜¯#defineè€Œä¸åƒconstï¼Œå› ä¸ºå–enumçš„åœ°å€ä¸åˆæ³•ï¼Œå¦‚æœä¸æƒ³è®©åˆ«äººé€šè¿‡æŒ‡é’ˆæˆ–è€…å¼•ç”¨æŒ‡å‘æŸä¸ªæ•´æ•°å˜é‡ï¼Œenumå¯ä»¥å®ç°ã€‚</code></pre><ol start="5" type="1"><li>defineè¯¯ç”¨æƒ…å†µå®ç°å®<ol type="1"><li>å®ä¸­çš„æ‰€æœ‰å®å‚è¦åŠ ä¸Šå°æ‹¬å·ï¼Œå¦åˆ™å›å‡ºé—®é¢˜ï¼Œå³ä½¿åŠ äº†å°æ‹¬å·ï¼Œä¹Ÿä¼šæœ‰é—®é¢˜</li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">callWithMax</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">f</span>(a &gt; b ? a : b);<br>&#125;<br></code></pre></td></tr></table></figure><pre><code class="hljs">2. å¯¹äºå½¢ä¼¼å‡½æ•°çš„å®ï¼Œæœ€å¥½æ”¹ç”¨inlineå‡½æ•°æ›¿æ¢#define</code></pre><h2 id="å°½å¯èƒ½ä½¿ç”¨const">3. å°½å¯èƒ½ä½¿ç”¨const</h2><ol type="1"><li>constå…è®¸æŒ‡å®šä¸€ä¸ªè¯­ä¹‰çº¦æŸï¼ˆä¸è¢«æ”¹åŠ¨çš„å¯¹è±¡ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå¼ºåˆ¶å®æ–½è¿™é¡¹çº¦æŸã€‚</li><li>conståœ¨<em>å·¦è¾¹ï¼Œè¡¨ç¤ºè¢«æŒ‡ç‰©æ˜¯å¸¸é‡ï¼Œå¦‚æœåœ¨</em>å³è¾¹ï¼Œè¡¨ç¤ºæŒ‡é’ˆè‡ªèº«æ˜¯å¸¸é‡ï¼Œå¦‚æœå‡ºç°åœ¨å‹å·ä¸¤è¾¹ï¼Œè¡¨ç¤ºè¢«æŒ‡ç‰©å’ŒæŒ‡é’ˆä¸¤è€…éƒ½æ˜¯å¸¸é‡ã€‚</li><li>è¢«æŒ‡ç‰©æ˜¯å¸¸é‡ï¼Œconstå†™åœ¨ç±»å‹ä¹‹å‰æˆ–è€…ç±»å‹ä¹‹åæ˜Ÿå·ä¹‹å‰ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f1</span><span class="hljs-params">(<span class="hljs-type">const</span> Widget* pw)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f2</span><span class="hljs-params">(Widget <span class="hljs-type">const</span> * pw)</span></span>;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>STLè¿­ä»£å™¨ä½œç”¨å°±åƒT*æŒ‡é’ˆã€‚ä¸èƒ½æŒ‡å‘ä¸åŒçš„ä¸œè¥¿ï¼Œä½†æŒ‡å‘çš„ä¸œè¥¿çš„å€¼å¯ä»¥æ”¹åŠ¨</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">int</span>&gt;::iterator iter = vec.<span class="hljs-built_in">begin</span>();   <span class="hljs-comment">//iterä½œç”¨ç±»ä¼¼T* const</span><br></code></pre></td></tr></table></figure><pre><code class="hljs">1. è‹¥å¸Œæœ›æ‰€æŒ‡çš„ä¸œè¥¿ä¸èƒ½æ”¹å˜ï¼Œï¼Œéœ€è¦ç”¨const_iterator,ç±»ä¼¼äºconst T*æŒ‡é’ˆ</code></pre><ol start="5" type="1"><li>constæˆå‘˜å‡½æ•°<ol type="1"><li>å°†constå®æ–½äºæˆå‘˜å‡½æ•°çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ç¡®è®¤è¯¥æˆå‘˜å‡½æ•°å¯ä½œç”¨åŸŸconstå¯¹è±¡èº«ä¸Š</li><li>å®ƒä»¬ä½¿classæ¥å£æ¯”è¾ƒå®¹æ˜“è¢«ç†è§£</li><li>ä½¿â€œæ“ä½œconstå¯¹è±¡æˆä¸ºâ€å¯èƒ½</li><li>ä¸¤ä¸ªæˆå‘˜å‡½æ•°å¦‚æœåªæ˜¯å¸¸é‡æ€§ä¸åŒï¼Œå¯ä»¥è¢«é‡è½½</li><li>constå¯¹è±¡å¤§å¤šç”¨äºpassed by pointer-to-constæˆ–è€…passed byreference-to-constçš„ä¼ é€’ç»“æœ</li><li>å¦‚æœå‡½æ•°çš„è¿”å›ç±»å‹æ˜¯ä¸ªå†…ç½®ç±»å‹ï¼Œé‚£ä¹ˆæ”¹åŠ¨å‡½æ•°è¿”å›å€¼ä»æ¥å°±ä¸åˆæ³•</li><li>åˆ©ç”¨c++çš„ä¸€ä¸ªä¸constç›¸å…³çš„æ‘†åŠ¨åœºï¼šmutableï¼ˆå¯å˜çš„ï¼‰,mutableé‡Šæ”¾æ‰non-staticæˆå‘˜å˜é‡çš„bitwiseconstnessçº¦æŸ</li><li><img src="/2024/11/27/effective-cpp/1-%E8%AE%A9%E8%87%AA%E5%B7%B1%E4%B9%A0%E6%83%AFC++/1706023482888-a652dfb6-7325-4073-a359-8a272e1add87.png"></li></ol></li><li>åœ¨constå’Œnon-constæˆå‘˜å‡½æ•°ä¸­é¿å…é‡å¤<ol type="1"><li>constæˆå‘˜å‡½æ•°æ‰¿è¯ºç»ä¸æ”¹å˜å…¶å¯¹è±¡çš„é€»è¾‘çŠ¶æ€ï¼Œå¦‚æœåœ¨constå‡½æ•°å†…è°ƒç”¨non-constå‡½æ•°ï¼Œå°±ä¼šå†’é£é™©</li></ol></li><li>å°†æŸäº›ä¸œè¥¿å£°æ˜ä¸ºconstå¯å¸®åŠ©ç¼–è¯‘å™¨ä¾¦æµ‹å‡ºé”™è¯¯ç”¨æ³•ã€‚constå¯è¢«æ–½åŠ äºä»»ä½•ä½œç”¨åŸŸå†…çš„å¯¹è±¡ã€å‡½æ•°å‚æ•°ã€å‡½æ•°è¿”å›ç±»å‹ã€æˆå‘˜å‡½æ•°æœ¬ä½“ã€‚</li><li>ç¼–è¯‘å™¨å¼ºåˆ¶å®æ–½bitwiseconstnessï¼Œä½†ä½ ç¼–å†™ç¨‹åºæ—¶åº”è¯¥ä½¿ç”¨â€œæ¦‚å¿µä¸Šçš„å¸¸é‡æ€§â€</li><li>å½“constå’Œnon-constæˆå‘˜å‡½æ•°æœ‰ç€å®è´¨ç­‰ä»·çš„å®ç°æ—¶ï¼Œä»¤non-constç‰ˆæœ¬è°ƒç”¨constç‰ˆæœ¬å¯é¿å…ä»£ç é‡å¤</li></ol><h2 id="ç¡®å®šå¯¹è±¡ä½¿ç”¨å‰å·²å…ˆè¢«åˆå§‹åŒ–">4. ç¡®å®šå¯¹è±¡ä½¿ç”¨å‰å·²å…ˆè¢«åˆå§‹åŒ–</h2><ol type="1"><li>è¯»å–æœªåˆå§‹åŒ–çš„å€¼ä¼šå¯¼è‡´ä¸æ˜ç¡®çš„è¡Œä¸ºã€‚<ol type="1"><li>åœ¨æŸäº›å¹³å°ä¸Šï¼Œè¯»å–æœªåˆå§‹åŒ–çš„å€¼ï¼Œå¯èƒ½ä½¿ç¨‹åºç»ˆæ­¢</li><li>å¯èƒ½è¯»å…¥ä¸€äº›åŠéšæœºçš„bitsï¼Œæ±¡æŸ“äº†æ­£åœ¨è¿›è¡Œè¯»å–æ“ä½œçš„é‚£ä¸ªå¯¹è±¡ï¼Œæœ€ç»ˆå¯¼è‡´ä¸å¯é¢„çŸ¥çš„ç¨‹åºè¡Œä¸ºï¼Œä»¥åŠä»¤äººä¸æ„‰å¿«çš„è°ƒè¯•è¿‡ç¨‹</li></ol></li><li>æ°¸è¿œåœ¨é€‚ç”¨å¯¹è±¡ä¹‹å‰å…ˆå°†å®ƒåˆå§‹åŒ–ã€‚å¯¹äºæ— ä»»ä½•æˆå‘˜çš„å†…ç½®ç±»å‹ï¼Œå¿…é¡»æ‰‹å·¥å®Œæˆï¼Œç¡®ä¿æ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½å°†å¯¹è±¡çš„æ¯ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">0</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">char</span>* text = <span class="hljs-string">&quot;A C-style string&quot;</span>;<br><br><span class="hljs-type">double</span> d;<br>std::cin &gt;&gt; d;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æ³¨æ„èµ‹å€¼å’Œåˆå§‹åŒ–çš„åŒºåˆ«ï¼ŒABEntryæ„é€ å‡½æ•°çš„ä¸€ä¸ªè¾ƒä½³å†™æ³•æ˜¯ï¼Œä½¿ç”¨æ‰€è°“çš„æˆå‘˜åˆå€¼åˆ—æ›¿æ¢èµ‹å€¼åŠ¨ä½œï¼šæ•ˆç‡æ›´é«˜</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">ABEntry::<span class="hljs-built_in">ABEntry</span>(<span class="hljs-type">const</span> std::string&amp; name):<span class="hljs-built_in">theName</span>(name)&#123;&#125;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>å¯¹äºå¤§å¤šæ•°ç±»å‹è€Œè¨€ï¼Œæ¯”èµ·å…ˆè°ƒç”¨defaultç‹—åœ¨å‡½æ•°ç„¶åå†è°ƒç”¨copyassignmentæ“ä½œç¬¦ï¼Œå•åªè°ƒç”¨ä¸€æ¬¡copyæ„é€ å‡½æ•°æ—¶æ¯”è¾ƒé«˜æ•ˆçš„ã€‚</li><li>è¦defaultæ„é€ ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨æˆå‘˜åˆå€¼åˆ—ï¼Œåªè¦æŒ‡å®šæ— ç‰©ä½œä¸ºåˆå§‹åŒ–å®å‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">ABEntry::<span class="hljs-built_in">ABEntry</span>()<br>    :<span class="hljs-built_in">theName</span>(),<br>     <span class="hljs-built_in">numTimesConsulted</span>(<span class="hljs-number">0</span>)<span class="hljs-comment">//æ˜¾å¼åˆå§‹åŒ–ä¸º0</span><br>&#123;&#125;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>ç¼–è¯‘å™¨ä¼šä¸ºç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ä¹‹æˆå‘˜å˜é‡è‡ªåŠ¨è°ƒç”¨defaultæ„é€ å‡½æ•°â€”â€”å¦‚æœé‚£äº›æˆå‘˜å˜é‡åœ¨æˆå‘˜åˆå€¼åˆ—ä¸­æ²¡æœ‰è¢«æŒ‡å®šåˆå€¼çš„è¯</li><li>è§„å®šæ€»æ˜¯åœ¨åˆå€¼åˆ—ä¸­åˆ—å‡ºæ‰€æœ‰æˆå‘˜å˜é‡</li><li>æœ‰äº›æƒ…å†µï¼Œå³ä½¿æˆå‘˜å˜é‡å±äºå†…ç½®ç±»å‹ï¼Œä¹Ÿä¸€å®šè¦ä½¿ç”¨åˆå€¼åˆ—ã€‚å¦‚æœæˆå‘˜å˜é‡æ—¶constæˆ–è€…referencesï¼Œå°±ä¸€å®šè¦ä½¿ç”¨åˆå€¼ï¼Œä¸èƒ½è¢«èµ‹å€¼</li><li>æ€»æ˜¯ä½¿ç”¨æˆå‘˜åˆå€¼åˆ—ï¼Œè¿™æ ·åšæœ‰æ—¶å€™ç»å¯¹å¿…è¦ï¼Œä¸”åˆå¾€å¾€æ¯”èµ‹å€¼æ›´é«˜æ•ˆ</li><li>è®¸å¤šç±»æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°æœ‰è‡ªå·±çš„æˆå‘˜åˆå€¼åˆ—ï¼Œå¦‚æœè¿™ç§ç±»å­˜åœ¨è®¸å¤šæˆå‘˜å˜é‡æˆ–åŸºç±»ï¼Œå¤šä»½æˆå‘˜åˆå€¼åˆ—çš„å­˜åœ¨å°±ä¼šå¯¼è‡´é‡å¤ã€‚è¿™ç§æƒ…å†µåœ¨åˆå€¼åˆ—ä¸­é—æ¼é‚£äº›â€œèµ‹å€¼è¡¨ç°åƒåˆå§‹åŒ–ä¸€æ ·å¥½â€çš„æˆå‘˜å˜é‡ï¼Œæ”¹ç”¨å®ƒä»¬çš„èµ‹å€¼æ“ä½œï¼Œå¹¶å°†é‚£äº›èµ‹å€¼æ“ä½œç§»å¾€æŸä¸ªå‡½æ•°ï¼ˆé€šå¸¸æ˜¯privateï¼‰ï¼Œä¾›æ‰€æœ‰æ„é€ å‡½æ•°è°ƒç”¨</li><li>c++æœ‰å›ºå®šçš„æˆå‘˜åˆå§‹åŒ–æ¬¡åºï¼ŒåŸºç±»æ›´æ—©äºæ´¾ç”Ÿç±»è¢«åˆå§‹åŒ–ï¼Œç±»æˆå‘˜å˜é‡æ€»æ˜¯ä»¥å…¶å£°æ˜æ¬¡åºè¢«åˆå§‹åŒ–ï¼Œå³ä½¿ä»–ä»¬åœ¨æˆå‘˜åˆå§‹åˆ—ä¸­ä»¥ä¸åŒçš„æ¬¡åºå‡ºç°ã€‚ä¸ºé¿å…ä¸€äº›æ™¦æ¶©é”™è¯¯ï¼Œå½“åœ¨æˆå‘˜åˆå€¼åˆ—ä¸­æ¡åˆ—å„ä¸ªæˆå‘˜æ—¶ï¼Œæœ€å¥½æ€»æ˜¯ä»¥å…¶å£°æ˜æ¬¡åºä¸ºæ¬¡åºï¼ˆä¸¤ä¸ªæˆå‘˜å˜é‡çš„åˆå§‹åŒ–å¸¦æœ‰æ¬¡åºæ€§ï¼Œä¾‹å¦‚åˆå§‹åŒ–arrayæ—¶è¦åˆ¶å®šå¤§å°ï¼Œå› æ­¤ä»£è¡¨å¤§å°çš„é‚£ä¸ªæˆå‘˜å˜é‡å¿…é¡»å…ˆæœ‰åˆå€¼ï¼‰ã€‚</li><li>non-local staticå¯¹è±¡<ol type="1"><li>staticå¯¹è±¡ï¼Œå¯¿å‘½ä»è¢«æ„é€ å‡ºæ¥ç›´åˆ°ç¨‹åºç»“æŸä¸ºæ­¢ï¼Œå› æ­¤stackå’Œheap-basedå¯¹è±¡éƒ½è¢«æ’é™¤ã€‚åŒ…æ‹¬globalã€å®šä¹‰äºnamespaceä½œç”¨åŸŸå†…ã€åœ¨calsseså†…ã€åœ¨å‡½æ•°å†…ã€åœ¨fileä½œç”¨åŸŸå†…è¢«å£°æ˜ä¸ºstaticçš„å¯¹è±¡ã€‚</li><li>å‡½æ•°å†…çš„staticå¯¹è±¡ç§°ä¸ºlocal static å¯¹è±¡ï¼Œå…¶ä»–staticå¯¹è±¡ç§°ä¸ºnon-localstaticå¯¹è±¡ã€‚ç¨‹åºç»“æŸæ—¶staticå¯¹è±¡å°±ä¼šè¢«è‡ªåŠ¨é”€æ¯ï¼Œä¹Ÿå°±æ˜¯ä»–ä»¬çš„ææ„å‡½æ•°ä¼šåœ¨main()ç»“æŸæ—¶è¢«è‡ªåŠ¨è°ƒç”¨ã€‚</li><li>ç¼–è¯‘å•å…ƒæ˜¯æŒ‡äº§å‡ºå•ä¸€ç›®æ ‡æ–‡ä»¶çš„æºç ï¼Œæ—¶å•ä¸€æºç æ–‡ä»¶åŠ ä¸Šå…¶æ‰€å«å…¥çš„å¤´æ–‡ä»¶</li><li>å¦‚æœæŸç¼–è¯‘å•å…ƒå†…çš„æŸä¸ªnon-localstaticå¯¹è±¡çš„åˆå§‹åŒ–åŠ¨ä½œä½¿ç”¨äº†å¦ä¸€ç¼–è¯‘å•å…ƒå†…çš„æŸä¸ªnon-localstaticå¯¹è±¡ï¼Œä»–æ‰€ç”¨åˆ°çš„è¿™ä¸ªå¯¹è±¡å¯èƒ½å°šæœªè¢«åˆå§‹åŒ–ï¼Œå› ä¸ºC++å¯¹äºå®šä¹‰äºä¸åŒç¼–è¯‘å•å…ƒå†…çš„non-localstaticå¯¹è±¡çš„åˆå§‹åŒ–æ¬¡åºå¹¶æ— æ˜ç¡®å®šä¹‰</li><li>å°†æ¯ä¸ªnon-localstaticå¯¹è±¡æ¬åˆ°è‡ªå·±çš„ä¸“å±å‡½æ•°å†…ï¼ˆè¯¥å¯¹è±¡åœ¨æ­¤å‡½æ•°å†…è¢«å£°æ˜ä¸ºstaticï¼‰ã€‚è¿™äº›å‡½æ•°è¿”å›ä¸€ä¸ªreferenceæŒ‡å‘å®ƒæ‰€åŒ…å«çš„å¯¹è±¡ã€‚ç„¶åç”¨æˆ·è°ƒç”¨è¿™äº›å‡½æ•°ã€‚è¿™æ˜¯Singletonæ¨¡å¼çš„ä¸€ä¸ªå¸¸è§å®ç°æ‰‹æ³•ã€‚</li><li>å‡½æ•°å†…çš„localstaticå¯¹è±¡ä¼šåœ¨è¯¥å‡½æ•°è¢«è°ƒç”¨ã€é¦–æ¬¡é‡ä¸Šè¯¥å¯¹è±¡ä¹‹å®šä¹‰å¼æ—¶è¢«åˆå§‹åŒ–ã€‚æ‰€ä»¥ç”¨å‡½æ•°è°ƒç”¨ï¼ˆè¿”å›ä¸€ä¸ªreferenceæŒ‡å‘localstaticå¯¹è±¡ï¼‰æ›¿æ¢ç›´æ¥è®¿é—®non-localstaticå¯¹è±¡ï¼Œä¿è¯è·å¾—çš„referenceså°†æŒ‡å‘ä¸€ä¸ªå†ç»åˆå§‹åŒ–çš„å¯¹è±¡ã€‚</li><li>æ›´æ£’çš„æ˜¯ï¼Œå¦‚æœä»æœªè°ƒç”¨non-localstaticå¯¹è±¡çš„â€œä»¿çœŸå‡½æ•°â€ï¼Œå°±ç»ä¸ä¼šå¼•å‘æ„é€ å’Œææ„æˆæœ¬</li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileSystem</span>&#123;&#125;;<br><span class="hljs-function">FileSystem&amp; <span class="hljs-title">tfs</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">static</span> FileSystem fs;<br>    <span class="hljs-keyword">return</span> fs;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Directory</span>&#123;&#125;;<br>Directory::<span class="hljs-built_in">Directory</span>()<br>&#123;<br>    std::<span class="hljs-type">size_t</span> disks = <span class="hljs-built_in">tfs</span>().<span class="hljs-built_in">numDisks</span>();<br>&#125;<br><br><span class="hljs-function">Directory&amp; <span class="hljs-title">tempDir</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">static</span> Directory td;<br>    <span class="hljs-keyword">return</span> td;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="13" type="1"><li>è¿™ç§ç»“æ„ä¸‹çš„reference-returningå‡½æ•°å¾€å¾€ååˆ†å•çº¯ï¼šç¬¬ä¸€è¡Œå®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªlocalstaticå¯¹è±¡ï¼Œç¬¬äºŒè¡Œè¿”å›å®ƒã€‚å¦‚æœé¢‘ç¹è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨inliningã€‚</li><li>ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œè¿™äº›å‡½æ•°å†…å«tataicå¯¹è±¡ï¼Œåœ¨å¤šçº¿ç¨‹ç³»ç»Ÿä¸­å¸¦æœ‰ä¸ç¡®å®šæ€§ã€‚</li><li>ä»»ä½•ä¸€ç§non-conststaticå¯¹è±¡ï¼Œæ— è®ºå®ƒæ˜¯localè¿˜æ˜¯non-localï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹â€œç­‰å¾…æŸäº‹å‘ç”Ÿâ€éƒ½ä¼šæœ‰éº»çƒ¦ã€‚å¤„ç†è¿™ä¸ªéº»çƒ¦çš„ä¸€ç§åšæ³•æ˜¯ï¼šåœ¨ç¨‹åºçš„å•çº¿ç¨‹å¯åŠ¨é˜¶æ®µæ‰‹å·¥è°ƒç”¨æ‰€æœ‰reference-returningå‡½æ•°ï¼Œè¿™å¯ä»¥æ¶ˆé™¤ä¸åˆå§‹åŒ–æœ‰å…³çš„â€œç«é€Ÿå½¢åŠ¿â€ã€‚</li><li>è¿ç”¨reference-returningå‡½æ•°é˜²æ­¢â€œåˆå§‹åŒ–æ¬¡åºé—®é¢˜â€ï¼Œå‰ææ˜¯å…¶ä¸­æœ‰ç€å¾ˆä¸€ä¸ªå¯¹å¯¹è±¡è€Œè¨€åˆç†çš„åˆå§‹åŒ–æ¬¡åºã€‚å¦‚æœæœ‰ä¸€ä¸ªç³»ç»Ÿï¼Œå…¶ä¸­å¯¹è±¡Aå¿…é¡»åœ¨å¯¹è±¡Bä¹‹å‰å…ˆåˆå§‹åŒ–ï¼Œä½†Açš„åˆå§‹åŒ–èƒ½å¦æˆåŠŸå´åˆå—åˆ¶äºBæ˜¯å¦å·²è¢«åˆå§‹åŒ–</li><li>åœ¨é¿å…å¯¹è±¡åˆå§‹åŒ–ä¹‹å‰è¿‡æ—©åœ°ä½¿ç”¨å®ƒä»¬<ol type="1"><li>æ‰‹å·¥åˆå§‹åŒ–å†…ç½®å‹non-memberå¯¹è±¡</li><li>ä½¿ç”¨æˆå‘˜åˆå€¼åˆ—å¯¹ä»˜å¯¹è±¡çš„æ‰€æœ‰æˆåˆ†</li><li>åœ¨åˆå§‹åŒ–æ¬¡åºä¸ç¡®å®šæ€§æ°›å›´ä¸‹åŠ å¼ºä½ çš„è®¾è®¡ï¼ˆå¯¹ä¸åŒç¼–è¯‘å•å…ƒå®šä¹‰çš„non-localstaticå¯¹è±¡æ˜¯ä¸€ç§æŠ˜ç£¨ï¼‰</li></ol></li><li>å¯¹å†…ç½®å‹å¯¹è±¡è¿›è¡Œæ‰‹å·¥åˆå§‹åŒ–ï¼Œå› ä¸ºc++ä¸ä¿è¯åˆå§‹åŒ–å®ƒä»¬</li><li>æ„é€ å‡½æ•°æœ€å¥½ä½¿ç”¨æˆå‘˜åˆå€¼åˆ—ï¼Œè€Œä¸è¦åœ¨æ„é€ å‡½æ•°æœ¬ä½“å†…ä½¿ç”¨èµ‹å€¼æ“ä½œã€‚åˆå€¼åˆ—åˆ—å‡ºçš„æˆå‘˜å˜é‡ï¼Œå…¶æ’åˆ—æ¬¡åºåº”è¯¥å’Œä»–ä»¬åœ¨classä¸­çš„å£°æ˜æ¬¡åºç›¸åŒ</li><li>ä¸ºé¿å…è·¨ç¼–è¯‘å•å…ƒä¹‹åˆå§‹åŒ–æ¬¡åºé—®é¢˜ï¼Œç”¨local staticå¯¹è±¡æ›¿æ¢non-localstaticå¯¹è±¡</li></ol>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>effective c++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>17. ioã€file</title>
    <link href="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/"/>
    <url>/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/</url>
    
    <content type="html"><![CDATA[<h2 id="cè¾“å…¥å’Œè¾“å‡ºæ¦‚è¿°">17.1 C++è¾“å…¥å’Œè¾“å‡ºæ¦‚è¿°</h2><h3 id="æµå’Œç¼“å†²åŒº">17.1.1 æµå’Œç¼“å†²åŒº</h3><ul><li>C++ç¨‹åºæŠŠè¾“å…¥å’Œè¾“å‡ºçœ‹ä½œå­—èŠ‚æµ</li><li>streambufç±»ä¸ºç¼“å†²åŒºæä¾›äº†å†…å­˜ï¼Œå¹¶æä¾›äº†ç”¨äºå¡«å……ç¼“å†²åŒºã€è®¿é—®ç¼“å†²åŒºå†…å®¹ã€åˆ·æ–°ç¼“å†²åŒºå’Œç®¡ç†ç¼“å†²åŒºå†…å­˜çš„ç±»æ–¹æ³•</li><li>iosbaseç±»è¡¨ç¤ºæµçš„ä¸€èˆ¬ç‰¹å¾ï¼Œå¦‚æ˜¯å¦å¯è¯»å–ã€æ˜¯äºŒè¿›åˆ¶æµè¿˜æ˜¯æ–‡æœ¬æµç­‰ï¼š</li><li>iosç±»åŸºäºios base,å…¶ä¸­åŒ…æ‹¬äº†ä¸€ä¸ªæŒ‡å‘streambufå¯¹è±¡çš„æŒ‡é’ˆæˆå‘˜ï¼›</li><li>ostreamç±»æ˜¯ä»iosç±»æ´¾ç”Ÿè€Œæ¥çš„ï¼Œæä¾›äº†è¾“å‡ºæ–¹æ³•ï¼š</li><li>istreamç±»ä¹Ÿæ˜¯ä»iosç±»æ´¾ç”Ÿè€Œæ¥çš„ï¼Œæä¾›äº†è¾“å…¥æ–¹æ³•ï¼š</li><li>iostreamç±»æ˜¯åŸºäºistreamå’Œostreamç±»çš„ï¼Œå› æ­¤ç»§æ‰¿äº†è¾“å…¥æ–¹æ³•å’Œè¾“å‡ºæ–¹æ³•ã€‚</li></ul><p>C+çš„iostreamç±»åº“ç®¡ç†äº†å¾ˆå¤šç»†èŠ‚ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¨‹åºä¸­åŒ…å«iostreamæ–‡ä»¶å°†è‡ªåŠ¨åˆ›å»º8ä¸ªæµå¯¹è±¡(4ä¸ªç”¨äºçª„å­—ç¬¦æµï¼Œ4ä¸ªç”¨äºå®½å­—ç¬¦æµ)ã€‚</p><ul><li>cinå¯¹è±¡å¯¹åº”äºæ ‡å‡†è¾“å…¥æµã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæµè¢«å…³è”åˆ°æ ‡å‡†è¾“å…¥è®¾å¤‡ï¼ˆé€šå¸¸ä¸ºé”®ç›˜ï¼‰ã€‚wcinå¯¹è±¡ä¸æ­¤ç±»ä¼¼ï¼Œä½†å¤„ç†çš„æ˜¯wchar_tç±»å‹ã€‚</li><li>coutå¯¹è±¡ä¸æ ‡å‡†è¾“å‡ºæµç›¸å¯¹åº”ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæµè¢«å…³è”åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆé€šå¸¸ä¸ºæ˜¾ç¤ºå™¨ï¼‰ã€‚wcoutå¯¹è±¡ä¸æ­¤ç±»ä¼¼ï¼Œä½†å¤„ç†çš„æ˜¯wchar_tç±»å‹ã€‚</li><li>cerrå¯¹è±¡ä¸æ ‡å‡†é”™è¯¯æµç›¸å¯¹åº”ï¼Œå¯ç”¨äºæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæµè¢«å…³è”åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆé€šå¸¸ä¸ºæ˜¾ç¤ºå™¨ï¼‰ã€‚è¿™ä¸ªæµæ²¡æœ‰è¢«ç¼“å†²ï¼Œè¿™æ„å‘³ç€ä¿¡æ¯å°†è¢«ç›´æ¥å‘é€ç»™å±å¹•ï¼Œè€Œä¸ä¼šç­‰åˆ°ç¼“å†²åŒºå¡«æ»¡æˆ–æ–°çš„æ¢è¡Œç¬¦ã€‚wcerrå¯¹è±¡ä¸æ­¤ç±»ä¼¼ï¼Œä½†å¤„ç†çš„æ˜¯wchartç±»å‹ã€‚</li><li>clogå¯¹è±¡ä¹Ÿå¯¹åº”ç€æ ‡å‡†é”™è¯¯æµã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæµè¢«å…³è”åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆé€šå¸¸ä¸ºæ˜¾ç¤ºå™¨ï¼‰ã€‚è¿™ä¸ªæµè¢«ç¼“å†²ã€‚wclogå¯¹è±¡ä¸æ­¤ç±»ä¼¼ï¼Œä½†å¤„ç†çš„æ˜¯wchartç±»å‹ã€‚</li><li>å¯¹è±¡ä»£è¡¨æµâ€”â€”è¿™æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿå½“iostreamæ–‡ä»¶ä¸ºç¨‹åºå£°æ˜ä¸€ä¸ªcoutå¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡å°†åŒ…å«å­˜å‚¨äº†ä¸è¾“å‡ºæœ‰å…³çš„ä¿¡æ¯çš„æ•°æ®æˆå‘˜ï¼Œå¦‚æ˜¾ç¤ºæ•°æ®æ—¶ä½¿ç”¨çš„å­—æ®µå®½åº¦ã€å°æ•°ä½æ•°ã€æ˜¾ç¤ºæ•´æ•°æ—¶é‡‡ç”¨çš„è®¡æ•°æ–¹æ³•ä»¥åŠæè¿°ç”¨æ¥å¤„ç†è¾“å‡ºæµçš„ç¼“å†²åŒºçš„streambufå¯¹è±¡çš„åœ°å€ã€‚ä¸‹é¢çš„è¯­å¥é€šè¿‡æŒ‡å‘çš„streambufå¯¹è±¡å°†å­—ç¬¦ä¸²â€œBjarnafreeâ€ä¸­çš„å­—ç¬¦æ”¾åˆ°coutç®¡ç†çš„ç¼“å†²åŒºä¸­ï¼š<img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705237228595-bdc01ffb-ffa6-4208-8926-60c13c5b6abe.png" alt="img"></li></ul><h2 id="ä½¿ç”¨coutè¿›è¡Œè¾“å‡º">17.2 ä½¿ç”¨coutè¿›è¡Œè¾“å‡º</h2><ol type="1"><li>ä¸è¦å¿˜äº†ï¼ŒC++ç”¨æŒ‡å‘å­—ç¬¦ä¸²å­˜å‚¨ä½ç½®çš„æŒ‡é’ˆæ¥è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚æŒ‡é’ˆçš„å½¢å¼å¯ä»¥æ˜¯charæ•°ç»„åã€æ˜¾å¼çš„charæŒ‡é’ˆæˆ–ç”¨å¼•å·æ‹¬èµ·çš„å­—ç¬¦ä¸²ã€‚å› æ­¤ï¼Œä¸‹é¢æ‰€æœ‰çš„coutè¯­å¥éƒ½æ˜¾ç¤ºå­—ç¬¦ä¸²ï¼š</li></ol><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705245139233-1b798f50-772f-436a-9f16-88415e2056b4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>å¯¹äºå…¶ä»–ç±»å‹çš„æŒ‡é’ˆï¼ŒC++å°†å…¶å¯¹åº”äºVod*,å¹¶æ‰“å°åœ°å€çš„æ•°å€¼è¡¨ç¤ºã€‚å¦‚æœè¦è·å¾—å­—ç¬¦ä¸²çš„åœ°å€ï¼Œåˆ™å¿…é¡»å°†å…¶å¼ºåˆ¶è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼š</li></ol><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705245175479-75b89dd8-fd6c-46c8-8810-34a63958facd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>ç¼“å†²åŒº</li></ol><ul><li>ç¼“å†²åŒºä¸º512çš„æ•´æ•°å€ï¼Œè¾“å‡ºåˆ°å±å¹•æ—¶ï¼Œæ¢è¡Œç¬¦å‘é€åˆ°ç¼“å†²åŒºå°†ä¼šåˆ·æ–°ç¼“å†²åŒº</li><li>è¾“å…¥å³å°†å‘ç”Ÿæ—¶åˆ·æ–°ç¼“å†²åŒº</li><li>cout&lt;&lt;flush åˆ·æ–°</li></ul><ol type="1"><li>ç”¨coutæ ¼å¼åŒ–</li></ol><ul><li><p>è®¡æ•°ç³»ç»Ÿ</p></li><li><ul><li>æ¥çœ‹å¦‚ä½•è®¾ç½®æ˜¾ç¤ºæ•´æ•°æ—¶ä½¿ç”¨çš„è®¡æ•°ç³»ç»Ÿã€‚è¦æ§åˆ¶æ•´æ•°ä»¥åè¿›åˆ¶ã€åå…­è¿›åˆ¶è¿˜æ˜¯å…«è¿›åˆ¶æ˜¾ç¤ºï¼Œå¯ä»¥ä½¿ç”¨decã€hexå’Œoctæ§åˆ¶ç¬¦ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°è°ƒç”¨å°†coutå¯¹è±¡çš„è®¡æ•°ç³»ç»Ÿæ ¼å¼çŠ¶æ€è®¾ç½®ä¸ºåå…­è¿›åˆ¶ï¼šhex(cout)ä»¥åå…­è¿›åˆ¶æ‰“å°æ•´æ•°å€¼ï¼Œä¹Ÿå¯ä»¥cout&lt;&lt; hex;</li></ul></li><li><p>è°ƒæ•´å­—æ®µå®½åº¦</p></li><li><ul><li>widh()æ–¹æ³•åªå½±å“å°†æ˜¾ç¤ºçš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå­—æ®µå®½åº¦å°†æ¢å¤ä¸ºé»˜è®¤å€¼ã€‚å³å¯¹é½</li></ul></li><li><p>å¡«å……å­—ç¬¦</p></li><li><ul><li>coutç”¨ç©ºæ ¼å¡«å……å­—æ®µä¸­æœªè¢«ä½¿ç”¨çš„éƒ¨åˆ†ï¼Œå¯ä»¥ç”¨fill()æˆå‘˜å‡½æ•°æ¥æ”¹å˜å¡«å……å­—ç¬¦</li><li>cout.fill('*')</li></ul></li><li><p>è®¾ç½®æµ®ç‚¹æ•°çš„æ˜¾ç¤ºç²¾åº¦</p></li><li><ul><li>precision(2)ç²¾åº¦è®¾ç½®ä¸º2</li></ul></li><li><p>æ‰“å°æœ«å°¾çš„0å’Œå°æ•°ç‚¹</p></li><li><ul><li>ios_baseæä¾›äº†setf()å‡½æ•°</li><li>cout.setf(ios_base::showpoint); coutæ˜¾ç¤ºæœ«å°¾å°æ•°ç‚¹</li></ul></li><li><p>å†è°ˆsetf</p></li><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705300561842-d11e82f0-3247-44b3-9d1b-f0bcf7cf2a37.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705300777494-e65f71b2-8751-47c6-b216-cd25af40e0a6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705300787233-3bc3f62d-e9a5-4d70-9dcf-7ef7997eb842.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è°ƒç”¨setf()çš„æ•ˆæœå¯ä»¥é€šè¿‡unsetf()æ¶ˆé™¤ï¼Œåè€…çš„åŸå‹å¦‚ä¸‹ï¼š</li><li>void unsetf(fmtflags mask);</li><li>å…¶ä¸­ï¼Œmaskæ˜¯ä½æ¨¡å¼ã€‚maskä¸­æ‰€æœ‰çš„ä½éƒ½è®¾ç½®ä¸º1ï¼Œå°†ä½¿å¾—å¯¹åº”çš„ä½è¢«å¤ä½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsetf()å°†ä½è®¾ç½®ä¸º1ï¼Œunsetf()å°†ä½æ¢å¤ä¸º0ã€‚ä¾‹å¦‚ï¼š</li><li>é»˜è®¤æ¨¡å¼ï¼šcout.setf(0,ios_base:floatfield);</li><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705302159803-125ed29f-5cbd-4aee-a679-eb3814c0b266.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li><li><p>æ ‡å‡†æ§åˆ¶ç¬¦</p></li><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705302361934-b694ca9a-a7a2-4252-ac51-a1e2cf948d18.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705302453821-2f6354ea-1628-4804-bed9-cc2031c17e3a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705302467106-79217348-497f-4fb3-80ac-65d0dff1c7ef.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li><li><p>å¤´æ–‡ä»¶iomanip</p></li><li><ul><li>å¸¸ç”¨setprecision()è®¾ç½®ç²¾åº¦ setfill()å¡«å……å­—ç¬¦ setw()å­—æ®µå®½åº¦</li></ul></li></ul><h2 id="ä½¿ç”¨cinè¿›è¡Œè¾“å…¥">17.3 ä½¿ç”¨cinè¿›è¡Œè¾“å…¥</h2><ul><li><p>å¯ä»¥å°†hexã€octå’Œdecæ§åˆ¶ç¬¦ä¸cinä¸€èµ·ä½¿ç”¨ï¼Œæ¥æŒ‡å®šå°†æ•´æ•°è¾“å…¥è§£é‡Šä¸ºåå…­è¿›åˆ¶ã€å…«è¿›åˆ¶å’Œåè¿›åˆ¶æ ¼å¼</p></li><li><ul><li>cin &gt;&gt; hex;</li></ul></li><li><p>cin&gt;&gt;å¦‚ä½•æ£€æŸ¥è¾“å…¥</p></li><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705303363661-5c9b6cd4-5262-445c-b5fb-a948f7b3b952.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li><li><p>æµçŠ¶æ€</p></li><li><ul><li>cinæˆ–coutå¯¹è±¡åŒ…å«ä¸€ä¸ªæè¿°æµçŠ¶æ€(stream state)çš„æ•°æ®æˆå‘˜ï¼ˆä»iosbaseç±»é‚£é‡Œç»§æ‰¿çš„ï¼‰ã€‚</li><li>æµçŠ¶æ€ï¼ˆè¢«å®šä¹‰ä¸ºiostateç±»å‹ï¼Œè€Œiostateæ˜¯ä¸€ç§bitmaskç±»å‹ï¼‰ç”±3ä¸ªiosbaseå…ƒç´ ç»„æˆï¼šeofbitã€badbitæˆ–failbit,å…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä½ï¼Œå¯ä»¥æ˜¯1ï¼ˆè®¾ç½®ï¼‰æˆ–0ï¼ˆæ¸…é™¤)ã€‚</li><li>å½“cinæ“ä½œåˆ°è¾¾æ–‡ä»¶æœ«å°¾æ—¶ï¼Œå®ƒå°†è®¾ç½®eofbit:</li><li>å½“cinæ“ä½œæœªèƒ½è¯»å–åˆ°é¢„æœŸçš„å­—ç¬¦æ—¶ï¼Œå®ƒå°†è®¾ç½®failbitã€‚I/Oå¤±è´¥ï¼ˆå¦‚è¯•å›¾è¯»å–ä¸å¯è®¿é—®çš„æ–‡ä»¶æˆ–è¯•å›¾å†™å…¥å†™ä¿æŠ¤çš„ç£ç›˜ï¼‰ï¼Œä¹Ÿå¯èƒ½å°†failbitè®¾ç½®ä¸º1ã€‚</li><li>åœ¨ä¸€äº›æ— æ³•è¯Šæ–­çš„å¤±è´¥ç ´åæµæ—¶ï¼Œbadbitå…ƒç´ å°†è¢«è®¾ç½®ï¼ˆå®ç°æ²¡æœ‰å¿…è¦å°±å“ªäº›æƒ…å†µä¸‹è®¾ç½®failbit,å“ªäº›æƒ…å†µä¸‹è®¾ç½®badbitè¾¾æˆä¸€è‡´)ã€‚å½“å…¨éƒ¨3ä¸ªçŠ¶æ€ä½éƒ½è®¾ç½®ä¸º0æ—¶ï¼Œè¯´æ˜ä¸€åˆ‡é¡ºåˆ©ã€‚</li><li><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705460694934-0372cfe8-71e9-4f33-b615-2da019862aad.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è®¾ç½®çŠ¶æ€</li></ul></li><li><ul><li><ul><li>clearï¼ˆï¼‰æ–¹æ³•å°†çŠ¶æ€è®¾ç½®ä¸ºå®ƒçš„å‚æ•°ã€‚clearï¼ˆï¼‰å°†ä½¿ç”¨é»˜è®¤å‚æ•°0ï¼Œæ¸…é™¤ä¸‰ä¸ªçŠ¶æ€ä½</li><li>clear(eofbit)çŠ¶æ€è®¾ç½®ä¸ºeofbitï¼Œå…¶ä»–ä¸¤ä¸ªçŠ¶æ€ä½è¢«æ¸…é™¤</li><li>setstate()æ–¹æ³•åªå½±å“å‚æ•°ä¸­å·²è®¾ç½®çš„ä½ï¼Œä¸‹é¢çš„è°ƒç”¨å°†è®¾ç½®eofbit,è€Œä¸ä¼šå½±å“å…¶ä»–ä½setstate(eofbit);</li></ul></li></ul></li><li><p>getline()å‡½æ•°å°†å¯¹å…¶è¾“å…¥ä¸­çš„å®šç•Œå­—ç¬¦#ï¼Œè€Œget()å‡½æ•°ä¸ä¼š</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> Limit = <span class="hljs-number">255</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">using</span> std::cout;<br><span class="hljs-keyword">using</span> std::cin;<br><span class="hljs-keyword">using</span> std::endl;<br><span class="hljs-type">char</span> input[Limit];<br><br>cout &lt;&lt; <span class="hljs-string">&quot;Enter a string for getline() processing:\n&quot;</span>;<br>cin.<span class="hljs-built_in">getline</span>(input, Limit, <span class="hljs-string">&#x27;#&#x27;</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;Here is your input:\n&quot;</span>;<br>cout &lt;&lt; input &lt;&lt; <span class="hljs-string">&quot;\nDone with pase 1\n&quot;</span>;<br><br><span class="hljs-type">char</span> ch;<br>cin.<span class="hljs-built_in">get</span>(ch);<br>cout &lt;&lt; <span class="hljs-string">&quot;The next input character is &quot;</span> &lt;&lt; ch &lt;&lt; endl;<br><br><span class="hljs-keyword">if</span> (ch != <span class="hljs-string">&#x27;\n&#x27;</span>)<br>&#123;<br>cin.<span class="hljs-built_in">ignore</span>(Limit, <span class="hljs-string">&#x27;\n&#x27;</span>);<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;Enter a string for get() processing : \n&quot;</span>;<br>cin.<span class="hljs-built_in">get</span>(input, Limit, <span class="hljs-string">&#x27;#&#x27;</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;Here is your input:\n&quot;</span>;<br>cout &lt;&lt; input &lt;&lt; <span class="hljs-string">&quot;\nDone with phase 2\n&quot;</span>;<br><br>cin.<span class="hljs-built_in">get</span>(ch);<br>cout &lt;&lt; <span class="hljs-string">&quot;The next input chatacter is &quot;</span> &lt;&lt; ch &lt;&lt; endl;<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705885194777-df6662fd-e5fb-41dd-a8a1-8c2b91f0bc4a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705885164889-75204fbc-874a-4e9c-a0e1-4ca564c490c1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ul><li>å…¶ä»–æ–¹æ³•</li><li>read()ä¸ä¼šåœ¨è¾“å…¥ååŠ ä¸Šç©ºå€¼å­—ç¬¦ï¼Œå› æ­¤ä¸èƒ½å°†è¾“å…¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</li><li>peek()å‡½æ•°è¿”å›è¾“å…¥ä¸­çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œä½†ä¸æ„å»è¾“å…¥æµä¸­çš„å­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–èƒ½æŸ¥çœ‹ä¸‹ä¸€ä¸ªå­—ç¬¦</li><li>gcount()æ–¹æ³•è¿”å›æœ€åä¸€ä¸ªéæ ¼å¼åŒ–æŠ½å–æ–¹æ³•è¯»å–çš„å­—ç¬¦æ•°ã€‚è¿™æ„å‘³ç€å­—ç¬¦æ˜¯ç”±get()ã€getline()ã€ignore()æˆ–è€…read()æ–¹æ³•è¯»å–çš„ï¼Œä¸æ˜¯ç”±æŠ½å–è¿ç®—ç¬¦&gt;&gt;è¯»å–çš„ï¼ŒæŠ½å–è¿ç®—ç¬¦å¯¹è¾“å…¥è¿›è¡Œæ ¼å¼åŒ–ï¼Œä½¿ä¹‹ä¸ç‰¹å®šçš„æ•°æ®ç±»å‹åŒ¹é…ï¼Œé€Ÿåº¦æ¯”strlenï¼ˆï¼‰æ…¢</li><li>putback()å‡½æ•°å°†ä¸€ä¸ªå­—ç¬¦æ’å…¥åˆ°è¾“å…¥å­—ç¬¦ä¸²ä¸­ï¼Œè¢«æ’å…¥çš„å­—ç¬¦å°†æ˜¯ä¸‹ä¸€æ¡è¾“å…¥è¯­å¥è¯»å–çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚</li></ul><h2 id="æ–‡ä»¶è¾“å…¥å’Œè¾“å‡º">17.4 æ–‡ä»¶è¾“å…¥å’Œè¾“å‡º</h2><h3 id="æ–‡ä»¶è¾“å…¥">1. æ–‡ä»¶è¾“å…¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br>string filename;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;Enter name for new file: &quot;</span>;<br>cin &gt;&gt; filename;<br><br><span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(filename.c_str())</span></span>;<br><br>fout &lt;&lt; <span class="hljs-string">&quot;For your eyes only!\n&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;Enter your secret number: &quot;</span>;<br><span class="hljs-type">float</span> secret;<br>cin &gt;&gt; secret;<br>fout &lt;&lt; <span class="hljs-string">&quot;Your secret number is &quot;</span> &lt;&lt; secret &lt;&lt; endl;<br>fout.<span class="hljs-built_in">close</span>();<br><br><span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(filename.c_str())</span></span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;Here are the contents of &quot;</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">&quot;:\n&quot;</span>;<br><span class="hljs-type">char</span> ch;<br><span class="hljs-keyword">while</span> (fin.<span class="hljs-built_in">get</span>(ch))<br>&#123;<br>cout &lt;&lt; ch;<br>&#125;<br>cout &lt;&lt; <span class="hljs-string">&quot;Done\n&quot;</span>;<br>fin.<span class="hljs-built_in">close</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705886682513-d1edb5d2-2601-41c1-87d3-834a45ae049b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ">2. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp">fin.<span class="hljs-built_in">open</span>(filename);<br><span class="hljs-keyword">if</span>(fin.<span class="hljs-built_in">fail</span>())<br>&#123;&#125; <br><span class="hljs-keyword">if</span>(!fin)<br>&#123;&#125;<br><span class="hljs-keyword">if</span>(!fin.<span class="hljs-built_in">is_open</span>())<br>&#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰“å¼€å¤šä¸ªæ–‡ä»¶">3. æ‰“å¼€å¤šä¸ªæ–‡ä»¶</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp">ifstream fin;<br>fin.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;fat.txt&quot;</span>);<br>fin.<span class="hljs-built_in">close</span>();<br>fin.<span class="hljs-built_in">clear</span>();<br>fin.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;rat.txt&quot;</span>);<br>fin.<span class="hljs-built_in">close</span>();<br></code></pre></td></tr></table></figure><h3 id="å‘½ä»¤è¡Œå¤„ç†æŠ€æœ¯">4. å‘½ä»¤è¡Œå¤„ç†æŠ€æœ¯</h3><p>åœ¨UNIXå’Œlinuxä¸­è®¡ç®—æ–‡ä»¶åŒ…å«çš„å­—æ•°ï¼Œå‘½ä»¤è¡Œè¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">wc</span> report1 report2 report3 //ç¨‹åºå åé¢ä¸‰ä¸ªæ˜¯ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ç¨‹åºçš„æ–‡ä»¶å<br><span class="hljs-comment">#include &lt;iostream&gt;</span><br><span class="hljs-comment">#include &lt;fstream&gt;</span><br><span class="hljs-comment">#include &lt;cstdlib&gt;</span><br><br>int main(int argc, char* argv[])<br>&#123;<br>using namespace std;<br><span class="hljs-keyword">if</span> (argc == 1)<br>&#123;<br>cerr &lt;&lt; <span class="hljs-string">&quot;Usage: &quot;</span> &lt;&lt; <span class="hljs-string">argv[0] &lt;&lt; &quot; filename[s]\n&quot;;</span><br><span class="hljs-string">exit(EXIT_FAILURE);</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">ifstream fin;</span><br><span class="hljs-string">long count;</span><br><span class="hljs-string">long total = 0;</span><br><span class="hljs-string">char ch;</span><br><span class="hljs-string">for (int file = 1; file &lt; argc; file++)</span><br><span class="hljs-string">&#123;</span><br><span class="hljs-string">fin.open(argv</span>[file]);<br><span class="hljs-keyword">if</span> (!fin.is_open())<br>&#123;<br>cerr &lt;&lt; <span class="hljs-string">&quot;Could not open &quot;</span> &lt;&lt; <span class="hljs-string">argv[file] &lt;&lt; endl;</span><br><span class="hljs-string">fin.clear();</span><br><span class="hljs-string">continue;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">count = 0;</span><br><span class="hljs-string">while (fin.get(ch))</span><br><span class="hljs-string">&#123;</span><br><span class="hljs-string">count++;</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">cout &lt;&lt; count &lt;&lt; &quot; characters in &quot; &lt;&lt; argv</span>[file] &lt;&lt; <span class="hljs-string">endl;</span><br><span class="hljs-string">total += count;</span><br><span class="hljs-string">fin.clear();</span><br><span class="hljs-string">fin.close();</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">cout &lt;&lt; total &lt;&lt; &quot;characters in all files\n&quot;;</span><br><span class="hljs-string">return 0;</span><br><span class="hljs-string">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="æ–‡ä»¶æ¨¡å¼">5. æ–‡ä»¶æ¨¡å¼</h3><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705892409171-9f7f3a78-bc26-4ffb-9c70-c65ab3356b80.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/17-io%E3%80%81file/1705892442856-a6d04e8d-d29f-443c-bdab-b8491fec7b65.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="æ–‡ä»¶éšæœºå­˜å–">6. æ–‡ä»¶éšæœºå­˜å–</h3><p>seekg()</p><p>seekp()</p><p>tellg()</p><p>tellp()</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. stringç±»å’Œæ ‡å‡†æ¨¡æ¿åº“</title>
    <link href="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/"/>
    <url>/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h2 id="stringç±»">stringç±»</h2><h3 id="æ„é€ å­—ç¬¦ä¸²">1. 1.æ„é€ å­—ç¬¦ä¸²</h3><p>size_typeæ˜¯ä¸€ä¸ªä¾èµ–äºå®ç°çš„æ•´å‹ï¼Œæ˜¯åœ¨å¤´æ–‡ä»¶stringä¸­å®šä¹‰çš„ã€‚stringç±»å°†string::nposå®šä¹‰ä¸ºå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œé€šå¸¸ä¸ºunsignedintçš„æœ€å¤§å€¼ã€‚å¦å¤–ï¼Œè¡¨æ ¼ä¸­ä½¿ç”¨ç¼©å†™NBTS(null-terminatedstring)æ¥è¡¨ç¤ºä»¥ç©ºå­—ç¬¦ç»“æŸçš„å­—ç¬¦ä¸²ä¸€ä¼ ç»Ÿçš„Cå­—ç¬¦ä¸²ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1701702052644-b3f8713e-0ff3-4d46-977d-5899b7d5eda2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æŒ‡å®šåˆ†å‰²å­—ç¬¦ï¼š<img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1704896035315-4f438f1f-0b44-4f43-bb77-95a0fdd35771.png" alt="img"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">string empty;<br>empty.<span class="hljs-built_in">capacity</span>(); <span class="hljs-comment">//å­—ç¬¦ä¸²çš„å®¹é‡</span><br><span class="hljs-comment">//å­—ç¬¦ä¸²çš„å®¹é‡æ¯”æ ‡å‡†å®¹é‡ï¼ˆ16çš„å€æ•°ï¼‰å°1</span><br></code></pre></td></tr></table></figure><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1704901298503-a6bed4af-18dd-4aca-b6bb-b12fc1db7a88.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>shared_ptr</p><p>unique_ptr</p><p>auto_ptr</p><p>å·¦å€¼ä¸å³å€¼è¿™ä¸¤ä¸ªæ¦‚å¿µæ˜¯ä» Cä¸­ä¼ æ‰¿è€Œæ¥çš„ï¼Œå·¦å€¼æŒ‡æ—¢èƒ½å¤Ÿå‡ºç°åœ¨ç­‰å·å·¦è¾¹ï¼Œä¹Ÿèƒ½å‡ºç°åœ¨ç­‰å·å³è¾¹çš„å˜é‡ï¼›å³å€¼åˆ™æ˜¯åªèƒ½å‡ºç°åœ¨ç­‰å·å³è¾¹çš„å˜é‡ã€‚</p><h2 id="æ ‡å‡†æ¨¡æ¿åº“">16.3 æ ‡å‡†æ¨¡æ¿åº“</h2><ul><li>STLæä¾›äº†ä¸€ç»„è¡¨ç¤ºå®¹å™¨ã€è¿­ä»£å™¨ã€å‡½æ•°å¯¹è±¡å’Œç®—æ³•çš„æ¨¡æ¿</li><li>STLå®¹å™¨æ˜¯åŒè´¨çš„ï¼Œå³å­˜å‚¨çš„å€¼çš„ç±»å‹ç›¸åŒ</li></ul><h3 id="æ¨¡æ¿ç±»vector">16.3.1 æ¨¡æ¿ç±»vector</h3><ul><li>å¯ä»¥åˆ›å»ºvectorå¯¹è±¡ï¼Œå°†ä¸€ä¸ªvectorå¯¹è±¡èµ‹ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨[]è¿ç®—ç¬¦æ¥è®¿é—®vectorå…ƒç´ ã€‚</li><li>è¦ä½¿ç±»æˆä¸ºé€šç”¨çš„ï¼Œåº”å°†å®ƒè®¾è®¡ä¸ºæ¨¡æ¿ç±»ï¼Œ</li><li>STLæ­£æ˜¯è¿™æ ·åšçš„ä¸€åœ¨å¤´æ–‡ä»¶vector(ä»¥å‰ä¸ºvector..h)ä¸­å®šä¹‰äº†ä¸€ä¸ªvectoræ¨¡æ¿ã€‚</li><li>è¦åˆ›å»ºvectoræ¨¡æ¿å¯¹è±¡ï¼Œå¯ä½¿ç”¨é€šå¸¸çš„<type>è¡¨ç¤ºæ³•æ¥æŒ‡å‡ºè¦ä½¿ç”¨çš„ç±»å‹ã€‚å¦å¤–ï¼Œvectoræ¨¡æ¿ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå› æ­¤å¯ä»¥ç”¨åˆå§‹åŒ–å‚æ•°æ¥æŒ‡å‡ºéœ€è¦å¤šå°‘çŸ¢é‡ï¼š</type></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> vector</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">ratings</span><span class="hljs-params">(<span class="hljs-number">5</span>)</span></span>;<br><span class="hljs-type">int</span> n;<br>cin &gt;&gt; n; <br><span class="hljs-function">vector&lt;<span class="hljs-type">double</span>&gt; <span class="hljs-title">scores</span><span class="hljs-params">(n)</span></span>;<br></code></pre></td></tr></table></figure><h3 id="å¯å¯¹çŸ¢é‡æ‰§è¡Œçš„æ“ä½œ">16.3.2 å¯å¯¹çŸ¢é‡æ‰§è¡Œçš„æ“ä½œ</h3><ul><li>size()è¿”å›å®¹å™¨ä¸­å…ƒç´ æ•°ç›®</li><li>swap()äº¤æ¢ä¸¤ä¸ªå®¹å™¨çš„å†…å®¹</li><li>begin()è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨</li><li>end()è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¶…è¿‡å®¹å™¨å°¾çš„è¿­ä»£å™¨ã€‚</li></ul><p>è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¹¿ä¹‰æŒ‡é’ˆ</p><ul><li>vectoræ¨¡æ¿ç±»æœ‰pushback()ï¼Œæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•ï¼Œå®ƒå°†å…ƒç´ æ·»åŠ åˆ°çŸ¢é‡æœ«å°¾</li><li>erase()æ–¹æ³•åˆ é™¤çŸ¢é‡ä¸­ç»™å®šåŒºé—´çš„å…ƒç´ ã€‚å®ƒæ¥å—ä¸¤ä¸ªè¿­ä»£å™¨å‚æ•°ï¼Œè¿™äº›å‚æ•°å®šä¹‰äº†è¦åˆ é™¤çš„åŒºé—´ã€‚ç¬¬ä¸€ä¸ªè¿­ä»£å™¨æŒ‡å‘åŒºé—´çš„èµ·å§‹å¤„ï¼Œç¬¬äºŒä¸ªè¿­ä»£å™¨ä½äºåŒºé—´ç»ˆæ­¢å¤„çš„åä¸€ä¸ªä½ç½®ã€‚scores.erase(scores.begin(),scores.begin()+2)</li><li>insert()æ–¹æ³•çš„åŠŸèƒ½ä¸erase()ç›¸åã€‚å®ƒæ¥å—3ä¸ªè¿­ä»£å™¨å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†æ–°å…ƒç´ çš„æ’å…¥ä½ç½®ï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªè¿­ä»£å™¨å‚æ•°å®šä¹‰äº†è¢«æ’å…¥åŒºé—´ï¼Œè¯¥åŒºé—´é€šå¸¸æ˜¯å¦ä¸€ä¸ªå®¹å™¨å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚old_v.insert(old_v.end(),new_v.begin()+1,new_v.end());</li></ul><h3 id="å¯¹çŸ¢é‡å¯æ‰§è¡Œçš„å…¶ä»–æ“ä½œ">16.3.3 å¯¹çŸ¢é‡å¯æ‰§è¡Œçš„å…¶ä»–æ“ä½œ</h3><ul><li><p>3ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„STLå‡½æ•°ï¼šfor_each()random_shuffle()å’Œsort()</p></li><li><p>for_each()</p></li><li><ul><li>å®ƒæ¥å—3ä¸ªå‚æ•°ã€‚å‰ä¸¤ä¸ªæ˜¯å®šä¹‰å®¹å™¨ä¸­åŒºé—´çš„è¿­ä»£å™¨ï¼Œæœ€åä¸€ä¸ªæ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ,æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡</li><li>foreach()å‡½æ•°å°†è¢«æŒ‡å‘çš„å‡½æ•°åº”ç”¨äºå®¹å™¨åŒºé—´ä¸­çš„å„ä¸ªå…ƒç´ ã€‚è¢«æŒ‡å‘çš„å‡½æ•°ä¸èƒ½ä¿®æ”¹å®¹å™¨å…ƒç´ çš„å€¼ã€‚å¯ä»¥ç”¨foreach()å‡½æ•°æ¥ä»£æ›¿forå¾ªç¯ã€‚</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">for_each(books.<span class="hljs-built_in">begin</span>(),books.<span class="hljs-built_in">end</span>(),ShowReview);<br></code></pre></td></tr></table></figure><ul><li><p>Randomshuffle()å‡½æ•°æ¥å—ä¸¤ä¸ªæŒ‡å®šåŒºé—´çš„è¿­ä»£å™¨å‚æ•°ï¼Œå¹¶éšæœºæ’åˆ—è¯¥åŒºé—´ä¸­çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è¯­å¥éšæœºæ’åˆ—booksçŸ¢é‡ä¸­æ‰€æœ‰å…ƒç´ ï¼š</p></li><li><ul><li>è¯¥å‡½æ•°è¦æ±‚å®¹å™¨ç±»å…è®¸éšæœºè®¿é—®ï¼Œvectorç±»å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">random_shuffle</span>(books.<span class="hljs-built_in">begin</span>(),books.<span class="hljs-built_in">end</span>());<br></code></pre></td></tr></table></figure><ul><li>sort()å‡½æ•°ä¹Ÿè¦æ±‚å®¹å™¨æ”¯æŒéšæœºè®¿é—®ã€‚è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬æ¥å—ä¸¤ä¸ªå®šä¹‰åŒºé—´çš„è¿­ä»£å™¨å‚æ•°ï¼Œå¹¶ä½¿ç”¨ä¸ºå­˜å‚¨åœ¨å®¹å™¨ä¸­çš„ç±»å‹å…ƒç´ å®šä¹‰çš„&lt;è¿ç®—ç¬¦ï¼Œå¯¹åŒºé—´ä¸­çš„å…ƒç´ è¿›è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è¯­å¥æŒ‰å‡åºå¯¹coolstuffçš„å†…å®¹è¿›è¡Œæ’åºï¼Œæ’åºæ—¶ä½¿ç”¨å†…ç½®çš„&lt;è¿ç®—ç¬¦å¯¹å€¼è¿›è¡Œæ¯”è¾ƒï¼š<img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705200998948-8333c2ec-53f8-447a-a508-9a72646db2a7.png" alt="img"></li><li>å¦‚æœå®¹å™¨å…ƒç´ æ˜¯ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ï¼Œåˆ™è¦ä½¿ç”¨sort(),å¿…é¡»å®šä¹‰èƒ½å¤Ÿå¤„ç†è¯¥ç±»å‹å¯¹è±¡çš„operator&lt;()å‡½æ•°</li></ul><h3 id="åŸºäºèŒƒå›´çš„forå¾ªç¯">16.3.4 åŸºäºèŒƒå›´çš„forå¾ªç¯</h3><ul><li>ä¸åŒäºforeach(),åŸºäºèŒƒå›´çš„forå¾ªç¯å¯ä¿®æ”¹å®¹å™¨çš„å†…å®¹ï¼Œè¯€çªæ˜¯æŒ‡å®šä¸€ä¸ªå¼•ç”¨å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰å¦‚ä¸‹å‡½æ•°ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InflateReview</span> <span class="hljs-params">(Review &amp;r)</span></span>&#123;r.rating++;&#125;<br></code></pre></td></tr></table></figure><ul><li>å¯ä½¿ç”¨å¦‚ä¸‹å¾ªç¯å¯¹booksçš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œè¯¥å‡½æ•°ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;x : books)<span class="hljs-built_in">InflateReview</span>(x);<br></code></pre></td></tr></table></figure><h2 id="æ³›å‹ç¼–ç¨‹">16.4 æ³›å‹ç¼–ç¨‹</h2><p>STLæ˜¯ä¸€ç§æ³›å‹ç¼–ç¨‹</p><h3 id="ä¸ºä½•ä½¿ç”¨è¿­ä»£å™¨">16.4.1 ä¸ºä½•ä½¿ç”¨è¿­ä»£å™¨</h3><ul><li>æ¨¡æ¿ä½¿å¾—ç®—æ³•ç‹¬ç«‹äºå­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œè€Œè¿­ä»£å™¨ä½¿ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨çš„å®¹å™¨ç±»å‹ã€‚å› æ­¤ï¼Œå®ƒä»¬éƒ½æ˜¯STLé€šç”¨æ–¹æ³•çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</li><li>è¦å®ç°findå‡½æ•°ï¼Œè¿­ä»£å™¨åº”å…·å¤‡å“ªäº›ç‰¹å¾å‘¢ï¼Ÿä¸‹é¢æ˜¯ä¸€ä¸ªç®€çŸ­çš„åˆ—è¡¨<img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705201603996-cebe5660-82cb-4d80-a44d-c7d5474cb720.png" alt="img"></li><li>ä¸ºåŒºåˆ†++è¿ç®—ç¬¦çš„å‰ç¼€ç‰ˆæœ¬å’Œåç¼€ç‰ˆæœ¬ï¼ŒC++å°†operator+-+ä½œä¸ºå‰ç¼€ç‰ˆæœ¬ï¼Œå°†operator++(int)ä½œä¸ºåç¼€ç‰ˆæœ¬ï¼šå…¶ä¸­çš„å‚æ•°æ°¸è¿œä¹Ÿä¸ä¼šè¢«ç”¨åˆ°ï¼Œæ‰€ä»¥ä¸å¿…æŒ‡å®šå…¶åç§°ã€‚</li><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705201754756-d604f2b7-68df-4a66-a19c-b30f4e6a7902.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705201763135-7528fe1d-9cc3-421c-a6ef-b6b9d5bb5797.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul><h3 id="è¿­ä»£å™¨ç±»å‹">16.4.2 è¿­ä»£å™¨ç±»å‹</h3><ul><li><p>è¾“å…¥è¿­ä»£å™¨</p></li><li><ul><li>æ¥è‡ªå®¹å™¨çš„ä¿¡æ¯è¢«è§†ä¸ºè¾“å…¥ï¼Œè¾“å…¥è¿­ä»£å™¨å¯è¢«ç¨‹åºç”¨æ¥è¯»å–å®¹å™¨ä¸­çš„ä¿¡æ¯ã€‚å…·ä½“åœ°è¯´ï¼Œå¯¹è¾“å…¥è¿­ä»£å™¨è§£é™¤å¼•ç”¨ï¼Œå°†ä½¿ç¨‹åºèƒ½å¤Ÿè¯»å–å®¹å™¨ä¸­çš„å€¼ï¼Œä½†ä¸ä¸€å®šèƒ½è®©ç¨‹åºä¿®æ”¹å€¼ã€‚å› æ­¤ï¼Œéœ€è¦è¾“å…¥è¿­ä»£å™¨çš„ç®—æ³•å°†ä¸ä¼šä¿®æ”¹å®¹å™¨ä¸­çš„å€¼ã€‚</li><li>è¾“å…¥è¿­ä»£å™¨å¿…é¡»èƒ½å¤Ÿè®¿é—®å®¹å™¨ä¸­æ‰€æœ‰çš„å€¼ï¼Œè¿™æ˜¯é€šè¿‡æ”¯æŒ++è¿ç®—ç¬¦ï¼ˆå‰ç¼€æ ¼å¼å’Œåç¼€æ ¼å¼ï¼‰æ¥å®ç°çš„ã€‚</li><li>å¦‚æœå°†è¾“å…¥è¿­ä»£å™¨è®¾ç½®ä¸ºæŒ‡å‘å®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸æ–­å°†å…¶é€’å¢ï¼Œç›´åˆ°åˆ°è¾¾è¶…å°¾ä½ç½®ï¼Œåˆ™å®ƒå°†ä¾æ¬¡æŒ‡å‘å®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¹¶ä¸èƒ½ä¿è¯è¾“å…¥è¿­ä»£å™¨ç¬¬äºŒæ¬¡éå†å®¹å™¨æ—¶ï¼Œé¡ºåºä¸å˜ã€‚</li><li>å¦å¤–ï¼Œè¾“å…¥è¿­ä»£å™¨è¢«é€’å¢åï¼Œä¹Ÿä¸èƒ½ä¿è¯å…¶å…ˆå‰çš„å€¼ä»ç„¶å¯ä»¥è¢«è§£é™¤å¼•ç”¨ã€‚åŸºäºè¾“å…¥è¿­ä»£å™¨çš„ä»»ä½•ç®—æ³•éƒ½åº”å½“æ˜¯å•é€šè¡Œ(single-pass)çš„ï¼Œä¸ä¾èµ–äºå‰ä¸€æ¬¡éå†æ—¶çš„è¿­ä»£å™¨å€¼ï¼Œä¹Ÿä¸ä¾èµ–äºæœ¬æ¬¡éå†ä¸­å‰é¢çš„è¿­ä»£å™¨å€¼ã€‚</li><li>æ³¨æ„ï¼Œè¾“å…¥è¿­ä»£å™¨æ˜¯å•å‘è¿­ä»£å™¨ï¼Œå¯ä»¥é€’å¢ï¼Œä½†ä¸èƒ½å€’é€€ã€‚</li></ul></li><li><p>è¾“å‡ºè¿­ä»£å™¨</p></li><li><ul><li>STLä½¿ç”¨æœ¯è¯­â€œè¾“å‡ºâ€æ¥æŒ‡ç”¨äºå°†ä¿¡æ¯ä»ç¨‹åºä¼ è¾“ç»™å®¹å™¨çš„è¿­ä»£å™¨ï¼Œå› æ­¤ç¨‹åºçš„è¾“å‡ºå°±æ˜¯å®¹å™¨çš„è¾“å…¥ã€‚</li><li>STLè¶³å¤Ÿé€šç”¨ï¼Œå…¶å®¹å™¨å¯ä»¥è¡¨ç¤ºè¾“å‡ºè®¾å¤‡ï¼Œå› æ­¤å®¹å™¨ä¹Ÿå¯èƒ½å¦‚æ­¤ã€‚å¦å¤–ï¼Œå¦‚æœç®—æ³•ä¸ç”¨è¯»å–ä½œå®¹å™¨çš„å†…å®¹å°±å¯ä»¥ä¿®æ”¹å®ƒï¼ˆå¦‚é€šè¿‡ç”Ÿæˆè¦å­˜å‚¨çš„æ–°å€¼ï¼‰ï¼Œåˆ™æ²¡æœ‰ç†ç”±è¦æ±‚å®ƒä½¿ç”¨èƒ½å¤Ÿè¯»å–å†…å®¹çš„è¿­ä»£å™¨ã€‚</li></ul></li><li><p>æ­£å‘è¿­ä»£å™¨</p></li><li><ul><li>ä¸è¾“å…¥è¿­ä»£å™¨å’Œè¾“å‡ºè¿­ä»£å™¨ç›¸ä¼¼ï¼Œæ­£å‘è¿­ä»£å™¨åªä½¿ç”¨++è¿ç®—ç¬¦æ¥éå†å®¹å™¨ï¼Œ</li><li>ä¸è¾“å…¥å’Œè¾“å‡ºè¿­ä»£å™¨ä¸åŒçš„æ˜¯ï¼Œå®ƒæ€»æ˜¯æŒ‰ç›¸åŒçš„é¡ºåºéå†ä¸€ç³»åˆ—å€¼</li><li>å°†æ­£å‘è¿­ä»£å™¨é€’å¢åï¼Œä»ç„¶å¯ä»¥å¯¹å‰é¢çš„è¿­ä»£å™¨å€¼è§£é™¤å¼•ç”¨ï¼ˆå¦‚æœä¿å­˜äº†å®ƒï¼‰ï¼Œå¹¶å¯ä»¥å¾—åˆ°ç›¸åŒçš„å€¼ã€‚è¿™äº›ç‰¹å¾ä½¿å¾—å¤šæ¬¡é€šè¡Œç®—æ³•æˆä¸ºå¯èƒ½ã€‚</li><li>æ­£å‘è¿­ä»£å™¨æ—¢å¯ä»¥ä½¿å¾—èƒ½å¤Ÿè¯»å–å’Œä¿®æ”¹æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿å¾—åªèƒ½è¯»å–æ•°æ®ï¼š<img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705203232030-17e2fa5f-8059-4808-a6f2-714a6b1d97eb.png" alt="img"></li></ul></li><li><p>åŒå‘è¿­ä»£å™¨</p></li><li><ul><li>å‡è®¾ç®—æ³•éœ€è¦èƒ½å¤ŸåŒå‘éå†å®¹å™¨ï¼Œæƒ…å†µå°†å¦‚ä½•å‘¢ï¼Ÿä¾‹å¦‚ï¼Œreverseå‡½æ•°å¯ä»¥äº¤æ¢ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ ã€å°†æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆåŠ 1ã€å°†æŒ‡å‘ç¬¬äºŒä¸ªå…ƒç´ çš„æŒ‡é’ˆå‡1ï¼Œå¹¶é‡å¤è¿™ç§å¤„ç†è¿‡ç¨‹ã€‚åŒå‘è¿­ä»£å™¨å…·æœ‰æ­£å‘è¿­ä»£å™¨çš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒæ—¶æ”¯æŒä¸¤ç§ï¼ˆå‰ç¼€å’Œåç¼€ï¼‰é€’å‡è¿ç®—ç¬¦ã€‚</li></ul></li><li><p>éšæœºè®¿é—®è¿­ä»£å™¨</p></li><li><ul><li>æœ‰äº›ç®—æ³•ï¼ˆå¦‚æ ‡å‡†æ’åºå’ŒäºŒåˆ†æ£€ç´¢ï¼‰è¦æ±‚èƒ½å¤Ÿç›´æ¥è·³åˆ°å®¹å™¨ä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ï¼Œè¿™å«åšéšæœºè®¿é—®ï¼Œéœ€è¦éšæœºè®¿é—®è¿­ä»£å™¨ã€‚éšæœºè®¿é—®è¿­ä»£å™¨å…·æœ‰åŒå‘è¿­ä»£å™¨çš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒæ—¶æ·»åŠ äº†æ”¯æŒéšæœºè®¿é—®çš„æ“ä½œï¼ˆå¦‚æŒ‡é’ˆå¢åŠ è¿ç®—)å’Œç”¨äºå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„å…³ç³»è¿ç®—ç¬¦ã€‚</li><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705203338574-8505aeb5-398e-4f50-a12a-5306c3527253.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li></ul><h3 id="è¿­ä»£å™¨å±‚æ¬¡ç»“æ„">16.4.3 è¿­ä»£å™¨å±‚æ¬¡ç»“æ„</h3><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705203338546-482a142e-eb46-49d5-98c3-99c351040642.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ³¨æ„ï¼Œå„ç§è¿­ä»£å™¨çš„ç±»å‹å¹¶ä¸æ˜¯ç¡®å®šçš„ï¼Œè€Œåªæ˜¯ä¸€ç§æ¦‚å¿µæ€§æè¿°ã€‚æ­£å¦‚å‰é¢æŒ‡å‡ºçš„ï¼Œæ¯ä¸ªå®¹å™¨ç±»éƒ½å®šä¹‰äº†ä¸€ä¸ªç±»çº§typedefåç§°-iterator,å› æ­¤vector<int>ç±»çš„è¿­ä»£å™¨ç±»å‹ä¸ºvector&lt;-int&gt;:interatorã€‚.ç„¶è€Œï¼Œè¯¥ç±»çš„æ–‡æ¡£å°†æŒ‡å‡ºï¼ŒçŸ¢é‡è¿­ä»£å™¨æ˜¯éšæœºè®¿é—®è¿­ä»£å™¨ï¼Œå®ƒå…è®¸ä½¿ç”¨åŸºäºä»»ä½•è¿­ä»£å™¨ç±»å‹çš„ç®—æ³•ï¼Œå› ä¸ºéšæœºè®¿é—®è¿­ä»£å™¨å…·æœ‰æ‰€æœ‰è¿­ä»£å™¨çš„åŠŸèƒ½ã€‚åŒæ ·ï¼Œlist<in>ç±»çš„è¿­ä»£å™¨ç±»å‹ä¸ºlist<int>:iteratorã€‚STLå®ç°äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå®ƒä½¿ç”¨åŒå‘è¿­ä»£å™¨ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨åŸºäºéšæœºè®¿é—®è¿­ä»£å™¨çš„ç®—æ³•ï¼Œä½†å¯ä»¥ä½¿ç”¨åŸºäºè¦æ±‚è¾ƒä½çš„è¿­ä»£å™¨çš„ç®—æ³•ã€‚</int></in></int></p><h3 id="æ¦‚å¿µæ”¹è¿›å’Œæ¨¡å‹">16.4.4 æ¦‚å¿µã€æ”¹è¿›å’Œæ¨¡å‹</h3><ul><li><p>å°†æŒ‡é’ˆç”¨ä½œè¿­ä»£å™¨</p></li><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705203847529-085689e1-6598-4331-b653-53845175bc9f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705203954325-39265c50-b345-4695-a444-1b4fb305a3a4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li><li><p>å…¶ä»–æœ‰ç”¨çš„è¿­ä»£å™¨</p></li><li><ul><li>åå‘æ‰“å°</li></ul></li><li><ul><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705204191930-9bd26c4e-622f-4594-904e-4d944b54eb60.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li></ul></li><li><ul><li>æ˜¾å¼å’Œéšå¼</li></ul></li><li><ul><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705204255531-e571a957-3d61-4736-83f7-7efe0f0e833f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li></ul></li><li><ul><li>æ’å…¥è¿­ä»£å™¨</li></ul></li><li><ul><li><ul><li>back insert iteratorå°†å…ƒç´ æ’å…¥åˆ°å®¹å™¨å°¾éƒ¨ï¼Œ</li><li>è€Œfront insert iteratorå°†å…ƒç´ æ’å…¥åˆ°å®¹å™¨çš„å‰ç«¯ã€‚</li><li>æœ€åï¼Œinsert iteratorå°†å…ƒç´ æ’å…¥åˆ°insertiteratoræ„é€ å‡½æ•°çš„å‚æ•°æŒ‡å®šçš„ä½ç½®å‰é¢ã€‚è¿™ä¸‰ä¸ªæ’å…¥è¿­ä»£å™¨éƒ½æ˜¯è¾“å‡ºå®¹å™¨æ¦‚å¿µçš„æ¨¡å‹ã€‚</li></ul></li></ul></li><li><p>è¿™é‡Œå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚</p></li><li><ul><li>back insertiteratoråªèƒ½ç”¨äºå…è®¸åœ¨å°¾éƒ¨å¿«é€Ÿæ’å…¥çš„å®¹å™¨ï¼ˆå¿«é€Ÿæ’å…¥æŒ‡çš„æ˜¯ä¸€ä¸ªæ—¶é—´å›ºå®šçš„ç®—æ³•ï¼Œå°†åœ¨æœ¬ç« åé¢çš„â€œå®¹å™¨æ¦‚å¿µâ€ä¸€èŠ‚åšè¿›ä¸€æ­¥è®¨è®º)ï¼Œvectorç±»ç¬¦åˆè¿™ç§è¦æ±‚ã€‚</li><li>front insertiteratoråªèƒ½ç”¨äºå…è®¸åœ¨èµ·å§‹ä½ç½®åšæ—¶é—´å›ºå®šæ’å…¥çš„å®¹å™¨ç±»å‹ï¼Œvectorç±»ä¸èƒ½æ»¡è¶³è¿™ç§è¦æ±‚ï¼Œä½†queueæ»¡è¶³ã€‚</li><li>insertiteratoræ²¡æœ‰è¿™äº›é™åˆ¶ï¼Œå› æ­¤å¯ä»¥ç”¨å®ƒæŠŠä¿¡æ¯æ’å…¥åˆ°çŸ¢é‡çš„å‰ç«¯ã€‚ç„¶è€Œï¼Œfrontinsert iteratorå¯¹äºé‚£äº›æ”¯æŒå®ƒçš„å®¹å™¨æ¥è¯´ï¼Œå®Œæˆä»»åŠ¡çš„é€Ÿåº¦æ›´å¿«ã€‚</li></ul></li></ul><h3 id="å®¹å™¨ç§ç±»">16.4.5 å®¹å™¨ç§ç±»</h3><ul><li>åºåˆ—ä¸­çš„å…ƒç´ å…·æœ‰ç¡®å®šçš„é¡ºåºï¼Œå› æ­¤å¯ä»¥æ‰§è¡Œè¯¸å¦‚å°†å€¼æ’å…¥åˆ°ç‰¹å®šä½ç½®ã€åˆ é™¤ç‰¹å®šåŒºé—´ç­‰æ“ä½œ</li></ul><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705208611763-e6582659-7839-4160-9fe3-72a9576a2f53.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å› ä¸ºæ¨¡æ¿ç±»dequeã€listã€queueã€priority_queueã€stackå’Œvectoréƒ½æ˜¯åºåˆ—æ¦‚å¿µçš„æ¨¡å‹ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½æ”¯æŒ16.7</p><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705208675566-1f79eabe-9934-4745-97cb-d6db3315c028.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ul><li><p>a[n]å’Œa.at(n)éƒ½è¿”å›ä¸€ä¸ªæŒ‡å‘å®¹å™¨ä¸­ç¬¬nä¸ªå…ƒç´ ï¼ˆä»0å¼€å§‹ç¼–å·ï¼‰çš„å¼•ç”¨ã€‚å®ƒä»¬ä¹‹é—´çš„å·®åˆ«åœ¨äºï¼Œå¦‚æœnè½åœ¨å®¹å™¨çš„æœ‰æ•ˆåŒºé—´å¤–ï¼Œåˆ™a.atn)å°†æ‰§è¡Œè¾¹ç•Œæ£€æŸ¥ï¼Œå¹¶å¼•å‘outof rangeå¼‚å¸¸ã€‚</p></li><li><p>vector</p></li><li><ul><li>vectoræ˜¯æ•°ç»„çš„ä¸€ç§ç±»è¡¨ç¤ºï¼Œå®ƒæä¾›äº†è‡ªåŠ¨å†…å­˜ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥åŠ¨æ€åœ°æ”¹å˜vectorå¯¹è±¡çš„é•¿åº¦ï¼Œå¹¶éšç€å…ƒç´ çš„æ·»åŠ å’Œåˆ é™¤è€Œå¢å¤§å’Œç¼©å°ã€‚å®ƒæä¾›äº†å¯¹å…ƒç´ çš„éšæœºè®¿é—®ã€‚åœ¨å°¾éƒ¨æ·»åŠ å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´æ˜¯å›ºå®šçš„ï¼Œä½†åœ¨å¤´éƒ¨æˆ–ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„å¤æ‚åº¦ä¸ºçº¿æ€§æ—¶é—´ã€‚</li><li>é™¤åºåˆ—å¤–ï¼Œvectorè¿˜æ˜¯å¯åè½¬å®¹å™¨(reversiblecontainer)æ¦‚å¿µçš„æ¨¡å‹ã€‚è¿™å¢åŠ äº†ä¸¤ä¸ªç±»æ–¹æ³•ï¼šrbegin()å’Œrend(),å‰è€…è¿”å›ä¸€ä¸ªæŒ‡å‘åè½¬åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼Œåè€…è¿”å›åè½¬åºåˆ—çš„è¶…å°¾è¿­ä»£å™¨ã€‚å› æ­¤ï¼Œå¦‚æœdiceæ˜¯ä¸€ä¸ªvector&lt;-int&gt;å®¹å™¨ï¼Œè€ŒShow(int)æ˜¯æ˜¾ç¤ºä¸€ä¸ªæ•´æ•°çš„å‡½æ•°ï¼Œåˆ™ä¸‹é¢çš„ä»£ç å°†é¦–å…ˆæ­£å‘æ˜¾ç¤ºdiceçš„å†…å®¹ï¼Œç„¶ååå‘æ˜¾ç¤ºï¼š<img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705209315393-57c5dcf4-8c38-4ee5-84fd-bb1ae7ea4fcc.png" alt="img"></li></ul></li><li><p>deque</p></li><li><ul><li>dequeæ¨¡æ¿ç±»ï¼ˆåœ¨dequeå¤´æ–‡ä»¶ä¸­å£°æ˜ï¼‰è¡¨ç¤ºåŒç«¯é˜Ÿåˆ—(double-endedqueue),é€šå¸¸è¢«ç®€ç§°ä¸ºdeque</li><li>æ”¯æŒéšæœºè®¿é—®</li><li>ä¸»è¦åŒºåˆ«åœ¨äºï¼Œä»dequeå¯¹è±¡çš„å¼€å§‹ä½ç½®æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´æ˜¯å›ºå®šçš„ï¼Œè€Œä¸åƒvectorä¸­é‚£æ ·æ˜¯çº¿æ€§æ—¶é—´çš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¤šæ•°æ“ä½œå‘ç”Ÿåœ¨åºåˆ—çš„èµ·å§‹å’Œç»“å°¾å¤„ï¼Œåˆ™åº”è€ƒè™‘ä½¿ç”¨dequeæ•°æ®ç»“æ„ã€‚</li><li>ä¸ºå®ç°åœ¨dequeä¸¤ç«¯æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´ä¸ºå›ºå®šçš„è¿™ä¸€ç›®çš„ï¼Œdequeå¯¹è±¡çš„è®¾è®¡æ¯”vectorå¯¹è±¡æ›´ä¸ºå¤æ‚ã€‚å› æ­¤ï¼Œå°½ç®¡äºŒè€…éƒ½æä¾›å¯¹å…ƒç´ çš„éšæœºè®¿é—®å’Œåœ¨åºåˆ—ä¸­éƒ¨æ‰§è¡Œçº¿æ€§æ—¶é—´çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä½†vectorå®¹å™¨æ‰§è¡Œè¿™äº›æ“ä½œæ—¶é€Ÿåº¦è¦å¿«äº›ã€‚</li></ul></li><li><p>list</p></li><li><ul><li>listæ¨¡æ¿ç±»ï¼ˆåœ¨listå¤´æ–‡ä»¶ä¸­å£°æ˜ï¼‰è¡¨ç¤ºåŒå‘é“¾è¡¨ã€‚é™¤äº†ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä¸å‰åçš„å…ƒç´ ç›¸é“¾æ¥ï¼Œè¿™æ„å‘³ç€å¯ä»¥åŒå‘éå†é“¾è¡¨ã€‚</li><li>listå’Œvectorä¹‹é—´å…³é”®çš„åŒºåˆ«åœ¨äºï¼Œliståœ¨é“¾è¡¨ä¸­ä»»ä¸€ä½ç½®è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„æ—¶é—´éƒ½æ˜¯å›ºå®šçš„(vectoræ¨¡æ¿æä¾›äº†é™¤ç»“å°¾å¤„å¤–çš„çº¿æ€§æ—¶é—´çš„æ’å…¥å’Œåˆ é™¤ï¼Œåœ¨ç»“å°¾å¤„ï¼Œå®ƒæä¾›äº†å›ºå®šæ—¶é—´çš„æ’å…¥å’Œåˆ é™¤)ã€‚å› æ­¤ï¼Œvectorå¼ºè°ƒçš„æ˜¯é€šè¿‡éšæœºè®¿é—®è¿›è¡Œå¿«é€Ÿè®¿é—®ï¼Œè€Œlistå¼ºè°ƒçš„æ˜¯å…ƒç´ çš„å¿«é€Ÿæ’å…¥å’Œåˆ é™¤ã€‚</li><li>ä¸vectorç›¸ä¼¼ï¼Œlistä¹Ÿæ˜¯å¯åè½¬å®¹å™¨ã€‚ä¸vectorä¸åŒçš„æ˜¯ï¼Œlistä¸æ”¯æŒæ•°ç»„è¡¨ç¤ºæ³•å’Œéšæœºè®¿é—®ã€‚</li><li>ä¸çŸ¢é‡è¿­ä»£å™¨ä¸åŒï¼Œä»å®¹å™¨ä¸­æ’å…¥æˆ–åˆ é™¤å…ƒç´ ä¹‹åï¼Œé“¾è¡¨è¿­ä»£å™¨æŒ‡å‘å…ƒç´ å°†ä¸å˜ã€‚</li><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705209697258-a59a4e7d-b9da-4133-913e-add48a4fe6b4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>(6)forward list (C++11)C+11æ–°å¢äº†å®¹å™¨ç±»forwardlist,å®ƒå®ç°äº†å•é“¾è¡¨ã€‚åœ¨è¿™ç§é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åªé“¾æ¥åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ²¡æœ‰é“¾æ¥åˆ°å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚å› æ­¤forward_liståªéœ€è¦æ­£å‘è¿­ä»£å™¨ï¼Œè€Œä¸éœ€è¦åŒå‘è¿­ä»£å™¨ã€‚å› æ­¤ï¼Œä¸åŒäºvectorå’ŒIist,forwardlistæ˜¯ä¸å¯åè½¬çš„å®¹å™¨ã€‚ç›¸æ¯”äºlist,forwardlistæ›´ç®€å•ã€æ›´ç´§å‡‘ï¼Œä½†åŠŸèƒ½ä¹Ÿæ›´å°‘ã€‚</li></ul></li><li><p>queue</p></li><li><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705209922804-0560709f-0556-49ac-b7a7-3eb544b20e96.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul></li><li><p>priority_queue</p></li><li><ul><li>priority_.queueæ¨¡æ¿ç±»ï¼ˆåœ¨queueå¤´æ–‡ä»¶ä¸­å£°æ˜ï¼‰æ˜¯å¦ä¸€ä¸ªé€‚é…å™¨ç±»ï¼Œå®ƒæ”¯æŒçš„æ“ä½œä¸queueç›¸åŒã€‚ä¸¤è€…ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œåœ¨priority_queueä¸­ï¼Œæœ€å¤§çš„å…ƒç´ è¢«ç§»åˆ°é˜Ÿé¦–ï¼ˆç”Ÿæ´»ä¸æ€»æ˜¯å…¬å¹³çš„ï¼Œé˜Ÿåˆ—ä¹Ÿä¸€æ ·ï¼‰ã€‚å†…éƒ¨åŒºåˆ«åœ¨äºï¼Œé»˜è®¤çš„åº•å±‚ç±»æ˜¯vectorã€‚å¯ä»¥ä¿®æ”¹ç”¨äºç¡®å®šå“ªä¸ªå…ƒç´ æ”¾åˆ°é˜Ÿé¦–çš„æ¯”è¾ƒæ–¹å¼ï¼Œæ–¹æ³•æ˜¯æä¾›ä¸€ä¸ªå¯é€‰çš„æ„é€ å‡½æ•°å‚æ•°ï¼š</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">priority_queue&lt;<span class="hljs-type">int</span>&gt;pql; <span class="hljs-comment">//default version</span><br>priority_queue&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">pq2</span>(greater&lt;<span class="hljs-type">int</span>&gt;);<span class="hljs-comment">//use greater&lt;int&gt;to order</span><br></code></pre></td></tr></table></figure><ul><li><ul><li>greater&lt;&gt;()å‡½æ•°æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„å‡½æ•°å¯¹è±¡ï¼Œæœ¬ç« ç¨åå°†è®¨è®ºå®ƒã€‚</li></ul></li></ul><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705211093927-5efa264b-a429-438e-b60a-01b0e9eac93d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/16-string%E7%B1%BB%E5%92%8C%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%E5%BA%93/1705211113536-711dd3ef-5ef8-441a-b4b6-7a77dde36b53.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. å‹å…ƒã€å¼‚å¸¸å’Œå…¶ä»–</title>
    <link href="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/"/>
    <url>/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/</url>
    
    <content type="html"><![CDATA[<h1 id="å‹å…ƒ">1. å‹å…ƒ</h1><p>å‹å…ƒç±»ã€å‹å…ƒå‡½æ•°ã€ç±»å½¼æ­¤æˆä¸ºå¯¹æ–¹çš„å‹å…ƒ</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701652038425-6b3580c5-01b2-40b7-8c0d-18f2ec75a74d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å…±åŒçš„å‹å…ƒ</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701652156789-8bebc6c1-69f9-46a5-abef-1fa611a77617.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="åµŒå¥—ç±»">2. åµŒå¥—ç±»</h1><p>åœ¨å¦ä¸€ä¸ªç±»ä¸­å£°æ˜çš„ç±»è¢«ç§°ä¸ºåµŒå¥—ç±»ï¼Œé€šè¿‡æä¾›æ–°çš„ç±»å‹ç±»ä½œç”¨åŸŸæ¥é¿å…åç§°æ··ä¹±ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701652484604-d66d488a-2702-4e61-a034-18bd29e90d88.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ¨¡æ¿ä¸­ä¹Ÿå¯ä»¥åµŒå¥—ç±»</p><h1 id="å¼‚å¸¸">3. å¼‚å¸¸</h1><p>1.è°ƒç”¨abort()</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701653648121-9ad2ded3-b111-40ae-a746-27b6faf9699c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701653902872-e7d1710b-7b97-41cf-b552-6623c33cc512.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>2.è¿”å›é”™è¯¯ç </p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701653992967-feda3970-39ab-4e91-b246-dfdf3970d696.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701654057563-54566728-38a4-481b-9f07-e9a421fab935.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>3.å¼‚å¸¸æœºåˆ¶</p><p>å¼‚å¸¸å¤„ç†ä¸‰ä¸ªç»„æˆéƒ¨åˆ†</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701654351534-86b9a302-3d50-45a7-83cc-6809c69d77eb.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701654393896-9656e0cd-e917-4a7a-a4a6-74afe61a371e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701654551912-7a8866b2-dcc6-4704-a457-bdef636583e0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701654586044-aaaabb99-d4ea-4ad1-95dd-1527da3edd57.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701654636747-d175b5f2-91ba-4cf1-8994-d047bc0b0382.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>4.å°†å¯¹è±¡ ç”¨ä½œå¼‚å¸¸ç±»å‹</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701655249812-05e4412e-f3c5-4db0-959f-73f6615abdcd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701655272475-cddb7272-2d0b-4de9-948d-0f5543fd5779.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701655312497-2005dd8b-7ea1-474d-a614-b83eca775228.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>6.æ ˆè§£é€€</p><ul><li>C++é€šå¸¸æ˜¯å¦‚ä½•å¤„ç†å‡½æ•°è°ƒç”¨å’Œè¿”å›çš„ã€‚</li><li>C++é€šå¸¸é€šè¿‡å°†ä¿¡æ¯æ”¾åœ¨æ ˆï¼ˆå‚è§ç¬¬9ç« ï¼‰ä¸­æ¥å¤„ç†å‡½æ•°è°ƒç”¨ã€‚å…·ä½“åœ°è¯´ï¼Œç¨‹åºå°†è°ƒç”¨å‡½æ•°çš„æŒ‡ä»¤çš„åœ°å€ï¼ˆè¿”å›åœ°å€ï¼‰æ”¾åˆ°æ ˆä¸­ã€‚å½“è¢«è°ƒç”¨çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œç¨‹åºå°†ä½¿ç”¨è¯¥åœ°å€æ¥ç¡®å®šä»å“ªé‡Œå¼€å§‹ç»§ç»­æ‰§è¡Œã€‚å¦å¤–ï¼Œå‡½æ•°è°ƒç”¨å°†å‡½æ•°å‚æ•°æ”¾åˆ°æ ˆä¸­ã€‚åœ¨æ ˆä¸­ï¼Œè¿™äº›å‡½æ•°å‚æ•°è¢«è§†ä¸ºè‡ªåŠ¨å˜é‡ã€‚å¦‚æœè¢«è°ƒç”¨çš„å‡½æ•°åˆ›å»ºäº†æ–°çš„è‡ªåŠ¨å˜é‡ï¼Œåˆ™è¿™äº›å˜é‡ä¹Ÿå°†è¢«æ·»åŠ åˆ°æ ˆä¸­ã€‚å¦‚æœè¢«è°ƒç”¨çš„å‡½æ•°è°ƒç”¨äº†å¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™åè€…çš„ä¿¡æ¯å°†è¢«æ·»åŠ åˆ°æ ˆä¸­ï¼Œä¾æ­¤ç±»æ¨ã€‚å½“å‡½æ•°ç»“æŸæ—¶ï¼Œç¨‹åºæµç¨‹å°†è·³åˆ°è¯¥å‡½æ•°è¢«è°ƒç”¨æ—¶å­˜å‚¨çš„åœ°å€å¤„ï¼ŒåŒæ—¶æ ˆé¡¶çš„å…ƒç´ è¢«é‡Šæ”¾ã€‚å› æ­¤ï¼Œå‡½æ•°é€šå¸¸éƒ½è¿”å›åˆ°è°ƒç”¨å®ƒçš„å‡½æ•°ï¼Œä¾æ­¤ç±»æ¨ï¼ŒåŒæ—¶æ¯ä¸ªå‡½æ•°éƒ½åœ¨ç»“æŸæ—¶é‡Šæ”¾å…¶è‡ªåŠ¨å˜é‡ã€‚å¦‚æœè‡ªåŠ¨å˜é‡æ˜¯ç±»å¯¹è±¡ï¼Œåˆ™ç±»çš„ææ„å‡½æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å°†è¢«è°ƒç”¨ã€‚</li><li>ç°åœ¨å‡è®¾å‡½æ•°ç”±äºå‡ºç°å¼‚å¸¸ï¼ˆè€Œä¸æ˜¯ç”±äºè¿”å›ï¼‰è€Œç»ˆæ­¢ï¼Œåˆ™ç¨‹åºä¹Ÿå°†é‡Šæ”¾æ ˆä¸­çš„å†…å­˜ï¼Œä½†ä¸ä¼šåœ¨é‡Šæ”¾æ ˆçš„ç¬¬ä¸€ä¸ªè¿”å›åœ°å€ååœæ­¢ï¼Œè€Œæ˜¯ç»§ç»­é‡Šæ”¾æ ˆï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªä½äºtryå—ï¼ˆå‚è§å›¾15.3ï¼‰ä¸­çš„è¿”å›åœ°å€ã€‚éšåï¼Œæ§åˆ¶æƒå°†è½¬åˆ°å—å°¾çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯å‡½æ•°è°ƒç”¨åé¢çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæ ˆè§£é€€ã€‚å¼•å‘æœºåˆ¶çš„ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§æ˜¯ï¼Œå’Œå‡½æ•°è¿”å›ä¸€æ ·ï¼Œå¯¹äºæ ˆä¸­çš„è‡ªåŠ¨ç±»å¯¹è±¡ï¼Œç±»çš„ææ„å‡½æ•°å°†è¢«è°ƒç”¨ã€‚ç„¶è€Œï¼Œå‡½æ•°è¿”å›ä»…ä»…å¤„ç†è¯¥å‡½æ•°æ”¾åœ¨æ ˆä¸­çš„å¯¹è±¡ï¼Œè€Œhowè¯­å¥åˆ™å¤„ç†ryå—å’Œhowä¹‹é—´æ•´ä¸ªå‡½æ•°è°ƒç”¨åºåˆ—æ”¾åœ¨æ ˆä¸­çš„å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰æ ˆè§£é€€è¿™ç§ç‰¹æ€§ï¼Œåˆ™å¼•å‘å¼‚å¸¸åï¼Œå¯¹äºä¸­é—´å‡½æ•°è°ƒç”¨æ”¾åœ¨æ ˆä¸­çš„è‡ªåŠ¨ç±»å¯¹è±¡ï¼Œå…¶ææ„å‡½æ•°å°†ä¸ä¼šè¢«è°ƒç”¨ã€‚</li></ul><p>7.å…¶ä»–å¼‚å¸¸ç‰¹æ€§</p><p>å¦ä¸€ä¸ªä¸åŒä¹‹å¤„æ˜¯ï¼Œå¼•å‘å¼‚å¸¸æ—¶ç¼–è¯‘å™¨æ€»æ˜¯åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ‹·è´ï¼Œå³ä½¿å¼‚å¸¸è§„èŒƒå’Œcatchå—ä¸­æŒ‡å®šçš„æ˜¯å¼•ç”¨ã€‚</p><p>æç¤ºï¼šå¦‚æœæœ‰ä¸€ä¸ªå¼‚å¸¸ç±»ç»§æ‰¿å±‚æ¬¡ç»“æ„ï¼Œåº”è¿™æ ·æ’åˆ—catchå—ï¼šå°†æ•è·ä½äºå±‚æ¬¡ç»“æ„æœ€ä¸‹é¢çš„å¼‚å¸¸ç±»çš„catchè¯­å¥æ”¾åœ¨æœ€å‰é¢ï¼Œå°†æ•è·åŸºç±»å¼‚å¸¸çš„catchè¯­å¥æ”¾åœ¨æœ€åé¢ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701658754707-6d82379d-0630-4ae2-855a-6fe34812b77a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701658774575-caf70920-52dd-43c3-9703-1bacdd0a95d6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>8.exception</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701659121698-4e1e4810-0938-42c4-9d29-1a376d8cca41.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>2.bad_allocå¼‚å¸¸å’Œnew</p><p>å¯¹äºä½¿ç”¨newå¯¼è‡´çš„å†…å­˜åˆ†é…é—®é¢˜ï¼ŒC++çš„æœ€æ–°å¤„ç†æ–¹å¼æ˜¯è®©newå¼•å‘bad_allocå¼‚å¸¸ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701660057723-c7847ca6-c0aa-469a-acb8-2487f0614134.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701660219448-cd965530-879f-4905-a8db-3f9f8f6a33a0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>9.å¼‚å¸¸ ç±» å’Œç»§æ‰¿</p><p>å¼‚å¸¸ã€ç±»å’Œç»§æ‰¿ä»¥ä¸‰ç§æ–¹å¼ç›¸äº’å…³è”ã€‚é¦–å…ˆï¼Œå¯ä»¥åƒæ ‡å‡†C++åº“æ‰€åšçš„é‚£æ ·ï¼Œä»ä¸€ä¸ªå¼‚å¸¸ç±»æ´¾ç”Ÿå‡ºå¦ä¸€ä¸ªï¼›å…¶æ¬¡ï¼Œå¯ä»¥åœ¨ç±»å®šä¹‰ä¸­åµŒå¥—å¼‚å¸¸ç±»å£°æ˜æ¥ç»„åˆå¼‚å¸¸ï¼›ç¬¬ä¸‰ï¼Œè¿™ç§åµŒå¥—å£°æ˜æœ¬èº«å¯è¢«ç»§æ‰¿ï¼Œè¿˜å¯ç”¨ä½œåŸºç±»ã€‚</p><p>å¼‚å¸¸è¢«å¼•å‘åï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œä¼šå¯¼è‡´é—®é¢˜ã€‚é¦–å…ˆï¼Œå¦‚æœå®ƒæ˜¯åœ¨å¸¦å¼‚å¸¸è§„èŒƒçš„å‡½æ•°ä¸­å¼•å‘çš„ï¼Œåˆ™å¿…é¡»ä¸è§„èŒƒåˆ—è¡¨ä¸­çš„æŸç§å¼‚å¸¸åŒ¹é…ï¼ˆåœ¨ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­ï¼Œç±»ç±»å‹ä¸è¿™ä¸ªç±»åŠå…¶æ´¾ç”Ÿç±»çš„å¯¹è±¡åŒ¹é…ï¼‰ï¼Œå¦åˆ™ç§°ä¸ºæ„å¤–å¼‚å¸¸(unexpectedexception)ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†å¯¼è‡´ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼ˆè™½ç„¶C++1Iæ‘’å¼ƒäº†å¼‚å¸¸è§„èŒƒï¼Œä½†ä»æ”¯æŒå®ƒï¼Œä¸”æœ‰äº›ç°æœ‰çš„ä»£ç ä½¿ç”¨äº†å®ƒ)ã€‚å¦‚æœå¼‚å¸¸ä¸æ˜¯åœ¨å‡½æ•°ä¸­å¼•å‘çš„ï¼ˆæˆ–è€…å‡½æ•°æ²¡æœ‰å¼‚å¸¸è§„èŒƒï¼‰ï¼Œåˆ™å¿…é¡»æ•è·å®ƒã€‚å¦‚æœæ²¡è¢«æ•è·ï¼ˆåœ¨æ²¡æœ‰tryå—æˆ–æ²¡æœ‰åŒ¹é…çš„catchå—æ—¶ï¼Œå°†å‡ºç°è¿™ç§æƒ…å†µï¼‰ï¼Œåˆ™å¼‚å¸¸è¢«ç§°ä¸ºæœªæ•è·å¼‚å¸¸(uncaughtexception)ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°†å¯¼è‡´ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ã€‚ç„¶è€Œï¼Œå¯ä»¥ä¿®æ”¹ç¨‹åºå¯¹æ„å¤–å¼‚å¸¸å’Œæœªæ•è·å¼‚å¸¸çš„ååº”ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701663810741-90587ae4-3856-4e9e-89f1-f617947927e5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="rtti">4. RTTI</h1><p>RTTIçš„å·¥ä½œåŸç†ï¼š</p><p>C++æœ‰3ä¸ªæ”¯æŒRTTIçš„å…ƒç´ </p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701664946350-976ab1e5-01fb-45f3-b60a-973e2887a4d6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>RTTIåªé€‚ç”¨äºåŒ…å«è™šå‡½æ•°çš„ç±»ã€‚</p><p>1.dynamic_cast</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665233289-1c1d77e2-dc2d-486b-8262-c62bec7065d8.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665240618-0f0c4622-082f-40c4-9ed8-f6434681238a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665483998-cdef3edf-33dc-4b6c-bd2e-ac09e097a7fd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>2.typeidè¿ç®—ç¬¦å’Œtype_infoç±»</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665586972-10c66980-f4d3-4a64-90b7-156708853b28.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>typeidè¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå¯¹type_infoå¯¹è±¡çš„å¼•ç”¨ï¼Œå…¶ä¸­ï¼Œtype_infoæ˜¯åœ¨å¤´æ–‡ä»¶typeinfo(ä»¥å‰ä¸ºtypeinfo.h)ä¸­å®šä¹‰çš„ä¸€ä¸ªç±»ã€‚type_infoç±»é‡è½½äº†==å’Œ!=è¿ç®—ç¬¦ï¼Œä»¥ä¾¿å¯ä»¥ä½¿ç”¨è¿™äº›è¿ç®—ç¬¦æ¥å¯¹ç±»å‹è¿›è¡Œæ¯”è¾ƒã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665745319-6081452b-2848-42af-9e31-945bf062701d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665754030-e11aa1e0-9ae2-4d82-9fda-6ab1068071a7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701665833085-d55ac7d3-0eaa-4cf9-87fe-f27c0a4e2575.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701671377544-23659e3e-c3d5-457a-bfeb-c5b8d73ed478.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701672770940-07001a78-fec3-499c-8a37-9660b953dbfd.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701673105382-bdb2db6a-a820-4eb6-8afe-201d50b3b2e6.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701673515829-b8a2da70-159a-4e3c-82ea-b9e2f8ef4496.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701673580240-ee01cf85-99d4-4e1f-975a-7b2ebcf7d606.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/15-%E5%8F%8B%E5%85%83%E3%80%81%E5%BC%82%E5%B8%B8%E5%92%8C%E5%85%B6%E4%BB%96/1701674855983-c16a8484-70ba-4b01-85ae-2cc9c2d6d54a.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. c++ä¸­çš„ä»£ç é‡ç”¨</title>
    <link href="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/"/>
    <url>/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="åŒ…å«å¯¹è±¡æˆå‘˜çš„ç±»">1. åŒ…å«å¯¹è±¡æˆå‘˜çš„ç±»</h1><h2 id="valarayç±»ç®€ä»‹">1.1. valarayç±»ç®€ä»‹</h2><p>ä½¿ç”¨explicitå…³é—­éšå¼è½¬æ¢</p><p>valarrayç±»æ˜¯ç”±å¤´æ–‡ä»¶valarrayæ”¯æŒçš„ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªç±»ç”¨äºå¤„ç†æ•°å€¼ï¼ˆæˆ–å…·æœ‰ç±»ä¼¼ç‰¹æ€§çš„ç±»ï¼‰ï¼Œå®ƒæ”¯æŒè¯¸å¦‚å°†æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å€¼ç›¸åŠ ä»¥åŠåœ¨æ•°ç»„ä¸­æ‰¾å‡ºæœ€å¤§å’Œæœ€å°çš„å€¼ç­‰æ“ä½œã€‚valarrayè¢«å®šä¹‰ä¸ºä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œä»¥ä¾¿èƒ½å¤Ÿå¤„ç†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p><p>valarayç±»çš„æ–¹æ³•ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701340012717-9dbd4e9a-9b4c-48fb-bbea-99f428fbbb04.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C++åŒ…å«è®©ç¨‹åºå‘˜èƒ½å¤Ÿé™åˆ¶ç¨‹åºç»“æ„çš„ç‰¹æ€§ä¸€ä½¿ç”¨xplicité˜²æ­¢å•å‚æ•°æ„é€ å‡½æ•°çš„éšå¼è½¬æ¢ï¼Œä½¿ç”¨costé™åˆ¶æ–¹æ³•ä¿®æ”¹æ•°æ®ï¼Œç­‰ç­‰ã€‚è¿™æ ·åšçš„æ ¹æœ¬åŸå› æ˜¯ï¼šåœ¨ç¼–è¯‘é˜¶æ®µå‡ºç°é”™è¯¯ä¼˜äºåœ¨è¿è¡Œé˜¶æ®µå‡ºç°é”™è¯¯ã€‚</p><h1 id="ç§æœ‰ç»§æ‰¿">2. ç§æœ‰ç»§æ‰¿</h1><p>C++è¿˜æœ‰å¦ä¸€ç§å®ç°has-aå…³ç³»çš„é€”å¾„ä¸€ç§æœ‰ç»§æ‰¿ã€‚ä½¿ç”¨ç§æœ‰ç»§æ‰¿ï¼ŒåŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜éƒ½å°†æˆä¸ºæ´¾ç”Ÿç±»çš„ç§æœ‰æˆå‘˜ã€‚è¿™æ„å‘³ç€åŸºç±»æ–¹æ³•å°†ä¸ä¼šæˆä¸ºæ´¾ç”Ÿå¯¹è±¡å…¬æœ‰æ¥å£çš„ä¸€éƒ¨åˆ†ï¼Œä½†å¯ä»¥åœ¨æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p><p>ä½¿ç”¨privateå®šä¹‰ç±»</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701341897014-9da86e60-cc60-4ad1-9210-e0db6c5ec121.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701341912559-e93cce0a-5704-4844-990a-478688186694.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>çœç•¥äº†æ˜¾å¼å¯¹è±¡åç§°ï¼Œå¹¶åœ¨å†…è”æ„é€ å‡½æ•°ä¸­ä½¿ç”¨äº†ç±»åï¼Œè€Œä¸æ˜¯æˆå‘˜åã€‚</p><p>ä½¿ç”¨ç§æœ‰ç»§æ‰¿æ—¶ï¼Œåªèƒ½åœ¨æ´¾ç”Ÿç±»çš„æ–¹æ³•ä¸­ä½¿ç”¨åŸºç±»çš„æ–¹æ³•ã€‚</p><p>ç§æœ‰ç»§æ‰¿ä½¿å¾—èƒ½å¤Ÿä½¿ç”¨ç±»åå’Œä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æ¥è°ƒç”¨åŸºç±»çš„æ–¹æ³•ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701355639971-391a53bb-736e-4d49-85ff-1b499d53cc5c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è®¿é—®åŸºç±»å¯¹è±¡ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701355755898-f272e54f-6367-4e2f-9510-6e05ece54ba2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è®¿é—®åŸºç±»çš„å‹å…ƒå‡½æ•°</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701356040815-c2f96944-27bb-4ce1-b363-4925cb46211a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="ä¿æŠ¤ç»§æ‰¿">2.1. ä¿æŠ¤ç»§æ‰¿</h2><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701356176036-0d833515-d0a8-492b-8dda-e879e678434a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ä½¿ç”¨ä¿æŠ¤ç»§æ‰¿æ—¶ï¼ŒåŸºç±»çš„å…¬æœ‰æˆå‘˜å’Œä¿æŠ¤æˆå‘˜éƒ½å°†æˆä¸ºæ´¾ç”Ÿç±»çš„ä¿æŠ¤æˆå‘˜ã€‚</p><h1 id="å¤šé‡ç»§æ‰¿">3. å¤šé‡ç»§æ‰¿</h1><p>æ­£å¦‚æœ¬ç« å‰é¢è®¨è®ºçš„ï¼Œç§æœ‰MIå’Œä¿æŠ¤MIå¯ä»¥è¡¨ç¤ºhas-aå…³ç³»ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701393957670-045d0ca4-a14a-4a68-92ac-5eb5894ee40d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="section">3.1.</h2><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394012510-eb5377de-dcb1-4643-87e4-597beb9c8ef0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>é€šå¸¸ï¼Œè¿™ç§èµ‹å€¼å°†æŠŠåŸºç±»æŒ‡é’ˆè®¾ç½®ä¸ºæ´¾ç”Ÿå¯¹è±¡ä¸­çš„åŸºç±»å¯¹è±¡çš„åœ°å€ã€‚ä½†edä¸­åŒ…å«ä¸¤ä¸ªWorkerå¯¹è±¡ï¼Œæœ‰ä¸¤ä¸ªåœ°å€å¯ä¾›é€‰æ‹©ï¼Œæ‰€ä»¥åº”ä½¿ç”¨ç±»å‹è½¬æ¢æ¥æŒ‡å®šå¯¹è±¡ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394053655-d7d4921c-601c-4bda-9ae0-ecd10ffbf9be.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¿™å°†ä½¿å¾—ä½¿ç”¨åŸºç±»æŒ‡é’ˆæ¥å¼•ç”¨ä¸åŒçš„å¯¹è±¡ï¼ˆå¤šæ€æ€§ï¼‰å¤æ‚åŒ–ã€‚</p><h3 id="è™šåŸºç±»">3.1.1. è™šåŸºç±»</h3><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394131777-a0a144e5-6a30-4724-aeea-ae468df94740.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç°åœ¨ï¼ŒSingingWaiterå¯¹è±¡å°†åªåŒ…å«Workerå¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ä»æœ¬è´¨ä¸Šè¯´ï¼Œç»§æ‰¿çš„Singerå’ŒWaiterå¯¹è±¡å…±äº«ä¸€ä¸ªWorkerå¯¹è±¡ï¼Œè€Œä¸æ˜¯å„è‡ªå¼•å…¥è‡ªå·±çš„Workerå¯¹è±¡å‰¯æœ¬ï¼ˆè¯·å‚è§å›¾l4.5)ã€‚å› ä¸ºSingingWaiterç°åœ¨åªåŒ…å«äº†ä¸€ä¸ªWorkerå­å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å¤šæ€ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394582527-be2778f0-48b6-48e2-8dec-528c2d63d09c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>C++åœ¨åŸºç±»æ˜¯è™šçš„æ—¶ï¼Œç¦æ­¢ä¿¡æ¯é€šè¿‡ä¸­é—´ç±»è‡ªåŠ¨ä¼ é€’ç»™åŸºç±»ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394696142-822a729b-ea25-4a84-869e-b36b5bc0bfe3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è­¦å‘Šï¼šå¦‚æœç±»æœ‰é—´æ¥è™šåŸºç±»ï¼Œåˆ™é™¤éåªéœ€ä½¿ç”¨è¯¥è™šåŸºç±»çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œå¦åˆ™å¿…é¡»æ˜¾å¼åœ°è°ƒç”¨è¯¥è™šåŸºç±»çš„æŸä¸ªæ„é€ å‡½æ•°ã€‚</p><p>è­¦å‘Šï¼šå¤šé‡ç»§æ‰¿å¯èƒ½å¯¼è‡´å‡½æ•°è°ƒç”¨çš„äºŒä¹‰æ€§ã€‚</p><ul><li><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394786558-9ebf3d89-c5ce-4081-96e8-91fe16781315.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394810916-f8b28a4b-d933-4e0a-82c1-057d2f0f84c8.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701394826074-65c06f6c-e1c7-40bd-9361-17a3874ff41b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ul><li>å¯¹äºå•ç»§æ‰¿æ¥è¯´ï¼Œè®©æ´¾ç”Ÿæ–¹æ³•è°ƒç”¨åŸºç±»çš„æ–¹æ³•æ˜¯å¯ä»¥çš„ã€‚</li><li><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701395274402-d2a97288-493d-4874-8b92-d94283008313.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701395288695-1b4de580-a606-48b0-b79e-b0211a09935d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701395302173-0899a128-2a00-4aa8-a543-98c545406b8b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>é‚£ä¹ˆï¼Œä¸€ä¸ªæˆå‘˜åå¦‚ä½•ä¼˜å…ˆäºå¦ä¸€ä¸ªæˆå‘˜åå‘¢ï¼Ÿæ´¾ç”Ÿç±»ä¸­çš„åç§°ä¼˜å…ˆäºç›´æ¥æˆ–é—´æ¥ç¥–å…ˆç±»ä¸­çš„ç›¸åŒåç§°ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„å®šä¹‰ä¸­ï¼š</li><li><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701395804138-d6dcc528-0f8f-4284-a23d-be596f00c3f4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ul><h1 id="ç±»æ¨¡æ¿">4. ç±»æ¨¡æ¿</h1><p>é¦–å…ˆä»‹ç»ä¸€ä¸ªå…è®¸æŒ‡å®šæ•°ç»„å¤§å°çš„ç®€å•æ•°ç»„æ¨¡æ¿ã€‚ä¸€ç§æ–¹æ³•æ˜¯åœ¨ç±»ä¸­ä½¿ç”¨åŠ¨æ€æ•°ç»„å’Œæ„é€ å‡½æ•°å‚æ•°æ¥æä¾›å…ƒç´ æ•°ç›®ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æ¨¡æ¿å‚æ•°æ¥æä¾›å¸¸è§„æ•°ç»„çš„å¤§å°ï¼ŒC++11æ–°å¢çš„æ¨¡æ¿arrayå°±æ˜¯è¿™æ ·åšçš„ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701483644369-e99b152f-7ebb-48be-9364-89c382154ba9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¡¨è¾¾å¼å‚æ•°æ–¹æ³•çš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œæ¯ç§æ•°ç»„å¤§å°éƒ½å°†ç”Ÿæˆè‡ªå·±çš„æ¨¡æ¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„å£°æ˜å°†ç”Ÿæˆä¸¤ä¸ªç‹¬ç«‹çš„ç±»å£°æ˜ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701483726710-80c06006-54e7-4bee-82c2-7d5b998be797.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/14-c++%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81%E9%87%8D%E7%94%A8/1701486177154-09f1a231-1f07-402b-8d2a-25eafa722025.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. ç±»ç»§æ‰¿</title>
    <link href="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/"/>
    <url>/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/</url>
    
    <content type="html"><![CDATA[<h1 id="ç»§æ‰¿-is-aå…³ç³»">13.2 ç»§æ‰¿ï¼š is-aå…³ç³»</h1><p>c++ä¸‰ç§ç»§æ‰¿æ–¹å¼ï¼š</p><ul><li><p>å…¬æœ‰ç»§æ‰¿</p></li><li><ul><li>å»ºç«‹ä¸€ç§is-aå…³ç³»ï¼Œå³æ´¾ç”Ÿç±»å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œå¯ä»¥å¯¹åŸºç±»å¯¹è±¡æ‰§è¡Œçš„ä»»ä½•æ“ä½œï¼Œä¹Ÿå¯ä»¥å¯¹æ´¾ç”Ÿç±»å¯¹è±¡æ‰§è¡Œ</li></ul></li><li><p>ä¿æŠ¤ç»§æ‰¿</p></li><li><p>ç§æœ‰ç»§æ‰¿</p></li></ul><h1 id="å¤šæ€å…¬æœ‰ç»§æ‰¿">13.3 å¤šæ€å…¬æœ‰ç»§æ‰¿</h1><ul><li>åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰åŸºç±»çš„æ–¹æ³•ã€‚</li><li>ä½¿ç”¨è™šæ–¹æ³•ï¼Œä½¿ç”¨å…³é”®è¯virtual</li><li>åŸºç±»å£°æ˜äº†ä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œä¸ºäº†ç¡®ä¿é‡Šæ”¾æ´¾ç”Ÿå¯¹è±¡æ—¶ï¼ŒæŒ‰æ­£ç¡®çš„é¡ºåºè°ƒç”¨ææ„å‡½æ•°ï¼Œ</li><li>å…³é”®å­—virtualåªç”¨äºç±»å£°æ˜çš„æ–¹æ³•åŸå‹ä¸­</li><li>æ´¾ç”Ÿç±»å¹¶ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æ•°æ®ï¼Œè€Œå¿…é¡»ä½¿ç”¨åŸºç±»çš„å…¬æœ‰æ–¹æ³•æ‰èƒ½è®¿é—®è¿™äº›æ•°æ®</li><li>æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åœ¨åˆå§‹åŒ–åŸºç±»ç§æœ‰æ•°æ®æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•</li><li></li></ul><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701183381268-2d61ed7f-133d-4eb7-95f1-ff7322d5f722.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç¼–è¯‘å™¨å¯¹è™šæ–¹æ³•ä½¿ç”¨åŠ¨æ€è”ç¼–ã€‚</p><p>é€šå¸¸ï¼Œç¼–è¯‘å™¨å¤„ç†è™šå‡½æ•°çš„æ–¹æ³•æ˜¯ï¼šç»™æ¯ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªéšè—æˆå‘˜ã€‚éšè—æˆå‘˜ä¸­ä¿å­˜äº†ä¸€ä¸ªæŒ‡å‘å‡½æ•°åœ°å€æ•°ç»„çš„æŒ‡é’ˆã€‚è¿™ç§æ•°ç»„ç§°ä¸ºè™šå‡½æ•°è¡¨(virtualfunctiontable,vtbl)ã€‚è™šå‡½æ•°è¡¨ä¸­å­˜å‚¨äº†ä¸ºç±»å¯¹è±¡è¿›è¡Œå£°æ˜çš„è™šå‡½æ•°çš„åœ°å€ã€‚ä¾‹å¦‚ï¼ŒåŸºç±»å¯¹è±¡åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘åŸºç±»ä¸­æ‰€æœ‰è™šå‡½æ•°çš„åœ°å€è¡¨ã€‚æ´¾ç”Ÿç±»å¯¹è±¡å°†åŒ…å«ä¸€ä¸ªæŒ‡å‘ç‹¬ç«‹åœ°å€è¡¨çš„æŒ‡é’ˆã€‚å¦‚æœæ´¾ç”Ÿç±»æä¾›äº†è™šå‡½æ•°çš„æ–°å®šä¹‰ï¼Œè¯¥è™šå‡½æ•°è¡¨å°†ä¿å­˜æ–°å‡½æ•°çš„åœ°å€ï¼šå¦‚æœæ´¾ç”Ÿç±»æ²¡æœ‰é‡æ–°å®šä¹‰è™šå‡½æ•°ï¼Œè¯¥b1å°†ä¿å­˜å‡½æ•°åŸå§‹ç‰ˆæœ¬çš„åœ°å€ã€‚å¦‚æœæ´¾ç”Ÿç±»å®šä¹‰äº†æ–°çš„è™šå‡½æ•°ï¼Œåˆ™è¯¥å‡½æ•°çš„åœ°å€ä¹Ÿå°†è¢«æ·»åŠ åˆ°vbä¸­ï¼ˆå‚è§å›¾13.5ï¼‰ã€‚æ³¨æ„ï¼Œæ— è®ºç±»ä¸­åŒ…å«çš„è™šå‡½æ•°æ˜¯1ä¸ªè¿˜æ˜¯10ä¸ªï¼Œéƒ½åªéœ€è¦åœ¨å¯¹è±¡ä¸­æ·»åŠ 1ä¸ªåœ°å€æˆå‘˜ï¼Œåªæ˜¯è¡¨çš„å¤§å°ä¸åŒè€Œå·²ã€‚</p><p>è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œç¨‹åºå°†æŸ¥çœ‹å­˜å‚¨åœ¨å¯¹è±¡ä¸­çš„vblåœ°å€ï¼Œç„¶åè½¬å‘ç›¸åº”çš„å‡½æ•°åœ°å€è¡¨ã€‚å¦‚æœä½¿ç”¨ç±»å£°æ˜ä¸­å®šä¹‰çš„ç¬¬ä¸€ä¸ªè™šå‡½æ•°ï¼Œåˆ™ç¨‹åºå°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå‡½æ•°åœ°å€ï¼Œå¹¶æ‰§è¡Œå…·æœ‰è¯¥åœ°å€çš„å‡½æ•°ã€‚å¦‚æœä½¿ç”¨ç±»å£°æ˜ä¸­çš„ç¬¬ä¸‰ä¸ªè™šå‡½æ•°ï¼Œç¨‹åºå°†ä½¿ç”¨åœ°å€ä¸ºæ•°ç»„ä¸­ç¬¬ä¸‰ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚</p><ul><li>æ¯ä¸ªå¯¹è±¡éƒ½å°†å¢å¤§ï¼Œå¢å¤§é‡ä¸ºå­˜å‚¨åœ°å€çš„ç©ºé—´ï¼š</li><li>å¯¹äºæ¯ä¸ªç±»ï¼Œç¼–è¯‘å™¨éƒ½åˆ›å»ºä¸€ä¸ªè™šå‡½æ•°åœ°å€è¡¨ï¼ˆæ•°ç»„ï¼‰ï¼š</li><li>å¯¹äºæ¯ä¸ªå‡½æ•°è°ƒç”¨ï¼Œéƒ½éœ€è¦æ‰§è¡Œä¸€é¡¹é¢å¤–çš„æ“ä½œï¼Œå³åˆ°è¡¨ä¸­æŸ¥æ‰¾åœ°å€ã€‚</li></ul><p>é€šå¸¸åº”ç»™åŸºç±»æä¾›ä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œå³ä½¿å®ƒå¹¶ä¸éœ€è¦ææ„å‡½æ•°ã€‚</p><p>å‹å…ƒä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Œå› ä¸ºå‹å…ƒä¸æ˜¯ç±»æˆå‘˜ï¼Œè€Œåªæœ‰æˆå‘˜æ‰èƒ½æ˜¯è™šå‡½æ•°</p><p>è¿™å¼•å‡ºäº†ä¸¤æ¡ç»éªŒè§„åˆ™ï¼šç¬¬ä¸€ï¼Œå¦‚æœé‡æ–°å®šä¹‰ç»§æ‰¿çš„æ–¹æ³•ï¼Œåº”ç¡®ä¿ä¸åŸæ¥çš„åŸå‹å®Œå…¨ç›¸åŒï¼Œä½†å¦‚æœè¿”å›ç±»å‹æ˜¯åŸºç±»å¼•ç”¨æˆ–æŒ‡é’ˆï¼Œåˆ™å¯ä»¥ä¿®æ”¹ä¸ºæŒ‡å‘æ´¾ç”Ÿç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆï¼ˆè¿™ç§ä¾‹å¤–æ˜¯æ–°å‡ºç°çš„ï¼‰ã€‚è¿™ç§ç‰¹æ€§è¢«ç§°ä¸ºè¿”å›ç±»å‹åå˜(covarianceof return type),å› ä¸ºå…è®¸è¿”å›ç±»å‹éšç±»ç±»å‹çš„å˜åŒ–è€Œå˜åŒ–ï¼š</p><h1 id="è®¿é—®æ§åˆ¶-protected">è®¿é—®æ§åˆ¶ protected</h1><p>è®¿é—®ç±»åˆ«ï¼Œè¿™ç§ç±»åˆ«ç”¨å…³é”®å­—protectedè¡¨ç¤ºã€‚å…³é”®å­—protectedä¸privateç›¸ä¼¼ï¼Œåœ¨ç±»å¤–åªèƒ½ç”¨å…¬æœ‰ç±»æˆå‘˜æ¥è®¿é—®protectedéƒ¨åˆ†ä¸­çš„ç±»æˆå‘˜ã€‚privateå’Œprotectedä¹‹é—´çš„åŒºåˆ«åªæœ‰åœ¨åŸºç±»æ´¾ç”Ÿçš„ç±»ä¸­æ‰ä¼šè¡¨ç°å‡ºæ¥ã€‚æ´¾ç”Ÿç±»çš„æˆå‘˜å¯ä»¥ç›´æ¥è®¿é—®åŸºç±»çš„ä¿æŠ¤æˆå‘˜ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚å› æ­¤ï¼Œå¯¹äºå¤–éƒ¨ä¸–ç•Œæ¥è¯´ï¼Œä¿æŠ¤æˆå‘˜çš„è¡Œä¸ºä¸ç§æœ‰æˆå‘˜ç›¸ä¼¼ï¼šä½†å¯¹äºæ´¾ç”Ÿç±»æ¥è¯´ï¼Œä¿æŠ¤æˆå‘˜çš„è¡Œä¸ºä¸å…¬æœ‰æˆå‘˜ç›¸ä¼¼ã€‚</p><h1 id="æŠ½è±¡åŸºç±»">13.6 æŠ½è±¡åŸºç±»</h1><p>c++é€šè¿‡ä½¿ç”¨çº¯è™šå‡½æ•°æä¾›æœªå®ç°çš„å‡½æ•°ã€‚çº¯è™šå‡½æ•°å£°æ˜çš„ç»“å°¾å¤„ä¸º=0ï¼Œå¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>ï¼š<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">Area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“ç±»å£°æ˜ä¸­åŒ…å«çº¯è™šå‡½æ•°æ—¶ï¼Œåˆ™ä¸èƒ½åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ã€‚è¿™é‡Œçš„ç†å¿µæ˜¯ï¼ŒåŒ…å«çº¯è™šå‡½æ•°çš„ç±»åªç”¨ä½œåŸºç±»ã€‚è¦æˆä¸ºçœŸæ­£çš„ABC,å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚åŸå‹ä¸­çš„-0ä½¿è™šå‡½æ•°æˆä¸ºçº¯è™šå‡½æ•°ã€‚è¿™é‡Œçš„æ–¹æ³•Area()æ²¡æœ‰å®šä¹‰ï¼Œä½†C++ç”šè‡³å…è®¸çº¯è™šå‡½æ•°æœ‰å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œä¹Ÿè®¸æ‰€æœ‰çš„åŸºç±»æ–¹æ³•éƒ½ä¸Move()ä¸€æ ·ï¼Œå¯ä»¥åœ¨åŸºç±»ä¸­è¿›è¡Œå®šä¹‰</p><p><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701269513479-c5caec0c-9b39-4caa-9373-34b44fe66298.png" alt="img"><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701269524547-7e620aa5-cfe1-43ed-aded-04abb98dad80.png" alt="img"></p><p>åœ¨åŸå‹ä¸­ä½¿ç”¨=0æŒ‡å‡ºç±»æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œåœ¨ç±»ä¸­å¯ä»¥ä¸å®šä¹‰è¯¥å‡½æ•°ã€‚</p><h1 id="ç»§æ‰¿å’ŒåŠ¨æ€å†…å­˜åˆ†é…">13.7 ç»§æ‰¿å’ŒåŠ¨æ€å†…å­˜åˆ†é…</h1><p>åŸºç±»ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå¹¶é‡æ–°å®šä¹‰èµ‹å€¼å’Œå¤åˆ¶æ„é€ å‡½æ•°ï¼Œè¿™å°†æ€æ ·å½±å“æ´¾ç”Ÿç±»çš„å®ç°å‘¢ï¼Ÿ</p><h2 id="ç¬¬ä¸€ç§æƒ…å†µæ´¾ç”Ÿç±»ä¸ä½¿ç”¨new">ç¬¬ä¸€ç§æƒ…å†µï¼šæ´¾ç”Ÿç±»ä¸ä½¿ç”¨new</h2><p>ä¸éœ€è¦å®šä¹‰æ˜¾å¼ææ„å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦</p><h2 id="ç¬¬äºŒç§æƒ…å†µæ´¾ç”Ÿç±»ä½¿ç”¨new">ç¬¬äºŒç§æƒ…å†µï¼šæ´¾ç”Ÿç±»ä½¿ç”¨new</h2><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701319292824-66335428-b471-46db-908c-75597df0ea6c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¿…é¡»ä¸ºæ´¾ç”Ÿç±»å®šä¹‰æ˜¾å¼ææ„å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦</p><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701319430467-52ff3857-4072-4eed-a401-14783bb34ca1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¤åˆ¶æ„é€ å‡½æ•°</p><p><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701319458634-09c80093-1504-4f1a-a04a-4a91072485f1.png" alt="img"><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701319830214-390d0184-573f-48c7-b4e4-c7d6823e5126.png" alt="img"></p><p>hasDMAå¤åˆ¶æ„é€ å‡½æ•°åªèƒ½è®¿é—®hasDMAçš„æ•°æ®ï¼Œå› æ­¤å®ƒå¿…é¡»è°ƒç”¨baseDMAå¤åˆ¶æ„é€ å‡½æ•°æ¥å¤„ç†å…±äº«çš„baseDMAæ•°æ®</p><p>å¯¹äºèµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿™æ˜¯é€šè¿‡ä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æ˜¾å¼åœ°è°ƒç”¨åŸºç±»çš„èµ‹å€¼è¿ç®—ç¬¦æ¥å®Œæˆçš„ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701320748605-98ca0f0e-c0b3-4437-ad62-64bca146cb2a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ä½œä¸ºhasDMAç±»çš„å‹å…ƒï¼Œè¯¥å‡½æ•°èƒ½å¤Ÿè®¿é—®styleæˆå‘˜ã€‚ç„¶è€Œï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šè¯¥å‡½æ•°å¦‚ä¸æ˜¯baseDMAç±»çš„å‹å…ƒï¼Œé‚£å®ƒå¦‚ä½•è®¿é—®æˆå‘˜lableå’Œratingå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨baseDMAç±»çš„å‹å…ƒå‡½æ•°operator&lt;&lt;()ã€‚ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå› ä¸ºå‹å…ƒä¸æ˜¯æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦æ¥æŒ‡å‡ºè¦ä½¿ç”¨å“ªä¸ªå‡½æ•°ã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä»¥ä¾¿åŒ¹é…åŸå‹æ—¶èƒ½å¤Ÿé€‰æ‹©æ­£ç¡®çš„å‡½æ•°ã€‚å› æ­¤ï¼Œä»£ç å°†å‚æ•°consthasDMA&amp;è½¬æ¢æˆç±»å‹ä¸ºconst baseDMA&amp;çš„å‚æ•°ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701329791687-f9f70575-9de4-4228-a82d-d067fb848961.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="ç±»è®¾è®¡å›é¡¾">13.8 ç±»è®¾è®¡å›é¡¾</h1><h2 id="é»˜è®¤æ„é€ å‡½æ•°">1. é»˜è®¤æ„é€ å‡½æ•°</h2><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701329856574-97eefade-7e81-422a-8946-f769b1679098.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="å¤åˆ¶æ„é€ å‡½æ•°">2. å¤åˆ¶æ„é€ å‡½æ•°</h2><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701329922671-5d27dc33-02ac-4df8-8a67-058678126be7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="èµ‹å€¼è¿ç®—ç¬¦">3. èµ‹å€¼è¿ç®—ç¬¦</h2><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701329953768-e783af56-3a91-4a75-8298-f321e7bf9559.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/13-%E7%B1%BB%E7%BB%A7%E6%89%BF/1701330123966-bc56e263-173c-4ec9-ae5d-ee64e863942d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="æ„é€ å‡½æ•°ä¸èƒ½è¢«ç»§æ‰¿">4. æ„é€ å‡½æ•°ä¸èƒ½è¢«ç»§æ‰¿</h2><p>æ„é€ å‡½æ•°æ˜¯ä¸èƒ½ç»§æ‰¿çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œå¿…é¡»è°ƒç”¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ã€‚ç„¶è€Œï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°é€šå¸¸ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•æ¥è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼Œä»¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡çš„åŸºç±»éƒ¨åˆ†ã€‚å¦‚æœæ´¾ç”Ÿç±»æ„é€ å‡½æ•°æ²¡æœ‰ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¯­æ³•æ˜¾å¼è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼Œå°†ä½¿ç”¨åŸºç±»çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚åœ¨ç»§æ‰¿é“¾ä¸­ï¼Œæ¯ä¸ªç±»éƒ½å¯ä»¥ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨å°†ä¿¡æ¯ä¼ é€’ç»™ç›¸é‚»çš„åŸºç±»ã€‚C++11æ–°å¢äº†ä¸€ç§è®©æ‚¨èƒ½å¤Ÿç»§æ‰¿æ„é€ å‡½æ•°çš„æœºåˆ¶ï¼Œä½†é»˜è®¤ä»ä¸ç»§æ‰¿æ„é€ å‡½æ•°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. ä½¿ç”¨ç±»</title>
    <link href="/2024/11/27/cpp-primer-plus/11-%E4%BD%BF%E7%94%A8%E7%B1%BB/"/>
    <url>/2024/11/27/cpp-primer-plus/11-%E4%BD%BF%E7%94%A8%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿ç®—ç¬¦é‡è½½">è¿ç®—ç¬¦é‡è½½</h1><figure><img src="/2024/11/27/cpp-primer-plus/11-%E4%BD%BF%E7%94%A8%E7%B1%BB/1700962579971-a26a2ed3-3113-49ea-a636-feec3c6024ae.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. å¯¹è±¡å’Œç±»</title>
    <link href="/2024/11/27/cpp-primer-plus/10-%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/"/>
    <url>/2024/11/27/cpp-primer-plus/10-%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="ç±»çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°">ç±»çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h1><ul><li>ç±»çš„æ•°æ®æˆå‘˜åä½¿ç”¨m_å‰ç¼€æˆ–è€…_åç¼€</li></ul><h2 id="constæˆå‘˜å‡½æ•°">constæˆå‘˜å‡½æ•°</h2><p>â€‹æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨C++ä¸­ï¼Œè‹¥ä¸€ä¸ªå˜é‡å£°æ˜ä¸ºconstç±»å‹ï¼Œåˆ™è¯•å›¾ä¿®æ”¹è¯¥å˜é‡çš„å€¼çš„æ“ä½œéƒ½è¢«è§†ç¼–è¯‘é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œ</p><p>const char blank = â€˜â€™;</p><p>blank = â€˜â€™; // é”™è¯¯</p><p>â€‹é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­ï¼Œä¸ºäº†ä½“ç°å°è£…æ€§ï¼Œé€šå¸¸ä¸å…è®¸ç›´æ¥ä¿®æ”¹ç±»å¯¹è±¡çš„æ•°æ®æˆå‘˜ã€‚è‹¥è¦ä¿®æ”¹ç±»å¯¹è±¡ï¼Œåº”è°ƒç”¨å…¬æœ‰æˆå‘˜å‡½æ•°æ¥å®Œæˆã€‚ä¸ºäº†ä¿è¯constå¯¹è±¡çš„å¸¸é‡æ€§ï¼Œç¼–è¯‘å™¨é¡»åŒºåˆ†ä¸å®‰å…¨ä¸å®‰å…¨çš„æˆå‘˜å‡½æ•°ï¼ˆå³åŒºåˆ†è¯•å›¾ä¿®æ”¹ç±»å¯¹è±¡ä¸ä¸ä¿®æ”¹ç±»å¯¹è±¡çš„å‡½æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ</p><p>const Screen blankScreen;</p><p>blankScreen.display(); // å¯¹è±¡çš„è¯»æ“ä½œ</p><p>blankScreen.set(â€˜*â€™); // é”™è¯¯ï¼šconstç±»å¯¹è±¡ä¸å…è®¸ä¿®æ”¹</p><p>â€‹<strong>åœ¨C++ä¸­ï¼Œåªæœ‰è¢«å£°æ˜ä¸ºconstçš„æˆå‘˜å‡½æ•°æ‰èƒ½è¢«ä¸€ä¸ªconstç±»å¯¹è±¡è°ƒç”¨ã€‚</strong></p><p>â€‹è¦å£°æ˜ä¸€ä¸ªconstç±»å‹çš„ç±»æˆå‘˜å‡½æ•°ï¼Œåªéœ€è¦åœ¨æˆå‘˜å‡½æ•°å‚æ•°åˆ—è¡¨ååŠ ä¸Šå…³é”®å­—constï¼Œä¾‹å¦‚ï¼Œ</p><p>class Screen {</p><p>public:</p><p>char get() const;</p><p>};</p><p>â€‹ åœ¨ç±»ä½“ä¹‹å¤–å®šä¹‰constæˆå‘˜å‡½æ•°æ—¶ï¼Œè¿˜å¿…é¡»åŠ ä¸Šconstå…³é”®å­—ï¼Œä¾‹å¦‚</p><p>char Screen::get() const {</p><p>return _screen[_cursor];</p><p>}</p><p>â€‹è‹¥å°†æˆå‘˜æˆå‘˜å‡½æ•°å£°æ˜ä¸ºconstï¼Œåˆ™è¯¥å‡½æ•°ä¸å…è®¸ä¿®æ”¹ç±»çš„æ•°æ®æˆå‘˜ã€‚ä¾‹å¦‚ï¼Œ</p><p>class Screen {</p><p>public:</p><p>â€‹ int ok() const {return _cursor; }</p><p>â€‹ int error(intival) const { _cursor = ival; }</p><p>};</p><p>â€‹åœ¨ä¸Šé¢æˆå‘˜å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œok()çš„å®šä¹‰æ˜¯åˆæ³•çš„ï¼Œerror()çš„å®šä¹‰åˆ™éæ³•ã€‚</p><p>â€‹å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŠŠä¸€ä¸ªæˆå‘˜å‡½æ•°å£°æ˜ä¸ºconstå¯ä»¥ä¿è¯è¿™ä¸ªæˆå‘˜å‡½æ•°ä¸ä¿®æ”¹æ•°æ®æˆå‘˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ®æˆå‘˜æ˜¯æŒ‡é’ˆï¼Œåˆ™constæˆå‘˜å‡½æ•°å¹¶ä¸èƒ½ä¿è¯ä¸ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠŠè¿™ç§ä¿®æ”¹æ£€æµ‹ä¸ºé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œ</p><p>class Name {</p><p>public:</p><p>â€‹ void setName(const string &amp;s) const;</p><p>private:</p><p>â€‹ char *m_sName;</p><p>};</p><p>void setName(const string &amp;s) const {</p><p>â€‹ m_sName = s.c_str(); // é”™è¯¯ï¼ä¸èƒ½ä¿®æ”¹m_sName;</p><p>â€‹ for (int i = 0; i &lt; s.size(); ++i)</p><p>â€‹ m_sName[i] = s[i]; // ä¸å¥½çš„é£æ ¼ï¼Œä½†ä¸æ˜¯é”™è¯¯çš„</p><p>}</p><p>â€‹ è™½ç„¶ m_Name ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä½† m_sName æ˜¯ char * ç±»å‹ï¼Œconstæˆå‘˜å‡½æ•°å¯ä»¥ä¿®æ”¹å…¶æ‰€æŒ‡å‘çš„å­—ç¬¦ã€‚</p><p>â€‹ constæˆå‘˜å‡½æ•°å¯ä»¥è¢«å…·æœ‰ç›¸åŒå‚æ•°åˆ—è¡¨çš„éconstæˆå‘˜å‡½æ•°é‡è½½ï¼Œä¾‹å¦‚ï¼Œ</p><p>class Screen {</p><p>public:</p><p>â€‹ char get(int x,int y);</p><p>â€‹ char get(int x,int y) const;</p><p>};</p><p>â€‹ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å¯¹è±¡çš„å¸¸é‡æ€§å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚</p><p>const Screen cs;</p><p>Screen cc2;</p><p>char ch = cs.get(0, 0); // è°ƒç”¨constæˆå‘˜å‡½æ•°</p><p>ch = cs2.get(0, 0); // è°ƒç”¨éconstæˆå‘˜å‡½æ•°</p><p>å°ç»“ï¼š</p><p>1ï¼‰constæˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®éconstå¯¹è±¡çš„éconstæ•°æ®æˆå‘˜ã€constæ•°æ®æˆå‘˜ï¼Œä¹Ÿå¯ä»¥è®¿é—®constå¯¹è±¡å†…çš„æ‰€æœ‰æ•°æ®æˆå‘˜ï¼›</p><p>2ï¼‰éconstæˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®éconstå¯¹è±¡çš„éconstæ•°æ®æˆå‘˜ã€constæ•°æ®æˆå‘˜ï¼Œä½†ä¸å¯ä»¥è®¿é—®constå¯¹è±¡çš„ä»»æ„æ•°æ®æˆå‘˜ï¼›</p><p>3ï¼‰ä½œä¸ºä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œåœ¨å£°æ˜ä¸€ä¸ªæˆå‘˜å‡½æ•°æ—¶ï¼Œè‹¥è¯¥æˆå‘˜å‡½æ•°å¹¶ä¸å¯¹æ•°æ®æˆå‘˜è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œåº”å°½å¯èƒ½å°†è¯¥æˆå‘˜å‡½æ•°å£°æ˜ä¸ºconstæˆå‘˜å‡½æ•°ã€‚</p><p>6.constæˆå‘˜å‡½æ•°</p><p>è¯·çœ‹ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼š</p><p>const Stock land Stock ("Kludgehorn Properties");</p><p>land.show ()</p><figure><img src="/2024/11/27/cpp-primer-plus/10-%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/1700925148186-07194aeb-0419-4a48-9e67-68cf6ff2ef13.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="thisæŒ‡é’ˆ">thisæŒ‡é’ˆ</h1><h1 id="åŠ¨æ€å†…å­˜">åŠ¨æ€å†…å­˜</h1><p>é™æ€æˆå‘˜åˆå§‹åŒ–</p><figure><img src="/2024/11/27/cpp-primer-plus/10-%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/1700983611829-0e3f9ed4-38bf-4f9a-ade7-d0239c7dd470.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¿™æ¡è¯­å¥å°†é™æ€æˆå‘˜num_stringsçš„å€¼åˆå§‹åŒ–ä¸ºé›¶ã€‚è¯·æ³¨æ„ï¼Œä¸èƒ½åœ¨ç±»å£°æ˜ä¸­åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ï¼Œè¿™æ˜¯å› ä¸ºå£°æ˜æè¿°äº†å¦‚ä½•åˆ†é…å†…å­˜ï¼Œä½†å¹¶ä¸åˆ†é…å†…å­˜ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿™ç§æ ¼å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œä»è€Œåˆ†é…å’Œåˆå§‹åŒ–å†…å­˜ã€‚å¯¹äºé™æ€ç±»æˆå‘˜ï¼Œå¯ä»¥åœ¨ç±»å£°æ˜ä¹‹å¤–ä½¿ç”¨å•ç‹¬çš„è¯­å¥æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ˜¯å› ä¸ºé™æ€ç±»æˆå‘˜æ˜¯å•ç‹¬å­˜å‚¨çš„ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œåˆå§‹åŒ–è¯­å¥æŒ‡å‡ºäº†ç±»å‹ï¼Œå¹¶ä½¿ç”¨äº†ä½œç”¨åŸŸè¿ç®—ç¬¦ï¼Œä½†æ²¡æœ‰ä½¿ç”¨å…³é”®å­—staticã€‚</p><p>æ‹·è´æ„é€ å‡½æ•°ä½¿ç”¨æ·±æ‹·è´ï¼Œå¯ä»¥é¿å…æµ…æ‹·è´å¸¦æ¥çš„ä¸¤æ¬¡ææ„å‡½æ•°é‡Šæ”¾åŒä¸€å—ç©ºé—´çš„é—®é¢˜</p><figure><img src="/2024/11/27/cpp-primer-plus/10-%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB/1700985928732-dc6ffb52-4470-4ac2-a556-91a197cf3039.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. å†…å­˜æ¨¡å‹å’Œåç§°ç©ºé—´</title>
    <link href="/2024/11/27/cpp-primer-plus/9-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/"/>
    <url>/2024/11/27/cpp-primer-plus/9-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/</url>
    
    <content type="html"><![CDATA[<h3 id="å­˜å‚¨ç‰¹ç»­æ€§ä½œç”¨åŸŸå’Œé“¾æ¥æ€§">1. å­˜å‚¨ç‰¹ç»­æ€§ã€ä½œç”¨åŸŸå’Œé“¾æ¥æ€§</h3><p>cin()æ˜¯é¢å‘å•è¯çš„è¾“å…¥ï¼Œå³ä½¿ç”¨ç©ºç™½ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ï¼‰æ¥ç¡®å®šç»“æŸä¸ºæ­¢ï¼Œå°†å…¶ä¼ é€’ç»™æ¥æ”¶çš„å˜é‡æˆ–æ•°ç»„ï¼Œç©ºç™½ä¹‹åè¾“å…¥çš„å­—ç¬¦ä»ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ï¼Œä¸‹æ¬¡è¯»å–è¾“å…¥æ—¶ï¼Œç»§ç»­è¯»å–ã€‚</p><p>cin.getLine(name,ArSize)æ˜¯é¢å‘è¡Œçš„è¾“å…¥ï¼Œè¯¥å‡½æ•°æ¯æ¬¡è¯»å–ä¸€è¡Œï¼Œå®ƒé€šè¿‡æ¢è¡Œç¬¦æ¥ç¡®å®šè¡Œå°¾ï¼Œä½†ä¸ä¿å­˜æ¢è¡Œç¬¦ã€‚ç›¸åï¼Œåœ¨å­˜å‚¨å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒç”¨ç©ºå­—ç¬¦æ›¿æ¢æ¢è¡Œç¬¦ã€‚</p><p>cin.get(name,ArSize)ä¹Ÿæ˜¯é¢å‘è¡Œçš„è¾“å…¥ï¼Œè¯¥å‡½æ•°ä¸æ˜¯ä¸¢å¼ƒæ¢è¡Œç¬¦ï¼Œè€Œæ˜¯å°†å…¶ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ã€‚</p><p>cin.get()è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼ˆå³ä½¿æ˜¯æ¢è¡Œç¬¦ï¼‰ï¼Œå¸¸ç”¨æ¥å¤„ç†æ¢è¡Œç¬¦ï¼Œä¸ºè¯»å–ä¸‹ä¸€è¡Œè¾“å…¥åšå¥½å‡†å¤‡ã€‚</p><p>cin.get(ch)è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼ˆå³ä½¿æ˜¯æ¢è¡Œç¬¦ï¼‰ï¼Œå¹¶èµ‹å€¼ç»™charç±»å‹çš„ch</p><p>æ–¹æ³•cin.get(input,.ArSize)å°†ä¸€ç›´è¯»å–è¾“å…¥ï¼Œç›´åˆ°åˆ°è¾¾è¡Œå°¾æˆ–è¯»å–äº†ArSize-1ä¸ªå­—ç¬¦ä¸ºæ­¢ã€‚å®ƒæŠŠæ¢è¡Œç¬¦ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ã€‚è¯¥ç¨‹åºä½¿ç”¨cin.get(next)è¯»å–è¡Œè¾“å…¥åçš„å­—ç¬¦ã€‚å¦‚æœnextæ˜¯æ¢è¡Œç¬¦ï¼Œåˆ™è¯´æ˜cin.get(input,.ArSize)è¯»å–äº†æ•´è¡Œï¼›å¦åˆ™è¯´æ˜è¡Œä¸­è¿˜æœ‰å­—ç¬¦æ²¡æœ‰è¢«è¯»å–ã€‚éšåï¼Œç¨‹åºä½¿ç”¨ä¸€ä¸ªå¾ªç¯æ¥ä¸¢å¼ƒä½™ä¸‹çš„å­—ç¬¦ï¼Œä¸è¿‡è¯»è€…å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œè®©ä¸‹ä¸€è½®è¾“å…¥è¯»å–è¡Œä¸­ä½™ä¸‹çš„å­—ç¬¦ã€‚è¯¥ç¨‹åºè¿˜åˆ©ç”¨äº†è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³è¯•å›¾ä½¿ç”¨get(char*,int)è¯»å–ç©ºè¡Œå°†å¯¼è‡´cinä¸ºfalseã€‚</p><h4 id="a.-å®šä½newè¿ç®—ç¬¦">a. å®šä½newè¿ç®—ç¬¦</h4><figure><img src="/2024/11/27/cpp-primer-plus/9-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/1700793978076-e7b5b3db-2d13-4757-adc1-27eec3991231.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/9-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%92%8C%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/1700794001601-e27287ae-a0d2-4e91-b39e-10015593765a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="å‘½åç©ºé—´">2. å‘½åç©ºé—´</h3><p>usingå£°æ˜å’Œusingç¼–è¯‘</p><p>using å£°æ˜å’Œ usingç¼–è¯‘æŒ‡ä»¤æ˜¯C++ä¸­ç”¨äºç®€åŒ–å‘½åç©ºé—´å’Œç±»å‹ä½¿ç”¨çš„å…³é”®å­—ã€‚è™½ç„¶å®ƒä»¬åœ¨åŠŸèƒ½ä¸Šæœ‰äº›ç›¸ä¼¼ï¼Œä½†åœ¨ä½¿ç”¨æ–¹å¼å’Œä½œç”¨èŒƒå›´ä¸Šæœ‰æ‰€ä¸åŒã€‚</p><ol type="1"><li>using å£°æ˜ï¼š usingå£°æ˜ç”¨äºå¼•å…¥ç‰¹å®šçš„å‘½åç©ºé—´ã€ç±»å‹æˆ–æˆå‘˜åˆ°å½“å‰çš„ä½œç”¨åŸŸä¸­ï¼Œä»¥ä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬ï¼Œè€Œæ— éœ€ä½¿ç”¨å®Œå…¨é™å®šçš„åç§°ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> namespace_name;<br><span class="hljs-keyword">using</span> type = type_name;<br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>::member;<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> std::cout;        <span class="hljs-comment">// å¼•å…¥å‘½åç©ºé—´stdä¸­çš„cout</span><br><span class="hljs-keyword">using</span> std::endl;        <span class="hljs-comment">// å¼•å…¥å‘½åç©ºé—´stdä¸­çš„endl</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Hello, world!&quot;</span> &lt;&lt; endl;  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨coutå’Œendlï¼Œè€Œæ— éœ€ä½¿ç”¨std::coutå’Œstd::endl</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡ä½¿ç”¨ using std::cout å’Œ using std::endlå£°æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨ cout å’Œ endlï¼Œè€Œæ— éœ€å†™æˆ std::coutå’Œ std::endlã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ usingå£°æ˜ä¼šå°†ç‰¹å®šçš„å‘½åç©ºé—´ã€ç±»å‹æˆ–æˆå‘˜å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸï¼Œå¯èƒ½ä¼šå¼•å…¥å‘½åå†²çªçš„é£é™©ã€‚å› æ­¤ï¼Œæœ€å¥½å°†using å£°æ˜æ”¾åœ¨å‡½æ•°å†…éƒ¨æˆ–å°½å¯èƒ½å°çš„ä½œç”¨åŸŸä¸­ï¼Œä»¥å‡å°‘æ½œåœ¨çš„å†²çªã€‚</p><ol type="1"><li>using ç¼–è¯‘æŒ‡ä»¤ï¼š usingç¼–è¯‘æŒ‡ä»¤ç”¨äºåœ¨æºæ–‡ä»¶çš„é¡¶éƒ¨å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´æˆ–å‘½åç©ºé—´ä¸­çš„ç‰¹å®šéƒ¨åˆ†ï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªæºæ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> namespace_name;<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;  <span class="hljs-comment">// å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´std</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Hello, world!&quot;</span> &lt;&lt; endl;  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨coutå’Œendlï¼Œè€Œæ— éœ€ä½¿ç”¨std::coutå’Œstd::endl</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡ä½¿ç”¨ using namespacestdï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•´ä¸ªæºæ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨ std å‘½åç©ºé—´ä¸­çš„æˆå‘˜ï¼Œè€Œæ— éœ€å†™æˆstd::cout å’Œ std::endlã€‚</p><p>ä½¿ç”¨ usingç¼–è¯‘æŒ‡ä»¤å¯ä»¥ç®€åŒ–ä»£ç ï¼Œä½†å¯èƒ½ä¼šå¼•å…¥å‘½åå†²çªçš„é£é™©ã€‚å› æ­¤ï¼Œæœ€å¥½åœ¨æºæ–‡ä»¶çš„é¡¶éƒ¨ä½¿ç”¨using ç¼–è¯‘æŒ‡ä»¤ï¼Œå¹¶é¿å…åœ¨å¤´æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œä»¥å‡å°‘æ½œåœ¨çš„å†²çªã€‚</p><p>æ€»ç»“ï¼š</p><ul><li>using å£°æ˜ç”¨äºåœ¨å½“å‰ä½œç”¨åŸŸå†…å¼•å…¥ç‰¹å®šçš„å‘½åç©ºé—´ã€ç±»å‹æˆ–æˆå‘˜ã€‚</li><li>usingç¼–è¯‘æŒ‡ä»¤ç”¨äºåœ¨æ•´ä¸ªæºæ–‡ä»¶ä¸­å¼•å…¥æ•´ä¸ªå‘½åç©ºé—´æˆ–å‘½åç©ºé—´çš„ç‰¹å®šéƒ¨åˆ†ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. å‡½æ•°æ¢å¹½</title>
    <link href="/2024/11/27/cpp-primer-plus/8-%E5%87%BD%E6%95%B0%E6%8E%A2%E5%B9%BD/"/>
    <url>/2024/11/27/cpp-primer-plus/8-%E5%87%BD%E6%95%B0%E6%8E%A2%E5%B9%BD/</url>
    
    <content type="html"><![CDATA[<h3 id="å‡½æ•°æ¨¡æ¿">å‡½æ•°æ¨¡æ¿</h3><p>éšå¼å®ä¾‹åŒ–ã€æ˜¾å¼å®ä¾‹åŒ–å’Œæ˜¾å¼å…·ä½“åŒ–ç»Ÿç§°ä¸ºå…·ä½“åŒ–(specialization)ã€‚å®ƒä»¬çš„ç›¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬è¡¨ç¤ºçš„éƒ½æ˜¯ä½¿ç”¨å…·ä½“ç±»å‹çš„å‡½æ•°å®šä¹‰ï¼Œè€Œä¸æ˜¯é€šç”¨æè¿°ã€‚</p><p>å¼•å…¥æ˜¾å¼å®ä¾‹åŒ–åï¼Œå¿…é¡»ä½¿ç”¨æ–°çš„è¯­æ³•ä¸€åœ¨å£°æ˜ä¸­ä½¿ç”¨å‰ç¼€templateå’Œtemplate&lt;&gt;ï¼Œä»¥åŒºåˆ†æ˜¾å¼å®ä¾‹åŒ–å’Œæ˜¾å¼å…·ä½“åŒ–ã€‚é€šå¸¸ï¼ŒåŠŸèƒ½è¶Šå¤šï¼Œè¯­æ³•è§„åˆ™ä¹Ÿè¶Šå¤šã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ€»ç»“äº†è¿™äº›æ¦‚å¿µï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/8-%E5%87%BD%E6%95%B0%E6%8E%A2%E5%B9%BD/1700728752975-1c0b50d7-eaa5-47c3-81b4-054678d5c974.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç„¶è€Œï¼Œæœ‰æ—¶å€™ï¼Œå³ä½¿ä¸¤ä¸ªå‡½æ•°éƒ½å®Œå…¨åŒ¹é…ï¼Œä»å¯å®Œæˆé‡è½½è§£æã€‚é¦–å…ˆï¼ŒæŒ‡å‘écostæ•°æ®çš„æŒ‡é’ˆå’Œå¼•ç”¨ä¼˜å…ˆä¸éconstæŒ‡é’ˆå’Œå¼•ç”¨å‚æ•°åŒ¹é…ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨recycle()ç¤ºä¾‹ä¸­ï¼Œå¦‚æœåªå®šä¹‰äº†å‡½æ•°#3å’Œ#4æ˜¯å®Œå…¨åŒ¹é…çš„ï¼Œåˆ™å°†é€‰æ‹©#3ï¼Œå› ä¸ºinkæ²¡æœ‰è¢«å£°æ˜ä¸ºconstã€‚.ç„¶è€Œï¼Œ<strong>constå’Œéconstä¹‹é—´çš„åŒºåˆ«åªé€‚ç”¨äºæŒ‡é’ˆå’Œå¼•ç”¨æŒ‡å‘çš„æ•°æ®</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåªå®šä¹‰äº†#1å’Œ#2ï¼Œåˆ™å°†å‡ºç°äºŒä¹‰æ€§é”™è¯¯ã€‚</p><figure><img src="/2024/11/27/cpp-primer-plus/8-%E5%87%BD%E6%95%B0%E6%8E%A2%E5%B9%BD/1700728959606-664ee444-dc04-4490-b435-cf2d3398c1d9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç®€è€Œè¨€ä¹‹ï¼Œé‡è½½è§£æå°†å¯»æ‰¾æœ€åŒ¹é…çš„å‡½æ•°ã€‚å¦‚æœåªå­˜åœ¨ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œåˆ™é€‰æ‹©å®ƒï¼šå¦‚æœå­˜åœ¨å¤šä¸ªè¿™æ ·çš„å‡½æ•°ï¼Œä½†å…¶ä¸­åªæœ‰ä¸€ä¸ªæ˜¯éæ¨¡æ¿å‡½æ•°ï¼Œåˆ™é€‰æ‹©è¯¥å‡½æ•°ï¼šå¦‚æœå­˜åœ¨å¤šä¸ªé€‚åˆçš„å‡½æ•°ï¼Œä¸”å®ƒä»¬éƒ½ä¸ºæ¨¡æ¿å‡½æ•°ï¼Œä½†å…¶ä¸­æœ‰ä¸€ä¸ªå‡½æ•°æ¯”å…¶ä»–å‡½æ•°æ›´å…·ä½“ï¼Œåˆ™é€‰æ‹©è¯¥å‡½æ•°ã€‚å¦‚æœæœ‰å¤šä¸ªåŒæ ·åˆé€‚çš„éæ¨¡æ¿å‡½æ•°æˆ–æ¨¡æ¿å‡½æ•°ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªå‡½æ•°æ¯”å…¶ä»–å‡½æ•°æ›´å…·ä½“ï¼Œåˆ™å‡½æ•°è°ƒç”¨å°†æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤æ˜¯é”™è¯¯çš„ï¼šå½“ç„¶ï¼Œå¦‚æœä¸å­˜åœ¨åŒ¹é…çš„å‡½æ•°ï¼Œåˆ™ä¹Ÿæ˜¯é”™è¯¯</p><p>2.å…³é”®å­—decltypeï¼ˆC++11)</p><p>C++11æ–°å¢çš„å…³é”®å­—decltypeæä¾›äº†è§£å†³æ–¹æ¡ˆã€‚å¯è¿™æ ·ä½¿ç”¨è¯¥å…³é”®å­—ï¼š</p><p>int x;</p><p>decltype(x) y;//make y the same type as x</p><p>C++æ–°å¢äº†ä¸€ç§å£°æ˜å’Œå®šä¹‰å‡½æ•°çš„è¯­æ³•ã€‚ä¸‹é¢ä½¿ç”¨å†…ç½®ç±»å‹æ¥è¯´æ˜è¿™ç§è¯­æ³•çš„å·¥ä½œåŸç†ã€‚å¯¹äºä¸‹é¢çš„åŸå‹ï¼š</p><figure><img src="/2024/11/27/cpp-primer-plus/8-%E5%87%BD%E6%95%B0%E6%8E%A2%E5%B9%BD/1700729320278-cb9a82c9-8af3-410f-969c-1e6b746bd889.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp-primer-plus/8-%E5%87%BD%E6%95%B0%E6%8E%A2%E5%B9%BD/1700729537363-6a891f7e-395c-4520-af3f-65176552d94e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ primer plus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. STL-å¸¸ç”¨ç®—æ³•</title>
    <link href="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/"/>
    <url>/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694939256088-7fd06b10-4c80-47f2-8f99-2ff0768f66c0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="å¸¸ç”¨éå†ç®—æ³•">5.1 å¸¸ç”¨éå†ç®—æ³•</h1><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694940009822-2094aed7-581d-417e-905a-f8eaac0a91be.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="for_each">for_each</h3><p>for_each(iterator beg, iterator end,_func)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print01</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">print02</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), print01);<br>    cout &lt;&lt; endl;<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="transform">transform</h3><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694941538977-391c217d-b02b-4834-a06c-2f0398287e8d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ¬è¿è¦æå‰å¼€è¾Ÿç©ºé—´ï¼Œå¦åˆ™æ— æ³•æ¬è¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TransForm</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> v;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    t.<span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>());<br>    <span class="hljs-built_in">transform</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), t.<span class="hljs-built_in">begin</span>(),<span class="hljs-built_in">TransForm</span>());<br>    for_each(t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>&#125;<br></code></pre></td></tr></table></figure><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1705215111397-cd778a02-609a-4d93-aaa2-8653f4fa0dcb.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•">5.2 å¸¸ç”¨æŸ¥æ‰¾ç®—æ³•</h1><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694942632647-8828ac65-1e96-4cc2-bfe7-3959e1429d08.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="find">5.2.1 find</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694942650730-6c3860d3-acba-491b-a9bf-65bba7badbcd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>())<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;don&#x27;t&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; endl;<br>    &#125;<br><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string mn, <span class="hljs-type">int</span> ma) :<span class="hljs-built_in">name</span>(mn), <span class="hljs-built_in">age</span>(ma) &#123;&#125;<br><br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Person&amp;p)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;name == p.name &amp;&amp; <span class="hljs-keyword">this</span>-&gt;age ==p.age)<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;Person&gt; v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-number">40</span>)</span></span>;<br><br>    v.<span class="hljs-built_in">push_back</span>(p1);<br>    v.<span class="hljs-built_in">push_back</span>(p2);<br>    v.<span class="hljs-built_in">push_back</span>(p3);<br>    v.<span class="hljs-built_in">push_back</span>(p4);<br><br><br>    <span class="hljs-function">Person <span class="hljs-title">pp</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br>    vector&lt;Person&gt;::iterator it = <span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), pp);<br>    <span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>())<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;no&quot;</span> &lt;&lt; endl;<br><br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; it-&gt;age &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; it-&gt;name &lt;&lt; endl;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="find_if">5.2.2 find_if</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694945738368-284ba7b2-f63d-4f4d-a5e0-f23a05c5167e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GreaterFive</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> val &gt; <span class="hljs-number">5</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test06</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">GreaterFive</span>());<br>    <span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>())<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;don&#x27;t&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; endl;<br>    &#125;<br><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="adjacant_find">5.2.3 adjacant_find</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694946132430-1ec3fb82-9699-43a7-8f81-4b7aef1b2af3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test07</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">9</span>);<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">adjacent_find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>())<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;don&#x27;t&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; endl;<br>    &#125;<br><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="binary_search">5.2.4 binary_search</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694946447252-a8fb155e-1bd8-4206-81f8-925b80d39e32.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test08</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">binary_search</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">9</span>) &lt;&lt; endl;<br><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="count">5.2.5 count</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694946671737-6bf5d32d-6b5e-4115-9806-2283c95fb5af.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¦é‡è½½ ==</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person2</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person2</span>(string mn, <span class="hljs-type">int</span> ma) :<span class="hljs-built_in">name</span>(mn), <span class="hljs-built_in">age</span>(ma) &#123;&#125;<br><br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Person2&amp; p)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>-&gt;age == p.age)<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test10</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;Person2&gt; v;<br>    <span class="hljs-function">Person2 <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;zhang&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(p);<br>    &#125;<br>    <span class="hljs-function">Person2 <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;zhang&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    cout &lt;&lt; <span class="hljs-built_in">count</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), p2) &lt;&lt; endl;<br></code></pre></td></tr></table></figure><h2 id="count_if">5.2.6 count_if</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694947113573-77a029f4-4f6e-4ede-b467-504a4cc387d2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test11</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">count_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">GreaterFive</span>()) &lt;&lt; endl;<br><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person3</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person3</span>(string mn, <span class="hljs-type">int</span> ma) :<span class="hljs-built_in">name</span>(mn), <span class="hljs-built_in">age</span>(ma) &#123;&#125;<br><br>    <br>    string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Less20</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person3&amp; p)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span> (p.age &lt; <span class="hljs-number">20</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test12</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;Person3&gt; v;<br>    <span class="hljs-function">Person3 <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-string">&quot;zhang&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(p);<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">count_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">Less20</span>()) &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å¸¸ç”¨æ’åºç®—æ³•">5.3 å¸¸ç”¨æ’åºç®—æ³•</h1><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694947701901-76413d91-c9e8-488a-8eae-a56c34320be0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="sort">5.3.1 sort</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694947746132-940e811e-c946-45d3-916e-65848ec3a794.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test13</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">-2</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="random_shuffle">5.3.2 random_shuffle</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694947999166-682e455f-0805-4e77-aea5-3b154f8a8730.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test14</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">-2</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-built_in">random_shuffle</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="merge">5.3.3 merge</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694948175848-2774a8f8-d9f9-4af9-a455-1bfde57ca077.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test15</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    vector&lt;<span class="hljs-type">int</span>&gt; vt;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        t.<span class="hljs-built_in">push_back</span>(i<span class="hljs-number">+1</span>);<br>    &#125;<br>    <span class="hljs-comment">// æå‰åˆ†é…ç©ºé—´</span><br>    vt.<span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>() + t.<span class="hljs-built_in">size</span>());<br>    <span class="hljs-built_in">merge</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), vt.<span class="hljs-built_in">begin</span>());<br>    for_each(vt.<span class="hljs-built_in">begin</span>(), vt.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="reverse">5.3.4 reverse</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694948443173-359ba46f-6630-4703-a542-3ea71d1a8c90.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test16</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æå‰åˆ†é…ç©ºé—´</span><br>    <span class="hljs-built_in">reverse</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>());<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•">5.4 å¸¸ç”¨æ‹·è´å’Œæ›¿æ¢ç®—æ³•</h1><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694948590202-f988505f-1701-402b-baea-d55903a4fa5a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="copy">5.4.1 copy</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694948644179-6bea1a31-929d-444f-b59a-573274995b0b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test17</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br><br>    <span class="hljs-comment">// æå‰åˆ†é…ç©ºé—´</span><br>    t.<span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>());<br>    <span class="hljs-built_in">copy</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(),t.<span class="hljs-built_in">begin</span>());<br>    for_each(t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="replace">5.4.2 replace</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694953212642-94d05f03-f76a-4753-b3dd-59004c913a5e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test18</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br><br>    <span class="hljs-built_in">replace</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">9</span>,<span class="hljs-number">10</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="replace_if">5.4.3 replace_if</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694953370368-eba86a10-7599-4441-ad75-fb8e9763b50d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test18</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br><br>    <span class="hljs-comment">// æå‰åˆ†é…ç©ºé—´</span><br><br>    <span class="hljs-built_in">replace_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">GreaterFive</span>(), <span class="hljs-number">10</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="swap">5.4.4 swap</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694953540770-7c5c3738-457c-42c7-bb5a-49289deffd85.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test20</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        t.<span class="hljs-built_in">push_back</span>(i*<span class="hljs-number">2</span>);<br>    &#125;<br>    <span class="hljs-comment">// æå‰åˆ†é…ç©ºé—´</span><br>    <span class="hljs-built_in">swap</span>(v, t);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>    for_each(t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•">5.5 å¸¸ç”¨ç®—æœ¯ç”Ÿæˆç®—æ³•</h1><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694953750614-fdd76d87-89e1-4e96-9e23-1d3d693509c5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="accumulate">5.5.1accumulate</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694953814721-a3f170a6-f421-4751-a7dc-a8290ba4c7a6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test21</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-type">int</span> total  = <span class="hljs-built_in">accumulate</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-number">0</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>    cout &lt;&lt; total &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="fill">5.5.2 fill</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694953997039-30862e12-00b3-4c28-b14a-998926eca1a9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test22</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-built_in">fill</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">20</span>);<br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å¸¸ç”¨é›†åˆç®—æ³•">5.6å¸¸ç”¨é›†åˆç®—æ³•</h1><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694954110501-3525b07c-8ed1-4db8-8d38-4d228e55ab50.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="set-intersection">5.6.1 set intersection</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694954143467-97b162b4-23c5-45a3-a471-6695a7a5df23.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è¿”å›å€¼ä¸ºäº¤é›†æœ€åä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test23</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    vector&lt;<span class="hljs-type">int</span>&gt; vt;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        t.<span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">5</span>);<br>    &#125;<br>    vt.<span class="hljs-built_in">resize</span>(<span class="hljs-built_in">min</span>(v.<span class="hljs-built_in">size</span>(), t.<span class="hljs-built_in">size</span>()));<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it =  <span class="hljs-built_in">set_intersection</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), vt.<span class="hljs-built_in">begin</span>());<br>    for_each(vt.<span class="hljs-built_in">begin</span>(), it, <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="set_union">5.6.2 set_union</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694954768660-9efa1125-bcaa-4ffd-82cf-de6be4ef0b13.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test24</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    vector&lt;<span class="hljs-type">int</span>&gt; vt;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        t.<span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">5</span>);<br>    &#125;<br>    vt.<span class="hljs-built_in">resize</span>((v.<span class="hljs-built_in">size</span>()+t.<span class="hljs-built_in">size</span>()));<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">set_union</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), vt.<span class="hljs-built_in">begin</span>());<br>    for_each(vt.<span class="hljs-built_in">begin</span>(), it, <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="set_diffrence">5.6.3 set_diffrence</h2><figure><img src="/2024/11/27/cpp/15-STL-%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1694954804343-9422e286-f3c8-44cb-a2a9-578eb28bf545.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test25</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; t;<br>    vector&lt;<span class="hljs-type">int</span>&gt; vt;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        t.<span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">5</span>);<br>    &#125;<br>    vt.<span class="hljs-built_in">resize</span>(<span class="hljs-built_in">max</span>(v.<span class="hljs-built_in">size</span>() , t.<span class="hljs-built_in">size</span>()));<br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">set_difference</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), t.<span class="hljs-built_in">begin</span>(), t.<span class="hljs-built_in">end</span>(), vt.<span class="hljs-built_in">begin</span>());<br>    for_each(vt.<span class="hljs-built_in">begin</span>(), it, <span class="hljs-built_in">print02</span>());<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. STL å‡½æ•°å¯¹è±¡</title>
    <link href="/2024/11/27/cpp/14-STL%20%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/"/>
    <url>/2024/11/27/cpp/14-STL%20%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡½æ•°å¯¹è±¡">4.1 å‡½æ•°å¯¹è±¡</h1><p>æ¦‚å¿µï¼š</p><p>é‡è½½å‡½æ•°è°ƒç”¨æ“ä½œç¬¦çš„ç±»ï¼Œå…¶å¯¹è±¡å¸¸ç§°ä¸ºå‡½æ•°å¯¹è±¡</p><p>å‡½æ•°å¯¹è±¡ä½¿ç”¨é‡è½½çš„(0æ—¶ï¼Œè¡Œä¸ºç±»ä¼¼å‡½æ•°è°ƒç”¨ï¼Œä¹Ÿå«ä»¿å‡½æ•°</p><p>æœ¬è´¨ï¼š</p><p>å‡½æ•°å¯¹è±¡ï¼ˆä»¿å‡½æ•°ï¼‰æ˜¯ä¸€ä¸ªç±»ï¼Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°</p><h2 id="å‡½æ•°å¯¹è±¡ä½¿ç”¨">4.1.1 å‡½æ•°å¯¹è±¡ä½¿ç”¨</h2><p>ç‰¹ç‚¹ï¼š</p><p>å‡½æ•°å¯¹è±¡åœ¨ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°é‚£æ ·è°ƒç”¨ï¼Œå¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥æœ‰è¿”å›å€¼</p><p>å‡½æ•°å¯¹è±¡è¶…å‡ºæ™®é€šå‡½æ•°çš„æ¦‚å¿µï¼Œå‡½æ•°å¯¹è±¡å¯ä»¥æœ‰è‡ªå·±çš„çŠ¶æ€</p><p>å‡½æ•°å¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdd</span><br>&#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> a + b;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPrint</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MyPrint</span>():<span class="hljs-built_in">count</span>(<span class="hljs-number">0</span>) &#123;&#125;;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string test)</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; test &lt;&lt; endl;<br>        count++;<br>    &#125;<br>    <span class="hljs-type">int</span> count;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doPrint</span><span class="hljs-params">(MyPrint&amp; mp, string test)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">mp</span>(test);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    MyAdd myadd;<br>    cout &lt;&lt; <span class="hljs-built_in">myadd</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>) &lt;&lt; endl;<br>    MyPrint myprint;<br>    <span class="hljs-built_in">myprint</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-built_in">myprint</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-built_in">myprint</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    cout &lt;&lt; myprint.count &lt;&lt; endl;<br>    <span class="hljs-built_in">doPrint</span>(myprint, <span class="hljs-string">&quot;hello&quot;</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="è°“è¯">4.2 è°“è¯</h1><h2 id="è°“è¯-1">4.2.1 è°“è¯</h2><p>æ¦‚å¿µï¼š</p><p>Â·è¿”å›booç±»å‹çš„ä»¿å‡½æ•°ç§°ä¸ºè°“è¯</p><p>å¦‚æœoperator(ï¼‰æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšä¸€å…ƒè°“è¯</p><p>å¦‚æœoperator(ï¼‰æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå«åšäºŒå…ƒè°“è¯</p><h2 id="ä¸€å…ƒè°“è¯">4.2.2 ä¸€å…ƒè°“è¯</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GreaterFive</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> val &gt; <span class="hljs-number">5</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector &lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    vector &lt;<span class="hljs-type">int</span>&gt;::iterator it = <span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">GreaterFive</span>());<span class="hljs-comment">//åŒ¿åå‡½æ•°å¯¹è±¡</span><br>    <span class="hljs-keyword">if</span> (it == v.<span class="hljs-built_in">end</span>())<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æœªæ‰¾åˆ°&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;zhaodaole&quot;</span> &lt;&lt; *it &lt;&lt; endl;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test02</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äºŒå…ƒè°“è¯">4.2.3 äºŒå…ƒè°“è¯</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompare</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> a &gt; b;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector &lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">MyCompare</span>());<br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å†…å»ºå‡½æ•°å¯¹è±¡">4.3 å†…å»ºå‡½æ•°å¯¹è±¡</h1><h2 id="å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰">4.3.1 å†…å»ºå‡½æ•°å¯¹è±¡æ„ä¹‰</h2><p>æ¦‚å¿µï¼š</p><p>STLå†…å»ºäº†ä¸€äº›å‡½æ•°å¯¹è±¡</p><p>åˆ†ç±»ï¼š</p><p>Â·ç®—æœ¯ä»¿å‡½æ•°</p><p>å…³ç³»ä»¿å‡½æ•°</p><p>Â·ç½—è¾‘ä»¿å‡½æ•°</p><p>ç”¨æ³•ï¼š</p><p>è¿™äº›ä»¿å‡½æ•°æ‰€äº§ç”Ÿçš„å¯¹è±¡ï¼Œç”¨æ³•å’Œä¸€èˆ¬å‡½æ•°å®Œå…¨ç›¸åŒ</p><p>ä½¿ç”¨å†…å»ºå‡½æ•°å¯¹è±¡ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶#include<functional></functional></p><h2 id="ç®—æœ¯ä»¿å‡½æ•°">4.3.2 ç®—æœ¯ä»¿å‡½æ•°</h2><figure><img src="/2024/11/27/cpp/14-STL%20%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/1694938110670-47db6381-575d-4cd9-99f4-627d2027e682.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    negate&lt;<span class="hljs-type">int</span>&gt;n;<br>    cout &lt;&lt; <span class="hljs-built_in">n</span>(<span class="hljs-number">50</span>) &lt;&lt; endl;<span class="hljs-comment">// -50</span><br><br>    modulus&lt;<span class="hljs-type">int</span>&gt;p;<br>    cout &lt;&lt; <span class="hljs-built_in">p</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å…³ç³»ä»¿å‡½æ•°">4.3.å…³ç³»ä»¿å‡½æ•°</h2><figure><img src="/2024/11/27/cpp/14-STL%20%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/1694938365012-934d0dc8-e781-498a-9935-efa1a1f74179.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector &lt;<span class="hljs-type">int</span>&gt;v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        v.<span class="hljs-built_in">push_back</span>(i);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-built_in">greater</span>&lt;<span class="hljs-type">int</span>&gt;());<br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é€»è¾‘ä»¿å‡½æ•°">4.3.é€»è¾‘ä»¿å‡½æ•°</h2><figure><img src="/2024/11/27/cpp/14-STL%20%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/1694938665048-b2351766-f778-45dd-a400-b6c586e011f4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test06</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">bool</span>&gt; v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">false</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">true</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-literal">false</span>);<br><br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">bool</span>&gt;::const_iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br><br>    vector&lt;<span class="hljs-type">bool</span>&gt;v2;<br>    v<span class="hljs-number">2.</span><span class="hljs-built_in">resize</span>(v.<span class="hljs-built_in">size</span>());<br><br>    <span class="hljs-built_in">transform</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-built_in">logical_not</span>&lt;<span class="hljs-type">bool</span>&gt;());<br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">bool</span>&gt;::const_iterator it = v<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(); it != v<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. STLå¸¸ç”¨å®¹å™¨</title>
    <link href="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/"/>
    <url>/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="string-å®¹å™¨">3.1 string å®¹å™¨</h1><h2 id="stringåŸºæœ¬æ¦‚å¿µ">3.1.1 stringåŸºæœ¬æ¦‚å¿µ</h2><p>æœ¬è´¨ï¼š</p><p>ã€‚stringæ˜¯C++é£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œstringæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»</p><p>stringiå’Œchar*åŒºåˆ«ï¼š</p><p>Â·char*æ˜¯ä¸€ä¸ªæŒ‡é’ˆ</p><p>Â·stringæ˜¯ä¸€ä¸ªç±»ï¼Œç±»å†…éƒ¨å°è£…äº†char<em>,ç®¡ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªchar</em>å‹çš„å®¹å™¨ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><p>stringç±»å†…éƒ¨å°è£…äº†å¾ˆå¤šæˆå‘˜æ–¹æ³•I</p><p>ä¾‹å¦‚ï¼šæŸ¥æ‰¾find,æ‹·è´copy,åˆ é™¤deleteæ›¿æ¢replace,æ’å…¥insert</p><p>stringç®¡ç†chr*æ‰€åˆ†é…çš„å†…å­˜ï¼Œä¸ç”¨æ‹…å¿ƒå¤åˆ¶è¶Šç•Œå’Œå–å€¼è¶Šç•Œç­‰ï¼Œç”±ç±»å†…éƒ¨è¿›è¡Œè´Ÿè´£</p><h2 id="stringæ„é€ å‡½æ•°">3.1.2 stringæ„é€ å‡½æ•°</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694850849276-b8532a37-daff-4395-b186-d30d91d5569b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class189_stl_string.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string s1;<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* str = <span class="hljs-string">&quot;hello world&quot;</span>;<br>    <span class="hljs-function">string <span class="hljs-title">s2</span><span class="hljs-params">(str)</span></span>;<br>    cout &lt;&lt; s2 &lt;&lt; endl;<br>    <span class="hljs-function">string <span class="hljs-title">s3</span><span class="hljs-params">(s2)</span></span>;<span class="hljs-comment">//æ‹·è´æ„é€ </span><br>    cout &lt;&lt; s3 &lt;&lt; endl;<br>    <span class="hljs-function">string <span class="hljs-title">s4</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;a&#x27;</span>)</span></span>;<br>    cout &lt;&lt; s4 &lt;&lt; endl;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="stringèµ‹å€¼æ“ä½œ">3.1.3 stringèµ‹å€¼æ“ä½œ</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694851975792-3ee28d18-0526-4baf-9ef7-6a48bcb1b243.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1;<br>    str1 = <span class="hljs-string">&quot;hello world&quot;</span>;<br><br>    string str2;<br>    str2 = str1;<br><br>    string str3;<br>    str3 = <span class="hljs-string">&#x27;a&#x27;</span>;<br><br>    string str4;<br>    str<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-string">&quot;hello c++&quot;</span>);<br><br>    string str5;<br>    str<span class="hljs-number">5.</span><span class="hljs-built_in">assign</span>(<span class="hljs-string">&quot;hello c++&quot;</span>, <span class="hljs-number">5</span>);<br><br>    string str6;<br>    str<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(str5);<br><br>    string str4;<br>    str<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;w&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²æ‹¼æ¥">3.1.4 å­—ç¬¦ä¸²æ‹¼æ¥</h2><p>åœ¨å­—ç¬¦ä¸²å°¾æ‹¼æ¥å­—ç¬¦ä¸²</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694852026997-26415dd6-ee0f-4ff5-bea6-af63827ccaf5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;wo&quot;</span>;<br>    str1 += <span class="hljs-string">&quot;aiwanyouxi&quot;</span>;<br>    str1 += <span class="hljs-string">&#x27;:&#x27;</span>;<br>    <br>    string str2 = <span class="hljs-string">&quot;LOL&quot;</span>;<br>    str1 += str2;<br>    cout &lt;&lt; str1 &lt;&lt; endl;<br><br>    string str3 = <span class="hljs-string">&quot;I&quot;</span>;<br>    str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(<span class="hljs-string">&quot; love &quot;</span>);<br>    str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;game abcde&quot;</span>, <span class="hljs-number">4</span>);<br>    str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(str2);<br>    str<span class="hljs-number">3.</span><span class="hljs-built_in">append</span>(str2, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);<br>    cout &lt;&lt; str3 &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="stringæŸ¥æ‰¾å’Œæ›¿æ¢">3.1.5 stringæŸ¥æ‰¾å’Œæ›¿æ¢</h2><p>åŠŸèƒ½æè¿°ï¼š</p><p>æŸ¥æ‰¾ï¼šæŸ¥æ‰¾æŒ‡å®šå­—ç¬¦æ˜¯å¦å­˜åœ¨</p><p>,æ›¿æ¢ï¼šåœ¨æŒ‡å®šçš„ä½ç½®æ›¿æ¢å­—ç¬¦ä¸²</p><p>å‡½æ•°åŸå‹ï¼š</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694852667605-ed17a1e4-d480-4a3b-a26d-9291c9d8ecb2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;abcdefgde&quot;</span>;<br>    <span class="hljs-type">int</span> pos = str<span class="hljs-number">1.f</span>ind(<span class="hljs-string">&quot;de&quot;</span>);  <span class="hljs-comment">//æ²¡æœ‰è¿”å›-1</span><br>    cout &lt;&lt; pos &lt;&lt; endl;<br><br>    pos = str<span class="hljs-number">1.</span><span class="hljs-built_in">rfind</span>(<span class="hljs-string">&quot;de&quot;</span>);     <span class="hljs-comment">//rfindä»å³å¾€å·¦æŸ¥</span><br>    cout &lt;&lt; pos &lt;&lt; endl;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;abcdefg&quot;</span>;<br>    str<span class="hljs-number">1.</span><span class="hljs-built_in">replace</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-string">&quot;111&quot;</span>);  <span class="hljs-comment">//æ²¡æœ‰è¿”å›-1</span><br>    cout &lt;&lt; str1 &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="stringå­—ç¬¦ä¸²æ¯”è¾ƒ">3.1.6 stringå­—ç¬¦ä¸²æ¯”è¾ƒ</h2><p>åŠŸèƒ½æè¿°ï¼š</p><p>Â·å­—ç¬¦ä¸²ä¹‹é—´çš„æ¯”è¾ƒ</p><p>æ¯”è¾ƒæ–¹å¼ï¼š</p><p>Â·å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯æŒ‰å­—ç¬¦çš„ASCIç è¿›è¡Œå¯¹æ¯”</p><p>=è¿”å›0</p><p>&gt;è¿”å›1</p><p>&lt;è¿”å›-1</p><p><strong>å‡½æ•°åŸå‹ï¼š</strong></p><p>int compare(const string &amp;s)const; //ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</p><p>int compare(const char *s)const; //ä¸å­—ç¬¦ä¸²sæ¯”è¾ƒ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;hello&quot;</span>;<br>    string str2 = <span class="hljs-string">&quot;hfllo&quot;</span>;<br>    cout &lt;&lt; str<span class="hljs-number">1.</span><span class="hljs-built_in">compare</span>(str2) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦å­˜å–">3.1.7 å­—ç¬¦å­˜å–</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694853988430-2529261b-f472-4fdb-ac5d-433f49611dce.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test06</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;hello&quot;</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; str<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        cout &lt;&lt; str1[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; str<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        cout &lt;&lt; str<span class="hljs-number">1.</span><span class="hljs-built_in">at</span>(i) &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br><br>    str1[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;x&#x27;</span>;<br>    cout &lt;&lt; str1 &lt;&lt; endl;<br><br>    str1[<span class="hljs-number">1</span>] = <span class="hljs-string">&#x27;x&#x27;</span>;<br>    cout &lt;&lt; str1 &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="stringæ’å…¥å’Œåˆ é™¤">3.1.8 stringæ’å…¥å’Œåˆ é™¤</h2><p>åŠŸèƒ½æè¿°ï¼š</p><p>Â·å¯¹stringå­—ç¬¦ä¸²è¿›è¡Œæ’å…¥å’Œåˆ é™¤å­—ç¬¦æ“ä½œ</p><p>å‡½æ•°åŸå‹ï¼š</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694854285252-32c89679-d0db-4933-ac18-c7491fa14771.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test07</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;hello&quot;</span>;<br><br>    str<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;111&quot;</span>);<br>    cout &lt;&lt; str1 &lt;&lt; endl;<br><br>    str<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br>    cout &lt;&lt; str1 &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="stringå­ä¸²">3.1.9 stringå­ä¸²</h2><p>åŠŸèƒ½æè¿°ï¼š</p><p>Â·ä»å­—ç¬¦ä¸²ä¸­è·å–æƒ³è¦çš„å­ä¸²</p><p>å‡½æ•°åŸå‹ï¼š</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694854454735-89024c7e-b9d5-4032-b041-e0839a3119bb.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test08</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1 = <span class="hljs-string">&quot;hello&quot;</span>;<br><br>    string subStr = str<span class="hljs-number">1.</span><span class="hljs-built_in">substr</span>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br>    cout &lt;&lt; subStr &lt;&lt; endl;<br><br>    <span class="hljs-type">int</span> pos = str<span class="hljs-number">1.f</span>ind(<span class="hljs-string">&#x27;o&#x27;</span>);<br>    string str = str<span class="hljs-number">1.</span><span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>, pos);<br>    cout &lt;&lt; str &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="vectorå®¹å™¨">3.2 vectorå®¹å™¨</h1><h2 id="vectoråŸºæœ¬æ¦‚å¿µ">3.2.1 vectoråŸºæœ¬æ¦‚å¿µ</h2><p>åŠŸèƒ½ï¼š</p><p>Â·vectoræ•°æ®ç»“æ„å’Œæ•°ç»„éå¸¸ç›¸ä¼¼ï¼Œä¹Ÿç§°ä¸ºå•ç«¯æ•°ç»„</p><p>vector.ä¸æ™®é€šæ•°ç»„åŒºåˆ«ï¼š</p><p>Â·ä¸åŒä¹‹å¤„åœ¨äºæ•°ç»„æ˜¯é™æ€ç©ºé—´ï¼Œè€Œvectoriå¯ä»¥åŠ¨æ€æ‰©å±•</p><p>åŠ¨æ€æ‰©å±•ï¼š</p><p>Â·å¹¶ä¸æ˜¯åœ¨åŸç©ºé—´ä¹‹åç»­æ¥æ–°ç©ºé—´ï¼Œè€Œæ˜¯æ‰¾æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œç„¶åå°†åŸæ•°æ®æ‹·è´æ–°ç©ºé—´ï¼Œé‡Šæ”¾åŸç©ºé—´</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694855351121-d2edb5f1-d8e3-4922-bd73-bd7106b3006e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="vectoræ„é€ å‡½æ•°">3.2.2 vectoræ„é€ å‡½æ•°</h2><p>åŠŸèƒ½æè¿°ï¼š</p><p>Â·åˆ›å»ºvectorå®¹å™¨</p><p>å‡½æ•°åŸå‹ï¼š</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694855409453-e6e8076d-3aae-4c16-8e1d-057b5b5f36b6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printVector</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>() ; it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">v2</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(),v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printVector</span>(v2);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">v3</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printVector</span>(v3);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">v4</span>(v3);<br><span class="hljs-built_in">printVector</span>(v4);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="vectorèµ‹å€¼æ“ä½œ">3.2.3 vectorèµ‹å€¼æ“ä½œ</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694855929195-b649b2df-2e98-41ba-9968-5439e831944d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v2 = v1;<br><span class="hljs-built_in">printVector</span>(v2);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v3;<br>v<span class="hljs-number">3.</span><span class="hljs-built_in">assign</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(),v1 .<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printVector</span>(v3);<br><br>vector&lt;<span class="hljs-type">int</span>&gt;v4;<br>v<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printVector</span>(v4);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®¹é‡å’Œå¤§å°">3.2.4 å®¹é‡å’Œå¤§å°</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694856345333-3988ff96-10a2-43c5-8163-d2acfef4b6a1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span> <span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ’å…¥å’Œåˆ é™¤">3.2.5 æ’å…¥å’Œåˆ é™¤</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694856948025-6089edd1-c03b-45b7-bc34-936e4ff6ffc7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">pop_back</span>();<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-number">2</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printVector</span>(v1);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-comment">//æ¸…ç©º</span><br>v<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(v<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(),v<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printVector</span>(v1);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">clear</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ•°æ®å­˜å–">3.2.6 æ•°æ®å­˜å–</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694857882650-5efd9536-fb75-4ac8-a40c-868d5da75b79.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; v1[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">at</span>(i) &lt;&lt;  <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.f</span>ront() &lt;&lt; endl;<br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äº’æ¢å®¹å™¨">3.2.7 äº’æ¢å®¹å™¨</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694858205699-97c6699b-dc57-46e3-9691-cc98161b7969.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å·§ç”¨swapå¯ä»¥æ”¶ç¼©å†…å­˜ç©ºé—´</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test06</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v1);<br>vector&lt;<span class="hljs-type">int</span>&gt;v2;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">10</span>; i &gt; <span class="hljs-number">0</span>; i--)<br>&#123;<br>v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printVector</span>(v2);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">swap</span>(v2);<br><span class="hljs-built_in">printVector</span>(v1);<br><span class="hljs-built_in">printVector</span>(v2);<br>v<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">3</span>);<br><span class="hljs-comment">//å·§ç”¨swapæ”¶ç¼©å†…å­˜</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(v1).<span class="hljs-built_in">swap</span>(v1);<span class="hljs-comment">//åŒ¿åå¯¹è±¡</span><br>cout &lt;&lt; v<span class="hljs-number">1.</span><span class="hljs-built_in">capacity</span>() &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é¢„ç•™ç©ºé—´">3.2.8 é¢„ç•™ç©ºé—´</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694858790486-d4b734b4-8f33-4a0e-8759-d14be5bfcb6c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test07</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>vector&lt;<span class="hljs-type">int</span>&gt;v;<br>v.<span class="hljs-built_in">reserve</span>(<span class="hljs-number">100000</span>);<br><span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span>* p = <span class="hljs-literal">NULL</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++)<br>&#123;<br>v.<span class="hljs-built_in">push_back</span>(i);<br><span class="hljs-keyword">if</span> (p!=&amp;v[<span class="hljs-number">0</span>])<br>&#123;<br>p = &amp;v[<span class="hljs-number">0</span>];<br>num++;<br>&#125;<br>&#125;<br>cout &lt;&lt; num;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="dequeå®¹å™¨">3.3 dequeå®¹å™¨</h1><h2 id="dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ">3.3.1 dequeå®¹å™¨åŸºæœ¬æ¦‚å¿µ</h2><p><strong>åŠŸèƒ½ï¼š</strong></p><p>Â·åŒç«¯æ•°ç»„ï¼Œå¯ä»¥å¯¹å¤´ç«¯è¿›è¡Œæ’å…¥åˆ é™¤æ“ä½œ</p><p><strong>dequeä¸vectoråŒºåˆ«ï¼š</strong></p><p>Â·vectorå¯¹äºå¤´éƒ¨çš„æ’å…¥åˆ é™¤æ•ˆç‡ä½ï¼Œæ•°æ®é‡è¶Šå¤§ï¼Œæ•ˆç‡è¶Šä½</p><p>Â·dequeç›¸å¯¹è€Œè¨€ï¼Œå¯¹å¤´éƒ¨çš„æ’å…¥åˆ åˆ«é™¤é€Ÿåº¦å›vectorå¿«</p><p>Â·vectorè®¿é—®å…ƒç´ æ—¶çš„é€Ÿåº¦ä¼šæ¯”dequeå¿«è¿™å’Œä¸¤è€…å†…éƒ¨å®ç°æœ‰å…³</p><p>dequeå†…éƒ¨å·¥ä½œåŸç†ï¼š</p><p>dequerå†…éƒ¨æœ‰ä¸ªä¸­æ§å™¨ï¼Œç»´æŠ¤æ¯æ®µç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œç¼“å†²åŒºä¸­å­˜æ”¾çœŸå®æ•°æ®</p><p>ä¸­æ§å™¨ç»´æŠ¤çš„æ˜¯æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€ï¼Œä½¿å¾—ä½¿ç”¨dequeæ—¶åƒä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´</p><p>dequeå®¹å™¨çš„è¿­ä»£å™¨ä¹Ÿæ˜¯æ”¯æŒéšæœºè®¿é—®çš„</p><h2 id="dequeæ„é€ å‡½æ•°">3.3.2 dequeæ„é€ å‡½æ•°</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694862945753-64c23ef6-0d62-4c29-a2ee-f03c98afbae6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printDeque</span><span class="hljs-params">(<span class="hljs-type">const</span> deque&lt;<span class="hljs-type">int</span>&gt; &amp;d)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (deque&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = d.<span class="hljs-built_in">begin</span>(); it != d.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printDeque</span>(d1);<br><span class="hljs-function">deque&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d2</span><span class="hljs-params">(d<span class="hljs-number">1.</span>begin(), d<span class="hljs-number">1.</span>end())</span></span>;<br><span class="hljs-built_in">printDeque</span>(d2);<br><br><span class="hljs-function">deque&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d3</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>)</span></span>;<br><span class="hljs-built_in">printDeque</span>(d3);<br><br><span class="hljs-function">deque&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">d4</span><span class="hljs-params">(d3)</span></span>;<br><span class="hljs-built_in">printDeque</span>(d4);<br></code></pre></td></tr></table></figure><h2 id="èµ‹å€¼æ“ä½œ">3.3.3 èµ‹å€¼æ“ä½œ</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694864741790-269ff523-e33e-4c36-8584-066423bca265.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printDeque</span>(d1);<br>deque&lt;<span class="hljs-type">int</span>&gt; d2;<br>d2 = d1;<br><span class="hljs-built_in">printDeque</span>(d2);<br><br>deque&lt;<span class="hljs-type">int</span>&gt; d3;<br>d<span class="hljs-number">3.</span><span class="hljs-built_in">assign</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), d<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printDeque</span>(d3);<br><br>deque&lt;<span class="hljs-type">int</span>&gt; d4;<br>d<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printDeque</span>(d4);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¤§å°æ“ä½œ">3.3.4 å¤§å°æ“ä½œ</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694864993553-f4752123-2b33-4109-b61b-97065f88f9a1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>&#123;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i);<br>&#125;<br><span class="hljs-built_in">printDeque</span>(d1);<br>cout &lt;&lt; d<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>cout &lt;&lt; d<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>d<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">15</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">16</span>,<span class="hljs-number">1</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br><br><span class="hljs-built_in">printDeque</span>(d1);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ’å…¥å’Œåˆ é™¤-1">3.3.5 æ’å…¥å’Œåˆ é™¤</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694865346174-20b3f051-b286-43a5-90f7-73b5a723db19.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br><br><span class="hljs-built_in">printDeque</span>(d1);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">pop_back</span>();<br><span class="hljs-built_in">printDeque</span>(d1);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">pop_front</span>();<br><span class="hljs-built_in">printDeque</span>(d1);<br><br><br>d<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">printDeque</span>(d1);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), <span class="hljs-number">2</span>,<span class="hljs-number">2000</span>);<br><span class="hljs-built_in">printDeque</span>(d1);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;d2;<br>d<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>d<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">2</span>);<br>d<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);<br><br>d<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), d<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(), d<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">printDeque</span>(d1);<br><br>d<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printDeque</span>(d1);<br><br>deque&lt;<span class="hljs-type">int</span>&gt;::iterator it = d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>();<br>it++;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(it);<br><span class="hljs-built_in">printDeque</span>(d1);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printDeque</span>(d1);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ•°æ®å­˜å–-1">3.3.6 æ•°æ®å­˜å–</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694865953318-c3b049cd-554e-4c57-b9bc-72d4c56eed01.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; d<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>(); i++)<br>&#123;<br>cout &lt;&lt; d1[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>cout &lt;&lt; d<span class="hljs-number">1.</span><span class="hljs-built_in">at</span>(i) &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>cout &lt;&lt; d<span class="hljs-number">1.f</span>ront() &lt;&lt; endl;<br>cout &lt;&lt; d<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ’åº">3.3.7 æ’åº</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694866190159-664dab4c-cc25-4062-8ac2-69d5e4009602.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å¯¹äºæ”¯æŒéšæœºè®¿é—®çš„è¿­ä»£å™¨çš„å®¹å™¨ï¼Œéƒ½å¯ä»¥åˆ©ç”¨sotç®—æ³•ç›´æ¥å¯¹å…¶è¿›è¡Œæ’åº</p><p>vectorå®¹å™¨ä¹Ÿå¯ä»¥åˆ©ç”¨sortè¿›è¡Œæ’åº</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test06</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>deque&lt;<span class="hljs-type">int</span>&gt; d1;<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">60</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>d<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br><br><span class="hljs-built_in">printDeque</span>(d1);<br><span class="hljs-built_in">sort</span>(d<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), d<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<span class="hljs-comment">//ä»å°åˆ°å¤§</span><br><span class="hljs-built_in">printDeque</span>(d1);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="stackå®¹å™¨">3.4 stackå®¹å™¨</h1><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694868340616-64067469-b2a3-415d-8730-afd90a6ef14d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ ˆä¸­åªæœ‰é¡¶ç«¯çš„å…ƒç´ æ‰å¯ä»¥è¢«å¤–ç•Œä½¿ç”¨ï¼Œå› æ­¤æ ˆä¸å…è®¸æœ‰éå†è¡Œä¸º</p><p>æ ˆä¸­è¿›å…¥æ•°æ®ç§°ä¸º-å…¥æ ˆpush</p><p>æ ˆä¸­å¼¹å‡ºæ•°æ®ç§°ä¸ºä¸€å‡ºæ ˆpop</p><h2 id="stackå¸¸ç”¨æ¥å£">3.4.1 stackå¸¸ç”¨æ¥å£</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694868739397-88f2f221-bab5-459f-ae93-10e657400ec4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stack&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    stack&lt;<span class="hljs-type">int</span>&gt;s;<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">10</span>);<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">20</span>);<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">30</span>);<br>    s.<span class="hljs-built_in">push</span>(<span class="hljs-number">40</span>);<br><br>    <span class="hljs-keyword">while</span> (!s.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        cout &lt;&lt; s.<span class="hljs-built_in">top</span>() &lt;&lt; endl;<br>        s.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    cout &lt;&lt; s.<span class="hljs-built_in">size</span>() &lt;&lt; endl;;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="queue-å®¹å™¨">3.5 queue å®¹å™¨</h1><p>æ¦‚å¿µï¼šQueueæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡º(First In FirstOut,FIFO)çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‡ºå£</p><p>é˜Ÿåˆ—Queueç¬¦åˆå…ˆè¿›å…ˆå‡º</p><p>åªæœ‰é˜Ÿå¤´å’Œé˜Ÿå°¾èƒ½è¢«å¤–ç•Œè®¿é—®ï¼Œå› æ­¤ä¸å…è®¸æœ‰éå†è¡Œä¸º</p><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694869245220-8840f403-6d47-4332-9e8a-d73265fa2584.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å…¥é˜Ÿ-push</p><p>å‡ºé˜Ÿ-pop</p><p>è¿”å›é˜Ÿå¤´å…ƒç´ -front</p><p>è¿”å›é˜Ÿå°¾å…ƒç´ -back</p><p>åˆ¤æ–­é˜Ÿæ˜¯å¦ä¸ºç©º-empty</p><p>è¿”å›é˜Ÿåˆ—å¤§å°-size</p><h2 id="å¸¸ç”¨æ¥å£">3.5.1 å¸¸ç”¨æ¥å£</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string m_name, <span class="hljs-type">int</span> m_age) :<span class="hljs-built_in">name</span>(m_name), <span class="hljs-built_in">age</span>(m_age) &#123;&#125;<br>    string name;<br>    <span class="hljs-type">int</span> age;<br><br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;Person&gt; q;<br><br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;tangseng&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;sunwukong&quot;</span>, <span class="hljs-number">1000</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;zhubajie&quot;</span>, <span class="hljs-number">900</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;shaseng&quot;</span>, <span class="hljs-number">800</span>)</span></span>;<br><br>    q.<span class="hljs-built_in">push</span>(p1);<br>    q.<span class="hljs-built_in">push</span>(p2);<br>    q.<span class="hljs-built_in">push</span>(p3);<br>    q.<span class="hljs-built_in">push</span>(p4);<br>    cout &lt;&lt; q.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        cout &lt;&lt; q.<span class="hljs-built_in">front</span>().name &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; q.<span class="hljs-built_in">front</span>().age &lt;&lt; endl;<br>        cout &lt;&lt; q.<span class="hljs-built_in">back</span>().name &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; q.<span class="hljs-built_in">back</span>().age &lt;&lt; endl;<br>        q.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    cout &lt;&lt; q.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="list-å®¹å™¨">3.6 list å®¹å™¨</h1><p>åŠŸèƒ½ï¼šå°†æ•°æ®è¿›è¡Œé“¾å¼å­˜å‚¨</p><p>é“¾è¡¨(st)æ˜¯ä¸€ç§ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­çš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥å®ç°çš„</p><p>é“¾è¡¨çš„ç»„æˆï¼šé“¾è¡¨ç”±ä¸€ç³»åˆ—ç»“ç‚¹ç»„æˆ</p><p>ç»“ç‚¹çš„ç»„æˆï¼šä¸€ä¸ªæ˜¯å­˜å‚¨æ•°æ®å…ƒç´ çš„æ•°æ®åŸŸï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„æŒ‡é’ˆåŸŸ</p><p>STLä¸­çš„é“¾è¡¨æ˜¯ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨</p><p>ç”±äºé“¾è¡¨çš„å­˜å‚¨æ–¹å¼å¹¶ä¸æ˜¯è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤é“¾è¡¨sä¸­çš„è¿­ä»£å™¨åªæ”¯ç‰¹å‰ç§»å’Œåç§»ï¼Œå±äºåŒå‘è¿­ä»£å™¨</p><p>listçš„ä¼˜ç‚¹ï¼š</p><p>Â·é‡‡ç”¨åŠ¨æ€å­˜å‚¨åˆ†é…ï¼Œä¸ä¼šé€ æˆå†…å­˜æµªè´¹å’Œæº¢å‡º</p><p>Â·é“¾è¡¨æ‰§è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œååˆ†æ–¹ä¾¿ï¼Œä¿®æ”¹æŒ‡é’ˆå³å¯ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ </p><p>listçš„ç¼ºç‚¹ï¼š</p><p>Â·é“¾è¡¨çµæ´»ï¼Œä½†æ˜¯ç©ºé—´ï¼ˆæŒ‡é’ˆåŸŸï¼‰å’Œæ—¶é—´ï¼ˆéå†ï¼‰é¢å¤–è€—è´¹è¾ƒå¤§</p><p>Listæœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œæ’å…¥æ“ä½œå’Œåˆ é™¤æ“ä½œéƒ½ä¸ä¼šé€ æˆåŸæœ‰istè¿­ä»£å™¨çš„å¤±æ•ˆï¼Œè¿™åœ¨vector;æ˜¯ä¸æˆç«‹çš„ã€‚</p><p>æ€»ç»“ï¼šSTLä¸­Listå’Œvectoræ˜¯ä¸¤ä¸ªæœ€å¸¸è¢«ä½¿ç”¨çš„å®¹å™¨ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹</p><h2 id="iistæ„é€ å‡½æ•°.">3.6.1 Iistæ„é€ å‡½æ•°.</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694909088108-2adecd16-6260-4827-80b3-f1a63c9ba661.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class215 STL List.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintList</span><span class="hljs-params">(<span class="hljs-type">const</span> list&lt;<span class="hljs-type">int</span>&gt;&amp; L)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (list&lt;<span class="hljs-type">int</span>&gt;::const_iterator it = L.<span class="hljs-built_in">begin</span>(); it != L.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt; L1;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>    <span class="hljs-built_in">PrintList</span>(L1);<br>    <span class="hljs-function">list&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">L2</span><span class="hljs-params">(L<span class="hljs-number">1.</span>begin(), L<span class="hljs-number">1.</span>end())</span></span>;<br>    <span class="hljs-built_in">PrintList</span>(L2);<br><br>    <span class="hljs-function">list&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">L3</span><span class="hljs-params">(L1)</span></span>;<br>    <span class="hljs-built_in">PrintList</span>(L3);<br>    <br>    <span class="hljs-function">list&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">L4</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">1000</span>)</span></span>;<br>    <span class="hljs-built_in">PrintList</span>(L4);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="iistèµ‹å€¼å’Œäº¤æ¢">3.6.2 Iistèµ‹å€¼å’Œäº¤æ¢</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694909500757-fbd234bd-d878-4fab-9e21-669e1726865b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt; L1;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    list&lt;<span class="hljs-type">int</span>&gt; L2;<br>    L2 = L1;<br>    <span class="hljs-built_in">PrintList</span>(L2);<br><br><br>    list&lt;<span class="hljs-type">int</span>&gt; L3;<br>    L<span class="hljs-number">3.</span><span class="hljs-built_in">assign</span>(L<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(), L<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>());<br>    <span class="hljs-built_in">PrintList</span>(L3);<br><br><br>    list&lt;<span class="hljs-type">int</span>&gt; L4;<br>    L<span class="hljs-number">4.</span><span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">PrintList</span>(L4);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">swap</span>(L4);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br>    <span class="hljs-built_in">PrintList</span>(L4);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="iistå¤§å°æ“ä½œ">3.6.3 Iistå¤§å°æ“ä½œ</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694909799951-e1219de5-12d6-49c4-84a9-bfa64d808138.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt; L1;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>    <span class="hljs-built_in">PrintList</span>(L1);<br>    cout &lt;&lt; L<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>    cout &lt;&lt; L<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">10</span>,<span class="hljs-number">100</span>);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">resize</span>(<span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="iistæ’å…¥å’Œåˆ é™¤">3.6.4 Iistæ’å…¥å’Œåˆ é™¤</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694910008862-2fe26fcf-72f8-470d-bc3d-771ff9afe457.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt; L1;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_front</span>(<span class="hljs-number">100</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_front</span>(<span class="hljs-number">200</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_front</span>(<span class="hljs-number">300</span>);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">pop_front</span>();<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(L<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(),<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br>    list&lt;<span class="hljs-type">int</span>&gt;::iterator it = L<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>();<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(++it,<span class="hljs-number">1000</span>);<br><br>    it = L<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>();<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(it);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">remove</span>(<span class="hljs-number">1000</span>);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">PrintList</span>(L1);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="iistæ•°æ®å­˜å–">3.6.5 Iistæ•°æ®å­˜å–</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694911607122-5c15f9f5-f375-465b-9a64-6b2acb78f032.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>éªŒè¯è¿­ä»£å™¨æ˜¯ä¸æ”¯æŒéšæœºè®¿é—®çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt; L1;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    cout &lt;&lt; L<span class="hljs-number">1.f</span>ront() &lt;&lt; endl;<br>    cout &lt;&lt; L<span class="hljs-number">1.</span><span class="hljs-built_in">back</span>() &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="iiståè½¬å’Œæ’åº">3.6.6 Iiståè½¬å’Œæ’åº</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694912083514-d4db6b42-9349-4793-9da6-c4d6d8d30ad8.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ‰€æœ‰ä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨çš„å®¹å™¨ï¼Œä¸å¯ä»¥ç”¨æ ‡å‡†ç®—æ³•</p><p>ä¸æ”¯æŒéšæœºè®¿é—®è¿­ä»£å™¨çš„å®¹å™¨ï¼Œå†…éƒ¨ä¼šæä¾›å¯¹åº”ä¸€äº›ç®—æ³•</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">myCompare</span><span class="hljs-params">(<span class="hljs-type">int</span> num1,<span class="hljs-type">int</span> num2)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> num1 &gt; num2;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    list&lt;<span class="hljs-type">int</span>&gt; L1;<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">60</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">70</span>);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">reverse</span>();<br>    <span class="hljs-built_in">PrintList</span>(L1);<br><br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">sort</span>();<span class="hljs-comment">//é»˜è®¤å‡åº</span><br>    <span class="hljs-built_in">PrintList</span>(L1);<br>    L<span class="hljs-number">1.</span><span class="hljs-built_in">sort</span>(myCompare);<br>    <span class="hljs-built_in">PrintList</span>(L1);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="setmultisetå®¹å™¨">3.7 set/multisetå®¹å™¨</h1><h2 id="æ¦‚å¿µ">3.7.1 æ¦‚å¿µ</h2><p>ç®€ä»‹ï¼š</p><p>Â·æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨æ’å…¥æ—¶è‡ªåŠ¨è¢«æ’åº</p><p>æœ¬è´¨ï¼š</p><p>Â·set/multisetå±äºå…³è”å¼å®¹å™¨ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚</p><p>setå’ŒmultisetåŒºåˆ«ï¼š</p><p>ã€‚setä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </p><p>multisetå…è®¸å®¹å™¨ä¸­æœ‰é‡å¤çš„å…ƒç´ </p><h2 id="setæ„é€ å’Œèµ‹å€¼">3.7.2 setæ„é€ å’Œèµ‹å€¼</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694913858516-5577410f-1311-4eb3-9077-665e048818e2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class223_STL_SET.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printSet</span><span class="hljs-params">(set&lt;<span class="hljs-type">int</span>&gt;&amp; s)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>&gt;::iterator it = s.<span class="hljs-built_in">begin</span>(); it != s.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt;s1;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><br><span class="hljs-built_in">printSet</span>(s1);<br><br>set&lt;<span class="hljs-type">int</span>&gt;<span class="hljs-built_in">s2</span>(s1);<br><span class="hljs-built_in">printSet</span>(s2);<br><br>set&lt;<span class="hljs-type">int</span>&gt;s3;<br>s3 =(s1);<br><span class="hljs-built_in">printSet</span>(s3);<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test01</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="setå¤§å°å’Œäº¤æ¢">3.7.3 setå¤§å°å’Œäº¤æ¢</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694914241211-714709c4-ad92-42ee-9fc3-42e092cfab57.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt;s1;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br>cout &lt;&lt; s<span class="hljs-number">1.</span><span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>cout &lt;&lt; s<span class="hljs-number">1.</span><span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>set&lt;<span class="hljs-type">int</span>&gt;s2;<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">100</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">200</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">300</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">400</span>);<br><br><span class="hljs-built_in">printSet</span>(s2);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">swap</span>(s2);<br><span class="hljs-built_in">printSet</span>(s1);<br><span class="hljs-built_in">printSet</span>(s2);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="setæ’å…¥å’Œåˆ é™¤">3.7.4 setæ’å…¥å’Œåˆ é™¤</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694914556408-69f524bc-7c13-4474-bf6b-54c6012a5651.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt;s1;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(s<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">printSet</span>(s1);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">erase</span>(<span class="hljs-number">30</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br>s<span class="hljs-number">1.</span><span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">printSet</span>(s1);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="setæŸ¥æ‰¾å’Œç»Ÿè®¡">3.7.5 setæŸ¥æ‰¾å’Œç»Ÿè®¡</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694914779496-19db99fa-76e1-4ebe-a0b9-945ca61725e9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt;s1;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br><span class="hljs-built_in">printSet</span>(s1);<br><br>set&lt;<span class="hljs-type">int</span>&gt;::iterator pos = s<span class="hljs-number">1.f</span>ind(<span class="hljs-number">30</span>);<br><span class="hljs-keyword">if</span> (pos!=s<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>())<br>&#123;<br>cout &lt;&lt; *pos &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-type">int</span> num = s<span class="hljs-number">1.</span><span class="hljs-built_in">count</span>(<span class="hljs-number">30</span>);<br>cout &lt;&lt; num &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="setå’ŒmultisetåŒºåˆ«">3.7.6 setå’ŒmultisetåŒºåˆ«</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694915065551-5eb9ad8e-d8e2-4085-b373-78318fc0c530.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt;s1;<br>pair&lt;set&lt;<span class="hljs-type">int</span>&gt;::iterator, <span class="hljs-type">bool</span>&gt; ret = s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>ret = s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>cout &lt;&lt; ret.second &lt;&lt; endl;<br><br>multiset&lt;<span class="hljs-type">int</span>&gt;ms;<br>ms.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>ms.<span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br><span class="hljs-keyword">for</span> (multiset&lt;<span class="hljs-type">int</span>&gt;::iterator it = ms.<span class="hljs-built_in">begin</span>(); it != ms.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="pairå¯¹ç»„åˆ›å»º">3.7.7 pairå¯¹ç»„åˆ›å»º</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694915601796-227de4d5-ae2b-44b7-8121-2e7d03862357.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test06</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>pair&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">20</span>);<br>cout &lt;&lt; p.first &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.second &lt;&lt; endl;<br><br>pair&lt;string, <span class="hljs-type">int</span>&gt;p2 = <span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">20</span>);<br>cout &lt;&lt; p<span class="hljs-number">2.f</span>irst &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p<span class="hljs-number">2.</span>second &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="setå®¹å™¨æ’åº">3.7.8 setå®¹å™¨æ’åº</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694915808748-9727e553-e108-4e06-9775-9f14f8113bf6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCompare</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//å¸¸é‡å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸é‡æˆå‘˜å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> num1,<span class="hljs-type">int</span> num2)</span> <span class="hljs-type">const</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> num1 &gt; num2;<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test07</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;<span class="hljs-type">int</span>&gt;s1;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">50</span>);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">60</span>);<br><br><span class="hljs-built_in">printSet</span>(s1);<br><br>set&lt;<span class="hljs-type">int</span>,MyCompare&gt;s2;<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">10</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">20</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">30</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">40</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">50</span>);<br>s<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-number">60</span>);<br><br><span class="hljs-keyword">for</span> (set&lt;<span class="hljs-type">int</span>, MyCompare&gt;::iterator it = s<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(); it != s<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">comparePerson</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person&amp;p1,<span class="hljs-type">const</span> Person&amp;p2)</span> <span class="hljs-type">const</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> p<span class="hljs-number">1.</span>age &gt; p<span class="hljs-number">2.</span>age;<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test08</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>set&lt;Person, comparePerson&gt;s1;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;åˆ˜å¤‡&quot;</span>, <span class="hljs-number">24</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;å…³ç¾½&quot;</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;å¼ é£&quot;</span>, <span class="hljs-number">25</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;èµµäº‘&quot;</span>, <span class="hljs-number">20</span>)</span></span>;<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(p1);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(p2);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(p3);<br>s<span class="hljs-number">1.</span><span class="hljs-built_in">insert</span>(p4);<br><br><span class="hljs-keyword">for</span> (set&lt;Person, comparePerson&gt;::iterator it = s<span class="hljs-number">1.</span><span class="hljs-built_in">begin</span>(); it != s<span class="hljs-number">1.</span><span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; it-&gt;name &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; it-&gt;age &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="mapmultimapå®¹å™¨">3.8 map/multimapå®¹å™¨</h1><h2 id="mapåŸºæœ¬æ¦‚å¿µ">3.8.1 mapåŸºæœ¬æ¦‚å¿µ</h2><p>ç®€ä»‹ï¼š</p><p>mapä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯pair</p><p>Â·pairä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºkey(é”®å€¼)ï¼Œèµ·åˆ°ç´¢å¼•ä½œç”¨ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºvalue(å®å€¼)</p><p>Â·æ‰€æœ‰å…ƒç´ éƒ½ä¼šæ ¹æ®å…ƒç´ çš„é”®å€¼è‡ªåŠ¨æ’åº</p><p>æœ¬è´¨ï¼š</p><p>map/multimapå±äºå…³è”å¼å®¹å™¨ï¼Œåº•å±‚ç»“æ„æ˜¯ç”¨äºŒå‰æ ‘å®ç°ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><p>Â·å¯ä»¥æ ¹æ®keyå€¼å¿«é€Ÿæ‰¾åˆ°valueå€¼</p><p>mapå’ŒmultimaplåŒºåˆ«ï¼š</p><p>Â·mapä¸å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </p><p>multimap:å…è®¸å®¹å™¨ä¸­æœ‰é‡å¤keyå€¼å…ƒç´ </p><h2 id="mapæ„é€ å’Œèµ‹å€¼">3.8.2 mapæ„é€ å’Œèµ‹å€¼</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694917949172-75d51cd2-f2cf-4cbc-89d3-83ce51156376.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintMap</span><span class="hljs-params">(map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&amp;m)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (map&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;::iterator it = m.<span class="hljs-built_in">begin</span>(); it != m.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">4</span>, <span class="hljs-number">40</span>));<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">m2</span>(m);<br><span class="hljs-built_in">PrintMap</span>(m2);<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m3 = m2;<br><span class="hljs-built_in">PrintMap</span>(m3);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="mapå¤§å°å’Œäº¤æ¢">3.8.3 mapå¤§å°å’Œäº¤æ¢</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694918574046-9d4ce2a7-8b9d-4088-9511-1fa8533ab5c3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">4</span>, <span class="hljs-number">40</span>));<br><span class="hljs-built_in">PrintMap</span>(m);<br>cout &lt;&lt; m.<span class="hljs-built_in">empty</span>() &lt;&lt; endl;<br>cout &lt;&lt; m.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m2;<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">12</span>, <span class="hljs-number">120</span>));<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">22</span>, <span class="hljs-number">202</span>));<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">32</span>, <span class="hljs-number">320</span>));<br>m<span class="hljs-number">2.</span><span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>, <span class="hljs-number">420</span>));<br><span class="hljs-built_in">PrintMap</span>(m2);<br>m.<span class="hljs-built_in">swap</span>(m2);<br><span class="hljs-built_in">PrintMap</span>(m);<br><span class="hljs-built_in">PrintMap</span>(m2);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="mapæ’å…¥å’Œåˆ é™¤">3.8.4 mapæ’å…¥å’Œåˆ é™¤</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694918898016-e2ace0ce-dc0b-403a-b76a-471f327ef42c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::<span class="hljs-built_in">value_type</span>(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br>m[<span class="hljs-number">4</span>] = <span class="hljs-number">40</span>;<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>m.<span class="hljs-built_in">erase</span>(m.<span class="hljs-built_in">begin</span>());<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>m.<span class="hljs-built_in">erase</span>(<span class="hljs-number">3</span>);<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>m.<span class="hljs-built_in">erase</span>(m.<span class="hljs-built_in">begin</span>(), m.<span class="hljs-built_in">end</span>());<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>m.<span class="hljs-built_in">clear</span>();<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="mapæŸ¥æ‰¾å’Œç»Ÿè®¡">3.8.5 mapæŸ¥æ‰¾å’Œç»Ÿè®¡</h2><figure><img src="/2024/11/27/cpp/13-STL%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/1694919436963-e39b91d9-f8b8-40fc-ae71-552c634d1c6b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test04</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::<span class="hljs-built_in">value_type</span>(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br>m[<span class="hljs-number">4</span>] = <span class="hljs-number">40</span>;<br><span class="hljs-built_in">PrintMap</span>(m);<br><br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::iterator pos = m.<span class="hljs-built_in">find</span>(<span class="hljs-number">3</span>);<br>cout &lt;&lt; pos-&gt;first &lt;&lt;<span class="hljs-string">&quot; &quot;</span> &lt;&lt; pos-&gt;second &lt;&lt; endl;<br><span class="hljs-type">int</span> num = m.<span class="hljs-built_in">count</span>(<span class="hljs-number">3</span>);<br>cout &lt;&lt; num &lt;&lt; endl;;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="mapå®¹å™¨æ’åº">3.8.6 mapå®¹å™¨æ’åº</h2><p>å­¦ä¹ ç›®æ ‡ï¼š</p><p>Â·mapå®¹å™¨é»˜è®¤æ’åºè§„åˆ™ä¸ºæŒ‰ç…§keyå€¼è¿›è¡Œä»å°åˆ°å¤§æ’åºï¼ŒæŒæ¡å¦‚ä½•æ”¹å˜æ’åºè§„åˆ™</p><p>ä¸»è¦æŠ€æœ¯ç‚¹ï¼š</p><p>Â·åˆ©ç”¨ä»¿å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜æ’åºè§„åˆ™</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test05</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, MyCompare&gt;m;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>));<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">2</span>, <span class="hljs-number">20</span>));<br>m.<span class="hljs-built_in">insert</span>(map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;::<span class="hljs-built_in">value_type</span>(<span class="hljs-number">3</span>, <span class="hljs-number">30</span>));<br>m[<span class="hljs-number">4</span>] = <span class="hljs-number">40</span>;<br><span class="hljs-keyword">for</span> (map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>, MyCompare&gt;::iterator it = m.<span class="hljs-built_in">begin</span>(); it != m.<span class="hljs-built_in">end</span>(); it++)<br>&#123;<br>cout &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<br>&#125;<br>cout &lt;&lt; endl;  <br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. STLåˆè¯†</title>
    <link href="/2024/11/27/cpp/12-STL%E5%88%9D%E8%AF%86/"/>
    <url>/2024/11/27/cpp/12-STL%E5%88%9D%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<p>é•¿ä¹…ä»¥æ¥ï¼Œè½¯ä»¶ç•Œä¸€ç›´å¸Œæœ›å»ºç«‹ä¸€ç§å¯é‡å¤åˆ©ç”¨çš„ä¸œè¥¿</p><p>C+çš„é¢å‘å¯¹è±¡å’Œæ³›å‹ç¼–ç¨‹æ€æƒ³ï¼Œç›®çš„å°±æ˜¯å¤ç”¨æ€§çš„æå‡</p><p>å¤§å¤šæƒ…å†µä¸‹ï¼Œæ•°æ®ç»“æ„å’Œç®—æ³•éƒ½æœªèƒ½æœ‰ä¸€å¥—æ ‡å‡†ï¼Œå¯¼è‡´è¢«è¿«ä»äº‹å¤§é‡é‡å¤å·¥ä½œ</p><p>ä¸ºäº†å»ºç«‹æ•°æ®ç»“æ„å’Œç®—æ³•çš„ä¸€å¥—æ ‡å‡†ï¼Œè¯ç”Ÿäº†STç¤¼</p><p>STL(Standard Template Library,æ ‡å‡†æ¨¡æ¿åº“)</p><p>STLä»å¹¿ä¹‰ä¸Šåˆ†ä¸ºï¼šå®¹å™¨(container)ç®—æ³•(algorithm)è¿­ä»£å™¨(iterator)</p><p>å®¹å™¨å’Œç®—æ³•ä¹‹é—´é€šè¿‡è¿­ä»£å™¨è¿›è¡Œæ— ç¼è¿æ¥ã€‚</p><p>STLå‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é‡‡ç”¨äº†æ¨¡æ¿ç±»æˆ–è€…æ¨¡æ¿å‡½æ•°</p><p>STLå¤§ä½“åˆ†ä¸ºå…­å¤§ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼šå®¹å™¨ã€ç®—æ³•ã€è¿­ä»£å™¨ã€ä»¿å‡½æ•°ã€é€‚é…å™¨ï¼ˆé…æ¥å™¨ï¼‰ã€ç©ºé—´é…ç½®å™¨</p><p>1.å®¹å™¨ï¼šå„ç§æ•°æ®ç»“æ„ï¼Œå¦‚vectorã€.listã€dequeã€setã€mapç­‰ï¼Œç”¨æ¥å­˜æ”¾æ•°æ®ã€‚</p><p>2.ç®—æ³•ï¼šå„ç§å¸¸ç”¨çš„ç®—æ³•ï¼Œå¦‚sotã€findã€copyã€for_eachç­‰</p><p>3.è¿­ä»£å™¨ï¼šæ‰®æ¼”äº†å®¹å™¨ä¸ç®—æ³•ä¹‹é—´çš„èƒ¶åˆå‰‚ã€‚</p><p>4.ä»¿å‡½æ•°ï¼šè¡Œä¸ºç±»ä¼¼å‡½æ•°ï¼Œå¯ä½œä¸ºç®—æ³•çš„æŸç§ç­–ç•¥ã€‚</p><p>5.é€‚é…å™¨ï¼šä¸€ç§ç”¨æ¥ä¿®é¥°å®¹å™¨æˆ–è€…ä»¿å‡½æ•°æˆ–è¿­ä»£å™¨æ¥å£çš„ä¸œè¥¿ã€‚</p><p>6.ç©ºé—´é…ç½®å™¨ï¼šè´Ÿè´£ç©ºé—´çš„é…ç½®ä¸ç®¡ç†ã€‚</p><p>å®¹å™¨ï¼šç½®ç‰©ä¹‹æ‰€ä¹Ÿ</p><p>I</p><p>STLå®¹å™¨å°±æ˜¯å°†è¿ç”¨æœ€å¹¿æ³›çš„ä¸€äº›æ•°æ®ç»“æ„å®ç°å‡ºæ¥</p><p>å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼šæ•°ç»„ï¼Œé“¾è¡¨ï¼Œæ ‘ï¼Œæ ˆï¼Œé˜Ÿåˆ—ï¼Œé›†åˆï¼Œæ˜ å°„è¡¨ç­‰</p><p>è¿™äº›å®¹å™¨åˆ†ä¸ºåºåˆ—å¼å®¹å™¨å’Œå…³è”å¼å®¹å™¨ä¸¤ç§ï¼š</p><p>åºåˆ—å¼å®¹å™¨å¼ºè°ƒå€¼çš„æ’åºï¼Œåºåˆ—å¼å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ å‡æœ‰å›ºå®šçš„ä½ç½®ã€‚</p><p>å…³è”å¼å®¹å™¨ï¼šäºŒå‰æ ‘ç»“æ„ï¼Œå„å…ƒç´ ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„ç‰©ç†ä¸Šçš„é¡ºåºå…³ç³»</p><p>ç®—æ³•ï¼šé—®é¢˜ä¹‹è§£æ³•ä¹Ÿ</p><p>æœ‰é™çš„æ­¥éª¤ï¼Œè§£å†³é€»è¾‘æˆ–æ•°å­¦ä¸Šçš„é—®é¢˜ï¼Œè¿™ä¸€é—¨å­¦ç§‘æˆ‘ä»¬å«åšç®—æ³•Algorithms)</p><p>ç®—æ³•åˆ†ä¸ºï¼šè´¨å˜ç®—æ³•å’Œéè´¨å˜ç®—æ³•ã€‚</p><p>è´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ çš„å†…å®¹ã€‚ä¾‹å¦‚æ‹·è´ï¼Œæ›¿æ¢ï¼Œåˆ é™¤ç­‰ç­‰</p><p>éè´¨å˜ç®—æ³•ï¼šæ˜¯æŒ‡è¿ç®—è¿‡ç¨‹ä¸­ä¸ä¼šæ›´æ”¹åŒºé—´å†…çš„å…ƒç´ å†…å®¹ï¼Œä¾‹å¦‚æŸ¥æ‰¾ã€è®¡æ•°ã€éå†ã€å¯»æ‰¾æå€¼ç­‰ç­‰</p><h1 id="å®¹å™¨ç®—æ³•è¿­ä»£å™¨">2.1 å®¹å™¨ç®—æ³•è¿­ä»£å™¨</h1><h2 id="vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹">2.1.1 vectorå­˜æ”¾å†…ç½®æ•°æ®ç±»å‹</h2><p>å®¹å™¨ï¼š</p><p>vector</p><p>ç®—æ³•ï¼š</p><p>for_each</p><p>è¿­ä»£å™¨ï¼š</p><p>vector<int>:iterator</int></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class186_STLåˆè¯†vector.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(<span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; val &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//å°¾æ’</span><br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">10</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">30</span>);<br>    v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);<br><br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator itBegin = v.<span class="hljs-built_in">begin</span>();<span class="hljs-comment">//èµ·å§‹è¿­ä»£å™¨ï¼ŒæŒ‡å‘å®¹å™¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ </span><br>    vector&lt;<span class="hljs-type">int</span>&gt;::iterator itEnd = v.<span class="hljs-built_in">end</span>();<span class="hljs-comment">//èµ·å§‹è¿­ä»£å™¨ï¼ŒæŒ‡å‘å®¹å™¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span><br>    <span class="hljs-comment">//ç¬¬ä¸€ç§éå†æ–¹å¼</span><br>    <span class="hljs-keyword">while</span> (itBegin != itEnd)<br>    &#123;<br>        cout &lt;&lt; *itBegin &lt;&lt; endl;<br>        itBegin++;<br>    &#125;<br>    <span class="hljs-comment">//ç¬¬äºŒç§éå†æ–¹å¼</span><br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; *it &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼</span><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myPrint);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹">2.1.2 vectorå­˜æ”¾è‡ªå®šä¹‰æ•°æ®ç±»å‹</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class186_STLåˆè¯†vector.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string m_name, <span class="hljs-type">int</span> m_age) :<span class="hljs-built_in">name</span>(m_name), <span class="hljs-built_in">age</span>(m_age) &#123;&#125;<br>    string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(Person&amp; p)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; p.name &lt;&lt; <span class="hljs-string">&quot;   &quot;</span>&lt;&lt; p.age &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint2</span><span class="hljs-params">(Person* p)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; p-&gt;name &lt;&lt; <span class="hljs-string">&quot;   &quot;</span> &lt;&lt; p-&gt;age &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//å°¾æ’</span><br>    vector&lt;Person*&gt; v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><br>    v.<span class="hljs-built_in">push_back</span>(&amp;p1);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p2);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p3);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p4);<br>    v.<span class="hljs-built_in">push_back</span>(&amp;p5);<br><br><br>    <span class="hljs-comment">//ç¬¬äºŒç§éå†æ–¹å¼</span><br>    <span class="hljs-keyword">for</span> (vector&lt;Person*&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; (**it).name &lt;&lt; <span class="hljs-string">&quot;  &quot;</span> &lt;&lt; (**it).age &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼</span><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myPrint2);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//å°¾æ’</span><br>    vector&lt;Person&gt; v;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p4</span><span class="hljs-params">(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p5</span><span class="hljs-params">(<span class="hljs-string">&quot;e&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><br>    v.<span class="hljs-built_in">push_back</span>(p1);<br>    v.<span class="hljs-built_in">push_back</span>(p2);<br>    v.<span class="hljs-built_in">push_back</span>(p3);<br>    v.<span class="hljs-built_in">push_back</span>(p4);<br>    v.<span class="hljs-built_in">push_back</span>(p5);<br><br>    <br>    <span class="hljs-comment">//ç¬¬äºŒç§éå†æ–¹å¼</span><br>    <span class="hljs-keyword">for</span> (vector&lt;Person&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        cout &lt;&lt; (*it).name &lt;&lt; <span class="hljs-string">&quot;  &quot;</span> &lt;&lt; (*it).age &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-comment">//ç¬¬ä¸‰ç§éå†æ–¹å¼</span><br>    for_each(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), myPrint);<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="vectorå®¹å™¨åµŒå¥—å®¹å™¨">2.5.3 Vectorå®¹å™¨åµŒå¥—å®¹å™¨</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class186_STLåˆè¯†vector.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;v;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v1;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v2;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v3;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v4;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)<br>    &#123;<br>        v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">1</span>);<br>        v<span class="hljs-number">2.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">2</span>);<br>        v<span class="hljs-number">3.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">3</span>);<br>        v<span class="hljs-number">4.</span><span class="hljs-built_in">push_back</span>(i + <span class="hljs-number">4</span>);<br>    &#125;<br>    v.<span class="hljs-built_in">push_back</span>(v1);<br>    v.<span class="hljs-built_in">push_back</span>(v2);<br>    v.<span class="hljs-built_in">push_back</span>(v3);<br>    v.<span class="hljs-built_in">push_back</span>(v4);<br><br>    <span class="hljs-keyword">for</span> (vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;::iterator it = v.<span class="hljs-built_in">begin</span>(); it != v.<span class="hljs-built_in">end</span>(); it++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;::iterator itt = (*it).<span class="hljs-built_in">begin</span>(); itt != (*it).<span class="hljs-built_in">end</span>(); itt++)<br>        &#123;<br>            cout &lt;&lt; *itt &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. æ¨¡æ¿</title>
    <link href="/2024/11/27/cpp/11-%E6%A8%A1%E6%9D%BF/"/>
    <url>/2024/11/27/cpp/11-%E6%A8%A1%E6%9D%BF/</url>
    
    <content type="html"><![CDATA[<p>æ¨¡æ¿å°±æ˜¯ç®€å†é€šç”¨çš„æ¨¡å…·ï¼Œå¤§å¤§æé«˜ å¤ç”¨æ€§ã€‚</p><h1 id="æ¦‚å¿µ">1.1 æ¦‚å¿µ</h1><p>ç‰¹ç‚¹ï¼š</p><ul><li>æ¨¡æ¿ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œåªæ˜¯ä¸€ä¸ªæ¡†æ¶</li><li>æ¨¡æ¿çš„é€šç”¨å¹¶ä¸æ˜¯ä¸‡èƒ½çš„</li></ul><h1 id="å‡½æ•°æ¨¡æ¿">1.2 å‡½æ•°æ¨¡æ¿</h1><p>æ³›å‹ç¼–ç¨‹ï¼Œä¸»è¦åˆ©ç”¨çš„æŠ€æœ¯ æ˜¯æ¨¡æ¿</p><p>ä¸¤ç§æ¨¡æ¿ï¼šå‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿</p><h2 id="å‡½æ•°æ¨¡æ¿ç”¨æ³•">1.2.1 å‡½æ•°æ¨¡æ¿ç”¨æ³•</h2><p>å»ºç«‹ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œè¿”å›ç±»å‹å’Œå½¢å‚ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ªè™šæ‹Ÿçš„ç±»å‹æ¥ä»£è¡¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-comment">// class167_æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap</span><span class="hljs-params">(T&amp; a, T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br>T temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br><span class="hljs-type">double</span> c = <span class="hljs-number">1.1</span>, d = <span class="hljs-number">2.2</span>;<br><span class="hljs-comment">//è‡ªåŠ¨ç±»å‹æ¨å¯¼</span><br><span class="hljs-built_in">mySwap</span>(a, b);<br>cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; endl;<br><span class="hljs-comment">//æ˜¾å¼æŒ‡å®šç±»å‹</span><br><span class="hljs-built_in">mySwap</span>&lt;<span class="hljs-type">double</span>&gt;(c, d);<br>cout &lt;&lt; c &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; d &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ©ç”¨å…³é”®å­—template</p><p>ä¸¤ç§æ–¹å¼ï¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œæ˜¾å¼æŒ‡å®šç±»å‹</p><p>æ¨¡æ¿çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å¤ç”¨æ€§ï¼Œå°†ç±»å‹å‚æ•°åŒ–</p><h2 id="å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹">1.2.2 å‡½æ•°æ¨¡æ¿æ³¨æ„äº‹é¡¹</h2><p>æ³¨æ„äº‹é¡¹ï¼š</p><p>Â·è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œå¿…é¡»æ¨å¯¼å‡ºä¸€è‡´çš„æ•°æ®ç±»ç±»å‹T,æ‰å¯ä»¥ä½¿ç”¨</p><p>Â·æ¨¡æ¿å¿…é¡»è¦ç¡®å®šå‡ºçš„æ•°æ®ç±»å‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨</p><h2 id="æ’åº">1.2.3 æ’åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class167_æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySwap</span><span class="hljs-params">(T&amp; a, T&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br>T temp = a;<br>a = b;<br>b = temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mySort</span><span class="hljs-params">(T arr[], <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br><span class="hljs-type">int</span> max = i;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i; j &lt; len; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (arr[max] &lt; arr[j])<br>&#123;<br>max = j;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (max!=i)<br>&#123;<br><span class="hljs-built_in">mySwap</span>(arr[max], arr[i]);<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printArray</span><span class="hljs-params">(T arr[], <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>&#123;<br>cout &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> charArr[] = <span class="hljs-string">&quot;badcfe&quot;</span>;<br><span class="hljs-type">int</span> length = <span class="hljs-built_in">sizeof</span>(charArr) / <span class="hljs-built_in">sizeof</span>(charArr[<span class="hljs-number">0</span>]);<br><span class="hljs-built_in">mySort</span>(charArr, length);<br><span class="hljs-built_in">printArray</span>(charArr, length);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ™®é€šå‡½æ•°ä¸-å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«">1.2.4 æ™®é€šå‡½æ•°ä¸ å‡½æ•°æ¨¡æ¿çš„åŒºåˆ«</h2><p>æ™®é€šå‡½æ•°ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ï¼š</p><p>Â·æ™®é€šå‡½æ•°è°ƒç”¨æ—¶å¯ä»¥å‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰</p><p>Â·å‡½æ•°æ¨¡æ¿è°ƒç”¨æ—¶ï¼Œå¦‚æœåˆ©ç”¨è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</p><p>å¦‚æœåˆ©ç”¨æ˜¾ç¤ºæŒ‡å®šç±»å‹çš„æ–¹å¼ï¼Œå¯ä»¥å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">myAdd</span><span class="hljs-params">(T a,T b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> a + b;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-built_in">myAdd</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">myAdd</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span>) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-built_in">myAdd</span>&lt;<span class="hljs-type">char</span>&gt;(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;a&#x27;</span>) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è°ƒç”¨è§„åˆ™å¦‚ä¸‹">1.2.5 è°ƒç”¨è§„åˆ™å¦‚ä¸‹ï¼š</h2><p>1.å¦‚æœå‡½æ•°æ¨¡æ¿å’Œæ™®é€šå‡½æ•°éƒ½å¯ä»¥å®ç°ï¼Œä¼˜å…ˆè°ƒç”¨æ™®é€šå‡½æ•°</p><p>2.å¯ä»¥é€šè¿‡ç©ºæ¨¡æ¿å‚æ•°åˆ—è¡¨æ¥å¼ºåˆ¶è°ƒç”¨å‡½æ•°æ¨¡æ¿</p><p>3.å‡½æ•°æ¨¡æ¿ä¹Ÿå¯ä»¥å‘ç”Ÿé‡è½½</p><p>4.å¦‚æœå‡½æ•°æ¨¡æ¿å¯ä»¥äº§ç”Ÿæ›´å¥½çš„åŒ¹é…ï¼Œä¼˜å…ˆè°ƒç”¨å‡½æ•°æ¨¡æ¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class167_æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;hello&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(T a, T b)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;temp&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myPrint</span><span class="hljs-params">(T a, T b,T c)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;temp ccc&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ä¼˜å…ˆæ™®é€šå‡½æ•°</span><br><span class="hljs-built_in">myPrint</span>(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>);<br><br>myPrint&lt;&gt;(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>);<br>myPrint&lt;&gt;(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>);<br><span class="hljs-comment">//é‡è½½</span><br>myPrint&lt;&gt;(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¢ç„¶æä¾›äº† å‡½æ•°æ¨¡æ¿ï¼Œæœ€å¥½ å°±ä¸è¦æä¾›æ™®é€šå‡½æ•°ï¼Œå¦åˆ™ ä¼šå‡ºç°äºŒä¹‰æ€§</p><h2 id="æ¨¡æ¿çš„-å±€é™æ€§">1.2.6 æ¨¡æ¿çš„ å±€é™æ€§</h2><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå¦‚æœTçš„æ•°æ®ç±»å‹ä¼ å…¥çš„æ˜¯åƒPersoè¿™æ ·çš„è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œ</p><p>å› æ­¤C++ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œæä¾›æ¨¡æ¿çš„é‡è½½ï¼Œå¯ä»¥ä¸ºè¿™äº›ç‰¹å®šçš„ç±»å‹æä¾›å…·ä½“åŒ–çš„æ¨¡æ¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class167_æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(string m_name, <span class="hljs-type">int</span> m_age) :<span class="hljs-built_in">name</span>(m_name), <span class="hljs-built_in">age</span>(m_age) &#123;&#125;<br>string name;<br><span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">myCompare</span><span class="hljs-params">(T &amp;a, T &amp;b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (a==b)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">template</span>&lt;&gt; <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">myCompare</span><span class="hljs-params">(Person&amp; a, Person&amp; b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (a.age ==b.age)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = <span class="hljs-number">20</span>;<br>cout &lt;&lt; <span class="hljs-built_in">myCompare</span>(a, b) &lt;&lt; endl;<br><br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;Tim&quot;</span>, <span class="hljs-number">10</span>)</span></span>;<br>cout &lt;&lt; <span class="hljs-built_in">myCompare</span>(p1, p2) &lt;&lt; endl; <br><span class="hljs-comment">//é‡è½½è¿ç®—ç¬¦</span><br><span class="hljs-comment">//å…·ä½“åŒ–å®ç°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç±»æ¨¡æ¿">1.3 ç±»æ¨¡æ¿</h1><h2 id="ç±»æ¨¡æ¿è¯­æ³•">1.3.1 ç±»æ¨¡æ¿è¯­æ³•</h2><p>ç±»æ¨¡æ¿ä½œç”¨ï¼š</p><p>Â·å»ºç«‹ä¸€ä¸ªé€šç”¨ç±»ï¼Œç±»ä¸­çš„æˆå‘˜æ•°æ®ç±»å‹å¯ä»¥ä¸å…·ä½“åˆ¶å®šï¼Œç”¨ä¸€ä¸ªè™šæ‹Ÿçš„ç±»å‹æ¥ä»£è¡¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span>  T&gt;<br><span class="hljs-keyword">class</span><br></code></pre></td></tr></table></figure><p>è§£é‡Šï¼š</p><p>template-å£°æ˜åˆ›å»ºæ¨¡æ¿</p><p>typename-è¡¨é¢å…¶åé¢çš„ç¬¦å·æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨classä»£æ›¿</p><p>Té€šç”¨çš„æ•°æ®ç±»å‹ï¼Œ</p><p>åç§°å¯ä»¥æ›¿æ¢ï¼Œé€šå¸¸ä¸ºå¤§å†™å­—æ¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class174_ç±»æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">NameType</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeType</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(NameType n, AgeType a) :<span class="hljs-built_in">name</span>(n), <span class="hljs-built_in">age</span>(a) &#123;&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; name &lt;&lt; endl;<br>cout &lt;&lt; age &lt;&lt; endl;<br>&#125;<br>NameType name;<br>AgeType age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person&lt;string, <span class="hljs-type">int</span>&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">99</span>)</span></span>;<br>p<span class="hljs-number">1.</span><span class="hljs-built_in">ShowPerson</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ä¸»è¦æœ‰ä¸¤ç‚¹">1.3.2ç±»æ¨¡æ¿ä¸å‡½æ•°æ¨¡æ¿åŒºåˆ«ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</h2><p>1.ç±»æ¨¡æ¿æ²¡æœ‰è‡ªåŠ¨ç±»å‹æ¨å¯¼çš„ä½¿ç”¨æ–¹å¼</p><p>2.ç±»æ¨¡æ¿åœ¨æ¨¡æ¿å‚æ•°åˆ—è¡¨ä¸­å¯ä»¥æœ‰é»˜è®¤å‚æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">NameType</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeType</span> = <span class="hljs-type">int</span>&gt;<br><span class="hljs-keyword">class</span> Person<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(NameType n, AgeType a) :<span class="hljs-built_in">name</span>(n), <span class="hljs-built_in">age</span>(a) &#123;&#125;<br><span class="hljs-type">void</span> <span class="hljs-built_in">ShowPerson</span>()<br>&#123;<br>cout &lt;&lt; name &lt;&lt; endl;<br>cout &lt;&lt; age &lt;&lt; endl;<br>&#125;<br>NameType name;<br>AgeType age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person&lt;string&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">99</span>)</span></span>;<br>p<span class="hljs-number">1.</span><span class="hljs-built_in">ShowPerson</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶é—´">1.3.3 ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶é—´</h2><p>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°å’Œæ™®é€šç±»ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯æœ‰åŒºåˆ«çš„ï¼š</p><p>æ™®é€šç±»ä¸­çš„æˆå‘˜å‡½æ•°ä¸€å¼€å§‹å°±å¯ä»¥åˆ›å»º</p><p>Â·ç±»æ¨¡æ¿ä¸­çš„æˆå‘˜å‡½æ•°åœ¨è°ƒç”¨æ—¶æ‰åˆ›å»º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class174_ç±»æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person1</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;name&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person2</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;age&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>T obj;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>obj.<span class="hljs-built_in">ShowPerson1</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>obj.<span class="hljs-built_in">ShowPerson2</span>();<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>MyClass&lt;Person1&gt;m;<br>m.<span class="hljs-built_in">func1</span>();<br><span class="hljs-comment">//m.func2();</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°">1.3.4 ç±»æ¨¡æ¿å¯¹è±¡åšå‡½æ•°å‚æ•°</h2><p>å­¦ä¹ ç›®æ ‡ï¼š</p><p>Â·ç±»æ¨¡æ¿å®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ï¼Œå‘å‡½æ•°ä¼ å‚çš„æ–¹å¼</p><p>ä¸€å…±æœ‰ä¸‰ç§ä¼ å…¥æ–¹å¼ï¼š</p><p>1.æŒ‡å®šä¼ å…¥çš„ç±»å‹ä¸€ç›´æ¥æ˜¾ç¤ºå¯¹è±¡çš„æ•°æ®ç±»å‹<strong>(æœ€å¸¸ç”¨ï¼‰</strong></p><p>2.å‚æ•°æ¨¡æ¿åŒ–</p><p>ä¸€å°†å¯¹è±¡ä¸­çš„å‚æ•°å˜ä¸ºæ¨¡æ¿è¿›è¡Œä¼ é€’</p><p>3.æ•´ä¸ªç±»æ¨¡æ¿åŒ–</p><p>ä¸€å°†è¿™ä¸ªå¯¹è±¡ç±»å‹æ¨¡æ¿åŒ–è¿›è¡Œä¼ é€’</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class174_ç±»æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age) :<span class="hljs-built_in">name</span>(m_name), <span class="hljs-built_in">age</span>(m_age) &#123;&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; name &lt;&lt; endl;<br>cout &lt;&lt; age &lt;&lt; endl;<br>&#125;<br>T1 name;<br>T2 age;<br>&#125;;<br><span class="hljs-comment">//æŒ‡å®šä¼ å…¥ç±»å‹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson1</span><span class="hljs-params">(Person&lt;string, <span class="hljs-type">int</span>&gt;&amp;p)</span></span><br><span class="hljs-function"></span>&#123;<br>p.<span class="hljs-built_in">ShowPerson</span>();<br>&#125;<br><span class="hljs-comment">//2.å‚æ•°æ¨¡æ¿åŒ–</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T1, <span class="hljs-keyword">class</span> T2&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson2</span><span class="hljs-params">(Person&lt;T1, T2&gt;&amp; p)</span></span><br><span class="hljs-function"></span>&#123;<br>p.<span class="hljs-built_in">ShowPerson</span>();<br><span class="hljs-comment">//cout &lt;&lt; typeid(T1).name() &lt;&lt; endl;</span><br><span class="hljs-comment">//cout &lt;&lt; typeid(T2).name() &lt;&lt; endl;</span><br>&#125;<br><span class="hljs-comment">//3.æ•´ä¸ªç±»æ¨¡æ¿åŒ–</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printPerson3</span><span class="hljs-params">(T&amp; p)</span></span><br><span class="hljs-function"></span>&#123;<br>p.<span class="hljs-built_in">ShowPerson</span>();<br>cout &lt;&lt; <span class="hljs-built_in">typeid</span>(T).<span class="hljs-built_in">name</span>() &lt;&lt; endl;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;sun&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printPerson1</span>(p);<br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p2</span>(<span class="hljs-string">&quot;zhu&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printPerson2</span>(p2);<br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p3</span>(<span class="hljs-string">&quot;tang&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printPerson3</span>(p3);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿ä¸ç»§æ‰¿">1.3.5 ç±»æ¨¡æ¿ä¸ç»§æ‰¿</h2><p>å½“ç±»æ¨¡æ¿ç¢°åˆ°ç»§æ‰¿æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><p>Â·å½“å­ç±»ç»§æ‰¿çš„çˆ¶ç±»æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿æ—¶ï¼Œå­ç±»åœ¨å£°æ˜çš„æ—¶å€™ï¼Œè¦æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹</p><p>Â·å¦‚æœä¸æŒ‡å®šï¼Œç¼–æ³½å™¨æ— æ³•ç»™å­ç±»åˆ†é…å†…å­˜</p><p>Â·å¦‚æœæƒ³çµæ´»æŒ‡å®šå‡ºçˆ¶ç±»ä¸­Tçš„ç±»å‹ï¼Œå­ç±»ä¹Ÿéœ€å˜ä¸ºç±»æ¨¡æ¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class174_ç±»æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br>T m;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base&lt;<span class="hljs-type">int</span>&gt;<br>&#123;<br><br>&#125;;<br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son2</span> :<span class="hljs-keyword">public</span> Base&lt;T2&gt;<br>&#123;<br>T1 obj;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Son s1;<br><br>Son2 &lt;<span class="hljs-type">int</span>, <span class="hljs-type">char</span>&gt; s2;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿å‡½æ•°ç±»å¤–å®ç°">1.3.6 ç±»æ¨¡æ¿å‡½æ•°ç±»å¤–å®ç°</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class174_ç±»æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age); <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span></span>;<br><br>T1 name;<br>T2 age;<br>&#125;;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1,T2&gt;::<span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;name = (m_name);<br><span class="hljs-keyword">this</span>-&gt;age = (m_age);<br>&#125;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1, T2&gt;::<span class="hljs-built_in">ShowPerson</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-keyword">this</span>-&gt;name &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-keyword">this</span>-&gt;age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;sun&quot;</span>, <span class="hljs-number">100</span>);<br>p.<span class="hljs-built_in">ShowPerson</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿ä»½æ–‡ä»¶ç¼–å†™">1.3.7 ç±»æ¨¡æ¿ä»½æ–‡ä»¶ç¼–å†™</h2><p>é—®é¢˜ï¼š</p><p>ã€‚</p><p>ç±»æ¨¡æ¿ä¸­æˆå‘˜å‡½æ•°åˆ›å»ºæ—¶æœºæ˜¯åœ¨è°ƒç”¨é˜¶æ®µï¼Œå¯¼è‡´åˆ†æ–‡ä»¶ç¼–å†™æ—¶é“¾æ¥ä¸åˆ°</p><p>è§£å†³ï¼š</p><p>ã€‚è§£å†³æ–¹å¼1ï¼šç›´æ¥åŒ…å«.cppæºæ–‡ä»¶</p><p>ã€‚è§£å†³æ–¹å¼2ï¼šå°†å£°æ˜å’Œå®ç°å†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶æ›´æ”¹åç¼€åä¸º.hpp,hppæ˜¯çº¦å®šçš„åç§°ï¼Œå¹¶ä¸æ˜¯å¼ºåˆ¶</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class174_ç±»æ¨¡æ¿.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Person.hpp&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;sun&quot;</span>, <span class="hljs-number">100</span>);<br>p.<span class="hljs-built_in">ShowPerson</span>();<br>&#125;<br><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age);<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span></span>;<br><br>T1 name;<br>T2 age;<br>&#125;;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1, T2&gt;::<span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;name = (m_name);<br><span class="hljs-keyword">this</span>-&gt;age = (m_age);<br>&#125;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-type">void</span> Person&lt;T1, T2&gt;::<span class="hljs-built_in">ShowPerson</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-keyword">this</span>-&gt;name &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-keyword">this</span>-&gt;age &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç±»æ¨¡æ¿ä¸å‹å…ƒ">1.3.ç±»æ¨¡æ¿ä¸å‹å…ƒ</h2><p>å…¨å±€å‡½æ•°ç±»å†…å®ç°Â·ç›´æ¥åœ¨<strong>ç±»å†…å£°æ˜å‹å…ƒ</strong>å³å¯</p><p>å…¨å±€å‡½æ•°ç±»å¤–å®ç°Â·éœ€è¦æå‰è®©ç¼–è¯‘å™¨çŸ¥é“å…¨å±€å‡½æ•°çš„å­˜åœ¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span>  std;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson2</span><span class="hljs-params">(Person&lt;T1, T2&gt; p)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; p.name &lt;&lt; endl;<br>cout &lt;&lt; p.age &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">(Person&lt;T1, T2&gt; p)</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; p.name &lt;&lt; endl;<br>cout &lt;&lt; p.age &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> ShowPerson2 &lt;&gt;(Person&lt;T1, T2&gt; p);<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age);<br><br><span class="hljs-keyword">private</span>:<br>T1 name;<br>T2 age;<br>&#125;;<br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T1</span>, <span class="hljs-keyword">class</span> <span class="hljs-title class_">T2</span>&gt;<br>Person&lt;T1, T2&gt;::<span class="hljs-built_in">Person</span>(T1 m_name, T2 m_age)<br>&#123;<br><span class="hljs-keyword">this</span>-&gt;name = (m_name);<br><span class="hljs-keyword">this</span>-&gt;age = (m_age);<br>&#125;<br><br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person&lt;string, <span class="hljs-type">int</span>&gt;<span class="hljs-built_in">p</span>(<span class="hljs-string">&quot;sun&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">ShowPerson2</span>(p);<br><span class="hljs-built_in">ShowPerson</span>(p);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. æ–‡ä»¶æ“ä½œ</title>
    <link href="/2024/11/27/cpp/10-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"/>
    <url>/2024/11/27/cpp/10-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<p>ç¨‹åºè¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®éƒ½å±äºæ—¶æ•°æ®ï¼Œç¨‹åºä¸€æ—¦è¿è¡Œç»“æŸéƒ½ä¼šè¢«é‡Šæ”¾</p><p>é€šè¿‡æ–‡ä»¶å¯ä»¥å°†æ•°æ®æŒä¹…åŒ–</p><p>C++ä¸­å¯¹æ–‡ä»¶æ“ä½œéœ€è¦åŒ…å«å¤´æ–‡ä»¶fstream</p><p>æ–‡ä»¶ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š</p><p>1.æ–‡æœ¬æ–‡ä»¶Â·æ–‡ä»¶ä»¥æ–‡æœ¬çš„ASCIIç å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­</p><p>2.äºŒè¿›åˆ¶æ–‡ä»¶-æ–‡ä»¶ä»¥æ–‡æœ¬çš„äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸èƒ½ç›´æ¥è¯»æ‡‚å®ƒä»¬</p><p>æ“ä½œæ–‡ä»¶çš„ä¸‰å¤§ç±»ï¼š</p><p>1,ofstream:å†™æ“ä½œ</p><p>2.ifstream:è¯»æ“ä½œ</p><p>3.fstream:è¯»å†™æ“ä½œ</p><h1 id="æ–‡æœ¬æ–‡ä»¶">5.1 æ–‡æœ¬æ–‡ä»¶</h1><h2 id="å†™æ–‡ä»¶">5.1.1 å†™æ–‡ä»¶</h2><p>å†™æ–‡ä»¶æ­¥å¦‚ä¸‹ï¼š</p><p>1.åŒ…å«å¤´æ–‡ä»¶</p><p>#include <fstream></fstream></p><p>2.åˆ›å»ºæµå¯¹è±¡</p><p>ofstream ofs;</p><p>3.æ‰“å¼€æ–‡ä»¶</p><p>ofs.open"æ–‡ä»¶è·¯å¾„"ï¼Œæ‰“å¼€æ–¹å¼)</p><p>4.å†™æ•°æ®</p><p>ofs&lt;&lt;â€œå†™å…¥çš„æ•°æ®"</p><p>5,å…³é—­æ–‡ä»¶</p><p>ofs.close();</p><p>æ–‡ä»¶æ‰“å¼€æ–¹å¼</p><figure><img src="/2024/11/27/cpp/10-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/1694655551848-ec76a7fa-f455-4f02-aafa-d12195ff6e97.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>æ³¨æ„ï¼šæ–‡ä»¶ç‰¹æ‰“å¼€æ–¹å¼å¯ä»¥é…åˆä¾¿ç”¨ï¼Œåˆ©ç”¨å¼•æ“ä½œç¬¦</p><p>ä¾‹å¦‚ï¼šç”¨äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ios::binary| ios::out</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class143_æ–‡æœ¬æ–‡ä»¶.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>ofstream ofs;<br>ofs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, ios::out);<br>ofs &lt;&lt; <span class="hljs-string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;<br>ofs &lt;&lt; <span class="hljs-string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;<br>ofs &lt;&lt; <span class="hljs-string">&quot;å§“åï¼šå¼ ä¸‰&quot;</span> &lt;&lt; endl;<br><br>ofs.<span class="hljs-built_in">close</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¯»æ–‡ä»¶">5.1.2 è¯»æ–‡ä»¶</h2><p>è¯»æ–‡ä»¶ä¸å†™æ–‡ä»¶æ­¥éª¤ç›¸ä¼¼ï¼Œä½†æ˜¯è¯»å–æ–¹å¼ç›¸å¯¹äºæ¯”è¾ƒå¤š</p><p>è¯»æ–‡ä»¶æ­¥å¦‚ä¸‹ï¼š</p><p>1.åŒ…å«å¤´æ–‡ä»¶</p><p>#include <fstream></fstream></p><p>2.å»ºæµå¯¹è±¡</p><p>ifstream ifs;</p><p>3.æ‰“å¼€æ–‡ä»¶å¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</p><p>ifs.open("æ–‡ä»¶è·¯å¾„"æ‰“å¼€æ–¹å¼)ï¼š</p><p>4.è¯»æ•°æ®</p><p>å››ç§æ–¹å¼è¯»å–</p><p>5.å…³é—­æ–‡ä»¶</p><p>ifs.close();</p><p>æ€»ç»“ï¼š</p><p>è¯»æ–‡ä»¶å¯ä»¥åˆ©ç”¨ifstream,æˆ–è€…fstreamç±»</p><p>åˆ©ç”¨is_openå‡½æ•°å¯ä»¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ</p><p>Â·closeå…³é—­æ–‡ä»¶I</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class143_æ–‡æœ¬æ–‡ä»¶.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>ifstream ifs;<br>ifs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;test.txt&quot;</span>,ios::in);<br><span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-comment">//char buf[1024] = &#123; 0 &#125;;</span><br><span class="hljs-comment">//ç¬¬ä¸€ç§</span><br><span class="hljs-comment">//while (ifs &gt;&gt; buf)</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//ç¬¬ä¸‰ç§</span><br><span class="hljs-comment">//while (ifs.getline(buf,sizeof(buf)))</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//ifs.close();</span><br><span class="hljs-comment">/*string buf;</span><br><span class="hljs-comment">while (getline(ifs,buf))</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">cout &lt;&lt; buf &lt;&lt; endl;</span><br><span class="hljs-comment">&#125;*/</span><br><br><span class="hljs-type">char</span> c;<br><span class="hljs-keyword">while</span> ((c = ifs.<span class="hljs-built_in">get</span>()) !=EOF)<span class="hljs-comment">//æ–‡ä»¶å°¾</span><br>&#123;<br>cout &lt;&lt; c;<br>&#125;<br>ifs.<span class="hljs-built_in">close</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="äºŒè¿›åˆ¶æ–‡ä»¶">5.2 äºŒè¿›åˆ¶æ–‡ä»¶</h1><p>ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ</p><p>æ‰“å¼€æ–¹å¼è¦æŒ‡å®šä¸ºios::binary</p><h2 id="å†™æ–‡ä»¶-1">5.2.1 å†™æ–‡ä»¶</h2><p>äºŒè¿›åˆ¶æ–¹å¼å†™æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°wite</p><p>å‡½æ•°åŸå‹ï¼šostream&amp; write(const char*buffer,int len);</p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆoufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-type">char</span> name[<span class="hljs-number">64</span>];<br><span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">ofstream <span class="hljs-title">ofs</span><span class="hljs-params">(<span class="hljs-string">&quot;person.txt&quot;</span>, ios::out | ios::binary)</span></span>;<br>Person p = &#123; <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>,<span class="hljs-number">18</span> &#125;;<br>ofs.<span class="hljs-built_in">write</span>((<span class="hljs-type">const</span> <span class="hljs-type">char</span>*)&amp;p, <span class="hljs-built_in">sizeof</span>(Person));<br><br>ofs.<span class="hljs-built_in">close</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¯»æ–‡ä»¶-1">5.2.2 è¯»æ–‡ä»¶</h2><p>äºŒè¿›åˆ¶æ–¹å¼è¯»æ–‡ä»¶ä¸»è¦åˆ©ç”¨æµå¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°rad</p><p>å‡½æ•°åŸå‹ï¼š</p><p>istream&amp; read(char *buffer ,int len);</p><p>å‚æ•°è§£é‡Šï¼šå­—ç¬¦æŒ‡é’ˆbufferæŒ‡å‘å†…å­˜ä¸­ä¸€æ®µå­˜å‚¨ç©ºé—´ã€‚lenæ˜¯è¯»å†™çš„å­—èŠ‚æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// class143_æ–‡æœ¬æ–‡ä»¶.cpp : æ­¤æ–‡ä»¶åŒ…å« &quot;main&quot; å‡½æ•°ã€‚ç¨‹åºæ‰§è¡Œå°†åœ¨æ­¤å¤„å¼€å§‹å¹¶ç»“æŸã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-type">char</span> name[<span class="hljs-number">64</span>];<br><span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">ifstream <span class="hljs-title">ifs</span><span class="hljs-params">(<span class="hljs-string">&quot;person.txt&quot;</span>, ios::in | ios::binary)</span></span>;<br><span class="hljs-keyword">if</span> (!ifs.<span class="hljs-built_in">is_open</span>())<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;æ‰“å¼€å¤±è´¥&quot;</span> &lt;&lt; endl;<br><span class="hljs-keyword">return</span>;<br>&#125;<br>Person p;<br><br>ifs.<span class="hljs-built_in">read</span>((<span class="hljs-type">char</span>*)&amp;p, <span class="hljs-built_in">sizeof</span>(Person));<br>cout &lt;&lt; p.age &lt;&lt; endl;<br>cout &lt;&lt; p.name &lt;&lt; endl;<br>ifs.<span class="hljs-built_in">close</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. ç±»å’Œå¯¹è±¡</title>
    <link href="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/"/>
    <url>/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/</url>
    
    <content type="html"><![CDATA[<p>c++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€</p><h3 id="å°è£…">4.1 å°è£…</h3><p>å°†å±æ€§å’Œè¡Œä¸ºä½œä¸ºä¸€ä¸ªæ•´ä½“</p><p>åŠ ä»¥æƒé™é™åˆ¶</p><ul><li><p>è®¿é—®æƒé™</p></li><li><ul><li>å…¬å…±æƒé™ public ç±»å†…å¯è®¿é—®ï¼Œç±»å¤–å¯ä»¥è®¿é—®</li><li>ä¿æŠ¤æƒé™ protected ç±»å†…å¯è®¿é—®ï¼Œç±»å¤–ä¸å¯è®¿é—® å„¿å­å¯ä»¥è®¿é—®çˆ¶äº²ä¿æŠ¤å†…å®¹</li><li>ç§æœ‰æƒé™ private ç±»å†…å¯è®¿é—®ï¼Œç±»å¤–ä¸å¯è®¿é—®å„¿å­ä¸å¯ä»¥è®¿é—®çˆ¶äº²ç§æœ‰å†…å®¹</li></ul></li></ul><h4 id="pstruct-å’Œ-class-åŒºåˆ«">4.1.1 pstruct å’Œ class åŒºåˆ«</h4><p>structé»˜è®¤æƒé™ä¸ºpublic</p><p>classé»˜è®¤æƒé™ä¸ºprivate</p><h4 id="æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰">4.1.2 æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰</h4><p>ä¼˜ç‚¹ï¼š</p><p>å°†æ‰€æœ‰æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ï¼Œå¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</p><p>å¯¹äºå†™æƒé™ï¼Œå¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs plain">#include &lt;iostream&gt;<br> using  namespace std;<br> class Person<br> &#123;<br> <br> public:<br>     void setName(string name1)<br>     &#123;<br>         name = name1;<br>     &#125;<br>     string getName()<br>     &#123;<br>         return name;<br>     &#125;<br>     int getAge()<br>     &#123;<br>         return age;<br>     &#125;<br>     void setLover(string lover1)<br>     &#123;<br>         lover = lover1;<br>     &#125;<br> private:<br>     string name;<br>     int age;<br>     string lover;<br> &#125;;<br> int main()<br> &#123;<br>     Person p;<br>     p.setName(&quot;zhangsan&quot;);<br>     cout &lt;&lt;  p.getName() &lt;&lt; endl;<br>     cout &lt;&lt; &quot;Hello World!\n&quot;;<br> &#125;<br></code></pre></td></tr></table></figure><h3 id="å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†">4.2 å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†</h3><h4 id="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°">4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h4><p>æ„é€ å‡½æ•°ï¼šåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨</p><ul><li>ç±»åï¼ˆï¼‰{}</li><li>æ— è¿”å›å€¼ï¼Œä¸å†™void</li><li>å¯ä»¥æœ‰é‡è½½</li><li>ç¨‹åºåœ¨è°ƒç”¨å¯¹è±¡æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œ</li></ul><p>ææ„å‡½æ•°ï¼šå¯¹è±¡é”€æ¯å‰ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼Œæ‰§è¡Œæ¸…ç†å·¥ä½œ</p><ul><li>~ç±»åï¼ˆï¼‰{}</li><li>ä¸å¯ä»¥æœ‰å‚æ•°ï¼Œä¸å¯ä»¥é‡è½½</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs plain">#include &lt;iostream&gt;<br> using namespace std;<br> <br> class Person<br> &#123;<br> public:<br>     Person()<br>     &#123;<br>         cout &lt;&lt; &quot;hello&quot; &lt;&lt; endl;<br>     &#125;<br> <br>     ~Person() &#123;<br>         cout &lt;&lt; &quot;ææ„&quot; &lt;&lt; endl;<br>     &#125;<br> &#125;;<br> <br> int main()<br> &#123;<br>     Person p1;//å±€éƒ¨å˜é‡ æ ˆä¸Šçš„æ•°æ®ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œé‡Šæ”¾è¿™ä¸ªå¯¹è±¡<br> &#125;<br></code></pre></td></tr></table></figure><h4 id="æ„é€ å‡½æ•°çš„åˆ†ç±»å’Œä½¿ç”¨">4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»å’Œä½¿ç”¨</h4><p>æœ‰å‚æ„é€ å’Œæ— å‚æ„é€ ï¼ˆé»˜è®¤æ„é€ ï¼‰</p><p>æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ </p><p>è°ƒç”¨æ–¹å¼ï¼šæ‹¬å·æ³•ã€æ˜¾ç¤ºæ³•ã€éšå¼è½¬æ¢æ³•</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()<br>    &#123;<br>        age = <span class="hljs-number">10</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é»˜è®¤æ„é€ å‡½æ•°&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a)<br>    &#123;<br>        age = a;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ å‡½æ•°&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person &amp;p) <span class="hljs-comment">// const ä¸èƒ½ä¿®æ”¹pï¼ŒåŒæ—¶è¦ç”¨å¼•ç”¨</span><br>    &#123;<br>        <span class="hljs-comment">//å°†ä¼ å…¥çš„äººèº«ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œæ‹·è´åˆ°æˆ‘èº«ä¸Š</span><br>        age = p.age;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ å‡½æ•°&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•°&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.æ‹¬å·æ³•</span><br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;<br>    <span class="hljs-comment">//æ³¨æ„ï¼š</span><br>    <span class="hljs-comment">//è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ä¸è¦åŠ æ‹¬å·</span><br>    <span class="hljs-comment">//ç¼–è¯‘å™¨ä¼šè®¤ä¸ºæ˜¯å‡½æ•°çš„å£°æ˜ï¼›</span><br>    <span class="hljs-comment">// Person p();       åƒ void func();</span><br>    <span class="hljs-comment">// </span><br>    <span class="hljs-comment">//2.æ˜¾ç¤ºæ³•</span><br>    Person p3;<br>    Person p4 = <span class="hljs-built_in">Person</span>(<span class="hljs-number">10</span>);<br>    Person p5 = <span class="hljs-built_in">Person</span>(p3);<br>    <span class="hljs-comment">//Person(10) åŒ¿åå¯¹è±¡ ç‰¹ç‚¹ï¼šå½“å‰è¡Œæ‰§è¡Œç»“æŸåï¼Œç³»ç»Ÿä¼šç«‹å³å›æ”¶æ‰åŒ¿åå¯¹è±¡</span><br>    <span class="hljs-comment">//ä¸è¦åˆ©ç”¨æ‹·è´æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–åŒ¿åå¯¹è±¡</span><br>    <span class="hljs-comment">//Personï¼ˆp3);   ç¼–è¯‘å™¨ä¼šè®¤ä¸ºæ˜¯ Person p3</span><br>    <br>    <span class="hljs-comment">//3.éšå¼æ³•</span><br>    Person p6 = <span class="hljs-number">10</span>; <br>    Person p7 = p6;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº">4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº</h4><ul><li>ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</li><li>å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</li><li>ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é»˜è®¤æ„é€ &quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<br>    &#123;<br>        p_age = age;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ &quot;</span> &lt;&lt; endl;<br><br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p)<br>    &#123;<br>        p_age = p.p_age;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ &quot;</span> &lt;&lt; endl;<br><br>    &#125;<br><br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ææ„&quot;</span> &lt;&lt; endl;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> p_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span><br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;<br>&#125;<br><br><span class="hljs-comment">//2.å€¼ä¼ é€’çš„æ–¹å¼ç»™å‡½æ•°å‚æ•°ä¼ å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doWork</span><span class="hljs-params">(Person p1)</span></span><br><span class="hljs-function"></span>&#123;<br>   <br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    <span class="hljs-built_in">doWork</span>(p);<br>&#125;<br><span class="hljs-comment">//3.ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</span><br><span class="hljs-function">Person <span class="hljs-title">doWork2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p1;<br>    cout &lt;&lt; (<span class="hljs-type">int</span>*)&amp;p1 &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> p1;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p = <span class="hljs-built_in">doWork2</span>();<br>    cout &lt;&lt; (<span class="hljs-type">int</span>*)&amp;p &lt;&lt; endl;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test3</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™">4.2.4 æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»æ·»åŠ 3ä¸ªå‡½æ•°</p><p>é»˜è®¤æ„é€ ã€ææ„ã€æ‹·è´æ„é€ å‡½æ•°</p><ul><li>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸å†æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯æœ‰é»˜è®¤æœ‰å‚æ„é€ </li><li>å¦‚æœç”¨æˆ·å®šä¹‰æœ‰å‚æ„é€ å‡½æ•°ï¼Œc++ä¸å†æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†æ˜¯æœ‰é»˜è®¤æœ‰å‚æ„é€ </li></ul><h4 id="æ·±æ‹·è´å’Œæµ…æ‹·è´">4.2.5 æ·±æ‹·è´å’Œæµ…æ‹·è´</h4><p>æµ…æ‹·è´ï¼šç®€å•çš„èµ‹å€¼æ‹·è´æ“ä½œï¼Œç¼–è¯‘å™¨çš„é»˜è®¤æ‹·è´æ„é€ </p><p>é—®é¢˜ï¼šå †åŒºå†…å­˜é‡å¤é‡Šæ”¾</p><p>æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´ï¼Œè¿›è¡Œæ‹·è´æ“ä½œ</p><p>å¦‚æœå±æ€§æœ‰åœ¨å †åŒºå¼€è¾Ÿçš„ï¼Œä¸€å®šè¦è‡ªå·±æä¾›æ‹·è´å‡½æ•°ï¼Œé˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é»˜è®¤æ„é€ &quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age, <span class="hljs-type">int</span> heitht)<br>    &#123;<br>        p_age = age;<br>        p_height = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(heitht);<br>        cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ &quot;</span> &lt;&lt; endl;<br><br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p) <span class="hljs-comment">//æ·±æ‹·è´</span><br>    &#123;<br>        p_age = p.p_age;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ &quot;</span> &lt;&lt; endl;<br>        p_height = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.p_height);<br>    &#125;<br><br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        <span class="hljs-comment">//å°†å †åŒºå¼€è¾Ÿçš„æ•°æ®é‡Šæ”¾</span><br>        <span class="hljs-keyword">if</span> (p_height != <span class="hljs-literal">NULL</span>)<br>        &#123;<br>            <span class="hljs-keyword">delete</span> p_height;<br>            p_height = <span class="hljs-literal">NULL</span>;<br>        &#125;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ææ„&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-type">int</span> p_age;<br>    <span class="hljs-type">int</span>* p_height;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>,<span class="hljs-number">180</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(p1)</span></span>;<br><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åˆå§‹åŒ–åˆ—è¡¨">4.2.6 åˆå§‹åŒ–åˆ—è¡¨</h4><p>åˆå§‹åŒ–å±æ€§</p><p>æ„é€ å‡½æ•°(): å±æ€§1ï¼ˆå€¼1ï¼‰ï¼Œ...{}</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> c):<span class="hljs-built_in">a</span>(a),<span class="hljs-built_in">b</span>(b),<span class="hljs-built_in">c</span>(c)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é»˜è®¤æ„é€ &quot;</span> &lt;&lt; endl;<br>    &#125;<br>   <br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ææ„&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-type">int</span> a;<br>    <span class="hljs-type">int</span> b;<br>    <span class="hljs-type">int</span> c;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">30</span>, <span class="hljs-number">20</span>, <span class="hljs-number">10</span>)</span></span>;<br><br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜">4.2.7 ç±»å¯¹è±¡ä½œä¸ºç±»æˆå‘˜</h4><p>å¯¹è±¡æˆå‘˜</p><p>å½“å…¶ä»–ç±»å¯¹è±¡ä½œä¸ºæœ¬ç±»æˆå‘˜ï¼Œæ„é€ æ—¶å…ˆæ„é€ ç±»å¯¹è±¡ï¼Œå†æ„é€ è‡ªèº«ï¼Œææ„åç€æ¥</p><h4 id="é™æ€æˆå‘˜">4.2.8 é™æ€æˆå‘˜</h4><p>æˆå‘˜å‰åŠ static</p><p>é™æ€æˆå‘˜å˜é‡ï¼š</p><ul><li>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½æ•°æ®</li><li>å†ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜</li><li>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é»˜è®¤æ„é€ &quot;</span> &lt;&lt; endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ææ„&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-type">int</span> Person::age = <span class="hljs-number">100</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//1.ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span><br>    Person p1;<br>    Person p2;<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    <span class="hljs-comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span><br>    cout &lt;&lt; p.age &lt;&lt; endl;<br>    <span class="hljs-comment">//é€šè¿‡ç±»åè®¿é—® ç±»å¤–ä¸èƒ½è®¿é—®ç§æœ‰çš„é™æ€æˆå‘˜å˜é‡</span><br>    cout &lt;&lt; Person::age &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//test();</span><br>    <span class="hljs-built_in">test2</span>();<br><br>&#125;<br></code></pre></td></tr></table></figure><p>é™æ€æˆå‘˜å‡½æ•°</p><p>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°</p><p>é™æ€æˆå‘˜ä½ å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</p><p>ä¹Ÿæœ‰è®¿é—®æƒé™ï¼Œç±»å¤–è°ƒç”¨ä¸åˆ°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        age = <span class="hljs-number">50</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;static&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-type">int</span> Person::age = <span class="hljs-number">100</span>;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    p.<span class="hljs-built_in">func</span>();<br>    Person::<span class="hljs-built_in">func</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test3</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="cå¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ">4.3 c++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ</h3><h4 id="æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨">4.3.1æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</h4><p>åœ¨c++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Š</p><p>ç©ºå¯¹è±¡å ç”¨å†…å­˜ç©ºé—´ä¸º1</p><p>c++ç¼–è¯‘å™¨ä¼šç»™æ¯ä¸ªç©ºå¯¹è±¡ä¹Ÿåˆ†é…ä¸€ä¸ªå­—èŠ‚ç©ºé—´ï¼Œæ˜¯ä¸ºäº†åŒºåˆ†å¯¹è±¡å å†…å­˜çš„ä½ç½®ï¼Œæ¯ä¸ªç©ºå¯¹è±¡ä¹Ÿåº”è¯¥æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å†…å­˜åœ°å€</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp">lass Person<br>&#123;<br><br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(p) &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br>    <span class="hljs-type">int</span> m_a; <span class="hljs-comment">//éé™æ€æˆå‘˜å˜é‡ï¼Œå±äºç±»çš„å¯¹è±¡ä¸Š</span><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span>  b; <span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ï¼Œä¸å±äºç±»å¯¹è±¡ä¸Š </span><br>&#125;;<br><span class="hljs-type">int</span> Person::b = <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(p) &lt;&lt; endl;<span class="hljs-comment">//sizeof(p) = 4</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test1</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="thisæŒ‡é’ˆæ¦‚å¿µ">4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ</h4><p>thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</p><p>thisæŒ‡é’ˆæ˜¯éšå«æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ</p><p>thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>thisæŒ‡é’ˆçš„ç”¨é€”ï¼š</p><ul><li>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†</li><li>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ä½¿ç”¨return *this</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<br>    &#123;<br>        <span class="hljs-keyword">this</span>-&gt;age = age;<br>    &#125;<br>    <span class="hljs-function">Person&amp; <span class="hljs-title">PersonAddAge</span><span class="hljs-params">(Person &amp;p)</span>  <span class="hljs-comment">//å¼•ç”¨è¿”å›p2æœ¬èº«</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">this</span>-&gt;age += p.age;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>    cout &lt;&lt; p<span class="hljs-number">1.</span>age &lt;&lt; endl;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-comment">//é“¾å¼ç¼–ç¨‹æ€æƒ³</span><br>    p<span class="hljs-number">2.</span><span class="hljs-built_in">PersonAddAge</span>(p1).<span class="hljs-built_in">PersonAddAge</span>(p1).<span class="hljs-built_in">PersonAddAge</span>(p1);<br>    cout &lt;&lt; p<span class="hljs-number">2.</span>age &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°">4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h4><p>c++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯è¦æ³¨æ„æœ‰å’©æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</p><p>å¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„é²æ£’æ€§</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowClassName</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Person&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">showAge</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-comment">//ä¼ å…¥çš„æŒ‡é’ˆæ˜¯NULL</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == <span class="hljs-literal">NULL</span>)<br>        &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        cout &lt;&lt; age &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person* p = <span class="hljs-literal">NULL</span>;<br>    p-&gt;<span class="hljs-built_in">ShowClassName</span>();<br>    p-&gt;<span class="hljs-built_in">showAge</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="constä¿®é¥°æˆå‘˜å‡½æ•°">4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°</h4><p>å¸¸å‡½æ•°ï¼š</p><ul><li>ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</li><li>æˆå‘˜å±æ€§å£°æ˜æ—¶åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ã€å¸¸å¯¹è±¡ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</li></ul><p>å¸¸å¯¹è±¡ï¼š</p><ul><li>å£°æ˜å¯¹è±¡ å‰åŠ const</li><li>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//thisæŒ‡é’ˆçš„æœ¬è´¨æ—¶æŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡å‘ä¸å¯ä»¥ä¿®æ”¹</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShowPerson</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-comment">//const Person* const this; constä¿®é¥°thisæŒ‡é’ˆï¼Œè®©æŒ‡é’ˆæŒ‡å‘çš„ å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-comment">//age = 100; æŠ¥é”™</span><br>        b = <span class="hljs-number">100</span>;<br>    &#125;<br>   <br>    <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">mutable</span> <span class="hljs-type">int</span> b;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    p.<span class="hljs-built_in">ShowPerson</span>();<br>    <span class="hljs-type">const</span> Person p1;<br>    p<span class="hljs-number">1.</span><span class="hljs-built_in">ShowPerson</span>();<br>    <span class="hljs-comment">//p1.age = 100;</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‹å…ƒ">4.4 å‹å…ƒ</h3><p>åœ¨ç¨‹åºé‡Œï¼Œæœ‰äº›ç§æœ‰å±æ€§ä¹Ÿæƒ³è®©ç±»å¤–ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®ï¼Œå°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯</p><p>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©â€”ä¸ªå‡½æ•°æˆ–è€…ç±»è®¿é—®å¦â€”ä¸ªç±»ä¸­ç§æœ‰æˆå‘˜</p><p>å‹å…ƒçš„å…³é”®å­—ä¸ºfriend</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°</p><ul><li>å…¨å±€å‡½æ•°åšå‹å…ƒÂ·</li><li>ç±»åšå‹å…ƒ</li><li>æˆå‘˜å‡½æ•°åšå‹å…ƒ</li></ul><h4 id="å…¨å±€å‡½æ•°åšå‹å…ƒ">4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">GoodGuy</span><span class="hljs-params">(Building* building)</span></span>;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Building</span>()<br>    &#123;<br>        livingRoom = <span class="hljs-string">&quot;å®¢å…&quot;</span>;<br>        bedroom = <span class="hljs-string">&quot;å§å®¤&quot;</span>;<br>    &#125;<br>    string livingRoom;<br><br><span class="hljs-keyword">private</span>:<br>    string bedroom;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GoodGuy</span><span class="hljs-params">(Building* building)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹å…¨å±€å‡½æ•°: &quot;</span> &lt;&lt; building-&gt;livingRoom &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;å¥½åŸºå‹å…¨å±€å‡½æ•°: &quot;</span> &lt;&lt; building-&gt;bedroom &lt;&lt; endl;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Building building;<br>    <span class="hljs-built_in">GoodGuy</span>(&amp;building);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç±»åšå‹å…ƒ">4.4.2 ç±»åšå‹å…ƒ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodGuy</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">GoodGuy</span>();<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Visit</span><span class="hljs-params">()</span></span>;    <span class="hljs-comment">//å‚è§‚å‡½æ•°è®¿é—®buildingä¸­çš„å±æ€§</span><br>    Building* building;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span><br>&#123;<br>    <span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodGuy</span>;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Building</span>();<br>    string sittingRoom;<br><br><span class="hljs-keyword">private</span>:<br>    string bedroom;<br><br>&#125;;<br><br>Building::<span class="hljs-built_in">Building</span>()<br>&#123;<br>    sittingRoom = <span class="hljs-string">&quot;å®¢å…&quot;</span>;<br>    bedroom = <span class="hljs-string">&quot;å§å®¤&quot;</span>;<br>&#125;<br><br>GoodGuy::<span class="hljs-built_in">GoodGuy</span>()<br>&#123;<br>    building = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Building</span>();<span class="hljs-comment">//å †åŒº</span><br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">GoodGuy::Visit</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;sittingRoom &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è®¿é—®ï¼š&quot;</span> &lt;&lt; building-&gt;bedroom &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    GoodGuy gg;<br>    gg.<span class="hljs-built_in">Visit</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æˆå‘˜å‡½æ•°åšå‹å…ƒ">4.4.3 æˆå‘˜å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodGuy</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">GoodGuy</span>();<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Visit</span><span class="hljs-params">()</span></span>;    <span class="hljs-comment">//å‚è§‚å‡½æ•°è®¿é—®buildingä¸­çš„å±æ€§</span><br>    Building* building;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span><br>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">GoodGuy::Visit</span><span class="hljs-params">()</span></span>;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Building</span>();<br>    string sittingRoom;<br><br><span class="hljs-keyword">private</span>:<br>    string bedroom;<br><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="è¿ç®—ç¬¦é‡è½½">4.5 è¿ç®—ç¬¦é‡è½½</h3><h4 id="åŠ å·è¿ç®—ç¬¦é‡è½½">4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½</h4><p>å®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br>    <br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> d = <span class="hljs-number">0</span>) :<span class="hljs-built_in">a</span>(c), <span class="hljs-built_in">b</span>(d) &#123;&#125;<br><br>    <span class="hljs-comment">// æˆå‘˜å‡½æ•°é‡è½½</span><br>    <span class="hljs-comment">//Person operator+(Person&amp; p)</span><br>    <span class="hljs-comment">//&#123;</span><br>    <span class="hljs-comment">//    Person temp;</span><br>    <span class="hljs-comment">//    temp.a = this-&gt;a + p.a;</span><br>    <span class="hljs-comment">//    temp.b = this-&gt;b + p.b;</span><br>    <span class="hljs-comment">//    return temp;</span><br>    <span class="hljs-comment">//&#125;</span><br><br>    <span class="hljs-type">int</span> a;<br>    <span class="hljs-type">int</span> b;<br><br>&#125;;<br><span class="hljs-comment">// å…¨å±€å‡½æ•°</span><br>Person <span class="hljs-keyword">operator</span>+(Person&amp; p1, Person&amp; p2)<br>&#123;<br>    Person temp;<br>    temp.a = p<span class="hljs-number">1.</span>a + p<span class="hljs-number">2.</span>a;<br>    temp.b = p<span class="hljs-number">1.</span>b + p<span class="hljs-number">2.</span>b;<br>    <span class="hljs-keyword">return</span> temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>)</span></span>;<br>    Person p3 = p1 + p2;<br>    cout &lt;&lt; p<span class="hljs-number">3.</span>a &lt;&lt; endl;<br>    cout &lt;&lt; p<span class="hljs-number">3.</span>b &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å·¦ç§»è¿ç®—ç¬¦é‡è½½">4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½</h4><p>åªèƒ½ç”¨å…¨å±€å‡½æ•°é‡è½½å·¦ç§»ï¼Œ</p><p>é…åˆå‹å…ƒä½¿ç”¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br>    <span class="hljs-keyword">friend</span> ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; cout, Person&amp; p);<br>        <br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> d = <span class="hljs-number">0</span>) :<span class="hljs-built_in">a</span>(c), <span class="hljs-built_in">b</span>(d) &#123;&#125;<br><br>    <span class="hljs-comment">// æˆå‘˜å‡½æ•°é‡è½½æ— æ³•å®ç°</span><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> a;<br>    <span class="hljs-type">int</span> b;<br><br>&#125;;<br><span class="hljs-comment">// å…¨å±€å‡½æ•°</span><br>ostream&amp;  <span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;cout, Person&amp; p)<br>&#123;<br>    cout &lt;&lt; p.a &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> cout;<span class="hljs-comment">//</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>)</span></span>;<br>    cout &lt;&lt; p1 &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é€’å¢è¿ç®—ç¬¦é‡è½½">4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>, <span class="hljs-type">int</span> d = <span class="hljs-number">0</span>) :<span class="hljs-built_in">a</span>(c), <span class="hljs-built_in">b</span>(d) &#123;&#125;<br><br>    <span class="hljs-comment">// æˆå‘˜å‡½æ•°</span><br>    <span class="hljs-comment">//å‰ç½®é€’å¢è¿”å›å¼•ç”¨</span><br>    Person&amp; <span class="hljs-keyword">operator</span>++()<br>    &#123;<br>        a++;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>    <span class="hljs-comment">//åç½®é€’å¢ è¿”å›å€¼</span><br>    Person <span class="hljs-keyword">operator</span>++(<span class="hljs-type">int</span>)<br>    &#123;<br>        Person p = *<span class="hljs-keyword">this</span>;<br>        a++;<br>        <span class="hljs-keyword">return</span> p;<br>    &#125;<br>    <span class="hljs-type">int</span> a;<br>    <span class="hljs-type">int</span> b;<br><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-type">int</span> a = (++p1).a;<br>    cout &lt;&lt; a &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="èµ‹å€¼è¿ç®—ç¬¦é‡è½½">4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h4><p>C++ç¼–æ³½å™¨è‡³å°‘ç»™ä¸€ä¸ªç±»æ·»åŠ 4ä¸ªå‡½æ•°</p><p>1.é»˜è®¤æ„é€ ï¼ˆå‡½æ•°æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)</p><p>2.é»˜è®¤ææ„ï¼ˆå‡½æ•°æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©ºï¼‰</p><p>3.é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ï¼Œå¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>4.èµ‹å€¼è¿ç®—ç¬¦operator=,å¯¹å±æ€§è¿›è¡Œå€¼æ‹·è´</p><p>å¦‚æœç±»ä¸­æœ‰å±æ€§æŒ‡å‘å †åŒºï¼Œåšå˜±å€¼æ“ä½œæ—¶ä¹Ÿä¼šå‡ºç°æ·±æµ…çƒ¤è´é—®é¢˜</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> l_age)<br>    &#123;<br>        age = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(l_age);<br>    &#125;<br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        <span class="hljs-keyword">if</span> (age != <span class="hljs-literal">NULL</span>)<br>        &#123;<br>            <span class="hljs-keyword">delete</span> age;<br>            age = <span class="hljs-literal">NULL</span>;<br>        &#125;<br>    &#125;<br>    Person&amp; <span class="hljs-keyword">operator</span>=(Person &amp;p)<br>    &#123;<br>        <span class="hljs-comment">//è€ƒè™‘é‡å¤é‡Šæ”¾å †åŒºé—®é¢˜</span><br>        <span class="hljs-keyword">if</span> (age != <span class="hljs-literal">NULL</span>)<br>        &#123;<br>            <span class="hljs-keyword">delete</span> age;<br>            age = <span class="hljs-literal">NULL</span> ;<br>        &#125;<br>        age = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.age);<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>    <span class="hljs-type">int</span>* age;<br><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">18</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-number">30</span>)</span></span>;<br>    p1 = p2 = p3;   <br>   <br>    cout &lt;&lt; *p<span class="hljs-number">1.</span>age &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å…³ç³»è¿ç®—ç¬¦é‡è½½">4.5.5 å…³ç³»è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šé‡è½½å…³ç³»è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©ä¸¤ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡è¿›è¡Œå¯¹æ¯”æ“ä½œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string l_name, <span class="hljs-type">int</span> l_age)<br>    &#123;<br>        age = (l_age);<br>        name = l_name;<br>    &#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(Person&amp; p)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (name == p.name &amp;&amp; age == p.age)<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(Person&amp; p)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (name == p.name &amp;&amp; age == p.age)<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-number">18</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-number">19</span>)</span></span>;<br>    <span class="hljs-keyword">if</span> (p1 == p2)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ç›¸ç­‰&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ä¸ç›¸ç­‰&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½-ä»¿å‡½æ•°">4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½ ä»¿å‡½æ•°</h4><p>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ï¼ˆï¼‰ä¹Ÿå¯ä»¥é‡è½½</p><p>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸ºä»¿å‡½æ•°</p><p>ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(string l_name, <span class="hljs-type">int</span> l_age)<br>    &#123;<br>        age = (l_age);<br>        name = l_name;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string test)</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; test &lt;&lt; endl;<br>    &#125;<br>    string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-comment">//ä»¿å‡½æ•°çµæ´»ï¼Œæ— å›ºå®šå†™æ³•</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">myAdd</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> num1 + num2;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-number">18</span>)</span></span>;<br>    <span class="hljs-built_in">p1</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>    myAdd myadd;<br>    cout &lt;&lt; <span class="hljs-built_in">myadd</span>(<span class="hljs-number">18</span>, <span class="hljs-number">16</span>) &lt;&lt; endl;<br><br>    <span class="hljs-comment">//åŒ¿åå‡½æ•°å¯¹è±¡ ç±»å()(å‚æ•°)ï¼Œå½“å‰è¡Œæ‰§è¡Œå®Œï¼Œç«‹å³é‡Šæ”¾</span><br>    cout &lt;&lt; <span class="hljs-built_in">myAdd</span>()(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»§æ‰¿">4.6 ç»§æ‰¿</h3><h4 id="ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•">4.6.1 ç»§æ‰¿çš„åŸºæœ¬è¯­æ³•</h4><p>ç»§æ‰¿çš„å¥½å¤„ï¼šå‡å°‘é‡å¤ä»£ç </p><p>è¯­æ³•ï¼šclass å­ç±»ï¼šç»§æ‰¿æ–¹å¼ çˆ¶ç±»</p><p>å­ç±»ä¹Ÿç§°ä¸ºæ´¾ç”Ÿç±»</p><p>çˆ¶ç±»ä¹Ÿç§°ä¸ºåŸºç±»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;class127_ç»§æ‰¿.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasePage</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">header</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;toubu&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">footer</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;åº•éƒ¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">left</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å·¦ä¾§&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Java</span> :<span class="hljs-keyword">public</span> BasePage<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">content</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;java&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test01</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Java ja;<br>    ja.<span class="hljs-built_in">header</span>();<br>    ja.<span class="hljs-built_in">footer</span>();<br>    ja.<span class="hljs-built_in">left</span>();<br>    ja.<span class="hljs-built_in">content</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç»§æ‰¿æ–¹å¼">4.6.2 ç»§æ‰¿æ–¹å¼</h4><p>ç»§æ‰¿æ–¹å¼ä¸€å…±æœ‰ä¸‰ç§ï¼š</p><p>Â·å…¬å…±ç»§æ‰¿</p><p>ä¿æŠ¤ç»§æ‰¿</p><p>Â·ç§æœ‰ç»§æ‰¿</p><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694573990164-7f69ded3-39b6-4547-8b6e-3ba4201334cc.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h4 id="ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹">4.6.3 ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹</h4><p>çˆ¶ç±»ä¸­æ‰€ä»¥éé™æ€æˆå‘˜å±æ€§éƒ½ä¼šè¢«å­ç±»ç»§æ‰¿ä¸‹å»</p><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694576410777-305ad4ba-f6a2-4db6-86cf-24d1dbccb52d.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h4 id="ç»§æ‰¿ä¸­çš„æ„é€ å’Œææ„é¡ºåº">4.6.4 ç»§æ‰¿ä¸­çš„æ„é€ å’Œææ„é¡ºåº</h4><p>æ„é€  å…ˆçˆ¶ç±»åå­ç±»</p><p>ææ„ å…ˆå­ç±»åçˆ¶ç±»</p><h4 id="ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼">4.6.5 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h4><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694576897148-586e9b25-bb6e-4989-9dfe-0f9a2af406a6.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694577075484-2c54e994-ab3d-4953-9d3c-75a218000e53.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>çˆ¶ç±»éœ€è¦åŠ Base::</p><h4 id="åŒåé™æ€æˆå‘˜å¤„ç†">4.6.6 åŒåé™æ€æˆå‘˜å¤„ç†</h4><p>é™æ€æˆå‘˜å’Œè€³éé™æ€æˆå‘˜å‡ºç°åŒåï¼Œå¤„ç†æ–¹å¼ä¸€è‡´</p><p>Â·è®¿é—®å­ç±»åŒåæˆå‘˜ç›´æ¥è®¿é—®å³å¯</p><p>Â·è®¿é—®çˆ¶ç±»åŒåæˆå‘˜éœ€è¦åŠ ä½œç”¨åŸŸ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> a;<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;base func&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-type">int</span> Base::a = <span class="hljs-number">100</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> : <span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> a;<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Son func&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><span class="hljs-type">int</span> Son::a = <span class="hljs-number">200</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//é€šè¿‡å¯¹è±¡è®¿é—®</span><br>Son s;<br>cout &lt;&lt; s.a &lt;&lt; endl;<br>cout &lt;&lt; s.Base::a &lt;&lt; endl;<br><span class="hljs-comment">//é€šè¿‡ç±»åè®¿é—®</span><br>cout &lt;&lt; Son::a &lt;&lt; endl;<br>cout &lt;&lt; Son::Base::a &lt;&lt; endl;<br><br>s.<span class="hljs-built_in">func</span>();<br>s.Base::<span class="hljs-built_in">func</span>();<br><br>Son::<span class="hljs-built_in">func</span>();<br>Son::Base::<span class="hljs-built_in">func</span>();<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¤šç»§æ‰¿è¯­æ³•">4.6.7 å¤šç»§æ‰¿è¯­æ³•</h4><p>C++å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªç±»</p><p>è¯­æ³•ï¼šclass å­ç±» ï¼š ç»§æ‰¿æ–¹å¼ çˆ¶ç±»1ï¼Œç»§æ‰¿æ–¹å¼ çˆ¶ç±»2ï¼Œ</p><p>å¤šç»§æ‰¿å¯èƒ½ä¼šå¼•å‘çˆ¶ç±»ä¸­æœ‰åŒåæˆå‘˜å‡ºç°ï¼Œéœ€è¦åŠ ä½œç”¨åŸŸåŒºåˆ†</p><p>C++å®é™…å¼€å‘ä¸­ä¸å»ºè®®ç”¨å¤šç»§æ‰¿</p><h4 id="è±å½¢ç»§æ‰¿">4.6.8 è±å½¢ç»§æ‰¿</h4><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694603177519-44280a65-6a84-477d-b551-93fd9aafdcf9.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694603178705-cefdd96c-725e-48bb-97b4-159d20c760d9.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694603179516-e0568c90-09ff-47aa-9c48-2435deca7b6c.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694603180518-e98d372d-1981-4da1-87da-c44d28cda714.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694603181421-46dcd21e-23d5-424b-be9e-74a1d67e455e.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/cpp/9-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/1694603181953-98bd175c-6479-4b6e-9ff9-e719b7fdd7ba.jpeg" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="å¤šæ€">4.7 å¤šæ€</h3><h4 id="å¤šæ€åŸºæœ¬æ¦‚å¿µ">4.7.1 å¤šæ€åŸºæœ¬æ¦‚å¿µ</h4><p>å¤šæ€æ˜¯c++é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹</p><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»</p><p>é™æ€å¤šæ€ï¼šå‡½æ•‘é‡è½½å’Œè¿ç®—ç¬¦é‡è½½å±äºé™æ€å¤šæ€ï¼Œå¤ç”¨å‡½æ•°å</p><p>åŠ¨æ€å¤šæ€ï¼šæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€</p><p>é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€åŒºåˆ«ï¼š</p><p>é™æ€å¤šæ€çš„æ„Ÿæ•°åœ°å€æ—©ç»‘å®šï¼Œç¼–æ³½é˜¶æ®µç¡®å®šå›¢æ•°åœ°å€</p><p>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š-è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•™åœ°å€</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span><br>&#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-comment">//è™šå‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;animal speak&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> : <span class="hljs-keyword">public</span> Animal<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//é‡å†™å‡½æ•°è¿”å›å€¼ç±»å‹    å‡½æ•°åå‚æ•°åˆ—è¡¨å®Œå…¨ç›¸åŒ</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;cat speak&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><span class="hljs-comment">////æ‰§è¡Œè¯´è¯çš„å‡½æ•°</span><br><span class="hljs-comment">//åœ°å€æ—©ç»‘å®šåœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</span><br><span class="hljs-comment">// å¦‚æœæƒ³æ‰§è¡Œè®©çŒ«è¯´è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°åœ°å€å°±ä¸èƒ½æå‰ç»‘å®šï¼Œéœ€è¦åœ¨è¿è¡Œé˜¶æ®µè¿›è¡Œç»‘å®šï¼Œåœ°å€æ™šç»‘</span><br><span class="hljs-comment">///åŠ¨æ€å¤šæ€æ»¡è¶³æ¡ä»¶</span><br><span class="hljs-comment">//1ã€æœ‰ç»§æ‰¿å…³ç³»</span><br><span class="hljs-comment">//2ã€å­ç±»é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doSpeak</span><span class="hljs-params">(Animal &amp;animal)</span></span><br><span class="hljs-function"></span>&#123;<br>    animal.<span class="hljs-built_in">speak</span>();<br><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Cat cat;<br>    <span class="hljs-built_in">doSpeak</span>(cat);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>å¤šæ€æ»¡è¶³æ¡ä»¶</p><p>Â·æœ‰ç»§æ‰¿å…³ç³»</p><p>Â·å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°</p><p>å¤šæ€ä½¿ç”¨æ¡ä»¶</p><p>Â·çˆ¶ç±»æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</p><p>é‡å†™ï¼šå‡½æ•°è¿”å›å€¼ç±»å‹å‡½æ•°åå‚æ•°åˆ—è¡¨å®Œå…¨ä¸€è‡´ç§°ä¸ºé‡å†™</p><h4 id="å¤šæ€æ¡ˆä¾‹ä¸€è®¡ç®—æœºç±»">4.7.2 å¤šæ€æ¡ˆä¾‹ä¸€ã€è®¡ç®—æœºç±»</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><p>åˆ†åˆ«åˆ©ç”¨æ™®é€šå†™æ³•å’Œå¤šæ€æŠ€æœ¯ï¼Œè®¾è®¡å®ç°ä¸¤ä¸ªæ“ä½œæ•°è¿›è¡Œè¿ç®—çš„è®¡ç®—å™¨ç±»</p><p>å¤šæ€çš„ä¼˜ç‚¹ï¼š</p><p>Â· ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°</p><p>` å¯è¯»æ€§å¼º</p><p>Â· åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Abstract</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> num1;<br><span class="hljs-type">int</span> num2;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AddCalculator</span> : <span class="hljs-keyword">public</span> Abstract<br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//å¦‚æœæƒ³æ‰©å±•æ–°çš„åŠŸèƒ½ï¼Œéœ€æ±‚ä¿®æ”¹æºç </span><br><span class="hljs-comment">// åœ¨çœŸæ˜¯å¼€å‘ä¸­æå€¡å¼€é—­åŸåˆ™</span><br><span class="hljs-comment">//å¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•è¿›è¡Œå¼€å‘ï¼Œå¯¹ä¿®æ”¹è¿›è¡Œå…³é—­</span><br><span class="hljs-keyword">return</span> num1 + num2;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubCalculator</span> : <span class="hljs-keyword">public</span> Abstract<br>&#123;<br><span class="hljs-keyword">public</span>:<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getResult</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//å¦‚æœæƒ³æ‰©å±•æ–°çš„åŠŸèƒ½ï¼Œéœ€æ±‚ä¿®æ”¹æºç </span><br><span class="hljs-comment">// åœ¨çœŸæ˜¯å¼€å‘ä¸­æå€¡å¼€é—­åŸåˆ™</span><br><span class="hljs-comment">//å¼€é—­åŸåˆ™ï¼šå¯¹æ‰©å±•è¿›è¡Œå¼€å‘ï¼Œå¯¹ä¿®æ”¹è¿›è¡Œå…³é—­</span><br><span class="hljs-keyword">return</span> num1 - num2;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Abstract* abs = <span class="hljs-keyword">new</span> AddCalculator;<br>abs-&gt;num1 = <span class="hljs-number">20</span>;<br>abs-&gt;num2 = <span class="hljs-number">20</span>;<br>cout &lt;&lt; abs-&gt;<span class="hljs-built_in">getResult</span>() &lt;&lt; endl;<br><span class="hljs-keyword">delete</span> abs;<br>abs = <span class="hljs-keyword">new</span> SubCalculator;<br>abs-&gt;num1 = <span class="hljs-number">20</span>;<br>abs-&gt;num2 = <span class="hljs-number">20</span>;<br>cout &lt;&lt; abs-&gt;<span class="hljs-built_in">getResult</span>() &lt;&lt; endl;<br><span class="hljs-keyword">delete</span> abs;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»">4.7.3 çº¯è™šå‡½æ•°å’ŒæŠ½è±¡ç±»</h4><p>åœ¨å¤šæ€ä¸­ï¼Œé€šå¸¸çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å®ç°æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œä¸»è¦éƒ½æ˜¯è°ƒç”¨å­ç±»é‡å†™çš„å†…å®¹ï¼Œå› æ­¤å¯ä»¥å°†è™šå‡½æ•°æ”¹ä¸ºçº¯è™šå‡½æ•°</p><p>çº¯è™šå‡½æ•°è¯­æ³•ï¼švirtual è¿”å›å€¼ç±»å‹ å‡½æ•°åï¼ˆå‚æ•°åˆ—è¡¨ï¼‰=0;</p><p>å½“ç±»ä¸­æœ‰äº†çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ä¹Ÿç§°ä¸ºæŠ½è±¡ç±»</p><p>æŠ½è±¡ç±»ç‰¹ç‚¹ï¼š</p><p>Â·æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</p><p>Â·å­ç±»å¿…é¡»é‡å†™æŠ½è±¡ç±»ä¸­çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ä¹Ÿå±äºæŠ½è±¡ç±»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">// çº¯è™šå‡½æ•°</span><br><span class="hljs-comment">//åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»ç§°ä¸ºæŠ½è±¡ç±»</span><br><span class="hljs-comment">//æŠ½è±¡ç±»ç‰¹ç‚¹ï¼š</span><br><span class="hljs-comment">// 1ã€æ— æ³•å®ä¾‹åŒ–å¯¹è±¡</span><br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> : <span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;func&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Base* base = <span class="hljs-keyword">new</span> Son;<br>base-&gt;<span class="hljs-built_in">func</span>();<br><span class="hljs-keyword">delete</span> base;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¤šæ€æ¡ˆä¾‹äºŒåˆ¶ä½œé¥®å“">4.7.4 å¤šæ€æ¡ˆä¾‹äºŒï¼šåˆ¶ä½œé¥®å“</h4><p>æ¡ˆä¾‹æè¿°ï¼š</p><p>åˆ¶ä½œé¥®å“çš„å¤§è‡´æµç¨‹ä¸ºï¼šç…®æ°´Â·å†²æ³¡Â·å€’å…¥æ¯ä¸­Â·åŠ å…¥è¾…æ–™</p><p>åˆ©ç”¨å¤šæ€æŠ€æœ¯å®ç°æœ¬æ¡ˆä¾‹ï¼Œæä¾›æŠ½è±¡åˆ¶ä½œé¥®å“åŸºç±»ï¼Œæä¾›å­ç±»åˆ¶ä½œå’–å•¡å’ŒèŒ¶å¶</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Drinking</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Boil</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Brew</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PourInCup</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PutSomething</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MakeDrink</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">Boil</span>();<br><span class="hljs-built_in">Brew</span>();<br><span class="hljs-built_in">PourInCup</span>();<br><span class="hljs-built_in">PutSomething</span>();<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span> : <span class="hljs-keyword">public</span> Drinking<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Boil</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç…®å†œå¤«å±±æ³‰&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Brew</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å†²æ³¡å’–å•¡&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PourInCup</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å€’å…¥æ¯ä¸­&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PutSomething</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;åŠ å…¥ç³–å’Œç‰›å¥¶&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tea</span> : <span class="hljs-keyword">public</span> Drinking<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Boil</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;ç…®çŸ¿æ³‰æ°´&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Brew</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å†²æ³¡èŒ¶å¶&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PourInCup</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;å€’å…¥æ¯ä¸­&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">PutSomething</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;åŠ å…¥æŸ æª¬&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doWork</span><span class="hljs-params">(Drinking* d)</span></span><br><span class="hljs-function"></span>&#123;<br>d-&gt;<span class="hljs-built_in">MakeDrink</span>();<br><span class="hljs-keyword">delete</span> d;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">doWork</span>(<span class="hljs-keyword">new</span> Coffee);<br><span class="hljs-built_in">doWork</span>(<span class="hljs-keyword">new</span> Tea);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è™šææ„å’Œçº¯è™šææ„">4.7.5 è™šææ„å’Œçº¯è™šææ„</h4><p>å¤šæ€ä½¿ç”¨æ—¶ï¼Œå¦‚æœå­ç±»ä¸­æœ‰å±æ€§å¼€è¾©åˆ°å †åŒºï¼Œé‚£ä¹ˆçˆ¶ç±»æŒ‡é’ˆåœ¨é‡Šæ”¾æ—¶æ— æ³•è°ƒç”¨åˆ°å­ç±»çš„ææ„ä»£ç </p><p>è§£å†³æ–¹å¼ï¼šå°†çˆ¶ç±»ä¸­çš„ææ„å‡½æ•°åŒä¸ºææ‰€æ„æˆ–è€çº¯è™šææ„</p><p>è™šææ„å’Œçº¯è™šææ„å…±æ€§ï¼š</p><p>Â·å¯ä»¥è§£å†³ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p><p>Â·éƒ½éœ€è¦æœ‰å…·ä½“çš„å‡½æ•°å®ç°</p><p>è™šææ„å’Œçº¯è™šææ„åŒºåˆ«ï¼š</p><p>Â·å¦‚æœæ˜¯çº¯è™šææ„ï¼Œè¯¥ç±»å±äºæŠ½è±¡ç±»ï¼Œæ— æ³•å®ä¾‹åŒ–å¯¹è±¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Speak</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br><span class="hljs-comment">//å¯ä»¥è§£å†³ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</span><br><span class="hljs-comment">//virtual ~Animal() &#123;&#125;  //è™šææ„</span><br><span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Animal</span>() = <span class="hljs-number">0</span>;<span class="hljs-comment">//çº¯è™šææ„</span><br>&#125;;<br>Animal::~<span class="hljs-built_in">Animal</span>()<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;chunxigou&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> : <span class="hljs-keyword">public</span> Animal<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Cat</span>(string m_name)<br>&#123;<br>name = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(m_name);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;miaomiao&quot;</span> &lt;&lt; endl;<br>&#125;<br>~<span class="hljs-built_in">Cat</span>()<br>&#123;<br><span class="hljs-keyword">if</span> (name != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> name;<br>name = <span class="hljs-literal">NULL</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;xigou&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;<br>string *name;<br>&#125;;<br><br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Animal* ani = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Cat</span>(<span class="hljs-string">&quot;Tom&quot;</span>);<br>ani-&gt;<span class="hljs-built_in">Speak</span>();<br><span class="hljs-keyword">delete</span> ani;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>1.è™šææ„æˆ–çº¯ç©ºææ„å°±æ˜¯ç”¨æ¥è§£å†³é€šè¿‡çˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡</p><p>2.å¦‚æœå­ç±»ä¸­æ²¡æœ‰å †åŒºæ•°æ®ï¼Œå¯ä»¥ä¸å†™ä¸ºè™šææ„æˆ–çº¯è™šææ„</p><p>3,ç”¨æœ‰çº¯è™šææ„å‡½æ•°çš„ç±»ä¹Ÿå±äºæŠ½è±¡ç±»</p><h4 id="å¤šæ€æ¡ˆä¾‹ä¸‰-ç”µè„‘ç»„è£…">4.7.6 å¤šæ€æ¡ˆä¾‹ä¸‰ ç”µè„‘ç»„è£…</h4><p>ç”µè„‘ä¸»è¦ç»„æˆéƒ¨ä»¶ä¸ºCPU(ç”¨äºè®¡ç®—)ï¼Œæ˜¾å¡ã€”ç”¨äºæ˜¾ç¤º)ï¼Œå†…å­˜æ¡ï¼ˆç”¨äºå­˜å‚¨ï¼‰</p><p>å°†æ¯ä¸ªé›¶ä»¶å°è£…å‡ºæŠ½è±¡åŸºç±»ï¼Œå¹¶ç›®æä¾›ä¸åŒçš„å‚å•†ç”Ÿäº§ä¸åŒçš„é›¶ä»¶ï¼Œä¾‹å¦‚Intel)å‚å•†å’ŒLenovoå‚å•†</p><p>åˆ›å»ºç”µè„‘ç±»æä¾›è®©ç”µè„‘å·¥ä½œçš„å‡½æ•°äº•ä¸”è°ƒç”¨æ¯ä¸ªé›¶ä»¶å·¥ä½œçš„æ¥å£</p><p>æµ‹è¯•æ—¶ç»„è£…ä¸‰å°ä¸åŒçš„ç”µè„‘è¿›è¡Œå·¥ä½œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cpu</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Calculate</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">VideoCard</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Display</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Memory</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Storage</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Computer</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Computer</span>(Cpu* m_cpu, VideoCard* m_vc, Memory* m_mem)<br>&#123;<br>cpu = m_cpu;<br>vc = m_vc;<br>mem = m_mem;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">work</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cpu-&gt;<span class="hljs-built_in">Calculate</span>();<br>vc-&gt;<span class="hljs-built_in">Display</span>();<br>mem-&gt;<span class="hljs-built_in">Storage</span>();<br>&#125;<br>~<span class="hljs-built_in">Computer</span>()<br>&#123;<br><span class="hljs-keyword">if</span> (cpu != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> cpu;<br>cpu = <span class="hljs-literal">NULL</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (vc != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> vc;<br>vc = <span class="hljs-literal">NULL</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (mem != <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">delete</span> mem;<br>mem = <span class="hljs-literal">NULL</span>;<br>&#125;<br><br>&#125;<br><span class="hljs-keyword">private</span>:<br>Cpu* cpu;<br>VideoCard* vc;<br>Memory* mem;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelCpu</span> : <span class="hljs-keyword">public</span> Cpu<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Calculate</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;intel cpu cal&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Intelvc</span> : <span class="hljs-keyword">public</span> VideoCard<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Display</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;intel cpu display&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelMemory</span> : <span class="hljs-keyword">public</span> Memory<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Storage</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;intel cpu cal&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LenovoCpu</span> : <span class="hljs-keyword">public</span> Cpu<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Calculate</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Lenovo cpu cal&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Lenovovc</span> : <span class="hljs-keyword">public</span> VideoCard<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Display</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Lenovo  display&quot;</span> &lt;&lt; endl;<br>&#125;<br><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LenovoMemory</span> : <span class="hljs-keyword">public</span> Memory<br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">Storage</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;Lenovo storage&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Cpu* intelCpu = <span class="hljs-keyword">new</span> IntelCpu;<br>VideoCard* intelvc = <span class="hljs-keyword">new</span> Intelvc;<br>Memory* intelMemory = <span class="hljs-keyword">new</span> IntelMemory;<br><br>Computer* computer1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Computer</span>(intelCpu, intelvc, intelMemory);<br>computer1-&gt;<span class="hljs-built_in">work</span>();<br><span class="hljs-keyword">delete</span> computer1;<br><br>Computer* computer2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Computer</span>(<span class="hljs-keyword">new</span> LenovoCpu, <span class="hljs-keyword">new</span> Lenovovc, <span class="hljs-keyword">new</span> LenovoMemory);<br>computer2-&gt;<span class="hljs-built_in">work</span>();<br><span class="hljs-keyword">delete</span> computer2;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. å‡½æ•°æé«˜</title>
    <link href="/2024/11/27/cpp/8-%E5%87%BD%E6%95%B0%E6%8F%90%E9%AB%98/"/>
    <url>/2024/11/27/cpp/8-%E5%87%BD%E6%95%B0%E6%8F%90%E9%AB%98/</url>
    
    <content type="html"><![CDATA[<h3 id="å‡½æ•°é»˜è®¤å‚æ•°">3.1 å‡½æ•°é»˜è®¤å‚æ•°</h3><p>å‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„</p><p>è¯­æ³•ï¼š è¿”å›å€¼ç±»å‹ å‡½æ•°å ï¼ˆå‚æ•°=é»˜è®¤å€¼ï¼‰{}</p><h3 id="å‡½æ•°å ä½å‚æ•°">3.2 å‡½æ•°å ä½å‚æ•°</h3><p>å ä½å‚æ•°å¯ä»¥æœ‰é»˜è®¤å‚æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span>)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;Hello World!\n&quot;</span>;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> = <span class="hljs-number">10</span>)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;Hello World!\n&quot;</span>;<br> &#125;<br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>, <span class="hljs-number">3</span>);<br>     <span class="hljs-built_in">func2</span>(<span class="hljs-number">10</span>);<br> &#125;<br></code></pre></td></tr></table></figure><h3 id="å‡½æ•°é‡è½½">3.3 å‡½æ•°é‡è½½</h3><p>ä½œç”¨åå¯ä»¥ç›¸åŒï¼Œæé«˜å¤ç”¨æ€§</p><h4 id="å‡½æ•°é‡è½½æ¡ä»¶">3.3.1 å‡½æ•°é‡è½½æ¡ä»¶</h4><ul><li>åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹</li><li>å‡½æ•°åç§°ç›¸åŒ</li><li>å‡½æ•°å‚æ•°ç±»å‹ä¸åŒæˆ–è€…ä¸ªæ•°ä¸åŒæˆ–è€…é¡ºåºä¸åŒ</li></ul><p>å‡½æ•°çš„è¿”å›å€¼ä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;å‡½æ•°è°ƒç”¨2&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> c)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt;<span class="hljs-string">&quot;å‡½æ•°3&quot;</span>&lt;&lt; endl;<br> &#125;<br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> c, <span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;å‡½æ•°5&quot;</span> &lt;&lt; endl;<br> &#125;<br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">double</span> c)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;å‡½æ•°6&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-built_in">func</span>();<br>     <span class="hljs-built_in">func</span>(<span class="hljs-number">1</span>);<br>     cout &lt;&lt; <span class="hljs-string">&quot;Hello World!\n&quot;</span>;<br> &#125;<br></code></pre></td></tr></table></figure><h4 id="å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹">3.3.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h4><ul><li>å¼•ç”¨ä½œä¸ºé‡è½½æ¡ä»¶</li><li>å‡½æ•°é‡è½½ç¢°åˆ°å‡½æ•°é»˜è®¤å‚æ•°ï¼Œå¯èƒ½ä¼šå‡ºç°äºŒä¹‰æ€§</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; a)</span>   <span class="hljs-comment">//int &amp;a = 10; ä¸åˆæ³•</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;func1&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; a)</span><span class="hljs-comment">//const int &amp;a = 10; åˆæ³•</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;func2&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br>     <span class="hljs-built_in">func</span>(a);<br>     <span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<br> &#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b = <span class="hljs-number">10</span>)</span>   </span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;func3&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span>   </span><br><span class="hljs-function"> </span>&#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;func4&quot;</span> &lt;&lt; endl;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-built_in">func2</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">//å½“å‡½æ•°é‡è½½ç¢°åˆ°é»˜è®¤å‚æ•°ï¼Œå‡ºç°äºŒä¹‰æ€§ï¼ŒæŠ¥é”™ï¼Œå°½é‡é¿å…è¿™ç§æƒ…å†µ</span><br> &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. å¼•ç”¨</title>
    <link href="/2024/11/27/cpp/7-%E5%BC%95%E7%94%A8/"/>
    <url>/2024/11/27/cpp/7-%E5%BC%95%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>ç»™å˜é‡èµ·ä¸€ä¸ªåˆ«å</p><p>å¼•ç”¨å¿…é¡»åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–åä¸å¯ä»¥æ”¹å˜</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br> <span class="hljs-type">int</span> &amp;b = a;<br></code></pre></td></tr></table></figure><h3 id="å¼•ç”¨åšå‡½æ•°å‚æ•°">2.1 å¼•ç”¨åšå‡½æ•°å‚æ•°</h3><p>å‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¼•ç”¨è®©å½¢å‚ä¿®é¥°å®å‚ï¼Œå¯ä»¥ç®€åŒ–æŒ‡é’ˆä¿®æ”¹å®å‚</p><h3 id="å¼•ç”¨åšå‡½æ•°è¿”å›å€¼">2.2 å¼•ç”¨åšå‡½æ•°è¿”å›å€¼</h3><p>ä¸è¦è¿”å›å±€éƒ¨å˜é‡å¼•ç”¨</p><p>ç”¨æ³•ï¼šå‡½æ•°è°ƒç”¨ä½œä¸ºå·¦å€¼</p><h3 id="å¼•ç”¨çš„æœ¬è´¨">2.3 å¼•ç”¨çš„æœ¬è´¨</h3><p>åœ¨c++å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡</p><p>int &amp;ref = a</p><p>int* const ref = &amp;a</p><p>c++æ¨èä½¿ç”¨å¼•ç”¨æŠ€æœ¯ï¼Œè¯­æ³•æ–¹ä¾¿ï¼Œå¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡</p><h3 id="å¸¸é‡å¼•ç”¨">2.4 å¸¸é‡å¼•ç”¨</h3><p>ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œ</p><p>åœ¨å‡½æ•°å½¢å‚åˆ—è¡¨ä¸­ï¼Œç”¨constä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢å½¢å‚æ”¹å˜å®å‚</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. å†…å­˜åˆ†åŒºæ¨¡å‹</title>
    <link href="/2024/11/27/cpp/6-%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA%E6%A8%A1%E5%9E%8B/"/>
    <url>/2024/11/27/cpp/6-%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<p>å†…å­˜åˆ†ä¸ºå››ä¸ªåŒºåŸŸï¼šä»£ç åŒºã€å…¨å±€åŒºã€æ ˆåŒºã€å †åŒº</p><h3 id="ç¨‹åºè¿è¡Œå‰">1.1 ç¨‹åºè¿è¡Œå‰</h3><p>ä»£ç åŒºæ˜¯å…±äº«çš„ã€åªè¯»çš„ï¼Œå­˜æ”¾CPUçš„æœºå™¨æŒ‡ä»¤</p><p>å…¨å±€åŒºå­˜æ”¾å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä»¥åŠå¸¸é‡ï¼ˆå­—ç¬¦ä¸²å¸¸é‡ã€å…¨å±€å¸¸é‡ï¼‰ï¼Œè¯¥åŒºåŸŸçš„æ•°æ®åœ¨ç¨‹åºç»“æŸåç”±æ“ä½œç³»ç»Ÿé‡Šæ”¾</p><h3 id="ç¨‹åºè¿è¡Œå">1.2 ç¨‹åºè¿è¡Œå</h3><p>æ ˆåŒºï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼ˆå½¢å‚ï¼‰ï¼Œå±€éƒ¨å˜é‡ç­‰</p><p>ä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <br> <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <span class="hljs-function"><span class="hljs-type">int</span>* <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-type">int</span> a = <span class="hljs-number">20</span>;<br>     <span class="hljs-keyword">return</span> &amp;a;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-type">int</span>* p = <span class="hljs-built_in">func</span>();<br>     cout &lt;&lt; *p &lt;&lt; endl; <span class="hljs-comment">//ç¬¬ä¸€æ¬¡å¯ä»¥æ‰“å°æ­£ç¡®çš„æ•°å­—ï¼Œæ˜¯å› ä¸ºç¼–è¯‘å™¨åšäº†ä¿ç•™</span><br>     cout &lt;&lt; *p &lt;&lt; endl; <span class="hljs-comment">//ç¬¬äºŒæ¬¡è¿™ä¸ªæ•°æ®å°±ä¸å†ä¿ç•™äº†</span><br> <br> &#125;<br></code></pre></td></tr></table></figure><p>å †åŒºï¼šç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸æ˜¯æ”¾ï¼Œç¨‹åºç»“æŸæ—¶ç”±æ“ä½œç³»ç»Ÿå›æ”¶</p><p>åœ¨cppä¸­ä¸»è¦åˆ©ç”¨newåœ¨å †åŒºå¼€è¾Ÿå†…å­˜</p><h3 id="newå…³é”®å­—">1.3 newå…³é”®å­—</h3><p>å †åŒºå¼€è¾Ÿçš„æ•°æ®ï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨åˆ é™¤ï¼Œåˆ©ç”¨æ“ä½œç¬¦delete</p><p>åˆ©ç”¨newåˆ›å»ºçš„æ•°æ®ï¼Œä¼šè¿”å›æ•°æ®å¯¹åº”çš„ç±»å‹çš„æŒ‡é’ˆ</p><p>åˆ©ç”¨newåœ¨å †åŒºåˆ›å»ºæ•°ç»„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br> <span class="hljs-function"><span class="hljs-type">int</span>* <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-type">int</span> *p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>);<br>     <span class="hljs-keyword">return</span> p;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-type">int</span>* p = <span class="hljs-built_in">func</span>();<br>     cout &lt;&lt; *p &lt;&lt; endl;<br>     cout &lt;&lt; *p &lt;&lt; endl;<br>     cout &lt;&lt; *p &lt;&lt; endl;<br>     <span class="hljs-keyword">delete</span> p;<br> &#125;<br> <br> <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-type">int</span> * arr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">10</span>];<br>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>     &#123;<br>         arr[i] = i + <span class="hljs-number">100</span>;<br>     &#125;<br>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>     &#123;<br>         cout &lt;&lt; arr[i] &lt;&lt; endl;<br>     &#125;<br>     <span class="hljs-keyword">delete</span>[] arr;<br> &#125;<br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     <span class="hljs-built_in">test01</span>();<br>     <span class="hljs-built_in">test02</span>();<br> &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. ç»“æ„ä½“</title>
    <link href="/2024/11/27/cpp/5-%E7%BB%93%E6%9E%84%E4%BD%93/"/>
    <url>/2024/11/27/cpp/5-%E7%BB%93%E6%9E%84%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<h3 id="å®šä¹‰">5.1 å®šä¹‰</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span><br> &#123;<br>     string name;<br>     <span class="hljs-type">int</span> age;<br>     <span class="hljs-type">int</span> score;<br> &#125;s3;<br> <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"> </span>&#123;<br>     student s1;<br>     student s2 = &#123;<span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-number">19</span>, <span class="hljs-number">80</span>&#125;;<br> &#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“æ„ä½“æ•°ç»„">5.2 ç»“æ„ä½“æ•°ç»„</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> ç»“æ„ä½“å æ•°ç»„å[å…ƒç´ ä¸ªæ•°] = &#123;&#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;&#125;;<br></code></pre></td></tr></table></figure><h3 id="ç»“æ„ä½“æŒ‡é’ˆ">5.3 ç»“æ„ä½“æŒ‡é’ˆ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">student s = &#123; <span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-number">19</span>, <span class="hljs-number">80</span> &#125;;<br>student* p = &amp;s;<br>cout &lt;&lt; p-&gt;age &lt;&lt; endl;<br>cout &lt;&lt; p-&gt;name &lt;&lt; endl;<br>cout &lt;&lt; p-&gt;score &lt;&lt; endl;<br></code></pre></td></tr></table></figure><h3 id="ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“">5.4 ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">teacher</span><br> &#123;<br>     <span class="hljs-type">int</span> id;<br>     string name;<br>     <span class="hljs-type">int</span> age;<br>     <span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span> stu;<br> &#125;<br></code></pre></td></tr></table></figure><h3 id="ç»“æ„ä½“åšå‡½æ•°å‚æ•°">5.5 ç»“æ„ä½“åšå‡½æ•°å‚æ•°</h3><h3 id="const">5.6 const</h3><p>consté˜²æ­¢è¯¯æ“ä½œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">printStu</span><span class="hljs-params">(<span class="hljs-type">const</span> student *s)</span></span><br><span class="hljs-function"> </span>&#123;<br>     cout&lt;&lt;s-&gt;name&lt;&lt;endl;<br> &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. æŒ‡é’ˆ</title>
    <link href="/2024/11/27/cpp/4-%E6%8C%87%E9%92%88/"/>
    <url>/2024/11/27/cpp/4-%E6%8C%87%E9%92%88/</url>
    
    <content type="html"><![CDATA[<h3 id="ç©ºæŒ‡é’ˆ">4.1 ç©ºæŒ‡é’ˆ</h3><p>åˆå§‹åŒ– int *p = NULL; ç©ºæŒ‡é’ˆä¸å¯è®¿é—®</p><h3 id="é‡æŒ‡é’ˆ">4.2 é‡æŒ‡é’ˆ</h3><p>æŒ‡å‘éæ³•çš„å†…å­˜ç©ºé—´</p><h3 id="constä¿®é¥°æŒ‡é’ˆ">4.3 constä¿®é¥°æŒ‡é’ˆ</h3><p>å¸¸é‡æŒ‡é’ˆï¼šæŒ‡é’ˆçš„æŒ‡å‘å¯ä»¥æ›´æ”¹ï¼Œä½†æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸èƒ½æ›´æ”¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">const</span> <span class="hljs-type">int</span>* p = &amp;a<br></code></pre></td></tr></table></figure><p>æŒ‡é’ˆå¸¸é‡ï¼šæŒ‡é’ˆæŒ‡å‘çš„å€¼å¯ä»¥æ›´æ”¹ï¼Œä½†æ˜¯æŒ‡é’ˆçš„æŒ‡å‘ä¸èƒ½æ›´æ”¹ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span>* <span class="hljs-type">const</span> p = &amp;a<br></code></pre></td></tr></table></figure><p>æŒ‡é’ˆçš„æŒ‡å‘å’ŒæŒ‡å‘çš„å€¼éƒ½ä¸èƒ½ä¿®æ”¹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">const</span> <span class="hljs-type">int</span>* <span class="hljs-type">const</span> p = &amp;a;<br></code></pre></td></tr></table></figure><h3 id="æŒ‡é’ˆå’Œæ•°ç»„">4.4 æŒ‡é’ˆå’Œæ•°ç»„</h3><p>åˆ©ç”¨æŒ‡é’ˆè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ </p><h3 id="æŒ‡é’ˆå’Œå‡½æ•°">4.5 æŒ‡é’ˆå’Œå‡½æ•°</h3><p>åˆ©ç”¨æŒ‡é’ˆåšå‡½æ•°å‚æ•°ï¼Œå¯ä»¥ä¿®æ”¹å®å‚çš„å€¼</p><h3 id="æŒ‡é’ˆæ•°ç»„å‡½æ•°">4.6 æŒ‡é’ˆã€æ•°ç»„ã€å‡½æ•°</h3>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. æ•°ç»„</title>
    <link href="/2024/11/27/cpp/3-%E6%95%B0%E7%BB%84/"/>
    <url>/2024/11/27/cpp/3-%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ç»´æ•°ç»„">3.1 ä¸€ç»´æ•°ç»„</h3><ul><li>int score[10];</li><li>int score[10] = {10,11};</li><li>int score[] = {10, 11};</li><li>æ ¹æ®æ•°ç»„åå¯ä»¥è·å–æ•°ç»„çš„é•¿åº¦å’Œé¦–åœ°å€</li></ul>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. è¿ç®—ç¬¦</title>
    <link href="/2024/11/27/cpp/2-%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <url>/2024/11/27/cpp/2-%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<h3 id="é€»è¾‘è¿ç®—ç¬¦">2.1 é€»è¾‘è¿ç®—ç¬¦</h3><p>ï¼é &amp;&amp; ä¸ || æˆ–</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. æ•°æ®ç±»å‹</title>
    <link href="/2024/11/27/cpp/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/2024/11/27/cpp/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h3 id="sizeofå…³é”®å­—">1.1 sizeofå…³é”®å­—</h3><p>sizeofï¼ˆæ•°æ®ç±»å‹/å˜é‡ï¼‰</p><h3 id="å®å‹æµ®ç‚¹å‹">1.2 å®å‹ï¼ˆæµ®ç‚¹å‹ï¼‰</h3><p>å•ç²¾åº¦ float 4å­—èŠ‚ 7ä½æœ‰æ•ˆæ•°å­—åŒç²¾åº¦ double 8å­—èŠ‚15-16ä½æœ‰æ•ˆæ•°å­—float a = 3.14f;double b = 3.14;ç§‘å­¦è®¡æ•°æ³•float f1 =3e2;</p><h3 id="å­—ç¬¦å‹">1.3 å­—ç¬¦å‹</h3><p>char ch = 'a';</p><h3 id="å­—ç¬¦ä¸²å‹">1.4 å­—ç¬¦ä¸²å‹</h3><p>Cé£æ ¼å­—ç¬¦ä¸² char str1[] = "hello world";string str2 = "helloworld";è¦åŒ…å«å¤´æ–‡ä»¶ #include &lt; string &gt;</p><h3 id="æ•°æ®çš„è¾“å…¥">1.5 æ•°æ®çš„è¾“å…¥</h3><p>cin&gt;&gt;a;</p>]]></content>
    
    
    <categories>
      
      <category>c++</category>
      
      <category>c++ é»‘é©¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>c++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>29. æ•°æ®åº“ç»´æŠ¤</title>
    <link href="/2024/11/27/mysql_bzbh/29-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4/"/>
    <url>/2024/11/27/mysql_bzbh/29-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤‡ä»½æ•°æ®">1. å¤‡ä»½æ•°æ®</h1><ol type="1"><li>åƒæ‰€æœ‰æ•°æ®ä¸€æ ·ï¼ŒMySQLçš„æ•°æ®ä¹Ÿå¿…é¡»ç»å¸¸å¤‡ä»½ã€‚</li><li>é¦–å…ˆåˆ·æ–°æœªå†™æ•°æ®ä¸ºäº†ä¿è¯æ‰€æœ‰æ•°æ®è¢«å†™åˆ°ç£ç›˜ï¼ˆåŒ…æ‹¬ç´¢å¼•æ•°æ®ï¼‰ï¼Œå¯èƒ½éœ€è¦åœ¨è¿›è¡Œå¤‡ä»½å‰ä½¿ç”¨FLUSHTABLESè¯­å¥ã€‚</li></ol><h1 id="è¿›è¡Œæ•°æ®åº“ç»´æŠ¤">2. è¿›è¡Œæ•°æ®åº“ç»´æŠ¤</h1><ol type="1"><li><p>ANALYZE TABLEï¼Œç”¨æ¥æ£€æŸ¥è¡¨é”®æ˜¯å¦æ­£ç¡®</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/29-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4/1709369395637-7d7f6b0b-3590-479f-bafb-fb4ae7b7b61d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>CHECK TABLEç”¨æ¥é’ˆå¯¹è®¸å¤šé—®é¢˜å¯¹è¡¨è¿›è¡Œæ£€æŸ¥ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/29-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4/1709369419643-b63f9819-5a40-4802-b982-41cb51fb536b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>CHECK TABLEæ”¯æŒä¸€ç³»åˆ—çš„ç”¨äºMyISAMè¡¨çš„æ–¹å¼</p></li><li><ol type="1"><li>CHANGEDæ£€æŸ¥è‡ªæœ€åä¸€æ¬¡æ£€æŸ¥ä»¥æ¥æ”¹åŠ¨è¿‡çš„è¡¨ã€‚EXTENDEDæ‰§è¡Œæœ€å½»åº•çš„æ£€æŸ¥ï¼ŒFASTåªæ£€æŸ¥æœªæ­£å¸¸å…³é—­çš„è¡¨ï¼ŒMEDIUMæ£€æŸ¥æ‰€æœ‰è¢«åˆ é™¤çš„é“¾æ¥å¹¶è¿›è¡Œé”®æ£€éªŒï¼ŒQUICKåªè¿›è¡Œå¿«é€Ÿæ‰«æ</li><li>CHECK TABLEå‘ç°å’Œä¿®å¤é—®é¢˜</li><li><figure><img src="/2024/11/27/mysql_bzbh/29-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%B4%E6%8A%A4/1709369494285-5f41c577-6e61-4b3a-a961-ad4b3d928308.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>å¦‚æœMyISAMè¡¨è®¿é—®äº§ç”Ÿä¸æ­£ç¡®å’Œä¸ä¸€è‡´çš„ç»“æœï¼Œå¯èƒ½éœ€è¦ç”¨REPAIRTABLEæ¥ä¿®å¤ç›¸åº”çš„è¡¨ã€‚</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>28. å®‰å…¨ç®¡ç†</title>
    <link href="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/"/>
    <url>/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="è®¿é—®æ§åˆ¶">1. è®¿é—®æ§åˆ¶</h1><ol type="1"><li>MySQLæœåŠ¡å™¨çš„å®‰å…¨åŸºç¡€æ˜¯ï¼šç”¨æˆ·åº”è¯¥å¯¹ä»–ä»¬éœ€è¦çš„æ•°æ®å…·æœ‰é€‚å½“çš„è®¿é—®æƒï¼Œæ—¢ä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘</li></ol><h1 id="ç®¡ç†ç”¨æˆ·">2. ç®¡ç†ç”¨æˆ·</h1><ol type="1"><li><p>MySQLç”¨æˆ·è´¦å·å’Œä¿¡æ¯å­˜å‚¨åœ¨åä¸ºmysqlçš„MySQLæ•°æ®åº“ä¸­</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709368759539-0363e959-df8c-431d-b2e1-3f18f38e2ccc.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709368763735-807d0bbe-f577-48bf-9362-6ef9226da145.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>mysqlæ•°æ®åº“æœ‰ä¸€ä¸ªåä¸ºuserçš„è¡¨ï¼Œå®ƒåŒ…å«æ‰€æœ‰ç”¨æˆ·è´¦å·ã€‚userè¡¨æœ‰ä¸€ä¸ªåä¸ºuserçš„åˆ—ï¼Œå®ƒå­˜å‚¨ç”¨æˆ·ç™»å½•åã€‚æ–°å®‰è£…çš„æœåŠ¡å™¨å¯èƒ½åªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼ˆå¦‚è¿™é‡Œæ‰€ç¤ºï¼‰ï¼Œè¿‡å»å»ºç«‹çš„æœåŠ¡å™¨å¯èƒ½å…·æœ‰å¾ˆå¤šç”¨æˆ·ã€‚</li></ol></li></ol><h2 id="åˆ›å»ºç”¨æˆ·è´¦å·">2.1. åˆ›å»ºç”¨æˆ·è´¦å·</h2><ol type="1"><li><p>ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·è´¦å·ï¼Œä½¿ç”¨CREATE USERè¯­å¥ï¼Œ</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709368819875-55c5b38b-b330-4912-b818-01995d623777.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>æŒ‡å®šæ•£åˆ—å£ä»¤IDENTIFIEDBYæŒ‡å®šçš„å£ä»¤ä¸ºçº¯æ–‡æœ¬ï¼ŒMySQLå°†åœ¨ä¿å­˜åˆ°userè¡¨ä¹‹å‰å¯¹å…¶è¿›è¡ŒåŠ å¯†ã€‚ä¸ºäº†ä½œä¸ºæ•£åˆ—å€¼æŒ‡å®šå£ä»¤ï¼Œä½¿ç”¨IDENTIFIEDBY PASSWORDã€‚</p></li><li><p>ä¸ºé‡æ–°å‘½åä¸€ä¸ªç”¨æˆ·è´¦å·ï¼Œä½¿ç”¨RENAME USERè¯­å¥ï¼Œ</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709368886010-ccadc490-465e-45db-884a-f9df84356c55.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="åˆ é™¤ç”¨æˆ·è´¦å·">2.2. åˆ é™¤ç”¨æˆ·è´¦å·</h2><ol type="1"><li><p>ä¸ºäº†åˆ é™¤ä¸€ä¸ªç”¨æˆ·è´¦å·ï¼ˆä»¥åŠç›¸å…³çš„æƒé™ï¼‰ï¼Œä½¿ç”¨DROPUSERè¯­å¥ï¼Œ</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709368911130-add4e70d-86c9-4267-8c93-5fe422fe70ca.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="è®¾ç½®è®¿é—®æƒé™">2.3. è®¾ç½®è®¿é—®æƒé™</h2><ol type="1"><li><p>ä¸ºçœ‹åˆ°èµ‹äºˆç”¨æˆ·è´¦å·çš„æƒé™ï¼Œä½¿ç”¨SHOW GRANTS FORï¼Œ</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709368951673-6d6bd6a1-7f75-41ea-b1f9-40d9a60e6f4f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¾“å‡ºç»“æœæ˜¾ç¤ºç”¨æˆ·bfortaæœ‰ä¸€ä¸ªæƒé™USAGE ON<em>.</em>ã€‚USAGEè¡¨ç¤ºæ ¹æœ¬æ²¡æœ‰æƒé™</li></ol></li><li><p>GRANTçš„ç”¨æ³•</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369071029-a85f4403-e3be-4716-b6ba-ae2d26a6d597.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ­¤GRANTå…è®¸ç”¨æˆ·åœ¨crashcourse.*ï¼ˆcrashcourseæ•°æ®åº“çš„æ‰€æœ‰è¡¨ï¼‰ä¸Šä½¿ç”¨SELECT</li><li>å…·æœ‰åªè¯»è®¿é—®æƒé™</li></ol></li><li><p>SHOW GRANTSåæ˜ è¿™ä¸ªæ›´æ”¹</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369107145-014cfc71-939c-4e37-bb78-dcf17dce4052.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>GRANTçš„åæ“ä½œä¸ºREVOKEï¼Œç”¨å®ƒæ¥æ’¤é”€ç‰¹å®šçš„æƒé™</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369163060-2bcd5edd-662d-4b56-81fd-fd84a49c2240.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>GRANTå’ŒREVOKEå¯åœ¨å‡ ä¸ªå±‚æ¬¡ä¸Šæ§åˆ¶è®¿é—®æƒé™ï¼š</p></li><li><ol type="1"><li>æ•´ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨GRANT ALLå’ŒREVOKE ALL</li><li>æ•´ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨ON database.*ï¼›</li><li>ç‰¹å®šçš„è¡¨ï¼Œä½¿ç”¨ON database.table</li><li>ç‰¹å®šçš„åˆ—</li><li>ç‰¹å®šçš„å­˜å‚¨è¿‡ç¨‹ã€‚</li></ol></li><li><p>å¯ä»¥æˆäºˆæˆ–æ’¤é”€çš„æ¯ä¸ªæƒé™</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369223957-b455e10e-73d0-4893-b696-a03b8c4cf273.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369232675-b7b84b95-396e-4dd0-99d2-ed7df9448db6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>ç®€åŒ–å¤šæ¬¡æˆæƒå¯é€šè¿‡åˆ—å‡ºå„æƒé™å¹¶ç”¨é€—å·åˆ†éš”ï¼Œå°†å¤šæ¡GRANTè¯­å¥ä¸²åœ¨ä¸€èµ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369253009-3d5df0af-32f8-48b7-9a96-3048ada58329.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="æ›´æ”¹å£ä»¤">2.4. æ›´æ”¹å£ä»¤</h2><ol type="1"><li><p>ä¸ºäº†æ›´æ”¹ç”¨æˆ·å£ä»¤ï¼Œå¯ä½¿ç”¨SET PASSWORDè¯­å¥ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369277395-b4212fe4-09f0-41d7-8b5f-a515d55fbfa9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>SET PASSWORDè¿˜å¯ä»¥ç”¨æ¥è®¾ç½®ä½ è‡ªå·±çš„å£ä»¤ï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/28-%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86/1709369291166-334ecc1e-b905-42d5-8c2c-4d5d4f220248.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>27. å…¨çƒåŒ–å’Œæœ¬åœ°åŒ–</title>
    <link href="/2024/11/27/mysql_bzbh/27-%E5%85%A8%E7%90%83%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96/"/>
    <url>/2024/11/27/mysql_bzbh/27-%E5%85%A8%E7%90%83%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="å…¨çƒåŒ–å’Œæœ¬åœ°åŒ–">1. å…¨çƒåŒ–å’Œæœ¬åœ°åŒ–</h1><h1 id="ä½¿ç”¨å­—ç¬¦é›†å’Œæ ¡å¯¹é¡ºåº">2. ä½¿ç”¨å­—ç¬¦é›†å’Œæ ¡å¯¹é¡ºåº</h1><ol type="1"><li><p>MySQLæ”¯æŒä¼—å¤šçš„å­—ç¬¦é›†ã€‚ä¸ºæŸ¥çœ‹æ‰€æ”¯æŒçš„å­—ç¬¦é›†å®Œæ•´åˆ—è¡¨</p></li><li><ol type="1"><li>show character set;</li><li>è¿™æ¡è¯­å¥æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„å­—ç¬¦é›†ä»¥åŠæ¯ä¸ªå­—ç¬¦é›†çš„æè¿°å’Œé»˜è®¤æ ¡å¯¹ã€‚</li></ol></li><li><p>ä¸ºäº†æŸ¥çœ‹æ‰€æ”¯æŒæ ¡å¯¹çš„å®Œæ•´åˆ—è¡¨ï¼Œä½¿ç”¨ä»¥ä¸‹è¯­å¥</p></li><li><ol type="1"><li>show collation;</li></ol></li><li><p>é€šå¸¸ç³»ç»Ÿç®¡ç†åœ¨å®‰è£…æ—¶å®šä¹‰ä¸€ä¸ªé»˜è®¤çš„å­—ç¬¦é›†å’Œæ ¡å¯¹</p></li><li><p>åœ¨åˆ›å»ºæ•°æ®åº“æ—¶ï¼ŒæŒ‡å®šé»˜è®¤çš„å­—ç¬¦é›†å’Œæ ¡å¯¹</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/27-%E5%85%A8%E7%90%83%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96/1709368479298-12661caf-6dcc-4546-b98d-d3398f7b15cd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>ä¸ºäº†ç»™è¡¨æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹ï¼Œå¯ä½¿ç”¨å¸¦å­å¥çš„CREATE TABLE</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/27-%E5%85%A8%E7%90%83%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96/1709368510667-d84d6bc4-d4e1-4371-9acd-d5783171119e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ­¤è¯­å¥åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤åˆ—çš„è¡¨ï¼Œå¹¶ä¸”æŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†å’Œä¸€ä¸ªæ ¡å¯¹é¡ºåºã€‚</li></ol></li><li><p>é™¤äº†èƒ½æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡å¯¹çš„è¡¨èŒƒå›´å¤–ï¼ŒMySQLè¿˜å…è®¸å¯¹æ¯ä¸ªåˆ—è®¾ç½®å®ƒä»¬</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/27-%E5%85%A8%E7%90%83%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96/1709368560371-92392e73-6c7c-4c1f-a10d-b7314cbb1b22.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>æ ¡å¯¹åœ¨å¯¹ç”¨ORDER BYå­å¥æ£€ç´¢å‡ºæ¥çš„æ•°æ®æ’åºæ—¶èµ·é‡è¦çš„ä½œç”¨ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/27-%E5%85%A8%E7%90%83%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96/1709368620266-43e905ca-7a3e-48ce-87de-53a7398708a1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>26. ç®¡ç†äº‹åŠ¡å¤„ç†</title>
    <link href="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/"/>
    <url>/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="äº‹åŠ¡å¤„ç†">1. äº‹åŠ¡å¤„ç†</h1><ol type="1"><li>äº‹åŠ¡å¤„ç†ï¼ˆtransactionprocessingï¼‰å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œå®ƒä¿è¯æˆæ‰¹çš„MySQLæ“ä½œè¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œã€‚</li></ol><h1 id="æ§åˆ¶äº‹åŠ¡å¤„ç†">2. æ§åˆ¶äº‹åŠ¡å¤„ç†</h1><ol type="1"><li><p>MySQLä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥æ ‡è¯†äº‹åŠ¡çš„å¼€å§‹ï¼š</p></li><li><ol type="1"><li>start transaction</li></ol></li></ol><h2 id="ä½¿ç”¨rollback">2.1. ä½¿ç”¨ROLLBACK</h2><ol type="1"><li><p>MySQLçš„ROLLBACKå‘½ä»¤ç”¨æ¥å›é€€ï¼ˆæ’¤é”€ï¼‰MySQLè¯­å¥ï¼Œè¯·çœ‹ä¸‹é¢çš„è¯­å¥</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/1709368083622-e8184b8d-f721-443f-af51-0c884a3ca96b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/1709368088882-75d0850e-ef03-44ad-b8ad-7c9f46ca8a90.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¿™æ—¶ç”¨ä¸€æ¡ROLLBACKè¯­å¥å›é€€START TRANSACTIONä¹‹åçš„æ‰€æœ‰è¯­å¥</li></ol></li><li><p>ROLLBACKåªèƒ½åœ¨ä¸€ä¸ªäº‹åŠ¡å¤„ç†å†…ä½¿ç”¨ï¼ˆåœ¨æ‰§è¡Œä¸€æ¡STARTTRANSACTIONå‘½ä»¤ä¹‹åï¼‰</p></li></ol><h2 id="ä½¿ç”¨commit">2.2. ä½¿ç”¨COMMIT</h2><ol type="1"><li><p>åœ¨äº‹åŠ¡å¤„ç†å—ä¸­ï¼Œæäº¤ä¸ä¼šéšå«åœ°è¿›è¡Œã€‚ä¸ºè¿›è¡Œæ˜ç¡®çš„æäº¤ï¼Œä½¿ç”¨COMMITè¯­å¥</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/1709368156641-2652530b-0619-41d2-b8c3-ac6152016037.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»ç³»ç»Ÿä¸­å®Œå…¨åˆ é™¤è®¢å•20010ã€‚å› ä¸ºæ¶‰åŠæ›´æ–°ä¸¤ä¸ªæ•°æ®åº“è¡¨orderså’ŒorderItemsï¼Œæ‰€ä»¥ä½¿ç”¨äº‹åŠ¡å¤„ç†å—æ¥ä¿è¯è®¢å•ä¸è¢«éƒ¨åˆ†åˆ é™¤ã€‚æœ€åçš„COMMITè¯­å¥ä»…åœ¨ä¸å‡ºé”™æ—¶å†™å‡ºæ›´æ”¹ã€‚å¦‚æœç¬¬ä¸€æ¡DELETEèµ·ä½œç”¨ï¼Œä½†ç¬¬äºŒæ¡å¤±è´¥ï¼Œåˆ™DELETEä¸ä¼šæäº¤ï¼ˆå®é™…ä¸Šï¼Œå®ƒæ˜¯è¢«è‡ªåŠ¨æ’¤é”€çš„</li></ol></li><li><p>éšå«äº‹åŠ¡å…³é—­å½“COMMITæˆ–ROLLBACKè¯­å¥æ‰§è¡Œåï¼Œäº‹åŠ¡ä¼šè‡ªåŠ¨å…³é—­ï¼ˆå°†æ¥çš„æ›´æ”¹ä¼šéšå«æäº¤ï¼‰ã€‚</p></li></ol><h2 id="ä½¿ç”¨ä¿ç•™ç‚¹">2.3. ä½¿ç”¨ä¿ç•™ç‚¹</h2><ol type="1"><li><p>ä¸ºäº†æ”¯æŒå›é€€éƒ¨åˆ†äº‹åŠ¡å¤„ç†ï¼Œå¿…é¡»èƒ½åœ¨äº‹åŠ¡å¤„ç†å—ä¸­åˆé€‚çš„ä½ç½®æ”¾ç½®å ä½ç¬¦ã€‚è¿™æ ·ï¼Œå¦‚æœéœ€è¦å›é€€ï¼Œå¯ä»¥å›é€€åˆ°æŸä¸ªå ä½ç¬¦ã€‚</p></li><li><p>è¿™äº›å ä½ç¬¦ç§°ä¸ºä¿ç•™ç‚¹ã€‚ä¸ºäº†åˆ›å»ºå ä½ç¬¦ï¼Œå¯å¦‚ä¸‹ä½¿ç”¨SAVEPOINT</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/1709368244176-1ee7cd77-dfa7-47ba-99cb-c909f8acc83f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>æ¯ä¸ªä¿ç•™ç‚¹éƒ½å–æ ‡è¯†å®ƒçš„å”¯ä¸€åå­—ï¼Œä»¥ä¾¿åœ¨å›é€€æ—¶ï¼ŒMySQLçŸ¥é“è¦å›é€€åˆ°ä½•å¤„ã€‚ä¸ºäº†å›é€€åˆ°æœ¬ä¾‹ç»™å‡ºçš„ä¿ç•™ç‚¹ï¼Œå¯å¦‚ä¸‹è¿›è¡Œï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/1709368270185-7ee690a7-d209-492d-818d-02706c899253.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>ä¿ç•™ç‚¹è¶Šå¤šè¶Šå¥½å¯ä»¥åœ¨MySQLä»£ç ä¸­è®¾ç½®ä»»æ„å¤šçš„ä¿ç•™ç‚¹ï¼Œè¶Šå¤šè¶Šå¥½ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä¿ç•™ç‚¹è¶Šå¤šï¼Œä½ å°±è¶Šèƒ½æŒ‰è‡ªå·±çš„æ„æ„¿çµæ´»åœ°è¿›è¡Œå›é€€</p></li><li><p>é‡Šæ”¾ä¿ç•™ç‚¹ä¿ç•™ç‚¹åœ¨äº‹åŠ¡å¤„ç†å®Œæˆï¼ˆæ‰§è¡Œä¸€æ¡ROLLBACKæˆ–COMMITï¼‰åè‡ªåŠ¨é‡Šæ”¾ã€‚</p></li></ol><h2 id="æ›´æ”¹é»˜è®¤çš„æäº¤è¡Œä¸º">2.4. æ›´æ”¹é»˜è®¤çš„æäº¤è¡Œä¸º</h2><ol type="1"><li><p>ä¸ºæŒ‡ç¤ºMySQLä¸è‡ªåŠ¨æäº¤æ›´æ”¹ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹è¯­å¥</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/26-%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/1709368323693-7980dbd9-1894-4f8d-a65d-31b3fe30fdfb.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>25. ä½¿ç”¨è§¦å‘å™¨</title>
    <link href="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/"/>
    <url>/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="è§¦å‘å™¨">1. è§¦å‘å™¨</h1><ol type="1"><li><p>è§¦å‘å™¨æ˜¯MySQLå“åº”ä»¥ä¸‹ä»»æ„è¯­å¥è€Œè‡ªåŠ¨æ‰§è¡Œçš„ä¸€æ¡MySQLè¯­å¥</p></li><li><ol type="1"><li>delete;</li><li>insert;</li><li>upate</li></ol></li></ol><h1 id="åˆ›å»ºè§¦å‘å™¨">2. åˆ›å»ºè§¦å‘å™¨</h1><ol type="1"><li><p>åœ¨åˆ›å»ºè§¦å‘å™¨æ—¶ï¼Œéœ€è¦ç»™å‡º4æ¡ä¿¡æ¯ï¼š</p></li><li><ol type="1"><li>å”¯ä¸€çš„è§¦å‘å™¨å</li><li>è§¦å‘å™¨å…³è”çš„è¡¨</li><li>è§¦å‘å™¨åº”è¯¥å“åº”çš„æ´»åŠ¨ï¼ˆDELETEã€INSERTæˆ–UPDATEï¼‰ï¼›</li><li>è§¦å‘å™¨ä½•æ—¶æ‰§è¡Œï¼ˆå¤„ç†ä¹‹å‰æˆ–ä¹‹åï¼‰</li></ol></li><li><p>ä¿æŒæ¯ä¸ªæ•°æ®åº“çš„è§¦å‘å™¨åå”¯ä¸€</p></li><li><p>è§¦å‘å™¨ç”¨CREATE TRIGGERè¯­å¥åˆ›å»º</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/1709365540108-a2738124-afcc-40d2-b17e-ad5bb339d7e4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>CREATETRIGGERç”¨æ¥åˆ›å»ºåä¸ºnewproductçš„æ–°è§¦å‘å™¨ã€‚è§¦å‘å™¨å¯åœ¨ä¸€ä¸ªæ“ä½œå‘ç”Ÿä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œï¼Œè¿™é‡Œç»™å‡ºäº†AFTERINSERTï¼Œæ‰€ä»¥æ­¤è§¦å‘å™¨å°†åœ¨INSERTè¯­å¥æˆåŠŸæ‰§è¡Œåæ‰§è¡Œã€‚è¿™ä¸ªè§¦å‘å™¨è¿˜æŒ‡å®šFOREACH ROWï¼Œå› æ­¤ä»£ç å¯¹æ¯ä¸ªæ’å…¥è¡Œæ‰§è¡Œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–‡æœ¬Productaddedå°†å¯¹æ¯ä¸ªæ’å…¥çš„è¡Œæ˜¾ç¤ºä¸€æ¬¡ã€‚</li><li>ä¸ºäº†æµ‹è¯•è¿™ä¸ªè§¦å‘å™¨ï¼Œä½¿ç”¨INSERTè¯­å¥æ·»åŠ ä¸€è¡Œæˆ–å¤šè¡Œåˆ°productsä¸­ï¼Œä½ å°†çœ‹åˆ°å¯¹æ¯ä¸ªæˆåŠŸçš„æ’å…¥ï¼Œæ˜¾ç¤ºProductaddedæ¶ˆæ¯ã€‚</li><li>ä»…æ”¯æŒè¡¨åªæœ‰è¡¨æ‰æ”¯æŒè§¦å‘å™¨ï¼Œè§†å›¾ä¸æ”¯æŒï¼ˆä¸´æ—¶è¡¨ä¹Ÿä¸æ”¯æŒï¼‰</li></ol></li><li><p>è§¦å‘å™¨æŒ‰æ¯ä¸ªè¡¨æ¯ä¸ªäº‹ä»¶æ¯æ¬¡åœ°å®šä¹‰ï¼Œæ¯ä¸ªè¡¨æ¯ä¸ªäº‹ä»¶æ¯æ¬¡åªå…è®¸ä¸€ä¸ªè§¦å‘å™¨ã€‚å› æ­¤ï¼Œæ¯ä¸ªè¡¨æœ€å¤šæ”¯æŒ6ä¸ªè§¦å‘å™¨ï¼ˆæ¯æ¡INSERTã€UPDATEå’ŒDELETEçš„ä¹‹å‰å’Œä¹‹åï¼‰ã€‚</p></li><li><p>å•ä¸€è§¦å‘å™¨ä¸èƒ½ä¸å¤šä¸ªäº‹ä»¶æˆ–å¤šä¸ªè¡¨å…³è”ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯¹INSERTå’ŒUPDATEæ“ä½œæ‰§è¡Œçš„è§¦å‘å™¨ï¼Œåˆ™åº”è¯¥å®šä¹‰ä¸¤ä¸ªè§¦å‘å™¨</p></li></ol><h1 id="åˆ é™¤è§¦å‘å™¨">3. åˆ é™¤è§¦å‘å™¨</h1><p>ä¸ºäº†åˆ é™¤ä¸€ä¸ªè§¦å‘å™¨ï¼Œå¯ä½¿ç”¨DROP TRIGGERè¯­å¥ï¼Œ</p><figure><img src="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/1709365945269-62092e1b-58dd-4ca6-b17d-28d8bc7a81f6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>è§¦å‘å™¨ä¸èƒ½æ›´æ–°æˆ–è¦†ç›–ã€‚ä¸ºäº†ä¿®æ”¹ä¸€ä¸ªè§¦å‘å™¨ï¼Œå¿…é¡»å…ˆåˆ é™¤å®ƒï¼Œç„¶åå†é‡æ–°åˆ›å»ºã€‚</p><h1 id="ä½¿ç”¨è§¦å‘å™¨">4. ä½¿ç”¨è§¦å‘å™¨</h1><h2 id="insertè§¦å‘å™¨">4.1. INSERTè§¦å‘å™¨</h2><ol type="1"><li><p>INSERTè§¦å‘å™¨åœ¨INSERTè¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œ</p></li><li><ol type="1"><li>åœ¨INSERTè§¦å‘å™¨ä»£ç å†…ï¼Œå¯å¼•ç”¨ä¸€ä¸ªåä¸ºNEWçš„è™šæ‹Ÿè¡¨ï¼Œè®¿é—®è¢«æ’å…¥çš„è¡Œ</li><li>åœ¨BEFOREINSERTè§¦å‘å™¨ä¸­ï¼ŒNEWä¸­çš„å€¼ä¹Ÿå¯ä»¥è¢«æ›´æ–°ï¼ˆå…è®¸æ›´æ”¹è¢«æ’å…¥çš„å€¼ï¼‰</li><li>å¯¹äºAUTO_INCREMENTåˆ—ï¼ŒNEWåœ¨INSERTæ‰§è¡Œä¹‹å‰åŒ…å«0ï¼Œåœ¨INSERTæ‰§è¡Œä¹‹ååŒ…å«æ–°çš„è‡ªåŠ¨ç”Ÿæˆå€¼</li></ol></li><li><figure><img src="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/1709366184579-13a3cc00-8ceb-4d63-8749-87687fd2b4e0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/1709366192563-915e992b-27d1-47aa-a9b8-c9b8205b56da.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>BEFOREæˆ–AFTERï¼Ÿé€šå¸¸ï¼Œå°†BEFOREç”¨äºæ•°æ®éªŒè¯å’Œå‡€åŒ–ï¼ˆç›®çš„æ˜¯ä¿è¯æ’å…¥è¡¨ä¸­çš„æ•°æ®ç¡®å®æ˜¯éœ€è¦çš„æ•°æ®ï¼‰ã€‚æœ¬æç¤ºä¹Ÿé€‚ç”¨äºUPDATEè§¦å‘å™¨</p></li></ol><h2 id="deleteè§¦å‘å™¨">4.2. DELETEè§¦å‘å™¨</h2><ol type="1"><li>åœ¨DELETEè§¦å‘å™¨ä»£ç å†…ï¼Œä½ å¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸ºOLDçš„è™šæ‹Ÿè¡¨ï¼Œè®¿é—®è¢«åˆ é™¤çš„è¡Œï¼›</li><li>OLDä¸­çš„å€¼å…¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ–°ã€‚</li><li>ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºä½¿ç”¨OLDä¿å­˜å°†è¦è¢«åˆ é™¤çš„è¡Œåˆ°ä¸€ä¸ªå­˜æ¡£è¡¨ä¸­ï¼š</li><li><figure><img src="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/1709366375640-c2600220-cf05-4ad6-83fa-7747660d8507.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="updateè§¦å‘å™¨">4.3. UPDATEè§¦å‘å™¨</h2><ol type="1"><li>UPDATEè§¦å‘å™¨åœ¨UPDATEè¯­å¥æ‰§è¡Œä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œã€‚éœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ç‚¹ï¼š</li><li>åœ¨UPDATEè§¦å‘å™¨ä»£ç ä¸­ï¼Œä½ å¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸ºOLDçš„è™šæ‹Ÿè¡¨è®¿é—®ä»¥å‰ï¼ˆUPDATEè¯­å¥å‰ï¼‰çš„å€¼ï¼Œå¼•ç”¨ä¸€ä¸ªåä¸ºNEWçš„è™šæ‹Ÿè¡¨è®¿é—®æ–°æ›´æ–°çš„å€¼ï¼›</li><li>åœ¨BEFOREUPDATEè§¦å‘å™¨ä¸­ï¼ŒNEWä¸­çš„å€¼å¯èƒ½ä¹Ÿè¢«æ›´æ–°ï¼ˆå…è®¸æ›´æ”¹å°†è¦ç”¨äºUPDATEè¯­å¥ä¸­çš„å€¼ï¼‰ï¼›</li><li>OLDä¸­çš„å€¼å…¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ–°</li><li><figure><img src="/2024/11/27/mysql_bzbh/25-%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8/1709366489365-4b0e7e36-1679-4357-844d-cb8a8f34ab67.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>24. ä½¿ç”¨æ¸¸æ ‡</title>
    <link href="/2024/11/27/mysql_bzbh/24-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87/"/>
    <url>/2024/11/27/mysql_bzbh/24-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¸¸æ ‡">1. æ¸¸æ ‡</h1><ol type="1"><li>æ¸¸æ ‡ï¼ˆcursorï¼‰æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨MySQLæœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æŸ¥è¯¢ï¼Œå®ƒä¸æ˜¯ä¸€æ¡SELECTè¯­å¥ï¼Œè€Œæ˜¯è¢«è¯¥è¯­å¥æ£€ç´¢å‡ºæ¥çš„ç»“æœé›†ã€‚åœ¨å­˜å‚¨äº†æ¸¸æ ‡ä¹‹åï¼Œåº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®éœ€è¦æ»šåŠ¨æˆ–æµè§ˆå…¶ä¸­çš„æ•°æ®ã€‚</li><li>æ¸¸æ ‡ä¸»è¦ç”¨äºäº¤äº’å¼åº”ç”¨ï¼Œå…¶ä¸­ç”¨æˆ·éœ€è¦æ»šåŠ¨å±å¹•ä¸Šçš„æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæµè§ˆæˆ–åšå‡ºæ›´æ”¹ã€‚</li><li>åªèƒ½ç”¨äºå­˜å‚¨è¿‡ç¨‹ä¸åƒå¤šæ•°DBMSï¼ŒMySQLæ¸¸æ ‡åªèƒ½ç”¨äºå­˜å‚¨è¿‡ç¨‹ï¼ˆå’Œå‡½æ•°ï¼‰</li></ol><h1 id="ä½¿ç”¨æ¸¸æ ‡">2. ä½¿ç”¨æ¸¸æ ‡</h1><h2 id="åˆ›å»ºæ¸¸æ ‡">2.1. åˆ›å»ºæ¸¸æ ‡</h2><ol type="1"><li><p>æ¸¸æ ‡ç”¨DECLAREè¯­å¥åˆ›å»º</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/24-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87/1709363965695-9f327b28-bc0c-40e0-82d8-c153d42037eb.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="æ‰“å¼€å’Œå…³é—­æ¸¸æ ‡">2.2. æ‰“å¼€å’Œå…³é—­æ¸¸æ ‡</h2><ol type="1"><li><p>æ¸¸æ ‡ç”¨OPEN CURSORè¯­å¥æ¥æ‰“å¼€</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/24-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87/1709364749993-a0f28878-4f37-4a61-b61f-b2d58fdcd892.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>æ¸¸æ ‡å¤„ç†å®Œæˆåï¼Œåº”å½“ä½¿ç”¨å¦‚ä¸‹è¯­å¥å…³é—­æ¸¸æ ‡ï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/24-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87/1709364756973-3af4bfd3-213a-48b6-b030-371c2251c0f0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="ä½¿ç”¨æ¸¸æ ‡æ•°æ®">2.3. ä½¿ç”¨æ¸¸æ ‡æ•°æ®</h2><ol type="1"><li>åœ¨ä¸€ä¸ªæ¸¸æ ‡è¢«æ‰“å¼€åï¼Œå¯ä»¥ä½¿ç”¨FETCHè¯­å¥åˆ†åˆ«è®¿é—®å®ƒçš„æ¯ä¸€è¡Œã€‚</li><li></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>23. ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹</title>
    <link href="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/"/>
    <url>/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å­˜å‚¨è¿‡ç¨‹">1. å­˜å‚¨è¿‡ç¨‹</h1><ol type="1"><li>å­˜å‚¨è¿‡ç¨‹ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸ºä»¥åçš„ä½¿ç”¨è€Œä¿å­˜çš„ä¸€æ¡æˆ–å¤šæ¡MySQLè¯­å¥çš„é›†åˆã€‚å¯å°†å…¶è§†ä¸ºæ‰¹æ–‡ä»¶ï¼Œè™½ç„¶å®ƒä»¬çš„ä½œç”¨ä¸ä»…é™äºæ‰¹å¤„ç†</li></ol><h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹">2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹</h1><ol type="1"><li>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æœ‰3ä¸ªä¸»è¦çš„å¥½å¤„ï¼Œå³ç®€å•ã€å®‰å…¨ã€é«˜æ€§èƒ½ã€‚æ˜¾ç„¶ï¼Œå®ƒä»¬éƒ½å¾ˆé‡è¦</li></ol><h1 id="ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹">3. ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹</h1><h2 id="æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹">3.1. æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</h2><ol type="1"><li>MySQLç§°å­˜å‚¨è¿‡ç¨‹çš„æ‰§è¡Œä¸ºè°ƒç”¨ï¼Œå› æ­¤MySQLæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„è¯­å¥ä¸ºCALLã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709349782956-21a018fb-65a7-4a49-bdc3-40dc674d8e94.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>å­˜å‚¨è¿‡ç¨‹å¯ä»¥æ˜¾ç¤ºç»“æœï¼Œä¹Ÿå¯ä»¥ä¸æ˜¾ç¤ºç»“æœï¼Œ</li></ol><h2 id="åˆ›å»ºå­˜å‚¨è¿‡ç¨‹">3.2. åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</h2><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709349850794-87bbfde2-d9cb-4d80-b585-d73c1a4f98b7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><p>ä¸´æ—¶æ›´æ”¹å‘½ä»¤è¡Œå®ç”¨ç¨‹åºçš„è¯­å¥åˆ†éš”ç¬¦</p></li><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709349924277-8ed7ef27-f164-4884-bfb8-ef9eccb9c6ea.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>ä½¿ç”¨è¯¥å­˜å‚¨è¿‡ç¨‹</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709349959735-44679d84-b2b2-4ab0-8f3d-ae70161b4c6d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="åˆ é™¤å­˜å‚¨è¿‡ç¨‹">3.3. åˆ é™¤å­˜å‚¨è¿‡ç¨‹</h2><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709349981687-f49554c4-31c8-499c-8c57-508bff3187ce.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>ä»…å½“å­˜åœ¨æ—¶åˆ é™¤å¦‚æœæŒ‡å®šçš„è¿‡ç¨‹ä¸å­˜åœ¨ï¼Œåˆ™DROPPROCEDUREå°†äº§ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚å½“è¿‡ç¨‹å­˜åœ¨æƒ³åˆ é™¤å®ƒæ—¶ï¼ˆå¦‚æœè¿‡ç¨‹ä¸å­˜åœ¨ä¹Ÿä¸äº§ç”Ÿé”™è¯¯ï¼‰å¯ä½¿ç”¨DROPPROCEDURE IF EXISTSã€‚</li></ol><h2 id="ä½¿ç”¨å‚æ•°">3.4. ä½¿ç”¨å‚æ•°</h2><ol type="1"><li><p>å˜é‡ï¼ˆvariableï¼‰å†…å­˜ä¸­ä¸€ä¸ªç‰¹å®šçš„ä½ç½®ï¼Œç”¨æ¥ä¸´æ—¶å­˜å‚¨æ•°æ®ã€‚</p></li><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709350088837-7e6ab289-fdb5-49cd-9c70-4241acabe615.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>æ­¤å­˜å‚¨è¿‡ç¨‹æ¥å—3ä¸ªå‚æ•°ï¼šplå­˜å‚¨äº§å“æœ€ä½ä»·æ ¼ï¼Œphå­˜å‚¨äº§å“æœ€é«˜ä»·æ ¼ï¼Œpaå­˜å‚¨äº§å“å¹³å‡ä»·æ ¼ã€‚æ¯ä¸ªå‚æ•°å¿…é¡»å…·æœ‰æŒ‡å®šçš„ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨åè¿›åˆ¶å€¼ã€‚å…³é”®å­—OUTæŒ‡å‡ºç›¸åº”çš„å‚æ•°ç”¨æ¥ä»å­˜å‚¨è¿‡ç¨‹ä¼ å‡ºä¸€ä¸ªå€¼ï¼ˆè¿”å›ç»™è°ƒç”¨è€…ï¼‰ã€‚MySQLæ”¯æŒINï¼ˆä¼ é€’ç»™å­˜å‚¨è¿‡ç¨‹ï¼‰ã€OUTï¼ˆä»å­˜å‚¨è¿‡ç¨‹ä¼ å‡ºï¼Œå¦‚è¿™é‡Œæ‰€ç”¨ï¼‰å’ŒINOUTï¼ˆå¯¹å­˜å‚¨è¿‡ç¨‹ä¼ å…¥å’Œä¼ å‡ºï¼‰ç±»å‹çš„å‚æ•°ã€‚å­˜å‚¨è¿‡ç¨‹çš„ä»£ç ä½äºBEGINå’ŒENDè¯­å¥å†…ï¼Œå¦‚å‰æ‰€è§ï¼Œå®ƒä»¬æ˜¯ä¸€ç³»åˆ—SELECTè¯­å¥ï¼Œç”¨æ¥æ£€ç´¢å€¼ï¼Œç„¶åä¿å­˜åˆ°ç›¸åº”çš„å˜é‡ï¼ˆé€šè¿‡æŒ‡å®šINTOå…³é”®å­—ï¼‰</p></li><li><p>å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å…è®¸çš„æ•°æ®ç±»å‹ä¸è¡¨ä¸­ä½¿ç”¨çš„æ•°æ®ç±»å‹ç›¸åŒã€‚</p></li><li><p>ä¸ºäº†æ˜¾ç¤ºæ£€ç´¢å‡ºçš„äº§å“å¹³å‡ä»·æ ¼ï¼Œå¯å¦‚ä¸‹è¿›è¡Œï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709350173102-45c15486-110d-4589-9228-2db3f7efff96.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>è¿™æ¬¡ä½¿ç”¨INå’ŒOUTå‚æ•°ã€‚ordertotalæ¥å—è®¢å•å·å¹¶è¿”å›è¯¥è®¢å•çš„åˆè®¡ï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709362780626-5ab50b26-7427-4bf0-8ad4-1283df3d322c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709362795520-ab7d8a53-8744-40bd-b869-f127aa07057b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709362824015-5b8386d3-0cc9-46f7-a5d8-589fa3b4c9d7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="å»ºç«‹æ™ºèƒ½å­˜å‚¨è¿‡ç¨‹">3.5. å»ºç«‹æ™ºèƒ½å­˜å‚¨è¿‡ç¨‹</h2><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709362891184-611230aa-b959-4fec-a2b9-f562bc6191ba.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709363103764-7be60972-4a34-4ad9-bb6e-b9fdc15d91ae.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="æ£€æŸ¥å­˜å‚¨è¿‡ç¨‹">3.6. æ£€æŸ¥å­˜å‚¨è¿‡ç¨‹</h2><p>ä¸ºæ˜¾ç¤ºç”¨æ¥åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹çš„CREATEè¯­å¥ï¼Œä½¿ç”¨SHOW CREATEPROCEDUREè¯­å¥ï¼š</p><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709363213457-d48c555f-89b4-473a-8130-a70364079976.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>é™åˆ¶è¿‡ç¨‹çŠ¶æ€ç»“æœ SHOW PROCEDURESTATUSåˆ—å‡ºæ‰€æœ‰å­˜å‚¨è¿‡ç¨‹ã€‚ä¸ºé™åˆ¶å…¶è¾“å‡ºï¼Œå¯ä½¿ç”¨LIKEæŒ‡å®šä¸€ä¸ªè¿‡æ»¤æ¨¡å¼ï¼Œ</p><figure><img src="/2024/11/27/mysql_bzbh/23-%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/1709363251901-efda8689-8522-4fb3-9bc0-3d40d7c191cc.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>22. ä½¿ç”¨è§†å›¾</title>
    <link href="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/"/>
    <url>/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<h1 id="è§†å›¾">1. è§†å›¾</h1><ol type="1"><li>è§†å›¾æ˜¯è™šæ‹Ÿçš„è¡¨ã€‚ä¸åŒ…å«æ•°æ®çš„è¡¨ä¸ä¸€æ ·ï¼Œè§†å›¾åªåŒ…å«ä½¿ç”¨æ—¶åŠ¨æ€æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢ã€‚</li><li>ä¸ºäº†åˆ›å»ºè§†å›¾ï¼Œå¿…é¡»å…·æœ‰è¶³å¤Ÿçš„è®¿é—®æƒé™ã€‚è¿™äº›é™åˆ¶é€šå¸¸ç”±æ•°æ®åº“ç®¡ç†äººå‘˜æˆäºˆ</li><li>ORDER BYå¯ä»¥ç”¨åœ¨è§†å›¾ä¸­ï¼Œä½†å¦‚æœä»è¯¥è§†å›¾æ£€ç´¢æ•°æ®SELECTä¸­ä¹Ÿå«æœ‰ORDERBYï¼Œé‚£ä¹ˆè¯¥è§†å›¾ä¸­çš„ORDER BYå°†è¢«è¦†ç›–ã€‚</li></ol><h1 id="ä½¿ç”¨è§†å›¾">2. ä½¿ç”¨è§†å›¾</h1><ol type="1"><li>è§†å›¾ç”¨CREATE VIEWè¯­å¥æ¥åˆ›å»ºã€‚</li><li>ä½¿ç”¨SHOW CREATE VIEW viewnameï¼›æ¥æŸ¥çœ‹åˆ›å»ºè§†å›¾çš„è¯­å¥</li><li>ç”¨DROPåˆ é™¤è§†å›¾ï¼Œå…¶è¯­æ³•ä¸ºDROP VIEW viewname;ã€‚</li><li>æ›´æ–°è§†å›¾æ—¶ï¼Œå¯ä»¥å…ˆç”¨DROPå†ç”¨CREATEï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨CREATE OR REPLACEVIEWã€‚</li></ol><h2 id="åˆ©ç”¨è§†å›¾ç®€åŒ–å¤æ‚çš„è”ç»“">2.1. åˆ©ç”¨è§†å›¾ç®€åŒ–å¤æ‚çš„è”ç»“</h2><ol type="1"><li>è§†å›¾çš„æœ€å¸¸è§çš„åº”ç”¨ä¹‹ä¸€æ˜¯éšè—å¤æ‚çš„SQLï¼Œè¿™é€šå¸¸éƒ½ä¼šæ¶‰åŠè”ç»“</li><li><figure><img src="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/1709348412835-3bd81496-f8b2-46be-b601-aec70f975ff2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¿™æ¡è¯­å¥åˆ›å»ºä¸€ä¸ªåä¸ºproductcustomersçš„è§†å›¾ï¼Œå®ƒè”ç»“ä¸‰ä¸ªè¡¨ï¼Œä»¥è¿”å›å·²è®¢è´­äº†ä»»æ„äº§å“çš„æ‰€æœ‰å®¢æˆ·çš„åˆ—è¡¨ã€‚å¦‚æœæ‰§è¡ŒSELECT* FROM productcustomersï¼Œå°†åˆ—å‡ºè®¢è´­äº†ä»»æ„äº§å“çš„å®¢æˆ·ã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/1709348617620-da9cdf80-578f-492e-9c33-a29af0ab9bf8.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="ç”¨è§†å›¾é‡æ–°æ ¼å¼åŒ–æ£€ç´¢å‡ºçš„æ•°æ®">2.2.ç”¨è§†å›¾é‡æ–°æ ¼å¼åŒ–æ£€ç´¢å‡ºçš„æ•°æ®</h2><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/1709348691601-3b065612-be8c-4fee-bc2f-ee6b94b24bb5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/1709348774972-2ac04481-7138-458b-8e11-9aaf83542306.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="ç”¨è§†å›¾è¿‡æ»¤ä¸æƒ³è¦çš„æ•°æ®">2.3. ç”¨è§†å›¾è¿‡æ»¤ä¸æƒ³è¦çš„æ•°æ®</h2><figure><img src="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/1709348868508-585f507f-c1c8-45f2-a409-9412ca65ef06.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="ä½¿ç”¨è§†å›¾ä¸è®¡ç®—å­—æ®µ">2.4. ä½¿ç”¨è§†å›¾ä¸è®¡ç®—å­—æ®µ</h2><figure><img src="/2024/11/27/mysql_bzbh/22-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE/1709349157660-f9db0002-6958-4c00-8630-8a1da0639e72.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="æ›´æ–°è§†å›¾">2.5. æ›´æ–°è§†å›¾</h2>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>21. åˆ›å»ºå’Œæ“çºµè¡¨</title>
    <link href="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/"/>
    <url>/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="åˆ›å»ºè¡¨">1. åˆ›å»ºè¡¨</h1><h2 id="è¡¨åˆ›å»ºåŸºç¡€">1.1. è¡¨åˆ›å»ºåŸºç¡€</h2><ol type="1"><li><p>åˆ©ç”¨CREATE TABLEåˆ›å»ºè¡¨ï¼Œå¿…é¡»ç»™å‡ºä¸‹åˆ—ä¿¡æ¯</p></li><li><ol type="1"><li>æ–°è¡¨çš„åå­—ï¼Œåœ¨å…³é”®å­—CREATE TABLEä¹‹åç»™å‡º</li><li>è¡¨åˆ—çš„åå­—å’Œå®šä¹‰ï¼Œç”¨é€—å·åˆ†éš”</li><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709343350324-a54143ba-e6b1-48b3-9090-0261b84c865a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¡¨çš„ä¸»é”®å¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶ç”¨PRIMARY KEYå…³é”®å­—æŒ‡å®šã€‚</li><li>åœ¨åˆ›å»ºæ–°è¡¨æ—¶ï¼ŒæŒ‡å®šçš„è¡¨åå¿…é¡»ä¸å­˜åœ¨ï¼Œå¦åˆ™å°†å‡ºé”™ã€‚</li><li>åœ¨åˆ›å»ºæ–°è¡¨æ—¶ï¼ŒæŒ‡å®šçš„è¡¨åå¿…é¡»ä¸å­˜åœ¨ï¼Œå¦åˆ™å°†å‡ºé”™ã€‚</li></ol></li></ol><h2 id="ä½¿ç”¨nullå€¼">1.2. ä½¿ç”¨NULLå€¼</h2><ol type="1"><li><p>åœ¨æ’å…¥æˆ–æ›´æ–°è¡Œæ—¶ï¼Œè¯¥åˆ—å¿…é¡»æœ‰å€¼</p></li><li><p>æ¯ä¸ªè¡¨åˆ—æˆ–è€…æ˜¯NULLåˆ—ï¼Œæˆ–è€…æ˜¯NOTNULLåˆ—ï¼Œè¿™ç§çŠ¶æ€åœ¨åˆ›å»ºæ—¶ç”±è¡¨çš„å®šä¹‰è§„å®šã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709344476562-711e3d02-63da-4adc-ba09-ff08d6146f9e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709344591335-2d3b7a65-e508-4098-b489-a0560a60f63e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="ä¸»é”®å†ä»‹ç»">1.3. ä¸»é”®å†ä»‹ç»</h2><ol type="1"><li>ä¸»é”®å€¼å¿…é¡»å”¯ä¸€ã€‚</li><li>åˆ›å»ºç”±å¤šä¸ªåˆ—ç»„æˆçš„ä¸»é”®ï¼Œåº”è¯¥ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨ç»™å‡ºå„åˆ—åï¼Œ</li><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709345054334-d98f6f1c-2c80-4041-907b-38d5ec491dcc.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="ä½¿ç”¨auto_increment">1.4. ä½¿ç”¨AUTO_INCREMENT</h2><ol type="1"><li><p>AUTO_INCREMENTå‘Šè¯‰MySQLï¼Œæœ¬åˆ—æ¯å½“å¢åŠ ä¸€è¡Œæ—¶è‡ªåŠ¨å¢é‡ã€‚</p></li><li><p>æ¯ä¸ªè¡¨åªå…è®¸ä¸€ä¸ªAUTO_INCREMENTåˆ—ï¼Œè€Œä¸”å®ƒå¿…é¡»è¢«ç´¢å¼•ï¼ˆå¦‚ï¼Œé€šè¿‡ä½¿å®ƒæˆä¸ºä¸»é”®ï¼‰ã€‚</p></li><li><p>å¦‚ä½•åœ¨ä½¿ç”¨AUTO_INCREMENTåˆ—æ—¶è·å¾—è¿™ä¸ªå€¼å‘¢ï¼Ÿå¯ä½¿ç”¨last_insert_id()å‡½æ•°è·å¾—è¿™ä¸ªå€¼</p></li><li><ol type="1"><li>select last_insert_id()</li><li>æ­¤è¯­å¥è¿”å›æœ€åä¸€ä¸ªAUTO_INCREMENTå€¼ï¼Œç„¶åå¯ä»¥å°†å®ƒç”¨äºåç»­çš„MySQLè¯­å¥</li></ol></li></ol><h2 id="æŒ‡å®šé»˜è®¤å€¼">1.5. æŒ‡å®šé»˜è®¤å€¼</h2><ol type="1"><li><p>defaultå…³é”®å­—</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709346727159-0c523d39-5eee-4921-8d58-47add6aba276.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709346736341-29ebea9d-d172-47fa-ae25-f82aab8e56c6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="å¼•æ“ç±»å‹">1.6. å¼•æ“ç±»å‹</h2><ol type="1"><li><p>CREATE TABLEè¯­å¥ä»¥ENGINE=InnoDBè¯­å¥ç»“æŸ</p></li><li><p>å¸¸è§å¼•æ“</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709346825093-a964c04e-9d4d-4c9b-8ed1-8623721c2402.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="æ›´æ–°è¡¨">2. æ›´æ–°è¡¨</h1><ol type="1"><li><p>æ›´æ–°è¡¨å®šä¹‰ï¼Œå¯ä½¿ç”¨ALTER TABLEè¯­å¥</p></li><li><p>ä¸ºäº†ä½¿ç”¨ALTER TABLEæ›´æ”¹è¡¨ç»“æ„ï¼Œå¿…é¡»ç»™å‡ºä¸‹é¢çš„ä¿¡æ¯ï¼š</p></li><li><ol type="1"><li>åœ¨ALTER TABLEä¹‹åç»™å‡ºè¦æ›´æ”¹çš„è¡¨åï¼ˆè¯¥è¡¨å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™å°†å‡ºé”™ï¼‰ï¼›</li><li>æ‰€åšæ›´æ”¹çš„åˆ—è¡¨</li></ol></li><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709347341535-3ff4aa79-2394-441a-9587-a47d779670cf.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>ALTERTABLEçš„ä¸€ç§å¸¸è§ç”¨é€”æ˜¯å®šä¹‰å¤–é”®ã€‚ä¸‹é¢æ˜¯ç”¨æ¥å®šä¹‰æœ¬ä¹¦ä¸­çš„è¡¨æ‰€ç”¨çš„å¤–é”®çš„ä»£ç </p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709347482368-dea4bcd0-5bab-41a2-8cf9-f9548a0dd522.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>å¤æ‚çš„è¡¨ç»“æ„æ›´æ”¹ä¸€èˆ¬éœ€è¦æ‰‹åŠ¨åˆ é™¤è¿‡ç¨‹ï¼Œå®ƒæ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š</p></li><li><ol type="1"><li>ç”¨æ–°çš„åˆ—å¸ƒå±€åˆ›å»ºä¸€ä¸ªæ–°è¡¨ï¼›</li><li>ä½¿ç”¨INSERTSELECTè¯­å¥ï¼ˆå…³äºè¿™æ¡è¯­å¥çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚é˜…ç¬¬19ç« ï¼‰ä»æ—§è¡¨å¤åˆ¶æ•°æ®åˆ°æ–°è¡¨ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä½¿ç”¨è½¬æ¢å‡½æ•°å’Œè®¡ç®—å­—æ®µï¼›</li><li>æ£€éªŒåŒ…å«æ‰€éœ€æ•°æ®çš„æ–°è¡¨ï¼›</li><li>é‡å‘½åæ—§è¡¨ï¼ˆå¦‚æœç¡®å®šï¼Œå¯ä»¥åˆ é™¤å®ƒï¼‰ï¼›</li><li>ç”¨æ—§è¡¨åŸæ¥çš„åå­—é‡å‘½åæ–°è¡¨ï¼›</li><li>æ ¹æ®éœ€è¦ï¼Œé‡æ–°åˆ›å»ºè§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹ã€ç´¢å¼•å’Œå¤–é”®ã€‚</li></ol></li></ol><h1 id="åˆ é™¤è¡¨">3. åˆ é™¤è¡¨</h1><ol type="1"><li><p>åˆ é™¤è¡¨ï¼ˆåˆ é™¤æ•´ä¸ªè¡¨è€Œä¸æ˜¯å…¶å†…å®¹ï¼‰éå¸¸ç®€å•ï¼Œä½¿ç”¨DROPTABLEè¯­å¥å³å¯</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709347712334-8dfe33b3-28dd-4864-bdc7-ffeb3b0b163c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="é‡å‘½åè¡¨">4. é‡å‘½åè¡¨</h1><ol type="1"><li>ä½¿ç”¨RENAME TABLEè¯­å¥å¯ä»¥é‡å‘½åä¸€ä¸ªè¡¨ï¼š</li><li><figure><img src="/2024/11/27/mysql_bzbh/21-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E7%BA%B5%E8%A1%A8/1709347760868-0dd647db-136d-45f5-a0a1-76990b510a43.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>20. æ›´æ–°å’Œåˆ é™¤æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/20-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/20-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="æ›´æ–°æ•°æ®">1. æ›´æ–°æ•°æ®</h1><ol type="1"><li><p>ä¸ºäº†æ›´æ–°ï¼ˆä¿®æ”¹ï¼‰è¡¨ä¸­çš„æ•°æ®ï¼Œå¯ä½¿ç”¨UPDATEè¯­å¥ã€‚</p></li><li><p>ä¸è¦çœç•¥WHEREå­å¥åœ¨ä½¿ç”¨UPDATEæ—¶ä¸€å®šè¦æ³¨æ„ç»†å¿ƒã€‚å› ä¸ºç¨ä¸æ³¨æ„ï¼Œå°±ä¼šæ›´æ–°è¡¨ä¸­æ‰€æœ‰è¡Œ</p></li><li><p>UPDATEè¯­å¥ç”±3éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼š</p></li><li><ol type="1"><li>è¦æ›´æ–°çš„è¡¨ï¼›</li><li>åˆ—åå’Œå®ƒä»¬çš„æ–°å€¼ï¼›</li><li>ç¡®å®šè¦æ›´æ–°è¡Œçš„è¿‡æ»¤æ¡ä»¶</li></ol></li><li><figure><img src="/2024/11/27/mysql_bzbh/20-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/1709307449058-328ae940-df9f-4fb7-b925-05281cd0a743.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>UPDATEè¯­å¥æ€»æ˜¯ä»¥è¦æ›´æ–°çš„è¡¨çš„åå­—å¼€å§‹ã€‚åœ¨æ­¤ä¾‹å­ä¸­ï¼Œè¦æ›´æ–°çš„è¡¨çš„åå­—ä¸ºcustomersã€‚SETå‘½ä»¤ç”¨æ¥å°†æ–°å€¼èµ‹ç»™è¢«æ›´æ–°çš„åˆ—ã€‚</p></li><li><p>æ›´æ–°å¤šä¸ªåˆ—çš„è¯­æ³•ç¨æœ‰ä¸åŒ</p></li><li><figure><img src="/2024/11/27/mysql_bzbh/20-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/1709307486500-37e50860-6f5b-451f-b54d-138d5c9ef520.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>åœ¨æ›´æ–°å¤šä¸ªåˆ—æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å•ä¸ªSETå‘½ä»¤ï¼Œæ¯ä¸ªâ€œåˆ—=å€¼â€å¯¹ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼ˆæœ€åä¸€åˆ—ä¹‹åä¸ç”¨é€—å·ï¼‰ã€‚</p></li><li><p>IGNOREå…³é”®å­—å¦‚æœç”¨UPDATEè¯­å¥æ›´æ–°å¤šè¡Œï¼Œå¹¶ä¸”åœ¨æ›´æ–°è¿™äº›è¡Œä¸­çš„ä¸€è¡Œæˆ–å¤šè¡Œæ—¶å‡ºä¸€ä¸ªç°é”™è¯¯ï¼Œåˆ™æ•´ä¸ªUPDATEæ“ä½œè¢«å–æ¶ˆï¼ˆé”™è¯¯å‘ç”Ÿå‰æ›´æ–°çš„æ‰€æœ‰è¡Œè¢«æ¢å¤åˆ°å®ƒä»¬åŸæ¥çš„å€¼ï¼‰ã€‚ä¸ºå³ä½¿æ˜¯å‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿç»§ç»­è¿›è¡Œæ›´æ–°ï¼Œå¯ä½¿ç”¨IGNOREå…³é”®å­—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šUPDATEIGNORE customersâ€¦</p></li><li><p>ä¸ºäº†åˆ é™¤æŸä¸ªåˆ—çš„å€¼ï¼Œå¯è®¾ç½®å®ƒä¸ºNULLï¼ˆå‡å¦‚è¡¨å®šä¹‰å…è®¸NULLå€¼ï¼‰</p></li><li><figure><img src="/2024/11/27/mysql_bzbh/20-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/1709307729597-d6a75445-6db0-423f-8683-d55657efbd44.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h1 id="åˆ é™¤æ•°æ®">2. åˆ é™¤æ•°æ®</h1><ol type="1"><li>delete</li><li><figure><img src="/2024/11/27/mysql_bzbh/20-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE/1709307867847-ad4f8cd3-5ca3-4366-adf7-008719022f9e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ›´å¿«çš„åˆ é™¤å¦‚æœæƒ³ä»è¡¨ä¸­åˆ é™¤æ‰€æœ‰è¡Œï¼Œä¸è¦ä½¿ç”¨DELETEã€‚å¯ä½¿ç”¨TRUNCATETABLEè¯­å¥ï¼Œå®ƒå®Œæˆç›¸åŒçš„å·¥ä½œï¼Œä½†é€Ÿåº¦æ›´å¿«ï¼ˆTRUNCATEå®é™…æ˜¯åˆ é™¤åŸæ¥çš„è¡¨å¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œè€Œä¸æ˜¯é€è¡Œåˆ é™¤è¡¨ä¸­çš„æ•°æ®ï¼‰ã€‚</li></ol><h1 id="æ›´æ–°å’Œåˆ é™¤çš„æŒ‡å¯¼åŸåˆ™">3. æ›´æ–°å’Œåˆ é™¤çš„æŒ‡å¯¼åŸåˆ™</h1><ol type="1"><li>å‰ä¸€èŠ‚ä¸­ä½¿ç”¨çš„UPDATEå’ŒDELETEè¯­å¥å…¨éƒ½å…·æœ‰WHEREå­å¥ï¼Œè¿™æ ·åšçš„ç†ç”±å¾ˆå……åˆ†ã€‚å¦‚æœçœç•¥äº†WHEREå­å¥ï¼Œåˆ™UPDATEæˆ–DELETEå°†è¢«åº”ç”¨åˆ°è¡¨ä¸­æ‰€æœ‰çš„è¡Œã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>19. æ’å…¥æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®æ’å…¥">1. æ•°æ®æ’å…¥</h1><p>INSERTæ˜¯ç”¨æ¥æ’å…¥ï¼ˆæˆ–æ·»åŠ ï¼‰è¡Œåˆ°æ•°æ®åº“è¡¨çš„ã€‚</p><h1 id="æ’å…¥å®Œæ•´çš„è¡Œ">2. æ’å…¥å®Œæ•´çš„è¡Œ</h1><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306001472-3d93ab09-89a4-4d8c-92e5-8bf23be93c09.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>ç¼–å†™INSERTè¯­å¥çš„æ›´å®‰å…¨ï¼ˆä¸è¿‡æ›´çƒ¦çï¼‰çš„æ–¹æ³•å¦‚ä¸‹</p><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306090275-397c27bb-9136-49de-8648-2143c5778cac.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306106768-3c0164b4-428b-4fa1-a21b-5c65c7c16fd3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>å› ä¸ºæä¾›äº†åˆ—åï¼ŒVALUESå¿…é¡»ä»¥å…¶æŒ‡å®šçš„æ¬¡åºåŒ¹é…æŒ‡å®šçš„åˆ—åï¼Œä¸ä¸€å®šæŒ‰å„ä¸ªåˆ—å‡ºç°åœ¨å®é™…è¡¨ä¸­çš„æ¬¡åºã€‚å…¶ä¼˜ç‚¹æ˜¯ï¼Œå³ä½¿è¡¨çš„ç»“æ„æ”¹å˜ï¼Œæ­¤INSERTè¯­å¥ä»ç„¶èƒ½æ­£ç¡®å·¥ä½œã€‚ä½ ä¼šå‘ç°cust_idçš„NULLå€¼æ˜¯ä¸å¿…è¦çš„ï¼Œcust_idåˆ—å¹¶æ²¡æœ‰å‡ºç°åœ¨åˆ—è¡¨ä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦ä»»ä½•å€¼ã€‚</p><h1 id="æ’å…¥å¤šä¸ªè¡Œ">3. æ’å…¥å¤šä¸ªè¡Œ</h1><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306381373-de757c84-0d4b-4734-9bc4-e03318af6ab5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306389720-fa5594ad-38c4-4b77-a21d-5f65ffab8b43.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®">4. æ’å…¥æ£€ç´¢å‡ºçš„æ•°æ®</h1><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306479471-5e1f8a7c-6b90-43d2-bfe0-3c38477dd5dc.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE/1709306485491-bd0a4f32-a090-4136-ad91-6c9cc8d916c1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>MySQLç”šè‡³ä¸å…³å¿ƒSELECTè¿”å›çš„åˆ—åã€‚å®ƒä½¿ç”¨çš„æ˜¯åˆ—çš„ä½ç½®ï¼Œå› æ­¤SELECTä¸­çš„ç¬¬ä¸€åˆ—ï¼ˆä¸ç®¡å…¶åˆ—åï¼‰å°†ç”¨æ¥å¡«å……è¡¨åˆ—ä¸­æŒ‡å®šçš„ç¬¬ä¸€ä¸ªåˆ—</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>18. å…¨æ–‡æœ¬æœç´¢</title>
    <link href="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/"/>
    <url>/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="ç†è§£å…¨æ–‡æœ¬æœç´¢">1. ç†è§£å…¨æ–‡æœ¬æœç´¢</h1><h1 id="ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢">2. ä½¿ç”¨å…¨æ–‡æœ¬æœç´¢</h1><ol type="1"><li>ä¸ºäº†è¿›è¡Œå…¨æ–‡æœ¬æœç´¢ï¼Œå¿…é¡»ç´¢å¼•è¢«æœç´¢çš„åˆ—ï¼Œè€Œä¸”è¦éšç€æ•°æ®çš„æ”¹å˜ä¸æ–­åœ°é‡æ–°ç´¢å¼•ã€‚åœ¨å¯¹è¡¨åˆ—è¿›è¡Œé€‚å½“è®¾è®¡åï¼ŒMySQLä¼šè‡ªåŠ¨è¿›è¡Œæ‰€æœ‰çš„ç´¢å¼•å’Œé‡æ–°ç´¢å¼•ã€‚</li></ol><h2 id="å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒ">2.1. å¯ç”¨å…¨æ–‡æœ¬æœç´¢æ”¯æŒ</h2><ol type="1"><li>ä¸€èˆ¬åœ¨åˆ›å»ºè¡¨æ—¶å¯ç”¨å…¨æ–‡æœ¬æœç´¢ã€‚</li><li>CREATETABLEè¯­å¥ï¼ˆç¬¬21ç« ä¸­ä»‹ç»ï¼‰æ¥å—FULLTEXTå­å¥ï¼Œå®ƒç»™å‡ºè¢«ç´¢å¼•åˆ—çš„ä¸€ä¸ªé€—å·åˆ†éš”çš„åˆ—è¡¨</li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709304355062-cec3ee61-e73b-43a0-89b5-aa0ffb2cba1d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>MySQLæ ¹æ®å­å¥FULLTEXT(note_text)çš„æŒ‡ç¤ºå¯¹å®ƒè¿›è¡Œç´¢å¼•ã€‚</li><li>ä¸è¦åœ¨å¯¼å…¥æ•°æ®æ—¶ä½¿ç”¨FULLTEXT</li></ol><h2 id="è¿›è¡Œå…¨æ–‡æœ¬æœç´¢">2.2. è¿›è¡Œå…¨æ–‡æœ¬æœç´¢</h2><ol type="1"><li>åœ¨ç´¢å¼•ä¹‹åï¼Œä½¿ç”¨ä¸¤ä¸ªå‡½æ•°Match()å’ŒAgainst()æ‰§è¡Œå…¨æ–‡æœ¬æœç´¢ï¼Œå…¶ä¸­Match()æŒ‡å®šè¢«æœç´¢çš„åˆ—ï¼ŒAgainst()æŒ‡å®šè¦ä½¿ç”¨çš„æœç´¢è¡¨è¾¾å¼ã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709304520467-950c8e92-d6b8-4350-bb4c-e04b75f6599b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709304528708-20e21570-f1d1-468a-8e4f-6a0dc888500e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>ä¼ é€’ç»™Match()çš„å€¼å¿…é¡»ä¸FULLTEXT()å®šä¹‰ä¸­çš„ç›¸åŒã€‚å¦‚æœæŒ‡å®šå¤šä¸ªåˆ—ï¼Œåˆ™å¿…é¡»åˆ—å‡ºå®ƒä»¬ï¼ˆè€Œä¸”æ¬¡åºæ­£ç¡®ï¼‰ã€‚</li><li>å…·æœ‰è¾ƒé«˜ç­‰çº§çš„è¡Œå…ˆè¿”å›ï¼ˆå› ä¸ºè¿™äº›è¡Œå¾ˆå¯èƒ½æ˜¯ä½ çœŸæ­£æƒ³è¦çš„è¡Œï¼‰</li></ol><h2 id="ä½¿ç”¨æŸ¥è¯¢æ‰©å±•">2.3. ä½¿ç”¨æŸ¥è¯¢æ‰©å±•</h2><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709304941015-15a980b0-7de4-491c-a9d6-4b399ef46088.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="å¸ƒå°”æ–‡æœ¬æœç´¢">2.4. å¸ƒå°”æ–‡æœ¬æœç´¢</h2><ol type="1"><li><p>MySQLæ”¯æŒå…¨æ–‡æœ¬æœç´¢çš„å¦å¤–ä¸€ç§å½¢å¼ï¼Œç§°ä¸ºå¸ƒå°”æ–¹å¼ï¼ˆbooleanmodeï¼‰ã€‚</p></li><li><ol type="1"><li>è¦åŒ¹é…çš„è¯ï¼›</li><li>è¦æ’æ–¥çš„è¯ï¼ˆå¦‚æœæŸè¡ŒåŒ…å«è¿™ä¸ªè¯ï¼Œåˆ™ä¸è¿”å›è¯¥è¡Œï¼Œå³ä½¿å®ƒåŒ…å«å…¶ä»–æŒ‡å®šçš„è¯ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ï¼›</li><li>æ’åˆ—æç¤ºï¼ˆæŒ‡å®šæŸäº›è¯æ¯”å…¶ä»–è¯æ›´é‡è¦ï¼Œæ›´é‡è¦çš„è¯ç­‰çº§æ›´é«˜ï¼‰ï¼›</li><li>è¡¨è¾¾å¼åˆ†ç»„ï¼›</li><li>å¦å¤–ä¸€äº›å†…å®¹ã€‚</li></ol></li><li><p>å³ä½¿æ²¡æœ‰FULLTEXTç´¢å¼•ä¹Ÿå¯ä»¥ä½¿ç”¨å¸ƒå°”æ–¹å¼ä¸åŒäºè¿„ä»Šä¸ºæ­¢ä½¿ç”¨çš„å…¨æ–‡æœ¬æœç´¢è¯­æ³•çš„åœ°æ–¹åœ¨äºï¼Œå³ä½¿æ²¡æœ‰å®šä¹‰FULLTEXTç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒã€‚ä½†è¿™æ˜¯ä¸€ç§éå¸¸ç¼“æ…¢çš„æ“ä½œ</p></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709305221959-1996db5d-c8ef-452d-9155-c72648b4eb56.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709305338384-e46a7f3b-99da-4424-8b84-b03db2558e6a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709305449388-e6582f26-41c9-4fba-96de-c3c775ef4b1f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709305567066-ffe602ad-68bb-45e9-bad5-2f401c5e13d5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709305579041-ed33aa07-f621-40b6-a328-5452ddf48fd6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/18-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2/1709305652042-bfc0e763-9292-4042-9d3f-82c8bd86f9a6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="å…¨æ–‡æœ¬æœç´¢çš„ä½¿ç”¨è¯´æ˜">2.5. å…¨æ–‡æœ¬æœç´¢çš„ä½¿ç”¨è¯´æ˜</h2>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>17. ç»„åˆæŸ¥è¯¢</title>
    <link href="/2024/11/27/mysql_bzbh/17-%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2/"/>
    <url>/2024/11/27/mysql_bzbh/17-%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="ç»„åˆæŸ¥è¯¢">1. ç»„åˆæŸ¥è¯¢</h1><ol type="1"><li>å¤šæ•°SQLæŸ¥è¯¢éƒ½åªåŒ…å«ä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­è¿”å›æ•°æ®çš„å•æ¡SELECTè¯­å¥ã€‚MySQLä¹Ÿå…è®¸æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢ï¼ˆå¤šæ¡SELECTè¯­å¥ï¼‰ï¼Œå¹¶å°†ç»“æœä½œä¸ºå•ä¸ªæŸ¥è¯¢ç»“æœé›†è¿”å›ã€‚è¿™äº›ç»„åˆæŸ¥è¯¢é€šå¸¸ç§°ä¸ºå¹¶ï¼ˆunionï¼‰æˆ–å¤åˆæŸ¥è¯¢ï¼ˆcompoundqueryï¼‰ã€‚</li></ol><h1 id="åˆ›å»ºç»„åˆæŸ¥è¯¢">2. åˆ›å»ºç»„åˆæŸ¥è¯¢</h1><p>åˆ©ç”¨union</p><h2 id="ä½¿ç”¨union">2.1. ä½¿ç”¨union</h2><ol type="1"><li>ç»™å‡ºæ¯æ¡SELECTè¯­å¥ï¼Œåœ¨å„æ¡è¯­å¥ä¹‹é—´æ”¾ä¸Šå…³é”®å­—UNIONã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/17-%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2/1709303418767-66f2f993-694d-4729-8544-4338535d6825.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¿™æ¡è¯­å¥ç”±å‰é¢çš„ä¸¤æ¡SELECTè¯­å¥ç»„æˆï¼Œè¯­å¥ä¸­ç”¨UNIONå…³é”®å­—åˆ†éš”ã€‚UNIONæŒ‡ç¤ºMySQLæ‰§è¡Œä¸¤æ¡SELECTè¯­å¥ï¼Œå¹¶æŠŠè¾“å‡ºç»„åˆæˆå•ä¸ªæŸ¥è¯¢ç»“æœé›†</li></ol><h2 id="unionè§„åˆ™">2.2. unionè§„åˆ™</h2><ol type="1"><li>UNIONå¿…é¡»ç”±ä¸¤æ¡æˆ–ä¸¤æ¡ä»¥ä¸Šçš„SELECTè¯­å¥ç»„æˆï¼Œè¯­å¥ä¹‹é—´ç”¨å…³é”®å­—UNIONåˆ†éš”</li><li>UNIONä¸­çš„æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ã€è¡¨è¾¾å¼æˆ–èšé›†å‡½æ•°ï¼ˆä¸è¿‡å„ä¸ªåˆ—ä¸éœ€è¦ä»¥ç›¸åŒçš„æ¬¡åºåˆ—å‡ºï¼‰ã€‚</li><li>åˆ—æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹ï¼šç±»å‹ä¸å¿…å®Œå…¨ç›¸åŒï¼Œä½†å¿…é¡»æ˜¯DBMSå¯ä»¥éšå«åœ°è½¬æ¢çš„ç±»å‹</li></ol><h2 id="åŒ…å«æˆ–å–æ¶ˆé‡å¤çš„è¡Œ">2.3. åŒ…å«æˆ–å–æ¶ˆé‡å¤çš„è¡Œ</h2><ol type="1"><li>UNIONä»æŸ¥è¯¢ç»“æœé›†ä¸­è‡ªåŠ¨å»é™¤äº†é‡å¤çš„è¡Œ</li><li>è¿”å›æ‰€æœ‰åŒ¹é…è¡Œï¼Œå¯ä½¿ç”¨UNION ALLè€Œä¸æ˜¯UNION</li><li>ä½¿ç”¨UNION ALLï¼ŒMySQLä¸å–æ¶ˆé‡å¤çš„è¡Œã€‚</li></ol><h2 id="å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åº">2.4. å¯¹ç»„åˆæŸ¥è¯¢ç»“æœæ’åº</h2><ol type="1"><li>SELECTè¯­å¥çš„è¾“å‡ºç”¨ORDERBYå­å¥æ’åºã€‚åœ¨ç”¨UNIONç»„åˆæŸ¥è¯¢æ—¶ï¼Œåªèƒ½ä½¿ç”¨ä¸€æ¡ORDERBYå­å¥ï¼Œå®ƒå¿…é¡»å‡ºç°åœ¨æœ€åä¸€æ¡SELECTè¯­å¥ä¹‹åã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/17-%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2/1709303645160-a65d34d2-b4d1-490e-9f12-4454c31cbb77.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>16. åˆ›å»ºé«˜çº§è”ç»“</title>
    <link href="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/"/>
    <url>/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨è¡¨åˆ«å">1. ä½¿ç”¨è¡¨åˆ«å</h1><ol type="1"><li><p>SQLè¿˜å…è®¸ç»™è¡¨åèµ·åˆ«åã€‚</p></li><li><ol type="1"><li>ç¼©çŸ­SQLè¯­å¥ï¼›</li><li>å…è®¸åœ¨å•æ¡SELECTè¯­å¥ä¸­å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„è¡¨ã€‚</li></ol></li><li><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709298522973-2b93cc41-368c-45be-a2df-0d23b0f2997c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>è¡¨åˆ«ååªåœ¨æŸ¥è¯¢æ‰§è¡Œä¸­ä½¿ç”¨ã€‚ä¸åˆ—åˆ«åä¸ä¸€æ ·ï¼Œè¡¨åˆ«åä¸è¿”å›åˆ°å®¢æˆ·æœºã€‚</p></li></ol><h1 id="ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“">2. ä½¿ç”¨ä¸åŒç±»å‹çš„è”ç»“</h1><h2 id="è‡ªè”ç»“">2.1. è‡ªè”ç»“</h2><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709298610673-b9ea5290-f806-41f5-b70f-64dac9b2afe3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="è‡ªç„¶è”ç»“">2.2. è‡ªç„¶è”ç»“</h2><ol type="1"><li>è‡ªç„¶è”ç»“æ’é™¤å¤šæ¬¡å‡ºç°ï¼Œä½¿æ¯ä¸ªåˆ—åªè¿”å›ä¸€æ¬¡ã€‚</li><li>ç„¶è”ç»“æ˜¯è¿™æ ·ä¸€ç§è”ç»“ï¼Œå…¶ä¸­ä½ åªèƒ½é€‰æ‹©é‚£äº›å”¯ä¸€çš„åˆ—ã€‚è¿™ä¸€èˆ¬æ˜¯é€šè¿‡å¯¹è¡¨ä½¿ç”¨é€šé…ç¬¦ï¼ˆSELECT*ï¼‰ï¼Œå¯¹æ‰€æœ‰å…¶ä»–è¡¨çš„åˆ—ä½¿ç”¨æ˜ç¡®çš„å­é›†æ¥å®Œæˆçš„</li><li><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709299273520-6cef0e6d-9fdc-4931-8bab-f9fc85042785.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="å¤–éƒ¨è”ç»“">2.3. å¤–éƒ¨è”ç»“</h2><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709299396493-fbe82e91-7a88-4572-ad68-d40325b06a43.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>è”ç»“åŒ…å«äº†é‚£äº›åœ¨ç›¸å…³è¡¨ä¸­æ²¡æœ‰å…³è”è¡Œçš„è¡Œã€‚è¿™ç§ç±»å‹çš„è”ç»“ç§°ä¸ºå¤–éƒ¨è”ç»“ã€‚</li><li>å¤–éƒ¨è”ç»“è¯­æ³•ç±»ä¼¼ã€‚ä¸ºäº†æ£€ç´¢æ‰€æœ‰å®¢æˆ·ï¼ŒåŒ…æ‹¬é‚£äº›æ²¡æœ‰è®¢å•çš„å®¢æˆ·ï¼Œå¯å¦‚ä¸‹è¿›è¡Œï¼š</li><li><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709299419135-4fe66dfd-31f7-40ad-a06f-d2b4d4d880ab.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¿™æ¡SELECTè¯­å¥ä½¿ç”¨äº†å…³é”®å­—OUTERJOINæ¥æŒ‡å®šè”ç»“çš„ç±»å‹ï¼ˆè€Œä¸æ˜¯åœ¨WHEREå­å¥ä¸­æŒ‡å®šï¼‰ã€‚ä½†æ˜¯ï¼Œä¸å†…éƒ¨è”ç»“å…³è”ä¸¤ä¸ªè¡¨ä¸­çš„è¡Œä¸åŒçš„æ˜¯ï¼Œå¤–éƒ¨è”ç»“è¿˜åŒ…æ‹¬æ²¡æœ‰å…³è”è¡Œçš„è¡Œã€‚åœ¨ä½¿ç”¨OUTERJOINè¯­æ³•æ—¶ï¼Œå¿…é¡»ä½¿ç”¨RIGHTæˆ–LEFTå…³é”®å­—æŒ‡å®šåŒ…æ‹¬å…¶æ‰€æœ‰è¡Œçš„è¡¨ï¼ˆRIGHTæŒ‡å‡ºçš„æ˜¯OUTERJOINå³è¾¹çš„è¡¨ï¼Œè€ŒLEFTæŒ‡å‡ºçš„æ˜¯OUTER JOINå·¦è¾¹çš„è¡¨ï¼‰ã€‚</li><li>ä¸ºäº†ä»å³è¾¹çš„è¡¨ä¸­é€‰æ‹©æ‰€æœ‰è¡Œï¼Œåº”è¯¥ä½¿ç”¨RIGHT OUTER JOINï¼Œ</li><li><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709299578056-6893dd66-3c10-4b03-8902-7e18377967a7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h1 id="ä½¿ç”¨å¸¦èšé›†å‡½æ•°çš„è”ç»“">3. ä½¿ç”¨å¸¦èšé›†å‡½æ•°çš„è”ç»“</h1><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709302853227-5c478efe-9a64-4c5e-83cd-21f3a5c30c73.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/16-%E5%88%9B%E5%BB%BA%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93/1709302863943-b87aea8f-138a-4767-934b-d9f2ef7658ef.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>15. è”ç»“è¡¨</title>
    <link href="/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/"/>
    <url>/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="è”ç»“">1. è”ç»“</h1><h2 id="å…³ç³»è¡¨">1.1. å…³ç³»è¡¨</h2><ol type="1"><li>å¤–é”®ï¼ˆforeignkeyï¼‰å¤–é”®ä¸ºæŸä¸ªè¡¨ä¸­çš„ä¸€åˆ—ï¼Œå®ƒåŒ…å«å¦ä¸€ä¸ªè¡¨çš„ä¸»é”®å€¼ï¼Œå®šä¹‰äº†ä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»ã€‚</li><li>å¯ä¼¸ç¼©æ€§ï¼ˆscaleï¼‰èƒ½å¤Ÿé€‚åº”ä¸æ–­å¢åŠ çš„å·¥ä½œé‡è€Œä¸å¤±è´¥ã€‚è®¾è®¡è‰¯å¥½çš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºç§°ä¹‹ä¸ºå¯ä¼¸ç¼©æ€§å¥½ï¼ˆscalewellï¼‰ã€‚</li><li>å¦‚æœæ•°æ®å­˜å‚¨åœ¨å¤šä¸ªè¡¨ä¸­ï¼Œæ€æ ·ç”¨å•æ¡SELECTè¯­å¥æ£€ç´¢å‡ºæ•°æ®ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨è”ç»“ã€‚</li><li>è”ç»“æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­å…³è”è¡¨ï¼Œå› æ­¤ç§°ä¹‹ä¸ºè”ç»“ã€‚</li></ol><h1 id="åˆ›å»ºè”ç»“">2. åˆ›å»ºè”ç»“</h1><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/1709297779666-4d9890ce-7df7-45e9-bca8-de59e57dd488.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>ä¸ä»¥å‰çš„SELECTè¯­å¥ä¸ä¸€æ ·ï¼Œè¿™æ¡è¯­å¥çš„FROMå­å¥åˆ—å‡ºäº†ä¸¤ä¸ªè¡¨ï¼Œåˆ†åˆ«æ˜¯vendorså’Œproductsã€‚å®ƒä»¬å°±æ˜¯è¿™æ¡SELECTè¯­å¥è”ç»“çš„ä¸¤ä¸ªè¡¨çš„åå­—ã€‚è¿™ä¸¤ä¸ªè¡¨ç”¨WHEREå­å¥æ­£ç¡®è”ç»“ï¼ŒWHEREå­å¥æŒ‡ç¤ºMySQLåŒ¹é…vendorsè¡¨ä¸­çš„vend_idå’Œproductsè¡¨ä¸­çš„vend_idã€‚</li></ol><h2 id="whereå­å¥çš„é‡è¦æ€§">2.1. WHEREå­å¥çš„é‡è¦æ€§</h2><ol type="1"><li><p>ç¬›å¡å„¿ç§¯ï¼ˆcartesianproductï¼‰ç”±æ²¡æœ‰è”ç»“æ¡ä»¶çš„è¡¨å…³ç³»è¿”å›çš„ç»“æœä¸ºç¬›å¡å„¿ç§¯ã€‚æ£€ç´¢å‡ºçš„è¡Œçš„æ•°ç›®å°†æ˜¯ç¬¬ä¸€ä¸ªè¡¨ä¸­çš„è¡Œæ•°ä¹˜ä»¥ç¬¬äºŒä¸ªè¡¨ä¸­çš„è¡Œæ•°ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/1709298000653-5299ad2a-eb7c-4da9-81ec-82e4d15c27c6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="å†…éƒ¨è”ç»“">2.2. å†…éƒ¨è”ç»“</h2><ol type="1"><li>ç›®å‰ä¸ºæ­¢æ‰€ç”¨çš„è”ç»“ç§°ä¸ºç­‰å€¼è”ç»“ï¼ˆequijoinï¼‰ï¼Œå®ƒåŸºäºä¸¤ä¸ªè¡¨ä¹‹é—´çš„ç›¸ç­‰æµ‹è¯•ã€‚è¿™ç§è”ç»“ä¹Ÿç§°ä¸ºå†…éƒ¨è”ç»“ã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/1709298116390-eb17ebbb-177f-4b4c-a45f-e6b036594ee3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ­¤è¯­å¥ä¸­çš„SELECTä¸å‰é¢çš„SELECTè¯­å¥ç›¸åŒï¼Œä½†FROMå­å¥ä¸åŒã€‚è¿™é‡Œï¼Œä¸¤ä¸ªè¡¨ä¹‹é—´çš„å…³ç³»æ˜¯FROMå­å¥çš„ç»„æˆéƒ¨åˆ†ï¼Œä»¥INNERJOINæŒ‡å®šã€‚åœ¨ä½¿ç”¨è¿™ç§è¯­æ³•æ—¶ï¼Œè”ç»“æ¡ä»¶ç”¨ç‰¹å®šçš„ONå­å¥è€Œä¸æ˜¯WHEREå­å¥ç»™å‡ºã€‚ä¼ é€’ç»™ONçš„å®é™…æ¡ä»¶ä¸ä¼ é€’ç»™WHEREçš„ç›¸åŒã€‚</li></ol><h2 id="è”ç»“å¤šä¸ªè¡¨">2.3. è”ç»“å¤šä¸ªè¡¨</h2><ol type="1"><li>SQLå¯¹ä¸€æ¡SELECTè¯­å¥ä¸­å¯ä»¥è”ç»“çš„è¡¨çš„æ•°ç›®æ²¡æœ‰é™åˆ¶ã€‚</li><li>MySQLåœ¨è¿è¡Œæ—¶å…³è”æŒ‡å®šçš„æ¯ä¸ªè¡¨ä»¥å¤„ç†è”ç»“ã€‚è¿™ç§å¤„ç†å¯èƒ½æ˜¯éå¸¸è€—è´¹èµ„æºçš„ï¼Œå› æ­¤åº”è¯¥ä»”ç»†ï¼Œä¸è¦è”ç»“ä¸å¿…è¦çš„è¡¨ã€‚è”ç»“çš„è¡¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™è¶Šå‰å®³ã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/1709298306319-1ffe32aa-822e-4c96-ba7a-1fd0c0328a88.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>å­æŸ¥è¯¢å¹¶ä¸æ€»æ˜¯æ‰§è¡Œå¤æ‚SELECTæ“ä½œçš„æœ€æœ‰æ•ˆçš„æ–¹æ³•ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨è”ç»“çš„ç›¸åŒæŸ¥è¯¢ï¼š</li><li><figure><img src="/2024/11/27/mysql_bzbh/15-%E8%81%94%E7%BB%93%E8%A1%A8/1709298365209-bd13a811-e615-44f5-8fc7-d4bc12a0c241.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>14. ä½¿ç”¨å­æŸ¥è¯¢</title>
    <link href="/2024/11/27/mysql_bzbh/14-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2/"/>
    <url>/2024/11/27/mysql_bzbh/14-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="å­æŸ¥è¯¢">1. å­æŸ¥è¯¢</h1><ol type="1"><li>æŸ¥è¯¢ï¼ˆqueryï¼‰ä»»ä½•SQLè¯­å¥éƒ½æ˜¯æŸ¥è¯¢ã€‚ä½†æ­¤æœ¯è¯­ä¸€èˆ¬æŒ‡SELECTè¯­å¥ã€‚</li></ol><h1 id="åˆ©ç”¨å­æŸ¥è¯¢è¿›è¡Œè¿‡æ»¤">2. åˆ©ç”¨å­æŸ¥è¯¢è¿›è¡Œè¿‡æ»¤</h1><ol type="1"><li></li></ol><figure><img src="/2024/11/27/mysql_bzbh/14-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2/1709296764469-91b78a45-90b3-4d8c-a2a8-3c359b7db66f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><p>åœ¨SELECTè¯­å¥ä¸­ï¼Œå­æŸ¥è¯¢æ€»æ˜¯ä»å†…å‘å¤–å¤„ç†ã€‚åœ¨å¤„ç†ä¸Šé¢çš„SELECTè¯­å¥æ—¶ï¼ŒMySQLå®é™…ä¸Šæ‰§è¡Œäº†ä¸¤ä¸ªæ“ä½œ</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/14-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2/1709296823200-8b0179c9-a8d2-470c-b055-8f8563aaa2a5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/14-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2/1709296830454-2085e010-651f-42e0-a4c2-128cd5f654a5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>åœ¨WHEREå­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢èƒ½å¤Ÿç¼–å†™å‡ºåŠŸèƒ½å¾ˆå¼ºå¹¶ä¸”å¾ˆçµæ´»çš„SQLè¯­å¥ã€‚å¯¹äºèƒ½åµŒå¥—çš„å­æŸ¥è¯¢çš„æ•°ç›®æ²¡æœ‰é™åˆ¶ï¼Œä¸è¿‡åœ¨å®é™…ä½¿ç”¨æ—¶ç”±äºæ€§èƒ½çš„é™åˆ¶ï¼Œä¸èƒ½åµŒå¥—å¤ªå¤šçš„å­æŸ¥è¯¢ã€‚</p></li><li><p>è™½ç„¶å­æŸ¥è¯¢ä¸€èˆ¬ä¸INæ“ä½œç¬¦ç»“åˆä½¿ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºæµ‹è¯•ç­‰äºï¼ˆ=ï¼‰ã€ä¸ç­‰äºï¼ˆ&lt;&gt;ï¼‰ç­‰ã€‚</p></li></ol><h1 id="ä½œä¸ºè®¡ç®—å­—æ®µä½¿ç”¨å­æŸ¥è¯¢">3. ä½œä¸ºè®¡ç®—å­—æ®µä½¿ç”¨å­æŸ¥è¯¢</h1><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/14-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2/1709297335999-7c879e14-6a32-4a34-9d2f-42e2f5cdcf23.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>ç›¸å…³å­æŸ¥è¯¢ï¼ˆcorrelated subqueryï¼‰æ¶‰åŠå¤–éƒ¨æŸ¥è¯¢çš„å­æŸ¥è¯¢ã€‚</p></li><li><p>ä»»ä½•æ—¶å€™åªè¦åˆ—åå¯èƒ½æœ‰å¤šä¹‰æ€§ï¼Œå°±å¿…é¡»ä½¿ç”¨è¿™ç§è¯­æ³•ï¼ˆè¡¨åå’Œåˆ—åç”±ä¸€ä¸ªå¥ç‚¹åˆ†éš”ï¼‰ã€‚</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. åˆ†ç»„æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®åˆ†ç»„">1. æ•°æ®åˆ†ç»„</h1><h1 id="åˆ›å»ºåˆ†ç»„">2. åˆ›å»ºåˆ†ç»„</h1><ol type="1"><li><p>group by</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709295017286-d3149aee-dceb-4a0b-9c62-c179bf4fc541.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>å¦‚æœåˆ†ç»„åˆ—ä¸­å…·æœ‰NULLå€¼ï¼Œåˆ™NULLå°†ä½œä¸ºä¸€ä¸ªåˆ†ç»„è¿”å›ã€‚å¦‚æœåˆ—ä¸­æœ‰å¤šè¡ŒNULLå€¼ï¼Œå®ƒä»¬å°†åˆ†ä¸ºä¸€ç»„ã€‚</li><li>GROUP BYå­å¥å¿…é¡»å‡ºç°åœ¨WHEREå­å¥ä¹‹åï¼ŒORDER BYå­å¥ä¹‹å‰</li></ol></li><li><p>ä½¿ç”¨ROLLUPä½¿ç”¨WITHROLLUPå…³é”®å­—ï¼Œå¯ä»¥å¾—åˆ°æ¯ä¸ªåˆ†ç»„ä»¥åŠæ¯ä¸ªåˆ†ç»„æ±‡æ€»çº§åˆ«ï¼ˆé’ˆå¯¹æ¯ä¸ªåˆ†ç»„ï¼‰çš„å€¼</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709295683630-d1b3822d-5c84-4649-8b1e-64946cf7dc90.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709295748704-a4dbe3ef-4734-4c2c-a10c-e9005cee7c7f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="è¿‡æ»¤åˆ†ç»„">3. è¿‡æ»¤åˆ†ç»„</h1><ol type="1"><li><p>è€ŒHAVINGè¿‡æ»¤åˆ†ç»„</p></li><li><p>HAVINGæ”¯æŒæ‰€æœ‰WHEREæ“ä½œç¬¦</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709295836933-582f6a3d-1843-4e1e-8a94-55cd6330e606.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¿™æ¡SELECTè¯­å¥çš„å‰3è¡Œç±»ä¼¼äºä¸Šé¢çš„è¯­å¥ã€‚æœ€åä¸€è¡Œå¢åŠ äº†HAVINGå­å¥ï¼Œå®ƒè¿‡æ»¤COUNT(*)&gt;=2ï¼ˆä¸¤ä¸ªä»¥ä¸Šçš„è®¢å•ï¼‰çš„é‚£äº›åˆ†ç»„ã€‚</li></ol></li><li><p>å®ƒåˆ—å‡ºå…·æœ‰2ä¸ªï¼ˆå«ï¼‰ä»¥ä¸Šã€ä»·æ ¼ä¸º10ï¼ˆå«ï¼‰ä»¥ä¸Šçš„äº§å“çš„ä¾›åº”å•†ï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709296196268-47df8f6f-0f7e-46f1-b895-1e2c62ceb5df.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="åˆ†ç»„å’Œæ’åº">4. åˆ†ç»„å’Œæ’åº</h1><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709296250260-ba274c64-9041-4894-9f5b-2a36471b83c7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709296318371-f5ab8914-28a6-45ba-9fce-b77569ca8fab.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="selectå­å¥é¡ºåº">5. selectå­å¥é¡ºåº</h1><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709296371345-2267b720-2be7-48dd-8090-ff3a87d01a4f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/13-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE/1709296381960-5a29ed7e-e7f1-4398-8fad-64a08483e544.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. æ±‡æ€»æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="èšé›†å‡½æ•°">1. èšé›†å‡½æ•°</h1><ol type="1"><li>èšé›†å‡½æ•°ï¼ˆaggregatefunctionï¼‰è¿è¡Œåœ¨è¡Œç»„ä¸Šï¼Œè®¡ç®—å’Œè¿”å›å•ä¸ªå€¼çš„å‡½æ•°</li><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292321228-ef9a78e1-a70c-49bc-9638-0fa021a78ac7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="avgå‡½æ•°">1.1. avg()å‡½æ•°</h2><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292350761-1d52b9ba-8765-42ff-849a-6638c2de32a5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><p>AVG()ä¹Ÿå¯ä»¥ç”¨æ¥ç¡®å®šç‰¹å®šåˆ—æˆ–è¡Œçš„å¹³å‡å€¼ã€‚ä¸‹é¢çš„ä¾‹å­è¿”å›ç‰¹å®šä¾›åº”å•†æ‰€æä¾›äº§å“çš„å¹³å‡ä»·æ ¼</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292391061-7a928902-acbc-4c4b-bbba-4428835c275f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>NULLå€¼AVG()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œã€‚</p></li><li><p><strong>åªç”¨äºå•ä¸ªåˆ—</strong>AVG()åªèƒ½ç”¨æ¥ç¡®å®šç‰¹å®šæ•°å€¼åˆ—çš„å¹³å‡å€¼ï¼Œè€Œä¸”åˆ—åå¿…é¡»ä½œä¸ºå‡½æ•°å‚æ•°ç»™å‡ºã€‚ä¸ºäº†è·å¾—å¤šä¸ªåˆ—çš„å¹³å‡å€¼ï¼Œå¿…é¡»ä½¿ç”¨å¤šä¸ªAVG()å‡½æ•°ã€‚</p></li></ol><h2 id="countå‡½æ•°">1.2. count()å‡½æ•°</h2><ol type="1"><li><p>ç”¨COUNT()ç¡®å®šè¡¨ä¸­è¡Œçš„æ•°ç›®æˆ–ç¬¦åˆç‰¹å®šæ¡ä»¶çš„è¡Œçš„æ•°ç›®ã€‚</p></li><li><p>COUNT()å‡½æ•°æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚</p></li><li><ol type="1"><li>ä½¿ç”¨COUNT(*)å¯¹è¡¨ä¸­è¡Œçš„æ•°ç›®è¿›è¡Œè®¡æ•°ï¼Œä¸ç®¡è¡¨åˆ—ä¸­åŒ…å«çš„æ˜¯ç©ºå€¼ï¼ˆNULLï¼‰è¿˜æ˜¯éç©ºå€¼ã€‚</li><li>ä½¿ç”¨COUNT(column)å¯¹ç‰¹å®šåˆ—ä¸­å…·æœ‰å€¼çš„è¡Œè¿›è¡Œè®¡æ•°ï¼Œå¿½ç•¥NULLå€¼ã€‚</li><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292603421-897e91c1-540c-404f-88f9-a02afd028214.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292625982-bfac2924-0f40-46f4-91de-18896b8e0dd6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="maxå‡½æ•°">1.3. max()å‡½æ•°</h2><ol type="1"><li><p>MAX()è¿”å›æŒ‡å®šåˆ—ä¸­çš„æœ€å¤§å€¼ã€‚MAX()è¦æ±‚æŒ‡å®šåˆ—å</p></li><li><ol type="1"><li><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709292673362-08298e58-4788-463d-9d38-7c2490f4fff3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>å¯¹éæ•°å€¼æ•°æ®ä½¿ç”¨MAX()è™½ç„¶MAX()ä¸€èˆ¬ç”¨æ¥æ‰¾å‡ºæœ€å¤§çš„æ•°å€¼æˆ–æ—¥æœŸå€¼ï¼Œä½†MySQLå…è®¸å°†å®ƒç”¨æ¥è¿”å›ä»»æ„åˆ—ä¸­çš„æœ€å¤§å€¼ï¼ŒåŒ…æ‹¬è¿”å›æ–‡æœ¬åˆ—ä¸­çš„æœ€å¤§å€¼ã€‚åœ¨ç”¨äºæ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®æŒ‰ç›¸åº”çš„åˆ—æ’åºï¼Œåˆ™MAX()è¿”å›æœ€åä¸€è¡Œã€‚</p></li><li><p>MAX()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œã€‚</p></li></ol><h2 id="minå‡½æ•°">1.4. min()å‡½æ•°</h2><ol type="1"><li>MIN()çš„åŠŸèƒ½æ­£å¥½ä¸MAX()åŠŸèƒ½ç›¸åï¼Œå®ƒè¿”å›æŒ‡å®šåˆ—çš„æœ€å°å€¼ã€‚</li></ol><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292750357-0e94a7e9-4e85-437f-93a6-fa28bef3ae9e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>å¯¹éæ•°å€¼æ•°æ®ä½¿ç”¨MIN()MIN()å‡½æ•°ä¸MAX()å‡½æ•°ç±»ä¼¼ï¼ŒMySQLå…è®¸å°†å®ƒç”¨æ¥è¿”å›ä»»æ„åˆ—ä¸­çš„æœ€å°å€¼ï¼ŒåŒ…æ‹¬è¿”å›æ–‡æœ¬åˆ—ä¸­çš„æœ€å°å€¼ã€‚åœ¨ç”¨äºæ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœæ•°æ®æŒ‰ç›¸åº”çš„åˆ—æ’åºï¼Œåˆ™MIN()è¿”å›æœ€å‰é¢çš„è¡Œã€‚</li></ol><h2 id="sumå‡½æ•°">1.5. sum()å‡½æ•°</h2><ol type="1"><li><p>SUM()ç”¨æ¥è¿”å›æŒ‡å®šåˆ—å€¼çš„å’Œï¼ˆæ€»è®¡ï¼‰ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709292973683-1f12793f-38f5-463f-bed4-c56ea27ba8aa.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>SUM()ä¹Ÿå¯ä»¥ç”¨æ¥åˆè®¡è®¡ç®—å€¼</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/12-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE/1709293002183-43df0b6d-cc97-4a56-b5fa-af3566725771.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>SUM()å‡½æ•°å¿½ç•¥åˆ—å€¼ä¸ºNULLçš„è¡Œã€‚</li></ol></li></ol><h1 id="èšé›†ä¸åŒå€¼">2. èšé›†ä¸åŒå€¼</h1><ol type="1"><li><p>èšé›†å‡½æ•°çš„DISTINCTçš„ä½¿ç”¨</p></li><li><ol type="1"><li><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709294624187-45f1d39c-76f9-4913-954a-608d1c564258.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>ä»¥ä¸Š5ä¸ªèšé›†å‡½æ•°éƒ½å¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š</p></li><li><ol type="1"><li>å¯¹æ‰€æœ‰çš„è¡Œæ‰§è¡Œè®¡ç®—ï¼ŒæŒ‡å®šALLå‚æ•°æˆ–ä¸ç»™å‚æ•°ï¼ˆå› ä¸ºALLæ˜¯é»˜è®¤è¡Œä¸ºï¼‰ï¼›</li><li>åªåŒ…å«ä¸åŒçš„å€¼ï¼ŒæŒ‡å®šDISTINCTå‚æ•°ã€‚</li><li>ALLä¸ºé»˜è®¤ALLå‚æ•°ä¸éœ€è¦æŒ‡å®šï¼Œå› ä¸ºå®ƒæ˜¯é»˜è®¤è¡Œä¸ºã€‚å¦‚æœä¸æŒ‡å®šDISTINCTï¼Œåˆ™å‡å®šä¸ºALLã€‚</li></ol></li><li><p>å¦‚æœæŒ‡å®šåˆ—åï¼Œåˆ™DISTINCTåªèƒ½ç”¨äºCOUNT()ã€‚DISTINCTä¸èƒ½ç”¨äºCOUNT(*)ï¼Œå› æ­¤ä¸å…è®¸ä½¿ç”¨COUNTï¼ˆDISTINCTï¼‰ï¼Œå¦åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚ç±»ä¼¼åœ°ï¼ŒDISTINCTå¿…é¡»ä½¿ç”¨åˆ—åï¼Œä¸èƒ½ç”¨äºè®¡ç®—æˆ–è¡¨è¾¾å¼ã€‚</p></li></ol><h1 id="ç»„åˆèšé›†å‡½æ•°">3. ç»„åˆèšé›†å‡½æ•°</h1><ol type="1"><li>å®é™…ä¸ŠSELECTè¯­å¥å¯æ ¹æ®éœ€è¦åŒ…å«å¤šä¸ªèšé›†å‡½æ•°ã€‚</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709294752463-abd2e5c9-0c4e-476c-8acc-cbbc7b1f5330.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709294759665-305b2b19-7838-423e-8f16-4a092980d344.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°</title>
    <link href="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/"/>
    <url>/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡½æ•°">1. å‡½æ•°</h1><h1 id="ä½¿ç”¨å‡½æ•°">2. ä½¿ç”¨å‡½æ•°</h1><h2 id="æ–‡æœ¬å¤„ç†å‡½æ•°">2.1. æ–‡æœ¬å¤„ç†å‡½æ•°</h2><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709290733408-606d6fc3-bcff-491a-a1ae-cc8463d8c90a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><p>Upperï¼ˆï¼‰</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709290753539-62c29f43-f6c4-4b42-9f22-5597f15e18f9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709290909490-513a0f94-317e-4711-9e3d-80c3109053c5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>SOUNDEXæ˜¯ä¸€ä¸ªå°†ä»»ä½•æ–‡æœ¬ä¸²è½¬æ¢ä¸ºæè¿°å…¶è¯­éŸ³è¡¨ç¤ºçš„å­—æ¯æ•°å­—æ¨¡å¼çš„ç®—æ³•ã€‚SOUNDEXè€ƒè™‘äº†ç±»ä¼¼çš„å‘éŸ³å­—ç¬¦å’ŒéŸ³èŠ‚ï¼Œä½¿å¾—èƒ½å¯¹ä¸²è¿›è¡Œå‘éŸ³æ¯”è¾ƒè€Œä¸æ˜¯å­—æ¯æ¯”è¾ƒ</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709291557152-4263219e-e23b-4d99-9a15-da4a32fe60f4.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°">2.2. æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•°</h2><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709291614367-de1c6d01-c12e-4b1c-86a1-9ffc4a769ab3.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><p>Dateï¼ˆï¼‰</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709291722780-14d87b67-24dc-40f5-bbbb-7b434fb50dd9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>å¦‚æœè¦çš„æ˜¯æ—¥æœŸï¼Œè¯·ä½¿ç”¨Date()å¦‚æœä½ æƒ³è¦çš„ä»…æ˜¯æ—¥æœŸï¼Œåˆ™ä½¿ç”¨Date()æ˜¯ä¸€ä¸ªè‰¯å¥½çš„ä¹ æƒ¯ï¼Œå³ä½¿ä½ çŸ¥é“ç›¸åº”çš„åˆ—åªåŒ…å«æ—¥æœŸä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ ·ï¼Œå¦‚æœç”±äºæŸç§åŸå› è¡¨ä¸­ä»¥åæœ‰æ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œä½ çš„SQLä»£ç ä¹Ÿä¸ç”¨æ”¹å˜ã€‚å½“ç„¶ï¼Œä¹Ÿå­˜åœ¨ä¸€ä¸ªTime()å‡½æ•°ï¼Œåœ¨ä½ åªæƒ³è¦æ—¶é—´æ—¶åº”è¯¥ä½¿ç”¨å®ƒã€‚</p></li><li><p>æƒ³æ£€ç´¢å‡º2005å¹´9æœˆä¸‹çš„æ‰€æœ‰è®¢å•</p></li><li><ol type="1"><li>between</li></ol></li><li><ol type="1"><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709292094788-5dc1b527-6c1f-4b2b-9d49-ce68fb595e0a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol></li><li><ol type="1"><li>year and month</li></ol></li></ol><h2 id="æ•°å€¼å¤„ç†å‡½æ•°">2.3. æ•°å€¼å¤„ç†å‡½æ•°</h2><figure><img src="/2024/11/27/mysql_bzbh/11-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0/1709292164259-6194f36a-992e-423c-90b9-149363127e80.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. åˆ›å»ºè®¡ç®—å­—æ®µ</title>
    <link href="/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/"/>
    <url>/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="è®¡ç®—å­—æ®µ">1. è®¡ç®—å­—æ®µ</h1><h1 id="æ‹¼æ¥å­—æ®µ">2. æ‹¼æ¥å­—æ®µ</h1><ol type="1"><li><p>æ‹¼æ¥ï¼ˆconcatenateï¼‰å°†å€¼è”ç»“åˆ°ä¸€èµ·æ„æˆå•ä¸ªå€¼ã€‚</p></li><li><p>åœ¨MySQLçš„SELECTè¯­å¥ä¸­ï¼Œå¯ä½¿ç”¨Concat()å‡½æ•°æ¥æ‹¼æ¥ä¸¤ä¸ªåˆ—</p></li><li><p>select concat(åˆ—1ï¼Œ'('ï¼Œåˆ—2ï¼Œ')'ï¼‰from è¡¨ order by åˆ—ï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/1709269185000-57620421-1242-4d66-a85e-5cf592549dbe.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>åˆ é™¤æ•°æ®å³ä¾§å¤šä½™çš„ç©ºæ ¼Rtrimï¼ˆï¼‰å‡½æ•°</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/1709269223840-4c199eb3-d6d6-489c-93c4-ff5822dfd871.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>Trimå‡½æ•°MySQLé™¤äº†æ”¯æŒRTrim()ï¼ˆæ­£å¦‚åˆšæ‰æ‰€è§ï¼Œå®ƒå»æ‰ä¸²å³è¾¹çš„ç©ºæ ¼ï¼‰ï¼Œè¿˜æ”¯æŒLTrim()ï¼ˆå»æ‰ä¸²å·¦è¾¹çš„ç©ºæ ¼ï¼‰ä»¥åŠTrim()ï¼ˆå»æ‰ä¸²å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼ï¼‰ã€‚</p></li><li><p>SQLæ”¯æŒåˆ—åˆ«åã€‚åˆ«åï¼ˆaliasï¼‰æ˜¯ä¸€ä¸ªå­—æ®µæˆ–å€¼çš„æ›¿æ¢åã€‚AS</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/1709269304147-44393f90-d5a9-405b-9162-6a3c4dbafdc0.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="æ‰§è¡Œç®—æ•°è®¡ç®—">3. æ‰§è¡Œç®—æ•°è®¡ç®—</h1><figure><img src="/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/1709269528335-6038d03e-6d8a-47c4-ab82-2b7fc5bb38cd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><p>æ”¯æŒç®—æ•°æ“ä½œç¬¦</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/10-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5/1709269571958-80e77549-4eb1-4998-89a0-1b07347eea04.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢</title>
    <link href="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/"/>
    <url>/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="æ­£åˆ™è¡¨è¾¾å¼ä»‹ç»">1. æ­£åˆ™è¡¨è¾¾å¼ä»‹ç»</h1><ol type="1"><li>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨æ¥åŒ¹é…æ–‡æœ¬çš„ç‰¹æ®Šçš„ä¸²ï¼ˆå­—ç¬¦é›†åˆï¼‰ã€‚</li></ol><h1 id="ä½¿ç”¨mysqlæ­£åˆ™è¡¨è¾¾å¼">2. ä½¿ç”¨MySQLæ­£åˆ™è¡¨è¾¾å¼</h1><h2 id="åŸºæœ¬å­—ç¬¦åŒ¹é…">2.1. åŸºæœ¬å­—ç¬¦åŒ¹é…</h2><ol type="1"><li><p>REGEXP</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709255000314-30aa6088-177b-4e6e-9947-1971f57d9e02.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>REGEXPåæ‰€è·Ÿçš„ä¸œè¥¿ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼ˆä¸æ–‡å­—æ­£æ–‡1000åŒ¹é…çš„ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼‰å¤„ç†</li></ol></li><li><p>.</p></li><li><ol type="1"><li><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709255053054-547a93ba-96b5-473a-8187-04ddb7160dc5.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ˜¯æ­£åˆ™è¡¨è¾¾å¼è¯­è¨€ä¸­ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ã€‚å®ƒè¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</li><li>LIKEåŒ¹é…æ•´ä¸ªåˆ—ã€‚å¦‚æœè¢«åŒ¹é…çš„æ–‡æœ¬åœ¨åˆ—å€¼ä¸­å‡ºç°ï¼ŒLIKEå°†ä¸ä¼šæ‰¾åˆ°å®ƒï¼Œç›¸åº”çš„è¡Œä¹Ÿä¸è¢«è¿”å›ï¼ˆé™¤éä½¿ç”¨é€šé…ç¬¦ï¼‰ã€‚è€ŒREGEXPåœ¨åˆ—å€¼å†…è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœè¢«åŒ¹é…çš„æ–‡æœ¬åœ¨åˆ—å€¼ä¸­å‡ºç°ï¼ŒREGEXPå°†ä¼šæ‰¾åˆ°å®ƒï¼Œç›¸åº”çš„è¡Œå°†è¢«è¿”å›ã€‚</li></ol></li></ol><h2 id="è¿›è¡ŒoråŒ¹é…">2.2. è¿›è¡ŒORåŒ¹é…</h2><ol type="1"><li><div class="line-block"></div></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709256076136-4cb06a73-d492-43f2-8de2-580f0712517f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="åŒ¹é…å‡ ä¸ªå­—ç¬¦ä¹‹ä¸€">2.3. åŒ¹é…å‡ ä¸ªå­—ç¬¦ä¹‹ä¸€</h2><ol type="1"><li><p>[]</p></li><li><ol type="1"><li>åŒ¹é…ä»»ä½•å•ä¸€å­—ç¬¦</li><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709256158003-3143cc9d-e156-4f51-a6ce-700c9856216d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>^</p></li><li><ol type="1"><li>å­—ç¬¦é›†åˆä¹Ÿå¯ä»¥è¢«å¦å®šï¼Œå³ï¼Œå®ƒä»¬å°†åŒ¹é…é™¤æŒ‡å®šå­—ç¬¦å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚ä¸ºå¦å®šä¸€ä¸ªå­—ç¬¦é›†ï¼Œåœ¨é›†åˆçš„å¼€å§‹å¤„æ”¾ç½®ä¸€ä¸ª^å³å¯ã€‚å› æ­¤ï¼Œå°½ç®¡[123]åŒ¹é…å­—ç¬¦1ã€2æˆ–3ï¼Œä½†[^123]å´åŒ¹é…é™¤è¿™äº›å­—ç¬¦å¤–çš„ä»»ä½•ä¸œè¥¿ã€‚</li></ol></li></ol><h2 id="åŒ¹é…èŒƒå›´">2.4. åŒ¹é…èŒƒå›´</h2><ol type="1"><li><p>èŒƒå›´ä¸é™äºå®Œæ•´çš„é›†åˆï¼Œ[1-3]å’Œ[6-9]ä¹Ÿæ˜¯åˆæ³•çš„èŒƒå›´ã€‚æ­¤å¤–ï¼ŒèŒƒå›´ä¸ä¸€å®šåªæ˜¯æ•°å€¼çš„ï¼Œ[a-z]åŒ¹é…ä»»æ„å­—æ¯å­—ç¬¦ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709256291260-e3a93c82-a569-4e61-a192-75f5939ef40e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="åŒ¹é…ç‰¹æ®Šå­—ç¬¦">2.5. åŒ¹é…ç‰¹æ®Šå­—ç¬¦</h2><ol type="1"><li><p>ä¸ºäº†åŒ¹é…ç‰¹æ®Šå­—ç¬¦ï¼Œå¿…é¡»ç”¨\ä¸ºå‰å¯¼ã€‚\-è¡¨ç¤ºæŸ¥æ‰¾-ï¼Œ\.è¡¨ç¤ºæŸ¥æ‰¾.ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709267866061-5c6c47f1-426d-45e2-a0cf-e8bf876c801a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>\ä¹Ÿç”¨æ¥å¼•ç”¨å…ƒå­—ç¬¦ï¼ˆå…·æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼‰</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709267885479-0f4fd154-8211-49c7-90de-dbec080044ab.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="åŒ¹é…å­—ç¬¦ç±»">2.6. åŒ¹é…å­—ç¬¦ç±»</h2><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709267971110-5bf20e50-ae10-4b95-8df2-88b453ac7183.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="åŒ¹é…å¤šä¸ªå®ä¾‹">2.7. åŒ¹é…å¤šä¸ªå®ä¾‹</h2><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709268032805-b50c73cf-cec9-4349-843f-bd351d78c6a7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><p>ï¼ŸåŒ¹é…åŒ¹é…å®ƒå‰é¢çš„ä»»ä½•å­—ç¬¦çš„0æ¬¡æˆ–1æ¬¡å‡ºç°</p></li><li><ol type="1"><li><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709268141659-43bea8bd-26f1-4a1f-b014-2448c30afd16.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>{n}</p></li><li><ol type="1"><li><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709268209646-3ff26f1c-b2b0-4179-a7c0-718ba626506f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="å®šä½ç¬¦">2.8. å®šä½ç¬¦</h2><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709268528336-2f816bbd-a7a7-4243-bed9-f7836af99263.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>^</li></ol><figure><img src="https://cdn.nlark.com/yuque/0/2024/png/35229143/1709268561611-f3126a99-1fb0-4dca-9446-6a00ecd989f7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li><sup>çš„åŒé‡ç”¨é€”</sup>æœ‰ä¸¤ç§ç”¨æ³•ã€‚åœ¨é›†åˆä¸­ï¼ˆç”¨[å’Œ]å®šä¹‰ï¼‰ï¼Œç”¨å®ƒæ¥å¦å®šè¯¥é›†åˆï¼Œå¦åˆ™ï¼Œç”¨æ¥æŒ‡ä¸²çš„å¼€å§‹å¤„</li><li>ä½¿REGEXPèµ·ç±»ä¼¼LIKEçš„ä½œç”¨æœ¬ç« å‰é¢è¯´è¿‡ï¼ŒLIKEå’ŒREGEXPçš„ä¸åŒåœ¨äºï¼ŒLIKEåŒ¹é…æ•´ä¸ªä¸²è€ŒREGEXPåŒ¹é…å­ä¸²ã€‚åˆ©ç”¨å®šä½ç¬¦ï¼Œé€šè¿‡ç”¨^å¼€å§‹æ¯ä¸ªè¡¨è¾¾å¼ï¼Œç”¨$ç»“æŸæ¯ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿REGEXPçš„ä½œç”¨ä¸LIKEä¸€æ ·</li><li><figure><img src="/2024/11/27/mysql_bzbh/9-%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%90%9C%E7%B4%A2/1709268721247-fd0fa368-1b3b-4f53-8718-a0c37528f620.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤</title>
    <link href="/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/"/>
    <url>/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="likeæ“ä½œç¬¦">1. Likeæ“ä½œç¬¦</h1><ol type="1"><li>é€šé…ç¬¦ï¼ˆwildcardï¼‰ç”¨æ¥åŒ¹é…å€¼çš„ä¸€éƒ¨åˆ†çš„ç‰¹æ®Šå­—ç¬¦</li></ol><h2 id="ç™¾åˆ†å·é€šé…ç¬¦">1.1. ç™¾åˆ†å·ï¼ˆ%ï¼‰é€šé…ç¬¦</h2><ol type="1"><li><p>åœ¨æœç´¢ä¸²ä¸­ï¼Œ%è¡¨ç¤ºä»»ä½•å­—ç¬¦å‡ºç°ä»»æ„æ¬¡æ•°ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/1709254266244-2a926d88-2755-4211-8478-26b2e8b58770.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ­¤ä¾‹å­ä½¿ç”¨äº†æœç´¢æ¨¡å¼'jet%'ã€‚åœ¨æ‰§è¡Œè¿™æ¡å­å¥æ—¶ï¼Œå°†æ£€ç´¢ä»»æ„ä»¥jetèµ·å¤´çš„è¯ã€‚%å‘Šè¯‰MySQLæ¥å—jetä¹‹åçš„ä»»æ„å­—ç¬¦ï¼Œä¸ç®¡å®ƒæœ‰å¤šå°‘å­—ç¬¦ã€‚</li><li>åŒºåˆ†å¤§å°å†™æ ¹æ®MySQLçš„é…ç½®æ–¹å¼ï¼Œæœç´¢å¯ä»¥æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚å¦‚æœåŒºåˆ†å¤§å°å†™ï¼Œ'jet%'ä¸JetPack1000å°†ä¸åŒ¹é…</li></ol></li><li><p>é€šé…ç¬¦å¯åœ¨æœç´¢æ¨¡å¼ä¸­ä»»æ„ä½ç½®ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šä¸ªé€šé…ç¬¦ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨ä¸¤ä¸ªé€šé…ç¬¦ï¼Œå®ƒä»¬ä½äºæ¨¡å¼çš„ä¸¤ç«¯</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/1709254331977-f88f561e-0a08-4488-a18e-7ac8be6536aa.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/1709254338929-ba0046b9-cd14-4e6d-b77c-8c1abafce15a.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>é€šé…ç¬¦ä¹Ÿå¯ä»¥å‡ºç°åœ¨æœç´¢æ¨¡å¼çš„ä¸­é—´ï¼Œè™½ç„¶è¿™æ ·åšä¸å¤ªæœ‰ç”¨ã€‚ä¸‹é¢çš„ä¾‹å­æ‰¾å‡ºä»¥sèµ·å¤´ä»¥eç»“å°¾çš„æ‰€æœ‰äº§å“ï¼š</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/1709254359653-30fe22a0-f867-437e-9c94-545fea6b4d06.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>%ä»£è¡¨æœç´¢æ¨¡å¼ä¸­ç»™å®šä½ç½®çš„0ä¸ªã€1ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚</li></ol></li><li><p>æ³¨æ„å°¾ç©ºæ ¼å°¾ç©ºæ ¼å¯èƒ½ä¼šå¹²æ‰°é€šé…ç¬¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¿å­˜è¯anvilæ—¶ï¼Œå¦‚æœå®ƒåé¢æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ï¼Œåˆ™å­å¥WHEREprod_name LIKE'%anvil'å°†ä¸ä¼šåŒ¹é…å®ƒä»¬ï¼Œå› ä¸ºåœ¨æœ€åçš„låæœ‰å¤šä½™çš„å­—ç¬¦ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªç®€å•çš„åŠæ³•æ˜¯åœ¨æœç´¢æ¨¡å¼æœ€åé™„åŠ ä¸€ä¸ª%ã€‚ä¸€ä¸ªæ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨å‡½æ•°ï¼ˆç¬¬11ç« å°†ä¼šä»‹ç»ï¼‰å»æ‰é¦–å°¾ç©ºæ ¼ã€‚</p></li><li><p>æ³¨æ„NULLè™½ç„¶ä¼¼ä¹%é€šé…ç¬¦å¯ä»¥åŒ¹é…ä»»ä½•ä¸œè¥¿ï¼Œä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå³NULLã€‚å³ä½¿æ˜¯WHEREprod_name LIKE '%'ä¹Ÿä¸èƒ½åŒ¹é…ç”¨å€¼NULLä½œä¸ºäº§å“åçš„è¡Œ</p></li></ol><h2 id="ä¸‹åˆ’çº¿_é€šé…ç¬¦">1.2. ä¸‹åˆ’çº¿ï¼ˆ_)é€šé…ç¬¦</h2><ol type="1"><li><p>ä¸‹åˆ’çº¿çš„ç”¨é€”ä¸%ä¸€æ ·ï¼Œä½†ä¸‹åˆ’çº¿åªåŒ¹é…å•ä¸ªå­—ç¬¦è€Œä¸æ˜¯å¤šä¸ªå­—ç¬¦ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/8-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4/1709254464941-7339b07e-0fdb-481f-be7b-ae548dc52d7f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>ä¸%èƒ½åŒ¹é…0ä¸ªå­—ç¬¦ä¸ä¸€æ ·ï¼Œ_æ€»æ˜¯åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘ã€‚</p></li></ol><h1 id="ä½¿ç”¨é€šé…ç¬¦çš„æŠ€å·§">2. ä½¿ç”¨é€šé…ç¬¦çš„æŠ€å·§</h1><ol type="1"><li>é€šé…ç¬¦æœç´¢çš„å¤„ç†ä¸€èˆ¬è¦æ¯”å‰é¢è®¨è®ºçš„å…¶ä»–æœç´¢æ‰€èŠ±æ—¶é—´æ›´é•¿</li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>7. æ•°æ®è¿‡æ»¤</title>
    <link href="/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/"/>
    <url>/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="ç»„åˆwhereå­å¥">1. ç»„åˆwhereå­å¥</h1><h2 id="andæ“ä½œç¬¦">1.1. ANDæ“ä½œç¬¦</h2><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/1709221345123-071bb109-d0c2-4867-b2ad-6bd3399a7dbd.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="oræ“ä½œç¬¦">1.2. ORæ“ä½œç¬¦</h2><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/1709221377423-5d05ed54-e66d-4c91-84b8-1dcf70f61523.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol><h2 id="è®¡ç®—æ¬¡åº">1.3. è®¡ç®—æ¬¡åº</h2><ol type="1"><li><p>å…ˆå¤„ç†ANDï¼Œå†å¤„ç†OR</p></li><li><p>åŠ æ‹¬å·å¯ä»¥æ”¹å˜æ¬¡åº</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/1709221455075-18ddfb92-ac4a-4e3e-8df7-13af547de775.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="inæ“ä½œç¬¦">2. INæ“ä½œç¬¦</h1><ol type="1"><li><p>INæ“ä½œç¬¦ç”¨æ¥æŒ‡å®šæ¡ä»¶èŒƒå›´ï¼ŒèŒƒå›´ä¸­çš„æ¯ä¸ªæ¡ä»¶éƒ½å¯ä»¥è¿›è¡ŒåŒ¹é…ã€‚INå–åˆæ³•å€¼çš„ç”±é€—å·åˆ†éš”çš„æ¸…å•ï¼Œå…¨éƒ½æ‹¬åœ¨åœ†æ‹¬å·ä¸­ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/1709221562174-507714b4-00c4-4d95-bdaf-d758bea1c34b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>åœ¨ä½¿ç”¨é•¿çš„åˆæ³•é€‰é¡¹æ¸…å•æ—¶ï¼ŒINæ“ä½œç¬¦çš„è¯­æ³•æ›´æ¸…æ¥šä¸”æ›´ç›´è§‚ã€‚</p></li><li><p>åœ¨ä½¿ç”¨INæ—¶ï¼Œè®¡ç®—çš„æ¬¡åºæ›´å®¹æ˜“ç®¡ç†ï¼ˆå› ä¸ºä½¿ç”¨çš„æ“ä½œç¬¦æ›´å°‘ï¼‰ã€‚</p></li><li><p>INæ“ä½œç¬¦ä¸€èˆ¬æ¯”ORæ“ä½œç¬¦æ¸…å•æ‰§è¡Œæ›´å¿«ã€‚</p></li><li><p>INçš„æœ€å¤§ä¼˜ç‚¹æ˜¯å¯ä»¥åŒ…å«å…¶ä»–SELECTè¯­å¥ï¼Œä½¿å¾—èƒ½å¤Ÿæ›´åŠ¨æ€åœ°å»ºç«‹WHEREå­å¥ã€‚ç¬¬14ç« å°†å¯¹æ­¤è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p></li></ol><h1 id="notæ“ä½œç¬¦">3. NOTæ“ä½œç¬¦</h1><ol type="1"><li><p>WHEREå­å¥ä¸­çš„NOTæ“ä½œç¬¦æœ‰ä¸”åªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œé‚£å°±æ˜¯å¦å®šå®ƒä¹‹åæ‰€è·Ÿçš„ä»»ä½•æ¡ä»¶ã€‚</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/7-%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4/1709221771191-1bd390ac-96b4-407f-b598-d8568a969e84.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. è¿‡æ»¤æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ä½¿ç”¨whereå­å¥">1. ä½¿ç”¨whereå­å¥</h1><ol type="1"><li>select åˆ— from è¡¨ where æ¡ä»¶ï¼›</li></ol><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709216953756-97816c10-4753-4f16-a165-b34fda1ff731.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="whereå­å¥æ“ä½œç¬¦">2. whereå­å¥æ“ä½œç¬¦</h1><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709219937066-9e782018-2947-44a8-80e8-eb247dd2760f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="æ£€æŸ¥å•ä¸ªå€¼">2.1. æ£€æŸ¥å•ä¸ªå€¼</h2><ol type="1"><li><p>=</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709219973870-38a2a4ea-ad27-42c7-9a32-e33861364d42.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>&lt;</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220024815-a1c994f7-3120-4fbb-9f0f-d51f323b431c.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>&lt;=</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220055685-f2743894-1f31-4867-b2ae-62374c2f7c02.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="ä¸åŒ¹é…æ£€æŸ¥">2.2. ä¸åŒ¹é…æ£€æŸ¥</h2><ol type="1"><li><p>&lt;&gt;</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220120654-3b7a71c7-dde7-4e81-aedb-23875d8ef8e9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>!=</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220158501-3cd25bcd-23e5-4a42-bd95-a3155aa58538.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>å•å¼•å·ç”¨æ¥é™å®šå­—ç¬¦ä¸²</li></ol></li></ol><h2 id="èŒƒå›´å€¼æ£€æŸ¥">2.3. èŒƒå›´å€¼æ£€æŸ¥</h2><ol type="1"><li><p>between</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220375657-4e8f3d51-139c-4533-abb7-0de9857f5ccb.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h2 id="ç©ºå€¼æ£€æŸ¥">2.4. ç©ºå€¼æ£€æŸ¥</h2><ol type="1"><li><p>is null</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220730542-12f4593a-7cb5-4ecc-9757-88ceb54dc8bc.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/6-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE/1709220890820-d69fe7ed-c6a8-4d36-97f5-6920dfaef092.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. æ’åºæ£€ç´¢æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="æ’åºæ•°æ®">1. æ’åºæ•°æ®</h1><ol type="1"><li>select åˆ— from è¡¨ order by åˆ—ï¼›</li></ol><figure><img src="/2024/11/27/mysql_bzbh/5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709216268455-4ba35ac7-1d2a-4e2e-9328-69282df4fdb1.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="æŒ‰å¤šä¸ªåˆ—æ’åº">2. æŒ‰å¤šä¸ªåˆ—æ’åº</h1><ol type="1"><li>select åˆ—1ï¼Œåˆ—2ï¼Œåˆ—3 from è¡¨ order by è¦æ’åºçš„åˆ—1 è¦æ’åºçš„åˆ—2ï¼›</li><li>ä¸‹é¢çš„ä»£ç æ£€ç´¢3ä¸ªåˆ—ï¼Œå¹¶æŒ‰å…¶ä¸­ä¸¤ä¸ªåˆ—å¯¹ç»“æœè¿›è¡Œæ’åºâ€”â€”é¦–å…ˆæŒ‰ä»·æ ¼ï¼Œç„¶åå†æŒ‰åç§°æ’åºã€‚</li></ol><figure><img src="/2024/11/27/mysql_bzbh/5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709216409961-d61dccea-ebd9-41fb-9781-0bfce7efb33d.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="æŒ‡å®šæ’åºæ–¹å‘">3. æŒ‡å®šæ’åºæ–¹å‘</h1><ol type="1"><li>é™åºæ’åº æŒ‡å®šDESCå…³é”®å­—ã€‚</li><li>select åˆ—1ï¼Œåˆ—2ï¼Œåˆ—3 from è¡¨ order by åˆ— descï¼›</li></ol><figure><img src="/2024/11/27/mysql_bzbh/5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709216558118-e73c3f73-5235-4716-bd2e-dd31b5e5f868.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol type="1"><li>select åˆ—1ï¼Œåˆ—2ï¼Œåˆ—3 from è¡¨ order by åˆ—1 descï¼Œåˆ—2ï¼›</li><li>DESCå…³é”®å­—åªåº”ç”¨åˆ°ç›´æ¥ä½äºå…¶å‰é¢çš„åˆ—åã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œåªå¯¹prod_priceåˆ—æŒ‡å®šDESCï¼Œå¯¹prod_nameåˆ—ä¸æŒ‡å®šã€‚å› æ­¤ï¼Œprod_priceåˆ—ä»¥é™åºæ’åºï¼Œè€Œprod_nameåˆ—ï¼ˆåœ¨æ¯ä¸ªä»·æ ¼å†…ï¼‰ä»ç„¶æŒ‰æ ‡å‡†çš„å‡åºæ’åºã€‚</li><li>åœ¨å¤šä¸ªåˆ—ä¸Šé™åºæ’åºå¦‚æœæƒ³åœ¨å¤šä¸ªåˆ—ä¸Šè¿›è¡Œé™åºæ’åºï¼Œå¿…é¡»å¯¹æ¯ä¸ªåˆ—æŒ‡å®šDESCå…³é”®å­—ã€‚</li><li>ä¸DESCç›¸åçš„å…³é”®å­—æ˜¯ASCï¼ˆASCENDINGï¼‰ï¼Œåœ¨å‡åºæ’åºæ—¶å¯ä»¥æŒ‡å®šå®ƒã€‚ä½†å®é™…ä¸Šï¼ŒASCæ²¡æœ‰å¤šå¤§ç”¨å¤„ï¼Œå› ä¸ºå‡åºæ˜¯é»˜è®¤çš„ï¼ˆå¦‚æœæ—¢ä¸æŒ‡å®šASCä¹Ÿä¸æŒ‡å®šDESCï¼Œåˆ™å‡å®šä¸ºASCï¼‰</li><li>åœ¨å­—å…¸ï¼ˆdictionaryï¼‰æ’åºé¡ºåºä¸­ï¼ŒAè¢«è§†ä¸ºä¸aç›¸åŒï¼Œè¿™æ˜¯MySQLï¼ˆå’Œå¤§å¤šæ•°æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼‰çš„é»˜è®¤è¡Œä¸ºã€‚</li><li>ä½¿ç”¨ORDER BYå’ŒLIMITçš„ç»„åˆï¼Œèƒ½å¤Ÿæ‰¾å‡ºä¸€ä¸ªåˆ—ä¸­æœ€é«˜æˆ–æœ€ä½çš„å€¼ã€‚</li></ol><figure><img src="/2024/11/27/mysql_bzbh/5-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709216705190-7dda1f6a-a24c-44fc-a8e6-7b9207c2d743.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. æ£€ç´¢æ•°æ®</title>
    <link href="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/"/>
    <url>/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="select-è¯­å¥">1. SELECT è¯­å¥</h1><h1 id="æ£€ç´¢å•ä¸ªåˆ—">2. æ£€ç´¢å•ä¸ªåˆ—</h1><ol type="1"><li><p>selectåˆ—å from tableåï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212065109-18c24bee-3ca6-4db8-866c-6b4e171b4ddf.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>SQLè¯­å¥ä¸åŒºåˆ†å¤§å°å†™</li></ol></li></ol><h1 id="æ£€ç´¢å¤šä¸ªåˆ—">3. æ£€ç´¢å¤šä¸ªåˆ—</h1><ol type="1"><li><p>selectåˆ—1ï¼Œåˆ—2ï¼Œåˆ—3 fromè¡¨ï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212146169-c4e94313-593b-4605-b77b-dd86a4a76a48.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="æ£€ç´¢æ‰€æœ‰åˆ—">4. æ£€ç´¢æ‰€æœ‰åˆ—</h1><ol type="1"><li><p>select * from è¡¨ï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212202738-ef0c407b-d621-4ace-be62-ce824a5ceab6.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>æ£€ç´¢æœªçŸ¥åˆ—ä½¿ç”¨é€šé…ç¬¦æœ‰ä¸€ä¸ªå¤§ä¼˜ç‚¹ã€‚ç”±äºä¸æ˜ç¡®æŒ‡å®šåˆ—åï¼ˆå› ä¸ºæ˜Ÿå·æ£€ç´¢æ¯ä¸ªåˆ—ï¼‰ï¼Œæ‰€ä»¥èƒ½æ£€ç´¢å‡ºåå­—æœªçŸ¥çš„åˆ—ã€‚</li></ol></li></ol><h1 id="æ£€ç´¢ä¸åŒçš„è¡Œ">5. æ£€ç´¢ä¸åŒçš„è¡Œ</h1><ol type="1"><li><p>select distinct åˆ— from è¡¨ï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212528678-ae43cbf8-d513-4594-acca-a43fb542f779.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212580288-50cb8345-c694-4aaa-8b14-21353c29536f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol><h1 id="é™åˆ¶ç»“æœ">6. é™åˆ¶ç»“æœ</h1><ol type="1"><li><p>select åˆ— from è¡¨ limit è¡Œæ•°ï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212620542-9412422e-dcf8-4f6c-83bd-aa8d33d0aea2.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li><li><p>select åˆ— from è¡¨ limit å¼€å§‹è¡Œï¼Œè¡Œæ•°ï¼›</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212655599-371645c9-12c2-4285-82bc-78844a4d6023.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li><li>è¡Œæ•°ä»0å¼€å§‹</li></ol></li></ol><h1 id="ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å">7. ä½¿ç”¨å®Œå…¨é™å®šçš„è¡¨å</h1><ol type="1"><li><p>select è¡¨.åˆ— from æ•°æ®åº“.è¡¨</p></li><li><ol type="1"><li><figure><img src="/2024/11/27/mysql_bzbh/4-%E6%A3%80%E7%B4%A2%E6%95%B0%E6%8D%AE/1709212763069-3bec05ad-60c9-4e57-a754-5d5a84bbfe38.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. ä½¿ç”¨MySQL</title>
    <link href="/2024/11/27/mysql_bzbh/3-%E4%BD%BF%E7%94%A8MySQL/"/>
    <url>/2024/11/27/mysql_bzbh/3-%E4%BD%BF%E7%94%A8MySQL/</url>
    
    <content type="html"><![CDATA[<h1 id="äº†è§£æ•°æ®åº“å’Œè¡¨">1. äº†è§£æ•°æ®åº“å’Œè¡¨</h1><p>ä¸ºäº†è¿æ¥åˆ°MySQLï¼Œéœ€è¦ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ä¸»æœºåï¼ˆè®¡ç®—æœºåï¼‰â€”â€”å¦‚æœè¿æ¥åˆ°æœ¬åœ°MySQLæœåŠ¡å™¨ï¼Œä¸ºlocalhostï¼›</li><li>ç«¯å£ï¼ˆå¦‚æœä½¿ç”¨é»˜è®¤ç«¯å£3306ä¹‹å¤–çš„ç«¯å£ï¼‰</li><li>ä¸€ä¸ªåˆæ³•çš„ç”¨æˆ·åï¼›</li><li>ç”¨æˆ·å£ä»¤ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚</li></ul><p>mysql -h localhost -u root -p</p><h1 id="é€‰æ‹©æ•°æ®åº“">2. é€‰æ‹©æ•°æ®åº“</h1><p>use æ•°æ®åº“åç§°</p><figure><img src="/2024/11/27/mysql_bzbh/3-%E4%BD%BF%E7%94%A8MySQL/1709086189109-db4181a4-a8f9-4f0e-8ed9-49e86c9fc171.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h1 id="äº†è§£æ•°æ®åº“å’Œè¡¨-1">3. äº†è§£æ•°æ®åº“å’Œè¡¨</h1><ol type="1"><li>MySQLçš„SHOWå‘½ä»¤æ¥æ˜¾ç¤ºè¿™äº›ä¿¡æ¯</li></ol><figure><img src="/2024/11/27/mysql_bzbh/3-%E4%BD%BF%E7%94%A8MySQL/1709085355781-f5fb64ef-6049-4e55-862f-df83d923c659.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/3-%E4%BD%BF%E7%94%A8MySQL/1709085387550-613a105a-0e51-4c3c-881a-cc1614f404f7.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><figure><img src="/2024/11/27/mysql_bzbh/3-%E4%BD%BF%E7%94%A8MySQL/1709085455021-e9e48aea-d6fa-4769-93ec-e440f77ed2ff.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p>SHOW COLUMNSè¦æ±‚ç»™å‡ºä¸€ä¸ªè¡¨åï¼ˆè¿™ä¸ªä¾‹å­ä¸­çš„FROMcustomersï¼‰ï¼Œå®ƒå¯¹æ¯ä¸ªå­—æ®µè¿”å›ä¸€è¡Œï¼Œè¡Œä¸­åŒ…å«å­—æ®µåã€æ•°æ®ç±»å‹ã€æ˜¯å¦å…è®¸NULLã€é”®ä¿¡æ¯ã€é»˜è®¤å€¼ä»¥åŠå…¶ä»–ä¿¡æ¯ï¼ˆå¦‚å­—æ®µcust_idçš„auto_incrementï¼‰ã€‚</p><ol type="1"><li><p>æ‰€æ”¯æŒçš„å…¶ä»–SHOWè¯­å¥è¿˜æœ‰ï¼š</p></li><li><ol type="1"><li>SHOW STATUSï¼Œç”¨äºæ˜¾ç¤ºå¹¿æ³›çš„æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ï¼›</li><li>SHOW CREATE DATABASEå’ŒSHOW CREATETABLEï¼Œåˆ†åˆ«ç”¨æ¥æ˜¾ç¤ºåˆ›å»ºç‰¹å®šæ•°æ®åº“æˆ–è¡¨çš„MySQLè¯­å¥ï¼›</li><li>SHOW GRANTSï¼Œç”¨æ¥æ˜¾ç¤ºæˆäºˆç”¨æˆ·ï¼ˆæ‰€æœ‰ç”¨æˆ·æˆ–ç‰¹å®šç”¨æˆ·ï¼‰çš„å®‰å…¨æƒé™ï¼›</li><li>SHOW ERRORSå’ŒSHOW WARNINGSï¼Œç”¨æ¥æ˜¾ç¤ºæœåŠ¡å™¨é”™è¯¯æˆ–è­¦å‘Šæ¶ˆæ¯ã€‚</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. äº†è§£SQL</title>
    <link href="/2024/11/27/mysql_bzbh/1-%E4%BA%86%E8%A7%A3SQL/"/>
    <url>/2024/11/27/mysql_bzbh/1-%E4%BA%86%E8%A7%A3SQL/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®åº“åŸºç¡€">1. æ•°æ®åº“åŸºç¡€</h1><h2 id="ä»€ä¹ˆæ˜¯æ•°æ®åº“">1.1. ä»€ä¹ˆæ˜¯æ•°æ®åº“</h2><ul><li>æ•°æ®åº“ï¼ˆdatabaseï¼‰ä¿å­˜æœ‰ç»„ç»‡çš„æ•°æ®çš„å®¹å™¨ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ç»„æ–‡ä»¶ï¼‰ã€‚</li></ul><h2 id="è¡¨">1.2. è¡¨</h2><ul><li><p>è¡¨ï¼ˆtableï¼‰æŸç§ç‰¹å®šç±»å‹æ•°æ®çš„ç»“æ„åŒ–æ¸…å•</p></li><li><p>æ¨¡å¼ï¼ˆschemaï¼‰å…³äºæ•°æ®åº“å’Œè¡¨çš„å¸ƒå±€åŠç‰¹æ€§çš„ä¿¡æ¯ã€‚</p></li></ul><h2 id="åˆ—å’Œæ•°æ®ç±»å‹">1.3. åˆ—å’Œæ•°æ®ç±»å‹</h2><ol type="1"><li>è¡¨ç”±åˆ—ç»„æˆã€‚åˆ—ä¸­å­˜å‚¨ç€è¡¨ä¸­æŸéƒ¨åˆ†çš„ä¿¡æ¯ã€‚</li><li>åˆ—ï¼ˆcolumnï¼‰è¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µã€‚æ‰€æœ‰è¡¨éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ç»„æˆçš„ã€‚</li><li>æ•°æ®åº“ä¸­æ¯ä¸ªåˆ—éƒ½æœ‰ç›¸åº”çš„æ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹å®šä¹‰åˆ—å¯ä»¥å­˜å‚¨çš„æ•°æ®ç§ç±»ã€‚</li><li>æ•°æ®ç±»å‹ï¼ˆdatatypeï¼‰æ‰€å®¹è®¸çš„æ•°æ®çš„ç±»å‹ã€‚æ¯ä¸ªè¡¨åˆ—éƒ½æœ‰ç›¸åº”çš„æ•°æ®ç±»å‹ï¼Œå®ƒé™åˆ¶ï¼ˆæˆ–å®¹è®¸ï¼‰è¯¥åˆ—ä¸­å­˜å‚¨çš„æ•°æ®ã€‚</li><li>æ•°æ®ç±»å‹é™åˆ¶å¯å­˜å‚¨åœ¨åˆ—ä¸­çš„æ•°æ®ç§ç±»ï¼ˆä¾‹å¦‚ï¼Œé˜²æ­¢åœ¨æ•°å€¼å­—æ®µä¸­å½•å…¥å­—ç¬¦å€¼ï¼‰ã€‚æ•°æ®ç±»å‹è¿˜å¸®åŠ©æ­£ç¡®åœ°æ’åºæ•°æ®ï¼Œå¹¶åœ¨ä¼˜åŒ–ç£ç›˜ä½¿ç”¨æ–¹é¢èµ·é‡è¦çš„ä½œç”¨ã€‚</li></ol><h2 id="è¡Œ">1.4. è¡Œ</h2><p>è¡Œï¼ˆrowï¼‰è¡¨ä¸­çš„ä¸€ä¸ªè®°å½•ã€‚</p><p>è¡¨ä¸­çš„æ•°æ®æ˜¯æŒ‰è¡Œå­˜å‚¨çš„ï¼Œæ‰€ä¿å­˜çš„æ¯ä¸ªè®°å½•å­˜å‚¨åœ¨è‡ªå·±çš„è¡Œå†…ã€‚å¦‚æœå°†è¡¨æƒ³è±¡ä¸ºç½‘æ ¼ï¼Œç½‘æ ¼ä¸­å‚ç›´çš„åˆ—ä¸ºè¡¨åˆ—ï¼Œæ°´å¹³è¡Œä¸ºè¡¨è¡Œã€‚</p><h2 id="ä¸»é”®">1.5. ä¸»é”®</h2><ol type="1"><li><p>è¡¨ä¸­æ¯ä¸€è¡Œéƒ½åº”è¯¥æœ‰å¯ä»¥å”¯ä¸€æ ‡è¯†è‡ªå·±çš„ä¸€åˆ—ï¼ˆæˆ–ä¸€ç»„åˆ—ï¼‰ã€‚</p></li><li><p>ä¸»é”®ï¼ˆprimarykeyï¼‰ä¸€åˆ—ï¼ˆæˆ–ä¸€ç»„åˆ—ï¼‰ï¼Œå…¶å€¼èƒ½å¤Ÿå”¯ä¸€åŒºåˆ†è¡¨ä¸­æ¯ä¸ªè¡Œã€‚</p></li><li><p>å”¯ä¸€æ ‡è¯†è¡¨ä¸­æ¯è¡Œçš„è¿™ä¸ªåˆ—ï¼ˆæˆ–è¿™ç»„åˆ—ï¼‰ç§°ä¸ºä¸»é”®ã€‚ä¸»é”®ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç‰¹å®šçš„è¡Œã€‚æ²¡æœ‰ä¸»é”®ï¼Œæ›´æ–°æˆ–åˆ é™¤è¡¨ä¸­ç‰¹å®šè¡Œå¾ˆå›°éš¾ï¼Œå› ä¸ºæ²¡æœ‰å®‰å…¨çš„æ–¹æ³•ä¿è¯åªæ¶‰åŠç›¸å…³çš„è¡Œã€‚</p></li><li><p>åº”è¯¥æ€»æ˜¯å®šä¹‰ä¸»é”®è™½ç„¶å¹¶ä¸æ€»æ˜¯éƒ½éœ€è¦ä¸»é”®ï¼Œä½†å¤§å¤šæ•°æ•°æ®åº“è®¾è®¡äººå‘˜éƒ½åº”ä¿è¯ä»–ä»¬åˆ›å»ºçš„æ¯ä¸ªè¡¨å…·æœ‰ä¸€ä¸ªä¸»é”®ï¼Œä»¥ä¾¿äºä»¥åçš„æ•°æ®æ“çºµå’Œç®¡ç†ã€‚</p></li><li><p>è¡¨ä¸­çš„ä»»ä½•åˆ—éƒ½å¯ä»¥ä½œä¸ºä¸»é”®ï¼Œåªè¦å®ƒæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p></li><li><ol type="1"><li>ä»»æ„ä¸¤è¡Œéƒ½ä¸å…·æœ‰ç›¸åŒçš„ä¸»é”®å€¼ï¼›</li><li>æ¯ä¸ªè¡Œéƒ½å¿…é¡»å…·æœ‰ä¸€ä¸ªä¸»é”®å€¼ï¼ˆä¸»é”®åˆ—ä¸å…è®¸NULLå€¼ï¼‰ã€‚</li></ol></li></ol><h1 id="ä»€ä¹ˆæ˜¯sql">2. ä»€ä¹ˆæ˜¯SQL</h1><p>SQLï¼ˆå‘éŸ³ä¸ºå­—æ¯S-Q-Læˆ–sequelï¼‰æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆStructured QueryLanguageï¼‰çš„ç¼©å†™ã€‚SQLæ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥ä¸æ•°æ®åº“é€šä¿¡çš„è¯­è¨€ã€‚</p><ul><li>å‘½ä»¤è¾“å…¥åœ¨mysql&gt;ä¹‹åï¼›</li><li>å‘½ä»¤ç”¨;æˆ–ï¼Œæ¢å¥è¯è¯´ï¼Œä»…æŒ‰Enterä¸æ‰§è¡Œå‘½ä»¤ï¼›</li><li>è¾“å…¥helpæˆ–ï¼Œä¹Ÿå¯ä»¥è¾“å…¥æ›´å¤šçš„æ–‡æœ¬è·å¾—ç‰¹å®šå‘½ä»¤çš„å¸®åŠ©ï¼ˆå¦‚ï¼Œè¾“å…¥helpselectè·å¾—ä½¿ç”¨SELECTè¯­å¥çš„å¸®åŠ©ï¼‰ï¼›</li><li>è¾“å…¥quitæˆ–exité€€å‡ºå‘½ä»¤è¡Œå®ç”¨ç¨‹åºã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQLå¿…çŸ¥å¿…ä¼š</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQLå¿…çŸ¥å¿…ä¼š</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1. æ•°ç»„</title>
    <link href="/2024/11/27/leetcode/1-%E6%95%B0%E7%BB%84/"/>
    <url>/2024/11/27/leetcode/1-%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>leetcode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>13. MySQLç®¡ç†</title>
    <link href="/2024/11/27/MySQL/13-MySQL%E7%AE%A1%E7%90%86/"/>
    <url>/2024/11/27/MySQL/13-MySQL%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="mysqlç®¡ç†">MySQLç®¡ç†</h1><h2 id="ç³»ç»Ÿæ•°æ®åº“">ç³»ç»Ÿæ•°æ®åº“</h2><p>MySQLæ•°æ®åº“å®‰è£…å®Œæˆåï¼Œè‡ªå¸¦äº†ä»¥ä¸‹å››ä¸ªæ•°æ®åº“ï¼Œå…·ä½“ä½œç”¨å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æ•°æ®åº“</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>mysql</td><td>å­˜å‚¨ MySQLæœåŠ¡å™¨æ­£å¸¸è¿è¡Œæ‰€éœ€è¦çš„å„ç§ä¿¡æ¯ï¼ˆæ—¶åŒºã€ä¸»ä»ã€ç”¨æˆ·ã€æƒé™ç­‰ï¼‰</td></tr><tr><td>information_schema</td><td>æä¾›äº†è®¿é—®æ•°æ®åº“å…ƒæ•°æ®çš„å„ç§è¡¨å’Œè§†å›¾ï¼ŒåŒ…å«æ•°æ®åº“ã€è¡¨ã€å­—æ®µç±»å‹åŠè®¿é—®æƒé™ç­‰</td></tr><tr><td>performance_schema</td><td>ä¸º MySQLæœåŠ¡å™¨è¿è¡Œæ—¶çŠ¶æ€æä¾›äº†ä¸€ä¸ªåº•å±‚ç›‘æ§åŠŸèƒ½ï¼Œä¸»è¦ç”¨äºæ”¶é›†æ•°æ®åº“æœåŠ¡å™¨æ€§èƒ½å’Œå‚æ•°</td></tr><tr><td>sys</td><td>åŒ…å«äº†ä¸€ç³»åˆ—æ–¹ä¾¿ DBA å’Œå¼€å‘äººå‘˜åˆ©ç”¨ performance_schemaæ€§èƒ½æ•°æ®åº“è¿›è¡Œæ€§èƒ½è°ƒä¼˜å’Œè¯Šæ–­çš„è§†å›¾</td></tr></tbody></table><h2 id="å¸¸ç”¨å·¥å…·">å¸¸ç”¨å·¥å…·</h2><ul><li><strong>MySQL</strong></li></ul><p>è¯¥MySQLä¸æ˜¯æŒ‡MySQLæœåŠ¡ï¼Œè€Œæ˜¯æŒ‡MySQLçš„å®¢æˆ·ç«¯å·¥å…·ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¯­æ³•ï¼š<br>      mysql [options][database]<br>é€‰é¡¹ï¼š<br>      -u, --user=name             #æŒ‡å®šç”¨æˆ·å<br>      -p, --password[=name]       #æŒ‡å®šå¯†ç <br>      -h, --host=name             #æŒ‡å®šæœåŠ¡å™¨IPæˆ–åŸŸå<br>      -P, --port=port             #æŒ‡å®šè¿æ¥ç«¯å£<br>      -e, --execute=name          #æ‰§è¡ŒSQLè¯­å¥å¹¶é€€å‡º<br></code></pre></td></tr></table></figure><p>-eé€‰é¡¹å¯ä»¥åœ¨MySQLå®¢æˆ·ç«¯æ‰§è¡ŒSQLè¯­å¥ï¼Œè€Œä¸ç”¨è¿æ¥åˆ°MySQLæ•°æ®åº“å†æ‰§è¡Œï¼Œå¯¹äºä¸€äº›æ‰¹å¤„ç†è„šæœ¬ï¼Œè¿™ç§æ–¹å¼å°¤å…¶æ–¹ä¾¿ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ç¤ºä¾‹ï¼š<br>  mysql -h192.168.200.202 -P3306 -uroot -p1234 itcast -e &quot;select * from stu&quot;<br></code></pre></td></tr></table></figure><ul><li><strong>mysqladmin</strong></li></ul><p>mysqladminæ˜¯ä¸€ä¸ªæ‰§è¡Œç®¡ç†æ“ä½œçš„å®¢æˆ·ç«¯ç¨‹åºã€‚å¯ä»¥ç”¨å®ƒæ¥æ£€æŸ¥æœåŠ¡å™¨çš„é…ç½®å’Œå½“å‰çŠ¶æ€ã€åˆ›å»ºå¹¶åˆ é™¤æ•°æ®åº“ç­‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">é€šè¿‡å¸®åŠ©æ–‡æ¡£æŸ¥çœ‹é€‰é¡¹ï¼š<br>  mysqladmin --help<br>ç¤ºä¾‹ï¼š<br>  mysqladmin -uroot -p123456 drop &#x27;test01&#x27;;<br>  musqladmin -uroot -p123456 version;<br></code></pre></td></tr></table></figure><ul><li><strong>mysqlbinlog</strong></li></ul><p>ç”±äºæœåŠ¡å™¨ç”Ÿæˆçš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ ¼å¼ä¿å­˜ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦æ£€æŸ¥è¿™äº›æ–‡æœ¬çš„æ–‡æœ¬æ ¼å¼ï¼Œå°±ä¼šä½¿ç”¨åˆ°mysqlbinlogæ—¥å¿—ç®¡ç†å·¥å…·ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¯­æ³•ï¼š<br>  mysqlbinlog [options] log-files1 log-files2 ...<br>é€‰é¡¹ï¼š<br>  -d, --database=name        #æŒ‡å®šæ•°æ®åº“åç§°ï¼Œåªåˆ—å‡ºæŒ‡å®šçš„æ•°æ®åº“ç›¸å…³æ“ä½œ<br>  -o, --offset=#             #å¿½ç•¥æ‰æ—¥å¿—ä¸­çš„å‰nè¡Œå‘½ä»¤<br>  -r, --result-file=name    #å°†è¾“å‡ºçš„æ–‡æœ¬æ ¼å¼æ—¥å¿—è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶<br>  -s, --short-form          #æ˜¾ç¤ºç®€å•ä¸ªæ ¼å¼ï¼Œçœç•¥æ‰ä¸€äº›ä¿¡æ¯<br>  --start-datatime=date1 --stop-datetime=date2    #æŒ‡å®šæ—¥æœŸé—´éš”å†…çš„æ‰€æœ‰æ—¥å¿—<br>  --start-postion=pos1 --stop-postion=pos2        #æŒ‡å®šä½ç½®é—´éš”å†…çš„æ‰€æœ‰æ—¥å¿—<br></code></pre></td></tr></table></figure><ul><li><strong>mysqlshow</strong></li></ul><p>mysqlshowå®¢æˆ·ç«¯å¯¹è±¡æŸ¥æ‰¾å·¥å…·ï¼Œç”¨æ¥å¾ˆå¿«åœ°æŸ¥æ‰¾å­˜åœ¨å“ªäº›æ•°æ®åº“ã€æ•°æ®åº“ä¸­çš„è¡¨ã€è¡¨ä¸­çš„åˆ—æˆ–ç´¢å¼•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¯­æ³•ï¼š<br>  mysqlshow [options][db_name[table_name[col_name]]]<br>é€‰é¡¹ï¼š<br>  --count        #æ˜¾ç¤ºæ•°æ®åº“åŠè¡¨çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ•°æ®åº“ï¼Œè¡¨å‡å¯ä»¥ä¸æŒ‡å®šï¼‰<br>  -i            #æ˜¾ç¤ºæŒ‡å®šæ•°æ®åº“æˆ–è€…æŒ‡å®šè¡¨çš„çŠ¶æ€ä¿¡æ¯<br>ç¤ºä¾‹ï¼š<br>  #æŸ¥è¯¢æ¯ä¸ªæ•°æ®åº“çš„è¡¨çš„æ•°é‡åŠè¡¨ä¸­è®°å½•çš„æ•°é‡<br>  mysqlshow -uroot -p2143 --count<br><br>  #æŸ¥è¯¢teståº“ä¸­æ¯ä¸ªè¡¨ä¸­çš„å­—æ®µæ•°ï¼ŒåŠè¡Œæ•°<br>  mysqlshow -uroot -p2143 --count<br><br>  #æŸ¥è¯¢teståº“ä¸­bookè¡¨çš„è¯¦ç»†æƒ…å†µ<br>  mysqlshow -uroot -p2143 test book --count<br></code></pre></td></tr></table></figure><ul><li><strong>mysqldump</strong></li></ul><p>mysqldumpå®¢æˆ·ç«¯å·¥å…·ç”¨æ¥å¤‡ä»½æ•°æ®åº“æˆ–åœ¨ä¸åŒæ•°æ®åº“ä¹‹é—´è¿›è¡Œæ•°æ®è¿ç§»ã€‚å¤‡ä»½å†…å®¹åŒ…å«åˆ›å»ºè¡¨ï¼ŒåŠæ’å…¥è¡¨çš„SQLè¯­å¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¯­æ³•ï¼š<br>  mysqldump [options] db_name [tables]<br>  mysqldump [options] --database/-B db1 [db2 db3 ...]<br>  mysqldump [options] -all-databases/-A<br>è¿æ¥é€‰é¡¹ï¼š<br>  -u, --user=name        #æŒ‡å®šç”¨æˆ·å<br>  -p, -password[=name]  #æŒ‡å®šå¯†ç <br>  -h, --host=name        #æŒ‡å®šæœåŠ¡å™¨ipæˆ–åŸŸå<br>  -P, --port=#          #æŒ‡å®šè¿æ¥ç«¯å£<br>è¾“å‡ºé€‰é¡¹ï¼š<br>  --add-drop-database      #åœ¨æ¯ä¸ªæ•°æ®åº“åˆ›å»ºè¯­å¥å‰åŠ ä¸Šdrop databaseè¯­å¥<br>  --add-drop-table         #åœ¨æ¯ä¸ªè¡¨åˆ›å»ºè¯­å¥å‰åŠ ä¸Šdrop tableè¯­å¥ï¼Œé»˜è®¤å¼€å¯ï¼›ä¸å¼€å¯(--skip-add-drop-table)<br>  -n, --no-create-db       #ä¸åŒ…å«æ•°æ®åº“çš„åˆ›å»ºè¯­å¥<br>  -t, --no-create-info     #ä¸åŒ…å«æ•°æ®åº“çš„åˆ›å»ºè¯­å¥<br>  -d, --no-data           #ä¸åŒ…å«æ•°æ®<br>  -T, --tab=name           #è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼šä¸€ä¸ª.sqlæ–‡ä»¶ï¼Œåˆ›å»ºè¡¨ç»“æ„çš„è¯­å¥ï¼›ä¸€ä¸ª.txtæ–‡ä»¶ï¼Œæ•°æ®æ–‡ä»¶<br></code></pre></td></tr></table></figure><ul><li><strong>mysqlimport/souce</strong></li></ul><p>mysqlimportæ˜¯å®¢æˆ·ç«¯æ•°æ®å¯¼å…¥å·¥å…·ï¼Œç”¨æ¥å¯¼å…¥mysqldumpåŠ -Tå‚æ•°åå¯¼å‡ºçš„æ–‡æœ¬æ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¯­æ³•ï¼š<br>  mysqlimport [options] db_name testfile1 [textfile2...]<br>ç¤ºä¾‹ï¼š<br>  mysqlimport -uroot -p2143 test tmp/city.txt<br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦å¯¼å…¥sqlæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨mysqlä¸­çš„sourceæŒ‡ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¯­æ³•ï¼š<br>  source /root/xxxxx.sql<br></code></pre></td></tr></table></figure><h1 id="æƒé™ä¸€è§ˆè¡¨">æƒé™ä¸€è§ˆè¡¨</h1><blockquote><p>å…·ä½“æƒé™çš„ä½œç”¨è¯¦è§<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html" title="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><p>GRANT å’Œ REVOKE å…è®¸çš„é™æ€æƒé™</p><table><thead><tr><th style="text-align: left;">Privilege</th><th style="text-align: left;">Grant Table Column</th><th style="text-align: left;">Context</th></tr></thead><tbody><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_all"><code>ALL [PRIVILEGES]</code></a></td><td style="text-align: left;">Synonym for â€œall privilegesâ€</td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter"><code>ALTER</code></a></td><td style="text-align: left;"><code>Alter_priv</code></td><td style="text-align: left;">Tables</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter-routine"><code>ALTER ROUTINE</code></a></td><td style="text-align: left;"><code>Alter_routine_priv</code></td><td style="text-align: left;">Stored routines</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create"><code>CREATE</code></a></td><td style="text-align: left;"><code>Create_priv</code></td><td style="text-align: left;">Databases, tables, or indexes</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-role"><code>CREATE ROLE</code></a></td><td style="text-align: left;"><code>Create_role_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-routine"><code>CREATE ROUTINE</code></a></td><td style="text-align: left;"><code>Create_routine_priv</code></td><td style="text-align: left;">Stored routines</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-tablespace"><code>CREATE TABLESPACE</code></a></td><td style="text-align: left;"><code>Create_tablespace_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-temporary-tables"><code>CREATE TEMPORARY TABLES</code></a></td><td style="text-align: left;"><code>Create_tmp_table_priv</code></td><td style="text-align: left;">Tables</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-user"><code>CREATE USER</code></a></td><td style="text-align: left;"><code>Create_user_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-view"><code>CREATE VIEW</code></a></td><td style="text-align: left;"><code>Create_view_priv</code></td><td style="text-align: left;">Views</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_delete"><code>DELETE</code></a></td><td style="text-align: left;"><code>Delete_priv</code></td><td style="text-align: left;">Tables</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop"><code>DROP</code></a></td><td style="text-align: left;"><code>Drop_priv</code></td><td style="text-align: left;">Databases, tables, or views</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop-role"><code>DROP ROLE</code></a></td><td style="text-align: left;"><code>Drop_role_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_event"><code>EVENT</code></a></td><td style="text-align: left;"><code>Event_priv</code></td><td style="text-align: left;">Databases</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_execute"><code>EXECUTE</code></a></td><td style="text-align: left;"><code>Execute_priv</code></td><td style="text-align: left;">Stored routines</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_file"><code>FILE</code></a></td><td style="text-align: left;"><code>File_priv</code></td><td style="text-align: left;">File access on server host</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_grant-option"><code>GRANT OPTION</code></a></td><td style="text-align: left;"><code>Grant_priv</code></td><td style="text-align: left;">Databases, tables, or stored routines</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_index"><code>INDEX</code></a></td><td style="text-align: left;"><code>Index_priv</code></td><td style="text-align: left;">Tables</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_insert"><code>INSERT</code></a></td><td style="text-align: left;"><code>Insert_priv</code></td><td style="text-align: left;">Tables or columns</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_lock-tables"><code>LOCK TABLES</code></a></td><td style="text-align: left;"><code>Lock_tables_priv</code></td><td style="text-align: left;">Databases</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_process"><code>PROCESS</code></a></td><td style="text-align: left;"><code>Process_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_proxy"><code>PROXY</code></a></td><td style="text-align: left;">See <code>proxies_priv</code> table</td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_references"><code>REFERENCES</code></a></td><td style="text-align: left;"><code>References_priv</code></td><td style="text-align: left;">Databases or tables</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload"><code>RELOAD</code></a></td><td style="text-align: left;"><code>Reload_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-client"><code>REPLICATION CLIENT</code></a></td><td style="text-align: left;"><code>Repl_client_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave"><code>REPLICATION SLAVE</code></a></td><td style="text-align: left;"><code>Repl_slave_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_select"><code>SELECT</code></a></td><td style="text-align: left;"><code>Select_priv</code></td><td style="text-align: left;">Tables or columns</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-databases"><code>SHOW DATABASES</code></a></td><td style="text-align: left;"><code>Show_db_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-view"><code>SHOW VIEW</code></a></td><td style="text-align: left;"><code>Show_view_priv</code></td><td style="text-align: left;">Views</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_shutdown"><code>SHUTDOWN</code></a></td><td style="text-align: left;"><code>Shutdown_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_super"><code>SUPER</code></a></td><td style="text-align: left;"><code>Super_priv</code></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_trigger"><code>TRIGGER</code></a></td><td style="text-align: left;"><code>Trigger_priv</code></td><td style="text-align: left;">Tables</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_update"><code>UPDATE</code></a></td><td style="text-align: left;"><code>Update_priv</code></td><td style="text-align: left;">Tables or columns</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_usage"><code>USAGE</code></a></td><td style="text-align: left;">Synonym for â€œno privilegesâ€</td><td style="text-align: left;">Server administration</td></tr></tbody></table><p>GRANT å’Œ REVOKE å…è®¸çš„åŠ¨æ€æƒé™</p><table><thead><tr><th style="text-align: left;">Privilege</th><th style="text-align: left;">Context</th></tr></thead><tbody><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_application-password-admin"><code>APPLICATION_PASSWORD_ADMIN</code></a></td><td style="text-align: left;">Dual password administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-abort-exempt"><code>AUDIT_ABORT_EXEMPT</code></a></td><td style="text-align: left;">Allow queries blocked by audit logfilter</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-admin"><code>AUDIT_ADMIN</code></a></td><td style="text-align: left;">Audit log administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_authentication-policy-admin"><code>AUTHENTICATION_POLICY_ADMIN</code></a></td><td style="text-align: left;">Authentication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_backup-admin"><code>BACKUP_ADMIN</code></a></td><td style="text-align: left;">Backup administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-admin"><code>BINLOG_ADMIN</code></a></td><td style="text-align: left;">Backup and Replication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-encryption-admin"><code>BINLOG_ENCRYPTION_ADMIN</code></a></td><td style="text-align: left;">Backup and Replication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_clone-admin"><code>CLONE_ADMIN</code></a></td><td style="text-align: left;">Clone administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_connection-admin"><code>CONNECTION_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_encryption-key-admin"><code>ENCRYPTION_KEY_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-admin"><code>FIREWALL_ADMIN</code></a></td><td style="text-align: left;">Firewall administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-exempt"><code>FIREWALL_EXEMPT</code></a></td><td style="text-align: left;">Firewall administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-user"><code>FIREWALL_USER</code></a></td><td style="text-align: left;">Firewall administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-optimizer-costs"><code>FLUSH_OPTIMIZER_COSTS</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-status"><code>FLUSH_STATUS</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-tables"><code>FLUSH_TABLES</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-user-resources"><code>FLUSH_USER_RESOURCES</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-admin"><code>GROUP_REPLICATION_ADMIN</code></a></td><td style="text-align: left;">Replication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-stream"><code>GROUP_REPLICATION_STREAM</code></a></td><td style="text-align: left;">Replication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_innodb-redo-log-archive"><code>INNODB_REDO_LOG_ARCHIVE</code></a></td><td style="text-align: left;">Redo log archiving administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_ndb-stored-user"><code>NDB_STORED_USER</code></a></td><td style="text-align: left;">NDB Cluster</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_passwordless-user-admin"><code>PASSWORDLESS_USER_ADMIN</code></a></td><td style="text-align: left;">Authentication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_persist-ro-variables-admin"><code>PERSIST_RO_VARIABLES_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-applier"><code>REPLICATION_APPLIER</code></a></td><td style="text-align: left;"><code>PRIVILEGE_CHECKS_USER</code> for areplication channel</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave-admin"><code>REPLICATION_SLAVE_ADMIN</code></a></td><td style="text-align: left;">Replication administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-admin"><code>RESOURCE_GROUP_ADMIN</code></a></td><td style="text-align: left;">Resource group administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-user"><code>RESOURCE_GROUP_USER</code></a></td><td style="text-align: left;">Resource group administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_role-admin"><code>ROLE_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_session-variables-admin"><code>SESSION_VARIABLES_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_set-user-id"><code>SET_USER_ID</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-routine"><code>SHOW_ROUTINE</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-user"><code>SYSTEM_USER</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-variables-admin"><code>SYSTEM_VARIABLES_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_table-encryption-admin"><code>TABLE_ENCRYPTION_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_version-token-admin"><code>VERSION_TOKEN_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr><tr><td style="text-align: left;"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_xa-recover-admin"><code>XA_RECOVER_ADMIN</code></a></td><td style="text-align: left;">Server administration</td></tr></tbody></table><h1 id="å›¾å½¢åŒ–ç•Œé¢å·¥å…·">å›¾å½¢åŒ–ç•Œé¢å·¥å…·</h1><ul><li>Workbench(å…è´¹): http://dev.mysql.com/downloads/workbench/</li><li>navicat(æ”¶è´¹ï¼Œè¯•ç”¨ç‰ˆ30å¤©):https://www.navicat.com/en/download/navicat-for-mysql</li><li>Sequel Pro(å¼€æºå…è´¹ï¼Œä»…æ”¯æŒMac OS): http://www.sequelpro.com/</li><li>HeidiSQL(å…è´¹): http://www.heidisql.com/</li><li>phpMyAdmin(å…è´¹): https://www.phpmyadmin.net/</li><li>SQLyog: https://sqlyog.en.softonic.com/</li></ul><h1 id="å°æŠ€å·§">å°æŠ€å·§</h1><ol type="1"><li>åœ¨SQLè¯­å¥ä¹‹ååŠ ä¸Š<code>\G</code>ä¼šå°†ç»“æœçš„è¡¨æ ¼å½¢å¼è½¬æ¢æˆè¡Œæ–‡æœ¬å½¢å¼</li><li>æŸ¥çœ‹Mysqlæ•°æ®åº“å ç”¨ç©ºé—´ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT table_schema &quot;Database Name&quot;<br>     , SUM(data_length + index_length) / (1024 * 1024) &quot;Database Size in MB&quot;<br>FROM information_schema.TABLES<br>GROUP BY table_schema;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>12. InnoDBå¼•æ“</title>
    <link href="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/"/>
    <url>/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/</url>
    
    <content type="html"><![CDATA[<h1 id="innodbå¼•æ“">InnoDBå¼•æ“</h1><h2 id="é€»è¾‘å­˜å‚¨ç»“æ„">é€»è¾‘å­˜å‚¨ç»“æ„</h2><ul><li>è¡¨ç©ºé—´ï¼ˆibdæ–‡ä»¶ï¼‰ï¼šä¸€ä¸ªMySQLå®ä¾‹å¯ä»¥å¯¹åº”å¤šä¸ªè¡¨ç©ºé—´ï¼Œç”¨äºå­˜å‚¨è®°å½•ã€ç´¢å¼•ç­‰æ•°æ®ã€‚</li><li>æ®µï¼šåˆ†ä¸ºæ•°æ®æ®µï¼ˆLeaf node segmentï¼‰ã€ç´¢å¼•æ®µï¼ˆNon-leaf nodesegmentï¼‰ã€å›æ»šæ®µï¼ˆRollbacksegmentï¼‰ï¼ŒInnoDBæ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œæ•°æ®æ®µå°±æ˜¯B+æ ‘çš„å¶å­ç»“ç‚¹ï¼Œç´¢å¼•æ®µå°±æ˜¯B+æ ‘çš„éå¶å­ç»“ç‚¹ã€‚æ®µç”¨æ¥å½“ç®¡ç†å¤šä¸ªExtentï¼ˆåŒºï¼‰ã€‚</li><li>åŒºï¼šè¡¨ç©ºé—´çš„å•å…ƒç»“æ„ï¼Œæ¯ä¸ªåŒºçš„å¤§å°ä¸º1Mã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBå­˜å‚¨å¼•æ“é¡µå¤§å°ä¸º16Kï¼Œå³ä¸€ä¸ªåŒºä¸­ä¸€å…±æœ‰64ä¸ªè¿ç»­çš„é¡µã€‚</li><li>é¡µï¼šæ˜¯InnoDBå­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•å…ƒï¼Œæ¯ä¸ªé¡µçš„å¤§å°é»˜è®¤ä¸º16KBã€‚ä¸ºäº†ä¿è¯é¡µçš„è¿ç»­æ€§ï¼ŒInnoDBå­˜å‚¨å¼•æ“æ¯æ¬¡ä»ç£ç›˜ç”³è¯·4-5ä¸ªåŒºã€‚</li><li>è¡Œï¼šInnoDBå­˜å‚¨å¼•æ“æ•°æ®å°±æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ã€‚</li></ul><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/a4be8ac711730c4b9cbfd7851d05a841.png"></p><h2 id="æ¶æ„">æ¶æ„</h2><p>MySQL5.5ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“ï¼Œå®ƒæ“…é•¿äº‹åŠ¡å¤„ç†ï¼Œå…·æœ‰å´©æºƒæ¢å¤ç‰¹æ€§ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨éå¸¸å¹¿æ³›ã€‚ä¸‹é¢æ˜¯InnoDBæ¶æ„å›¾ï¼Œå·¦ä¾§ä¸ºå†…å­˜ç»“æ„ï¼Œå³ä¾§ä¸ºç£ç›˜ç»“æ„ã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/154be1df094926cf7a6e96848a49c2f2.png"></p><p><strong>å†…å­˜ç»“æ„</strong></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/e194374d0695833b5ef9fbbc779146eb.png"></p><p>ChangeBuffer:æ›´æ”¹ç¼“å†²åŒºï¼ˆé’ˆå¯¹äºéå”¯ä¸€äºŒçº§ç´¢å¼•é¡µï¼‰ï¼Œåœ¨æ‰§è¡ŒDMLè¯­å¥æ—¶ï¼Œå¦‚æœè¿™äº›æ•°æ®Pageæ²¡æœ‰åœ¨BufferPoolä¸­ï¼Œä¸ä¼šç›´æ¥æ“ä½œç£ç›˜ï¼Œè€Œä¼šå°†æ•°æ®å˜æ›´å­˜åœ¨æ›´æ”¹ç¼“å†²åŒºChangeBufferä¸­ï¼Œåœ¨æœªæ¥æ•°æ®è¢«è¯»å–æ—¶ï¼Œå†å°†æ•°æ®åˆå¹¶æ¢å¤åˆ°BufferPoolrä¸­ï¼Œå†å°†åˆå¹¶åçš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚</p><p>Change Bufferlçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿä¸èšé›†ç´¢å¼•ä¸åŒï¼ŒäºŒçº§ç´¢å¼•é€šå¸¸æ˜¯éå”¯ä¸€çš„ï¼Œå¹¶ä¸”ä»¥ç›¸å¯¹éšæœºçš„é¡ºåºæ’å…¥äºŒçº§ç´¢å¼•ã€‚åŒæ ·ï¼Œåˆ é™¤å’Œæ›´æ–°å¯èƒ½ä¼šå½±å“ç´¢å¼•æ ‘ä¸­ä¸ç›¸é‚»çš„äºŒçº§ç´¢å¼•é¡µï¼Œå¦‚æœæ¯ä¸€æ¬¡éƒ½æ“ä½œç£ç›˜ï¼Œä¼šé€ æˆå¤§é‡çš„ç£ç›˜Oã€‚æœ‰äº†ChangeBufä»Ÿerä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼“å†²æ± ä¸­è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œå‡å°‘ç£ç›˜IOã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/56d1ef907694171dd3fba8742f95c6e8.png"></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/6a215517c813ad6407777eb757ac43da.png"></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/c111753c5af95905e94829bdc7b98178.png"></p><p><strong>ç£ç›˜ç»“æ„</strong></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/5e58c5ac575edf08776d5b439e863855.png"></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/504a5c804f7924bebb3ec0114072f45e.png"></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/dae5c143e5710c2a298cb14a81aa8bd0.png"></p><p><strong>åå°çº¿ç¨‹</strong></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/436f8bcfcb6656368431f1193d136070.png"></p><h2 id="äº‹åŠ¡åŸç†">äº‹åŠ¡åŸç†</h2><p><strong>äº‹åŠ¡</strong></p><p>äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p><strong>ç‰¹æ€§</strong></p><ul><li>åŸå­æ€§ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</li><li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€ã€‚</li><li>éš”ç¦»æ€§ï¼šæ•°æ®åº“æä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹ä¸è¿è¡Œã€‚</li><li>æŒä¹…æ€§ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ã€‚</li></ul><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/2743a68525ec8dfd89c0cb1c9687d526.png"></p><p><strong>redo logï¼ˆæŒä¹…æ€§ï¼‰</strong></p><p>é‡åšæ—¥å¿—ï¼Œè®°å½•çš„æ˜¯äº‹åŠ¡æäº¤æ—¶æ•°æ®é¡µçš„ç‰©ç†ä¿®æ”¹ï¼Œæ˜¯ç”¨æ¥å®ç°äº‹åŠ¡çš„æ°¸ä¹…æ€§ã€‚</p><p>è¯¥æ—¥å¿—æ–‡ä»¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šé‡åšæ—¥å¿—ç¼“å†²ï¼ˆredo logbufferï¼‰ä»¥åŠé‡åšæ—¥å¿—æ–‡ä»¶ï¼ˆredo logfileï¼‰ï¼Œå‰è€…æ˜¯åœ¨å†…å­˜ä¸­ï¼Œåè€…åœ¨ç£ç›˜ä¸­ã€‚å½“äº‹åŠ¡æäº¤ä¹‹åä¼šæŠŠæ‰€æœ‰ä¿®æ”¹ä¿¡æ¯éƒ½å­˜åˆ°è¯¥æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œç”¨äºåœ¨åˆ·æ–°è„é¡µåˆ°ç£ç›˜ï¼Œå‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¿›è¡Œæ•°æ®æ¢å¤ä½¿ç”¨ã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/47311bddaa9c578fecbdca4f9de271b9.png"></p><p><strong>undo logï¼ˆåŸå­æ€§ï¼‰</strong></p><p>å›æ»šæ—¥å¿—ï¼Œç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹å‰çš„ä¿¡æ¯ï¼Œä½œç”¨åŒ…å«ä¸¤ä¸ªï¼šæä¾›å›æ»šå’ŒMVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ã€‚</p><p>Undo logå’Œredologè®°å½•ç‰©ç†æ—¥å¿—ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯é€»è¾‘æ—¥å¿—ã€‚å¯ä»¥è®¤ä¸ºå½“deleteä¸€æ¡è®°å½•æ—¶ï¼Œundologä¸­ä¼šè®°å½•ä¸€æ¡å¯¹åº”çš„insertè®°å½•ï¼Œåä¹‹äº¦ç„¶ï¼Œå½“updateä¸€æ¡è®°å½•æ—¶ï¼Œå®ƒè®°å½•ä¸€æ¡å¯¹åº”ç›¸åçš„updateè®°å½•ã€‚å½“æ‰§è¡Œrollbackæ—¶ï¼Œå°±å¯ä»¥ä»undologä¸­çš„é€»è¾‘è®°å½•è¯»å–åˆ°ç›¸åº”çš„å†…å®¹å¹¶è¿›è¡Œå›æ»šã€‚</p><p>Undo logé”€æ¯ï¼šUndologåœ¨äº‹åŠ¡æ‰§è¡Œæ—¶äº§ç”Ÿï¼Œäº‹åŠ¡æäº¤æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³åˆ é™¤undologï¼Œå› ä¸ºè¿™äº›æ—¥å¿—å¯èƒ½è¿˜ç”¨ä¸MVCCã€‚</p><p>Undo logå­˜å‚¨ï¼šUndologé‡‡ç”¨æ®µçš„æ–¹å¼è¿›è¡Œç®¡ç†å’Œè®°å½•ï¼Œå­˜æ”¾åœ¨å‰é¢ä»‹ç»çš„rollbacksegmentå›æ»šæ®µä¸­ï¼Œå†…éƒ¨åŒ…å«1024ä¸ªundo log segmentã€‚</p><h2 id="mvcc"><strong>MVCC</strong></h2><p><strong>åŸºæœ¬æ¦‚å¿µ</strong></p><ul><li>å½“å‰è¯»</li></ul><p>è¯»å–çš„æ˜¯è®°å½•çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯»å–æ—¶è¿˜è¦ä¿è¯å…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½ä¿®æ”¹å½“å‰è®°å½•ï¼Œä¼šå¯¹è¯»å–çš„è®°å½•è¿›è¡ŒåŠ é”ã€‚å¯¹äºæˆ‘ä»¬æ—¥å¸¸çš„æ“ä½œï¼Œå¦‚ï¼šselect... lock in share modeï¼ˆå…±äº«é”ï¼‰ï¼Œselect ... forupdateã€updateã€insertã€deleteï¼ˆæ’ä»–é”ï¼‰éƒ½æ˜¯ä¸€ç§å½“å‰è¯»ã€‚</p><ul><li>å¿«ç…§è¯»</li></ul><p>ç®€å•çš„selectï¼ˆä¸åŠ é”ï¼‰å°±æ˜¯å¿«ç…§è¯»ï¼Œè¯»å–çš„æ˜¯è®°å½•æ•°æ®çš„å¯è§ç‰ˆæœ¬ï¼Œæœ‰å¯èƒ½æ˜¯å†å²æ•°æ®ï¼Œä¸åŠ é”ï¼Œæ˜¯éé˜»å¡è¯»ã€‚</p><ul><li>Read Committedï¼šæ¯æ¬¡selectï¼Œéƒ½ç”Ÿæˆä¸€ä¸ªå¿«ç…§è¯»ã€‚</li><li>Repeatable Readï¼šå¼€å¯äº‹åŠ¡åç¬¬ä¸€ä¸ªselectè¯­å¥æ‰æ˜¯å¿«ç…§è¯»çš„åœ°æ–¹ã€‚</li><li>Serializableï¼šå¿«ç…§è¯»ä¼šé€€åŒ–æˆå½“å‰è¯»ã€‚</li><li>MVCC</li></ul><p>å…¨ç§°Multi-Version ConcurrencyControlï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚æŒ‡ç»´æŠ¤ä¸€ä¸ªæ•°æ®çš„å¤šç‰ˆæœ¬ï¼Œä½¿å¾—è¯»å†™æ“ä½œæ²¡æœ‰å†²çªï¼Œå¿«ç…§è¯»ä¸ºMySQLå®ç°MVCCæä¾›äº†ä¸€ä¸ªéé˜»å¡è¯»åŠŸèƒ½ã€‚MVCCçš„å…·ä½“å®ç°ï¼Œè¿˜éœ€è¦ä¾èµ–äºæ•°æ®åº“è®°å½•ä¸­çš„ä¸‰ä¸ªéšå¼å­—æ®µã€undologæ—¥å¿—å’ŒreadViewã€‚</p><p><strong>å®ç°åŸç†</strong></p><ul><li>è®°å½•ä¸­çš„éšè—å­—æ®µ</li></ul><table><thead><tr><th>éšè—å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>DB_TRX_ID</td><td>æœ€è¿‘ä¿®æ”¹äº‹åŠ¡ ID ï¼Œè®°å½•æ’å…¥è¿™æ¡è®°å½•æˆ–æœ€åä¸€æ¬¡ä¿®æ”¹è¯¥è®°å½•çš„äº‹åŠ¡ ID</td></tr><tr><td>DB_ROLL_PTR</td><td>å›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç”¨äºé…åˆ undologï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬</td></tr><tr><td>DB_ROW_ID</td><td>éšè—ä¸»é”®ï¼Œå¦‚æœè¡¨ç»“æ„æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œå°†ä¼šç”Ÿæˆè¯¥éšè—å­—æ®µ</td></tr></tbody></table><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/09c3c6c452d9229f44380fcb330f1e04.png"></p><ul><li>undo log</li></ul><p>å›æ»šæ—¥å¿—ï¼Œåœ¨insertã€updateã€deleteçš„æ—¶å€™äº§ç”Ÿçš„ä¾¿äºæ•°æ®å›æ»šçš„æ—¥å¿—ã€‚</p><p>å½“insertçš„æ—¶å€™ï¼Œäº§ç”Ÿçš„undologæ—¥å¿—åªåœ¨å›æ»šæ—¶éœ€è¦ï¼Œåœ¨äº‹åŠ¡æäº¤åï¼Œå¯è¢«ç«‹å³åˆ é™¤ã€‚</p><p>è€Œupdateã€deleteçš„æ—¶å€™ï¼Œäº§ç”Ÿçš„undologæ—¥å¿—ä¸ä»…åœ¨å›æ»šæ—¶éœ€è¦ï¼Œåœ¨å¿«ç…§è¯»æ—¶ä¹Ÿéœ€è¦ï¼Œä¸ä¼šç«‹å³è¢«åˆ é™¤ã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/5524cc0377798b96956bded8002e068f.png"></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/0f1655bfbdb52e26d7bf6863df8f2661.png"></p><ul><li>undo logç‰ˆæœ¬é“¾</li></ul><p>ä¸åŒäº‹ç‰©æˆ–ç›¸åŒäº‹ç‰©å¯¹åŒä¸€æ¡è®°å½•è¿›è¡Œä¿®æ”¹ï¼Œä¼šå¯¼è‡´è¯¥è®°å½•çš„undologç”Ÿæˆä¸€æ¡è®°å½•ç‰ˆæœ¬é“¾è¡¨ï¼Œé“¾è¡¨çš„å¤´éƒ¨æ˜¯æœ€æ–°çš„æ—§è®°å½•ï¼Œé“¾è¡¨å°¾éƒ¨æ˜¯æœ€æ—©çš„æ—§è®°å½•ã€‚</p><ul><li>readview</li></ul><p>ReadViewï¼ˆè¯»è§†å›¾ï¼‰æ˜¯å¿«ç…§è¯»SQLæ‰§è¡Œæ—¶MVCCæå–æ•°æ®çš„ä¾æ®ï¼Œè®°å½•å¹¶ç»´æŠ¤ç³»ç»Ÿå½“å‰æ´»è·ƒçš„äº‹åŠ¡ï¼ˆæœªæäº¤çš„ï¼‰idã€‚</p><p>ReadViewä¸­åŒ…å«äº†å››ä¸ªæ ¸å¿ƒå­—æ®µï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>m_ids</td><td>å½“å‰æ´»è·ƒçš„äº‹åŠ¡ ID é›†åˆ</td></tr><tr><td>min_trx_id</td><td>æœ€å°æ´»è·ƒäº‹åŠ¡ ID</td></tr><tr><td>max_trx_id</td><td>é¢„åˆ†é…äº‹åŠ¡ ID ï¼Œå½“å‰æœ€å¤§äº‹åŠ¡ ID+1ï¼ˆå› ä¸ºäº‹åŠ¡ ID æ˜¯è‡ªå¢çš„ï¼‰</td></tr><tr><td>creator_trx_id</td><td>ReadView åˆ›å»ºè€…çš„äº‹åŠ¡ ID</td></tr></tbody></table><p>trx_idï¼šä»£è¡¨æ˜¯å½“å‰äº‹åŠ¡IDã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/5c172e97eeb3b8673d409dff1ba16e55.png"></p><p>ä¸åŒéš”ç¦»çº§åˆ«ï¼Œç”ŸæˆReadViewçš„æ—¶æœºä¸åŒï¼š</p><ul><li>READ COMMITTEDï¼šåœ¨äº‹åŠ¡ä¸­æ¯ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”Ÿæˆçš„ReadViewã€‚</li><li>REPEATABLEREADï¼šä»…åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”ŸæˆReadViewï¼Œåç»­å¤ç”¨è¯¥ReadViewã€‚</li></ul><p>RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œåœ¨äº‹åŠ¡ä¸­æ¯ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»ç”ŸæˆReadViewã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/c316d3409280d2606c10d28531d9a677.png"></p><p>RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œä»…åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œå¿«ç…§è¯»ç”ŸæˆReadViewï¼Œåç»­å¤ç”¨è¯¥ReadViewã€‚</p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/655a74bc2ae1836ebacdea25e0913039.png"></p><p><img src="/2024/11/27/MySQL/12-InnoDB%E5%BC%95%E6%93%8E/d168be0e5ded71955fdfd219d3e0edb0.png"></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>11. é”</title>
    <link href="/2024/11/27/MySQL/11-%E9%94%81/"/>
    <url>/2024/11/27/MySQL/11-%E9%94%81/</url>
    
    <content type="html"><![CDATA[<h1 id="äº”é”">äº”ã€é”</h1><h2 id="æ¦‚è¿°">1. æ¦‚è¿°</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><p>é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œé™¤ä¼ ç»Ÿçš„è®¡ç®—èµ„æºï¼ˆCPUã€RAMã€I/Oï¼‰çš„äº‰ç”¨ä»¥å¤–ï¼Œæ•°æ®ä¹Ÿæ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«çš„èµ„æºã€‚å¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§æ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œé”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œé”å¯¹æ•°æ®åº“è€Œè¨€æ˜¾å¾—å°¤å…¶é‡è¦ï¼Œä¹Ÿæ›´åŠ å¤æ‚ã€‚</p><h3 id="åˆ†ç±»">åˆ†ç±»</h3><p>MySQLä¸­çš„é”ï¼ŒæŒ‰ç…§é”çš„ç²’åº¦åˆ†ï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ol type="1"><li>å…¨å±€é”ï¼šé”å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ã€‚</li><li>è¡¨çº§é”ï¼šæ¯æ¬¡æ“ä½œé”ä½æ•´å¼ è¡¨ã€‚</li><li>è¡Œçº§é”ï¼šæ¯æ¬¡æ“ä½œé”ä½å¯¹åº”çš„è¡Œæ•°æ®ã€‚</li></ol><h2 id="å…¨å±€é”">2. å…¨å±€é”</h2><h3 id="ä»‹ç»-1">ä»‹ç»</h3><p>å…¨å±€é”å°±æ˜¯å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ï¼ŒåŠ é”åæ•´ä¸ªå®ä¾‹å°±å¤„äºåªè¯»çŠ¶æ€ï¼Œåç»­çš„DMLçš„å†™è¯­å¥ï¼ŒDDLè¯­å¥ï¼Œå·²ç»æ›´æ–°æ“ä½œçš„äº‹åŠ¡æäº¤è¯­å¥éƒ½å°†è¢«é˜»å¡ã€‚å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯åšå…¨åº“çš„é€»è¾‘å¤‡ä»½ï¼Œå¯¹æ‰€æœ‰çš„è¡¨è¿›è¡Œé”å®šï¼Œä»è€Œè·å–ä¸€è‡´æ€§è§†å›¾ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚</p><p><strong>æ²¡åŠ é”ä¹‹å‰ï¼ˆæ•°æ®ä¸ä¸€è‡´ï¼‰ï¼š</strong></p><figure><img src="https://i-blog.csdnimg.cn/blog_migrate/ac0be623e6511bc68757f9f7d525e0bf.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p><strong>åŠ é”è¿‡ç¨‹ï¼š</strong></p><figure><img src="https://i-blog.csdnimg.cn/blog_migrate/53e26972d0031836b3a77413785e6a4f.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><p><strong>åŠ é”</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">flush tables <span class="hljs-keyword">with</span> read lock;<br></code></pre></td></tr></table></figure><p><strong>å¤‡ä»½æ•°æ®</strong></p><p>æ³¨æ„ä¸‹é¢è¿™ä¸ªå‘½ä»¤éœ€è¦åœ¨windowsä¸‹çš„å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysqldump -uroot -p1234 itcast &gt; itcast.sql<br></code></pre></td></tr></table></figure><p><strong>è§£é”</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">unlock tables;<br></code></pre></td></tr></table></figure><figure><img src="/2024/11/27/MySQL/11-%E9%94%81/343fbc420b14e3a22126743b6edcf5c9.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h3 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h3><p>æ•°æ®åº“ä¸­åŠ å…¨å±€é”ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡çš„æ“ä½œï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ol type="1"><li>å¦‚æœåœ¨ä¸»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´éƒ½ä¸èƒ½æ‰§è¡Œæ›´æ–°ï¼Œä¸šåŠ¡åŸºæœ¬ä¸Šå°±å¾—åœæ‘†ã€‚</li><li>å¦‚æœåœ¨ä»åº“ä¸Šæ›´æ–°ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´ä¸èƒ½æ‰§è¡Œä¸»åº“åŒæ­¥è¿‡æ¥çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰ï¼Œä¼šå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚</li></ol><p>åœ¨InnoDBå¼•æ“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤‡ä»½æ—¶åŠ ä¸Šå‚æ•°--single-transactionå‚æ•°æ¥å®Œæˆä¸åŠ é”çš„ä¸€è‡´æ€§æ•°æ®å¤‡ä»½ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">mysqldump --single-transaction -uroot -p123456 itcast &gt; itcast.sql<br></code></pre></td></tr></table></figure><figure><img src="/2024/11/27/MySQL/11-%E9%94%81/6604110b87f1394b0a811906acb5951b.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><h2 id="è¡¨çº§é”">3. è¡¨çº§é”</h2><h3 id="ä»‹ç»-2">ä»‹ç»</h3><p>è¡¨çº§é”ï¼Œæ¯æ¬¡æ“ä½œé”ä½æ•´å¼ è¡¨ã€‚é”å®šç²’åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚åº”ç”¨åœ¨MyISAMã€InnoDBã€BDBç­‰å­˜å‚¨å¼•æ“ä¸­ã€‚</p><p>å¯¹äºè¡¨çº§é”ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ol type="1"><li>è¡¨é”</li><li>å…ƒæ•°æ®é”ï¼ˆmeta data lockï¼ŒMDLï¼‰</li><li>æ„å‘é”</li></ol><h3 id="è¡¨é”">è¡¨é”</h3><p>å¯¹äºè¡¨é”ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š</p><p>è¯»é”ä¸ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„è¯»ï¼Œä½†ä¼šé˜»å¡å†™ã€‚å†™é”æ—¢ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„è¯»ï¼Œåˆä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„å†™ã€‚</p><ol type="1"><li>è¡¨å…±äº«è¯»é”ï¼ˆread lockï¼‰</li></ol><figure><img src="/2024/11/27/MySQL/11-%E9%94%81/f3ba3dd728eba068b8f176091f26cd6e.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><ol start="2" type="1"><li>è¡¨ç‹¬å å†™é”ï¼ˆwrite lockï¼‰</li></ol><figure><img src="/2024/11/27/MySQL/11-%E9%94%81/fa56c4e64689bf1aad3139e620074bee.png" alt="img"><figcaption aria-hidden="true">img</figcaption></figure><blockquote><p>æ³¨æ„ï¼šä¸Šé¢ä¸¤å›¾å·¦è¾¹ä»£è¡¨æœ¬å®¢æˆ·ç«¯çš„æ“ä½œï¼Œå³è¾¹ä»£è¡¨å…¶ä»–å®¢æˆ·ç«¯çš„æ“ä½œï¼Œå¹¶ä¸”ç»¿è‰²ä»£è¡¨å¯æ“ä½œï¼Œçº¢è‰²ä»£è¡¨ä¸å¯æ“ä½œã€‚</p></blockquote><p>è¯­æ³•ï¼š</p><ol type="1"><li>åŠ é”ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">lock tables è¡¨å... read/write<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>é‡Šæ”¾é”</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">unlock tables / å®¢æˆ·ç«¯æ–­å¼€è¿æ¥<br></code></pre></td></tr></table></figure><h3 id="å…ƒæ•°æ®é”">å…ƒæ•°æ®é”</h3><p>MDLåŠ é”è¿‡ç¨‹æ˜¯ç³»ç»Ÿè‡ªåŠ¨æ§åˆ¶ï¼Œæ— éœ€æ˜¾ç¤ºä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€å¼ è¡¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Šã€‚MDLé”ä¸»è¦ä½œç”¨æ˜¯ç»´æŠ¤è¡¨å…ƒæ•°æ®çš„æ•°æ®ä¸€è‡´æ€§ï¼Œåœ¨è¡¨ä¸Šæœ‰æ´»åŠ¨äº‹åŠ¡çš„æ—¶å€™ï¼Œä¸å¯ä»¥å¯¹å…ƒæ•°æ®è¿›è¡Œå†™å…¥æ“ä½œã€‚ä¸ºäº†é¿å…DMLä¸DDLå†²çªï¼Œä¿è¯è¯»å†™çš„æ­£ç¡®æ€§ã€‚</p><p>åœ¨MYSQL5.5ä¸­å¼•å…¥MDLï¼Œå½“å¯¹ä¸€å¼ è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼ˆå…±äº«ï¼‰ï¼›å½“å¯¹è¡¨ç»“æ„è¿›è¡Œå˜æ›´æ“ä½œçš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ï¼ˆæ’ä»–ï¼‰ã€‚</p><table><thead><tr><th>å¯¹åº”SQL</th><th>é”ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>lock tables xxx read/write</td><td>SHARED_READ_ONLY/SHARED_NO_READ_WRITE</td><td></td></tr><tr><td>select ã€select â€¦ lock in share mode</td><td>SHARED_READ</td><td>ä¸ SHARED_READ ã€SHARED_WRITE å…¼å®¹ï¼Œä¸ EXCLUSIVE äº’æ–¥</td></tr><tr><td>insert ã€update ã€delete ã€select â€¦ for update</td><td>SHARED_WRITE</td><td>ä¸ SHARED_READ ã€SHARED_WRITE å…¼å®¹ï¼Œä¸ EXCLUSIVE äº’æ–¥</td></tr><tr><td>alter table â€¦</td><td>EXCLUSIVE</td><td>ä¸å…¶å®ƒçš„ MDL éƒ½äº’æ–¥</td></tr></tbody></table><p>æŸ¥çœ‹å…ƒæ•°æ®é”ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> object_type,object_schema,object_name,lock_type,lock_duration <span class="hljs-keyword">from</span> performance_schema.metadata_locks;<br></code></pre></td></tr></table></figure><h3 id="æ„å‘é”">æ„å‘é”</h3><p>ä¸ºäº†é¿å…DMLåœ¨æ‰§è¡Œä¸­ï¼ŒåŠ çš„è¡Œé”ä¸è¡¨é”çš„å†²çªï¼Œåœ¨InnoDBä¸­å¼•å…¥äº†æ„å‘é”ï¼Œä½¿å¾—è¡¨é”ä¸ç”¨æ£€æŸ¥æ¯è¡Œæ•°æ®æ˜¯å¦åŠ é”ï¼Œä½¿ç”¨æ„å‘é”æ¥å‡å°‘è¡¨é”çš„æ£€æŸ¥ã€‚</p><ol type="1"><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šç”±è¯­å¥select ... lock in sharemodeæ·»åŠ ã€‚ä¸è¡¨é”å…±äº«é”ï¼ˆreadï¼‰å…¼å®¹ï¼Œä¸è¡¨é”æ’ä»–é”ï¼ˆwriteï¼‰äº’æ–¥ã€‚</li><li>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šç”±insert ã€update ã€delete ã€select ... forupdateæ·»åŠ ã€‚ä¸è¡¨é”å…±äº«é”ï¼ˆreadï¼‰åŠä¸æ’ä»–é”ï¼ˆwriteï¼‰éƒ½äº’æ–¥ã€‚æ„å‘é”ä¹‹é—´ä¸ä¼šäº’æ–¥ã€‚</li></ol><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹SQLï¼ŒæŸ¥çœ‹æ„å‘é”åŠè¡Œé”çš„åŠ é”æƒ…å†µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">select object_schema,object_name,index_name,lock_type,lock_mod,lock_data from performance_schema.data_locks;<br></code></pre></td></tr></table></figure><h2 id="è¡Œçº§é”">4. è¡Œçº§é”</h2><h3 id="ä»‹ç»-3">ä»‹ç»</h3><p>è¡Œçº§é”ï¼Œæ¯æ¬¡æ“ä½œé”ä½å¯¹åº”çš„è¡Œæ•°æ®ã€‚è¡Œå®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦æœ€é«˜ã€‚åº”ç”¨åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ã€‚</p><p>InnoDBçš„æ•°æ®æ˜¯åŸºäºç´¢å¼•ç»„ç»‡ï¼Œè¡Œé”æ˜¯é€šè¿‡å¯¹ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œå¹¶ä¸æ˜¯å¯¹è®°å½•åŠ çš„é”ã€‚å¯¹äºè¡Œçº§é”ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p><ol type="1"><li>è¡Œé”ï¼ˆRecordLockï¼‰ï¼šé”å®šå•ä¸ªè¡Œè®°å½•çš„é”ï¼Œé˜²æ­¢å…¶ä»–äº‹ç‰©å¯¹æ­¤è¿›è¡Œupdateå’Œdeleteã€‚åœ¨RCã€RRéš”ç¦»çº§åˆ«ä¸‹éƒ½æ”¯æŒã€‚</li><li>é—´éš™é”ï¼ˆGapLockï¼‰ï¼šé”å®šç´¢å¼•è®°å½•é—´éš™ï¼ˆä¸å«è¯¥è®°å½•ï¼‰ï¼Œç¡®ä¿ç´¢å¼•è®°å½•é—´éš™ä¸å˜ï¼Œé˜²æ­¢å…¶ä»–äº‹ç‰©åœ¨è¿™ä¸ªé—´éš™è¿›è¡Œinsertï¼Œäº§ç”Ÿå¹»è¯»ã€‚åœ¨RRéš”ç¦»çº§åˆ«ä¸‹éƒ½æ”¯æŒã€‚</li><li>ä¸´é”®é”ï¼ˆNext-KeyLockï¼‰ï¼šè¡Œé”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶é”ä½æ•°æ®å‰é¢çš„é—´éš™Gapã€‚åœ¨RRéš”ç¦»çº§åˆ«ä¸‹æ”¯æŒã€‚</li></ol><h3 id="è¡Œé”">è¡Œé”</h3><p>InnoDBå®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ï¼š</p><ol type="1"><li>å…±äº«é”ï¼ˆSï¼‰ï¼šå…è®¸ä¸€ä¸ªäº‹ç‰©å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹ç‰©è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”ã€‚</li><li>æ’ä»–é”ï¼ˆXï¼‰ï¼šå…è®¸è·å–æ’ä»–é”çš„äº‹ç‰©æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹ç‰©è·å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«é”å’Œæ’ä»–é”ã€‚</li></ol><table><thead><tr><th>å½“å‰é”ç±»å‹</th><th>Sï¼ˆå…±äº«é”ï¼‰</th><th>Xï¼ˆæ’ä»–é”ï¼‰</th></tr></thead><tbody><tr><td>Sï¼ˆå…±äº«é”ï¼‰</td><td>å…¼å®¹</td><td>å†²çª</td></tr><tr><td>Xï¼ˆæ’ä»–é”ï¼‰</td><td>å†²çª</td><td>å†²çª</td></tr></tbody></table><table><thead><tr><th>SQL</th><th>è¡Œé”ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>INSERT â€¦</td><td>æ’ä»–é”</td><td>è‡ªåŠ¨åŠ é”</td></tr><tr><td>UPDATE â€¦</td><td>æ’ä»–é”</td><td>è‡ªåŠ¨åŠ é”</td></tr><tr><td>DELETE â€¦</td><td>æ’ä»–é”</td><td>è‡ªåŠ¨åŠ é”</td></tr><tr><td>SELECTï¼ˆæ­£å¸¸ï¼‰</td><td>ä¸åŠ ä»»ä½•é”</td><td></td></tr><tr><td>SELECT â€¦ LOCK IN SHARE MODE</td><td>å…±äº«é”</td><td>éœ€è¦æ‰‹åŠ¨åœ¨ SELECT ä¹‹ååŠ  LOCK IN SHARE MODE</td></tr><tr><td>SELECT â€¦ FOR UPDATE</td><td>æ’ä»–é”</td><td>éœ€è¦æ‰‹åŠ¨åœ¨ SELECT ä¹‹å FOR UPDATE</td></tr></tbody></table><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBåœ¨REPEATABLEREADäº‹ç‰©éš”ç¦»çº§åˆ«è¿è¡Œï¼ŒInnoDBä½¿ç”¨next_keyé”è¿›è¡Œæœç´¢å’Œç´¢å¼•æ‰«æï¼Œä»¥é˜²æ­¢å¹»è¯»ã€‚</p><ol type="1"><li>é’ˆå¯¹å”¯ä¸€ç´¢å¼•è¿›è¡Œæ£€ç´¢æ—¶ï¼Œå¯¹å·²å­˜åœ¨çš„è®°å½•è¿›è¡Œç­‰å€¼åŒ¹é…æ—¶ï¼Œå°†ä¼šè‡ªåŠ¨ä¼˜åŒ–ä¸ºè¡Œé”ã€‚</li><li>InnoDBçš„è¡Œé”æ˜¯é’ˆå¯¹äºç´¢å¼•åŠ çš„é”ï¼Œä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆInnoDBå°†å¯¹è¡¨ä¸­çš„æ‰€æœ‰è®°å½•åŠ é”ï¼Œæ­¤æ—¶å‡çº§ä¸ºè¡¨é”ã€‚</li></ol><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹SQLï¼ŒæŸ¥çœ‹æ„å‘é”åŠè¡Œé”çš„åŠ é”æƒ…å†µï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">select object_schema,object_name,index_name,lock_type,lock_mod,lock_data from performance_schema.data_locks;<br></code></pre></td></tr></table></figure><h3 id="é—´éš™é”ä¸´é”®é”">é—´éš™é”/ä¸´é”®é”</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBåœ¨REPEATABLEREADäº‹åŠ¡éš”ç¦»çº§åˆ«è¿è¡Œï¼ŒInnoDBä½¿ç”¨next_keyé”è¿›è¡Œæœç´¢å’Œç´¢å¼•æ‰«æï¼Œä»¥é˜²æ­¢å¹»è¯»ã€‚</p><ol type="1"><li>ç´¢å¼•ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰ï¼Œç»™ä¸å­˜åœ¨çš„è®°å½•åŠ é”æ—¶ï¼Œä¼˜åŒ–ä¸ºé—´éš™é”ã€‚</li><li>ç´¢å¼•ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ï¼ˆæ™®é€šç´¢å¼•ï¼‰ï¼Œå‘å³éå†æ—¶æœ€åä¸€ä¸ªå€¼ä¸æ»¡è¶³æŸ¥è¯¢éœ€æ±‚æ—¶ï¼Œnext-keylocké€€åŒ–ä¸ºé—´éš™é”ã€‚</li><li>ç´¢å¼•ä¸Šçš„èŒƒå›´æŸ¥è¯¢ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰â€“ä¼šè®¿é—®åˆ°ä¸æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå€¼ä¸ºæ­¢ã€‚</li></ol><blockquote><p>æ³¨æ„ï¼šé—´éš™é”å”¯ä¸€ç›®çš„æ˜¯é˜²æ­¢å…¶ä»–äº‹ç‰©æ’å…¥é—´éš™ã€‚é—´éš™é”å¯ä»¥å…±å­˜ï¼Œä¸€ä¸ªäº‹ç‰©é‡‡ç”¨çš„é—´éš™é”ä¸ä¼šé˜»æ­¢å¦ä¸€ä¸ªäº‹åŠ¡åœ¨åŒä¸€é—´éš™é”ä¸Šé‡‡ç”¨é—´éš™é”ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10. è§†å›¾/å­˜å‚¨è¿‡ç¨‹/è§¦å‘å™¨</title>
    <link href="/2024/11/27/MySQL/10-%E8%A7%86%E5%9B%BE-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B-%E8%A7%A6%E5%8F%91%E5%99%A8/"/>
    <url>/2024/11/27/MySQL/10-%E8%A7%86%E5%9B%BE-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B-%E8%A7%A6%E5%8F%91%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="è§†å›¾">1. è§†å›¾</h1><ol type="1"><li>è§†å›¾ï¼ˆViewï¼‰æ˜¯ä¸€ç§è™šæ‹Ÿå­˜åœ¨çš„è¡¨ã€‚è§†å›¾ä¸­çš„æ•°æ®å¹¶ä¸åœ¨æ•°æ®åº“ä¸­å®é™…å­˜åœ¨ï¼Œè¡Œå’Œåˆ—æ•°æ®æ¥è‡ªå®šä¹‰è§†å›¾çš„æŸ¥è¯¢ä¸­ä½¿ç”¨çš„è¡¨ï¼Œå¹¶ä¸”æ˜¯åœ¨ä½¿ç”¨è§†å›¾æ—¶åŠ¨æ€ç”Ÿæˆçš„ã€‚<br></li><li>é€šä¿—çš„è®²ï¼Œè§†å›¾åªä¿å­˜äº†æŸ¥è¯¢çš„SQLé€»è¾‘ï¼Œä¸ä¿å­˜æŸ¥è¯¢ç»“æœã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºè§†å›¾çš„æ—¶å€™ï¼Œä¸»è¦çš„å·¥ä½œå°±è½åœ¨åˆ›å»ºè¿™æ¡SQLæŸ¥è¯¢è¯­å¥ä¸Šã€‚</li></ol><h2 id="åˆ›å»ºè§†å›¾">1.1 åˆ›å»ºè§†å›¾</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> [ <span class="hljs-keyword">OR</span> REPLACE ] <span class="hljs-keyword">VIEW</span> è§†å›¾åç§°[ï¼ˆåˆ—ååˆ—è¡¨ï¼‰] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> è¯­å¥ [ <span class="hljs-keyword">WITH</span> [ <span class="hljs-keyword">CASCADED</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">LOCAL</span> ] <span class="hljs-keyword">CHECK</span> OPTION ]<br><br><span class="hljs-comment">-- ä¾‹å­ï¼š </span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">view</span> stu_v1 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> id,name <span class="hljs-keyword">from</span> student <span class="hljs-keyword">where</span> id<span class="hljs-operator">&lt;=</span><span class="hljs-number">10</span>; <br></code></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢è§†å›¾">1.2 æŸ¥è¯¢è§†å›¾</h2><ol type="1"><li>æŸ¥çœ‹åˆ›å»ºè§†å›¾è¯­å¥ï¼š <code>SHOW CREATE VIEW</code>è§†å›¾åç§°ï¼›<ol type="1"><li><code>show create view stu_v_1;</code></li></ol></li><li>æŸ¥çœ‹è§†å›¾æ•°æ®ï¼š<code>SELECT*FROM</code> è§†å›¾åç§°ï¼›</li></ol><h2 id="ä¿®æ”¹è§†å›¾">1.3 ä¿®æ”¹è§†å›¾</h2><ol type="1"><li><p>æ–¹å¼ä¸€ï¼š<code>CREATE[OR REPLACE] VIEW è§†å›¾åç§°[ï¼ˆåˆ—ååˆ—è¡¨)ï¼‰] AS SELECT è¯­å¥[ WITH[ CASCADED | LOCAL ] CHECK OPTION ]</code></p></li><li><p>æ–¹å¼äºŒï¼š<code>ALTER VIEW è§†å›¾åç§° [ï¼ˆåˆ—ååˆ—è¡¨)] AS SELECTè¯­å¥ [WITH [CASCADED | LOCAL] CHECK OPTION]</code></p></li></ol><h2 id="åˆ é™¤è§†å›¾">1.4 åˆ é™¤è§†å›¾</h2><ol type="1"><li><code>DROP VIEW [IF EXISTS] è§†å›¾åç§° [è§†å›¾åç§°]</code></li></ol><h2 id="è§†å›¾æ£€æŸ¥é€‰é¡¹">1.5 è§†å›¾æ£€æŸ¥é€‰é¡¹</h2><ol type="1"><li>å½“ä½¿ç”¨WITH CHECK QPTIONå­å¥åˆ›å»ºè§†å›¾æ—¶ï¼Œ<ol type="1"><li>MySQLä¼šé€šè¿‡è§†å›¾æ£€æŸ¥æ­£åœ¨æ›´æ”¹çš„æ¯ä¸ªè¡Œï¼Œä¾‹å¦‚æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤ï¼Œä»¥ä½¿å…¶ç¬¦åˆè§†å›¾çš„å®šä¹‰ã€‚</li><li>MySQLå…è®¸åŸºäºå¦ä¸€ä¸ªè§†å›¾åˆ›å»ºè§†å›¾ï¼Œå®ƒè¿˜ä¼šæ£€æŸ¥ä¾èµ–è§†å›¾ä¸­çš„è§„åˆ™ä»¥ä¿æŒä¸€è‡´æ€§ã€‚</li><li>ä¸ºäº†ç¡®å®šæ£€æŸ¥çš„èŒƒå›´ï¼Œmysqlæä¾›äº†ä¸¤ä¸ªé€‰é¡¹ï¼šCASCADED å’Œ LOCALï¼Œé»˜è®¤å€¼ä¸º CASCADEDã€‚</li></ol></li><li>NOTEï¼šå¦‚æœæ²¡æœ‰å¼€æ£€æŸ¥é€‰é¡¹å°±ä¸ä¼šè¿›è¡Œæ£€æŸ¥ã€‚ä¸åŒç‰ˆæœ¬æ˜¯ä¸åŒå«ä¹‰çš„ï¼Œè¦çœ‹ç‰ˆæœ¬ã€‚</li></ol><h3 id="cascaded">1.5.1 CASCADED</h3><p>çº§è”ï¼Œä¸€æ—¦é€‰æ‹©äº†è¿™ä¸ªé€‰é¡¹ï¼Œé™¤äº†ä¼šæ£€æŸ¥åˆ›å»ºè§†å›¾æ—¶å€™çš„æ¡ä»¶ï¼Œè¿˜ä¼šæ£€æŸ¥æ‰€ä¾èµ–è§†å›¾çš„æ¡ä»¶ã€‚</p><blockquote><p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼šåˆ›å»ºstu_V_l è§†å›¾ï¼Œidæ˜¯å°äºç­‰äº 20çš„ã€‚<br><code>create or replace view stu_V_l as select id,name from student where id &lt;=20;</code>å†åˆ›å»º stu_v_2 è§†å›¾ï¼Œ20 &gt;= id &gt;=10ã€‚<br><code>create or replace view stu_v_2 as select id,name from stu_v_1 where id &gt;=10 with cascaded check option;</code>å†åˆ›å»º stu_v_3 è§†å›¾ã€‚<br><code>create or replace view stu_v_3 as select id,name from stu_v_2 where id&lt;=15;</code><br>è¿™æ¡æ•°æ®èƒ½å¤ŸæˆåŠŸï¼Œstu_v_3 æ²¡æœ‰å¼€æ£€æŸ¥é€‰é¡¹æ‰€ä»¥ä¸ä¼š å»åˆ¤æ–­ idæ˜¯å¦å°äºç­‰äº15, ç›´æ¥æ£€æŸ¥ æ˜¯å¦æ»¡è¶³ stu_v_2ã€‚<br><code>insert into stu_v_3 values(17,'Tom');</code></p></blockquote><h3 id="local">1.5.2 LOCAL</h3><p>æœ¬åœ°çš„æ¡ä»¶ä¹Ÿä¼šæ£€æŸ¥ï¼Œè¿˜ä¼šå‘ä¸Šæ£€æŸ¥ã€‚åœ¨å‘ä¸Šæ‰¾çš„æ—¶å€™ï¼Œå°±è¦çœ‹æ˜¯å¦ä¸Šé¢å¼€äº†æ£€æŸ¥é€‰é¡¹ï¼Œå¦‚æœæ²¡å¼€å°±ä¸æ£€æŸ¥ã€‚å’ŒCASCADED çš„åŒºåˆ«å°±æ˜¯ CASCADED ä¸ç®¡ä¸Šé¢å¼€æ²¡å¼€æ£€æŸ¥é€‰é¡¹éƒ½ä¼šè¿›è¡Œæ£€æŸ¥ã€‚</p><h2 id="æ›´æ–°åŠä½œç”¨">1.6 æ›´æ–°åŠä½œç”¨</h2><ol type="1"><li>è¦ä½¿è§†å›¾å¯æ›´æ–°ï¼Œè§†å›¾ä¸­çš„è¡Œä¸åŸºç¡€è¡¨ä¸­çš„è¡Œä¹‹é—´å¿…é¡»å­˜åœ¨ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å¦‚æœè§†å›¾åŒ…å«ä»¥ä¸‹ä»»ä½•ä¸€é¡¹ï¼Œåˆ™è¯¥è§†å›¾ä¸å¯æ›´æ–°</li></ol><ul><li>èšåˆå‡½æ•°æˆ–çª—å£å‡½æ•° ( SUM()ã€MIN()ã€MAX()ã€COUNT() ç­‰ )</li><li>DISTINCT</li><li>GROUP BY</li><li>HAVING</li><li>UNION æˆ–è€…UNION ALL</li></ul><blockquote><p>ä¾‹å­ï¼š ä½¿ç”¨äº†èšåˆå‡½æ•°ï¼Œæ’å…¥ä¼šå¤±è´¥ã€‚<code>create view stu_v_count as select count(*) from student;</code><br><code>insert into stu_v_count values(10);</code></p></blockquote><ol start="2" type="1"><li>ä½œç”¨</li></ol><ul><li><p>è§†å›¾ä¸ä»…å¯ä»¥ç®€åŒ–ç”¨æˆ·å¯¹æ•°æ®çš„ç†è§£ï¼Œä¹Ÿå¯ä»¥ç®€åŒ–ä»–ä»¬çš„æ“ä½œã€‚é‚£äº›è¢«ç»å¸¸ä½¿ç”¨çš„æŸ¥è¯¢å¯ä»¥è¢«å®šä¹‰ä¸ºè§†å›¾ï¼Œä»è€Œä½¿å¾—ç”¨æˆ·ä¸å¿…ä¸ºä»¥åçš„æ“ä½œæ¯æ¬¡æŒ‡å®šå…¨éƒ¨çš„æ¡ä»¶ã€‚</p></li><li><p>å®‰å…¨</p><ul><li>æ•°æ®åº“å¯ä»¥æˆæƒï¼Œä½†ä¸èƒ½æˆæƒåˆ°æ•°æ®åº“ç‰¹å®šè¡Œå’Œç‰¹å®šçš„åˆ—ä¸Šã€‚é€šè¿‡è§†å›¾ç”¨æˆ·åªèƒ½æŸ¥è¯¢å’Œä¿®æ”¹ä»–ä»¬æ‰€èƒ½è§åˆ°çš„æ•°æ®<br></li></ul></li><li><p>æ•°æ®ç‹¬ç«‹</p><ul><li>è§†å›¾å¯å¸®åŠ©ç”¨æˆ·å±è”½çœŸå®è¡¨ç»“æ„å˜åŒ–å¸¦æ¥çš„å½±å“ã€‚</li></ul></li></ul><ol start="3" type="1"><li>æ€»è€Œè¨€ä¹‹ç±»ä¼¼äºç»™è¡¨åŠ ä¸Šäº†ä¸€ä¸ªå¤–å£³ï¼Œé€šè¿‡è¿™ä¸ªå¤–å£³è®¿é—®è¡¨çš„æ—¶å€™ï¼Œåªèƒ½æŒ‰ç…§æ‰€è®¾è®¡çš„æ–¹å¼è¿›è¡Œè®¿é—®ä¸æ›´æ–°ã€‚</li></ol><h2 id="æ¡ˆä¾‹">1.7 æ¡ˆä¾‹</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ä¸ºäº†ä¿è¯æ•°æ®åº“è¡¨çš„å®‰å…¨æ€§ï¼Œå¼€å‘äººå‘˜åœ¨æ“ä½œtbsrè¡¨æ—¶ï¼Œåªèƒ½çœ‹åˆ°çš„ç”¨æˆ·çš„åŸºæœ¬å­—æ®µï¼Œå±è–‡æ‰‹æœºå·å’Œé‚®ç®±ä¸¤ä¸ªå­—æ®µã€‚</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> tb_user_view <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> id, name, profession, age, gender, status, createtime <span class="hljs-keyword">from</span> tb_user;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tb_user_view;<br><br><span class="hljs-comment">-- æŸ¥è¯¢æ¯ä¸ªå­¦ç”Ÿæ‰€é€‰ä¿®çš„è¯¾ç¨‹ï¼ˆä¸‰å¼ è¡¨è”æŸ¥ï¼‰ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨å¾ˆå¤šçš„ä¸šåŠ¡ä¸­éƒ½æœ‰ä½¿ç”¨åˆ°ï¼Œä¸ºäº†ç®€åŒ–æ“ä½œï¼Œå®šä¹‰ä¸€ä¸ªè§†å›¾ã€‚</span><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> tb_stu_course_view <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> s.name student_name, s.no student_no, c.name course_name <span class="hljs-keyword">from</span> student s, student_course sc, course c <span class="hljs-keyword">where</span> s.id <span class="hljs-operator">=</span> sc.studentid <span class="hljs-keyword">and</span> sc.courseid <span class="hljs-operator">=</span> c.id;<br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tb_stu_course_view;<br></code></pre></td></tr></table></figure><h1 id="å­˜å‚¨è¿‡ç¨‹">2. å­˜å‚¨è¿‡ç¨‹</h1><ul><li><p>å­˜å‚¨è¿‡ç¨‹æ˜¯äº‹å…ˆç»è¿‡ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ä¸€æ®µSQLè¯­å¥çš„é›†åˆï¼Œè°ƒç”¨å­˜å‚¨è¿‡ç¨‹å¯ä»¥ç®€åŒ–åº”ç”¨å¼€å‘äººå‘˜çš„å¾ˆå¤šå·¥ä½œï¼Œå‡å°‘æ•°æ®åœ¨æ•°æ®åº“å’Œåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“ï¼Œå¯¹äºæé«˜æ•°æ®å¤„ç†çš„æ•ˆç‡æ˜¯æœ‰å¥½å¤„çš„ã€‚</p></li><li><p>å­˜å‚¨è¿‡ç¨‹æ€æƒ³ä¸Šå¾ˆç®€å•ï¼Œå°±æ˜¯æ•°æ®åº“SQLè¯­è¨€å±‚é¢çš„ä»£ç å°è£…ä¸é‡ç”¨ã€‚</p></li><li><p>ç‰¹ç‚¹</p></li></ul><ol type="1"><li>å°è£…</li><li>å¤ç”¨</li><li>å¯ä»¥æ¥æ”¶å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¿”å›æ•°æ®å‡å°‘ç½‘ç»œäº¤äº’ï¼Œæ•ˆç‡æå‡</li></ol><h2 id="åˆ›å»º">2.1 åˆ›å»º</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> å­˜å‚¨è¿‡ç¨‹åç§°( [å‚æ•°åˆ—è¡¨] ) <br><br><span class="hljs-keyword">BEGIN</span><br> <span class="hljs-keyword">SQL</span> è¯­å¥ <br><span class="hljs-keyword">END</span>;<br><span class="hljs-comment">-- eg;</span><br>delimiter $$<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p1()<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> users;<br><span class="hljs-keyword">end</span>$$<br>delimiter ; <span class="hljs-comment">-- è¿˜åŸ</span><br></code></pre></td></tr></table></figure><p>NOTE: åœ¨å‘½ä»¤è¡Œä¸­ï¼Œæ‰§è¡Œåˆ›å»ºå­˜å‚¨è¿‡ç¨‹çš„SQLæ—¶ï¼Œéœ€è¦é€šè¿‡å…³é”®å­—delimiteræŒ‡å®šSQLè¯­å¥çš„ç»“æŸç¬¦ã€‚é»˜è®¤æ˜¯ åˆ†å·ä½œä¸ºç»“æŸç¬¦ã€‚</p><p>delimiter ï¼Œåˆ™ç¬¦ä½œä¸ºç»“æŸç¬¦ã€‚</p><h2 id="è°ƒç”¨">2.2 è°ƒç”¨</h2><p>CALL åç§° ( <a href="#å‚æ•°">å‚æ•°</a>)</p><h2 id="æŸ¥çœ‹">2.3 æŸ¥çœ‹</h2><p>æŸ¥è¯¢æŒ‡å®šæ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹åŠçŠ¶æ€ä¿¡æ¯</p><p><code>SELECT* FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA = 'xxx'</code></p><p>å­˜å‚¨è¿‡ç¨‹åç§°ï¼›--æŸ¥è¯¢æŸä¸ªå­˜å‚¨è¿‡ç¨‹çš„å®šä¹‰</p><p><code>SHOW CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§°</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> information_schema.routines <span class="hljs-keyword">where</span> routine_schema <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;itheima&#x27;</span>;<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p1;<br></code></pre></td></tr></table></figure><h2 id="åˆ é™¤">2.4 åˆ é™¤</h2><p><code>DROP PROCEDURE [ IFEXISTS ] å­˜å‚¨è¿‡ç¨‹åç§°</code></p><h2 id="å˜é‡">2.5 å˜é‡</h2><h3 id="ç³»ç»Ÿå˜é‡">2.5.1 ç³»ç»Ÿå˜é‡</h3><p><strong>ç³»ç»Ÿå˜é‡</strong> æ˜¯ <code>MySQL</code>æœåŠ¡å™¨æä¾›ï¼Œä¸æ˜¯ç”¨æˆ·å®šä¹‰çš„ï¼Œå±äºæœåŠ¡å™¨å±‚é¢ã€‚åˆ†ä¸ºå…¨å±€å˜é‡ï¼ˆ<code>GLOBAL</code>ï¼‰ã€ä¼šè¯å˜é‡ï¼ˆ <code>SESSION</code>ï¼‰ã€‚</p><p><strong>æŸ¥çœ‹ç³»ç»Ÿå˜é‡</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> [SESSION<span class="hljs-operator">|</span><span class="hljs-keyword">GLOBAL</span>] VARIABLES;<span class="hljs-comment">-- æŸ¥çœ‹æ‰€æœ‰ç³»ç»Ÿå˜é‡</span><br><span class="hljs-keyword">SHOW</span> [SESSION<span class="hljs-operator">|</span><span class="hljs-keyword">GLOBAL</span>] VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;...&#x27;</span>;<span class="hljs-comment">-- å¯ä»¥é€šè¿‡LIKEæ¨¡ç³ŠåŒ¹é…æ–¹å¼æŸ¥æ‰¾å˜é‡</span><br><span class="hljs-keyword">SELECT</span> @@[SESSION<span class="hljs-operator">|</span><span class="hljs-keyword">GLOBAL</span>] ç³»ç»Ÿå˜é‡å;<span class="hljs-comment">-- æŸ¥çœ‹æŒ‡å®šå˜é‡çš„å€¼</span><br></code></pre></td></tr></table></figure><p><strong>è®¾ç½®ç³»ç»Ÿå˜é‡</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> [SESSION<span class="hljs-operator">|</span><span class="hljs-keyword">GLOBAL</span>] æŸ¥çœ‹å˜é‡å<span class="hljs-operator">=</span>å€¼;<br><span class="hljs-keyword">SET</span> @@[SESSION<span class="hljs-operator">|</span><span class="hljs-keyword">GLOBAL</span>] ç³»ç»Ÿå˜é‡å<span class="hljs-operator">=</span>å€¼;<br></code></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>å¦‚æœæ²¡æœ‰æŒ‡å®š <code>SESSION/GLOBAL</code> ï¼Œé»˜è®¤æ˜¯<code>SESSION</code> ï¼Œä¼šè¯å˜é‡ã€‚</p><p><code>MySQL</code>æœåŠ¡é‡æ–°å¯åŠ¨åï¼Œæ‰€è®¾ç½®çš„å…¨å±€å˜é‡å‚æ•°ä¼šå¤±æ•ˆï¼Œè¦æƒ³ä¸å¤±æ•ˆï¼Œå¯ä»¥åœ¨`/etc/my.cnf/ ä¸­é…ç½®ã€‚</p></blockquote><h3 id="ç”¨æˆ·å®šä¹‰å˜é‡">2.5.2 ç”¨æˆ·å®šä¹‰å˜é‡</h3><p><strong>ç”¨æˆ·å®šä¹‰å˜é‡</strong>æ˜¯ç”¨æˆ·æ ¹æ®éœ€è¦è‡ªå·±å®šä¹‰çš„å˜é‡ï¼Œç”¨æˆ·å˜é‡ä¸åŒæå‰å£°æ˜ï¼Œåœ¨ç”¨çš„æ—¶å€™ç›´æ¥ç”¨"<span class="citation" data-cites="å˜é‡å">@å˜é‡å</span>"ä½¿ç”¨å°±å¯ä»¥ã€‚å…¶ä½œç”¨åŸŸä¸ºå½“å‰è¿æ¥ã€‚</p><p><strong>èµ‹å€¼</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> <span class="hljs-variable">@var_name</span> <span class="hljs-operator">=</span> expr [,<span class="hljs-variable">@var_name</span> <span class="hljs-operator">=</span> expr]...;<br><span class="hljs-keyword">SET</span> <span class="hljs-variable">@var_name</span> :<span class="hljs-operator">=</span> expr [,<span class="hljs-variable">@var_name</span> :<span class="hljs-operator">=</span> expr]...;<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@var_name</span> :<span class="hljs-operator">=</span> expr [,<span class="hljs-variable">@var_name</span> :<span class="hljs-operator">=</span> expr]...;<br><span class="hljs-keyword">SELECT</span> å­—æ®µå <span class="hljs-keyword">INTO</span> <span class="hljs-variable">@var_name</span> <span class="hljs-keyword">FROM</span> è¡¨å;<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@var_name</span>;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- èµ‹å€¼</span><br><span class="hljs-keyword">set</span> <span class="hljs-variable">@myname</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;itcast&#x27;</span>;<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@mysqg</span> :<span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@mygender</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç”·&#x27;</span>,<span class="hljs-variable">@myhobby</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;java&#x27;</span>;<br><br><span class="hljs-keyword">select</span> <span class="hljs-variable">@mycolor</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;red&#x27;</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">into</span> <span class="hljs-variable">@mycount</span> <span class="hljs-keyword">from</span> tb_user;<br><br><span class="hljs-comment">-- ä½¿ç”¨</span><br><span class="hljs-keyword">select</span> <span class="hljs-variable">@myname</span>,<span class="hljs-variable">@myage</span>,<span class="hljs-variable">@mygender</span>,<span class="hljs-variable">@myhobby</span>;<br><br><span class="hljs-keyword">select</span> <span class="hljs-variable">@mycolor</span>,<span class="hljs-variable">@mycount</span>;<br></code></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼š</strong>ç”¨æˆ·å®šä¹‰çš„å˜é‡æ— éœ€å¯¹å…¶è¿›è¡Œå£°æ˜æˆ–åˆå§‹åŒ–ï¼Œåªä¸è¿‡è·å–åˆ°çš„å€¼ä¸º<code>NULL</code> ã€‚</p></blockquote><h3 id="å±€éƒ¨å˜é‡">2.5.3 å±€éƒ¨å˜é‡</h3><p><strong>å±€éƒ¨å˜é‡</strong>æ˜¯æ ¹æ®éœ€è¦å®šä¹‰çš„åœ¨å±€éƒ¨ç”Ÿæ•ˆçš„å˜é‡ï¼Œè®¿é—®ä¹‹å‰ï¼Œéœ€è¦ <code>DECLARE</code>å£°æ˜ã€‚å¯ç”¨ä½œå­˜å‚¨è¿‡ç¨‹å†…çš„å±€éƒ¨å˜é‡å’Œè¾“å…¥å‚æ•°ï¼Œå±€éƒ¨å˜é‡çš„èŒƒå›´æ˜¯åœ¨å…¶å†…å£°æ˜çš„<code>BEGIN ... END</code> å—ã€‚</p><p><strong>å£°æ˜</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DECLARE</span> å˜é‡å å˜é‡ç±»å‹ [<span class="hljs-keyword">DEFAULT</span> ...];<br></code></pre></td></tr></table></figure><p>å˜é‡ç±»å‹å°±æ˜¯æ•°æ®åº“å­—æ®µç±»å‹ï¼š <code>INT</code> ã€ <code>BIGINT</code>ã€ <code>CHAR</code> ã€ <code>VARCHAR</code> ã€ <code>DATE</code> ã€<code>TIME</code> ç­‰</p><p><strong>èµ‹å€¼</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> å˜é‡å <span class="hljs-operator">=</span> å€¼;<br><span class="hljs-keyword">SET</span> å˜é‡å :<span class="hljs-operator">=</span> å€¼;<br><span class="hljs-keyword">SELECT</span> å­—æ®µå <span class="hljs-keyword">INTO</span> å˜é‡å <span class="hljs-keyword">FROM</span> è¡¨å ...;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p()<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> stu_count <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">into</span> stu_count <span class="hljs-keyword">from</span> student;<br><span class="hljs-keyword">select</span> stu_count;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p();<br></code></pre></td></tr></table></figure><h2 id="if">2.6 if</h2><p><strong>è¯­æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">IF æ¡ä»¶<span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span><br>...<br>ELSEIF æ¡ä»¶<span class="hljs-number">2</span> <span class="hljs-keyword">THEN</span> <span class="hljs-comment">-- å¯é€‰</span><br>...<br><span class="hljs-keyword">ELSE</span> <span class="hljs-comment">-- å¯é€‰</span><br>...<br><span class="hljs-keyword">END</span> IF;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><p>æ ¹æ®å®šä¹‰çš„åˆ†æ•° <code>score</code>å˜é‡ï¼Œåˆ¤å®šå½“å‰åˆ†æ•°å¯¹åº”çš„åˆ†æ•°ç­‰çº§ã€‚</p><ol type="1"><li>score &gt;= 85 åˆ†ï¼Œç­‰çº§ä¸ºä¼˜ç§€</li><li>score &gt;= 60 åˆ†ä¸” score &lt; 85 åˆ†ï¼Œç­‰çº§ä¸ºåŠæ ¼ã€‚</li><li>score &lt; 60 åˆ†ï¼Œç­‰çº§ä¸ºä¸åŠæ ¼ã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p()<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> score <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">58</span>;<br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">result</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>);<br><br>if score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">85</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ä¼˜ç§€&#x27;</span>;<br>elseif score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;åŠæ ¼&#x27;</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ä¸åŠæ ¼&#x27;</span>;<br><span class="hljs-keyword">end</span> if;<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">result</span>;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p();<br></code></pre></td></tr></table></figure><h3 id="å‚æ•°">å‚æ•°</h3><table><thead><tr><th style="text-align: left;">ç±»å‹</th><th style="text-align: left;">å«ä¹‰</th><th style="text-align: left;">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align: left;">IN</td><td style="text-align: left;">è¯¥ç±»å‚æ•°ä½œä¸ºè¾“å…¥ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è°ƒç”¨æ—¶ä¼ å…¥å€¼</td><td style="text-align: left;">é»˜è®¤</td></tr><tr><td style="text-align: left;">OUT</td><td style="text-align: left;">è¯¥ç±»å‚æ•°ä½œä¸ºè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯¥å‚æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼</td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;">INOUT</td><td style="text-align: left;">æ—¢å¯ä»¥ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¾“å‡ºå‚æ•°</td><td style="text-align: left;"></td></tr></tbody></table><p><strong>ç”¨æ³•ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> å­˜å‚¨è¿‡ç¨‹åç§° ([<span class="hljs-keyword">IN</span><span class="hljs-operator">/</span><span class="hljs-keyword">OUT</span><span class="hljs-operator">/</span><span class="hljs-keyword">INOUT</span> å‚æ•°å å‚æ•°ç±»å‹])<br><span class="hljs-keyword">BEGIN</span><br><span class="hljs-comment">-- SQLè¯­å¥</span><br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><p>ï¼ˆ1ï¼‰æ ¹æ®ä¼ å…¥å‚æ•° <code>score</code>ï¼Œåˆ¤å®šå½“å‰åˆ†æ•°å¯¹åº”çš„åˆ†æ•°ç­‰çº§ï¼Œå¹¶è¿”å›ã€‚</p><ol type="1"><li>score &gt;= 85 åˆ†ï¼Œç­‰çº§ä¸ºä¼˜ç§€</li><li>score &gt;= 60 åˆ†ä¸” score &lt; 85 åˆ†ï¼Œç­‰çº§ä¸ºåŠæ ¼ã€‚</li><li>score &lt; 60 åˆ†ï¼Œç­‰çº§ä¸ºä¸åŠæ ¼ã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> score <span class="hljs-type">int</span>, <span class="hljs-keyword">out</span> <span class="hljs-keyword">result</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>))<br><span class="hljs-keyword">begin</span><br>if score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">85</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ä¼˜ç§€&#x27;</span>;<br>elseif score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;åŠæ ¼&#x27;</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ä¸åŠæ ¼&#x27;</span>;<br><span class="hljs-keyword">end</span> if;<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">result</span>;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">68</span>, <span class="hljs-variable">@result</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@result</span>;<br></code></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰å°†ä¼ å…¥çš„ 200 åˆ†åˆ¶çš„åˆ†æ•°ï¼Œè¿›è¡Œæ¢ç®—ï¼Œæ¢ç®—æˆç™¾åˆ†åˆ¶ï¼Œç„¶åè¿”å›ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">inout</span> score <span class="hljs-keyword">double</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">set</span> score :<span class="hljs-operator">=</span> score <span class="hljs-operator">*</span> <span class="hljs-number">0.5</span>;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">set</span> <span class="hljs-variable">@score</span> <span class="hljs-operator">=</span> <span class="hljs-number">78</span>;<br><span class="hljs-keyword">call</span> p(<span class="hljs-variable">@score</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@score</span>;<br></code></pre></td></tr></table></figure><h2 id="case">2.7 case</h2><p><strong>è¯­æ³•ä¸€</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CASE</span> case_value<br><span class="hljs-keyword">WHEN</span> when_value1 <span class="hljs-keyword">THEN</span> statement_list1<br>[<span class="hljs-keyword">WHEN</span> when_value2 <span class="hljs-keyword">THEN</span> statement_list2]...<br>[<span class="hljs-keyword">ELSE</span> statement_list]<br><span class="hljs-keyword">END</span> <span class="hljs-keyword">CASE</span>;<br></code></pre></td></tr></table></figure><p><strong>è¯­æ³•äºŒ</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CASE</span><br><span class="hljs-keyword">WHEN</span> search_condition1 <span class="hljs-keyword">THEN</span> statement_list1<br>[<span class="hljs-keyword">WHEN</span> search_condition2 <span class="hljs-keyword">THEN</span> statement_list2]...<br>[<span class="hljs-keyword">ELSE</span> statement_list]<br><span class="hljs-keyword">END</span> <span class="hljs-keyword">CASE</span>;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><p>æ ¹æ®ä¼ å…¥çš„æœˆä»½ï¼Œåˆ¤å®šæœˆä»½æ‰€å±çš„å­£èŠ‚ï¼ˆéœ€æ±‚é‡‡ç”¨ <code>case</code>ç»“æ„ï¼‰ã€‚</p><ol type="1"><li>1-3 æœˆä»½ï¼Œä¸ºç¬¬ä¸€å­£åº¦</li><li>4-6 æœˆä»½ï¼Œä¸ºç¬¬äºŒå­£åº¦</li><li>7-9 æœˆä»½ï¼Œä¸ºç¬¬ä¸‰å­£åº¦</li><li>10-12 æœˆä»½ï¼Œä¸ºç¬¬å››å­£åº¦</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> <span class="hljs-keyword">month</span> <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">result</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>);<br><br><span class="hljs-keyword">case</span><br><span class="hljs-keyword">when</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç¬¬ä¸€å­£åº¦&#x27;</span>;<br><span class="hljs-keyword">when</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">4</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">6</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç¬¬äºŒå­£åº¦&#x27;</span>;<br><span class="hljs-keyword">when</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">7</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">9</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç¬¬ä¸‰å­£åº¦&#x27;</span>;<br><span class="hljs-keyword">when</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">10</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">month</span> <span class="hljs-operator">&lt;=</span> <span class="hljs-number">12</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç¬¬å››å­£åº¦&#x27;</span>;<br><span class="hljs-keyword">else</span><br><span class="hljs-keyword">set</span> <span class="hljs-keyword">result</span> :<span class="hljs-operator">=</span> <span class="hljs-string">&#x27;éæ³•å‚æ•°&#x27;</span>;<br><span class="hljs-keyword">end</span> <span class="hljs-keyword">case</span>;<br><br><span class="hljs-keyword">select</span> concat(<span class="hljs-string">&#x27;æ‚¨è¾“å…¥çš„æœˆä»½ä¸ºï¼š&#x27;</span>,<span class="hljs-keyword">month</span>,<span class="hljs-string">&#x27;ï¼Œæ‰€å±çš„å­£åº¦ä¸ºï¼š&#x27;</span>,<span class="hljs-keyword">result</span>);<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><h2 id="while">2.8 while</h2><p><code>while</code>å¾ªç¯æ˜¯æœ‰æ¡ä»¶çš„å¾ªç¯æ§åˆ¶è¯­å¥ã€‚æ»¡è¶³æ¡ä»¶åï¼Œå†æ‰§è¡Œå¾ªç¯ä½“ä¸­çš„<code>SQL</code> è¯­å¥ã€‚å…·ä½“è¯­æ³•ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- å…ˆåˆ¤å®šæ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶ä¸ºtrueï¼Œåˆ™æ‰§è¡Œé€»è¾‘ï¼›å¦åˆ™ï¼Œä¸æ‰§è¡Œé€»è¾‘</span><br>WHILE æ¡ä»¶ DO<br><span class="hljs-keyword">SQL</span>é€»è¾‘...<br><span class="hljs-keyword">END</span> WHILE;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><p>è®¡ç®—ä» <code>1</code> ç´¯åŠ åˆ° <code>n</code> çš„å€¼ï¼Œ <code>n</code>ä¸ºä¼ å…¥çš„å‚æ•°å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> n <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> total <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br>while n<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span> do<br><span class="hljs-keyword">set</span> total :<span class="hljs-operator">=</span> total <span class="hljs-operator">+</span> n;<br><span class="hljs-keyword">set</span> n :<span class="hljs-operator">=</span> n <span class="hljs-operator">-</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">end</span> while;<br><br><span class="hljs-keyword">select</span> total;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><h2 id="repeat">2.9 repeat</h2><p><code>repeat</code>æ˜¯æœ‰æ¡ä»¶çš„å¾ªç¯æ§åˆ¶è¯­å¥ï¼Œå½“æ»¡è¶³æ¡ä»¶çš„æ—¶å€™é€€å‡ºå¾ªç¯ã€‚å…·ä½“è¯­æ³•ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- é™åˆ¶æ€§ä¸€æ¬¡é€»è¾‘ï¼Œç„¶ååˆ¤å®šé€»è¾‘æ˜¯å¦æ»¡è¶³ï¼Œå¦‚æœæ»¡è¶³ï¼Œåˆ™æ¨å‡ºã€‚å¦‚æœä¸æ»¡è¶³ï¼Œåˆ™ç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯</span><br>REPEAT<br><span class="hljs-keyword">SQL</span>é€»è¾‘...<br>UNTIL æ¡ä»¶<br><span class="hljs-keyword">END</span> REPEAT;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><p>è®¡ç®—ä» <code>1</code> ç´¯åŠ åˆ° <code>n</code> çš„å€¼ï¼Œ <code>n</code>ä¸ºä¼ å…¥çš„å‚æ•°å€¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> n <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> total <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br><br>repeat<br><span class="hljs-keyword">set</span> total :<span class="hljs-operator">=</span> total <span class="hljs-operator">+</span> n;<br><span class="hljs-keyword">set</span> n :<span class="hljs-operator">=</span> n<span class="hljs-number">-1</span>;<br>until n<span class="hljs-operator">&lt;=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">end</span> repeat;<br><br><span class="hljs-keyword">select</span> total;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><h2 id="loop">2.10 loop</h2><p><code>LOOP</code> å®ç°ç®€å•çš„å¾ªç¯ï¼Œå¦‚æœä¸åœ¨ <code>SQL</code>é€»è¾‘ä¸­å¢åŠ é€€å‡ºå¾ªç¯çš„æ¡ä»¶ï¼Œå¯ä»¥ç”¨æ¥å…¶æ¥å®ç°ç®€å•çš„æ­»å¾ªç¯ã€‚<code>LOOP</code> å¯ä»¥é…åˆä¸€ä¸‹ä¸¤ä¸ªè¯­å¥ä½¿ç”¨ï¼š</p><ul><li><code>LEAVE</code> ï¼šé…åˆå¾ªç¯ä½¿ç”¨ï¼Œé€€å‡ºå¾ªç¯ã€‚</li><li><code>ITERATE</code>ï¼šå¿…é¡»ç”¨åœ¨å¾ªç¯ä¸­ï¼Œä½œç”¨æ˜¯è·³è¿‡å½“å‰å¾ªç¯å‰©ä¸‹çš„è¯­å¥ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">[begin_label:] LOOP<br><span class="hljs-keyword">SQL</span>é€»è¾‘...<br><span class="hljs-keyword">END</span> LOOP [end_label];<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">LEAVE label;<span class="hljs-comment">-- é€€å‡ºæŒ‡å®šæ ‡è®°çš„å¾ªç¯ä½“</span><br>ITERATE label;<span class="hljs-comment">-- ç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</span><br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><ol type="1"><li>è®¡ç®—ä» <code>1</code> ç´¯åŠ åˆ° <code>n</code> çš„å€¼ï¼Œ <code>n</code>ä¸ºä¼ å…¥çš„å‚æ•°å€¼ã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> n <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> total <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br><br>sum:loop<br>if n <span class="hljs-operator">&lt;=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>leave sum;<br><span class="hljs-keyword">end</span> if;<br><br><span class="hljs-keyword">set</span> total :<span class="hljs-operator">=</span> total <span class="hljs-operator">+</span> n;<br><span class="hljs-keyword">set</span> n :<span class="hljs-operator">=</span> n <span class="hljs-operator">-</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">end</span> loop sum;<br><br><span class="hljs-keyword">select</span> total;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><ol type="1"><li>è®¡ç®—ä» <code>1</code> åˆ° <code>n</code> ä¹‹é—´çš„å¶æ•°ç´¯åŠ çš„å€¼ï¼Œ<code>n</code> ä¸ºä¼ å…¥çš„å‚æ•°å€¼ã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> n <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> total <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br><br>sum:loop<br>if n <span class="hljs-operator">&lt;=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">then</span><br>leave sum;<br><span class="hljs-keyword">end</span> if;<br><br>if n <span class="hljs-operator">%</span> <span class="hljs-number">2</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">then</span><br><span class="hljs-keyword">set</span> n :<span class="hljs-operator">=</span> n <span class="hljs-operator">-</span> <span class="hljs-number">1</span>;<br>iterate sum;<br><span class="hljs-keyword">end</span> if;<br><br><span class="hljs-keyword">set</span> total :<span class="hljs-operator">=</span> total <span class="hljs-operator">+</span> n;<br><span class="hljs-keyword">set</span> n :<span class="hljs-operator">=</span> n <span class="hljs-operator">-</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">end</span> loop sum;<br><br><span class="hljs-keyword">select</span> total;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">10</span>);<br></code></pre></td></tr></table></figure><h2 id="æ¸¸æ ‡">2.11 æ¸¸æ ‡</h2><p><strong>æ¸¸æ ‡ï¼ˆ <code>CURSOR</code>ï¼‰</strong>æ˜¯ç”¨æ¥å­˜å‚¨æŸ¥è¯¢ç»“æœé›†çš„æ•°æ®ç±»å‹ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨æ¸¸æ ‡å¯¹ç»“æœé›†è¿›è¡Œå¾ªç¯çš„å¤„ç†ã€‚æ¸¸æ ‡çš„ä½¿ç”¨åŒ…æ‹¬æ¸¸æ ‡çš„å£°æ˜ã€<code>OPEN</code> ã€ <code>FETCH</code> å’Œ <code>CLOSE</code>ï¼Œå…¶è¯­æ³•åˆ†åˆ«å¦‚ä¸‹ã€‚</p><p><strong>å£°æ˜æ¸¸æ ‡</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DECLARE</span> æ¸¸æ ‡åç§° <span class="hljs-keyword">CURSOR</span> <span class="hljs-keyword">FOR</span> æŸ¥è¯¢è¯­å¥;<br></code></pre></td></tr></table></figure><p><strong>æ‰“å¼€æ¸¸æ ‡</strong> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">OPEN</span> æ¸¸æ ‡åç§°;<br></code></pre></td></tr></table></figure></p><p><strong>è·å–æ¸¸æ ‡è®°å½•</strong> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">FETCH</span> æ¸¸æ ‡åç§° <span class="hljs-keyword">INTO</span> å˜é‡[,å˜é‡];<br></code></pre></td></tr></table></figure></p><p><strong>å…³é—­æ¸¸æ ‡</strong> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CLOSE</span> æ¸¸æ ‡åç§°;<br></code></pre></td></tr></table></figure></p><p><strong>æ¡ˆä¾‹</strong></p><p>ä½¿ç”¨æ¸¸æ ‡åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œç»Ÿè®¡ <code>STUDENT</code> è¡¨å¹´é¾„å¤§äº<code>19</code> çš„è®°å½•çš„æ•°é‡ï¼Œå¦‚ä¸‹ä¸º <code>STUDENT</code>è¡¨çš„åˆ›å»ºä»£ç ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sql">DELIMITER $<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> PROC_STAT()<br><span class="hljs-keyword">BEGIN</span><br>    # åˆ›å»º ç”¨äºæ¥æ”¶æ¸¸æ ‡å€¼çš„å˜é‡<br>    <span class="hljs-keyword">DECLARE</span> ID,AGE,TOTAL <span class="hljs-type">INT</span>;<br>    <span class="hljs-keyword">DECLARE</span> NAME,SEX <span class="hljs-type">CHAR</span>(<span class="hljs-number">10</span>);<br>    # æ¸¸æ ‡ç»“æŸçš„æ ‡å¿—<br>    <span class="hljs-keyword">DECLARE</span> DONE <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;<br>    # å£°æ˜æ¸¸æ ‡<br>    <span class="hljs-keyword">DECLARE</span> CUR <span class="hljs-keyword">CURSOR</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> STUID,STUNAME,STUSEX,STUAGE <span class="hljs-keyword">FROM</span> STUDENT <span class="hljs-keyword">WHERE</span> STUAGE <span class="hljs-operator">&gt;</span> <span class="hljs-number">19</span>;<br>    # æŒ‡å®šæ¸¸æ ‡å¾ªç¯ç»“æŸæ—¶çš„è¿”å›å€¼<br>    <span class="hljs-keyword">DECLARE</span> CONTINUE HANDLER <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">NOT</span> FOUND <span class="hljs-keyword">SET</span> DONE <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>    # æ‰“å¼€æ¸¸æ ‡<br>    <span class="hljs-keyword">OPEN</span> CUR;<br>    # åˆå§‹åŒ–å˜é‡<br>    <span class="hljs-keyword">SET</span> TOTAL <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    # WHILE å¾ªç¯<br>    WHILE DONE <span class="hljs-operator">!=</span> <span class="hljs-number">1</span> DO<br>        <span class="hljs-keyword">FETCH</span> CUR <span class="hljs-keyword">INTO</span> ID,NAME,SEX,AGE;<br>          IF DONE <span class="hljs-operator">!=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">THEN</span><br>             <span class="hljs-keyword">SET</span> TOTAL <span class="hljs-operator">=</span> TOTAL <span class="hljs-operator">+</span> <span class="hljs-number">1</span>;<br>          <span class="hljs-keyword">END</span> IF;<br>    <span class="hljs-keyword">END</span> WHILE;<br>    # å…³é—­æ¸¸æ ‡<br>    <span class="hljs-keyword">CLOSE</span> CUR;<br>    # è¾“å‡ºç´¯è®¡çš„ç»“æœ<br>    <span class="hljs-keyword">SELECT</span> TOTAL;<br><span class="hljs-keyword">END</span>$<br>DELIMITER ;<br># è°ƒç”¨å­˜å‚¨è¿‡ç¨‹<br><span class="hljs-keyword">CALL</span> PROC_STAT();<br></code></pre></td></tr></table></figure><h2 id="æ¡ä»¶å¤„ç†ç¨‹åº">2.12 æ¡ä»¶å¤„ç†ç¨‹åº</h2><p><strong>æ¡ä»¶å¤„ç†ç¨‹åºï¼ˆHandlerï¼‰</strong>å¯ä»¥ç”¨æ¥å®šä¹‰åœ¨æµç¨‹æ§åˆ¶ç»“æ„æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æ—¶ç›¸åº”çš„å¤„ç†æ­¥éª¤ã€‚å…·ä½“è¯­æ³•ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DECLARE</span> handler_action HANDLER <span class="hljs-keyword">FOR</span> condition_value [,condition_value]... statement;<br><br>handler_action<br>CONTINUE:ç»§ç»­æ‰§è¡Œå½“å‰ç¨‹åº<br>EXIT:ä¸­æ­¢æ‰§è¡Œå½“å‰ç¨‹åº<br>condition_value<br><span class="hljs-keyword">SQLSTATE</span> sqlstate_value:çŠ¶æ€ç ï¼Œå¦‚<span class="hljs-number">02000</span>ï¼Œè¡¨ç¤ºæŠ“å–çš„æ—¶å€™æ²¡æ•°æ®<br><span class="hljs-keyword">SQLWARNING</span>:æ‰€æœ‰ä»¥<span class="hljs-number">01</span>å¼€å¤´çš„<span class="hljs-keyword">SQLSTATE</span>ä»£ç çš„ç®€å†™<br><span class="hljs-keyword">NOT</span> FOUND:æ‰€æœ‰ä»¥<span class="hljs-number">02</span>å¼€å¤´çš„<span class="hljs-keyword">SQLSTATE</span>ä»£ç çš„ç®€å†™<br><span class="hljs-keyword">SQLEXCEPTION</span>:æ‰€æœ‰æ²¡æœ‰è¢«SQLWARNNINGæˆ–<span class="hljs-keyword">NOT</span> FOUNDæ•è·çš„<span class="hljs-keyword">SQLSTATE</span>ä»£ç çš„ç®€å†™<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹</strong></p><p>æ ¹æ®ä¼ å…¥çš„å‚æ•° <code>uage</code> ï¼Œæ¥æŸ¥è¯¢ç”¨æˆ·è¡¨ <code>tb_user</code>ä¸­ï¼Œæ‰€æœ‰çš„ç”¨æˆ·å¹´é¾„å°äºç­‰äº <code>uage</code> çš„ç”¨æˆ·å§“åï¼ˆ<code>name</code>ï¼‰å’Œä¸“ä¸šï¼ˆ<code>profession</code>ï¼‰ï¼Œå¹¶å°†ç”¨æˆ·çš„å§“åå’Œä¸“ä¸šæ’å…¥åˆ°æ‰€åˆ›å»ºçš„ä¸€å¼ æ–°è¡¨ï¼ˆ<code>id,name,profession</code>ï¼‰ ä¸­ã€‚</p><p>é€»è¾‘ï¼š</p><ol type="1"><li>å£°æ˜æ¸¸æ ‡ï¼Œå­˜å‚¨æŸ¥è¯¢ç»“æœé›†</li><li>å‡†å¤‡ï¼šåˆ›å»ºè¡¨ç»“æ„</li><li>å¼€å¯æ¸¸æ ‡</li><li>è·å–æ¸¸æ ‡ä¸­çš„è®°å½•</li><li>æ’å…¥æ•°æ®åˆ°æ–°è¡¨ä¸­</li><li>å…³é—­æ¸¸æ ‡</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> p(<span class="hljs-keyword">in</span> uage <span class="hljs-type">int</span>)<br><span class="hljs-keyword">begin</span><br><span class="hljs-comment">-- éœ€è¦å…ˆå£°æ˜æ™®é€šå˜é‡ï¼Œå†å£°æ˜æ¸¸æ ‡ï¼Œä¸ç„¶ä¼šæŠ¥é”™</span><br><span class="hljs-keyword">declare</span> uname <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>);<br><span class="hljs-keyword">declare</span> upro <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>);<br><span class="hljs-keyword">declare</span> u_cursor <span class="hljs-keyword">cursor</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">select</span> name,profession <span class="hljs-keyword">from</span> tb_user <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;=</span> uage;<br><span class="hljs-keyword">declare</span> exit handler <span class="hljs-keyword">for</span> <span class="hljs-keyword">SQLSTATE</span> <span class="hljs-string">&#x27;02000&#x27;</span> <span class="hljs-keyword">close</span> u_cursor;<br><br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> tb_user_pro;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> tb_user_pro(<br>    id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br>        name <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>),<br>        profession <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>)<br>    );<br><br>    <span class="hljs-keyword">open</span> u_cursor;<br>    while <span class="hljs-literal">true</span> do<br>    <span class="hljs-keyword">fetch</span> u_cursor <span class="hljs-keyword">into</span> uname,upro;<br>    <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tb_user_pro <span class="hljs-keyword">values</span> (<span class="hljs-keyword">null</span>, uname, upro);<br>    <span class="hljs-keyword">end</span> while;<br>    <span class="hljs-keyword">close</span> u_cursor;<br><br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">call</span> p(<span class="hljs-number">40</span>);<br></code></pre></td></tr></table></figure><h1 id="å­˜å‚¨å‡½æ•°">3. å­˜å‚¨å‡½æ•°</h1><p>å­˜å‚¨å‡½æ•°æ˜¯æœ‰è¿”å›å€¼çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå­˜å‚¨å‡½æ•°çš„å‚æ•°åªèƒ½æ˜¯ <code>IN</code>ç±»å‹çš„ã€‚å…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> å­˜å‚¨å‡½æ•°åç§°([å‚æ•°åˆ—è¡¨])<br><span class="hljs-keyword">RETURNS</span> type [characteristic...]<br><span class="hljs-keyword">BEGIN</span><br><span class="hljs-comment">-- SQLè¯­å¥</span><br><span class="hljs-keyword">RETURN</span> ...;<br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure><p><code>characteristic</code> è¯´æ˜ï¼š</p><ul><li><code>DETERMINISTIC</code> ï¼šç›¸åŒçš„è¾“å…¥å‚æ•°æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚</li><li><code>NO SQL</code> ï¼šä¸åŒ…å« <code>SQL</code> è¯­å¥ã€‚</li><li><code>READS SQL DATA</code>ï¼šåŒ…å«è¯»å–æ•°æ®çš„è¯­å¥ï¼Œä½†ä¸åŒ…å«å†™å…¥æ•°æ®çš„è¯­å¥ã€‚</li><li><strong>DETERMINISTIC</strong>ï¼š<ul><li>è¡¨ç¤ºå‡½æ•°çš„è¿”å›å€¼åœ¨ç»™å®šç›¸åŒçš„è¾“å…¥å‚æ•°æ—¶æ€»æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸€ç»„ç‰¹å®šçš„è¾“å…¥å‚æ•°ï¼Œå‡½æ•°å°†å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„è¾“å‡ºã€‚</li><li>è¿™ä¸ªç‰¹æ€§å¯¹äºæ•°æ®åº“ä¼˜åŒ–å¾ˆé‡è¦ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªå‡½æ•°æ˜¯ç¡®å®šæ€§çš„ï¼Œé‚£ä¹ˆåœ¨æŸ¥è¯¢è®¡åˆ’ä¸­ï¼Œæ•°æ®åº“å¯ä»¥ç¼“å­˜è¿™ä¸ªå‡½æ•°çš„ç»“æœï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li><li>å¦‚æœå‡½æ•°å†…éƒ¨æ¶‰åŠåˆ°éšæœºæ•°ç”Ÿæˆæˆ–è€…ä¾èµ–äºå¤–éƒ¨å˜åŒ–çš„æ•°æ®ï¼ˆå¦‚å½“å‰æ—¶é—´ã€ç”¨æˆ·ä¼šè¯å˜é‡ç­‰ï¼‰ï¼Œåˆ™ä¸åº”è¯¥å£°æ˜ä¸ºDETERMINISTICã€‚</li></ul></li><li><strong>NO SQL</strong>ï¼š<ul><li>è¡¨ç¤ºå‡½æ•°ä¸­ä¸åŒ…å«ä»»ä½•SQLè¯­å¥ï¼Œå³å‡½æ•°ä½“ä¸­æ²¡æœ‰å¯¹æ•°æ®åº“è¿›è¡Œä»»ä½•è¯»å†™æ“ä½œã€‚</li><li>å£°æ˜ä¸ºNOSQLçš„å‡½æ•°å¯ä»¥å®‰å…¨åœ°åœ¨å¦‚äº‹åŠ¡å¤„ç†ç­‰éœ€è¦ç¡®ä¿ACIDå±æ€§ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šå½±å“æ•°æ®åº“çš„æ•°æ®ã€‚</li></ul></li><li><strong>READS SQL DATA</strong>ï¼š<ul><li>è¡¨ç¤ºå‡½æ•°ä¸­åŒ…å«è¯»å–æ•°æ®çš„SQLè¯­å¥ï¼Œä½†ä¸åŒ…å«å†™å…¥æ•°æ®çš„è¯­å¥ã€‚</li><li>è¿™ç§ç±»å‹çš„å‡½æ•°å¯èƒ½ä¼šä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®ï¼Œä½†ä¸è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚å› æ­¤ï¼Œå®ƒä»¬ä¸ä¼šå½±å“æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</li><li>å£°æ˜ä¸ºREADS SQLDATAçš„å‡½æ•°å¯ä»¥åœ¨å¤§å¤šæ•°ä¸Šä¸‹æ–‡ä¸­å®‰å…¨ä½¿ç”¨ï¼Œä½†æ•°æ®åº“ç³»ç»Ÿä¼šç¡®ä¿è¿™äº›å‡½æ•°ä¸ä¼šåœ¨ä¸å…è®¸è¯»å–æ•°æ®çš„ä¸Šä¸‹æ–‡ä¸­è¢«è°ƒç”¨ã€‚</li></ul></li></ul><p><strong>æ¡ˆä¾‹</strong></p><p>è®¡ç®—ä» <code>1</code> ç´¯åŠ åˆ° <code>n</code> ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> fun1(n <span class="hljs-type">int</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-type">int</span> <span class="hljs-keyword">deterministic</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> total <span class="hljs-type">int</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br><br>while n<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span> do<br><span class="hljs-keyword">set</span> total :<span class="hljs-operator">=</span> total <span class="hljs-operator">+</span> n;<br><span class="hljs-keyword">set</span> n :<span class="hljs-operator">=</span> n <span class="hljs-operator">-</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">end</span> while;<br><br><span class="hljs-keyword">return</span> total;<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-keyword">select</span> fun1(<span class="hljs-number">50</span>);<br></code></pre></td></tr></table></figure><h1 id="è§¦å‘å™¨">4. è§¦å‘å™¨</h1><h2 id="ä»‹ç»">4.1 ä»‹ç»</h2><p>è§¦å‘å™¨æ˜¯ä¸è¡¨æœ‰å…³çš„æ•°æ®åº“å¯¹è±¡ï¼ŒæŒ‡åœ¨ <code>insert/update/delete</code>ä¹‹å‰æˆ–ä¹‹åï¼Œè§¦å‘å¹¶æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„ <code>SQL</code>è¯­å¥é›†åˆã€‚è§¦å‘å™¨çš„è¿™ç§ç‰¹æ€§å¯ä»¥ååŠ©åº”ç”¨åœ¨æ•°æ®åº“ç«¯ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ï¼Œæ—¥å¿—è®°å½•ï¼Œæ•°æ®æ ¡éªŒç­‰æ“ä½œã€‚</p><p>ä½¿ç”¨åˆ«å <code>OLD</code> å’Œ <code>NEW</code>æ¥å¼•ç”¨è§¦å‘å™¨ä¸­å‘ç”Ÿå˜åŒ–çš„è®°å½•å†…å®¹ï¼Œè¿™ä¸å…¶ä»–çš„æ•°æ®åº“æ˜¯ç›¸ä¼¼çš„ã€‚ç°åœ¨è§¦å‘å™¨è¿˜åªæ”¯æŒè¡Œçº§è§¦å‘ï¼Œä¸æ”¯æŒè¯­å¥çº§è§¦å‘ã€‚</p><table><thead><tr><th>è§¦å‘å™¨ç±»å‹</th><th>NEW å’Œ OLD</th></tr></thead><tbody><tr><td>INSERT å‹è§¦å‘å™¨</td><td>NEW è¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»æ–°å¢çš„æ•°æ®</td></tr><tr><td>UPDATE å‹è§¦å‘å™¨</td><td>OLD è¡¨ç¤ºä¿®æ”¹ä¹‹å‰çš„æ•°æ®ï¼ŒNEW è¡¨ç¤ºå°†è¦æˆ–å·²ç»ä¿®æ”¹åçš„æ•°æ®</td></tr><tr><td>DELETE å‹è§¦å‘å™¨</td><td>OLD è¡¨ç¤ºå°†è¦æˆ–è€…å·²ç»åˆ é™¤çš„æ•°æ®</td></tr></tbody></table><h2 id="è¯­æ³•">4.2 è¯­æ³•</h2><p><strong>åˆ›å»º</strong> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> trigger_name<br>BEFORE<span class="hljs-operator">/</span>AFTER <span class="hljs-keyword">INSERT</span><span class="hljs-operator">/</span><span class="hljs-keyword">UPDATE</span><span class="hljs-operator">/</span><span class="hljs-keyword">DELETE</span><br><span class="hljs-keyword">ON</span> tbl_name <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span>  <span class="hljs-comment">-- è¡Œçº§è§¦å‘å™¨</span><br><span class="hljs-keyword">BEGIN</span><br>trigger_stmt;<br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure></p><p><strong>æŸ¥çœ‹</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> TRIGGERS;<br></code></pre></td></tr></table></figure><p><strong>åˆ é™¤</strong> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TRIGGER</span> [schema_name.]trigger_name;<span class="hljs-comment">--å¦‚æœæ²¡æœ‰æŒ‡å®šschema_nameï¼Œé»˜è®¤ä¸ºå½“å‰æ•°æ®åº“</span><br></code></pre></td></tr></table></figure></p><h2 id="æ¡ˆä¾‹-1">4.3 <strong>æ¡ˆä¾‹</strong></h2><p>é€šè¿‡è§¦å‘å™¨è®°å½• <code>tu_user</code>è¡¨çš„æ•°æ®å˜æ›´æ—¥å¿—ï¼Œå°†å˜æ›´æ—¥å¿—æ’å…¥åˆ°æ—¥å¿—è¡¨ <code>user_logs</code>ä¸­ï¼ŒåŒ…å«å¢åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚ <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºè¡¨ç»“æ„</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> user_logs(<br>  id <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> auto_increment,<br>  operation <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;æ“ä½œç±»å‹, insert/update/delete&#x27;</span>,<br>  operate_time datetime <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>,<br>  operate_id <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;æ“ä½œçš„ID&#x27;</span>,<br>  operate_params <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>) comment <span class="hljs-string">&#x27;æ“ä½œå‚æ•°&#x27;</span>,<br>  <span class="hljs-keyword">primary</span> key(`id`)<br>)engine<span class="hljs-operator">=</span>innodb <span class="hljs-keyword">default</span> charset<span class="hljs-operator">=</span>utf8;<br></code></pre></td></tr></table></figure></p><h3 id="insert-ç±»å‹è§¦å‘å™¨"><strong><code>INSERT</code>ç±»å‹è§¦å‘å™¨ï¼š</strong></h3><p><strong>æ¡ˆä¾‹1</strong></p><p>ç¼–å†™ä¸€ä¸ªåä¸º <code>INSERT_S</code> çš„è§¦å‘å™¨ï¼Œåœ¨ <code>S</code> è¡¨æ‰§è¡Œ<code>INSERT</code> è¯­å¥åè¢«æ¿€å‘ï¼Œæ­¤è§¦å‘å™¨å°†æ–°ä¾›åº”å•†çš„<code>SNO</code>ã€ <code>SNAME</code>ã€ <code>STATUS</code>ã€<code>CITY</code> åŠæ‰§è¡Œæ­¤æ“ä½œçš„ç”¨æˆ·ï¼ˆ <code>USER</code>ï¼‰æ’å…¥<code>N_S</code> è¡¨ï¼Œ <code>N_S</code> è¡¨æ¯” <code>S</code>è¡¨å¢æ·»æ“ä½œç”¨æˆ·ä¸€åˆ—ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> INSERT_S after <span class="hljs-keyword">insert</span> <span class="hljs-keyword">on</span> S <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> N_S(SNO,SNAME,STATUS,CITY,<span class="hljs-keyword">USER</span>) <span class="hljs-keyword">VALUES</span>(new.SNO,new.SNAME,new.STATUS,new.CITY,<span class="hljs-keyword">USER</span>());<br><span class="hljs-keyword">end</span>$<br>delimiter ;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹2</strong></p><p>ç¼–å†™ä¸€ä¸ªåä¸º <code>INSERT_SPJ</code> çš„è§¦å‘å™¨ï¼Œå½“ <code>SPJ</code>è¡¨ä¸­æœ‰æ’å…¥æŸæ¡è®°å½•æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°è¡¨ <code>SPJ_SUMQTY</code> è¡¨ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> INSERT_SPJ after <span class="hljs-keyword">insert</span> <span class="hljs-keyword">on</span> SPJ <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br>    if <span class="hljs-keyword">exists</span>(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> SPJ_SUMQTY <span class="hljs-keyword">as</span> s <span class="hljs-keyword">where</span> s.PNO <span class="hljs-operator">=</span> new.PNO <span class="hljs-keyword">and</span> s.JNO <span class="hljs-operator">=</span> new.JNO) <span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">update</span> SPJ_SUMQTY <span class="hljs-keyword">as</span> s1 <span class="hljs-keyword">set</span> s1.SUMQTY <span class="hljs-operator">=</span> s1.SUMQTY <span class="hljs-operator">+</span> new.QTY <span class="hljs-keyword">where</span> s1.JNO <span class="hljs-operator">=</span> new.JNO <span class="hljs-keyword">and</span> s1.PNO <span class="hljs-operator">=</span> new.PNO;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> SPJ_SUMQTY <span class="hljs-keyword">VALUES</span>(new.JNO, new.PNO, new.QTY);<br>    <span class="hljs-keyword">end</span> if;<br><span class="hljs-keyword">end</span>$<br>delimiter ;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹3</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ’å…¥æ•°æ®è§¦å‘å™¨</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> tb_user_insert_trigger<br>after <span class="hljs-keyword">insert</span> <span class="hljs-keyword">on</span> tb_user <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> user_logs(id, operation, operate_time, operate_id, operate_params) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;insert&#x27;</span>, now(), new.id, concat(<span class="hljs-string">&#x27;æ’å…¥çš„æ•°æ®å†…å®¹ä¸ºï¼šid=&#x27;</span>,new.id,<span class="hljs-string">&#x27;,name=&#x27;</span>,new.name,<span class="hljs-string">&#x27;,phone=&#x27;</span>,new.phone,<span class="hljs-string">&#x27;,email=&#x27;</span>,new.email,<span class="hljs-string">&#x27;,profession=&#x27;</span>,new.profession));<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-comment">-- æŸ¥çœ‹</span><br><span class="hljs-keyword">show</span> triggers;<br><br><span class="hljs-comment">-- æ’å…¥æ•°æ®</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tb_user(id, name, phone, email, profession, age, gender, status, createtime)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">25</span>,<span class="hljs-string">&#x27;äºŒçš‡å­&#x27;</span>,<span class="hljs-string">&#x27;18809091212&#x27;</span>,<span class="hljs-string">&#x27;erhuangzi@163.com&#x27;</span>,<span class="hljs-string">&#x27;è½¯ä»¶å·¥ç¨‹&#x27;</span>,<span class="hljs-number">23</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,now());<br><br><span class="hljs-comment">-- åˆ é™¤</span><br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">trigger</span> tb_user_insert_trigger;<br></code></pre></td></tr></table></figure><h3 id="update-ç±»å‹è§¦å‘å™¨"><strong><code>UPDATE</code>ç±»å‹è§¦å‘å™¨ï¼š</strong></h3><p><strong>æ¡ˆä¾‹1</strong></p><p>ç¼–å†™ä¸€ä¸ªåä¸º <code>UPDATE_S</code> çš„è§¦å‘å™¨ï¼Œæ£€æŸ¥ <code>S</code> è¡¨çš„<code>STATUS</code> ï¼Œåªå…è®¸ <code>0-100</code> ä¹‹é—´ï¼Œè¶…è¿‡<code>100</code> åï¼Œæ”¹ä¸º <code>100</code> ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> UPDATE_S before <span class="hljs-keyword">update</span> <span class="hljs-keyword">on</span> S <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br>    if new.STATUS <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span> <span class="hljs-keyword">then</span><br>    <span class="hljs-keyword">set</span> new.STATUS <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">end</span> if;<br><span class="hljs-keyword">end</span>$<br>delimiter ;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹2</strong></p><p>ç¼–å†™ä¸€ä¸ªåä¸º <code>UPDATE_SPJ</code> çš„è§¦å‘å™¨ï¼Œå½“ <code>SPJ</code>è¡¨ä¸­æœ‰æ›´æ–°æŸæ¡è®°å½•æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°è¡¨ <code>SPJ_SUMQTY</code> è¡¨ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> UPDATE_SPJ before <span class="hljs-keyword">update</span> <span class="hljs-keyword">on</span> SPJ <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">update</span> SPJ_SUMQTY <span class="hljs-keyword">as</span> s1 <span class="hljs-keyword">set</span> s1.SUMQTY <span class="hljs-operator">=</span> s1.SUMQTY <span class="hljs-operator">+</span> new.QTY <span class="hljs-operator">-</span> old.QTY <span class="hljs-keyword">where</span> s1.JNO <span class="hljs-operator">=</span> new.JNO <span class="hljs-keyword">and</span> s1.PNO <span class="hljs-operator">=</span> new.PNO;<br><span class="hljs-keyword">end</span>$<br>delimiter ;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹3</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ä¿®æ”¹æ•°æ®è§¦å‘å™¨</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> tb_user_update_trigger<br>after <span class="hljs-keyword">update</span> <span class="hljs-keyword">on</span> tb_user <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> user_logs(id, operation, operate_time, operate_id, operate_params) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;update&#x27;</span>, now(), new.id, concat(<span class="hljs-string">&#x27;æ›´æ–°ä¹‹å‰çš„æ•°æ®ï¼šid=&#x27;</span>,new.id,<span class="hljs-string">&#x27;,name=&#x27;</span>,old.name,<span class="hljs-string">&#x27;,phone=&#x27;</span>,old.phone,<span class="hljs-string">&#x27;,email=&#x27;</span>,old.email,<span class="hljs-string">&#x27;,profession=&#x27;</span>,old.profession,<br><span class="hljs-string">&#x27; | æ›´æ–°ä¹‹åçš„æ•°æ®ï¼šid=&#x27;</span>,new.id,<span class="hljs-string">&#x27;,name=&#x27;</span>,new.name,<span class="hljs-string">&#x27;,phone=&#x27;</span>,new.phone,<span class="hljs-string">&#x27;,email=&#x27;</span>,new.email,<span class="hljs-string">&#x27;,profession=&#x27;</span>,new.profession));<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-comment">-- æŸ¥çœ‹</span><br><span class="hljs-keyword">show</span> triggers;<br><br><span class="hljs-comment">-- æ›´æ–°æ•°æ®</span><br><span class="hljs-keyword">update</span> tb_user <span class="hljs-keyword">set</span> age <span class="hljs-operator">=</span> <span class="hljs-number">32</span> <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">23</span>;<br></code></pre></td></tr></table></figure><h3 id="delete-ç±»å‹è§¦å‘å™¨"><strong><code>DELETE</code>ç±»å‹è§¦å‘å™¨ï¼š</strong></h3><p><strong>æ¡ˆä¾‹1</strong></p><p>ç¼–å†™ä¸€ä¸ªåä¸º <code>DELETE_SPJ</code> çš„è§¦å‘å™¨ï¼Œå½“ <code>SPJ</code>è¡¨ä¸­æœ‰åˆ é™¤æŸæ¡è®°å½•æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°è¡¨ <code>SPJ_SUMQTY</code> è¡¨ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> DELETE_SPJ after <span class="hljs-keyword">delete</span> <span class="hljs-keyword">on</span> SPJ <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">update</span> SPJ_SUMQTY <span class="hljs-keyword">as</span> s1 <span class="hljs-keyword">set</span> s1.SUMQTY <span class="hljs-operator">=</span> s1.SUMQTY <span class="hljs-operator">-</span> old.QTY <span class="hljs-keyword">where</span> s1.JNO <span class="hljs-operator">=</span> old.JNO <span class="hljs-keyword">and</span> s1.PNO <span class="hljs-operator">=</span> old.PNO;<br>    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> SPJ_SUMQTY <span class="hljs-keyword">as</span> s1 <span class="hljs-keyword">where</span> s1.SUMQTY <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">end</span>$<br>delimiter ;<br></code></pre></td></tr></table></figure><p><strong>æ¡ˆä¾‹2</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ é™¤æ•°æ®è§¦å‘å™¨</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> tb_user_delete_trigger<br>after <span class="hljs-keyword">delete</span> <span class="hljs-keyword">on</span> tb_user <span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> user_logs(id, operation, operate_time, operate_id, operate_params) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;delete&#x27;</span>, now(), old.id, concat(<span class="hljs-string">&#x27;åˆ é™¤ä¹‹å‰çš„æ•°æ®ï¼šid=&#x27;</span>,old.id,<span class="hljs-string">&#x27;,name=&#x27;</span>,old.name,<span class="hljs-string">&#x27;,phone=&#x27;</span>,old.phone,<span class="hljs-string">&#x27;,email=&#x27;</span>,old.email,<span class="hljs-string">&#x27;,profession=&#x27;</span>,old.profession));<br><span class="hljs-keyword">end</span>;<br><br><span class="hljs-comment">-- æŸ¥çœ‹</span><br><span class="hljs-keyword">show</span> triggers;<br><br><span class="hljs-comment">-- æ›´æ–°æ•°æ®</span><br><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> tb_user <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>9. SQLä¼˜åŒ–</title>
    <link href="/2024/11/27/MySQL/9-SQL%E4%BC%98%E5%8C%96/"/>
    <url>/2024/11/27/MySQL/9-SQL%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="æ’å…¥æ•°æ®">1. æ’å…¥æ•°æ®</h1><p>æ™®é€šæ’å…¥ï¼š</p><ol type="1"><li>é‡‡ç”¨æ‰¹é‡æ’å…¥ï¼ˆä¸€æ¬¡æ’å…¥çš„æ•°æ®ä¸å»ºè®®è¶…è¿‡1000æ¡ï¼Œ500 - 1000 ä¸ºå®œï¼‰</li><li>æ‰‹åŠ¨æäº¤äº‹åŠ¡<ol type="1"><li>å¤šæ¡æ’å…¥è¯­å¥ç»Ÿä¸€æäº¤</li></ol></li><li>ä¸»é”®é¡ºåºæ’å…¥ï¼ˆä¸»é”®é¡ºåºæ’å…¥çš„æ•ˆç‡å¤§äºä¹±åºæ’å…¥ï¼‰</li></ol><p>å¤§æ‰¹é‡æ’å…¥ï¼š</p><ol type="1"><li>å¦‚æœä¸€æ¬¡æ€§éœ€è¦æ’å…¥å¤§æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨insertè¯­å¥æ’å…¥æ€§èƒ½è¾ƒä½ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨MySQLæ•°æ®åº“æä¾›çš„loadæŒ‡ä»¤æ’å…¥ã€‚</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼ŒåŠ ä¸Šå‚æ•° <span class="hljs-comment">--local-infileï¼ˆè¿™ä¸€è¡Œåœ¨bash/cmdç•Œé¢è¾“å…¥ï¼‰</span><br>mysql <span class="hljs-comment">--local-infile -u root -p</span><br># è®¾ç½®å…¨å±€å‚æ•°local_infileä¸º<span class="hljs-number">1</span>ï¼Œå¼€å¯ä»æœ¬åœ°åŠ è½½æ–‡ä»¶å¯¼å…¥æ•°æ®çš„å¼€å…³<br><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> local_infile <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">select</span> @<span class="hljs-variable">@local_infile</span>;<br># æ‰§è¡ŒloadæŒ‡ä»¤å°†å‡†å¤‡å¥½çš„æ•°æ®ï¼ŒåŠ è½½åˆ°è¡¨ç»“æ„ä¸­ï¼Œå…ˆè¦æŠŠè¡¨å»ºç«‹èµ·æ¥ã€‚<br>load data <span class="hljs-keyword">local</span> infile <span class="hljs-string">&#x27;/root/sql1.log&#x27;</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> <span class="hljs-string">&#x27;tb_user&#x27;</span> fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;,&#x27;</span> lines terminated <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;\n&#x27;</span>;<br></code></pre></td></tr></table></figure><h1 id="ä¸»é”®ä¼˜åŒ–">2. ä¸»é”®ä¼˜åŒ–</h1><ol type="1"><li><p>æ•°æ®ç»„ç»‡æ–¹å¼ï¼šåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œè¡¨æ•°æ®éƒ½æ˜¯æ ¹æ®ä¸»é”®é¡ºåºç»„ç»‡å­˜æ”¾çš„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼çš„è¡¨ç§°ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼ˆIndexorganized table, IOTï¼‰</p></li><li><p>ä¸»é”®çš„é¡ºåºçš„æ’å…¥è¿‡ç¨‹å¦‚ä¸‹ï¼š</p></li></ol><p><img src="/2024/11/27/MySQL/9-SQL%E4%BC%98%E5%8C%96/image-20241130212808387.png"></p><ul><li>ä½†æ˜¯å¦‚æœä¸»é”®æ˜¯ä¹±åºæ’å…¥çš„è¯ï¼Œå°±ä¼šå¯¼è‡´éœ€è¦æ’å…¥çš„ä½ç½®ä¸ºä¸­é—´çš„ä½ç½®ï¼Œä¼šæœ‰é¡µåˆ†è£‚çš„è¿‡ç¨‹ã€‚</li></ul><ol start="3" type="1"><li><p>é¡µåˆ†è£‚ï¼šé¡µå¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå¯ä»¥å¡«å……ä¸€èˆ¬ï¼Œä¹Ÿå¯ä»¥å¡«å……100%ï¼Œæ¯ä¸ªé¡µåŒ…å«äº†2-Nè¡Œæ•°æ®ï¼ˆå¦‚æœä¸€è¡Œæ•°æ®è¿‡å¤§ï¼Œä¼šè¡Œæº¢å‡ºï¼‰ï¼Œæ ¹æ®ä¸»é”®æ’åˆ—ã€‚</p></li><li><p>é¡µåˆå¹¶ï¼š</p><ol type="1"><li>å½“åˆ é™¤ä¸€è¡Œè®°å½•æ—¶ï¼Œå®é™…ä¸Šè®°å½•å¹¶æ²¡æœ‰è¢«ç‰©ç†åˆ é™¤ï¼Œåªæ˜¯è®°å½•è¢«æ ‡è®°ï¼ˆflagedï¼‰ä¸ºåˆ é™¤å¹¶ä¸”å®ƒçš„ç©ºé—´å˜å¾—å…è®¸è¢«å…¶ä»–è®°å½•å£°æ˜ä½¿ç”¨ã€‚</li><li>å½“é¡µä¸­åˆ é™¤çš„è®°å½•åˆ°è¾¾MERGE_THRESHOLDï¼ˆé»˜è®¤ä¸ºé¡µçš„50%ï¼‰ï¼ŒInnoDBä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†è¿™ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚</li></ol></li></ol><ul><li>MERGE_THRESHOLDï¼šåˆå¹¶é¡µçš„é˜ˆå€¼ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ï¼Œåœ¨åˆ›å»ºè¡¨æˆ–åˆ›å»ºç´¢å¼•æ—¶æŒ‡å®š</li></ul><blockquote><p>æ–‡å­—è¯´æ˜ä¸å¤Ÿæ¸…æ™°æ˜äº†ï¼Œå…·ä½“å¯ä»¥çœ‹è§†é¢‘é‡Œçš„PPTæ¼”ç¤ºè¿‡ç¨‹ï¼šhttps://www.bilibili.com/video/BV1Kr4y1i7ru?p=90</p></blockquote><ol start="5" type="1"><li>ä¸»é”®è®¾è®¡åŸåˆ™ï¼š</li></ol><ul><li>æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œå°½é‡é™ä½ä¸»é”®çš„é•¿åº¦ï¼ŒäºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¿å­˜çš„å°±æ˜¯ä¸»é”®ï¼Œæ‰€ä»¥ä¸»é”®å°å ç”¨çš„ç©ºé—´ä¹Ÿå°±ä¼šå°‘ã€‚</li><li>æ’å…¥æ•°æ®æ—¶ï¼Œå°½é‡é€‰æ‹©é¡ºåºæ’å…¥ï¼Œé€‰æ‹©ä½¿ç”¨ AUTO_INCREMENT è‡ªå¢ä¸»é”®</li><li>å°½é‡ä¸è¦ä½¿ç”¨ UUIDåšä¸»é”®æˆ–è€…æ˜¯å…¶ä»–çš„è‡ªç„¶ä¸»é”®ï¼Œå¦‚èº«ä»½è¯å·ï¼Œå ç”¨çš„ç©ºé—´å¤§ã€‚</li><li>ä¸šåŠ¡æ“ä½œæ—¶ï¼Œé¿å…å¯¹ä¸»é”®çš„ä¿®æ”¹</li></ul><h1 id="order-byä¼˜åŒ–">3. order byä¼˜åŒ–</h1><ol type="1"><li><p>Usingfilesortï¼šé€šè¿‡è¡¨çš„ç´¢å¼•æˆ–å…¨è¡¨æ‰«æï¼Œè¯»å–æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¡Œï¼Œç„¶ååœ¨æ’åºç¼“å†²åŒºsort buffer ä¸­å®Œæˆæ’åºæ“ä½œï¼Œæ‰€æœ‰ä¸æ˜¯é€šè¿‡ç´¢å¼•ç›´æ¥è¿”å›æ’åºç»“æœçš„æ’åºéƒ½å«FileSort æ’åº</p></li><li><p>Using indexï¼šé€šè¿‡æœ‰åºç´¢å¼•é¡ºåºæ‰«æç›´æ¥è¿”å›æœ‰åºæ•°æ®ï¼Œè¿™ç§æƒ…å†µå³ä¸ºusing indexï¼Œä¸éœ€è¦é¢å¤–æ’åºï¼Œæ“ä½œæ•ˆç‡é«˜</p></li><li><p>å¦‚æœorder byå­—æ®µå…¨éƒ¨ä½¿ç”¨å‡åºæ’åºæˆ–è€…é™åºæ’åºï¼Œåˆ™éƒ½ä¼šèµ°ç´¢å¼•ï¼Œ</p><ol type="1"><li>ä½†æ˜¯å¦‚æœä¸€ä¸ªå­—æ®µå‡åºæ’åºï¼Œå¦ä¸€ä¸ªå­—æ®µé™åºæ’åºï¼Œåˆ™ä¸ä¼šèµ°ç´¢å¼•ï¼Œexplainçš„extraä¿¡æ¯æ˜¾ç¤ºçš„æ˜¯<code>Using index, Using filesort</code>ï¼Œ</li><li>å¦‚æœè¦ä¼˜åŒ–æ‰Usingfilesortï¼Œåˆ™éœ€è¦å¦å¤–å†åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œå¦‚ï¼š<code>create index idx_user_age_phone_ad on tb_user(age asc, phone desc);</code>ï¼Œæ­¤æ—¶ä½¿ç”¨<code>select id, age, phone from tb_user order by age asc, phone desc;</code>ä¼šå…¨éƒ¨èµ°ç´¢å¼•</li></ol></li></ol><p>æ€»ç»“ï¼š</p><ul><li>æ ¹æ®æ’åºå­—æ®µå»ºç«‹åˆé€‚çš„ç´¢å¼•ï¼Œå¤šå­—æ®µæ’åºæ—¶ï¼Œä¹Ÿéµå¾ªæœ€å·¦å‰ç¼€æ³•åˆ™</li><li>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</li><li>å¤šå­—æ®µæ’åºï¼Œä¸€ä¸ªå‡åºä¸€ä¸ªé™åºï¼Œæ­¤æ—¶éœ€è¦æ³¨æ„è”åˆç´¢å¼•åœ¨åˆ›å»ºæ—¶çš„è§„åˆ™ï¼ˆASC/DESCï¼‰</li><li>å¦‚æœä¸å¯é¿å…å‡ºç°filesortï¼Œå¤§æ•°æ®é‡æ’åºæ—¶ï¼Œå¯ä»¥é€‚å½“å¢å¤§æ’åºç¼“å†²åŒºå¤§å°sort_buffer_sizeï¼ˆé»˜è®¤256kï¼‰</li></ul><h1 id="group-byä¼˜åŒ–">4. group byä¼˜åŒ–</h1><ul><li>åœ¨åˆ†ç»„æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥æé«˜æ•ˆç‡</li><li>åˆ†ç»„æ“ä½œæ—¶ï¼Œç´¢å¼•çš„ä½¿ç”¨ä¹Ÿæ˜¯æ»¡è¶³æœ€å·¦å‰ç¼€æ³•åˆ™çš„</li></ul><p>å¦‚ç´¢å¼•ä¸º<code>idx_user_pro_age_stat</code>ï¼Œåˆ™å¥å¼å¯ä»¥æ˜¯<code>select ... where profession order by age</code>ï¼Œè¿™æ ·ä¹Ÿç¬¦åˆæœ€å·¦å‰ç¼€æ³•åˆ™</p><h1 id="limitä¼˜åŒ–">5. limitä¼˜åŒ–</h1><ol type="1"><li>å¸¸è§çš„é—®é¢˜å¦‚<code>limit 2000000, 10</code>ï¼Œæ­¤æ—¶éœ€è¦ MySQLæ’åºå‰2000000æ¡è®°å½•ï¼Œä½†ä»…ä»…è¿”å›2000000 -2000010çš„è®°å½•ï¼Œå…¶ä»–è®°å½•ä¸¢å¼ƒï¼ŒæŸ¥è¯¢æ’åºçš„ä»£ä»·éå¸¸å¤§ã€‚</li><li>ä¼˜åŒ–æ–¹æ¡ˆï¼šä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡åˆ›å»ºè¦†ç›–ç´¢å¼•èƒ½å¤Ÿæ¯”è¾ƒå¥½åœ°æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å­æŸ¥è¯¢å½¢å¼è¿›è¡Œä¼˜åŒ–</li></ol><p>ä¾‹å¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ­¤è¯­å¥è€—æ—¶å¾ˆé•¿</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tb_sku limit <span class="hljs-number">9000000</span>, <span class="hljs-number">10</span>;<br><span class="hljs-comment">-- é€šè¿‡è¦†ç›–ç´¢å¼•åŠ å¿«é€Ÿåº¦ï¼Œç›´æ¥é€šè¿‡ä¸»é”®ç´¢å¼•è¿›è¡Œæ’åºåŠæŸ¥è¯¢</span><br><span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> tb_sku <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> id limit <span class="hljs-number">9000000</span>, <span class="hljs-number">10</span>;<br><span class="hljs-comment">-- ä¸‹é¢çš„è¯­å¥æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º MySQL ä¸æ”¯æŒ in é‡Œé¢ä½¿ç”¨ limit</span><br><span class="hljs-comment">-- select * from tb_sku where id in (select id from tb_sku order by id limit 9000000, 10);</span><br><span class="hljs-comment">-- é€šè¿‡è¿è¡¨æŸ¥è¯¢å³å¯å®ç°ç¬¬ä¸€å¥çš„æ•ˆæœï¼Œå¹¶ä¸”èƒ½è¾¾åˆ°ç¬¬äºŒå¥çš„é€Ÿåº¦</span><br><span class="hljs-keyword">select</span> s.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> tb_sku <span class="hljs-keyword">as</span> s, (<span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> tb_sku <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> id limit <span class="hljs-number">9000000</span>, <span class="hljs-number">10</span>) <span class="hljs-keyword">as</span> a <span class="hljs-keyword">where</span> s.id <span class="hljs-operator">=</span> a.id;<br></code></pre></td></tr></table></figure><h1 id="countä¼˜åŒ–">6. countä¼˜åŒ–</h1><ol type="1"><li>MyISAM å¼•æ“æŠŠä¸€ä¸ªè¡¨çš„æ€»è¡Œæ•°å­˜åœ¨äº†ç£ç›˜ä¸Šï¼Œå› æ­¤æ‰§è¡Œ count(*)çš„æ—¶å€™ä¼šç›´æ¥è¿”å›è¿™ä¸ªæ•°ï¼Œæ•ˆç‡å¾ˆé«˜ï¼ˆå‰ææ˜¯ä¸é€‚ç”¨whereï¼‰ï¼›<br></li><li>InnoDB åœ¨æ‰§è¡Œ count(*)æ—¶ï¼Œéœ€è¦æŠŠæ•°æ®ä¸€è¡Œä¸€è¡Œåœ°ä»å¼•æ“é‡Œé¢è¯»å‡ºæ¥ï¼Œç„¶åç´¯è®¡è®¡æ•°ã€‚<ol type="1"><li>ä¼˜åŒ–æ–¹æ¡ˆï¼šè‡ªå·±è®¡æ•°ï¼Œå¦‚åˆ›å»ºkey-valueè¡¨å­˜å‚¨åœ¨å†…å­˜æˆ–ç¡¬ç›˜ï¼Œæˆ–è€…æ˜¯ç”¨redis</li></ol></li><li>countçš„å‡ ç§ç”¨æ³•ï¼š</li></ol><ul><li>å¦‚æœcountå‡½æ•°çš„å‚æ•°ï¼ˆcounté‡Œé¢å†™çš„é‚£ä¸ªå­—æ®µï¼‰ä¸æ˜¯NULLï¼ˆå­—æ®µå€¼ä¸ä¸ºNULLï¼‰ï¼Œç´¯è®¡å€¼å°±åŠ ä¸€ï¼Œæœ€åè¿”å›ç´¯è®¡å€¼</li><li>ç”¨æ³•ï¼šcount(*)ã€count(ä¸»é”®)ã€count(å­—æ®µ)ã€count(1)</li><li>count(ä¸»é”®)è·Ÿcount(*)ä¸€æ ·ï¼Œå› ä¸ºä¸»é”®ä¸èƒ½ä¸ºç©ºï¼›count(å­—æ®µ)åªè®¡ç®—å­—æ®µå€¼ä¸ä¸ºNULLçš„è¡Œï¼›count(1)å¼•æ“ä¼šä¸ºæ¯è¡Œæ·»åŠ ä¸€ä¸ª1ï¼Œç„¶åå°±countè¿™ä¸ª1ï¼Œè¿”å›ç»“æœä¹Ÿè·Ÿcount(*)ä¸€æ ·ï¼›count(null)è¿”å›0</li></ul><ol start="4" type="1"><li>å„ç§ç”¨æ³•çš„æ€§èƒ½ï¼š</li></ol><ul><li>count(ä¸»é”®)ï¼šInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨ï¼ŒæŠŠæ¯è¡Œçš„ä¸»é”®idå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚æ‹¿åˆ°ä¸»é”®åï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ ï¼ˆä¸»é”®ä¸å¯èƒ½ä¸ºç©ºï¼‰</li><li>count(å­—æ®µ)ï¼šæ²¡æœ‰notnullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼ŒæœåŠ¡å±‚åˆ¤æ–­æ˜¯å¦ä¸ºnullï¼Œä¸ä¸ºnullï¼Œè®¡æ•°ç´¯åŠ ï¼›æœ‰notnullçº¦æŸçš„è¯ï¼ŒInnoDBå¼•æ“ä¼šéå†æ•´å¼ è¡¨æŠŠæ¯ä¸€è¡Œçš„å­—æ®µå€¼éƒ½å–å‡ºæ¥ï¼Œè¿”å›ç»™æœåŠ¡å±‚ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(1)ï¼šInnoDBå¼•æ“éå†æ•´å¼ è¡¨ï¼Œä½†ä¸å–å€¼ã€‚æœåŠ¡å±‚å¯¹äºè¿”å›çš„æ¯ä¸€å±‚ï¼Œæ”¾ä¸€ä¸ªæ•°å­— 1è¿›å»ï¼Œç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li><li>count(*)ï¼šInnoDBå¼•æ“å¹¶ä¸ä¼šæŠŠå…¨éƒ¨å­—æ®µå–å‡ºæ¥ï¼Œè€Œæ˜¯ä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œä¸å–å€¼ï¼ŒæœåŠ¡å±‚ç›´æ¥æŒ‰è¡Œè¿›è¡Œç´¯åŠ </li></ul><ol start="6" type="1"><li>æŒ‰æ•ˆç‡æ’åºï¼šcount(å­—æ®µ) &lt; count(ä¸»é”®) &lt; count(1) &lt;count(*)ï¼Œæ‰€ä»¥å°½é‡ä½¿ç”¨ count(*)</li></ol><h1 id="updateä¼˜åŒ–é¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”">7.updateä¼˜åŒ–ï¼ˆé¿å…è¡Œé”å‡çº§ä¸ºè¡¨é”ï¼‰</h1><ol type="1"><li><p>InnoDBçš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œå¹¶ä¸”è¯¥ç´¢å¼•ä¸èƒ½å¤±æ•ˆï¼Œå¦åˆ™ä¼šä»è¡Œé”å‡çº§ä¸ºè¡¨é”ã€‚</p></li><li><p>å¦‚ä»¥ä¸‹ä¸¤æ¡è¯­å¥ï¼š</p><ul><li><code>update student set no = '123' where id = 1;</code>ï¼Œè¿™å¥ç”±äºidæœ‰ä¸»é”®ç´¢å¼•ï¼Œæ‰€ä»¥åªä¼šé”è¿™ä¸€è¡Œï¼›<br></li><li><code>update student set no = '123' where name = 'test';</code>ï¼Œè¿™å¥ç”±äºnameæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæŠŠæ•´å¼ è¡¨éƒ½é”ä½è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œ</li><li>è§£å†³æ–¹æ³•æ˜¯ç»™nameå­—æ®µæ·»åŠ ç´¢å¼•ï¼Œå°±å¯ä»¥ç”±è¡¨é”å˜æˆè¡Œé”ã€‚</li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8. ç´¢å¼•</title>
    <link href="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/"/>
    <url>/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ç´¢å¼•æ¦‚è¿°">1. ç´¢å¼•æ¦‚è¿°</h1><ol type="1"><li><p>ç´¢å¼•æ˜¯å¸®åŠ© MySQL<strong>é«˜æ•ˆè·å–æ•°æ®</strong>çš„<strong>æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰</strong>ã€‚åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥è¯¢ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</p></li><li><p>ä¼˜ç‚¹ï¼š</p></li></ol><ul><li>æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬<br></li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½CPUçš„æ¶ˆè€—</li></ul><ol start="3" type="1"><li>ç¼ºç‚¹ï¼š</li></ol><ul><li>ç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„</li><li>ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼Œä½†é™ä½äº†æ›´æ–°çš„é€Ÿåº¦ï¼Œæ¯”å¦‚INSERTã€UPDATEã€DELETE</li></ul><h1 id="ç´¢å¼•ç»“æ„">2. ç´¢å¼•ç»“æ„</h1><p>MySQLçš„ç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚å®ç°çš„ï¼Œä¸åŒçš„å­˜å‚¨å¼•æ“æœ‰ä¸åŒçš„ç»“æ„ã€‚</p><table><thead><tr><th>ç´¢å¼•ç»“æ„</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>B+Tree</strong></td><td>æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†å¼•æ“éƒ½æ”¯æŒB+æ ‘ç´¢å¼•</td></tr><tr><td>Hash</td><td>åº•å±‚æ•°æ®ç»“æ„æ˜¯ç”¨å“ˆå¸Œè¡¨å®ç°ï¼Œåªæœ‰ç²¾ç¡®åŒ¹é…ç´¢å¼•åˆ—çš„æŸ¥è¯¢æ‰æœ‰æ•ˆï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢</td></tr><tr><td>R-Tree(ç©ºé—´ç´¢å¼•)</td><td>ç©ºé—´ç´¢å¼•æ˜¯ MyISAMå¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°‘</td></tr><tr><td>Full-Text(å…¨æ–‡ç´¢å¼•)</td><td>æ˜¯ä¸€ç§é€šè¿‡å»ºç«‹å€’æ’ç´¢å¼•ï¼Œå¿«é€ŸåŒ¹é…æ–‡æ¡£çš„æ–¹å¼ï¼Œç±»ä¼¼äº Lucene, Solr,ES</td></tr></tbody></table><table><thead><tr><th>ç´¢å¼•</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>B+Treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hashç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>R-Treeç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>Full-text</td><td>5.6ç‰ˆæœ¬åæ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr></tbody></table><h2 id="b-tree">2.1 B-Tree</h2><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130102624399.png" alt="äºŒå‰æ ‘"><figcaption aria-hidden="true">äºŒå‰æ ‘</figcaption></figure><ol type="1"><li><p>äºŒå‰æ ‘ç¼ºç‚¹ï¼šé¡ºåºæ’å…¥æ—¶ï¼Œä¼šå½¢æˆä¸€ä¸ªé“¾è¡¨ï¼ŒæŸ¥è¯¢æ€§èƒ½å¤§å¤§é™ä½ã€‚å¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œå±‚çº§è¾ƒæ·±ï¼Œæ£€ç´¢é€Ÿåº¦æ…¢ã€‚</p></li><li><p>äºŒå‰æ ‘å½¢æˆé“¾è¡¨çš„ç¼ºç‚¹å¯ä»¥ç”¨çº¢é»‘æ ‘æ¥è§£å†³ï¼š</p></li></ol><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130102753156.png" alt="çº¢é»‘æ ‘"><figcaption aria-hidden="true">çº¢é»‘æ ‘</figcaption></figure><ol start="3" type="1"><li><p>çº¢é»‘æ ‘ä¹Ÿå­˜åœ¨å¤§æ•°æ®é‡æƒ…å†µä¸‹ï¼Œå±‚çº§è¾ƒæ·±ï¼Œæ£€ç´¢é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚</p></li><li><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ B-Tree ç»“æ„ã€‚</p></li><li><p>B-Tree (å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘)</p><ol type="1"><li>ä»¥ä¸€æ£µæœ€å¤§åº¦æ•°ï¼ˆmax-degreeï¼ŒæŒ‡ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•°ï¼‰ä¸º5ï¼ˆ5é˜¶ï¼‰çš„b-tree ä¸ºä¾‹ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå­˜å‚¨4ä¸ªkeyï¼Œ5ä¸ªæŒ‡é’ˆï¼‰</li></ol></li></ol><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130102932069.png" alt="B-Treeç»“æ„"><figcaption aria-hidden="true">B-Treeç»“æ„</figcaption></figure><blockquote><p>B-Treeçš„æ•°æ®æ’å…¥è¿‡ç¨‹åŠ¨ç”»å‚ç…§ï¼šhttps://www.bilibili.com/video/BV1Kr4y1i7ru?p=68æ¼”ç¤ºåœ°å€ï¼šhttps://www.cs.usfca.edu/~galles/visualization/BTree.html</p></blockquote><h2 id="btree">2.2 B+Tree</h2><p>ç»“æ„å›¾ï¼š</p><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130103611528.png" alt="B+Treeç»“æ„å›¾"><figcaption aria-hidden="true">B+Treeç»“æ„å›¾</figcaption></figure><blockquote><p>æ¼”ç¤ºåœ°å€ï¼šhttps://www.cs.usfca.edu/~galles/visualization/BPlusTree.html</p></blockquote><p>ä¸ B-Tree çš„åŒºåˆ«ï¼š</p><ul><li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå‡ºç°åœ¨å¶å­èŠ‚ç‚¹</li><li>å¶å­èŠ‚ç‚¹å½¢æˆä¸€ä¸ªå•å‘é“¾è¡¨</li></ul><p>MySQL ç´¢å¼•æ•°æ®ç»“æ„å¯¹ç»å…¸çš„ B+Tree è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨åŸ B+Treeçš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„é“¾è¡¨æŒ‡é’ˆï¼Œå°±å½¢æˆäº†å¸¦æœ‰é¡ºåºæŒ‡é’ˆçš„B+Treeï¼Œæé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ã€‚</p><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130103944880.png" alt="MySQL B+Tree ç»“æ„å›¾"><figcaption aria-hidden="true">MySQL B+Tree ç»“æ„å›¾</figcaption></figure><h2 id="hash">2.3 Hash</h2><ol type="1"><li>å“ˆå¸Œç´¢å¼•å°±æ˜¯é‡‡ç”¨ä¸€å®šçš„hashç®—æ³•ï¼Œå°†é”®å€¼æ¢ç®—æˆæ–°çš„hashå€¼ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ§½ä½ä¸Šï¼Œç„¶åå­˜å‚¨åœ¨hashè¡¨ä¸­ã€‚</li><li>å¦‚æœä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰é”®å€¼ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªç›¸åŒçš„æ§½ä½ä¸Šï¼Œä»–ä»¬å°±äº§ç”Ÿäº†hashå†²çªï¼ˆä¹Ÿç§°ä¸ºhashç¢°æ’ï¼‰ï¼Œå¯ä»¥é€šè¿‡é“¾è¡¨æ¥è§£å†³ã€‚</li></ol><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130104351376.png" alt="Hashç´¢å¼•åŸç†å›¾"><figcaption aria-hidden="true">Hashç´¢å¼•åŸç†å›¾</figcaption></figure><ol start="3" type="1"><li>ç‰¹ç‚¹ï¼š</li></ol><ul><li>Hashç´¢å¼•åªèƒ½ç”¨äºå¯¹ç­‰æ¯”è¾ƒï¼ˆ=ã€inï¼‰ï¼Œä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼ˆbetwwnã€&gt;ã€&lt;ã€...ï¼‰</li><li>æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆæ’åºæ“ä½œ</li><li>æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œé€šå¸¸åªéœ€è¦ä¸€æ¬¡æ£€ç´¢å°±å¯ä»¥äº†ï¼Œæ•ˆç‡é€šå¸¸è¦é«˜äº B+Treeç´¢å¼•</li></ul><ol start="4" type="1"><li>å­˜å‚¨å¼•æ“æ”¯æŒï¼š</li></ol><ul><li>Memory</li><li>InnoDB: å…·æœ‰è‡ªé€‚åº”hashåŠŸèƒ½ï¼Œhashç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“æ ¹æ® B+Treeç´¢å¼•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹è‡ªåŠ¨æ„å»ºçš„</li></ul><h2 id="é¢è¯•é¢˜">2.4 é¢è¯•é¢˜</h2><ol type="1"><li>ä¸ºä»€ä¹ˆ InnoDB å­˜å‚¨å¼•æ“é€‰æ‹©ä½¿ç”¨ B+Tree ç´¢å¼•ç»“æ„ï¼Ÿ</li></ol><ul><li>ç›¸å¯¹äºäºŒå‰æ ‘ï¼Œå±‚çº§æ›´å°‘ï¼Œæœç´¢æ•ˆç‡é«˜</li><li>å¯¹äºB-Treeï¼Œæ— è®ºæ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®ï¼Œè¿™æ ·å¯¼è‡´ä¸€é¡µä¸­å­˜å‚¨çš„é”®å€¼å‡å°‘ï¼ŒæŒ‡é’ˆä¹Ÿè·Ÿç€å‡å°‘ï¼Œè¦åŒæ ·ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´æ€§èƒ½é™ä½</li><li>ç›¸å¯¹äº Hash ç´¢å¼•ï¼ŒB+Tree æ”¯æŒèŒƒå›´åŒ¹é…åŠæ’åºæ“ä½œ</li></ul><h1 id="ç´¢å¼•åˆ†ç±»">3. ç´¢å¼•åˆ†ç±»</h1><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®ç´¢å¼•</td><td>é’ˆå¯¹äºè¡¨ä¸­ä¸»é”®åˆ›å»ºçš„ç´¢å¼•</td><td>é»˜è®¤è‡ªåŠ¨åˆ›å»ºï¼Œåªèƒ½æœ‰ä¸€ä¸ª</td><td>PRIMARY</td></tr><tr><td>å”¯ä¸€ç´¢å¼•</td><td>é¿å…åŒä¸€ä¸ªè¡¨ä¸­æŸæ•°æ®åˆ—ä¸­çš„å€¼é‡å¤</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>UNIQUE</td></tr><tr><td>å¸¸è§„ç´¢å¼•</td><td>å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ®</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td></td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>å…¨æ–‡ç´¢å¼•æŸ¥æ‰¾çš„æ˜¯æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œè€Œä¸æ˜¯æ¯”è¾ƒç´¢å¼•ä¸­çš„å€¼</td><td>å¯ä»¥æœ‰å¤šä¸ª</td><td>FULLTEXT</td></tr></tbody></table><p>åœ¨ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œæ ¹æ®ç´¢å¼•çš„å­˜å‚¨å½¢å¼ï¼Œåˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p><table><thead><tr><th>åˆ†ç±»</th><th>å«ä¹‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>èšé›†ç´¢å¼•(Clustered Index)</td><td>å°†æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æ”¾ä¸€å—ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†è¡Œæ•°æ®</td><td>å¿…é¡»æœ‰ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ª</td></tr><tr><td>äºŒçº§ç´¢å¼•(Secondary Index)</td><td>å°†æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œç´¢å¼•ç»“æ„çš„å¶å­èŠ‚ç‚¹å…³è”çš„æ˜¯å¯¹åº”çš„ä¸»é”®</td><td>å¯ä»¥å­˜åœ¨å¤šä¸ª</td></tr></tbody></table><p>æ¼”ç¤ºå›¾ï¼š</p><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130105354921.png" alt="å¤§è‡´åŸç†"><figcaption aria-hidden="true">å¤§è‡´åŸç†</figcaption></figure><figure><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130105527942.png" alt="æ¼”ç¤ºå›¾"><figcaption aria-hidden="true">æ¼”ç¤ºå›¾</figcaption></figure><p>èšé›†ç´¢å¼•é€‰å–è§„åˆ™ï¼š</p><ul><li>å¦‚æœå­˜åœ¨ä¸»é”®ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯èšé›†ç´¢å¼•</li><li>å¦‚æœä¸å­˜åœ¨ä¸»é”®ï¼Œå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªå”¯ä¸€(UNIQUE)ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®æˆ–æ²¡æœ‰åˆé€‚çš„å”¯ä¸€ç´¢å¼•ï¼Œåˆ™ InnoDB ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª rowidä½œä¸ºéšè—çš„èšé›†ç´¢å¼•</li></ul><h2 id="æ€è€ƒé¢˜">3.1 æ€è€ƒé¢˜</h2><p>1. ä»¥ä¸‹ SQL è¯­å¥ï¼Œå“ªä¸ªæ‰§è¡Œæ•ˆç‡é«˜ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Arm&#x27;</span>;<br><span class="hljs-comment">-- å¤‡æ³¨ï¼šidä¸ºä¸»é”®ï¼Œnameå­—æ®µåˆ›å»ºçš„æœ‰ç´¢å¼•</span><br></code></pre></td></tr></table></figure><p>ç­”ï¼šç¬¬ä¸€æ¡è¯­å¥ï¼Œå› ä¸ºç¬¬äºŒæ¡éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›¸å½“äºä¸¤ä¸ªæ­¥éª¤ã€‚</p><p>2. InnoDB ä¸»é”®ç´¢å¼•çš„ B+Tree é«˜åº¦ä¸ºå¤šå°‘ï¼Ÿ</p><p>ç­”ï¼šå‡è®¾ä¸€è¡Œæ•°æ®å¤§å°ä¸º1kï¼Œä¸€é¡µä¸­å¯ä»¥å­˜å‚¨16è¡Œè¿™æ ·çš„æ•°æ®ã€‚InnoDBçš„æŒ‡é’ˆå ç”¨6ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œä¸»é”®å‡è®¾ä¸ºbigintï¼Œå ç”¨å­—èŠ‚æ•°ä¸º8.<br>å¯å¾—å…¬å¼ï¼š<code>n * 8 + (n + 1) * 6 = 16 * 1024</code>ï¼Œå…¶ä¸­ 8 è¡¨ç¤ºbigint å ç”¨çš„å­—èŠ‚æ•°ï¼Œn è¡¨ç¤ºå½“å‰èŠ‚ç‚¹å­˜å‚¨çš„keyçš„æ•°é‡ï¼Œ(n + 1)è¡¨ç¤ºæŒ‡é’ˆæ•°é‡ï¼ˆæ¯”keyå¤šä¸€ä¸ªï¼‰ã€‚ç®—å‡ºnçº¦ä¸º1170ã€‚</p><p>å¦‚æœæ ‘çš„é«˜åº¦ä¸º2ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 16 = 18736</code>ï¼›<br>å¦‚æœæ ‘çš„é«˜åº¦ä¸º3ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å‚¨çš„æ•°æ®é‡å¤§æ¦‚ä¸ºï¼š<code>1171 * 1171 * 16 = 21939856</code>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæœ‰æˆåƒä¸Šä¸‡çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘åˆ†è¡¨ï¼Œæ¶‰åŠè¿ç»´ç¯‡çŸ¥è¯†ã€‚</p><h1 id="ç´¢å¼•è¯­æ³•">4. ç´¢å¼•è¯­æ³•</h1><ol type="1"><li>åˆ›å»ºç´¢å¼•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> [ <span class="hljs-keyword">UNIQUE</span> <span class="hljs-operator">|</span> FULLTEXT ] INDEX index_name <span class="hljs-keyword">ON</span> table_name (index_col_name, ...);<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœä¸åŠ  CREATE åé¢ä¸åŠ ç´¢å¼•ç±»å‹å‚æ•°ï¼Œåˆ™åˆ›å»ºçš„æ˜¯å¸¸è§„ç´¢å¼•</li></ul><ol start="2" type="1"><li><p>æŸ¥çœ‹ç´¢å¼•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> table_name;<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤ç´¢å¼•ï¼š</p></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> INDEX index_name <span class="hljs-keyword">ON</span> table_name;<br></code></pre></td></tr></table></figure><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- nameå­—æ®µä¸ºå§“åå­—æ®µï¼Œè¯¥å­—æ®µçš„å€¼å¯èƒ½ä¼šé‡å¤ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">create</span> index idx_user_name <span class="hljs-keyword">on</span> users(name);<br><span class="hljs-comment">-- phoneæ‰‹æœºå·å­—æ®µçš„å€¼éç©ºï¼Œä¸”å”¯ä¸€ï¼Œä¸ºè¯¥å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">unique</span> index idx_user_phone <span class="hljs-keyword">on</span> users (phone);<br><span class="hljs-comment">-- ä¸ºprofession, age, statusåˆ›å»ºè”åˆç´¢å¼•</span><br><span class="hljs-keyword">create</span> index idx_user_pro_age_stat <span class="hljs-keyword">on</span> users(profession, age, status);<br><span class="hljs-comment">-- ä¸ºemailå»ºç«‹åˆé€‚çš„ç´¢å¼•æ¥æå‡æŸ¥è¯¢æ•ˆç‡</span><br><span class="hljs-keyword">create</span> index idx_user_email <span class="hljs-keyword">on</span> users(email);<br><br><span class="hljs-comment">-- åˆ é™¤ç´¢å¼•  </span><br><span class="hljs-keyword">drop</span> index idx_user_email <span class="hljs-keyword">on</span> users;  <br></code></pre></td></tr></table></figure><h1 id="æ€§èƒ½åˆ†æ">5. æ€§èƒ½åˆ†æ</h1><h2 id="æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡">5.1 æŸ¥çœ‹æ‰§è¡Œé¢‘æ¬¡</h2><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ INSERT, UPDATE, DELETE, SELECT è®¿é—®é¢‘æ¬¡ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">GLOBAL</span> STATUS <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;Com_______&#x27;</span>;<br><span class="hljs-comment">-- or</span><br><span class="hljs-keyword">SHOW</span> SESSION STATUS <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;Com_______&#x27;</span>;<br><span class="hljs-comment">-- ä¾‹ï¼š</span><br><span class="hljs-keyword">show</span> <span class="hljs-keyword">global</span> status <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;Com_______&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="æ…¢æŸ¥è¯¢æ—¥å¿—">5.2 æ…¢æŸ¥è¯¢æ—¥å¿—</h2><p>æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°ï¼ˆlong_query_timeï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤10ç§’ï¼‰çš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚</p><p>MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨MySQLçš„é…ç½®æ–‡ä»¶ï¼ˆ/etc/my.cnfï¼Œubuntuåœ¨/etc/mysql/mysql.cnfï¼‰ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³  </span><br>slow_query_log=1  <br><span class="hljs-comment"># è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ—¶é—´ä¸º2ç§’ï¼ŒSQLè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡2ç§’ï¼Œå°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—  </span><br>long_query_time=2  <br></code></pre></td></tr></table></figure><p>æ›´æ”¹åè®°å¾—é‡å¯MySQLæœåŠ¡ï¼Œæ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š/var/lib/mysql/localhost-slow.log</p><p>å¦‚æœä¸åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥åœ¨mysqlæ•°æ®åº“é‡Œé¢è¾“å…¥å‘½ä»¤ show variableslike 'slow_query_log_file'; æ¥æŸ¥æ‰¾æ…¢æŸ¥è¯¢æ—¥å¿—å­˜æ”¾åœ°å€</p><p>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³çŠ¶æ€ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;slow_query_log&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="profile">5.3 profile</h2><ol type="1"><li><p>show profile èƒ½åœ¨åšSQLä¼˜åŒ–æ—¶å¸®æˆ‘ä»¬äº†è§£æ—¶é—´éƒ½è€—è´¹åœ¨å“ªé‡Œã€‚é€šè¿‡have_profiling å‚æ•°ï¼Œèƒ½çœ‹åˆ°å½“å‰ MySQL æ˜¯å¦æ”¯æŒ profile æ“ä½œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@have_profiling</span>;<br></code></pre></td></tr></table></figure></li><li><p>profiling é»˜è®¤å…³é—­ï¼Œå¯ä»¥é€šè¿‡setè¯­å¥åœ¨session/globalçº§åˆ«å¼€å¯profilingï¼š</p></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> @<span class="hljs-variable">@profilling</span>; <span class="hljs-comment">-- æŸ¥çœ‹æ˜¯å¦å¼€å¯</span><br><span class="hljs-keyword">SET</span> profiling <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- æ‰‹åŠ¨å¼€å¯</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æŸ¥çœ‹æ‰€æœ‰è¯­å¥çš„è€—æ—¶ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> profiles;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥å„ä¸ªé˜¶æ®µçš„è€—æ—¶ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> profile <span class="hljs-keyword">for</span> query query_id;<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>æŸ¥çœ‹æŒ‡å®šquery_idçš„SQLè¯­å¥CPUçš„ä½¿ç”¨æƒ…å†µ</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> profile cpu <span class="hljs-keyword">for</span> query query_id;<br></code></pre></td></tr></table></figure><h2 id="explain">5.4 explain</h2><ol type="1"><li>explainæ‰§è¡Œè®¡åˆ’</li></ol><ul><li>EXPLAIN æˆ–è€… DESC å‘½ä»¤è·å– MySQL å¦‚ä½•æ‰§è¡Œ SELECT è¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨SELECT è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚<br></li><li>è¯­æ³•ï¼š ç›´æ¥åœ¨selectè¯­å¥ä¹‹å‰åŠ ä¸Šå…³é”®å­— explain / desc</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">EXPLAIN <span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å HWERE æ¡ä»¶;  <br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>EXPLAIN å„å­—æ®µå«ä¹‰ï¼š</li></ol><ul><li>idï¼šselect æŸ¥è¯¢çš„åºåˆ—å·ï¼Œè¡¨ç¤ºæŸ¥è¯¢ä¸­æ‰§è¡Œ selectå­å¥æˆ–è€…æ“ä½œè¡¨çš„é¡ºåºï¼ˆidç›¸åŒï¼Œæ‰§è¡Œé¡ºåºä»ä¸Šåˆ°ä¸‹ï¼›idä¸åŒï¼Œå€¼è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼‰<br></li><li>select_typeï¼šè¡¨ç¤º SELECT çš„ç±»å‹ï¼Œå¸¸è§å–å€¼æœ‰SIMPLEï¼ˆç®€å•è¡¨ï¼Œå³ä¸é€‚ç”¨è¡¨è¿æ¥æˆ–è€…å­æŸ¥è¯¢ï¼‰ã€PRIMARYï¼ˆä¸»æŸ¥è¯¢ï¼Œå³å¤–å±‚çš„æŸ¥è¯¢ï¼‰ã€UNIONï¼ˆUNIONä¸­çš„ç¬¬äºŒä¸ªæˆ–è€…åé¢çš„æŸ¥è¯¢è¯­å¥ï¼‰ã€SUBQUERYï¼ˆSELECT/WHEREä¹‹ååŒ…å«äº†å­æŸ¥è¯¢ï¼‰ç­‰<br></li><li><strong>type</strong>ï¼šè¡¨ç¤ºè¿æ¥ç±»å‹ï¼Œæ€§èƒ½ç”±å¥½åˆ°å·®çš„è¿æ¥ç±»å‹ä¸ºNULLã€systemã€constã€eq_refã€refã€rangeã€indexã€all</li><li><strong>possible_key</strong>ï¼šå¯èƒ½åº”ç”¨åœ¨è¿™å¼ è¡¨ä¸Šçš„ç´¢å¼•ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª</li><li><strong>Key</strong>ï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœä¸ºNULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•</li><li><strong>Key_len</strong>ï¼šè¡¨ç¤ºç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œè¯¥å€¼ä¸ºç´¢å¼•å­—æ®µæœ€å¤§å¯èƒ½é•¿åº¦ï¼Œå¹¶éå®é™…ä½¿ç”¨é•¿åº¦ï¼Œåœ¨ä¸æŸå¤±ç²¾ç¡®æ€§çš„å‰æä¸‹ï¼Œé•¿åº¦è¶ŠçŸ­è¶Šå¥½</li><li>rowsï¼šMySQLè®¤ä¸ºå¿…é¡»è¦æ‰§è¡Œçš„è¡Œæ•°ï¼Œåœ¨InnoDBå¼•æ“çš„è¡¨ä¸­ï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œå¯èƒ½å¹¶ä¸æ€»æ˜¯å‡†ç¡®çš„</li><li>filteredï¼šè¡¨ç¤ºè¿”å›ç»“æœçš„è¡Œæ•°å éœ€è¯»å–è¡Œæ•°çš„ç™¾åˆ†æ¯”ï¼Œfilteredçš„å€¼è¶Šå¤§è¶Šå¥½</li></ul><h1 id="ä½¿ç”¨è§„åˆ™">6. ä½¿ç”¨è§„åˆ™</h1><h2 id="æœ€å·¦å‰ç¼€æ³•åˆ™">6.1 æœ€å·¦å‰ç¼€æ³•åˆ™</h2><ol type="1"><li><p>å¦‚æœç´¢å¼•å…³è”äº†å¤šåˆ—ï¼ˆè”åˆç´¢å¼•ï¼‰ï¼Œè¦éµå®ˆæœ€å·¦å‰ç¼€æ³•åˆ™ï¼Œæœ€å·¦å‰ç¼€æ³•åˆ™æŒ‡çš„æ˜¯æŸ¥è¯¢ä»ç´¢å¼•çš„æœ€å·¦åˆ—å¼€å§‹ï¼Œå¹¶ä¸”ä¸è·³è¿‡ç´¢å¼•ä¸­çš„åˆ—ã€‚<br></p></li><li><p>å¦‚æœè·³è·ƒæŸä¸€åˆ—ï¼Œç´¢å¼•å°†éƒ¨åˆ†å¤±æ•ˆï¼ˆåé¢çš„å­—æ®µç´¢å¼•å¤±æ•ˆï¼‰ã€‚è·³è¿‡çš„è¯ï¼Œåé¢çš„æ’åºå°±æ— ä»è¯´èµ·äº†ã€‚æœ€å·¦å‰ç¼€æ³•åˆ™åœ¨ç”¨selectçš„æ—¶å€™ï¼Œå’Œæ”¾çš„ä½ç½®æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œåªè¦å­˜åœ¨å°±è¡Œã€‚</p></li><li><p>è”åˆç´¢å¼•ä¸­ï¼Œå‡ºç°èŒƒå›´æŸ¥è¯¢ï¼ˆ&lt;,&gt;ï¼‰ï¼ŒèŒƒå›´æŸ¥è¯¢å³ä¾§çš„åˆ—ç´¢å¼•å¤±æ•ˆã€‚å¯ä»¥ç”¨&gt;=æˆ–è€…&lt;=æ¥è§„é¿ç´¢å¼•å¤±æ•ˆé—®é¢˜ã€‚</p></li></ol><h2 id="ç´¢å¼•å¤±æ•ˆæƒ…å†µ">6.2 ç´¢å¼•å¤±æ•ˆæƒ…å†µ</h2><ol type="1"><li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè¿ç®—æ“ä½œï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚<ol type="1"><li>å¦‚ï¼š<code>explain select * from tb_user where substring(phone, 10, 2) = '15';</code></li><li>æ¢æˆ<code>explain select * from tb_user where phone = '17799990015';</code>è¿™æ˜¯å¯ä»¥çš„ã€‚<br></li></ol></li><li>å­—ç¬¦ä¸²ç±»å‹å­—æ®µä½¿ç”¨æ—¶ï¼Œä¸åŠ å¼•å·ï¼Œç´¢å¼•å°†å¤±æ•ˆã€‚<ol type="1"><li>å¦‚ï¼š<code>explain select * from tb_user where phone = 17799990015;</code>ï¼Œæ­¤å¤„phoneçš„å€¼æ²¡æœ‰åŠ å¼•å·<br></li></ol></li><li>æ¨¡ç³ŠæŸ¥è¯¢ä¸­ï¼Œå¦‚æœä»…ä»…æ˜¯å°¾éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•ä¸ä¼šæ˜¯å¤±æ•ˆï¼›å¦‚æœæ˜¯å¤´éƒ¨æ¨¡ç³ŠåŒ¹é…ï¼Œç´¢å¼•å¤±æ•ˆã€‚<ol type="1"><li>å¦‚ï¼š<code>explain select * from tb_user where profession like '%å·¥ç¨‹';</code>ï¼Œ</li><li>å‰åéƒ½æœ‰ % ä¹Ÿä¼šå¤±æ•ˆã€‚</li><li><code>explain select * from tb_user where profession like 'è½¯ä»¶%';</code>è¿™ä¸ªæ˜¯ä¸ä¼šå¤±æ•ˆçš„ï¼Œåªæœ‰å‰é¢åŠ äº†%æ‰ä¼šå¤±æ•ˆã€‚<br></li></ol></li><li>ç”¨ or åˆ†å‰²å¼€çš„æ¡ä»¶ï¼Œå¦‚æœ orå…¶ä¸­ä¸€ä¸ªæ¡ä»¶çš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ç”¨åˆ°ã€‚</li><li>å¦‚æœ MySQL è¯„ä¼°ä½¿ç”¨ç´¢å¼•æ¯”å…¨è¡¨æ›´æ…¢ï¼Œåˆ™ä¸ä½¿ç”¨ç´¢å¼•ã€‚<ol type="1"><li>å› ä¸ºåªè¦æœ‰ä¸€ä¸ªæ²¡æœ‰ç´¢å¼•ï¼Œå¦å¤–ä¸€ä¸ªç”¨ä¸ç”¨ç´¢å¼•éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œéƒ½è¦è¿›è¡Œå…¨è¡¨æ‰«æã€‚æ‰€ä»¥å°±æ— éœ€ç”¨ç´¢å¼•ã€‚</li></ol></li></ol><h2 id="sql-æç¤º">6.3 SQL æç¤º</h2><ol type="1"><li>æ˜¯ä¼˜åŒ–æ•°æ®åº“çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨SQLè¯­å¥ä¸­åŠ å…¥ä¸€äº›äººä¸ºçš„æç¤ºæ¥è¾¾åˆ°ä¼˜åŒ–æ“ä½œçš„ç›®çš„ã€‚</li></ol><ul><li>ä¾‹å¦‚ï¼Œä½¿ç”¨ç´¢å¼•ï¼š<code>explain select * from tb_user use index(idx_user_pro) where profession="è½¯ä»¶å·¥ç¨‹";</code></li><li>ä¸ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<code>explain select * from tb_user ignore index(idx_user_pro) where profession="è½¯ä»¶å·¥ç¨‹";</code></li><li>å¿…é¡»ä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼š<code>explain select * from tb_user force index(idx_user_pro) where profession="è½¯ä»¶å·¥ç¨‹";</code></li></ul><ol start="2" type="1"><li>use æ˜¯å»ºè®®ï¼Œå®é™…ä½¿ç”¨å“ªä¸ªç´¢å¼• MySQLè¿˜ä¼šè‡ªå·±æƒè¡¡è¿è¡Œé€Ÿåº¦å»æ›´æ”¹ï¼Œforceå°±æ˜¯æ— è®ºå¦‚ä½•éƒ½å¼ºåˆ¶ä½¿ç”¨è¯¥ç´¢å¼•ã€‚</li></ol><h2 id="è¦†ç›–ç´¢å¼•å›è¡¨æŸ¥è¯¢">6.4 è¦†ç›–ç´¢å¼•&amp;å›è¡¨æŸ¥è¯¢</h2><ol type="1"><li><p>å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆæŸ¥è¯¢ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¹¶ä¸”éœ€è¦è¿”å›çš„åˆ—ï¼Œåœ¨è¯¥ç´¢å¼•ä¸­å·²ç»å…¨éƒ¨èƒ½æ‰¾åˆ°ï¼‰ï¼Œå‡å°‘select *ã€‚</p></li><li><p>explain ä¸­ extra å­—æ®µå«ä¹‰ï¼š</p><ol type="1"><li><code>using index condition</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦å›è¡¨æŸ¥è¯¢æ•°æ®</li><li><code>using where; using index;</code>ï¼šæŸ¥æ‰¾ä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ˜¯éœ€è¦çš„æ•°æ®éƒ½åœ¨ç´¢å¼•åˆ—ä¸­èƒ½æ‰¾åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨æŸ¥è¯¢</li></ol></li><li><p>è¦†ç›–ç´¢å¼•ï¼š</p><ol type="1"><li>å¦‚æœåœ¨ç”Ÿæˆçš„äºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰ä¸­å¯ä»¥ä¸€æ¬¡æ€§è·å¾—selectæ‰€éœ€è¦çš„å­—æ®µï¼Œä¸éœ€è¦å›è¡¨æŸ¥è¯¢ã€‚</li><li>å¦‚æœåœ¨èšé›†ç´¢å¼•ä¸­ç›´æ¥èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡Œï¼Œåˆ™ç›´æ¥è¿”å›è¡Œæ•°æ®ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼Œå“ªæ€•æ˜¯select*ï¼›<br></li><li>å¦‚æœåœ¨è¾…åŠ©ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰ä¸­æ‰¾èšé›†ç´¢å¼•ï¼Œå¦‚<code>select id, name from xxx where name='xxx';</code>ï¼Œä¹Ÿåªéœ€è¦é€šè¿‡è¾…åŠ©ç´¢å¼•(name)æŸ¥æ‰¾åˆ°å¯¹åº”çš„idï¼Œè¿”å›nameå’Œnameç´¢å¼•å¯¹åº”çš„idå³å¯ï¼Œåªéœ€è¦ä¸€æ¬¡æŸ¥è¯¢ï¼›</li><li>å¦‚æœæ˜¯é€šè¿‡è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾å…¶ä»–å­—æ®µï¼Œåˆ™éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œå¦‚<code>select id, name, gender from xxx where name='xxx';</code></li></ol></li><li><p>æ‰€ä»¥å°½é‡ä¸è¦ç”¨<code>select *</code>ï¼Œå®¹æ˜“å‡ºç°å›è¡¨æŸ¥è¯¢ï¼Œé™ä½æ•ˆç‡ï¼Œé™¤éæœ‰è”åˆç´¢å¼•åŒ…å«äº†æ‰€æœ‰å­—æ®µ</p></li><li><p>é¢è¯•é¢˜ï¼šä¸€å¼ è¡¨ï¼Œæœ‰å››ä¸ªå­—æ®µï¼ˆid, username, password,statusï¼‰ï¼Œç”±äºæ•°æ®é‡å¤§ï¼Œéœ€è¦å¯¹ä»¥ä¸‹SQLè¯­å¥è¿›è¡Œä¼˜åŒ–ï¼Œè¯¥å¦‚ä½•è¿›è¡Œæ‰æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼š<code>select id, username, password from tb_user where username='itcast';</code></p></li></ol><ul><li>è§£ï¼šç»™usernameå’Œpasswordå­—æ®µå»ºç«‹è”åˆç´¢å¼•ï¼Œåˆ™ä¸éœ€è¦å›è¡¨æŸ¥è¯¢ï¼Œç›´æ¥è¦†ç›–ç´¢å¼•ã€‚usernameå’Œpasswordå­—æ®µå»ºç«‹è”åˆç´¢å¼•çš„å¶å­èŠ‚ç‚¹æŒ‚çš„å°±æ˜¯ idæ‰€ä»¥ä¸éœ€è¦ä¸‰è€…åŒæ—¶å»ºç´¢å¼•ã€‚</li></ul><h2 id="å‰ç¼€ç´¢å¼•">6.5 å‰ç¼€ç´¢å¼•</h2><ol type="1"><li><p>å½“å­—æ®µç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼ˆvarchar,textç­‰ï¼‰æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç´¢å¼•å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¼šè®©ç´¢å¼•å˜å¾—å¾ˆå¤§ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæµªè´¹å¤§é‡çš„ç£ç›˜IOï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼Œæ­¤æ—¶å¯ä»¥åªé™å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†å‰ç¼€ï¼Œå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦ç´¢å¼•ç©ºé—´ï¼Œä»è€Œæé«˜ç´¢å¼•æ•ˆç‡ã€‚</p></li><li><p>è¯­æ³•ï¼š<code>create index idx_xxxx on table_name(columnn(n));</code><br></p></li><li><p>å‰ç¼€é•¿åº¦ï¼šå¯ä»¥æ ¹æ®ç´¢å¼•çš„é€‰æ‹©æ€§æ¥å†³å®šï¼Œè€Œé€‰æ‹©æ€§æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ï¼ˆåŸºæ•°ï¼‰å’Œæ•°æ®è¡¨çš„è®°å½•æ€»æ•°çš„æ¯”å€¼ï¼Œç´¢å¼•é€‰æ‹©æ€§è¶Šé«˜åˆ™æŸ¥è¯¢æ•ˆç‡è¶Šé«˜ï¼Œå”¯ä¸€ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯1ï¼Œè¿™æ˜¯æœ€å¥½çš„ç´¢å¼•é€‰æ‹©æ€§ï¼Œæ€§èƒ½ä¹Ÿæ˜¯æœ€å¥½çš„ã€‚</p></li><li><p>æ±‚é€‰æ‹©æ€§å…¬å¼ï¼š</p></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-keyword">distinct</span> email) <span class="hljs-operator">/</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> tb_user;<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-keyword">distinct</span> <span class="hljs-built_in">substring</span>(email, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>)) <span class="hljs-operator">/</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> tb_user;<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>å‰ç¼€ç´¢å¼•ä¸­æ˜¯æœ‰å¯èƒ½ç¢°åˆ°ç›¸åŒçš„ç´¢å¼•çš„æƒ…å†µçš„ï¼ˆå› ä¸ºé€‰æ‹©æ€§å¯èƒ½ä¸ä¸º1ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨å‰ç¼€ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œmysqlä¼šæœ‰ä¸€ä¸ªå›è¡¨æŸ¥è¯¢çš„è¿‡ç¨‹ï¼Œç¡®å®šæ˜¯å¦ä¸ºæ‰€éœ€æ•°æ®ã€‚å¦‚å›¾ä¸­çš„æŸ¥è¯¢åˆ°lvbu6ä¹‹åè¿˜è¦è¿›è¡Œå›è¡¨ï¼Œå›è¡¨å®Œå†æŸ¥xiaoyï¼Œçœ‹åˆ°xiaoyæ˜¯ä¸éœ€è¦çš„æ•°æ®ï¼Œåˆ™åœæ­¢æŸ¥ä¸‹ä¸€ä¸ªã€‚</li></ol><p><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130194745470.png"></p><ol start="6" type="1"><li>show index é‡Œé¢çš„sub_partå¯ä»¥çœ‹åˆ°æ¥å–çš„é•¿åº¦</li></ol><h2 id="å•åˆ—ç´¢å¼•è”åˆç´¢å¼•">6.6 å•åˆ—ç´¢å¼•&amp;è”åˆç´¢å¼•</h2><ol type="1"><li><p>å•åˆ—ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—</p></li><li><p>è”åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«äº†å¤šä¸ªåˆ—</p></li><li><p>åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œè€ƒè™‘é’ˆå¯¹äºæŸ¥è¯¢å­—æ®µå»ºç«‹ç´¢å¼•æ—¶ï¼Œå»ºè®®å»ºç«‹è”åˆç´¢å¼•ï¼Œè€Œéå•åˆ—ç´¢å¼•ã€‚</p></li><li><p>å•åˆ—ç´¢å¼•æƒ…å†µï¼š</p></li></ol><p><code>explain select id, phone, name from tb_user where phone = '17799990010' and name = 'éŸ©ä¿¡';</code></p><ul><li>phone å’Œ name éƒ½å»ºç«‹äº†ç´¢å¼•æƒ…å†µä¸‹ï¼Œè¿™å¥åªä¼šç”¨åˆ°phoneç´¢å¼•å­—æ®µã€‚</li></ul><ol start="5" type="1"><li>è”åˆç´¢å¼•çš„æ•°æ®ç»„ç»‡å›¾ï¼š</li></ol><p><img src="/2024/11/27/MySQL/8-%E7%B4%A2%E5%BC%95/image-20241130195612323.png"></p><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li>å¤šæ¡ä»¶è”åˆæŸ¥è¯¢æ—¶ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šè¯„ä¼°å“ªä¸ªå­—æ®µçš„ç´¢å¼•æ•ˆç‡æ›´é«˜ï¼Œä¼šé€‰æ‹©è¯¥ç´¢å¼•å®Œæˆæœ¬æ¬¡æŸ¥è¯¢ã€‚</li></ul><h1 id="è®¾è®¡åŸåˆ™">7. è®¾è®¡åŸåˆ™</h1><ol type="1"><li>é’ˆå¯¹äºæ•°æ®é‡è¾ƒå¤§ï¼Œä¸”æŸ¥è¯¢æ¯”è¾ƒé¢‘ç¹çš„è¡¨å»ºç«‹ç´¢å¼•</li><li>é’ˆå¯¹äºå¸¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ˆwhereï¼‰ã€æ’åºï¼ˆorder byï¼‰ã€åˆ†ç»„ï¼ˆgroupbyï¼‰æ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼Œå°½é‡å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜</li><li>å¦‚æœæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µï¼Œå­—æ®µé•¿åº¦è¾ƒé•¿ï¼Œå¯ä»¥é’ˆå¯¹äºå­—æ®µçš„ç‰¹ç‚¹ï¼Œå»ºç«‹å‰ç¼€ç´¢å¼•</li><li>å°½é‡ä½¿ç”¨è”åˆç´¢å¼•ï¼Œå‡å°‘å•åˆ—ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ï¼Œè”åˆç´¢å¼•å¾ˆå¤šæ—¶å€™å¯ä»¥è¦†ç›–ç´¢å¼•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œé¿å…å›è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡</li><li>è¦æ§åˆ¶ç´¢å¼•çš„æ•°é‡ï¼Œç´¢å¼•å¹¶ä¸æ˜¯å¤šå¤šç›Šå–„ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•ç»“æ„çš„ä»£ä»·å°±è¶Šå¤§ï¼Œä¼šå½±å“å¢åˆ æ”¹çš„æ•ˆç‡</li><li>å¦‚æœç´¢å¼•åˆ—ä¸èƒ½å­˜å‚¨NULLå€¼ï¼Œè¯·åœ¨åˆ›å»ºè¡¨æ—¶ä½¿ç”¨NOTNULLçº¦æŸå®ƒã€‚å½“ä¼˜åŒ–å™¨çŸ¥é“æ¯åˆ—æ˜¯å¦åŒ…å«NULLå€¼æ—¶ï¼Œå®ƒå¯ä»¥æ›´å¥½åœ°ç¡®å®šå“ªä¸ªç´¢å¼•æœ€æœ‰æ•ˆåœ°ç”¨äºæŸ¥è¯¢</li></ol><ul><li></li></ul>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è¿›é˜¶ç¯‡ - 7. å­˜å‚¨å¼•æ“</title>
    <link href="/2024/11/27/MySQL/7-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/"/>
    <url>/2024/11/27/MySQL/7-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/</url>
    
    <content type="html"><![CDATA[<h1 id="å­˜å‚¨å¼•æ“">å­˜å‚¨å¼•æ“</h1><h2 id="mysqlä½“ç³»ç»“æ„">1. MySQLä½“ç³»ç»“æ„ï¼š</h2><p><img src="/2024/11/27/MySQL/7-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/image-20241129205655052.png"></p><ul><li>è¿æ¥å±‚<ul><li>æœ€ä¸Šå±‚æ˜¯ä¸€äº›å®¢æˆ·ç«¯å’Œé“¾æ¥æœåŠ¡ï¼Œä¸»è¦å®Œæˆä¸€äº›ç±»ä¼¼äºè¿æ¥å¤„ç†ã€æˆæƒè®¤è¯ã€åŠç›¸å…³çš„å®‰å…¨æ–¹æ¡ˆã€‚æœåŠ¡å™¨ä¹Ÿä¼šä¸ºå®‰å…¨æ¥å…¥çš„æ¯ä¸ªå®¢æˆ·ç«¯éªŒè¯å®ƒæ‰€å…·æœ‰çš„æ“ä½œæƒé™ã€‚</li></ul></li><li>æœåŠ¡å±‚<ul><li>ç¬¬äºŒå±‚æ¶æ„ä¸»è¦å®Œæˆå¤§å¤šæ•°çš„æ ¸å¿ƒæœåŠ¡åŠŸèƒ½ï¼Œå¦‚SQLæ¥å£ï¼Œå¹¶å®Œæˆç¼“å­˜çš„æŸ¥è¯¢ï¼ŒSQLçš„åˆ†æå’Œä¼˜åŒ–ï¼Œéƒ¨åˆ†å†…ç½®å‡½æ•°çš„æ‰§è¡Œã€‚æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ä¹Ÿåœ¨è¿™ä¸€å±‚å®ç°ï¼Œå¦‚è¿‡ç¨‹ã€å‡½æ•°ç­‰ã€‚</li></ul></li><li>å¼•æ“å±‚<ul><li>å­˜å‚¨å¼•æ“çœŸæ­£çš„è´Ÿè´£äº†MySQLä¸­æ•°æ®çš„å­˜å‚¨å’Œæå–ï¼ŒæœåŠ¡å™¨é€šè¿‡APå’Œå­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡ã€‚ä¸åŒçš„å­˜å‚¨å¼•æ“å…·æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œæ¥é€‰å–åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚</li></ul></li><li>å­˜å‚¨å±‚<ul><li>ä¸»è¦æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’ã€‚</li></ul></li></ul><h2 id="ç®€ä»‹">2. ç®€ä»‹</h2><p>å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ã€å»ºç«‹ç´¢å¼•ã€æ›´æ–°/æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨è€Œä¸æ˜¯åŸºäºåº“çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºè¡¨å¼•æ“ã€‚</p><p>é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯InnoDBã€‚</p><p>ç›¸å…³æ“ä½œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢å»ºè¡¨è¯­å¥</span><br><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> account;  <br><span class="hljs-comment">-- å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> è¡¨å(<br>...<br>) ENGINE<span class="hljs-operator">=</span>INNODB;<br><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“</span><br><span class="hljs-keyword">show</span> engines;<br><br><span class="hljs-comment">-- eg:</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_myisam(<br>id <span class="hljs-type">int</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)<br>) engine <span class="hljs-operator">=</span> MyISAM;<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> my_memory(<br>id <span class="hljs-type">int</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)<br>) engine <span class="hljs-operator">=</span> Memory;<br></code></pre></td></tr></table></figure><p><img src="/2024/11/27/MySQL/7-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/image-20241129213402904.png"></p><h2 id="innodb">3. InnoDB</h2><ol type="1"><li><p>InnoDB æ˜¯ä¸€ç§å…¼é¡¾é«˜å¯é æ€§å’Œé«˜æ€§èƒ½çš„é€šç”¨å­˜å‚¨å¼•æ“ï¼Œåœ¨ MySQL 5.5ä¹‹åï¼ŒInnoDB æ˜¯é»˜è®¤çš„ MySQL å¼•æ“ã€‚</p></li><li><p>ç‰¹ç‚¹ï¼š</p></li></ol><ul><li>DML æ“ä½œéµå¾ª ACID æ¨¡å‹ï¼Œæ”¯æŒ<strong>äº‹åŠ¡</strong></li><li><strong>è¡Œçº§é”</strong>ï¼Œæé«˜å¹¶å‘è®¿é—®æ€§èƒ½</li><li>æ”¯æŒ<strong>å¤–é”®</strong>çº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§</li></ul><ol start="3" type="1"><li>æ–‡ä»¶ï¼š</li></ol><ul><li>xxx.ibd: xxxä»£è¡¨è¡¨åï¼ŒInnoDBå¼•æ“çš„æ¯å¼ è¡¨éƒ½ä¼šå¯¹åº”è¿™æ ·ä¸€ä¸ªè¡¨ç©ºé—´æ–‡ä»¶ï¼Œå­˜å‚¨è¯¥è¡¨çš„è¡¨ç»“æ„ï¼ˆfrmã€sdiï¼‰ã€æ•°æ®å’Œç´¢å¼•ã€‚</li></ul><ol start="4" type="1"><li><p>å‚æ•°ï¼šinnodb_file_per_tableï¼Œå†³å®šå¤šå¼ è¡¨å…±äº«ä¸€ä¸ªè¡¨ç©ºé—´è¿˜æ˜¯æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªè¡¨ç©ºé—´ï¼Œé»˜è®¤æ‰“å¼€ï¼Œå³æ¯å¼ è¡¨å¯¹åº”ä¸€ä¸ªè¡¨ç©ºé—´</p></li><li><p>çŸ¥è¯†ç‚¹ï¼š</p></li></ol><ul><li>æŸ¥çœ‹ Mysql å˜é‡ï¼š<code>show variables like 'innodb_file_per_table';</code></li></ul><ol start="6" type="1"><li>ä»idbæ–‡ä»¶æå–è¡¨ç»“æ„æ•°æ®ï¼š</li></ol><ul><li>ï¼ˆåœ¨cmdè¿è¡Œï¼‰<ul><li><code>ibd2sdi xxx.ibd</code></li></ul></li></ul><ol start="7" type="1"><li>InnoDB é€»è¾‘å­˜å‚¨ç»“æ„ï¼š</li></ol><figure><img src="/2024/11/27/MySQL/7-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/image-20241129215159412.png" alt="InnoDB é€»è¾‘å­˜å‚¨ç»“æ„"><figcaption aria-hidden="true">InnoDB é€»è¾‘å­˜å‚¨ç»“æ„</figcaption></figure><h2 id="myisam">4. MyISAM</h2><ol type="1"><li><p>MyISAM æ˜¯ MySQL æ—©æœŸçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p></li><li><p>ç‰¹ç‚¹ï¼š</p></li></ol><ul><li>ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®</li><li>æ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé”</li><li>è®¿é—®é€Ÿåº¦å¿«</li></ul><ol start="3" type="1"><li>æ–‡ä»¶ï¼š</li></ol><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯ æ–‡æœ¬æ–‡ä»¶ï¼Œjsonæ–‡ä»¶</li><li>xxx.MYD: å­˜å‚¨æ•°æ®</li><li>xxx.MYI: å­˜å‚¨ç´¢å¼•</li></ul><h2 id="memory">5. Memory</h2><ol type="1"><li><p>Memoryå¼•æ“çš„è¡¨æ•°æ®æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå—ç¡¬ä»¶é—®é¢˜ã€æ–­ç”µé—®é¢˜çš„å½±å“ï¼Œåªèƒ½å°†è¿™äº›è¡¨ä½œä¸ºä¸´æ—¶è¡¨æˆ–ç¼“å­˜ä½¿ç”¨ã€‚</p></li><li><p>ç‰¹ç‚¹ï¼š</p></li></ol><ul><li>å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦å¿«</li><li>hashç´¢å¼•ï¼ˆé»˜è®¤ï¼‰</li></ul><ol start="3" type="1"><li>æ–‡ä»¶ï¼š</li></ol><ul><li>xxx.sdi: å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯</li></ul><h2 id="å­˜å‚¨å¼•æ“ç‰¹ç‚¹">6. å­˜å‚¨å¼•æ“ç‰¹ç‚¹</h2><table><thead><tr><th>ç‰¹ç‚¹</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>å­˜å‚¨é™åˆ¶</td><td>64TB</td><td>æœ‰</td><td>æœ‰</td></tr><tr><td>äº‹åŠ¡å®‰å…¨</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr><tr><td>é”æœºåˆ¶</td><td>è¡Œé”</td><td>è¡¨é”</td><td>è¡¨é”</td></tr><tr><td>B+treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>Hashç´¢å¼•</td><td>-</td><td>-</td><td>æ”¯æŒ</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ”¯æŒï¼ˆ5.6ç‰ˆæœ¬ä¹‹åï¼‰</td><td>æ”¯æŒ</td><td>-</td></tr><tr><td>ç©ºé—´ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>N/A</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>é«˜</td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td>æ‰¹é‡æ’å…¥é€Ÿåº¦</td><td>ä½</td><td>é«˜</td><td>é«˜</td></tr><tr><td>æ”¯æŒå¤–é”®</td><td>æ”¯æŒ</td><td>-</td><td>-</td></tr></tbody></table><h2 id="å­˜å‚¨å¼•æ“çš„é€‰æ‹©">7. å­˜å‚¨å¼•æ“çš„é€‰æ‹©</h2><ol type="1"><li>åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆã€‚</li></ol><ul><li>InnoDB:å¦‚æœåº”ç”¨å¯¹äº‹ç‰©çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œåˆ™InnoDB æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©</li><li>MyISAM:å¦‚æœåº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸é«˜ï¼Œé‚£è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚ï¼ˆmongodbï¼‰</li><li>Memory:å°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼Œé€šå¸¸ç”¨äºä¸´æ—¶è¡¨åŠç¼“å­˜ã€‚Memoryçš„ç¼ºé™·æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸”æ— æ³•ä¿éšœæ•°æ®çš„å®‰å…¨æ€§ï¼ˆredisï¼‰</li></ul><ol start="2" type="1"><li>ç”µå•†ä¸­çš„è¶³è¿¹å’Œè¯„è®ºé€‚åˆä½¿ç”¨ MyISAM å¼•æ“ï¼Œç¼“å­˜é€‚åˆä½¿ç”¨ Memoryå¼•æ“ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6. æ•°æ®ç±»å‹</title>
    <link href="/2024/11/26/MySQL/6-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/2024/11/26/MySQL/6-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®ç±»å‹">6. æ•°æ®ç±»å‹</h1><h2 id="æ•´å‹">1. æ•´å‹</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>å–å€¼èŒƒå›´</th><th>å¤§å°</th></tr></thead><tbody><tr><td>TINYINT</td><td>-128ã€œ127</td><td>1ä¸ªå­—èŠ‚</td></tr><tr><td>SMALLINT</td><td>-32768ã€œ32767</td><td>2ä¸ªå®‡èŠ‚</td></tr><tr><td>MEDIUMINT</td><td>-8388608ã€œ8388607</td><td>3ä¸ªå­—èŠ‚</td></tr><tr><td>INT (INTEGHR)</td><td>-2147483648ã€œ2147483647</td><td>4ä¸ªå­—èŠ‚</td></tr><tr><td>BIGINT</td><td>-9223372036854775808ã€œ9223372036854775807</td><td>8ä¸ªå­—èŠ‚</td></tr></tbody></table><p>æ— ç¬¦å·åœ¨æ•°æ®ç±»å‹ååŠ  unsigned å…³é”®å­—ã€‚</p><h2 id="æµ®ç‚¹å‹">2. æµ®ç‚¹å‹</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>FLOAT</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>4 ä¸ªå­—èŠ‚</td></tr><tr><td>DOUBLE</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>DECIMAL (M, D)ï¼ŒDEC</td><td>å‹ç¼©çš„â€œä¸¥æ ¼â€å®šç‚¹æ•°</td><td>M+2 ä¸ªå­—èŠ‚</td></tr></tbody></table><h2 id="æ—¥æœŸå’Œæ—¶é—´">3. æ—¥æœŸå’Œæ—¶é—´</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>æ—¥æœŸæ ¼å¼</th><th>æ—¥æœŸèŒƒå›´</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901 ~ 2155</td><td>1 ä¸ªå­—èŠ‚</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-3</td><td>3 ä¸ªå­—èŠ‚</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td><td>8 ä¸ªå­—èŠ‚</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td><td>4 ä¸ªå­—èŠ‚</td></tr></tbody></table><h2 id="å­—ç¬¦ä¸²">4. å­—ç¬¦ä¸²</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>å›ºå®šé•¿åº¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚ï¼Œ1&lt;=M&lt;=255</td></tr><tr><td>VARCHAR(M)</td><td>å˜é•¿éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt; = Må’Œ 1&lt;=M&lt;=255</td></tr><tr><td>TINYTEXT</td><td>éå¸¸å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+1å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>TEXT</td><td>å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+2å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMTEXT</td><td>ä¸­ç­‰å¤§å°çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+3å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGTEXT</td><td>å¤§çš„éäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>L+4å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr><tr><td>ENUM</td><td>æšä¸¾ç±»å‹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæšä¸¾å­—ç¬¦ä¸²å€¼</td><td>1æˆ–2ä¸ªå­—èŠ‚ï¼Œå–å†³äºæšä¸¾å€¼çš„æ•°ç›® (æœ€å¤§å€¼ä¸º65535)</td></tr><tr><td>SET</td><td>ä¸€ä¸ªè®¾ç½®ï¼Œå­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥æœ‰é›¶ä¸ªæˆ– å¤šä¸ªSETæˆå‘˜</td><td>1ã€2ã€3ã€4æˆ–8ä¸ªå­—èŠ‚ï¼Œå–å†³äºé›†åˆ æˆå‘˜çš„æ•°é‡ï¼ˆæœ€å¤š64ä¸ªæˆå‘˜ï¼‰</td></tr></tbody></table><h2 id="äºŒè¿›åˆ¶ç±»å‹">5. äºŒè¿›åˆ¶ç±»å‹</h2><table><thead><tr><th>ç±»å‹åç§°</th><th>è¯´æ˜</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>BIT(M)</td><td>ä½å­—æ®µç±»å‹</td><td>å¤§çº¦ (M+7)/8 å­—èŠ‚</td></tr><tr><td>BINARY(M)</td><td>å›ºå®šé•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M å­—èŠ‚</td></tr><tr><td>VARBINARY (M)</td><td>å¯å˜é•¿åº¦äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td>M+1 å­—èŠ‚</td></tr><tr><td>TINYBLOB (M)</td><td>éå¸¸å°çš„BLOB</td><td>L+1 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^8</td></tr><tr><td>BLOB (M)</td><td>å° BLOB</td><td>L+2 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^16</td></tr><tr><td>MEDIUMBLOB (M)</td><td>ä¸­ç­‰å¤§å°çš„BLOB</td><td>L+3 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^24</td></tr><tr><td>LONGBLOB (M)</td><td>éå¸¸å¤§çš„BLOB</td><td>L+4 å­—èŠ‚ï¼Œåœ¨æ­¤ï¼ŒL&lt;2^32</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5. äº‹åŠ¡</title>
    <link href="/2024/11/26/MySQL/5-%E4%BA%8B%E5%8A%A1/"/>
    <url>/2024/11/26/MySQL/5-%E4%BA%8B%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="äº‹åŠ¡">5. äº‹åŠ¡</h1><ul><li>äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</li></ul><h2 id="åŸºæœ¬æ“ä½œ">5.1 åŸºæœ¬æ“ä½œï¼š</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> account(<br>id <span class="hljs-type">int</span> auto_increment <span class="hljs-keyword">primary</span> key comment <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    money <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ä½™é¢&#x27;</span><br>) comment <span class="hljs-string">&#x27;è´¦æˆ·è¡¨&#x27;</span>;<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> account(id, name, money) <span class="hljs-keyword">values</span> (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="hljs-number">2000</span>),(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;æå››&#x27;</span>, <span class="hljs-number">2000</span>);<br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> <span class="hljs-number">2000</span>;<br><br><span class="hljs-comment">-- 1. æŸ¥è¯¢å¼ ä¸‰è´¦æˆ·ä½™é¢</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> account <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><span class="hljs-comment">-- 2. å°†å¼ ä¸‰è´¦æˆ·ä½™é¢-1000</span><br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">-</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><span class="hljs-comment">-- æ­¤è¯­å¥å‡ºé”™åå¼ ä¸‰é’±å‡å°‘ä½†æ˜¯æå››é’±æ²¡æœ‰å¢åŠ </span><br>æ¨¡æ‹Ÿ<span class="hljs-keyword">sql</span>è¯­å¥é”™è¯¯<br><span class="hljs-comment">-- 3. å°†æå››è´¦æˆ·ä½™é¢+1000</span><br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">+</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;æå››&#x27;</span>;<br><br><br><span class="hljs-comment">-- æŸ¥çœ‹äº‹åŠ¡æäº¤æ–¹å¼</span><br><span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@AUTOCOMMIT</span>;<br><span class="hljs-comment">-- è®¾ç½®äº‹åŠ¡æäº¤æ–¹å¼ï¼Œ1ä¸ºè‡ªåŠ¨æäº¤ï¼Œ0ä¸ºæ‰‹åŠ¨æäº¤ï¼Œè¯¥è®¾ç½®åªå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆ</span><br><span class="hljs-keyword">SET</span> @<span class="hljs-variable">@AUTOCOMMIT</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-comment">-- æäº¤äº‹åŠ¡</span><br><span class="hljs-keyword">COMMIT</span>;<br><span class="hljs-comment">-- å›æ»šäº‹åŠ¡</span><br><span class="hljs-keyword">ROLLBACK</span>;<br><br><span class="hljs-comment">-- è®¾ç½®æ‰‹åŠ¨æäº¤åä¸Šé¢ä»£ç æ”¹ä¸ºï¼š</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> account <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">-</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">+</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;æå››&#x27;</span>;<br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure><p>æ“ä½œæ–¹å¼äºŒï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- å¼€å¯äº‹åŠ¡ï¼š</span><br><span class="hljs-keyword">START</span> TRANSACTION æˆ– <span class="hljs-keyword">BEGIN</span> TRANSACTION;<br><span class="hljs-comment">-- æäº¤äº‹åŠ¡ï¼š</span><br><span class="hljs-keyword">COMMIT</span>;<br><span class="hljs-comment">-- å›æ»šäº‹åŠ¡ï¼š</span><br><span class="hljs-keyword">ROLLBACK</span>;<br><br>æ“ä½œå®ä¾‹ï¼š<br><span class="hljs-keyword">start</span> transaction;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> account <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">-</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><span class="hljs-keyword">update</span> account <span class="hljs-keyword">set</span> money <span class="hljs-operator">=</span> money <span class="hljs-operator">+</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;æå››&#x27;</span>;<br><span class="hljs-keyword">commit</span>;<br></code></pre></td></tr></table></figure><h2 id="å››å¤§ç‰¹æ€§acid">5.2 å››å¤§ç‰¹æ€§ACID</h2><ul><li>åŸå­æ€§(Atomicity)ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œä½†æ„¿ï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</li><li>ä¸€è‡´æ€§(Consistency)ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€</li><li>éš”ç¦»æ€§(Isolation)ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œ</li><li>æŒä¹…æ€§(Durability)ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„</li></ul><h2 id="å¹¶å‘äº‹åŠ¡">5.3 å¹¶å‘äº‹åŠ¡</h2><table><thead><tr><th>é—®é¢˜</th><th>æè¿°</th></tr></thead><tbody><tr><td>è„è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®</td></tr><tr><td>ä¸å¯é‡å¤è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡å…ˆåè¯»å–åŒä¸€æ¡è®°å½•ï¼Œä½†ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ</td></tr><tr><td>å¹»è¯»</td><td>ä¸€ä¸ªäº‹åŠ¡æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œï¼Œä½†æ˜¯å†æ’å…¥æ•°æ®æ—¶ï¼Œåˆå‘ç°è¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨</td></tr></tbody></table><h2 id="å¹¶å‘äº‹åŠ¡éš”ç¦»çº§åˆ«">5.4 å¹¶å‘äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</h2><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Read committed</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>Repeatable Read(é»˜è®¤)</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr><tr><td>Serializable</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table><ul><li>âˆšè¡¨ç¤ºåœ¨å½“å‰éš”ç¦»çº§åˆ«ä¸‹è¯¥é—®é¢˜ä¼šå‡ºç°</li><li>Serializable æ€§èƒ½æœ€ä½ï¼›Read uncommittedæ€§èƒ½æœ€é«˜ï¼Œæ•°æ®å®‰å…¨æ€§æœ€å·®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</span><br><span class="hljs-keyword">SELECT</span> @<span class="hljs-variable">@TRANSACTION_ISOLATION</span>;<br><span class="hljs-comment">-- è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š</span><br><span class="hljs-keyword">SET</span> [ SESSION <span class="hljs-operator">|</span> <span class="hljs-keyword">GLOBAL</span> ] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED <span class="hljs-operator">|</span> READ COMMITTED <span class="hljs-operator">|</span> REPEATABLE READ <span class="hljs-operator">|</span> SERIALIZABLE &#125;;<br><br><span class="hljs-keyword">set</span> session transaction isolation level REPEATABLE READ;<br></code></pre></td></tr></table></figure><p>SESSION æ˜¯ä¼šè¯çº§åˆ«ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆï¼ŒGLOBALè¡¨ç¤ºå¯¹æ‰€æœ‰ä¼šè¯æœ‰æ•ˆ</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4. å¤šè¡¨æŸ¥è¯¢</title>
    <link href="/2024/11/26/MySQL/4-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/"/>
    <url>/2024/11/26/MySQL/4-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤šè¡¨æŸ¥è¯¢">4. å¤šè¡¨æŸ¥è¯¢</h1><h2 id="å¤šè¡¨å…³ç³»">1. å¤šè¡¨å…³ç³»</h2><ul><li>é¡¹ç›®å¼€å‘ä¸­ï¼Œåœ¨è¿›è¡Œæ•°æ®åº“è¡¨ç»“æ„è®¾è®¡æ—¶ï¼Œä¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠä¸šåŠ¡æ¨¡å—ä¹‹é—´çš„å…³ç³»ï¼Œåˆ†æå¹¶è®¾è®¡è¡¨ç»“æ„ï¼Œç”±äºä¸šåŠ¡ä¹‹é—´ç›¸äº’å…³è”ï¼Œæ‰€ä»¥å„ä¸ªè¡¨ç»“æ„ä¹‹é—´ä¹Ÿå­˜åœ¨ç€å„ç§è”ç³»ï¼ŒåŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ç§ï¼š<ul><li>ä¸€å¯¹å¤šï¼ˆå¤šå¯¹ä¸€ï¼‰</li><li>å¤šå¯¹å¤š</li><li>ä¸€å¯¹ä¸€</li></ul></li></ul><h3 id="ä¸€å¯¹å¤š">1.1 ä¸€å¯¹å¤š</h3><ul><li>æ¡ˆä¾‹ï¼šéƒ¨é—¨ä¸å‘˜å·¥</li><li>å…³ç³»ï¼šä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨</li><li>å®ç°ï¼šåœ¨å¤šçš„ä¸€æ–¹å»ºç«‹å¤–é”®ï¼ŒæŒ‡å‘ä¸€çš„ä¸€æ–¹çš„ä¸»é”®</li></ul><p><img src="/2024/11/26/MySQL/4-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/image-20241126210159754.png"></p><h3 id="å¤šå¯¹å¤š">1.2 å¤šå¯¹å¤š</h3><ul><li>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¸è¯¾ç¨‹</li><li>å…³ç³»ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰ä¿®</li><li>å®ç°ï¼šå»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”®</li></ul><p><img src="/2024/11/26/MySQL/4-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/image-20241126210309968.png"></p><ul><li>åˆ›å»ºä¸‰ä¸ªè¡¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">constraint</span> fk_courseid <span class="hljs-keyword">foreign</span> key (courseid) <span class="hljs-keyword">references</span> course (id);<br><span class="hljs-keyword">constraint</span> fk_studentid <span class="hljs-keyword">foreign</span> key (studentid) <span class="hljs-keyword">references</span> student (id);<br></code></pre></td></tr></table></figure><h3 id="ä¸€å¯¹ä¸€">1.3 ä¸€å¯¹ä¸€</h3><ul><li>æ¡ˆä¾‹ï¼šç”¨æˆ·ä¸ç”¨æˆ·è¯¦æƒ…</li><li>å…³ç³»ï¼šä¸€å¯¹ä¸€å…³ç³»ï¼Œå¤šç”¨äºå•è¡¨æ‹†åˆ†ï¼Œå°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå…¶ä»–è¯¦æƒ…å­—æ®µæ”¾åœ¨å¦ä¸€å¼ è¡¨ä¸­ï¼Œä»¥æå‡æ“ä½œæ•ˆç‡</li><li>å®ç°ï¼šåœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®ï¼Œå¹¶ä¸”è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„ï¼ˆUNIQUEï¼‰</li></ul><p><img src="/2024/11/26/MySQL/4-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/image-20241126233655365.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">constraint</span> fk_userid <span class="hljs-keyword">foreign</span> key (userid) <span class="hljs-keyword">references</span> tb_user(id);<br></code></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢">2. æŸ¥è¯¢</h2><h3 id="å¤šè¡¨æŸ¥è¯¢-1">2.1 å¤šè¡¨æŸ¥è¯¢</h3><ul><li><p>ä»å¤šå¼ è¡¨ä¸­å›½æŸ¥è¯¢æ•°æ®</p></li><li><p>åˆå¹¶æŸ¥è¯¢ï¼ˆç¬›å¡å°”ç§¯ï¼Œä¼šå±•ç¤ºæ‰€æœ‰ç»„åˆç»“æœï¼‰ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employee, dept;<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>ç¬›å¡å°”ç§¯ï¼šä¸¤ä¸ªé›†åˆAé›†åˆå’ŒBé›†åˆçš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼ˆåœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯ï¼‰</p></blockquote><p>æ¶ˆé™¤æ— æ•ˆç¬›å¡å°”ç§¯ï¼ŒåŠ ä¸Šæ¡ä»¶ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employee, dept <span class="hljs-keyword">where</span> employee.dept <span class="hljs-operator">=</span> dept.id;<br></code></pre></td></tr></table></figure><h3 id="åˆ†ç±»">2.2 åˆ†ç±»</h3><ul><li>è¿æ¥æŸ¥è¯¢<ul><li>å†…è¿æ¥ï¼šç›¸å½“äºæŸ¥è¯¢Aã€Bçš„äº¤é›†</li><li>å¤–è¿æ¥ï¼š<ul><li>å·¦å¤–è¿æ¥ï¼šæŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®</li><li>å³å¤–è¿æ¥ï¼šæŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®</li></ul></li><li>è‡ªè¿æ¥ï¼š<ul><li>å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å</li></ul></li></ul></li><li>å­æŸ¥è¯¢</li></ul><h2 id="å†…è¿æ¥æŸ¥è¯¢">3. å†…è¿æ¥æŸ¥è¯¢</h2><ul><li>å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ†<ul><li>éšå¼å†…è¿æ¥ï¼š</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨<span class="hljs-number">1</span>, è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">WHERE</span> æ¡ä»¶ ...;<br></code></pre></td></tr></table></figure><ul><li>æ˜¾å¼å†…è¿æ¥ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨<span class="hljs-number">1</span> [ <span class="hljs-keyword">INNER</span> ] <span class="hljs-keyword">JOIN</span> è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">ON</span> è¿æ¥æ¡ä»¶ ...;<br></code></pre></td></tr></table></figure><ul><li>æ˜¾å¼æ€§èƒ½æ¯”éšå¼é«˜</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºdeptè¡¨ï¼Œå¹¶æ’å…¥æ•°æ®</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dept(<br>id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;ID&#x27;</span> <span class="hljs-keyword">primary</span> key,<br>name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span><br>)comment <span class="hljs-string">&#x27;éƒ¨é—¨è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> dept (id, name)<br> <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>), (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;å¸‚åœºéƒ¨&#x27;</span>),(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>), (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;é”€å”®éƒ¨&#x27;</span>), (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;æ€»ç»åŠ&#x27;</span>), (<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;äººäº‹éƒ¨&#x27;</span>);<br> <br> <span class="hljs-comment">-- åˆ›å»ºempè¡¨ï¼Œå¹¶æ’å…¥æ•°æ®</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp(<br>    id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;ID&#x27;</span> <span class="hljs-keyword">primary</span> key,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    age <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    job <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) comment <span class="hljs-string">&#x27;èŒä½&#x27;</span>,<br>    salary <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;è–ªèµ„&#x27;</span>,<br>    entrydate <span class="hljs-type">date</span> comment <span class="hljs-string">&#x27;å…¥èŒæ—¶é—´&#x27;</span>,<br>    managerid <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç›´å±é¢†å¯¼ID&#x27;</span>,<br>    dept_id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span><br>)comment <span class="hljs-string">&#x27;å‘˜å·¥è¡¨&#x27;</span>;<span class="hljs-comment">-- æ·»åŠ å¤–é”®</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> fk_emp_dept_id <span class="hljs-keyword">foreign</span> key (dept_id) <span class="hljs-keyword">references</span> <br>dept(id);<br><br> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> emp (id, name, age, job,salary, entrydate, managerid, dept_id)<br> <span class="hljs-keyword">VALUES</span><br> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;é‡‘åº¸&#x27;</span>, <span class="hljs-number">66</span>, <span class="hljs-string">&#x27;æ€»è£&#x27;</span>,<span class="hljs-number">20000</span>, <span class="hljs-string">&#x27;2000-01-01&#x27;</span>, <span class="hljs-keyword">null</span>,<span class="hljs-number">5</span>),<br> (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;å¼ æ— å¿Œ&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;é¡¹ç›®ç»ç†&#x27;</span>,<span class="hljs-number">12500</span>, <span class="hljs-string">&#x27;2005-12-05&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-number">1</span>),<br> (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;æ¨é€&#x27;</span>, <span class="hljs-number">33</span>, <span class="hljs-string">&#x27;å¼€å‘&#x27;</span>, <span class="hljs-number">8400</span>,<span class="hljs-string">&#x27;2000-11-03&#x27;</span>, <span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br> (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;éŸ¦ä¸€ç¬‘&#x27;</span>, <span class="hljs-number">48</span>, <span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">11000</span>, <span class="hljs-string">&#x27;2002-02-05&#x27;</span>, <span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br> (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;å¸¸é‡æ˜¥&#x27;</span>, <span class="hljs-number">43</span>, <span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">10500</span>, <span class="hljs-string">&#x27;2004-09-07&#x27;</span>, <span class="hljs-number">3</span>,<span class="hljs-number">1</span>),<br> (<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;å°æ˜­&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;ç¨‹åºå‘˜é¼“åŠ±å¸ˆ&#x27;</span>,<span class="hljs-number">6600</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br> (<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;ç­ç»&#x27;</span>, <span class="hljs-number">60</span>, <span class="hljs-string">&#x27;è´¢åŠ¡æ€»ç›‘&#x27;</span>,<span class="hljs-number">8500</span>, <span class="hljs-string">&#x27;2002-09-12&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-number">3</span>),<br> (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;å‘¨èŠ·è‹¥&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;ä¼šè®¡&#x27;</span>,<span class="hljs-number">48000</span>, <span class="hljs-string">&#x27;2006-06-02&#x27;</span>, <span class="hljs-number">7</span>,<span class="hljs-number">3</span>),<br> (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;ä¸æ•å›&#x27;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&#x27;å‡ºçº³&#x27;</span>,<span class="hljs-number">5250</span>, <span class="hljs-string">&#x27;2009-05-13&#x27;</span>, <span class="hljs-number">7</span>,<span class="hljs-number">3</span>),<br> (<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;èµµæ•&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;å¸‚åœºéƒ¨æ€»ç›‘&#x27;</span>,<span class="hljs-number">12500</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>),<br> (<span class="hljs-number">11</span>, <span class="hljs-string">&#x27;é¹¿æ–å®¢&#x27;</span>, <span class="hljs-number">56</span>, <span class="hljs-string">&#x27;èŒå‘˜&#x27;</span>,<span class="hljs-number">3750</span>, <span class="hljs-string">&#x27;2006-10-03&#x27;</span>, <span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<br> (<span class="hljs-number">12</span>, <span class="hljs-string">&#x27;é¹¤ç¬”ç¿&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;èŒå‘˜&#x27;</span>,<span class="hljs-number">3750</span>, <span class="hljs-string">&#x27;2007-05-09&#x27;</span>, <span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<br> (<span class="hljs-number">13</span>, <span class="hljs-string">&#x27;æ–¹ä¸œç™½&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;èŒå‘˜&#x27;</span>,<span class="hljs-number">5500</span>, <span class="hljs-string">&#x27;2009-02-12&#x27;</span>, <span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<br> (<span class="hljs-number">14</span>, <span class="hljs-string">&#x27;å¼ ä¸‰ä¸°&#x27;</span>, <span class="hljs-number">88</span>, <span class="hljs-string">&#x27;é”€å”®æ€»ç›‘&#x27;</span>,<span class="hljs-number">14000</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-number">4</span>),<br> (<span class="hljs-number">15</span>, <span class="hljs-string">&#x27;ä¿è²èˆŸ&#x27;</span>, <span class="hljs-number">38</span>, <span class="hljs-string">&#x27;é”€å”®&#x27;</span>,<span class="hljs-number">4600</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">14</span>,<span class="hljs-number">4</span>),<br> (<span class="hljs-number">16</span>, <span class="hljs-string">&#x27;å®‹è¿œæ¡¥&#x27;</span>, <span class="hljs-number">40</span>, <span class="hljs-string">&#x27;é”€å”®&#x27;</span>,<span class="hljs-number">4600</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">14</span>,<span class="hljs-number">4</span>),<br> (<span class="hljs-number">17</span>, <span class="hljs-string">&#x27;é™ˆå‹è°…&#x27;</span>, <span class="hljs-number">42</span>, <span class="hljs-keyword">null</span>,<span class="hljs-number">2000</span>, <span class="hljs-string">&#x27;2011-10-12&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-keyword">null</span>);<br><br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢å‘˜å·¥å§“åï¼ŒåŠå…³è”çš„éƒ¨é—¨çš„åç§°</span><br><span class="hljs-comment">-- éšå¼</span><br><span class="hljs-keyword">select</span> e.name, d.name <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">as</span> e, dept <span class="hljs-keyword">as</span> d <span class="hljs-keyword">where</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br><span class="hljs-comment">-- æ˜¾å¼</span><br><span class="hljs-keyword">select</span> e.name, d.name <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">as</span> e <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dept <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br></code></pre></td></tr></table></figure><h2 id="å¤–è¿æ¥æŸ¥è¯¢">4. å¤–è¿æ¥æŸ¥è¯¢</h2><ul><li>å·¦å¤–è¿æ¥ï¼š<ul><li>æŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®</li><li>ç›¸å½“äºæŸ¥è¯¢è¡¨1çš„æ‰€æœ‰æ•°æ®ï¼ŒåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†æ•°æ®</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨<span class="hljs-number">1</span> <span class="hljs-keyword">LEFT</span> [ <span class="hljs-keyword">OUTER</span> ] <span class="hljs-keyword">JOIN</span> è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">ON</span> æ¡ä»¶ ...;<br></code></pre></td></tr></table></figure><ul><li>å³å¤–è¿æ¥ï¼š<ul><li>æŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨<span class="hljs-number">1</span> <span class="hljs-keyword">RIGHT</span> [ <span class="hljs-keyword">OUTER</span> ] <span class="hljs-keyword">JOIN</span> è¡¨<span class="hljs-number">2</span> <span class="hljs-keyword">ON</span> æ¡ä»¶ ...;<br></code></pre></td></tr></table></figure><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢empè¡¨çš„æ‰€æœ‰æ•°æ®ï¼Œå’Œå¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯ï¼ˆå·¦å¤–è¿æ¥ï¼‰</span><br><span class="hljs-comment">-- å·¦</span><br><span class="hljs-keyword">select</span> e.<span class="hljs-operator">*</span>, d.name <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">as</span> e <span class="hljs-keyword">left</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> dept <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br><span class="hljs-comment">-- 2.æŸ¥è¯¢deptè¡¨çš„æ‰€æœ‰æ•°æ®ï¼Œå’Œå¯¹åº”çš„å‘˜å·¥ä¿¡æ¯ï¼ˆå³å¤–è¿æ¥ï¼‰</span><br><span class="hljs-keyword">select</span> d.name, e.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept d <span class="hljs-keyword">left</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> emp e <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id;  <br><span class="hljs-comment">-- è¿™æ¡è¯­å¥ä¸ä¸‹é¢çš„è¯­å¥æ•ˆæœä¸€æ ·</span><br><span class="hljs-comment">-- å³</span><br><span class="hljs-keyword">select</span> d.name, e.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">as</span> e <span class="hljs-keyword">right</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> dept <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br></code></pre></td></tr></table></figure><p>å·¦è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰deptçš„empï¼Œå³è¿æ¥å¯ä»¥æŸ¥è¯¢åˆ°æ²¡æœ‰empçš„dept</p><h2 id="è‡ªè¿æ¥æŸ¥è¯¢">5. è‡ªè¿æ¥æŸ¥è¯¢</h2><ul><li>å½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å</li></ul><p>è¯­æ³•ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨A åˆ«åA <span class="hljs-keyword">JOIN</span> è¡¨A åˆ«åB <span class="hljs-keyword">ON</span> æ¡ä»¶ ...;<br></code></pre></td></tr></table></figure><ul><li>è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢å‘˜å·¥åŠå…¶æ‰€å±é¢†å¯¼çš„åå­—</span><br><span class="hljs-keyword">select</span> a.name, b.name <span class="hljs-keyword">from</span> emp a, emp b <span class="hljs-keyword">where</span> a.managerid <span class="hljs-operator">=</span> b.id;<br><span class="hljs-comment">-- æ²¡æœ‰é¢†å¯¼çš„ä¹ŸæŸ¥è¯¢å‡ºæ¥</span><br><span class="hljs-keyword">select</span> a.name, b.name <span class="hljs-keyword">from</span> emp a <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> emp b <span class="hljs-keyword">on</span> a.managerid <span class="hljs-operator">=</span> b.id;<br></code></pre></td></tr></table></figure><h2 id="è”åˆæŸ¥è¯¢-union-union-all">6. è”åˆæŸ¥è¯¢ union, union all</h2><ul><li><p>æŠŠå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›†</p></li><li><p>è¯­æ³•ï¼š</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨A ...<br><span class="hljs-keyword">UNION</span> [<span class="hljs-keyword">ALL</span>]<br><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨B ...;<br><br><span class="hljs-comment">-- eg:</span><br><span class="hljs-comment">-- å°†è–ªèµ„ä½äº5000çš„å‘˜å·¥ï¼Œå’Œå¹´é¾„å¤§äº50å²çš„å‘˜å·¥å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> salary <span class="hljs-operator">&lt;</span> <span class="hljs-number">5000</span><br><span class="hljs-keyword">union</span> <br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">50</span>;<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ul><li>å¯¹äºè”åˆæŸ¥è¯¢çš„å¤šå¼ è¡¨çš„åˆ—æ•°å¿…é¡»ä¿æŒä¸€è‡´ï¼Œå­—æ®µç±»å‹ä¹Ÿéœ€è¦ä¿æŒä¸€è‡´ã€‚</li><li>UNION ALL ä¼šæœ‰é‡å¤ç»“æœï¼ŒUNION ä¸ä¼š</li><li>è”åˆæŸ¥è¯¢æ¯”ä½¿ç”¨oræ•ˆç‡é«˜ï¼Œä¸ä¼šä½¿ç´¢å¼•å¤±æ•ˆ</li></ul><h2 id="å­æŸ¥è¯¢">7. å­æŸ¥è¯¢</h2><p>SQLè¯­å¥ä¸­åµŒå¥—SELECTè¯­å¥ï¼Œç§°è°“åµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t1 <span class="hljs-keyword">WHERE</span> column1 <span class="hljs-operator">=</span> ( <span class="hljs-keyword">SELECT</span> column1 <span class="hljs-keyword">FROM</span> t2);<br></code></pre></td></tr></table></figure><p><strong>å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯ INSERT / UPDATE / DELETE / SELECTçš„ä»»ä½•ä¸€ä¸ª</strong></p><p>æ ¹æ®å­æŸ¥è¯¢ç»“æœå¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ï¼‰</li><li>åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼‰</li><li>è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼‰</li><li>è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼‰</li></ul><p>æ ¹æ®å­æŸ¥è¯¢ä½ç½®å¯åˆ†ä¸ºï¼š</p><ul><li>WHERE ä¹‹å</li><li>FROM ä¹‹å</li><li>SELECT ä¹‹å</li></ul><h3 id="æ ‡é‡å­æŸ¥è¯¢">7.1 æ ‡é‡å­æŸ¥è¯¢</h3><ul><li>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰ã€‚<ul><li>å¸¸ç”¨æ“ä½œç¬¦ï¼š= &lt; &gt; &gt; &gt;= &lt; &lt;=</li></ul></li><li>ä¾‹å­ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢é”€å”®éƒ¨æ‰€æœ‰å‘˜å·¥<br>select id from dept where name = &#x27;é”€å”®éƒ¨&#x27;;<br>-- æ ¹æ®é”€å”®éƒ¨éƒ¨é—¨IDï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯<br>select * from emp where dept_id = 4;<br>-- åˆå¹¶ï¼ˆå­æŸ¥è¯¢ï¼‰<br>select * from emp where dept_id = (select id from dept where name = &#x27;é”€å”®éƒ¨&#x27;);<br><br>-- æŸ¥è¯¢xxxå…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯<br>select * from emp where entrydate &gt; (select entrydate from emp where name = &#x27;æ–¹ä¸œç™½&#x27;);<br></code></pre></td></tr></table></figure><h3 id="åˆ—å­æŸ¥è¯¢">7.2 åˆ—å­æŸ¥è¯¢</h3><ul><li><p>è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰ã€‚</p></li><li><p>å¸¸ç”¨æ“ä½œç¬¦ï¼š</p></li></ul><table><thead><tr><th>æ“ä½œç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>IN</td><td>åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>NOT IN</td><td>ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…</td></tr><tr><td>ANY</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨ä¸­ï¼Œæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³å³å¯</td></tr><tr><td>SOME</td><td>ä¸ANYç­‰åŒï¼Œä½¿ç”¨SOMEçš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ANY</td></tr><tr><td>ALL</td><td>å­æŸ¥è¯¢è¿”å›åˆ—è¡¨çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ»¡è¶³</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢é”€å”®éƒ¨å’Œå¸‚åœºéƒ¨çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> dept_id <span class="hljs-keyword">in</span> (<span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;é”€å”®éƒ¨&#x27;</span> <span class="hljs-keyword">or</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¸‚åœºéƒ¨&#x27;</span>);<br><span class="hljs-comment">-- æŸ¥è¯¢æ¯”è´¢åŠ¡éƒ¨æ‰€æœ‰äººå·¥èµ„éƒ½é«˜çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> salary <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">all</span>(<span class="hljs-keyword">select</span> salary <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> dept_id <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>));<br><span class="hljs-comment">-- æŸ¥è¯¢æ¯”ç ”å‘éƒ¨ä»»æ„ä¸€äººå·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> salary <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">any</span> (<span class="hljs-keyword">select</span> salary <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> dept_id <span class="hljs-operator">=</span> (<span class="hljs-keyword">select</span> id <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>));<br></code></pre></td></tr></table></figure><h3 id="è¡Œå­æŸ¥è¯¢">7.3 è¡Œå­æŸ¥è¯¢</h3><ul><li>è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰ã€‚<ul><li>å¸¸ç”¨æ“ä½œç¬¦ï¼š=, &lt;, &gt;, IN, NOT IN</li></ul></li><li>ä¾‹å­ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- æŸ¥è¯¢ä¸xxxçš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯<br>select * from emp where (salary, managerid) = (12500, 1);<br>select * from emp where (salary, managerid) = (select salary, managerid from emp where name = &#x27;å¼ æ— å¿Œ&#x27;);<br></code></pre></td></tr></table></figure><h3 id="è¡¨å­æŸ¥è¯¢">7.4 è¡¨å­æŸ¥è¯¢</h3><ul><li>è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—<ul><li>å¸¸ç”¨æ“ä½œç¬¦ï¼šIN</li></ul></li><li>ä¾‹å­ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢ä¸xxx1ï¼Œxxx2çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> (job, salary) <span class="hljs-keyword">in</span> (<span class="hljs-keyword">select</span> job, salary <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;é¹¿æ–å®¢&#x27;</span> <span class="hljs-keyword">or</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å®‹è¿œæ¡¥&#x27;</span>);<br><span class="hljs-comment">-- æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯2006-01-01ä¹‹åçš„å‘˜å·¥ï¼ŒåŠå…¶éƒ¨é—¨ä¿¡æ¯</span><br><span class="hljs-keyword">select</span> e.<span class="hljs-operator">*</span>, d.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> entrydate <span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;2006-01-01&#x27;</span>) <span class="hljs-keyword">as</span> e <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> dept <span class="hljs-keyword">as</span> d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br></code></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢æ¡ˆä¾‹">8. æŸ¥è¯¢æ¡ˆä¾‹</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs sql"> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> salgrade(<br>     grade <span class="hljs-type">int</span>,<br>     losal <span class="hljs-type">int</span>,<br>     hisal <span class="hljs-type">int</span><br> ) comment <span class="hljs-string">&#x27;è–ªèµ„ç­‰çº§è¡¨&#x27;</span>;<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>,<span class="hljs-number">3001</span>,<span class="hljs-number">5000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">3</span>,<span class="hljs-number">5001</span>,<span class="hljs-number">8000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>,<span class="hljs-number">8001</span>,<span class="hljs-number">10000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">5</span>,<span class="hljs-number">10001</span>,<span class="hljs-number">15000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">6</span>,<span class="hljs-number">15001</span>,<span class="hljs-number">20000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">7</span>,<span class="hljs-number">20001</span>,<span class="hljs-number">25000</span>);<br> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade <span class="hljs-keyword">values</span> (<span class="hljs-number">8</span>,<span class="hljs-number">25001</span>,<span class="hljs-number">30000</span>);<br> <br><span class="hljs-comment">-- æŸ¥è¯¢å‘˜å·¥çš„å§“åã€å¹´é¾„ã€èŒä½ã€éƒ¨é—¨ä¿¡æ¯ã€‚</span><br><span class="hljs-keyword">select</span> e.name, e.age, e.job, d.name <span class="hljs-keyword">from</span> emp e, dept d <span class="hljs-keyword">where</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br><span class="hljs-comment">-- æŸ¥è¯¢å¹´é¾„å°äº30å²çš„å‘˜å·¥å§“åã€å¹´é¾„ã€èŒä½ã€éƒ¨é—¨ä¿¡æ¯ã€‚</span><br><span class="hljs-keyword">select</span> e.name, e.age, e.job, d.name <span class="hljs-keyword">from</span> emp e <span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dept d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id <span class="hljs-keyword">where</span> e.age <span class="hljs-operator">&lt;</span> <span class="hljs-number">30</span>;<br><span class="hljs-comment">-- æŸ¥è¯¢æ‹¥æœ‰å‘˜å·¥çš„éƒ¨é—¨IDã€éƒ¨é—¨åç§°ã€‚</span><br><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> d.id, d.name <span class="hljs-keyword">from</span> emp e, dept d <span class="hljs-keyword">where</span> e.dept_id <span class="hljs-operator">=</span> d.id;<br><span class="hljs-comment">-- æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å¤§äº40å²çš„å‘˜å·¥ï¼ŒåŠå…¶å½’å±çš„éƒ¨é—¨åç§°ï¼›å¦‚æœå‘˜å·¥æ²¡æœ‰åˆ†é…éƒ¨é—¨ï¼Œä¹Ÿéœ€è¦å±•ç¤ºå‡ºæ¥ã€‚</span><br><span class="hljs-keyword">select</span> e.<span class="hljs-operator">*</span>, d.name <span class="hljs-keyword">from</span> emp e <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> dept d <span class="hljs-keyword">on</span> e.dept_id <span class="hljs-operator">=</span> d.id <span class="hljs-keyword">where</span> e.age <span class="hljs-operator">&gt;</span> <span class="hljs-number">40</span>;<br><span class="hljs-comment">-- æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„ç­‰çº§ã€‚</span><br><span class="hljs-keyword">select</span> e.<span class="hljs-operator">*</span>, s.grade <span class="hljs-keyword">from</span> emp e, salgrade s <span class="hljs-keyword">where</span> e.salary <span class="hljs-keyword">between</span> s.losal <span class="hljs-keyword">and</span> s.hisal; <br><span class="hljs-comment">-- æŸ¥è¯¢&quot;ç ”å‘éƒ¨â€æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯åŠå·¥èµ„ç­‰çº§ã€‚</span><br><span class="hljs-keyword">select</span> e.<span class="hljs-operator">*</span>, s.grade <br><span class="hljs-keyword">from</span> emp e, <br> dept d, <br> salgrade s <br><span class="hljs-keyword">where</span> e.dept_id <span class="hljs-operator">=</span> d.id <br><span class="hljs-keyword">and</span> e.salary <span class="hljs-keyword">between</span> s.losal <span class="hljs-keyword">and</span> s.hisal <br><span class="hljs-keyword">and</span> d.name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>;<br><span class="hljs-comment">-- æŸ¥è¯¢&quot;ç ”å‘éƒ¨â€å‘˜å·¥çš„å¹³å‡å·¥èµ„ã€‚</span><br><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(e.salary)<br><span class="hljs-keyword">from</span> emp e,<br> dept d<br><span class="hljs-keyword">where</span> e.dept_id <span class="hljs-operator">=</span> d.id<br><span class="hljs-keyword">and</span> d.name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>;<br><span class="hljs-comment">-- æŸ¥è¯¢å·¥èµ„æ¯”&quot;ç­ç»&quot;é«˜çš„å‘˜å·¥ä¿¡æ¯ã€‚</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> emp<br><span class="hljs-keyword">where</span> salary <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">select</span> salary<br>                <span class="hljs-keyword">from</span> emp<br>                <span class="hljs-keyword">where</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç­ç»&#x27;</span>);<br>                <br><span class="hljs-comment">-- æŸ¥è¯¢æ¯”å¹³å‡è–ªèµ„é«˜çš„å‘˜å·¥ä¿¡æ¯ã€‚</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">from</span> emp<br><span class="hljs-keyword">where</span> salary <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(salary)<br><span class="hljs-keyword">from</span> emp);<br><br><span class="hljs-comment">-- æŸ¥è¯¢ä½äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯ã€‚</span><br><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <br><span class="hljs-keyword">from</span> emp e2<br><span class="hljs-keyword">where</span> salary <span class="hljs-operator">&lt;</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(e1.salary)<br>                <span class="hljs-keyword">from</span> emp e1<br>                <span class="hljs-keyword">where</span> e1.dept_id <span class="hljs-operator">=</span> e2.dept_id);<br><span class="hljs-comment">-- æŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯ï¼Œå¹¶ç»Ÿè®¡éƒ¨é—¨çš„å‘˜å·¥äººæ•°ã€‚</span><br><span class="hljs-keyword">select</span> d.id, d.name, (<span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>)<br>  <span class="hljs-keyword">from</span> emp e<br>  <span class="hljs-keyword">where</span> e.dept_id <span class="hljs-operator">=</span> d.id) <span class="hljs-string">&#x27;äººæ•°&#x27;</span><br><span class="hljs-keyword">from</span> dept d;<br><br><br><span class="hljs-comment">-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„é€‰è¯¾æƒ…å†µï¼Œå±•ç¤ºå‡ºå­¦ç”Ÿåç§°ï¼Œå­¦å·ï¼Œè¯¾ç¨‹åç§°</span><br><span class="hljs-comment">-- è¡¨ï¼šstudent,course,student_course</span><br><span class="hljs-keyword">select</span> s.name, s.no, c.name<br><span class="hljs-keyword">from</span> student s,<br> student_course sc,<br> course c<br><span class="hljs-keyword">where</span> s.id <span class="hljs-operator">=</span> sc.studentid<br><span class="hljs-keyword">and</span> sc.courseid <span class="hljs-operator">=</span> c.id;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3. çº¦æŸ</title>
    <link href="/2024/11/26/MySQL/3-%E7%BA%A6%E6%9D%9F/"/>
    <url>/2024/11/26/MySQL/3-%E7%BA%A6%E6%9D%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="çº¦æŸ">3. çº¦æŸ</h1><ul><li>æ¦‚å¿µï¼šçº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®ã€‚</li><li>ç›®çš„ï¼šä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„æ­£ç¡®ã€æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§ã€‚</li><li>åˆ†ç±»ï¼š</li></ul><table><thead><tr><th>çº¦æŸ</th><th>æè¿°</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>éç©ºçº¦æŸ</td><td>é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸ºnull</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€çº¦æŸ</td><td>ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„</td><td>UNIQUE</td></tr><tr><td>ä¸»é”®çº¦æŸ</td><td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€</td><td>PRIMARY KEY</td></tr><tr><td>é»˜è®¤çº¦æŸ</td><td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td><td>DEFAULT</td></tr><tr><td>æ£€æŸ¥çº¦æŸï¼ˆ8.0.1ç‰ˆæœ¬åï¼‰</td><td>ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶</td><td>CHECK</td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>ç”¨æ¥è®©ä¸¤å¼ å›¾çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td>FOREIGN KEY</td></tr></tbody></table><p>çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥å†åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸã€‚</p><h2 id="å¸¸ç”¨çº¦æŸ">1. å¸¸ç”¨çº¦æŸ</h2><table><thead><tr><th>çº¦æŸæ¡ä»¶</th><th>å…³é”®å­—</th></tr></thead><tbody><tr><td>ä¸»é”®</td><td>PRIMARY KEY</td></tr><tr><td>è‡ªåŠ¨å¢é•¿</td><td>AUTO_INCREMENT</td></tr><tr><td>ä¸ä¸ºç©º</td><td>NOT NULL</td></tr><tr><td>å”¯ä¸€</td><td>UNIQUE</td></tr><tr><td>é€»è¾‘æ¡ä»¶</td><td>CHECK</td></tr><tr><td>é»˜è®¤å€¼</td><td>DEFAULT</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><p><img src="/2024/11/26/MySQL/3-%E7%BA%A6%E6%9D%9F/image-20241126202101551.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">user</span>(<br>id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment comment <span class="hljs-string">&#x27;ä¸»é”®&#x27;</span>,<br>name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">unique</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>age <span class="hljs-type">int</span> <span class="hljs-keyword">check</span>(age <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">120</span>) comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>status <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;1&#x27;</span> comment <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>,<br>gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) comment <span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span><br>)comment <span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">user</span>(name, age, status, gender) <span class="hljs-keyword">values</span> (<span class="hljs-string">&#x27;Tom1&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>),(<span class="hljs-string">&#x27;Tom2&#x27;</span>, <span class="hljs-number">25</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>),(<span class="hljs-string">&#x27;Tom3&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>);<br><br><br></code></pre></td></tr></table></figure><h2 id="å¤–é”®çº¦æŸ">2. å¤–é”®çº¦æŸ</h2><ul><li><p>å¤–é”®ç”¨æ¥è®©ä¸¤å¼ è¡¨çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä»è€Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p></li><li><p>æ·»åŠ å¤–é”®ï¼š</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> è¡¨å(<br>å­—æ®µå å­—æ®µç±»å‹,<br>...<br>[<span class="hljs-keyword">CONSTRAINT</span>] [å¤–é”®åç§°] <span class="hljs-keyword">FOREIGN</span> KEY(å¤–é”®å­—æ®µå) <span class="hljs-keyword">REFERENCES</span> ä¸»è¡¨(ä¸»è¡¨åˆ—å)<br>);<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> å¤–é”®åç§° <span class="hljs-keyword">FOREIGN</span> KEY (å¤–é”®å­—æ®µå) <span class="hljs-keyword">REFERENCES</span> ä¸»è¡¨(ä¸»è¡¨åˆ—å);<br><br><span class="hljs-comment">-- ä¾‹å­</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> fk_emp2_dept_id <span class="hljs-keyword">foreign</span> key(dept_id) <span class="hljs-keyword">references</span> dept(id);<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤å¤–é”®ï¼š</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">FOREIGN</span> KEY å¤–é”®å;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">drop</span> <span class="hljs-keyword">foreign</span> key fk_emp2_dept_id;<br></code></pre></td></tr></table></figure><p><img src="/2024/11/26/MySQL/3-%E7%BA%A6%E6%9D%9F/image-20241126203209128.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dept(<br>    id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;ID&#x27;</span> <span class="hljs-keyword">primary</span> key ,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span><br>)comment <span class="hljs-string">&#x27;éƒ¨é—¨è¡¨&#x27;</span>;<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept (id, name) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;å¸‚åœºéƒ¨&#x27;</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>),(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;é”€å”®éƒ¨&#x27;</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;æ€»ç»åŠ&#x27;</span>);<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp2(<br>    id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;id&#x27;</span> <span class="hljs-keyword">primary</span> key ,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    age <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    job <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) comment <span class="hljs-string">&#x27;èŒä½&#x27;</span>,<br>    salary <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;è–ªèµ„&#x27;</span>,<br>    enterdate <span class="hljs-type">date</span> comment <span class="hljs-string">&#x27;å…¥èŒæ—¶é—´&#x27;</span>,<br>    managerid <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç›´å±é¢†å¯¼id&#x27;</span>,<br>    dept_id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨id&#x27;</span><br>)comment <span class="hljs-string">&#x27;å‘˜å·¥è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> emp2(id, name, age, job, salary, enterdate, managerid, dept_id)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;é‡‘åº¸&#x27;</span>,<span class="hljs-number">66</span>,<span class="hljs-string">&#x27;æ€»è£&#x27;</span>,<span class="hljs-number">20000</span>,<span class="hljs-string">&#x27;2000-01-01&#x27;</span>,<span class="hljs-keyword">null</span>,<span class="hljs-number">5</span>),<br>       (<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;å¼ æ— å¿Œ&#x27;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&#x27;é¡¹ç›®ç»ç†&#x27;</span>,<span class="hljs-number">12500</span>,<span class="hljs-string">&#x27;2005-12-05&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;æ¨é€&#x27;</span>,<span class="hljs-number">33</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">8400</span>,<span class="hljs-string">&#x27;2000-11-03&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;éŸ¦ä¸€ç¬‘&#x27;</span>,<span class="hljs-number">48</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">11000</span>,<span class="hljs-string">&#x27;2002-02-05&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;å¸¸é‡æ˜¥&#x27;</span>,<span class="hljs-number">43</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">10500</span>,<span class="hljs-string">&#x27;2004-09-07&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>),<br>       (<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;å°æ˜­&#x27;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;ç¨‹åºå‘˜é¼“åŠ±å¸ˆ&#x27;</span>,<span class="hljs-number">6600</span>,<span class="hljs-string">&#x27;2004-10-12&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><h3 id="åˆ é™¤æ›´æ–°è¡Œä¸º">åˆ é™¤/æ›´æ–°è¡Œä¸º</h3><table><thead><tr><th>è¡Œä¸º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>NO ACTION</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸RESTRICTä¸€è‡´ï¼‰</td></tr><tr><td>RESTRICT</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ï¼ˆä¸NOACTIONä¸€è‡´ï¼‰</td></tr><tr><td>CASCADE</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•</td></tr><tr><td>SET NULL</td><td>å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸ºnullï¼ˆè¦æ±‚è¯¥å¤–é”®å…è®¸ä¸ºnullï¼‰</td></tr><tr><td>SET DEFAULT</td><td>çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®è®¾ä¸ºä¸€ä¸ªé»˜è®¤å€¼ï¼ˆInnodbä¸æ”¯æŒï¼‰</td></tr></tbody></table><p>æ›´æ”¹åˆ é™¤/æ›´æ–°è¡Œä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> å¤–é”®åç§° <span class="hljs-keyword">FOREIGN</span> KEY (å¤–é”®å­—æ®µ) <span class="hljs-keyword">REFERENCES</span> ä¸»è¡¨å(ä¸»è¡¨å­—æ®µå) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> è¡Œä¸º <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> è¡Œä¸º;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> fk_emp2_dept_id <span class="hljs-keyword">foreign</span> key (dept_id ) <span class="hljs-keyword">references</span> dept(id) <span class="hljs-keyword">on</span> <span class="hljs-keyword">update</span> cascade <span class="hljs-keyword">on</span> <span class="hljs-keyword">delete</span> cascade;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> fk_emp2_dept_id <span class="hljs-keyword">foreign</span> key (dept_id ) <span class="hljs-keyword">references</span> dept(id) <span class="hljs-keyword">on</span> <span class="hljs-keyword">update</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">on</span> <span class="hljs-keyword">delete</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">null</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2. å‡½æ•°</title>
    <link href="/2024/11/26/MySQL/2-%E5%87%BD%E6%95%B0/"/>
    <url>/2024/11/26/MySQL/2-%E5%87%BD%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡½æ•°">2. å‡½æ•°</h1><ul><li>å­—ç¬¦ä¸²å‡½æ•°</li><li>æ•°å€¼å‡½æ•°</li><li>æ—¥æœŸå‡½æ•°</li><li>æµç¨‹å‡½æ•°</li></ul><h2 id="å­—ç¬¦ä¸²å‡½æ•°">1. å­—ç¬¦ä¸²å‡½æ•°</h2><p>å¸¸ç”¨å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CONCAT(s1, s2, â€¦, sn)</td><td>å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†s1, s2, â€¦, snæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</td></tr><tr><td>LOWER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™</td></tr><tr><td>UPPER(str)</td><td>å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå¤§å†™</td></tr><tr><td>LPAD(str, n, pad)</td><td>å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>RPAD(str, n, pad)</td><td>å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td>TRIM(str)</td><td>å»æ‰å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼</td></tr><tr><td>SUBSTRING(str, start, len)</td><td>è¿”å›ä»å­—ç¬¦ä¸²strä»startä½ç½®èµ·çš„lenä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²</td></tr><tr><td>REPLACE(column, source, replace)</td><td>æ›¿æ¢å­—ç¬¦ä¸²</td></tr></tbody></table><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ‹¼æ¥</span><br><span class="hljs-keyword">SELECT</span> CONCAT(<span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-string">&#x27;World&#x27;</span>);<br><span class="hljs-comment">-- å°å†™</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">LOWER</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br><span class="hljs-comment">-- å¤§å†™</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">UPPER</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>);<br><span class="hljs-comment">-- å·¦å¡«å……</span><br><span class="hljs-keyword">SELECT</span> LPAD(<span class="hljs-string">&#x27;01&#x27;</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;-&#x27;</span>);<br><span class="hljs-comment">-- å³å¡«å……</span><br><span class="hljs-keyword">SELECT</span> RPAD(<span class="hljs-string">&#x27;01&#x27;</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;-&#x27;</span>);<br><span class="hljs-comment">-- å»é™¤ç©ºæ ¼</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">TRIM</span>(<span class="hljs-string">&#x27; Hello World &#x27;</span>);<br><span class="hljs-comment">-- åˆ‡ç‰‡ï¼ˆèµ·å§‹ç´¢å¼•ä¸º1ï¼‰</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">SUBSTRING</span>(<span class="hljs-string">&#x27;Hello World&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ç”±äºä¸šåŠ¡éœ€æ±‚å˜æ›´ï¼Œä¼ä¸šå‘˜å·¥çš„å·¥å·ï¼Œç»Ÿä¸€ä¸º<span class="hljs-number">5</span>ä½æ•°ï¼Œç›®å‰ä¸è¶³<span class="hljs-number">5</span>ä½æ•°çš„å…¨éƒ¨åœ¨å‰é¢è¡¥<span class="hljs-number">0</span>ã€‚æ¯”å¦‚ï¼š<span class="hljs-number">1</span>å·å‘˜å·¥çš„å·¥å·åº”è¯¥ä¸º<span class="hljs-number">00001</span>ã€‚<br><span class="hljs-keyword">update</span> emp <span class="hljs-keyword">set</span> workno <span class="hljs-operator">=</span> lpad(workno, <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;0&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="æ•°å€¼å‡½æ•°">2. æ•°å€¼å‡½æ•°</h2><p>å¸¸è§å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>å‘ä¸Šå–æ•´</td></tr><tr><td>FLOOR(x)</td><td>å‘ä¸‹å–æ•´</td></tr><tr><td>MOD(x, y)</td><td>è¿”å›x/yçš„æ¨¡</td></tr><tr><td>RAND()</td><td>è¿”å›0~1å†…çš„éšæœºæ•°</td></tr><tr><td>ROUND(x, y)</td><td>æ±‚å‚æ•°xçš„å››èˆäº”å…¥å€¼ï¼Œä¿ç•™yä½å°æ•°</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">ceil</span>(<span class="hljs-number">1.1</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">floor</span>(<span class="hljs-number">1.9</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">mod</span>(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>);<br><span class="hljs-keyword">select</span> rand();<br><span class="hljs-keyword">select</span> round(<span class="hljs-number">2.346</span>, <span class="hljs-number">2</span>);<br><br># é€šè¿‡æ•°æ®åº“çš„å‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ªå…­ä½æ•°çš„éšæœºéªŒè¯ç ã€‚<br><span class="hljs-keyword">select</span> lpad(round(rand()<span class="hljs-operator">*</span><span class="hljs-number">100000</span>, <span class="hljs-number">0</span>), <span class="hljs-number">6</span>, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><h2 id="æ—¥æœŸå‡½æ•°">3. æ—¥æœŸå‡½æ•°</h2><p>å¸¸ç”¨å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>CURDATE()</td><td>è¿”å›å½“å‰æ—¥æœŸ</td></tr><tr><td>CURTIME()</td><td>è¿”å›å½“å‰æ—¶é—´</td></tr><tr><td>NOW()</td><td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td>YEAR(date)</td><td>è·å–æŒ‡å®šdateçš„å¹´ä»½</td></tr><tr><td>MONTH(date)</td><td>è·å–æŒ‡å®šdateçš„æœˆä»½</td></tr><tr><td>DAY(date)</td><td>è·å–æŒ‡å®šdateçš„æ—¥æœŸ</td></tr><tr><td>DATE_ADD(date, INTERVAL expr type)</td><td>è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”expråçš„æ—¶é—´å€¼</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>è¿”å›èµ·å§‹æ—¶é—´date1å’Œç»“æŸæ—¶é—´date2ä¹‹é—´çš„å¤©æ•°</td></tr></tbody></table><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> curdate();<br><span class="hljs-keyword">select</span> curtime();<br><span class="hljs-keyword">select</span> now();<br><br><span class="hljs-keyword">select</span> <span class="hljs-keyword">year</span>(now());<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">month</span>(now());<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">day</span>(now());<br><br><span class="hljs-comment">-- DATE_ADD</span><br><span class="hljs-keyword">SELECT</span> DATE_ADD(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">70</span> <span class="hljs-keyword">DAY</span>);<br><span class="hljs-keyword">select</span> datediff(<span class="hljs-string">&#x27;2021-12-01&#x27;</span>,<span class="hljs-string">&#x27;2022-12-02&#x27;</span>);<br><br><span class="hljs-comment">-- æ¡ˆä¾‹ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å…¥èŒå¤©æ•°ï¼Œå¹¶æ ¹æ®å…¥èŒå¤©æ•°å€’åºæ’åºã€‚</span><br><span class="hljs-keyword">select</span> name, datediff(curdate(), entrydate) <span class="hljs-string">&#x27;entrydays&#x27;</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> entrydays <span class="hljs-keyword">desc</span>;<br></code></pre></td></tr></table></figure><h2 id="æµç¨‹å‡½æ•°">4. æµç¨‹å‡½æ•°</h2><p>å¸¸ç”¨å‡½æ•°ï¼š</p><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>å¦‚æœvalueä¸ºtrueï¼Œåˆ™è¿”å›tï¼Œå¦åˆ™è¿”å›f</td></tr><tr><td>IFNULL(value1, value2)</td><td>å¦‚æœvalue1ä¸ä¸ºç©ºï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2</td></tr><tr><td>CASE WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ] END</td><td>å¦‚æœval1ä¸ºtrueï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼</td></tr><tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] â€¦ ELSE [ default ]END</td><td>å¦‚æœexprçš„å€¼ç­‰äºval1ï¼Œè¿”å›res1ï¼Œâ€¦ å¦åˆ™è¿”å›defaulté»˜è®¤å€¼</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> if(<span class="hljs-literal">true</span>, <span class="hljs-string">&#x27;Ok&#x27;</span>, <span class="hljs-string">&#x27;error&#x27;</span>);<br><span class="hljs-keyword">select</span> ifnull(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;default&#x27;</span>);<br><span class="hljs-comment">-- </span><br><span class="hljs-keyword">select</span><br>name,<br>(<span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">30</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ä¸­å¹´&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;é’å¹´&#x27;</span> <span class="hljs-keyword">end</span>) <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;å¹´çºª&#x27;</span><br><span class="hljs-keyword">from</span> emp;<br><br><span class="hljs-comment">-- éœ€æ±‚ï¼šæŸ¥è¯¢mpè¡¨çš„å‘˜å·¥å§“åå’Œå·¥ä½œåœ°å€ï¼ˆåŒ—äº¬/ä¸Šæµ·----&gt;ä¸€çº¿åŸå¸‚ï¼Œå…¶ä»–---&gt;äºŒçº¿åŸå¸‚)</span><br><span class="hljs-keyword">select</span><br>name,<br>(<span class="hljs-keyword">case</span> workaddress <span class="hljs-keyword">when</span> <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ä¸€çº¿åŸå¸‚&#x27;</span> <span class="hljs-keyword">when</span> <span class="hljs-string">&#x27;ä¸Šæµ·&#x27;</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ä¸€çº¿åŸå¸‚&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;äºŒçº¿åŸå¸‚&#x27;</span> <span class="hljs-keyword">end</span>) <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;å·¥ä½œåœ°å€&#x27;</span><br><span class="hljs-keyword">from</span> emp;<br><br><span class="hljs-comment">--</span><br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> score(<br>id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ID&#x27;</span>,<br>name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>math <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;æ•°å­¦&#x27;</span>,<br>english <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;è‹±è¯­&#x27;</span>,<br>chinese <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;è¯­æ–‡&#x27;</span><br>) comment <span class="hljs-string">&#x27;å­¦å‘˜æˆç»©è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> score (id, name, math, english, chinese) <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;Tom&#x27;</span>,<span class="hljs-number">67</span>,<span class="hljs-number">88</span>,<span class="hljs-number">95</span>), (<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;Rose&#x27;</span>,<span class="hljs-number">23</span>,<span class="hljs-number">66</span>,<span class="hljs-number">90</span>), (<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;Jack&#x27;</span>,<span class="hljs-number">56</span>,<span class="hljs-number">98</span>,<span class="hljs-number">76</span>);<br><br><span class="hljs-keyword">select</span> <br>id,<br>name,<br>(<span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> math <span class="hljs-operator">&gt;=</span> <span class="hljs-number">85</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ä¼˜ç§€&#x27;</span> <span class="hljs-keyword">when</span> math <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;åŠæ ¼&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;ä¸åŠæ ¼&#x27;</span> <span class="hljs-keyword">end</span>) <span class="hljs-string">&#x27;æ•°å­¦&#x27;</span>,<br>(<span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> english <span class="hljs-operator">&gt;=</span> <span class="hljs-number">85</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ä¼˜ç§€&#x27;</span> <span class="hljs-keyword">when</span> english <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;åŠæ ¼&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;ä¸åŠæ ¼&#x27;</span> <span class="hljs-keyword">end</span>) <span class="hljs-string">&#x27;è‹±è¯­&#x27;</span>,<br>(<span class="hljs-keyword">case</span> <span class="hljs-keyword">when</span> chinese <span class="hljs-operator">&gt;=</span> <span class="hljs-number">85</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;ä¼˜ç§€&#x27;</span> <span class="hljs-keyword">when</span> chinese <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&#x27;åŠæ ¼&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;ä¸åŠæ ¼&#x27;</span> <span class="hljs-keyword">end</span>) <span class="hljs-string">&#x27;è¯­æ–‡&#x27;</span><br><span class="hljs-keyword">from</span> score;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs |"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.4 DCL(æ•°æ®æ§åˆ¶è¯­è¨€)</title>
    <link href="/2024/11/26/MySQL/1-4-DCL(%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80)/"/>
    <url>/2024/11/26/MySQL/1-4-DCL(%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80)/</url>
    
    <content type="html"><![CDATA[<h1 id="dclæ•°æ®æ§åˆ¶è¯­è¨€">1.4 DCL(æ•°æ®æ§åˆ¶è¯­è¨€)</h1><p>DCLè‹±æ–‡å…¨ç§°æ˜¯Data ControlLanguage(æ•°æ®æ§åˆ¶è¯­è¨€)ï¼Œç”¨æ¥ç®¡ç†æ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™ã€‚</p><h2 id="ç®¡ç†ç”¨æˆ·">1. ç®¡ç†ç”¨æˆ·</h2><ol type="1"><li>æŸ¥è¯¢ç”¨æˆ·ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE mysql;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span>;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>åˆ›å»ºç”¨æˆ·:</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;å¯†ç &#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span> IDENTIFIED <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;æ–°å¯†ç &#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>åˆ é™¤ç”¨æˆ·ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ä¾‹å­ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·testï¼Œåªèƒ½åœ¨å½“å‰ä¸»æœºlocalhostè®¿é—®</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;test&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br><span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·testï¼Œèƒ½åœ¨ä»»æ„ä¸»æœºè®¿é—®</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;test1&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;test&#x27;</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br><span class="hljs-comment">-- ä¿®æ”¹å¯†ç </span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;test&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;1234&#x27;</span>;<br><span class="hljs-comment">-- åˆ é™¤ç”¨æˆ·</span><br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;test&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ul><li>ä¸»æœºåå¯ä»¥ä½¿ç”¨ % é€šé…</li></ul><h2 id="æƒé™æ§åˆ¶">2. æƒé™æ§åˆ¶</h2><ol type="1"><li>å¸¸ç”¨æƒé™ï¼š</li></ol><table><thead><tr><th>æƒé™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>æ‰€æœ‰æƒé™</td></tr><tr><td>SELECT</td><td>æŸ¥è¯¢æ•°æ®</td></tr><tr><td>INSERT</td><td>æ’å…¥æ•°æ®</td></tr><tr><td>UPDATE</td><td>ä¿®æ”¹æ•°æ®</td></tr><tr><td>DELETE</td><td>åˆ é™¤æ•°æ®</td></tr><tr><td>ALTER</td><td>ä¿®æ”¹è¡¨</td></tr><tr><td>DROP</td><td>åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾</td></tr><tr><td>CREATE</td><td>åˆ›å»ºæ•°æ®åº“/è¡¨</td></tr></tbody></table><p>æ›´å¤šæƒé™è¯·çœ‹<a href="#%E6%9D%83%E9%99%90%E4%B8%80%E8%A7%88%E8%A1%A8" title="æƒé™ä¸€è§ˆè¡¨">æƒé™ä¸€è§ˆè¡¨</a></p><p>æŸ¥è¯¢æƒé™ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æˆäºˆæƒé™ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">GRANT</span> æƒé™åˆ—è¡¨ <span class="hljs-keyword">ON</span> æ•°æ®åº“å.è¡¨å <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æ’¤é”€æƒé™ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">REVOKE</span> æƒé™åˆ—è¡¨ <span class="hljs-keyword">ON</span> æ•°æ®åº“å.è¡¨å <span class="hljs-keyword">FROM</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>@<span class="hljs-string">&#x27;ä¸»æœºå&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹-1">æ³¨æ„äº‹é¡¹</h3><ul><li>å¤šä¸ªæƒé™ç”¨é€—å·åˆ†éš”</li><li>æˆæƒæ—¶ï¼Œæ•°æ®åº“åå’Œè¡¨åå¯ä»¥ç”¨ * è¿›è¡Œé€šé…ï¼Œä»£è¡¨æ‰€æœ‰</li></ul>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.3 DQL(æ•°æ®æŸ¥è¯¢è¯­è¨€)</title>
    <link href="/2024/11/26/MySQL/1-3-DQL(%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80)/"/>
    <url>/2024/11/26/MySQL/1-3-DQL(%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80)/</url>
    
    <content type="html"><![CDATA[<h1 id="dqlæ•°æ®æŸ¥è¯¢è¯­è¨€">1.3 DQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰</h1><p>è¯­æ³•ï¼šç¼–å†™é¡ºåº</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>å­—æ®µåˆ—è¡¨<br><span class="hljs-keyword">FROM</span><br>è¡¨åå­—æ®µ<br><span class="hljs-keyword">WHERE</span><br>æ¡ä»¶åˆ—è¡¨<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><br>åˆ†ç»„å­—æ®µåˆ—è¡¨<br><span class="hljs-keyword">HAVING</span><br>åˆ†ç»„åçš„æ¡ä»¶åˆ—è¡¨<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><br>æ’åºå­—æ®µåˆ—è¡¨<br>LIMIT<br>åˆ†é¡µå‚æ•°<br></code></pre></td></tr></table></figure><h2 id="åŸºç¡€æŸ¥è¯¢">1. åŸºç¡€æŸ¥è¯¢</h2><ol type="1"><li>æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µ<span class="hljs-number">1</span>, å­—æ®µ<span class="hljs-number">2</span>, å­—æ®µ<span class="hljs-number">3</span>, ... <span class="hljs-keyword">FROM</span> è¡¨å;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> è¡¨å;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>è®¾ç½®åˆ«åï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µ<span class="hljs-number">1</span> [ <span class="hljs-keyword">AS</span> åˆ«å<span class="hljs-number">1</span> ], å­—æ®µ<span class="hljs-number">2</span> [ <span class="hljs-keyword">AS</span> åˆ«å<span class="hljs-number">2</span> ], å­—æ®µ<span class="hljs-number">3</span> [ <span class="hljs-keyword">AS</span> åˆ«å<span class="hljs-number">3</span> ], ... <span class="hljs-keyword">FROM</span> è¡¨å;<br><span class="hljs-keyword">SELECT</span> å­—æ®µ<span class="hljs-number">1</span> [ åˆ«å<span class="hljs-number">1</span> ], å­—æ®µ<span class="hljs-number">2</span> [ åˆ«å<span class="hljs-number">2</span> ], å­—æ®µ<span class="hljs-number">3</span> [ åˆ«å<span class="hljs-number">3</span> ], ... <span class="hljs-keyword">FROM</span> è¡¨å;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>å»é™¤é‡å¤è®°å½•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å;<br></code></pre></td></tr></table></figure><ul><li>æ–°å»ºè¡¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp<br>(<br>    id          <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç¼–å·&#x27;</span>,<br>    workno      <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å·¥å·&#x27;</span>,<br>    name        <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    gender      <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) comment <span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span>,<br>    age         tinyint unsigned comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    idcard      <span class="hljs-type">char</span>(<span class="hljs-number">18</span>) comment <span class="hljs-string">&#x27;èº«ä»½è¯å·&#x27;</span>,<br>    workaddress <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) comment <span class="hljs-string">&#x27;å·¥ä½œåœ°å€&#x27;</span>,<br>    entrydate   <span class="hljs-type">date</span> comment <span class="hljs-string">&#x27;å…¥èŒæ—¶é—´&#x27;</span><br>) comment <span class="hljs-string">&#x27;å‘˜å·¥è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> emp(id, workno, name, gender, age, idcard, workaddress, entrydate)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;æŸ³å²©&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;123456789012345678&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2000-01-01&#x27;</span>),<br>       (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;å¼ æ— å¿Œ&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">18</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2005-09-01&#x27;</span>),<br>       (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;éŸ¦ä¸€ç¬‘&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">38</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="hljs-string">&#x27;2005-08-01&#x27;</span>),<br>       (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;4&#x27;</span>, <span class="hljs-string">&#x27;èµµæ•&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">18</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2009-12-01&#x27;</span>),<br>       (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;5&#x27;</span>, <span class="hljs-string">&#x27;å°æ˜­&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">16</span>, <span class="hljs-string">&#x27;123456789012345678&#x27;</span>, <span class="hljs-string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="hljs-string">&#x27;2007-07-01&#x27;</span>),<br>       (<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;6&#x27;</span>, <span class="hljs-string">&#x27;æ¨é€&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">28</span>, <span class="hljs-string">&#x27;12345678901234567X&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2006-01-01&#x27;</span>),<br>       (<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;7&#x27;</span>, <span class="hljs-string">&#x27;èŒƒç‘¶&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">40</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2005-05-01&#x27;</span>),<br>       (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;8&#x27;</span>, <span class="hljs-string">&#x27;é»›ç»®ä¸&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">38</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;å¤©æ´¥&#x27;</span>, <span class="hljs-string">&#x27;2015-05-01&#x27;</span>),<br>       (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;9&#x27;</span>, <span class="hljs-string">&#x27;èŒƒå‡‰å‡‰&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">45</span>, <span class="hljs-string">&#x27;123456789012345678&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2010-04-01&#x27;</span>),<br>       (<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;10&#x27;</span>, <span class="hljs-string">&#x27;é™ˆå‹è°…&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">53</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="hljs-string">&#x27;2011-01-01&#x27;</span>),<br>       (<span class="hljs-number">11</span>, <span class="hljs-string">&#x27;11&#x27;</span>, <span class="hljs-string">&#x27;å¼ å£«è¯š&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">55</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;æ±Ÿè‹&#x27;</span>, <span class="hljs-string">&#x27;2015-05-01&#x27;</span>),<br>       (<span class="hljs-number">12</span>, <span class="hljs-string">&#x27;12&#x27;</span>, <span class="hljs-string">&#x27;å¸¸é‡æ˜¥&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">32</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2004-02-01&#x27;</span>),<br>       (<span class="hljs-number">13</span>, <span class="hljs-string">&#x27;13&#x27;</span>, <span class="hljs-string">&#x27;å¼ ä¸‰ä¸°&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">88</span>, <span class="hljs-string">&#x27;123456789012345678&#x27;</span>, <span class="hljs-string">&#x27;æ±Ÿè‹&#x27;</span>, <span class="hljs-string">&#x27;2020-11-01&#x27;</span>),<br>       (<span class="hljs-number">14</span>, <span class="hljs-string">&#x27;14&#x27;</span>, <span class="hljs-string">&#x27;ç­ç»&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">65</span>, <span class="hljs-string">&#x27;123456789012345670&#x27;</span>, <span class="hljs-string">&#x27;è¥¿å®‰&#x27;</span>, <span class="hljs-string">&#x27;2019-05-01&#x27;</span>),<br>       (<span class="hljs-number">15</span>, <span class="hljs-string">&#x27;15&#x27;</span>, <span class="hljs-string">&#x27;èƒ¡é’ç‰›&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">70</span>, <span class="hljs-string">&#x27;12345678901234567X&#x27;</span>, <span class="hljs-string">&#x27;è¥¿å®‰&#x27;</span>, <span class="hljs-string">&#x27;2018-04-01&#x27;</span>),<br>       (<span class="hljs-number">16</span>, <span class="hljs-string">&#x27;16&#x27;</span>, <span class="hljs-string">&#x27;å‘¨èŠ·è‹¥&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-number">18</span>, <span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>, <span class="hljs-string">&#x27;2012-06-01&#x27;</span>);<br><br># æŸ¥è¯¢è¿”å›æŒ‡å®šå­—æ®µæ•°æ®<br><span class="hljs-keyword">select</span> name,workno,age <span class="hljs-keyword">from</span> emp;<br># æŸ¥è¯¢è¿”å›æ‰€æœ‰å­—æ®µ<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp;<br># æŸ¥è¯¢å·¥ä½œåœ°å€å¹¶èµ·åˆ«å<br><span class="hljs-keyword">select</span> workaddress <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;å·¥ä½œåœ°å€&#x27;</span> <span class="hljs-keyword">from</span> emp;<br><span class="hljs-keyword">select</span> workaddress <span class="hljs-string">&#x27;å·¥ä½œåœ°å€&#x27;</span> <span class="hljs-keyword">from</span> emp;<br># æŸ¥è¯¢å·¥ä½œåœ°å€å¹¶å»é‡<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> workaddress <span class="hljs-string">&#x27;å·¥ä½œåœ°å€&#x27;</span> <span class="hljs-keyword">from</span> emp;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>è½¬ä¹‰ï¼š / ä¹‹åçš„_ä¸ä½œä¸ºé€šé…ç¬¦</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> è¡¨å <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;/_å¼ ä¸‰&#x27;</span> <span class="hljs-keyword">ESCAPE</span> <span class="hljs-string">&#x27;/&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="æ¡ä»¶æŸ¥è¯¢">2. æ¡ä»¶æŸ¥è¯¢</h2><ol type="1"><li>è¯­æ³•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å <span class="hljs-keyword">WHERE</span> æ¡ä»¶åˆ—è¡¨;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æ¡ä»¶ï¼š</li></ol><table><thead><tr><th>æ¯”è¾ƒè¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt; æˆ– !=</td><td>ä¸ç­‰äº</td></tr><tr><td>BETWEEN â€¦ AND â€¦</td><td>åœ¨æŸä¸ªèŒƒå›´å†…ï¼ˆå«æœ€å°ã€æœ€å¤§å€¼ï¼‰</td></tr><tr><td>IN(â€¦)</td><td>åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>LIKE å ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…ï¼ˆ_åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œ%åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td>IS NULL</td><td>æ˜¯NULL</td></tr></tbody></table><table><thead><tr><th>é€»è¾‘è¿ç®—ç¬¦</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>AND æˆ– &amp;&amp;</td><td>å¹¶ä¸”ï¼ˆå¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼‰</td></tr><tr><td>OR æˆ– ||</td><td>æˆ–è€…ï¼ˆå¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹ï¼‰</td></tr><tr><td>NOT æˆ– !</td><td>éï¼Œä¸æ˜¯</td></tr></tbody></table><ol start="3" type="1"><li>ä¾‹å­ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- å¹´é¾„ç­‰äº30</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;<br><span class="hljs-comment">-- å¹´é¾„å°äº30</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">30</span>;<br><span class="hljs-comment">-- å°äºç­‰äº</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;=</span> <span class="hljs-number">30</span>;<br><span class="hljs-comment">-- æ²¡æœ‰èº«ä»½è¯</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> idcard <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">or</span> idcard <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-comment">-- æœ‰èº«ä»½è¯</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> idcard;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> idcard <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>;<br><span class="hljs-comment">-- ä¸ç­‰äº</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">!=</span> <span class="hljs-number">30</span>;<br><span class="hljs-comment">-- å¹´é¾„åœ¨20åˆ°30ä¹‹é—´</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-keyword">between</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> <span class="hljs-number">30</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&gt;=</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> age <span class="hljs-operator">&lt;=</span> <span class="hljs-number">30</span>;<br><span class="hljs-comment">-- ä¸‹é¢è¯­å¥ä¸æŠ¥é”™ï¼Œä½†æŸ¥ä¸åˆ°ä»»ä½•ä¿¡æ¯</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-keyword">between</span> <span class="hljs-number">30</span> <span class="hljs-keyword">and</span> <span class="hljs-number">20</span>;<br><span class="hljs-comment">-- æ€§åˆ«ä¸ºå¥³ä¸”å¹´é¾„å°äº30</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">30</span> <span class="hljs-keyword">and</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¥³&#x27;</span>;<br><span class="hljs-comment">-- å¹´é¾„ç­‰äº25æˆ–30æˆ–35</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">=</span> <span class="hljs-number">25</span> <span class="hljs-keyword">or</span> age <span class="hljs-operator">=</span> <span class="hljs-number">30</span> <span class="hljs-keyword">or</span> age <span class="hljs-operator">=</span> <span class="hljs-number">35</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-keyword">in</span> (<span class="hljs-number">25</span>, <span class="hljs-number">30</span>, <span class="hljs-number">35</span>);<br><span class="hljs-comment">-- å§“åä¸ºä¸¤ä¸ªå­—</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;__&#x27;</span>;<br><span class="hljs-comment">-- èº«ä»½è¯æœ€åä¸ºX</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> idcard <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%X&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="èšåˆæŸ¥è¯¢èšåˆå‡½æ•°">3. èšåˆæŸ¥è¯¢ï¼ˆèšåˆå‡½æ•°ï¼‰</h2><ol type="1"><li><p>å°†ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—ã€‚nullå€¼ä¸å‚ä¸èšåˆå‡½æ•°è®¡ç®—</p></li><li><p>å¸¸è§èšåˆå‡½æ•°ï¼š</p></li></ol><table><thead><tr><th>å‡½æ•°</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table><ol start="3" type="1"><li>è¯­æ³•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) <span class="hljs-keyword">FROM</span> è¡¨å;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>ä¾‹ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ç»Ÿè®¡ä¼ä¸šå‘˜å·¥æ•°é‡<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> emp;<br># ç»Ÿè®¡å¹³å‡å¹´é¾„<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(age) <span class="hljs-keyword">from</span> emp;<br># æœ€å¤§å¹´é¾„<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(age) <span class="hljs-keyword">from</span> emp;<br># æœ€å°å¹´é¾„<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(age) <span class="hljs-keyword">from</span> emp;<br># ç»Ÿè®¡è¥¿å®‰åœ°åŒºçš„å¹´é¾„ä¹‹å’Œ<br><span class="hljs-keyword">select</span> <span class="hljs-built_in">sum</span>(age) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> workaddress <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;è¥¿å®‰&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="åˆ†ç»„æŸ¥è¯¢">4. åˆ†ç»„æŸ¥è¯¢</h2><ol type="1"><li>è¯­æ³•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å [ <span class="hljs-keyword">WHERE</span> æ¡ä»¶ ] <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> åˆ†ç»„å­—æ®µå [ <span class="hljs-keyword">HAVING</span> åˆ†ç»„åçš„è¿‡æ»¤æ¡ä»¶ ];<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>where å’Œ having çš„åŒºåˆ«ï¼š<ol type="1"><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ä¸å‚ä¸åˆ†ç»„ï¼›havingæ˜¯åˆ†ç»„åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ã€‚</li></ol></li></ol><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡ï¼ˆåªæ˜¾ç¤ºåˆ†ç»„æ•°é‡ï¼Œä¸æ˜¾ç¤ºå“ªä¸ªæ˜¯ç”·å“ªä¸ªæ˜¯å¥³ï¼‰</span><br><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> gender;<br><span class="hljs-comment">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§æ•°é‡</span><br><span class="hljs-keyword">select</span> gender, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> gender;<br><span class="hljs-comment">-- æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡å¹´é¾„</span><br><span class="hljs-keyword">select</span> gender, <span class="hljs-built_in">avg</span>(age) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> gender;<br><span class="hljs-comment">-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„</span><br><span class="hljs-keyword">select</span> workaddress, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">45</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> workaddress;<br><span class="hljs-comment">-- å¹´é¾„å°äº45ï¼Œå¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„ï¼Œè·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº3çš„å·¥ä½œåœ°å€</span><br><span class="hljs-keyword">select</span> workaddress, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) address_count <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">45</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> workaddress <span class="hljs-keyword">having</span> address_count <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3</span>;<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ul><li>æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having</li><li>åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</li></ul><h2 id="æ’åºæŸ¥è¯¢">5. æ’åºæŸ¥è¯¢</h2><ol type="1"><li>è¯­æ³•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> å­—æ®µ<span class="hljs-number">1</span> æ’åºæ–¹å¼<span class="hljs-number">1</span>, å­—æ®µ<span class="hljs-number">2</span> æ’åºæ–¹å¼<span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æ’åºæ–¹å¼ï¼š</li></ol><ul><li>ASC: å‡åºï¼ˆé»˜è®¤ï¼‰</li><li>DESC: é™åº</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ ¹æ®å¹´é¾„å‡åºæ’åº</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> age <span class="hljs-keyword">ASC</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> age;<br><span class="hljs-comment">-- ä¸¤å­—æ®µæ’åºï¼Œæ ¹æ®å¹´é¾„å‡åºæ’åºï¼Œå…¥èŒæ—¶é—´é™åºæ’åº</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> emp <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> age <span class="hljs-keyword">ASC</span>, entrydate <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹-1">æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº</p><h2 id="åˆ†é¡µæŸ¥è¯¢">6. åˆ†é¡µæŸ¥è¯¢</h2><ol type="1"><li>è¯­æ³•ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> å­—æ®µåˆ—è¡¨ <span class="hljs-keyword">FROM</span> è¡¨å LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•°;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ä¾‹å­ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®ï¼Œå±•ç¤º10æ¡</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> emp LIMIT <span class="hljs-number">0</span>, <span class="hljs-number">10</span>;<br><span class="hljs-comment">-- æŸ¥è¯¢ç¬¬äºŒé¡µ</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> emp LIMIT <span class="hljs-number">10</span>, <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹-2">æ³¨æ„äº‹é¡¹</h3><ul><li>èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ï¼Œèµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰ * æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</li><li>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒæ•°æ®åº“æœ‰ä¸åŒå®ç°ï¼ŒMySQLæ˜¯LIMIT</li><li>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ LIMIT 10</li></ul><h2 id="dqlæ‰§è¡Œé¡ºåº">7. DQLæ‰§è¡Œé¡ºåº</h2><ul><li>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt;LIMIT</li></ul><h2 id="ç»ƒä¹ ">8. ç»ƒä¹ </h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"># æŸ¥è¯¢å¹´é¾„ä¸º<span class="hljs-number">20</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>å²çš„å¥³æ€§å‘˜å·¥ä¿¡æ¯ã€‚<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¥³&#x27;</span> <span class="hljs-keyword">and</span> age <span class="hljs-keyword">in</span> (<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>);<br># æŸ¥è¯¢æ€§åˆ«ä¸ºç”·ï¼Œå¹¶ä¸”å¹´é¾„åœ¨<span class="hljs-number">20</span><span class="hljs-number">-40</span>å²ï¼ˆå«ï¼‰ä»¥å†…çš„å§“åä¸ºä¸‰ä¸ªå­—çš„å‘˜å·¥ã€‚<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç”·&#x27;</span> <span class="hljs-keyword">and</span> age <span class="hljs-keyword">between</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> <span class="hljs-number">40</span> <span class="hljs-keyword">and</span> name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;___&#x27;</span>;<br># ç»Ÿè®¡å‘˜å·¥è¡¨ä¸­ï¼Œå¹´é¾„å°äº<span class="hljs-number">60</span>å²çš„ï¼Œç”·æ€§å‘˜å·¥å’Œå¥³æ€§å‘˜å·¥çš„äººæ•°ã€‚<br><span class="hljs-keyword">select</span> gender, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> gender;<br># æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å°äºç­‰äº<span class="hljs-number">35</span>å²å‘˜å·¥çš„å§“åå’Œå¹´é¾„ï¼Œå¹¶å¯¹æŸ¥è¯¢ç»“æœæŒ‰å¹´é¾„å‡åºæ’åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰å…¥èŒæ—¶é—´é™åºæ’åºã€‚<br><span class="hljs-keyword">select</span> name, age <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> age <span class="hljs-operator">&lt;=</span> <span class="hljs-number">35</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> age <span class="hljs-keyword">asc</span> , entrydate <span class="hljs-keyword">desc</span>;<br># æŸ¥è¯¢æ€§åˆ«ä¸ºç”·ï¼Œä¸”å¹´é¾„åœ¨<span class="hljs-number">20</span><span class="hljs-number">-40</span>å²ï¼ˆå«ï¼‰ä»¥å†…çš„å‰<span class="hljs-number">5</span>ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå¯¹æŸ¥è¯¢çš„ç»“æœæŒ‰å¹´é¾„å‡åºæ’åºï¼Œå¹´é¾„ç›¸åŒæŒ‰å…¥èŒæ—¶é—´å‡åºæ’åºã€‚<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> gender <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ç”·&#x27;</span> <span class="hljs-keyword">and</span> age <span class="hljs-keyword">between</span> <span class="hljs-number">20</span> <span class="hljs-keyword">and</span> <span class="hljs-number">40</span> <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> age <span class="hljs-keyword">asc</span>, entrydate <span class="hljs-keyword">asc</span> limit <span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.2 DML(æ•°æ®æ“ä½œè¯­è¨€)</title>
    <link href="/2024/11/26/MySQL/1-2-DML(%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80)/"/>
    <url>/2024/11/26/MySQL/1-2-DML(%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80)/</url>
    
    <content type="html"><![CDATA[<h1 id="dmlæ•°æ®æ“ä½œè¯­è¨€">1.2 DMLï¼ˆæ•°æ®æ“ä½œè¯­è¨€ï¼‰</h1><h2 id="æ·»åŠ æ•°æ®">1. æ·»åŠ æ•°æ®</h2><ol type="1"><li>æŒ‡å®šå­—æ®µï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> è¡¨å (å­—æ®µå<span class="hljs-number">1</span>, å­—æ®µå<span class="hljs-number">2</span>, ...) <span class="hljs-keyword">VALUES</span> (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...);<br><br># eg:<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> employee (id, workno, name, gender, age, idcard, entrydate) <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;Itcast&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;123456789712345678&#x27;</span>, <span class="hljs-string">&#x27;2000-01-01&#x27;</span>);<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>å…¨éƒ¨å­—æ®µï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> è¡¨å <span class="hljs-keyword">VALUES</span> (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...);<br># eg:<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> employee <span class="hljs-keyword">values</span> (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;wj&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;123456789713645678&#x27;</span>, <span class="hljs-string">&#x27;2001-01-01&#x27;</span>);<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æ‰¹é‡æ·»åŠ æ•°æ®ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> è¡¨å (å­—æ®µå<span class="hljs-number">1</span>, å­—æ®µå<span class="hljs-number">2</span>, ...) <span class="hljs-keyword">VALUES</span> (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...), (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...), (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> è¡¨å <span class="hljs-keyword">VALUES</span> (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...), (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...), (å€¼<span class="hljs-number">1</span>, å€¼<span class="hljs-number">2</span>, ...);<br><br># eg:<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> employee <span class="hljs-keyword">values</span> (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;wj&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;123456789713645678&#x27;</span>, <span class="hljs-string">&#x27;2001-01-01&#x27;</span>), (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;zj&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;123456789713645678&#x27;</span>, <span class="hljs-string">&#x27;2001-01-01&#x27;</span>), (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;zw&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;123456789713645678&#x27;</span>, <span class="hljs-string">&#x27;2001-01-01&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ul><li>å­—ç¬¦ä¸²å’Œæ—¥æœŸç±»å‹æ•°æ®åº”è¯¥åŒ…å«åœ¨å¼•å·ä¸­</li><li>æ’å…¥çš„æ•°æ®å¤§å°åº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†…</li></ul><h2 id="æ›´æ–°å’Œåˆ é™¤æ•°æ®">2. æ›´æ–°å’Œåˆ é™¤æ•°æ®</h2><ol type="1"><li>ä¿®æ”¹æ•°æ®ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> è¡¨å <span class="hljs-keyword">SET</span> å­—æ®µå<span class="hljs-number">1</span> <span class="hljs-operator">=</span> å€¼<span class="hljs-number">1</span>, å­—æ®µå<span class="hljs-number">2</span> <span class="hljs-operator">=</span> å€¼<span class="hljs-number">2</span>, ... [ <span class="hljs-keyword">WHERE</span> æ¡ä»¶ ];<br># ä¾‹ï¼š<br><span class="hljs-keyword">UPDATE</span> employee <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Jack&#x27;</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>åˆ é™¤æ•°æ®ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> è¡¨å [ <span class="hljs-keyword">WHERE</span> æ¡ä»¶ ];<br># eg:<br><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> employee <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºç¡€ç¯‡ 1.é€šç”¨è¯­æ³•åŠåˆ†ç±» 1.1 DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</title>
    <link href="/2024/11/25/MySQL/1-1-DDL%EF%BC%88%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%EF%BC%89/"/>
    <url>/2024/11/25/MySQL/1-1-DDL%EF%BC%88%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h1 id="ddlæ•°æ®å®šä¹‰è¯­è¨€">1.1 DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</h1><h2 id="mysql">1. MySQL</h2><h3 id="å…³ç³»å‹æ•°æ®åº“rdbms">1.1 å…³ç³»å‹æ•°æ®åº“(RDBMS)</h3><ul><li>æ¦‚å¿µï¼š<ul><li>å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ ç›¸äº’è¿æ¥çš„äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“ã€‚</li></ul></li><li>ç‰¹ç‚¹ï¼š<ul><li>ä½¿ç”¨è¡¨å­˜å‚¨æ•°æ®ï¼Œæ ¼å¼ç»Ÿä¸€ï¼Œä¾¿äºç»´æŠ¤</li><li>ä½¿ç”¨SQLè¯­è¨€æ“ä½œï¼Œæ ‡å‡†ç»Ÿä¸€ï¼Œä½¿ç”¨æ–¹ä¾¿</li></ul></li></ul><h3 id="é€šç”¨è¯­æ³•åŠåˆ†ç±»">1.2 é€šç”¨è¯­æ³•åŠåˆ†ç±»</h3><ul><li>DDL: æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ã€è¡¨ã€å­—æ®µï¼‰</li><li>DML: æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹</li><li>DQL: æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•</li><li>DCL: æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„æ§åˆ¶æƒé™</li></ul><h2 id="ddlæ•°æ®å®šä¹‰è¯­è¨€-1">2. DDLï¼ˆæ•°æ®å®šä¹‰è¯­è¨€ï¼‰</h2><h3 id="æ•°æ®åº“æ“ä½œ">1.1 æ•°æ®åº“æ“ä½œ</h3><ol type="1"><li>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> DATABASES;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATABASE();<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>åˆ›å»ºæ•°æ®åº“ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE [ IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> ] æ•°æ®åº“å [ <span class="hljs-keyword">DEFAULT</span> CHARSET å­—ç¬¦é›†] [<span class="hljs-keyword">COLLATE</span> æ’åºè§„åˆ™ ];<br># eg:<br><span class="hljs-keyword">create</span> database if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> itcast;<br><span class="hljs-keyword">create</span> database itheima <span class="hljs-keyword">default</span> charset utf8mb4;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>åˆ é™¤æ•°æ®åº“ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> DATABASE [ IF <span class="hljs-keyword">EXISTS</span> ] æ•°æ®åº“å<br># eg:<br><span class="hljs-keyword">drop</span> database if <span class="hljs-keyword">exists</span> test;<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>ä½¿ç”¨æ•°æ®åº“ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE æ•°æ®åº“å;<br></code></pre></td></tr></table></figure><h4 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h4><ul><li>UTF8å­—ç¬¦é›†é•¿åº¦ä¸º3å­—èŠ‚ï¼Œæœ‰äº›ç¬¦å·å 4å­—èŠ‚ï¼Œæ‰€ä»¥æ¨èç”¨utf8mb4å­—ç¬¦é›†</li></ul><h3 id="è¡¨æ“ä½œ">1.2 è¡¨æ“ä½œ</h3><ol type="1"><li>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> TABLES;<br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>æŸ¥è¯¢è¡¨ç»“æ„ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DESC</span> è¡¨å;<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> è¡¨å;<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>åˆ›å»ºè¡¨ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> è¡¨å(<br>å­—æ®µ<span class="hljs-number">1</span> å­—æ®µ<span class="hljs-number">1</span>ç±»å‹ [COMMENT å­—æ®µ<span class="hljs-number">1</span>æ³¨é‡Š],<br>å­—æ®µ<span class="hljs-number">2</span> å­—æ®µ<span class="hljs-number">2</span>ç±»å‹ [COMMENT å­—æ®µ<span class="hljs-number">2</span>æ³¨é‡Š],<br>å­—æ®µ<span class="hljs-number">3</span> å­—æ®µ<span class="hljs-number">3</span>ç±»å‹ [COMMENT å­—æ®µ<span class="hljs-number">3</span>æ³¨é‡Š],<br>...<br>å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š]<br>)[ COMMENT è¡¨æ³¨é‡Š ];<br><br># eg:<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tb_user(<br>    id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç¼–å·&#x27;</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    age <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    gender <span class="hljs-type">varchar</span>(<span class="hljs-number">1</span>) comment <span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span><br>) comment <span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp(<br>id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç¼–å·&#x27;</span>,<br>    workno <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å·¥å·&#x27;</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br>    gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) comment <span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span>,<br>    age tinyint unsigned comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br>    idcard <span class="hljs-type">char</span>(<span class="hljs-number">18</span>) comment <span class="hljs-string">&#x27;èº«ä»½è¯å·&#x27;</span>,<br>    entrydate <span class="hljs-type">date</span> comment <span class="hljs-string">&#x27;å…¥èŒæ—¶é—´&#x27;</span><br>) comment <span class="hljs-string">&#x27;å‘˜å·¥è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><p>â€‹ <strong>æœ€åä¸€ä¸ªå­—æ®µåé¢æ²¡æœ‰é€—å·</strong></p><ol start="5" type="1"><li>æ·»åŠ å­—æ®µï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å <span class="hljs-keyword">ADD</span> å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];<br># ä¾‹ï¼š<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emp <span class="hljs-keyword">ADD</span> nickname <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">&#x27;æ˜µç§°&#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>ä¿®æ”¹æ•°æ®ç±»å‹ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹(é•¿åº¦);<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT æ³¨é‡Š] [çº¦æŸ];<br># ä¾‹ï¼šå°†empè¡¨çš„nicknameå­—æ®µä¿®æ”¹ä¸ºusernameï¼Œç±»å‹ä¸º<span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>)<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emp CHANGE nickname username <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) COMMENT <span class="hljs-string">&#x27;æ˜µç§°&#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>åˆ é™¤å­—æ®µï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å <span class="hljs-keyword">DROP</span> å­—æ®µå;<br># eg:<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp <span class="hljs-keyword">drop</span> username;<br></code></pre></td></tr></table></figure><ol start="8" type="1"><li>ä¿®æ”¹è¡¨åï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> è¡¨å RENAME <span class="hljs-keyword">TO</span> æ–°è¡¨å<br># eg:<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp rename <span class="hljs-keyword">to</span> employee;<br></code></pre></td></tr></table></figure><ol start="9" type="1"><li>åˆ é™¤è¡¨ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> [IF <span class="hljs-keyword">EXISTS</span>] è¡¨å;<br></code></pre></td></tr></table></figure><ol start="10" type="1"><li>åˆ é™¤è¡¨ï¼Œå¹¶é‡æ–°åˆ›å»ºè¯¥è¡¨ï¼š</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> è¡¨å;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>0.1 MySQLå¸¸è§é—®é¢˜ï¼ˆWin11ï¼‰</title>
    <link href="/2024/11/25/MySQL/0-1-MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <url>/2024/11/25/MySQL/0-1-MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="mysqlå¸¸è§é—®é¢˜win11">0.1 MySQLå¸¸è§é—®é¢˜ï¼ˆWin11ï¼‰</h1><h2 id="å¯åŠ¨åœæ­¢mysqlæœåŠ¡">1. å¯åŠ¨/åœæ­¢mysqlæœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">net stop mysql80 <span class="hljs-comment">#åœæ­¢æœåŠ¡</span><br>net start mysql80 <span class="hljs-comment">#å¯åŠ¨æœåŠ¡</span><br></code></pre></td></tr></table></figure><h2 id="mysql80å¿˜è®°å¯†ç ">2. MySQL80å¿˜è®°å¯†ç </h2><ol type="1"><li>å¯åŠ¨å‘½ä»¤è¡Œï¼ˆç®¡ç†å‘˜ï¼‰<ol type="1"><li>win+R æ‰“å¼€è¿è¡Œ</li><li>è¾“å…¥cmd</li><li>æŒ‰ä¸‹ctrl + shift + enter ç®¡ç†å‘˜æƒé™å¯åŠ¨</li></ol></li><li>åœæ­¢æ•°æ®åº“æœåŠ¡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">net stop mysql80 <span class="hljs-comment">#åœæ­¢æœåŠ¡</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>è¶Šè¿‡å¯†ç è®¤è¯(å¦‚æœæŠ¥é”™è½¬åˆ°æ­¥éª¤7)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqld --console --skip-grant-tables --shared-memory<br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>ç®¡ç†å‘˜æƒé™æ‰“å¼€å¦ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œè¾“å…¥</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></td></tr></table></figure><p>æç¤ºè¾“å…¥å¯†ç æ—¶ç›´æ¥å›è½¦å³å¯ç™»å…¥</p><ol start="5" type="1"><li>è®¾ç½®æ–°å¯†ç </li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> mysql.user <span class="hljs-keyword">set</span> authentication_string<span class="hljs-operator">=</span><span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;root&#x27;</span>;<br>flush privileges;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°'root'@'localhost'ï¼Œè‹¥ä¿®æ”¹è¿‡æ”¯æŒäº†è¿œç¨‹è¿æ¥ï¼Œåˆ™åº”è¯¥æ˜¯'root'@'%'ï¼Œå…·ä½“å¯é€šè¿‡userè¡¨æŸ¥çœ‹:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">user</span>,host <span class="hljs-keyword">from</span> mysql.user <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;root&#x27;</span>;<br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>å…³é—­ç»ˆç«¯ï¼Œæ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå¯åŠ¨æœåŠ¡å¹¶è¾“å…¥å¯†ç ç™»å½•</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">net start mysql<br>mysql -u root -p<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>å‘½ä»¤ä»£ç æ— æ•ˆï¼Œä¸¤ç§è§£å†³åŠæ³•</li></ol><p><img src="/2024/11/25/MySQL/0-1-MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/image-20241126105225405.png"></p><ul><li><p>ä¸ä¼šä¿ç•™æ•°æ®åº“çš„æ•°æ®</p><ul><li>åœ¨MySQLå®‰è£…ç›®å½•ä¸‹æ²¡æœ‰dataæ–‡ä»¶å¤¹å’Œmy.iniæ–‡ä»¶</li><li>å…ˆåˆ é™¤mysqlæœåŠ¡</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sc delete MySql80<br></code></pre></td></tr></table></figure><ul><li><p>åˆ é™¤å®Œæˆä¹‹åï¼ŒWin+Rï¼Œè¾“å…¥services.mscï¼Œæ‰‹åŠ¨æ£€æŸ¥mysql80æœåŠ¡æœ‰æ²¡æœ‰æ­£å¸¸åˆ é™¤ï¼Œå¦‚æœè¿˜åœ¨è¿è¡Œï¼Œä¸€å®šè¦å…ˆåœæ­¢</p></li><li><p>æ–°å»ºmy.inié…ç½®æ–‡ä»¶</p><ul><li>ç®€å•ç‰ˆ</li></ul><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">[mysql]<br>default-character-set=utf8<br>[mysqld]<br>default-storage-engine=INNODB<br>basedir=C:/Program Files/MySQL/MySQL Server 8.0 <br>datadir=C:/Program Files/MySQL/MySQL Server 8.0/data<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœä¸è¡Œé‚£å°±å¤æ‚ç‰ˆ</li></ul><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs txt"># For advice on how to change settings please see<br># http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html<br># *** DO NOT EDIT THIS FILE. It&#x27;s a template which will be copied to the<br># *** default location during install, and will be replaced if you<br># *** upgrade to a newer version of MySQL.<br>[client]<br>default-character-set = utf8mb4<br>[mysql]<br>default-character-set = utf8mb4<br>[mysqld]<br>character-set-client-handshake = FALSE<br>character-set-server = utf8mb4<br>collation-server = utf8mb4_bin<br>init_connect=&#x27;SET NAMES utf8mb4&#x27;<br># Remove leading # and set to the amount of RAM for the most important data<br># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.<br>innodb_buffer_pool_size = 128M<br># Remove leading # to turn on a very important data integrity option: logging<br># changes to the binary log between backups.<br># log_bin<br># These are commonly set, remove the # and set as required.<br>basedir = C:\Program Files\MySQL\MySQL Server 8.0 <br>datadir =  C:\Program Files\MySQL\MySQL Server 8.0\data<br>port = 3306<br># server_id = .....<br># Remove leading # to set options mainly useful for reporting servers.<br># The server defaults are faster for transactions and fast SELECTs.<br># Adjust sizes as needed, experiment to find the optimal values.<br>join_buffer_size = 128M<br>sort_buffer_size = 16M<br>read_rnd_buffer_size = 16M <br>sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES<br></code></pre></td></tr></table></figure></li><li><p>å…¶ä¸­basedirå’Œdatabirè®°å¾—æ”¹æˆè‡ªå·±å¯¹åº”çš„mysqlç›®å½•</p></li><li><p>åœ¨ç»ˆç«¯æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqld --initialize-insecure --user=mysql<br></code></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆdataæ–‡ä»¶å¤¹</p></li><li><p>å†è¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqld --install <span class="hljs-string">&quot;MySql80&quot;</span> --defaults-file=<span class="hljs-string">&quot;C:\Program Files\MySQL\MySQL Server 8.0\my.ini&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>æœ€åå¯åŠ¨MySQL80æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">net start mysql80<br></code></pre></td></tr></table></figure></li><li><p>ç™»å½•mysqlï¼Œä¸éœ€è¦å¯†ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></td></tr></table></figure></li><li><p>è¾“å…¥æ›´æ”¹å¯†ç å‘½ä»¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;123456&#x27;</span>;<br></code></pre></td></tr></table></figure></li><li><p>å°±ç»“æŸå•¦</p></li></ul></li><li><p>ä¿ç•™æ•°æ®åº“çš„æ•°æ®</p><ul><li><p>æ¦‚å¿µäº†è§£</p><ul><li>Data/dataç›®å½•ï¼šå­˜æ”¾ç€åˆ›å»ºçš„æ•°æ®åº“</li><li>my.iniï¼šä¸€äº›ç›¸å…³é…ç½®</li><li>services.mscï¼šå¯ä»¥è°ƒå‡ºæœåŠ¡ç¨‹åº</li><li>net stop æœåŠ¡åï¼šå¯ä»¥å…³é—­æœåŠ¡</li><li>net start æœåŠ¡åï¼šå¯ä»¥å¯åŠ¨æœåŠ¡</li><li>-defaults-fileï¼šæŒ‡å®šæœåŠ¡é…ç½®</li><li>â€“console --skip-grant-tables--shared-memoryï¼šè·³è¿‡å¯†ç éªŒè¯çš„å…³é”®</li></ul></li><li><p>æˆ‘çš„dataä¸åœ¨å®‰è£…ç›®å½•ï¼Œè€Œæ˜¯åœ¨C:Server 8.0ï¼š</p><p><img src="/2024/11/25/MySQL/0-1-MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/image-20241126115855599.png"></p></li><li><p>æ‰“å¼€my.iniå¹¶æ’å…¥ï¼šskip-grant-tables;</p><p><img src="/2024/11/25/MySQL/0-1-MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/58d9569cfd673bf97b79d1f17289531e.png"></p></li><li><p>è¿è¡Œï¼šservices.msc æ‰“å¼€æœåŠ¡åï¼Œåœæ­¢mysqlæœåŠ¡</p></li><li><p>ç®¡ç†å‘˜æƒé™æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysqld --defaults-file=â€œC:\ProgramData\MySQL\MySQL Server 8.0\my.iniâ€ --console --skip-grant-tables --shared-memory<br><span class="hljs-comment"># è§£é‡Š</span><br><span class="hljs-comment">#mysqld --defaults-file=â€œè¿™é‡Œæ˜¯ä½ çš„my.inié…ç½®è·¯å¾„â€ --console --skip-grant-tables --shared-memory</span><br></code></pre></td></tr></table></figure></li><li><p>æ‰“å¼€æ–°çš„å‘½ä»¤æç¤ºç¬¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mysql -u root -p<br></code></pre></td></tr></table></figure><p>å›è½¦è¿›å…¥root</p></li><li><p>ä¿®æ”¹å¯†ç è¾“å…¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> â€˜rootâ€™@â€˜localhostâ€™ IDENTIFIED <span class="hljs-keyword">BY</span> â€˜<span class="hljs-number">123456</span>â€™;<br></code></pre></td></tr></table></figure><p>è‹¥æ²¡æœ‰å‡ºç°Query OKï¼Œåˆ™æ‰§è¡Œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">flush privileges;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> â€˜rootâ€™@â€˜localhostâ€™ IDENTIFIED <span class="hljs-keyword">BY</span> â€˜<span class="hljs-number">123456</span>â€™;<br></code></pre></td></tr></table></figure></li><li><p>æœ€åä¿®æ”¹å®Œæ¯•æ³¨ç”¨#é‡Šæ‰my.iniè¿™è¡Œè¯­å¥</p><p><img src="/2024/11/25/MySQL/0-1-MySQL%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/e6e7751171889e633e30dcd0a3e95a30.png"></p></li><li><p>å…³é—­æ‰€æœ‰ç•Œé¢ï¼Œå¯åŠ¨mysqlï¼Œå°±å¯ä»¥æ­£å¸¸è¾“å…¥å¯†ç ç™»å½•äº†</p></li></ul></li></ul><p>â€‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ‰€æœ‰çš„å»ºè¡¨ä»£ç å¦‚ä¸‹ï¼š</span><br><br><span class="hljs-number">1</span>ã€çº¦æŸä»£ç ï¼š<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">user</span>(<br><br>id <span class="hljs-type">int</span>  KEY auto_increment COMMENT <span class="hljs-string">&#x27;ä¸»é”®&#x27;</span>,<br><br>name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">unique</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br><br>age <span class="hljs-type">int</span> <span class="hljs-keyword">check</span>( age <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-operator">&amp;&amp;</span> age <span class="hljs-operator">&lt;=</span> <span class="hljs-number">120</span>) comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br><br>status <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;1&#x27;</span> comment <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>,<br><br> gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) comment <span class="hljs-string">&#x27;æ€§åˆ«&#x27;</span><br><br><br><br>) comment <span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">user</span>(name,age,status,gender) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;TOM1&#x27;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>),(<span class="hljs-string">&#x27;TOM2&#x27;</span>,<span class="hljs-number">25</span>,<span class="hljs-string">&#x27;0&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>); <br><br><br><br><span class="hljs-number">2</span>ã€å¤–é”®çº¦æŸ:<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dept(<br><br>id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;ID&#x27;</span>  key,<br><br>name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span><br><br>)comment <span class="hljs-string">&#x27;éƒ¨é—¨è¡¨&#x27;</span>;<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> dept(id,name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;å¸‚åœºéƒ¨&#x27;</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>),(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;é”€å”®éƒ¨&#x27;</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;æ€»ç»åŠ&#x27;</span>);<br><br><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp<br><br>(<br><br>id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;ID&#x27;</span>  key,<br><br>name <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br><br>age <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br><br>job <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) comment <span class="hljs-string">&#x27;èŒä½&#x27;</span>,<br><br>salary <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;è–ªèµ„&#x27;</span>,<br><br>entrydate <span class="hljs-type">date</span> comment <span class="hljs-string">&#x27;å…¥èŒæ—¶é—´&#x27;</span>,<br><br>managerid <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;ç›´è´¨é¢†å¯¼ID&#x27;</span>,<br><br>dept_id <span class="hljs-type">int</span> comment <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span><br><br>) comment <span class="hljs-string">&#x27;å‘˜å·¥è¡¨1&#x27;</span> ;<br><br><br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> emp(id,name,age, job, salary, entrydate, managerid, dept_id) <span class="hljs-keyword">VALUES</span><br><br>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;é‡‘åº¸&#x27;</span>,<span class="hljs-number">66</span>,<span class="hljs-string">&#x27;æ€»è£&#x27;</span>,<span class="hljs-number">20000</span>,<span class="hljs-string">&#x27;2000-01-01&#x27;</span>,<span class="hljs-keyword">null</span>,<span class="hljs-number">5</span>),<br><br>(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;å¼ æ— å¿Œ&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;é¡¹ç›®ç»ç†&#x27;</span>, <span class="hljs-number">12500</span>, <span class="hljs-string">&#x27;2005-12-05&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),<br><br>(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;æ¨é€&#x27;</span>,<span class="hljs-number">33</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">8400</span>,<span class="hljs-string">&#x27;2000-11-03&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br><br>(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;ä¹¦ä¸€ç¬‘&#x27;</span>,<span class="hljs-number">48</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">11000</span>,<span class="hljs-string">&#x27;2002-02-05&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),<br><br>(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;å¸¸é‡æ˜¥&#x27;</span>,<span class="hljs-number">43</span>,<span class="hljs-string">&#x27;å¼€å‘&#x27;</span>,<span class="hljs-number">10500</span>,<span class="hljs-string">&#x27;2004-09-07&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>),<br><br>(<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;å°æ˜­&#x27;</span>,<span class="hljs-number">19</span>,<span class="hljs-string">&#x27;ç¨‹åºå‘˜é¼“åŠ±å¸ˆ&#x27;</span>,<span class="hljs-number">6600</span>,<span class="hljs-string">&#x27;2004-10-12&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>);<br><br><br><br>P30:<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">table</span> score<br><br>(<br><br>  id   <span class="hljs-type">INT</span> COMMENT <span class="hljs-string">&#x27;ç¼–å·&#x27;</span>,<br><br>  name  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br><br>  math  <span class="hljs-type">INT</span> COMMENT <span class="hljs-string">&#x27;æ•°å­¦&#x27;</span>,<br><br>  english <span class="hljs-type">INT</span> COMMENT <span class="hljs-string">&#x27;è‹±è¯­&#x27;</span>,<br><br>  chinese <span class="hljs-type">INT</span> COMMENT <span class="hljs-string">&#x27;è¯­æ–‡&#x27;</span><br><br>) COMMENT <span class="hljs-string">&#x27;å­¦å‘˜æˆç»©è¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> score<br><br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-number">67</span>, <span class="hljs-number">88</span>, <span class="hljs-number">95</span>),<br><br>    (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Rose&#x27;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">66</span>, <span class="hljs-number">90</span>),<br><br>    (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;Jack&#x27;</span>, <span class="hljs-number">56</span>, <span class="hljs-number">98</span>, <span class="hljs-number">76</span>);<br><br><br><br>P37<span class="hljs-operator">-</span>å¤šè¡¨æŸ¥è¯¢ï¼š<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> student(<br><br>   id <span class="hljs-type">int</span> auto_increment  key comment <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br><br>   name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br><br>   <span class="hljs-keyword">no</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;å­¦å·&#x27;</span><br><br>)comment <span class="hljs-string">&#x27; å­¦ç”Ÿè¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> student <span class="hljs-keyword">values</span> (<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;é»›ç»®ä¸&#x27;</span>,<span class="hljs-string">&#x27;2000100101&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;è°¢é€Š&#x27;</span>,<span class="hljs-string">&#x27;2000100102&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;æ®·å¤©æ­£&#x27;</span>,<span class="hljs-string">&#x27;2000100103&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;éŸ¦ä¸€ç¬‘&#x27;</span>,<span class="hljs-string">&#x27;2000100104&#x27;</span>);<br><br><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> course(<br><br>   id <span class="hljs-type">int</span> auto_increment  key comment <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br><br>   name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) comment <span class="hljs-string">&#x27;è¯¾ç¨‹åç§°&#x27;</span><br><br>)comment <span class="hljs-string">&#x27;è¯¾ç¨‹è¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> course <span class="hljs-keyword">values</span> (<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;Java&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;PHP&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;Mysql&#x27;</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;Hadoop&#x27;</span>);<br><br><br><br><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> student_course(<br><br>   id <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">&#x27;ä¸»é”®&#x27;</span>  key,<br><br>   studentid <span class="hljs-type">int</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;å­¦ç”ŸID&#x27;</span>,<br><br>   courseid <span class="hljs-type">int</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">&#x27;è¯¾ç¨‹ID&#x27;</span>,<br><br>   <span class="hljs-keyword">constraint</span> fk_courseid <span class="hljs-keyword">foreign</span> key (courseid) <span class="hljs-keyword">references</span> course(id),<br><br>   <span class="hljs-keyword">constraint</span> fk_studentid <span class="hljs-keyword">foreign</span> key (studentid) <span class="hljs-keyword">references</span> student(id)<br><br>)comment <span class="hljs-string">&#x27;å­¦ç”Ÿè¯¾ç¨‹ä¸­é—´è¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> student_course <span class="hljs-keyword">values</span> (<span class="hljs-keyword">null</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),(<span class="hljs-keyword">null</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>);<br><br><br><br>P37:ä¸€å¯¹ä¸€<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tb_user(<br><br>  id <span class="hljs-type">int</span> auto_increment  key COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br><br>  name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>) COMMENT <span class="hljs-string">&#x27;å§“å&#x27;</span>,<br><br>  age <span class="hljs-type">int</span> COMMENT <span class="hljs-string">&#x27;å¹´é¾„&#x27;</span>,<br><br>  gender <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) COMMENT <span class="hljs-string">&#x27;1:ç”·ï¼Œ 2ï¼šå¥³&#x27;</span>,<br><br>  phone <span class="hljs-type">char</span>(<span class="hljs-number">11</span>) COMMENT <span class="hljs-string">&#x27;æ‰‹æœºå·&#x27;</span><br><br>)comment <span class="hljs-string">&#x27;ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> tb_user_edu(<br><br>  id <span class="hljs-type">int</span> auto_increment <span class="hljs-keyword">primary</span> key COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br><br>  degree <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">&#x27;å­¦å†&#x27;</span>,<br><br>  major <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">&#x27;ä¸“ä¸š&#x27;</span>,<br><br>  primaryschool <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">&#x27;å°å­¦&#x27;</span>,<br><br>  middleschool <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">&#x27;ä¸­å­¦&#x27;</span>,<br><br>  university <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) COMMENT <span class="hljs-string">&#x27;å¤§å­¦&#x27;</span>,<br><br>  userid <span class="hljs-type">int</span> <span class="hljs-keyword">unique</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br><br>  <span class="hljs-keyword">constraint</span> fk_userid <span class="hljs-keyword">foreign</span> key (userid) <span class="hljs-keyword">references</span> tb_user(id)<br><br>)comment <span class="hljs-string">&#x27;ç”¨æˆ·æ•™è‚²ä¿¡æ¯è¡¨&#x27;</span>;<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tb_user(id,name,age,gender,phone) <span class="hljs-keyword">values</span><br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;é»„æ¸¤&#x27;</span>,<span class="hljs-number">45</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;18800001111&#x27;</span>),<br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;å†°å†°&#x27;</span>,<span class="hljs-number">35</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;18800002222&#x27;</span>),<br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;ç äº‘&#x27;</span>,<span class="hljs-number">55</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;18800008888&#x27;</span> ),<br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;æå½¦å®&#x27;</span>,<span class="hljs-number">50</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;18800009999&#x27;</span>);<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> tb_user_edu(id, degree, major, primaryschool, middleschool, university, userid) <span class="hljs-keyword">values</span><br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;æœ¬ç§‘&#x27;</span>,<span class="hljs-string">&#x27;èˆè¹ˆ&#x27;</span>,<span class="hljs-string">&#x27;é™å®‰åŒºç¬¬ä¸€å°å­¦&#x27;</span>,<span class="hljs-string">&#x27;é™å®‰åŒºç¬¬ä¸€ä¸­å­¦&#x27;</span>,<span class="hljs-string">&#x27;åŒ—äº¬èˆè¹ˆå­¦é™¢&#x27;</span>,<span class="hljs-number">1</span>),<br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;ç¡•å£«&#x27;</span>,<span class="hljs-string">&#x27;è¡¨æ¼”&#x27;</span>,<span class="hljs-string">&#x27;æœé˜³åŒºç¬¬ä¸€å°å­¦&#x27;</span>,<span class="hljs-string">&#x27;æœé˜³åŒºç¬¬ä¸€ä¸­å­¦&#x27;</span>,<span class="hljs-string">&#x27;åŒ—äº¬ç”µå½±å­¦é™¢&#x27;</span>,<span class="hljs-number">2</span>),<br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;æœ¬ç§‘&#x27;</span>,<span class="hljs-string">&#x27;è‹±è¯­&#x27;</span>,<span class="hljs-string">&#x27;æ­å·å¸‚ç¬¬ä¸€å°å­¦&#x27;</span>,<span class="hljs-string">&#x27;æ­å·å¸‚ç¬¬ä¸€ä¸­å­¦&#x27;</span>,<span class="hljs-string">&#x27;æ­å·å¸ˆèŒƒå¤§å­¦&#x27;</span>,<span class="hljs-number">3</span>),<br><br>(<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;æœ¬ç§‘&#x27;</span>,<span class="hljs-string">&#x27;åº”ç”¨æ•°å­¦&#x27;</span>,<span class="hljs-string">&#x27;é˜³æ³‰ç¬¬ä¸€å°å­¦&#x27;</span>,<span class="hljs-string">&#x27;é˜³æ³‰åŒºç¬¬ä¸€ä¸­å­¦&#x27;</span>,<span class="hljs-string">&#x27;æ¸…åå¤§å­¦&#x27;</span>,<span class="hljs-number">4</span>);<br><br><br><br>P38:å¤šè¡¨æŸ¥è¯¢<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dept(<br><br>  id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br><br>  name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>)<br><br>);<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept <span class="hljs-keyword">values</span><br><br>   (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;ç ”å‘éƒ¨&#x27;</span>),<br><br>   (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å¸‚åœºéƒ¨&#x27;</span>),<br><br>   (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>),<br><br>   (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;é”€å”®éƒ¨&#x27;</span>),<br><br>   (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;æ€»ç»åŠ&#x27;</span>),<br><br>   (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;äººäº‹éƒ¨&#x27;</span>);<br><br><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp(<br><br>  id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> key auto_increment,<br><br>  name <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),<br><br>  age <span class="hljs-type">int</span>,<br><br>  job <span class="hljs-type">varchar</span>(<span class="hljs-number">10</span>),<br><br>  salary <span class="hljs-type">int</span>,<br><br>  entrydate <span class="hljs-type">date</span>,<br><br>  managerid <span class="hljs-type">int</span>,<br><br>  dept_id <span class="hljs-type">int</span>,<br><br>  <span class="hljs-keyword">constraint</span> fk_dept <span class="hljs-keyword">foreign</span> key (dept_id) <span class="hljs-keyword">references</span> dept(id)<br><br>);<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> emp <span class="hljs-keyword">values</span><br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;é‡‘åº¸&#x27;</span>, <span class="hljs-number">66</span>, <span class="hljs-string">&#x27;æ€»è£&#x27;</span>, <span class="hljs-number">20000</span>, <span class="hljs-string">&#x27;2000-01-01&#x27;</span>, <span class="hljs-keyword">null</span>, <span class="hljs-number">5</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å¼ æ— å¿Œ&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;é¡¹ç›®ç»ç†&#x27;</span>, <span class="hljs-number">12500</span>, <span class="hljs-string">&#x27;2005-12-05&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;æ¨é€&#x27;</span>, <span class="hljs-number">33</span>, <span class="hljs-string">&#x27;å¼€å‘&#x27;</span>, <span class="hljs-number">8400</span>, <span class="hljs-string">&#x27;2000-11-03&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;éŸ¦ä¸€ç¬‘&#x27;</span>, <span class="hljs-number">48</span>, <span class="hljs-string">&#x27;å¼€å‘&#x27;</span>, <span class="hljs-number">11000</span>, <span class="hljs-string">&#x27;2002-02-05&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å¸¸é‡æ˜¥&#x27;</span>, <span class="hljs-number">43</span>, <span class="hljs-string">&#x27;å¼€å‘&#x27;</span>, <span class="hljs-number">10500</span>, <span class="hljs-string">&#x27;2004-09-07&#x27;</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å°æ˜­&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;ç¨‹åºå‘˜é¼“åŠ±å¸ˆ&#x27;</span>, <span class="hljs-number">6600</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;ç­ç»&#x27;</span>, <span class="hljs-number">60</span>, <span class="hljs-string">&#x27;è´¢åŠ¡æ€»ç›‘&#x27;</span>, <span class="hljs-number">8500</span>, <span class="hljs-string">&#x27;2002-09-12&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å‘¨èŠ·è‹¥&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;ä¼šè®¡&#x27;</span>, <span class="hljs-number">4800</span>, <span class="hljs-string">&#x27;2006-06-02&#x27;</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;ä¸æ•å›&#x27;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&#x27;å‡ºçº³&#x27;</span>, <span class="hljs-number">5250</span>, <span class="hljs-string">&#x27;2009-05-13&#x27;</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;èµµæ•&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;å¸‚åœºéƒ¨æ€»ç›‘&#x27;</span>, <span class="hljs-number">12500</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;é¹¿æ–å®¢&#x27;</span>, <span class="hljs-number">56</span>, <span class="hljs-string">&#x27;èŒå‘˜&#x27;</span>, <span class="hljs-number">3750</span>, <span class="hljs-string">&#x27;2006-10-03&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;é¹¤ç¬”ç¿&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;èŒå‘˜&#x27;</span>, <span class="hljs-number">3750</span>, <span class="hljs-string">&#x27;2007-05-09&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;æ–¹ä¸œç™½&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-string">&#x27;èŒå‘˜&#x27;</span>, <span class="hljs-number">5500</span>, <span class="hljs-string">&#x27;2009-02-12&#x27;</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å¼ ä¸‰ä¸°&#x27;</span>, <span class="hljs-number">88</span>, <span class="hljs-string">&#x27;é”€å”®æ€»ç›‘&#x27;</span>, <span class="hljs-number">14000</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;ä¿è²èˆŸ&#x27;</span>, <span class="hljs-number">38</span>, <span class="hljs-string">&#x27;é”€å”®&#x27;</span>, <span class="hljs-number">4600</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">14</span>, <span class="hljs-number">4</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;å®‹è¿œæ¡¥&#x27;</span>, <span class="hljs-number">40</span>, <span class="hljs-string">&#x27;é”€å”®&#x27;</span>, <span class="hljs-number">4600</span>, <span class="hljs-string">&#x27;2004-10-12&#x27;</span>, <span class="hljs-number">14</span>, <span class="hljs-number">4</span>),<br><br>  (<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;é™ˆå‹è°…&#x27;</span>, <span class="hljs-number">42</span>, <span class="hljs-keyword">null</span>, <span class="hljs-number">2000</span>, <span class="hljs-string">&#x27;2011-10-12&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-keyword">null</span>);<br><br><br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> salgrade(<br><br>  grade <span class="hljs-type">int</span>,<br><br>  losal <span class="hljs-type">int</span>,<br><br>  hisal <span class="hljs-type">int</span><br><br>);<br><br><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> salgrade<br><br><span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3000</span>),<br><br>    (<span class="hljs-number">2</span>, <span class="hljs-number">3001</span>, <span class="hljs-number">5000</span>),<br><br>    (<span class="hljs-number">3</span>, <span class="hljs-number">5001</span>, <span class="hljs-number">8000</span>),<br><br>    (<span class="hljs-number">4</span>, <span class="hljs-number">8001</span>, <span class="hljs-number">10000</span>),<br><br>    (<span class="hljs-number">5</span>, <span class="hljs-number">10001</span>, <span class="hljs-number">15000</span>),<br><br>    (<span class="hljs-number">6</span>, <span class="hljs-number">15001</span>, <span class="hljs-number">20000</span>),<br><br>    (<span class="hljs-number">7</span>, <span class="hljs-number">20001</span>, <span class="hljs-number">25000</span>),<br><br>    (<span class="hljs-number">8</span>, <span class="hljs-number">25001</span>, <span class="hljs-number">30000</span>);<br><br><br><br>P74:<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (<br><br>  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br><br>    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br><br>    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),<br><br>    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br><br>     profession <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br><br>     age <span class="hljs-type">INT</span>,<br><br>     gender <span class="hljs-type">INT</span>,<br><br>     status <span class="hljs-type">INT</span>,<br><br>     createtime DATETIME );<br><br> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (id, name, phone, email, profession, age, gender, status, createtime) <span class="hljs-keyword">VALUES</span><br><br>  (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;å•å¸ƒ&#x27;</span>, <span class="hljs-string">&#x27;17799990000&#x27;</span>, <span class="hljs-string">&#x27;lvbu666@163.com&#x27;</span>, <span class="hljs-string">&#x27;è½¯ä»¶å·¥ç¨‹&#x27;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-string">&#x27;2001-02-02 00:00:00&#x27;</span>),<br><br>  (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;æ›¹æ“&#x27;</span>, <span class="hljs-string">&#x27;17799990001&#x27;</span>, <span class="hljs-string">&#x27;caocao666@qq.com&#x27;</span>, <span class="hljs-string">&#x27;é€šè®¯å·¥ç¨‹&#x27;</span>, <span class="hljs-number">33</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-03-05 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;èµµäº‘&#x27;</span>, <span class="hljs-string">&#x27;17799990002&#x27;</span>, <span class="hljs-string">&#x27;177999900@139.com&#x27;</span>, <span class="hljs-string">&#x27;è‹±è¯­&#x27;</span>, <span class="hljs-number">34</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;2002-03-02 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;å­™æ‚Ÿç©º&#x27;</span>, <span class="hljs-string">&#x27;17799990003&#x27;</span>, <span class="hljs-string">&#x27;177999900@sina.com&#x27;</span>, <span class="hljs-string">&#x27;å·¥ç¨‹é€ ä»·&#x27;</span>, <span class="hljs-number">54</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-07-02 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;èŠ±æœ¨å…°&#x27;</span>, <span class="hljs-string">&#x27;17799990004&#x27;</span>, <span class="hljs-string">&#x27;19980729@sina.com&#x27;</span>, <span class="hljs-string">&#x27;è½¯ä»¶å·¥ç¨‹&#x27;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2001-04-22 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;å¤§ä¹”&#x27;</span>, <span class="hljs-string">&#x27;17799990005&#x27;</span>, <span class="hljs-string">&#x27;daqiao666@sina.com&#x27;</span>, <span class="hljs-string">&#x27;èˆè¹ˆ&#x27;</span>, <span class="hljs-number">22</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-02-07 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;éœ²å¨œ&#x27;</span>, <span class="hljs-string">&#x27;17799990006&#x27;</span>, <span class="hljs-string">&#x27;luna_love@sina.com&#x27;</span>, <span class="hljs-string">&#x27;åº”ç”¨æ•°å­¦&#x27;</span>, <span class="hljs-number">24</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-02-08 00:00:00&#x27;</span>),<br><br>  (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;ç¨‹å’¬é‡‘&#x27;</span>, <span class="hljs-string">&#x27;17799990007&#x27;</span>, <span class="hljs-string">&#x27;chengyaojin@163.com&#x27;</span>, <span class="hljs-string">&#x27;åŒ–å·¥&#x27;</span>, <span class="hljs-number">38</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-05-23 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;é¡¹ç¾½&#x27;</span>, <span class="hljs-string">&#x27;17799990008&#x27;</span>, <span class="hljs-string">&#x27;xiaoyu666@qq.com&#x27;</span>, <span class="hljs-string">&#x27;é‡‘å±ææ–™&#x27;</span>, <span class="hljs-number">43</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2001-09-18 00:00:00&#x27;</span>),<br><br>  (<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;ç™½èµ·&#x27;</span>, <span class="hljs-string">&#x27;17799990009&#x27;</span>, <span class="hljs-string">&#x27;baiqi666@163.com&#x27;</span>, <span class="hljs-string">&#x27;æœºæ¢°å·¥ç¨‹åŠå…¶è‡ªåŠ¨åŒ–&#x27;</span>, <span class="hljs-number">27</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;2001-08-16 00:00:00&#x27;</span>),<br><br>  (<span class="hljs-number">11</span>, <span class="hljs-string">&#x27;éŸ©ä¿¡&#x27;</span>, <span class="hljs-string">&#x27;17799990010&#x27;</span>, <span class="hljs-string">&#x27;hanxin520@163.com&#x27;</span>, <span class="hljs-string">&#x27;æ— æœºéé‡‘å±ææ–™å·¥ç¨‹&#x27;</span>, <span class="hljs-number">27</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-06-12 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">12</span>, <span class="hljs-string">&#x27;è†è½²&#x27;</span>, <span class="hljs-string">&#x27;17799990011&#x27;</span>, <span class="hljs-string">&#x27;jingke123@163.com&#x27;</span>, <span class="hljs-string">&#x27;ä¼šè®¡&#x27;</span>, <span class="hljs-number">29</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-05-11 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">13</span>, <span class="hljs-string">&#x27;å…°é™µç‹&#x27;</span>, <span class="hljs-string">&#x27;17799990012&#x27;</span>, <span class="hljs-string">&#x27;lanlinwang666@126.com&#x27;</span>, <span class="hljs-string">&#x27;å·¥ç¨‹é€ ä»·&#x27;</span>, <span class="hljs-number">44</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2001-04-09 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">14</span>, <span class="hljs-string">&#x27;ç‹‚é“&#x27;</span>, <span class="hljs-string">&#x27;17799990013&#x27;</span>, <span class="hljs-string">&#x27;kuangtie@sina.com&#x27;</span>, <span class="hljs-string">&#x27;åº”ç”¨æ•°å­¦&#x27;</span>, <span class="hljs-number">43</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;2001-04-10 00:00:00&#x27;</span>),<br><br>  (<span class="hljs-number">15</span>, <span class="hljs-string">&#x27;è²‚è‰&#x27;</span>, <span class="hljs-string">&#x27;17799990014&#x27;</span>, <span class="hljs-string">&#x27;8495848374@qq.com&#x27;</span>, <span class="hljs-string">&#x27;è½¯ä»¶å·¥ç¨‹&#x27;</span>, <span class="hljs-number">40</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2001-02-12 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">16</span>, <span class="hljs-string">&#x27;å¦²å·±&#x27;</span>, <span class="hljs-string">&#x27;17799990015&#x27;</span>, <span class="hljs-string">&#x27;2782382939@qq.com&#x27;</span>, <span class="hljs-string">&#x27;è½¯ä»¶å·¥ç¨‹&#x27;</span>, <span class="hljs-number">31</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-01-30 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">17</span>, <span class="hljs-string">&#x27;åŠæœˆ&#x27;</span>, <span class="hljs-string">&#x27;17799990016&#x27;</span>, <span class="hljs-string">&#x27;xiaomin2001@sina.com&#x27;</span>, <span class="hljs-string">&#x27;å·¥ä¸šç»æµ&#x27;</span>, <span class="hljs-number">35</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2000-05-03 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">18</span>, <span class="hljs-string">&#x27;èµ¢æ”¿&#x27;</span>, <span class="hljs-string">&#x27;17799990017&#x27;</span>, <span class="hljs-string">&#x27;8839434342@qq.com&#x27;</span>, <span class="hljs-string">&#x27;åŒ–å·¥&#x27;</span>, <span class="hljs-number">38</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2001-08-08 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">19</span>, <span class="hljs-string">&#x27;ç‹„ä»æ°&#x27;</span>, <span class="hljs-string">&#x27;17799990018&#x27;</span>, <span class="hljs-string">&#x27;jujiamlm816@163.com&#x27;</span>, <span class="hljs-string">&#x27;å›½é™…è´¸æ˜“&#x27;</span>, <span class="hljs-number">30</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2007-03-12 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">20</span>, <span class="hljs-string">&#x27;å®‰çªæ‹‰&#x27;</span>, <span class="hljs-string">&#x27;17799990019&#x27;</span>, <span class="hljs-string">&#x27;jdodmlh@126.com&#x27;</span>, <span class="hljs-string">&#x27;åŸå¸‚è§„åˆ’&#x27;</span>, <span class="hljs-number">51</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2001-08-15 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">21</span>, <span class="hljs-string">&#x27;å…¸éŸ¦&#x27;</span>, <span class="hljs-string">&#x27;17799990020&#x27;</span>, <span class="hljs-string">&#x27;ycauanjian@163.com&#x27;</span>, <span class="hljs-string">&#x27;åŸå¸‚è§„åˆ’&#x27;</span>, <span class="hljs-number">52</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2000-04-12 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">22</span>, <span class="hljs-string">&#x27;å»‰é¢‡&#x27;</span>, <span class="hljs-string">&#x27;17799990021&#x27;</span>, <span class="hljs-string">&#x27;lianpo321@126.com&#x27;</span>, <span class="hljs-string">&#x27;åœŸæœ¨å·¥ç¨‹&#x27;</span>, <span class="hljs-number">19</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;2002-07-18 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">23</span>, <span class="hljs-string">&#x27;åç¾¿&#x27;</span>, <span class="hljs-string">&#x27;17799990022&#x27;</span>, <span class="hljs-string">&#x27;altycj2000@139.com&#x27;</span>, <span class="hljs-string">&#x27;åŸå¸‚å›­æ—&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;2002-03-10 00:00:00&#x27;</span>),<br><br>   (<span class="hljs-number">24</span>, <span class="hljs-string">&#x27;å§œå­ç‰™&#x27;</span>, <span class="hljs-string">&#x27;17799990023&#x27;</span>, <span class="hljs-string">&#x27;3748384@qq.com&#x27;</span>, <span class="hljs-string">&#x27;å·¥ç¨‹é€ ä»·&#x27;</span>, <span class="hljs-number">29</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;2003-05-26 00:00:00&#x27;</span>);<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯å¼€å‘</category>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.3 ç£ç›˜å’Œå›ºæ€ç¡¬ç›˜</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/</url>
    
    <content type="html"><![CDATA[<h1 id="ç£ç›˜ç»„ç»‡ä¸ç®¡ç†"><strong>5.3 ç£ç›˜ç»„ç»‡ä¸ç®¡ç†</strong></h1><h2 id="ç£ç›˜çš„ç»“æ„"><strong>1. ç£ç›˜çš„ç»“æ„</strong></h2><h3 id="ç£ç›˜ç£é“æ‰‡åŒº">1.1 <strong>ç£ç›˜ã€ç£é“ã€æ‰‡åŒº</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/image-20241122110700006.png"></p><h3 id="å¦‚ä½•åœ¨ç£ç›˜ä¸­è¯»å†™æ•°æ®">1.2<strong>å¦‚ä½•åœ¨ç£ç›˜ä¸­è¯»/å†™æ•°æ®</strong></h3><ul><li><p>éœ€è¦æŠŠ"ç£å¤´"ç§»åŠ¨åˆ°æƒ³è¦è¯»/å†™çš„æ‰‡åŒºæ‰€åœ¨çš„ç£é“</p></li><li><p>ç£ç›˜ä¼šè½¬èµ·æ¥, è®©ç›®æ ‡æ‰‡åŒºä»ç£å¤´ä¸‹é¢åˆ’è¿‡,æ‰èƒ½å®Œæˆå¯¹æ‰‡åŒºçš„è¯»/å†™æ“ä½œ</p></li></ul><h3 id="ç›˜é¢æŸ±é¢">1.3 <strong>ç›˜é¢ã€æŸ±é¢</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/image-20241122110727198.png"></p><h3 id="ç£ç›˜çš„ç‰©ç†åœ°å€">1.4 <strong>ç£ç›˜çš„ç‰©ç†åœ°å€</strong></h3><ul><li>å¯ç”¨ (æŸ±é¢å·, ç›˜é¢å·,æ‰‡åŒºå·)æ¥å®šä½ä»»æ„ä¸€ä¸ª"ç£ç›˜å—"ã€‚åœ¨â€œæ–‡ä»¶çš„ç‰©ç†ç»“æ„â€å°èŠ‚ä¸­,æˆ‘ä»¬ç»å¸¸æåˆ°æ–‡ä»¶æ•°æ®å­˜æ”¾åœ¨å¤–å­˜ä¸­çš„å‡ å·å—, è¿™ä¸ªå—å·å°±å¯ä»¥è½¬æ¢æˆ(æŸ±é¢å·,ç›˜é¢å·, æ‰‡åŒºå·)çš„åœ°å€è½¬åŒ–</li><li>å¯æ ¹æ®è¯¥åœ°å€è¯»å–ä¸€ä¸ª"å—"<ul><li>æ ¹æ®"æŸ±é¢å·"ç§»åŠ¨ç£è‡‚, è®©ç£å¤´æŒ‡å‘æŒ‡å®šæŸ±é¢</li><li>æ¿€æ´»æŒ‡å®šç›˜é¢å¯¹åº”çš„ç£å¤´</li><li>ç£ç›˜æ—‹è½¬çš„è¿‡ç¨‹ä¸­, æŒ‡å®šçš„æ‰‡åŒºä¼šä»ç£å¤´ä¸‹é¢åˆ’è¿‡,è¿™æ ·å°±å®Œæˆäº†å¯¹æŒ‡å®šæ‰‡åŒºçš„è¯»/å†™</li></ul></li></ul><h3 id="ç£ç›˜çš„åˆ†ç±»">1.5 <strong>ç£ç›˜çš„åˆ†ç±»</strong></h3><ul><li><strong>æ ¹æ®ç£å¤´æ˜¯å¦å¯ç§»åŠ¨</strong><ul><li><strong>æ´»åŠ¨å¤´ç£ç›˜</strong><ul><li>ç£å¤´å¯ä»¥ç§»åŠ¨çš„ç§°ä¸ºæ´»åŠ¨å¤´ç£ç›˜</li><li>ç£è‡‚å¯ä»¥æ¥å›ä¼¸ç¼©æ¥å¸¦åŠ¨ç£å¤´å®šä½ç£é“</li></ul></li><li><strong>å›ºå®šå¤´ç£ç›˜</strong><ul><li>ç£å¤´ä¸å¯ç§»åŠ¨çš„ç§°ä¸ºå›ºå®šå¤´ç£ç›˜</li><li>è¿™ç§ç£ç›˜ä¸­æ¯ä¸ªç£é“éƒ½æœ‰ä¸€ä¸ªç£å¤´</li></ul></li><li><strong>æ ¹æ®ç›˜ç‰‡æ˜¯å¦å¯æ›´æ¢</strong><ul><li><strong>å¯æ¢ç›˜ç£ç›˜</strong></li><li><strong>å›ºå®šç›˜ç£ç›˜</strong></li></ul></li></ul></li></ul><h2 id="ç£ç›˜è°ƒåº¦ç®—æ³•"><strong>2. ç£ç›˜è°ƒåº¦ç®—æ³•</strong></h2><h3 id="ä¸€æ¬¡ç£ç›˜è¯»å†™æ“ä½œéœ€è¦çš„æ—¶é—´">2.1<strong>ä¸€æ¬¡ç£ç›˜è¯»/å†™æ“ä½œéœ€è¦çš„æ—¶é—´</strong></h3><ul><li><strong>å¯»é“æ—¶é—´(å¯»æ‰¾æ—¶é—´)</strong>T<sub>S</sub><ul><li>åœ¨è¯»/å†™æ•°æ®å‰, å°†ç£å¤´ç§»åŠ¨åˆ°æŒ‡å®šç£é“æ‰€èŠ±çš„æ—¶é—´<ul><li>å¯åŠ¨ç£å¤´è‡‚æ˜¯éœ€è¦æ—¶é—´çš„, å‡è®¾è€—æ—¶ä¸ºs</li><li>ç§»åŠ¨ç£å¤´ä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„, å‡è®¾ç£å¤´åŒ€é€Ÿç§»åŠ¨, æ¯è·¨åŸŸä¸€ä¸ªç£é“è€—æ—¶ä¸ºm,æ€»å…±éœ€è¦è·¨åŸŸnæ¡ç£é“</li></ul></li><li>å¯»é“æ—¶é—´ T<sub>S</sub> = s + m * n</li></ul></li><li><strong>å»¶è¿Ÿæ—¶é—´</strong>T<sub>R</sub><ul><li>é€šè¿‡æ—‹è½¬ç£ç›˜, ä½¿ç£å¤´å®šä½åˆ°ç›®æ ‡æ‰‡åŒºæ‰€éœ€è¦çš„æ—¶é—´<ul><li>è®¾ç£ç›˜è½¬é€Ÿä¸ºr(å•ä½: è½¬/ç§’ æˆ– è½¬/åˆ†)</li></ul></li><li>å¹³å‡æ‰€éœ€çš„å»¶è¿Ÿæ—¶é—´ T<sub>R</sub> = (1/2) * (1/r) = 1/(2r)<ul><li>1/rå°±æ˜¯è½¬ä¸€åœˆéœ€è¦çš„æ—¶é—´, æ‰¾åˆ°ç›®æ ‡æ‰‡åŒºå¹³å‡éœ€è¦è½¬åŠåœˆ,å› æ­¤å†ä¹˜ä»¥1/2</li></ul></li></ul></li><li><strong>ä¼ è¾“æ—¶é—´</strong>T<sub>t</sub><ul><li>ä»ç£ç›˜è¯»/å†™æ•°æ®æ‰€ç»å†çš„æ—¶é—´<ul><li>ç£ç›˜è½¬é€Ÿä¸ºr, æ­¤æ¬¡è¯»/å†™çš„å­—èŠ‚æ•°ä¸ºb, æ¯ä¸ªç£é“ä¸Šçš„å­—èŠ‚æ•°ä¸ºN</li></ul></li><li>ä¼ è¾“æ—¶é—´ T<sub>t</sub> = (1/r)*(b/N) = b/(rN)</li><li>æ¯ä¸ªç£é“è¦å¯å­˜Nå­—èŠ‚çš„æ•°æ®, å› æ­¤bå­—èŠ‚çš„æ•°æ®éœ€è¦b/Nä¸ªç£é“æ‰èƒ½å­˜å‚¨,è€Œè¯»/å†™ä¸€ä¸ªç£é“</li><li>æ‰€éœ€çš„æ—¶é—´åˆšå¥½åˆæ˜¯è½¬ä¸€åœˆæ‰€éœ€è¦çš„æ—¶é—´1/r</li></ul></li><li><strong>æ€»çš„å¹³å‡è¯»å–æ—¶é—´</strong> Ta = Ts + 1/(2r) + b/(rN)<ul><li>å»¶è¿Ÿæ—¶é—´å’Œä¼ è¾“æ—¶é—´éƒ½ä¸ç£ç›˜è½¬é€Ÿç›¸å…³, è€Œè½¬é€Ÿæ˜¯ç¡¬ä»¶çš„å›ºæœ‰å±æ€§,å› æ­¤æ“ä½œç³»ç»Ÿä¹Ÿæ— æ³•ä¼˜åŒ–å»¶è¿Ÿæ—¶é—´å’Œä¼ è¾“æ—¶é—´</li><li>ä½†æ˜¯æ“ä½œç³»ç»Ÿçš„<strong>ç£ç›˜è°ƒåº¦ç®—æ³•</strong>ä¼šç›´æ¥å½±å“<strong>å¯»é“æ—¶é—´</strong></li></ul></li></ul><h3 id="ç£ç›˜è°ƒåº¦ç®—æ³•-1">2.2 <strong>ç£ç›˜è°ƒåº¦ç®—æ³•</strong></h3><ul><li>å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•(FCFS)<ul><li>æ ¹æ®è¿›ç¨‹è¯·æ±‚è®¿é—®ç£ç›˜çš„å…ˆåé¡ºåºè¿›è¡Œè°ƒåº¦</li><li>ä¼˜ç‚¹: å…¬å¹³; å¦‚æœè¯·æ±‚è®¿é—®çš„ç£é“æ¯”è¾ƒé›†ä¸­çš„è¯, ç®—æ³•æ€§èƒ½è¿˜ç®—è¿‡å¾—å»</li><li>ç¼ºç‚¹: å¦‚æœæœ‰å¤§é‡è¿›ç¨‹ç«äº‰ä½¿ç”¨ç£ç›˜, è¯·æ±‚è®¿é—®çš„ç£é“å¾ˆåˆ†æ•£,åˆ™FCFSåœ¨æ€§èƒ½ä¸Šå¾ˆå·®, å¯»é“æ—¶é—´é•¿</li></ul></li><li>æœ€çŸ­å¯»æ‰¾æ—¶é—´ä¼˜å…ˆ(SSTF)<ul><li>SSTFç®—æ³•ä¼šä¼˜å…ˆå¤„ç†çš„ç£é“æ˜¯ä¸å½“å‰ç£å¤´æœ€è¿‘çš„ç£é“ã€‚å¯ä»¥ä¿è¯æ¯æ¬¡çš„å¯»é“æ—¶é—´æœ€çŸ­,ä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯æ€»çš„å¯»é“æ—¶é—´æœ€çŸ­<ul><li>å…¶å®å°±æ˜¯è´ªå¿ƒç®—æ³•çš„æ€æƒ³, åªæ˜¯é€‰æ‹©çœ¼å‰æœ€ä¼˜, ä½†æ˜¯æ€»ä½“æœªå¿…æœ€ä¼˜</li></ul></li><li>ä¼˜ç‚¹: æ€§èƒ½è¾ƒå¥½, å¹³å‡å¯»é“æ—¶é—´çŸ­</li><li>ç¼ºç‚¹: å¯èƒ½äº§ç”Ÿ"é¥¥é¥¿"ç°è±¡, ç£å¤´åœ¨ä¸€ä¸ªå°åŒºåŸŸå†…æ¥å›åœ°ç§»åŠ¨</li></ul></li><li>æ‰«æç®—æ³•(SCAN)<ul><li>ä¸ºäº†é˜²æ­¢SSTFç®—æ³•äº§ç”Ÿé¥¥é¥¿,å¯ä»¥è§„å®šåªæœ‰ç£å¤´ç§»åŠ¨åˆ°æœ€å¤–ä¾§ç£é“çš„æ—¶å€™æ‰èƒ½å¾€å†…ç§»åŠ¨,ç§»åŠ¨åˆ°æœ€å†…ä¾§ç£é“çš„æ—¶å€™æ‰èƒ½å¾€å¤–ç§»åŠ¨, ç”±äºç£å¤´ç§»åŠ¨çš„æ–¹å¼å¾ˆåƒç”µæ¢¯,å› æ­¤ä¹Ÿå«ç”µæ¢¯ç®—æ³•</li><li>ä¼˜ç‚¹: æ€§èƒ½è¾ƒå¥½, å¹³å‡å¯»é“æ—¶é—´è¾ƒçŸ­, ä¸ä¼šäº§ç”Ÿé¥¥é¥¿ç°è±¡</li><li>ç¼ºç‚¹:<ul><li>åªæœ‰åˆ°è¾¾æœ€è¾¹ä¸Šçš„ç£é“æ—¶æ‰èƒ½æ”¹å˜ç£å¤´ç§»åŠ¨æ–¹å‘</li><li>SCANç®—æ³•å¯¹äºå„ä¸ªä½ç½®ç£é“çš„å“åº”é¢‘ç‡ä¸å¹³å‡</li></ul></li></ul></li><li>LOOKè°ƒåº¦ç®—æ³•<ul><li>å¦‚æœåœ¨ç£å¤´ç§»åŠ¨æ–¹å‘ä¸Šå·²ç»æ²¡æœ‰åˆ«çš„è¯·æ±‚,å°±å¯ä»¥ç«‹å³æ”¹å˜ç£å¤´ç§»åŠ¨æ–¹å‘(è¾¹ç§»åŠ¨è¾¹è§‚å¯Ÿ, å› æ­¤å«LOOK)</li><li>ä¼˜ç‚¹: æ¯”èµ·SCANç®—æ³•, ä¸éœ€è¦æ¯æ¬¡éƒ½ç§»åŠ¨åˆ°æœ€å¤–ä¾§æˆ–æœ€å†…ä¾§æ‰æ”¹å˜ç£å¤´æ–¹å‘,ä½¿å¯»é“æ—¶é—´è¿›ä¸€æ­¥ç¼©çŸ­</li></ul></li><li>å¾ªç¯æ‰«æç®—æ³•(C-SCAN)<ul><li>è§„å®šåªæœ‰ç£å¤´æœæŸä¸ªç‰¹å®šæ–¹å‘ç§»åŠ¨æ—¶æ‰å¤„ç†ç£é“è®¿é—®è¯·æ±‚,è€Œè¿”å›æ—¶ç›´æ¥å¿«é€Ÿç§»åŠ¨è‡³èµ·å§‹ç«¯è€Œä¸å¤„ç†ä»»ä½•è¯·æ±‚</li><li>ä¼˜ç‚¹: æ¯”èµ·SCANæ¥è¯´, å¯¹äºå„ä¸ªä½ç½®ç£é“çš„å“åº”é¢‘ç‡å¾ˆå¹³å‡</li><li>ç¼ºç‚¹: åªæœ‰åˆ°è¾¾æœ€è¾¹ä¸Šçš„ç£é“æ—¶æ‰èƒ½æ”¹å˜ç£å¤´ç§»åŠ¨æ–¹å‘</li></ul></li><li>C-LOOKè°ƒåº¦ç®—æ³•<ul><li>å¦‚æœç£å¤´ç§»åŠ¨çš„æ–¹å‘ä¸Šå·²ç»æ²¡æœ‰ç£é“è®¿é—®è¯·æ±‚äº†, å°±å¯ä»¥ç«‹å³è®©ç£å¤´è¿”å›,å¹¶ä¸”ç£å¤´åªéœ€è¦è¿”å›åˆ°æœ‰ç£é“è®¿é—®è¯·æ±‚çš„ä½ç½®å³å¯</li><li>ä¼˜ç‚¹: æ¯”èµ·C-SCANç®—æ³•,ä¸éœ€è¦æ¯æ¬¡éƒ½ç§»åŠ¨åˆ°æœ€å¤–ä¾§æˆ–æœ€å†…ä¾§æ‰æ”¹å˜ç£å¤´æ–¹å‘,ä½¿å¯»é“æ—¶é—´è¿›ä¸€æ­¥ç¼©çŸ­</li></ul></li></ul><h2 id="å‡å°‘ç£ç›˜å»¶è¿Ÿæ—¶é—´çš„æ–¹æ³•"><strong>3.å‡å°‘ç£ç›˜å»¶è¿Ÿæ—¶é—´çš„æ–¹æ³•</strong></h2><h3 id="äº¤æ›¿ç¼–å·">3.1 <strong>äº¤æ›¿ç¼–å·</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/image-20241122111239973.png"></p><h3 id="é”™ä½å‘½å">3.2 <strong>é”™ä½å‘½å</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/image-20241122111252768.png"></p><h3 id="ç£ç›˜åœ°å€ç»“æ„çš„è®¾è®¡">3.3 <strong>ç£ç›˜åœ°å€ç»“æ„çš„è®¾è®¡</strong></h3><ul><li>ä½¿ç”¨ (æŸ±é¢å·, ç›˜é¢å·, æ‰‡åŒºå·)çš„åŸå› <ul><li>åœ¨è¯»å–åœ°å€è¿ç»­çš„ç£ç›˜å—æ—¶, å‰è€…ä¸éœ€è¦ç»å¸¸ç§»åŠ¨ç£å¤´</li></ul></li></ul><h2 id="ç£ç›˜çš„ç®¡ç†"><strong>4. ç£ç›˜çš„ç®¡ç†</strong></h2><h3 id="ç£ç›˜åˆå§‹åŒ–">4.1 <strong>ç£ç›˜åˆå§‹åŒ–</strong></h3><ul><li><p>è¿›è¡Œ<strong>ä½çº§æ ¼å¼åŒ–(ç‰©ç†æ ¼å¼åŒ–)</strong>,<strong>å°†ç£ç›˜çš„å„ä¸ªç£é“åˆ’åˆ†ä¸ºæ‰‡åŒº</strong>,ä¸€ä¸ªæ‰‡åŒºé€šå¸¸å¯åˆ†ä¸ºå¤´ã€æ•°æ®åŒºåŸŸ(å¦‚512Bå¤§å°)ã€å°¾ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚ç®¡ç†æ‰‡åŒºæ‰€éœ€è¦çš„å„ç§æ•°æ®ç»“æ„ä¸€èˆ¬å­˜æ”¾åœ¨å¤´ã€å°¾ä¸¤ä¸ªéƒ¨åˆ†,åŒ…æ‹¬æ‰‡åŒºæ ¡éªŒç (å¦‚å¥‡å¶æ ¡éªŒã€CRCå¾ªç¯å†—ä½™æ ¡éªŒç ç­‰,æ ¡éªŒç ç”¨äºæ ¡éªŒæ‰‡åŒºä¸­çš„æ•°æ®æ˜¯å¦å‘ç”Ÿé”™è¯¯)</p></li><li><p><strong>å°†ç£ç›˜åˆ†åŒº(åˆ†å·ï¼ŒVolume),æ¯ä¸ªåˆ†åŒºç”±è‹¥å¹²æŸ±é¢ç»„æˆ</strong>(å³åˆ†ä¸ºæˆ‘ä»¬ç†Ÿæ‚‰çš„ Cç›˜ã€Dç›˜ã€Eç›˜)</p></li><li><p>è¿›è¡Œ<strong>é€»è¾‘æ ¼å¼åŒ–</strong>,<strong>åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ</strong>ã€‚åŒ…æ‹¬åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ã€åˆå§‹åŒ–å­˜å‚¨ç©ºé—´ç®¡ç†æ‰€ç”¨çš„æ•°æ®ç»“æ„(å¦‚ä½ç¤ºå›¾ã€ç©ºé—²åˆ†åŒºè¡¨)</p></li></ul><h3 id="å¼•å¯¼å—">4.2 <strong>å¼•å¯¼å—</strong></h3><ul><li><p>è®¡ç®—æœºå¼€æœºæ—¶éœ€è¦è¿›è¡Œä¸€ç³»åˆ—åˆå§‹åŒ–çš„å·¥ä½œ,è¿™äº›åˆå§‹åŒ–å·¥ä½œæ˜¯é€šè¿‡æ‰§è¡Œ<strong>åˆå§‹åŒ–ç¨‹åº(è‡ªä¸¾ç¨‹åº)</strong>å®Œæˆçš„</p></li><li><p>åˆå§‹åŒ–ç¨‹åºå¯ä»¥æ”¾åœ¨ROM(åªè¯»å­˜å‚¨å™¨)ä¸­, ROMä¸­çš„æ•°æ®åœ¨å‡ºå‚æ—¶å°±å†™å…¥äº†,å¹¶ä¸”ä»¥åä¸èƒ½å†ä¿®æ”¹</p><ul><li>æ³¨: ROMä¸€èˆ¬æ˜¯å‡ºå‚æ—¶å°±é›†æˆåœ¨ä¸»æ¿ä¸Šçš„</li></ul></li><li><p>å°†å®Œæ•´åˆå§‹åŒ–ç¨‹åºæ”¾åœ¨ROMä¸­, å½“éœ€è¦æ›´æ–°è‡ªä¸¾ç¨‹åºæ—¶, å°†ä¼šå¾ˆä¸æ–¹ä¾¿,å› ä¸ºROMä¸­çš„æ•°æ®æ— æ³•æ›´æ”¹</p></li><li><p>åœ¨å®é™…ä¸­, ROMä¸­åªå­˜æ”¾å¾ˆå°çš„"è‡ªä¸¾è£…å…¥ç¨‹åº",å®Œæ•´çš„è‡ªä¸¾ç¨‹åºå­˜æ”¾åœ¨ç£ç›˜çš„**å¯åŠ¨å—(å¼•å¯¼å—/*å¯åŠ¨åˆ†åŒº)<strong>ä¸Š,å¯åŠ¨å—ä½äºç£ç›˜çš„å›ºå®šä½ç½®,æ‹¥æœ‰å¯åŠ¨åˆ†åŒºçš„ç£ç›˜ç§°ä¸º</strong>å¯åŠ¨ç£ç›˜æˆ–ç³»ç»Ÿç£ç›˜(C:ç›˜)**</p></li><li><p>å¼€æœºæ—¶è®¡ç®—æœºå…ˆè¿è¡Œ"è‡ªä¸¾è£…å…¥ç¨‹åº", é€šè¿‡æ‰§è¡Œè¯¥ç¨‹åºå°±å¯ä»¥æ‰¾åˆ°å¼•å¯¼å—,å¹¶å°†å®Œæ•´çš„"è‡ªä¸¾ç¨‹åº"è¯»å…¥å†…å­˜, å®Œæˆåˆå§‹åŒ–</p></li></ul><h3 id="åå—çš„ç®¡ç†">4.3 <strong>åå—çš„ç®¡ç†</strong></h3><ul><li><p>åäº†ã€æ— æ³•æ­£å¸¸ä½¿ç”¨çš„æ‰‡åŒºå°±æ˜¯â€œåå—â€ã€‚è¿™å±äºç¡¬ä»¶æ•…éšœ,æ“ä½œç³»ç»Ÿæ˜¯æ— æ³•ä¿®å¤çš„ã€‚åº”è¯¥å°†åå—æ ‡è®°å‡ºæ¥, ä»¥å…é”™è¯¯åœ°ä½¿ç”¨åˆ°å®ƒ</p></li><li><p>å¯¹äºç®€å•çš„ç£ç›˜,å¯ä»¥åœ¨é€»è¾‘æ ¼å¼åŒ–æ—¶(å»ºç«‹æ–‡ä»¶ç³»ç»Ÿæ—¶)å¯¹æ•´ä¸ªç£ç›˜è¿›è¡Œåå—æ£€æŸ¥,æ ‡æ˜å“ªäº›æ‰‡åŒºæ˜¯åæ‰‡åŒº</p><ul><li>ä¾‹å¦‚: åœ¨FATè¡¨ä¸Šæ ‡æ˜(åœ¨è¿™ç§æ–¹å¼ä¸­, åå—å¯¹æ“ä½œç³»ç»Ÿä¸é€æ˜)</li></ul></li><li><p>å¯¹äºå¤æ‚çš„ç£ç›˜,<strong>ç£ç›˜æ§åˆ¶å™¨</strong>(ç£ç›˜è®¾å¤‡å†…éƒ¨çš„ä¸€ä¸ªç¡¬ä»¶éƒ¨ä»¶)ä¼šç»´æŠ¤ä¸€ä¸ªåå—é“¾è¡¨,åœ¨ç£ç›˜å‡ºå‚å‰è¿›è¡Œ<strong>ä½çº§æ ¼å¼åŒ–(ç‰©ç†æ ¼å¼åŒ–)</strong>æ—¶å°±å°†åå—é“¾è¿›è¡Œåˆå§‹åŒ–,ä¼šä¿ç•™ä¸€äº›"å¤‡ç”¨æ‰‡åŒº", ç”¨äºæ›¿æ¢åå—,è¿™ç§æ–¹æ¡ˆç§°ä¸º<strong>æ‰‡åŒºå¤‡ç”¨</strong>, ä¸”è¿™ç§å¤„ç†æ–¹å¼ä¸­,åå—å¯¹æ“ä½œç³»ç»Ÿé€æ˜</p></li></ul><h2 id="å›ºæ€ç¡¬ç›˜ssd"><strong>5. å›ºæ€ç¡¬ç›˜SSD</strong></h2><figure><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/image-20241122112439752.png" alt="SSD ç»“æ„"><figcaption aria-hidden="true">SSD ç»“æ„</figcaption></figure><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-3-%E7%A3%81%E7%9B%98%E5%92%8C%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98/image-20241122112356429.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.2 è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ioæ ¸å¿ƒå­ç³»ç»Ÿ"><strong>5.2 I/Oæ ¸å¿ƒå­ç³»ç»Ÿ</strong></h1><h2 id="ioæ ¸å¿ƒå­ç³»ç»Ÿ-1"><strong>1. IOæ ¸å¿ƒå­ç³»ç»Ÿ</strong></h2><ul><li>I/Oè½¯ä»¶å±‚æ¬¡<ul><li>ç”¨æˆ·å±‚è½¯ä»¶</li><li><strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</strong></li><li><strong>è®¾å¤‡é©±åŠ¨ç¨‹åº</strong></li><li><strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong></li><li>ç¡¬ä»¶</li></ul></li><li>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶ã€è®¾å¤‡é©±åŠ¨ç¨‹åºã€ä¸­æ–­å¤„ç†ç¨‹åºå±äºæ“ä½œç³»ç»Ÿçš„<strong>å†…æ ¸éƒ¨åˆ†</strong>ï¼Œå³â€œ<strong>I/Oç³»ç»Ÿ</strong>â€æˆ–ç§°"<strong>I/Oæ ¸å¿ƒå­ç³»ç»Ÿ</strong>"<ul><li>å› æ­¤I/Oæ ¸å¿ƒå­ç³»ç»Ÿè¦å®ç°çš„åŠŸèƒ½å…¶å®å°±æ˜¯ä¸­é—´ä¸‰å±‚è¦å®ç°çš„åŠŸèƒ½</li><li>è€ƒç ”ä¸­, æˆ‘ä»¬éœ€è¦é‡ç‚¹ç†è§£å’ŒæŒæ¡çš„åŠŸèƒ½æ˜¯:<ul><li>I/Oè°ƒåº¦</li><li>è®¾å¤‡ä¿æŠ¤</li><li>å‡è„±æœºæŠ€æœ¯(SPOOLingæŠ€æœ¯)<ul><li>å‡è„±æœºæŠ€æœ¯éœ€è¦ä½¿ç”¨åˆ°ç£ç›˜è¿™ç§è®¾å¤‡çš„<strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</strong>æä¾›çš„æœåŠ¡,æ‰€ä»¥å‡è„±æœºæŠ€æœ¯ä¸€èˆ¬æ˜¯åœ¨<strong>ç”¨æˆ·å±‚è½¯ä»¶</strong>å®ç°çš„</li></ul></li><li>è®¾å¤‡åˆ†é…ä¸å›æ”¶</li><li>ç¼“å†²åŒºç®¡ç†(å³ç¼“å†²ä¸é«˜é€Ÿç¼“å­˜)<ul><li>é™¤äº†å‡è„±æœºæŠ€æœ¯å¤–,å…¶ä»–å‡ ç§åŠŸèƒ½éƒ½æ˜¯åœ¨<strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</strong>å®ç°çš„</li></ul></li></ul></li></ul></li></ul><h3 id="ioè°ƒåº¦">1.1 <strong>I/Oè°ƒåº¦</strong></h3><ul><li>ç”¨æŸç§ç®—æ³•ç¡®å®šä¸€ä¸ªå¥½çš„é¡ºåºæ¥å¤„ç†å„ä¸ª<strong>I/Oè¯·æ±‚</strong><ul><li>å¦‚:ç£ç›˜è°ƒåº¦(å…ˆæ¥å…ˆæœåŠ¡ã€æœ€çŸ­å¯»é“ä¼˜å…ˆç®—æ³•ã€SCANç®—æ³•ã€C-SCANç®—æ³•ã€LOOKç®—æ³•ã€C-LOOKç®—æ³•)</li><li>å½“å¤šä¸ªç£ç›˜I/Oè¯·æ±‚åˆ°æ¥æ—¶, ç”¨æŸç§è°ƒåº¦ç®—æ³•ç¡®å®šæ»¡è¶³I/Oè¯·æ±‚çš„é¡ºåº</li><li>åŒç†,æ‰“å°æœºç­‰è®¾å¤‡ä¹Ÿå¯ä»¥ç”¨å…ˆæ¥å…ˆæœåŠ¡ã€ä¼˜å…ˆçº§ç®—æ³•ã€çŸ­ä½œä¸šä¼˜å…ˆç­‰ç®—æ³•æ¥ç¡®å®šI/Oè°ƒåº¦é¡ºåº</li></ul></li></ul><h3 id="è®¾å¤‡ä¿æŠ¤">1.2 <strong>è®¾å¤‡ä¿æŠ¤</strong></h3><ul><li>æ“ä½œç³»ç»Ÿéœ€è¦å®ç°<strong>æ–‡ä»¶ä¿æŠ¤åŠŸèƒ½</strong>,ä¸åŒçš„ç”¨æˆ·å¯¹å„ä¸ªæ–‡ä»¶æœ‰ä¸åŒçš„è®¿é—®æƒé™<ul><li>å¦‚: åªè¯»ã€è¯»å’Œå†™ç­‰</li></ul></li><li>åœ¨UNIXç³»ç»Ÿä¸­, <strong>è®¾å¤‡è¢«çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶</strong>,æ¯ä¸ªè®¾å¤‡ä¹Ÿä¼šæœ‰å¯¹åº”çš„<strong>FCB</strong>ã€‚å½“ç”¨æˆ·è¯·æ±‚è®¿é—®æŸä¸ªè®¾å¤‡æ—¶,æ“ä½œç³»ç»Ÿæ ¹æ®FCBä¸­è®°å½•çš„ä¿¡æ¯æ¥åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦æœ‰ç›¸åº”çš„è®¿é—®æƒé™,ä»¥æ­¤å®ç°"<strong>è®¾å¤‡ä¿æŠ¤</strong>"çš„åŠŸèƒ½(å‚è€ƒ"<strong>æ–‡ä»¶ä¿æŠ¤</strong>"å°èŠ‚)</li></ul><h2 id="å‡è„±æœºæŠ€æœ¯"><strong>2. å‡è„±æœºæŠ€æœ¯</strong></h2><h3 id="è„±æœºæŠ€æœ¯">2.1 <strong>è„±æœºæŠ€æœ¯</strong></h3><ul><li><p>æ‰‹å·¥æ“ä½œé˜¶æ®µ: ä¸»æœºç›´æ¥ä»I/Oè®¾å¤‡è·å¾—æ•°æ®, ç”±äºè®¾å¤‡é€Ÿåº¦æ…¢,ä¸»æœºé€Ÿåº¦å¾ˆå¿«, äººæœºé€Ÿåº¦çŸ›ç›¾æ˜æ˜¾, ä¸»æœºè¦æµªè´¹å¾ˆå¤šæ—¶é—´æ¥ç­‰å¾…è®¾å¤‡</p></li><li><p>æ‰¹å¤„ç†é˜¶æ®µ:å¼•å…¥äº†<strong>è„±æœºè¾“å…¥/è¾“å‡ºæŠ€æœ¯</strong>(ç”¨<strong>ç£å¸¦</strong>å®Œæˆ)</p><ul><li>åœ¨<strong>å¤–å›´æ§åˆ¶æœº</strong>çš„æ§åˆ¶ä¸‹,æ…¢é€Ÿè¾“å…¥è®¾å¤‡çš„æ•°æ®å…ˆè¢«è¾“å…¥åˆ°æ›´å¿«æ·çš„ç£å¸¦ä¸Š,ä¹‹åä¸»æœºå¯ä»¥ä»å¿«é€Ÿçš„ç£å¸¦ä¸Šè¯»å…¥æ•°æ®, ä»è€Œç¼“è§£äº†é€Ÿåº¦çŸ›ç›¾</li><li><strong>ä¸ºä»€ä¹ˆç§°ä¸º"è„±æœº"?</strong><ul><li>è„±ç¦»ä¸»æœºçš„æ§åˆ¶è¿›è¡Œçš„è¾“å…¥/è¾“å‡ºæ“ä½œ</li></ul></li><li>å¼•å…¥è„±æœºæŠ€æœ¯å, ç¼“è§£äº†CPUä¸æ…¢é€ŸI/Oè®¾å¤‡çš„é€Ÿåº¦çŸ›ç›¾; å¦ä¸€æ–¹é¢,å³ä½¿CPUåœ¨å¿™ç¢Œ, ä¹Ÿå¯ä»¥æå‰å°†æ•°æ®è¾“å…¥åˆ°ç£å¸¦; å³ä½¿æ…¢é€Ÿçš„è¾“å‡ºè®¾å¤‡æ­£åœ¨å¿™ç¢Œ,ä¹Ÿå¯ä»¥æå‰å°†æ•°æ®è¾“å‡ºåˆ°ç£å¸¦</li></ul></li></ul><h3 id="å‡è„±æœºæŠ€æœ¯spoolingæŠ€æœ¯">2.2<strong>å‡è„±æœºæŠ€æœ¯(SPOOLingæŠ€æœ¯)</strong></h3><ul><li><p>æ˜¯ç”¨è½¯ä»¶çš„æ–¹å¼æ¨¡æ‹Ÿè„±æœºæŠ€æœ¯</p></li><li><p>SPOOLingç³»ç»Ÿçš„ç»„æˆå¦‚ä¸‹:</p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122104053709.png"></p><ul><li>åœ¨ç£ç›˜ä¸Šå¼€è¾Ÿå‡ºä¸¤ä¸ªå­˜å‚¨åŒºåŸŸ -- "<strong>è¾“å…¥äº•</strong>" å’Œ"<strong>è¾“å‡ºäº•</strong>"<ul><li>"è¾“å…¥äº•"æ¨¡æ‹Ÿè„±æœºè¾“å…¥æ—¶çš„ç£å¸¦, ç”¨äºæ”¶å®¹I/Oè®¾å¤‡è¾“å…¥çš„æ•°æ®</li><li>"è¾“å‡ºäº•"æ¨¡æ‹Ÿè„±æœºè¾“å‡ºæ—¶çš„ç£å¸¦, ç”¨äºæ”¶å®¹ç”¨æˆ·è¿›ç¨‹è¾“å‡ºçš„æ•°æ®</li></ul></li><li>è¦å®ç°SPOOLingæŠ€æœ¯, <strong>å¿…é¡»è¦æœ‰å¤šé“ç¨‹åºæŠ€æœ¯çš„æ”¯æŒ</strong>,ç³»ç»Ÿä¼šå»ºç«‹"<strong>è¾“å…¥è¿›ç¨‹</strong>" å’Œ "<strong>è¾“å‡ºè¿›ç¨‹</strong>"<ul><li>"è¾“å…¥è¿›ç¨‹"æ¨¡æ‹Ÿè„±æœºè¾“å…¥æ—¶çš„å¤–å›´æ§åˆ¶æœº</li><li>"è¾“å‡ºè¿›ç¨‹"æ¨¡æ‹Ÿè„±æœºè¾“å‡ºæ—¶çš„å¤–å›´æ§åˆ¶æœº</li></ul></li><li><strong>è¾“å…¥ç¼“å†²åŒº</strong> å’Œ<strong>è¾“å‡ºç¼“å†²åŒº</strong>æ˜¯åœ¨å†…å­˜ä¸­çš„ç¼“å†²åŒº<ul><li>åœ¨è¾“å…¥è¿›ç¨‹çš„æ§åˆ¶ä¸‹, "è¾“å…¥ç¼“å†²åŒº"ç”¨äºæš‚å­˜ä»è¾“å…¥è®¾å¤‡è¾“å…¥çš„æ•°æ®,ä¹‹åå†è½¬å­˜åˆ°è¾“å…¥äº•ä¸­</li><li>åœ¨è¾“å‡ºè¿›ç¨‹çš„æ§åˆ¶ä¸‹, "è¾“å‡ºç¼“å†²åŒº"ç”¨äºæš‚å­˜ä»è¾“å‡ºäº•é€æ¥çš„æ•°æ®,ä¹‹åå†ä¼ é€åˆ°è¾“å‡ºè®¾å¤‡ä¸Š</li></ul></li></ul><h3 id="å…±äº«æ‰“å°æœºåŸç†åˆ†æ">2.3 <strong>å…±äº«æ‰“å°æœºåŸç†åˆ†æ</strong></h3><ul><li><p><strong>ç‹¬å å¼è®¾å¤‡</strong></p><ul><li>åªå…è®¸å„ä¸ªè¿›ç¨‹ä¸²è¡Œä½¿ç”¨çš„è®¾å¤‡, ä¸€æ®µæ—¶é—´å†…åªèƒ½æ»¡è¶³ä¸€ä¸ªè¿›ç¨‹çš„è¯·æ±‚</li><li>ä¾‹å­: è‹¥è¿›ç¨‹1æ­£åœ¨ä½¿ç”¨æ‰“å°æœº,åˆ™è¿›ç¨‹2è¯·æ±‚ä½¿ç”¨æ‰“å°æœºæ—¶å¿…ç„¶é˜»å¡ç­‰å¾…</li></ul></li><li><p><strong>å…±äº«è®¾å¤‡</strong></p><ul><li>å…è®¸å¤šä¸ªè¿›ç¨‹"åŒæ—¶"ä½¿ç”¨çš„è®¾å¤‡(å®è§‚ä¸ŠåŒæ—¶ä½¿ç”¨, å¾®è§‚ä¸Šå¯èƒ½æ˜¯äº¤æ›¿ä½¿ç”¨),å¯ä»¥åŒæ—¶æ»¡è¶³å¤šä¸ªè¿›ç¨‹çš„ä½¿ç”¨è¦æ±‚</li></ul></li><li><p>æ‰“å°æœºæ˜¯ç§"ç‹¬å å¼è®¾å¤‡",ä½†æ˜¯å¯ä»¥ç”¨<strong>SPOOLingæŠ€æœ¯</strong>æ”¹é€ æˆ"å…±äº«è®¾å¤‡"</p></li><li><p>åŸç†åˆ†æ:</p><ul><li>å½“å¤šä¸ªç”¨æˆ·è¿›ç¨‹æå‡ºè¾“å‡ºæ‰“å°çš„è¯·æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šç­”åº”å®ƒä»¬çš„è¯·æ±‚ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯çœŸæ­£æŠŠæ‰“å°æœºåˆ†é…ç»™ä»–ä»¬ï¼Œè€Œæ˜¯ç”±å‡è„±æœºç®¡ç†è¿›ç¨‹ä¸ºæ¯ä¸ªè¿›ç¨‹åšä¸¤ä»¶äº‹:<ul><li>åœ¨ç£ç›˜è¾“å‡ºäº•ä¸­ä¸ºè¿›ç¨‹ç”³è¯·ä¸€ä¸ªç©ºé—²ç¼“å†²åŒº(ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç¼“å†²åŒºæ˜¯åœ¨ç£ç›˜ä¸Šçš„)ï¼Œå¹¶å°†è¦æ‰“å°çš„æ•°æ®é€å…¥å…¶ä¸­</li><li>ä¸ºç”¨æˆ·è¿›ç¨‹ç”³è¯·ä¸€å¼ ç©ºç™½çš„æ‰“å°è¯·æ±‚è¡¨ï¼Œå¹¶å°†ç”¨æˆ·çš„æ‰“å°è¯·æ±‚å¡«å…¥è¡¨ä¸­(å…¶å®å°±æ˜¯ç”¨æ¥è¯´æ˜ç”¨æˆ·çš„æ‰“å°æ•°æ®å­˜æ”¾ä½ç½®ç­‰ä¿¡æ¯çš„)ï¼Œå†å°†è¯¥è¡¨æŒ‚åˆ°å‡è„±æœºæ–‡ä»¶é˜Ÿåˆ—ä¸Šã€‚å½“æ‰“å°æœºç©ºé—²æ—¶ï¼Œè¾“å‡ºè¿›ç¨‹ä¼šä»æ–‡ä»¶é˜Ÿåˆ—çš„é˜Ÿå¤´å–å‡ºä¸€å¼ æ‰“å°è¯·æ±‚è¡¨ï¼Œå¹¶æ ¹æ®è¡¨ä¸­çš„è¦æ±‚å°†è¦æ‰“å°çš„æ•°æ®ä»è¾“å‡ºäº•ä¼ é€åˆ°è¾“å‡ºç¼“å†²åŒºï¼Œå†è¾“å‡ºåˆ°æ‰“å°æœºè¿›è¡Œæ‰“å°ã€‚ç”¨è¿™ç§æ–¹å¼å¯ä¾æ¬¡å¤„ç†å®Œå…¨éƒ¨çš„æ‰“å°ä»»åŠ¡</li></ul></li><li>è™½ç„¶ç³»ç»Ÿä¸­åªæœ‰ä¸€å°æ‰“å°æœº, ä½†æ¯ä¸ªè¿›ç¨‹æå‡ºæ‰“å°è¯·æ±‚æ—¶,ç³»ç»Ÿéƒ½ä¼šä¸ºå®ƒä»¬åœ¨è¾“å‡ºäº•ä¸­ä¸ºå…¶åˆ†é…ä¸€ä¸ªå­˜å‚¨åŒº(ç›¸å½“äºåˆ†é…äº†ä¸€ä¸ªé€»è¾‘è®¾å¤‡),ä½¿æ¯ä¸ªç”¨æˆ·è¿›ç¨‹éƒ½è§‰å¾—è‡ªå·±åœ¨ç‹¬å ä¸€å°æ‰“å°æœº, ä»è€Œå®ç°å¯¹æ‰“å°æœºçš„å…±äº«</li><li><strong>SPOOLingæŠ€æœ¯</strong>å¯ä»¥æŠŠä¸€å°ç‰©ç†è®¾å¤‡è™šæ‹Ÿæˆé€»è¾‘ä¸Šçš„å¤šå°è®¾å¤‡,å¯å°†ç‹¬å å¼è®¾å¤‡æ”¹é€ æˆå…±äº«è®¾å¤‡</li></ul></li></ul><h2 id="è®¾å¤‡çš„åˆ†é…ä¸å›æ”¶"><strong>3. è®¾å¤‡çš„åˆ†é…ä¸å›æ”¶</strong></h2><h3 id="è®¾å¤‡åˆ†é…æ—¶åº”è¯¥è€ƒè™‘å“ªäº›å› ç´ ">3.1<strong>è®¾å¤‡åˆ†é…æ—¶åº”è¯¥è€ƒè™‘å“ªäº›å› ç´ </strong></h3><ul><li><strong>è®¾å¤‡çš„å›ºæœ‰å±æ€§</strong><ul><li>ç‹¬å è®¾å¤‡: ä¸€ä¸ªæ—¶æ®µåªèƒ½åˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹(å¦‚æ‰“å°æœº)</li><li>å…±äº«è®¾å¤‡: å¯åŒæ—¶åˆ†é…ç»™å¤šä¸ªè¿›ç¨‹ä½¿ç”¨(å¦‚ç£ç›˜),å„è¿›ç¨‹å¾€å¾€æ˜¯å®è§‚ä¸ŠåŒæ—¶å…±äº«ä½¿ç”¨è®¾å¤‡, è€Œå¾®è§‚ä¸Šäº¤æ›¿ä½¿ç”¨</li><li>è™šæ‹Ÿè®¾å¤‡: é‡‡ç”¨SPOOLingæŠ€æœ¯å°†ç‹¬å è®¾å¤‡æ”¹é€ æˆè™šæ‹Ÿçš„å…±äº«è®¾å¤‡,å¯åŒæ—¶åˆ†é…ç»™å¤šä¸ªè¿›ç¨‹ä½¿ç”¨(å¦‚é‡‡ç”¨SPOOLingæŠ€æœ¯å®ç°çš„å…±äº«æ‰“å°æœº)</li></ul></li><li><strong>è®¾å¤‡åˆ†é…ç®—æ³•</strong><ul><li>å…ˆæ¥å…ˆæœåŠ¡ã€ä¼˜å…ˆçº§é«˜è€…ä¼˜å…ˆã€çŸ­ä»»åŠ¡ä¼˜å…ˆ...</li></ul></li><li><strong>è®¾å¤‡åˆ†é…ä¸­çš„å®‰å…¨æ€§</strong><ul><li>ä»è¿›ç¨‹è¿è¡Œçš„å®‰å…¨æ€§ä¸Šè€ƒè™‘, è®¾å¤‡åˆ†é…æœ‰ä¸¤ç§æ–¹å¼:</li><li><strong>å®‰å…¨åˆ†é…æ–¹å¼</strong>: ä¸ºè¿›ç¨‹åˆ†é…ä¸€ä¸ªè®¾å¤‡åå°±å°†è¿›ç¨‹é˜»å¡,æœ¬æ¬¡I/Oå®Œæˆåæ‰å°†è¿›ç¨‹å”¤é†’<ul><li>Eg: è€ƒè™‘è¿›ç¨‹è¯·æ±‚æ‰“å°æœºæ‰“å°è¾“å‡ºçš„ä¾‹å­</li><li>ä¸€ä¸ªæ—¶é—´æ®µå†…æ¯ä¸ªè¿›ç¨‹åªèƒ½ä½¿ç”¨ä¸€ä¸ªè®¾å¤‡</li><li>ä¼˜ç‚¹: ç ´åäº†"è¯·æ±‚å’Œä¿æŒ"æ¡ä»¶, ä¸ä¼šæ­»é”</li><li>ç¼ºç‚¹: å¯¹äºä¸€ä¸ªè¿›ç¨‹æ¥è¯´, CPUå’ŒI/Oè®¾å¤‡åªèƒ½ä¸²è¡Œå·¥ä½œ</li></ul></li><li><strong>ä¸å®‰å…¨åˆ†é…æ–¹å¼</strong>: è¿›ç¨‹å‘å‡ºI/Oè¯·æ±‚å,ç³»ç»Ÿä¸ºå…¶åˆ†é…I/Oè®¾å¤‡, è¿›ç¨‹å¯ç»§ç»­æ‰§è¡Œ, ä¹‹åè¿˜å¯ä»¥å‘å‡ºæ–°çš„I/Oè¯·æ±‚,åªæœ‰æŸä¸ªI/Oè¯·æ±‚å¾—ä¸åˆ°æ»¡è¶³æ—¶æ‰å°†è¿›ç¨‹é˜»å¡<ul><li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªè®¾å¤‡</li><li>ä¼˜ç‚¹: è¿›ç¨‹çš„è®¡ç®—ä»»åŠ¡å’ŒI/Oä»»åŠ¡å¯ä»¥å¹¶è¡Œå¤„ç†, ä½¿è¿›ç¨‹è¿…é€Ÿæ¨è¿›</li><li>ç¼ºç‚¹:æœ‰å¯èƒ½å‘ç”Ÿæ­»é”(é‡‡ç”¨æ­»é”é¿å…ã€æ­»é”çš„æ£€æµ‹å’Œè§£é™¤å¤„ç†æ­»é”é—®é¢˜)</li></ul></li></ul></li></ul><h3 id="é™æ€åˆ†é…å’ŒåŠ¨æ€åˆ†é…">3.2 <strong>é™æ€åˆ†é…å’ŒåŠ¨æ€åˆ†é…</strong></h3><ul><li>é™æ€åˆ†é…: è¿›ç¨‹è¿è¡Œå‰ä¸ºå…¶åˆ†é…å…¨éƒ¨æ‰€éœ€èµ„æº, è¿è¡Œç»“æŸåå½’è¿˜èµ„æº<ul><li>ç ´åäº†"è¯·æ±‚å’Œä¿æŒ"æ¡ä»¶, ä¸ä¼šå‘ç”Ÿæ­»é”</li></ul></li><li>åŠ¨æ€åˆ†é…: è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ç”³è¯·è®¾å¤‡èµ„æº</li></ul><h3 id="è®¾å¤‡åˆ†é…ç®¡ç†ä¸­çš„æ•°æ®ç»“æ„">3.3<strong>è®¾å¤‡åˆ†é…ç®¡ç†ä¸­çš„æ•°æ®ç»“æ„</strong></h3><ul><li><p>â€è®¾å¤‡ã€æ§åˆ¶å™¨ã€é€šé“â€œä¹‹é—´çš„å…³ç³»â€œ:</p><ul><li>ä¸€ä¸ªé€šé“å¯æ§åˆ¶å¤šä¸ªè®¾å¤‡æ§åˆ¶å™¨, æ¯ä¸ªè®¾å¤‡æ§åˆ¶å™¨å¯æ§åˆ¶å¤šä¸ªè®¾å¤‡</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122105107110.png"></p></li><li><p><strong>è®¾å¤‡æ§åˆ¶è¡¨(DCT)</strong></p><ul><li>ç³»ç»Ÿä¸ºæ¯ä¸ªè®¾å¤‡é…ç½®ä¸€å¼ DCT, ç”¨äºè®°å½•è®¾å¤‡æƒ…å†µ</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122104823020.png"></p></li><li><p><strong>æ§åˆ¶å™¨æ§åˆ¶è¡¨(COCT)</strong></p><ul><li>æ¯ä¸ªè®¾å¤‡æ§åˆ¶å™¨éƒ½ä¼šå¯¹åº”ä¸€å¼ COCT,æ“ä½œç³»ç»Ÿæ ¹æ®COCTçš„ä¿¡æ¯å¯¹æ§åˆ¶å™¨è¿›è¡Œæ“ä½œå’Œç®¡ç†</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122104842310.png"></p></li><li><p><strong>é€šé“æ§åˆ¶è¡¨(CHCT)</strong></p><ul><li>æ¯ä¸ªé€šé“éƒ½ä¼šå¯¹åº”ä¸€å¼ CHCT,æ“ä½œç³»ç»Ÿæ ¹æ®CHCTçš„ä¿¡æ¯å¯¹é€šé“è¿›è¡Œæ“ä½œå’Œç®¡ç†</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122104858368.png"></p></li><li><p><strong>ç³»ç»Ÿè®¾å¤‡è¡¨(SDT)</strong></p><ul><li>è®°å½•äº†ç³»ç»Ÿä¸­å…¨éƒ¨è®¾å¤‡çš„æƒ…å†µ, æ¯ä¸ªè®¾å¤‡å¯¹åº”ä¸€ä¸ªè¡¨ç›®</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122105007101.png"></p></li></ul><h3 id="è®¾å¤‡åˆ†é…çš„æ­¥éª¤">3.4 <strong>è®¾å¤‡åˆ†é…çš„æ­¥éª¤</strong></h3><ul><li><strong>æ­¥éª¤</strong>:<ul><li>æ ¹æ®è¿›ç¨‹è¯·æ±‚çš„<strong>ç‰©ç†è®¾å¤‡å</strong>æŸ¥æ‰¾SDT(æ³¨:ç‰©ç†è®¾å¤‡åæ˜¯è¿›ç¨‹è¯·æ±‚åˆ†é…è®¾å¤‡æ—¶æä¾›çš„å‚æ•°)</li><li>æ ¹æ®SDTæ‰¾åˆ°DCTï¼Œè‹¥è®¾å¤‡å¿™ç¢Œåˆ™å°†è¿›ç¨‹PCBæŒ‚åˆ°è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸å¿™ç¢Œåˆ™å°†è®¾å¤‡åˆ†é…ç»™è¿›ç¨‹</li><li>æ ¹æ®DCTæ‰¾åˆ°COCTï¼Œè‹¥æ§åˆ¶å™¨å¿™ç¢Œåˆ™å°†è¿›ç¨‹PCBæŒ‚åˆ°æ§åˆ¶å™¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸å¿™ç¢Œåˆ™å°†æ§åˆ¶å™¨åˆ†é…ç»™è¿›ç¨‹</li><li>æ ¹æ®COCTæ‰¾åˆ°CHCT,è‹¥é€šé“å¿™ç¢Œåˆ™å°†è¿›ç¨‹PCBæŒ‚åˆ°é€šé“ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸å¿™ç¢Œåˆ™å°†é€šé“åˆ†é…ç»™è¿›ç¨‹</li></ul></li><li>æ³¨: åªæœ‰è®¾å¤‡ã€æ§åˆ¶å™¨ã€é€šé“ä¸‰è€…éƒ½åˆ†é…æˆåŠŸæ—¶, è¿™æ¬¡è®¾å¤‡åˆ†é…æ‰ç®—æˆåŠŸ,ä¹‹åä¾¿å¯å¯åŠ¨I/Oè®¾å¤‡è¿›è¡Œæ•°æ®ä¼ é€<ul><li>ç¼ºç‚¹:<ul><li>ç”¨æˆ·ç¼–ç¨‹æ—¶å¿…é¡»ä½¿ç”¨â€œç‰©ç†è®¾å¤‡åâ€ï¼Œåº•å±‚ç»†èŠ‚å¯¹ç”¨æˆ·ä¸é€æ˜ï¼Œä¸æ–¹ä¾¿ç¼–ç¨‹</li><li>è‹¥æ¢äº†ä¸€ä¸ªç‰©ç†è®¾å¤‡ï¼Œåˆ™ç¨‹åºæ— æ³•è¿è¡Œ</li><li>è‹¥è¿›ç¨‹è¯·æ±‚çš„ç‰©ç†è®¾å¤‡æ­£åœ¨å¿™ç¢Œï¼Œåˆ™å³ä½¿ç³»ç»Ÿä¸­è¿˜æœ‰åŒç±»å‹çš„è®¾å¤‡ï¼Œè¿›ç¨‹ä¹Ÿå¿…é¡»é˜»å¡ç­‰å¾…</li></ul></li><li>æ”¹è¿›æ–¹æ³•:<ul><li>å»ºç«‹é€»è¾‘è®¾å¤‡åä¸ç‰©ç†è®¾å¤‡åçš„æ˜ å°„æœºåˆ¶ï¼Œç”¨æˆ·ç¼–ç¨‹æ—¶åªéœ€æä¾›é€»è¾‘è®¾å¤‡å</li></ul></li></ul></li><li><strong>æ”¹è¿›çš„æ­¥éª¤</strong>:<ul><li>æ ¹æ®è¿›ç¨‹è¯·æ±‚çš„<strong>é€»è¾‘è®¾å¤‡å</strong>æŸ¥æ‰¾SDT(æ³¨:ç”¨æˆ·ç¼–ç¨‹æ—¶æä¾›çš„é€»è¾‘è®¾å¤‡åå…¶å®å°±æ˜¯â€œè®¾å¤‡ç±»å‹â€)</li><li>æŸ¥æ‰¾SDTï¼Œæ‰¾åˆ°ç”¨æˆ·è¿›ç¨‹æŒ‡å®šç±»å‹çš„ã€å¹¶ä¸”ç©ºé—²çš„è®¾å¤‡ï¼Œå°†å…¶åˆ†é…ç»™è¯¥è¿›ç¨‹ã€‚æ“ä½œç³»ç»Ÿåœ¨<strong>é€»è¾‘è®¾å¤‡è¡¨(LUT)</strong>ä¸­æ–°å¢ä¸€ä¸ªè¡¨é¡¹</li><li>æ ¹æ®DCTæ‰¾åˆ°COCTï¼Œè‹¥æ§åˆ¶å™¨å¿™ç¢Œåˆ™å°†è¿›ç¨‹PCBæŒ‚åˆ°æ§åˆ¶å™¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸å¿™ç¢Œåˆ™å°†æ§åˆ¶å™¨åˆ†é…ç»™è¿›ç¨‹</li><li>æ ¹æ®COCTæ‰¾åˆ°CHCT,è‹¥é€šé“å¿™ç¢Œåˆ™å°†è¿›ç¨‹PCBæŒ‚åˆ°é€šé“ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸å¿™ç¢Œåˆ™å°†é€šé“åˆ†é…ç»™è¿›ç¨‹</li></ul></li><li><strong>é€»è¾‘è®¾å¤‡è¡¨(LUT)</strong><ul><li>é€»è¾‘è®¾å¤‡è¡¨(LUT) å»ºç«‹äº†é€»è¾‘è®¾å¤‡åä¸ç‰©ç†è®¾å¤‡åä¹‹é—´çš„æ˜ å°„å…³ç³»</li><li>æŸç”¨æˆ·è¿›ç¨‹ç¬¬ä¸€æ¬¡ä½¿ç”¨è®¾å¤‡æ—¶ä½¿ç”¨é€»è¾‘è®¾å¤‡åå‘æ“ä½œç³»ç»Ÿå‘å‡ºè¯·æ±‚ï¼Œæ“ä½œç³»ç»Ÿæ ¹æ®ç”¨æˆ·è¿›ç¨‹æŒ‡å®šçš„è®¾å¤‡ç±»å‹(é€»è¾‘è®¾å¤‡å)æŸ¥æ‰¾ç³»ç»Ÿè®¾å¤‡è¡¨ï¼Œæ‰¾åˆ°ä¸€ä¸ªç©ºé—²è®¾å¤‡åˆ†é…ç»™è¿›ç¨‹ï¼Œå¹¶åœ¨LUTä¸­å¢åŠ ç›¸åº”è¡¨é¡¹</li><li>å¦‚æœä¹‹åç”¨æˆ·è¿›ç¨‹å†æ¬¡é€šè¿‡ç›¸åŒçš„é€»è¾‘è®¾å¤‡åè¯·æ±‚ä½¿ç”¨è®¾å¤‡,åˆ™æ“ä½œç³»ç»Ÿé€šè¿‡LUTè¡¨å³å¯çŸ¥é“ç”¨æˆ·è¿›ç¨‹å®é™…è¦ä½¿ç”¨çš„æ˜¯å“ªä¸ªç‰©ç†è®¾å¤‡äº†ï¼Œå¹¶ä¸”ä¹Ÿèƒ½çŸ¥é“è¯¥è®¾å¤‡çš„é©±åŠ¨ç¨‹åºå…¥å£åœ°å€</li><li>é€»è¾‘è®¾å¤‡è¡¨çš„è®¾ç½®é—®é¢˜:<ul><li><strong>æ•´ä¸ªç³»ç»Ÿåªæœ‰ä¸€å¼ LUT</strong>:å„ç”¨æˆ·æ‰€ç”¨çš„<strong>é€»è¾‘è®¾å¤‡åä¸å…è®¸é‡å¤</strong>ï¼Œ<strong>é€‚ç”¨äºå•ç”¨æˆ·æ“ä½œç³»ç»Ÿ</strong></li><li><strong>æ¯ä¸ªç”¨æˆ·ä¸€å¼ LUT</strong>:<strong>ä¸åŒç”¨æˆ·çš„é€»è¾‘è®¾å¤‡åå¯é‡å¤</strong>ï¼Œ<strong>é€‚ç”¨äºå¤šç”¨æˆ·æ“ä½œç³»ç»Ÿ</strong></li></ul></li></ul></li></ul><h2 id="ç¼“å†²åŒºç®¡ç†"><strong>4. ç¼“å†²åŒºç®¡ç†</strong></h2><h3 id="ç¼“å†²åŒºçš„æ¦‚å¿µ">4.1 <strong>ç¼“å†²åŒºçš„æ¦‚å¿µ</strong></h3><ul><li><p>ç¼“å†²åŒºæ˜¯ä¸€ä¸ªå­˜å‚¨åŒºåŸŸï¼Œå¯ä»¥ç”±ä¸“é—¨çš„ç¡¬ä»¶å¯„å­˜å™¨ç»„æˆï¼Œä¹Ÿå¯åˆ©ç”¨å†…å­˜ä½œä¸ºç¼“å†²åŒº</p></li><li><p>ä½¿ç”¨<strong>ç¡¬ä»¶ä½œä¸ºç¼“å†²åŒº</strong>çš„æˆæœ¬è¾ƒé«˜ï¼Œå®¹é‡ä¹Ÿè¾ƒå°ï¼Œä¸€èˆ¬ä»…ç”¨åœ¨å¯¹é€Ÿåº¦è¦æ±‚éå¸¸é«˜çš„åœºåˆ(å¦‚**å­˜å‚¨å™¨*ç®¡ç†**ä¸­æ‰€ç”¨çš„è”æƒ³å¯„å­˜å™¨ï¼Œç”±äºå¯¹é¡µè¡¨çš„è®¿é—®é¢‘ç‡æé«˜ï¼Œå› æ­¤ä½¿ç”¨é€Ÿåº¦å¾ˆå¿«çš„è”æƒ³å¯„å­˜å™¨æ¥å­˜æ”¾é¡µè¡¨é¡¹çš„å‰¯æœ¬)</p></li><li><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ›´å¤šçš„æ˜¯åˆ©ç”¨<strong>å†…å­˜ä½œä¸ºç¼“å†²åŒº</strong>ï¼Œâ€œ<strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</strong>â€çš„ç¼“å†²åŒºç®¡ç†å°±æ˜¯è¦ç»„ç»‡ç®¡ç†å¥½è¿™äº›ç¼“å†²åŒº</p></li></ul><h3 id="ç¼“å†²åŒºçš„ä½œç”¨">4.2 <strong>ç¼“å†²åŒºçš„ä½œç”¨</strong></h3><ul><li>ç¼“å’ŒCPUä¸I/Oè®¾å¤‡ä¹‹é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾<ul><li>CPUå¯ä»¥æŠŠè¦è¾“å‡ºçš„æ•°æ®å¿«é€Ÿåœ°æ”¾å…¥ç¼“å†²åŒº, ä¹‹åå°±å¯ä»¥åšåˆ«çš„äº‹;æ…¢é€Ÿçš„I/Oè®¾å¤‡å¯ä»¥æ…¢æ…¢ä»ç¼“å†²åŒºå–èµ°æ•°æ®</li><li>æ•°æ®è¾“å…¥æ—¶ç±»ä¼¼</li></ul></li><li>å‡å°‘å¯¹CPUçš„ä¸­æ–­é¢‘ç‡ï¼Œæ”¾å®½å¯¹CPUä¸­æ–­å“åº”æ—¶é—´çš„é™åˆ¶<ul><li>å¦‚æœæ²¡æœ‰ç¼“å†²åŒº,å­—ç¬¦å‹è®¾å¤‡æ¯è¾“å‡ºå®Œä¸€ä¸ªå­—ç¬¦å°±è¦å‘CPUå‘é€ä¸€æ¬¡ä¸­æ–­ä¿¡å·</li></ul></li><li>è§£å†³æ•°æ®ç²’åº¦ä¸åŒ¹é…çš„é—®é¢˜<ul><li>å¦‚è¾“å‡ºè¿›ç¨‹æ¯æ¬¡å¯ä»¥ç”Ÿæˆä¸€å—æ•°æ®, ä½†I/Oè®¾å¤‡æ¯æ¬¡åªèƒ½è¾“å‡ºä¸€ä¸ªå­—ç¬¦</li></ul></li><li>æé«˜CPUä¸I/Oè®¾å¤‡ä¹‹é—´çš„å¹¶è¡Œæ€§</li></ul><h3 id="å•ç¼“å†²">4.3 <strong>å•ç¼“å†²</strong></h3><ul><li><p>å‡è®¾æŸç”¨æˆ·è¿›ç¨‹è¯·æ±‚æŸç§å—è®¾å¤‡è¯»å…¥è‹¥å¹²å—çš„æ•°æ®ã€‚è‹¥é‡‡ç”¨<strong>å•ç¼“å†²</strong>çš„ç­–ç•¥ï¼Œæ“ä½œç³»ç»Ÿä¼š<strong>åœ¨ä¸»å­˜ä¸­ä¸ºå…¶åˆ†é…ä¸€ä¸ªç¼“å†²åŒº</strong>(è‹¥é¢˜ç›®ä¸­æ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œä¸€ä¸ªç¼“å†²åŒºçš„å¤§å°å°±æ˜¯ä¸€ä¸ªå—)</p><ul><li>æ³¨æ„:<strong>å½“ç¼“å†²åŒºæ•°æ®éç©ºæ—¶ï¼Œä¸èƒ½å¾€ç¼“å†²åŒºå†²å…¥æ•°æ®ï¼Œåªèƒ½ä»ç¼“å†²åŒºæŠŠæ•°æ®ä¼ å‡º;å½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œå¯ä»¥å¾€ç¼“å†²åŒºå†²å…¥æ•°æ®ï¼Œä½†å¿…é¡»æŠŠç¼“å†²åŒºå……æ»¡ä»¥åï¼Œæ‰èƒ½ä»ç¼“å†²åŒºæŠŠæ•°æ®ä¼ å‡º</strong></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122105801865.png"></p></li><li><p><strong>æ¯å¤„ç†ä¸€å—æ•°æ®å¹³å‡éœ€è¦å¤šä¹…?</strong></p><ul><li><p>T &gt; C</p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122105830197.png"></p></li><li><p>T &lt; C</p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122105915924.png"></p></li><li><p>ç»“è®º: é‡‡ç”¨å•ç¼“å†²ç­–ç•¥, å¤„ç†ä¸€å—æ•°æ®å¹³å‡è€—æ—¶ä¸º Max(C, T) + M</p><ul><li>å¯ä»¥è¿™æ ·ç†è§£:</li><li>å½“T &gt; Cæ—¶, è®¤ä¸ºTæå¤§, è¿™æ ·ä¸€æ¬¡æ•°æ®ä¼ è¾“æ—¶é—´ä¸»è¦ä¸ºT, è€Œç”±äºå•ç¼“å†²,Tä¸Mä¸èƒ½åŒæ—¶æ‰§è¡Œ, æ‰€ä»¥ä¼ è¾“æ—¶é—´ä¸º T + M</li><li>å½“T &lt; Cæ—¶, è®¤ä¸ºTæ— é™æ¥è¿‘äº0, ç›¸å½“äºç¼“å†²åŒºæ€»æ˜¯æ»¡çš„çŠ¶æ€,è¿™æ ·ä¸€æ¬¡çš„æ•°æ®ä¼ è¾“æ¶ˆè€—çš„æ—¶é—´å°±æ˜¯C + M</li></ul></li></ul></li></ul><h3 id="åŒç¼“å†²">4.4 <strong>åŒç¼“å†²</strong></h3><ul><li><p>å‡è®¾æŸç”¨æˆ·è¿›ç¨‹è¯·æ±‚æŸç§å—è®¾å¤‡è¯»å…¥è‹¥å¹²å—çš„æ•°æ®ã€‚è‹¥é‡‡ç”¨<strong>åŒç¼“å†²</strong>çš„ç­–ç•¥ï¼Œæ“ä½œç³»ç»Ÿä¼š<strong>åœ¨ä¸»å­˜ä¸­ä¸ºå…¶åˆ†é…ä¸¤ä¸ªç¼“å†²åŒº</strong>(è‹¥é¢˜ç›®ä¸­æ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œä¸€ä¸ªç¼“å†²åŒºçš„å¤§å°å°±æ˜¯ä¸€ä¸ªå—)</p></li><li><p><strong>æ¯å¤„ç†ä¸€å—æ•°æ®å¹³å‡éœ€è¦å¤šä¹…?</strong></p><ul><li><p>åŒç¼“å†²é¢˜ç›®ä¸­, å‡è®¾åˆå§‹çŠ¶æ€ä¸º: å·¥ä½œåŒºç©º, å…¶ä¸­ä¸€ä¸ªç¼“å†²åŒºæ»¡,å¦ä¸€ä¸ªç¼“å†²åŒºç©º</p></li><li><p>T &gt; C + M</p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122110227430.png"></p></li><li><p>T &lt; C + M</p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122110243845.png"></p></li><li><p>ç»“è®º: é‡‡ç”¨åŒç¼“å†²ç­–ç•¥, å¤„ç†ä¸€ä¸ªæ•°æ®å—çš„å¹³å‡è€—æ—¶ä¸º Max(T, C +M)</p><ul><li>å¯ä»¥è¿™æ ·ç†è§£:<ul><li>å½“T &gt; C + Mæ—¶, è®¤ä¸ºTæå¤§, è¿™æ ·ä¸€æ¬¡æ•°æ®ä¼ è¾“æ—¶é—´ä¸ºT, è€Œç”±äºåŒç¼“å†²,Tä¸Mèƒ½å¤ŸåŒæ—¶æ‰§è¡Œ, æ‰€ä»¥ä¼ è¾“æ—¶é—´ä¸º T</li><li>å½“T &lt; C + Mæ—¶, è®¤ä¸ºTæ— é™æ¥è¿‘äº0, ç›¸å½“äºç¼“å†²åŒºæ€»æ˜¯æ»¡çš„çŠ¶æ€,è¿™æ ·ä¸€æ¬¡çš„æ•°æ®ä¼ è¾“æ¶ˆè€—çš„æ—¶é—´å°±æ˜¯C + M</li></ul></li></ul></li></ul></li></ul><h3 id="ä½¿ç”¨å•åŒç¼“å†²åœ¨é€šä¿¡æ—¶çš„åŒºåˆ«">4.5<strong>ä½¿ç”¨å•/åŒç¼“å†²åœ¨é€šä¿¡æ—¶çš„åŒºåˆ«</strong></h3><ul><li>ä¸¤å°æœºå™¨ä¹‹é—´é€šä¿¡æ—¶, å¯ä»¥é…ç½®ç¼“å†²åŒºç”¨äºæ•°æ®çš„å‘é€å’Œæ¥æ”¶</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122110402354.png"></p><ul><li>æ˜¾ç„¶, è‹¥ä¸¤ä¸ªç›¸äº’é€šä¿¡çš„æœºå™¨åªè®¾ç½®å•ç¼“å†²åŒº,åœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½å®ç°æ•°æ®çš„å•å‘ä¼ è¾“</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122110422084.png"></p><ul><li>è‹¥ä¸¤ä¸ªç›¸äº’é€šä¿¡çš„æœºå™¨è®¾ç½®åŒç¼“å†²åŒº,åˆ™åŒä¸€æ—¶åˆ»å¯ä»¥å®ç°åŒå‘çš„æ•°æ®ä¼ è¾“</li></ul><h3 id="å¾ªç¯ç¼“å†²">4.6 <strong>å¾ªç¯ç¼“å†²</strong></h3><ul><li>å°†å¤šä¸ªå¤§å°ç›¸ç­‰çš„ç¼“å†²åŒºé“¾æ¥æˆä¸€ä¸ªå¾ªç¯é˜Ÿåˆ—</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122110437329.png"></p><h3 id="ç¼“å†²æ± ">4.7 <strong>ç¼“å†²æ± </strong></h3><ul><li><p><strong>ç¼“å†²æ± </strong>ç”±ç³»ç»Ÿä¸­å…±ç”¨çš„ç¼“å†²åŒºç»„æˆ</p></li><li><p>è¿™äº›ç¼“å†²åŒºæŒ‰ä½¿ç”¨çŠ¶å†µå¯ä»¥åˆ†ä¸º:<strong>ç©ºç¼“å†²é˜Ÿåˆ—</strong>ã€è£…æ»¡è¾“å…¥æ•°æ®çš„ç¼“å†²é˜Ÿåˆ—(<strong>è¾“å…¥é˜Ÿåˆ—</strong>)ã€è£…æ»¡è¾“å‡ºæ•°æ®çš„ç¼“å†²é˜Ÿåˆ—(<strong>è¾“å‡ºé˜Ÿåˆ—</strong>)</p></li><li><p>å¦å¤–ï¼Œæ ¹æ®ä¸€ä¸ªç¼“å†²åŒºåœ¨å®é™…è¿ç®—ä¸­æ‰®æ¼”çš„åŠŸèƒ½ä¸åŒï¼Œåˆè®¾ç½®äº†å››ç§å·¥ä½œç¼“å†²åŒº:<strong>ç”¨äºæ”¶å®¹è¾“å…¥æ•°æ®çš„å·¥ä½œç¼“å†²åŒº(hin)</strong>ã€<strong>ç”¨äºæå–è¾“å…¥æ•°æ®çš„å·¥ä½œç¼“å†²åŒº(sin)</strong>ã€<strong>ç”¨äºæ”¶å®¹è¾“å‡ºæ•°æ®çš„å·¥ä½œç¼“å†²åŒº(hout)</strong>ã€<strong>ç”¨äºæå–è¾“å‡ºæ•°æ®çš„å·¥ä½œç¼“å†²åŒº(sout)</strong></p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-2-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%BD%AF%E4%BB%B6/image-20241122110532369.png"></p><ul><li><strong>åŸç†</strong>:<ul><li>è¾“å…¥è¿›ç¨‹è¯·æ±‚è¾“å…¥æ•°æ®<ul><li>ä» ç©ºç¼“å†²é˜Ÿåˆ— é˜Ÿå¤´å–å‡ºä¸€å—ç©ºçš„ç¼“å†²åŒºä½œä¸ºæ”¶å®¹è¾“å…¥æ•°æ®çš„å·¥ä½œç¼“å†²åŒº(hin), å†²æ»¡æ•°æ®åå°†ç¼“å†²åŒºæŒ‚åˆ°è¾“å…¥é˜Ÿåˆ—é˜Ÿå°¾</li></ul></li><li>è®¡ç®—è¿›ç¨‹æƒ³è¦å–å¾—ä¸€å—è¾“å…¥æ•°æ®<ul><li>ä» è¾“å…¥é˜Ÿåˆ— é˜Ÿå¤´å–ä¸‹ä¸€å—ç¼“å†²åŒºä½œä¸º æå–è¾“å…¥æ•°æ®çš„å·¥ä½œç¼“å†²åŒº(sin),ç¼“å†²åŒºè¯»ç©ºåæŒ‚åˆ°ç©ºç¼“å†²é˜Ÿåˆ—é˜Ÿå°¾</li></ul></li><li>è®¡ç®—è¿›ç¨‹æƒ³è¦å°†å‡†å¤‡å¥½çš„æ•°æ®å†²å…¥ç¼“å†²åŒº<ul><li>ä» ç©ºç¼“å†²é˜Ÿåˆ— é˜Ÿå¤´å–å‡ºä¸€å—ç©ºçš„ç¼“å†²åŒºä½œä¸ºæ”¶å®¹è¾“å‡ºæ•°æ®çš„å·¥ä½œç¼“å†²åŒº(hout), å†²æ»¡æ•°æ®åå°†ç¼“å†²åŒºæŒ‚åˆ° è¾“å‡ºé˜Ÿåˆ—é˜Ÿå°¾</li></ul></li><li>è¾“å‡ºè¿›ç¨‹è¯·æ±‚è¾“å‡ºæ•°æ®<ul><li>ä» è¾“å‡ºé˜Ÿåˆ— é˜Ÿå¤´å–ä¸‹ä¸€å—ç¼“å†²åŒºä½œä¸º æå–è¾“å‡ºæ•°æ®çš„å·¥ä½œç¼“å†²åŒº(sout),ç¼“å†²åŒºè¯»ç©ºåæŒ‚åˆ°ç©ºç¼“å†²é˜Ÿåˆ— é˜Ÿå°¾</li></ul></li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬äº”ç«  è®¾å¤‡ç®¡ç†-5.1 IOç®¡ç†æ¦‚è¿°</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ioç®¡ç†æ¦‚è¿°"><strong>5.1 I/Oç®¡ç†æ¦‚è¿°</strong></h1><h3 id="ioè®¾å¤‡çš„æ¦‚å¿µå’Œåˆ†ç±»"><strong>1. IOè®¾å¤‡çš„æ¦‚å¿µå’Œåˆ†ç±»</strong></h3><h3 id="ä»€ä¹ˆæ˜¯ioè®¾å¤‡">1.1 <strong>ä»€ä¹ˆæ˜¯I/Oè®¾å¤‡?</strong></h3><ul><li><p>"<strong>I/O</strong>"å°±æ˜¯"<strong>è¾“å…¥/è¾“å‡º</strong>"(Input/Output)</p></li><li><p>I/Oè®¾å¤‡å°±æ˜¯å¯ä»¥å°†æ•°æ®è¾“å…¥åˆ°è®¡ç®—æœº,æˆ–è€…å¯ä»¥æ¥æ”¶è®¡ç®—æœºè¾“å‡ºæ•°æ®çš„å¤–éƒ¨è®¾å¤‡, å±äºè®¡ç®—æœºä¸­çš„ç¡¬ä»¶éƒ¨ä»¶</p><ul><li>é¼ æ ‡ã€é”®ç›˜ -- å…¸å‹çš„è¾“å…¥å‹è®¾å¤‡</li><li>æ˜¾ç¤ºå™¨ -- è¾“å‡ºå‹è®¾å¤‡</li><li>ç§»åŠ¨ç¡¬ç›˜ -- æ—¢å¯è¾“å…¥ã€åˆå¯è¾“å‡ºçš„è®¾å¤‡</li></ul></li><li><p>UNIXç³»ç»Ÿå°†å¤–éƒ¨è®¾å¤‡æŠ½è±¡ä¸ºä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶,ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸æ–‡ä»¶ç³»ç»Ÿç›¸åŒçš„æ–¹å¼å¯¹å¤–éƒ¨è®¾å¤‡è¿›è¡Œæ“ä½œ</p><ul><li>Writeæ“ä½œ: å‘å¤–éƒ¨è®¾å¤‡å†™å‡ºæ•°æ®</li><li>Readæ“ä½œ: ä»å¤–éƒ¨è®¾å¤‡è¯»å…¥æ•°æ®</li></ul></li></ul><h3 id="ioè®¾å¤‡çš„åˆ†ç±»">1.2 <strong>I/Oè®¾å¤‡çš„åˆ†ç±»</strong></h3><ul><li><strong>æŒ‰ä½¿ç”¨ç‰¹æ€§åˆ†ç±»</strong><ul><li>äººæœºäº¤äº’ç±»å¤–éƒ¨è®¾å¤‡: æ•°æ®ä¼ è¾“é€Ÿåº¦æ…¢<ul><li>é¼ æ ‡ã€é”®ç›˜ã€æ‰“å°æœºç­‰ -- ç”¨äºäººæœºäº¤äº’</li></ul></li><li>å­˜å‚¨è®¾å¤‡: æ•°æ®ä¼ è¾“é€Ÿåº¦å¿«<ul><li>ç§»åŠ¨ç¡¬ç›˜ã€å…‰ç›˜ç­‰ -- ç”¨äºæ•°æ®å­˜å‚¨</li></ul></li><li>ç½‘ç»œé€šä¿¡è®¾å¤‡: æ•°æ®ä¼ è¾“é€Ÿåº¦ä»‹äºä¸Šè¿°äºŒè€…ä¹‹é—´<ul><li>è°ƒåˆ¶è§£è°ƒå™¨ç­‰ -- ç”¨äºç½‘ç»œé€šä¿¡</li></ul></li></ul></li><li><strong>æŒ‰ä¼ è¾“é€Ÿç‡åˆ†ç±»</strong><ul><li>ä½é€Ÿè®¾å¤‡<ul><li>é¼ æ ‡ã€é”®ç›˜ç­‰ -- ä¼ è¾“é€Ÿç‡ä¸ºæ¯ç§’å‡ ä¸ªåˆ°å‡ ç™¾å­—èŠ‚</li></ul></li><li>ä¸­é€Ÿè®¾å¤‡<ul><li>æ¿€å…‰æ‰“å°æœºç­‰ -- ä¼ è¾“é€Ÿç‡ä¸ºæ¯ç§’æ•°åƒè‡³ä¸Šä¸‡ä¸ªå­—èŠ‚</li></ul></li><li>é«˜é€Ÿè®¾å¤‡<ul><li>ç£ç›˜ç­‰ -- ä¼ è¾“é€Ÿç‡ä¸ºæ¯ç§’æ•°åƒå­—èŠ‚è‡³åƒå…†å­—èŠ‚çš„è®¾å¤‡</li></ul></li></ul></li><li><strong>æŒ‰ä¿¡æ¯äº¤æ¢çš„å•ä½åˆ†ç±»</strong><ul><li><strong>å—è®¾å¤‡</strong>: ä¼ è¾“é€Ÿç‡è¾ƒé«˜, å¯å¯»å€,å³å¯¹å®ƒå¯éšæœºåœ°è¯»/å†™ä»»ä¸€å—<ul><li>ç£ç›˜ç­‰ -- <strong>æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½æ˜¯"å—"</strong></li></ul></li><li><strong>å­—ç¬¦è®¾å¤‡</strong>: ä¼ è¾“é€Ÿç‡è¾ƒæ…¢, ä¸å¯å¯»å€,åœ¨è¾“å…¥/è¾“å‡ºæ—¶å¸¸é‡‡ç”¨<strong>ä¸­æ–­é©±åŠ¨æ–¹å¼</strong><ul><li>é¼ æ ‡ã€é”®ç›˜ç­‰ -- <strong>æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•ä½æ˜¯å­—ç¬¦</strong></li><li>ä¸­æ–­é©±åŠ¨æ–¹å¼: ä¸€ç§I/Oæ§åˆ¶æ–¹å¼</li></ul></li></ul></li></ul><h2 id="ioæ§åˆ¶å™¨"><strong>2. IOæ§åˆ¶å™¨</strong></h2><h3 id="ioè®¾å¤‡çš„ç»„æˆ">2.1 <strong>I/Oè®¾å¤‡çš„ç»„æˆ</strong></h3><ul><li><strong>æœºæ¢°éƒ¨ä»¶</strong><ul><li>I/Oè®¾å¤‡çš„æœºæ¢°éƒ¨ä»¶ä¸»è¦ç”¨æ¥æ‰§è¡Œå…·ä½“I/Oæ“ä½œ</li><li>å¦‚æˆ‘ä»¬çœ‹å¾—è§æ‘¸å¾—ç€çš„é¼ æ ‡/é”®ç›˜çš„æŒ‰é’®; æ˜¾ç¤ºå™¨çš„LEDå±;ç§»åŠ¨ç¡¬ç›˜çš„ç£è‡‚ã€ç£ç›˜ç›˜é¢</li></ul></li><li><strong>ç”µå­éƒ¨ä»¶</strong>(I/Oæ§åˆ¶å™¨, åˆç§°è®¾å¤‡æ§åˆ¶å™¨)<ul><li>I/Oè®¾å¤‡çš„ç”µå­éƒ¨ä»¶é€šå¸¸æ˜¯ä¸€å—æ’å…¥ä¸»æ¿æ‰©å……æ§½çš„å°åˆ·ç”µè·¯æ¿</li></ul></li></ul><h3 id="ioæ§åˆ¶å™¨çš„ä¸»è¦åŠŸèƒ½">2.2<strong>I/Oæ§åˆ¶å™¨çš„ä¸»è¦åŠŸèƒ½</strong></h3><ul><li><p>CPUæ— æ³•ç›´æ¥æ§åˆ¶I/Oè®¾å¤‡çš„æœºæ¢°éƒ¨ä»¶,å› æ­¤I/Oè®¾å¤‡è¿˜è¦æœ‰ä¸€ä¸ªç”µå­éƒ¨ä»¶ä½œä¸ºCPUå’ŒI/Oè®¾å¤‡éƒ¨ä»¶ä¹‹é—´çš„"ä¸­ä»‹",<strong>ç”¨äºå®ç°CPUå¯¹è®¾å¤‡çš„æ§åˆ¶</strong></p></li><li><p>è¿™ä¸ªç”µå­éƒ¨ä»¶å°±æ˜¯<strong>I/Oæ§åˆ¶å™¨</strong>, CPUå¯æ§åˆ¶I/Oæ§åˆ¶å™¨,åˆç”±I/Oæ§åˆ¶å™¨æ¥æ§åˆ¶è®¾å¤‡çš„æœºæ¢°éƒ¨ä»¶</p></li><li><p><strong>ä¸»è¦åŠŸèƒ½</strong>:</p><ul><li>æ¥å—å’Œè¯†åˆ«CPUå‘å‡ºçš„å‘½ä»¤<ul><li>å¦‚CPUå‘æ¥çš„read/writeå‘½ä»¤,I/Oæ§åˆ¶å™¨ä¸­ä¼šæœ‰ç›¸åº”çš„<strong>æ§åˆ¶å¯„å­˜å™¨</strong>æ¥å­˜æ”¾å‘½ä»¤å’Œå‚æ•°</li></ul></li><li>å‘CPUæŠ¥å‘Šè®¾å¤‡çš„çŠ¶æ€<ul><li>I/Oæ§åˆ¶å™¨ä¸­ä¼šæœ‰ç›¸åº”çš„<strong>çŠ¶æ€å¯„å­˜å™¨</strong>ç”¨äºè®°å½•I/Oè®¾å¤‡çš„å½“å‰çŠ¶æ€</li><li>å¦‚: 1è¡¨ç¤ºç©ºé—², 0è¡¨ç¤ºå¿™ç¢Œ</li></ul></li><li>æ•°æ®äº¤æ¢<ul><li>I/Oæ§åˆ¶å™¨ä¸­ä¼šè®¾ç½®ç›¸åº”çš„<strong>æ•°æ®å¯„å­˜å™¨</strong>ã€‚è¾“å‡ºæ—¶,æ•°æ®å¯„å­˜å™¨ç”¨äºæš‚å­˜CPUå‘æ¥çš„æ•°æ®, ä¹‹åå†ç”±æ§åˆ¶å™¨ä¼ é€è®¾å¤‡; è¾“å…¥æ—¶,æ•°æ®å¯„å­˜å™¨ç”¨äºæš‚å­˜è®¾å¤‡å‘æ¥çš„æ•°æ®, ä¹‹åCPUä»æ•°æ®å¯„å­˜å™¨ä¸­å–èµ°æ•°æ®</li></ul></li><li>åœ°å€è¯†åˆ«<ul><li>ç±»ä¼¼äºå†…å­˜çš„åœ°å€, ä¸ºäº†åŒºåˆ†è®¾å¤‡æ§åˆ¶å™¨ä¸­çš„å„ä¸ªå¯„å­˜å™¨,ä¹Ÿéœ€è¦ç»™å„ä¸ªå¯„å­˜å™¨è®¾ç½®ä¸€ä¸ªç‰¹å®šçš„"åœ°å€"ã€‚I/Oæ§åˆ¶å™¨é€šè¿‡CPUæä¾›çš„"åœ°å€"æ¥åˆ¤æ–­CPUè¦è¯»/å†™çš„æ˜¯å“ªä¸ªå¯„å­˜å™¨</li></ul></li></ul></li></ul><h3 id="ioæ§åˆ¶å™¨çš„ç»„æˆ">2.3 <strong>I/Oæ§åˆ¶å™¨çš„ç»„æˆ</strong></h3><ul><li>å€¼å¾—æ³¨æ„çš„å°ç»†èŠ‚:<ul><li>ä¸€ä¸ªI/Oæ§åˆ¶å™¨å¯èƒ½ä¼šå¯¹åº”å¤šä¸ªè®¾å¤‡</li><li>æ•°æ®å¯„å­˜å™¨ã€æ§åˆ¶å¯„å­˜å™¨ã€çŠ¶æ€å¯„å­˜å™¨å¯èƒ½æœ‰å¤šä¸ª(å¦‚:æ¯ä¸ªæ§åˆ¶/çŠ¶æ€å¯„å­˜å™¨å¯¹åº”ä¸€ä¸ªå…·ä½“çš„è®¾å¤‡), ä¸”è¿™äº›å¯„å­˜å™¨éƒ½è¦æœ‰ç›¸åº”çš„åœ°å€,æ‰èƒ½æ–¹ä¾¿CPUæ“ä½œã€‚æœ‰çš„è®¡ç®—æœºä¼šè®©è¿™äº›å¯„å­˜å™¨å ç”¨å†…å­˜åœ°å€çš„ä¸€éƒ¨åˆ†,ç§°ä¸º<strong>å†…å­˜æ˜ åƒI/O</strong>; å¦ä¸€äº›è®¡ç®—æœºåˆ™é‡‡ç”¨I/Oä¸“ç”¨åœ°å€,å³<strong>å¯„å­˜å™¨ç‹¬ç«‹ç¼–å€</strong></li></ul></li></ul><h3 id="ä¸¤ç§å¯„å­˜å™¨ç¼–å€æ–¹å¼">2.4 <strong>ä¸¤ç§å¯„å­˜å™¨ç¼–å€æ–¹å¼</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/image-20241121222917201.png"></p><h2 id="ioæ§åˆ¶æ–¹å¼"><strong>3. IOæ§åˆ¶æ–¹å¼</strong></h2><ul><li>éœ€è¦æ³¨æ„çš„é—®é¢˜:<ul><li>å®Œæˆä¸€æ¬¡è¯»/å†™æ“ä½œçš„æµç¨‹</li><li>CPUå¹²é¢„çš„é¢‘ç‡</li><li>æ•°æ®ä¼ é€çš„å•ä½</li><li>æ•°æ®çš„æµå‘</li><li>ä¸»è¦ç¼ºç‚¹å’Œä¸»è¦ä¼˜ç‚¹</li></ul></li></ul><h3 id="ç¨‹åºç›´æ¥æ§åˆ¶æ–¹å¼">3.1 <strong>ç¨‹åºç›´æ¥æ§åˆ¶æ–¹å¼</strong></h3><ul><li><p>å®Œæˆä¸€æ¬¡è¯»/å†™æ“ä½œçš„æµç¨‹(ä»¥è¯»æ“ä½œä¸ºä¾‹):</p><ul><li><p>CPUé€šè¿‡æ§åˆ¶çº¿å‘æ§åˆ¶å™¨å‘å‡ºè¯»æŒ‡ä»¤, äºæ˜¯è®¾å¤‡å¯åŠ¨,å¹¶ä¸”çŠ¶æ€å¯„å­˜å™¨è®¾ä¸º1(æœªå°±ç»ª)</p></li><li><p><strong>è½®è¯¢</strong>æ£€æŸ¥æ§åˆ¶å™¨çš„çŠ¶æ€(å…¶å®å°±æ˜¯åœ¨ä¸æ–­åœ°æ‰§è¡Œç¨‹åºçš„å¾ªç¯,è‹¥çŠ¶æ€ä½ä¸€ç›´æ˜¯1, è¯´æ˜è®¾å¤‡è¿˜æ²¡å‡†å¤‡å¥½è¦è¾“å…¥çš„æ•°æ®,äºæ˜¯CPUä¼šä¸æ–­åœ°è½®è¯¢)</p></li><li><p>è¾“å…¥è®¾å¤‡å‡†å¤‡å¥½æ•°æ®åå°†æ•°æ®ä¼ ç»™æ§åˆ¶å™¨, å¹¶æŠ¥å‘Šè‡ªèº«çŠ¶æ€</p></li><li><p>æ§åˆ¶å™¨å°†è¾“å…¥çš„æ•°æ®æ”¾åˆ°æ•°æ®å¯„å­˜å™¨ä¸­,å¹¶å°†çŠ¶æ€æ”¹ä¸º0(å·²å°±ç»ª)</p></li><li><p>CPUå‘ç°è®¾å¤‡å·²å°±ç»ª, å³å¯å°†æ•°æ®å¯„å­˜å™¨ä¸­çš„å†…å®¹è¯»å…¥CPUçš„å¯„å­˜å™¨ä¸­,å†æŠŠCPUå¯„å­˜å™¨ä¸­çš„å†…å®¹æ”¾å…¥å†…å­˜</p></li><li><p>è‹¥è¿˜è¦ç»§ç»­è¯»å…¥æ•°æ®, åˆ™CPUç»§ç»­å‘å‡ºè¯»æŒ‡ä»¤</p></li></ul></li><li><p>CPUå¹²é¢„çš„é¢‘ç‡</p><ul><li>å¾ˆé¢‘ç¹, I/Oæ“ä½œå¼€å§‹ä¹‹å‰ã€å®Œæˆä¹‹åéœ€è¦CPUçš„ä»‹å…¥,å¹¶ä¸”åœ¨ç­‰å¾…I/Oå®Œæˆçš„è¿‡ç¨‹ä¸­CPUéœ€è¦ä¸æ–­åœ°è½®è¯¢æ£€æŸ¥</li></ul></li><li><p>æ•°æ®ä¼ é€çš„å•å…ƒ</p><ul><li>æ¯æ¬¡è¯»/å†™ä¸€ä¸ª<strong>å­—</strong></li></ul></li><li><p>æ•°æ®çš„æµå‘</p><ul><li><p>è¯»æ“ä½œ(æ•°æ®è¾“å…¥): I/Oè®¾å¤‡ â†’ CPU(æŒ‡çš„æ˜¯CPUçš„å¯„å­˜å™¨) â†’å†…å­˜</p></li><li><p>å†™æ“ä½œ(æ•°æ®è¾“å‡º): å†…å­˜ â†’ CPU â†’ I/Oè®¾å¤‡</p></li><li><p>æ¯ä¸ªå­—çš„è¯»/å†™éƒ½éœ€è¦CPUçš„å¸®åŠ©</p></li></ul></li><li><p>ä¸»è¦ç¼ºç‚¹å’Œä¸»è¦ä¼˜ç‚¹</p><ul><li><p>ä¼˜ç‚¹: å®ç°ç®€å•ã€‚åœ¨è¯»/å†™æŒ‡ä»¤ä¹‹å,åŠ ä¸Šå®ç°å¾ªç¯æ£€æŸ¥çš„ä¸€ç³»åˆ—æŒ‡ä»¤å³å¯(å› æ­¤æ‰ç§°ä¸º"<strong>ç¨‹åºç›´æ¥æ§åˆ¶æ–¹å¼</strong>")</p></li><li><p>ç¼ºç‚¹: CPUå’ŒI/Oè®¾å¤‡åªèƒ½ä¸²è¡Œå·¥ä½œ, CPUéœ€è¦ä¸€ç›´è½®è¯¢æ£€æŸ¥,é•¿æœŸå¤„äº"å¿™ç­‰"çŠ¶æ€, CPUåˆ©ç”¨ç‡ä½</p></li></ul></li></ul><h3 id="ä¸­æ–­é©±åŠ¨æ–¹å¼">3.2 <strong>ä¸­æ–­é©±åŠ¨æ–¹å¼</strong></h3><ul><li><p>å®Œæˆä¸€æ¬¡è¯»/å†™æ“ä½œçš„æµç¨‹(ä»¥è¯»æ“ä½œä¸ºä¾‹):</p><ul><li><p>å¼•å…¥<strong>ä¸­æ–­</strong>æœºåˆ¶ã€‚ç”±äºI/Oè®¾å¤‡é€Ÿåº¦å¾ˆæ…¢,å› æ­¤åœ¨CPUå‘å‡ºè¯»/å†™å‘½ä»¤å, å¯å°†ç­‰å¾…I/Oçš„è¿›ç¨‹é˜»å¡,å…ˆåˆ‡æ¢åˆ°åˆ«çš„è¿›ç¨‹æ‰§è¡Œ</p></li><li><p>å½“I/Oå®Œæˆå, æ§åˆ¶å™¨ä¼šå‘CPUå‘å‡ºä¸€ä¸ªä¸­æ–­ä¿¡å·, CPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·å,ä¼šä¿å­˜å½“å‰è¿›ç¨‹çš„è¿è¡Œç¯å¢ƒä¿¡æ¯, è½¬å»æ‰§è¡Œä¸­æ–­å¤„ç†ç¨‹åºå¤„ç†è¯¥ä¸­æ–­</p></li><li><p>å¤„ç†ä¸­æ–­çš„è¿‡ç¨‹ä¸­, CPUä»I/Oæ§åˆ¶å™¨è¯»ä¸€ä¸ªå­—çš„æ•°æ®ä¼ é€åˆ°CPUå¯„å­˜å™¨,å†å†™å…¥ä¸»å­˜</p></li><li><p>æ¥ç€, CPUæ¢å¤ç­‰å¾…I/Oçš„è¿›ç¨‹(æˆ–å…¶ä»–è¿›ç¨‹)çš„è¿è¡Œç¯å¢ƒ,ç„¶åç»§ç»­æ‰§è¡Œ</p></li></ul></li><li><p>æ³¨æ„:</p><ul><li><p>CPUä¼šåœ¨æ¯ä¸ªæŒ‡ä»¤å‘¨æœŸçš„æœ«å°¾æ£€æŸ¥ä¸­æ–­</p></li><li><p>ä¸­æ–­å¤„ç†è¿‡ç¨‹ä¸­éœ€è¦ä¿å­˜ã€æ¢å¤è¿›ç¨‹çš„è¿è¡Œç¯å¢ƒ,è¿™ä¸ªè¿‡ç¨‹æ˜¯éœ€è¦ä¸€å®šæ—¶é—´å¼€é”€çš„ã€‚å¯è§, å¦‚æœä¸­æ–­å‘ç”Ÿçš„é¢‘ç‡å¤ªé«˜,ä¹Ÿä¼šé™ä½ç³»ç»Ÿæ€§èƒ½</p></li></ul></li><li><p>CPUå¹²é¢„çš„é¢‘ç‡</p><ul><li><p>æ¯æ¬¡I/Oæ“ä½œå¼€å§‹ä¹‹å‰ã€å®Œæˆä¹‹åéœ€è¦CPUçš„ä»‹å…¥</p></li><li><p>ç­‰å¾…I/Oå®Œæˆçš„è¿‡ç¨‹ä¸­CPUå¯ä»¥åˆ‡æ¢åˆ°åˆ«çš„è¿›ç¨‹æ‰§è¡Œ</p></li></ul></li><li><p>æ•°æ®ä¼ é€çš„å•å…ƒ</p><ul><li>æ¯æ¬¡è¯»/å†™ä¸€ä¸ª<strong>å­—</strong></li></ul></li><li><p>æ•°æ®çš„æµå‘</p><ul><li><p>è¯»æ“ä½œ(æ•°æ®è¾“å…¥): I/Oè®¾å¤‡ â†’ CPU(æŒ‡çš„æ˜¯CPUçš„å¯„å­˜å™¨) â†’å†…å­˜</p></li><li><p>å†™æ“ä½œ(æ•°æ®è¾“å‡º): å†…å­˜ â†’ CPU â†’ I/Oè®¾å¤‡</p></li></ul></li><li><p>ä¸»è¦ç¼ºç‚¹å’Œä¸»è¦ä¼˜ç‚¹</p><ul><li><p>ä¼˜ç‚¹: ä¸"ç¨‹åºç›´æ¥æ§åˆ¶æ–¹å¼"ç›¸æ¯”, åœ¨"ä¸­æ–­é©±åŠ¨æ–¹å¼"ä¸­,I/Oæ§åˆ¶å™¨ä¼šé€šè¿‡ä¸­æ–­ä¿¡å·ä¸»åŠ¨æŠ¥å‘ŠI/Oå·²å®Œæˆ,CPUä¸å†éœ€è¦ä¸åœåœ°è½®è¯¢ã€‚CPUå’ŒI/Oè®¾å¤‡å¯å¹¶è¡Œå·¥ä½œ,CPUåˆ©ç”¨ç‡å¾—åˆ°æ˜æ˜¾æå‡</p></li><li><p>ç¼ºç‚¹: æ¯ä¸ªå­—åœ¨I/Oè®¾å¤‡ä¸å†…å­˜ä¹‹é—´çš„ä¼ è¾“, éƒ½éœ€è¦ç»è¿‡CPU,è€Œé¢‘ç¹çš„ä¸­æ–­å¤„ç†ä¼šæ¶ˆè€—è¾ƒå¤šçš„CPUæ—¶é—´</p></li></ul></li></ul><h3 id="dmaæ–¹å¼direct-memory-access-ç›´æ¥å­˜å‚¨å™¨å­˜å–">3.3<strong>DMAæ–¹å¼(Direct Memory Access, ç›´æ¥å­˜å‚¨å™¨å­˜å–)</strong></h3><ul><li><p>å®Œæˆä¸€æ¬¡è¯»/å†™æ“ä½œçš„æµç¨‹(ä»¥è¯»æ“ä½œä¸ºä¾‹):</p><ul><li><p>ä¸"ä¸­æ–­é©±åŠ¨æ–¹å¼ç›¸æ¯”",<strong>DMAæ–¹å¼</strong>(ä¸»è¦ç”¨äºå—è®¾å¤‡çš„I/Oæ§åˆ¶)æœ‰è¿™æ ·å‡ ä¸ªæ”¹è¿›:</p><ul><li><p>æ•°æ®çš„ä¼ é€å•ä½æ˜¯"å—", ä¸å†æ˜¯ä¸€ä¸ªå­—ã€ä¸€ä¸ªå­—çš„ä¼ é€</p></li><li><p>æ•°æ®çš„æµå‘æ˜¯ä»è®¾å¤‡ç›´æ¥æ”¾å…¥å†…å­˜, æˆ–è€…ä»å†…å­˜ç›´æ¥åˆ°è®¾å¤‡,ä¸å†éœ€è¦CPUä½œä¸º"å¿«é€’å°å“¥"</p></li><li><p>ä»…åœ¨ä¼ é€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—çš„å¼€å§‹å’Œç»“æŸæ—¶, æ‰éœ€è¦CPUå¹²é¢„</p></li></ul></li></ul></li><li><p>CPUå¹²é¢„çš„é¢‘ç‡</p><ul><li>ä»…åœ¨ä¼ é€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®å—çš„å¼€å§‹å’Œç»“æŸæ—¶, æ‰éœ€è¦CPUå¹²é¢„</li></ul></li><li><p>æ•°æ®ä¼ é€çš„å•å…ƒ</p><ul><li><p>æ¯æ¬¡è¯»/å†™ä¸€ä¸ªæˆ–å¤šä¸ª<strong>å—</strong></p><ul><li>æ³¨æ„: æ¯æ¬¡è¯»å†™çš„åªèƒ½æ˜¯è¿ç»­çš„å¤šä¸ªå—,ä¸”è¿™äº›å—è¯»å…¥å†…å­˜ååœ¨å†…å­˜ä¸­ä¹Ÿå¿…é¡»æ˜¯è¿ç»­çš„</li></ul></li></ul></li><li><p>æ•°æ®çš„æµå‘(ä¸å†éœ€è¦ç»è¿‡CPU)</p><ul><li><p>è¯»æ“ä½œ(æ•°æ®è¾“å…¥): I/Oè®¾å¤‡ â†’ å†…å­˜</p></li><li><p>å†™æ“ä½œ(æ•°æ®è¾“å‡º): å†…å­˜ â†’ I/Oè®¾å¤‡</p></li></ul></li><li><p>ä¸»è¦ç¼ºç‚¹å’Œä¸»è¦ä¼˜ç‚¹</p><ul><li><p>ä¼˜ç‚¹: æ•°æ®ä¼ è¾“ä»¥"å—"ä¸ºå•ä½,CPUä»‹å…¥é¢‘ç‡è¿›ä¸€æ­¥é™ä½ã€‚æ•°æ®çš„ä¼ è¾“ä¸å†éœ€è¦å…ˆç»è¿‡CPUå†å†™å…¥å†…å­˜,æ•°æ®ä¼ è¾“æ•ˆç‡è¿›ä¸€æ­¥å¢åŠ , CPUå’ŒI/Oè®¾å¤‡çš„å¹¶è¡Œæ€§å¾—åˆ°æå‡</p></li><li><p>ç¼ºç‚¹: CPUæ¯å‘å‡ºä¸€æ¡I/OæŒ‡ä»¤,åªèƒ½è¯»/å†™ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ•°æ®å—ã€‚å¦‚æœè¦è¯»/å†™å¤šä¸ªç¦»æ•£å­˜å‚¨çš„æ•°æ®å—,æˆ–è€…è¦å°†æ•°æ®åˆ†åˆ«å†™åˆ°ä¸åŒçš„å†…å­˜åŒºåŸŸæ—¶, CPUè¦åˆ†åˆ«å‘å‡ºå¤šæ¡I/OæŒ‡ä»¤,è¿›è¡Œå¤šæ¬¡ä¸­æ–­å¤„ç†æ‰èƒ½å®Œæˆ</p></li></ul></li></ul><h3 id="é€šé“æ§åˆ¶æ–¹å¼">3.4 <strong>é€šé“æ§åˆ¶æ–¹å¼</strong></h3><ul><li><strong>é€šé“</strong>: ä¸€ç§ç¡¬ä»¶, å¯ä»¥ç†è§£ä¸ºæ˜¯"å¼±é¸¡ç‰ˆçš„CPU",é€šé“å¯ä»¥è¯†åˆ«å¹¶æ‰§è¡Œä¸€ç³»åˆ—<strong>é€šé“æŒ‡ä»¤</strong><ul><li><p>ä¸CPUç›¸æ¯”, é€šé“å¯ä»¥æ‰§è¡Œçš„æŒ‡ä»¤å¾ˆå•ä¸€,å¹¶ä¸”é€šé“ç¨‹åºæ˜¯æ”¾åœ¨ä¸»æœºå†…å­˜ä¸­çš„, ä¹Ÿå°±æ˜¯è¯´é€šé“ä¸CPUå…±äº«å†…å­˜</p></li><li><p>ä¸€ä¸ªé€šé“å¯ä»¥æ§åˆ¶å¤šä¸ªI/Oæ§åˆ¶å™¨,ä¸€ä¸ªI/Oæ§åˆ¶å™¨å¯ä»¥æ§åˆ¶å¤šä¸ªI/Oè®¾å¤‡</p></li></ul></li><li>å®Œæˆä¸€æ¬¡è¯»/å†™æ“ä½œçš„æµç¨‹(ä»¥è¯»æ“ä½œä¸ºä¾‹):</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/image-20241122102849425.png"></p><ul><li>CPUå¹²é¢„çš„é¢‘ç‡<ul><li>æä½, é€šé“ä¼šæ ¹æ®CPUçš„æŒ‡ç¤ºæ‰§è¡Œç›¸åº”çš„é€šé“ç¨‹åº,åªæœ‰å®Œæˆä¸€ç»„æ•°æ®åº“çš„è¯»/å†™åæ‰éœ€è¦å‘å‡ºä¸­æ–­ä¿¡å·, è¯·æ±‚CPUå¹²é¢„</li></ul></li><li>æ•°æ®ä¼ é€çš„å•å…ƒ<ul><li>æ¯æ¬¡è¯»/å†™<strong>ä¸€ç»„æ•°æ®å—</strong></li></ul></li><li>æ•°æ®çš„æµå‘(åœ¨é€šé“çš„æ§åˆ¶ä¸‹è¿›è¡Œ)<ul><li>è¯»æ“ä½œ(æ•°æ®è¾“å…¥): I/Oè®¾å¤‡ â†’ å†…å­˜</li><li>å†™æ“ä½œ(æ•°æ®è¾“å‡º): å†…å­˜ â†’ I/Oè®¾å¤‡</li></ul></li><li>ä¸»è¦ç¼ºç‚¹å’Œä¸»è¦ä¼˜ç‚¹<ul><li>ä¼˜ç‚¹: CPUã€é€šé“ã€I/Oè®¾å¤‡å¯å¹¶è¡Œå·¥ä½œ, èµ„æºåˆ©ç”¨ç‡å¾ˆé«˜</li><li>ç¼ºç‚¹: å®ç°å¤æ‚, éœ€è¦ä¸“é—¨çš„é€šé“ç¡¬ä»¶æ”¯æŒ</li></ul></li></ul><h2 id="ioè½¯ä»¶å±‚æ¬¡ç»“æ„"><strong>4. IOè½¯ä»¶å±‚æ¬¡ç»“æ„</strong></h2><h3 id="ç”¨æˆ·å±‚è½¯ä»¶">4.1 <strong>ç”¨æˆ·å±‚è½¯ä»¶</strong></h3><ul><li><p>ç”¨æˆ·å±‚è½¯ä»¶å®ç°äº†ä¸ç”¨æˆ·äº¤äº’çš„æ¥å£,ç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨è¯¥å±‚æä¾›çš„ã€ä¸I/Oæ“ä½œç›¸å…³çš„<strong>åº“å‡½æ•°</strong>å¯¹è®¾å¤‡è¿›è¡Œæ“ä½œ</p><ul><li>Eg: printf("hello, world!");</li></ul></li><li><p>ç”¨æˆ·å±‚è½¯ä»¶å°†ç”¨æˆ·è¯·æ±‚ç¿»è¯‘æˆæ ¼å¼åŒ–çš„I/Oè¯·æ±‚,å¹¶é€šè¿‡"ç³»ç»Ÿè°ƒç”¨"è¯·æ±‚æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡</p><ul><li>Eg: printf("hello world!"); ä¼šè¢«ç¿»è¯‘æˆç­‰ä»·çš„writeç³»ç»Ÿè°ƒç”¨, å½“ç„¶,ç”¨æˆ·å±‚è½¯ä»¶ä¹Ÿä¼šåœ¨ç³»ç»Ÿè°ƒç”¨æ—¶å¡«å…¥ç›¸åº”å‚æ•°</li></ul></li><li><p>Windowsæ“ä½œç³»ç»Ÿå‘å¤–æä¾›äº†ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨,ä½†æ˜¯ç”±äºç³»ç»Ÿè°ƒç”¨çš„æ ¼å¼ä¸¥æ ¼, ä½¿ç”¨éº»çƒ¦,å› æ­¤åœ¨ç”¨æˆ·å±‚ä¸Šå°è£…äº†ä¸€ç³»åˆ—æ›´æ–¹ä¾¿çš„åº“å‡½æ•°æ¥å£ä¾›ç”¨æˆ·ä½¿ç”¨(<strong>WIndowsAPI</strong>)</p></li></ul><h3 id="è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶è®¾å¤‡æ— å…³æ€§è½¯ä»¶">4.2<strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶(è®¾å¤‡æ— å…³æ€§è½¯ä»¶)</strong></h3><ul><li><p>ä¸è®¾å¤‡çš„ç¡¬ä»¶ç‰¹æ€§æ— å…³çš„åŠŸèƒ½å‡ ä¹éƒ½åœ¨è¿™ä¸€å±‚å®ç°</p></li><li><p>ä¸»è¦å®ç°åŠŸèƒ½:</p><ul><li>å‘ä¸Šå±‚æä¾›ç»Ÿä¸€çš„è°ƒç”¨æ¥å£(å¦‚ read/write<strong>ç³»ç»Ÿè°ƒç”¨</strong>)</li><li>è®¾å¤‡çš„ä¿æŠ¤<ul><li>åŸç†ç±»ä¼¼äºæ–‡ä»¶ä¿æŠ¤, <strong>è®¾å¤‡è¢«çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶</strong>,ä¸åŒç”¨æˆ·å¯¹å„ä¸ªæ–‡ä»¶çš„è®¿é—®æƒé™æ˜¯ä¸ä¸€æ ·çš„, åŒç†,å¯¹è®¾å¤‡çš„è®¿é—®æƒé™ä¹Ÿä¸ä¸€æ ·</li></ul></li><li>å·®é”™å¤„ç†<ul><li>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶éœ€è¦å¯¹ä¸€äº›è®¾å¤‡çš„é”™è¯¯è¿›è¡Œå¤„ç†</li></ul></li><li>è®¾å¤‡çš„åˆ†é…ä¸å›æ”¶</li><li>æ•°æ®ç¼“å†²åŒºç®¡ç†<ul><li>å¯ä»¥é€šè¿‡ç¼“å†²æŠ€æœ¯å±è”½è®¾å¤‡ä¹‹é—´æ•°æ®äº¤æ¢å•ä½å¤§å°å’Œä¼ è¾“é€Ÿåº¦çš„å·®å¼‚</li></ul></li><li><strong>å»ºç«‹é€»è¾‘è®¾å¤‡ååˆ°ç‰©ç†è®¾å¤‡åçš„æ˜ å°„å…³ç³»</strong>;æ ¹æ®è®¾å¤‡ç±»å‹é€‰æ‹©è°ƒç”¨ç›¸åº”çš„<strong>é©±åŠ¨ç¨‹åº</strong><ul><li>ç”¨æˆ·æˆ–ç”¨æˆ·å±‚è½¯ä»¶å‘å‡ºI/Oæ“ä½œç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨æ—¶,éœ€è¦æŒ‡æ˜è¿™æ¬¡è¦æ“ä½œçš„I/Oè®¾å¤‡çš„<strong>é€»è¾‘è®¾å¤‡å</strong><ul><li>Eg: å»å­¦æ ¡æ‰“å°åº—æ‰“å°æ—¶, éœ€è¦é€‰æ‹©æ‰“å°æœº1/æ‰“å°æœº2/æ‰“å°æœº3,å…¶å®è¿™äº›éƒ½æ˜¯é€»è¾‘è®¾å¤‡å</li></ul></li><li><strong>è®¾å¤‡ç‹¬ç«‹æ€§è½¯ä»¶</strong>éœ€è¦é€šè¿‡"<strong>é€»è¾‘è®¾å¤‡è¡¨(LUT,Logical UnitTable)</strong>"æ¥ç¡®å®š<strong>é€»è¾‘è®¾å¤‡</strong>å¯¹åº”çš„<strong>ç‰©ç†è®¾å¤‡</strong>,å¹¶æ‰¾åˆ°è¯¥è®¾å¤‡å¯¹åº”çš„<strong>è®¾å¤‡é©±åŠ¨ç¨‹åº</strong></li><li>æ“ä½œç³»ç»Ÿå¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹å¼ç®¡ç†<strong>é€»è¾‘è®¾å¤‡è¡¨(LUT)</strong>:<ul><li>ç¬¬ä¸€ç§æ–¹å¼, <strong>æ•´ä¸ªç³»ç»Ÿåªè®¾ç½®ä¸€å¼ LUT</strong>,è¿™å°±æ„å‘³ç€æ‰€æœ‰ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ç›¸åŒçš„é€»è¾‘è®¾å¤‡å,å› æ­¤è¿™ç§æ–¹å¼<strong>åªé€‚ç”¨äºå•ç”¨æˆ·æ“ä½œç³»ç»Ÿ</strong></li><li>ç¬¬äºŒç§æ–¹å¼, <strong>ä¸ºæ¯ä¸ªç”¨æˆ·è®¾ç½®ä¸€å¼ LUT</strong>,å„ä¸ªç”¨æˆ·ä½¿ç”¨çš„é€»è¾‘è®¾å¤‡åå¯ä»¥é‡å¤, <strong>é€‚ç”¨äºå¤šç”¨æˆ·æ“ä½œç³»ç»Ÿ</strong>,ç³»ç»Ÿä¼šåœ¨ç”¨æˆ·ç™»å½•æ—¶ä¸ºå…¶å»ºç«‹ä¸€ä¸ªç”¨æˆ·ç®¡ç†è¿›ç¨‹,è€ŒLUTå°±å­˜æ”¾åœ¨ç”¨æˆ·ç®¡ç†è¿›ç¨‹çš„PCBä¸­</li></ul></li><li><strong>ä¸ºä»€ä¹ˆä¸åŒç±»å‹çš„I/Oè®¾å¤‡éœ€è¦æœ‰ä¸åŒçš„é©±åŠ¨ç¨‹åºå¤„ç†?</strong><ul><li>å„å¼å„æ ·çš„è®¾å¤‡, å¤–å½¢ä¸åŒ, å…¶å†…éƒ¨çš„ç”µå­éƒ¨ä»¶(I/Oæ§åˆ¶å™¨)ä¹Ÿæœ‰å¯èƒ½ä¸åŒ<ul><li>å¦‚çŠ¶æ€å¯„å­˜å™¨åˆ¤æ–­æ˜¯å¦å¿™ç¢Œçš„æ ‡å¿—ä½ä¸åŒ, æœ‰çš„è®¾å¤‡ç”¨1è¡¨ç¤ºå¿™ç¢Œ,è€Œæœ‰çš„ç”¨0è¡¨ç¤ºå¿™ç¢Œ</li></ul></li><li>ä¸åŒè®¾å¤‡çš„å†…éƒ¨ç¡¬ä»¶ç‰¹æ€§ä¹Ÿä¸åŒ, è¿™äº›ç‰¹æ€§åªæœ‰å‚å®¶æ‰çŸ¥é“,å› æ­¤å‚å®¶é¡»æä¾›ä¸è®¾å¤‡ç›¸å¯¹åº”çš„é©±åŠ¨ç¨‹åº, CPUæ‰§è¡Œé©±åŠ¨ç¨‹åºçš„æŒ‡ä»¤åºåˆ—,æ¥å®Œæˆè®¾ç½®è®¾å¤‡å¯„å­˜å™¨ã€æ£€æŸ¥è®¾å¤‡çŠ¶æ€ç­‰å·¥ä½œ</li></ul></li></ul></li></ul></li></ul><h3 id="è®¾å¤‡é©±åŠ¨ç¨‹åº">4.3 <strong>è®¾å¤‡é©±åŠ¨ç¨‹åº</strong></h3><ul><li>ä¸»è¦è´Ÿè´£<strong>å¯¹ç¡¬ä»¶è®¾å¤‡çš„å…·ä½“æ§åˆ¶</strong>,å°†ä¸Šå±‚å‘å‡ºçš„ä¸€ç³»åˆ—å‘½ä»¤(å¦‚read/write)è½¬åŒ–ä¸ºç‰¹å®šè®¾å¤‡"èƒ½å¬å¾—æ‡‚"çš„ä¸€ç³»åˆ—æ“ä½œ,åŒ…æ‹¬è®¾ç½®è®¾å¤‡å¯„å­˜å™¨ã€æ£€æŸ¥è®¾å¤‡çŠ¶æ€ç­‰<ul><li>æ³¨: é©±åŠ¨ç¨‹åºä¸€èˆ¬ä¼šä»¥ä¸€ä¸ªç‹¬ç«‹è¿›ç¨‹çš„æ–¹å¼å­˜åœ¨</li></ul></li></ul><h3 id="ä¸­æ–­å¤„ç†ç¨‹åº">4.4 <strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong></h3><ul><li><p>å½“I/Oä»»åŠ¡å®Œæˆæ—¶, I/Oæ§åˆ¶å™¨ä¼šå‘é€ä¸€ä¸ª<strong>ä¸­æ–­ä¿¡å·</strong>,ç³»ç»Ÿä¼šæ ¹æ®<strong>ä¸­æ–­ä¿¡å·ç±»å‹</strong>æ‰¾åˆ°ç›¸åº”çš„<strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong>å¹¶æ‰§è¡Œ</p></li><li><p>ä¸­æ–­å¤„ç†ç¨‹åºçš„å¤„ç†æµç¨‹å¦‚ä¸‹:</p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/image-20241122103237525.png"></p><ul><li>å¯è§, <strong>ä¸­æ–­å¤„ç†ç¨‹åºä¹Ÿä¼šå’Œç¡¬ä»¶ç›´æ¥æ‰“äº¤é“</strong></li></ul><h3 id="è¾“å…¥è¾“å‡ºåº”ç”¨ç¨‹åºæ¥å£é©±åŠ¨ç¨‹åºæ¥å£"><strong>5.è¾“å…¥/è¾“å‡ºåº”ç”¨ç¨‹åºæ¥å£&amp;é©±åŠ¨ç¨‹åºæ¥å£</strong></h3><h3 id="è¾“å…¥è¾“å‡ºåº”ç”¨ç¨‹åºæ¥å£">5.1<strong>è¾“å…¥/è¾“å‡ºåº”ç”¨ç¨‹åºæ¥å£</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/image-20241122103326548.png"></p><ul><li>ç½‘ç»œè®¾å¤‡æ¥å£ç¤ºä¾‹:</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/image-20241122103351593.png"></p><h3 id="é˜»å¡éé˜»å¡-io">5.2 <strong>é˜»å¡/éé˜»å¡ I/O</strong></h3><ul><li><strong>é˜»å¡I/O</strong>: åº”ç”¨ç¨‹åºå‘å‡ºI/Oç³»ç»Ÿè°ƒç”¨,<strong>è¿›ç¨‹éœ€è½¬ä¸ºé˜»å¡æ€ç­‰å¾…</strong><ul><li>Eg: å­—ç¬¦è®¾å¤‡æ¥å£ -- ä»é”®ç›˜è¯»ä¸€ä¸ªå­—ç¬¦(getç³»ç»Ÿè°ƒç”¨)</li></ul></li><li><strong>éé˜»å¡I/O</strong>: åº”ç”¨ç¨‹åºå‘å‡ºI/Oç³»ç»Ÿè°ƒç”¨,ç³»ç»Ÿè°ƒç”¨å¯è¿…é€Ÿè¿”å›, <strong>è¿›ç¨‹æ— éœ€é˜»å¡ç­‰å¾…</strong><ul><li>Eg: å—è®¾å¤‡æ¥å£ -- å¾€ç£ç›˜å†™æ•°æ®(writeç³»ç»Ÿè°ƒç”¨)</li></ul></li></ul><h3 id="è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥å£">5.3 <strong>è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥å£</strong></h3><ul><li><p>è‹¥å„å…¬å¸å¼€å‘çš„è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥å£ä¸ç»Ÿä¸€,åˆ™æ“ä½œç³»ç»Ÿå¾ˆéš¾è°ƒç”¨è®¾å¤‡é©±åŠ¨ç¨‹åº</p></li><li><p><strong>ç»Ÿä¸€æ ‡å‡†çš„è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥å£</strong></p><ul><li>æ“ä½œç³»ç»Ÿè§„å®šå¥½è®¾å¤‡é©±åŠ¨ç¨‹åºçš„æ¥å£æ ‡å‡†,å„å‚å•†æŒ‰è¦æ±‚å¼€å‘è®¾å¤‡é©±åŠ¨ç¨‹åº</li><li>ä¸åŒçš„æ“ä½œç³»ç»Ÿ, å¯¹è®¾å¤‡é©±åŠ¨ç¨‹åºæ¥å£çš„æ ‡å‡†å„ä¸ç›¸åŒ,è®¾å¤‡å‚å•†å¿…é¡»æ ¹æ®æ“ä½œç³»ç»Ÿçš„æ¥å£è¦æ±‚,å¼€å‘ç›¸åº”çš„è®¾å¤‡é©±åŠ¨ç¨‹åº,è®¾å¤‡æ‰èƒ½è¢«ä½¿ç”¨</li></ul></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/5-1-IO%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0/image-20241122103448322.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.2 æ–‡ä»¶ç³»ç»Ÿ</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ä¸è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"><strong>4.2æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ä¸è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</strong></h1><h2 id="æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„äº†è§£å³å¯"><strong>1.æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„(äº†è§£å³å¯)</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221253104.png"></p><ul><li>ç”¨ä¸€ä¸ªä¾‹å­æ¥è¾…åŠ©è®°å¿†æ–‡ä»¶ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ï¼š<ul><li>å‡è®¾æŸç”¨æˆ·è¯·æ±‚åˆ é™¤æ–‡ä»¶â€œD:/å·¥ä½œç›®å½•/å­¦ç”Ÿä¿¡æ¯.xIsx"çš„æœ€å100æ¡è®°å½•<ul><li>1. ç”¨æˆ·éœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£å‘å‡ºä¸Šè¿°è¯·æ±‚ --<strong>ç”¨æˆ·æ¥å£</strong><ul><li>æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li><li>2.ç”±äºç”¨æˆ·æä¾›çš„æ˜¯æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œå› æ­¤éœ€è¦æ“ä½œç³»ç»Ÿä¸€å±‚ä¸€å±‚åœ°æŸ¥æ‰¾ç›®å½•ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç›®å½•é¡¹-- <strong>æ–‡ä»¶ç›®å½•ç³»ç»Ÿ</strong><ul><li>æ–‡ä»¶ç›®å½• ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li><li>3.ä¸åŒçš„ç”¨æˆ·å¯¹æ–‡ä»¶æœ‰ä¸åŒçš„æ“ä½œæƒé™ï¼Œå› æ­¤ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œéœ€è¦æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰è®¿é—®æƒé™--<strong>å­˜å–æ§åˆ¶æ¨¡å—(å­˜å–æ§åˆ¶éªŒè¯å±‚)</strong><ul><li>æ–‡ä»¶ä¿æŠ¤ ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li><li>4.éªŒè¯äº†ç”¨æˆ·çš„è®¿é—®æƒé™ä¹‹åï¼Œéœ€è¦æŠŠç”¨æˆ·æä¾›çš„â€œè®°å½•å·â€è½¬å˜ä¸ºå¯¹åº”çš„é€»è¾‘åœ°å€-- <strong>é€»è¾‘æ–‡ä»¶ç³»ç»Ÿä¸æ–‡ä»¶ä¿¡æ¯ç¼“å†²åŒº</strong><ul><li>æ–‡ä»¶çš„é€»è¾‘ç»“æ„ ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li><li>5. çŸ¥é“äº†ç›®æ ‡è®°å½•å¯¹åº”çš„é€»è¾‘åœ°å€åï¼Œè¿˜éœ€è¦è½¬æ¢æˆå®é™…çš„ç‰©ç†åœ°å€ --<strong>ç‰©ç†æ–‡ä»¶ç³»ç»Ÿ</strong><ul><li>æ–‡ä»¶çš„ç‰©ç†ç»“æ„ ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li><li>6. è¦åˆ é™¤è¿™æ¡è®°å½•ï¼Œå¿…å®šè¦å¯¹ç£ç›˜è®¾å¤‡å‘å‡ºè¯·æ±‚ --<strong>è®¾å¤‡ç®¡ç†ç¨‹åºæ¨¡å—</strong><ul><li>è®¾å¤‡ç®¡ç† ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li><li>7. åˆ é™¤è¿™äº›è®°å½•åï¼Œä¼šæœ‰ä¸€äº›ç›˜å—ç©ºé—²ï¼Œå› æ­¤è¦å°†è¿™äº›ç©ºé—²ç›˜å—å›æ”¶ --<strong>è¾…åŠ©åˆ†é…æ¨¡å—</strong><ul><li>æ–‡ä»¶å­˜å‚¨ç©ºé—´ç®¡ç† ç« èŠ‚ç›¸å…³å†…å®¹</li></ul></li></ul></li></ul></li></ul><h2 id="æ–‡ä»¶ç³»ç»Ÿçš„å…¨å±€ç»“æ„å¸ƒå±€"><strong>2.æ–‡ä»¶ç³»ç»Ÿçš„å…¨å±€ç»“æ„(å¸ƒå±€)</strong></h2><h3 id="ç£ç›˜å‡ºå‚åˆ°æ–‡ä»¶ç³»ç»Ÿå»ºç«‹çš„è¿‡ç¨‹">2.1<strong>ç£ç›˜å‡ºå‚åˆ°æ–‡ä»¶ç³»ç»Ÿå»ºç«‹çš„è¿‡ç¨‹</strong>:</h3><p>1. <strong>åŸå§‹ç£ç›˜</strong></p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221040188.png"></p><p>2. <strong>ä½çº§æ ¼å¼åŒ–(ç‰©ç†æ ¼å¼åŒ–)</strong></p><ul><li>åˆ’åˆ†æ‰‡åŒºï¼Œæ£€æµ‹åæ‰‡åŒºï¼Œå¹¶ç”¨å¤‡ç”¨æ‰‡åŒºæ›¿æ¢åæ‰‡åŒº</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221355176.png"></p><p>3. <strong>ç£ç›˜åˆ†åŒº(åˆ†å·ï¼ŒVolume)</strong></p><ul><li>å°†ç£ç›˜åˆ†åŒº, æ¯ä¸ªåˆ†åŒºç”±è‹¥å¹²æŸ±é¢ç»„æˆ(å³åˆ†ä¸ºæˆ‘ä»¬ç†Ÿæ‚‰çš„Cç›˜ã€Dç›˜ã€Eç›˜)</li></ul><p>4. <strong>é€»è¾‘æ ¼å¼åŒ–</strong></p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221453868.png"></p><ul><li><p>å®Œæˆå„åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿåˆå§‹åŒ–</p></li><li><p>iç»“ç‚¹åŒº ï¼šç´¢å¼•ç»“ç‚¹å­˜æ”¾åŒºåŸŸ</p></li><li><p>æ³¨ï¼šé€»è¾‘æ ¼å¼åŒ–åï¼Œç°è‰²éƒ¨åˆ†å°±æœ‰å®é™…æ•°æ®äº†ï¼Œç™½è‰²éƒ¨åˆ†è¿˜æ²¡æœ‰æ•°æ®</p></li></ul><h3 id="æ–‡ä»¶ç³»ç»Ÿåœ¨å†…å­˜ä¸­çš„ç»“æ„">2.2<strong>æ–‡ä»¶ç³»ç»Ÿåœ¨å†…å­˜ä¸­çš„ç»“æ„</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221632779.png"></p><h3 id="open-ç³»ç»Ÿè°ƒç”¨æ‰“å¼€æ–‡ä»¶èƒŒåçš„è¿‡ç¨‹">2.3 <strong>openç³»ç»Ÿè°ƒç”¨æ‰“å¼€æ–‡ä»¶èƒŒåçš„è¿‡ç¨‹</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221732613.png"></p><h2 id="è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶ç³»ç»ŸæŒ‚è½½å®‰è£…"><strong>3.è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ&amp;æ–‡ä»¶ç³»ç»ŸæŒ‚è½½(å®‰è£…)</strong></h2><h3 id="æ™®é€šçš„æ–‡ä»¶ç³»ç»Ÿ">3.1 <strong>æ™®é€šçš„æ–‡ä»¶ç³»ç»Ÿ</strong></h3><ul><li>ä¸åŒçš„å­˜å‚¨è®¾å¤‡ä¸­çš„æ–‡ä»¶ç³»ç»Ÿæœ‰å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œæä¾›çš„ç³»ç»Ÿè°ƒç”¨æ¥å£ä¹Ÿä¸åŒ</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121221942018.png"></p><h3 id="è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿvfs">3.2 <strong>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼ˆVFSï¼‰</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121222033809.png"></p><ul><li><p><strong>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„ç‰¹ç‚¹</strong>:</p><ul><li>å‘ä¸Šå±‚ç”¨æˆ·è¿›ç¨‹æä¾›ç»Ÿä¸€æ ‡å‡†çš„ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œå±è”½åº•å±‚å…·ä½“æ–‡ä»¶ç³»ç»Ÿçš„å®ç°å·®å¼‚</li><li><strong>VFS</strong>è¦æ±‚ä¸‹å±‚çš„æ–‡ä»¶ç³»ç»Ÿå¿…é¡»å®ç°æŸäº›è§„å®šçš„å‡½æ•°åŠŸèƒ½ï¼Œä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿæƒ³è¦åœ¨æŸæ“ä½œç³»ç»Ÿä¸Šè¢«ä½¿ç”¨ï¼Œå°±å¿…é¡»æ»¡è¶³è¯¥æ“ä½œç³»ç»ŸVFSçš„è¦æ±‚<ul><li>å¦‚ï¼šopen/read/write</li></ul></li><li>æ¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œ<strong>VFS</strong>å°±åœ¨ä¸»å­˜ä¸­æ–°å»ºä¸€ä¸ª<strong>vnode</strong>ï¼Œç”¨ç»Ÿä¸€çš„æ•°æ®ç»“æ„è¡¨ç¤ºæ–‡ä»¶ï¼Œæ— è®ºè¯¥æ–‡ä»¶å­˜å‚¨åœ¨å“ªä¸ªæ–‡ä»¶ç³»ç»Ÿ</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121222254313.png"></p><ul><li><p>å­˜åœ¨çš„é—®é¢˜ï¼šä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¡¨ç¤ºæ–‡ä»¶æ•°æ®ç»“æ„å„ä¸ç›¸åŒã€‚æ‰“å¼€æ–‡ä»¶åï¼Œå…¶åœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºå°±ä¸åŒ</p><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-3-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/image-20241121222313706.png"></p><ul><li>æ³¨æ„ï¼š<strong>vnode</strong>åªå­˜åœ¨äºä¸»å­˜ä¸­ï¼Œè€Œ<strong>inode</strong>æ—¢ä¼šè¢«è°ƒå…¥ä¸»å­˜ï¼Œä¹Ÿä¼šåœ¨å¤–å­˜ä¸­å­˜å‚¨</li></ul></li><li><p>æ‰“å¼€æ–‡ä»¶åï¼Œåˆ›å»º<strong>vnode</strong>ï¼Œå¹¶å°†æ–‡ä»¶ä¿¡æ¯å¤åˆ¶åˆ°vnodeä¸­ï¼Œvnodeçš„åŠŸèƒ½æŒ‡é’ˆæŒ‡å‘å…·ä½“æ–‡ä»¶ç³»ç»Ÿçš„å‡½æ•°åŠŸèƒ½</p></li></ul></li></ul><h3 id="æ–‡ä»¶ç³»ç»ŸæŒ‚è½½mounting">3.3<strong>æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ï¼ˆmountingï¼‰</strong></h3><ul><li>å³æ–‡ä»¶ç³»ç»Ÿå®‰è£…/è£…è½½ -- å¦‚ä½•å°†ä¸€ä¸ªæ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°æ“ä½œç³»ç»Ÿä¸­ï¼Ÿ<ul><li>æ–‡ä»¶ç³»ç»ŸæŒ‚è½½è¦åšçš„äº‹:<ul><li>åœ¨<strong>VFS</strong>ä¸­æ³¨å†Œæ–°æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œ<strong>å†…å­˜ä¸­çš„æŒ‚è½½è¡¨ï¼ˆmountingtableï¼‰</strong>åŒ…å«æ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…å«æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€å®¹é‡å¤§å°ç­‰</li><li>æ–°æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¦å‘<strong>VFS</strong>æä¾›ä¸€ä¸ª<strong>å‡½æ•°åœ°å€åˆ—è¡¨</strong></li><li>å°†æ–°æ–‡ä»¶ç³»ç»ŸåŠ åˆ°<strong>æŒ‚è½½ç‚¹</strong>ï¼ˆmountpointï¼‰ï¼Œä¹Ÿå°±æ˜¯å°†æ–°æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åœ¨æŸä¸ªçˆ¶ç›®å½•ä¸‹</li></ul></li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬å››ç«  æ–‡ä»¶ç®¡ç†-4.1 æ–‡ä»¶ç³»ç»ŸåŸºç¡€</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ç³»ç»Ÿ"><strong>4.1 æ–‡ä»¶ç³»ç»Ÿ</strong></h1><h2 id="åˆå§‹æ–‡ä»¶ç®¡ç†"><strong>1. åˆå§‹æ–‡ä»¶ç®¡ç†</strong></h2><ul><li><strong>æ–‡ä»¶</strong>ï¼š<strong>ä¸€ç»„æœ‰æ„ä¹‰çš„ä¿¡æ¯/æ•°æ®é›†åˆ</strong></li></ul><h3 id="æ–‡ä»¶ç®¡ç†">1.1 <strong>æ–‡ä»¶ç®¡ç†</strong></h3><ul><li><p>è®¡ç®—æœºä¸­å­˜æ”¾äº†å„ç§å„æ ·çš„æ–‡ä»¶ï¼Œä¸€ä¸ª<strong>æ–‡ä»¶æœ‰å“ªäº›å±æ€§</strong>ï¼Ÿ</p></li><li><p><strong>æ–‡ä»¶å†…éƒ¨çš„æ•°æ®åº”è¯¥æ€æ ·ç»„ç»‡èµ·æ¥</strong>ï¼Ÿ</p></li><li><p><strong>æ–‡ä»¶ä¹‹é—´åˆåº”è¯¥åˆåº”è¯¥æ€ä¹ˆç»„ç»‡èµ·æ¥</strong>ï¼Ÿ</p></li><li><p>è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ä»ä¸‹å¾€ä¸Šçœ‹ï¼Œ<strong>OSåº”æä¾›å“ªäº›åŠŸèƒ½ï¼Œæ‰èƒ½æ–¹ä¾¿ç”¨æˆ·ã€åº”ç”¨ç¨‹åºä½¿ç”¨æ–‡ä»¶</strong>ï¼Ÿ</p></li><li><p>è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ä»ä¸Šå¾€ä¸‹çœ‹ï¼Œ<strong>æ–‡ä»¶æ•°æ®åº”è¯¥æ€ä¹ˆå­˜æ”¾åœ¨å¤–å­˜ï¼ˆç£ç›˜ï¼‰ä¸Š</strong>ï¼Ÿ</p></li><li><p><strong>å¦‚ä½•å®ç°æ–‡ä»¶çš„å…±äº«å’Œä¿æŠ¤</strong></p></li></ul><h3 id="æ–‡ä»¶çš„å±æ€§">1.2 <strong>æ–‡ä»¶çš„å±æ€§</strong></h3><ul><li><p><strong>æ–‡ä»¶å</strong></p><ul><li>ç”±åˆ›å»ºæ–‡ä»¶çš„ç”¨æˆ·å†³å®šæ–‡ä»¶åï¼Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·æ‰¾åˆ°æ–‡ä»¶ï¼Œ<strong>åŒä¸€ç›®å½•ä¸‹ä¸å…è®¸æœ‰é‡åæ–‡ä»¶</strong></li></ul></li><li><p><strong>æ ‡è¯†ç¬¦</strong></p><ul><li>ä¸€ä¸ªç³»ç»Ÿå†…çš„å„æ–‡ä»¶æ ‡è¯†ç¬¦å”¯ä¸€ï¼Œå¯¹ç”¨æˆ·æ¥è¯´æ¯«æ— å¯è¯»æ€§ï¼Œå› æ­¤æ ‡è¯†ç¬¦åªæ˜¯æ“ä½œç³»ç»Ÿç”¨äºåŒºåˆ†å„ä¸ªæ–‡ä»¶çš„ä¸€ç§å†…éƒ¨åç§°</li></ul></li><li><p><strong>ç±»å‹</strong></p><ul><li>æŒ‡æ˜æ–‡ä»¶çš„ç±»å‹ä½ç½®ï¼šæ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ï¼ˆè®©ç”¨æˆ·ä½¿ç”¨ï¼‰ã€åœ¨å¤–å­˜ä¸­çš„åœ°å€ï¼ˆæ“ä½œç³»ç»Ÿä½¿ç”¨ï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ï¼‰</li></ul></li><li><p><strong>å¤§å°</strong></p><ul><li>æŒ‡æ˜æ–‡ä»¶å¤§å°</li></ul></li><li><p><strong>åˆ›å»ºæ—¶é—´</strong>ã€<strong>ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´</strong></p></li><li><p><strong>æ–‡ä»¶æ‰€æœ‰è€…ä¿¡æ¯</strong></p></li><li><p><strong>ä¿æŠ¤ä¿¡æ¯</strong></p><ul><li>å¯¹æ–‡ä»¶è¿›è¡Œä¿æŠ¤çš„è®¿é—®æ§åˆ¶ä¿¡æ¯</li></ul></li></ul><h3 id="æ–‡ä»¶å†…éƒ¨çš„æ•°æ®åº”è¯¥æ€æ ·ç»„ç»‡èµ·æ¥">1.3<strong>æ–‡ä»¶å†…éƒ¨çš„æ•°æ®åº”è¯¥æ€æ ·ç»„ç»‡èµ·æ¥ï¼Ÿ</strong></h3><ul><li><strong>æ— ç»“æ„æ–‡ä»¶</strong>ï¼ˆå¦‚æ–‡æœ¬æ–‡ä»¶ï¼‰--ç”±ä¸€äº›äºŒè¿›åˆ¶æˆ–å­—ç¬¦æµç»„æˆï¼Œåˆç§°â€œ<strong>æµå¼æ–‡ä»¶</strong>â€</li><li><strong>æœ‰ç»“æ„æ–‡ä»¶</strong>ï¼ˆå¦‚æ•°æ®åº“è¡¨ï¼‰--ç”±ä¸€ç»„ç›¸ä¼¼çš„<strong>è®°å½•</strong>ç»„æˆï¼Œåˆç§°â€œ<strong>è®°å½•å¼æ–‡ä»¶</strong>â€<ul><li><strong>è®°å½•</strong>æ˜¯ä¸€ç»„ç›¸å…³<strong>æ•°æ®é¡¹</strong>çš„é›†åˆ<ul><li><strong>æ•°æ®é¡¹</strong>æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„æ•°æ®å•ä½</li></ul></li><li><strong>æœ‰ç»“æ„æ–‡ä»¶</strong>ä¸­ï¼Œ<strong>å„ä¸ªè®°å½•é—´åº”è¯¥å¦‚ä½•ç»„ç»‡</strong>çš„é—®é¢˜<ul><li>åº”è¯¥é¡ºåºå­˜æ”¾ï¼Ÿè¿˜æ˜¯ç”¨ç´¢å¼•è¡¨æ¥è¡¨ç¤ºè®°å½•é—´çš„é¡ºåºï¼Ÿ--è¿™æ˜¯â€œ<strong>æ–‡ä»¶çš„é€»è¾‘ç»“æ„</strong>â€é‡ç‚¹è¦æ¢è®¨çš„é—®é¢˜</li></ul></li></ul></li></ul><h3 id="æ–‡ä»¶ä¹‹é—´åº”è¯¥æ€æ ·ç»„ç»‡èµ·æ¥">1.4<strong>æ–‡ä»¶ä¹‹é—´åº”è¯¥æ€æ ·ç»„ç»‡èµ·æ¥ï¼Ÿ</strong></h3><ul><li>ç”¨æˆ·å¯ä»¥è‡ªå·±åˆ›å»ºä¸€å±‚ä¸€å±‚çš„<strong>ç›®å½•</strong>ï¼Œå„å±‚ç›®å½•ä¸­å­˜æ”¾ç›¸åº”çš„<strong>æ–‡ä»¶</strong>ã€‚<strong>ç³»ç»Ÿä¸­çš„å„ä¸ªæ–‡ä»¶å°±é€šè¿‡ä¸€å±‚ä¸€å±‚çš„ç›®å½•åˆç†æœ‰åºçš„ç»„ç»‡èµ·æ¥äº†</strong><ul><li>æ‰€è°“çš„â€œ<strong>ç›®å½•</strong>â€å…¶å®å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„â€œ<strong>æ–‡ä»¶å¤¹</strong>â€</li><li><strong>ç›®å½•</strong>å…¶å®ä¹Ÿ<strong>æ˜¯ä¸€ç§ç‰¹æ®Šçš„æœ‰ç»“æ„æ–‡ä»¶ï¼ˆç”±è®°å½•ç»„æˆï¼‰</strong>ï¼Œå¦‚ä½•å®ç°<strong>æ–‡ä»¶ç›®å½•</strong>æ˜¯ä¹‹åä¼šé‡ç‚¹æ¢è®¨çš„é—®é¢˜</li></ul></li></ul><h3 id="æ“ä½œç³»ç»Ÿåº”è¯¥å‘ä¸Šæä¾›å“ªäº›åŠŸèƒ½">1.5<strong>æ“ä½œç³»ç»Ÿåº”è¯¥å‘ä¸Šæä¾›å“ªäº›åŠŸèƒ½ï¼Ÿ</strong></h3><ul><li><p>å¯ä»¥â€œ<strong>åˆ›å»ºæ–‡ä»¶</strong>â€ï¼ˆç‚¹å‡»æ–°å»ºåï¼Œå›¾å½¢åŒ–äº¤äº’è¿›ç¨‹åœ¨èƒŒåè°ƒç”¨äº†â€œ<strong>createç³»ç»Ÿè°ƒç”¨</strong>â€ï¼‰</p></li><li><p>å¯ä»¥<strong>â€œåˆ é™¤æ–‡ä»¶</strong>â€ï¼ˆç‚¹å‡»åˆ é™¤åï¼Œå›¾å½¢åŒ–äº¤äº’è¿›ç¨‹åœ¨èƒŒåè°ƒç”¨äº†"<strong>deleteç³»ç»Ÿè°ƒç”¨</strong>"ï¼Œå°†æ–‡ä»¶æ•°æ®ä»å¤–å­˜ä¸­åˆ é™¤ï¼‰</p></li><li><p>å¯ä»¥â€œ<strong>è¯»æ–‡ä»¶</strong>â€ï¼Œå°†æ–‡ä»¶æ•°æ®è¯»å…¥å†…å­˜ï¼Œæ‰èƒ½è®©CPUå¤„ç†ï¼ˆåŒå‡»åï¼Œâ€œè®°äº‹æœ¬â€åº”ç”¨ç¨‹åºé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„â€œ<strong>readç³»ç»Ÿè°ƒç”¨</strong>â€ï¼Œå°†æ–‡ä»¶æ•°æ®ä»å¤–å­˜è¯»å…¥å†…å­˜ï¼Œå¹¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼‰</p></li><li><p>å¯ä»¥â€œ<strong>å†™æ–‡ä»¶</strong>â€ï¼Œå°†æ›´æ”¹è¿‡çš„æ–‡ä»¶æ•°æ®å†™å›å¤–å­˜ï¼ˆåœ¨â€œè®°äº‹æœ¬â€åº”ç”¨ç¨‹åºä¸­ç¼–è¾‘æ–‡ä»¶å†…å®¹ï¼Œç‚¹å‡»â€œä¿å­˜â€åï¼Œâ€œè®°äº‹æœ¬â€åº”ç”¨ç¨‹åºé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„â€œ<strong>writeç³»ç»Ÿè°ƒç”¨</strong>â€ï¼Œå°†æ–‡ä»¶æ•°æ®ä»å†…å­˜å†™å›å¤–å­˜ï¼‰</p></li><li><p>è¯»/å†™æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„"<strong>openç³»ç»Ÿè°ƒç”¨</strong>"æ¥â€œ<strong>æ‰“å¼€æ–‡ä»¶</strong>â€</p></li><li><p>è¯»/å†™æ–‡ä»¶ç»“æŸä¹‹åï¼Œéœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„"<strong>closeç³»ç»Ÿè°ƒç”¨</strong>"æ¥â€œ<strong>å…³é—­æ–‡ä»¶</strong>â€</p></li><li><p>å¯ç”¨å‡ ä¸ªåŸºæœ¬æ“ä½œå®Œæˆæ›´å¤æ‚çš„æ“ä½œ</p><ul><li>æ¯”å¦‚ï¼šâ€œå¤åˆ¶æ–‡ä»¶â€ï¼šå…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ï¼Œå†æŠŠæºæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå†å°†å†…å­˜ä¸­çš„æ•°æ®å†™åˆ°æ–°æ–‡ä»¶ä¸­</li></ul></li></ul><h3 id="ä»ä¸Šå¾€ä¸‹çœ‹æ–‡ä»¶åº”å¦‚ä½•å­˜æ”¾åœ¨å¤–å­˜">1.6<strong>ä»ä¸Šå¾€ä¸‹çœ‹ï¼Œæ–‡ä»¶åº”å¦‚ä½•å­˜æ”¾åœ¨å¤–å­˜ï¼Ÿ</strong></h3><ul><li><strong>å¤–å­˜çš„ç»“æ„</strong><ul><li>ä¸å†…å­˜ä¸€æ ·ï¼Œ<strong>å¤–å­˜</strong>ä¹Ÿæ˜¯ç”±ä¸€ä¸ªä¸ª<strong>å­˜å‚¨å•å…ƒ</strong>ç»„æˆçš„ï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒå¯ä»¥å­˜å‚¨ä¸€å®šé‡çš„æ•°æ®ï¼ˆå¦‚1Bï¼‰<ul><li><strong>æ¯ä¸ªå­˜å‚¨å•å…ƒå¯¹åº”ä¸€ä¸ªç‰©ç†åœ°å€</strong></li></ul></li><li>ç±»ä¼¼äºå†…å­˜åˆ†ä¸ºä¸€ä¸ªä¸ªâ€œå†…å­˜å—â€ï¼Œ<strong>å¤–å­˜</strong>ä¼šåˆ†ä¸ºä¸€ä¸ªä¸ªâ€œ<strong>å—/ç£ç›˜å—/ç‰©ç†å—</strong>â€ã€‚<strong>æ¯ä¸ªç£ç›˜å—çš„å¤§å°æ˜¯ç›¸ç­‰çš„ï¼Œæ¯å—ä¸€èˆ¬åŒ…å«2çš„æ•´æ•°å¹‚ä¸ªåœ°å€</strong>ï¼ˆå¦‚æœ¬ä¾‹ä¸­ï¼Œä¸€å—åŒ…å«2<sup>10</sup> ä¸ªåœ°å€ï¼Œå³1KBï¼‰ã€‚åŒæ ·ç±»ä¼¼çš„æ˜¯ï¼Œ<strong>æ–‡ä»¶çš„é€»è¾‘åœ°å€</strong>ä¹Ÿå¯ä»¥åˆ†ä¸º<strong>ï¼ˆé€»è¾‘å—å·ï¼Œå—å†…åœ°å€ï¼‰</strong>ï¼Œæ“ä½œç³»ç»ŸåŒæ ·éœ€è¦å°†<strong>é€»è¾‘åœ°å€è½¬æ¢ä¸ºå¤–å­˜çš„ç‰©ç†åœ°å€ï¼ˆç‰©ç†å—å·ï¼Œå—å†…åœ°å€ï¼‰</strong>çš„å½¢å¼ã€‚<strong>å—å†…åœ°å€çš„ä½æ•°å–å†³äºç£ç›˜å—çš„å¤§å°</strong></li><li><strong>æ“ä½œç³»ç»Ÿä»¥â€œå—â€ä¸ºå•ä½ä¸ºæ–‡ä»¶åˆ†é…å­˜å‚¨ç©ºé—´</strong>ï¼Œå› æ­¤å³ä½¿ä¸€ä¸ªæ–‡ä»¶å¤§å°åªæœ‰10Bï¼Œä½†å®ƒä¾ç„¶éœ€è¦å ç”¨1KB çš„ç£ç›˜å—ã€‚<strong>å¤–å­˜ä¸­çš„æ•°æ®è¯»å…¥å†…å­˜æ—¶åŒæ ·ä»¥å—ä¸ºå•ä½</strong></li></ul></li><li><strong>æ–‡ä»¶åº”å¦‚ä½•å­˜æ”¾åœ¨å¤–å­˜ï¼Ÿ</strong><ul><li>æ–‡ä»¶æ•°æ®æ”¾åœ¨è¿ç»­çš„å‡ ä¸ªç£ç›˜å—ä¸­ï¼Ÿ</li><li>æ–‡ä»¶æ•°æ®æ”¾åœ¨ç¦»æ•£çš„å‡ ä¸ªç£ç›˜å—ä¸­ï¼Ÿæ­¤æ—¶ï¼Œåº”è¯¥å¦‚ä½•è®°å½•å„ä¸ªç£ç›˜å—ä¹‹é—´çš„å…ˆåé¡ºåºå‘¢ï¼Ÿ</li><li>æ“ä½œç³»ç»Ÿåˆåº”è¯¥æ€ä¹ˆç®¡ç†ç©ºé—²ç£ç›˜å—ï¼Ÿ</li><li>è¿™äº›éƒ½æ˜¯â€œ<strong>æ–‡ä»¶çš„ç‰©ç†ç»“æ„</strong>â€éƒ¨åˆ†ä¼šæ¢è®¨çš„å†…å®¹</li></ul></li></ul><h3 id="å…¶ä»–éœ€è¦ç”±æ“ä½œç³»ç»Ÿå®ç°çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½">1.7<strong>å…¶ä»–éœ€è¦ç”±æ“ä½œç³»ç»Ÿå®ç°çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½</strong></h3><ul><li><strong>æ–‡ä»¶å…±äº«</strong>ï¼šä½¿å¤šä¸ªç”¨æˆ·å¯ä»¥å…±äº«ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶</li><li><strong>æ–‡ä»¶ä¿æŠ¤</strong>ï¼šå¦‚ä½•ä¿è¯ä¸åŒçš„ç”¨æˆ·å¯¹æ–‡ä»¶æœ‰ä¸åŒçš„æ“ä½œæƒé™</li></ul><h2 id="æ–‡ä»¶çš„é€»è¾‘ç»“æ„"><strong>2. æ–‡ä»¶çš„é€»è¾‘ç»“æ„</strong></h2><ul><li><p>â€œ<strong>é€»è¾‘ç»“æ„</strong>â€ï¼šå°±æ˜¯æŒ‡åœ¨ç”¨æˆ·çœ‹æ¥ï¼Œæ–‡ä»¶å†…éƒ¨çš„æ•°æ®åº”è¯¥æ˜¯å¦‚ä½•ç»„ç»‡èµ·æ¥çš„</p></li><li><p>â€œ<strong>ç‰©ç†ç»“æ„</strong>â€ï¼šæŒ‡çš„æ˜¯åœ¨æ“ä½œç³»ç»Ÿçœ‹æ¥ï¼Œæ–‡ä»¶çš„æ•°æ®æ˜¯å¦‚ä½•å­˜æ”¾åœ¨å¤–å­˜ä¸­çš„</p><ul><li>ç±»ä¼¼äºæ•°æ®ç»“æ„çš„â€œé€»è¾‘ç»“æ„â€å’Œâ€œç‰©ç†ç»“æ„â€</li><li>å¦‚â€œçº¿æ€§è¡¨â€å°±æ˜¯ä¸€ç§é€»è¾‘ç»“æ„ï¼Œåœ¨ç”¨æˆ·è§’åº¦çœ‹æ¥ï¼Œçº¿æ€§è¡¨å°±æ˜¯ä¸€ç»„æœ‰å…ˆåå…³ç³»çš„å…ƒç´ åºåˆ—ï¼Œå¦‚ï¼ša,b, c, d, e â€¦â€¦</li><li>â€œçº¿æ€§è¡¨â€è¿™ç§é€»è¾‘ç»“æ„å¯ä»¥ç”¨ä¸åŒçš„ç‰©ç†ç»“æ„å®ç°ï¼Œå¦‚ï¼šé¡ºåºè¡¨/é“¾è¡¨ã€‚é¡ºåºè¡¨çš„å„ä¸ªå…ƒç´ åœ¨é€»è¾‘ä¸Šç›¸é‚»ï¼Œåœ¨ç‰©ç†ä¸Šä¹Ÿç›¸é‚»ï¼›è€Œé“¾è¡¨çš„å„ä¸ªå…ƒç´ åœ¨ç‰©ç†ä¸Šå¯ä»¥æ˜¯ä¸ç›¸é‚»çš„ã€‚å› æ­¤ï¼Œé¡ºåºè¡¨å¯ä»¥å®ç°â€œéšæœºè®¿é—®â€ï¼Œè€Œâ€œé“¾è¡¨â€æ— æ³•å®ç°éšæœºè®¿é—®</li><li>å¯è§ï¼Œç®—æ³•çš„å…·ä½“å®ç°ä¸é€»è¾‘ç»“æ„ã€ç‰©ç†ç»“æ„éƒ½æœ‰å…³ï¼ˆæ–‡ä»¶ä¹Ÿä¸€æ ·ï¼Œæ–‡ä»¶æ“ä½œçš„å…·ä½“å®ç°ä¸æ–‡ä»¶çš„é€»è¾‘ç»“æ„ã€ç‰©ç†ç»“æ„éƒ½æœ‰å…³ï¼‰</li></ul></li><li><p>æŒ‰æ–‡ä»¶æ˜¯å¦æœ‰ç»“æ„åˆ†ç±»ï¼Œå¯ä»¥åˆ†ä¸º<strong>æ— ç»“æ„æ–‡ä»¶</strong>ã€<strong>æœ‰ç»“æ„æ–‡ä»¶</strong>ä¸¤ç§</p></li></ul><h3 id="æ— ç»“æ„æ–‡ä»¶">2.1 <strong>æ— ç»“æ„æ–‡ä»¶</strong></h3><ul><li><p><strong>æ–‡ä»¶å†…éƒ¨çš„æ•°æ®å°±æ˜¯ä¸€ç³»åˆ—äºŒè¿›åˆ¶æµæˆ–å­—ç¬¦æµç»„æˆ</strong>ã€‚åˆç§°â€œ<strong>æµå¼æ–‡ä»¶</strong>â€</p></li><li><p>å¦‚ï¼šWindows æ“ä½œç³»ç»Ÿä¸­çš„ .txtæ–‡ä»¶ï¼Œæ–‡ä»¶å†…éƒ¨çš„æ•°æ®å…¶å®å°±æ˜¯ä¸€ç³»åˆ—å­—ç¬¦æµï¼Œæ²¡æœ‰æ˜æ˜¾çš„ç»“æ„ç‰¹æ€§ã€‚å› æ­¤ä¹Ÿä¸ç”¨æ¢è®¨æ— ç»“æ„æ–‡ä»¶çš„â€œé€»è¾‘ç»“æ„â€é—®é¢˜</p></li></ul><h3 id="æœ‰ç»“æ„æ–‡ä»¶">2.2 <strong>æœ‰ç»“æ„æ–‡ä»¶</strong></h3><ul><li><p><strong>ç”±ä¸€ç»„ç›¸ä¼¼çš„è®°å½•ç»„æˆ</strong>ï¼Œåˆç§°â€œ<strong>è®°å½•å¼æ–‡ä»¶</strong>â€ã€‚æ¯æ¡<strong>è®°å½•</strong>åˆè‹¥å¹²ä¸ª<strong>æ•°æ®é¡¹</strong>ç»„æˆ</p><ul><li>å¦‚ï¼šæ•°æ®åº“è¡¨æ–‡ä»¶</li></ul></li><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¯æ¡<strong>è®°å½•</strong>æœ‰ä¸€ä¸ª<strong>æ•°æ®é¡¹</strong>å¯ä½œä¸º<strong>å…³é”®å­—</strong>ï¼ˆä½œä¸ºè¯†åˆ«ä¸åŒè®°å½•çš„IDï¼‰</p></li><li><p>æ ¹æ®å„æ¡è®°å½•çš„é•¿åº¦ï¼ˆå ç”¨çš„å­˜å‚¨ç©ºé—´ï¼‰æ˜¯å¦ç›¸ç­‰ï¼Œåˆå¯åˆ†ä¸º<strong>å®šé•¿è®°å½•</strong>å’Œ<strong>å¯å˜é•¿è®°å½•</strong>ä¸¤ç§</p></li><li><p><strong>æœ‰ç»“æ„æ–‡ä»¶çš„é€»è¾‘ç»“æ„</strong>ï¼šæ ¹æ®æœ‰ç»“æ„æ–‡ä»¶ä¸­çš„å„æ¡è®°å½•åœ¨é€»è¾‘ä¸Šå¦‚ä½•ç»„ç»‡ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ç±»</p><ul><li><strong>é¡ºåºæ–‡ä»¶</strong></li><li><strong>ç´¢å¼•æ–‡ä»¶</strong></li><li><strong>ç´¢å¼•é¡ºåºæ–‡ä»¶</strong></li></ul></li></ul><h3 id="é¡ºåºæ–‡ä»¶">2.3 <strong>é¡ºåºæ–‡ä»¶</strong></h3><ul><li><p><strong>æ–‡ä»¶ä¸­çš„è®°å½•ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°é¡ºåºæ’åˆ—ï¼ˆé€»è¾‘ä¸Šï¼‰</strong>ï¼Œ<strong>è®°å½•</strong>å¯ä»¥æ˜¯<strong>å®šé•¿</strong>çš„æˆ–<strong>å¯å˜é•¿</strong>çš„ã€‚å„ä¸ªè®°å½•åœ¨<strong>ç‰©ç†ä¸Š</strong>å¯ä»¥<strong>é¡ºåºå­˜å‚¨</strong>æˆ–<strong>é“¾å¼å­˜å‚¨</strong></p><ul><li><strong>é¡ºåºå­˜å‚¨</strong>ï¼šé€»è¾‘ä¸Šç›¸é‚»çš„è®°å½•ç‰©ç†ä¸Šä¹Ÿç›¸é‚»ï¼ˆç±»ä¼¼äºé¡ºåºè¡¨ï¼‰</li><li><strong>é“¾å¼å­˜å‚¨</strong>ï¼šé€»è¾‘ä¸Šç›¸é‚»çš„è®°å½•ç‰©ç†ä¸Šä¸ä¸€å®šç›¸é‚»ï¼ˆç±»ä¼¼äºé“¾è¡¨ï¼‰</li></ul></li><li><p><strong>é¡ºåºæ–‡ä»¶</strong>è¿˜å¯æŒ‰<strong>è®°å½•ä¹‹é—´çš„å…³é”®å­—é¡ºåº</strong>åˆ†ä¸ºï¼š</p><ul><li><strong>ä¸²ç»“æ„</strong>ï¼šè®°å½•ä¹‹é—´çš„é¡ºåºä¸å…³é”®å­—æ— å…³ï¼ˆé€šå¸¸æŒ‰ç…§è®°å½•å­˜å…¥çš„æ—¶é—´å†³å®šè®°å½•çš„é¡ºåºï¼‰</li><li><strong>é¡ºåºç»“æ„</strong>ï¼šè®°å½•ä¹‹é—´çš„é¡ºåºæŒ‰å…³é”®å­—é¡ºåºæ’åˆ—</li></ul></li><li><p><strong>æ€è€ƒ</strong>:</p><ul><li><p>å‡è®¾ï¼šå·²ç»çŸ¥é“äº†æ–‡ä»¶çš„èµ·å§‹åœ°å€ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªè®°å½•å­˜æ”¾çš„ä½ç½®ï¼‰</p><ul><li>æ€è€ƒ1ï¼šèƒ½å¦å¿«é€Ÿæ‰¾åˆ°ç¬¬ iä¸ªè®°å½•å¯¹åº”çš„åœ°å€ï¼Ÿï¼ˆå³èƒ½å¦å®ç°éšæœºå­˜å–ï¼‰</li><li>æ€è€ƒ2ï¼šèƒ½å¦å¿«é€Ÿæ‰¾åˆ°æŸä¸ªå…³é”®å­—å¯¹åº”çš„è®°å½•å­˜æ”¾çš„ä½ç½®ï¼Ÿ</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/image-20241121201519877.png"></p></li><li><p><strong>ç»“è®º</strong>ï¼šå®šé•¿è®°å½•çš„é¡ºåºæ–‡ä»¶ï¼Œè‹¥ç‰©ç†ä¸Šé‡‡ç”¨é¡ºåºå­˜å‚¨ï¼Œåˆ™å¯å®ç°éšæœºå­˜å–ï¼›è‹¥èƒ½å†ä¿è¯è®°å½•çš„é¡ºåºç»“æ„ï¼Œåˆ™å¯å®ç°å¿«é€Ÿæ£€ç´¢ï¼ˆå³æ ¹æ®å…³é”®å­—å¿«é€Ÿæ‰¾åˆ°å¯¹åº”è®°å½•ï¼‰</p><ul><li>æ³¨ï¼šä¸€èˆ¬æ¥è¯´ï¼Œè€ƒè¯•é¢˜ç›®ä¸­æ‰€è¯´çš„â€œé¡ºåºæ–‡ä»¶â€æŒ‡çš„æ˜¯<strong>ç‰©ç†ä¸Šé¡ºåºå­˜å‚¨çš„é¡ºåºæ–‡ä»¶</strong>ã€‚ä¹‹åçš„è®²è§£ä¸­æåˆ°çš„é¡ºåºæ–‡ä»¶ä¹Ÿé»˜è®¤å¦‚æ­¤ã€‚å¯è§ï¼Œé¡ºåºæ–‡ä»¶çš„<strong>ç¼ºç‚¹</strong>æ˜¯<strong>å¢åŠ /åˆ é™¤ä¸€ä¸ªè®°å½•æ¯”è¾ƒå›°éš¾</strong>ï¼ˆå¦‚æœæ˜¯ä¸²ç»“æ„åˆ™ç›¸å¯¹ç®€å•ï¼‰</li></ul></li></ul></li></ul><h3 id="ç´¢å¼•æ–‡ä»¶">2.4 <strong>ç´¢å¼•æ–‡ä»¶</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/image-20241121201802502.png"></p><ul><li><p>å¯¹äºå¯å˜é•¿è®°å½•æ–‡ä»¶ï¼Œè¦æ‰¾åˆ°ç¬¬ i ä¸ªè®°å½•ï¼Œå¿…é¡»å…ˆé¡ºåºç¬¬æŸ¥æ‰¾å‰ i-1ä¸ªè®°å½•ï¼Œä½†æ˜¯å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸­åˆå¿…é¡»ä½¿ç”¨å¯å˜é•¿è®°å½•ã€‚å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</p></li><li><p><strong>ç´¢å¼•è¡¨</strong>æœ¬èº«æ˜¯<strong>å®šé•¿è®°å½•çš„é¡ºåºæ–‡ä»¶</strong>ã€‚å› æ­¤å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç¬¬i ä¸ªè®°å½•å¯¹åº”çš„ç´¢å¼•é¡¹</p></li><li><p>å¯å°†<strong>å…³é”®å­—ä½œä¸ºç´¢å¼•å·å†…å®¹</strong>ï¼Œè‹¥æŒ‰å…³é”®å­—é¡ºåºæ’åˆ—ï¼Œåˆ™è¿˜å¯ä»¥æ”¯æŒæŒ‰ç…§å…³é”®å­—æŠ˜åŠæŸ¥æ‰¾</p></li><li><p>æ¯å½“è¦å¢åŠ /åˆ é™¤ä¸€ä¸ªè®°å½•æ—¶ï¼Œéœ€è¦å¯¹ç´¢å¼•è¡¨è¿›è¡Œä¿®æ”¹ã€‚ç”±äºç´¢å¼•æ–‡ä»¶æœ‰å¾ˆå¿«çš„æ£€ç´¢é€Ÿåº¦ï¼Œå› æ­¤ä¸»è¦<strong>ç”¨äºå¯¹ä¿¡æ¯å¤„ç†çš„åŠæ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºåˆ</strong></p></li><li><p>å¦å¤–ï¼Œå¯ä»¥ç”¨ä¸åŒçš„æ•°æ®é¡¹å»ºç«‹å¤šä¸ªç´¢å¼•è¡¨</p><ul><li>å¦‚ï¼šå­¦ç”Ÿä¿¡æ¯è¡¨ä¸­ï¼Œå¯ç”¨å…³é”®å­—â€œå­¦å·â€å»ºç«‹ä¸€å¼ ç´¢å¼•è¡¨ã€‚ä¹Ÿå¯ç”¨â€œå§“åâ€å»ºç«‹ä¸€å¼ ç´¢å¼•è¡¨ã€‚è¿™æ ·å°±å¯ä»¥æ ¹æ®â€œå§“åâ€å¿«é€Ÿåœ°æ£€ç´¢æ–‡ä»¶äº†</li><li>Egï¼šSQL å°±æ”¯æŒæ ¹æ®æŸä¸ªæ•°æ®é¡¹å»ºç«‹ç´¢å¼•çš„åŠŸèƒ½</li></ul></li></ul><h3 id="ç´¢å¼•é¡ºåºæ–‡ä»¶">2.5 <strong>ç´¢å¼•é¡ºåºæ–‡ä»¶</strong></h3><ul><li><p>æ€è€ƒ<strong>ç´¢å¼•æ–‡ä»¶</strong>çš„ç¼ºç‚¹ï¼šæ¯ä¸ªè®°å½•å¯¹åº”ä¸€ä¸ªç´¢å¼•è¡¨é¡¹ï¼Œå› æ­¤ç´¢å¼•è¡¨å¯èƒ½ä¼šå¾ˆå¤§</p><ul><li>æ¯”å¦‚ï¼šæ–‡ä»¶çš„æ¯ä¸ªè®°å½•å¹³å‡åªå 8Bï¼Œè€Œæ¯ä¸ªç´¢å¼•è¡¨é¡¹å 32ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆç´¢å¼•è¡¨éƒ½è¦æ¯”æ–‡ä»¶å†…å®¹æœ¬èº«å¤§4å€ï¼Œè¿™æ ·å¯¹å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡å°±å¤ªä½äº†</li></ul></li><li><p><strong>ç´¢å¼•é¡ºåºæ–‡ä»¶</strong>æ˜¯ç´¢å¼•æ–‡ä»¶å’Œé¡ºåºæ–‡ä»¶æ€æƒ³çš„ç»“åˆ</p></li><li><p>ç´¢å¼•é¡ºåºæ–‡ä»¶ä¸­ï¼ŒåŒæ ·ä¼šä¸ºæ–‡ä»¶å»ºç«‹ä¸€å¼ <strong>ç´¢å¼•è¡¨</strong>ï¼Œä½†ä¸åŒçš„æ˜¯ï¼š<strong>å¹¶ä¸æ˜¯æ¯ä¸ªè®°å½•å¯¹åº”ä¸€ä¸ªç´¢å¼•è¡¨é¡¹ï¼Œè€Œæ˜¯ä¸€ç»„è®°å½•å¯¹åº”ä¸€ä¸ªç´¢å¼•è¡¨é¡¹</strong></p><ul><li>åœ¨æœ¬ä¾‹ä¸­ï¼Œå­¦ç”Ÿè®°å½•æŒ‰ç…§å­¦ç”Ÿå§“åçš„å¼€å¤´å­—æ¯è¿›è¡Œåˆ†ç»„ã€‚<strong>æ¯ä¸ªåˆ†ç»„å°±æ˜¯ä¸€ä¸ªé¡ºåºæ–‡ä»¶ï¼Œåˆ†ç»„å†…çš„è®°å½•ä¸éœ€è¦æŒ‰å…³é”®å­—æ’åº</strong></li><li>ç”¨è¿™ç§ç­–ç•¥ç¡®å®å¯ä»¥è®©ç´¢å¼•è¡¨â€œç˜¦èº«â€ï¼Œä½†æ˜¯æ˜¯å¦ä¼šå‡ºç°ä¸å®šé•¿è®°å½•çš„é¡ºåºæ–‡ä»¶æ£€ç´¢é€Ÿåº¦æ…¢çš„é—®é¢˜å‘¢ï¼Ÿ<ul><li>è‹¥ä¸€ä¸ªé¡ºåºæ–‡ä»¶æœ‰10000ä¸ªè®°å½•ï¼Œåˆ™æ ¹æ®å…³é”®å­—æ£€ç´¢æ–‡ä»¶ï¼Œåªèƒ½ä»å¤´å¼€å§‹é¡ºåºæŸ¥æ‰¾ï¼ˆè¿™é‡ŒæŒ‡çš„å¹¶ä¸æ˜¯å®šé•¿è®°å½•ã€é¡ºåºç»“æ„çš„é¡ºåºæ–‡ä»¶ï¼‰ï¼Œå¹³å‡é¡»æŸ¥æ‰¾5000 ä¸ªè®°å½•</li><li>è‹¥é‡‡ç”¨ç´¢å¼•é¡ºåºæ–‡ä»¶ç»“æ„ï¼Œå¯æŠŠ 10000 ä¸ªè®°å½•åˆ†ä¸º âˆš10000 = 100 ç»„ï¼Œæ¯ç»„100ä¸ªè®°å½•ã€‚åˆ™éœ€è¦å…ˆé¡ºåºæŸ¥æ‰¾ç´¢å¼•è¡¨æ‰¾åˆ°åˆ†ç»„ï¼ˆå…±100ä¸ªåˆ†ç»„ï¼Œå› æ­¤ç´¢å¼•è¡¨é•¿åº¦ä¸º100ï¼Œå¹³å‡éœ€è¦æŸ¥50 æ¬¡ï¼‰ï¼Œæ‰¾åˆ°åˆ†ç»„åï¼Œå†åœ¨åˆ†ç»„ä¸­é¡ºåºæŸ¥æ‰¾è®°å½•ï¼ˆæ¯ä¸ªåˆ†ç»„100ä¸ªè®°å½•ï¼Œå› æ­¤å¹³å‡éœ€è¦æŸ¥50æ¬¡ï¼‰ã€‚å¯è§ï¼Œé‡‡ç”¨ç´¢å¼•é¡ºåºæ–‡ä»¶ç»“æ„åï¼Œå¹³å‡æŸ¥æ‰¾æ¬¡æ•°å‡å°‘ä¸º 50 + 50 = 100æ¬¡</li><li>åŒç†ï¼Œè‹¥æ–‡ä»¶å…±æœ‰ 10<sup>6</sup>ä¸ªè®°å½•ï¼Œåˆ™å¯åˆ†ä¸º 1000ä¸ªåˆ†ç»„ï¼Œæ¯ä¸ªåˆ†ç»„ 1000 ä¸ªè®°å½•ã€‚æ ¹æ®å…³é”®å­—æ£€ç´¢ä¸€ä¸ªè®°å½•</li><li>å¹³å‡éœ€è¦æŸ¥æ‰¾ 500 + 500 = 1000æ¬¡ã€‚è¿™ä¸ªæŸ¥æ‰¾æ¬¡æ•°ä¾ç„¶å¾ˆå¤šï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</li></ul></li></ul></li><li><p><strong>å¤šçº§ç´¢å¼•é¡ºåºæ–‡ä»¶</strong></p><ul><li>ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ£€ç´¢æ•ˆç‡ï¼Œå¯ä»¥ä¸ºé¡ºåºæ–‡ä»¶å»ºç«‹<strong>å¤šçº§ç´¢å¼•è¡¨</strong>ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªå«10<sup>6</sup>ä¸ªè®°å½•çš„æ–‡ä»¶ï¼Œå¯å…ˆä¸ºè¯¥æ–‡ä»¶å»ºç«‹ä¸€å¼ ä½çº§ç´¢å¼•è¡¨ï¼Œæ¯ 100ä¸ªè®°å½•ä¸ºä¸€ç»„ï¼Œæ•…ä½çº§ç´¢å¼•è¡¨ä¸­å…±æœ‰10000ä¸ªè¡¨é¡¹ï¼ˆå³10000ä¸ªå®šé•¿è®°å½•ï¼‰ï¼Œå†æŠŠè¿™ 10000ä¸ªå®šé•¿è®°å½•åˆ†ç»„ï¼Œæ¯ç»„100ä¸ªï¼Œä¸ºå…¶å»ºç«‹é¡¶çº§ç´¢å¼•è¡¨ï¼Œæ•…é¡¶çº§ç´¢å¼•è¡¨ä¸­å…±æœ‰ 100ä¸ªè¡¨é¡¹</li></ul></li></ul><h2 id="æ–‡ä»¶ç›®å½•"><strong>3. æ–‡ä»¶ç›®å½•</strong></h2><ul><li><p>æ‰€è°“<strong>æ–‡ä»¶ç›®å½•</strong>å°±æ˜¯æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„ Windowsæ“ä½œç³»ç»Ÿçš„â€œæ–‡ä»¶å¤¹â€</p></li><li><p>é‡‡ç”¨æ–‡ä»¶ç›®å½•ç»“æ„å¯ä»¥ä½¿æ–‡ä»¶ä¹‹é—´çš„ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæŸ¥æ‰¾</p></li><li><p>ç¼–ç¨‹æ—¶ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ–‡ä»¶è·¯å¾„æ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å¦‚:</span><br>FILE *fp;<br>fp = fopen(â€œF:\data\myfile.datâ€); <span class="hljs-comment">// ç”¨æˆ·å¯ä»¥è½»æ¾å®ç°â€œæŒ‰åå­˜å–â€</span><br></code></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ç›®å½•çš„å®ç°">3.1 <strong>æ–‡ä»¶ç›®å½•çš„å®ç°</strong></h3><ul><li><p>å½“æˆ‘ä»¬åŒå‡»â€œç…§ç‰‡â€åï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨è¿™ä¸ª<strong>ç›®å½•è¡¨</strong>ä¸­æ‰¾åˆ°å…³é”®å­—â€œç…§ç‰‡â€å¯¹åº”çš„<strong>ç›®å½•é¡¹</strong>ï¼ˆä¹Ÿå°±æ˜¯<strong>è®°å½•</strong>ï¼‰ï¼Œç„¶åä»å¤–å­˜ä¸­å°†â€œç…§ç‰‡â€ç›®å½•çš„ä¿¡æ¯è¯»å…¥å†…å­˜ï¼Œäºæ˜¯ï¼Œâ€œç…§ç‰‡â€ç›®å½•ä¸­çš„å†…å®¹å°±å¯ä»¥æ˜¾ç¤ºå‡ºæ¥äº†</p></li><li><p>ç›®å½•æ–‡ä»¶ä¸­ä¸€æ¡ä¸€æ¡çš„<strong>è®°å½•</strong>å°±æ˜¯ä¸€ä¸ª"<strong>æ–‡ä»¶æ§åˆ¶å—ï¼ˆFCBï¼‰</strong>"</p><ul><li>FCBå®ç°äº†æ–‡ä»¶åå’Œæ–‡ä»¶ä¹‹é—´çš„æ˜ å°„ï¼Œä½¿ç”¨æˆ·ï¼ˆç”¨æˆ·ç¨‹åºï¼‰å¯ä»¥å®ç°â€œæŒ‰åå­˜å–â€</li><li><strong>FCBçš„æœ‰åºé›†åˆç§°ä¸ºâ€œæ–‡ä»¶ç›®å½•â€</strong>ï¼Œ<strong>ä¸€ä¸ªFCBå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•é¡¹</strong></li><li>FCBä¸­åŒ…å«äº†æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ˆæ–‡ä»¶åã€ç‰©ç†åœ°å€ã€é€»è¾‘ç»“æ„ã€ç‰©ç†ç»“æ„ç­‰ï¼‰ï¼Œå­˜å–æ§åˆ¶ä¿¡æ¯ï¼ˆæ˜¯å¦å¯è¯»/å¯å†™ã€ç¦æ­¢è®¿é—®çš„ç”¨æˆ·åå•ç­‰ï¼‰ï¼Œä½¿ç”¨ä¿¡æ¯ï¼ˆå¦‚æ–‡ä»¶çš„å»ºç«‹æ—¶é—´ã€ä¿®æ”¹æ—¶é—´ç­‰ï¼‰ã€‚æœ€é‡è¦ï¼Œæœ€åŸºæœ¬çš„è¿˜æ˜¯<strong>æ–‡ä»¶å</strong>ã€<strong>æ–‡ä»¶å­˜æ”¾çš„ç‰©ç†åœ°å€</strong></li></ul></li><li><p><strong>éœ€è¦å¯¹ç›®å½•è¿›è¡Œå“ªäº›æ“ä½œï¼Ÿ</strong></p><ul><li>æœç´¢ï¼šå½“ç”¨æˆ·è¦ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿè¦æ ¹æ®æ–‡ä»¶åæœç´¢ç›®å½•ï¼Œæ‰¾åˆ°è¯¥æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹</li><li>åˆ›å»ºæ–‡ä»¶ï¼šåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œéœ€è¦åœ¨å…¶æ‰€å±çš„ç›®å½•ä¸­å¢åŠ ä¸€ä¸ªç›®å½•é¡¹</li><li>åˆ é™¤æ–‡ä»¶ï¼šå½“åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œéœ€è¦åœ¨ç›®å½•ä¸­åˆ é™¤ç›¸åº”çš„ç›®å½•é¡¹</li><li>æ˜¾ç¤ºç›®å½•ï¼šç”¨æˆ·å¯ä»¥è¯·æ±‚æ˜¾ç¤ºç›®å½•çš„å†…å®¹ï¼Œå¦‚æ˜¾ç¤ºè¯¥ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶åŠç›¸åº”å±æ€§</li><li>ä¿®æ”¹ç›®å½•ï¼šæŸäº›æ–‡ä»¶å±æ€§ä¿å­˜åœ¨ç›®å½•ä¸­ï¼Œå› æ­¤è¿™äº›å±æ€§å˜åŒ–æ—¶éœ€è¦ä¿®æ”¹ç›¸åº”çš„ç›®å½•é¡¹ï¼ˆå¦‚ï¼šæ–‡ä»¶é‡å‘½åï¼‰</li></ul></li></ul><h3 id="ç›®å½•ç»“æ„">3.2 <strong>ç›®å½•ç»“æ„</strong></h3><ul><li><strong>å•çº§ç›®å½•ç»“æ„</strong><ul><li>æ—©æœŸæ“ä½œç³»ç»Ÿå¹¶ä¸æ”¯æŒå¤šçº§ç›®å½•ï¼Œ<strong>æ•´ä¸ªç³»ç»Ÿä¸­åªå»ºç«‹ä¸€å¼ ç›®å½•è¡¨ï¼Œæ¯ä¸ªæ–‡ä»¶å ä¸€ä¸ªç›®å½•é¡¹</strong></li><li>å•çº§ç›®å½•å®ç°äº†â€œæŒ‰åå­˜å–â€ï¼Œä½†æ˜¯<strong>ä¸å…è®¸æ–‡ä»¶é‡å</strong></li><li>åœ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œéœ€è¦å…ˆæ£€æŸ¥ç›®å½•è¡¨ä¸­æœ‰æ²¡æœ‰é‡åæ–‡ä»¶ï¼Œç¡®å®šä¸é‡ååæ‰èƒ½å…è®¸å»ºç«‹æ–‡ä»¶ï¼Œå¹¶å°†æ–°æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹æ’å…¥ç›®å½•è¡¨ä¸­</li><li>æ˜¾ç„¶ï¼Œå•çº§ç›®å½•ç»“æ„ä¸é€‚ç”¨äºå¤šç”¨æˆ·æ“ä½œç³»ç»Ÿ</li></ul></li><li><strong>ä¸¤çº§ç›®å½•ç»“æ„</strong><ul><li>æ—©æœŸçš„å¤šç”¨æˆ·æ“ä½œç³»ç»Ÿï¼Œé‡‡ç”¨<strong>ä¸¤çº§ç›®å½•ç»“æ„</strong></li><li>åˆ†ä¸º<strong>ä¸»æ–‡ä»¶ç›®å½•ï¼ˆMFDï¼ŒMaster FileDirectoryï¼‰</strong>å’Œ<strong>ç”¨æˆ·æ–‡ä»¶ç›®å½•ï¼ˆUFDï¼ŒUser FlieDirectoryï¼‰</strong></li></ul></li><li><strong>å¤šçº§ç›®å½•ç»“æ„ï¼ˆæ ‘å½¢ç›®å½•ç»“æ„ï¼‰</strong><ul><li>ç”¨æˆ·ï¼ˆæˆ–ç”¨æˆ·è¿›ç¨‹ï¼‰è¦è®¿é—®æŸä¸ªæ–‡ä»¶æ—¶è¦ç”¨æ–‡ä»¶è·¯å¾„åæ ‡è¯†æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„åæ˜¯ä¸ªå­—ç¬¦ä¸²</li><li>å„çº§ç›®å½•ä¹‹é—´ç”¨â€œ/â€éš”å¼€ã€‚<strong>ä»æ ¹ç›®å½•å‡ºå‘çš„è·¯å¾„</strong>ç§°ä¸º<strong>ç»å¯¹è·¯å¾„</strong><ul><li>ä¾‹å¦‚ï¼šè‡ªæ‹.jpg çš„ç»å¯¹è·¯å¾„æ˜¯ â€œ/ç…§ç‰‡/2015-08/è‡ªæ‹.jpgâ€</li><li>ç³»ç»Ÿæ ¹æ®ç»å¯¹è·¯å¾„ä¸€å±‚ä¸€å±‚åœ°æ‰¾åˆ°ä¸‹ä¸€çº§ç›®å½•<ul><li>åˆšå¼€å§‹<strong>ä»å¤–å­˜è¯»å…¥æ ¹ç›®å½•çš„ç›®å½•è¡¨</strong></li><li>æ‰¾åˆ°â€œç…§ç‰‡â€ç›®å½•çš„å­˜æ”¾ä½ç½®åï¼Œä»å¤–å­˜è¯»å…¥å¯¹åº”çš„ç›®å½•è¡¨</li><li>å†æ‰¾åˆ°â€œ2015-08â€ç›®å½•çš„å­˜æ”¾ä½ç½®ï¼Œå†ä»å¤–å­˜è¯»å…¥å¯¹åº”ç›®å½•è¡¨</li><li>æœ€åæ‰æ‰¾åˆ°æ–‡ä»¶â€œè‡ªæ‹.jpgâ€çš„å­˜æ”¾ä½ç½®</li><li>æ•´ä¸ªè¿‡ç¨‹éœ€è¦3æ¬¡è¯»ç£ç›˜I/Oæ“ä½œ</li></ul></li></ul></li><li>å¾ˆå¤šæ—¶å€™ï¼Œç”¨æˆ·ä¼šè¿ç»­è®¿é—®åŒä¸€ç›®å½•å†…çš„å¤šä¸ªæ–‡ä»¶ï¼ˆæ¯”å¦‚ï¼šæ¥è¿æŸ¥çœ‹â€œ2015-08â€ç›®å½•å†…çš„å¤šä¸ªç…§ç‰‡æ–‡ä»¶ï¼‰</li><li>æ˜¾ç„¶ï¼Œæ¯æ¬¡éƒ½ä»æ ¹ç›®å½•å¼€å§‹æŸ¥æ‰¾ï¼Œæ˜¯å¾ˆä½æ•ˆçš„ï¼Œå› æ­¤å¯ä»¥è®¾ç½®ä¸€ä¸ªâ€œ<strong>å½“å‰ç›®å½•</strong>â€<ul><li>ä¾‹å¦‚ï¼šæ­¤æ—¶å·²ç»æ‰“å¼€äº†â€œç…§ç‰‡â€çš„ç›®å½•æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™å¼ ç›®å½•è¡¨å·²è°ƒå…¥å†…å­˜ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºâ€œå½“å‰ç›®å½•â€ï¼Œå½“ç”¨æˆ·æƒ³è¦è®¿é—®æŸä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»å½“å‰ç›®å½•å‡ºå‘çš„â€œ<strong>ç›¸å¯¹è·¯å¾„</strong>â€</li><li>åœ¨ Linux ä¸­ï¼Œâ€œ.â€è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œå› æ­¤å¦‚æœâ€œç…§ç‰‡â€æ˜¯å½“å‰ç›®å½•ï¼Œåˆ™â€è‡ªæ‹.jpgâ€çš„ç›¸å¯¹è·¯å¾„ä¸ºï¼š<ul><li>â€œ./2015-08/è‡ªæ‹.jpgâ€<ul><li>ä»å½“å‰è·¯å¾„å‡ºå‘ï¼Œåªéœ€è¦æŸ¥è¯¢å†…å­˜ä¸­çš„â€œç…§ç‰‡â€ç›®å½•è¡¨ï¼Œå³å¯çŸ¥é“â€2015-08â€ç›®å½•è¡¨çš„å­˜æ”¾ä½ç½®</li><li>ä»å¤–å­˜è°ƒå…¥è¯¥ç›®å½•ï¼Œå³å¯çŸ¥é“â€œè‡ªæ‹.jpgâ€å­˜æ”¾çš„ä½ç½®äº†</li></ul></li><li>å¯è§ï¼Œå¼•å…¥â€œ<strong>å½“å‰ç›®å½•</strong>â€å’Œâ€œ<strong>ç›¸å¯¹è·¯å¾„</strong>â€åï¼Œç£ç›˜I/Oçš„æ¬¡æ•°å‡å°‘äº†ã€‚è¿™å°±æå‡äº†è®¿é—®æ–‡ä»¶çš„æ•ˆç‡</li></ul></li></ul></li><li><strong>æ ‘å½¢ç›®å½•ç»“æ„</strong>å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ–‡ä»¶è¿›è¡Œåˆ†ç±»ï¼Œå±‚æ¬¡ç»“æ„æ¸…æ™°ï¼Œä¹Ÿèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°è¿›è¡Œæ–‡ä»¶çš„ç®¡ç†å’Œä¿æŠ¤</li><li>ä½†æ˜¯ï¼Œæ ‘å½¢ç»“æ„ä¸ä¾¿äºå®ç°æ–‡ä»¶çš„å…±äº«ï¼Œä¸ºæ­¤ï¼Œæå‡ºäº†â€œ<strong>æ— ç¯å›¾ç›®å½•ç»“æ„</strong>â€</li></ul></li><li><strong>æ— ç¯å›¾ç›®å½•ç»“æ„</strong><ul><li><strong>å¯ä»¥ç”¨ä¸åŒçš„æ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶</strong>ï¼Œç”šè‡³å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªç›®å½•ï¼ˆå…±äº«åŒä¸€ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼‰</li><li>éœ€è¦ä¸º<strong>æ¯ä¸ªå…±äº«ç»“ç‚¹è®¾ç½®ä¸€ä¸ªå…±äº«è®¡æ•°å™¨</strong>ï¼Œç”¨äºè®°å½•æ­¤æ—¶æœ‰å¤šå°‘ä¸ªåœ°æ–¹åœ¨å…±äº«è¯¥ç»“ç‚¹<ul><li><strong>ç´¢å¼•ç»“ç‚¹</strong>ä¸­è®¾ç½®ä¸€ä¸ªé“¾æ¥è®¡æ•°å˜é‡countï¼Œç”¨äºè¡¨ç¤ºé“¾æ¥åˆ°æœ¬ç´¢å¼•ç»“ç‚¹ä¸Šçš„ç”¨æˆ·<strong>ç›®å½•é¡¹</strong>æ•°</li></ul></li><li>ç”¨æˆ·æå‡ºåˆ é™¤ç»“ç‚¹çš„è¯·æ±‚æ—¶ï¼Œåªæ˜¯åˆ é™¤è¯¥ç”¨æˆ·çš„FCBã€å¹¶ä½¿å…±äº«è®¡æ•°å™¨å‡1ï¼Œå¹¶ä¸ä¼šç›´æ¥åˆ é™¤å…±äº«ç»“ç‚¹ã€‚åªæœ‰å…±äº«è®¡æ•°å™¨å‡ä¸º0æ—¶ï¼Œæ‰åˆ é™¤ç»“ç‚¹</li><li>æ³¨æ„ï¼šå…±äº«æ–‡ä»¶ä¸åŒäºå¤åˆ¶æ–‡ä»¶ã€‚åœ¨å…±äº«æ–‡ä»¶ä¸­ï¼Œç”±äºå„ç”¨æˆ·æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå› æ­¤åªè¦å…¶ä¸­ä¸€ä¸ªç”¨æˆ·ä¿®æ”¹äº†æ–‡ä»¶æ•°æ®ï¼Œé‚£ä¹ˆæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥çœ‹åˆ°æ–‡ä»¶æ•°æ®çš„å˜åŒ–</li></ul></li></ul><h3 id="ç´¢å¼•ç»“ç‚¹fcbçš„æ”¹è¿›">3.3<strong>ç´¢å¼•ç»“ç‚¹ï¼ˆFCBçš„æ”¹è¿›ï¼‰</strong></h3><ul><li><p><strong>æ€è€ƒæœ‰ä½•å¥½å¤„ï¼Ÿ</strong></p><ul><li>å‡è®¾ä¸€ä¸ªFCBæ˜¯64Bï¼Œç£ç›˜å—çš„å¤§å°ä¸º1KBï¼Œåˆ™æ¯ä¸ªç›˜å—ä¸­åªèƒ½å­˜æ”¾16ä¸ªFCBã€‚è‹¥ä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¸­å…±æœ‰640ä¸ªç›®å½•é¡¹ï¼Œåˆ™å…±éœ€è¦å ç”¨640 / 16 = 40 ä¸ªç›˜å—ã€‚å› æ­¤æŒ‰ç…§æŸæ–‡ä»¶åæ£€ç´¢è¯¥ç›®å½•ï¼Œå¹³å‡éœ€è¦æŸ¥è¯¢320ä¸ªç›®å½•é¡¹ï¼Œå¹³å‡éœ€è¦å¯åŠ¨ç£ç›˜20æ¬¡ï¼ˆæ¯æ¬¡ç£ç›˜I/Oè¯»å…¥ä¸€å—ï¼‰</li><li>è‹¥ä½¿ç”¨<strong>ç´¢å¼•ç»“ç‚¹æœºåˆ¶</strong>ï¼Œæ–‡ä»¶åå 14Bï¼Œç´¢å¼•ç»“ç‚¹æŒ‡é’ˆç«™2Bï¼Œåˆ™æ¯ä¸ªç›˜å—å¯å­˜æ”¾64ä¸ªç›®å½•é¡¹ï¼Œé‚£ä¹ˆæŒ‰æ–‡ä»¶åæ£€ç´¢ç›®å½•å¹³å‡åªéœ€è¦</li><li>è¯»å…¥ 320 / 64 = 5ä¸ªç£ç›˜å—ã€‚æ˜¾ç„¶ï¼Œ<strong>è¿™å°†å¤§å¤§æå‡æ–‡ä»¶æ£€ç´¢é€Ÿåº¦</strong></li></ul></li><li><p>å½“æ‰¾åˆ°æ–‡ä»¶åå¯¹åº”çš„ç›®å½•é¡¹æ—¶ï¼Œæ‰éœ€è¦å°†ç´¢å¼•ç»“ç‚¹è°ƒå…¥å†…å­˜ï¼Œç´¢å¼•ç»“ç‚¹ä¸­è®°å½•äº†æ–‡ä»¶çš„å„ç§ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶åœ¨å¤–å­˜ä¸­çš„å­˜æ”¾ä½ç½®ï¼Œæ ¹æ®â€œå­˜æ”¾ä½ç½®â€å³å¯æ‰¾åˆ°æ–‡ä»¶</p></li><li><p>å­˜æ”¾<strong>åœ¨å¤–å­˜ä¸­çš„ç´¢å¼•ç»“ç‚¹</strong>ç§°ä¸ºâ€œ<strong>ç£ç›˜ç´¢å¼•ç»“ç‚¹</strong>â€ï¼Œå½“<strong>ç´¢å¼•ç»“ç‚¹æ”¾å…¥å†…å­˜</strong>åç§°ä¸ºâ€œ<strong>å†…å­˜ç´¢å¼•ç»“ç‚¹</strong>â€</p></li><li><p>ç›¸æ¯”ä¹‹ä¸‹<strong>å†…å­˜ç´¢å¼•ç»“ç‚¹ä¸­éœ€è¦å¢åŠ ä¸€äº›ä¿¡æ¯</strong>ï¼Œæ¯”å¦‚ï¼šæ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹ã€æ­¤æ—¶æœ‰å‡ ä¸ªè¿›ç¨‹æ­£åœ¨è®¿é—®è¯¥æ–‡ä»¶ç­‰</p></li></ul><h2 id="æ–‡ä»¶çš„ç‰©ç†ç»“æ„"><strong>4. æ–‡ä»¶çš„ç‰©ç†ç»“æ„</strong></h2><ul><li><strong>æ“ä½œç³»ç»Ÿéœ€è¦å¯¹ç£ç›˜å—è¿›è¡Œå“ªäº›ç®¡ç†ï¼Ÿ</strong><ul><li><strong>å¯¹éç©ºé—²ç£ç›˜å—çš„ç®¡ç†</strong>ï¼ˆå­˜æ”¾äº†æ–‡ä»¶æ•°æ®çš„ç£ç›˜å—ï¼‰<ul><li>â€œ<strong>æ–‡ä»¶çš„ç‰©ç†ç»“æ„</strong>/æ–‡ä»¶åˆ†é…æ–¹å¼â€è¦è®¨è®ºçš„é—®é¢˜</li></ul></li><li><strong>å¯¹ç©ºé—²ç£ç›˜å—çš„ç®¡ç†</strong><ul><li>"<strong>æ–‡ä»¶å­˜å‚¨ç©ºé—´ç®¡ç†</strong>"è¦è®¨è®ºçš„é—®é¢˜</li></ul></li></ul></li></ul><h3 id="æ–‡ä»¶çš„ç‰©ç†ç»“æ„æ–‡ä»¶åˆ†é…æ–¹å¼">4.1<strong>æ–‡ä»¶çš„ç‰©ç†ç»“æ„</strong>ï¼ˆæ–‡ä»¶åˆ†é…æ–¹å¼ï¼‰</h3><ul><li><p>å³ï¼šæ–‡ä»¶æ•°æ®åº”è¯¥æ€æ ·å­˜æ”¾åœ¨å¤–å­˜ä¸­ï¼Ÿ</p></li><li><p><strong>è¿ç»­åˆ†é…</strong></p></li><li><p><strong>é“¾æ¥åˆ†é…</strong></p><ul><li><strong>éšå¼é“¾æ¥</strong>ã€<strong>æ˜¾ç¤ºé“¾æ¥</strong></li></ul></li><li><p><strong>ç´¢å¼•åˆ†é…</strong></p></li></ul><h3 id="æ–‡ä»¶å—ç£ç›˜å—">4.2 <strong>æ–‡ä»¶å—ã€ç£ç›˜å—</strong></h3><ul><li><p>ç±»ä¼¼äº<strong>å†…å­˜åˆ†é¡µ</strong>ï¼Œ<strong>ç£ç›˜ä¸­çš„å­˜å‚¨å•å…ƒ</strong>ä¹Ÿä¼šè¢«åˆ†ä¸ºä¸€ä¸ªä¸ªâ€œ<strong>å—/ç£ç›˜å—/ç‰©ç†å—</strong>â€ã€‚å¾ˆå¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œ<strong>ç£ç›˜å—çš„å¤§å°ä¸å†…å­˜å—ã€é¡µé¢çš„å¤§å°ç›¸åŒ</strong></p></li><li><p><strong>å†…å­˜ä¸ç£ç›˜ä¹‹é—´çš„æ•°æ®äº¤æ¢</strong>ï¼ˆå³è¯»/å†™æ“ä½œã€ç£ç›˜I/Oï¼‰éƒ½æ˜¯<strong>ä»¥â€œå—â€ä¸ºå•ä½</strong>è¿›è¡Œçš„ã€‚å³æ¯æ¬¡è¯»å…¥ä¸€å—ï¼Œæˆ–æ¯æ¬¡å†™å‡ºä¸€å—</p></li><li><p>åœ¨å†…å­˜ç®¡ç†ä¸­ï¼Œè¿›ç¨‹çš„é€»è¾‘åœ°å€ç©ºé—´è¢«åˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªé¡µé¢</p></li><li><p>åŒæ ·çš„ï¼Œåœ¨å¤–å­˜ç®¡ç†ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿å¯¹æ–‡ä»¶æ•°æ®çš„ç®¡ç†ï¼Œ<strong>æ–‡ä»¶çš„é€»è¾‘åœ°å€ç©ºé—´ä¹Ÿè¢«åˆ†ä¸ºäº†ä¸€ä¸ªä¸€ä¸ªçš„æ–‡ä»¶â€œå—â€</strong></p><ul><li>æ“ä½œç³»ç»Ÿä¸ºæ–‡ä»¶åˆ†é…å­˜å‚¨ç©ºé—´éƒ½æ˜¯ä»¥å—ä¸ºå•ä½çš„</li><li>è‹¥å—çš„å¤§å°æ˜¯1KBï¼Œåˆ™1MBå¤§å°çš„æ–‡ä»¶å¯ä»¥è¢«åˆ†ä¸º1Kä¸ªå—</li></ul></li><li><p>äºæ˜¯æ–‡ä»¶çš„é€»è¾‘åœ°å€ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸º<strong>ï¼ˆé€»è¾‘å—å·ï¼Œå—å†…åœ°å€ï¼‰</strong>çš„å½¢å¼</p><ul><li>ç”¨æˆ·é€šè¿‡é€»è¾‘åœ°å€æ¥æ“ä½œè‡ªå·±çš„æ–‡ä»¶ï¼Œ<strong>æ“ä½œç³»ç»Ÿè¦è´Ÿè´£å®ç°ä»é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„</strong></li></ul></li></ul><h3 id="è¿ç»­åˆ†é…">4.3 <strong>è¿ç»­åˆ†é…</strong></h3><ul><li><strong>è¿ç»­åˆ†é…</strong>æ–¹å¼è¦æ±‚<strong>æ¯ä¸ªæ–‡ä»¶åœ¨ç£ç›˜ä¸Šå æœ‰ä¸€ç»„è¿ç»­çš„å—</strong></li><li>ç”¨æˆ·é€šè¿‡é€»è¾‘åœ°å€æ¥æ“ä½œè‡ªå·±çš„æ–‡ä»¶ï¼Œ<strong>æ“ä½œç³»ç»Ÿå¦‚ä½•å®ç°ä»é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„ï¼Ÿ</strong><ul><li>ï¼ˆé€»è¾‘å—å·ï¼Œå—å†…åœ°å€ï¼‰â†’ï¼ˆç‰©ç†å—å·ï¼Œå—å†…åœ°å€ï¼‰ï¼Œåªéœ€è½¬æ¢å—å·å°±è¡Œï¼Œå—å†…åœ°å€ä¿æŒä¸å˜</li><li><strong>ç”¨æˆ·</strong>ç»™å‡ºè¦è®¿é—®çš„<strong>é€»è¾‘å—å·</strong>ï¼Œæ“ä½œç³»ç»Ÿæ‰¾åˆ°è¯¥<strong>æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹ï¼ˆFCBï¼‰</strong><ul><li><strong>ç‰©ç†å—å· = èµ·å§‹å—å· + é€»è¾‘å—å·</strong></li><li>å¯ä»¥ç›´æ¥ç®—å‡ºé€»è¾‘å—å·å¯¹åº”çš„ç‰©ç†å—å·ï¼Œå› æ­¤<strong>è¿ç»­åˆ†é…æ”¯æŒé¡ºåºè®¿é—®å’Œç›´æ¥è®¿é—®ï¼ˆå³éšæœºè®¿é—®ï¼‰</strong></li></ul></li><li>å½“ç„¶ï¼Œè¿˜éœ€è¦æ£€æŸ¥ç”¨æˆ·æä¾›çš„é€»è¾‘å—å·æ˜¯å¦åˆæ³•ï¼ˆ é€»è¾‘å—å· â‰¥ é•¿åº¦å°±ä¸åˆæ³•ï¼‰</li></ul></li><li>è¯»å–æŸä¸ªç£ç›˜å—æ—¶ï¼Œéœ€è¦ç§»åŠ¨ç£å¤´ã€‚è®¿é—®çš„ä¸¤ä¸ªç£ç›˜å—ç›¸éš”è¶Šè¿œï¼Œç§»åŠ¨ç£å¤´æ‰€éœ€æ—¶é—´å°±è¶Šé•¿ã€‚<ul><li>ç»“è®ºï¼š<strong>è¿ç»­åˆ†é…çš„æ–‡ä»¶åœ¨é¡ºåºè¯»/å†™æ—¶é€Ÿåº¦æœ€å¿«</strong></li></ul></li><li>è‹¥æ­¤æ—¶æ–‡ä»¶Aè¦æ‹“å±•ï¼Œéœ€è¦å†å¢åŠ ä¸€ä¸ªç£ç›˜å—ï¼ˆæ€»å…±éœ€è¦è¿ç»­çš„4ä¸ªç£ç›˜å—ï¼‰ã€‚ç”±äºé‡‡ç”¨è¿ç»­ç»“æ„ï¼Œå› æ­¤æ–‡ä»¶Aå ç”¨çš„ç£ç›˜å—å¿…é¡»æ˜¯è¿ç»­çš„ã€‚å› æ­¤åªèƒ½å°†æ–‡ä»¶Aå…¨éƒ¨â€œè¿ç§»â€åˆ°ç»¿è‰²åŒºåŸŸ<ul><li>ç»“è®ºï¼š<strong>ç‰©ç†ä¸Šé‡‡ç”¨è¿ç»­åˆ†é…çš„æ–‡ä»¶ä¸æ–¹ä¾¿æ‹“å±•</strong></li><li>ç»“è®ºï¼š<strong>ç‰©ç†ä¸Šé‡‡ç”¨è¿ç»­åˆ†é…ï¼Œå­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ä½ï¼Œä¼šäº§ç”Ÿéš¾ä»¥åˆ©ç”¨çš„ç£ç›˜ç¢ç‰‡ï¼Œå¯ä»¥ç”¨ç´§å‡‘æ¥å¤„ç†ç¢ç‰‡ï¼Œä½†æ˜¯éœ€è¦è€—è´¹å¾ˆå¤§çš„æ—¶é—´ä»£ä»·</strong></li></ul></li><li><strong>æ€»ç»“</strong>:<ul><li>ä¼˜ç‚¹ï¼šæ”¯æŒé¡ºåºè®¿é—®å’Œç›´æ¥è®¿é—®ï¼ˆå³éšæœºè®¿é—®ï¼‰ï¼Œè¿ç»­åˆ†é…çš„æ–‡ä»¶åœ¨é¡ºåºè®¿é—®æ—¶é€Ÿåº¦æœ€å¿«</li><li>ç¼ºç‚¹ï¼šä¸æ–¹ä¾¿æ–‡ä»¶æ‹“å±•ï¼›å­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ä½ï¼Œä¼šäº§ç”Ÿç£ç›˜ç¢ç‰‡</li></ul></li></ul><h3 id="é“¾æ¥åˆ†é…">4.4 <strong>é“¾æ¥åˆ†é…</strong></h3><ul><li><strong>é“¾æ¥åˆ†é…é‡‡å–ç¦»æ•£åˆ†é…çš„æ–¹å¼ï¼Œå¯ä»¥ä¸ºæ–‡ä»¶åˆ†é…ç¦»æ•£çš„ç£ç›˜å—</strong>ï¼Œåˆ†ä¸º<strong>éšå¼é“¾æ¥</strong>å’Œ<strong>æ˜¾å¼é“¾æ¥</strong>ä¸¤ç§<ul><li>è€ƒè¯•é¢˜ç›®ä¸­é‡åˆ°æœªæŒ‡æ˜éšå¼/æ˜¾å¼çš„â€œé“¾æ¥åˆ†é…â€ï¼Œ<strong>é»˜è®¤æŒ‡çš„æ˜¯éšå¼é“¾æ¥çš„é“¾æ¥åˆ†é…</strong></li></ul></li><li><strong>éšå¼é“¾æ¥</strong><ul><li><strong>å¦‚ä½•å®ç°æ–‡ä»¶çš„é€»è¾‘å—å·åˆ°ç‰©ç†å—å·çš„è½¬å˜ï¼Ÿ</strong><ul><li><strong>ç”¨æˆ·</strong>ç»™å‡ºè¦è®¿é—®çš„<strong>é€»è¾‘å—å·</strong>iï¼Œæ“ä½œç³»ç»Ÿæ‰¾åˆ°è¯¥<strong>æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹ï¼ˆFCBï¼‰</strong></li><li>ä»ç›®å½•é¡¹ä¸­æ‰¾åˆ°èµ·å§‹å—å·ï¼ˆå³0å·å—ï¼‰ï¼Œå°†0å·é€»è¾‘å—è¯»å…¥å†…å­˜ï¼Œç”±æ­¤çŸ¥é“1å·é€»è¾‘å—å­˜æ”¾çš„ç‰©ç†å—å·ï¼Œäºæ˜¯è¯»å…¥1å·é€»è¾‘å—ï¼Œå†æ‰¾åˆ°2å·é€»è¾‘å—çš„å­˜æ”¾ä½ç½®â€¦â€¦ä»¥æ­¤ç±»æ¨</li><li>å› æ­¤ï¼Œ<strong>è¯»å…¥iå·é€»è¾‘å—ï¼Œæ€»å…±éœ€è¦ i+1 æ¬¡ç£ç›˜I/O</strong><ul><li>ç»“è®ºï¼š<strong>é‡‡ç”¨é“¾å¼åˆ†é…ï¼ˆéšå¼é“¾æ¥ï¼‰æ–¹å¼çš„æ–‡ä»¶ï¼Œåªæ”¯æŒé¡ºåºè®¿é—®ï¼Œä¸æ”¯æŒéšæœºè®¿é—®ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½ã€‚å¦å¤–ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç›˜å—çš„æŒ‡é’ˆä¹Ÿéœ€è¦è€—è´¹å°‘é‡çš„å­˜å‚¨ç©ºé—´</strong></li></ul></li></ul></li><li><strong>æ˜¯å¦æ–¹ä¾¿æ‹“å±•æ–‡ä»¶ï¼Ÿ</strong><ul><li>è‹¥æ­¤æ—¶è¦æ‹“å±•æ–‡ä»¶ï¼Œåˆ™å¯ä»¥éšä¾¿æ‰¾ä¸€ä¸ªç©ºé—²ç£ç›˜å—ï¼ŒæŒ‚åˆ°æ–‡ä»¶çš„ç£ç›˜å—é“¾å°¾ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶çš„FCB</li><li>ç»“è®ºï¼š<strong>é‡‡ç”¨éšå¼é“¾æ¥çš„é“¾æ¥åˆ†é…æ–¹å¼ï¼Œå¾ˆæ–¹ä¾¿æ–‡ä»¶æ‹“å±•ã€‚å¦å¤–ï¼Œæ‰€æœ‰çš„ç©ºé—²ç£ç›˜å—éƒ½å¯ä»¥è¢«åˆ©ç”¨ï¼Œä¸ä¼šæœ‰ç¢ç‰‡é—®é¢˜ï¼Œå¤–å­˜åˆ©ç”¨ç‡é«˜</strong></li></ul></li><li><strong>æ€»ç»“</strong>:<ul><li>ä¼˜ç‚¹ï¼šå¾ˆæ–¹ä¾¿æ–‡ä»¶æ‹“å±•ï¼Œä¸ä¼šæœ‰ç¢ç‰‡é—®é¢˜ï¼Œå¤–å­˜åˆ©ç”¨ç‡é«˜</li><li>ç¼ºç‚¹ï¼šåªæ”¯æŒé¡ºåºè®¿é—®ï¼Œä¸æ”¯æŒéšæœºè®¿é—®ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç›˜å—çš„æŒ‡é’ˆä¹Ÿéœ€è¦è€—è´¹å°‘é‡çš„å­˜å‚¨ç©ºé—´</li></ul></li></ul></li><li><strong>æ˜¾å¼é“¾æ¥</strong><ul><li><strong>æŠŠç”¨äºé“¾æ¥æ–‡ä»¶å„ç‰©ç†å—çš„æŒ‡é’ˆæ˜¾å¼åœ°å­˜æ”¾åœ¨ä¸€å¼ è¡¨ä¸­</strong>ï¼Œå³<strong>æ–‡ä»¶åˆ†é…è¡¨ï¼ˆFATï¼ŒFile Allocation Tableï¼‰</strong><ul><li>å‡è®¾æŸä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶â€œaaaâ€ä¾æ¬¡å­˜æ”¾åœ¨ç£ç›˜å— 2 â†’ 5 â†’ 0 â†’ 1</li><li>å‡è®¾æŸä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶â€œbbbâ€ä¾æ¬¡å­˜æ”¾åœ¨ç£ç›˜å— 4 â†’ 23 â†’ 3</li><li>æ³¨æ„ï¼š<strong>ä¸€ä¸ªç£ç›˜ä»…è®¾ç½®ä¸€å¼ FAT</strong>ã€‚å¼€æœºæ—¶ï¼Œå°†FATè¯»å…¥å†…å­˜ï¼Œå¹¶<strong>å¸¸é©»å†…å­˜</strong>ã€‚<strong>FATçš„å„ä¸ªè¡¨é¡¹åœ¨ç‰©ç†ä¸Šè¿ç»­å­˜å‚¨ï¼Œä¸”æ¯ä¸€ä¸ªè¡¨é¡¹é•¿åº¦ç›¸åŒï¼Œå› æ­¤â€œç‰©ç†å—å·â€å­—æ®µå¯ä»¥æ˜¯éšå«çš„</strong></li></ul></li><li><strong>å¦‚ä½•å®ç°æ–‡ä»¶çš„é€»è¾‘å—å·åˆ°ç‰©ç†å—å·çš„è½¬å˜ï¼Ÿ</strong><ul><li><strong>ç”¨æˆ·</strong>ç»™å‡ºè¦è®¿é—®çš„<strong>é€»è¾‘å—å·</strong>iï¼Œæ“ä½œç³»ç»Ÿæ‰¾åˆ°è¯¥<strong>æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹ï¼ˆFCBï¼‰</strong></li><li>ä»ç›®å½•é¡¹ä¸­æ‰¾åˆ°èµ·å§‹å—å·ï¼Œè‹¥i&gt;0ï¼Œåˆ™æŸ¥è¯¢å†…å­˜ä¸­çš„<strong>æ–‡ä»¶åˆ†é…è¡¨FAT</strong>ï¼Œå¾€åæ‰¾åˆ°iå·é€»è¾‘å—å¯¹åº”çš„ç‰©ç†å—å·ã€‚<strong>é€»è¾‘å—å·è½¬æ¢æˆç‰©ç†å—å·çš„è¿‡ç¨‹ä¸éœ€è¦è¯»ç£ç›˜æ“ä½œ</strong><ul><li>ç»“è®ºï¼š<strong>é‡‡ç”¨é“¾å¼åˆ†é…ï¼ˆæ˜¾å¼é“¾æ¥ï¼‰æ–¹å¼çš„æ–‡ä»¶ï¼Œæ”¯æŒé¡ºåºè®¿é—®ï¼Œä¹Ÿæ”¯æŒéšæœºè®¿é—®ï¼ˆæƒ³è®¿é—®i å·é€»è¾‘å—æ—¶ï¼Œå¹¶ä¸éœ€è¦ä¾æ¬¡è®¿é—®ä¹‹å‰çš„ 0 ~ i -1å·é€»è¾‘å—ï¼‰ï¼Œç”±äºå—å·è½¬æ¢çš„è¿‡ç¨‹ä¸éœ€è¦è®¿é—®ç£ç›˜ï¼Œå› æ­¤ç›¸æ¯”äºéšå¼é“¾æ¥æ¥è¯´ï¼Œè®¿é—®é€Ÿåº¦å¿«å¾ˆå¤š</strong></li></ul></li><li>æ˜¾ç„¶ï¼Œ<strong>æ˜¾å¼é“¾æ¥ä¹Ÿä¸ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ï¼Œä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æ–‡ä»¶è¿›è¡Œæ‹“å±•</strong></li></ul></li><li><strong>æ€»ç»“</strong>:<ul><li>ä¼˜ç‚¹ï¼šå¾ˆæ–¹ä¾¿æ–‡ä»¶æ‹“å±•ï¼Œä¸ä¼šæœ‰ç¢ç‰‡é—®é¢˜ï¼Œå¤–å­˜åˆ©ç”¨ç‡é«˜ï¼Œå¹¶ä¸”æ”¯æŒéšæœºè®¿é—®ã€‚ç›¸æ¯”äºéšå¼é“¾æ¥æ¥è¯´ï¼Œåœ°å€è½¬æ¢æ—¶ä¸éœ€è¦è®¿é—®ç£ç›˜ï¼Œå› æ­¤æ–‡ä»¶çš„è®¿é—®æ•ˆç‡æ›´é«˜</li><li>ç¼ºç‚¹ï¼šæ–‡ä»¶åˆ†é…è¡¨çš„éœ€è¦å ç”¨ä¸€å®šçš„å­˜å‚¨ç©ºé—´</li></ul></li></ul></li></ul><h3 id="ç´¢å¼•åˆ†é…">4.4 <strong>ç´¢å¼•åˆ†é…</strong></h3><ul><li><strong>ç´¢å¼•åˆ†é…å…è®¸æ–‡ä»¶ç¦»æ•£åœ°åˆ†é…åœ¨å„ä¸ªç£ç›˜å—ä¸­ï¼Œç³»ç»Ÿä¼šä¸ºæ¯ä¸ªæ–‡ä»¶å»ºç«‹ä¸€å¼ ç´¢å¼•è¡¨ï¼Œç´¢å¼•è¡¨ä¸­è®°å½•äº†æ–‡ä»¶çš„å„ä¸ªé€»è¾‘å—å¯¹åº”çš„ç‰©ç†å—</strong><ul><li>ç´¢å¼•è¡¨çš„åŠŸèƒ½ç±»ä¼¼äºå†…å­˜ç®¡ç†ä¸­çš„é¡µè¡¨ --å»ºç«‹é€»è¾‘é¡µé¢åˆ°ç‰©ç†é¡µä¹‹é—´çš„æ˜ å°„å…³ç³»</li></ul></li><li>ç£ç›˜ä¸­å­˜æ”¾ç´¢å¼•è¡¨çš„ç£ç›˜å—ç§°ä¸º<strong>ç´¢å¼•å—</strong>ï¼Œç£ç›˜ä¸­å­˜æ”¾æ–‡ä»¶æ•°æ®çš„ç£ç›˜å—ç§°ä¸º<strong>æ•°æ®å—</strong><ul><li>å‡è®¾æŸä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶â€œaaaâ€çš„æ•°æ®ä¾æ¬¡å­˜æ”¾åœ¨ç£ç›˜å— 2 â†’ 5 â†’ 13 â†’ 9</li><li>7å·ç£ç›˜å—ä½œä¸ºâ€œaaaâ€çš„ç´¢å¼•å—ï¼Œç´¢å¼•å—ä¸­ä¿å­˜äº†ç´¢å¼•è¡¨çš„å†…å®¹</li><li>æ³¨ï¼šåœ¨æ˜¾å¼é“¾æ¥çš„é“¾å¼åˆ†é…æ–¹å¼ä¸­ï¼Œ<strong>æ–‡ä»¶åˆ†é…è¡¨FAT</strong>æ˜¯<strong>ä¸€ä¸ªç£ç›˜å¯¹åº”ä¸€å¼ </strong>ï¼Œè€Œç´¢å¼•åˆ†é…æ–¹å¼ä¸­ï¼Œ<strong>ç´¢å¼•è¡¨</strong>æ˜¯<strong>ä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€å¼ </strong></li><li><strong>å¯ä»¥ç”¨å›ºå®šçš„é•¿åº¦è¡¨ç¤ºç‰©ç†å—å·</strong>ï¼ˆå¦‚ï¼šå‡è®¾ç£ç›˜æ€»å®¹é‡ä¸º1TB = 2<sup>40</sup>Bï¼Œç£ç›˜å—å¤§å°ä¸º 1KBï¼Œåˆ™å…±æœ‰2<sup>30</sup>ä¸ªç£ç›˜å—ï¼Œåˆ™å¯ç”¨ 4Bè¡¨ç¤ºç£ç›˜å—å·ï¼‰ï¼Œå› æ­¤ï¼Œ<strong>ç´¢å¼•è¡¨ä¸­çš„â€œé€»è¾‘å—å·â€å¯ä»¥æ˜¯éšå«çš„</strong></li></ul></li><li><strong>å¦‚ä½•å®ç°æ–‡ä»¶çš„é€»è¾‘å—å·åˆ°ç‰©ç†å—å·çš„è½¬æ¢ï¼Ÿ</strong><ul><li><strong>ç”¨æˆ·</strong>ç»™å‡ºè¦è®¿é—®çš„<strong>é€»è¾‘å—å·</strong>iï¼Œæ“ä½œç³»ç»Ÿæ‰¾åˆ°è¯¥<strong>æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹ï¼ˆFCBï¼‰</strong></li><li>ä»ç›®å½•é¡¹ä¸­å¯çŸ¥<strong>ç´¢å¼•è¡¨</strong>å­˜æ”¾ä½ç½®ï¼Œå°†ç´¢å¼•è¡¨ä»å¤–å­˜è¯»å…¥å†…å­˜ï¼Œå¹¶æŸ¥æ‰¾ç´¢å¼•è¡¨å³å¯çŸ¥é“i å·é€»è¾‘å—åœ¨å¤–å­˜ä¸­çš„å­˜æ”¾ä½ç½®<ul><li>ç»“è®ºï¼š<strong>ç´¢å¼•åˆ†é…æ–¹å¼å¯ä»¥æ”¯æŒéšæœºè®¿é—®ã€‚æ–‡ä»¶æ‹“å±•ä¹Ÿå¾ˆå®¹æ˜“å®ç°ï¼ˆåªéœ€è¦ç»™æ–‡ä»¶åˆ†é…ä¸€ä¸ªç©ºé—²å—ï¼Œå¹¶å¢åŠ ä¸€ä¸ªç´¢å¼•è¡¨é¡¹å³å¯ï¼‰ä½†æ˜¯ç´¢å¼•è¡¨éœ€è¦å ç”¨ä¸€å®šçš„å­˜å‚¨ç©ºé—´</strong></li></ul></li></ul></li><li>è‹¥æ¯ä¸ªç£ç›˜å—1KBï¼Œä¸€ä¸ªç´¢å¼•è¡¨é¡¹4Bï¼Œåˆ™ä¸€ä¸ªç£ç›˜å—åªèƒ½å­˜æ”¾ 256ä¸ªç´¢å¼•é¡¹ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶çš„å¤§å°è¶…è¿‡äº†256å—ï¼Œé‚£ä¹ˆ<strong>ä¸€ä¸ªç£ç›˜å—</strong>æ˜¯<strong>è£…ä¸ä¸‹æ–‡ä»¶çš„æ•´å¼ ç´¢å¼•è¡¨</strong>çš„ï¼Œ<strong>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</strong><ul><li><strong>é“¾æ¥æ–¹æ¡ˆ</strong><ul><li>å¦‚æœç´¢å¼•è¡¨å¤ªå¤§ï¼Œä¸€ä¸ªç´¢å¼•å—è£…ä¸ä¸‹ï¼Œé‚£ä¹ˆå¯ä»¥<strong>å°†å¤šä¸ªç´¢å¼•å—é“¾æ¥èµ·æ¥å­˜æ”¾</strong></li><li>å‡è®¾ç£ç›˜å—å¤§å°ä¸º1KBï¼Œä¸€ä¸ªç´¢å¼•è¡¨é¡¹å 4Bï¼Œåˆ™ä¸€ä¸ªç£ç›˜å—åªèƒ½å­˜æ”¾256ä¸ªç´¢å¼•é¡¹</li><li>è‹¥ä¸€ä¸ªæ–‡ä»¶å¤§å°ä¸º 256 * 256KB = 65,536 KB = 64MBï¼Œè¯¥æ–‡ä»¶å…±æœ‰ 256 *256 ä¸ªå—ï¼Œä¹Ÿå°±å¯¹åº” 256 * 256 ä¸ªç´¢å¼•é¡¹ï¼Œä¹Ÿå°±éœ€è¦ 256ä¸ªç´¢å¼•å—æ¥å­˜å‚¨ï¼Œè¿™äº›ç´¢å¼•å—ç”¨é“¾æ¥æ–¹æ¡ˆè¿èµ·æ¥</li><li>è‹¥æƒ³è¦è®¿é—®æ–‡ä»¶çš„æœ€åä¸€ä¸ªé€»è¾‘å—ï¼Œå°±å¿…é¡»æ‰¾åˆ°æœ€åä¸€ä¸ªç´¢å¼•å—ï¼ˆç¬¬256ä¸ªç´¢å¼•å—ï¼‰ï¼Œè€Œå„ä¸ªç´¢å¼•å—ä¹‹é—´æ˜¯ç”¨æŒ‡é’ˆé“¾æ¥èµ·æ¥çš„ï¼Œå› æ­¤å¿…é¡»å…ˆé¡ºåºåœ°è¯»å…¥å‰255 ä¸ªç´¢å¼•å—<ul><li>ç¼ºç‚¹ï¼šè‹¥æ–‡ä»¶å¾ˆå¤§ï¼Œç´¢å¼•è¡¨å¾ˆé•¿ï¼Œå°±éœ€è¦å°†å¾ˆå¤šä¸ªç´¢å¼•å—é“¾æ¥èµ·æ¥ã€‚æƒ³è¦æ‰¾åˆ°i å·ç´¢å¼•å—ï¼Œå¿…é¡»å…ˆä¾æ¬¡è¯»å…¥ 0 ~i-1å·ç´¢å¼•å—ï¼Œè¿™å°±å¯¼è‡´ç£ç›˜I/Oæ¬¡æ•°è¿‡å¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½ä¸‹è¿™æ˜¾ç„¶æ˜¯å¾ˆä½æ•ˆçš„ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</li></ul></li></ul></li><li><strong>å¤šå±‚ç´¢å¼•</strong><ul><li><strong>å»ºç«‹å¤šå±‚ç´¢å¼•ï¼ˆåŸç†ç±»ä¼¼äºå¤šçº§é¡µè¡¨ï¼‰</strong>ã€‚ä½¿ç¬¬ä¸€å±‚ç´¢å¼•å—æŒ‡å‘ç¬¬äºŒå±‚çš„ç´¢å¼•å—ã€‚è¿˜å¯æ ¹æ®æ–‡ä»¶å¤§å°çš„è¦æ±‚å†å»ºç«‹ç¬¬ä¸‰å±‚ã€ç¬¬å››å±‚ç´¢å¼•å—...</li><li>å‡è®¾ç£ç›˜å—å¤§å°ä¸º1KBï¼Œä¸€ä¸ªç´¢å¼•è¡¨é¡¹å 4Bï¼Œåˆ™ä¸€ä¸ªç£ç›˜å—åªèƒ½å­˜æ”¾256ä¸ªç´¢å¼•é¡¹</li><li><strong>è‹¥æŸæ–‡ä»¶é‡‡ç”¨ä¸¤å±‚ç´¢å¼•</strong>ï¼Œåˆ™è¯¥æ–‡ä»¶çš„æœ€å¤§é•¿åº¦å¯ä»¥åˆ°256 *256 * 1KB = 65,536 KB = 64MB</li><li>å¯æ ¹æ®é€»è¾‘å—å·ç®—å‡ºåº”è¯¥æŸ¥æ‰¾ç´¢å¼•è¡¨ä¸­çš„å“ªä¸ªè¡¨é¡¹<ul><li>å¦‚ï¼šè¦è®¿é—® 1026 å·é€»è¾‘å—ï¼Œåˆ™1026 / 256 = 4ï¼Œ1026 % 256 = 2</li><li>å› æ­¤å¯ä»¥å…ˆå°†ä¸€çº§ç´¢å¼•è¡¨è°ƒå…¥å†…å­˜ï¼ŒæŸ¥è¯¢ 4å·è¡¨é¡¹ï¼Œå°†å…¶å¯¹åº”çš„äºŒçº§ç´¢å¼•è¡¨è°ƒå…¥å†…å­˜ï¼Œå†æŸ¥è¯¢äºŒçº§ç´¢å¼•è¡¨çš„2å·è¡¨é¡¹å³å¯çŸ¥é“1026 å·é€»è¾‘å—å­˜æ”¾çš„ç£ç›˜å—å·äº†ã€‚è®¿é—®ç›®æ ‡æ•°æ®å—ï¼Œéœ€è¦3æ¬¡ç£ç›˜I/O</li></ul></li><li><strong>è‹¥é‡‡ç”¨ä¸‰å±‚ç´¢å¼•</strong>ï¼Œåˆ™æ–‡ä»¶çš„æœ€å¤§é•¿åº¦ä¸º256 * 256 * 256 *1KB = 16GB<ul><li>ç±»ä¼¼çš„ï¼Œè®¿é—®ç›®æ ‡æ•°æ®å—ï¼Œéœ€è¦4æ¬¡ç£ç›˜I/O</li></ul></li><li><strong>é‡‡ç”¨ Kå±‚ç´¢å¼•ç»“æ„ï¼Œä¸”é¡¶çº§ç´¢å¼•è¡¨æœªè°ƒå…¥å†…å­˜ï¼Œåˆ™è®¿é—®ä¸€ä¸ªæ•°æ®å—åªéœ€è¦ K + 1æ¬¡è¯»ç£ç›˜æ“ä½œ</strong><ul><li>ç¼ºç‚¹ï¼šå³ä½¿æ˜¯å°æ–‡ä»¶ï¼Œè®¿é—®ä¸€ä¸ªæ•°æ®å—ä¾ç„¶éœ€è¦K + 1æ¬¡è¯»ç£ç›˜</li></ul></li></ul></li><li><strong>æ··åˆç´¢å¼•</strong><ul><li><strong>å¤šç§ç´¢å¼•åˆ†é…æ–¹å¼çš„ç»“åˆ</strong><ul><li>ä¾‹å¦‚ï¼Œä¸€ä¸ªæ–‡ä»¶çš„é¡¶çº§ç´¢å¼•è¡¨ä¸­ï¼Œæ—¢åŒ…å«ç›´æ¥åœ°å€ç´¢å¼•ï¼ˆç›´æ¥æŒ‡å‘æ•°æ®å—ï¼‰ï¼ŒåˆåŒ…å«ä¸€çº§é—´æ¥ç´¢å¼•ï¼ˆæŒ‡å‘å•å±‚ç´¢å¼•è¡¨ï¼‰ã€è¿˜åŒ…å«ä¸¤çº§é—´æ¥ç´¢å¼•ï¼ˆæŒ‡å‘ä¸¤å±‚ç´¢å¼•è¡¨ï¼‰</li><li>ä¼˜ç‚¹ï¼šå¯¹äºå°æ–‡ä»¶æ¥è¯´ï¼Œè®¿é—®ä¸€ä¸ªæ•°æ®å—æ‰€éœ€çš„è¯»ç£ç›˜æ¬¡æ•°æ›´å°‘</li></ul></li></ul></li></ul></li><li><strong>é‡è¦è€ƒç‚¹</strong>:<ul><li>è¦ä¼šæ ¹æ®å¤šå±‚ç´¢å¼•ã€æ··åˆç´¢å¼•çš„ç»“æ„è®¡ç®—å‡ºæ–‡ä»¶çš„æœ€å¤§é•¿åº¦<ul><li>Keyï¼šå„çº§ç´¢å¼•è¡¨æœ€å¤§ä¸èƒ½è¶…è¿‡ä¸€ä¸ªå—</li></ul></li><li>è¦èƒ½è‡ªå·±åˆ†æè®¿é—®æŸä¸ªæ•°æ®å—æ‰€éœ€è¦çš„è¯»ç£ç›˜æ¬¡æ•°<ul><li>Keyï¼šFCBä¸­ä¼šå­˜æœ‰æŒ‡å‘é¡¶çº§ç´¢å¼•å—çš„æŒ‡é’ˆï¼Œå› æ­¤å¯ä»¥æ ¹æ®FCBè¯»å…¥é¡¶çº§ç´¢å¼•å—ã€‚æ¯æ¬¡è¯»å…¥ä¸‹ä¸€çº§çš„ç´¢å¼•å—éƒ½éœ€è¦ä¸€æ¬¡è¯»ç£ç›˜æ“ä½œã€‚å¦å¤–ï¼Œè¦æ³¨æ„é¢˜ç›®æ¡ä»¶-- é¡¶çº§ç´¢å¼•å—æ˜¯å¦å·²è°ƒå…¥å†…å­˜</li></ul></li></ul></li></ul><h2 id="é€»è¾‘ç»“æ„vsç‰©ç†ç»“æ„"><strong>5. é€»è¾‘ç»“æ„VSç‰©ç†ç»“æ„</strong></h2><ul><li>é€»è¾‘ç»“æ„ä¸­çš„é“¾å¼å­˜å‚¨å’Œç‰©ç†ç»“æ„ä¸­çš„é“¾æ¥åˆ†é…<ul><li>æ–‡ä»¶å†…éƒ¨å„æ¡è®°å½•é“¾å¼å­˜å‚¨ï¼šç”±åˆ›å»ºæ–‡ä»¶çš„ç”¨æˆ·è‡ªå·±è®¾è®¡çš„</li><li>æ–‡ä»¶æ•´ä½“ç”¨é“¾æ¥åˆ†é…ï¼šç”±æ“ä½œç³»ç»Ÿå†³å®š</li></ul></li><li>é€»è¾‘ç»“æ„ä¸­çš„ç´¢å¼•æ–‡ä»¶å’Œç‰©ç†ç»“æ„ä¸­çš„ç´¢å¼•åˆ†é…<ul><li>ç´¢å¼•æ–‡ä»¶çš„ç´¢å¼•è¡¨ï¼š<ul><li>ç”¨æˆ·è‡ªå·±å»ºç«‹çš„ï¼Œæ˜ å°„ï¼šå…³é”®å­— â†’ è®°å½•å­˜æ”¾çš„é€»è¾‘åœ°å€</li></ul></li><li>ç´¢å¼•åˆ†é…çš„ç´¢å¼•è¡¨ï¼š<ul><li>æ“ä½œç³»ç»Ÿå»ºç«‹çš„ï¼Œæ˜ å°„ï¼šé€»è¾‘å—å· â†’ ç‰©ç†å—å·</li></ul></li></ul></li></ul><h2 id="æ–‡ä»¶å­˜å‚¨ç©ºé—´ç®¡ç†"><strong>6. æ–‡ä»¶å­˜å‚¨ç©ºé—´ç®¡ç†</strong></h2><ul><li>å­¦ä¹ æ—¶æ³¨æ„ä»ä¸‰ä¸ªæ–¹é¢è¿›è¡Œç†è§£:<ul><li>ç”¨ä»€ä¹ˆæ–¹å¼è®°å½•ã€ç»„ç»‡ç©ºé—²å—ï¼Ÿ</li><li>å¦‚ä½•åˆ†é…ç£ç›˜å—</li><li>å¦‚ä½•å›æ”¶ç£ç›˜å—</li></ul></li></ul><h3 id="å­˜å‚¨ç©ºé—´çš„åˆ’åˆ†ä¸åˆå§‹åŒ–">6.1<strong>å­˜å‚¨ç©ºé—´çš„åˆ’åˆ†ä¸åˆå§‹åŒ–</strong></h3><ul><li>å®‰è£…Windowsæ“ä½œç³»ç»Ÿçš„æ—¶å€™ï¼Œä¸€ä¸ªå¿…ç»æ­¥éª¤æ˜¯ä¸º<strong>ç£ç›˜åˆ†åŒº</strong>ï¼ˆC:ç›˜ã€D:ç›˜ã€E:ç›˜ï¼‰<ul><li>å­˜å‚¨ç©ºé—´çš„åˆ’åˆ†ï¼šå°†ç‰©ç†ç£ç›˜åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ª<strong>æ–‡ä»¶å·ï¼ˆé€»è¾‘å·ã€é€»è¾‘ç›˜ï¼‰</strong></li><li>å­˜å‚¨ç©ºé—´çš„åˆå§‹åŒ–ï¼šå°†å„ä¸ª<strong>æ–‡ä»¶å·</strong>åˆ’åˆ†ä¸º<strong>ç›®å½•åŒº</strong>ã€<strong>æ–‡ä»¶åŒº</strong><ul><li><strong>ç›®å½•åŒº</strong>ï¼šä¸»è¦å­˜æ”¾æ–‡ä»¶ç›®å½•ä¿¡æ¯ï¼ˆFCBï¼‰ã€ç”¨äºç£ç›˜å­˜å‚¨ç©ºé—´ç®¡ç†çš„ä¿¡æ¯</li><li><strong>æ–‡ä»¶åŒº</strong>ï¼šæ–‡ä»¶åŒºç”¨äºå­˜æ”¾æ–‡ä»¶æ•°æ®</li></ul></li></ul></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/image-20241121214207650.png"></p><h3 id="ç©ºé—²è¡¨æ³•">6.2 <strong>ç©ºé—²è¡¨æ³•</strong></h3><ul><li><p>é€‚ç”¨äº"<strong>è¿ç»­åˆ†é…æ–¹å¼</strong>"</p></li><li><p><strong>å¦‚ä½•åˆ†é…ç£ç›˜å—</strong>:</p><ul><li>ä¸å†…å­˜ç®¡ç†ä¸­çš„åŠ¨æ€åˆ†åŒºåˆ†é…å¾ˆç±»ä¼¼ï¼Œä¸ºä¸€ä¸ªæ–‡ä»¶<strong>åˆ†é…è¿ç»­çš„å­˜å‚¨ç©ºé—´</strong>ã€‚åŒæ ·<strong>å¯é‡‡ç”¨é¦–æ¬¡é€‚åº”ã€æœ€ä½³é€‚åº”ã€æœ€åé€‚åº”ç­‰ç®—æ³•æ¥å†³å®šè¦ä¸ºæ–‡ä»¶åˆ†é…å“ªä¸ªåŒºé—´</strong></li></ul></li><li><p><strong>å¦‚ä½•å›æ”¶ç£ç›˜å—</strong>:</p><ul><li>ä¸å†…å­˜ç®¡ç†ä¸­çš„åŠ¨æ€åˆ†åŒºåˆ†é…å¾ˆç±»ä¼¼ï¼Œå½“å›æ”¶æŸä¸ªå­˜å‚¨åŒºæ—¶éœ€è¦æœ‰å››ç§æƒ…å†µ:</li><li>å›æ”¶åŒºçš„å‰åéƒ½æ²¡æœ‰ç›¸é‚»ç©ºé—²åŒº</li><li>å›æ”¶åŒºçš„å‰åéƒ½æ˜¯ç©ºé—²åŒº</li><li>å›æ”¶åŒºå‰é¢æ˜¯ç©ºé—²åŒº</li><li>å›æ”¶åŒºåé¢æ˜¯ç©ºé—²åŒº</li><li>æ€»ä¹‹ï¼Œ<strong>å›æ”¶æ—¶éœ€è¦æ³¨æ„è¡¨é¡¹çš„åˆå¹¶é—®é¢˜</strong></li></ul></li></ul><h3 id="ç©ºé—²é“¾è¡¨æ³•">6.3 <strong>ç©ºé—²é“¾è¡¨æ³•</strong></h3><ul><li><strong>ç©ºé—²ç›˜å—é“¾</strong>: ä»¥ç›˜å—ä¸ºå•ä½ç»„æˆä¸€æ¡ç©ºé—²é“¾<ul><li>æ“ä½œç³»ç»Ÿä¿å­˜ç€<strong>é“¾å¤´ã€é“¾å°¾æŒ‡é’ˆ</strong></li><li><strong>å¦‚ä½•åˆ†é…ç£ç›˜å—</strong>:<ul><li>è‹¥æŸæ–‡ä»¶ç”³è¯· k ä¸ªç›˜å—ï¼Œåˆ™ä»é“¾å¤´å¼€å§‹ä¾æ¬¡æ‘˜ä¸‹ kä¸ªç›˜å—åˆ†é…ï¼Œå¹¶ä¿®æ”¹ç©ºé—²é“¾çš„é“¾å¤´æŒ‡é’ˆ</li></ul></li><li><strong>å¦‚ä½•å›æ”¶ç£ç›˜å—</strong>:<ul><li>å›æ”¶çš„ç›˜å—ä¾æ¬¡æŒ‚åˆ°é“¾å°¾ï¼Œå¹¶ä¿®æ”¹ç©ºé—²é“¾çš„é“¾å°¾æŒ‡é’ˆ</li></ul></li><li>é€‚ç”¨äº<strong>ç¦»æ•£åˆ†é…</strong>çš„ç‰©ç†ç»“æ„ã€‚ä¸ºæ–‡ä»¶åˆ†é…å¤šä¸ªç›˜å—æ—¶å¯èƒ½è¦é‡å¤å¤šæ¬¡æ“ä½œ</li></ul></li><li><strong>ç©ºé—²ç›˜åŒºé“¾</strong>: ä»¥ç›˜åŒºä¸ºå•ä½ç»„æˆä¸€æ¡ç©ºé—²é“¾<ul><li>æ“ä½œç³»ç»Ÿä¿å­˜ç€<strong>é“¾å¤´ã€é“¾å°¾æŒ‡é’ˆ</strong></li><li><strong>å¦‚ä½•åˆ†é…ç£ç›˜å—</strong>:<ul><li>è‹¥æŸæ–‡ä»¶ç”³è¯· kä¸ªç›˜å—ï¼Œåˆ™å¯ä»¥é‡‡ç”¨é¦–æ¬¡é€‚åº”ã€æœ€ä½³é€‚åº”ç­‰ç®—æ³•ï¼Œä»é“¾å¤´å¼€å§‹æ£€ç´¢ï¼ŒæŒ‰ç…§ç®—æ³•è§„åˆ™æ‰¾åˆ°ä¸€ä¸ªå¤§å°ç¬¦åˆè¦æ±‚çš„ç©ºé—²ç›˜åŒºï¼Œåˆ†é…ç»™æ–‡ä»¶ã€‚è‹¥æ²¡æœ‰åˆé€‚çš„è¿ç»­ç©ºé—²å—ï¼Œä¹Ÿå¯ä»¥å°†ä¸åŒç›˜åŒºçš„ç›˜å—åŒæ—¶åˆ†é…ç»™ä¸€ä¸ªæ–‡ä»¶ï¼Œæ³¨æ„åˆ†é…åå¯èƒ½è¦ä¿®æ”¹ç›¸åº”çš„é“¾æŒ‡é’ˆã€ç›˜åŒºå¤§å°ç­‰æ•°æ®</li></ul></li><li><strong>å¦‚ä½•å›æ”¶ç£ç›˜å—</strong>:<ul><li>è‹¥å›æ”¶åŒºå’ŒæŸä¸ªç©ºé—²ç›˜åŒºç›¸é‚»ï¼Œåˆ™éœ€è¦å°†å›æ”¶åŒºåˆå¹¶åˆ°ç©ºé—²ç›˜åŒºä¸­ã€‚è‹¥å›æ”¶åŒºæ²¡æœ‰å’Œä»»ä½•ç©ºé—²åŒºç›¸é‚»ï¼Œå°†å›æ”¶åŒºä½œä¸ºå•ç‹¬çš„ä¸€ä¸ªç©ºé—²ç›˜åŒºæŒ‚åˆ°é“¾å°¾</li></ul></li><li><strong>è¿ç»­åˆ†é…</strong>ã€<strong>ç¦»æ•£åˆ†é…</strong>éƒ½é€‚ç”¨ï¼Œä¸ºä¸€ä¸ªæ–‡ä»¶åˆ†é…å¤šä¸ªç›˜å—æ—¶æ•ˆç‡æ›´é«˜</li></ul></li></ul><h3 id="ä½ç¤ºå›¾æ³•">6.4 <strong>ä½ç¤ºå›¾æ³•</strong></h3><ul><li><strong>æ¯ä¸ªäºŒè¿›åˆ¶ä½å¯¹åº”ä¸€ä¸ªç›˜å—</strong><ul><li>åœ¨æœ¬ä¾‹ä¸­ï¼Œâ€œ0â€ ä»£è¡¨ç›˜å—ç©ºé—²ï¼Œâ€œ1â€ä»£è¡¨ç›˜å—å·²åˆ†é…</li></ul></li><li><strong>ä½ç¤ºå›¾ä¸€èˆ¬ç”¨è¿ç»­çš„â€œå­—â€æ¥è¡¨ç¤º</strong><ul><li>å¦‚æœ¬ä¾‹ä¸­ä¸€ä¸ªå­—çš„å­—é•¿æ˜¯16ä½</li></ul></li><li><strong>å­—ä¸­çš„æ¯ä¸€ä½å¯¹åº”ä¸€ä¸ªç›˜å—</strong>ï¼Œå› æ­¤å¯ä»¥ç”¨<strong>ï¼ˆå­—å·ï¼Œä½å·ï¼‰</strong>å¯¹åº”ä¸€ä¸ª<strong>ç›˜å—å·</strong>ï¼Œå½“ç„¶æœ‰çš„é¢˜ç›®ä¸­ä¹Ÿæè¿°ä¸º<strong>ï¼ˆè¡Œå·ï¼Œåˆ—å·ï¼‰</strong></li><li><strong>é‡è¦</strong>ï¼šè¦èƒ½è‡ªå·²æ¨å‡º<strong>ç›˜å—å·</strong>ä¸<strong>ï¼ˆå­—å·ï¼Œä½å·ï¼‰</strong>ç›¸äº’è½¬æ¢çš„å…¬å¼<ul><li>æ³¨æ„é¢˜ç›®æ¡ä»¶ï¼š<strong>ç›˜å—å·</strong>ã€<strong>å­—å·</strong>ã€<strong>ä½å·</strong>åˆ°åº•æ˜¯ä»0å¼€å§‹è¿˜æ˜¯ä»1å¼€å§‹<ul><li>å¦‚æœ¬ä¾‹ä¸­ç›˜å—å·ã€å­—å·ã€ä½å·ä»0å¼€å§‹ï¼Œè‹¥nè¡¨ç¤ºå­—é•¿ï¼Œåˆ™ï¼ˆå­—å·ï¼Œä½å·ï¼‰=ï¼ˆiï¼Œjï¼‰çš„äºŒè¿›åˆ¶ä½å¯¹åº”çš„ç›˜å—å·b = n * i + j</li><li>bå·ç›˜å—å¯¹åº”çš„å­—å· i = b / nï¼Œä½å· j = b % n</li></ul></li></ul></li><li><strong>å¦‚ä½•åˆ†é…ç£ç›˜å—</strong>:<ul><li>è‹¥æ–‡ä»¶éœ€è¦ k ä¸ªå—<ul><li>é¡ºåºæ‰«æä½ç¤ºå›¾ï¼Œæ‰¾åˆ°Kä¸ªç›¸é‚»æˆ–ä¸ç›¸é‚»çš„â€œ0â€</li><li>æ ¹æ®å­—å·ã€ä½å·ç®—å‡ºå¯¹åº”çš„ç›˜å—å·ï¼Œå°†ç›¸åº”ç›˜å—åˆ†é…ç»™æ–‡ä»¶</li><li>å°†ç›¸åº”ä½è®¾ç½®ä¸ºâ€œ1â€</li></ul></li></ul></li><li><strong>å¦‚ä½•å›æ”¶ç£ç›˜å—</strong>:<ul><li>æ ¹æ®å›æ”¶çš„ç›˜å—å·è®¡ç®—å‡ºå¯¹åº”çš„å­—å·ã€ä½å·</li><li>å°†ç›¸åº”äºŒè¿›åˆ¶ä½è®¾ä¸ºâ€œ0</li></ul></li><li><strong>è¿ç»­åˆ†é…</strong>ã€<strong>ç¦»æ•£åˆ†é…</strong>éƒ½é€‚ç”¨</li></ul><h3 id="æˆç»„é“¾æ¥æ³•">6.5 <strong>æˆç»„é“¾æ¥æ³•</strong></h3><ul><li><p><strong>ç©ºé—²è¡¨æ³•ã€ç©ºé—²é“¾è¡¨æ³•ä¸é€‚ç”¨äºå¤§å‹æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼Œå› ä¸ºç©ºé—²è¡¨æˆ–ç©ºé—²é“¾è¡¨å¯èƒ½è¿‡å¤§</p></li><li><p>UNIXç³»ç»Ÿä¸­é‡‡ç”¨äº†<strong>æˆç»„é“¾æ¥æ³•</strong>å¯¹ç£ç›˜ç©ºé—²å—è¿›è¡Œç®¡ç†</p></li><li><p><strong>æ–‡ä»¶å·çš„ç›®å½•åŒº</strong>ä¸­ä¸“é—¨ç”¨ä¸€ä¸ªç£ç›˜å—ä½œä¸ºâ€œ<strong>è¶…çº§å—</strong>â€ï¼Œå½“ç³»ç»Ÿå¯åŠ¨æ—¶éœ€è¦<strong>å°†è¶…çº§å—è¯»å…¥å†…å­˜</strong>ï¼Œå¹¶ä¸”è¦ä¿è¯å†…å­˜ä¸å¤–å­˜ä¸­çš„â€œè¶…çº§å—â€æ•°æ®ä¸€è‡´</p><ul><li>æ³¨3: <strong>æ¯ä¸ªåˆ†ç»„çš„ç›˜å—æ•°é‡æ˜¯å­˜åœ¨ä¸Šé™çš„</strong></li><li>æ³¨4:<strong>æœ€åä¸€ä¸ªåˆ†ç»„çš„ç›˜å—æ•°æ˜¯æ¯”å…¶ä»–åˆ†ç»„çš„ç›˜å—æ•°å°‘çš„</strong></li></ul></li><li><p><strong>å¦‚ä½•åˆ†é…ç£ç›˜å—</strong>:</p><ul><li><p>è‹¥æ–‡ä»¶éœ€è¦ 1 ä¸ªç©ºé—²å—</p><ul><li>æ£€æŸ¥ç¬¬ä¸€ä¸ªåˆ†ç»„çš„å—æ•°æ˜¯å¦è¶³å¤Ÿï¼Œ1 &lt; 100ï¼Œæ˜¯è¶³å¤Ÿçš„</li><li>åˆ†é…ç¬¬ä¸€ä¸ªåˆ†ç»„ä¸­çš„ 1 ä¸ªç©ºé—²å—ï¼Œå¹¶ä¿®æ”¹ç©ºé—²ç›˜å—æ•°</li></ul></li><li><p>è‹¥æ–‡ä»¶éœ€è¦ 100 ä¸ªç©ºé—²å—</p><ul><li>æ£€æŸ¥ç¬¬ä¸€ä¸ªåˆ†ç»„çš„å—æ•°æ˜¯å¦è¶³å¤Ÿï¼Œ100 = 100ï¼Œæ˜¯è¶³å¤Ÿçš„</li><li>åˆ†é…ç¬¬ä¸€ä¸ªåˆ†ç»„ä¸­çš„100ä¸ªç©ºé—²å—ã€‚ä½†æ˜¯ç”±äº300å·å—å†…å­˜æ”¾äº†å†ä¸‹ä¸€ç»„çš„ä¿¡æ¯ï¼Œå› æ­¤300å·å—çš„æ•°æ®éœ€è¦å¤åˆ¶åˆ°è¶…çº§å—ä¸­</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4-1-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/image-20241121215625563.png"></p></li></ul></li><li><p><strong>å¦‚ä½•å›æ”¶ç£ç›˜å—</strong>:</p><ul><li>å‡è®¾æ¯ä¸ªåˆ†ç»„æœ€å¤šä¸º100ä¸ªç©ºé—²å—ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªåˆ†ç»„å·²æœ‰99ä¸ªå—ï¼Œè¿˜è¦å†å›æ”¶ä¸€å—<ul><li>å¯ä»¥å°†ç©ºé—²å—çš„ä¿¡æ¯æ”¾åˆ°ç¬¬ä¸€ä¸ªåˆ†ç»„å½“ä¸­ï¼Œå¹¶ä¿®æ”¹ç©ºé—²ç›˜å—æ•°</li></ul></li><li>å‡è®¾æ¯ä¸ªåˆ†ç»„æœ€å¤šä¸º100ä¸ªç©ºé—²å—ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªåˆ†ç»„å·²æœ‰100ä¸ªå—ï¼Œè¿˜è¦å†å›æ”¶ä¸€å—<ul><li>éœ€è¦å°†è¶…çº§å—ä¸­çš„æ•°æ®å¤åˆ¶åˆ°æ–°å›æ”¶çš„å—ä¸­ï¼Œå¹¶ä¿®æ”¹è¶…çº§å—çš„å†…å®¹ï¼Œè®©æ–°å›æ”¶çš„å—æˆä¸ºç¬¬ä¸€ä¸ªåˆ†ç»„</li></ul></li></ul></li></ul><h2 id="æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ"><strong>7. æ–‡ä»¶çš„åŸºæœ¬æ“ä½œ</strong></h2><h3 id="åˆ›å»ºæ–‡ä»¶">7.1 <strong>åˆ›å»ºæ–‡ä»¶</strong></h3><ul><li><p>å¯ä»¥â€œ<strong>åˆ›å»ºæ–‡ä»¶</strong>â€ï¼ˆç‚¹å‡»æ–°å»ºåï¼Œå›¾å½¢åŒ–äº¤äº’è¿›ç¨‹åœ¨èƒŒåè°ƒç”¨äº†â€œ<strong>createç³»ç»Ÿè°ƒç”¨</strong>â€ï¼‰</p></li><li><p>è¿›è¡Œ create ç³»ç»Ÿè°ƒç”¨ æ—¶ï¼Œéœ€è¦æä¾›çš„å‡ ä¸ªä¸»è¦å‚æ•°:</p><ul><li>æ‰€éœ€çš„å¤–å­˜ç©ºé—´å¤§å°ï¼ˆå¦‚ï¼šä¸€ä¸ªç›˜å—ï¼Œå³1KBï¼‰</li><li>æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼ˆâ€œD:/Demoâ€ï¼‰</li><li>æ–‡ä»¶åï¼ˆè¿™ä¸ªåœ°æ–¹é»˜è®¤ä¸ºâ€œæ–°å»ºæ–‡æœ¬æ–‡æ¡£.txtâ€ï¼‰</li></ul></li><li><p>æ“ä½œç³»ç»Ÿåœ¨å¤„ç† create ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¸»è¦åšäº†ä¸¤ä»¶äº‹:</p><ul><li><strong>åœ¨å¤–å­˜ä¸­æ‰¾åˆ°æ–‡ä»¶æ‰€éœ€çš„ç©ºé—´</strong>ï¼ˆç»“åˆä¸Šå°èŠ‚å­¦ä¹ çš„ç©ºé—²é“¾è¡¨æ³•ã€ä½ç¤ºå›¾ã€æˆç»„é“¾æ¥æ³•ç­‰ç®¡ç†ç­–ç•¥ï¼Œæ‰¾åˆ°ç©ºé—²ç©ºé—´ï¼‰</li><li>æ ¹æ®æ–‡ä»¶å­˜æ”¾è·¯å¾„çš„ä¿¡æ¯æ‰¾åˆ°è¯¥ç›®å½•å¯¹åº”çš„ç›®å½•æ–‡ä»¶ï¼ˆæ­¤å¤„å°±æ˜¯D:/Demoç›®å½•ï¼‰ï¼Œ<strong>åœ¨ç›®å½•ä¸­åˆ›å»ºè¯¥æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹</strong>ã€‚ç›®å½•é¡¹ä¸­åŒ…å«äº†æ–‡ä»¶åã€æ–‡ä»¶åœ¨å¤–å­˜ä¸­çš„å­˜æ”¾ä½ç½®ç­‰ä¿¡æ¯</li></ul></li></ul><h3 id="åˆ é™¤æ–‡ä»¶">7.2 <strong>åˆ é™¤æ–‡ä»¶</strong></h3><ul><li><p>å¯ä»¥<strong>â€œåˆ é™¤æ–‡ä»¶</strong>â€ï¼ˆç‚¹å‡»åˆ é™¤åï¼Œå›¾å½¢åŒ–äº¤äº’è¿›ç¨‹åœ¨èƒŒåè°ƒç”¨äº†"<strong>deleteç³»ç»Ÿè°ƒç”¨</strong>"ï¼Œå°†æ–‡ä»¶æ•°æ®ä»å¤–å­˜ä¸­åˆ é™¤ï¼‰</p></li><li><p>è¿›è¡Œ delete ç³»ç»Ÿè°ƒç”¨ æ—¶ï¼Œéœ€è¦æä¾›çš„å‡ ä¸ªä¸»è¦å‚æ•°:</p><ul><li>æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼ˆâ€œD:/Demoâ€ï¼‰</li><li>æ–‡ä»¶åï¼ˆâ€œtest.txt" ï¼‰</li></ul></li><li><p>æ“ä½œç³»ç»Ÿåœ¨å¤„ç† delete ç³»ç»Ÿè°ƒç”¨ æ—¶ï¼Œä¸»è¦åšäº†å‡ ä»¶äº‹:</p><ul><li>æ ¹æ®æ–‡ä»¶å­˜æ”¾è·¯å¾„æ‰¾åˆ°ç›¸åº”çš„ç›®å½•æ–‡ä»¶ï¼Œ<strong>ä»ç›®å½•ä¸­æ‰¾åˆ°æ–‡ä»¶åå¯¹åº”çš„ç›®å½•é¡¹</strong></li><li>æ ¹æ®è¯¥ç›®å½•é¡¹è®°å½•çš„æ–‡ä»¶åœ¨å¤–å­˜çš„å­˜æ”¾ä½ç½®ã€æ–‡ä»¶å¤§å°ç­‰ä¿¡æ¯ï¼Œ<strong>å›æ”¶æ–‡ä»¶å ç”¨çš„ç£ç›˜å—</strong>ï¼ˆå›æ”¶ç£ç›˜å—æ—¶ï¼Œæ ¹æ®ç©ºé—²è¡¨æ³•ã€ç©ºé—²é“¾è¡¨æ³•ã€ä½å›¾æ³•ç­‰ç®¡ç†ç­–ç•¥çš„ä¸åŒï¼Œéœ€è¦åšä¸åŒçš„å¤„ç†ï¼‰</li><li><strong>ä»ç›®å½•è¡¨ä¸­åˆ é™¤æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹</strong></li></ul></li></ul><h3 id="æ‰“å¼€æ–‡ä»¶">7.3 <strong>æ‰“å¼€æ–‡ä»¶</strong></h3><ul><li><p>è¯»/å†™æ–‡ä»¶ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„"<strong>openç³»ç»Ÿè°ƒç”¨</strong>"æ¥â€œ<strong>æ‰“å¼€æ–‡ä»¶</strong>â€</p></li><li><p>åœ¨å¾ˆå¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œåœ¨å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œä¹‹å‰ï¼Œè¦æ±‚ç”¨æˆ·å…ˆä½¿ç”¨ openç³»ç»Ÿè°ƒç”¨ â€œæ‰“å¼€æ–‡ä»¶â€ï¼Œéœ€è¦æä¾›çš„å‡ ä¸ªä¸»è¦å‚æ•°:</p><ul><li>æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼ˆâ€œD:/Demoâ€ï¼‰</li><li>æ–‡ä»¶åï¼ˆâ€œtest.txtâ€ï¼‰</li><li>è¦å¯¹æ–‡ä»¶çš„æ“ä½œç±»å‹ï¼ˆå¦‚ï¼šråªè¯»ï¼›rwè¯»å†™ç­‰ï¼‰</li></ul></li><li><p>æ“ä½œç³»ç»Ÿåœ¨å¤„ç† open ç³»ç»Ÿè°ƒç”¨ æ—¶ï¼Œä¸»è¦åšäº†å‡ ä»¶äº‹:</p><ul><li>1.æ ¹æ®æ–‡ä»¶å­˜æ”¾è·¯å¾„æ‰¾åˆ°ç›¸åº”çš„ç›®å½•æ–‡ä»¶ï¼Œä»ç›®å½•ä¸­<strong>æ‰¾åˆ°æ–‡ä»¶åå¯¹åº”çš„çš„ç›®å½•é¡¹</strong>ï¼Œå¹¶æ£€æŸ¥è¯¥ç”¨æˆ·æ˜¯å¦æœ‰æŒ‡å®šçš„æ“ä½œæƒé™</li><li>2.<strong>å°†ç›®å½•é¡¹å¤åˆ¶åˆ°å†…å­˜ä¸­çš„â€œæ‰“å¼€æ–‡ä»¶è¡¨â€ä¸­</strong>ã€‚å¹¶å°†å¯¹åº”è¡¨ç›®çš„ç¼–å·è¿”å›ç»™ç”¨æˆ·ã€‚ä¹‹å<strong>ç”¨æˆ·ä½¿ç”¨æ‰“å¼€æ–‡ä»¶è¡¨çš„ç¼–å·(å³</strong>æ–‡ä»¶æè¿°ç¬¦ <strong>)æ¥æŒ‡æ˜è¦æ“ä½œçš„æ–‡ä»¶</strong></li></ul></li></ul><h3 id="å…³é—­æ–‡ä»¶">7.4 <strong>å…³é—­æ–‡ä»¶</strong></h3><ul><li><p>è¯»/å†™æ–‡ä»¶ç»“æŸä¹‹åï¼Œéœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„"<strong>closeç³»ç»Ÿè°ƒç”¨</strong>"æ¥â€œ<strong>å…³é—­æ–‡ä»¶</strong>â€</p></li><li><p>è¿›ç¨‹ä½¿ç”¨å®Œæ–‡ä»¶åï¼Œè¦â€œå…³é—­æ–‡ä»¶â€</p></li><li><p>æ“ä½œç³»ç»Ÿåœ¨å¤„ç† close ç³»ç»Ÿè°ƒç”¨ æ—¶ï¼Œä¸»è¦åšäº†å‡ ä»¶äº‹:</p><ul><li>å°†è¿›ç¨‹çš„æ‰“å¼€æ–‡ä»¶è¡¨ç›¸åº”è¡¨é¡¹åˆ é™¤</li><li>å›æ”¶åˆ†é…ç»™è¯¥æ–‡ä»¶çš„å†…å­˜ç©ºé—´ç­‰èµ„æº</li><li>ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨çš„æ‰“å¼€è®¡æ•°å™¨countå‡1ï¼Œè‹¥count = 0ï¼Œåˆ™åˆ é™¤å¯¹åº”è¡¨é¡¹</li></ul></li></ul><h3 id="è¯»æ–‡ä»¶">7.5 <strong>è¯»æ–‡ä»¶</strong></h3><ul><li><p>å¯ä»¥â€œ<strong>è¯»æ–‡ä»¶</strong>â€ï¼Œå°†æ–‡ä»¶æ•°æ®è¯»å…¥å†…å­˜ï¼Œæ‰èƒ½è®©CPUå¤„ç†ï¼ˆåŒå‡»åï¼Œâ€œè®°äº‹æœ¬â€åº”ç”¨ç¨‹åºé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„â€œ<strong>readç³»ç»Ÿè°ƒç”¨</strong>â€ï¼Œå°†æ–‡ä»¶æ•°æ®ä»å¤–å­˜è¯»å…¥å†…å­˜ï¼Œå¹¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼‰</p></li><li><p>è¿›ç¨‹ä½¿ç”¨ read ç³»ç»Ÿè°ƒç”¨ å®Œæˆå†™æ“ä½œ:</p><ul><li>éœ€è¦æŒ‡æ˜æ˜¯å“ªä¸ªæ–‡ä»¶ï¼ˆåœ¨æ”¯æŒâ€œæ‰“å¼€æ–‡ä»¶â€æ“ä½œçš„ç³»ç»Ÿä¸­ï¼Œ<strong>åªéœ€è¦æä¾›æ–‡ä»¶åœ¨æ‰“å¼€æ–‡ä»¶è¡¨ä¸­çš„ç´¢å¼•å·(åˆç§°</strong>æ–‡ä»¶æè¿°ç¬¦ <strong>)å³å¯</strong>ï¼‰</li><li>è¿˜éœ€è¦æŒ‡æ˜è¦è¯»å…¥å¤šå°‘æ•°æ®ï¼ˆå¦‚ï¼šè¯»å…¥1KBï¼‰ã€æŒ‡æ˜è¯»å…¥çš„æ•°æ®è¦æ”¾åœ¨å†…å­˜ä¸­çš„ä»€ä¹ˆä½ç½®</li><li>æ“ä½œç³»ç»Ÿåœ¨å¤„ç† read ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¼šä»è¯»æŒ‡é’ˆæŒ‡å‘çš„å¤–å­˜ä¸­ï¼Œå°†æŒ‡å®šå¤§å°çš„æ•°æ®è¯»å…¥ç”¨æˆ·æŒ‡å®šçš„å†…å­˜åŒºåŸŸä¸­</li></ul></li></ul><h3 id="å†™æ–‡ä»¶">7.6 <strong>å†™æ–‡ä»¶</strong></h3><ul><li><p>å¯ä»¥â€œ<strong>å†™æ–‡ä»¶</strong>â€ï¼Œå°†æ›´æ”¹è¿‡çš„æ–‡ä»¶æ•°æ®å†™å›å¤–å­˜ï¼ˆåœ¨â€œè®°äº‹æœ¬â€åº”ç”¨ç¨‹åºä¸­ç¼–è¾‘æ–‡ä»¶å†…å®¹ï¼Œç‚¹å‡»â€œä¿å­˜â€åï¼Œâ€œè®°äº‹æœ¬â€åº”ç”¨ç¨‹åºé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„â€œ<strong>writeç³»ç»Ÿè°ƒç”¨</strong>â€ï¼Œå°†æ–‡ä»¶æ•°æ®ä»å†…å­˜å†™å›å¤–å­˜ï¼‰</p></li><li><p>è¿›ç¨‹ä½¿ç”¨ write ç³»ç»Ÿè°ƒç”¨ å®Œæˆå†™æ“ä½œ:</p><ul><li>éœ€è¦æŒ‡æ˜æ˜¯å“ªä¸ªæ–‡ä»¶ï¼ˆåœ¨æ”¯æŒâ€œæ‰“å¼€æ–‡ä»¶â€æ“ä½œçš„ç³»ç»Ÿä¸­ï¼Œ<strong>åªéœ€è¦æä¾›æ–‡ä»¶åœ¨æ‰“å¼€æ–‡ä»¶è¡¨ä¸­çš„ç´¢å¼•å·(åˆç§°</strong>æ–‡ä»¶æè¿°ç¬¦ <strong>)å³å¯</strong>ï¼‰</li><li>è¿˜éœ€è¦æŒ‡æ˜è¦å†™å‡ºå¤šå°‘æ•°æ®ï¼ˆå¦‚ï¼šå†™å‡º1KBï¼‰ã€å†™å›å¤–å­˜çš„æ•°æ®æ”¾åœ¨å†…å­˜ä¸­çš„ä»€ä¹ˆä½ç½®</li><li>æ“ä½œç³»ç»Ÿåœ¨å¤„ç†writeç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œä¼šä»ç”¨æˆ·æŒ‡å®šçš„å†…å­˜åŒºåŸŸä¸­ï¼Œå°†æŒ‡å®šå¤§å°çš„æ•°æ®å†™å›å†™æŒ‡é’ˆæŒ‡å‘çš„å¤–å­˜</li></ul></li></ul><h2 id="æ–‡ä»¶å…±äº«"><strong>8. æ–‡ä»¶å…±äº«</strong></h2><ul><li><strong>æ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·æä¾›æ–‡ä»¶å…±äº«åŠŸèƒ½ï¼Œå¯ä»¥è®©å¤šä¸ªç”¨æˆ·å…±äº«åœ°ä½¿ç”¨åŒä¸€ä¸ªæ–‡ä»¶</strong></li><li>æ³¨æ„ï¼š<strong>å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ„å‘³ç€ç³»ç»Ÿä¸­åªæœ‰â€œä¸€ä»½â€æ–‡ä»¶æ•°æ®ï¼Œå¹¶ä¸”åªè¦æŸä¸ªç”¨æˆ·ä¿®æ”¹äº†è¯¥æ–‡ä»¶çš„æ•°æ®ï¼Œå…¶ä»–ç”¨æˆ·ä¹Ÿå¯ä»¥çœ‹åˆ°æ–‡ä»¶æ•°æ®çš„å˜åŒ–</strong>ã€‚å¦‚æœæ˜¯å¤šä¸ªç”¨æˆ·éƒ½"å¤åˆ¶"äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆç³»ç»Ÿä¸­ä¼šæœ‰â€œå¥½å‡ ä»½â€æ–‡ä»¶æ•°æ®ã€‚å…¶ä¸­ä¸€ä¸ªç”¨æˆ·ä¿®æ”¹äº†è‡ªå·±çš„é‚£ä»½æ–‡ä»¶æ•°æ®ï¼Œå¯¹å…¶ä»–ç”¨æˆ·çš„æ–‡ä»¶æ•°æ®å¹¶æ²¡æœ‰å½±å“</li></ul><h3 id="åŸºäºç´¢å¼•ç»“ç‚¹çš„å…±äº«æ–¹å¼ç¡¬é“¾æ¥">8.1<strong>åŸºäºç´¢å¼•ç»“ç‚¹çš„å…±äº«æ–¹å¼ï¼ˆç¡¬é“¾æ¥ï¼‰</strong></h3><ul><li><p>çŸ¥è¯†å›é¡¾ï¼š<strong>ç´¢å¼•ç»“ç‚¹</strong>ï¼Œæ˜¯ä¸€ç§æ–‡ä»¶ç›®å½•ç˜¦èº«ç­–ç•¥ã€‚ç”±äºæ£€ç´¢æ–‡ä»¶æ—¶åªéœ€ç”¨åˆ°æ–‡ä»¶åï¼Œå› æ­¤å¯ä»¥å°†é™¤äº†æ–‡ä»¶åä¹‹å¤–çš„å…¶ä»–ä¿¡æ¯æ”¾åˆ°ç´¢å¼•ç»“ç‚¹ä¸­ã€‚è¿™æ ·ç›®å½•é¡¹å°±åªéœ€è¦åŒ…å«æ–‡ä»¶åã€ç´¢å¼•ç»“ç‚¹æŒ‡é’ˆ</p></li><li><p><strong>ç´¢å¼•ç»“ç‚¹</strong>ä¸­è®¾ç½®ä¸€ä¸ªé“¾æ¥è®¡æ•°å˜é‡countï¼Œ<strong>ç”¨äºè¡¨ç¤ºé“¾æ¥åˆ°æœ¬ç´¢å¼•ç»“ç‚¹ä¸Šçš„ç”¨æˆ·ç›®å½•é¡¹æ•°</strong></p></li><li><p>è‹¥count=2ï¼Œè¯´æ˜æ­¤æ—¶æœ‰ä¸¤ä¸ªç”¨æˆ·ç›®å½•é¡¹é“¾æ¥åˆ°è¯¥ç´¢å¼•ç»“ç‚¹ä¸Šï¼Œæˆ–è€…è¯´æ˜¯æœ‰ä¸¤ä¸ªç”¨æˆ·åœ¨å…±äº«æ­¤æ–‡ä»¶</p></li><li><p>è‹¥æŸä¸ªç”¨æˆ·å†³å®šâ€œåˆ é™¤â€è¯¥æ–‡ä»¶ï¼Œåˆ™åªæ˜¯è¦æŠŠç”¨æˆ·ç›®å½•ä¸­ä¸è¯¥æ–‡ä»¶å¯¹åº”çš„ç›®å½•é¡¹åˆ é™¤ï¼Œä¸”ç´¢å¼•ç»“ç‚¹çš„countå€¼å‡1</p></li><li><p>è‹¥count&gt;0ï¼Œè¯´æ˜è¿˜æœ‰åˆ«çš„ç”¨æˆ·è¦ä½¿ç”¨è¯¥æ–‡ä»¶ï¼Œæš‚æ—¶ä¸èƒ½æŠŠæ–‡ä»¶æ•°æ®åˆ é™¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´æŒ‡é’ˆæ‚¬ç©º</p></li><li><p>å½“count=0æ—¶ç³»ç»Ÿè´Ÿè´£åˆ é™¤æ–‡ä»¶</p></li></ul><h3 id="åŸºäºç¬¦å·é“¾çš„å…±äº«æ–¹å¼è½¯é“¾æ¥">8.2<strong>åŸºäºç¬¦å·é“¾çš„å…±äº«æ–¹å¼ï¼ˆè½¯é“¾æ¥ï¼‰</strong></h3><ul><li><p>å½“User3è®¿é—®â€œcccâ€æ—¶ï¼Œæ“ä½œç³»ç»Ÿåˆ¤æ–­æ–‡ä»¶â€œcccâ€å±äº<strong>Linkç±»å‹æ–‡ä»¶</strong>ï¼Œäºæ˜¯ä¼š<strong>æ ¹æ®å…¶ä¸­è®°å½•çš„è·¯å¾„å±‚å±‚æŸ¥æ‰¾ç›®å½•</strong>ï¼Œæœ€ç»ˆæ‰¾åˆ°User1çš„ç›®å½•è¡¨ä¸­çš„â€œaaa"è¡¨é¡¹ï¼Œäºæ˜¯å°±æ‰¾åˆ°äº†æ–‡ä»¶1çš„ç´¢å¼•ç»“ç‚¹</p></li><li><p><strong>å³ä½¿è½¯é“¾æ¥æŒ‡å‘çš„å…±äº«æ–‡ä»¶å·²è¢«åˆ é™¤ï¼ŒLinkå‹æ–‡ä»¶ä¾ç„¶å­˜åœ¨ï¼Œåªæ˜¯é€šè¿‡Linkå‹æ–‡ä»¶ä¸­çš„è·¯å¾„å»æŸ¥æ‰¾å…±äº«æ–‡ä»¶ä¼šå¤±è´¥</strong>ï¼ˆæ‰¾ä¸åˆ°ç›®å½•é¡¹ï¼‰</p></li><li><p>ç”±äºç”¨è½¯é“¾æ¥çš„æ–¹å¼è®¿é—®å…±äº«æ–‡ä»¶æ—¶è¦æŸ¥è¯¢å¤šçº§ç›®å½•ï¼Œä¼šæœ‰å¤šæ¬¡ç£ç›˜I/Oï¼Œå› æ­¤<strong>ç”¨è½¯é“¾æ¥è®¿é—®å…±äº«æ–‡ä»¶çš„é€Ÿåº¦è¦æ¯”ç¡¬é“¾æ¥æ›´æ…¢</strong></p></li></ul><h2 id="æ–‡ä»¶ä¿æŠ¤"><strong>9. æ–‡ä»¶ä¿æŠ¤</strong></h2><ul><li>ä¿æŠ¤æ–‡ä»¶æ•°æ®çš„å®‰å…¨</li></ul><h3 id="å£ä»¤ä¿æŠ¤">9.1 <strong>å£ä»¤ä¿æŠ¤</strong></h3><ul><li><p>ä¸ºæ–‡ä»¶è®¾ç½®ä¸€ä¸ªâ€œå£ä»¤â€ï¼ˆå¦‚: abc112233ï¼‰ï¼Œç”¨æˆ·è¯·æ±‚è®¿é—®è¯¥æ–‡ä»¶æ—¶å¿…é¡»æä¾›â€œå£ä»¤â€</p><ul><li>å£ä»¤ä¸€èˆ¬å­˜æ”¾åœ¨æ–‡ä»¶å¯¹åº”çš„FCBæˆ–ç´¢å¼•ç»“ç‚¹ä¸­ã€‚ç”¨æˆ·è®¿é—®æ–‡ä»¶å‰éœ€è¦å…ˆè¾“å…¥â€œå£ä»¤â€ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†ç”¨æˆ·æä¾›çš„å£ä»¤ä¸FCBä¸­å­˜å‚¨çš„å£ä»¤è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæ­£ç¡®ï¼Œåˆ™å…è®¸è¯¥ç”¨æˆ·è®¿é—®æ–‡ä»¶</li></ul></li><li><p>ä¼˜ç‚¹ï¼šä¿å­˜å£ä»¤çš„ç©ºé—´å¼€é”€ä¸å¤šï¼ŒéªŒè¯å£ä»¤çš„æ—¶é—´å¼€é”€ä¹Ÿå¾ˆå°</p></li><li><p>ç¼ºç‚¹ï¼šæ­£ç¡®çš„â€œå£ä»¤â€å­˜æ”¾åœ¨ç³»ç»Ÿå†…éƒ¨ï¼Œä¸å¤Ÿå®‰å…¨</p></li></ul><h3 id="åŠ å¯†ä¿æŠ¤">9.2 <strong>åŠ å¯†ä¿æŠ¤</strong></h3><ul><li><p>ä½¿ç”¨æŸä¸ª"å¯†ç "å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œåœ¨è®¿é—®æ–‡ä»¶æ—¶éœ€è¦æä¾›æ­£ç¡®çš„â€å¯†ç â€œæ‰èƒ½å¯¹æ–‡ä»¶è¿›è¡Œæ­£ç¡®çš„è§£å¯†</p></li><li><p>ä¼˜ç‚¹ï¼šä¿å¯†æ€§å¼ºï¼Œä¸éœ€è¦åœ¨ç³»ç»Ÿä¸­å­˜å‚¨â€œå¯†ç â€</p></li><li><p>ç¼ºç‚¹ï¼šç¼–ç /è¯‘ç ï¼Œæˆ–è€…è¯´åŠ å¯†/è§£å¯†éœ€è¦èŠ±è´¹ä¸€å®šæ—¶é—´</p></li></ul><h3 id="è®¿é—®æ§åˆ¶">9.3 <strong>è®¿é—®æ§åˆ¶</strong></h3><ul><li><p>åœ¨æ¯ä¸ªæ–‡ä»¶çš„FCBï¼ˆæˆ–ç´¢å¼•ç»“ç‚¹ï¼‰ä¸­å¢åŠ ä¸€ä¸ª<strong>è®¿é—®æ§åˆ¶è¡¨ï¼ˆAccess-ControlListï¼ŒACLï¼‰</strong>ï¼Œè¯¥è¡¨ä¸­è®°å½•äº†å„ä¸ªç”¨æˆ·å¯ä»¥å¯¹è¯¥æ–‡ä»¶æ‰§è¡Œå“ªäº›æ“ä½œ</p></li><li><p><strong>ç²¾ç®€çš„è®¿é—®åˆ—è¡¨</strong>ï¼šä»¥â€œ<strong>ç»„</strong>â€ä¸ºå•ä½ï¼Œ<strong>æ ‡è®°å„â€œç»„â€ç”¨æˆ·å¯ä»¥å¯¹æ–‡ä»¶æ‰§è¡Œå“ªäº›æ“ä½œ</strong>ï¼Œç³»ç»Ÿéœ€è¦ç®¡ç†åˆ†ç»„çš„ä¿¡æ¯</p><ul><li>å¦‚ï¼šåˆ†ä¸ºç³»ç»Ÿç®¡ç†å‘˜ã€æ–‡ä»¶ä¸»ã€æ–‡ä»¶ä¸»çš„ä¼™ä¼´ã€å…¶ä»–ç”¨æˆ·å‡ ä¸ªåˆ†ç»„</li><li>å½“æŸç”¨æˆ·æƒ³è¦è®¿é—®æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥è¯¥ç”¨æˆ·æ‰€å±çš„åˆ†ç»„æ˜¯å¦æœ‰ç›¸åº”çš„è®¿é—®æƒé™</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.2 è™šæ‹Ÿå†…å­˜ç®¡ç†</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿå†…å­˜ç®¡ç†"><strong>3.2 è™šæ‹Ÿå†…å­˜ç®¡ç†</strong></h1><h2 id="è™šæ‹Ÿå†…å­˜çš„åŸºæœ¬æ¦‚å¿µ"><strong>1. è™šæ‹Ÿå†…å­˜çš„åŸºæœ¬æ¦‚å¿µ</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121183215528.png"></p><ul><li>åœ¨<strong>ä¼ ç»Ÿå­˜å‚¨ç®¡ç†æ–¹å¼</strong>çš„åŸºç¡€ä¸Šå¼•å…¥äº†<strong>äº¤æ¢æŠ€æœ¯</strong>ã€<strong>è¦†ç›–æŠ€æœ¯</strong>ï¼Œä½¿å¾—å†…å­˜åˆ©ç”¨ç‡æœ‰æ‰€æå‡ï¼Œå¹¶ä¸”èƒ½ä»é€»è¾‘ä¸Šæ‰©å……å†…å­˜å®¹é‡<ul><li>ä¼ ç»Ÿå­˜å‚¨ç®¡ç†æ–¹å¼ï¼šè¿ç»­åˆ†é…ã€éè¿ç»­åˆ†é…</li></ul></li></ul><h3 id="ä¼ ç»Ÿå­˜å‚¨ç®¡ç†æ–¹å¼çš„ç‰¹å¾ç¼ºç‚¹">1.1<strong>ä¼ ç»Ÿå­˜å‚¨ç®¡ç†æ–¹å¼çš„ç‰¹å¾ã€ç¼ºç‚¹</strong></h3><ul><li><p>ä¼ ç»Ÿå­˜å‚¨ç®¡ç†æ–¹å¼ä¸­å¾ˆå¤šæš‚æ—¶ç”¨ä¸åˆ°çš„æ•°æ®ä¹Ÿä¼šé•¿æœŸå ç”¨å†…å­˜ï¼Œå¯¼è‡´å†…å­˜åˆ©ç”¨ç‡ä¸é«˜</p></li><li><p><strong>ä¸€æ¬¡æ€§</strong></p><ul><li>ä½œä¸šå¿…é¡»ä¸€æ¬¡æ€§å…¨éƒ¨è£…å…¥å†…å­˜åæ‰èƒ½å¼€å§‹è¿è¡Œ</li><li>è¿™ä¼šé€ æˆä¸¤ä¸ªé—®é¢˜ï¼š<ul><li>ä½œä¸šå¾ˆå¤§æ—¶ï¼Œä¸èƒ½å…¨éƒ¨è£…å…¥å†…å­˜ï¼Œå¯¼è‡´å¤§ä½œä¸šæ— æ³•è¿è¡Œ</li><li>å½“å¤§é‡ä½œä¸šè¦æ±‚è¿è¡Œæ—¶ï¼Œç”±äºå†…å­˜æ— æ³•å®¹çº³æ‰€æœ‰ä½œä¸šï¼Œå› æ­¤åªæœ‰å°‘é‡ä½œä¸šèƒ½è¿è¡Œï¼Œå¯¼è‡´å¤šé“ç¨‹åºå¹¶å‘åº¦ä¸‹é™</li></ul></li></ul></li><li><p><strong>é©»ç•™æ€§</strong></p><ul><li>ä¸€æ—¦ä½œä¸šè¢«è£…å…¥å†…å­˜ï¼Œå°±ä¼šä¸€ç›´é©»ç•™åœ¨å†…å­˜ä¸­ï¼Œç›´è‡³ä½œä¸šè¿è¡Œç»“æŸ</li><li>äº‹å®ä¸Šï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œåªéœ€è¦è®¿é—®ä½œä¸šçš„ä¸€å°éƒ¨åˆ†æ•°æ®å³å¯æ­£å¸¸è¿è¡Œï¼Œè¿™å°±å¯¼è‡´äº†å†…å­˜ä¸­ä¼šé©»ç•™å¤§é‡çš„ã€æš‚æ—¶ç”¨ä¸åˆ°çš„æ•°æ®ï¼Œæµªè´¹äº†å®è´µçš„å†…å­˜èµ„æº</li></ul></li><li><p>ä¼ ç»Ÿå­˜å‚¨ç®¡ç†æ–¹å¼çš„è¿™äº›é—®é¢˜å¯ç”¨<strong>è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯</strong>è§£å†³</p></li></ul><h3 id="å±€éƒ¨æ€§åŸç†">1.2 <strong>å±€éƒ¨æ€§åŸç†</strong></h3><ul><li><strong>æ—¶é—´å±€éƒ¨æ€§</strong><ul><li>å¦‚æœæ‰§è¡Œäº†ç¨‹åºä¸­çš„æŸæ¡<strong>æŒ‡ä»¤</strong>ï¼Œé‚£ä¹ˆä¸ä¹…åè¿™æ¡æŒ‡ä»¤å¾ˆæœ‰å¯èƒ½å†æ¬¡æ‰§è¡Œï¼›å¦‚æœæŸä¸ª<strong>æ•°æ®</strong>è¢«è®¿é—®è¿‡ï¼Œä¸ä¹…ä¹‹åè¯¥æ•°æ®å¾ˆå¯èƒ½å†æ¬¡è¢«è®¿é—®ï¼ˆå› ä¸ºç¨‹åºä¸­å­˜åœ¨å¤§é‡çš„å¾ªç¯ï¼‰</li></ul></li><li><strong>ç©ºé—´å±€éƒ¨æ€§</strong><ul><li>ä¸€æ—¦ç¨‹åºè®¿é—®äº†æŸä¸ª<strong>å­˜å‚¨å•å…ƒ</strong>ï¼Œåœ¨ä¸ä¹…ä¹‹åï¼Œå…¶é™„è¿‘çš„å­˜å‚¨å•å…ƒä¹Ÿå¾ˆæœ‰å¯èƒ½è¢«è®¿é—®ï¼ˆå› ä¸ºå¾ˆå¤šæ•°æ®åœ¨å†…å­˜ä¸­éƒ½æ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œå¹¶ä¸”ç¨‹åºçš„æŒ‡ä»¤ä¹Ÿæ˜¯é¡ºåºåœ°åœ¨å†…å­˜ä¸­å­˜æ”¾çš„ï¼‰</li></ul></li><li><strong>åº”ç”¨</strong>ï¼š<ul><li><strong>å¿«è¡¨</strong>æœºæ„å°±æ˜¯å°†è¿‘æœŸå¸¸è®¿é—®çš„é¡µè¡¨é¡¹å‰¯æœ¬æ”¾åˆ°æ›´é«˜é€Ÿçš„è”æƒ³å¯„å­˜å™¨ä¸­</li><li><strong>é«˜é€Ÿç¼“å†²æŠ€æœ¯</strong>çš„æ€æƒ³ï¼šå°†è¿‘æœŸä¼šé¢‘ç¹è®¿é—®åˆ°çš„æ•°æ®æ”¾åˆ°æ›´é«˜é€Ÿçš„å­˜å‚¨å™¨ä¸­ï¼Œæš‚æ—¶ç”¨ä¸åˆ°çš„æ•°æ®æ”¾åœ¨æ›´ä½é€Ÿå­˜å‚¨å™¨ä¸­</li></ul></li></ul><h3 id="è™šæ‹Ÿå†…å­˜çš„å®šä¹‰å’Œç‰¹å¾">1.3<strong>è™šæ‹Ÿå†…å­˜çš„å®šä¹‰å’Œç‰¹å¾</strong></h3><ul><li><strong>å®šä¹‰</strong>:<ul><li>åŸºäº<strong>å±€éƒ¨æ€§åŸç†</strong>ï¼Œåœ¨ç¨‹åºè£…å…¥æ—¶ï¼Œå¯ä»¥å°†ç¨‹åºä¸­<strong>å¾ˆå¿«ä¼šç”¨åˆ°çš„éƒ¨åˆ†è£…å…¥å†…å­˜ï¼Œæš‚æ—¶ç”¨ä¸åˆ°çš„éƒ¨åˆ†ç•™åœ¨å¤–å­˜</strong>ï¼Œå°±å¯ä»¥è®©ç¨‹åºå¼€å§‹æ‰§è¡Œ</li><li>åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“<strong>æ‰€è®¿é—®çš„ä¿¡æ¯ä¸åœ¨å†…å­˜æ—¶</strong>ï¼Œç”±<strong>æ“ä½œç³»ç»Ÿè´Ÿè´£å°†æ‰€éœ€ä¿¡æ¯ä»å¤–å­˜è°ƒå…¥å†…å­˜</strong>ï¼Œç„¶åç»§ç»­æ‰§è¡Œç¨‹åº</li><li>è‹¥å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œç”±<strong>æ“ä½œç³»ç»Ÿ</strong>è´Ÿè´£<strong>å°†å†…å­˜ä¸­æš‚æ—¶ç”¨ä¸åˆ°çš„ä¿¡æ¯æ¢å‡ºåˆ°å¤–å­˜</strong>ã€‚åœ¨æ“ä½œç³»ç»Ÿçš„ç®¡ç†ä¸‹ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥ä¼¼ä¹æœ‰ä¸€ä¸ªæ¯”å®é™…å†…å­˜å¤§å¾—å¤šçš„å†…å­˜ï¼Œè¿™å°±æ˜¯<strong>è™šæ‹Ÿå†…å­˜</strong><ul><li>æ“ä½œç³»ç»Ÿ<strong>è™šæ‹Ÿæ€§</strong>çš„ä¸€ä¸ªä½“ç°ï¼Œå®é™…çš„ç‰©ç†å†…å­˜å¤§å°æ²¡æœ‰å˜ï¼Œåªæ˜¯åœ¨é€»è¾‘ä¸Šè¿›è¡Œäº†æ‰©å……</li></ul></li></ul></li><li><strong>ç‰¹å¾</strong>:<ul><li>è™šæ‹Ÿå†…å­˜æœ‰ä»¥ä¸‹ä¸‰ä¸ªä¸»è¦ç‰¹å¾ï¼š</li><li><strong>å¤šæ¬¡æ€§</strong>ï¼šæ— éœ€åœ¨ä½œä¸šè¿è¡Œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨è£…å…¥å†…å­˜ï¼Œè€Œæ˜¯å…è®¸è¢«åˆ†æˆå¤šæ¬¡è°ƒå…¥å†…å­˜</li><li><strong>å¯¹æ¢æ€§</strong>ï¼šåœ¨ä½œä¸šè¿è¡Œæ—¶æ— éœ€ä¸€ç›´å¸¸é©»å†…å­˜ï¼Œè€Œæ˜¯å…è®¸åœ¨ä½œä¸šè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå°†ä½œä¸šæ¢å…¥ã€æ¢å‡º</li><li><strong>è™šæ‹Ÿæ€§</strong>ï¼šä»é€»è¾‘ä¸Šæ‰©å……äº†å†…å­˜çš„å®¹é‡ï¼Œä½¿ç”¨æˆ·çœ‹åˆ°çš„å†…å­˜å®¹é‡ï¼Œè¿œå¤§äºå®é™…çš„å®¹é‡</li></ul></li></ul><h3 id="å¦‚ä½•å®ç°è™šæ‹Ÿå†…å­˜æŠ€æœ¯">1.4<strong>å¦‚ä½•å®ç°è™šæ‹Ÿå†…å­˜æŠ€æœ¯?</strong></h3><ul><li><p>è™šæ‹Ÿå†…å­˜æŠ€æœ¯ï¼Œå…è®¸ä¸€ä¸ªä½œä¸šåˆ†å¤šæ¬¡è°ƒå…¥å†…å­˜ã€‚å¦‚æœé‡‡ç”¨è¿ç»­åˆ†é…æ–¹å¼ï¼Œä¼šä¸æ–¹ä¾¿å®ç°ã€‚å› æ­¤ï¼Œè™šæ‹Ÿå†…å­˜çš„å®ç°éœ€è¦å»ºç«‹åœ¨<strong>ç¦»æ•£åˆ†é…</strong>çš„å†…å­˜ç®¡ç†æ–¹å¼åŸºç¡€ä¸Š</p></li><li><p><strong>ä¼ ç»Ÿçš„éè¿ç»­åˆ†é…å­˜å‚¨ç®¡ç†</strong></p><ul><li>åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†ã€åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†ã€åŸºæœ¬æ®µé¡µå¼å­˜å‚¨ç®¡ç†</li></ul></li><li><p><strong>è™šæ‹Ÿå†…å­˜çš„å®ç°</strong></p><ul><li><strong>è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†</strong>ã€<strong>è¯·æ±‚åˆ†æ®µå­˜å‚¨ç®¡ç†</strong>ã€<strong>è¯·æ±‚æ®µé¡µå¼å­˜å‚¨ç®¡ç†</strong></li></ul></li><li><p><strong>ä¸»è¦åŒºåˆ«</strong>ï¼š</p><ul><li>åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“<strong>æ‰€è®¿é—®çš„ä¿¡æ¯ä¸åœ¨å†…å­˜æ—¶</strong>ï¼Œç”±<strong>æ“ä½œç³»ç»Ÿè´Ÿè´£å°†æ‰€éœ€ä¿¡æ¯ä»å¤–å­˜è°ƒå…¥å†…å­˜</strong>ï¼Œç„¶åç»§ç»­æ‰§è¡Œç¨‹åº<ul><li>æ“ä½œç³»ç»Ÿè¦æä¾›<strong>è¯·æ±‚è°ƒé¡µï¼ˆæˆ–è¯·æ±‚è°ƒæ®µï¼‰</strong>åŠŸèƒ½</li></ul></li><li>è‹¥å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œç”±<strong>æ“ä½œç³»ç»Ÿ</strong>è´Ÿè´£<strong>å°†å†…å­˜ä¸­æš‚æ—¶ç”¨ä¸åˆ°çš„ä¿¡æ¯æ¢å‡ºåˆ°å¤–å­˜</strong><ul><li>æ“ä½œç³»ç»Ÿè¦æä¾›<strong>é¡µé¢ç½®æ¢ï¼ˆæˆ–æ®µç½®æ¢ï¼‰</strong>çš„åŠŸèƒ½</li></ul></li></ul></li></ul><h2 id="è¯·æ±‚åˆ†é¡µç®¡ç†æ–¹å¼"><strong>2. è¯·æ±‚åˆ†é¡µç®¡ç†æ–¹å¼</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121191935173.png"></p><ul><li>æ³¨æ„ä¸<strong>åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†</strong>çš„é¡µè¡¨æœºåˆ¶ã€åœ°å€å˜æ¢æµç¨‹å¯¹æ¯”å­¦ä¹ </li></ul><h3 id="é¡µè¡¨æœºåˆ¶">2.1 <strong>é¡µè¡¨æœºåˆ¶</strong></h3><ul><li><p>ä¸åŸºæœ¬åˆ†é¡µç®¡ç†ç›¸æ¯”ï¼Œ<strong>è¯·æ±‚åˆ†é¡µç®¡ç†</strong>ä¸­ï¼Œä¸ºäº†å®ç°â€œ<strong>è¯·æ±‚è°ƒé¡µ</strong>â€ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦çŸ¥é“æ¯ä¸ªé¡µé¢æ˜¯å¦å·²ç»è°ƒå…¥å†…å­˜ï¼›å¦‚æœè¿˜æ²¡è°ƒå…¥ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦çŸ¥é“è¯¥é¡µé¢åœ¨å¤–å­˜ä¸­å­˜æ”¾çš„ä½ç½®</p></li><li><p>å½“å†…å­˜ç©ºé—´ä¸å¤Ÿæ—¶ï¼Œè¦å®ç°â€œ<strong>é¡µé¢ç½®æ¢</strong>â€ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦é€šè¿‡æŸäº›æŒ‡æ ‡æ¥å†³å®šåˆ°åº•æ¢å‡ºå“ªä¸ªé¡µé¢ï¼›æœ‰çš„é¡µé¢æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå°±ä¸ç”¨å†æµªè´¹æ—¶é—´å†™å›å¤–å­˜ã€‚æœ‰çš„é¡µé¢ä¿®æ”¹è¿‡ï¼Œå°±éœ€è¦å°†å¤–å­˜ä¸­çš„æ—§æ•°æ®è¦†ç›–ï¼Œå› æ­¤ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿéœ€è¦è®°å½•å„ä¸ªé¡µé¢æ˜¯å¦è¢«ä¿®æ”¹çš„ä¿¡æ¯</p></li></ul><h3 id="ç¼ºé¡µä¸­æ–­æœºæ„">2.2 <strong>ç¼ºé¡µä¸­æ–­æœºæ„</strong></h3><ul><li><p>åœ¨è¯·æ±‚åˆ†é¡µç³»ç»Ÿä¸­ï¼Œæ¯å½“<strong>è¦è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜</strong>æ—¶ï¼Œä¾¿äº§ç”Ÿä¸€ä¸ª<strong>ç¼ºé¡µä¸­æ–­</strong>ï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿçš„<strong>ç¼ºé¡µ</strong></p></li><li><p><strong>ä¸­æ–­å¤„ç†ç¨‹åºå¤„ç†ä¸­æ–­</strong>ã€‚æ­¤æ—¶<strong>ç¼ºé¡µçš„è¿›ç¨‹é˜»å¡</strong>ï¼Œæ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼Œ<strong>è°ƒé¡µå®Œæˆåå†å°†å…¶å”¤é†’</strong>ï¼Œæ”¾å›å°±ç»ªé˜Ÿåˆ—</p></li><li><p>å¦‚æœ<strong>å†…å­˜ä¸­æœ‰ç©ºé—²å—</strong>ï¼Œåˆ™<strong>ä¸ºè¿›ç¨‹åˆ†é…ä¸€ä¸ªç©ºé—²å—</strong>ï¼Œå°†æ‰€ç¼ºé¡µé¢è£…å…¥è¯¥å—ï¼Œå¹¶<strong>ä¿®æ”¹é¡µè¡¨ä¸­ç›¸åº”çš„é¡µè¡¨é¡¹</strong></p></li><li><p>å¦‚æœ<strong>å†…å­˜ä¸­æ²¡æœ‰ç©ºé—²å—</strong>ï¼Œåˆ™<strong>ç”±é¡µé¢ç½®æ¢ç®—æ³•é€‰æ‹©ä¸€ä¸ªé¡µé¢æ·˜æ±°</strong>ï¼Œè‹¥è¯¥é¡µé¢åœ¨å†…å­˜æœŸé—´<strong>è¢«ä¿®æ”¹è¿‡</strong>ï¼Œåˆ™è¦<strong>å°†å…¶å†™å›å¤–å­˜</strong>ã€‚<strong>æœªä¿®æ”¹è¿‡</strong>çš„é¡µé¢<strong>ä¸ç”¨å†™å›å¤–å­˜</strong></p></li><li><p><strong>ç¼ºé¡µä¸­æ–­</strong>æ˜¯å› ä¸ºå½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æƒ³è¦è®¿é—®çš„ç›®æ ‡é¡µé¢æœªè°ƒå…¥å†…å­˜è€Œäº§ç”Ÿçš„ï¼Œå› æ­¤å±äº<strong>å†…ä¸­æ–­</strong></p></li><li><p><strong>ä¸€æ¡æŒ‡ä»¤</strong>åœ¨æ‰§è¡ŒæœŸé—´ï¼Œ<strong>å¯èƒ½äº§ç”Ÿå¤šæ¬¡ç¼ºé¡µä¸­æ–­</strong></p><ul><li>å¦‚ï¼šcopy A toBï¼Œå³å°†é€»è¾‘åœ°å€Aä¸­çš„æ•°æ®å¤åˆ¶åˆ°é€»è¾‘åœ°å€Bï¼Œè€ŒAã€Bå±äºä¸åŒçš„é¡µé¢ï¼Œåˆ™æœ‰å¯èƒ½äº§ç”Ÿä¸¤æ¬¡ä¸­æ–­</li></ul></li></ul><h3 id="åœ°å€å˜æ¢æœºæ„">2.3 <strong>åœ°å€å˜æ¢æœºæ„</strong></h3><ul><li><p>æ–°å¢æ­¥éª¤1ï¼šè¯·æ±‚è°ƒé¡µï¼ˆæŸ¥åˆ°é¡µè¡¨é¡¹æ—¶è¿›è¡Œåˆ¤æ–­ï¼‰</p></li><li><p>æ–°å¢æ­¥éª¤2ï¼šé¡µé¢ç½®æ¢ï¼ˆéœ€è¦è°ƒå…¥é¡µé¢ï¼Œä½†æ²¡æœ‰ç©ºé—²å†…å­˜å—æ—¶è¿›è¡Œï¼‰</p></li><li><p>æ–°å¢æ­¥éª¤3ï¼šéœ€è¦ä¿®æ”¹è¯·æ±‚é¡µè¡¨ä¸­çš„è¡¨é¡¹</p></li><li><p><strong>è¿‡ç¨‹</strong>:</p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121191231469.png"></p><ul><li><strong>æ³¨æ„</strong>:<strong>å¿«è¡¨</strong>ä¸­æœ‰çš„é¡µé¢ä¸€å®šæ˜¯åœ¨å†…å­˜ä¸­çš„ã€‚è‹¥<strong>æŸä¸ªé¡µé¢è¢«æ¢å‡ºå¤–å­˜ï¼Œåˆ™å¿«è¡¨ä¸­çš„ç›¸åº”è¡¨é¡¹ä¹Ÿè¦åˆ é™¤</strong>ï¼Œå¦åˆ™å¯èƒ½è®¿é—®é”™è¯¯çš„é¡µé¢</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121191315690.png"></p><ul><li><strong>è¡¥å……ç»†èŠ‚</strong>:<ul><li>åªæœ‰â€œå†™æŒ‡ä»¤â€æ‰éœ€è¦ä¿®æ”¹â€œä¿®æ”¹ä½â€ã€‚å¹¶ä¸”ï¼Œä¸€èˆ¬æ¥è¯´åªéœ€ä¿®æ”¹å¿«è¡¨ä¸­çš„æ•°æ®ï¼Œåªæœ‰è¦å°†å¿«è¡¨é¡¹åˆ é™¤æ—¶æ‰éœ€è¦å†™å›å†…å­˜ä¸­çš„æ…¢è¡¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘è®¿å­˜æ¬¡æ•°</li><li>å’Œæ™®é€šçš„ä¸­æ–­å¤„ç†ä¸€æ ·ï¼Œç¼ºé¡µä¸­æ–­å¤„ç†ä¾ç„¶éœ€è¦ä¿ç•™CPUç°åœº</li><li>éœ€è¦ç”¨æŸç§â€œ<strong>é¡µé¢ç½®æ¢ç®—æ³•</strong>â€æ¥å†³å®šä¸€ä¸ªæ¢å‡ºé¡µé¢ï¼ˆä¸‹èŠ‚å†…å®¹ï¼‰</li><li>æ¢å…¥/æ¢å‡ºé¡µé¢éƒ½éœ€è¦å¯åŠ¨æ…¢é€Ÿçš„I/Oæ“ä½œï¼Œå¯è§ï¼Œå¦‚æœæ¢å…¥/æ¢å‡ºå¤ªé¢‘ç¹ï¼Œä¼šæœ‰å¾ˆå¤§çš„å¼€é”€</li><li>é¡µé¢è°ƒå…¥å†…å­˜åï¼Œéœ€è¦ä¿®æ”¹æ…¢è¡¨ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å°†è¡¨é¡¹å¤åˆ¶åˆ°å¿«è¡¨ä¸­<ul><li>åœ¨å…·æœ‰å¿«è¡¨æœºæ„çš„è¯·æ±‚åˆ†é¡µç³»ç»Ÿä¸­ï¼Œè®¿é—®ä¸€ä¸ªé€»è¾‘åœ°å€æ—¶ï¼Œè‹¥å‘ç”Ÿç¼ºé¡µï¼Œåˆ™åœ°å€å˜æ¢æ­¥éª¤æ˜¯ï¼š<ul><li>æŸ¥å¿«è¡¨(æœªå‘½ä¸­)--æŸ¥æ…¢è¡¨(å‘ç°æœªè°ƒå…¥å†…å­˜)--è°ƒé¡µ(è°ƒå…¥çš„é¡µé¢å¯¹åº”çš„è¡¨é¡¹ä¼šç›´æ¥åŠ å…¥å¿«è¡¨)--æŸ¥å¿«è¡¨(å‘½ä¸­)--è®¿é—®ç›®æ ‡å†…å­˜å•å…ƒ</li></ul></li></ul></li></ul></li></ul><h2 id="é¡µé¢ç½®æ¢ç®—æ³•"><strong>3. é¡µé¢ç½®æ¢ç®—æ³•</strong></h2><ul><li>ç”¨<strong>é¡µé¢ç½®æ¢ç®—æ³•</strong>å†³å®šåº”è¯¥æ¢å‡ºå“ªä¸ªé¡µé¢ï¼Œé¡µé¢çš„æ¢å…¥ã€æ¢å‡ºéœ€è¦ç£ç›˜I/Oï¼Œä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ï¼Œå› æ­¤å¥½çš„é¡µé¢ç½®æ¢ç®—æ³•åº”è¯¥è¿½æ±‚<strong>æ›´å°‘çš„ç¼ºé¡µç‡</strong><ul><li>å³è®©æ¢å…¥ã€æ¢å‡ºçš„æ¬¡æ•°å°½å¯èƒ½åœ°å°‘ï¼Œå°½é‡å°†ä¸ç»å¸¸ä½¿ç”¨çš„é¡µé¢æ¢å‡º</li></ul></li></ul><h3 id="æœ€ä½³ç½®æ¢ç®—æ³•opt">3.1 <strong>æœ€ä½³ç½®æ¢ç®—æ³•ï¼ˆOPTï¼‰</strong></h3><ul><li><strong>æœ€ä½³ç½®æ¢ç®—æ³•ï¼ˆOPTï¼ŒOptimalï¼‰</strong>ï¼šæ¯æ¬¡é€‰æ‹©<strong>æ·˜æ±°çš„é¡µé¢</strong>å°†æ˜¯<strong>ä»¥åæ°¸ä¸ä½¿ç”¨</strong>ï¼Œæˆ–è€…<strong>åœ¨æœ€é•¿æ—¶é—´å†…ä¸å†è¢«è®¿é—®çš„é¡µé¢</strong>ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœ€ä½çš„ç¼ºé¡µç‡</li><li>æœ€ä½³ç½®æ¢ç®—æ³•å¯ä»¥ä¿è¯æœ€ä½çš„ç¼ºé¡µç‡ï¼Œä½†å®é™…ä¸Šï¼Œåªæœ‰åœ¨è¿›ç¨‹æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ‰èƒ½çŸ¥é“æ¥ä¸‹æ¥ä¼šè®¿é—®åˆ°çš„æ˜¯å“ªä¸ªé¡µé¢ã€‚æ“ä½œç³»ç»Ÿæ— æ³•æå‰é¢„åˆ¤é¡µé¢è®¿é—®åºåˆ—ã€‚å› æ­¤ï¼Œ<strong>æœ€ä½³ç½®æ¢ç®—æ³•æ˜¯æ— æ³•å®ç°çš„</strong></li></ul><h3 id="å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•fifo">3.2<strong>å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•ï¼ˆFIFOï¼‰</strong></h3><ul><li><strong>å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•ï¼ˆFIFOï¼‰</strong>ï¼šæ¯æ¬¡é€‰æ‹©<strong>æ·˜æ±°çš„é¡µé¢</strong>æ˜¯<strong>æœ€æ—©è¿›å…¥å†…å­˜çš„é¡µé¢</strong><ul><li>å®ç°æ–¹æ³•ï¼šæŠŠè°ƒå…¥å†…å­˜çš„é¡µé¢æ ¹æ®è°ƒå…¥çš„å…ˆåé¡ºåºæ’æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œéœ€è¦æ¢å‡ºé¡µé¢æ—¶é€‰æ‹©é˜Ÿå¤´é¡µé¢å³å¯ã€‚é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦å–å†³äºç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…äº†å¤šå°‘ä¸ªå†…å­˜å—</li></ul></li><li><strong>Belady å¼‚å¸¸</strong> --å½“ä¸ºè¿›ç¨‹åˆ†é…çš„ç‰©ç†å—æ•°å¢å¤§æ—¶ï¼Œç¼ºé¡µæ¬¡æ•°ä¸å‡åå¢çš„å¼‚å¸¸ç°è±¡<ul><li><strong>åªæœ‰ FIFO ç®—æ³•ä¼šäº§ç”Ÿ Beladyå¼‚å¸¸</strong>ã€‚å¦å¤–ï¼ŒFIFOç®—æ³•è™½ç„¶å®ç°ç®€å•ï¼Œä½†æ˜¯è¯¥ç®—æ³•ä¸è¿›ç¨‹å®é™…è¿è¡Œæ—¶çš„è§„å¾‹ä¸é€‚åº”ï¼Œå› ä¸ºå…ˆè¿›å…¥çš„é¡µé¢ä¹Ÿæœ‰å¯èƒ½æœ€ç»å¸¸è¢«è®¿é—®ã€‚å› æ­¤ï¼Œç®—æ³•æ€§èƒ½å·®</li></ul></li></ul><h3 id="æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³•lru">3.3<strong>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³•ï¼ˆLRUï¼‰</strong></h3><ul><li><p><strong>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³•ï¼ˆLRUï¼Œleast recentlyusedï¼‰</strong>ï¼šæ¯æ¬¡<strong>æ·˜æ±°çš„é¡µé¢</strong>æ˜¯<strong>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢</strong></p><ul><li>å®ç°æ–¹æ³•ï¼šèµ‹äºˆæ¯ä¸ªé¡µé¢å¯¹åº”çš„é¡µè¡¨é¡¹ä¸­ï¼Œ<strong>ç”¨è®¿é—®å­—æ®µè®°å½•è¯¥é¡µé¢è‡ªä¸Šæ¬¡è¢«è®¿é—®ä»¥æ¥æ‰€ç»å†çš„æ—¶é—´t</strong>ã€‚å½“éœ€è¦æ·˜æ±°ä¸€ä¸ªé¡µé¢æ—¶ï¼Œé€‰æ‹©ç°æœ‰é¡µé¢ä¸­t å€¼æœ€å¤§çš„ï¼Œå³æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢</li></ul></li><li><p>è¯¥ç®—æ³•çš„å®ç°éœ€è¦ä¸“é—¨çš„ç¡¬ä»¶æ”¯æŒï¼Œè™½ç„¶ç®—æ³•<strong>æ€§èƒ½å¥½</strong>ï¼Œä½†æ˜¯<strong>å®ç°å›°éš¾ï¼Œå¼€é”€å¤§</strong></p></li><li><p>åœ¨æ‰‹åŠ¨åšé¢˜æ—¶ï¼Œè‹¥éœ€è¦æ·˜æ±°é¡µé¢ï¼Œå¯ä»¥é€†å‘æ£€æŸ¥æ­¤æ—¶åœ¨å†…å­˜ä¸­çš„å‡ ä¸ªé¡µé¢å·ã€‚åœ¨<strong>é€†å‘æ‰«æè¿‡ç¨‹ä¸­æœ€åä¸€ä¸ªå‡ºç°çš„é¡µå·å°±æ˜¯è¦æ·˜æ±°çš„é¡µé¢</strong></p></li></ul><h3 id="æ—¶é’Ÿç½®æ¢ç®—æ³•clock">3.4<strong>æ—¶é’Ÿç½®æ¢ç®—æ³•ï¼ˆCLOCKï¼‰</strong></h3><ul><li><p>æœ€ä½³ç½®æ¢ç®—æ³• æ€§èƒ½æœ€å¥½ï¼Œä½†æ— æ³•å®ç°</p></li><li><p>å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³• å®ç°ç®€å•ï¼Œä½†ç®—æ³•æ€§èƒ½å·®</p></li><li><p>æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³•æ€§èƒ½å¥½ï¼Œæ˜¯æœ€æ¥è¿‘OPTç®—æ³•æ€§èƒ½çš„ï¼Œä½†æ˜¯å®ç°èµ·æ¥éœ€è¦ä¸“é—¨çš„ç¡¬ä»¶æ”¯æŒï¼Œç®—æ³•å¼€é”€å¤§</p></li><li><p><strong>æ—¶é’Ÿç½®æ¢ç®—æ³•</strong>æ˜¯ä¸€ç§æ€§èƒ½å’Œå¼€é”€è¾ƒå‡è¡¡çš„ç®—æ³•ï¼Œåˆç§°<strong>CLOCKç®—æ³•</strong>ï¼Œæˆ–<strong>æœ€è¿‘æœªç”¨ç®—æ³•ï¼ˆNRUï¼ŒNotRecently Usedï¼‰</strong></p><ul><li>å®ç°æ–¹æ³•ï¼šä¸ºæ¯ä¸ªé¡µé¢è®¾ç½®ä¸€ä¸ª<strong>è®¿é—®ä½</strong>ï¼Œå†å°†<strong>å†…å­˜ä¸­çš„é¡µé¢</strong>éƒ½é€šè¿‡é“¾æ¥æŒ‡é’ˆ<strong>é“¾æ¥æˆä¸€ä¸ªå¾ªç¯é˜Ÿåˆ—</strong>ã€‚å½“æŸé¡µè¢«è®¿é—®æ—¶ï¼Œå…¶è®¿é—®ä½ç½®ä¸º1ã€‚å½“éœ€è¦æ·˜æ±°ä¸€ä¸ªé¡µé¢æ—¶ï¼Œåªéœ€æ£€æŸ¥é¡µçš„è®¿é—®ä½ã€‚å¦‚æœæ˜¯0ï¼Œå°±é€‰æ‹©è¯¥é¡µæ¢å‡ºï¼›å¦‚æœæ˜¯1ï¼Œåˆ™å°†å®ƒç½®ä¸º0ï¼Œæš‚ä¸æ¢å‡ºï¼Œç»§ç»­æ£€æŸ¥ä¸‹ä¸€ä¸ªé¡µé¢ï¼Œè‹¥ç¬¬ä¸€è½®æ‰«æä¸­æ‰€æœ‰é¡µé¢éƒ½æ˜¯1ï¼Œåˆ™å°†è¿™äº›é¡µé¢çš„è®¿é—®ä½ä¾æ¬¡ç½®ä¸º0åï¼Œå†è¿›è¡Œç¬¬äºŒè½®æ‰«æï¼ˆç¬¬äºŒè½®æ‰«æä¸­ä¸€å®šä¼šæœ‰è®¿é—®ä½ä¸º0çš„é¡µé¢ï¼Œå› æ­¤<strong>ç®€å•çš„CLOCKç®—æ³•</strong>é€‰æ‹©ä¸€ä¸ªæ·˜æ±°é¡µé¢<strong>æœ€å¤šä¼šç»è¿‡ä¸¤è½®æ‰«æ</strong>ï¼‰</li></ul></li></ul><h3 id="æ”¹è¿›å‹çš„æ—¶é’Ÿç½®æ¢ç®—æ³•">3.5<strong>æ”¹è¿›å‹çš„æ—¶é’Ÿç½®æ¢ç®—æ³•</strong></h3><ul><li><p>ç®€å•çš„æ—¶é’Ÿç½®æ¢ç®—æ³•ä»…è€ƒè™‘åˆ°ä¸€ä¸ªé¡µé¢æœ€è¿‘æ˜¯å¦è¢«è®¿é—®è¿‡ã€‚äº‹å®ä¸Šï¼Œå¦‚æœè¢«æ·˜æ±°çš„é¡µé¢æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå°±ä¸éœ€è¦æ‰§è¡ŒI/Oæ“ä½œå†™å›å¤–å­˜ã€‚<strong>åªæœ‰è¢«æ·˜æ±°çš„é¡µé¢è¢«ä¿®æ”¹è¿‡æ—¶ï¼Œæ‰éœ€è¦å†™å›å¤–å­˜</strong></p></li><li><p>å› æ­¤ï¼Œé™¤äº†è€ƒè™‘ä¸€ä¸ªé¡µé¢æœ€è¿‘æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿè¿˜åº”è€ƒè™‘é¡µé¢æœ‰æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ã€‚<strong>åœ¨å…¶ä»–æ¡ä»¶éƒ½ç›¸åŒæ—¶ï¼Œåº”ä¼˜å…ˆæ·˜æ±°æ²¡æœ‰ä¿®æ”¹è¿‡çš„é¡µé¢</strong>ï¼Œé¿å…I/Oæ“ä½œã€‚è¿™å°±æ˜¯<strong>æ”¹è¿›å‹çš„æ—¶é’Ÿç½®æ¢ç®—æ³•</strong>çš„æ€æƒ³</p><ul><li><strong>ä¿®æ”¹ä½=0</strong>ï¼Œè¡¨ç¤º<strong>é¡µé¢æ²¡æœ‰è¢«ä¿®æ”¹è¿‡</strong>ï¼›<strong>ä¿®æ”¹ä½=1</strong>ï¼Œè¡¨ç¤º<strong>é¡µé¢è¢«ä¿®æ”¹è¿‡</strong></li><li>ä¸ºæ–¹ä¾¿è®¨è®ºï¼Œç”¨<strong>ï¼ˆè®¿é—®ä½ï¼Œä¿®æ”¹ä½ï¼‰</strong>çš„å½¢å¼è¡¨ç¤ºå„é¡µé¢çŠ¶æ€ã€‚å¦‚ï¼ˆ1ï¼Œ1ï¼‰è¡¨ç¤ºä¸€ä¸ªé¡µé¢è¿‘æœŸè¢«è®¿é—®è¿‡ï¼Œä¸”è¢«ä¿®æ”¹è¿‡</li><li><strong>å®ç°æ–¹æ³•</strong>:<ul><li>å°†æ‰€æœ‰å¯èƒ½è¢«ç½®æ¢çš„é¡µé¢æ’æˆä¸€ä¸ªå¾ªç¯é˜Ÿåˆ—</li><li>ç¬¬ä¸€è½®ï¼šä»å½“å‰ä½ç½®å¼€å§‹æ‰«æåˆ°ç¬¬ä¸€ä¸ªï¼ˆ0ï¼Œ0ï¼‰çš„å¸§ç”¨äºæ›¿æ¢<ul><li>æœ¬è½®æ‰«æä¸ä¿®æ”¹ä»»ä½•æ ‡å¿—ä½</li><li>ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šæœ€è¿‘æ²¡è®¿é—®ï¼Œä¸”æ²¡ä¿®æ”¹çš„é¡µé¢</li></ul></li><li>ç¬¬äºŒè½®ï¼šè‹¥ç¬¬ä¸€è½®æ‰«æå¤±è´¥ï¼Œåˆ™é‡æ–°æ‰«æï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªï¼ˆ0ï¼Œ1ï¼‰çš„å¸§ç”¨äºæ›¿æ¢<ul><li><strong>æœ¬è½®å°†æ‰€æœ‰æ‰«æè¿‡çš„å¸§è®¿é—®ä½è®¾ä¸º0</strong></li><li>ç¬¬äºŒä¼˜å…ˆçº§ï¼šæœ€è¿‘æ²¡è®¿é—®ï¼Œä½†ä¿®æ”¹è¿‡çš„é¡µé¢</li></ul></li><li>ç¬¬ä¸‰è½®ï¼šè‹¥ç¬¬äºŒè½®æ‰«æå¤±è´¥ï¼Œåˆ™é‡æ–°æ‰«æï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªï¼ˆ0ï¼Œ0ï¼‰çš„å¸§ç”¨äºæ›¿æ¢<ul><li>æœ¬è½®æ‰«æä¸ä¿®æ”¹ä»»ä½•æ ‡å¿—ä½</li><li>ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼šæœ€è¿‘è®¿é—®è¿‡ï¼Œä½†æ²¡ä¿®æ”¹çš„é¡µé¢</li></ul></li><li>ç¬¬å››è½®ï¼šè‹¥ç¬¬ä¸‰è½®æ‰«æå¤±è´¥ï¼Œåˆ™é‡æ–°æ‰«æï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªï¼ˆ0ï¼Œ1ï¼‰çš„å¸§ç”¨äºæ›¿æ¢<ul><li>ç¬¬å››ä¼˜å…ˆçº§ï¼šæœ€è¿‘è®¿é—®è¿‡ï¼Œä¸”ä¿®æ”¹è¿‡çš„é¡µé¢</li></ul></li><li>ç”±äºç¬¬äºŒè½®å·²å°†æ‰€æœ‰å¸§çš„è®¿é—®ä½è®¾ä¸º0ï¼Œå› æ­¤ç»è¿‡ç¬¬ä¸‰è½®ã€ç¬¬å››è½®æ‰«æä¸€å®šä¼šæœ‰ä¸€ä¸ªå¸§è¢«é€‰ä¸­ï¼Œå› æ­¤<strong>æ”¹è¿›å‹CLOCKç½®æ¢ç®—æ³•</strong>é€‰æ‹©ä¸€ä¸ªæ·˜æ±°é¡µé¢<strong>æœ€å¤šä¼šè¿›è¡Œå››è½®æ‰«æ</strong></li></ul></li></ul></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121194134402.png"></p><h2 id="é¡µé¢åˆ†é…ç­–ç•¥æŠ–åŠ¨å·¥ä½œé›†"><strong>4.é¡µé¢åˆ†é…ç­–ç•¥ã€æŠ–åŠ¨ã€å·¥ä½œé›†</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121195528729.png"></p><h3 id="é©»ç•™é›†">4.1 <strong>é©»ç•™é›†</strong></h3><ul><li><p><strong>æŒ‡è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ä¸­ç»™è¿›ç¨‹åˆ†é…çš„ç‰©ç†å—çš„é›†åˆ</strong></p></li><li><p>åœ¨é‡‡ç”¨äº†è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯çš„ç³»ç»Ÿä¸­ï¼Œ<strong>é©»ç•™é›†å¤§å°ä¸€èˆ¬å°äºè¿›ç¨‹çš„æ€»å¤§å°</strong></p></li><li><p>è‹¥é©»ç•™é›†å¤ªå°ï¼Œä¼šå¯¼è‡´ç¼ºé¡µé¢‘ç¹ï¼Œç³»ç»Ÿè¦èŠ±å¤§é‡çš„æ—¶é—´æ¥å¤„ç†ç¼ºé¡µï¼Œå®é™…ç”¨äºè¿›ç¨‹æ¨è¿›çš„æ—¶é—´å¾ˆå°‘</p></li><li><p>é©»ç•™é›†å¤ªå¤§ï¼Œåˆä¼šå¯¼è‡´å¤šé“ç¨‹åºå¹¶å‘åº¦ä¸‹é™ï¼Œèµ„æºåˆ©ç”¨ç‡é™ä½</p><ul><li>è€ƒè™‘ä¸€ä¸ªæç«¯æƒ…å†µï¼Œè‹¥æŸè¿›ç¨‹å…±æœ‰100ä¸ªé¡µé¢ï¼Œåˆ™è¯¥è¿›ç¨‹çš„é©»ç•™é›†å¤§å°ä¸º100æ—¶è¿›ç¨‹å¯ä»¥å…¨éƒ¨æ”¾å…¥å†…å­˜ï¼Œè¿è¡ŒæœŸé—´ä¸å¯èƒ½å†å‘ç”Ÿç¼ºé¡µã€‚è‹¥é©»ç•™é›†å¤§å°ä¸º1ï¼Œåˆ™è¿›ç¨‹è¿è¡ŒæœŸé—´å¿…å®šä¼šæé¢‘ç¹åœ°ç¼ºé¡µ</li></ul></li><li><p>æ‰€ä»¥åº”è¯¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„é©»ç•™é›†å¤§å°</p></li></ul><h3 id="é¡µé¢åˆ†é…ç½®æ¢ç­–ç•¥">4.2 <strong>é¡µé¢åˆ†é…ã€ç½®æ¢ç­–ç•¥</strong></h3><ul><li><p><strong>å›ºå®šåˆ†é…</strong>ï¼šæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ç»„å›ºå®šæ•°ç›®çš„ç‰©ç†å—ï¼Œåœ¨è¿›ç¨‹è¿è¡ŒæœŸé—´ä¸å†æ”¹å˜ã€‚å³ï¼Œ<strong>é©»ç•™é›†å¤§å°ä¸å˜</strong></p></li><li><p><strong>å¯å˜åˆ†é…</strong>ï¼šå…ˆä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°ç›®çš„ç‰©ç†å—ï¼Œåœ¨è¿›ç¨‹è¿è¡ŒæœŸé—´ï¼Œå¯æ ¹æ®æƒ…å†µåšé€‚å½“çš„å¢åŠ æˆ–å‡å°‘ã€‚å³ï¼Œ<strong>é©»ç•™é›†å¤§å°å¯å˜</strong></p></li><li><p><strong>å±€éƒ¨ç½®æ¢</strong>ï¼šå‘ç”Ÿç¼ºé¡µæ—¶åªèƒ½é€‰<strong>è¿›ç¨‹è‡ªå·±çš„ç‰©ç†å—</strong>è¿›è¡Œç½®æ¢</p></li><li><p><strong>å…¨å±€ç½®æ¢</strong>ï¼šå¯ä»¥å°†<strong>æ“ä½œç³»ç»Ÿä¿ç•™çš„ç©ºé—²ç‰©ç†å—</strong>åˆ†é…ç»™ç¼ºé¡µè¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥å°†<strong>åˆ«çš„è¿›ç¨‹æŒæœ‰çš„ç‰©ç†å—</strong>ç½®æ¢åˆ°å¤–å­˜ï¼Œå†åˆ†é…ç»™ç¼ºé¡µè¿›ç¨‹</p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121194614305.png"></p><ul><li><strong>å…¨å±€ç½®æ¢</strong>æ„å‘³ç€ä¸€ä¸ªè¿›ç¨‹æ‹¥æœ‰çš„ç‰©ç†å—æ•°é‡å¿…ç„¶ä¼šæ”¹å˜ï¼Œå› æ­¤<strong>ä¸å¯èƒ½æ˜¯å›ºå®šåˆ†é…</strong></li><li><strong>å›ºå®šåˆ†é…å±€éƒ¨ç½®æ¢</strong><ul><li>ç³»ç»Ÿä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°é‡çš„ç‰©ç†å—ï¼Œåœ¨æ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½ä¸æ”¹å˜ã€‚è‹¥è¿›ç¨‹åœ¨è¿è¡Œä¸­å‘ç”Ÿç¼ºé¡µï¼Œåˆ™åªèƒ½ä»è¯¥è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„é¡µé¢ä¸­é€‰å‡ºä¸€é¡µæ¢å‡ºï¼Œç„¶åå†è°ƒå…¥éœ€è¦çš„é¡µé¢</li><li>è¿™ç§ç­–ç•¥çš„ç¼ºç‚¹æ˜¯ï¼šå¾ˆéš¾åœ¨åˆšå¼€å§‹å°±ç¡®å®šåº”ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…å¤šå°‘ä¸ªç‰©ç†å—æ‰ç®—åˆç†</li><li>é‡‡ç”¨è¿™ç§ç­–ç•¥çš„ç³»ç»Ÿå¯ä»¥æ ¹æ®è¿›ç¨‹å¤§å°ã€ä¼˜å…ˆçº§ã€æˆ–æ˜¯æ ¹æ®ç¨‹åºå‘˜ç»™å‡ºçš„å‚æ•°æ¥ç¡®å®šä¸ºä¸€ä¸ªè¿›ç¨‹åˆ†é…çš„å†…å­˜å—æ•°</li></ul></li><li><strong>å¯å˜åˆ†é…å…¨å±€ç½®æ¢</strong><ul><li>åˆšå¼€å§‹ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°é‡çš„ç‰©ç†å—ã€‚æ“ä½œç³»ç»Ÿä¼šä¿æŒä¸€ä¸ªç©ºé—²ç‰©ç†å—é˜Ÿåˆ—ã€‚å½“æŸè¿›ç¨‹å‘ç”Ÿç¼ºé¡µæ—¶ï¼Œä»ç©ºé—²ç‰©ç†å—ä¸­å–å‡ºä¸€å—åˆ†é…ç»™è¯¥è¿›ç¨‹ï¼›è‹¥å·²æ— ç©ºé—²ç‰©ç†å—ï¼Œåˆ™å¯é€‰æ‹©ä¸€ä¸ª<strong>æœªé”å®šçš„é¡µé¢</strong>æ¢å‡ºå¤–å­˜ï¼Œå†å°†è¯¥ç‰©ç†å—åˆ†é…ç»™ç¼ºé¡µçš„è¿›ç¨‹<ul><li>ç³»ç»Ÿä¼šé”å®šä¸€äº›é¡µé¢ï¼Œè¿™äº›é¡µé¢ä¸­ çš„å†…å®¹ä¸èƒ½ç½®æ¢å‡ºå¤–å­˜ï¼ˆå¦‚ï¼šé‡è¦çš„å†…æ ¸æ•°æ®å¯ä»¥è®¾ä¸ºâ€œé”å®šâ€ï¼‰</li></ul></li><li>é‡‡ç”¨è¿™ç§ç­–ç•¥æ—¶ï¼Œåªè¦æŸè¿›ç¨‹å‘ç”Ÿç¼ºé¡µï¼Œéƒ½å°†è·å¾—æ–°çš„ç‰©ç†å—ï¼Œä»…å½“ç©ºé—²ç‰©ç†å—ç”¨å®Œæ—¶ï¼Œç³»ç»Ÿæ‰é€‰æ‹©ä¸€ä¸ªæœªé”å®šçš„é¡µé¢è°ƒå‡ºã€‚è¢«é€‰æ‹©è°ƒå‡ºçš„é¡µå¯èƒ½æ˜¯ç³»ç»Ÿä¸­ä»»ä½•ä¸€ä¸ªè¿›ç¨‹ä¸­çš„é¡µï¼Œå› æ­¤è¿™ä¸ªè¢«é€‰ä¸­çš„è¿›ç¨‹æ‹¥æœ‰çš„ç‰©ç†å—ä¼šå‡å°‘ï¼Œç¼ºé¡µç‡ä¼šå¢åŠ </li><li>å¯å˜åˆ†é…<strong>å…¨å±€</strong>ç½®æ¢ï¼šåªè¦ç¼ºé¡µå°±ç»™åˆ†é…æ–°ç‰©ç†å—</li></ul></li><li><strong>å¯å˜åˆ†é…å±€éƒ¨ç½®æ¢</strong><ul><li>åˆšå¼€å§‹ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€å®šæ•°é‡çš„ç‰©ç†å—ã€‚å½“æŸè¿›ç¨‹å‘ç”Ÿç¼ºé¡µæ—¶ï¼Œåªå…è®¸ä»è¯¥è¿›ç¨‹è‡ªå·±çš„ç‰©ç†å—ä¸­é€‰å‡ºä¸€ä¸ªè¿›è¡Œæ¢å‡ºå¤–å­˜ã€‚</li><li>å¦‚æœè¿›ç¨‹åœ¨è¿è¡Œä¸­é¢‘ç¹åœ°ç¼ºé¡µï¼Œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹å¤šåˆ†é…å‡ ä¸ªç‰©ç†å—ï¼Œç›´è‡³è¯¥è¿›ç¨‹ç¼ºé¡µç‡è¶‹åŠ¿é€‚å½“ç¨‹åº¦ï¼›åä¹‹ï¼Œå¦‚æœè¿›ç¨‹åœ¨è¿è¡Œä¸­ç¼ºé¡µç‡ç‰¹åˆ«ä½ï¼Œåˆ™å¯é€‚å½“å‡å°‘åˆ†é…ç»™è¯¥è¿›ç¨‹çš„ç‰©ç†å—</li><li>å¯å˜åˆ†é…<strong>å±€éƒ¨</strong>ç½®æ¢ï¼šè¦æ ¹æ®å‘ç”Ÿç¼ºé¡µçš„é¢‘ç‡æ¥åŠ¨æ€åœ°å¢åŠ æˆ–å‡å°‘è¿›ç¨‹çš„ç‰©ç†å—</li></ul></li></ul><h3 id="ä½•æ—¶è°ƒå…¥é¡µé¢">4.3 <strong>ä½•æ—¶è°ƒå…¥é¡µé¢</strong></h3><ul><li><strong>é¢„è°ƒé¡µç­–ç•¥</strong><ul><li>æ ¹æ®<strong>å±€éƒ¨æ€§åŸç†</strong>ï¼Œä¸€æ¬¡è°ƒå…¥è‹¥å¹²ä¸ªç›¸é‚»çš„é¡µé¢å¯èƒ½æ¯”ä¸€æ¬¡è°ƒå…¥ä¸€ä¸ªé¡µé¢æ›´é«˜æ•ˆ<ul><li>ä¸»è¦æŒ‡<strong>ç©ºé—´å±€éƒ¨æ€§</strong>ï¼Œå³ï¼šå¦‚æœå½“å‰è®¿é—®äº†æŸä¸ªå†…å­˜å•å…ƒï¼Œåœ¨ä¹‹åå¾ˆæœ‰å¯èƒ½ä¼šæ¥ç€è®¿é—®ä¸å…¶ç›¸é‚»çš„é‚£äº›å†…å­˜å•å…ƒ</li></ul></li><li>ä½†å¦‚æœæå‰è°ƒå…¥çš„é¡µé¢ä¸­å¤§å¤šæ•°éƒ½æ²¡è¢«è®¿é—®è¿‡ï¼Œåˆ™åˆæ˜¯ä½æ•ˆçš„ï¼Œå› æ­¤å¯ä»¥é¢„æµ‹ä¸ä¹…ä¹‹åå¯èƒ½è®¿é—®åˆ°çš„é¡µé¢ï¼Œå°†å®ƒä»¬é¢„å…ˆè°ƒå…¥å†…å­˜ï¼Œä½†ç›®å‰é¢„æµ‹æˆåŠŸç‡åªæœ‰50%å·¦å³</li><li>æ•…è¿™ç§ç­–ç•¥<strong>ä¸»è¦ç”¨äºè¿›ç¨‹çš„é¦–æ¬¡è°ƒå…¥</strong>ï¼Œç”±ç¨‹åºå‘˜æŒ‡å‡ºåº”è¯¥å…ˆè°ƒå…¥å“ªäº›éƒ¨åˆ†<ul><li>è¿è¡Œå‰è°ƒå…¥</li></ul></li></ul></li><li><strong>è¯·æ±‚è°ƒé¡µç­–ç•¥</strong><ul><li>è¿›ç¨‹<strong>åœ¨è¿è¡ŒæœŸé—´å‘ç°ç¼ºé¡µæ—¶æ‰å°†æ‰€ç¼ºé¡µé¢è°ƒå…¥å†…å­˜</strong><ul><li>è¿è¡Œæ—¶è°ƒå…¥</li></ul></li><li>ç”±è¿™ç§ç­–ç•¥è°ƒå…¥çš„é¡µé¢ä¸€å®šä¼šè¢«è®¿é—®åˆ°ï¼Œä½†ç”±äºæ¯æ¬¡åªèƒ½è°ƒå…¥ä¸€é¡µï¼Œè€Œæ¯æ¬¡è°ƒé¡µéƒ½è¦ç£ç›˜I/Oæ“ä½œï¼Œå› æ­¤I/Oå¼€é”€è¾ƒå¤§</li></ul></li></ul><h3 id="ä»ä½•å¤„è°ƒå…¥é¡µé¢">4.4 <strong>ä»ä½•å¤„è°ƒå…¥é¡µé¢</strong></h3><ul><li><p>ç³»ç»Ÿ<strong>æ‹¥æœ‰è¶³å¤Ÿçš„å¯¹æ¢åŒºç©ºé—´</strong>ï¼šé¡µé¢çš„è°ƒå…¥ã€è°ƒå‡ºéƒ½æ˜¯åœ¨<strong>å†…å­˜</strong>ä¸<strong>å¯¹æ¢åŒº</strong>ä¹‹é—´è¿›è¡Œï¼Œè¿™æ ·å¯ä»¥ä¿è¯é¡µé¢çš„è°ƒå…¥ã€è°ƒå‡ºé€Ÿåº¦å¾ˆå¿«ã€‚åœ¨è¿›ç¨‹è¿è¡Œå‰ï¼Œéœ€å°†è¿›ç¨‹ç›¸å…³çš„æ•°æ®ä»<strong>æ–‡ä»¶åŒº</strong>å¤åˆ¶åˆ°<strong>å¯¹æ¢åŒº</strong></p><ul><li><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121195220873.png"></li></ul></li><li><p>ç³»ç»Ÿ<strong>ç¼ºå°‘è¶³å¤Ÿçš„å¯¹æ¢åŒºç©ºé—´</strong>ï¼šå‡¡æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„æ•°æ®éƒ½ç›´æ¥ä»<strong>æ–‡ä»¶åŒº</strong>è°ƒå…¥ï¼Œç”±äºè¿™äº›é¡µé¢ä¸ä¼šè¢«ä¿®æ”¹ï¼Œå› æ­¤æ¢å‡ºæ—¶ä¸å¿…å†™å›ç£ç›˜ï¼Œä¸‹æ¬¡éœ€è¦æ—¶å†ä»<strong>æ–‡ä»¶åŒº</strong>è°ƒå…¥å³å¯ã€‚å¯¹äºå¯èƒ½è¢«ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œæ¢å‡ºæ—¶éœ€å†™å›ç£ç›˜<strong>å¯¹æ¢åŒº</strong>ï¼Œä¸‹æ¬¡éœ€è¦æ—¶å†ä»<strong>å¯¹æ¢åŒº</strong>è°ƒå…¥</p></li><li><p><strong>UNIXæ–¹å¼</strong>ï¼šè¿è¡Œä¹‹å‰è¿›ç¨‹æœ‰å…³çš„æ•°æ®å…¨éƒ¨æ”¾åœ¨<strong>æ–‡ä»¶åŒº</strong>ï¼Œæ•…æœªä½¿ç”¨è¿‡çš„é¡µé¢ï¼Œéƒ½å¯ä»<strong>æ–‡ä»¶åŒº</strong>è°ƒå…¥ã€‚è‹¥è¢«ä½¿ç”¨è¿‡çš„é¡µé¢éœ€è¦æ¢å‡ºï¼Œåˆ™å†™å›<strong>å¯¹æ¢åŒº</strong>ï¼Œä¸‹æ¬¡éœ€è¦æ—¶ä»<strong>å¯¹æ¢åŒº</strong>è°ƒå…¥</p></li></ul><h3 id="æŠ–åŠ¨é¢ ç°¸ç°è±¡">4.5 <strong>æŠ–åŠ¨ï¼ˆé¢ ç°¸ï¼‰ç°è±¡</strong></h3><ul><li><p>åˆšåˆšæ¢å‡ºçš„é¡µé¢é©¬ä¸Šåˆè¦æ¢å…¥å†…å­˜ï¼Œåˆšåˆšæ¢å…¥çš„é¡µé¢é©¬ä¸Šåˆè¦æ¢å‡ºå¤–å­˜ï¼Œè¿™ç§é¢‘ç¹çš„é¡µé¢è°ƒåº¦è¡Œä¸ºç§°ä¸º<strong>æŠ–åŠ¨(é¢ ç°¸)</strong></p></li><li><p>äº§ç”ŸæŠ–åŠ¨çš„ä¸»è¦åŸå› æ˜¯è¿›ç¨‹é¢‘ç¹è®¿é—®çš„é¡µé¢æ•°ç›®é«˜äºå¯ç”¨çš„ç‰©ç†å—æ•°ï¼ˆ<strong>åˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†å—ä¸å¤Ÿ</strong>ï¼‰</p><ul><li>ä¸ºè¿›ç¨‹åˆ†é…çš„ç‰©ç†å—å¤ªå°‘ï¼Œä¼šä½¿è¿›ç¨‹å‘ç”ŸæŠ–åŠ¨ç°è±¡ã€‚ä¸ºè¿›ç¨‹åˆ†é…çš„ç‰©ç†å—å¤ªå¤šï¼Œåˆä¼šé™ä½ç³»ç»Ÿæ•´ä½“çš„å¹¶å‘åº¦ï¼Œé™ä½æŸäº›èµ„æºçš„åˆ©ç”¨ç‡</li><li>ä¸ºäº†ç ”ç©¶ä¸ºåº”è¯¥ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…å¤šå°‘ä¸ªç‰©ç†å—ï¼ŒDenningæå‡ºäº†è¿›ç¨‹â€œ<strong>å·¥ä½œé›†</strong>â€çš„æ¦‚å¿µ</li></ul></li></ul><h3 id="å·¥ä½œé›†">4.6 <strong>å·¥ä½œé›†</strong></h3><ul><li><p><strong>é©»ç•™é›†</strong>ï¼šæŒ‡è¯·æ±‚åˆ†é¡µå­˜å‚¨ç®¡ç†ä¸­ç»™<strong>è¿›ç¨‹åˆ†é…çš„å†…å­˜å—çš„é›†åˆ</strong></p></li><li><p><strong>å·¥ä½œé›†</strong>ï¼šæŒ‡åœ¨æŸæ®µæ—¶é—´é—´éš”é‡Œï¼Œ<strong>è¿›ç¨‹å®é™…è®¿é—®é¡µé¢çš„é›†åˆ</strong></p></li><li><p><strong>å·¥ä½œé›†å¤§å°å¯èƒ½å°äºçª—å£å°ºå¯¸</strong>ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ç»Ÿè®¡è¿›ç¨‹çš„å·¥ä½œé›†å¤§å°ï¼Œæ ¹æ®å·¥ä½œé›†å¤§å°ç»™è¿›ç¨‹åˆ†é…è‹¥å¹²å†…å­˜å—</p></li><li><p>å¦‚ï¼šçª—å£å°ºå¯¸ä¸º5ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„ç›‘æµ‹å‘ç°æŸè¿›ç¨‹çš„å·¥ä½œé›†æœ€å¤§ä¸º3ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥è¿›ç¨‹æœ‰å¾ˆå¥½çš„å±€éƒ¨æ€§ï¼Œå¯ä»¥ç»™è¿™ä¸ªè¿›ç¨‹åˆ†é…3ä¸ªä»¥ä¸Šçš„å†…å­˜å—å³å¯æ»¡è¶³è¿›ç¨‹çš„è¿è¡Œéœ€è¦ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<strong>é©»ç•™é›†å¤§å°ä¸èƒ½å°äºå·¥ä½œé›†å¤§å°</strong>ï¼Œå¦åˆ™è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­å°†é¢‘ç¹ç¼ºé¡µ</p></li><li><p>æ‹“å±•ï¼š</p><ul><li>åŸºäºå±€éƒ¨æ€§åŸç†å¯çŸ¥ï¼Œè¿›ç¨‹åœ¨ä¸€æ®µæ—¶é—´å†…è®¿é—®çš„é¡µé¢ä¸ä¸ä¹…ä¹‹åä¼šè®¿é—®çš„é¡µé¢æ˜¯æœ‰ç›¸å…³æ€§çš„ã€‚å› æ­¤ï¼Œå¯ä»¥æ ¹æ®è¿›ç¨‹è¿‘æœŸè®¿é—®çš„é¡µé¢é›†åˆï¼ˆå·¥ä½œé›†ï¼‰æ¥è®¾è®¡ä¸€ç§é¡µé¢ç½®æ¢ç®—æ³•-- é€‰æ‹©ä¸€ä¸ªä¸åœ¨å·¥ä½œé›†ä¸­çš„é¡µé¢è¿›è¡Œæ·˜æ±°</li></ul></li></ul><h2 id="å†…å­˜æ˜ å°„æ–‡ä»¶"><strong>5. å†…å­˜æ˜ å°„æ–‡ä»¶</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121200153539.png"></p><h3 id="å†…å­˜æ˜ å°„æ–‡ä»¶memory-mapped-files">5.1<strong>å†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆMemory-Mapped Filesï¼‰</strong></h3><ul><li><strong>å†…å­˜æ˜ å°„æ–‡ä»¶</strong>ï¼šæ“ä½œç³»ç»Ÿå‘ä¸Šå±‚ç¨‹åºå‘˜æä¾›çš„åŠŸèƒ½ï¼ˆ<strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼‰<ul><li>æ–¹ä¾¿ç¨‹åºå‘˜è®¿é—®æ–‡ä»¶æ•°æ®<ul><li><strong>ä¼ ç»Ÿçš„æ–‡ä»¶è®¿é—®æ–¹å¼</strong></li></ul></li></ul></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121195856882.png"></p><ul><li><strong>å†…å­˜æ˜ å°„æ–‡ä»¶çš„è®¿é—®æ–¹å¼</strong></li><li><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121200028984.png"></li><li>æ–¹ä¾¿å¤šä¸ªè¿›ç¨‹å…±äº«åŒä¸€ä¸ªæ–‡ä»¶</li><li><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-2-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/image-20241121200139553.png"></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬ä¸‰ç«  å†…å­˜ç®¡ç†-3.1 å†…å­˜ç®¡ç†æ¦‚å¿µ</title>
    <link href="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/"/>
    <url>/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="å†…å­˜ç®¡ç†"><strong>3.1 å†…å­˜ç®¡ç†</strong></h1><h2 id="å†…å­˜çš„åŸºç¡€çŸ¥è¯†"><strong>1. å†…å­˜çš„åŸºç¡€çŸ¥è¯†</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121102355539.png"></p><h3 id="ä»€ä¹ˆæ˜¯å†…å­˜-æœ‰ä½•ä½œç”¨">1.1 <strong>ä»€ä¹ˆæ˜¯å†…å­˜?æœ‰ä½•ä½œç”¨?</strong></h3><ul><li><p>å†…å­˜å¯å­˜æ”¾æ•°æ®,ç¨‹åºæ‰§è¡Œå‰<strong>éœ€è¦å…ˆæ”¾åˆ°å†…å­˜ä¸­æ‰èƒ½è¢«CPUå¤„ç†</strong> --ç¼“å’ŒCPUä¸ç¡¬ç›˜ä¹‹é—´çš„é€Ÿåº¦çŸ›ç›¾</p></li><li><p>åœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿä¸­ä¼šæœ‰å¤šä¸ªç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šæœ‰å¤šä¸ªç¨‹åºçš„æ•°æ®éœ€è¦åŒæ—¶æ”¾åˆ°å†…å­˜ä¸­ã€‚é‚£ä¹ˆï¼Œ<strong>å¦‚ä½•åŒºåˆ†å„ä¸ªç¨‹åºçš„æ•°æ®æ˜¯æ”¾åœ¨ä»€ä¹ˆåœ°æ–¹çš„å‘¢?</strong></p><ul><li>æ–¹æ¡ˆï¼š<strong>ç»™å†…å­˜çš„å­˜å‚¨å•å…ƒç¼–åœ°å€</strong></li><li>å†…å­˜ä¸­ä¹Ÿæœ‰ä¸€ä¸ªä¸€ä¸ªçš„â€œå°æˆ¿é—´â€ï¼Œæ¯ä¸ªå°æˆ¿é—´å°±æ˜¯ä¸€ä¸ªâ€œ<strong>å­˜å‚¨å•å…ƒ</strong>"</li><li><strong>å†…å­˜åœ°å€</strong>ä»0å¼€å§‹ï¼Œæ¯ä¸ªåœ°å€å¯¹åº”ä¸€ä¸ªå­˜å‚¨å•å…ƒ</li><li>å¦‚æœè®¡ç®—æœºâ€œ<strong>æŒ‰å­—èŠ‚ç¼–å€</strong>"ï¼Œåˆ™æ¯ä¸ªå­˜å‚¨å•å…ƒå¤§å°ä¸º1å­—èŠ‚ï¼Œå³ 1Bï¼Œå³ 8ä¸ªäºŒè¿›åˆ¶ä½</li><li>å¦‚æœå­—é•¿ä¸º16ä½çš„è®¡ç®—æœºâ€œ<strong>æŒ‰å­—ç¼–å€</strong>â€ï¼Œåˆ™æ¯ä¸ªå­˜å‚¨å•å…ƒå¤§å°ä¸º1ä¸ªå­—ï¼Œæ¯ä¸ªå­—çš„å¤§å°ä¸º 16 ä¸ªäºŒè¿›åˆ¶ä½</li></ul></li><li><p>è¡¥å……çŸ¥è¯†:</p><ul><li>2<sup>10</sup> = 1Kï¼ˆåƒï¼‰</li><li>2<sup>20</sup> = 1Mï¼ˆå…†ï¼Œç™¾ä¸‡ï¼‰</li><li>2<sup>30</sup> = 1Gï¼ˆåäº¿ï¼Œåƒå…†ï¼‰</li><li>æ³¨:æœ‰çš„é¢˜ç›®ä¼šå‘Šè¯‰æˆ‘ä»¬å†…å­˜çš„å¤§å°ï¼Œè®©æˆ‘ä»¬ç¡®å®šåœ°å€é•¿åº¦åº”è¯¥æ˜¯å¤šå°‘ï¼ˆå³è¦å¤šå°‘ä¸ªäºŒè¿›åˆ¶ä½æ‰èƒ½è¡¨ç¤ºç›¸åº”æ•°ç›®çš„å­˜å‚¨å•å…ƒï¼‰<ul><li>Q: ä¸€å°æ‰‹æœº/ç”µè„‘ æœ‰ 4GB å†…å­˜ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</li><li>A: æ˜¯æŒ‡è¯¥å†…å­˜ä¸­å¯ä»¥å­˜æ”¾ 4 *2<sup>30</sup>ä¸ªå­—èŠ‚ã€‚å¦‚æœæ˜¯æŒ‰å­—èŠ‚ç¼–å€çš„è¯ï¼Œä¹Ÿå°±æ˜¯æœ‰ 4 * 2<sup>30</sup>= 2<sup>32</sup>ä¸ªâ€œå°æˆ¿é—´â€ï¼Œè¿™ä¹ˆå¤šâ€œå°æˆ¿é—´â€ï¼Œéœ€è¦2<sup>32</sup>ä¸ªåœ°å€æ‰èƒ½ä¸€ä¸€æ ‡è¯†ï¼Œæ‰€ä»¥åœ°å€éœ€è¦ç”¨ 32ä¸ªäºŒè¿›åˆ¶ä½æ¥è¡¨ç¤ºï¼ˆ0~2<sup>32</sup> -1ï¼‰</li></ul></li></ul></li></ul><h3 id="æŒ‡ä»¤çš„å·¥ä½œåŸç†">1.2 <strong>æŒ‡ä»¤çš„å·¥ä½œåŸç†</strong></h3><ul><li><p>æŒ‡ä»¤: æ“ä½œç  + è‹¥å¹²å‚æ•°(å¯èƒ½åŒ…å«åœ°å€å‚æ•°)</p></li><li><p>æŒ‡ä»¤çš„å·¥ä½œåŸºäºâ€œåœ°å€â€ã€‚æ¯ä¸ªåœ°å€å¯¹åº”ä¸€ä¸ªæ•°æ®çš„å­˜å‚¨å•å…ƒ</p></li><li><p>æˆ‘ä»¬å†™çš„ä»£ç è¦ç¿»è¯‘æˆCPUèƒ½è¯†åˆ«çš„æŒ‡ä»¤ã€‚è¿™äº›æŒ‡ä»¤ä¼šå‘Šè¯‰CPUåº”è¯¥å»å†…å­˜çš„å“ªä¸ªåœ°å€è¯»/å†™æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®åº”è¯¥åšä»€ä¹ˆæ ·çš„å¤„ç†</p></li></ul><h3 id="é€»è¾‘åœ°å€-vs-ç‰©ç†åœ°å€">1.3 <strong>é€»è¾‘åœ°å€ vsç‰©ç†åœ°å€</strong></h3><ul><li><p><strong>ç‰©ç†åœ°å€ï¼ˆç»å¯¹åœ°å€ï¼‰</strong>å³å†…å­˜ä¸­çš„å®é™…åœ°å€</p></li><li><p>ç¨‹åºç»è¿‡ç¼–è¯‘ã€é“¾æ¥åç”Ÿæˆçš„æŒ‡ä»¤ä¸­æŒ‡æ˜çš„æ˜¯<strong>é€»è¾‘åœ°å€ï¼ˆç›¸å¯¹åœ°å€ï¼‰</strong></p><ul><li>å³ï¼šç›¸å¯¹äºè¿›ç¨‹çš„èµ·å§‹åœ°å€è€Œè¨€çš„åœ°å€</li></ul></li></ul><h3 id="ä»å†™ç¨‹åºåˆ°ç¨‹åºè¿è¡Œ">1.4 <strong>ä»å†™ç¨‹åºåˆ°ç¨‹åºè¿è¡Œ</strong></h3><ul><li><p><strong>ç¼–è¯‘</strong>ï¼šç”±ç¼–è¯‘ç¨‹åºå°†ç”¨æˆ·æºä»£ç ç¼–è¯‘æˆ<strong>è‹¥å¹²ä¸ªç›®æ ‡æ¨¡å—</strong>ï¼ˆç¼–è¯‘å°±æ˜¯<strong>æŠŠé«˜çº§è¯­è¨€ç¿»è¯‘ä¸ºæœºå™¨è¯­è¨€</strong>ï¼‰</p></li><li><p><strong>é“¾æ¥</strong>ï¼šç”±é“¾æ¥ç¨‹åºå°†ç¼–è¯‘åå½¢æˆçš„ä¸€ç»„ç›®æ ‡æ¨¡å—ï¼Œä»¥åŠæ‰€éœ€åº“å‡½æ•°é“¾æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„<strong>è£…å…¥æ¨¡å—</strong></p></li><li><p><strong>è£…å…¥</strong>ï¼ˆè£…è½½ï¼‰ï¼šç”±è£…å…¥ç¨‹åº<strong>å°†è£…å…¥æ¨¡å—è£…å…¥å†…å­˜</strong>è¿è¡Œ</p></li></ul><h3 id="é“¾æ¥çš„ä¸‰ç§æ–¹å¼">1.5 <strong>é“¾æ¥çš„ä¸‰ç§æ–¹å¼</strong></h3><ul><li><strong>é™æ€é“¾æ¥</strong><ul><li><strong>åœ¨ç¨‹åºè¿è¡Œä¹‹å‰</strong>ï¼Œå…ˆå°†å„ç›®æ ‡æ¨¡å—åŠå®ƒä»¬æ‰€éœ€çš„åº“å‡½æ•°è¿æ¥æˆä¸€ä¸ª<strong>å®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè£…å…¥æ¨¡å—ï¼‰</strong>ï¼Œä¹‹åä¸å†æ‹†å¼€</li></ul></li><li><strong>è£…å…¥æ—¶åŠ¨æ€é“¾æ¥</strong><ul><li>å°†å„ç›®æ ‡æ¨¡å—è£…å…¥å†…å­˜æ—¶ï¼Œ<strong>è¾¹è£…å…¥è¾¹é“¾æ¥</strong>çš„é“¾æ¥æ–¹å¼</li></ul></li><li><strong>è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥</strong><ul><li><strong>åœ¨ç¨‹åºæ‰§è¡Œä¸­éœ€è¦è¯¥ç›®æ ‡æ¨¡å—æ—¶ï¼Œæ‰å¯¹å®ƒè¿›è¡Œé“¾æ¥</strong></li><li>å…¶ä¼˜ç‚¹æ˜¯ä¾¿äºä¿®æ”¹å’Œæ›´æ–°ï¼Œä¾¿äºå®ç°å¯¹ç›®æ ‡æ¨¡å—çš„å…±äº«</li></ul></li></ul><h3 id="è£…å…¥çš„ä¸‰ç§æ–¹å¼">1.6 <strong>è£…å…¥çš„ä¸‰ç§æ–¹å¼</strong></h3><ul><li><strong>ç»å¯¹è£…å…¥</strong><ul><li>åœ¨<strong>ç¼–è¯‘</strong>æ—¶ï¼Œå¦‚æœçŸ¥é“ç¨‹åºå°†æ”¾åˆ°å†…å­˜ä¸­çš„å“ªä¸ªä½ç½®ï¼Œç¼–è¯‘ç¨‹åº<strong>å°†äº§ç”Ÿç»å¯¹åœ°å€</strong>çš„ç›®æ ‡ä»£ç ï¼Œè£…å…¥ç¨‹åºæŒ‰ç…§è£…å…¥æ¨¡å—ä¸­çš„åœ°å€ï¼Œå°†ç¨‹åºå’Œæ•°æ®è£…å…¥å†…å­˜</li><li>ç»å¯¹è£…å…¥åªé€‚ç”¨äº<strong>å•é“ç¨‹åºç¯å¢ƒ</strong></li><li>ç¨‹åºä¸­ä½¿ç”¨çš„ç»å¯¹åœ°å€ï¼Œå¯åœ¨ç¼–è¯‘æˆ–æ±‡ç¼–æ—¶ç»™å‡ºï¼Œä¹Ÿå¯ç”±ç¨‹åºå‘˜ç›´æ¥èµ‹äºˆã€‚é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯ç¼–è¯‘æˆ–æ±‡ç¼–æ—¶å†è½¬æ¢ä¸ºç»å¯¹åœ°å€</li></ul></li><li><strong>é™æ€é‡å®šä½(å¯é‡å®šä½è£…å…¥)</strong><ul><li>ç¼–è¯‘ã€é“¾æ¥åçš„è£…å…¥æ¨¡å—çš„åœ°å€éƒ½æ˜¯ä»0å¼€å§‹çš„ï¼ŒæŒ‡ä»¤ä¸­ä½¿ç”¨çš„åœ°å€ã€æ•°æ®å­˜æ”¾çš„åœ°å€éƒ½æ˜¯ç›¸å¯¹äºèµ·å§‹åœ°å€è€Œè¨€çš„é€»è¾‘åœ°å€ã€‚å¯æ ¹æ®å†…å­˜çš„å½“å‰æƒ…å†µï¼Œå°†è£…å…¥æ¨¡å—è£…å…¥åˆ°å†…å­˜çš„é€‚å½“ä½ç½®ã€‚<strong>è£…å…¥</strong>æ—¶å¯¹åœ°å€è¿›è¡Œâ€œé‡å®šä½â€ï¼Œ<strong>å°†é€»è¾‘åœ°å€å˜æ¢ä¸ºç‰©ç†åœ°å€</strong>ï¼ˆåœ°å€å˜æ¢æ˜¯åœ¨è£…å…¥æ—¶ä¸€æ¬¡å®Œæˆçš„ï¼‰</li><li><strong>é™æ€é‡å®šä½</strong>çš„ç‰¹ç‚¹æ˜¯åœ¨ä¸€ä¸ª<strong>ä½œä¸šè£…å…¥å†…å­˜æ—¶ï¼Œå¿…é¡»åˆ†é…å…¶è¦æ±‚çš„å…¨éƒ¨å†…å­˜ç©ºé—´</strong>ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œå°±ä¸èƒ½è£…å…¥è¯¥ä½œä¸šã€‚ä½œä¸šä¸€æ—¦è¿›å…¥å†…å­˜åï¼Œåœ¨è¿è¡ŒæœŸé—´å°±ä¸èƒ½å†ç§»åŠ¨ï¼Œä¹Ÿä¸èƒ½å†ç”³è¯·å†…å­˜ç©ºé—´ã€‚</li></ul></li><li><strong>åŠ¨æ€é‡å®šä½(åŠ¨æ€è¿è¡Œæ—¶è½¬å…¥)</strong><ul><li>ç¼–è¯‘ã€é“¾æ¥åçš„è£…å…¥æ¨¡å—çš„åœ°å€éƒ½æ˜¯ä»0å¼€å§‹çš„ã€‚è£…å…¥ç¨‹åºæŠŠè£…å…¥æ¨¡å—è£…å…¥å†…å­˜åï¼Œå¹¶ä¸ä¼šç«‹å³æŠŠé€»è¾‘åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ï¼Œè€Œæ˜¯æŠŠ<strong>åœ°å€è½¬æ¢æ¨è¿Ÿåˆ°ç¨‹åºçœŸæ­£è¦æ‰§è¡Œæ—¶æ‰è¿›è¡Œ</strong>ã€‚å› æ­¤è£…å…¥å†…å­˜åæ‰€æœ‰çš„åœ°å€ä¾ç„¶æ˜¯é€»è¾‘åœ°å€ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¸€ä¸ª<strong>é‡å®šä½å¯„å­˜å™¨</strong>çš„æ”¯æŒ</li><li>é‡å®šä½å¯„å­˜å™¨ï¼šå­˜æ”¾è£…å…¥æ¨¡å—å­˜æ”¾çš„èµ·å§‹ä½ç½®</li></ul></li><li>é‡‡ç”¨<strong>åŠ¨æ€é‡å®šä½</strong>æ—¶<strong>å…è®¸ç¨‹åºåœ¨å†…å­˜ä¸­å‘ç”Ÿç§»åŠ¨</strong><ul><li>å¯å°†ç¨‹åºåˆ†é…åˆ°ä¸è¿ç»­çš„å­˜å‚¨åŒºä¸­</li><li>åœ¨ç¨‹åºè¿è¡Œå‰åªéœ€è£…å…¥å®ƒçš„éƒ¨åˆ†ä»£ç å³å¯æŠ•å…¥è¿è¡Œï¼Œç„¶ååœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œæ ¹æ®éœ€è¦åŠ¨æ€ç”³è¯·åˆ†é…å†…å­˜</li><li>ä¾¿äºç¨‹åºæ®µçš„å…±äº«ï¼Œå¯ä»¥å‘ç”¨æˆ·æä¾›ä¸€ä¸ªæ¯”å­˜å‚¨ç©ºé—´å¤§å¾—å¤šçš„åœ°å€ç©ºé—´</li></ul></li></ul><h2 id="å†…å­˜ç®¡ç†çš„æ¦‚å¿µ"><strong>2. å†…å­˜ç®¡ç†çš„æ¦‚å¿µ</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121103658059.png"></p><h3 id="å†…å­˜ç®¡ç†-1">2.1 <strong>å†…å­˜ç®¡ç†</strong></h3><ul><li>æ“ä½œç³»ç»Ÿä½œä¸ºç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…ï¼Œå½“ç„¶ä¹Ÿéœ€è¦å¯¹å†…å­˜è¿›è¡Œç®¡ç†ï¼Œè¦ç®¡äº›ä»€ä¹ˆå‘¢ï¼Ÿ<ul><li>æ“ä½œç³»ç»Ÿè´Ÿè´£<strong>å†…å­˜ç©ºé—´çš„åˆ†é…ä¸å›æ”¶</strong></li><li>æ“ä½œç³»ç»Ÿéœ€è¦æä¾›æŸç§æŠ€æœ¯ä»é€»è¾‘ä¸Š<strong>å¯¹å†…å­˜ç©ºé—´è¿›è¡Œæ‰©å……</strong></li><li>æ“ä½œç³»ç»Ÿéœ€è¦æä¾›<strong>åœ°å€è½¬æ¢åŠŸèƒ½</strong>ï¼Œè´Ÿè´£ç¨‹åºçš„é€»è¾‘åœ°å€ä¸ç‰©ç†åœ°å€çš„è½¬æ¢</li><li>æ“ä½œç³»ç»Ÿéœ€è¦æä¾›<strong>å†…å­˜ä¿æŠ¤</strong>åŠŸèƒ½ã€‚ä¿è¯å„è¿›ç¨‹åœ¨å„è‡ªå­˜å‚¨ç©ºé—´å†…è¿è¡Œï¼Œäº’ä¸å¹²æ‰°</li></ul></li></ul><h3 id="å†…å­˜ç©ºé—´çš„åˆ†é…ä¸å›æ”¶">2.2<strong>å†…å­˜ç©ºé—´çš„åˆ†é…ä¸å›æ”¶</strong></h3><ul><li><p>æ“ä½œç³»ç»Ÿè¦æ€ä¹ˆè®°å½•å“ªäº›å†…å­˜åŒºåŸŸå·²ç»è¢«åˆ†é…å‡ºå»äº†ï¼Œå“ªäº›åˆè¿˜ç©ºé—²ï¼Ÿ</p></li><li><p>å¾ˆå¤šä½ç½®éƒ½å¯ä»¥æ”¾ï¼Œé‚£åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ</p></li><li><p>å½“è¿›ç¨‹è¿è¡Œç»“æŸä¹‹åï¼Œå¦‚ä½•å°†è¿›ç¨‹å ç”¨çš„å†…å­˜ç©ºé—´å›æ”¶ï¼Ÿ</p></li><li><p><strong>åˆ†é…æ–¹å¼</strong>:</p><ul><li><strong>è¿ç»­åˆ†é…ç®¡ç†æ–¹å¼</strong><ul><li><strong>è¿ç»­åˆ†é…</strong>ï¼š<strong>æŒ‡ä¸ºç”¨æˆ·è¿›ç¨‹åˆ†é…çš„å¿…é¡»æ˜¯ä¸€ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´</strong></li><li><strong>å•ä¸€è¿ç»­åˆ†é…</strong>ã€<strong>å›ºå®šåˆ†åŒºåˆ†é…</strong>ã€<strong>åŠ¨æ€åˆ†åŒºåˆ†é…</strong></li></ul></li><li><strong>éè¿ç»­åˆ†é…ç®¡ç†æ–¹å¼</strong><ul><li><strong>éè¿ç»­åˆ†é…</strong>ï¼š<strong>æŒ‡ä¸ºç”¨æˆ·è¿›ç¨‹åˆ†é…çš„å¯ä»¥æ˜¯ä¸€äº›åˆ†æ•£çš„å†…å­˜ç©ºé—´</strong></li><li><strong>åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†</strong>ã€<strong>åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†</strong>ã€<strong>æ®µé¡µå¼å­˜å‚¨ç®¡ç†</strong></li></ul></li></ul></li></ul><h3 id="å†…å­˜ç©ºé—´çš„æ‰©å……">2.3 <strong>å†…å­˜ç©ºé—´çš„æ‰©å……</strong></h3><ul><li><p>å®ç°è™šæ‹Ÿæ€§</p></li><li><p>å®ç°å†…å­˜ç©ºé—´æ‰©å……çš„ç›¸å…³æŠ€æœ¯:<strong>è¦†ç›–æŠ€æœ¯</strong>ã€<strong>äº¤æ¢æŠ€æœ¯</strong>ã€<strong>è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯</strong></p></li></ul><h3 id="åœ°å€è½¬åŒ–">2.4 <strong>åœ°å€è½¬åŒ–</strong></h3><ul><li><p>ä¸ºäº†ä½¿ç¼–ç¨‹æ›´æ–¹ä¾¿ï¼Œç¨‹åºå‘˜å†™ç¨‹åºæ—¶åº”è¯¥åªéœ€è¦å…³æ³¨æŒ‡ä»¤ã€æ•°æ®çš„é€»è¾‘åœ°å€ã€‚è€Œ<strong>é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢</strong>ï¼ˆè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>åœ°å€é‡å®šä½</strong>ï¼‰åº”è¯¥ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£ï¼Œè¿™æ ·å°±ä¿è¯äº†ç¨‹åºå‘˜å†™ç¨‹åºæ—¶ä¸éœ€è¦å…³æ³¨ç‰©ç†å†…å­˜çš„å®é™…æƒ…å†µ</p></li><li><p>ä¸‰ç§è£…å…¥æ–¹å¼:</p><ul><li><strong>ç»å¯¹è£…å…¥</strong>: å•é“ç¨‹åºé˜¶æ®µï¼Œæ­¤æ—¶è¿˜æ²¡äº§ç”Ÿæ“ä½œç³»ç»Ÿ</li><li><strong>å¯é‡å®šä½è£…å…¥(é™æ€é‡å®šä½)</strong>:ç”¨äºæ—©æœŸçš„å¤šé“æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿ</li><li><strong>åŠ¨æ€è¿è¡Œæ—¶è½¬å…¥(åŠ¨æ€é‡å®šä½)</strong>: ç°ä»£æ“ä½œç³»ç»Ÿ</li></ul></li></ul><h3 id="å†…å­˜ä¿æŠ¤">2.5 <strong>å†…å­˜ä¿æŠ¤</strong></h3><ul><li>å†…å­˜ä¿æŠ¤å¯é‡‡å–ä¸¤ç§æ–¹æ³•ï¼š<ul><li>æ–¹æ³•ä¸€ï¼šåœ¨CPUä¸­è®¾ç½®ä¸€å¯¹<strong>ä¸Šã€ä¸‹é™å¯„å­˜å™¨</strong>ï¼Œå­˜æ”¾è¿›ç¨‹çš„ä¸Šã€ä¸‹é™åœ°å€ã€‚è¿›ç¨‹çš„æŒ‡ä»¤è¦è®¿é—®æŸä¸ªåœ°å€æ—¶ï¼ŒCPUæ£€æŸ¥æ˜¯å¦è¶Šç•Œ<ul><li>å‡è®¾è¿›ç¨‹1çš„é€»è¾‘åœ°å€ç©ºé—´ä¸º 0~179ï¼›å®é™…ç‰©ç†åœ°å€ç©ºé—´ä¸º 100~279</li><li>åˆ™ä¸Šé™å¯„å­˜å™¨å­˜æ”¾100, ä¸‹é™å¯„å­˜å™¨å­˜æ”¾279</li></ul></li><li>æ–¹æ³•äºŒï¼šé‡‡ç”¨<strong>é‡å®šä½å¯„å­˜å™¨</strong>ï¼ˆåˆç§°<strong>åŸºå€å¯„å­˜å™¨</strong>ï¼‰å’Œ<strong>ç•Œåœ°å€å¯„å­˜å™¨</strong>ï¼ˆåˆç§°<strong>é™é•¿å¯„å­˜å™¨</strong>ï¼‰è¿›è¡Œè¶Šç•Œæ£€æŸ¥ã€‚<strong>é‡å®šä½å¯„å­˜å™¨ä¸­å­˜æ”¾çš„æ˜¯è¿›ç¨‹çš„èµ·å§‹ç‰©ç†åœ°å€</strong>ã€‚<strong>ç•Œåœ°å€å¯„å­˜å™¨ä¸­å­˜æ”¾çš„æ˜¯è¿›ç¨‹çš„æœ€å¤§é€»è¾‘åœ°å€</strong><ul><li>å‡è®¾è¿›ç¨‹1çš„é€»è¾‘åœ°å€ç©ºé—´ä¸º 0~179ï¼›å®é™…ç‰©ç†åœ°å€ç©ºé—´ä¸º 100~279</li><li>åˆ™é‡å®šä½å¯„å­˜å™¨å­˜æ”¾100, ç•Œåœ°å€å¯„å­˜å™¨å­˜æ”¾179</li><li>CPUå…ˆé€šè¿‡ç•Œåœ°å€å¯„å­˜å™¨åˆ¤æ–­æŒ‡ä»¤æœ‰æ²¡æœ‰è¶Šç•Œ,æ²¡æœ‰çš„è¯å†é€šè¿‡é‡å®šä½å¯„å­˜å™¨è®¡ç®—ç‰©ç†åœ°å€</li></ul></li></ul></li></ul><h2 id="è¦†ç›–ä¸äº¤æ¢"><strong>3. è¦†ç›–ä¸äº¤æ¢</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121104512608.png"></p><h3 id="è¦†ç›–æŠ€æœ¯">3.1 <strong>è¦†ç›–æŠ€æœ¯</strong></h3><ul><li><p>æ—©æœŸçš„è®¡ç®—æœºå†…å­˜å¾ˆå°ï¼Œæ¯”å¦‚ IBM æ¨å‡ºçš„ç¬¬ä¸€å°PCæœºæœ€å¤§åªæ”¯æŒ 1MBå¤§å°çš„å†…å­˜ã€‚å› æ­¤ç»å¸¸ä¼šå‡ºç°å†…å­˜å¤§å°ä¸å¤Ÿçš„æƒ…å†µã€‚åæ¥äººä»¬å¼•å…¥äº†<strong>è¦†ç›–æŠ€æœ¯</strong>ï¼Œç”¨æ¥è§£å†³â€œç¨‹åºå¤§å°è¶…è¿‡ç‰©ç†å†…å­˜æ€»å’Œâ€çš„é—®é¢˜</p></li><li><p>è¦†ç›–æŠ€æœ¯çš„æ€æƒ³:</p><ul><li><strong>å°†ç¨‹åºåˆ†ä¸ºå¤šä¸ªæ®µ</strong>ï¼ˆå¤šä¸ªæ¨¡å—ï¼‰ï¼Œå¸¸ç”¨çš„æ®µå¸¸é©»å†…å­˜ï¼Œä¸å¸¸ç”¨çš„æ®µåœ¨éœ€è¦æ—¶è°ƒå…¥å†…å­˜</li><li>å†…å­˜ä¸­åˆ†ä¸ºä¸€ä¸ªâ€œ<strong>å›ºå®šåŒº</strong>â€å’Œè‹¥å¹²ä¸ªâ€œ<strong>è¦†ç›–åŒº</strong>â€</li><li>éœ€è¦å¸¸é©»å†…å­˜çš„æ®µæ”¾åœ¨â€œå›ºå®šåŒºâ€ä¸­ï¼Œè°ƒå…¥åå°±ä¸å†è°ƒå‡ºï¼ˆé™¤éè¿è¡Œç»“æŸï¼‰</li><li>ä¸å¸¸ç”¨çš„æ®µæ”¾åœ¨â€œè¦†ç›–åŒºâ€ï¼Œéœ€è¦ç”¨åˆ°æ—¶è°ƒå…¥å†…å­˜ï¼Œç”¨ä¸åˆ°æ—¶è°ƒå‡ºå†…å­˜</li><li>ç¨‹åºæŒ‰ç…§è‡ªèº«é€»è¾‘ç»“æ„ï¼Œè®©é‚£äº›ä¸å¯èƒ½åŒæ—¶è¢«è®¿é—®çš„ç¨‹åºæ®µå…±äº«åŒä¸€ä¸ªè¦†ç›–åŒº</li></ul></li><li><p>ç¼ºç‚¹:</p><ul><li>å¿…é¡»ç”±ç¨‹åºå‘˜å£°æ˜è¦†ç›–ç»“æ„ï¼Œæ“ä½œç³»ç»Ÿå®Œæˆè‡ªåŠ¨è¦†ç›–ã€‚å¯¹ç”¨æˆ·ä¸é€æ˜ï¼Œå¢åŠ äº†ç”¨æˆ·ç¼–ç¨‹è´Ÿæ‹…</li><li>è¦†ç›–æŠ€æœ¯<strong>åªç”¨äºæ—©æœŸçš„æ“ä½œç³»ç»Ÿä¸­</strong>ï¼Œç°åœ¨å·²æˆä¸ºå†å²</li></ul></li></ul><h3 id="äº¤æ¢å¯¹æ¢æŠ€æœ¯">3.2 <strong>äº¤æ¢(å¯¹æ¢)æŠ€æœ¯</strong></h3><ul><li><p>å†…å­˜ç©ºé—´ç´§å¼ æ—¶ï¼Œç³»ç»Ÿå°†<strong>å†…å­˜</strong>ä¸­æŸäº›<strong>è¿›ç¨‹</strong>æš‚æ—¶<strong>æ¢å‡ºå¤–å­˜</strong>ï¼ŒæŠŠ<strong>å¤–å­˜</strong>ä¸­æŸäº›å·²å…·å¤‡è¿è¡Œæ¡ä»¶çš„<strong>è¿›ç¨‹æ¢å…¥å†…å­˜</strong>ï¼ˆè¿›ç¨‹åœ¨å†…å­˜ä¸ç£ç›˜é—´åŠ¨æ€è°ƒåº¦ï¼‰</p></li><li><p><strong>ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰</strong>ï¼Œå°±æ˜¯è¦å†³å®šå°†å“ªä¸ªå¤„äºæŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹é‡æ–°è°ƒå…¥å†…å­˜</p></li><li><p><strong>æ€è€ƒ</strong>:</p><ul><li>åº”è¯¥åœ¨å¤–å­˜ï¼ˆç£ç›˜ï¼‰çš„ä»€ä¹ˆä½ç½®ä¿å­˜è¢«æ¢å‡ºçš„è¿›ç¨‹ï¼Ÿ<ul><li>å…·æœ‰å¯¹æ¢åŠŸèƒ½çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸æŠŠ<strong>ç£ç›˜ç©ºé—´</strong>åˆ†ä¸º<strong>æ–‡ä»¶åŒº</strong>å’Œ<strong>å¯¹æ¢åŒº</strong>ä¸¤éƒ¨åˆ†</li><li><strong>æ–‡ä»¶åŒº</strong>ä¸»è¦ç”¨äºå­˜æ”¾æ–‡ä»¶ï¼Œä¸»è¦è¿½æ±‚å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡ï¼Œå› æ­¤å¯¹æ–‡ä»¶åŒºç©ºé—´çš„ç®¡ç†é‡‡ç”¨<strong>ç¦»æ•£åˆ†é…æ–¹å¼</strong></li><li><strong>å¯¹æ¢åŒº</strong>ç©ºé—´åªå ç£ç›˜ç©ºé—´çš„å°éƒ¨åˆ†ï¼Œ<strong>è¢«æ¢å‡ºçš„è¿›ç¨‹æ•°æ®å°±å­˜æ”¾åœ¨å¯¹æ¢åŒº</strong>ã€‚ç”±äºå¯¹æ¢çš„é€Ÿåº¦ç›´æ¥å½±å“åˆ°ç³»ç»Ÿçš„æ•´ä½“é€Ÿåº¦ï¼Œå› æ­¤å¯¹æ¢åŒºç©ºé—´çš„ç®¡ç†ä¸»è¦è¿½æ±‚æ¢å…¥æ¢å‡ºé€Ÿåº¦ï¼Œå› æ­¤é€šå¸¸å¯¹æ¢åŒºé‡‡ç”¨<strong>è¿ç»­åˆ†é…æ–¹å¼</strong>(å­¦è¿‡<strong>æ–‡ä»¶ç®¡ç†</strong>ç« èŠ‚åå³å¯ç†è§£)ï¼Œæ€»ä¹‹ï¼Œ<strong>å¯¹æ¢åŒºçš„I/Oé€Ÿåº¦æ¯”æ–‡ä»¶åŒºçš„æ›´å¿«</strong></li></ul></li><li>ä»€ä¹ˆæ—¶å€™åº”è¯¥äº¤æ¢ï¼Ÿ<ul><li>äº¤æ¢é€šå¸¸åœ¨è®¸å¤šè¿›ç¨‹è¿è¡Œä¸”å†…å­˜åƒç´§æ—¶è¿›è¡Œï¼Œè€Œç³»ç»Ÿè´Ÿè·é™ä½å°±æš‚åœ</li><li>ä¾‹å¦‚ï¼šåœ¨å‘ç°è®¸å¤šè¿›ç¨‹è¿è¡Œæ—¶ç»å¸¸å‘ç”Ÿç¼ºé¡µï¼Œå°±è¯´æ˜å†…å­˜ç´§å¼ ï¼Œæ­¤æ—¶å¯ä»¥æ¢å‡ºä¸€äº›è¿›ç¨‹ï¼›å¦‚æœç¼ºé¡µç‡æ˜æ˜¾ä¸‹é™ï¼Œå°±å¯ä»¥æš‚åœæ¢å‡º</li></ul></li><li>åº”è¯¥æ¢å‡ºå“ªäº›è¿›ç¨‹ï¼Ÿ<ul><li>å¯ä¼˜å…ˆæ¢å‡ºé˜»å¡è¿›ç¨‹ï¼›å¯æ¢å‡ºä¼˜å…ˆçº§ä½çš„è¿›ç¨‹ï¼›</li><li>ä¸ºäº†é˜²æ­¢ä¼˜å…ˆçº§ä½çš„è¿›ç¨‹åœ¨è¢«è°ƒå…¥å†…å­˜åå¾ˆå¿«åˆè¢«æ¢å‡ºï¼Œæœ‰çš„ç³»ç»Ÿè¿˜ä¼šè€ƒè™‘è¿›ç¨‹åœ¨å†…å­˜çš„é©»ç•™æ—¶é—´â€¦</li></ul></li></ul></li><li><p><strong>æ³¨æ„</strong>ï¼š<strong>PCBä¼šå¸¸é©»å†…å­˜</strong>ï¼Œä¸ä¼šè¢«æ¢å‡ºå¤–å­˜</p></li></ul><h2 id="è¿ç»­åˆ†é…ç®¡ç†æ–¹å¼"><strong>4. è¿ç»­åˆ†é…ç®¡ç†æ–¹å¼</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121110518884.png"></p><ul><li><strong>è¿ç»­åˆ†é…</strong>ï¼š<strong>æŒ‡ä¸ºç”¨æˆ·è¿›ç¨‹åˆ†é…çš„å¿…é¡»æ˜¯ä¸€ä¸ªè¿ç»­çš„å†…å­˜ç©ºé—´</strong></li></ul><h3 id="å•ä¸€è¿ç»­åˆ†é…">4.1 <strong>å•ä¸€è¿ç»­åˆ†é…</strong></h3><ul><li><p>åœ¨<strong>å•ä¸€è¿ç»­åˆ†é…æ–¹å¼</strong>ä¸­ï¼Œ<strong>å†…å­˜</strong>è¢«åˆ†ä¸º<strong>ç³»ç»ŸåŒº</strong>å’Œ<strong>ç”¨æˆ·åŒº</strong>ã€‚ç³»ç»ŸåŒºé€šå¸¸ä½äºå†…å­˜çš„ä½åœ°å€éƒ¨åˆ†ï¼Œç”¨äºå­˜æ”¾æ“ä½œç³»ç»Ÿç›¸å…³æ•°æ®ï¼›ç”¨æˆ·åŒºç”¨äºå­˜æ”¾ç”¨æˆ·è¿›ç¨‹ç›¸å…³æ•°æ®ã€‚å†…å­˜ä¸­åªèƒ½æœ‰ä¸€é“ç”¨æˆ·ç¨‹åºï¼Œ<strong>ç”¨æˆ·ç¨‹åºç‹¬å æ•´ä¸ªç”¨æˆ·åŒºç©ºé—´</strong></p></li><li><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼›<strong>æ— å¤–éƒ¨ç¢ç‰‡</strong>ï¼›å¯ä»¥é‡‡ç”¨è¦†ç›–æŠ€æœ¯æ‰©å……å†…å­˜ï¼›ä¸ä¸€å®šéœ€è¦é‡‡å–å†…å­˜ä¿æŠ¤ï¼ˆegï¼šæ—©æœŸçš„PC æ“ä½œç³»ç»Ÿ MS-DOSï¼‰</p></li><li><p>ç¼ºç‚¹ï¼šåªèƒ½ç”¨äºå•ç”¨æˆ·ã€å•ä»»åŠ¡çš„æ“ä½œç³»ç»Ÿä¸­ï¼›<strong>æœ‰å†…éƒ¨ç¢ç‰‡</strong>ï¼›å­˜å‚¨å™¨åˆ©ç”¨ç‡æä½</p><ul><li><strong>å†…éƒ¨ç¢ç‰‡</strong>ï¼šåˆ†é…ç»™æŸè¿›ç¨‹çš„å†…å­˜åŒºåŸŸä¸­ï¼Œå¦‚æœæœ‰äº›éƒ¨åˆ†æ²¡æœ‰ç”¨ä¸Š</li><li><strong>å¤–éƒ¨ç¢ç‰‡</strong>ï¼šå†…å­˜ä¸­çš„æŸäº›ç©ºé—²åˆ†åŒºç”±äºå¤ªå°è€Œéš¾ä»¥åˆ©ç”¨</li></ul></li></ul><h2 id="å›ºå®šåˆ†åŒºåˆ†é…">4.2 <strong>å›ºå®šåˆ†åŒºåˆ†é…</strong></h2><ul><li><p>20ä¸–çºª60å¹´ä»£å‡ºç°äº†æ”¯æŒå¤šé“ç¨‹åºçš„ç³»ç»Ÿï¼Œä¸ºäº†èƒ½åœ¨å†…å­˜ä¸­è£…å…¥å¤šé“ç¨‹åºï¼Œä¸”è¿™äº›ç¨‹åºä¹‹é—´åˆä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œäºæ˜¯å°†æ•´ä¸ª<strong>ç”¨æˆ·ç©ºé—´</strong>åˆ’åˆ†ä¸º<strong>è‹¥å¹²ä¸ªå›ºå®šå¤§å°çš„åˆ†åŒº</strong>ï¼Œåœ¨<strong>æ¯ä¸ªåˆ†åŒºä¸­åªè£…å…¥ä¸€é“ä½œä¸š</strong>ï¼Œè¿™æ ·å°±å½¢æˆäº†æœ€æ—©çš„ã€æœ€ç®€å•çš„ä¸€ç§å¯è¿è¡Œå¤šé“ç¨‹åºçš„å†…å­˜ç®¡ç†æ–¹å¼</p></li><li><p><strong>åˆ†åŒºå¤§å°ç›¸ç­‰</strong></p><ul><li>ç¼ºä¹çµæ´»æ€§ï¼Œä½†æ˜¯å¾ˆé€‚åˆç”¨äºç”¨ä¸€å°è®¡ç®—æœºæ§åˆ¶å¤šä¸ªç›¸åŒå¯¹è±¡çš„åœºåˆï¼ˆæ¯”å¦‚ï¼šé’¢é“å‚æœ‰nä¸ªç›¸åŒçš„ç‚¼é’¢ç‚‰ï¼Œå°±å¯æŠŠå†…å­˜åˆ†ä¸ºnä¸ªå¤§å°ç›¸ç­‰çš„åŒºåŸŸå­˜æ”¾nä¸ªç‚¼é’¢ç‚‰æ§åˆ¶ç¨‹åºï¼‰</li></ul></li><li><p><strong>åˆ†åŒºå¤§å°ä¸ç­‰</strong></p><ul><li>å¢åŠ äº†çµæ´»æ€§ï¼Œå¯ä»¥æ»¡è¶³ä¸åŒå¤§å°çš„è¿›ç¨‹éœ€æ±‚ã€‚æ ¹æ®å¸¸åœ¨ç³»ç»Ÿä¸­è¿è¡Œçš„ä½œä¸šå¤§å°æƒ…å†µè¿›è¡Œåˆ’åˆ†</li><li>æ¯”å¦‚ï¼šåˆ’åˆ†å¤šä¸ªå°åˆ†åŒºã€é€‚é‡ä¸­ç­‰åˆ†åŒºã€å°‘é‡å¤§åˆ†åŒº</li></ul></li><li><p>æ“ä½œç³»ç»Ÿéœ€è¦å»ºç«‹ä¸€ä¸ªæ•°æ®ç»“æ„ --<strong>åˆ†åŒºè¯´æ˜è¡¨</strong>ï¼Œæ¥å®ç°å„ä¸ªåˆ†åŒºçš„åˆ†é…ä¸å›æ”¶ã€‚æ¯ä¸ªè¡¨é¡¹å¯¹åº”ä¸€ä¸ªåˆ†åŒºï¼Œé€šå¸¸æŒ‰åˆ†åŒºå¤§å°æ’åˆ—ã€‚æ¯ä¸ªè¡¨é¡¹åŒ…æ‹¬å¯¹åº”åˆ†åŒºçš„å¤§å°ã€èµ·å§‹åœ°å€ã€çŠ¶æ€ï¼ˆæ˜¯å¦å·²åˆ†é…ï¼‰ã€‚å½“æŸç”¨æˆ·ç¨‹åºè¦è£…å…¥å†…å­˜æ—¶ï¼Œç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç¨‹åºæ ¹æ®ç”¨æˆ·ç¨‹åºå¤§å°æ£€ç´¢è¯¥è¡¨ï¼Œä»ä¸­æ‰¾åˆ°ä¸€ä¸ªèƒ½æ»¡è¶³å¤§å°çš„ã€æœªåˆ†é…çš„åˆ†åŒºï¼Œå°†ä¹‹åˆ†é…ç»™è¯¥ç¨‹åºï¼Œç„¶åä¿®æ”¹çŠ¶æ€ä¸ºâ€œå·²åˆ†é…â€</p></li><li><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œ<strong>æ— å¤–éƒ¨ç¢ç‰‡</strong></p></li><li><p>ç¼ºç‚¹ï¼š</p><ul><li><ol type="a"><li>å½“ç”¨æˆ·ç¨‹åºå¤ªå¤§æ—¶ï¼Œå¯èƒ½æ‰€æœ‰çš„åˆ†åŒºéƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ­¤æ—¶ä¸å¾—ä¸é‡‡ç”¨è¦†ç›–æŠ€æœ¯æ¥è§£å†³ï¼Œä½†è¿™åˆä¼šé™ä½æ€§èƒ½</li></ol></li><li><ol start="2" type="a"><li><strong>ä¼šäº§ç”Ÿå†…éƒ¨ç¢ç‰‡</strong>ï¼Œå†…å­˜åˆ©ç”¨ç‡ä½</li></ol></li></ul></li></ul><h3 id="åŠ¨æ€åˆ†åŒºåˆ†é…å¯å˜åˆ†åŒºåˆ†é…">4.3<strong>åŠ¨æ€åˆ†åŒºåˆ†é…</strong>(å¯å˜åˆ†åŒºåˆ†é…)</h3><ul><li><p>è¿™ç§åˆ†é…æ–¹å¼<strong>ä¸ä¼šé¢„å…ˆåˆ’åˆ†å†…å­˜åˆ†åŒº</strong>ï¼Œè€Œæ˜¯<strong>åœ¨è¿›ç¨‹è£…å…¥å†…å­˜æ—¶ï¼Œæ ¹æ®è¿›ç¨‹çš„å¤§å°åŠ¨æ€åœ°å»ºç«‹åˆ†åŒºï¼Œå¹¶ä½¿åˆ†åŒºçš„å¤§å°æ­£å¥½é€‚åˆè¿›ç¨‹çš„éœ€è¦</strong>ã€‚å› æ­¤ç³»ç»Ÿåˆ†åŒºçš„å¤§å°å’Œæ•°ç›®æ˜¯å¯å˜çš„</p></li><li><p><strong>æ€è€ƒ</strong>:</p><ul><li>ç³»ç»Ÿè¦ç”¨ä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„è®°å½•å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Ÿ<ul><li>å¯ä»¥é€šè¿‡<strong>ç©ºé—²åˆ†åŒºè¡¨</strong>æˆ–<strong>ç©ºé—²åˆ†åŒºé“¾</strong>è¿™ä¸¤ç§æ•°æ®ç»“æ„è®°å½•å†…å­˜ä½¿ç”¨æƒ…å†µ</li><li><strong>ç©ºé—²åˆ†åŒºè¡¨</strong>:æ¯ä¸ªç©ºé—²åˆ†åŒºå¯¹åº”ä¸€ä¸ªè¡¨é¡¹ã€‚è¡¨é¡¹ä¸­åŒ…å«åˆ†åŒºå·ã€åˆ†åŒºå¤§å°ã€åˆ†åŒºèµ·å§‹åœ°å€ç­‰ä¿¡æ¯</li><li><strong>ç©ºé—²åˆ†åŒºé“¾</strong>:æ¯ä¸ªåˆ†åŒºçš„èµ·å§‹éƒ¨åˆ†å’Œæœ«å°¾éƒ¨åˆ†åˆ†åˆ«è®¾ç½®å‰å‘æŒ‡é’ˆå’Œåå‘æŒ‡é’ˆã€‚èµ·å§‹éƒ¨åˆ†å¤„è¿˜å¯è®°å½•åˆ†åŒºå¤§å°ç­‰ä¿¡æ¯</li></ul></li><li>å½“å¾ˆå¤šä¸ªç©ºé—²åˆ†åŒºéƒ½èƒ½æ»¡è¶³éœ€æ±‚æ—¶ï¼Œåº”è¯¥é€‰æ‹©å“ªä¸ªåˆ†åŒºè¿›è¡Œåˆ†é…ï¼Ÿ<ul><li>æŠŠä¸€ä¸ªæ–°ä½œä¸šè£…å…¥å†…å­˜æ—¶ï¼Œé¡»æŒ‰ç…§ä¸€å®šçš„<strong>åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•</strong>ï¼Œä»ç©ºé—²åˆ†åŒºè¡¨ï¼ˆæˆ–ç©ºé—²åˆ†åŒºé“¾ï¼‰ä¸­é€‰å‡ºä¸€ä¸ªåˆ†åŒºåˆ†é…ç»™è¯¥ä½œä¸š</li><li>ç”±äºåˆ†é…ç®—æ³•ç®—æ³•å¯¹ç³»ç»Ÿæ€§èƒ½æœ‰å¾ˆå¤§çš„å½±å“ï¼Œå› æ­¤äººä»¬å¯¹å®ƒè¿›è¡Œäº†å¹¿æ³›çš„ç ”ç©¶</li></ul></li><li>å¦‚ä½•è¿›è¡Œåˆ†åŒºçš„åˆ†é…ä¸å›æ”¶æ“ä½œï¼Ÿ<ul><li>å‡è®¾ç³»ç»Ÿé‡‡ç”¨çš„æ•°æ®ç»“æ„æ˜¯â€œç©ºé—²åˆ†åŒºè¡¨â€<ul><li>åˆ†é…<ul><li>å¯ä»¥æ ¹æ®å®é™…åˆ†é…æƒ…å†µ,å¯¹ç©ºé—²åˆ†åŒºè¡¨è¿›è¡Œåˆ†åŒºå¤§å°ä¿®æ”¹ã€åˆ é™¤è¡¨é¡¹ç­‰æ“ä½œ</li></ul></li><li>å›æ”¶<ul><li>å¯ä»¥æ ¹æ®å®é™…å›æ”¶æƒ…å†µ,å¯¹ç©ºé—²åˆ†åŒºè¡¨è¿›è¡Œåˆå¹¶è¡¨é¡¹(å›æ”¶çš„åŒºåŸŸæœ‰ç›¸é‚»çš„ç©ºç™½è¡¨é¡¹)ã€æ–°å¢è¡¨é¡¹ç­‰æ“ä½œ</li></ul></li><li>æ³¨ï¼šå„è¡¨é¡¹çš„é¡ºåºä¸ä¸€å®šæŒ‰ç…§åœ°å€é€’å¢é¡ºåºæ’åˆ—ï¼Œå…·ä½“çš„æ’åˆ—æ–¹å¼éœ€è¦ä¾æ®åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•æ¥ç¡®å®š</li></ul></li></ul></li></ul></li><li><p><strong>åŠ¨æ€åˆ†åŒºåˆ†é…æ²¡æœ‰å†…éƒ¨ç¢ç‰‡ï¼Œä½†æ˜¯æœ‰å¤–éƒ¨ç¢ç‰‡</strong></p><ul><li>å¦‚æœå†…å­˜ä¸­ç©ºé—²ç©ºé—´çš„æ€»å’Œæœ¬æ¥å¯ä»¥æ»¡è¶³æŸè¿›ç¨‹çš„è¦æ±‚ï¼Œä½†ç”±äºè¿›ç¨‹éœ€è¦çš„æ˜¯ä¸€æ•´å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™äº›</li><li>â€œç¢ç‰‡â€ä¸èƒ½æ»¡è¶³è¿›ç¨‹çš„éœ€æ±‚ã€‚å¯ä»¥é€šè¿‡<strong>ç´§å‡‘ï¼ˆæ‹¼å‡‘ï¼ŒCompactionï¼‰æŠ€æœ¯æ¥è§£å†³å¤–éƒ¨ç¢ç‰‡</strong></li><li>"ç´§å‡‘"ä¹‹åéœ€è¦æŠŠè¿›ç¨‹çš„èµ·å§‹åœ°å€ä¿®æ”¹,<strong>è¿›ç¨‹çš„èµ·å§‹åœ°å€</strong>å­˜æ”¾åœ¨<strong>PCB</strong>å½“ä¸­,è¿›ç¨‹ä¸ŠCPUè¿è¡Œä¹‹å‰,ä¼šæŠŠè¿›ç¨‹çš„èµ·å§‹åœ°å€æ”¾åˆ°<strong>é‡å®šä½å¯„å­˜å™¨</strong>é‡Œ</li></ul></li><li><p><strong>åŠ¨æ€åˆ†åŒºåˆ†é…</strong>åº”è¯¥é‡‡ç”¨<strong>åŠ¨æ€è¿è¡Œæ—¶è£…å…¥(åŠ¨æ€é‡å®šä½)</strong></p><ul><li>å› ä¸ºé€šè¿‡ç´§å‡‘æŠ€æœ¯ä¼šå¯¼è‡´è¿›ç¨‹èµ·å§‹åœ°å€å‘ç”Ÿå˜åŒ–,è€ŒåŠ¨æ€é‡å®šä½å…è®¸ç¨‹åºåœ¨å†…å­˜ä¸­å‘ç”Ÿç§»åŠ¨</li></ul></li></ul><h2 id="åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•"><strong>5. åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121111606972.png"></p><p><strong>åŠ¨æ€åˆ†åŒºåˆ†é…ç®—æ³•</strong>: <strong>åœ¨åŠ¨æ€åˆ†åŒºåˆ†é…æ–¹å¼ä¸­ï¼Œå½“å¾ˆå¤šä¸ªç©ºé—²åˆ†åŒºéƒ½èƒ½æ»¡è¶³éœ€æ±‚æ—¶ï¼Œåº”è¯¥é€‰æ‹©å“ªä¸ªåˆ†åŒºè¿›è¡Œåˆ†é…</strong></p><h3 id="é¦–æ¬¡é€‚åº”ç®—æ³•first-fit">5.1 <strong>é¦–æ¬¡é€‚åº”ç®—æ³•</strong>(FirstFit)</h3><ul><li><p>ç®—æ³•æ€æƒ³ï¼šæ¯æ¬¡éƒ½ä»ä½åœ°å€å¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªèƒ½æ»¡è¶³å¤§å°çš„ç©ºé—²åˆ†åŒº</p></li><li><p>å¦‚ä½•å®ç°ï¼šç©ºé—²åˆ†åŒºä»¥åœ°å€é€’å¢çš„æ¬¡åºæ’åˆ—ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾ï¼ˆæˆ–ç©ºé—²åˆ†åŒºè¡¨ï¼‰ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒº</p></li><li><p>ä¼˜ç‚¹ï¼šé¦–æ¬¡é€‚åº”ç®—æ³•æ¯æ¬¡éƒ½è¦ä»å¤´æŸ¥æ‰¾ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ£€ç´¢ä½åœ°å€çš„å°åˆ†åŒºã€‚ä½†æ˜¯è¿™ç§è§„åˆ™ä¹Ÿå†³å®šäº†å½“ä½åœ°å€éƒ¨åˆ†æœ‰æ›´å°çš„åˆ†åŒºå¯ä»¥æ»¡è¶³éœ€æ±‚æ—¶ï¼Œä¼šæ›´æœ‰å¯èƒ½ç”¨åˆ°ä½åœ°å€éƒ¨åˆ†çš„å°åˆ†åŒºï¼Œä¹Ÿä¼šæ›´æœ‰å¯èƒ½æŠŠé«˜åœ°å€éƒ¨åˆ†çš„å¤§åˆ†åŒºä¿ç•™ä¸‹æ¥ï¼ˆæœ€ä½³é€‚åº”ç®—æ³•çš„ä¼˜ç‚¹ï¼‰</p></li></ul><h3 id="æœ€ä½³é€‚åº”ç®—æ³•best-fit">5.2 <strong>æœ€ä½³é€‚åº”ç®—æ³•</strong>(BestFit)</h3><ul><li><p>ç®—æ³•æ€æƒ³ï¼šç”±äºåŠ¨æ€åˆ†åŒºåˆ†é…æ˜¯ä¸€ç§è¿ç»­åˆ†é…æ–¹å¼ï¼Œä¸ºå„è¿›ç¨‹åˆ†é…çš„ç©ºé—´å¿…é¡»æ˜¯è¿ç»­çš„ä¸€æ•´ç‰‡åŒºåŸŸã€‚å› æ­¤ä¸ºäº†ä¿è¯å½“â€œå¤§è¿›ç¨‹â€åˆ°æ¥æ—¶èƒ½æœ‰è¿ç»­çš„å¤§ç‰‡ç©ºé—´ï¼Œå¯ä»¥å°½å¯èƒ½å¤šåœ°ç•™ä¸‹å¤§ç‰‡çš„ç©ºé—²åŒºï¼Œå³ï¼Œä¼˜å…ˆä½¿ç”¨æ›´å°çš„ç©ºé—²åŒº</p></li><li><p>å¦‚ä½•å®ç°ï¼šç©ºé—²åˆ†åŒºæŒ‰å®¹é‡é€’å¢æ¬¡åºé“¾æ¥ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾ï¼ˆæˆ–ç©ºé—²åˆ†åŒºè¡¨ï¼‰ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒº</p></li><li><p>ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½é€‰æœ€å°çš„åˆ†åŒºè¿›è¡Œåˆ†é…ï¼Œä¼šç•™ä¸‹è¶Šæ¥è¶Šå¤šçš„ã€å¾ˆå°çš„ã€éš¾ä»¥åˆ©ç”¨çš„å†…å­˜å—ã€‚å› æ­¤è¿™ç§æ–¹æ³•ä¼šäº§ç”Ÿå¾ˆå¤šçš„å¤–éƒ¨ç¢ç‰‡</p></li></ul><h3 id="æœ€åé€‚åº”ç®—æ³•worst-fit">5.3 <strong>æœ€åé€‚åº”ç®—æ³•</strong>(WorstFit)</h3><ul><li><p>åˆç§° æœ€å¤§é€‚åº”ç®—æ³•ï¼ˆLargest Fitï¼‰</p></li><li><p>ç®—æ³•æ€æƒ³ï¼šä¸ºäº†è§£å†³æœ€ä½³é€‚åº”ç®—æ³•çš„é—®é¢˜ --å³ç•™ä¸‹å¤ªå¤šéš¾ä»¥åˆ©ç”¨çš„å°ç¢ç‰‡ï¼Œå¯ä»¥åœ¨æ¯æ¬¡åˆ†é…æ—¶ä¼˜å…ˆä½¿ç”¨æœ€å¤§çš„è¿ç»­ç©ºé—²åŒºï¼Œè¿™æ ·åˆ†é…åå‰©ä½™çš„ç©ºé—²åŒºå°±ä¸ä¼šå¤ªå°ï¼Œæ›´æ–¹ä¾¿ä½¿ç”¨</p></li><li><p>å¦‚ä½•å®ç°ï¼šç©ºé—²åˆ†åŒºæŒ‰å®¹é‡é€’å‡æ¬¡åºé“¾æ¥ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶é¡ºåºæŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾ï¼ˆæˆ–ç©ºé—²åˆ†åŒºè¡¨ï¼‰ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒº</p></li><li><p>ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½é€‰æœ€å¤§çš„åˆ†åŒºè¿›è¡Œåˆ†é…ï¼Œè™½ç„¶å¯ä»¥è®©åˆ†é…åç•™ä¸‹çš„ç©ºé—²åŒºæ›´å¤§ï¼Œæ›´å¯ç”¨ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¼šå¯¼è‡´è¾ƒå¤§çš„è¿ç»­ç©ºé—²åŒºè¢«è¿…é€Ÿç”¨å®Œã€‚å¦‚æœä¹‹åæœ‰â€œå¤§è¿›ç¨‹â€åˆ°è¾¾ï¼Œå°±æ²¡æœ‰å†…å­˜åˆ†åŒºå¯ç”¨äº†</p></li></ul><h3 id="é‚»è¿‘é€‚åº”ç®—æ³•next-fit">5.4 <strong>é‚»è¿‘é€‚åº”ç®—æ³•</strong>(NextFit)</h3><ul><li><p>ç®—æ³•æ€æƒ³ï¼šé¦–æ¬¡é€‚åº”ç®—æ³•æ¯æ¬¡éƒ½ä»é“¾å¤´å¼€å§‹æŸ¥æ‰¾çš„ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä½åœ°å€éƒ¨åˆ†å‡ºç°å¾ˆå¤šå°çš„ç©ºé—²åˆ†åŒºï¼Œè€Œæ¯æ¬¡åˆ†é…æŸ¥æ‰¾æ—¶ï¼Œéƒ½è¦ç»è¿‡è¿™äº›åˆ†åŒºï¼Œå› æ­¤ä¹Ÿå¢åŠ äº†æŸ¥æ‰¾çš„å¼€é”€ã€‚å¦‚æœæ¯æ¬¡éƒ½ä»ä¸Šæ¬¡æŸ¥æ‰¾ç»“æŸçš„ä½ç½®å¼€å§‹æ£€ç´¢ï¼Œå°±èƒ½è§£å†³ä¸Šè¿°é—®é¢˜</p></li><li><p>å¦‚ä½•å®ç°ï¼šç©ºé—²åˆ†åŒºä»¥åœ°å€é€’å¢çš„é¡ºåºæ’åˆ—ï¼ˆå¯æ’æˆä¸€ä¸ªå¾ªç¯é“¾è¡¨ï¼‰ã€‚æ¯æ¬¡åˆ†é…å†…å­˜æ—¶ä»ä¸Šæ¬¡æŸ¥æ‰¾ç»“æŸçš„ä½ç½®å¼€å§‹æŸ¥æ‰¾ç©ºé—²åˆ†åŒºé“¾ï¼ˆæˆ–ç©ºé—²åˆ†åŒºè¡¨ï¼‰ï¼Œæ‰¾åˆ°å¤§å°èƒ½æ»¡è¶³è¦æ±‚çš„ç¬¬ä¸€ä¸ªç©ºé—²åˆ†åŒº</p></li><li><p>ç¼ºç‚¹ï¼šé‚»è¿‘é€‚åº”ç®—æ³•çš„è§„åˆ™å¯èƒ½ä¼šå¯¼è‡´æ— è®ºä½åœ°å€ã€é«˜åœ°å€éƒ¨åˆ†çš„ç©ºé—²åˆ†åŒºéƒ½æœ‰ç›¸åŒçš„æ¦‚ç‡è¢«ä½¿ç”¨ï¼Œä¹Ÿå°±å¯¼è‡´äº†é«˜åœ°å€éƒ¨åˆ†çš„å¤§åˆ†åŒºæ›´å¯èƒ½è¢«ä½¿ç”¨ï¼Œåˆ’åˆ†ä¸ºå°åˆ†åŒºï¼Œæœ€åå¯¼è‡´æ— å¤§åˆ†åŒºå¯ç”¨ï¼ˆæœ€å¤§é€‚åº”ç®—æ³•çš„ç¼ºç‚¹ï¼‰</p></li></ul><p>ç»¼åˆæ¥çœ‹ï¼Œ<strong>å››ç§ç®—æ³•ä¸­ï¼Œé¦–æ¬¡é€‚åº”ç®—æ³•çš„æ•ˆæœåè€Œæ›´å¥½</strong></p><h2 id="åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†çš„æ¦‚å¿µ"><strong>6.åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†çš„æ¦‚å¿µ</strong></h2><ul><li><strong>éè¿ç»­åˆ†é…</strong>ï¼š<strong>æŒ‡ä¸ºç”¨æˆ·è¿›ç¨‹åˆ†é…çš„å¯ä»¥æ˜¯ä¸€äº›åˆ†æ•£çš„å†…å­˜ç©ºé—´</strong></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121123601201.png"></p><h3 id="ä»€ä¹ˆæ˜¯åˆ†é¡µå­˜å‚¨">6.1 <strong>ä»€ä¹ˆæ˜¯åˆ†é¡µå­˜å‚¨?</strong></h3><ul><li><p>å°†<strong>å†…å­˜ç©ºé—´</strong>åˆ†ä¸ºä¸€ä¸ªä¸ª<strong>å¤§å°ç›¸ç­‰çš„åˆ†åŒº</strong>ï¼ˆæ¯”å¦‚ï¼šæ¯ä¸ªåˆ†åŒº4KBï¼‰ï¼Œæ¯ä¸ªåˆ†åŒºå°±æ˜¯ä¸€ä¸ªâ€œ<strong>é¡µæ¡†(PageFrame)</strong>â€ï¼ˆ<strong>é¡µæ¡†</strong>=<strong>é¡µå¸§</strong>=<strong>å†…å­˜å—</strong>=<strong>ç‰©ç†å—</strong>=<strong>ç‰©ç†é¡µé¢</strong>ï¼‰ã€‚æ¯ä¸ªé¡µæ¡†æœ‰ä¸€ä¸ªç¼–å·ï¼Œå³â€œ<strong>é¡µæ¡†å·</strong>â€ï¼ˆ<strong>é¡µæ¡†å·</strong>=<strong>é¡µå¸§å·</strong>=<strong>å†…å­˜å—å·</strong>=<strong>ç‰©ç†å—å·</strong>=<strong>ç‰©ç†é¡µå·</strong>ï¼‰ï¼Œ<strong>é¡µæ¡†å·ä»0å¼€å§‹</strong></p></li><li><p>å°†<strong>è¿›ç¨‹çš„é€»è¾‘åœ°å€ç©ºé—´</strong>ä¹Ÿåˆ†ä¸º<strong>ä¸é¡µæ¡†å¤§å°ç›¸ç­‰</strong>çš„ä¸€ä¸ªä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ç§°ä¸ºä¸€ä¸ªâ€œ<strong>é¡µ</strong>â€æˆ–â€œ<strong>é¡µé¢</strong>â€ã€‚æ¯ä¸ªé¡µé¢ä¹Ÿæœ‰ä¸€ä¸ªç¼–å·ï¼Œå³â€œ<strong>é¡µå·</strong>â€ï¼Œ<strong>é¡µå·ä¹Ÿæ˜¯ä»0å¼€å§‹</strong></p></li><li><p>æ³¨æ„åŒºåˆ† <strong>é¡µæ¡†</strong> vs <strong>é¡µ</strong>çš„æ¦‚å¿µ</p></li><li><p>æ“ä½œç³»ç»Ÿ<strong>ä»¥é¡µæ¡†ä¸ºå•ä½ä¸ºå„ä¸ªè¿›ç¨‹åˆ†é…å†…å­˜ç©ºé—´</strong>ã€‚è¿›ç¨‹çš„æ¯ä¸ªé¡µé¢åˆ†åˆ«æ”¾å…¥ä¸€ä¸ªé¡µæ¡†ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›ç¨‹çš„<strong>é¡µé¢</strong>ä¸å†…å­˜çš„<strong>é¡µæ¡†</strong>æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚<strong>å„ä¸ªé¡µé¢ä¸å¿…è¿ç»­å­˜æ”¾ï¼Œå¯ä»¥æ”¾åˆ°ä¸ç›¸é‚»çš„å„ä¸ªé¡µæ¡†ä¸­</strong></p><ul><li>æ³¨ï¼šè¿›ç¨‹çš„æœ€åä¸€ä¸ªé¡µé¢å¯èƒ½æ²¡æœ‰ä¸€ä¸ªé¡µæ¡†é‚£ä¹ˆå¤§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åˆ†é¡µå­˜å‚¨æœ‰å¯èƒ½äº§ç”Ÿå†…éƒ¨ç¢ç‰‡</strong>ï¼Œå› æ­¤é¡µæ¡†ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™å¯èƒ½äº§ç”Ÿè¿‡å¤§çš„å†…éƒ¨ç¢ç‰‡é€ æˆæµªè´¹</li></ul></li></ul><h3 id="é¡µè¡¨">6.2 <strong>é¡µè¡¨</strong></h3><ul><li>ä¸ºäº†èƒ½çŸ¥é“è¿›ç¨‹çš„æ¯ä¸ª<strong>é¡µé¢</strong>åœ¨å†…å­˜ä¸­å­˜æ”¾çš„ä½ç½®ï¼Œæ“ä½œç³»ç»Ÿè¦ä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹ä¸€å¼ <strong>é¡µè¡¨</strong><ul><li>æ³¨ï¼šé¡µè¡¨é€šå¸¸å­˜åœ¨<strong>PCB</strong>ï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰ä¸­</li></ul></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121112224337.png"></p><h3 id="æ¯ä¸ªé¡µè¡¨é¡¹å¤šå¤§å å‡ ä¸ªå­—èŠ‚">6.3<strong>æ¯ä¸ªé¡µè¡¨é¡¹å¤šå¤§ï¼Ÿå å‡ ä¸ªå­—èŠ‚ï¼Ÿ</strong></h3><ul><li><p>Egï¼šå‡è®¾æŸç³»ç»Ÿç‰©ç†å†…å­˜å¤§å°ä¸º 4GBï¼Œé¡µé¢å¤§å°ä¸º4KBï¼Œåˆ™æ¯ä¸ªé¡µè¡¨é¡¹è‡³å°‘åº”è¯¥ä¸ºå¤šå°‘å­—èŠ‚ï¼Ÿ</p></li><li><p>å†…å­˜å—å¤§å°=é¡µé¢å¤§å°=4KB= 2<sup>12</sup>B</p><ul><li>4GB çš„å†…å­˜æ€»å…±ä¼šè¢«åˆ†ä¸º 2<sup>32</sup> / 2<sup>12</sup> =2<sup>20</sup>ä¸ªå†…å­˜å—</li><li>å†…å­˜å—å·çš„èŒƒå›´åº”è¯¥æ˜¯ 0 ~ 2<sup>20</sup> -1</li><li>å†…å­˜å—å·è‡³å°‘è¦ç”¨ 20 bit æ¥è¡¨ç¤º</li><li>å†…å­˜æŒ‰å­—èŠ‚ç¼–å€, åˆ™è‡³å°‘è¦ç”¨3Bæ¥è¡¨ç¤º<strong>å—å·</strong>ï¼ˆ3*8=24bitï¼‰<ul><li><strong>æ³¨æ„</strong>ï¼šé¡µè¡¨è®°å½•çš„åªæ˜¯å†…å­˜å—å·ï¼Œè€Œä¸æ˜¯å†…å­˜å—çš„èµ·å§‹åœ°å€ï¼<ul><li>j å·å†…å­˜å—çš„èµ·å§‹åœ°å€ = j * å†…å­˜å—å¤§å°</li></ul></li><li><strong>é‡è¦è€ƒç‚¹</strong>ï¼šè®¡ç®—æœºä¸­å†…å­˜å—çš„æ•°é‡ â†’é¡µè¡¨é¡¹ä¸­å—å·è‡³å°‘å å¤šå°‘å­—èŠ‚</li></ul></li></ul></li><li><p><strong>é¡µè¡¨é¡¹è¿ç»­å­˜æ”¾</strong>ï¼Œå› æ­¤<strong>é¡µå·å¯ä»¥æ˜¯éšå«çš„ï¼Œä¸å å­˜å‚¨ç©ºé—´ï¼ˆç±»æ¯”æ•°ç»„ï¼‰</strong></p><ul><li>å‡è®¾é¡µè¡¨ä¸­çš„å„é¡µè¡¨é¡¹ä»å†…å­˜åœ°å€ä¸º Xçš„åœ°æ–¹å¼€å§‹è¿ç»­å­˜æ”¾ï¼Œå¦‚ä½•æ‰¾åˆ°é¡µå·ä¸º i çš„é¡µè¡¨é¡¹ï¼Ÿ</li><li>i å·é¡µè¡¨é¡¹çš„å­˜æ”¾åœ°å€ = X + i * é¡µè¡¨é¡¹å¤§å°</li></ul></li></ul><h3 id="å¦‚ä½•é€šè¿‡é¡µè¡¨å®ç°é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢">6.4<strong>å¦‚ä½•é€šè¿‡é¡µè¡¨å®ç°é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ï¼Ÿ</strong></h3><ul><li><strong>è¿›ç¨‹åœ¨å†…å­˜ä¸­è¿ç»­å­˜æ”¾æ—¶</strong>ï¼Œæ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•å®ç°é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢çš„ï¼Ÿ<ul><li><strong>é‡å®šä½å¯„å­˜å™¨</strong>ï¼šæŒ‡æ˜äº†è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„èµ·å§‹ä½ç½®</li><li>ç‰©ç†åœ°å€ = è¿›ç¨‹åœ¨å†…å­˜ä¸­çš„èµ·å§‹ä½ç½® + é€»è¾‘åœ°å€</li><li>é€»è¾‘åœ°å€ç›¸å¯¹äºèµ·å§‹ä½ç½®çš„â€œåç§»é‡â€</li></ul></li><li>å°†è¿›ç¨‹åœ°å€ç©ºé—´<strong>åˆ†é¡µ</strong>ä¹‹åï¼Œæ“ä½œç³»ç»Ÿè¯¥å¦‚ä½•å®ç°é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ï¼Ÿ<ul><li>ç‰¹ç‚¹ï¼šè™½ç„¶è¿›ç¨‹çš„å„ä¸ª<strong>é¡µé¢æ˜¯ç¦»æ•£å­˜æ”¾çš„</strong>ï¼Œä½†æ˜¯<strong>é¡µé¢å†…éƒ¨æ˜¯è¿ç»­å­˜æ”¾çš„</strong></li><li>å¦‚æœè¦è®¿é—®é€»è¾‘åœ°å€ Aï¼Œåˆ™:<ul><li>ç¡®å®šé€»è¾‘åœ°å€A å¯¹åº”çš„â€œ<strong>é¡µå·</strong>â€P</li><li>æ‰¾åˆ°På·é¡µé¢åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€<ul><li>é€šè¿‡æŸ¥æ‰¾é¡µè¡¨ï¼Œæ‰¾åˆ°é¡µå·På¯¹åº”çš„å†…å­˜å—å·ï¼Œè®¡ç®—å‡ºå†…å­˜å—å·åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€</li></ul></li><li>ç¡®å®šé€»è¾‘åœ°å€A çš„â€œ<strong>é¡µå†…åç§»é‡</strong>â€W</li></ul></li><li>é€»è¾‘åœ°å€A å¯¹åº”çš„ç‰©ç†åœ°å€ = På·é¡µé¢åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€ +é¡µå†…åç§»é‡W</li></ul></li></ul><h3 id="å¦‚ä½•ç¡®å®šä¸€ä¸ªé€»è¾‘åœ°å€å¯¹åº”çš„é¡µå·é¡µå†…åç§»é‡">6.5<strong>å¦‚ä½•ç¡®å®šä¸€ä¸ªé€»è¾‘åœ°å€å¯¹åº”çš„é¡µå·ã€é¡µå†…åç§»é‡ï¼Ÿ</strong></h3><ul><li><p>Egï¼šåœ¨æŸè®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œé¡µé¢å¤§å°æ˜¯50Bã€‚æŸè¿›ç¨‹é€»è¾‘åœ°å€ç©ºé—´å¤§å°ä¸º200Bï¼Œåˆ™é€»è¾‘åœ°å€110 å¯¹åº”çš„é¡µå·ã€é¡µå†…åç§»é‡æ˜¯å¤šå°‘ï¼Ÿ</p><ul><li>é¡µå· = 110 / 50 = 2</li><li>é¡µå†…åç§»é‡ = 110 % 50 = 10</li></ul></li><li><p>é¡µå· = é€»è¾‘åœ°å€ / é¡µé¢é•¿åº¦ ï¼ˆå–é™¤æ³•çš„æ•´æ•°éƒ¨åˆ†ï¼‰</p></li><li><p>é¡µå†…åç§»é‡ = é€»è¾‘åœ°å€ % é¡µé¢é•¿åº¦ï¼ˆå–é™¤æ³•çš„ä½™æ•°éƒ¨åˆ†ï¼‰</p></li><li><p><strong>é€»è¾‘åœ°å€ å¯ä»¥æ‹†åˆ†ä¸ºï¼ˆé¡µå·ï¼Œé¡µå†…åç§»é‡ï¼‰</strong></p></li><li><p>å½“<strong>é¡µé¢å¤§å°</strong>åˆšå¥½æ˜¯<strong>2çš„æ•´æ•°å¹‚æ—¶</strong>:</p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121123228264.png"></p><ul><li><strong>æ€»ç»“ï¼šé¡µé¢å¤§å° åˆšå¥½æ˜¯ 2çš„æ•´æ•°å¹‚ æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</strong><ul><li>é€»è¾‘åœ°å€çš„æ‹†åˆ†æ›´åŠ è¿…é€Ÿ -- å¦‚æœæ¯ä¸ªé¡µé¢å¤§å°ä¸º2KBï¼Œç”¨äºŒè¿›åˆ¶æ•°è¡¨ç¤ºé€»è¾‘åœ°å€ï¼Œåˆ™æœ«å°¾ Kä½å³ä¸ºé¡µå†…åç§»é‡ï¼Œå…¶ä½™éƒ¨åˆ†å°±æ˜¯é¡µå·ã€‚å› æ­¤ï¼Œå¦‚æœè®©æ¯ä¸ªé¡µé¢çš„å¤§å°ä¸º 2çš„æ•´æ•°å¹‚ï¼Œè®¡ç®—æœºç¡¬ä»¶å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾—å‡ºä¸€ä¸ªé€»è¾‘åœ°å€å¯¹åº”çš„é¡µå·å’Œé¡µå†…åç§»é‡ï¼Œè€Œæ— éœ€è¿›è¡Œé™¤æ³•è¿ç®—ï¼Œä»è€Œæå‡äº†è¿è¡Œé€Ÿåº¦</li><li>ç‰©ç†åœ°å€çš„è®¡ç®—æ›´åŠ è¿…é€Ÿ --æ ¹æ®é€»è¾‘åœ°å€å¾—åˆ°é¡µå·ï¼Œæ ¹æ®é¡µå·æŸ¥è¯¢é¡µè¡¨ä»è€Œæ‰¾åˆ°é¡µé¢å­˜æ”¾çš„å†…å­˜å—å·ï¼Œå°†äºŒè¿›åˆ¶è¡¨ç¤ºçš„å†…å­˜å—å·å’Œé¡µå†…åç§»é‡æ‹¼æ¥èµ·æ¥ï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„ç‰©ç†åœ°å€</li></ul></li></ul><h3 id="é€»è¾‘åœ°å€ç»“æ„">6.6 <strong>é€»è¾‘åœ°å€ç»“æ„</strong></h3><ul><li>é¡µé¢å¤§å°åˆšå¥½æ˜¯2çš„æ•´æ•°å¹‚æ—¶ï¼š</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121123548986.png"></p><ul><li>Tipsï¼šæœ‰äº›å¥‡è‘©é¢˜ç›®ä¸­<strong>é¡µé¢å¤§å°æœ‰å¯èƒ½ä¸æ˜¯2çš„æ•´æ•°æ¬¡å¹‚</strong>ï¼Œè¿™ç§æƒ…å†µè¿˜æ˜¯å¾—ç”¨æœ€åŸå§‹çš„æ–¹æ³•è®¡ç®—ï¼š<ul><li>é¡µå· = é€»è¾‘åœ°å€ / é¡µé¢é•¿åº¦ ï¼ˆå–é™¤æ³•çš„æ•´æ•°éƒ¨åˆ†ï¼‰</li><li>é¡µå†…åç§»é‡ = é€»è¾‘åœ°å€ % é¡µé¢é•¿åº¦ï¼ˆå–é™¤æ³•çš„ä½™æ•°éƒ¨åˆ†ï¼‰</li></ul></li></ul><h2 id="åŸºæœ¬åœ°å€å˜æ¢æœºæ„"><strong>7. åŸºæœ¬åœ°å€å˜æ¢æœºæ„</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121125306825.png"></p><ul><li><strong>åŸºæœ¬åœ°å€å˜æ¢æœºæ„</strong>ï¼š<strong>ç”¨äºå®ç°é€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€è½¬æ¢çš„ä¸€ç»„ç¡¬ä»¶æœºæ„</strong></li></ul><h3 id="é¡µè¡¨å¯„å­˜å™¨">7.1 <strong>é¡µè¡¨å¯„å­˜å™¨</strong></h3><ul><li><p><strong>åŸºæœ¬åœ°å€å˜æ¢æœºæ„</strong>å¯ä»¥å€ŸåŠ©è¿›ç¨‹çš„<strong>é¡µè¡¨</strong>å°†é€»è¾‘åœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€</p></li><li><p>é€šå¸¸ä¼šåœ¨ç³»ç»Ÿä¸­è®¾ç½®ä¸€ä¸ª<strong>é¡µè¡¨å¯„å­˜å™¨</strong>(PTR)ï¼Œå­˜æ”¾<strong>é¡µè¡¨åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€F</strong>å’Œ<strong>é¡µè¡¨é•¿åº¦M</strong></p></li><li><p>è¿›ç¨‹æœªæ‰§è¡Œæ—¶ï¼Œé¡µè¡¨çš„å§‹å€å’Œé¡µè¡¨é•¿åº¦æ”¾åœ¨<strong>PCB</strong>(è¿›ç¨‹æ§åˆ¶å—)ä¸­ï¼Œå½“è¿›ç¨‹è¢«è°ƒåº¦æ—¶ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¼šæŠŠå®ƒä»¬æ”¾åˆ°é¡µè¡¨å¯„å­˜å™¨ä¸­</p></li></ul><h3 id="è®¾é¡µé¢å¤§å°ä¸ºlé€»è¾‘åœ°å€aåˆ°ç‰©ç†åœ°å€eçš„å˜æ¢è¿‡ç¨‹å¦‚ä¸‹">7.2<strong>è®¾é¡µé¢å¤§å°ä¸ºLï¼Œé€»è¾‘åœ°å€Aåˆ°ç‰©ç†åœ°å€Eçš„å˜æ¢è¿‡ç¨‹å¦‚ä¸‹</strong>ï¼š</h3><ul><li><p>æ³¨æ„: é¡µé¢å¤§å°æ˜¯2çš„æ•´æ•°å¹‚</p></li><li><p>è®¡ç®—<strong>é¡µå·P</strong>å’Œ<strong>é¡µå†…åç§»é‡W</strong></p><ul><li>å¦‚æœç”¨åè¿›åˆ¶æ•°æ‰‹ç®—ï¼Œåˆ™ P = A / Lï¼Œ W = A % L</li><li>ä½†æ˜¯åœ¨è®¡ç®—æœºå®é™…è¿è¡Œæ—¶ï¼Œé€»è¾‘åœ°å€ç»“æ„æ˜¯å›ºå®šä¸å˜çš„ï¼Œå› æ­¤è®¡ç®—æœºç¡¬ä»¶å¯ä»¥æ›´å¿«åœ°å¾—åˆ°äºŒè¿›åˆ¶è¡¨ç¤ºçš„é¡µå·ã€é¡µå†…åç§»é‡</li></ul></li><li><p>æ¯”è¾ƒé¡µå·På’Œé¡µè¡¨é•¿åº¦Mï¼Œè‹¥ P â‰¥ Mï¼Œ åˆ™äº§ç”Ÿè¶Šç•Œä¸­æ–­ï¼Œå¦åˆ™ç»§ç»­æ‰§è¡Œ</p><ul><li>æ³¨æ„ï¼šé¡µå·æ˜¯ä»0å¼€å§‹çš„ï¼Œè€Œé¡µè¡¨é•¿åº¦è‡³å°‘æ˜¯1ï¼Œå› æ­¤P=Mæ—¶ä¹Ÿä¼šè¶Šç•Œ</li></ul></li><li><p>é¡µè¡¨ä¸­é¡µå·På¯¹åº”çš„ é¡µè¡¨é¡¹åœ°å€ = é¡µè¡¨èµ·å§‹åœ°å€F + é¡µå·P * é¡µè¡¨é¡¹é•¿åº¦ï¼Œå–å‡ºè¯¥é¡µè¡¨é¡¹å†…å®¹bï¼Œå³ä¸ºå†…å­˜å—å·</p><ul><li>æ³¨æ„åŒºåˆ†<strong>é¡µè¡¨é¡¹é•¿åº¦</strong>ã€<strong>é¡µè¡¨é•¿åº¦</strong>ã€<strong>é¡µé¢å¤§å°</strong>çš„åŒºåˆ«</li><li>é¡µè¡¨é•¿åº¦ï¼šæŒ‡çš„æ˜¯è¿™ä¸ªé¡µè¡¨ä¸­æ€»å…±æœ‰å‡ ä¸ªé¡µè¡¨é¡¹ï¼Œå³æ€»å…±æœ‰å‡ ä¸ªé¡µ</li><li>é¡µè¡¨é¡¹é•¿åº¦ï¼šæŒ‡çš„æ˜¯æ¯ä¸ªé¡µè¡¨é¡¹å å¤šå¤§çš„å­˜å‚¨ç©ºé—´</li><li>é¡µé¢å¤§å°ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªé¡µé¢å å¤šå¤§çš„å­˜å‚¨ç©ºé—´</li></ul></li><li><p>è®¡ç®— E = b * L + Wï¼Œç”¨å¾—åˆ°çš„ç‰©ç†åœ°å€Eå»è®¿å­˜</p><ul><li>å¦‚æœå†…å­˜å—å·ã€é¡µé¢åç§»é‡æ˜¯ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„ï¼Œé‚£ä¹ˆæŠŠäºŒè€…æ‹¼æ¥èµ·æ¥å°±æ˜¯æœ€ç»ˆçš„ç‰©ç†åœ°å€äº†</li></ul></li><li><p><strong>åŠ¨æ‰‹éªŒè¯</strong>ï¼š</p><ul><li>å‡è®¾é¡µé¢å¤§å°L = 1KBï¼Œæœ€ç»ˆè¦è®¿é—®çš„å†…å­˜å—å·b = 2ï¼Œé¡µå†…åç§»é‡W =1023</li><li>â‘  å°è¯•ç”¨E = b * L + Wè®¡ç®—ç›®æ ‡ç‰©ç†åœ°å€</li><li>â‘¡å°è¯•æŠŠå†…å­˜å—å·ã€é¡µå†…åç§»é‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå¹¶æŠŠå®ƒä»¬æ‹¼æ¥èµ·æ¥å¾—åˆ°ç‰©ç†åœ°å€</li><li>å¯¹æ¯”â‘ ã€â‘¡çš„ç»“æœæ˜¯å¦ä¸€è‡´</li></ul></li></ul><p><strong>ä¾‹é¢˜</strong>ï¼š</p><ul><li>åœ¨<strong>åˆ†é¡µå­˜å‚¨ç®¡ç†</strong>(é¡µå¼ç®¡ç†)çš„ç³»ç»Ÿä¸­ï¼Œåªè¦ç¡®å®šäº†æ¯ä¸ªé¡µé¢çš„å¤§å°ï¼Œé€»è¾‘åœ°å€ç»“æ„å°±ç¡®å®šäº†ã€‚å› æ­¤ï¼Œ<strong>é¡µå¼ç®¡ç†ä¸­åœ°å€æ˜¯ä¸€ç»´çš„</strong><ul><li>å³ï¼Œåªè¦ç»™å‡ºä¸€ä¸ªé€»è¾‘åœ°å€ï¼Œç³»ç»Ÿå°±å¯ä»¥è‡ªåŠ¨åœ°ç®—å‡ºé¡µå·ã€é¡µå†…åç§»é‡ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸éœ€è¦æ˜¾å¼åœ°å‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªé€»è¾‘åœ°å€ä¸­ï¼Œé¡µå†…åç§»é‡å å¤šå°‘ä½</li></ul></li></ul><h3 id="é¡µè¡¨é¡¹å¤§å°">7.3 <strong>é¡µè¡¨é¡¹å¤§å°</strong></h3><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121125207912.png"></p><h2 id="å…·æœ‰å¿«è¡¨çš„åœ°å€å˜æ¢æœºæ„"><strong>8.å…·æœ‰å¿«è¡¨çš„åœ°å€å˜æ¢æœºæ„</strong></h2><ul><li><strong>å…·æœ‰å¿«è¡¨çš„åœ°å€å˜æ¢æœºæ„</strong>ï¼š<strong>æ˜¯åŸºæœ¬åœ°å€å˜æ¢æœºæ„çš„æ”¹è¿›ç‰ˆæœ¬</strong></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121163126476.png"></p><h3 id="ä»€ä¹ˆæ˜¯å¿«è¡¨tlb">8.1 <strong>ä»€ä¹ˆæ˜¯å¿«è¡¨(TLB)?</strong></h3><ul><li><strong>å¿«è¡¨</strong>ï¼Œåˆç§°<strong>è”æƒ³å¯„å­˜å™¨ï¼ˆTLBï¼Œ translationlookasidebufferï¼‰</strong>ï¼Œæ˜¯ä¸€ç§è®¿é—®é€Ÿåº¦æ¯”å†…å­˜å¿«å¾ˆå¤šçš„<strong>é«˜é€Ÿç¼“å­˜</strong>ï¼ˆ<strong>TLBä¸æ˜¯å†…å­˜ï¼</strong>ï¼‰ï¼Œç”¨æ¥å­˜æ”¾æœ€è¿‘è®¿é—®çš„é¡µè¡¨é¡¹çš„å‰¯æœ¬ï¼Œå¯ä»¥åŠ é€Ÿåœ°å€å˜æ¢çš„é€Ÿåº¦ã€‚ä¸æ­¤å¯¹åº”ï¼Œ<strong>å†…å­˜ä¸­çš„é¡µè¡¨</strong>å¸¸ç§°ä¸º<strong>æ…¢è¡¨</strong></li><li><strong>å¼•å…¥å¿«è¡¨åçš„åœ°å€å˜æ¢è¿‡ç¨‹</strong>:<ul><li>CPUç»™å‡ºé€»è¾‘åœ°å€ï¼Œç”±æŸä¸ªç¡¬ä»¶ç®—å¾—<strong>é¡µå·</strong>ã€<strong>é¡µå†…åç§»é‡</strong>ï¼Œå°†é¡µå·ä¸<strong>å¿«è¡¨</strong>ä¸­çš„æ‰€æœ‰é¡µå·è¿›è¡Œæ¯”è¾ƒ</li><li>å¦‚æœæ‰¾åˆ°åŒ¹é…çš„é¡µå·ï¼Œè¯´æ˜è¦è®¿é—®çš„é¡µè¡¨é¡¹åœ¨å¿«è¡¨ä¸­æœ‰å‰¯æœ¬ï¼Œåˆ™ç›´æ¥ä»ä¸­å–å‡ºè¯¥é¡µå¯¹åº”çš„<strong>å†…å­˜å—å·</strong>ï¼Œå†<strong>å°†å†…å­˜å—å·ä¸é¡µå†…åç§»é‡æ‹¼æ¥å½¢æˆç‰©ç†åœ°å€</strong>ï¼Œæœ€åï¼Œè®¿é—®è¯¥ç‰©ç†åœ°å€å¯¹åº”çš„<strong>å†…å­˜å•å…ƒ</strong>ã€‚å› æ­¤ï¼Œ<strong>è‹¥å¿«è¡¨å‘½ä¸­</strong>ï¼Œåˆ™è®¿é—®æŸä¸ªé€»è¾‘åœ°å€<strong>ä»…éœ€ä¸€æ¬¡è®¿å­˜</strong>å³å¯</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é¡µå·ï¼Œåˆ™éœ€è¦è®¿é—®<strong>å†…å­˜ä¸­çš„é¡µè¡¨</strong>ï¼Œæ‰¾åˆ°å¯¹åº”é¡µè¡¨é¡¹ï¼Œå¾—åˆ°é¡µé¢å­˜æ”¾çš„<strong>å†…å­˜å—å·</strong>ï¼Œå†<strong>å°†å†…å­˜å—å·ä¸é¡µå†…åç§»é‡æ‹¼æ¥å½¢æˆç‰©ç†åœ°å€</strong>ï¼Œæœ€åï¼Œè®¿é—®è¯¥ç‰©ç†åœ°å€å¯¹åº”çš„<strong>å†…å­˜å•å…ƒ</strong>ã€‚å› æ­¤ï¼Œ<strong>è‹¥å¿«è¡¨æœªå‘½ä¸­</strong>ï¼Œåˆ™<strong>è®¿é—®æŸä¸ªé€»è¾‘åœ°å€éœ€è¦ä¸¤æ¬¡è®¿å­˜</strong><ul><li>æ³¨æ„ï¼š<strong>åœ¨æ‰¾åˆ°é¡µè¡¨é¡¹åï¼Œåº”åŒæ—¶å°†å…¶å­˜å…¥å¿«è¡¨</strong>ï¼Œä»¥ä¾¿åé¢å¯èƒ½çš„å†æ¬¡è®¿é—®ã€‚<strong>è‹¥å¿«è¡¨å·±æ»¡ï¼Œåˆ™å¿…é¡»æŒ‰ç…§ä¸€å®šçš„ç®—æ³•å¯¹æ—§çš„é¡µè¡¨é¡¹è¿›è¡Œæ›¿æ¢</strong></li></ul></li><li>ç”±äºæŸ¥è¯¢å¿«è¡¨çš„é€Ÿåº¦æ¯”æŸ¥è¯¢é¡µè¡¨çš„é€Ÿåº¦å¿«å¾ˆå¤šï¼Œå› æ­¤åªè¦å¿«è¡¨å‘½ä¸­ï¼Œå°±å¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´</li><li>å› ä¸º<strong>å±€éƒ¨æ€§åŸç†</strong>ï¼Œä¸€èˆ¬æ¥è¯´å¿«è¡¨çš„å‘½ä¸­ç‡å¯ä»¥è¾¾åˆ°90%ä»¥ä¸Š<ul><li>ä¾‹ï¼šæŸç³»ç»Ÿä½¿ç”¨åŸºæœ¬åˆ†é¡µå­˜å‚¨ç®¡ç†ï¼Œå¹¶é‡‡ç”¨äº†å…·æœ‰å¿«è¡¨çš„åœ°å€å˜æ¢æœºæ„ã€‚è®¿é—®ä¸€æ¬¡å¿«è¡¨è€—æ—¶1usï¼Œè®¿é—®ä¸€æ¬¡å†…å­˜è€—100usã€‚è‹¥å¿«è¡¨çš„å‘½ä¸­ç‡ä¸º90%ï¼Œé‚£ä¹ˆè®¿é—®ä¸€ä¸ªé€»è¾‘åœ°å€çš„å¹³å‡è€—æ—¶æ˜¯å¤šå°‘?<ul><li>(1 + 100) * 0.9 + (1 + 100 + 100) * 0.1 = 111 us</li><li><strong>æœ‰çš„ç³»ç»Ÿæ”¯æŒå¿«è¡¨å’Œæ…¢è¡¨åŒæ—¶æŸ¥æ‰¾</strong>ï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œå¹³å‡è€—æ—¶åº”è¯¥æ˜¯ï¼š</li><li>(1 + 100) * 0.9 + (100 + 100) * 0.1 = 110.9 us</li><li>è‹¥æœªé‡‡ç”¨å¿«è¡¨æœºåˆ¶ï¼Œåˆ™è®¿é—®ä¸€ä¸ªé€»è¾‘åœ°å€éœ€è¦ï¼š</li><li>100 + 100 = 200us</li><li>æ˜¾ç„¶ï¼Œå¼•å…¥å¿«è¡¨æœºåˆ¶åï¼Œè®¿é—®ä¸€ä¸ªé€»è¾‘åœ°å€çš„é€Ÿåº¦å¿«å¤šäº†</li></ul></li></ul></li></ul></li></ul><h3 id="å±€éƒ¨æ€§åŸç†">8.2 <strong>å±€éƒ¨æ€§åŸç†</strong></h3><ul><li><strong>æ—¶é—´å±€éƒ¨æ€§</strong><ul><li>å¦‚æœæ‰§è¡Œäº†ç¨‹åºä¸­çš„æŸæ¡<strong>æŒ‡ä»¤</strong>ï¼Œé‚£ä¹ˆä¸ä¹…åè¿™æ¡æŒ‡ä»¤å¾ˆæœ‰å¯èƒ½å†æ¬¡æ‰§è¡Œï¼›å¦‚æœæŸä¸ª<strong>æ•°æ®</strong>è¢«è®¿é—®è¿‡ï¼Œä¸ä¹…ä¹‹åè¯¥æ•°æ®å¾ˆå¯èƒ½å†æ¬¡è¢«è®¿é—®ï¼ˆå› ä¸ºç¨‹åºä¸­å­˜åœ¨å¤§é‡çš„å¾ªç¯ï¼‰</li></ul></li><li><strong>ç©ºé—´å±€éƒ¨æ€§</strong><ul><li>ä¸€æ—¦ç¨‹åºè®¿é—®äº†æŸä¸ª<strong>å­˜å‚¨å•å…ƒ</strong>ï¼Œåœ¨ä¸ä¹…ä¹‹åï¼Œå…¶é™„è¿‘çš„å­˜å‚¨å•å…ƒä¹Ÿå¾ˆæœ‰å¯èƒ½è¢«è®¿é—®ï¼ˆå› ä¸ºå¾ˆå¤šæ•°æ®åœ¨å†…å­˜ä¸­éƒ½æ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œå¹¶ä¸”ç¨‹åºçš„æŒ‡ä»¤ä¹Ÿæ˜¯é¡ºåºåœ°åœ¨å†…å­˜ä¸­å­˜æ”¾çš„ï¼‰</li></ul></li><li>ä¸Šå°èŠ‚ä»‹ç»çš„åŸºæœ¬åœ°å€å˜æ¢æœºæ„ä¸­ï¼Œæ¯æ¬¡è¦è®¿é—®ä¸€ä¸ªé€»è¾‘åœ°å€ï¼Œéƒ½éœ€è¦æŸ¥è¯¢å†…å­˜ä¸­çš„é¡µè¡¨ã€‚ç”±äºå±€éƒ¨æ€§åŸç†ï¼Œå¯èƒ½è¿ç»­å¾ˆå¤šæ¬¡æŸ¥åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªé¡µè¡¨é¡¹</li></ul><h2 id="ä¸¤çº§é¡µè¡¨"><strong>9. ä¸¤çº§é¡µè¡¨</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121165419159.png"></p><h3 id="å•çº§é¡µè¡¨å­˜åœ¨çš„é—®é¢˜">9.1 <strong>å•çº§é¡µè¡¨å­˜åœ¨çš„é—®é¢˜</strong></h3><ul><li>æŸè®¡ç®—æœºç³»ç»ŸæŒ‰å­—èŠ‚å¯»å€ï¼Œæ”¯æŒ 32ä½çš„é€»è¾‘åœ°å€ï¼Œé‡‡ç”¨åˆ†é¡µå­˜å‚¨ç®¡ç†ï¼Œé¡µé¢å¤§å°ä¸º4KBï¼Œé¡µè¡¨é¡¹é•¿åº¦ä¸º 4B<ul><li>4KB = 2<sup>12</sup>Bï¼Œå› æ­¤é¡µå†…åœ°å€è¦ç”¨12ä½è¡¨ç¤ºï¼Œå‰©ä½™ 20ä½è¡¨ç¤ºé¡µå·</li><li>å› æ­¤ï¼Œè¯¥ç³»ç»Ÿä¸­ç”¨æˆ·è¿›ç¨‹æœ€å¤šæœ‰ 2<sup>20</sup>é¡µã€‚ç›¸åº”çš„ï¼Œä¸€ä¸ªè¿›ç¨‹çš„é¡µè¡¨ä¸­ï¼Œæœ€å¤šä¼šæœ‰ 2<sup>20</sup> = 1M =1,048,576ä¸ªé¡µè¡¨é¡¹ï¼Œæ‰€ä»¥ä¸€ä¸ªé¡µè¡¨æœ€å¤§éœ€è¦ 2<sup>20</sup> * 4B =2<sup>22</sup>Bï¼Œå…±éœ€è¦ 2<sup>22</sup> / 2<sup>12</sup> =2<sup>10</sup>ä¸ªé¡µæ¡†å­˜å‚¨è¯¥é¡µè¡¨ï¼Œéœ€è¦ä¸“é—¨ç»™è¿›ç¨‹åˆ†é…2<sup>10</sup> =<strong>1024ä¸ªè¿ç»­çš„é¡µæ¡†</strong>æ¥å­˜æ”¾å®ƒçš„é¡µè¡¨</li><li>æ ¹æ®é¡µå·æŸ¥è¯¢é¡µè¡¨çš„æ–¹æ³•ï¼šK å·é¡µå¯¹åº”çš„ é¡µè¡¨é¡¹å­˜æ”¾ä½ç½® = é¡µè¡¨å§‹å€ + K *4</li><li><strong>è¦åœ¨æ‰€æœ‰çš„é¡µè¡¨é¡¹éƒ½è¿ç»­å­˜æ”¾çš„åŸºç¡€ä¸Šæ‰èƒ½ç”¨è¿™ç§æ–¹æ³•æ‰¾åˆ°é¡µè¡¨é¡¹</strong></li><li>æ ¹æ®<strong>å±€éƒ¨æ€§åŸç†</strong>å¯çŸ¥ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œè¿›ç¨‹åœ¨ä¸€æ®µæ—¶é—´å†…åªéœ€è¦è®¿é—®æŸå‡ ä¸ªé¡µé¢å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œå› æ­¤æ²¡æœ‰å¿…è¦è®©æ•´ä¸ªé¡µè¡¨éƒ½å¸¸é©»å†…å­˜</li></ul></li><li>é—®é¢˜ä¸€ï¼š<strong>é¡µè¡¨å¿…é¡»è¿ç»­å­˜æ”¾ï¼Œå› æ­¤å½“é¡µè¡¨å¾ˆå¤§æ—¶ï¼Œéœ€è¦å ç”¨å¾ˆå¤šä¸ªè¿ç»­çš„é¡µæ¡†</strong><ul><li>æ€è€ƒï¼šæˆ‘ä»¬æ˜¯å¦‚ä½•è§£å†³è¿›ç¨‹åœ¨å†…å­˜ä¸­å¿…é¡»è¿ç»­å­˜å‚¨çš„é—®é¢˜ï¼Ÿ<ul><li>å°†è¿›ç¨‹åœ°å€ç©ºé—´åˆ†é¡µï¼Œå¹¶ä¸ºå…¶å»ºç«‹ä¸€å¼ é¡µè¡¨ï¼Œè®°å½•å„é¡µé¢çš„å­˜æ”¾ä½ç½®</li><li>åŒæ ·çš„æ€è·¯ä¹Ÿå¯ç”¨äºè§£å†³â€œé¡µè¡¨å¿…é¡»è¿ç»­å­˜æ”¾â€çš„é—®é¢˜ï¼ŒæŠŠå¿…é¡»è¿ç»­å­˜æ”¾çš„é¡µè¡¨å†åˆ†é¡µ</li><li>å¯å°†é•¿é•¿çš„é¡µè¡¨è¿›è¡Œåˆ†ç»„ï¼Œ<strong>ä½¿æ¯ä¸ªå†…å­˜å—åˆšå¥½å¯ä»¥æ”¾å…¥ä¸€ä¸ªåˆ†ç»„</strong>ï¼ˆæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé¡µé¢å¤§å°4KBï¼Œæ¯ä¸ªé¡µè¡¨é¡¹4Bï¼Œæ¯ä¸ªé¡µé¢å¯å­˜æ”¾1Kä¸ªé¡µè¡¨é¡¹ï¼Œå› æ­¤æ¯1Kä¸ªè¿ç»­çš„é¡µè¡¨é¡¹ä¸ºä¸€ç»„ï¼Œæ¯ç»„åˆšå¥½å ä¸€ä¸ªå†…å­˜å—ï¼Œå†å°†å„ç»„ç¦»æ•£åœ°æ”¾åˆ°å„ä¸ªå†…å­˜å—ä¸­ï¼‰</li><li>å¦å¤–ï¼Œè¦ä¸ºç¦»æ•£åˆ†é…çš„é¡µè¡¨å†å»ºç«‹ä¸€å¼ é¡µè¡¨ï¼Œç§°ä¸º<strong>é¡µç›®å½•è¡¨</strong>ï¼ˆåˆç§°<strong>å¤–å±‚é¡µè¡¨</strong>æˆ–<strong>é¡¶å±‚é¡µè¡¨</strong>ï¼‰</li></ul></li></ul></li><li>é—®é¢˜äºŒï¼š<strong>æ²¡æœ‰å¿…è¦è®©æ•´ä¸ªé¡µè¡¨å¸¸é©»å†…å­˜ï¼Œå› ä¸ºè¿›ç¨‹åœ¨ä¸€æ®µæ—¶é—´å†…å¯èƒ½åªéœ€è¦è®¿é—®æŸå‡ ä¸ªç‰¹å®šçš„é¡µé¢</strong><ul><li>å¯ä»¥åœ¨éœ€è¦è®¿é—®é¡µé¢æ—¶æ‰æŠŠé¡µé¢è°ƒå…¥å†…å­˜ï¼ˆ<strong>è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯</strong>ï¼‰,å¯ä»¥åœ¨é¡µè¡¨é¡¹ä¸­å¢åŠ ä¸€ä¸ªæ ‡å¿—ä½ï¼Œç”¨äºè¡¨ç¤ºè¯¥é¡µé¢æ˜¯å¦å·²ç»è°ƒå…¥å†…å­˜</li><li>è‹¥æƒ³è®¿é—®çš„é¡µé¢ä¸åœ¨å†…å­˜ä¸­ï¼Œåˆ™äº§ç”Ÿ<strong>ç¼ºé¡µä¸­æ–­ï¼ˆå†…ä¸­æ–­/å¼‚å¸¸ï¼‰</strong>ï¼Œç„¶åå°†ç›®æ ‡é¡µé¢ä»å¤–å­˜è°ƒå…¥å†…å­˜</li></ul></li></ul><h3 id="ä¸¤çº§é¡µè¡¨çš„åŸç†åœ°å€ç»“æ„">9.2<strong>ä¸¤çº§é¡µè¡¨çš„åŸç†ã€åœ°å€ç»“æ„</strong></h3><ul><li><strong>å¦‚ä½•å®ç°åœ°å€å˜æ¢</strong><ul><li>æŒ‰ç…§åœ°å€ç»“æ„å°†é€»è¾‘åœ°å€æ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼ˆä¸€çº§é¡µå·ã€äºŒçº§é¡µå·ã€é¡µå†…åç§»é‡ï¼‰</li><li>ä»PCBä¸­è¯»å‡ºé¡µç›®å½•è¡¨å§‹å€ï¼Œå†æ ¹æ®ä¸€çº§é¡µå·æŸ¥é¡µç›®å½•è¡¨ï¼Œæ‰¾åˆ°ä¸‹ä¸€çº§é¡µè¡¨åœ¨å†…å­˜ä¸­çš„å­˜æ”¾ä½ç½®</li><li>æ ¹æ®äºŒçº§é¡µå·æŸ¥äºŒçº§é¡µè¡¨ï¼Œæ‰¾åˆ°æœ€ç»ˆæƒ³è®¿é—®çš„å†…å­˜å—å·</li><li>ç»“åˆé¡µå†…åç§»é‡å¾—åˆ°ç‰©ç†åœ°å€</li></ul></li></ul><h3 id="éœ€è¦æ³¨æ„çš„å‡ ä¸ªç»†èŠ‚">9.3 <strong>éœ€è¦æ³¨æ„çš„å‡ ä¸ªç»†èŠ‚</strong></h3><ul><li>è‹¥åˆ†ä¸ºä¸¤çº§é¡µè¡¨åï¼Œé¡µè¡¨ä¾ç„¶å¾ˆé•¿ï¼Œåˆ™å¯ä»¥é‡‡ç”¨æ›´å¤šçº§é¡µè¡¨ï¼Œä¸€èˆ¬æ¥è¯´<strong>å„çº§é¡µè¡¨çš„å¤§å°ä¸èƒ½è¶…è¿‡ä¸€ä¸ªé¡µé¢</strong><ul><li>ä¾‹ï¼šæŸç³»ç»ŸæŒ‰å­—èŠ‚ç¼–å€ï¼Œé‡‡ç”¨ 40 ä½é€»è¾‘åœ°å€ï¼Œé¡µé¢å¤§å°ä¸º4KBï¼Œé¡µè¡¨é¡¹å¤§å°ä¸º4Bï¼Œå‡è®¾é‡‡ç”¨çº¯é¡µå¼å­˜å‚¨ï¼Œåˆ™è¦é‡‡ç”¨ï¼ˆï¼‰çº§é¡µè¡¨ï¼Œé¡µå†…åç§»é‡ä¸ºï¼ˆï¼‰ä½ï¼Ÿ<ul><li>é¡µé¢å¤§å° = 4KB =2<sup>12</sup>Bï¼ŒæŒ‰å­—èŠ‚ç¼–å€ï¼Œå› æ­¤é¡µå†…åç§»é‡ä¸º12ä½</li><li>é¡µå· = 40 - 12 = 28 ä½</li><li>é¡µé¢å¤§å° = 2<sup>12</sup>Bï¼Œé¡µè¡¨é¡¹å¤§å° = 4Bï¼Œåˆ™æ¯ä¸ªé¡µé¢å¯å­˜æ”¾2<sup>12</sup> / 4 = 2<sup>10</sup>ä¸ªé¡µè¡¨é¡¹</li><li>å› æ­¤å„çº§é¡µè¡¨æœ€å¤šåŒ…å«2<sup>10</sup>ä¸ªé¡µè¡¨é¡¹ï¼Œéœ€è¦10ä½äºŒè¿›åˆ¶ä½æ‰èƒ½æ˜ å°„åˆ°2<sup>10</sup>ä¸ªé¡µè¡¨é¡¹</li><li>å› æ­¤æ¯ä¸€çº§çš„é¡µè¡¨å¯¹åº”é¡µå·åº”ä¸º10ä½ï¼Œæ€»å…±28ä½çš„é¡µå·è‡³å°‘è¦åˆ†ä¸ºä¸‰çº§<ul><li>å¦‚æœåªåˆ†ä¸ºä¸¤çº§é¡µè¡¨ï¼Œåˆ™ä¸€çº§é¡µå·å  18 ä½ï¼Œä¹Ÿå°±æ˜¯è¯´é¡µç›®å½•è¡¨ä¸­æœ€å¤šå¯èƒ½æœ‰2<sup>18</sup> ä¸ªé¡µè¡¨é¡¹ï¼Œæ˜¾ç„¶ï¼Œä¸€ä¸ªé¡µé¢æ˜¯æ”¾ä¸ä¸‹è¿™ä¹ˆå¤šé¡µè¡¨é¡¹çš„</li></ul></li></ul></li></ul></li><li>ä¸¤çº§é¡µè¡¨çš„è®¿å­˜æ¬¡æ•°åˆ†æï¼ˆå‡è®¾æ²¡æœ‰å¿«è¡¨æœºæ„ï¼‰<ul><li>ç¬¬ä¸€æ¬¡è®¿å­˜ï¼šè®¿é—®å†…å­˜ä¸­çš„é¡µç›®å½•è¡¨</li><li>ç¬¬äºŒæ¬¡è®¿å­˜ï¼šè®¿é—®å†…å­˜ä¸­çš„äºŒçº§é¡µè¡¨</li><li>ç¬¬ä¸‰æ¬¡è®¿å­˜ï¼šè®¿é—®ç›®æ ‡å†…å­˜å•å…ƒ</li></ul></li></ul><h2 id="åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼"><strong>10.åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†æ–¹å¼</strong></h2><ul><li><p><strong>åŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†</strong>ï¼š<strong>ä¸â€œåˆ†é¡µâ€æœ€å¤§çš„åŒºåˆ«å°±æ˜¯-- ç¦»æ•£åˆ†é…æ—¶æ‰€åˆ†é…åœ°å€ç©ºé—´çš„åŸºæœ¬å•ä½ä¸åŒ</strong></p></li><li><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121172738208.png"></p></li></ul><h3 id="åˆ†æ®µ">10.1 <strong>åˆ†æ®µ</strong></h3><ul><li><p>è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼šæŒ‰ç…§ç¨‹åº<strong>è‡ªèº«çš„é€»è¾‘</strong>å…³ç³»<strong>åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µ</strong>ï¼Œæ¯ä¸ªæ®µéƒ½æœ‰ä¸€ä¸ªæ®µåï¼ˆåœ¨ä½çº§è¯­è¨€ä¸­ï¼Œç¨‹åºå‘˜ä½¿ç”¨æ®µåæ¥ç¼–ç¨‹ï¼‰ï¼Œ<strong>æ¯æ®µä»0å¼€å§‹ç¼–å€</strong></p></li><li><p>å†…å­˜åˆ†é…è§„åˆ™ï¼šä»¥æ®µä¸ºå•ä½è¿›è¡Œåˆ†é…ï¼Œ<strong>æ¯ä¸ªæ®µåœ¨å†…å­˜ä¸­å æ®è¿ç»­ç©ºé—´ï¼Œä½†å„æ®µä¹‹é—´å¯ä»¥ä¸ç›¸é‚»</strong></p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121171112237.png"></p><ul><li>åˆ†æ®µç³»ç»Ÿçš„<strong>é€»è¾‘åœ°å€</strong>ç»“æ„ç”±<strong>æ®µå·ï¼ˆæ®µåï¼‰</strong>å’Œ<strong>æ®µå†…åœ°å€ï¼ˆæ®µå†…åç§»é‡ï¼‰</strong>ç»„æˆã€‚å¦‚ï¼š</li></ul><h3 id="æ®µè¡¨">10.2 <strong>æ®µè¡¨</strong></h3><ul><li>ç¨‹åºåˆ†å¤šä¸ªæ®µï¼Œå„æ®µç¦»æ•£åœ°è£…å…¥å†…å­˜ï¼Œä¸ºäº†ä¿è¯ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œï¼Œå°±å¿…é¡»èƒ½ä»ç‰©ç†å†…å­˜ä¸­æ‰¾åˆ°å„ä¸ªé€»è¾‘æ®µçš„å­˜æ”¾ä½ç½®ã€‚ä¸ºæ­¤ï¼Œéœ€ä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹ä¸€å¼ æ®µæ˜ å°„è¡¨ï¼Œç®€ç§°â€œ<strong>æ®µè¡¨</strong>â€</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121171506496.png"></p><h3 id="åˆ†æ®µåˆ†é¡µç®¡ç†çš„åŒºåˆ«">10.3<strong>åˆ†æ®µã€åˆ†é¡µç®¡ç†çš„åŒºåˆ«</strong></h3><ul><li><p><strong>é¡µ</strong>æ˜¯<strong>ä¿¡æ¯çš„ç‰©ç†å•ä½</strong>ã€‚åˆ†é¡µçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®ç°ç¦»æ•£åˆ†é…ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡ã€‚åˆ†é¡µä»…ä»…æ˜¯ç³»ç»Ÿç®¡ç†ä¸Šçš„éœ€è¦ï¼Œå®Œå…¨æ˜¯ç³»ç»Ÿè¡Œä¸ºï¼Œ<strong>å¯¹ç”¨æˆ·æ˜¯ä¸å¯è§çš„</strong></p></li><li><p><strong>æ®µ</strong>æ˜¯<strong>ä¿¡æ¯çš„é€»è¾‘å•ä½</strong>ã€‚åˆ†æ®µçš„ä¸»è¦ç›®çš„æ˜¯æ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€‚ä¸€ä¸ªæ®µé€šå¸¸åŒ…å«ç€ä¸€ç»„å±äºä¸€ä¸ªé€»è¾‘æ¨¡å—çš„ä¿¡æ¯ã€‚<strong>åˆ†æ®µå¯¹ç”¨æˆ·æ˜¯å¯è§çš„</strong>ï¼Œç”¨æˆ·ç¼–ç¨‹æ—¶éœ€è¦æ˜¾å¼åœ°ç»™å‡ºæ®µå</p></li><li><p>é¡µçš„å¤§å°å›ºå®šä¸”ç”±ç³»ç»Ÿå†³å®šã€‚æ®µçš„é•¿åº¦å´ä¸å›ºå®šï¼Œå†³å®šäºç”¨æˆ·ç¼–å†™çš„ç¨‹åº</p></li><li><p><strong>åˆ†é¡µ</strong>çš„ç”¨æˆ·è¿›ç¨‹<strong>åœ°å€ç©ºé—´æ˜¯ä¸€ç»´çš„</strong>ï¼Œç¨‹åºå‘˜åªéœ€ç»™å‡ºä¸€ä¸ªè®°å¿†ç¬¦å³å¯è¡¨ç¤ºä¸€ä¸ªåœ°å€</p></li><li><p><strong>åˆ†æ®µ</strong>çš„ç”¨æˆ·è¿›ç¨‹<strong>åœ°å€ç©ºé—´æ˜¯äºŒç»´çš„</strong>ï¼Œç¨‹åºå‘˜åœ¨æ ‡è¯†ä¸€ä¸ªåœ°å€æ—¶ï¼Œæ—¢è¦ç»™å‡ºæ®µåï¼Œä¹Ÿè¦ç»™å‡ºæ®µå†…åœ°å€</p></li><li><p><strong>åˆ†æ®µ</strong>æ¯”åˆ†é¡µ<strong>æ›´å®¹æ˜“å®ç°ä¿¡æ¯çš„å…±äº«å’Œä¿æŠ¤</strong></p><ul><li>åªéœ€è®©å„è¿›ç¨‹çš„æ®µè¡¨é¡¹æŒ‡å‘åŒä¸€ä¸ªæ®µå³å¯å®ç°å…±äº«ï¼›é¡µé¢ä¸æ˜¯æŒ‰é€»è¾‘æ¨¡å—åˆ’åˆ†çš„ï¼Œè¿™å°±å¾ˆéš¾å®ç°å…±äº«</li><li>ä¸èƒ½è¢«ä¿®æ”¹çš„ä»£ç ç§°ä¸º<strong>çº¯ä»£ç </strong>æˆ–<strong>å¯é‡å…¥ä»£ç </strong>ï¼ˆä¸å±äºä¸´ç•Œèµ„æºï¼‰ï¼Œè¿™æ ·çš„ä»£ç æ˜¯å¯ä»¥å…±äº«çš„ã€‚å¯ä¿®æ”¹çš„ä»£ç æ˜¯ä¸èƒ½å…±äº«çš„ï¼ˆæ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªä»£ç æ®µä¸­æœ‰å¾ˆå¤šå˜é‡ï¼Œå„è¿›ç¨‹å¹¶å‘åœ°åŒæ—¶è®¿é—®å¯èƒ½é€ æˆæ•°æ®ä¸ä¸€è‡´ï¼‰</li></ul></li><li><p><strong>è®¿é—®ä¸€ä¸ªé€»è¾‘åœ°å€éœ€è¦å‡ æ¬¡è®¿å­˜</strong>ï¼Ÿ</p><ul><li><strong>åˆ†é¡µï¼ˆå•çº§é¡µè¡¨ï¼‰</strong>ï¼šç¬¬ä¸€æ¬¡è®¿å­˜ --æŸ¥å†…å­˜ä¸­çš„é¡µè¡¨ï¼Œç¬¬äºŒæ¬¡è®¿å­˜ --è®¿é—®ç›®æ ‡å†…å­˜å•å…ƒã€‚æ€»å…±<strong>ä¸¤æ¬¡è®¿å­˜</strong></li><li><strong>åˆ†æ®µ</strong>ï¼šç¬¬ä¸€æ¬¡è®¿å­˜ -- æŸ¥å†…å­˜ä¸­çš„æ®µè¡¨ï¼Œç¬¬äºŒæ¬¡è®¿å­˜ --è®¿é—®ç›®æ ‡å†…å­˜å•å…ƒã€‚æ€»å…±<strong>ä¸¤æ¬¡è®¿å­˜</strong></li><li>ä¸åˆ†é¡µç³»ç»Ÿç±»ä¼¼ï¼Œåˆ†æ®µç³»ç»Ÿä¸­ä¹Ÿå¯ä»¥å¼•å…¥<strong>å¿«è¡¨</strong>æœºæ„ï¼Œå°†è¿‘æœŸè®¿é—®è¿‡çš„æ®µè¡¨é¡¹æ”¾åˆ°å¿«è¡¨ä¸­ï¼Œè¿™æ ·å¯ä»¥å°‘ä¸€æ¬¡è®¿é—®ï¼ŒåŠ å¿«åœ°å€å˜æ¢é€Ÿåº¦</li></ul></li></ul><h2 id="æ®µé¡µå¼ç®¡ç†æ–¹å¼"><strong>11. æ®µé¡µå¼ç®¡ç†æ–¹å¼</strong></h2><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121182311141.png"></p><h3 id="åˆ†é¡µåˆ†æ®µçš„ä¼˜ç¼ºç‚¹åˆ†æ">11.1<strong>åˆ†é¡µã€åˆ†æ®µçš„ä¼˜ç¼ºç‚¹åˆ†æ</strong></h3><table><thead><tr><th style="text-align: center;"></th><th style="text-align: center;"><strong>ä¼˜ç‚¹</strong></th><th style="text-align: center;"><strong>ç¼ºç‚¹</strong></th></tr></thead><tbody><tr><td style="text-align: center;">åˆ†é¡µç®¡ç†</td><td style="text-align: center;">å†…å­˜ç©ºé—´åˆ©ç”¨ç‡é«˜ï¼Œ<strong>ä¸ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡</strong>ï¼Œåªä¼šæœ‰å°‘é‡çš„é¡µå†…ç¢ç‰‡</td><td style="text-align: center;">ä¸æ–¹ä¾¿æŒ‰ç…§é€»è¾‘æ¨¡å—å®ç°ä¿¡æ¯çš„å…±äº«å’Œä¿æŠ¤</td></tr><tr><td style="text-align: center;">åˆ†æ®µç®¡ç†</td><td style="text-align: center;">å¾ˆæ–¹ä¾¿æŒ‰ç…§é€»è¾‘æ¨¡å—å®ç°ä¿¡æ¯çš„å…±äº«å’Œä¿æŠ¤</td><td style="text-align: center;">å¦‚æœæ®µé•¿è¿‡å¤§ï¼Œä¸ºå…¶åˆ†é…å¾ˆå¤§çš„è¿ç»­ç©ºé—´ä¼šå¾ˆä¸æ–¹ä¾¿ã€‚å¦å¤–ï¼Œæ®µå¼ç®¡ç†<strong>ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡</strong></td></tr></tbody></table><ul><li>åˆ†æ®µç®¡ç†ä¸­äº§ç”Ÿçš„å¤–éƒ¨ç¢ç‰‡ä¹Ÿå¯ä»¥ç”¨â€œ<strong>ç´§å‡‘</strong>â€æ¥è§£å†³ï¼Œåªæ˜¯éœ€è¦ä»˜å‡ºè¾ƒå¤§çš„æ—¶é—´ä»£ä»·</li></ul><h3 id="åˆ†æ®µ-åˆ†é¡µ-æ®µé¡µå¼ç®¡ç†">11.2 <strong>åˆ†æ®µ + åˆ†é¡µ =æ®µé¡µå¼ç®¡ç†</strong></h3><ul><li>å°†è¿›ç¨‹æŒ‰é€»è¾‘æ¨¡å—åˆ†æ®µï¼Œå†å°†å„æ®µåˆ†é¡µï¼ˆå¦‚æ¯ä¸ªé¡µé¢4KB)</li><li>å†å°†å†…å­˜ç©ºé—´åˆ†ä¸ºå¤§å°ç›¸åŒçš„å†…å­˜å—/é¡µæ¡†/é¡µå¸§/ç‰©ç†å—</li><li>è¿›ç¨‹å‰å°†å„é¡µé¢åˆ†åˆ«è£…å…¥å„å†…å­˜å—ä¸­</li></ul><h3 id="æ®µé¡µå¼ç®¡ç†çš„é€»è¾‘åœ°å€ç»“æ„">11.3<strong>æ®µé¡µå¼ç®¡ç†çš„é€»è¾‘åœ°å€ç»“æ„</strong></h3><ul><li><strong>åˆ†æ®µç³»ç»Ÿ</strong>çš„<strong>é€»è¾‘åœ°å€</strong>ç»“æ„ç”±<strong>æ®µå·ï¼ˆæ®µåï¼‰</strong>å’Œ<strong>æ®µå†…åœ°å€ï¼ˆæ®µå†…åç§»é‡ï¼‰</strong>ç»„æˆã€‚å¦‚ï¼š</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121181503259.png"></p><ul><li><strong>æ®µé¡µå¼ç³»ç»Ÿ</strong>çš„<strong>é€»è¾‘åœ°å€</strong>ç»“æ„ç”±<strong>æ®µå·</strong>ã€<strong>é¡µå·</strong>ã€<strong>é¡µå†…åœ°å€ï¼ˆé¡µå†…åç§»é‡ï¼‰</strong>ç»„æˆã€‚å¦‚ï¼š<ul><li>æ®µå·çš„ä½æ•°å†³å®šäº†æ¯ä¸ªè¿›ç¨‹æœ€å¤šå¯ä»¥åˆ†å‡ ä¸ªæ®µ</li><li>é¡µå·ä½æ•°å†³å®šäº†æ¯ä¸ªæ®µæœ€å¤§æœ‰å¤šå°‘é¡µ</li><li>é¡µå†…åç§»é‡å†³å®šäº†é¡µé¢å¤§å°ã€å†…å­˜å—å¤§å°æ˜¯å¤šå°‘</li></ul></li><li>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œè‹¥ç³»ç»Ÿæ˜¯æŒ‰å­—èŠ‚å¯»å€çš„ï¼Œåˆ™<ul><li>æ®µå·å 16ä½ï¼Œå› æ­¤åœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹æœ€å¤šæœ‰216=64Kä¸ªæ®µ</li><li>é¡µå·å 4ä½ï¼Œå› æ­¤æ¯ä¸ªæ®µæœ€å¤šæœ‰24=16é¡µ</li><li>é¡µå†…åç§»é‡å 12ä½ï¼Œå› æ­¤æ¯ä¸ªé¡µé¢æ¯ä¸ªå†…å­˜å—å¤§å°ä¸º212=4096=4KB</li></ul></li></ul><h3 id="æ®µè¡¨é¡µè¡¨">11.4 <strong>æ®µè¡¨ã€é¡µè¡¨</strong></h3><ul><li>æ¯ä¸ªæ®µå¯¹åº”ä¸€ä¸ªæ®µè¡¨é¡¹ï¼Œæ¯ä¸ªæ®µè¡¨é¡¹ç”±æ®µå·ã€é¡µè¡¨é•¿åº¦ã€é¡µè¡¨å­˜æ”¾å—å·ï¼ˆé¡µè¡¨èµ·å§‹åœ°å€)ç»„æˆã€‚æ¯ä¸ªæ®µè¡¨é¡¹é•¿åº¦ç›¸ç­‰ï¼Œæ®µå·æ˜¯éšå«çš„ã€‚</li><li>æ¯ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªé¡µè¡¨é¡¹ï¼Œæ¯ä¸ªé¡µè¡¨é¡¹ç”±é¡µå·ã€é¡µé¢å­˜æ”¾çš„å†…å­˜å—å·ç»„æˆã€‚æ¯ä¸ªé¡µè¡¨é¡¹é•¿åº¦ç›¸ç­‰ï¼Œé¡µå·æ˜¯éšå«çš„ã€‚</li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121181902465.png"></p><h3 id="æ®µé¡µå¼ç®¡ç†åœ°å€å˜æ¢è¿‡ç¨‹">11.5<strong>æ®µé¡µå¼ç®¡ç†åœ°å€å˜æ¢è¿‡ç¨‹</strong></h3><ul><li><p>æ ¹æ®é€»è¾‘åœ°å€å¾—åˆ°æ®µå·ã€é¡µå·ã€é¡µå†…åç§»é‡</p></li><li><p>åˆ¤æ–­æ®µå·æ˜¯å¦è¶Šç•Œã€‚è‹¥Sâ‰¥M,åˆ™äº§ç”Ÿè¶Šç•Œä¸­æ–­ï¼Œå¦åˆ™ç»§ç»­æ‰§è¡Œ</p></li><li><p>æŸ¥è¯¢æ®µè¡¨æ‰¾åˆ°å¯¹åº”çš„æ®µè¡¨é¡¹ï¼Œæ®µè¡¨é¡¹çš„å­˜æ”¾åœ°å€ä¸ºF+S*æ®µè¡¨é¡¹é•¿åº¦</p></li><li><p>æ£€æŸ¥é¡µå·æ˜¯å¦è¶Šç•Œï¼Œè‹¥é¡µå·â‰¥é¡µè¡¨é•¿åº¦ï¼Œåˆ™å‘ç”Ÿè¶Šç•Œä¸­æ–­ï¼Œå¦åˆ™ç»§ç»­æ‰§è¡Œ</p></li><li><p>æ ¹æ®é¡µè¡¨å­˜æ”¾å—å·ã€é¡µå·æŸ¥è¯¢é¡µè¡¨æ‰¾åˆ°å¯¹åº”é¡µè¡¨é¡¹</p></li><li><p>æ ¹æ®å†…å­˜å—å·é¡µå†…åç§»é‡å¾—åˆ°æœ€ç»ˆçš„ç‰©ç†åœ°å€</p></li><li><p>è®¿é—®ç›®æ ‡å†…å­˜å•å…ƒ</p></li></ul><p><img src="/2024/11/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3-1-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5/image-20241121182242000.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.4 æ­»é”</title>
    <link href="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/"/>
    <url>/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/</url>
    
    <content type="html"><![CDATA[<h1 id="æ­»é”"><strong>2.4 æ­»é”</strong></h1><h2 id="æ­»é”çš„æ¦‚å¿µ"><strong>1. æ­»é”çš„æ¦‚å¿µ</strong></h2><h3 id="ä»€ä¹ˆæ˜¯æ­»é”">1.1 <strong>ä»€ä¹ˆæ˜¯æ­»é”?</strong></h3><ul><li><p>åœ¨å¹¶å‘ç¯å¢ƒä¸‹ï¼Œå„è¿›ç¨‹å› ç«äº‰èµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…å¯¹æ–¹æ‰‹é‡Œçš„èµ„æºï¼Œå¯¼è‡´å„è¿›ç¨‹éƒ½é˜»å¡ï¼Œéƒ½æ— æ³•å‘å‰æ¨è¿›çš„ç°è±¡ï¼Œå°±æ˜¯â€œ<strong>æ­»é”</strong>â€œ</p></li><li><p>å‘ç”Ÿæ­»é”åè‹¥æ— å¤–åŠ›å¹²æ¶‰ï¼Œè¿™äº›è¿›ç¨‹éƒ½å°†æ— æ³•å‘å‰æ¨è¿›</p></li></ul><h3 id="æ­»é”é¥¥é¥¿æ­»å¾ªç¯çš„åŒºåˆ«">1.2<strong>æ­»é”ã€é¥¥é¥¿ã€æ­»å¾ªç¯çš„åŒºåˆ«</strong></h3><ul><li><strong>æ­»é”</strong><ul><li>å„è¿›ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹æ‰‹é‡Œçš„èµ„æºï¼Œå¯¼è‡´å„è¿›ç¨‹éƒ½é˜»å¡ï¼Œæ— æ³•å‘å‰æ¨è¿›çš„ç°è±¡</li></ul></li><li><strong>é¥¥é¥¿</strong><ul><li>ç”±äºé•¿æœŸå¾—ä¸åˆ°æƒ³è¦çš„èµ„æºï¼ŒæŸè¿›ç¨‹æ— æ³•å‘å‰æ¨è¿›çš„ç°è±¡ã€‚</li><li>æ¯”å¦‚: åœ¨çŸ­è¿›ç¨‹ä¼˜å…ˆ(SPF)ç®—æ³•ä¸­ï¼Œè‹¥æœ‰æºæºä¸æ–­çš„çŸ­è¿›ç¨‹åˆ°æ¥ï¼Œåˆ™é•¿è¿›ç¨‹å°†ä¸€ç›´å¾—ä¸åˆ°å¤„ç†æœºï¼Œä»è€Œå‘ç”Ÿé•¿è¿›ç¨‹â€œé¥¥é¥¿â€</li></ul></li><li><strong>æ­»å¾ªç¯</strong><ul><li>æŸè¿›ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸€ç›´è·³ä¸å‡ºæŸä¸ªå¾ªç¯çš„ç°è±¡ã€‚æœ‰æ—¶æ˜¯å› ä¸ºç¨‹åºé€»è¾‘bugå¯¼è‡´çš„ï¼Œæœ‰æ—¶æ˜¯ç¨‹åºå‘˜æ•…æ„è®¾è®¡çš„</li></ul></li></ul><table><thead><tr><th></th><th style="text-align: center;"><strong>å…±åŒç‚¹</strong></th><th style="text-align: center;"><strong>åŒºåˆ«</strong></th></tr></thead><tbody><tr><td>æ­»é”</td><td style="text-align: center;">éƒ½æ˜¯è¿›ç¨‹æ— æ³•é¡ºåˆ©å‘å‰æ¨è¿›çš„ç°è±¡(æ•…æ„è®¾è®¡çš„æ­»å¾ªç¯é™¤å¤–)</td><td style="text-align: center;">æ­»é”ä¸€å®šæ˜¯â€œå¾ªç¯ç­‰å¾…å¯¹æ–¹æ‰‹é‡Œçš„èµ„æºâ€å¯¼è‡´çš„ï¼Œå› æ­¤å¦‚æœæœ‰æ­»é”ç°è±¡ï¼Œé‚£è‡³å°‘æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åŒæ—¶å‘ç”Ÿæ­»é”ã€‚å¦å¤–ï¼Œå‘ç”Ÿæ­»é”çš„è¿›ç¨‹ä¸€å®šå¤„äºé˜»å¡æ€</td></tr><tr><td>é¥¥é¥¿</td><td style="text-align: center;"></td><td style="text-align: center;">å¯èƒ½åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‘ç”Ÿé¥¥é¥¿ã€‚å‘ç”Ÿé¥¥é¥¿çš„è¿›ç¨‹æ—¢å¯èƒ½æ˜¯é˜»å¡æ€(å¦‚é•¿æœŸå¾—ä¸åˆ°éœ€è¦çš„I/0è®¾å¤‡)ï¼Œä¹Ÿå¯èƒ½æ˜¯å°±ç»ªæ€(é•¿æœŸå¾—ä¸åˆ°å¤„ç†æœº)</td></tr><tr><td>æ­»å¾ªç¯</td><td style="text-align: center;"></td><td style="text-align: center;">å¯èƒ½åªæœ‰ä¸€ä¸ªè¿›ç¨‹å‘ç”Ÿæ­»å¾ªç¯ã€‚æ­»å¾ªç¯çš„è¿›ç¨‹å¯ä»¥ä¸Šå¤„ç†æœºè¿è¡Œ(å¯ä»¥æ˜¯è¿è¡Œæ€)ï¼Œåªä¸è¿‡æ— æ³•åƒæœŸå¾…çš„é‚£æ ·é¡ºåˆ©æ¨è¿›ã€‚æ­»é”å’Œé¥¥é¥¿é—®é¢˜æ˜¯ç”±äºæ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„ç­–ç•¥ä¸åˆç†å¯¼è‡´çš„ï¼Œè€Œæ­»å¾ªç¯æ˜¯ç”±ä»£ç é€»è¾‘çš„é”™è¯¯å¯¼è‡´çš„ã€‚æ­»é”åˆ©é¥¥é¥¿æ˜¯ç®¡ç†è€…(æ“ä½œç³»ç»Ÿ)çš„é—®é¢˜ï¼Œæ­»å¾ªç¯æ˜¯è¢«ç®¡ç†è€…çš„é—®é¢˜</td></tr></tbody></table><h3 id="æ­»é”äº§ç”Ÿçš„å¿…è¦æ¡ä»¶">1.3 <strong>æ­»é”äº§ç”Ÿçš„å¿…è¦æ¡ä»¶</strong></h3><ul><li><p>äº§ç”Ÿæ­»é”å¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹å››ä¸ªæ¡ä»¶ï¼Œåªè¦å…¶ä¸­ä»»ä¸€æ¡ä»¶ä¸æˆç«‹ï¼Œæ­»é”å°±ä¸ä¼šå‘ç”Ÿ</p></li><li><p><strong>äº’æ–¥æ¡ä»¶</strong></p><ul><li>åªæœ‰å¯¹å¿…é¡»äº’æ–¥ä½¿ç”¨çš„èµ„æºçš„äº‰æŠ¢æ‰ä¼šå¯¼è‡´æ­»é”(å¦‚å“²å­¦å®¶çš„ç­·å­ã€æ‰“å°æœºè®¾å¤‡)</li><li>åƒå†…å­˜ã€æ‰¬å£°å™¨è¿™æ ·å¯ä»¥åŒæ—¶è®©å¤šä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºæ˜¯ä¸ä¼šå¯¼è‡´æ­»é”çš„(å› ä¸ºè¿›ç¨‹ä¸ç”¨é˜»å¡ç­‰å¾…è¿™ç§èµ„æº)</li></ul></li><li><p><strong>ä¸å‰¥å¤ºæ¡ä»¶</strong></p><ul><li>è¿›ç¨‹æ‰€è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½ç”±å…¶ä»–è¿›ç¨‹å¼ºè¡Œå¤ºèµ°ï¼Œåªèƒ½ä¸»åŠ¨é‡Šæ”¾</li></ul></li><li><p><strong>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</strong></p><ul><li>è¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºåˆè¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†åˆå¯¹è‡ªå·±å·²æœ‰çš„èµ„æºä¿æŒä¸æ”¾</li></ul></li><li><p><strong>å¾ªç¯ç­‰å¾…æ¡ä»¶</strong></p><ul><li>å­˜åœ¨ä¸€ç§è¿›ç¨‹èµ„æºçš„å¾ªç¯ç­‰å¾…é“¾ï¼Œé“¾ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹å·²è·å¾—çš„èµ„æºåŒæ—¶è¢«ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€è¯·æ±‚</li></ul></li><li><p><strong>æ³¨æ„</strong>:</p><ul><li><strong>å‘ç”Ÿæ­»é”æ—¶ä¸€å®šæœ‰å¾ªç¯ç­‰å¾…ï¼Œä½†æ˜¯å‘ç”Ÿå¾ªç¯ç­‰å¾…æ—¶æœªå¿…æ­»é”(å¾ªç¯ç­‰å¾…æ˜¯æ­»é”çš„å¿…è¦ä¸å……åˆ†æ¡ä»¶)</strong></li><li>å¦‚æœåŒç±»èµ„æºæ•°å¤§äº1ï¼Œåˆ™å³ä½¿æœ‰å¾ªç¯ç­‰å¾…ï¼Œä¹Ÿæœªå¿…å‘ç”Ÿæ­»é”ã€‚ä½†å¦‚æœç³»ç»Ÿä¸­æ¯ç±»èµ„æºéƒ½åªæœ‰ä¸€ä¸ªï¼Œé‚£å¾ªç¯ç­‰å¾…å°±æ˜¯æ­»é”çš„å……åˆ†å¿…è¦æ¡ä»¶äº†</li></ul></li></ul><h3 id="ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿæ­»é”">1.4<strong>ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿæ­»é”?</strong></h3><ul><li><p>å¯¹ç³»ç»Ÿèµ„æºçš„ç«äº‰ã€‚å„è¿›ç¨‹å¯¹ä¸å¯å‰¥å¤ºçš„èµ„æº(å¦‚æ‰“å°æœº)çš„ç«äº‰å¯èƒ½å¼•èµ·æ­»é”ï¼Œå¯¹å¯å‰¥å¤ºçš„èµ„æº(CPU)çš„ç«äº‰æ˜¯ä¸ä¼šå¼•èµ·æ­»é”çš„</p></li><li><p>è¿›ç¨‹æ¨è¿›é¡ºåºéæ³•ã€‚è¯·æ±‚å’Œé‡Šæ”¾èµ„æºçš„é¡ºåºä¸å½“ï¼Œä¹ŸåŒæ ·ä¼šå¯¼è‡´æ­»é”ã€‚ä¾‹å¦‚ï¼Œå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹P1ã€P2åˆ†åˆ«ç”³è¯·å¹¶å æœ‰äº†èµ„æºR1ã€R2ï¼Œä¹‹åè¿›ç¨‹P1åˆç´§æ¥ç€ç”³è¯·èµ„æºR2ï¼Œè€Œè¿›ç¨‹P2åˆç”³è¯·èµ„æºR1ï¼Œä¸¤è€…ä¼šå› ä¸ºç”³è¯·çš„èµ„æºè¢«å¯¹æ–¹å æœ‰è€Œé˜»å¡ï¼Œä»è€Œå‘ç”Ÿæ­»é”</p></li><li><p>ä¿¡å·é‡çš„ä½¿ç”¨ä¸å½“ä¹Ÿä¼šé€ æˆæ­»é”ã€‚å¦‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œå¦‚æœå®ç°äº’æ–¥çš„Pæ“ä½œåœ¨å®ç°åŒæ­¥çš„Pæ“ä½œä¹‹å‰ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æ­»é”ã€‚(å¯ä»¥æŠŠäº’æ–¥ä¿¡å·é‡ã€åŒæ­¥ä¿¡å·é‡ä¹Ÿçœ‹åšæ˜¯ä¸€ç§æŠ½è±¡çš„ç³»ç»Ÿèµ„æº)</p></li><li><p>æ€»ä¹‹ï¼Œ<strong>å¯¹ä¸å¯å‰¥å¤ºèµ„æºçš„ä¸åˆç†åˆ†é…ï¼Œå¯èƒ½å¯¼è‡´æ­»é”</strong></p></li></ul><h3 id="æ­»é”çš„å¤„ç†ç­–ç•¥">1.5 <strong>æ­»é”çš„å¤„ç†ç­–ç•¥</strong></h3><ul><li><strong>é¢„é˜²æ­»é”</strong><ul><li>ç ´åæ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ª</li></ul></li><li><strong>é¿å…æ­»é”</strong><ul><li>ç”¨æŸç§æ–¹æ³•é˜²æ­¢ç³»ç»Ÿè¿›å…¥<strong>ä¸å®‰å…¨çŠ¶æ€</strong>ï¼Œä»è€Œé¿å…æ­»é”ï¼ˆé“¶è¡Œå®¶ç®—æ³•ï¼‰</li></ul></li><li><strong>æ­»é”çš„æ£€æµ‹å’Œè§£é™¤</strong><ul><li>å…è®¸æ­»é”çš„å‘ç”Ÿï¼Œä¸è¿‡æ“ä½œç³»ç»Ÿä¼šè´Ÿè´£æ£€æµ‹å‡ºæ­»é”çš„å‘ç”Ÿï¼Œç„¶åé‡‡å–æŸç§æªæ–½è§£é™¤æ­»é”</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/image-20241120201152743.png"></p><h2 id="æ­»é”çš„å¤„ç†ç­–ç•¥-1"><strong>2. æ­»é”çš„å¤„ç†ç­–ç•¥</strong></h2><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/image-20241120201628724.png"></p><h3 id="é¢„é˜²æ­»é”">2.1 <strong>é¢„é˜²æ­»é”</strong></h3><figure><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/image-20241120202659002.png" alt="image-20241120202659002"><figcaption aria-hidden="true">image-20241120202659002</figcaption></figure><h4 id="ç ´åäº’æ–¥æ¡ä»¶">2.1.1 <strong>ç ´åäº’æ–¥æ¡ä»¶</strong></h4><ul><li><strong>äº’æ–¥æ¡ä»¶</strong><ul><li>åªæœ‰å¯¹å¿…é¡»äº’æ–¥ä½¿ç”¨çš„èµ„æºçš„äº‰æŠ¢æ‰ä¼šå¯¼è‡´æ­»é”</li></ul></li><li>ç ´åäº’æ–¥æ¡ä»¶:<ul><li>å¦‚æœæŠŠåªèƒ½äº’æ–¥ä½¿ç”¨çš„èµ„æºæ”¹é€ ä¸ºå…è®¸å…±äº«ä½¿ç”¨ï¼Œåˆ™ç³»ç»Ÿä¸ä¼šè¿›å…¥æ­»é”çŠ¶æ€ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥é‡‡ç”¨<strong>SPOOLing æŠ€æœ¯</strong>æŠŠç‹¬å è®¾å¤‡åœ¨é€»è¾‘ä¸Šæ”¹é€ æˆå…±äº«è®¾å¤‡</li><li>æ¯”å¦‚: ç”¨<strong>SPOOLingæŠ€æœ¯</strong>å°†æ‰“å°æœºæ”¹é€ ä¸ºå…±äº«è®¾å¤‡</li></ul></li><li>ç¼ºç‚¹:<ul><li>å¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºéƒ½å¯ä»¥æ”¹é€ æˆå¯å…±äº«ä½¿ç”¨çš„èµ„æºã€‚å¹¶ä¸”ä¸ºäº†ç³»ç»Ÿå®‰å…¨ï¼Œå¾ˆå¤šåœ°æ–¹è¿˜å¿…é¡»ä¿æŠ¤è¿™ç§äº’æ–¥æ€§ã€‚å› æ­¤ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ— æ³•ç ´åäº’æ–¥æ¡ä»¶</li></ul></li></ul><h4 id="ç ´åä¸å‰¥å¤ºæ¡ä»¶">2.1.2 <strong>ç ´åä¸å‰¥å¤ºæ¡ä»¶</strong></h4><ul><li><strong>ä¸å‰¥å¤ºæ¡ä»¶</strong><ul><li>è¿›ç¨‹æ‰€è·å¾—çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½ç”±å…¶ä»–è¿›ç¨‹å¼ºè¡Œå¤ºèµ°ï¼Œåªèƒ½ä¸»åŠ¨é‡Šæ”¾</li></ul></li><li>ç ´åä¸å‰¥å¤ºæ¡ä»¶:<ul><li>æ–¹æ¡ˆä¸€:å½“æŸä¸ªè¿›ç¨‹è¯·æ±‚æ–°çš„èµ„æºå¾—ä¸åˆ°æ»¡è¶³æ—¶ï¼Œå®ƒå¿…é¡»ç«‹å³é‡Šæ”¾ä¿æŒçš„æ‰€æœ‰èµ„æºï¼Œå¾…ä»¥åéœ€è¦æ—¶å†é‡æ–°ç”³è¯·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿æŸäº›èµ„æºå°šæœªä½¿ç”¨å®Œï¼Œä¹Ÿéœ€è¦ä¸»åŠ¨é‡Šæ”¾ï¼Œä»è€Œç ´åäº†ä¸å¯å‰¥å¤ºæ¡ä»¶</li><li>æ–¹æ¡ˆäºŒ:å½“æŸä¸ªè¿›ç¨‹éœ€è¦çš„èµ„æºè¢«å…¶ä»–è¿›ç¨‹æ‰€å æœ‰çš„æ—¶å€™ï¼Œå¯ä»¥ç”±æ“ä½œç³»ç»ŸååŠ©ï¼Œå°†æƒ³è¦çš„èµ„æºå¼ºè¡Œå‰¥å¤ºã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬éœ€è¦è€ƒè™‘å„è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼ˆæ¯”å¦‚ï¼šå‰¥å¤ºè°ƒåº¦æ–¹å¼ï¼Œå°±æ˜¯å°†å¤„ç†æœºèµ„æºå¼ºè¡Œå‰¥å¤ºç»™ä¼˜å…ˆçº§æ›´é«˜çš„è¿›ç¨‹ä½¿ç”¨ï¼‰</li></ul></li><li>ç¼ºç‚¹:<ul><li>å®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚å§</li><li>é‡Šæ”¾å·²è·å¾—çš„èµ„æºå¯èƒ½é€ æˆå‰ä¸€é˜¶æ®µå·¥ä½œçš„å¤±æ•ˆã€‚å› æ­¤è¿™ç§æ–¹æ³•ä¸€èˆ¬åªé€‚ç”¨äºæ˜“ä¿å­˜å’Œæ¢å¤çŠ¶æ€çš„èµ„æºï¼Œå¦‚CPU</li><li>åå¤åœ°ç”³è¯·å’Œé‡Šæ”¾èµ„æºä¼šå¢åŠ ç³»ç»Ÿå¼€é”€ï¼Œé™ä½ç³»ç»Ÿååé‡</li><li>è‹¥é‡‡ç”¨æ–¹æ¡ˆä¸€ï¼Œæ„å‘³ç€åªè¦æš‚æ—¶å¾—ä¸åˆ°æŸä¸ªèµ„æºï¼Œä¹‹å‰è·å¾—çš„é‚£äº›èµ„æºå°±éƒ½éœ€è¦æ”¾å¼ƒï¼Œä»¥åå†é‡æ–°ç”³è¯·ã€‚å¦‚æœä¸€ç›´å‘ç”Ÿè¿™æ ·çš„æƒ…å†µï¼Œå°±ä¼šå¯¼è‡´è¿›ç¨‹é¥¥é¥¿</li></ul></li></ul><h4 id="ç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶">2.1.3<strong>ç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶</strong></h4><ul><li><strong>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</strong><ul><li>è¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºåˆè¢«å…¶ä»–è¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹è¢«é˜»å¡ï¼Œä½†åˆå¯¹è‡ªå·±å·²æœ‰çš„èµ„æºä¿æŒä¸æ”¾</li></ul></li><li>ç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶:<ul><li>å¯ä»¥é‡‡ç”¨é™æ€åˆ†é…æ–¹æ³•ï¼Œå³è¿›ç¨‹åœ¨è¿è¡Œå‰ä¸€æ¬¡ç”³è¯·å®Œå®ƒæ‰€éœ€è¦çš„å…¨éƒ¨èµ„æºï¼Œåœ¨å®ƒçš„èµ„æºæœªæ»¡è¶³å‰ï¼Œä¸è®©å®ƒæŠ•å…¥è¿è¡Œã€‚ä¸€æ—¦æŠ•å…¥è¿è¡Œåï¼Œè¿™äº›èµ„æºå°±ä¸€ç›´å½’å®ƒæ‰€æœ‰ï¼Œè¯¥è¿›ç¨‹å°±ä¸ä¼šå†è¯·æ±‚åˆ«çš„ä»»ä½•èµ„æºäº†</li></ul></li><li>ç¼ºç‚¹:<ul><li>è¯¥ç­–ç•¥å®ç°èµ·æ¥ç®€å•ï¼Œä½†ä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹</li><li>æœ‰äº›èµ„æºå¯èƒ½åªéœ€è¦ç”¨å¾ˆçŸ­çš„æ—¶é—´ï¼Œå› æ­¤å¦‚æœè¿›ç¨‹çš„æ•´ä¸ªè¿è¡ŒæœŸé—´éƒ½ä¸€ç›´ä¿æŒç€æ‰€æœ‰èµ„æºï¼Œå°±ä¼šé€ æˆä¸¥é‡çš„èµ„æºæµªè´¹ï¼Œèµ„æºåˆ©ç”¨ç‡æä½ã€‚å¦å¤–ï¼Œè¯¥ç­–ç•¥ä¹Ÿæœ‰å¯èƒ½å¯¼è‡´æŸäº›è¿›ç¨‹é¥¥é¥¿</li></ul></li></ul><h4 id="ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶">2.1.4 <strong>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶</strong></h4><ul><li><strong>å¾ªç¯ç­‰å¾…æ¡ä»¶</strong><ul><li>å­˜åœ¨ä¸€ç§è¿›ç¨‹èµ„æºçš„å¾ªç¯ç­‰å¾…é“¾ï¼Œé“¾ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹å·²è·å¾—çš„èµ„æºåŒæ—¶è¢«ä¸‹ä¸€ä¸ªè¿›ç¨‹æ‰€è¯·æ±‚</li></ul></li><li>ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶<ul><li>å¯é‡‡ç”¨<strong>é¡ºåºèµ„æºåˆ†é…æ³•</strong>ã€‚é¦–å…ˆç»™ç³»ç»Ÿä¸­çš„èµ„æºç¼–å·ï¼Œè§„å®šæ¯ä¸ªè¿›ç¨‹å¿…é¡»æŒ‰ç¼–å·é€’å¢çš„é¡ºåºè¯·æ±‚èµ„æºï¼ŒåŒç±»èµ„æºï¼ˆå³ç¼–å·ç›¸åŒçš„èµ„æºï¼‰ä¸€æ¬¡ç”³è¯·å®Œ</li><li>åŸç†åˆ†æ:<ul><li>ä¸€ä¸ªè¿›ç¨‹åªæœ‰å·²å æœ‰å°ç¼–å·çš„èµ„æºæ—¶ï¼Œæ‰æœ‰èµ„æ ¼ç”³è¯·æ›´å¤§ç¼–å·çš„èµ„æºã€‚æŒ‰æ­¤è§„åˆ™ï¼Œå·²æŒæœ‰å¤§ç¼–å·èµ„æºçš„è¿›ç¨‹ä¸å¯èƒ½é€†å‘åœ°å›æ¥ç”³è¯·å°ç¼–å·çš„èµ„æºï¼Œä»è€Œå°±ä¸ä¼šäº§ç”Ÿå¾ªç¯ç­‰å¾…çš„ç°è±¡</li></ul></li></ul></li><li>ç¼ºç‚¹:<ul><li>ä¸æ–¹ä¾¿å¢åŠ æ–°çš„è®¾å¤‡ï¼Œå› ä¸ºå¯èƒ½éœ€è¦é‡æ–°åˆ†é…æ‰€æœ‰çš„ç¼–å·</li><li>è¿›ç¨‹å®é™…ä½¿ç”¨èµ„æºçš„é¡ºåºå¯èƒ½å’Œç¼–å·é€’å¢é¡ºåºä¸ä¸€è‡´ï¼Œä¼šå¯¼è‡´èµ„æºæµªè´¹</li><li>å¿…é¡»æŒ‰è§„å®šæ¬¡åºç”³è¯·èµ„æºï¼Œç”¨æˆ·ç¼–ç¨‹éº»çƒ¦</li></ul></li></ul><h3 id="é¿å…æ­»é”">2.2 <strong>é¿å…æ­»é”</strong></h3><ul><li><strong>ä»€ä¹ˆæ˜¯å®‰å…¨åºåˆ—?</strong><ul><li>æ‰€è°“<strong>å®‰å…¨åºåˆ—</strong>ï¼Œå°±æ˜¯æŒ‡å¦‚æœç³»ç»ŸæŒ‰ç…§è¿™ç§åºåˆ—åˆ†é…èµ„æºï¼Œåˆ™æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½é¡ºåˆ©å®Œæˆ</li></ul></li><li><strong>å®‰å…¨åºåˆ—ã€ä¸å®‰å…¨çŠ¶æ€ã€æ­»é”çš„è”ç³»</strong><ul><li>åªè¦èƒ½æ‰¾å‡ºä¸€ä¸ªå®‰å…¨åºåˆ—ï¼Œç³»ç»Ÿå°±æ˜¯<strong>å®‰å…¨çŠ¶æ€</strong>ã€‚å½“ç„¶ï¼Œå®‰å…¨åºåˆ—å¯èƒ½æœ‰å¤šä¸ª</li><li>å¦‚æœåˆ†é…äº†èµ„æºä¹‹åï¼Œç³»ç»Ÿä¸­æ‰¾ä¸å‡ºä»»ä½•ä¸€ä¸ªå®‰å…¨åºåˆ—ï¼Œç³»ç»Ÿå°±è¿›å…¥äº†<strong>ä¸å®‰å…¨çŠ¶æ€</strong>ã€‚è¿™å°±æ„å‘³ç€ä¹‹åå¯èƒ½æ‰€æœ‰è¿›ç¨‹éƒ½æ— æ³•é¡ºåˆ©çš„æ‰§è¡Œä¸‹å»ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰è¿›ç¨‹æå‰å½’è¿˜äº†ä¸€äº›èµ„æºï¼Œé‚£ç³»ç»Ÿä¹Ÿæœ‰å¯èƒ½é‡æ–°å›åˆ°å®‰å…¨çŠ¶æ€ï¼Œä¸è¿‡æˆ‘ä»¬åœ¨åˆ†é…èµ„æºä¹‹å‰æ€»æ˜¯è¦è€ƒè™‘åˆ°æœ€åçš„æƒ…å†µ</li><li><strong>å¦‚æœç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼Œå°±ä¸€å®šä¸ä¼šå‘ç”Ÿæ­»é”ã€‚å¦‚æœç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œå°±å¯èƒ½å‘ç”Ÿæ­»é”</strong>ï¼ˆå¤„äºä¸å®‰å…¨çŠ¶æ€æœªå¿…å°±æ˜¯å‘ç”Ÿäº†æ­»é”ï¼Œä½†å‘ç”Ÿæ­»é”æ—¶ä¸€å®šæ˜¯åœ¨ä¸å®‰å…¨çŠ¶æ€ï¼‰</li><li>å› æ­¤å¯ä»¥åœ¨èµ„æºåˆ†é…ä¹‹å‰é¢„å…ˆåˆ¤æ–­è¿™æ¬¡åˆ†é…æ˜¯å¦ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œä»¥æ­¤å†³å®šæ˜¯å¦ç­”åº”èµ„æºåˆ†é…è¯·æ±‚ã€‚è¿™ä¹Ÿæ˜¯â€œ<strong>é“¶è¡Œå®¶ç®—æ³•</strong>â€çš„æ ¸å¿ƒæ€æƒ³</li></ul></li></ul><h4 id="é“¶è¡Œå®¶ç®—æ³•">2.2.1 <strong>é“¶è¡Œå®¶ç®—æ³•</strong></h4><ul><li><p>é“¶è¡Œå®¶ç®—æ³•æ˜¯è·å…°å­¦è€… Dijkstraä¸ºé“¶è¡Œç³»ç»Ÿè®¾è®¡çš„ï¼Œä»¥ç¡®ä¿é“¶è¡Œåœ¨å‘æ”¾ç°é‡‘è´·æ¬¾æ—¶ï¼Œä¸ä¼šå‘ç”Ÿä¸èƒ½æ»¡è¶³æ‰€æœ‰å®¢æˆ·éœ€è¦çš„æƒ…å†µã€‚åæ¥è¯¥ç®—æ³•è¢«ç”¨åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œ<strong>ç”¨äºé¿å…æ­»é”</strong></p></li><li><p><strong>æ ¸å¿ƒæ€æƒ³</strong>:</p><ul><li>åœ¨è¿›ç¨‹æå‡ºèµ„æºç”³è¯·æ—¶ï¼Œå…ˆé¢„åˆ¤æ­¤æ¬¡åˆ†é…æ˜¯å¦ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚å¦‚æœä¼šè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œå°±æš‚æ—¶ä¸ç­”åº”è¿™æ¬¡è¯·æ±‚ï¼Œè®©è¯¥è¿›ç¨‹å…ˆé˜»å¡ç­‰å¾…</li></ul></li><li><p><strong>é“¶è¡Œå®¶ç®—æ³•</strong>:</p><ul><li>æ•°æ®ç»“æ„ï¼š<ul><li>é•¿åº¦ä¸ºmçš„ä¸€ç»´æ•°ç»„Availableè¡¨ç¤ºè¿˜æœ‰å¤šå°‘å¯ç”¨èµ„æº</li><li>n * mçŸ©é˜µMaxè¡¨ç¤ºå„è¿›ç¨‹å¯¹èµ„æºçš„æœ€å¤§éœ€æ±‚æ•°</li><li>n*mçŸ©é˜µAllocationè¡¨ç¤ºå·²ç»ç»™å„è¿›ç¨‹åˆ†é…äº†å¤šå°‘èµ„æº</li><li>Max-Allocation=NeedçŸ©é˜µè¡¨ç¤ºå„è¿›ç¨‹æœ€å¤šè¿˜éœ€è¦å¤šå°‘èµ„æº</li><li>ç”¨é•¿åº¦ä¸ºmçš„ä¸€ä½æ•°ç»„Requestè¡¨ç¤ºè¿›ç¨‹æ­¤æ¬¡ç”³è¯·çš„å„ç§èµ„æºæ•°</li></ul></li><li>é“¶è¡Œå®¶ç®—æ³•æ­¥éª¤ï¼š â‘ æ£€æŸ¥æ­¤æ¬¡ç”³è¯·æ˜¯å¦è¶…è¿‡äº†ä¹‹å‰å£°æ˜çš„æœ€å¤§éœ€æ±‚æ•°â‘¡æ£€æŸ¥æ­¤æ—¶ç³»ç»Ÿå‰©ä½™çš„å¯ç”¨èµ„æºæ˜¯å¦è¿˜èƒ½æ»¡è¶³è¿™æ¬¡è¯·æ±‚â‘¢è¯•æ¢ç€åˆ†é…ï¼Œæ›´æ”¹å„æ•°æ®ç»“æ„â‘£ç”¨å®‰å…¨æ€§ç®—æ³•æ£€æŸ¥æ­¤æ¬¡åˆ†é…æ˜¯å¦ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€</li><li>å®‰å…¨æ€§ç®—æ³•æ­¥éª¤ï¼šæ£€æŸ¥å½“å‰çš„å‰©ä½™å¯ç”¨èµ„æºæ˜¯å¦èƒ½æ»¡è¶³æŸä¸ªè¿›ç¨‹çš„æœ€å¤§éœ€æ±‚ï¼Œå¦‚æœå¯ä»¥ï¼Œå°±æŠŠè¯¥è¿›ç¨‹åŠ å…¥å®‰å…¨åºåˆ—ï¼Œå¹¶æŠŠè¯¥è¿›ç¨‹æŒæœ‰çš„èµ„æºå…¨éƒ¨å›æ”¶ã€‚ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œçœ‹æœ€ç»ˆæ˜¯å¦èƒ½è®©æ‰€æœ‰è¿›ç¨‹éƒ½åŠ å…¥å®‰å…¨åºåˆ—ã€‚</li></ul></li><li><p>ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€æœªå¿…æ­»é”ï¼Œä½†æ­»é”æ—¶ä¸€å®šå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ä¸€å®šä¸ä¼šæ­»é”ã€‚</p></li></ul><h3 id="æ£€æµ‹å’Œè§£é™¤">2.3 <strong>æ£€æµ‹å’Œè§£é™¤</strong></h3><ul><li>å¦‚æœç³»ç»Ÿä¸­æ—¢ä¸é‡‡å–é¢„é˜²æ­»é”çš„æªæ–½ï¼Œä¹Ÿä¸é‡‡å–é¿å…æ­»é”çš„æªæ–½ï¼Œç³»ç»Ÿå°±å¾ˆå¯èƒ½å‘ç”Ÿæ­»é”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç³»ç»Ÿåº”å½“æä¾›ä¸¤ä¸ªç®—æ³•ï¼š<ul><li><strong>æ­»é”æ£€æµ‹ç®—æ³•</strong>:ç”¨äºæ£€æµ‹ç³»ç»ŸçŠ¶æ€ï¼Œä»¥ç¡®å®šç³»ç»Ÿä¸­æ˜¯å¦å‘ç”Ÿäº†æ­»é”</li><li><strong>æ­»é”è§£é™¤ç®—æ³•</strong>:å½“è®¤å®šç³»ç»Ÿä¸­å·²ç»å‘ç”Ÿäº†æ­»é”ï¼Œåˆ©ç”¨è¯¥ç®—æ³•å¯å°†ç³»ç»Ÿä»æ­»é”çŠ¶æ€ä¸­è§£è„±å‡ºæ¥</li></ul></li></ul><h4 id="æ­»é”çš„æ£€æµ‹">2.3.1 <strong>æ­»é”çš„æ£€æµ‹</strong></h4><ul><li>ä¸ºäº†èƒ½å¯¹ç³»ç»Ÿæ˜¯å¦å·²å‘ç”Ÿäº†æ­»é”è¿›è¡Œæ£€æµ‹ï¼Œå¿…é¡»:<ul><li>ç”¨æŸç§æ•°æ®ç»“æ„æ¥ä¿å­˜èµ„æºçš„è¯·æ±‚å’Œåˆ†é…ä¿¡æ¯</li><li>æä¾›ä¸€ç§ç®—æ³•ï¼Œåˆ©ç”¨ä¸Šè¿°ä¿¡æ¯æ¥æ£€æµ‹ç³»ç»Ÿæ˜¯å¦å·²è¿›å…¥æ­»é”çŠ¶æ€</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/image-20241121093444179.png"></p><ul><li><p>å¦‚æœç³»ç»Ÿä¸­å‰©ä½™çš„å¯ç”¨èµ„æºæ•°è¶³å¤Ÿæ»¡è¶³è¿›ç¨‹çš„éœ€æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹æš‚æ—¶æ˜¯ä¸ä¼šé˜»å¡çš„ï¼Œå¯ä»¥é¡ºåˆ©åœ°æ‰§è¡Œä¸‹å»</p></li><li><p>å¦‚æœè¿™ä¸ªè¿›ç¨‹æ‰§è¡Œç»“æŸäº†æŠŠèµ„æºå½’è¿˜ç³»ç»Ÿï¼Œå°±å¯èƒ½ä½¿æŸäº›æ­£åœ¨ç­‰å¾…èµ„æºçš„è¿›ç¨‹è¢«æ¿€æ´»ï¼Œå¹¶é¡ºåˆ©åœ°æ‰§è¡Œä¸‹å»ã€‚ç›¸åº”çš„ï¼Œè¿™äº›è¢«æ¿€æ´»çš„è¿›ç¨‹æ‰§è¡Œå®Œäº†ä¹‹ååˆä¼šå½’è¿˜ä¸€äº›èµ„æºï¼Œè¿™æ ·å¯èƒ½åˆä¼šæ¿€æ´»å¦å¤–ä¸€äº›é˜»å¡çš„è¿›ç¨‹â€¦</p></li><li><p>å¦‚æœæŒ‰ä¸Šè¿°è¿‡ç¨‹åˆ†æï¼Œæœ€ç»ˆèƒ½æ¶ˆé™¤æ‰€æœ‰è¾¹ï¼Œå°±ç§°è¿™ä¸ªå›¾æ˜¯<strong>å¯å®Œå…¨ç®€åŒ–çš„</strong>ã€‚æ­¤æ—¶ä¸€å®šæ²¡æœ‰å‘ç”Ÿæ­»é”ï¼ˆç›¸å½“äºèƒ½æ‰¾åˆ°ä¸€ä¸ªå®‰å…¨åºåˆ—ï¼‰</p></li><li><p>å¦‚æœæœ€ç»ˆä¸èƒ½æ¶ˆé™¤æ‰€æœ‰è¾¹ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æ˜¯å‘ç”Ÿäº†æ­»é”</p></li><li><p><strong>æ£€æµ‹æ­»é”çš„ç®—æ³•</strong></p><ul><li>1ï¼‰åœ¨èµ„æºåˆ†é…å›¾ä¸­ï¼Œæ‰¾å‡ºæ—¢ä¸é˜»å¡åˆä¸æ˜¯å­¤ç‚¹çš„è¿›ç¨‹Piï¼ˆå³æ‰¾å‡ºä¸€æ¡æœ‰å‘è¾¹ä¸å®ƒç›¸è¿ï¼Œä¸”è¯¥æœ‰å‘è¾¹å¯¹åº”èµ„æºçš„ç”³è¯·æ•°é‡å°äºç­‰äºç³»ç»Ÿä¸­å·²æœ‰ç©ºé—²èµ„æºæ•°é‡ã€‚å¦‚ä¸‹å›¾ä¸­ï¼ŒR1æ²¡æœ‰ç©ºé—²èµ„æºï¼ŒR2æœ‰ä¸€ä¸ªç©ºé—²èµ„æºã€‚è‹¥æ‰€æœ‰çš„è¿æ¥è¯¥è¿›ç¨‹çš„è¾¹å‡æ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œåˆ™è¿™ä¸ªè¿›ç¨‹èƒ½ç»§ç»­è¿è¡Œç›´è‡³å®Œæˆï¼Œç„¶åé‡Šæ”¾å®ƒæ‰€å æœ‰çš„æ‰€æœ‰èµ„æºï¼‰ã€‚æ¶ˆå»å®ƒæ‰€æœ‰çš„è¯·æ±‚è¾¹å’Œåˆ†é…å˜ï¼Œä½¿ä¹‹ç§°ä¸ºå­¤ç«‹çš„ç»“ç‚¹ã€‚åœ¨ä¸‹å›¾ä¸­P1æ˜¯æ»¡è¶³è¿™ä¸€æ¡ä»¶çš„è¿›ç¨‹ç»“ç‚¹ï¼Œäºæ˜¯å°†P1çš„æ‰€æœ‰è¾¹æ¶ˆå»</li><li>2ï¼‰è¿›ç¨‹ Piæ‰€é‡Šæ”¾çš„èµ„æºï¼Œå¯ä»¥å”¤é†’æŸäº›å› ç­‰å¾…è¿™äº›èµ„æºè€Œé˜»å¡çš„è¿›ç¨‹ï¼ŒåŸæ¥çš„é˜»å¡è¿›ç¨‹å¯èƒ½å˜ä¸ºéé˜»å¡è¿›ç¨‹ã€‚åœ¨ä¸‹å›¾ä¸­ï¼ŒP2å°±æ»¡è¶³è¿™æ ·çš„æ¡ä»¶ã€‚æ ¹æ®1ï¼‰ä¸­çš„æ–¹æ³•è¿›è¡Œä¸€ç³»åˆ—ç®€åŒ–åï¼Œè‹¥èƒ½æ¶ˆå»é€”ä¸­æ‰€æœ‰çš„è¾¹ï¼Œåˆ™ç§°è¯¥å›¾æ˜¯å¯å®Œå…¨ç®€åŒ–çš„</li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/image-20241121093708353.png"></p><ul><li><strong>æ­»é”å®šç†</strong>ï¼šå¦‚æœæŸæ—¶åˆ»ç³»ç»Ÿçš„èµ„æºåˆ†é…å›¾æ˜¯ä¸å¯å®Œå…¨ç®€åŒ–çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶ç³»ç»Ÿæ­»é”</li></ul></li></ul><h4 id="æ­»é”çš„è§£é™¤">2.3.2 <strong>æ­»é”çš„è§£é™¤</strong></h4><ul><li>ä¸€æ—¦æ£€æµ‹å‡ºæ­»é”çš„å‘ç”Ÿï¼Œå°±åº”è¯¥ç«‹å³<strong>è§£é™¤æ­»é”</strong><ul><li>è¡¥å……ï¼šå¹¶ä¸æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹éƒ½æ˜¯æ­»é”çŠ¶æ€ï¼Œç”¨æ­»é”æ£€æµ‹ç®—æ³•åŒ–ç®€èµ„æºåˆ†é…å›¾åï¼Œè¿˜è¿ç€è¾¹çš„é‚£äº›è¿›ç¨‹å°±æ˜¯æ­»é”è¿›ç¨‹</li></ul></li><li><strong>è§£é™¤æ­»é”çš„ä¸»è¦æ–¹æ³•</strong><ul><li>èµ„æºå‰¥å¤ºæ³•ã€‚æŒ‚èµ·ï¼ˆæš‚æ—¶æ”¾åˆ°å¤–å­˜ä¸Šï¼‰æŸäº›æ­»é”è¿›ç¨‹ï¼Œå¹¶æŠ¢å å®ƒçš„èµ„æºï¼Œå°†è¿™äº›èµ„æºåˆ†é…ç»™å…¶ä»–çš„æ­»é”è¿›ç¨‹ã€‚ä½†æ˜¯åº”é˜²æ­¢è¢«æŒ‚èµ·çš„è¿›ç¨‹é•¿æ—¶é—´å¾—ä¸åˆ°èµ„æºè€Œé¥¥é¥¿</li><li>æ’¤é”€è¿›ç¨‹æ³•ï¼ˆæˆ–ç§°ç»ˆæ­¢è¿›ç¨‹æ³•ï¼‰ã€‚å¼ºåˆ¶æ’¤é”€éƒ¨åˆ†ã€ç”šè‡³å…¨éƒ¨æ­»é”è¿›ç¨‹ï¼Œå¹¶å‰¥å¤ºè¿™äº›è¿›ç¨‹çš„èµ„æºã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œä½†æ‰€ä»˜å‡ºçš„ä»£ä»·å¯èƒ½ä¼šå¾ˆå¤§ã€‚å› ä¸ºæœ‰äº›è¿›ç¨‹å¯èƒ½å·²ç»è¿è¡Œäº†å¾ˆé•¿æ—¶é—´ï¼Œå·²ç»æ¥è¿‘ç»“æŸäº†ï¼Œä¸€æ—¦è¢«ç»ˆæ­¢å¯è°“åŠŸäºä¸€ç¯‘ï¼Œä»¥åè¿˜å¾—ä»å¤´å†æ¥</li><li>è¿›ç¨‹å›é€€æ³•ã€‚è®©ä¸€ä¸ªæˆ–å¤šä¸ªæ­»é”è¿›ç¨‹å›é€€åˆ°è¶³ä»¥é¿å…æ­»é”çš„åœ°æ­¥ã€‚è¿™å°±è¦æ±‚ç³»ç»Ÿè¦è®°å½•è¿›ç¨‹çš„å†å²ä¿¡æ¯ï¼Œè®¾ç½®è¿˜åŸç‚¹</li></ul></li><li>å¦‚ä½•å†³å®šâ€œå¯¹è°åŠ¨æ‰‹â€<ul><li>è¿›ç¨‹ä¼˜å…ˆçº§</li><li>å·²æ‰§è¡Œå¤šé•¿æ—¶é—´</li><li>è¿˜è¦å¤šä¹…èƒ½å®Œæˆ</li><li>è¿›ç¨‹å·²ç»ä½¿ç”¨äº†å¤šå°‘èµ„æº</li><li>è¿›ç¨‹æ˜¯äº¤äº’å¼çš„è¿˜æ˜¯æ‰¹å¤„ç†å¼çš„</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-4-%E6%AD%BB%E9%94%81/image-20241121094256016.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.3 åŒæ­¥ä¸äº’æ–¥</title>
    <link href="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/"/>
    <url>/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿›ç¨‹çš„åŒæ­¥ä¸äº’æ–¥"><strong>2.3 è¿›ç¨‹çš„åŒæ­¥ä¸äº’æ–¥</strong></h1><h2 id="è¿›ç¨‹åŒæ­¥è¿›ç¨‹äº’æ–¥"><strong>1. è¿›ç¨‹åŒæ­¥ã€è¿›ç¨‹äº’æ–¥</strong></h2><h3 id="ä»€ä¹ˆæ˜¯è¿›ç¨‹åŒæ­¥">1.1 <strong>ä»€ä¹ˆæ˜¯è¿›ç¨‹åŒæ­¥?</strong></h3><ul><li>è¿›ç¨‹å…·æœ‰<strong>å¼‚æ­¥æ€§</strong>çš„ç‰¹å¾<ul><li>å¼‚æ­¥æ€§: å„å¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹ä»¥å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›</li></ul></li><li>å¦‚ä½•è§£å†³è¿™ç§å¼‚æ­¥é—®é¢˜ï¼Œå°±æ˜¯â€œ<strong>è¿›ç¨‹åŒæ­¥</strong>â€æ‰€è®¨è®ºçš„å†…å®¹<ul><li><strong>åŒæ­¥</strong>äº¦ç§°ç›´æ¥åˆ¶çº¦å…³ç³»ï¼Œå®ƒæ˜¯æŒ‡ä¸ºå®ŒæˆæŸç§ä»»åŠ¡è€Œå»ºç«‹çš„ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹å› ä¸ºéœ€è¦åœ¨æŸäº›ä½ç½®ä¸Š<strong>åè°ƒå®ƒä»¬çš„å·¥ä½œæ¬¡åº</strong>è€Œäº§ç”Ÿçš„åˆ¶çº¦å…³ç³»ã€‚è¿›ç¨‹é—´çš„ç›´æ¥åˆ¶çº¦å…³ç³»å°±æ˜¯æºäºå®ƒä»¬ä¹‹é—´çš„ç›¸äº’åˆä½œ</li></ul></li></ul><h3 id="ä»€ä¹ˆæ˜¯è¿›ç¨‹äº’æ–¥">1.2 <strong>ä»€ä¹ˆæ˜¯è¿›ç¨‹äº’æ–¥?</strong></h3><ul><li><p>è¿›ç¨‹çš„"<strong>å¹¶å‘</strong>"éœ€è¦"å…±äº«"çš„æ”¯æŒã€‚å„ä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹ä¸å¯é¿å…çš„éœ€è¦å…±äº«ä¸€äº›ç³»ç»Ÿèµ„æº(æ¯”å¦‚å†…å­˜ï¼Œåˆæ¯”å¦‚æ‰“å°æœºã€æ‘„åƒå¤´è¿™æ ·çš„I/Oè®¾å¤‡)</p></li><li><p>æˆ‘ä»¬æŠŠ<strong>ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨(äº’æ–¥å…±äº«æ–¹å¼)</strong>çš„èµ„æºç§°ä¸º<strong>ä¸´ç•Œèµ„æº</strong>ã€‚è®¸å¤šç‰©ç†è®¾å¤‡(æ¯”å¦‚æ‘„åƒå¤´ã€æ‰“å°æœº)éƒ½å±äºä¸´ç•Œèµ„æºã€‚æ­¤å¤–è¿˜æœ‰å¾ˆå¤šå˜é‡ã€æ•°æ®ã€å†…å­˜ç¼“å†²åŒºç­‰éƒ½å±äºä¸´ç•Œèµ„æºï¼Œå¯¹ä¸´ç•Œèµ„æºçš„è®¿é—®ï¼Œå¿…é¡»<strong>äº’æ–¥</strong>åœ°è¿›è¡Œ</p></li><li><p><strong>äº’æ–¥</strong>äº¦ç§°é—´æ¥åˆ¶çº¦å…³ç³»ï¼Œ<strong>è¿›ç¨‹äº’æ–¥</strong>æŒ‡å½“ä¸€ä¸ªè¿›ç¨‹è®¿é—®æŸä¸´ç•Œèµ„æºæ—¶ï¼Œå¦ä¸€ä¸ªæƒ³è¦è®¿é—®è¯¥ä¸´ç•Œèµ„æºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ï¼Œå½“å‰è®¿é—®ä¸´ç•Œèµ„æºçš„è¿›ç¨‹è®¿é—®ç»“æŸï¼Œé‡Šæ”¾è¯¥èµ„æºä¹‹åï¼Œå¦ä¸€ä¸ªè¿›ç¨‹æ‰èƒ½å»è®¿é—®ä¸´ç•Œèµ„æº</p></li><li><p>å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ï¼Œå¯ä»¥åœ¨é€»è¾‘ä¸Šåˆ†ä¸ºå¦‚ä¸‹å››ä¸ªéƒ¨åˆ†:</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">do</span> &#123;<br>    entry section;    <span class="hljs-comment">/* è¿›å…¥åŒº: è´Ÿè´£æ£€æŸ¥æ˜¯å¦å¯è¿›å…¥ä¸´ç•ŒåŒºï¼Œè‹¥å¯è¿›å…¥ï¼Œ</span><br><span class="hljs-comment">    åˆ™åº”è®¾ç½®æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºçš„æ ‡å¿—(å¯ç†è§£ä¸ºâ€œä¸Šé”â€)ï¼Œä»¥ç»„ç»‡å…¶ä»–è¿›ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒº */</span><br>    critical section; <span class="hljs-comment">/* ä¸´ç•ŒåŒº: è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç  */</span><br>    <span class="hljs-built_in">exit</span> section; <span class="hljs-comment">/* é€€å‡ºåŒº: è´Ÿè´£è§£é™¤ æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºçš„æ ‡å¿— (å¯ç†è§£ä¸ºâ€œè§£é”â€) */</span><br>    remainder section; <span class="hljs-comment">/* å‰©ä½™åŒº: åšå…¶ä»–å¤„ç† */</span><br>&#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br></code></pre></td></tr></table></figure><ul><li><p>æ³¨æ„:</p><ul><li><strong>ä¸´ç•ŒåŒº</strong>æ˜¯è¿›ç¨‹ä¸­<strong>è®¿é—®ä¸´ç•Œèµ„æº</strong>çš„ä»£ç æ®µ</li><li><strong>è¿›å…¥åŒº</strong>å’Œ<strong>é€€å‡ºåŒº</strong>æ˜¯<strong>è´Ÿè´£å®ç°äº’æ–¥</strong>çš„ä»£ç æ®µ</li><li>ä¸´ç•ŒåŒºä¹Ÿå¯ç§°ä¸º"<strong>ä¸´ç•Œæ®µ</strong>"</li></ul></li><li><p>ä¸ºäº†å®ç°å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ï¼ŒåŒæ—¶ä¿è¯ç³»ç»Ÿæ•´ä½“æ€§èƒ½ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹åŸåˆ™:</p><ul><li><strong>ç©ºé—²è®©è¿›</strong>:ä¸´ç•ŒåŒºç©ºé—²æ—¶ï¼Œå¯ä»¥å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ç«‹å³è¿›å…¥ä¸´ç•ŒåŒº</li><li><strong>å¿™åˆ™ç­‰å¾…</strong>:å½“å·²æœ‰è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶ä»–è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…</li><li><strong>æœ‰é™ç­‰å¾…</strong>:å¯¹è¯·æ±‚è®¿é—®çš„è¿›ç¨‹ï¼Œåº”ä¿è¯èƒ½åœ¨æœ‰é™æ—¶é—´å†…è¿›å…¥ä¸´ç•ŒåŒº(ä¿è¯ä¸ä¼šé¥¥é¥¿)</li><li><strong>è®©æƒç­‰å¾…</strong>:å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†æœºï¼Œé˜²æ­¢è¿›ç¨‹å¿™ç­‰å¾…</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120151439304.png"></p><h2 id="è¿›ç¨‹äº’æ–¥çš„è½¯ä»¶å®ç°æ–¹æ³•"><strong>2.è¿›ç¨‹äº’æ–¥çš„è½¯ä»¶å®ç°æ–¹æ³•</strong></h2><h3 id="å­¦ä¹ æç¤º">2.1 <strong>å­¦ä¹ æç¤º</strong>:</h3><p>1. ç†è§£å„ä¸ªç®—æ³•çš„æ€æƒ³ã€åŸç†</p><p>2.ç»“åˆä¸Šå°èŠ‚å­¦ä¹ çš„â€œå®ç°äº’æ–¥çš„å››ä¸ªé€»è¾‘éƒ¨åˆ†â€ï¼Œé‡ç‚¹ç†è§£å„ç®—æ³•åœ¨<strong>è¿›å…¥åŒº</strong>ã€<strong>é€€å‡ºåŒº</strong>éƒ½åšäº†ä»€ä¹ˆ</p><p>3. åˆ†æå„ç®—æ³•å­˜åœ¨çš„ç¼ºé™·(ç»“åˆ"å®ç°äº’æ–¥è¦éµå¾ªçš„å››ä¸ªåŸåˆ™"è¿›è¡Œåˆ†æ)</p><h3 id="å•æ ‡å¿—æ³•">2.2 <strong>å•æ ‡å¿—æ³•</strong></h3><ul><li>ç®—æ³•æ€æƒ³:ä¸¤ä¸ªè¿›ç¨‹åœ¨è®¿é—®å®Œä¸´ç•ŒåŒºåä¼šæŠŠä½¿ç”¨ä¸´ç•ŒåŒºçš„æƒé™è½¬äº¤ç»™å¦ä¸€ä¸ªè¿›ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºçš„æƒé™åªèƒ½è¢«å¦ä¸€ä¸ªè¿›ç¨‹èµ‹äºˆ</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> turn = <span class="hljs-number">0</span>; <span class="hljs-comment">// turn è¡¨ç¤ºå½“å‰å…è®¸è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å·</span><br><span class="hljs-comment">// P0è¿›ç¨‹:                            //P1è¿›ç¨‹:</span><br><span class="hljs-keyword">while</span> (turn != <span class="hljs-number">0</span>);  â‘                 <span class="hljs-keyword">while</span> (turn != <span class="hljs-number">1</span>); â‘¤   <span class="hljs-comment">// è¿›å…¥åŒº</span><br>critical section;   â‘¡                critical section;  â‘¥   <span class="hljs-comment">// ä¸´ç•ŒåŒº</span><br>turn = <span class="hljs-number">1</span>;           â‘¢                turn = <span class="hljs-number">0</span>;          â‘¦   <span class="hljs-comment">// é€€å‡ºåŒº</span><br>remainder section;  â‘£                remainder section; â‘§   <span class="hljs-comment">// å‰©ä½™åŒº</span><br></code></pre></td></tr></table></figure><ul><li>turnçš„åˆå€¼ä¸º0ï¼Œå³åˆšå¼€å§‹åªå…è®¸0å·è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒº</li><li>è‹¥P1å…ˆä¸Šå¤„ç†æœºè¿è¡Œï¼Œåˆ™ä¼šä¸€ç›´å¡åœ¨â‘¤ï¼Œç›´åˆ°P1çš„æ—¶é—´ç‰‡ç”¨å®Œï¼Œå‘ç”Ÿè°ƒåº¦ï¼Œåˆ‡æ¢P0ä¸Šå¤„ç†æœºè¿è¡Œã€‚è‹¥ä»£ç â‘ ä¸ä¼šå¡ä½P0ï¼ŒP0å¯ä»¥æ­£å¸¸è®¿é—®ä¸´ç•ŒåŒºï¼Œåˆ™P0è®¿é—®ä¸´ç•ŒåŒºæœŸé—´å³ä½¿åˆ‡æ¢å›P1ï¼ŒP1ä¾ç„¶ä¼šå¡åœ¨â‘¤<ul><li>å› æ­¤ï¼Œè¯¥ç®—æ³•å¯ä»¥å®ç°â€œåŒä¸€æ—¶åˆ»æœ€å¤šåªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ä¸´ç•ŒåŒºâ€</li></ul></li><li>åªèƒ½æŒ‰P0 â†’ P1 â†’ P0 â†’ P1 â†’ ......è¿™æ ·è½®æµè®¿é—®ã€‚è¿™ç§å¿…é¡»â€œè½®æµè®¿é—®â€å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ­¤æ—¶å…è®¸è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹æ˜¯P0ï¼Œè€ŒP0ä¸€ç›´ä¸è®¿é—®ä¸´ç•ŒåŒºï¼Œé‚£ä¹ˆè™½ç„¶æ­¤æ—¶ä¸´ç•ŒåŒºç©ºé—²ï¼Œä½†æ˜¯å¹¶ä¸å…è®¸P1è®¿é—®<ul><li>å› æ­¤ï¼Œ<strong>å•æ ‡å¿—æ³•</strong>å­˜åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯:<strong>è¿èƒŒâ€œç©ºé—²è®©è¿›â€åŸåˆ™</strong></li></ul></li></ul><h3 id="åŒæ ‡å¿—å…ˆæ£€æŸ¥">2.3 <strong>åŒæ ‡å¿—å…ˆæ£€æŸ¥</strong></h3><ul><li>ç®—æ³•æ€æƒ³:è®¾ç½®ä¸€ä¸ªå¸ƒå°”å‹æ•°ç»„flag[]ï¼Œæ•°ç»„ä¸­å„ä¸ªå…ƒç´ ç”¨æ¥<strong>æ ‡è®°å„è¿›ç¨‹æƒ³è¿›å…¥ä¸´ç•ŒåŒºçš„æ„æ„¿</strong>ï¼Œæ¯”å¦‚â€œflag[0]=trueâ€æ„å‘³ç€0å·è¿›ç¨‹P0ç°åœ¨æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒºã€‚æ¯ä¸ªè¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰å…ˆæ£€æŸ¥å½“å‰æœ‰æ²¡æœ‰åˆ«çš„è¿›ç¨‹æƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŠŠè‡ªèº«å¯¹åº”çš„æ ‡å¿—flag[i]è®¾ä¸ºtrueï¼Œä¹‹åå¼€å§‹è®¿é—®ä¸´ç•ŒåŒº</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> flag[<span class="hljs-number">2</span>]; <span class="hljs-comment">// è¡¨ç¤ºè¿›å…¥ä¸´ç•ŒåŒºæ„æ„¿çš„æ•°ç»„</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">false</span>;<br>flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>;<br><br><span class="hljs-comment">// P0è¿›ç¨‹://P1è¿›ç¨‹:</span><br><span class="hljs-keyword">while</span> (flag[<span class="hljs-number">1</span>]);â‘ <span class="hljs-keyword">while</span> (flag[<span class="hljs-number">0</span>]); â‘¤ <span class="hljs-comment">// è¿›å…¥åŒºï¼Œå¦‚æœæ­¤æ—¶P0æƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼ŒP1å°±ä¸€ç›´å¾ªç¯ç­‰å¾…</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>; â‘¡flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>; â‘¥ <span class="hljs-comment">// è¿›å…¥åŒºï¼Œæ ‡è®°ä¸ºP1 è¿›ç¨‹æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒº</span><br>critical section;â‘¢critical section; â‘¦ <span class="hljs-comment">// è®¿é—®ä¸´ç•ŒåŒº</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">false</span>;â‘£flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>; â‘§ <span class="hljs-comment">// è®¿é—®å®Œä¸´ç•ŒåŒºï¼Œä¿®æ”¹æ ‡è®°ä¸º P1 ä¸æƒ³ä½¿ç”¨ä¸´ç•ŒåŒº</span><br>remainder section;remainder section;<br></code></pre></td></tr></table></figure><ul><li><p>è‹¥æŒ‰ç…§â‘ â‘¤â‘¡â‘¥â‘¢â‘¦......çš„é¡ºåºæ‰§è¡Œï¼ŒP0å’ŒP1å°†ä¼šåŒæ—¶è®¿é—®ä¸´ç•ŒåŒº</p></li><li><p>å› æ­¤ï¼Œ<strong>åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•</strong>çš„ä¸»è¦é—®é¢˜æ˜¯:<strong>è¿åâ€œå¿™åˆ™ç­‰å¾…â€åŸåˆ™</strong></p><ul><li>åŸå› åœ¨äºï¼Œè¿›å…¥åŒºçš„â€œæ£€æŸ¥â€å’Œâ€œä¸Šé”â€ä¸¤ä¸ªå¤„ç†ä¸æ˜¯ä¸€æ°”å‘µæˆçš„ã€‚â€œæ£€æŸ¥â€åï¼Œâ€œä¸Šé”â€å‰å¯èƒ½å‘ç”Ÿè¿›ç¨‹åˆ‡æ¢</li></ul></li></ul><h3 id="åŒæ ‡å¿—åæ£€æŸ¥">2.4 <strong>åŒæ ‡å¿—åæ£€æŸ¥</strong></h3><ul><li>ç®—æ³•æ€æƒ³:åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•çš„æ”¹ç‰ˆã€‚å‰ä¸€ä¸ªç®—æ³•çš„é—®é¢˜æ˜¯å…ˆâ€œæ£€æŸ¥â€åâ€œä¸Šé”â€ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ“ä½œåˆæ— æ³•ä¸€æ°”å‘µæˆï¼Œå› æ­¤å¯¼è‡´äº†ä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºçš„é—®é¢˜ã€‚å› æ­¤ï¼Œäººä»¬åˆæƒ³åˆ°å…ˆâ€œä¸Šé”â€åâ€œæ£€æŸ¥â€çš„æ–¹æ³•ï¼Œæ¥é¿å…ä¸Šè¿°é—®é¢˜</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> flag[<span class="hljs-number">2</span>];   <span class="hljs-comment">// è¡¨ç¤ºè¿›å…¥ä¸´ç•ŒåŒºæ„æ„¿çš„æ•°ç»„</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">false</span>;<br>flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>;<br><span class="hljs-comment">// P0è¿›ç¨‹:    //P1è¿›ç¨‹:</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;     â‘ flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>; â‘¤<span class="hljs-comment">// è¿›å…¥åŒºï¼Œæ ‡è®°ä¸ºP1è¿›ç¨‹æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒº</span><br><span class="hljs-keyword">while</span> (flag[<span class="hljs-number">1</span>]);    â‘¡ <span class="hljs-keyword">while</span> (flag[<span class="hljs-number">0</span>]);â‘¥<span class="hljs-comment">// è¿›å…¥åŒºï¼Œå¦‚æœæ­¤æ—¶P0æƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼ŒP1å°±ä¸€ç›´å¾ªç¯ç­‰å¾…</span><br>critical section;   â‘¢critical section;  â‘¦<span class="hljs-comment">// è®¿é—®ä¸´ç•ŒåŒº</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">false</span>;    â‘£flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>;   â‘§<span class="hljs-comment">// è®¿é—®å®Œä¸´ç•ŒåŒºï¼Œä¿®æ”¹æ ‡è®°ä¸º P1 ä¸æƒ³ä½¿ç”¨ä¸´ç•ŒåŒº  </span><br>remainder section;remainder section;  <br></code></pre></td></tr></table></figure><ul><li>è‹¥æŒ‰ç…§â‘ â‘¤â‘¡â‘¥......çš„é¡ºåºæ‰§è¡Œï¼ŒP0å’ŒP1å°†éƒ½æ— æ³•è¿›å…¥ä¸´ç•ŒåŒº</li><li>å› æ­¤ï¼Œ<strong>åŒæ ‡å¿—åæ£€æŸ¥æ³•</strong>è™½ç„¶<strong>è§£å†³äº†â€œå¿™åˆ™ç­‰å¾…â€</strong>çš„é—®é¢˜ï¼Œä½†æ˜¯åˆ<strong>è¿èƒŒäº†â€œç©ºé—²è®©è¿›â€å’Œâ€œæœ‰é™ç­‰å¾…â€åŸåˆ™</strong>ï¼Œä¼šå› å„è¿›ç¨‹éƒ½é•¿æœŸæ— æ³•è®¿é—®ä¸´ç•Œèµ„æºè€Œäº§ç”Ÿâ€œé¥¥é¥¿â€ç°è±¡ï¼Œä¸¤ä¸ªè¿›ç¨‹éƒ½äº‰ç€æƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼Œä½†æ˜¯è°ä¹Ÿä¸è®©è°ï¼Œæœ€åè°éƒ½æ— æ³•è¿›å…¥ä¸´ç•ŒåŒº</li></ul><h3 id="petersonç®—æ³•">2.5 <strong>Petersonç®—æ³•</strong></h3><ul><li>ç®—æ³•æ€æƒ³ï¼šç»“åˆåŒæ ‡å¿—æ³•ã€å•æ ‡å¿—æ³•çš„æ€æƒ³ï¼Œå¦‚æœåŒæ–¹éƒ½äº‰ç€æƒ³è¿›å…¥ä¸´ç•ŒåŒºï¼Œé‚£å¯ä»¥è®©è¿›ç¨‹å°è¯•â€œå­”èè®©æ¢¨â€(è°¦è®©)ï¼Œåšä¸€ä¸ªæœ‰ç¤¼è²Œçš„è¿›ç¨‹</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> flag[<span class="hljs-number">2</span>]; <span class="hljs-comment">// è¡¨ç¤ºè¿›å…¥ä¸´ç•ŒåŒºæ„æ„¿çš„æ•°ç»„, åˆå§‹å€¼éƒ½æ˜¯false</span><br><br><span class="hljs-type">int</span> turn = <span class="hljs-number">0</span>; <span class="hljs-comment">// turn è¡¨ç¤ºä¼˜å…ˆè®©å“ªä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒº</span><br><br><span class="hljs-comment">// P0è¿›ç¨‹://P1è¿›ç¨‹:</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>; â‘ flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>; â‘¥ <span class="hljs-comment">// è¿›å…¥åŒº, è¡¨ç¤ºè‡ªå·±æƒ³è¿›å…¥ä¸´ç•ŒåŒº</span><br>turn = <span class="hljs-number">1</span>;â‘¡turn = <span class="hljs-number">0</span>;â‘¦ <span class="hljs-comment">// è¿›å…¥åŒº, å¯ä»¥ä¼˜å…ˆè®©å¯¹æ–¹è¿›å…¥ä¸´ç•ŒåŒº</span><br><br><span class="hljs-keyword">while</span> (flag[<span class="hljs-number">1</span>] &amp;&amp;<span class="hljs-keyword">while</span> (flag[<span class="hljs-number">0</span>] &amp;&amp;<br>       turn == <span class="hljs-number">1</span>);â‘¢ turn == <span class="hljs-number">0</span>); â‘§ <span class="hljs-comment">//è¿›å…¥åŒºï¼Œå¯¹æ–¹æƒ³è¿›, ä¸”æœ€åä¸€æ¬¡æ˜¯è‡ªå·±&quot;è®©æ¢¨&quot;, é‚£è‡ªå·±å°±å¾ªç¯ç­‰å¾…</span><br><br>critical section;â‘£ critical section; â‘¨ <span class="hljs-comment">// è®¿é—®ä¸´ç•ŒåŒº</span><br>flag[<span class="hljs-number">0</span>] = <span class="hljs-literal">false</span>;â‘¤flag[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>; â‘© <span class="hljs-comment">// è®¿é—®å®Œä¸´ç•ŒåŒºï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»ä¸æƒ³è®¿é—®ä¸´ç•ŒåŒºäº†</span><br>remainder section;remainder section;<br></code></pre></td></tr></table></figure><ul><li>è¿›å…¥åŒº:<ul><li>ä¸»åŠ¨äº‰å–</li><li>ä¸»åŠ¨è°¦è®©</li><li>æ£€æŸ¥å¯¹æ–¹æ˜¯å¦ä¹Ÿæƒ³ä½¿ç”¨ï¼Œä¸”æœ€åä¸€æ¬¡æ˜¯ä¸æ˜¯è‡ªå·±è¯´äº†â€œå®¢æ°”è¯â€</li></ul></li><li><strong>Petersonç®—æ³•</strong>ç”¨è½¯ä»¶æ–¹æ³•è§£å†³äº†è¿›ç¨‹äº’æ–¥é—®é¢˜ï¼Œ<strong>éµå¾ªäº†ç©ºé—²è®©è¿›ã€å¿™åˆ™ç­‰å¾…ã€æœ‰é™ç­‰å¾…ä¸‰ä¸ªåŸåˆ™</strong>ï¼Œä½†æ˜¯ä¾ç„¶<strong>æœªéµå¾ªè®©æƒç­‰å¾…çš„åŸåˆ™</strong></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120161559889.png"></p><h2 id="è¿›ç¨‹äº’æ–¥çš„ç¡¬ä»¶å®ç°æ–¹æ³•"><strong>3.è¿›ç¨‹äº’æ–¥çš„ç¡¬ä»¶å®ç°æ–¹æ³•</strong></h2><h3 id="ä¸­æ–­å±è”½æ–¹æ³•">3.1 <strong>ä¸­æ–­å±è”½æ–¹æ³•</strong></h3><ul><li>åˆ©ç”¨â€œ<strong>å¼€/å…³ä¸­æ–­æŒ‡ä»¤</strong>â€å®ç°(ä¸åŸè¯­çš„å®ç°æ€æƒ³ç›¸åŒï¼Œå³åœ¨æŸè¿›ç¨‹å¼€å§‹è®¿é—®ä¸´ç•ŒåŒºåˆ°ç»“æŸè®¿é—®ä¸ºæ­¢éƒ½ä¸å…è®¸è¢«ä¸­æ–­ï¼Œä¹Ÿå°±ä¸èƒ½å‘ç”Ÿè¿›ç¨‹åˆ‡æ¢ï¼Œå› æ­¤ä¹Ÿä¸å¯èƒ½å‘ç”Ÿä¸¤ä¸ªåŒæ—¶è®¿é—®ä¸´ç•ŒåŒºçš„æƒ…å†µ)</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">å…³ä¸­æ–­; <span class="hljs-comment">// å…³ä¸­æ–­åå³ä¸å…è®¸å½“å‰è¿›ç¨‹è¢«ä¸­æ–­ï¼Œä¹Ÿå¿…ç„¶ä¸ä¼šå‘ç”Ÿè¿›ç¨‹åˆ‡æ¢</span><br>ä¸´ç•ŒåŒº;<br>å¼€ä¸­æ–­; <span class="hljs-comment">// ç›´åˆ°å½“å‰è¿›ç¨‹è®¿é—®å®Œä¸´ç•ŒåŒºï¼Œå†æ‰§è¡Œå¼€ä¸­æ–­æŒ‡ä»¤ï¼Œæ‰æœ‰å¯èƒ½æœ‰åˆ«çš„è¿›ç¨‹ä¸Šå¤„ç†æœºå¹¶è®¿é—®ä¸´ç•ŒåŒº</span><br></code></pre></td></tr></table></figure><ul><li><p>ä¼˜ç‚¹: ç®€å•ã€é«˜æ•ˆ</p></li><li><p>ç¼ºç‚¹:ä¸é€‚ç”¨äºå¤šå¤„ç†æœºï¼›åªé€‚ç”¨äºæ“ä½œç³»ç»Ÿå†…æ ¸è¿›ç¨‹ï¼Œä¸é€‚ç”¨äºç”¨æˆ·è¿›ç¨‹(å› ä¸ºå¼€/å…³ä¸­æ–­æŒ‡ä»¤åªèƒ½è¿è¡Œåœ¨å†…æ ¸æ€ï¼Œè¿™ç»„æŒ‡ä»¤å¦‚æœèƒ½è®©ç”¨æˆ·éšæ„ä½¿ç”¨ä¼šå¾ˆå±é™©)</p><ul><li>å› ä¸ºå…³ä¸­æ–­åªé’ˆå¯¹å•ä¸ªå¤„ç†æœºï¼Œå…¶ä»–å¤„ç†æœºä¸Šçš„è¿›ç¨‹è¿˜æ˜¯èƒ½å¤Ÿè®¿é—®ä¸´ç•ŒåŒº</li></ul></li></ul><h3 id="testandsetæŒ‡ä»¤">3.2 <strong>TestAndSetæŒ‡ä»¤</strong></h3><ul><li><p>ç®€ç§° <strong>TS æŒ‡ä»¤</strong>ï¼Œä¹Ÿæœ‰åœ°æ–¹ç§°ä¸º<strong>TestAndSetLock æŒ‡ä»¤</strong>ï¼Œæˆ– <strong>TSLæŒ‡ä»¤</strong></p></li><li><p>TSLæŒ‡ä»¤æ˜¯ç”¨ç¡¬ä»¶å®ç°çš„ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹ä¸å…è®¸è¢«ä¸­æ–­ï¼Œåªèƒ½ä¸€æ°”å‘µæˆ</p></li><li><p>ä»¥ä¸‹æ˜¯ç”¨Cè¯­è¨€æè¿°çš„é€»è¾‘:</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å¸ƒå°”å‹å…±äº«å˜é‡ lock è¡¨ç¤ºå½“å‰ä¸´ç•ŒåŒºæ˜¯å¦è¢«åŠ é”</span><br><span class="hljs-comment">// trueè¡¨ç¤ºå·²åŠ é”, falseè¡¨ç¤ºæœªåŠ é”</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">TestAndSet</span><span class="hljs-params">(<span class="hljs-type">bool</span> *lock)</span> &#123;<br>    <span class="hljs-type">bool</span> old;<br>    old = *lock;<span class="hljs-comment">// oldç”¨æ¥å­˜æ”¾lockåŸæ¥çš„å€¼</span><br>    *lock = <span class="hljs-literal">true</span>;<span class="hljs-comment">// æ— è®ºä¹‹å‰æ˜¯å¦å·²åŠ é”, éƒ½å°†lockè®¾ä¸ºtrue</span><br>    <span class="hljs-keyword">return</span> old; <span class="hljs-comment">// è¿”å›lockåŸæ¥çš„å€¼</span><br>&#125;<br><br><span class="hljs-comment">// ä»¥ä¸‹æ˜¯ä½¿ç”¨ TSL æŒ‡ä»¤å®ç°äº’æ–¥çš„ç®—æ³•é€»è¾‘</span><br><span class="hljs-keyword">while</span> (TestAndSet(&amp;lock)); <span class="hljs-comment">// &quot;ä¸Šé”&quot;å¹¶&quot;æ£€æŸ¥&quot;</span><br>ä¸´ç•ŒåŒºä»£ç æ®µ...<br>lock = <span class="hljs-literal">false</span>;<span class="hljs-comment">// &quot;è§£é”&quot;</span><br>å‰©ä½™åŒºä»£ç æ®µ...<br></code></pre></td></tr></table></figure><ul><li><p>åŸç†:</p><ul><li>è‹¥åˆšå¼€å§‹ lock æ˜¯ falseï¼Œåˆ™ TSL è¿”å›çš„ old å€¼ä¸º falseï¼Œwhileå¾ªç¯æ¡ä»¶ä¸æ»¡è¶³ï¼Œç›´æ¥è·³è¿‡å¾ªç¯ï¼Œè¿›å…¥ä¸´ç•ŒåŒº</li><li>è‹¥åˆšå¼€å§‹ lock æ˜¯ trueï¼Œåˆ™æ‰§è¡Œ TLS å old è¿”å›çš„å€¼ä¸º trueï¼Œwhileå¾ªç¯æ¡ä»¶æ»¡è¶³ï¼Œä¼šä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°å½“å‰è®¿é—®ä¸´ç•ŒåŒºçš„è¿›ç¨‹åœ¨é€€å‡ºåŒºè¿›è¡Œâ€œè§£é”â€</li><li>ç›¸æ¯”è½¯ä»¶å®ç°æ–¹æ³•ï¼ŒTSLæŒ‡ä»¤æŠŠâ€œä¸Šé”â€å’Œâ€œæ£€æŸ¥â€æ“ä½œç”¨ç¡¬ä»¶çš„æ–¹å¼å˜æˆäº†ä¸€æ°”å‘µæˆçš„åŸå­æ“ä½œ</li></ul></li><li><p>ä¼˜ç‚¹:å®ç°ç®€å•ï¼Œæ— éœ€åƒè½¯ä»¶å®ç°æ–¹æ³•é‚£æ ·ä¸¥æ ¼æ£€æŸ¥æ˜¯å¦ä¼šæœ‰é€»è¾‘æ¼æ´ï¼›é€‚ç”¨äºå¤šå¤„ç†æœºç¯å¢ƒ</p></li><li><p>ç¼ºç‚¹:ä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œæš‚æ—¶æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ä¼šå ç”¨CPUå¹¶å¾ªç¯æ‰§è¡ŒTSLæŒ‡ä»¤ï¼Œä»è€Œè‡´â€œå¿™ç­‰â€</p></li></ul><h3 id="swapæŒ‡ä»¤">3.3 <strong>SwapæŒ‡ä»¤</strong></h3><ul><li><p>æœ‰çš„åœ°æ–¹ä¹Ÿå« <strong>Exchange æŒ‡ä»¤</strong>ï¼Œæˆ–ç®€ç§° <strong>XCHGæŒ‡ä»¤</strong></p></li><li><p>SwapæŒ‡ä»¤æ˜¯ç”¨ç¡¬ä»¶å®ç°çš„ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹ä¸å…è®¸è¢«ä¸­æ–­ï¼Œåªèƒ½ä¸€æ°”å‘µæˆ</p></li><li><p>ä»¥ä¸‹æ˜¯ç”¨Cè¯­è¨€æè¿°çš„é€»è¾‘:</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// SwapæŒ‡ä»¤çš„ä½œç”¨æ˜¯äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</span><br>Swap (<span class="hljs-type">bool</span> *a, <span class="hljs-type">bool</span> *b) &#123;<br>    <span class="hljs-type">bool</span> temp;<br>    temp = *a;<br>    *a = *b;<br>    *b = temp;<br>&#125;<br><br><span class="hljs-comment">// ä»¥ä¸‹æ˜¯ç”¨SwapæŒ‡ä»¤å®ç°äº’æ–¥çš„ç®—æ³•é€»è¾‘</span><br><span class="hljs-comment">// lockè¡¨ç¤ºå½“å‰ä¸´ç•ŒåŒºæ˜¯å¦è¢«åŠ é”</span><br><br><span class="hljs-type">bool</span> old = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">while</span> (old == <span class="hljs-literal">true</span>)<br>    Swap(&amp;lock, &amp;old);<br>ä¸´ç•ŒåŒºä»£ç æ®µ...<br>lock = <span class="hljs-literal">false</span>;<br>å‰©ä½™åŒºä»£ç æ®µ...<br></code></pre></td></tr></table></figure><ul><li><p>åŸç†:</p><ul><li>é€»è¾‘ä¸Šæ¥çœ‹ Swap å’Œ TSLå¹¶æ— å¤ªå¤§åŒºåˆ«ï¼Œéƒ½æ˜¯å…ˆè®°å½•ä¸‹æ­¤æ—¶ä¸´ç•ŒåŒºæ˜¯å¦å·²ç»è¢«ä¸Šé”(è®°å½•åœ¨oldå˜é‡ä¸Š)ï¼Œå†å°†ä¸Šé”æ ‡è®° lock è®¾ç½®ä¸º trueï¼Œæœ€åæ£€æŸ¥ oldï¼Œå¦‚æœ old ä¸ºfalseåˆ™è¯´æ˜ä¹‹å‰æ²¡æœ‰åˆ«çš„è¿›ç¨‹å¯¹ä¸´ç•ŒåŒºä¸Šé”ï¼Œåˆ™å¯è·³å‡ºå¾ªç¯ï¼Œè¿›å…¥ä¸´ç•ŒåŒºã€‚</li></ul></li><li><p>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œæ— éœ€åƒè½¯ä»¶å®ç°æ–¹æ³•é‚£æ ·ä¸¥æ ¼æ£€æŸ¥æ˜¯å¦ä¼šæœ‰é€»è¾‘æ¼æ´ï¼›é€‚ç”¨äºå¤šå¤„ç†æœºç¯å¢ƒ</p></li><li><p>ç¼ºç‚¹ï¼šä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œæš‚æ—¶æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ä¼šå ç”¨CPUå¹¶å¾ªç¯æ‰§è¡ŒTSLæŒ‡ä»¤ï¼Œä»è€Œå¯¼è‡´â€œå¿™ç­‰â€ã€‚</p></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120162657761.png"></p><h2 id="äº’æ–¥é”"><strong>4. äº’æ–¥é”</strong></h2><ul><li>è§£å†³ä¸´ç•ŒåŒºæœ€ç®€å•çš„å·¥å…·å°±æ˜¯äº’æ–¥é”(mutex lock)ã€‚<ul><li>ä¸€ä¸ªè¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºæ—¶åº”è·å¾—é”;åœ¨é€€å‡ºä¸´ç•ŒåŒºæ—¶é‡Šæ”¾é”ã€‚</li><li>å‡½æ•°acquire()è·å¾—é”ï¼Œè€Œå‡½æ•°release()é‡Šæ”¾é”ã€‚</li></ul></li><li>æ¯ä¸ªäº’æ–¥é”æœ‰ä¸€ä¸ªå¸ƒå°”å˜é‡available,è¡¨ç¤ºé”æ˜¯å¦å¯ç”¨ã€‚å¦‚æœé”æ˜¯å¯ç”¨çš„ï¼Œè°ƒç”¨acqiure()ä¼šæˆåŠŸï¼Œä¸”é”ä¸å†å¯ç”¨ã€‚å½“ä¸€ä¸ªè¿›ç¨‹è¯•å›¾è·å–ä¸å¯ç”¨çš„é”æ—¶ï¼Œä¼šè¢«é˜»å¡ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c">acquire()&#123;<br><span class="hljs-keyword">while</span>(!available)<br>        ;<span class="hljs-comment">//å¿™ç­‰å¾…</span><br>available <span class="hljs-literal">false</span>;<span class="hljs-comment">//è·å¾—é”</span><br>&#125;<br>release()&#123;<br>available <span class="hljs-literal">true</span>; <span class="hljs-comment">//é‡Šæ”¾é”</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>acquire(æˆ–release()çš„æ‰§è¡Œå¿…é¡»æ˜¯åŸå­æ“ä½œï¼Œå› æ­¤äº’æ–¥é”é€šå¸¸é‡‡ç”¨ç¡¬ä»¶æœºåˆ¶æ¥å®ç°ã€‚</p></li><li><p>äº’æ–¥é”çš„ä¸»è¦ç¼ºç‚¹æ˜¯å¿™ç­‰å¾…ï¼Œå½“æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨ä¸´ç•ŒåŒºä¸­ï¼Œä»»ä½•å…¶ä»–è¿›ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºæ—¶å¿…é¡»è¿ç»­å¾ªç¯è°ƒç”¨acquire()ã€‚å½“å¤šä¸ªè¿›ç¨‹å…±äº«åŒä¸€CPUæ—¶ï¼Œå°±æµªè´¹äº†CPUå‘¨æœŸã€‚å› æ­¤ï¼Œäº’æ–¥é”é€šå¸¸ç”¨äºå¤šå¤„ç†å™¨ç³»ç»Ÿï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥åœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šç­‰å¾…ï¼Œä¸å½±å“å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œã€‚</p></li><li><p>éœ€è¦è¿ç»­å¾ªç¯å¿™ç­‰çš„äº’æ–¥é”ï¼Œéƒ½å¯ç§°ä¸ºè‡ªæ—‹é”(spinlock),å¦‚TSLæŒ‡ä»¤ã€swapæŒ‡ä»¤ã€å•æ ‡å¿—æ³•</p></li><li><p>ç‰¹æ€§ï¼š</p><ul><li>éœ€å¿™ç­‰ï¼Œè¿›ç¨‹æ—¶é—´ç‰‡ç”¨å®Œæ‰ä¸‹å¤„ç†æœºï¼Œè¿åâ€œè®©æƒç­‰å¾…â€</li><li>ä¼˜ç‚¹ï¼šç­‰å¾…æœŸé—´ä¸ç”¨åˆ‡æ¢è¿›ç¨‹ä¸Šä¸‹æ–‡ï¼Œå¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œè‹¥ä¸Šé”çš„æ—¶é—´çŸ­ï¼Œåˆ™ç­‰å¾…ä»£ä»·å¾ˆä½å¸¸ç”¨äºå¤šå¤„ç†å™¨ç³»ç»Ÿï¼Œä¸€ä¸ªæ ¸å¿™ç­‰ï¼Œå…¶ä»–æ ¸ç…§å¸¸å·¥ä½œï¼Œå¹¶å¿«é€Ÿé‡Šæ”¾ä¸´ç•ŒåŒº</li><li>ä¸å¤ªé€‚ç”¨äºå•å¤„ç†æœºç³»ç»Ÿï¼Œå¿™ç­‰çš„è¿‡ç¨‹ä¸­ä¸å¯èƒ½è§£é”</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120163426848.png"></p><h2 id="ä¿¡å·é‡æœºåˆ¶"><strong>5. ä¿¡å·é‡æœºåˆ¶</strong></h2><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120171150120.png"></p><h3 id="ä¹‹å‰å­¦ä¹ çš„è¿™äº›è¿›ç¨‹äº’æ–¥çš„è§£å†³æ–¹æ¡ˆåˆ†åˆ«å­˜åœ¨å“ªäº›é—®é¢˜">5.1<strong>ä¹‹å‰å­¦ä¹ çš„è¿™äº›è¿›ç¨‹äº’æ–¥çš„è§£å†³æ–¹æ¡ˆåˆ†åˆ«å­˜åœ¨å“ªäº›é—®é¢˜?</strong></h3><ul><li><p>è¿›ç¨‹äº’æ–¥çš„å››ç§è½¯ä»¶å®ç°æ–¹å¼ï¼ˆå•æ ‡å¿—æ³•ã€åŒæ ‡å¿—å…ˆæ£€æŸ¥ã€åŒæ ‡å¿—åæ£€æŸ¥ã€Petersonç®—æ³•ï¼‰</p></li><li><p>è¿›ç¨‹äº’æ–¥çš„ä¸‰ç§ç¡¬ä»¶å®ç°æ–¹å¼ï¼ˆä¸­æ–­å±è”½æ–¹æ³•ã€TS/TSLæŒ‡ä»¤ã€Swap/XCHGæŒ‡ä»¤ï¼‰</p><ul><li>åœ¨åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•ä¸­ï¼Œè¿›å…¥åŒºçš„â€œæ£€æŸ¥â€ã€â€œä¸Šé”â€æ“ä½œæ— æ³•ä¸€æ°”å‘µæˆï¼Œä»è€Œå¯¼è‡´äº†ä¸¤ä¸ªè¿›ç¨‹æœ‰å¯èƒ½åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºçš„é—®é¢˜</li><li>æ‰€æœ‰çš„è§£å†³æ–¹æ¡ˆéƒ½æ— æ³•å®ç°â€œè®©æƒç­‰å¾…â€</li></ul></li><li><p>1965å¹´ï¼Œè·å…°å­¦è€…Dijkstraæå‡ºäº†ä¸€ç§å“æœ‰æˆæ•ˆçš„å®ç°è¿›ç¨‹äº’æ–¥ã€åŒæ­¥çš„æ–¹æ³•-- <strong>ä¿¡å·é‡æœºåˆ¶</strong></p></li></ul><h3 id="ä¿¡å·é‡æœºåˆ¶-1">5.2 <strong>ä¿¡å·é‡æœºåˆ¶</strong></h3><ul><li><p>ç”¨æˆ·è¿›ç¨‹å¯ä»¥é€šè¿‡ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„<strong>ä¸€å¯¹åŸè¯­</strong>æ¥å¯¹<strong>ä¿¡å·é‡</strong>è¿›è¡Œæ“ä½œï¼Œä»è€Œå¾ˆæ–¹ä¾¿çš„å®ç°äº†è¿›ç¨‹äº’æ–¥ã€è¿›ç¨‹åŒæ­¥</p></li><li><p><strong>ä¿¡å·é‡</strong>å…¶å®å°±æ˜¯ä¸€ä¸ªå˜é‡ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ª<strong>æ•´æ•°</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯æ›´å¤æ‚çš„<strong>è®°å½•å‹å˜é‡</strong>ï¼‰ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªä¿¡å·é‡æ¥<strong>è¡¨ç¤ºç³»ç»Ÿä¸­æŸç§èµ„æºçš„æ•°é‡</strong>ï¼Œæ¯”å¦‚ï¼šç³»ç»Ÿä¸­åªæœ‰ä¸€å°æ‰“å°æœºï¼Œå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå€¼ä¸º1 çš„ä¿¡å·é‡</p></li><li><p>åŸè¯­æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¨‹åºæ®µï¼Œå…¶æ‰§è¡Œåªèƒ½ä¸€æ°”å‘µæˆï¼Œä¸å¯è¢«ä¸­æ–­ã€‚åŸè¯­æ˜¯ç”±å…³ä¸­æ–­/å¼€ä¸­æ–­æŒ‡ä»¤å®ç°çš„ã€‚è½¯ä»¶è§£å†³æ–¹æ¡ˆçš„ä¸»è¦é—®é¢˜æ˜¯ç”±â€œè¿›å…¥åŒºçš„å„ç§æ“ä½œæ— æ³•ä¸€æ°”å‘µæˆâ€ï¼Œå› æ­¤å¦‚æœèƒ½æŠŠè¿›å…¥åŒºã€é€€å‡ºåŒºçš„æ“ä½œéƒ½ç”¨â€œåŸè¯­â€å®ç°ï¼Œä½¿è¿™äº›æ“ä½œèƒ½â€œä¸€æ°”å‘µæˆâ€å°±èƒ½é¿å…é—®é¢˜</p></li><li><p>ä¸€å¯¹åŸè¯­ï¼š<strong>wait(S) åŸè¯­</strong>å’Œ <strong>signal(S)åŸè¯­</strong>ï¼Œå¯ä»¥æŠŠåŸè¯­ç†è§£ä¸ºæˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°ï¼Œå‡½æ•°ååˆ†åˆ«ä¸ºwaitå’Œsignalï¼Œæ‹¬å·é‡Œçš„ä¿¡å·é‡ S å…¶å®å°±æ˜¯å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„ä¸€ä¸ªå‚æ•°</p></li><li><p>waitã€signal åŸè¯­å¸¸ç®€ç§°ä¸º <strong>Pã€Væ“ä½œ</strong>ï¼ˆæ¥è‡ªè·å…°è¯­proberen å’Œ verhogenï¼‰ã€‚å› æ­¤ï¼Œåšé¢˜çš„æ—¶å€™å¸¸æŠŠwait(S)ã€signal(S)ä¸¤ä¸ªæ“ä½œåˆ†åˆ«å†™ä¸º <strong>P(S)ã€V(S)</strong></p></li></ul><h3 id="æ•´å‹ä¿¡å·é‡">5.3 <strong>æ•´å‹ä¿¡å·é‡</strong></h3><ul><li>ç”¨ä¸€ä¸ª<strong>æ•´æ•°å‹çš„å˜é‡</strong>ä½œä¸ºä¿¡å·é‡ï¼Œç”¨æ¥<strong>è¡¨ç¤ºç³»ç»Ÿä¸­æŸç§èµ„æºçš„æ•°é‡</strong><ul><li>ä¸æ™®é€šæ•´æ•°å˜é‡çš„åŒºåˆ«ï¼šå¯¹ä¿¡å·é‡çš„æ“ä½œåªæœ‰ä¸‰ç§ï¼Œå³<strong>åˆå§‹åŒ–ã€Pæ“ä½œã€Væ“ä½œ</strong></li></ul></li><li>æ£€æŸ¥â€å’Œâ€œä¸Šé”â€ä¸€æ°”å‘µæˆï¼Œé¿å…äº†å¹¶å‘ã€å¼‚æ­¥å¯¼è‡´çš„é—®é¢˜</li><li>å­˜åœ¨çš„é—®é¢˜ï¼šä¸æ»¡è¶³â€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œä¼šå‘ç”Ÿâ€œå¿™ç­‰â€</li><li>Eg ï¼šæŸè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰ä¸€å°æ‰“å°æœº:</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> S=<span class="hljs-number">1</span>ï¼›<span class="hljs-comment">//åˆå§‹åŒ–æ•´å‹ä¿¡å·é‡s,è¡¨ç¤ºå½“å‰ç³»ç»Ÿä¸­å¯ç”¨çš„æ‰“å°æœºèµ„æºæ•°</span><br><span class="hljs-type">void</span> wait(<span class="hljs-type">int</span> S)&#123;<span class="hljs-comment">//waitåŸè¯­ï¼Œç›¸å½“äº&quot;è¿›å…¥åŒº&quot;</span><br>    <span class="hljs-keyword">while</span> (S &lt; <span class="hljs-number">0</span>);  <span class="hljs-comment">//å¦‚æœèµ„æºæ•°ä¸å¤Ÿï¼Œå°±ä¸€ç›´å¾ªç¯ç­‰å¾…</span><br>    S = S<span class="hljs-number">-1</span>;    <span class="hljs-comment">//å¦‚æœèµ„æºæ•°å¤Ÿï¼Œåˆ™å ç”¨ä¸€ä¸ªèµ„æº</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">signal</span><span class="hljs-params">(<span class="hljs-type">int</span> S)</span>&#123;<span class="hljs-comment">//signalåŸè¯­ï¼Œç›¸å½“äºâ€œé€€å‡ºåŒº&quot;</span><br>S=S+<span class="hljs-number">1</span>; <span class="hljs-comment">//ä½¿ç”¨å®Œèµ„æºåï¼Œåœ¨é€€å‡ºåŒºé‡Šæ”¾èµ„æº</span><br>&#125;<br><br>è¿›ç¨‹P0:<br>wait(S);<span class="hljs-comment">//è¿›å…¥åŒºï¼Œç”³è¯·èµ„æº</span><br>ä½¿ç”¨æ‰“å°æœºèµ„æºï¼Œï¼Œï¼Œ<span class="hljs-comment">//ä¸´ç•ŒåŒºï¼Œè®¿é—®èµ„æº</span><br>signal(S);<span class="hljs-comment">//é€€å‡ºåŒºï¼Œé‡Šæ”¾èµ„æº</span><br><br>.....<br>è¿›ç¨‹Pn:<br>wait(S);<span class="hljs-comment">//è¿›å…¥åŒºï¼Œç”³è¯·èµ„æº</span><br>ä½¿ç”¨æ‰“å°æœºèµ„æºï¼Œï¼Œï¼Œ<span class="hljs-comment">//ä¸´ç•ŒåŒºï¼Œè®¿é—®èµ„æº</span><br>signal(S);<span class="hljs-comment">//é€€å‡ºåŒºï¼Œé‡Šæ”¾èµ„æº</span><br></code></pre></td></tr></table></figure><h3 id="è®°å½•å‹ä¿¡å·é‡">5.4 <strong>è®°å½•å‹ä¿¡å·é‡</strong></h3><ul><li>æ•´å‹ä¿¡å·é‡çš„ç¼ºé™·æ˜¯å­˜åœ¨â€œå¿™ç­‰â€é—®é¢˜ï¼Œå› æ­¤äººä»¬åˆæå‡ºäº†â€œè®°å½•å‹ä¿¡å·é‡â€ï¼Œå³ç”¨è®°å½•å‹æ•°æ®ç»“æ„è¡¨ç¤ºçš„ä¿¡å·é‡ã€‚</li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120164732446.png"></p><ul><li><p>åœ¨è€ƒç ”é¢˜ç›®ä¸­ wait(S)ã€signal(S) ä¹Ÿå¯ä»¥è®°ä¸ºP(S)ã€V(S)ï¼Œè¿™å¯¹åŸè¯­å¯ç”¨äºå®ç°ç³»ç»Ÿèµ„æºçš„â€œ<strong>ç”³è¯·</strong>â€å’Œâ€œ<strong>é‡Šæ”¾</strong>â€</p></li><li><p>S.value çš„åˆå€¼è¡¨ç¤ºç³»ç»Ÿä¸­æŸç§èµ„æºçš„æ•°ç›®</p></li><li><p>å¯¹ä¿¡å·é‡ S çš„ä¸€æ¬¡ Pæ“ä½œæ„å‘³ç€è¿›ç¨‹è¯·æ±‚ä¸€ä¸ªå•ä½çš„è¯¥ç±»èµ„æºï¼Œå› æ­¤éœ€è¦æ‰§è¡ŒS.value--ï¼Œè¡¨ç¤ºèµ„æºæ•°å‡1ï¼Œå½“S.value &lt; 0æ—¶è¡¨ç¤ºè¯¥ç±»èµ„æºå·²åˆ†é…å®Œæ¯•ï¼Œå› æ­¤è¿›ç¨‹åº”è°ƒç”¨ <strong>blockåŸè¯­</strong>è¿›è¡Œè‡ªæˆ‘é˜»å¡ï¼ˆå½“å‰è¿è¡Œçš„è¿›ç¨‹ä»è¿è¡Œæ€â†’é˜»å¡æ€ï¼‰ï¼Œä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºï¼Œå¹¶æ’å…¥è¯¥ç±»èµ„æºçš„ç­‰å¾…é˜Ÿåˆ—S.L ä¸­ã€‚å¯è§ï¼Œè¯¥æœºåˆ¶éµå¾ªäº†â€œè®©æƒç­‰å¾…â€åŸåˆ™ï¼Œä¸ä¼šå‡ºç°â€œå¿™ç­‰â€ç°è±¡</p></li><li><p>å¯¹ä¿¡å·é‡ S çš„ä¸€æ¬¡ Væ“ä½œæ„å‘³ç€è¿›ç¨‹é‡Šæ”¾ä¸€ä¸ªå•ä½çš„è¯¥ç±»èµ„æºï¼Œå› æ­¤éœ€è¦æ‰§è¡ŒS.value++ï¼Œè¡¨ç¤ºèµ„æºæ•°åŠ 1ï¼Œè‹¥åŠ 1åä»æ˜¯ S.value &lt;=0ï¼Œè¡¨ç¤ºä¾ç„¶æœ‰è¿›ç¨‹åœ¨ç­‰å¾…è¯¥ç±»èµ„æºï¼Œå› æ­¤åº”è°ƒç”¨ <strong>wakeupåŸè¯­</strong>å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆè¢«å”¤é†’è¿›ç¨‹ä»é˜»å¡æ€â†’å°±ç»ªæ€ï¼‰</p></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120165255539.png"></p><h2 id="ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥åŒæ­¥å‰é©±å…³ç³»"><strong>6.ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥ã€åŒæ­¥ã€å‰é©±å…³ç³»</strong></h2><h3 id="tips">6.1 <strong>Tips</strong>:</h3><ul><li><p>ä¸è¦ä¸€å¤´é’»åˆ°ä»£ç é‡Œï¼Œè¦æ³¨æ„ç†è§£ä¿¡å·é‡èƒŒåçš„å«ä¹‰ï¼Œ<strong>ä¸€ä¸ªä¿¡å·é‡å¯¹åº”ä¸€ç§èµ„æº</strong></p></li><li><p>ä¿¡å·é‡çš„å€¼ =è¿™ç§èµ„æºçš„å‰©ä½™æ•°é‡ï¼ˆä¿¡å·é‡çš„å€¼å¦‚æœå°äº0ï¼Œè¯´æ˜æ­¤æ—¶æœ‰è¿›ç¨‹åœ¨ç­‰å¾…è¿™ç§èµ„æºï¼‰</p></li><li><p>P( S ) -- ç”³è¯·ä¸€ä¸ªèµ„æºSï¼Œå¦‚æœèµ„æºä¸å¤Ÿå°±é˜»å¡ç­‰å¾…</p></li><li><p>V( S ) --é‡Šæ”¾ä¸€ä¸ªèµ„æºSï¼Œå¦‚æœæœ‰è¿›ç¨‹åœ¨ç­‰å¾…è¯¥èµ„æºï¼Œåˆ™å”¤é†’ä¸€ä¸ªè¿›ç¨‹</p></li></ul><h3 id="ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹äº’æ–¥">6.2<strong>ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹äº’æ–¥</strong></h3><ul><li>åˆ†æå¹¶å‘è¿›ç¨‹çš„å…³é”®æ´»åŠ¨ï¼Œåˆ’å®šä¸´ç•ŒåŒºï¼ˆå¦‚ï¼šå¯¹ä¸´ç•Œèµ„æºæ‰“å°æœºçš„è®¿é—®å°±åº”æ”¾åœ¨ä¸´ç•ŒåŒº)</li><li>è®¾ç½®äº’æ–¥ä¿¡å·é‡mutex,.åˆå€¼ä¸º1<ul><li>åœ¨è¿›å…¥åŒºP(mutex)ä¸€ä¸€ç”³è¯·èµ„æº</li><li>åœ¨é€€å‡ºåŒºV(mutex)ä¸€ä¸€é‡Šæ”¾èµ„æº</li></ul></li><li>æ³¨æ„ï¼šå¯¹ä¸åŒçš„ä¸´ç•Œèµ„æºéœ€è¦è®¾ç½®ä¸åŒçš„äº’æ–¥ä¿¡å·é‡ã€‚</li><li>Pã€Væ“ä½œå¿…é¡»æˆå¯¹å‡ºç°ã€‚<ul><li>ç¼ºå°‘P(nutex)å°±ä¸èƒ½ä¿è¯ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ã€‚</li><li>ç¼ºå°‘V(mutex)ä¼šå¯¼è‡´èµ„æºæ°¸ä¸è¢«é‡Šæ”¾ï¼Œç­‰å¾…è¿›ç¨‹æ°¸ä¸è¢«å”¤é†’ã€‚</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120170055669.png"></p><h3 id="ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹åŒæ­¥">6.3<strong>ä¿¡å·é‡æœºåˆ¶å®ç°è¿›ç¨‹åŒæ­¥</strong></h3><ul><li>åˆ†æä»€ä¹ˆåœ°æ–¹éœ€è¦å®ç°â€œåŒæ­¥å…³ç³»â€ï¼Œå³å¿…é¡»ä¿è¯â€œä¸€å‰ä¸€åâ€æ‰§è¡Œçš„ä¸¤ä¸ªæ“ä½œï¼ˆæˆ–ä¸¤å¥ä»£ç )</li><li>è®¾ç½®åŒæ­¥ä¿¡å·é‡S,åˆå§‹ä¸º0</li><li>åœ¨â€œå‰æ“ä½œâ€ä¹‹åæ‰§è¡ŒV(S)</li><li>åœ¨â€œåæ“ä½œâ€ä¹‹å‰æ‰§è¡ŒP(S)<ul><li>æŠ€å·§å£è¯€ï¼šå‰VåP</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120170744768.png"></p><h3 id="ä¿¡å·é‡æœºåˆ¶å®ç°å‰é©±å…³ç³»">6.4<strong>ä¿¡å·é‡æœºåˆ¶å®ç°å‰é©±å…³ç³»</strong></h3><ul><li>å…¶å®æ¯ä¸€å¯¹å‰é©±å…³ç³»éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹åŒæ­¥é—®é¢˜ï¼ˆéœ€è¦ä¿è¯ä¸€å‰ä¸€åçš„æ“ä½œï¼‰å› æ­¤ï¼Œ<ul><li>è¦ä¸ºæ¯ä¸€å¯¹å‰é©±å…³ç³»å„è®¾ç½®ä¸€ä¸ªåŒæ­¥ä¿¡å·é‡</li><li>åœ¨â€œå‰æ“ä½œâ€ä¹‹åå¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒVæ“ä½œ</li><li>åœ¨â€œåæ“ä½œâ€ä¹‹å‰å¯¹ç›¸åº”çš„åŒæ­¥ä¿¡å·é‡æ‰§è¡ŒPæ“ä½œ</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120171047840.png"></p><h2 id="ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜"><strong>7. ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</strong></h2><h3 id="é—®é¢˜æè¿°">7.1 <strong>é—®é¢˜æè¿°</strong>:</h3><ul><li><p>ç³»ç»Ÿä¸­æœ‰ä¸€ç»„ç”Ÿäº§è€…è¿›ç¨‹å’Œä¸€ç»„æ¶ˆè´¹è€…è¿›ç¨‹ï¼Œç”Ÿäº§è€…è¿›ç¨‹æ¯æ¬¡ç”Ÿäº§ä¸€ä¸ªäº§å“æ”¾å…¥ç¼“å†²åŒºï¼Œæ¶ˆè´¹è€…è¿›ç¨‹æ¯æ¬¡ä»ç¼“å†²åŒºä¸­å–å‡ºä¸€ä¸ªäº§å“å¹¶ä½¿ç”¨ï¼ˆæ³¨ï¼šè¿™é‡Œçš„â€œäº§å“â€ç†è§£ä¸ºæŸç§æ•°æ®ï¼‰</p></li><li><p>ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…å…±äº«ä¸€ä¸ªåˆå§‹ä¸ºç©ºã€å¤§å°ä¸ºnçš„ç¼“å†²åŒºã€‚</p></li><li><p>åªæœ‰ç¼“å†²åŒºæ²¡æ»¡æ—¶ï¼Œç”Ÿäº§è€…æ‰èƒ½æŠŠäº§å“æ”¾å…¥ç¼“å†²åŒºï¼Œå¦åˆ™å¿…é¡»ç­‰å¾…</p><ul><li>ç¼“å†²åŒºæ²¡æ»¡â†’ç”Ÿäº§è€…ç”Ÿäº§ï¼Œç¼“å†²åŒºæ»¡æ—¶ï¼Œç”Ÿäº§è€…å¿…é¡»ç­‰å¾…</li></ul></li><li><p>åªæœ‰ç¼“å†²åŒºä¸ç©ºæ—¶ï¼Œæ¶ˆè´¹è€…æ‰èƒ½ä»ä¸­å–å‡ºäº§å“ï¼Œå¦åˆ™å¿…é¡»ç­‰å¾…</p><ul><li>ç¼“å†²åŒºæ²¡ç©ºâ†’æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç¼“å†²åŒºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…å¿…é¡»ç­‰å¾…</li></ul></li><li><p>ç¼“å†²åŒºæ˜¯ä¸´ç•Œèµ„æºï¼Œå„è¿›ç¨‹å¿…é¡»äº’æ–¥åœ°è®¿é—®</p><ul><li>äº’æ–¥å…³ç³»</li></ul></li></ul><h3 id="pvæ“ä½œé¢˜ç›®åˆ†ææ­¥éª¤">7.2<strong>PVæ“ä½œé¢˜ç›®åˆ†ææ­¥éª¤</strong>:</h3><ul><li>å…³ç³»åˆ†æã€‚æ‰¾å‡ºé¢˜ç›®ä¸­æè¿°çš„å„ä¸ªè¿›ç¨‹ï¼Œåˆ†æå®ƒä»¬ä¹‹é—´çš„åŒæ­¥ã€äº’æ–¥å…³ç³»</li><li>æ•´ç†æ€è·¯ã€‚æ ¹æ®å„è¿›ç¨‹çš„æ“ä½œæµç¨‹ç¡®å®šPã€Væ“ä½œçš„å¤§è‡´é¡ºåº</li><li>è®¾ç½®ä¿¡å·é‡ã€‚å¹¶æ ¹æ®é¢˜ç›®æ¡ä»¶ç¡®å®šä¿¡å·é‡åˆå€¼ã€‚ï¼ˆäº’æ–¥ä¿¡å·é‡åˆå€¼ä¸€èˆ¬ä¸º1ï¼ŒåŒæ­¥ä¿¡å·é‡çš„åˆ</li></ul><p>å§‹å€¼è¦çœ‹å¯¹åº”èµ„æºçš„åˆå§‹å€¼æ˜¯å¤šå°‘ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c">semaphore mutex = <span class="hljs-number">1</span>; <span class="hljs-comment">// äº’æ–¥ä¿¡å·é‡ï¼Œå®ç°å¯¹ç¼“å†²åŒºçš„äº’æ–¥è®¿é—®</span><br>semaphore empty = n; <span class="hljs-comment">// åŒæ­¥ä¿¡å·é‡ï¼Œè¡¨ç¤ºç©ºé—²ç¼“å†²åŒºçš„æ•°é‡</span><br>semaphore full = <span class="hljs-number">0</span>; <span class="hljs-comment">// åŒæ­¥ä¿¡å·é‡ï¼Œè¡¨ç¤ºäº§å“çš„æ•°é‡ï¼Œä¹Ÿå³éç©ºç¼“å†²åŒºçš„æ•°é‡</span><br><br>producer ()&#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        ç”Ÿäº§ä¸€ä¸ªäº§å“;<br>        P(empty); <span class="hljs-comment">// æ¶ˆè€—ä¸€ä¸ªç©ºé—²ç¼“å†²åŒº â‘ </span><br>        P(mutex); <span class="hljs-comment">// â‘¡</span><br>        æŠŠäº§å“æ”¾å…¥ç¼“å†²åŒº; <span class="hljs-comment">// â‘¢</span><br>        V(mutex); <span class="hljs-comment">// â‘£</span><br>        V(full); <span class="hljs-comment">// å¢åŠ ä¸€ä¸ªäº§å“ â‘¤</span><br>    &#125;<br>&#125;<br><br>consumer ()&#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        P(full); <span class="hljs-comment">// æ¶ˆè€—ä¸€ä¸ªäº§å“ï¼ˆéç©ºç¼“å†²åŒºï¼‰â‘¥</span><br>        P(mutex); <span class="hljs-comment">// â‘¦</span><br>        ä»ç¼“å†²åŒºå–å‡ºä¸€ä¸ªäº§å“;<br>        V(mutex);<br>        V(empty); <span class="hljs-comment">// å¢åŠ ä¸€ä¸ªç©ºé—²ç¼“å†²åŒº</span><br>        ä½¿ç”¨äº§å“;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>â‘¡â‘¢â‘£: å®ç°äº’æ–¥æ˜¯åœ¨åŒä¸€è¿›ç¨‹ä¸­è¿›è¡Œä¸€å¯¹PVæ“ä½œ</p></li><li><p>â‘¤â‘¥:å®ç°ä¸¤è¿›ç¨‹çš„åŒæ­¥å…³ç³»ï¼Œæ˜¯åœ¨å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡ŒPï¼Œå¦ä¸€è¿›ç¨‹ä¸­æ‰§è¡ŒV</p></li><li><p><strong>å®ç°äº’æ–¥çš„Pæ“ä½œä¸€å®šè¦åœ¨å®ç°åŒæ­¥çš„Pæ“ä½œä¹‹å</strong></p><ul><li>è‹¥å°†è¯¥é¢˜ä¸­producerå’Œconsumerå†…çš„ä¸¤ä¸ªPæ“ä½œäº¤æ¢ï¼Œåˆšå¼€å§‹æ—¶è‹¥æŒ‰â‘¦â†’â‘¥(æ­¤æ—¶ç”±äºfull==0ï¼Œæ¶ˆè´¹è€…è¿›ç¨‹é˜»å¡)â†’â‘¡(æ­¤æ—¶ç”±äºæ¶ˆè´¹è€…æ¶ˆè´¹äº†mutexï¼Œmutex==0ï¼Œç”Ÿäº§è€…è¿›ç¨‹é˜»å¡)ï¼Œå¯¼è‡´<strong>æ­»é”</strong>çš„å‘ç”Ÿ</li></ul></li><li><p><strong>Væ“ä½œä¸ä¼šå¯¼è‡´è¿›ç¨‹é˜»å¡ï¼Œå› æ­¤ä¸¤ä¸ªVæ“ä½œé¡ºåºå¯ä»¥äº¤æ¢</strong></p></li></ul><h2 id="å¤šç”Ÿäº§è€…-å¤šæ¶ˆè´¹è€…é—®é¢˜"><strong>8.å¤šç”Ÿäº§è€…-å¤šæ¶ˆè´¹è€…é—®é¢˜</strong></h2><h3 id="é—®é¢˜æè¿°-1">8.1 <strong>é—®é¢˜æè¿°</strong>:</h3><ul><li><p>æ¡Œå­ä¸Šæœ‰ä¸€åªç›˜å­ï¼Œæ¯æ¬¡åªèƒ½å‘å…¶ä¸­æ”¾å…¥ä¸€ä¸ªæ°´æœã€‚çˆ¸çˆ¸ä¸“å‘ç›˜å­ä¸­æ”¾è‹¹æœï¼Œå¦ˆå¦ˆä¸“å‘ç›˜å­ä¸­æ”¾æ©˜å­ï¼Œå„¿å­ä¸“ç­‰ç€åƒç›˜å­ä¸­çš„æ©˜å­ï¼Œå¥³å„¿ä¸“ç­‰ç€åƒç›˜å­ä¸­çš„è‹¹æœã€‚åªæœ‰ç›˜å­ç©ºæ—¶ï¼Œçˆ¸çˆ¸æˆ–å¦ˆå¦ˆæ‰å¯å‘ç›˜å­ä¸­æ”¾ä¸€ä¸ªæ°´æœã€‚ä»…å½“ç›˜å­ä¸­æœ‰è‡ªå·±éœ€è¦çš„æ°´æœæ—¶ï¼Œå„¿å­æˆ–å¥³å„¿å¯ä»¥ä»ç›˜å­ä¸­å–å‡ºæ°´æœ</p></li><li><p>äº’æ–¥å…³ç³»ï¼ˆmutex = 1ï¼‰:</p><ul><li>å¯¹ç¼“å†²åŒºï¼ˆç›˜å­ï¼‰çš„è®¿é—®è¦äº’æ–¥åœ°è¿›è¡Œ</li></ul></li><li><p>åŒæ­¥å…³ç³»ï¼ˆä¸€å‰ä¸€åï¼‰:</p><ul><li>çˆ¶äº²å°†è‹¹æœæ”¾å…¥ç›˜å­åï¼Œå¥³å„¿æ‰èƒ½å–è‹¹æœ</li><li>æ¯äº²å°†æ©˜å­æ”¾å…¥ç›˜å­åï¼Œå„¿å­æ‰èƒ½å–æ©˜å­</li><li>åªæœ‰ç›˜å­ä¸ºç©ºæ—¶ï¼Œçˆ¶äº²æˆ–æ¯äº²æ‰èƒ½æ”¾å…¥æ°´æœ<ul><li>â€œç›˜å­ä¸ºç©ºâ€è¿™ä¸ªäº‹ä»¶å¯ä»¥ç”±å„¿å­æˆ–å¥³å„¿è§¦å‘ï¼Œäº‹ä»¶å‘ç”Ÿåæ‰å…è®¸çˆ¶äº²æˆ–æ¯äº²æ”¾æ°´æœ</li></ul></li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120183700095.png"></p><ul><li><p>æ­¤é¢˜ä¸­å¯ä»¥åˆ å»mutexï¼Œå³ä½¿ä¸è®¾ç½®ä¸“é—¨çš„äº’æ–¥å˜é‡mutexï¼Œä¹Ÿä¸ä¼šå‡ºç°å¤šä¸ªè¿›ç¨‹åŒæ—¶è®¿é—®ç›˜å­çš„ç°è±¡ï¼ŒåŸå› åœ¨äºï¼š<strong>æœ¬é¢˜ä¸­çš„ç¼“å†²åŒºå¤§å°ä¸º1</strong>ï¼Œåœ¨ä»»ä½•æ—¶åˆ»ï¼Œappleã€orangeã€plateä¸‰ä¸ªåŒæ­¥ä¿¡å·é‡ä¸­æœ€å¤šåªæœ‰ä¸€ä¸ªæ˜¯1ã€‚å› æ­¤åœ¨ä»»ä½•æ—¶åˆ»ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ªè¿›ç¨‹çš„Pæ“ä½œä¸ä¼šè¢«é˜»å¡ï¼Œå¹¶é¡ºåˆ©åœ°è¿›å…¥ä¸´ç•ŒåŒºâ€¦</p></li><li><p>æ€»ç»“:</p><ul><li>åœ¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œå¦‚æœç¼“å†²åŒºå¤§å°ä¸º1ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ä¸éœ€è¦è®¾ç½®äº’æ–¥ä¿¡å·é‡å°±å¯ä»¥å®ç°äº’æ–¥è®¿é—®ç¼“å†²åŒºçš„åŠŸèƒ½ã€‚å½“ç„¶ï¼Œè¿™ä¸æ˜¯ç»å¯¹çš„ï¼Œè¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æ</li></ul></li><li><p>å»ºè®®:</p><ul><li>åœ¨è€ƒè¯•ä¸­å¦‚æœæ¥ä¸åŠä»”ç»†åˆ†æï¼Œå¯ä»¥åŠ ä¸Šäº’æ–¥ä¿¡å·é‡ï¼Œä¿è¯å„è¿›ç¨‹ä¸€å®šä¼šäº’æ–¥åœ°è®¿é—®ç¼“å†²åŒºä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ç°äº’æ–¥çš„Pæ“ä½œä¸€å®šè¦åœ¨å®ç°åŒæ­¥çš„Pæ“ä½œä¹‹åï¼Œå¦åˆ™å¯èƒ½å¼•èµ·â€œæ­»é”â€</li></ul></li></ul><h2 id="å¸çƒŸè€…é—®é¢˜"><strong>9. å¸çƒŸè€…é—®é¢˜</strong></h2><p><strong>é—®é¢˜æè¿°</strong>:</p><ul><li>å‡è®¾ä¸€ä¸ªç³»ç»Ÿæœ‰ä¸‰ä¸ªæŠ½çƒŸè€…è¿›ç¨‹å’Œä¸€ä¸ªä¾›åº”è€…è¿›ç¨‹ã€‚æ¯ä¸ªæŠ½çƒŸè€…ä¸åœåœ°å·çƒŸå¹¶æŠ½æ‰å®ƒï¼Œä½†æ˜¯è¦å·èµ·å¹¶æŠ½æ‰ä¸€æ”¯çƒŸï¼ŒæŠ½çƒŸè€…éœ€è¦æœ‰ä¸‰ç§ææ–™ï¼šçƒŸè‰ã€çº¸å’Œèƒ¶æ°´ã€‚ä¸‰ä¸ªæŠ½çƒŸè€…ä¸­ï¼Œç¬¬ä¸€ä¸ªæ‹¥æœ‰çƒŸè‰ã€ç¬¬äºŒä¸ªæ‹¥æœ‰çº¸ã€ç¬¬ä¸‰ä¸ªæ‹¥æœ‰èƒ¶æ°´ã€‚ä¾›åº”è€…è¿›ç¨‹æ— é™åœ°æä¾›ä¸‰ç§ææ–™ï¼Œä¾›åº”è€…æ¯æ¬¡å°†ä¸¤ç§ææ–™æ”¾æ¡Œå­ä¸Šï¼Œæ‹¥æœ‰å‰©ä¸‹é‚£ç§ææ–™çš„æŠ½çƒŸè€…å·ä¸€æ ¹çƒŸå¹¶æŠ½æ‰å®ƒï¼Œå¹¶ç»™ä¾›åº”è€…è¿›ç¨‹ä¸€ä¸ªä¿¡å·å‘Šè¯‰å®Œæˆäº†ï¼Œä¾›åº”è€…å°±ä¼šæ”¾å¦å¤–ä¸¤ç§ææ–™å†æ¡Œä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€ç›´é‡å¤ï¼ˆè®©ä¸‰ä¸ªæŠ½çƒŸè€…è½®æµåœ°æŠ½çƒŸï¼‰<ul><li>ç»„åˆä¸€ï¼šçº¸+èƒ¶æ°´</li><li>ç»„åˆäºŒï¼šçƒŸè‰+èƒ¶æ°´</li><li>ç»„åˆä¸‰ï¼šçƒŸè‰+çº¸</li></ul></li><li>äº’æ–¥å…³ç³»:<ul><li>æ¡Œå­å¯ä»¥æŠ½è±¡ä¸ºå®¹é‡ä¸º1çš„ç¼“å†²åŒºï¼Œè¦äº’æ–¥è®¿é—®</li></ul></li><li>åŒæ­¥å…³ç³»ï¼ˆä»äº‹ä»¶çš„è§’åº¦æ¥åˆ†æï¼‰:<ul><li>æ¡Œä¸Šæœ‰ç»„åˆä¸€ â†’ ç¬¬ä¸€ä¸ªæŠ½çƒŸè€…å–èµ°ä¸œè¥¿</li><li>æ¡Œä¸Šæœ‰ç»„åˆäºŒ â†’ ç¬¬äºŒä¸ªæŠ½çƒŸè€…å–èµ°ä¸œè¥¿</li><li>æ¡Œä¸Šæœ‰ç»„åˆä¸‰ â†’ ç¬¬ä¸‰ä¸ªæŠ½çƒŸè€…å–èµ°ä¸œè¥¿</li><li>å‘å‡ºå®Œæˆä¿¡å· â†’ ä¾›åº”è€…å°†ä¸‹ä¸€ä¸ªç»„åˆæ”¾åˆ°æ¡Œä¸Š</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120190459259.png"></p><p>æ³¨ï¼šå°†finishæ”¹ä¸º1ï¼Œ P(finish) æ”¾åœ¨ provider ä¸­ while(1){ä¸‹ä¸€è¡Œä¹Ÿæ˜¯å¯è¡Œçš„</p><h2 id="è¯»è€…å†™è€…é—®é¢˜"><strong>10. è¯»è€…å†™è€…é—®é¢˜</strong></h2><p><strong>é—®é¢˜æè¿°</strong>:</p><ul><li><p>æœ‰è¯»è€…å’Œå†™è€…ä¸¤ç»„å¹¶å‘è¿›ç¨‹ï¼Œå…±äº«ä¸€ä¸ªæ–‡ä»¶ï¼Œå½“ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¯»è¿›ç¨‹åŒæ—¶è®¿é—®å…±äº«æ•°æ®æ—¶ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œä½†è‹¥æŸä¸ªå†™è¿›ç¨‹å’Œå…¶ä»–è¿›ç¨‹ï¼ˆè¯»è¿›ç¨‹æˆ–å†™è¿›ç¨‹ï¼‰åŒæ—¶è®¿é—®å…±äº«æ•°æ®æ—¶åˆ™å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„é”™è¯¯ã€‚</p></li><li><p>å› æ­¤è¦æ±‚:</p><ul><li>å…è®¸å¤šä¸ªè¯»è€…å¯ä»¥åŒæ—¶å¯¹æ–‡ä»¶æ‰§è¡Œè¯»æ“ä½œï¼›</li><li>åªå…è®¸ä¸€ä¸ªå†™è€…å¾€æ–‡ä»¶ä¸­å†™ä¿¡æ¯ï¼›</li><li>ä»»ä¸€å†™è€…åœ¨å®Œæˆå†™æ“ä½œä¹‹å‰ä¸å…è®¸å…¶ä»–è¯»è€…æˆ–å†™è€…å·¥ä½œï¼›â‘£å†™è€…æ‰§è¡Œå†™æ“ä½œå‰ï¼Œåº”è®©å·²æœ‰çš„è¯»è€…å’Œå†™è€…å…¨éƒ¨é€€å‡º</li></ul></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c">semaphore rw=<span class="hljs-number">1</span>; <span class="hljs-comment">// ç”¨äºå®ç°å¯¹å…±äº«æ–‡ä»¶çš„äº’æ–¥è®¿é—®</span><br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// è®°å½•å½“å‰æœ‰å‡ ä¸ªè¯»è¿›ç¨‹åœ¨è®¿é—®æ–‡ä»¶</span><br>semaphore mutex = <span class="hljs-number">1</span>; <span class="hljs-comment">// ç”¨äºä¿è¯å¯¹countå˜é‡çš„äº’æ–¥è®¿é—®</span><br>semaphore w = <span class="hljs-number">1</span>; <span class="hljs-comment">// ç”¨äºä¿è¯å†™è¿›ç¨‹ä¸ä¼šé¥¥é¥¿ï¼Œå®ç°è¯»å†™å…¬å¹³</span><br><br>writer() &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>        P(w);<br>        P(rw); <span class="hljs-comment">// å†™ä¹‹å‰â€œåŠ é”â€</span><br>        å†™æ–‡ä»¶â€¦<br>        V(rw); <span class="hljs-comment">// å†™å®Œäº†â€œè§£é”â€</span><br>        V(w);<br>    &#125;<br>&#125;<br><br>reader ()&#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        P(w);<br>        P(mutex);<span class="hljs-comment">// å„è¯»è¿›ç¨‹äº’æ–¥è®¿é—®count</span><br>        <span class="hljs-keyword">if</span>(count==<span class="hljs-number">0</span>) <span class="hljs-comment">// ç”±ç¬¬ä¸€ä¸ªè¯»è¿›ç¨‹è´Ÿè´£</span><br>        P(rw);<span class="hljs-comment">// è¯»ä¹‹å‰â€œåŠ é”â€</span><br>        count++;<span class="hljs-comment">// è®¿é—®æ–‡ä»¶çš„è¯»è¿›ç¨‹æ•°+1</span><br>        V(mutex);<br>        V(w);<br>        è¯»æ–‡ä»¶â€¦<br>        P(mutex);<span class="hljs-comment">// å„è¯»è¿›ç¨‹äº’æ–¥è®¿é—®count</span><br>        count--;<span class="hljs-comment">// è®¿é—®æ–‡ä»¶çš„è¯»è¿›ç¨‹æ•°-1        </span><br>        <br>        <span class="hljs-keyword">if</span>(count==<span class="hljs-number">0</span>)  <span class="hljs-comment">// ç”±æœ€åä¸€ä¸ªè¯»è¿›ç¨‹è´Ÿè´£</span><br>        V(rw);<span class="hljs-comment">// è¯»å®Œäº†â€œè§£é”â€</span><br>        V(mutex);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>å¦‚æœä¸åŠ P(w)ä¹Ÿå¯ä»¥å®ŒæˆåŠŸèƒ½ï¼Œä½†å½“è¯»è¿›ç¨‹æºæºä¸æ–­è¿›å…¥æ—¶å°†ä¼šå¯¼è‡´å†™è¿›ç¨‹â€œé¥¥é¥¿â€</p></li><li><p>P(mutex)ä¿è¯å„è¯»è¿›ç¨‹å¯¹count çš„è®¿é—®æ˜¯äº’æ–¥çš„ï¼Œå¯¹countå˜é‡çš„æ£€æŸ¥å’Œèµ‹å€¼èƒ½å¤Ÿä¸€æ°”å‘µæˆ</p></li><li><p>æ€»ç»“:</p><ul><li>è¯»è€…-å†™è€…é—®é¢˜ä¸ºæˆ‘ä»¬è§£å†³å¤æ‚çš„äº’æ–¥é—®é¢˜æä¾›äº†ä¸€ä¸ªå‚è€ƒæ€è·¯</li><li>å…¶<strong>æ ¸å¿ƒæ€æƒ³</strong>åœ¨äºè®¾ç½®äº†ä¸€ä¸ª<strong>è®¡æ•°å™¨count</strong> ç”¨æ¥è®°å½•å½“å‰æ­£åœ¨è®¿é—®å…±äº«æ–‡ä»¶çš„è¯»è¿›ç¨‹æ•°</li><li>æˆ‘ä»¬å¯ä»¥ç”¨countçš„å€¼æ¥åˆ¤æ–­å½“å‰è¿›å…¥çš„è¿›ç¨‹æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªè¯»è¿›ç¨‹ï¼Œä»è€Œåšå‡ºä¸åŒçš„å¤„ç†</li><li>å¦å¤–ï¼Œå¯¹ countå˜é‡çš„æ£€æŸ¥å’Œèµ‹å€¼ä¸èƒ½ä¸€æ°”å‘µæˆå¯¼è‡´äº†ä¸€äº›é”™è¯¯ï¼Œå¦‚æœ<strong>éœ€è¦å®ç°â€œä¸€æ°”å‘µæˆâ€ï¼Œè‡ªç„¶åº”è¯¥æƒ³åˆ°ç”¨äº’æ–¥ä¿¡å·é‡</strong></li><li>æœ€åï¼Œè¿˜è¦è®¤çœŸä½“ä¼šæˆ‘ä»¬æ˜¯å¦‚ä½•è§£å†³â€œå†™è¿›ç¨‹é¥¥é¥¿â€é—®é¢˜çš„</li></ul></li></ul><h2 id="å“²å­¦å®¶è¿›é¤é—®é¢˜"><strong>11. å“²å­¦å®¶è¿›é¤é—®é¢˜</strong></h2><p><strong>é—®é¢˜æè¿°</strong>:</p><ul><li>ä¸€å¼ åœ†æ¡Œä¸Šåç€5åå“²å­¦å®¶ï¼Œæ¯ä¸¤ä¸ªå“²å­¦å®¶ä¹‹é—´çš„æ¡Œä¸Šæ‘†ä¸€æ ¹ç­·å­ï¼Œå…±5æ ¹ç­·å­ï¼Œæ¡Œå­çš„ä¸­é—´æ˜¯ä¸€ç¢—ç±³é¥­ã€‚å“²å­¦å®¶ä»¬å€¾æ³¨æ¯•ç”Ÿçš„ç²¾åŠ›ç”¨äºæ€è€ƒå’Œè¿›é¤ï¼Œå“²å­¦å®¶åœ¨æ€è€ƒæ—¶ï¼Œå¹¶ä¸å½±å“ä»–äººã€‚åªæœ‰å½“å“²å­¦å®¶é¥¥é¥¿æ—¶ï¼Œæ‰è¯•å›¾æ‹¿èµ·å·¦ã€å³ä¸¤æ ¹ç­·å­ï¼ˆä¸€æ ¹ä¸€æ ¹åœ°æ‹¿èµ·ï¼‰ã€‚å¦‚æœç­·å­å·²åœ¨ä»–äººæ‰‹ä¸Šï¼Œåˆ™éœ€ç­‰å¾…ã€‚é¥¥é¥¿çš„å“²å­¦å®¶åªæœ‰åŒæ—¶æ‹¿èµ·ä¸¤æ ¹ç­·å­æ‰å¯ä»¥å¼€å§‹è¿›é¤ï¼Œå½“è¿›é¤å®Œæ¯•åï¼Œæ”¾ä¸‹ç­·å­ç»§ç»­æ€è€ƒ</li></ul><p><strong>åˆ†æ</strong>:</p><ul><li><p>å…³ç³»åˆ†æã€‚ç³»ç»Ÿä¸­æœ‰5ä¸ªå“²å­¦å®¶è¿›ç¨‹ï¼Œ5ä½å“²å­¦å®¶ä¸å·¦å³é‚»å±…å¯¹å…¶ä¸­é—´ç­·å­çš„è®¿é—®æ˜¯äº’æ–¥å…³ç³»</p></li><li><p>æ•´ç†æ€è·¯ã€‚è¿™ä¸ªé—®é¢˜ä¸­åªæœ‰äº’æ–¥å…³ç³»ï¼Œä½†ä¸ä¹‹å‰é‡åˆ°çš„é—®é¢˜ä¸åŒçš„äº‹ï¼Œæ¯ä¸ªå“²å­¦å®¶è¿›ç¨‹éœ€è¦åŒæ—¶æŒæœ‰ä¸¤ä¸ªä¸´ç•Œèµ„æºæ‰èƒ½å¼€å§‹åƒé¥­ã€‚å¦‚ä½•é¿å…ä¸´ç•Œèµ„æºåˆ†é…ä¸å½“é€ æˆçš„æ­»é”ç°è±¡ï¼Œæ˜¯å“²å­¦å®¶é—®é¢˜çš„ç²¾é«“</p></li><li><p>ä¿¡å·é‡è®¾ç½®ã€‚å®šä¹‰äº’æ–¥ä¿¡å·é‡æ•°ç»„chopstick[5]={1,1,1,1,1}ç”¨äºå®ç°å¯¹5ä¸ªç­·å­çš„äº’æ–¥è®¿é—®ã€‚å¹¶å¯¹å“²å­¦å®¶æŒ‰0~4ç¼–å·ï¼Œå“²å­¦å®¶ iå·¦è¾¹çš„ç­·å­ç¼–å·ä¸º iï¼Œå³è¾¹çš„ç­·å­ç¼–å·ä¸º (i+1)%5</p></li></ul><p><strong>è§£</strong>:</p><p><strong>è¯¯è§£</strong>:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å¦‚æœ5ä¸ªå“²å­¦å®¶å¹¶å‘åœ°æ‹¿èµ·äº†è‡ªå·±å·¦æ‰‹è¾¹çš„ç­·å­, æ¯ä½å“²å­¦å®¶å¾ªç¯ç­‰å¾…å³è¾¹çš„äººæ”¾ä¸‹ç­·å­ï¼ˆé˜»å¡ï¼‰, ä¼šå‘ç”Ÿâ€œæ­»é”â€</span><br>semaphore chopstick[<span class="hljs-number">5</span>]=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;;<br>Pi ()&#123; <span class="hljs-comment">// iå·å“²å­¦å®¶çš„è¿›ç¨‹</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        P(chopstick[i]); <span class="hljs-comment">// æ‹¿å·¦</span><br>        P(chopstick[(i+<span class="hljs-number">1</span>)%<span class="hljs-number">5</span>]); <span class="hljs-comment">// æ‹¿å³</span><br>        åƒé¥­â€¦<br>        V(chopstick[i]); <span class="hljs-comment">// æ”¾å·¦</span><br>        V(chopstick[(i+<span class="hljs-number">1</span>)%<span class="hljs-number">5</span>]); <span class="hljs-comment">// æ”¾å³</span><br>        æ€è€ƒâ€¦<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¦‚ä½•é˜²æ­¢æ­»é”çš„å‘ç”Ÿå‘¢?</strong></p><ul><li><p>å¯ä»¥å¯¹å“²å­¦å®¶è¿›ç¨‹æ–½åŠ ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œæ¯”å¦‚æœ€å¤šå…è®¸å››ä¸ªå“²å­¦å®¶åŒæ—¶è¿›é¤ã€‚è¿™æ ·å¯ä»¥ä¿è¯è‡³å°‘æœ‰ä¸€ä¸ªå“²å­¦å®¶æ˜¯å¯ä»¥æ‹¿åˆ°å·¦å³ä¸¤åªç­·å­çš„</p></li><li><p>è¦æ±‚å¥‡æ•°å·å“²å­¦å®¶å…ˆæ‹¿å·¦è¾¹çš„ç­·å­ï¼Œç„¶åå†æ‹¿å³è¾¹çš„ç­·å­ï¼Œè€Œå¶æ•°å·å“²å­¦å®¶åˆšå¥½ç›¸åã€‚ç”¨è¿™ç§æ–¹æ³•å¯ä»¥ä¿è¯å¦‚æœç›¸é‚»çš„ä¸¤ä¸ªå¥‡å¶å·å“²å­¦å®¶éƒ½æƒ³åƒé¥­ï¼Œé‚£ä¹ˆåªä¼šæœ‰å…¶ä¸­ä¸€ä¸ªå¯ä»¥æ‹¿èµ·ç¬¬ä¸€åªç­·å­ï¼Œå¦ä¸€ä¸ªä¼šç›´æ¥é˜»å¡ã€‚è¿™å°±é¿å…äº†å æœ‰ä¸€æ”¯åå†ç­‰å¾…å¦ä¸€åªçš„æƒ…å†µ</p></li><li><p>ä»…å½“ä¸€ä¸ªå“²å­¦å®¶å·¦å³ä¸¤æ”¯ç­·å­éƒ½å¯ç”¨æ—¶æ‰å…è®¸ä»–æŠ“èµ·ç­·å­æ›´å‡†ç¡®çš„è¯´æ³•åº”è¯¥æ˜¯:å„å“²å­¦å®¶æ‹¿ç­·å­è¿™ä»¶äº‹å¿…é¡»äº’æ–¥çš„æ‰§è¡Œã€‚è¿™å°±ä¿è¯äº†å³ä½¿ä¸€ä¸ªå“²å­¦å®¶åœ¨æ‹¿ç­·å­æ‹¿åˆ°ä¸€åŠæ—¶è¢«é˜»å¡ï¼Œä¹Ÿä¸ä¼šæœ‰åˆ«çš„å“²å­¦å®¶ä¼šç»§ç»­å°è¯•æ‹¿ç­·å­ã€‚è¿™æ ·çš„è¯ï¼Œå½“å‰æ­£åœ¨åƒé¥­çš„å“²å­¦å®¶æ”¾ä¸‹ç­·å­åï¼Œè¢«é˜»å¡çš„å“²å­¦å®¶å°±å¯ä»¥è·å¾—ç­‰å¾…çš„ç­·å­äº†</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c">semaphore chopstick[<span class="hljs-number">5</span>]=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&#125;;<br>semaphore mutex = <span class="hljs-number">1</span>; <span class="hljs-comment">// äº’æ–¥åœ°å–ç­·å­</span><br><span class="hljs-comment">// è¿™ç§æ–¹æ³•å¹¶ä¸èƒ½ä¿è¯åªæœ‰ä¸¤è¾¹çš„ç­·å­éƒ½å¯ç”¨æ—¶ï¼Œæ‰å…è®¸å“²å­¦å®¶æ‹¿èµ·ç­·å­</span><br>Pi ()&#123; <span class="hljs-comment">// iå·å“²å­¦å®¶çš„è¿›ç¨‹</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        P(mutex);<br>        P(chopstick[i]); <span class="hljs-comment">// æ‹¿å·¦</span><br>        P(chopstick[(i+<span class="hljs-number">1</span>)%<span class="hljs-number">5</span>]); <span class="hljs-comment">// æ‹¿å³</span><br>        V(mutex);<br>        åƒé¥­â€¦<br>        V(chopstick[i]); <span class="hljs-comment">// æ”¾å·¦</span><br>        V(chopstick[(i+<span class="hljs-number">1</span>)%<span class="hljs-number">5</span>]); <span class="hljs-comment">// æ”¾å³</span><br>        æ€è€ƒâ€¦<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€»ç»“:</p><ul><li>å“²å­¦å®¶è¿›é¤é—®é¢˜çš„å…³é”®åœ¨äºè§£å†³<strong>è¿›ç¨‹æ­»é”</strong>ã€‚è¿™äº›è¿›ç¨‹ä¹‹é—´åªå­˜åœ¨äº’æ–¥å…³ç³»ï¼Œä½†æ˜¯ä¸ä¹‹å‰æ¥è§¦åˆ°çš„äº’æ–¥å…³ç³»ä¸åŒçš„æ˜¯ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½éœ€è¦åŒæ—¶æŒæœ‰ä¸¤ä¸ªä¸´ç•Œèµ„æºï¼Œå› æ­¤å°±æœ‰â€œæ­»é”â€é—®é¢˜çš„éšæ‚£</li></ul><h2 id="ç®¡ç¨‹"><strong>12. ç®¡ç¨‹</strong></h2><h3 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥ç®¡ç¨‹">12.1 <strong>ä¸ºä»€ä¹ˆè¦å¼•å…¥ç®¡ç¨‹?</strong></h3><ul><li><p>ä¿¡å·é‡æœºåˆ¶å­˜åœ¨çš„é—®é¢˜: ç¼–å†™ç¨‹åºå›°éš¾ã€æ˜“å‡ºé”™</p></li><li><p>èƒ½ä¸èƒ½è®¾è®¡ä¸€ç§æœºåˆ¶ï¼Œè®©ç¨‹åºå‘˜å†™ç¨‹åºæ—¶ä¸éœ€è¦å†å…³æ³¨å¤æ‚çš„PVæ“ä½œï¼Œè®©å†™ä»£ç æ›´è½»æ¾å‘¢?</p></li><li><p>1973å¹´ï¼ŒBrinch Hansen é¦–æ¬¡åœ¨ç¨‹åºè®¾è®¡è¯­è¨€(Pascal)ä¸­å¼•å…¥äº†â€œ<strong>ç®¡ç¨‹</strong>â€æˆåˆ† --<strong>ä¸€ç§é«˜çº§åŒæ­¥æœºåˆ¶</strong></p></li></ul><h3 id="ç®¡ç¨‹çš„ç»„æˆå’ŒåŸºæœ¬ç‰¹å¾">12.2<strong>ç®¡ç¨‹çš„ç»„æˆå’ŒåŸºæœ¬ç‰¹å¾</strong></h3><ul><li><strong>ç®¡ç¨‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„è½¯ä»¶æ¨¡å—</strong>ï¼Œæœ‰è¿™äº›éƒ¨åˆ†ç»„æˆ:<ul><li>å±€éƒ¨äºç®¡ç¨‹çš„å…±äº«æ•°æ®ç»“æ„è¯´æ˜</li><li>è¯¥æ•°æ®ç»“æ„è¿›è¡Œæ“ä½œçš„ä¸€ç»„è¿‡ç¨‹<ul><li>è·¨è€ƒTips: â€œè¿‡ç¨‹â€å…¶å®å°±æ˜¯â€œå‡½æ•°â€</li></ul></li><li>å¯¹å±€éƒ¨äºç®¡ç¨‹çš„å…±äº«æ•°æ®è®¾ç½®åˆå§‹å€¼çš„è¯­å¥</li><li>ç®¡ç¨‹æœ‰ä¸€ä¸ªåå­—</li></ul></li><li><strong>ç®¡ç¨‹çš„åŸºæœ¬ç‰¹å¾</strong>:<ul><li>å±€éƒ¨äºç®¡ç¨‹çš„æ•°æ®åªèƒ½è¢«å±€éƒ¨äºç®¡ç¨‹çš„è¿‡ç¨‹æ‰€è®¿é—®</li><li>ä¸€ä¸ªè¿›ç¨‹åªæœ‰é€šè¿‡è°ƒç”¨ç®¡ç¨‹å†…çš„è¿‡ç¨‹æ‰èƒ½è¿›å…¥ç®¡ç¨‹è®¿é—®å…±äº«æ•°æ®</li><li>æ¯æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹åœ¨ç®¡ç¨‹å†…æ‰§è¡ŒæŸä¸ªå†…éƒ¨è¿‡ç¨‹<ul><li>ç”±ç¼–è¯‘å™¨è´Ÿè´£å®ç°å„è¿›ç¨‹<strong>äº’æ–¥</strong>åœ°è¿›å…¥ç®¡ç¨‹ä¸­çš„è¿‡ç¨‹</li><li>ç®¡ç¨‹ä¸­è®¾ç½®æ¡ä»¶å˜é‡å’Œç­‰å¾…/å”¤é†’æ“ä½œï¼Œä»¥è§£å†³<strong>åŒæ­¥</strong>é—®é¢˜</li></ul></li></ul></li><li><strong>å¦‚ä½•ç†è§£?</strong><ul><li>å¯ä»¥æŠŠç®¡ç¨‹æ¯”ä½œJavaä¸­çš„ç±»ï¼Œç®¡ç¨‹ä¸­çš„å…±äº«æ•°æ®ç»“æ„ä¸ºç±»ä¸­çš„å±æ€§ï¼Œç®¡ç¨‹ä¸­çš„ä¸€ç»„è¿‡ç¨‹æ˜¯ç±»ä¸­çš„ä¸€ç»„æ–¹æ³•</li><li>ç®¡ç¨‹ä¸­çš„æ–¹æ³•å¯ä»¥çœ‹ä½œæ˜¯é™æ€åŒæ­¥(staticsynchronized)æ–¹æ³•ï¼Œæ‰€ä»¥æ¯æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹åœ¨ç®¡ç¨‹å†…æ‰§è¡ŒæŸä¸ªå†…éƒ¨è¿‡ç¨‹</li><li>è¿›ç¨‹åªèƒ½é€šè¿‡æ–¹æ³•å¯¹å±æ€§è¿›è¡Œæ“ä½œï¼Œä½“ç°äº†ç±»çš„å°è£…æ€æƒ³</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120195614131.png"></p><ul><li>å¼•å…¥ç®¡ç¨‹çš„ç›®çš„æ— éå°±æ˜¯è¦æ›´æ–¹ä¾¿åœ°å®ç°è¿›ç¨‹äº’æ–¥å’ŒåŒæ­¥ã€‚<ul><li>éœ€è¦åœ¨ç®¡ç¨‹ä¸­å®šä¹‰å…±äº«æ•°æ®ï¼ˆå¦‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜çš„ç¼“å†²åŒºï¼‰</li><li>éœ€è¦åœ¨ç®¡ç¨‹ä¸­å®šä¹‰ç”¨äºè®¿é—®è¿™äº›å…±äº«æ•°æ®çš„â€œå…¥å£â€ä¸€ä¸€å…¶å®å°±æ˜¯ä¸€äº›å‡½æ•°ï¼ˆå¦‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨äºå°†äº§å“æ”¾å…¥ç¼“å†²åŒºï¼Œå†å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨äºä»ç¼“å†²åŒºå–å‡ºäº§å“)</li><li>åªæœ‰é€šè¿‡è¿™äº›ç‰¹å®šçš„â€œå…¥å£â€æ‰èƒ½è®¿é—®å…±äº«æ•°æ®</li><li>ç®¡ç¨‹ä¸­æœ‰å¾ˆå¤šâ€œå…¥å£â€ï¼Œä½†æ˜¯æ¯æ¬¡åªèƒ½å¼€æ”¾å…¶ä¸­ä¸€ä¸ªâ€œå…¥å£â€ï¼Œå¹¶ä¸”åªèƒ½è®©ä¸€ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹è¿›å…¥ï¼ˆå¦‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œå„è¿›ç¨‹éœ€è¦äº’æ–¥åœ°è®¿é—®å…±äº«ç¼“å†²åŒºã€‚ç®¡ç¨‹çš„è¿™ç§ç‰¹æ€§å³å¯ä¿è¯ä¸€ä¸ªæ—¶é—´æ®µå†…æœ€å¤šåªä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è®¿é—®ç¼“å†²åŒºã€‚æ³¨æ„ï¼šè¿™ç§äº’æ–¥ç‰¹æ€§æ˜¯ç”±ç¼–è¯‘å™¨è´Ÿè´£å®ç°çš„ï¼Œç¨‹åºå‘˜ä¸ç”¨å…³å¿ƒ)</li><li>å¯åœ¨ç®¡ç¨‹ä¸­è®¾ç½®æ¡ä»¶å˜é‡åŠç­‰å¾…/å”¤é†’æ“ä½œä»¥è§£å†³åŒæ­¥é—®é¢˜ã€‚å¯ä»¥è®©ä¸€ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹åœ¨æ¡ä»¶å˜é‡ä¸Šç­‰å¾…ï¼ˆæ­¤æ—¶ï¼Œè¯¥è¿›ç¨‹åº”å…ˆé‡Šæ”¾ç®¡ç¨‹çš„ä½¿ç”¨æƒï¼Œä¹Ÿå°±æ˜¯è®©å‡ºâ€œå…¥å£â€ï¼‰ï¼›å¯ä»¥é€šè¿‡å”¤é†’æ“ä½œå°†ç­‰å¾…åœ¨æ¡ä»¶å˜é‡ä¸Šçš„è¿›ç¨‹æˆ–çº¿ç¨‹å”¤é†’ã€‚</li><li>ç¨‹åºå‘˜å¯ä»¥ç”¨æŸç§ç‰¹æ®Šçš„è¯­æ³•å®šä¹‰ä¸€ä¸ªç®¡ç¨‹ï¼ˆæ¯”å¦‚ï¼šmonitorProducerConsumer.endmonitor;),ä¹‹åå…¶ä»–ç¨‹åºå‘˜å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç®¡ç¨‹æä¾›çš„ç‰¹å®šâ€œå…¥å£â€å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨å®ç°è¿›ç¨‹åŒæ­¥/äº’æ–¥äº†ã€‚</li></ul></li></ul><p><img src="/2024/11/20/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-3-%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5/image-20241120200148151.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.2 å¤„ç†æœºè°ƒåº¦</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤„ç†æœºçš„è°ƒåº¦"><strong>2.2 å¤„ç†æœºçš„è°ƒåº¦</strong></h1><h2 id="è°ƒåº¦çš„æ¦‚å¿µå±‚æ¬¡"><strong>1. è°ƒåº¦çš„æ¦‚å¿µã€å±‚æ¬¡</strong></h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241119220317802.png"></p><h3 id="è°ƒåº¦çš„åŸºæœ¬æ¦‚å¿µ">1.1 <strong>è°ƒåº¦çš„åŸºæœ¬æ¦‚å¿µ</strong></h3><ul><li><p>å½“æœ‰ä¸€å †ä»»åŠ¡è¦å¤„ç†ï¼Œä½†ç”±äºèµ„æºæœ‰é™ï¼Œè¿™äº›äº‹æƒ…æ²¡æ³•åŒæ—¶å¤„ç†ã€‚è¿™å°±éœ€è¦ç¡®å®šæŸç§è§„åˆ™æ¥å†³å®šå¤„ç†ï¼Œè¿™äº›ä»»åŠ¡çš„é¡ºåºï¼Œè¿™å°±æ˜¯â€œè°ƒåº¦â€ç ”ç©¶çš„é—®é¢˜</p></li><li><p>åœ¨å¤šé“ç¨‹åºç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹çš„æ•°é‡å¾€å¾€æ˜¯å¤šäºå¤„ç†æœºçš„ä¸ªæ•°çš„ï¼Œè¿™æ ·ä¸å¯èƒ½åŒæ—¶å¹¶è¡Œåœ°å¤„ç†å„ä¸ªè¿›ç¨‹</p></li><li><p><strong>å¤„ç†æœºè°ƒåº¦</strong>ï¼Œå°±æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­æŒ‰ç…§ä¸€å®šçš„ç®—æ³•é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å¹¶å°†å¤„ç†æœºåˆ†é…ç»™å®ƒè¿è¡Œï¼Œä»¥å®ç°è¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œ</p></li></ul><h3 id="è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡">1.2 <strong>è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡</strong></h3><ul><li><strong>ä½œä¸š</strong>: ä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡,ç”¨æˆ·å‘ç³»ç»Ÿæäº¤ä¸€ä¸ªä½œä¸šâ‰ˆç”¨æˆ·è®©æ“ä½œç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªç¨‹åº(æ¥å¤„ç†ä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡)</li><li><strong>é«˜çº§è°ƒåº¦(ä½œä¸šè°ƒåº¦)</strong>: å¤–å­˜<sub>ä½œä¸š</sub> â†’å†…å­˜<sub>è¿›ç¨‹</sub><ul><li>æŒ‰ä¸€å®šçš„åŸåˆ™ä»<strong>å¤–å­˜</strong>çš„ä½œä¸šåå¤‡é˜Ÿåˆ—ä¸­æŒ‘é€‰ä¸€ä¸ªä½œä¸šè°ƒå…¥å†…å­˜,å¹¶åˆ›å»ºè¿›ç¨‹, æ¯ä¸ªä½œä¸šåªè°ƒå…¥ä¸€æ¬¡, è°ƒå‡ºä¸€æ¬¡, ä½œä¸šè°ƒå…¥æ—¶ä¼šå»ºç«‹PCB,è°ƒå‡ºæ—¶æ‰æ’¤é”€PCB<ul><li>ç”±äºå†…å­˜ç©ºé—´æœ‰é™ï¼Œæœ‰æ—¶æ— æ³•å°†ç”¨æˆ·æäº¤çš„ä½œä¸šå…¨éƒ¨æ”¾å…¥å†…å­˜ï¼Œå› æ­¤å°±éœ€è¦ç¡®å®šæŸç§è§„åˆ™æ¥å†³å®šå°†ä½œä¸šè°ƒå…¥å†…å­˜çš„é¡ºåº</li><li>é«˜çº§è°ƒåº¦ä¸»è¦æ˜¯æŒ‡è°ƒå…¥çš„é—®é¢˜ï¼Œå› ä¸ºåªæœ‰è°ƒå…¥çš„æ—¶æœºéœ€è¦æ“ä½œç³»ç»Ÿæ¥ç¡®å®šï¼Œä½†è°ƒå‡ºçš„æ—¶æœºå¿…ç„¶æ˜¯ä½œä¸šè¿è¡Œç»“æŸæ‰è°ƒå‡º</li></ul></li></ul></li><li><strong>ä¸­çº§è°ƒåº¦(å†…å­˜è°ƒåº¦)</strong>: å¤–å­˜<sub>æŒ‚èµ·è¿›ç¨‹</sub> â†’å†…å­˜<sub>è¿›ç¨‹</sub><ul><li>æŒ‰ç…§æŸç§ç­–ç•¥å†³å®šå°†å“ªä¸ªå¤„äº<strong>æŒ‚èµ·çŠ¶æ€</strong>çš„è¿›ç¨‹é‡æ–°è°ƒå…¥å†…å­˜<ul><li>å†…å­˜ä¸å¤Ÿæ—¶, å¯å°†æŸäº›è¿›ç¨‹çš„æ•°æ®è°ƒå‡ºåˆ°å¤–å­˜,ç­‰å†…å­˜ç©ºé—²æˆ–è€…è¿›ç¨‹éœ€è¦è¿è¡Œæ—¶å†é‡æ–°è°ƒå…¥å†…å­˜,è¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡</li><li>æš‚æ—¶è°ƒåˆ°å¤–å­˜ç­‰å¾…çš„è¿›ç¨‹çŠ¶æ€ç§°ä¸º<strong>æŒ‚èµ·çŠ¶æ€</strong>,è¢«æŒ‚èµ·çš„è¿›ç¨‹PCBä¼šè¢«ç»„ç»‡æˆ<strong>æŒ‚èµ·é˜Ÿåˆ—</strong><ul><li>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>PCBå¹¶ä¸ä¼šä¸€èµ·è°ƒåˆ°å¤–å­˜</strong>ï¼Œè€Œæ˜¯ä¼šå¸¸é©»å†…å­˜</li><li>PCBä¸­ä¼šè®°å½•è¿›ç¨‹æ•°æ®åœ¨å¤–å­˜ä¸­çš„å­˜æ”¾ä½ç½®ï¼Œè¿›ç¨‹çŠ¶æ€ç­‰ä¿¡æ¯ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡å†…å­˜ä¸­çš„</li><li>PCBæ¥ä¿æŒå¯¹å„ä¸ªè¿›ç¨‹çš„ç›‘æ§ã€ç®¡ç†</li></ul></li><li>ä¸€ä¸ªè¿›ç¨‹å¯èƒ½ä¼šè¢«å¤šæ¬¡è°ƒå‡ºã€è°ƒå…¥å†…å­˜ï¼Œå› æ­¤ä¸­çº§è°ƒåº¦å‘ç”Ÿçš„é¢‘ç‡è¦æ¯”é«˜çº§è°ƒåº¦æ›´é«˜</li></ul></li></ul></li><li><strong>ä½çº§è°ƒåº¦(è¿›ç¨‹è°ƒåº¦/å¤„ç†æœºè°ƒåº¦)</strong>: å†…å­˜<sub>è¿›ç¨‹</sub>â†’ åˆ†é…å¤„ç†æœº<sub>è¿›ç¨‹</sub><ul><li>æŒ‰ç…§æŸç§ç­–ç•¥ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å–ä¸€ä¸ªè¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒ<ul><li>è¿›ç¨‹è°ƒåº¦æ˜¯æ“ä½œç³»ç»Ÿä¸­<strong>æœ€åŸºæœ¬çš„ä¸€ç§è°ƒåº¦</strong>ï¼Œåœ¨ä¸€èˆ¬çš„æ“ä½œç³»ç»Ÿä¸­éƒ½å¿…é¡»é…ç½®è¿›ç¨‹è°ƒåº¦</li><li>è¿›ç¨‹è°ƒåº¦çš„é¢‘ç‡å¾ˆé«˜ï¼Œä¸€èˆ¬å‡ åæ¯«ç§’ä¸€æ¬¡</li></ul></li></ul></li></ul><h3 id="ä¸‰å±‚è°ƒåº¦çš„è”ç³»å¯¹æ¯”">1.3<strong>ä¸‰å±‚è°ƒåº¦çš„è”ç³»ã€å¯¹æ¯”</strong></h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241119220037965.png"></p><h3 id="è¿›ç¨‹çš„æŒ‚èµ·æ€ä¸ä¸ƒçŠ¶æ€æ¨¡å‹">1.4<strong>è¿›ç¨‹çš„æŒ‚èµ·æ€ä¸ä¸ƒçŠ¶æ€æ¨¡å‹</strong></h3><ul><li><p>æš‚æ—¶è°ƒåˆ°å¤–å­˜ç­‰å¾…çš„è¿›ç¨‹çŠ¶æ€ä¸º<strong>æŒ‚èµ·çŠ¶æ€(æŒ‚èµ·æ€ï¼Œsuspend)</strong></p></li><li><p>æŒ‚èµ·æ€åˆå¯ä»¥è¿›ä¸€æ­¥ç»†åˆ†ä¸º<strong>å°±ç»ªæŒ‚èµ·</strong>ã€<strong>é˜»å¡æŒ‚èµ·</strong>ä¸¤ç§çŠ¶æ€</p></li><li><p><strong>ä¸ƒçŠ¶æ€æ¨¡å‹</strong></p></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241119220113000.png"></p><h2 id="è¿›ç¨‹è°ƒåº¦çš„æ—¶æœºåˆ‡æ¢ä¸è¿‡ç¨‹æ–¹å¼"><strong>2.è¿›ç¨‹è°ƒåº¦çš„æ—¶æœºã€åˆ‡æ¢ä¸è¿‡ç¨‹ã€æ–¹å¼</strong></h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241119221723926.png"></p><h3 id="è¿›ç¨‹è°ƒåº¦çš„æ—¶æœº">2.1 <strong>è¿›ç¨‹è°ƒåº¦çš„æ—¶æœº</strong></h3><ul><li><strong>è¿›ç¨‹è°ƒåº¦(ä½çº§è°ƒåº¦)</strong>ï¼Œå°±æ˜¯æŒ‰ç…§æŸç§ç®—æ³•ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹ä¸ºå…¶åˆ†é…å¤„ç†æœº</li><li><strong>éœ€è¦è¿›è¡Œè¿›ç¨‹è°ƒåº¦ä¸åˆ‡æ¢çš„æƒ…å†µ</strong><ul><li>å½“å‰è¿è¡Œçš„è¿›ç¨‹<strong>ä¸»åŠ¨æ”¾å¼ƒ</strong>å¤„ç†æœº<ul><li>è¿›ç¨‹æ­£å¸¸ç»ˆæ­¢</li><li>è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸è€Œç»ˆæ­¢</li><li>è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚é˜»å¡(å¦‚ç­‰å¾…I/O)</li></ul></li><li>å½“å‰è¿è¡Œçš„è¿›ç¨‹<strong>è¢«åŠ¨æ”¾å¼ƒ</strong>å¤„ç†æœº<ul><li>åˆ†ç»™è¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œ</li><li>æœ‰æ›´ç´§æ€¥çš„äº‹éœ€è¦å¤„ç†(å¦‚I/Oä¸­æ–­)</li><li>æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—</li></ul></li></ul></li><li><strong>ä¸èƒ½è¿›è¡Œè¿›ç¨‹è°ƒåº¦ä¸åˆ‡æ¢çš„æƒ…å†µ</strong><ul><li>åœ¨å¤„ç†ä¸­æ–­çš„è¿‡ç¨‹ä¸­:ä¸­æ–­å¤„ç†è¿‡ç¨‹å¤æ‚ï¼Œä¸ç¡¬ä»¶å¯†åˆ‡ç›¸å…³ï¼Œå¾ˆéš¾åšåˆ°åœ¨ä¸­æ–­å¤„ç†è¿‡ç¨‹ä¸­è¿›è¡Œè¿›ç¨‹åˆ‡æ¢</li><li>è¿›ç¨‹åœ¨æ“ä½œç³»ç»Ÿ<strong>å†…æ ¸ç¨‹åºä¸´ç•ŒåŒº</strong>ä¸­ï¼Œä½†æ˜¯è¿›ç¨‹åœ¨æ™®é€šä¸´ç•ŒåŒºæ—¶æ˜¯å¯ä»¥è¿›è¡Œè°ƒåº¦ã€åˆ‡æ¢çš„<ul><li><strong>ä¸´ç•Œèµ„æº</strong>: ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æº,å„è¿›ç¨‹éœ€è¦<strong>äº’æ–¥</strong>åœ°è®¿é—®ä¸´ç•Œèµ„æº</li><li><strong>ä¸´ç•ŒåŒº</strong>: è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç <ul><li>æ™®é€šä¸´ç•ŒåŒºè®¿é—®çš„ä¸´ç•Œèµ„æºä¸ä¼šç›´æ¥å½±å“æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç®¡ç†å·¥ä½œ</li><li>å› æ­¤åœ¨è®¿é—®æ™®é€šä¸´ç•ŒåŒºæ—¶å¯ä»¥è¿›è¡Œè°ƒåº¦ä¸åˆ‡æ¢</li></ul></li><li><strong>å†…æ ¸ç¨‹åºä¸´ç•ŒåŒº</strong>:ä¸€èˆ¬æ˜¯ç”¨æ¥è®¿é—®æŸç§å†…æ ¸æ•°æ®ç»“æ„çš„ï¼Œæ¯”å¦‚è¿›ç¨‹çš„å°±ç»ªé˜Ÿåˆ—(ç”±å„å°±ç»ªè¿›ç¨‹çš„PCBç»„æˆ)<ul><li>å†…æ ¸ç¨‹åºä¸´ç•ŒåŒºè®¿é—®çš„ä¸´ç•Œèµ„æºå¦‚æœä¸å°½å¿«é‡Šæ”¾çš„è¯ï¼Œææœ‰å¯èƒ½å½±å“åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„å…¶ä»–ç®¡ç†å·¥ä½œ</li><li>å› æ­¤åœ¨è®¿é—®å†…æ ¸ç¨‹åºä¸´ç•ŒåŒºæœŸé—´ä¸èƒ½è¿›è¡Œè°ƒåº¦ä¸åˆ‡æ¢</li></ul></li></ul></li><li>åœ¨åŸå­æ“ä½œè¿‡ç¨‹ä¸­(åŸè¯­):åŸå­æ“ä½œä¸å¯ä¸­æ–­ï¼Œè¦ä¸€æ°”å‘µæˆ(å¦‚ä¹‹å‰è®²è¿‡çš„ä¿®æ”¹PCBä¸­è¿›ç¨‹çŠ¶æ€æ ‡å¿—ï¼Œå¹¶æŠŠPCBæ”¾åˆ°ç›¸åº”é˜Ÿåˆ—)</li></ul></li></ul><h3 id="è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼">2.2 <strong>è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼</strong></h3><ul><li><strong>éå‰¥å¤ºè°ƒåº¦æ–¹å¼(éæŠ¢å å¼æ–¹å¼)</strong><ul><li>åªå…è®¸è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºã€‚åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å³ä¾¿æœ‰æ›´ç´§è¿«çš„ä»»åŠ¡åˆ°è¾¾ï¼Œå½“å‰è¿›ç¨‹ä¾ç„¶ä¼šç»§ç»­ä½¿ç”¨å¤„ç†æœºï¼Œç›´åˆ°è¯¥è¿›ç¨‹ç»ˆæ­¢æˆ–ä¸»åŠ¨è¦æ±‚è¿›å…¥é˜»å¡æ€<ul><li>å®ç°ç®€å•ï¼Œç³»ç»Ÿå¼€é”€å°ä½†æ˜¯æ— æ³•åŠæ—¶å¤„ç†ç´§æ€¥ä»»åŠ¡ï¼Œé€‚åˆäºæ—©æœŸçš„æ‰¹å¤„ç†ç³»ç»Ÿ</li></ul></li></ul></li><li><strong>å‰¥å¤ºè°ƒåº¦æ–¹å¼(æŠ¢å å¼æ–¹å¼)</strong><ul><li>å½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¤„ç†æœºä¸Šæ‰§è¡Œæ—¶ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ›´é‡è¦æˆ–æ›´ç´§è¿«çš„è¿›ç¨‹éœ€è¦ä½¿ç”¨å¤„ç†æœºï¼Œåˆ™ç«‹å³æš‚åœæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™æ›´é‡è¦ç´§è¿«çš„é‚£ä¸ªè¿›ç¨‹<ul><li>å¯ä»¥ä¼˜å…ˆå¤„ç†æ›´ç´§æ€¥çš„è¿›ç¨‹ï¼Œä¹Ÿå¯å®ç°è®©å„è¿›ç¨‹æŒ‰æ—¶é—´ç‰‡è½®æµæ‰§è¡Œçš„åŠŸèƒ½ï¼ˆé€šè¿‡æ—¶é’Ÿä¸­æ–­ï¼‰ã€‚é€‚åˆäºåˆ†æ—¶æ“ä½œç³»ç»Ÿã€å®æ—¶æ“ä½œç³»ç»Ÿ</li></ul></li></ul></li></ul><h3 id="ç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦ä¸è¿›ç¨‹åˆ‡æ¢çš„åŒºåˆ«">2.3<strong>"ç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦"ä¸"è¿›ç¨‹åˆ‡æ¢"çš„åŒºåˆ«</strong></h3><ul><li><strong>ç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦</strong>æŒ‡çš„æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰ä¸­ä¸€ä¸ªè¦è¿è¡Œçš„è¿›ç¨‹ï¼ˆè¿™ä¸ªè¿›ç¨‹å¯ä»¥æ˜¯åˆšåˆšè¢«æš‚åœæ‰§è¡Œçš„è¿›ç¨‹ï¼Œä¹Ÿå¯èƒ½æ˜¯å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œåä¸€ç§æƒ…å†µå°±éœ€è¦<strong>è¿›ç¨‹åˆ‡æ¢</strong>ï¼‰</li><li><strong>è¿›ç¨‹åˆ‡æ¢</strong>æ˜¯æŒ‡ä¸€ä¸ªè¿›ç¨‹è®©å‡ºå¤„ç†æœºï¼Œç”±å¦ä¸€ä¸ªè¿›ç¨‹å ç”¨å¤„ç†æœºçš„è¿‡ç¨‹<ul><li>å¯¹åŸæ¥è¿è¡Œè¿›ç¨‹å„ç§æ•°æ®çš„ä¿å­˜</li><li>å¯¹æ–°çš„è¿›ç¨‹å„ç§æ•°æ®çš„æ¢å¤(å¦‚:ç¨‹åºè®¡æ•°å™¨ã€ç¨‹åºçŠ¶æ€å­—ã€å„ç§æ•°æ®å¯„å­˜å™¨ç­‰å¤„ç†æœºç°åœºä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸€èˆ¬ä¿å­˜åœ¨è¿›ç¨‹æ§åˆ¶å—PCBä¸­)</li><li><strong>æ³¨æ„</strong>:<ul><li>è¿›ç¨‹åˆ‡æ¢æ˜¯æœ‰ä»£ä»·çš„ï¼Œå› æ­¤å¦‚æœè¿‡äºé¢‘ç¹çš„è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€åˆ‡æ¢ï¼Œå¿…ç„¶ä¼šä½¿æ•´ä¸ªç³»ç»Ÿçš„æ•ˆç‡é™ä½ï¼Œä½¿ç³»ç»Ÿå¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨äº†è¿›ç¨‹åˆ‡æ¢ä¸Šï¼Œè€ŒçœŸæ­£ç”¨äºæ‰§è¡Œè¿›ç¨‹çš„æ—¶é—´å‡å°‘</li></ul></li></ul></li><li><strong>å¹¿ä¹‰çš„è¿›ç¨‹è°ƒåº¦</strong>åŒ…å«äº†é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å’Œè¿›ç¨‹åˆ‡æ¢ä¸¤ä¸ªæ­¥éª¤</li></ul><h2 id="è°ƒåº¦å™¨å’Œé—²é€›è¿›ç¨‹"><strong>3. è°ƒåº¦å™¨å’Œé—²é€›è¿›ç¨‹</strong></h2><h3 id="è°ƒåº¦å™¨è°ƒåº¦ç¨‹åºscheduler">3.1<strong>è°ƒåº¦å™¨/è°ƒåº¦ç¨‹åº(scheduler)</strong></h3><ul><li>æ”¯æŒå†…æ ¸çº§çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿ,è°ƒåº¦ç¨‹åºçš„å¤„ç†å¯¹è±¡æ˜¯<strong>å†…æ ¸çº§çº¿ç¨‹</strong></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241119221810753.png"></p><h3 id="é—²é€›è¿›ç¨‹">3.2 <strong>é—²é€›è¿›ç¨‹</strong></h3><ul><li><p>è°ƒåº¦ç¨‹åºæ°¸è¿œçš„å¤‡èƒ, æ²¡æœ‰å…¶ä»–å°±ç»ªè¿›ç¨‹æ—¶,è¿è¡Œé—²é€›è¿›ç¨‹(idle)</p></li><li><p>ç‰¹æ€§:</p><ul><li>ä¼˜å…ˆçº§æœ€ä½</li><li>å¯ä»¥æ˜¯0åœ°å€æŒ‡ä»¤, å ä¸€ä¸ªå®Œæ•´çš„æŒ‡ä»¤å‘¨æœŸ(æŒ‡ä»¤å‘¨æœŸæœ«å°¾ä¾‹è¡Œæ£€æŸ¥ä¸­æ–­)</li><li>èƒ½è€—ä½</li></ul></li></ul><h2 id="è°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡"><strong>4. è°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡</strong></h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241120105220114.png"></p><h2 id="è°ƒåº¦ç®—æ³•1"><strong>5. è°ƒåº¦ç®—æ³•ï¼ˆ1ï¼‰</strong></h2><h3 id="å„ç§è°ƒåº¦ç®—æ³•çš„å­¦ä¹ æ€è·¯">5.1<strong>å„ç§è°ƒåº¦ç®—æ³•çš„å­¦ä¹ æ€è·¯</strong></h3><ol type="1"><li><p>ç®—æ³•æ€æƒ³</p></li><li><p>ç®—æ³•è§„åˆ™</p></li><li><p>è¿™ç§è°ƒåº¦ç®—æ³•æ˜¯ç”¨äº ä½œä¸šè°ƒåº¦ è¿˜æ˜¯ è¿›ç¨‹è°ƒåº¦ï¼Ÿ</p></li><li><p>æŠ¢å å¼ï¼ŸéæŠ¢å å¼ï¼Ÿ</p></li><li><p>ä¼˜ç‚¹å’Œç¼ºç‚¹</p></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</p></li></ol><ul><li><strong>é¥¥é¥¿</strong>: æŸè¿›ç¨‹/ä½œä¸šé•¿æœŸå¾—ä¸åˆ°æœåŠ¡</li></ul><h3 id="å…ˆæ¥å…ˆæœåŠ¡fcfs-first-come-first-serve">5.2<strong>å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFS, First Come First Serveï¼‰</strong></h3><ul><li><p>ç®—æ³•æ€æƒ³:ä¸»è¦ä»â€œå…¬å¹³â€çš„è§’åº¦è€ƒè™‘ï¼ˆç±»ä¼¼äºæˆ‘ä»¬ç”Ÿæ´»ä¸­æ’é˜Ÿä¹°ä¸œè¥¿çš„ä¾‹å­ï¼‰</p></li><li><p>ç®—æ³•è§„åˆ™: æŒ‰ç…§ä½œä¸š/è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºè¿›è¡ŒæœåŠ¡</p></li><li><p>ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦:ç”¨äºä½œä¸šè°ƒåº¦æ—¶ï¼Œè€ƒè™‘çš„æ˜¯å“ªä¸ªä½œä¸šå…ˆåˆ°è¾¾åå¤‡é˜Ÿåˆ—ï¼›ç”¨äºè¿›ç¨‹è°ƒåº¦æ—¶ï¼Œè€ƒè™‘çš„æ˜¯å“ªä¸ªè¿›ç¨‹å…ˆåˆ°è¾¾å°±ç»ªé˜Ÿåˆ—</p></li><li><p>æ˜¯å¦å¯æŠ¢å : éæŠ¢å å¼çš„ç®—æ³•</p></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šå…¬å¹³ã€ç®—æ³•å®ç°ç®€å•</li><li>ç¼ºç‚¹ï¼šæ’åœ¨é•¿ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰åé¢çš„çŸ­ä½œä¸šéœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼Œå¸¦æƒå‘¨è½¬æ—¶é—´å¾ˆå¤§ï¼Œå¯¹çŸ­ä½œä¸šæ¥è¯´ç”¨æˆ·ä½“éªŒä¸å¥½ã€‚å³ï¼ŒFCFSç®—æ³•å¯¹é•¿ä½œä¸šæœ‰åˆ©ï¼Œå¯¹çŸ­ä½œä¸šä¸åˆ©</li></ul></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿: ä¸ä¼š</p></li></ul><h3 id="çŸ­ä½œä¸šä¼˜å…ˆsjf-shortest-job-first">5.3 <strong>çŸ­ä½œä¸šä¼˜å…ˆï¼ˆSJF,Shortest Job Firstï¼‰</strong></h3><ul><li><p>ç®—æ³•æ€æƒ³:è¿½æ±‚æœ€å°‘çš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œæœ€å°‘çš„å¹³å‡å‘¨è½¬æ—¶é—´ã€æœ€å°‘çš„å¹³å‡å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´</p></li><li><p>ç®—æ³•è§„åˆ™:æœ€çŸ­çš„ä½œä¸š/è¿›ç¨‹ä¼˜å…ˆå¾—åˆ°æœåŠ¡ï¼ˆæ‰€è°“â€œæœ€çŸ­â€ï¼Œæ˜¯æŒ‡è¦æ±‚æœåŠ¡æ—¶é—´æœ€çŸ­ï¼‰</p></li><li><p>ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦:æ—¢å¯ç”¨äºä½œä¸šè°ƒåº¦ï¼Œä¹Ÿå¯ç”¨äºè¿›ç¨‹è°ƒåº¦ã€‚ç”¨äºè¿›ç¨‹è°ƒåº¦æ—¶ç§°ä¸ºâ€œ<strong>çŸ­è¿›ç¨‹ä¼˜å…ˆï¼ˆSPF,Shortest Process Firstï¼‰</strong>ç®—æ³•â€</p></li><li><p>æ˜¯å¦å¯æŠ¢å : SJFå’ŒSPFæ˜¯éæŠ¢å å¼çš„ç®—æ³•ã€‚ä½†æ˜¯ä¹Ÿæœ‰æŠ¢å å¼çš„ç‰ˆæœ¬ --<strong>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSRTN, Shortest Remaining TimeNextï¼‰</strong></p><ul><li>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼šæ¯å½“æœ‰è¿›ç¨‹åŠ å…¥å°±ç»ªé˜Ÿåˆ—æ”¹å˜æ—¶å°±éœ€è¦è°ƒåº¦ï¼Œå¦‚æœæ–°åˆ°è¾¾çš„è¿›ç¨‹å‰©ä½™æ—¶é—´æ¯”å½“å‰è¿è¡Œçš„è¿›ç¨‹å‰©ä½™æ—¶é—´æ›´çŸ­ï¼Œåˆ™ç”±æ–°è¿›ç¨‹æŠ¢å å¤„ç†æœºï¼Œå½“å‰è¿è¡Œè¿›ç¨‹é‡æ–°å›åˆ°å°±ç»ªé˜Ÿåˆ—ã€‚å¦å¤–ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹å®Œæˆæ—¶ä¹Ÿéœ€è¦è°ƒåº¦</li></ul></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šâ€œæœ€çŸ­çš„â€å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´<ul><li>1.å¦‚æœé¢˜ç›®ä¸­æœªç‰¹åˆ«è¯´æ˜ï¼Œæ‰€æåˆ°çš„â€œçŸ­ä½œä¸š/è¿›ç¨‹ä¼˜å…ˆç®—æ³•â€é»˜è®¤æ˜¯éæŠ¢å å¼çš„</li><li>2. å¾ˆå¤šä¹¦ä¸Šéƒ½ä¼šè¯´â€œSJFè°ƒåº¦ç®—æ³•çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘â€ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œè¿™ä¸ªè¡¨è¿°æ˜¯é”™è¯¯çš„ï¼Œä¸ä¸¥è°¨çš„ã€‚<strong>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•å¾—åˆ°çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´è¿˜è¦æ›´å°‘</strong></li><li>åº”è¯¥åŠ ä¸Šä¸€ä¸ªæ¡ä»¶â€œ<strong>åœ¨æ‰€æœ‰è¿›ç¨‹åŒæ—¶å¯è¿è¡Œæ—¶</strong>ï¼Œé‡‡ç”¨SJFè°ƒåº¦ç®—æ³•çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘â€</li><li>æˆ–è€…è¯´â€œ<strong>åœ¨æ‰€æœ‰è¿›ç¨‹éƒ½å‡ ä¹åŒæ—¶åˆ°è¾¾æ—¶</strong>ï¼Œé‡‡ç”¨SJFè°ƒåº¦ç®—æ³•çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘â€</li><li>å¦‚æœä¸åŠ ä¸Šè¿°å‰ææ¡ä»¶ï¼Œåˆ™åº”è¯¥è¯´â€œæŠ¢å å¼çš„çŸ­ä½œä¸š/è¿›ç¨‹ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼ˆæœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆ,SRNTç®—æ³•ï¼‰çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘â€</li><li>3.è™½ç„¶ä¸¥æ ¼æ¥è¯´ï¼ŒSJFçš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´å¹¶ä¸ä¸€å®šæœ€å°‘ï¼Œä½†ç›¸æ¯”äºå…¶ä»–ç®—æ³•ï¼ˆå¦‚FCFSï¼‰ï¼ŒSJFä¾ç„¶å¯ä»¥è·å¾—è¾ƒå°‘çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´</li><li>4. å¦‚æœé€‰æ‹©é¢˜ä¸­é‡åˆ°â€œSJFç®—æ³•çš„å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´æœ€å°‘â€çš„é€‰é¡¹ï¼Œé‚£æœ€å¥½åˆ¤æ–­å…¶ä»–é€‰é¡¹æ˜¯ä¸æ˜¯æœ‰å¾ˆæ˜æ˜¾çš„é”™è¯¯ï¼Œå¦‚æœæ²¡æœ‰æ›´åˆé€‚çš„é€‰é¡¹ï¼Œé‚£ä¹Ÿåº”è¯¥é€‰æ‹©è¯¥é€‰é¡¹</li></ul></li><li>ç¼ºç‚¹ï¼šä¸å…¬å¹³ã€‚å¯¹çŸ­ä½œä¸šæœ‰åˆ©ï¼Œå¯¹é•¿ä½œä¸šä¸åˆ©ã€‚å¯èƒ½äº§ç”Ÿé¥¥é¥¿ç°è±¡ã€‚å¦å¤–ï¼Œä½œä¸š/è¿›ç¨‹çš„è¿è¡Œæ—¶é—´æ˜¯ç”±ç”¨æˆ·æä¾›çš„ï¼Œå¹¶ä¸ä¸€å®šçœŸå®ï¼Œä¸ä¸€å®šèƒ½åšåˆ°çœŸæ­£çš„çŸ­ä½œä¸šä¼˜å…ˆ</li></ul></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿:ä¼šï¼Œå¦‚æœæºæºä¸æ–­åœ°æœ‰çŸ­ä½œä¸š/è¿›ç¨‹åˆ°æ¥ï¼Œå¯èƒ½ä½¿é•¿ä½œä¸š/è¿›ç¨‹é•¿æ—¶é—´å¾—ä¸åˆ°æœåŠ¡ï¼Œäº§ç”Ÿâ€œé¥¥é¥¿â€ç°è±¡ã€‚å¦‚æœä¸€ç›´å¾—ä¸åˆ°æœåŠ¡ï¼Œåˆ™ç§°ä¸ºâ€œé¥¿æ­»â€</p></li><li><p>FCFSç®—æ³•æ˜¯åœ¨æ¯æ¬¡è°ƒåº¦çš„æ—¶å€™é€‰æ‹©ä¸€ä¸ªç­‰å¾…æ—¶é—´æœ€é•¿çš„ä½œä¸šï¼ˆè¿›ç¨‹ï¼‰ä¸ºå…¶æœåŠ¡ã€‚ä½†æ˜¯æ²¡æœ‰è€ƒè™‘åˆ°ä½œä¸šçš„è¿è¡Œæ—¶é—´ï¼Œå› æ­¤å¯¼è‡´äº†å¯¹çŸ­ä½œä¸šä¸å‹å¥½çš„é—´é¢˜</p></li><li><p>SJFç®—æ³•æ˜¯é€‰æ‹©ä¸€ä¸ªæ‰§è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸šä¸ºå…¶æœåŠ¡ã€‚ä½†æ˜¯åˆå®Œå…¨ä¸è€ƒè™‘å„ä¸ªä½œä¸šçš„ç­‰å¾…æ—¶é—´ï¼Œå› æ­¤å¯¼è‡´äº†å¯¹é•¿ä½œä¸šä¸å‹å¥½çš„é—®é¢˜ï¼Œç”šè‡³è¿˜ä¼šé€ æˆé¥¥é¥¿é—®é¢˜</p></li></ul><h3 id="é«˜å“åº”æ¯”ä¼˜å…ˆhrrn-highest-response-ratio-next">5.4<strong>é«˜å“åº”æ¯”ä¼˜å…ˆï¼ˆHRRN, Highest Response Ratio Nextï¼‰</strong></h3><ul><li><p>ç®—æ³•æ€æƒ³: è¦ç»¼åˆè€ƒè™‘ä½œä¸š/è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´å’Œè¦æ±‚æœåŠ¡çš„æ—¶é—´</p></li><li><p>ç®—æ³•è§„åˆ™:åœ¨æ¯æ¬¡è°ƒåº¦æ—¶å…ˆè®¡ç®—å„ä¸ªä½œä¸š/è¿›ç¨‹çš„<strong>å“åº”æ¯”</strong>ï¼Œé€‰æ‹©å“åº”æ¯”æœ€é«˜çš„ä½œä¸š/è¿›ç¨‹ä¸ºå…¶æœåŠ¡</p><ul><li><span class="math display">\[å“åº”æ¯”=\frac{ç­‰å¾…æ—¶é—´+è¦æ±‚æœåŠ¡æ—¶é—´}{è¦æ±‚æœåŠ¡æ—¶é—´}\geq 1\]</span></li></ul></li><li><p>ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦: å³å¯ç”¨äºä½œä¸šè°ƒåº¦ï¼Œä¹Ÿå¯ç”¨äºè¿›ç¨‹è°ƒåº¦</p></li><li><p>æ˜¯å¦å¯æŠ¢å :éæŠ¢å å¼çš„ç®—æ³•ã€‚å› æ­¤åªæœ‰å½“å‰è¿è¡Œçš„ä½œä¸š/è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºæ—¶ï¼Œæ‰éœ€è¦è°ƒåº¦ï¼Œæ‰éœ€è¦è®¡ç®—å“åº”æ¯”</p></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>ç»¼åˆè€ƒè™‘äº†ç­‰å¾…æ—¶é—´å’Œè¿è¡Œæ—¶é—´ï¼ˆè¦æ±‚æœåŠ¡æ—¶é—´ï¼‰</li><li>ç­‰å¾…æ—¶é—´ç›¸åŒæ—¶ï¼Œè¦æ±‚æœåŠ¡æ—¶é—´çŸ­çš„ä¼˜å…ˆï¼ˆSJF çš„ä¼˜ç‚¹ï¼‰</li><li>è¦æ±‚æœåŠ¡æ—¶é—´ç›¸åŒæ—¶ï¼Œç­‰å¾…æ—¶é—´é•¿çš„ä¼˜å…ˆï¼ˆFCFS çš„ä¼˜ç‚¹ï¼‰</li><li>å¯¹äºé•¿ä½œä¸šæ¥è¯´ï¼Œéšç€ç­‰å¾…æ—¶é—´è¶Šæ¥è¶Šä¹…ï¼Œå…¶å“åº”æ¯”ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼Œä»è€Œé¿å…äº†é•¿ä½œä¸šé¥¥é¥¿çš„</li><li>é—®é¢˜</li></ul></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿: ä¸ä¼š</p></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241120123533015.png"></p><h2 id="è°ƒåº¦ç®—æ³•é€‚åˆäº¤äº’å¼ç³»ç»Ÿ"><strong>6.è°ƒåº¦ç®—æ³•ï¼ˆé€‚åˆäº¤äº’å¼ç³»ç»Ÿï¼‰</strong></h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241120145812395.png"></p><h3 id="æ—¶é—´ç‰‡è½®è½¬rr-round-robin">6.1 <strong>æ—¶é—´ç‰‡è½®è½¬ï¼ˆRR,Round-Robinï¼‰</strong></h3><ul><li><p>ç®—æ³•æ€æƒ³:å…¬å¹³åœ°ã€è½®æµåœ°ä¸ºå„ä¸ªè¿›ç¨‹æœåŠ¡ï¼Œè®©æ¯ä¸ªè¿›ç¨‹åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…éƒ½å¯ä»¥å¾—åˆ°å“åº”</p></li><li><p>ç®—æ³•è§„åˆ™:æŒ‰ç…§å„è¿›ç¨‹åˆ°è¾¾å°±ç»ªé˜Ÿåˆ—çš„é¡ºåºï¼Œè½®æµè®©å„ä¸ªè¿›ç¨‹æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡(å¦‚100ms)ã€‚è‹¥è¿›ç¨‹æœªåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…æ‰§è¡Œå®Œï¼Œåˆ™å‰¥å¤ºå¤„ç†æœºï¼Œå°†è¿›ç¨‹é‡æ–°æ”¾åˆ°å°±ç»ªé˜Ÿåˆ—é˜Ÿå°¾é‡æ–°æ’é˜Ÿ</p></li><li><p>ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦:ç”¨äºè¿›ç¨‹è°ƒåº¦(åªæœ‰ä½œä¸šæ”¾å…¥å†…å­˜å»ºç«‹äº†ç›¸åº”çš„è¿›ç¨‹åï¼Œæ‰èƒ½è¢«åˆ†é…å¤„ç†æœºæ—¶é—´ç‰‡)</p></li><li><p>æ˜¯å¦å¯æŠ¢å :è‹¥è¿›ç¨‹æœªèƒ½åœ¨æ—¶é—´ç‰‡å†…è¿è¡Œå®Œï¼Œå°†è¢«å¼ºè¡Œå‰¥å¤ºå¤„ç†æœºä½¿ç”¨æƒï¼Œå› æ­¤æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•å±äºæŠ¢å å¼çš„ç®—æ³•ã€‚ç”±æ—¶é’Ÿè£…ç½®å‘å‡º<strong>æ—¶é’Ÿä¸­æ–­</strong>æ¥é€šçŸ¥CPUæ—¶é—´ç‰‡å·²åˆ°</p></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šå…¬å¹³ã€å“åº”å¿«ï¼Œé€‚ç”¨äºåˆ†æ—¶æ“ä½œç³»ç»Ÿ</li><li>ç¼ºç‚¹ï¼šç”±äºé«˜é¢‘ç‡çš„è¿›ç¨‹åˆ‡æ¢ï¼Œå› æ­¤æœ‰ä¸€å®šå¼€é”€ï¼›ä¸åŒºåˆ†ä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦</li></ul></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿: ä¸ä¼š</p></li><li><p>è¡¥å……: æ—¶é—´ç‰‡å¤ªå¤§æˆ–å¤ªå°åˆ†åˆ«æœ‰ä»€ä¹ˆå½±å“?</p><ul><li>å¦‚æœæ—¶é—´ç‰‡å¤ªå¤§ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½å¯ä»¥åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…å°±å®Œæˆï¼Œåˆ™æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•é€€åŒ–ä¸ºå…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼Œå¹¶ä¸”ä¼šå¢å¤§è¿›ç¨‹å“åº”æ—¶é—´ã€‚å› æ­¤æ—¶é—´ç‰‡ä¸èƒ½å¤ªå¤§</li><li>å¦ä¸€æ–¹é¢ï¼Œè¿›ç¨‹è°ƒåº¦ã€åˆ‡æ¢æ˜¯æœ‰æ—¶é—´ä»£ä»·çš„(ä¿å­˜ã€æ¢å¤è¿è¡Œç¯å¢ƒ)ï¼Œå› æ­¤å¦‚æœæ—¶é—´ç‰‡å¤ªå°ï¼Œä¼šå¯¼è‡´è¿›ç¨‹åˆ‡æ¢è¿‡äºé¢‘ç¹ï¼Œç³»ç»Ÿä¼šèŠ±å¤§é‡çš„æ—¶é—´æ¥å¤„ç†è¿›ç¨‹åˆ‡æ¢ï¼Œä»è€Œå¯¼è‡´å®é™…ç”¨äºè¿›ç¨‹æ‰§è¡Œçš„æ—¶é—´æ¯”ä¾‹å‡å°‘ã€‚å¯è§æ—¶é—´ç‰‡ä¹Ÿä¸èƒ½å¤ªå°</li><li>ä¸€èˆ¬æ¥è¯´ï¼Œè®¾è®¡æ—¶é—´ç‰‡æ—¶è¦è®©åˆ‡æ¢è¿›ç¨‹çš„å¼€é”€å æ¯”ä¸è¶…è¿‡1%</li></ul></li></ul><h3 id="ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•">6.2 <strong>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•</strong></h3><ul><li><p>ç®—æ³•æ€æƒ³:éšç€è®¡ç®—æœºçš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯å®æ—¶æ“ä½œç³»ç»Ÿçš„å‡ºç°ï¼Œè¶Šæ¥è¶Šå¤šçš„åº”ç”¨åœºæ™¯éœ€è¦æ ¹æ®ä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦æ¥å†³å®šå¤„ç†é¡ºåº</p></li><li><p>ç®—æ³•è§„åˆ™: è°ƒåº¦æ—¶é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„ä½œä¸š/è¿›ç¨‹</p></li><li><p>ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦:æ—¢å¯ä»¥ç”¨äºä½œä¸šè°ƒåº¦ï¼Œä¹Ÿå¯ç”¨äºè¿›ç¨‹è°ƒåº¦ã€‚ç”šè‡³ï¼Œè¿˜ä¼šç”¨äºåœ¨ä¹‹åä¼šå­¦ä¹ çš„<strong>I/Oè°ƒåº¦</strong>ä¸­</p></li><li><p>æ˜¯å¦å¯æŠ¢å :<strong>æŠ¢å å¼ã€éæŠ¢å å¼éƒ½æœ‰</strong>ã€‚åšé¢˜æ—¶çš„åŒºåˆ«åœ¨äº:éæŠ¢å å¼åªéœ€åœ¨è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºæ—¶è¿›è¡Œè°ƒåº¦å³å¯ï¼Œè€ŒæŠ¢å å¼è¿˜éœ€åœ¨å°±ç»ªé˜Ÿåˆ—å˜åŒ–æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦ä¼šå‘ç”ŸæŠ¢å </p></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šç”¨ä¼˜å…ˆçº§åŒºåˆ†ç´§æ€¥ç¨‹åº¦ã€é‡è¦ç¨‹åº¦ï¼Œé€‚ç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿã€‚å¯çµæ´»åœ°è°ƒæ•´å¯¹å„ç§ä½œä¸š/è¿›ç¨‹çš„åå¥½ç¨‹åº¦</li><li>ç¼ºç‚¹ï¼šè‹¥æºæºä¸æ–­åœ°æœ‰é«˜ä¼˜å…ˆçº§è¿›ç¨‹åˆ°æ¥ï¼Œåˆ™å¯èƒ½å¯¼è‡´é¥¥é¥¿</li></ul></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿: ä¼š</p></li><li><p>è¡¥å……:</p><ul><li>å°±ç»ªé˜Ÿåˆ—æœªå¿…åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æŒ‰ç…§ä¸åŒä¼˜å…ˆçº§æ¥ç»„ç»‡ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥æŠŠä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹æ’åœ¨æ›´é è¿‘é˜Ÿå¤´çš„ä½ç½®</li><li>æ ¹æ®ä¼˜å…ˆçº§æ˜¯å¦å¯ä»¥åŠ¨æ€æ”¹å˜ï¼Œå¯å°†ä¼˜å…ˆçº§åˆ†ä¸º<strong>é™æ€ä¼˜å…ˆçº§</strong>å’Œ<strong>åŠ¨æ€ä¼˜å…ˆçº§</strong>ä¸¤ç§<ul><li>é™æ€ä¼˜å…ˆçº§: åˆ›å»ºè¿›ç¨‹æ—¶ç¡®å®šï¼Œä¹‹åä¸€ç›´ä¸å˜</li><li>åŠ¨æ€ä¼˜å…ˆçº§:åˆ›å»ºè¿›ç¨‹æ—¶æœ‰ä¸€ä¸ªåˆå§‹å€¼ï¼Œä¹‹åä¼šæ ¹æ®æƒ…å†µåŠ¨æ€åœ°è°ƒæ•´ä¼˜å…ˆçº§</li></ul></li><li><strong>å¦‚ä½•åˆç†åœ°è®¾ç½®å„ç±»è¿›ç¨‹çš„ä¼˜å…ˆçº§?</strong><ul><li>ç³»ç»Ÿè¿›ç¨‹ä¼˜å…ˆçº§ é«˜äº ç”¨æˆ·è¿›ç¨‹</li><li>å‰å°è¿›ç¨‹ä¼˜å…ˆçº§ é«˜äº åå°è¿›ç¨‹</li><li>æ“ä½œç³»ç»Ÿæ›´åå¥½<strong>I/Oå‹è¿›ç¨‹</strong>(æˆ–ç§°<strong>I/Oç¹å¿™å‹è¿›ç¨‹</strong>)<ul><li>I/Oè®¾å¤‡å’ŒCPUå¯ä»¥å¹¶è¡Œå·¥ä½œã€‚å¦‚æœä¼˜å…ˆè®©I/Oç¹å¿™å‹è¿›ç¨‹ä¼˜å…ˆè¿è¡Œçš„è¯ï¼Œåˆ™è¶Šæœ‰å¯èƒ½è®©I/Oè®¾å¤‡å°½æ—©åœ°æŠ•å…¥å·¥ä½œï¼Œåˆ™èµ„æºåˆ©ç”¨ç‡ã€ç³»ç»Ÿååé‡éƒ½ä¼šå¾—åˆ°æå‡</li><li>æ³¨:ä¸I/Oå‹è¿›ç¨‹ç›¸å¯¹çš„æ˜¯<strong>è®¡ç®—å‹è¿›ç¨‹</strong>(æˆ–ç§°<strong>CPUç¹å¿™å‹è¿›ç¨‹</strong>)</li></ul></li></ul></li><li><strong>å¦‚æœé‡‡ç”¨çš„æ˜¯åŠ¨æ€ä¼˜å…ˆçº§ï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥è°ƒæ•´?</strong><ul><li>å¯ä»¥ä»è¿½æ±‚å…¬å¹³ã€æå‡èµ„æºåˆ©ç”¨ç‡ç­‰è§’åº¦è€ƒè™‘</li><li>å¦‚æœæŸè¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…äº†å¾ˆé•¿æ—¶é—´ï¼Œåˆ™å¯ä»¥é€‚å½“æå‡å…¶ä¼˜å…ˆçº§</li><li>å¦‚æœæŸè¿›ç¨‹å ç”¨å¤„ç†æœºè¿è¡Œäº†å¾ˆé•¿æ—¶é—´ï¼Œåˆ™å¯ä»¥é€‚å½“é™ä½å…¶ä¼˜å…ˆçº§</li><li>å¦‚æœå‘ç°ä¸€ä¸ªè¿›ç¨‹é¢‘ç¹åœ°è¿›è¡ŒI/Oæ“ä½œï¼Œåˆ™å¯é€‚å½“æå‡å…¶ä¼˜å…ˆçº§</li></ul></li></ul></li></ul><h3 id="å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•">6.3<strong>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•</strong></h3><ul><li><p>ç®—æ³•æ€æƒ³: å¯¹å…¶ä»–è°ƒåº¦ç®—æ³•çš„æŠ˜ä¸­æƒè¡¡</p></li><li><p>ç®—æ³•è§„åˆ™:</p><ul><li>è®¾ç½®å¤šçº§å°±ç»ªé˜Ÿåˆ—ï¼Œå„çº§é˜Ÿåˆ—ä¼˜å…ˆçº§ä»é«˜åˆ°åº•ï¼Œæ—¶é—´ç‰‡ä»å°åˆ°å¤§</li><li>æ–°è¿›ç¨‹åˆ°è¾¾æ—¶å…ˆè¿›å…¥ç¬¬1çº§é˜Ÿåˆ—ï¼ŒæŒ‰FCFSåŸåˆ™æ’é˜Ÿç­‰å¾…åˆ†é…æ—¶é—´ç‰‡ï¼Œè‹¥ç”¨å®Œæ—¶é—´ç‰‡è¿›ç¨‹è¿˜æœªç»“æŸï¼Œåˆ™è¿›ç¨‹è¿›å…¥ä¸‹ä¸€çº§é˜Ÿåˆ—é˜Ÿå°¾ã€‚å¦‚æœæ­¤æ—¶å·²ç»æ˜¯åœ¨æœ€ä¸‹çº§çš„é˜Ÿåˆ—ï¼Œåˆ™é‡æ–°æ”¾å›è¯¥é˜Ÿåˆ—é˜Ÿå°¾</li><li>åªæœ‰ç¬¬kçº§é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šä¸ºk+1çº§é˜Ÿå¤´çš„è¿›ç¨‹åˆ†é…æ—¶é—´ç‰‡ã€‚å½“é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—æœ‰æ–°è¿›ç¨‹åˆ°è¾¾æ—¶ï¼Œä¼šå‰¥å¤ºæ­£åœ¨è¿è¡Œçš„ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ï¼Œå¹¶å°†è¢«å‰¥å¤ºçš„è¿›ç¨‹é‡æ–°æ”¾å›å…¶æ‰€åœ¨çš„ä½ä¼˜å…ˆçº§é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œä¹‹åå½“ç®—æ³•è°ƒåº¦åˆ°è¯¥è¢«å‰¥å¤ºçš„è¿›ç¨‹æ—¶å†é‡æ–°åˆ†é…å…¶æ‰€åœ¨é˜Ÿåˆ—å¯¹åº”çš„æ—¶é—´ç‰‡</li></ul></li><li><p>ç”¨äºä½œä¸š/è¿›ç¨‹è°ƒåº¦: ç”¨äºè¿›ç¨‹è°ƒåº¦</p></li><li><p>æ˜¯å¦å¯æŠ¢å :æŠ¢å å¼çš„ç®—æ³•ã€‚åœ¨kçº§é˜Ÿåˆ—çš„è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥æ›´ä¸Šçº§çš„é˜Ÿåˆ—(1~k-1çº§)ä¸­è¿›å…¥äº†ä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œåˆ™ç”±äºæ–°è¿›ç¨‹å¤„äºä¼˜å…ˆçº§æ›´é«˜çš„é˜Ÿåˆ—ä¸­ï¼Œå› æ­¤æ–°è¿›ç¨‹ä¼šæŠ¢å å¤„ç†æœºï¼ŒåŸæ¥è¿è¡Œçš„è¿›ç¨‹æ”¾å›kçº§é˜Ÿåˆ—é˜Ÿå°¾</p></li><li><p>ä¼˜ç¼ºç‚¹</p><ul><li>å¯¹å„ç±»å‹è¿›ç¨‹ç›¸å¯¹å…¬å¹³(FCFSçš„ä¼˜ç‚¹)ï¼›</li><li>æ¯ä¸ªæ–°åˆ°è¾¾çš„è¿›ç¨‹éƒ½å¯ä»¥å¾ˆå¿«å°±å¾—åˆ°å“åº”(RRçš„ä¼˜ç‚¹)ï¼›</li><li>çŸ­è¿›ç¨‹åªç”¨è¾ƒå°‘çš„æ—¶é—´å°±å¯å®Œæˆ(SPFçš„ä¼˜ç‚¹)ï¼›</li><li>ä¸å¿…å®ç°ä¼°è®¡è¿›ç¨‹çš„è¿è¡Œæ—¶é—´(é¿å…ç”¨æˆ·ä½œå‡)ï¼›</li><li>å¯çµæ´»åœ°è°ƒæ•´å¯¹å„ç±»è¿›ç¨‹çš„åå¥½ç¨‹åº¦ï¼Œæ¯”å¦‚CPUå¯†é›†å‹è¿›ç¨‹ã€I/Oå¯†é›†å‹è¿›ç¨‹(æ‹“å±•:å¯ä»¥å°†å› I/Oé˜»å¡çš„è¿›ç¨‹é‡æ–°æ”¾å›åŸé˜Ÿåˆ—ï¼Œè¿™æ ·I/Oå‹è¿›ç¨‹å°±å¯ä»¥ä¿æŒè¾ƒé«˜ä¼˜å…ˆçº§)</li></ul></li><li><p>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿: ä¼š</p></li><li><p>æ³¨ï¼šæ¯”èµ·æ—©æœŸçš„æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œç”±äºè®¡ç®—æœºé€ ä»·å¤§å¹…é™ä½ï¼Œå› æ­¤ä¹‹åå‡ºç°çš„äº¤äº’å¼æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬åˆ†æ—¶æ“ä½œç³»ç»Ÿã€å®æ—¶æ“ä½œç³»ç»Ÿç­‰)æ›´æ³¨é‡ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€å…¬å¹³æ€§ã€å¹³è¡¡æ€§ç­‰æŒ‡æ ‡ã€‚è€Œè¿™å‡ ç§ç®—æ³•æ°å¥½ä¹Ÿèƒ½è¾ƒå¥½åœ°æ»¡è¶³äº¤äº’å¼ç³»ç»Ÿçš„éœ€æ±‚ã€‚å› æ­¤è¿™ä¸‰ç§ç®—æ³•é€‚åˆç”¨äºäº¤äº’å¼ç³»ç»Ÿã€‚ï¼ˆæ¯”å¦‚UNIXä½¿ç”¨çš„å°±æ˜¯å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•)</p></li></ul><h2 id="è°ƒåº¦ç®—æ³•3"><strong>7. è°ƒåº¦ç®—æ³•ï¼ˆ3ï¼‰</strong></h2><ol type="1"><li>å¤šçº§é˜Ÿåˆ—è°ƒåº¦ç®—æ³•</li></ol><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-2-%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/image-20241120150022201.png" alt="å¤šçº§é˜Ÿåˆ—è°ƒåº¦ç®—æ³•"><figcaption aria-hidden="true">å¤šçº§é˜Ÿåˆ—è°ƒåº¦ç®—æ³•</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç¬¬äºŒç«  è¿›ç¨‹ç®¡ç†-2.1 è¿›ç¨‹ä¸çº¿ç¨‹</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿›ç¨‹ä¸çº¿ç¨‹"><strong>2.1 è¿›ç¨‹ä¸çº¿ç¨‹</strong></h1><h2 id="è¿›ç¨‹çš„æ¦‚å¿µç»„æˆç‰¹å¾"><strong>1.è¿›ç¨‹çš„æ¦‚å¿µã€ç»„æˆã€ç‰¹å¾</strong></h2><h3 id="è¿›ç¨‹çš„æ¦‚å¿µ">1.1 <strong>è¿›ç¨‹çš„æ¦‚å¿µ</strong></h3><ol type="1"><li><strong>ç¨‹åº</strong></li></ol><ul><li>æ˜¯é™æ€çš„ï¼Œå°±æ˜¯å­˜æ”¾åœ¨ç£ç›˜é‡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±æ˜¯ä¸€ç³»åˆ—çš„æŒ‡ä»¤é›†åˆ</li></ul><ol start="2" type="1"><li><strong>è¿›ç¨‹</strong></li></ol><ul><li><strong>æ˜¯åŠ¨æ€çš„ï¼Œæ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹,æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½</strong>,åŒä¸€ä¸ªç¨‹åºå¤šæ¬¡æ‰§è¡Œä¼šå¯¹åº”å¤šä¸ªè¿›ç¨‹<ul><li>ç¡®åˆ‡æ¥è¯´, æ˜¯<strong>è¿›ç¨‹å®ä½“</strong>çš„æ‰§è¡Œè¿‡ç¨‹</li><li><strong>è°ƒåº¦</strong>:ä¸€ä¸ªè¿›ç¨‹è¢«â€œè°ƒåº¦â€ï¼Œå°±æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå†³å®šè®©è¿™ä¸ªè¿›ç¨‹ä¸ŠCPUè¿è¡Œ</li><li>å½“å¼•å…¥<strong>çº¿ç¨‹</strong>å, è¿›ç¨‹ä¸å†æ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½,ä»…ä»…æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½</li></ul></li></ul><h3 id="è¿›ç¨‹è¿›ç¨‹å®ä½“çš„ç»„æˆ">1.2<strong>è¿›ç¨‹(è¿›ç¨‹å®ä½“)çš„ç»„æˆ</strong></h3><ul><li><p><strong>PCB(Process Control Block, è¿›ç¨‹æ§åˆ¶å—)</strong></p><ul><li><strong>ç»„æˆ</strong>:<ul><li>å½“è¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ã€ä¸é‡å¤çš„â€œèº«ä»½è¯å·â€-- <strong>PID</strong> ï¼ˆProcess IDï¼Œè¿›ç¨‹IDï¼‰</li><li>è®°å½•PIDã€è¿›ç¨‹æ‰€å±ç”¨æˆ·UID<ul><li>åŸºæœ¬çš„è¿›ç¨‹æè¿°ä¿¡æ¯ï¼Œå¯ä»¥è®©æ“ä½œç³»ç»ŸåŒºåˆ†å„ä¸ªè¿›ç¨‹</li></ul></li><li>è®°å½•ç»™è¿›ç¨‹åˆ†é…äº†å“ªäº›èµ„æºï¼ˆå¦‚ï¼šåˆ†é…äº†å¤šå°‘å†…å­˜ã€æ­£åœ¨ä½¿ç”¨å“ªäº›I/Oè®¾å¤‡ã€æ­£åœ¨ä½¿ç”¨å“ªäº›æ–‡ä»¶ï¼‰<ul><li>å¯ç”¨äºå®ç°æ“ä½œç³»ç»Ÿå¯¹èµ„æºçš„ç®¡ç†</li></ul></li><li>è®°å½•è¿›ç¨‹çš„è¿è¡Œæƒ…å†µï¼ˆå¦‚ï¼šCPUä½¿ç”¨æ—¶é—´ã€ç£ç›˜ä½¿ç”¨æƒ…å†µã€ç½‘ç»œæµé‡ä½¿ç”¨æƒ…å†µã€è¿›ç¨‹å½“å‰çŠ¶æ€[å°±ç»ª/è¿è¡Œ/é˜»å¡...]ç­‰ï¼‰<ul><li>å¯ç”¨äºå®ç°æ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹çš„æ§åˆ¶ã€è°ƒåº¦</li></ul></li><li>è®°å½•å¤„ç†æœºç›¸å…³ä¿¡æ¯ï¼ˆå¦‚ï¼šPSWã€PCç­‰å„ç§å¯„å­˜å™¨çš„å€¼ï¼‰<ul><li>å¯ç”¨äºå®ç°è¿›ç¨‹åˆ‡æ¢</li></ul></li></ul></li><li>è¿™äº›ä¿¡æ¯éƒ½è¢«ä¿å­˜åœ¨ä¸€ä¸ªæ•°æ®ç»“æ„PCBä¸­,æ“ä½œç³»ç»Ÿéœ€è¦å¯¹å„ä¸ªå¹¶å‘è¿è¡Œçš„è¿›ç¨‹è¿›è¡Œç®¡ç†ï¼Œæ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹è¿›è¡Œç®¡ç†å·¥ä½œæ‰€éœ€çš„ä¿¡æ¯éƒ½å­˜åœ¨PCBä¸­</li><li><strong>PCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—</strong>ï¼Œå½“è¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¸ºå…¶åˆ›å»ºPCBï¼Œå½“è¿›ç¨‹ç»“æŸæ—¶ï¼Œä¼šå›æ”¶å…¶PCB</li></ul></li><li><p><strong>ç¨‹åºæ®µ</strong></p><ul><li>ç¨‹åºä»£ç è¢«ç¼–è¯‘ä¹‹åäº§ç”Ÿçš„æœºå™¨æŒ‡ä»¤åºåˆ—</li></ul></li><li><p><strong>æ•°æ®æ®µ</strong></p><ul><li>è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„å„ç§æ•°æ®</li></ul></li><li><p>PCBæ˜¯ç»™æ“ä½œç³»ç»Ÿç”¨çš„ï¼›ç¨‹åºæ®µã€æ•°æ®æ®µæ˜¯ç»™è¿›ç¨‹è‡ªå·±ç”¨çš„ï¼Œä¸è¿›ç¨‹è‡ªèº«çš„è¿è¡Œé€»è¾‘æœ‰å…³</p></li><li><p>ä¸€ä¸ª<strong>è¿›ç¨‹å®ä½“ï¼ˆè¿›ç¨‹æ˜ åƒï¼‰</strong>ç”±PCBã€ç¨‹åºæ®µã€æ•°æ®æ®µç»„æˆã€‚è¿›ç¨‹æ˜¯åŠ¨æ€çš„ï¼Œè¿›ç¨‹å®ä½“ï¼ˆè¿›ç¨‹æ˜ åƒï¼‰æ˜¯é™æ€çš„ï¼Œè¿›ç¨‹å®ä½“ååº”äº†è¿›ç¨‹åœ¨æŸä¸€æ—¶åˆ»çš„çŠ¶æ€</p></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119185534404.png"></p><h3 id="è¿›ç¨‹çš„ç‰¹å¾">1.3 <strong>è¿›ç¨‹çš„ç‰¹å¾</strong></h3><ul><li><p>åŠ¨æ€æ€§: è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹, æ˜¯åŠ¨æ€åœ°äº§ç”Ÿã€å˜åŒ–å’Œæ¶ˆäº¡çš„</p><ul><li><strong>åŠ¨æ€æ€§æ˜¯è¿›ç¨‹æœ€åŸºæœ¬çš„ç‰¹å¾</strong></li></ul></li><li><p>å¹¶å‘æ€§: å†…å­˜ä¸­æœ‰å¤šä¸ªè¿›ç¨‹å®ä½“, å„è¿›ç¨‹å¯å¹¶å‘æ‰§è¡Œ</p></li><li><p>ç‹¬ç«‹æ€§:è¿›ç¨‹æ˜¯èƒ½ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹è·å¾—èµ„æºã€ç‹¬ç«‹æ¥å—è°ƒåº¦çš„åŸºæœ¬å•ä½</p></li><li><p>å¼‚æ­¥æ€§: å„è¿›ç¨‹æŒ‰å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨æ¨è¿›,æ“ä½œç³»ç»Ÿè¦æä¾›"<strong>è¿›ç¨‹åŒæ­¥æœºåˆ¶</strong>"æ¥è§£å†³å¼‚æ­¥é—®é¢˜</p><ul><li>å¼‚æ­¥æ€§ä¼šå¯¼è‡´å¹¶å‘ç¨‹åºæ‰§è¡Œç»“æœçš„ä¸ç¡®å®šæ€§</li></ul></li><li><p>ç»“æ„æ€§: æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šé…ç½®ä¸€ä¸ªPCB, ç»“æ„ä¸Šçœ‹,è¿›ç¨‹ç”±PCBã€ç¨‹åºæ®µã€æ•°æ®æ®µç»„æˆ</p></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119185730743.png"></p><h2 id="è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢è¿›ç¨‹çš„ç»„ç»‡"><strong>2.è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢ã€è¿›ç¨‹çš„ç»„ç»‡</strong></h2><h3 id="è¿›ç¨‹çš„çŠ¶æ€">2.1 <strong>è¿›ç¨‹çš„çŠ¶æ€</strong></h3><ul><li><p><strong>åˆ›å»ºæ€</strong>(New, åˆç§°: æ–°å»ºæ€)</p><ul><li>è¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºæ—¶, å®ƒçš„çŠ¶æ€æ˜¯"åˆ›å»ºæ€",åœ¨è¿™ä¸ªé˜¶æ®µæ“ä½œç³»ç»Ÿä¼šä¸ºè¿›ç¨‹åˆ†é…èµ„æºã€åˆå§‹åŒ–PCB</li></ul></li><li><p><strong>å°±ç»ªæ€</strong>(Ready)</p><ul><li>å½“è¿›ç¨‹åˆ›å»ºå®Œæˆå, ä¾¿è¿›å…¥"å°±ç»ªæ€", å¤„äºå°±ç»ªæ€çš„è¿›ç¨‹å·²ç»å…·å¤‡è¿è¡Œæ¡ä»¶,ä½†ç”±äºæ²¡æœ‰ç©ºé—²CPU,å°±æš‚æ—¶ä¸èƒ½è¿è¡Œ</li></ul></li><li><p><strong>è¿è¡Œæ€</strong>(Running)</p><ul><li>å½“CPUç©ºé—²æ—¶, æ“ä½œç³»ç»Ÿå°±ä¼šé€‰æ‹©ä¸€ä¸ªå°±ç»ªè¿›ç¨‹, è®©å®ƒä¸Šå¤„ç†æœºè¿è¡Œ</li><li>å¦‚æœä¸€ä¸ªè¿›ç¨‹æ­¤æ—¶åœ¨CPUä¸Šè¿è¡Œ, é‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å¤„äº"è¿è¡Œæ€",CPUä¼šæ‰§è¡Œè¯¥è¿›ç¨‹å¯¹åº”çš„ç¨‹åº(æŒ‡ä»¤åºåˆ—)</li><li>å•CPUæƒ…å†µä¸‹, åŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºè¿è¡Œæ€, å¤šæ ¸CPUæƒ…å†µä¸‹,å¯èƒ½æœ‰å¤šä¸ªè¿›ç¨‹å¤„äºè¿è¡Œæ€</li></ul></li><li><p><strong>é˜»å¡æ€</strong>(Blocked/Waiting, åˆç§°: ç­‰å¾…æ€)</p><ul><li>åœ¨è¿›ç¨‹è¿è¡Œçš„è¿‡ç¨‹ä¸­,å¯èƒ½ä¼šè¯·æ±‚ç­‰å¾…æŸä¸ªäº‹ä»¶çš„å‘ç”Ÿ(å¦‚ç­‰å¾…æŸç§ç³»ç»Ÿèµ„æºçš„åˆ†é…,æˆ–è€…ç­‰å¾…å…¶ä»–è¿›ç¨‹çš„å“åº”)</li><li>åœ¨è¿™ä¸ªäº‹ä»¶å‘ç”Ÿä¹‹å‰, è¿›ç¨‹æ— æ³•ç»§ç»­å¾€ä¸‹æ‰§è¡Œ,æ­¤æ—¶æ“ä½œç³»ç»Ÿä¼šè®©è¿™ä¸ªè¿›ç¨‹ä¸‹CPU, å¹¶è®©å®ƒè¿›å…¥"é˜»å¡æ€"</li><li>å½“CPUç©ºé—²æ—¶, åˆä¼šé€‰æ‹©å¦ä¸€ä¸ª"å°±ç»ªæ€"è¿›ç¨‹ä¸ŠCPUè¿è¡Œ</li></ul></li><li><p><strong>ç»ˆæ­¢æ€</strong>(Terminated, åˆç§°: ç»“æŸæ€)</p><ul><li><p>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‰§è¡Œexitç³»ç»Ÿè°ƒç”¨, è¯·æ±‚æ“ä½œç³»ç»Ÿç»ˆæ­¢è¯¥è¿›ç¨‹,æ­¤æ—¶è¯¥è¿›ç¨‹ä¼šè¿›å…¥"ç»ˆæ­¢æ€", æ“ä½œç³»ç»Ÿä¼šè®©è¿™ä¸ªè¿›ç¨‹ä¸‹CPU,å¹¶å›æ”¶å†…å­˜ç©ºé—´ç­‰èµ„æº, æœ€åè¿˜è¦å›æ”¶è¯¥è¿›ç¨‹çš„PCB</p></li><li><p>è¿›ç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­,å¤§éƒ¨åˆ†æ—¶é—´éƒ½å¤„äºè¿è¡Œæ€ã€å°±ç»ªæ€ã€é˜»å¡æ€</p></li><li><p>è¿›ç¨‹PCBä¸­, ä¼šæœ‰ä¸€ä¸ªå˜é‡stateæ¥è¡¨ç¤ºè¿›ç¨‹çš„å½“å‰çŠ¶æ€</p></li></ul></li></ul><h3 id="è¿›ç¨‹çŠ¶æ€çš„è½¬åŒ–">2.2 <strong>è¿›ç¨‹çŠ¶æ€çš„è½¬åŒ–</strong></h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119190821500.png"></p><p>æ³¨æ„ï¼šä¸èƒ½ç”±é˜»å¡æ€ç›´æ¥è½¬æ¢ä¸ºè¿è¡Œæ€ï¼Œä¹Ÿä¸èƒ½ç”±å°±ç»ªæ€ç›´æ¥è½¬æ¢ä¸ºé˜»å¡æ€ï¼ˆå› ä¸ºè¿›å…¥é˜»å¡æ€æ˜¯è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚çš„ï¼Œå¿…ç„¶éœ€è¦è¿›ç¨‹åœ¨è¿è¡Œæ—¶æ‰èƒ½å‘å‡ºè¿™ç§è¯·æ±‚)</p><h3 id="è¿›ç¨‹çš„ç»„ç»‡">2.3 <strong>è¿›ç¨‹çš„ç»„ç»‡</strong></h3><ul><li><p>ä¸ºäº†å¯¹åŒä¸€ä¸ªçŠ¶æ€ä¸‹çš„å„ä¸ªè¿›ç¨‹è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†,æ“ä½œç³»ç»Ÿä¼šå°†å„ä¸ªè¿›ç¨‹çš„PCBç»„ç»‡èµ·æ¥</p></li><li><p><strong>é“¾æ¥æ–¹å¼</strong></p><ul><li>æ“ä½œç³»ç»Ÿæ ¹æ®è¿›ç¨‹çŠ¶æ€çš„ä¸åŒ, å°†ç›¸åŒçŠ¶æ€çš„PCBæ”¾å…¥åŒä¸€ä¸ªé˜Ÿåˆ—ä¹‹ä¸­,å¾ˆå¤šæ“ä½œç³»ç»Ÿè¿˜ä¼šæ ¹æ®é˜»å¡åŸå› çš„ä¸åŒ, å†åˆ†ä¸ºå¤šä¸ªé˜»å¡é˜Ÿåˆ—,ä¼˜å…ˆçº§è¾ƒé«˜çš„å°±ç»ªè¿›ç¨‹ä¼šè¢«æ”¾å…¥å°±ç»ªé˜Ÿåˆ—çš„é˜Ÿå¤´<ul><li>æ‰§è¡ŒæŒ‡é’ˆ â†’ PCB</li><li>å°±ç»ªé˜Ÿåˆ—æŒ‡é’ˆ â†’ PCB â†’ PCB</li><li>é˜»å¡é˜Ÿåˆ—æŒ‡é’ˆ â†’ PCB â†’ PCB</li></ul></li></ul></li><li><p><strong>ç´¢å¼•æ–¹å¼</strong></p><ul><li>æ“ä½œç³»ç»Ÿæ ¹æ®è¿›ç¨‹çŠ¶æ€çš„ä¸åŒ, åˆ›å»ºå‡ å¼ ç´¢å¼•è¡¨,æ“ä½œç³»ç»ŸæŒæœ‰æŒ‡å‘å„ä¸ªç´¢å¼•è¡¨çš„æŒ‡é’ˆ, é€šè¿‡ç´¢å¼•è¡¨æ‰¾åˆ°å¯¹åº”çš„PCB</li></ul></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119191200075.png"></p><h2 id="è¿›ç¨‹æ§åˆ¶"><strong>3. è¿›ç¨‹æ§åˆ¶</strong></h2><h3 id="åŸºæœ¬æ¦‚å¿µ">3.1 <strong>åŸºæœ¬æ¦‚å¿µ</strong></h3><ul><li><strong>è¿›ç¨‹æ§åˆ¶</strong><ul><li>è¿›ç¨‹æ§åˆ¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å¯¹ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹å®æ–½æœ‰æ•ˆçš„ç®¡ç†ï¼Œå®ƒå…·æœ‰åˆ›å»ºæ–°è¿›ç¨‹ã€æ’¤é”€å·²æœ‰è¿›ç¨‹ã€å®ç°è¿›ç¨‹çŠ¶æ€è½¬æ¢ç­‰åŠŸèƒ½<ul><li>ç®€åŒ–ç†è§£ï¼šåæ­£<strong>è¿›ç¨‹æ§åˆ¶å°±æ˜¯è¦å®ç°è¿›ç¨‹çŠ¶æ€è½¬æ¢</strong></li></ul></li></ul></li><li><strong>å¦‚ä½•å®ç°è¿›ç¨‹æ§åˆ¶?</strong><ul><li>ç”¨"<strong>åŸè¯­</strong>"å®ç°<ul><li>åŸè¯­æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¨‹åºï¼Œ å®ƒçš„æ‰§è¡Œå…·æœ‰åŸå­æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ®µç¨‹åºçš„è¿è¡Œå¿…é¡»ä¸€æ°”å‘µæˆï¼Œä¸å¯ä¸­æ–­</li><li>å¦‚æœä¸èƒ½â€œä¸€æ°”å‘µæˆâ€ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´æ“ä½œç³»ç»Ÿä¸­çš„æŸäº›å…³é”®æ•°æ®ç»“æ„ä¿¡æ¯ä¸ç»Ÿä¸€çš„æƒ…å†µï¼Œè¿™ä¼šå½±å“æ“ä½œç³»ç»Ÿè¿›è¡Œåˆ«çš„ç®¡ç†å·¥ä½œ</li></ul></li></ul></li><li><strong>å¦‚ä½•å®ç°åŸè¯­çš„åŸå­æ€§?</strong><ul><li>å¯ä»¥ç”¨â€œ<strong>å…³ä¸­æ–­æŒ‡ä»¤</strong>â€å’Œâ€œ<strong>å¼€ä¸­æ–­æŒ‡ä»¤</strong>â€è¿™ä¸¤ä¸ª<strong>ç‰¹æƒæŒ‡ä»¤</strong>å®ç°åŸå­æ€§<ul><li>æ­£å¸¸æƒ…å†µä¸‹ï¼ŒCPUæ¯æ‰§è¡Œå®Œä¸€æ¡æŒ‡ä»¤éƒ½ä¼šä¾‹è¡Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­ä¿¡å·éœ€è¦å¤„ç†ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æš‚åœè¿è¡Œå½“å‰è¿™æ®µç¨‹åºï¼Œè½¬è€Œæ‰§è¡Œç›¸åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºã€‚CPUæ‰§è¡Œäº†å…³ä¸­æ–­æŒ‡ä»¤ä¹‹åï¼Œå°±ä¸å†ä¾‹è¡Œæ£€æŸ¥ä¸­æ–­ä¿¡å·ï¼Œç›´åˆ°æ‰§è¡Œå¼€ä¸­æ–­æŒ‡ä»¤ä¹‹åæ‰ä¼šæ¢å¤æ£€æŸ¥ã€‚è¿™æ ·ï¼Œå…³ä¸­æ–­ã€å¼€ä¸­æ–­ä¹‹é—´çš„è¿™äº›æŒ‡ä»¤åºåˆ—å°±æ˜¯ä¸å¯è¢«ä¸­æ–­çš„ï¼Œè¿™å°±å®ç°äº†â€œåŸå­æ€§â€œ</li></ul></li></ul></li></ul><h3 id="è¿›ç¨‹æ§åˆ¶ç›¸å…³çš„åŸè¯­">3.2 <strong>è¿›ç¨‹æ§åˆ¶ç›¸å…³çš„åŸè¯­</strong></h3><ul><li>æ— è®ºå“ªä¸ªè¿›ç¨‹æ§åˆ¶åŸè¯­ï¼Œè¦åšçš„æ— éä¸‰ç±»äº‹æƒ…ï¼š<ul><li>æ›´æ–°PCBä¸­çš„ä¿¡æ¯</li><li>å°†PCBæ’å…¥åˆé€‚çš„é˜Ÿåˆ—</li><li>åˆ†é…/å›æ”¶èµ„æº</li></ul></li><li><strong>åˆ›å»ºåŸè¯­</strong></li></ul><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119193358264.png" alt="åˆ›å»ºåŸè¯­"><figcaption aria-hidden="true">åˆ›å»ºåŸè¯­</figcaption></figure><ul><li><strong>æ’¤é”€åŸè¯­</strong></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119194153849.png"></p><ul><li><strong>é˜»å¡åŸè¯­ &amp; å”¤é†’åŸè¯­</strong></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119194433458.png"></p><ul><li><strong>åˆ‡æ¢åŸè¯­</strong></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119195359883.png"></p><ul><li>æŒ‡ä»¤é¡ºåºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šä¸­é—´ç»“æœæ˜¯æ”¾åœ¨å„ç§å¯„å­˜å™¨ä¸­çš„ï¼ŒCPUä¸­ä¼šè®¾ç½®å¾ˆå¤šâ€œå¯„å­˜å™¨ï¼ˆPSWã€PCã€IRã€é€šç”¨å¯„å­˜å™¨ï¼‰â€ï¼Œç”¨æ¥å­˜æ”¾ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€çš„æŸäº›æ•°æ®ï¼Œåœ¨<strong>è¿›ç¨‹åˆ‡æ¢</strong>æ—¶å…ˆåœ¨PCBä¸­ä¿å­˜è¿™ä¸ªè¿›ç¨‹çš„è¿è¡Œç¯å¢ƒï¼ˆä¿å­˜ä¸€äº›å¿…è¦çš„å¯„å­˜å™¨ä¿¡æ¯ï¼‰ï¼Œå½“åŸæ¥çš„è¿›ç¨‹å†æ¬¡æŠ•å…¥è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡PCBæ¢å¤å®ƒçš„è¿è¡Œç¯å¢ƒ</li></ul><h2 id="è¿›ç¨‹é€šä¿¡"><strong>4. è¿›ç¨‹é€šä¿¡</strong></h2><h3 id="ä»€ä¹ˆæ˜¯è¿›ç¨‹é€šä¿¡">4.1 <strong>ä»€ä¹ˆæ˜¯è¿›ç¨‹é€šä¿¡?</strong></h3><ul><li><strong>è¿›ç¨‹é—´é€šä¿¡(Inter-Process Communication,IPC)</strong>æ˜¯æŒ‡ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´äº§ç”Ÿæ•°æ®äº¤äº’<ul><li>å¦‚bç«™åˆ†äº«è§†é¢‘åˆ°qqç¾¤ä¸­, å°±éœ€è¦ä¸åŒè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡</li></ul></li></ul><h3 id="ä¸ºä»€ä¹ˆè¿›ç¨‹é€šä¿¡éœ€è¦æ“ä½œç³»ç»Ÿæ”¯æŒ">4.2<strong>ä¸ºä»€ä¹ˆè¿›ç¨‹é€šä¿¡éœ€è¦æ“ä½œç³»ç»Ÿæ”¯æŒ?</strong></h3><ul><li><p>è¿›ç¨‹æ˜¯åˆ†é…ç³»ç»Ÿèµ„æºçš„å•ä½ï¼ˆåŒ…æ‹¬å†…å­˜åœ°å€ç©ºé—´ï¼‰ï¼Œå› æ­¤å„è¿›ç¨‹æ‹¥æœ‰çš„å†…å­˜åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹ï¼ˆ<strong>è¿›ç¨‹çš„ç‹¬ç«‹æ€§</strong>ï¼‰</p></li><li><p>ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œä½†æ˜¯è¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢åˆæ˜¯å¿…é¡»å®ç°çš„ï¼Œä¸ºäº†ä¿è¯è¿›ç¨‹é—´çš„å®‰å…¨é€šä¿¡ï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›æ–¹æ³•:</p><ul><li>å…±äº«å­˜å‚¨</li><li>æ¶ˆæ¯ä¼ é€’</li><li>ç®¡é“é€šä¿¡</li></ul></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119202143646.png"></p><h3 id="å…±äº«å­˜å‚¨">4.3 <strong>å…±äº«å­˜å‚¨</strong></h3><ul><li><p>è®¾ç½®ä¸€ä¸ª<strong>å…±äº«åŒº</strong>,å°†å…±äº«å†…å­˜åŒºæ˜ å°„åˆ°è¿›ç¨‹è‡ªå·±çš„åœ°å€ç©ºé—´ä¸­</p><ul><li>é€šè¿‡"<strong>å¢åŠ é¡µè¡¨é¡¹/æ®µè¡¨é¡¹</strong>"å³å¯å°†åŒä¸€ç‰‡å…±äº«å†…å­˜åŒºæ˜ å°„åˆ°å„ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­</li></ul></li><li><p>ä¸ºé¿å…å‡ºé”™,å„ä¸ªè¿›ç¨‹å¯¹å…±äº«ç©ºé—´çš„è®¿é—®åº”è¯¥æ˜¯<strong>äº’æ–¥</strong>çš„,æ“ä½œç³»ç»Ÿåªè´Ÿè´£æä¾›å…±äº«ç©ºé—´å’ŒåŒæ­¥äº’æ–¥å·¥å…·ï¼ˆå¦‚<strong>Pã€Væ“ä½œ</strong>ï¼‰</p></li><li><p><strong>ä¸¤ç§æ–¹å¼</strong>:</p><ul><li><strong>åŸºäºå­˜å‚¨åŒºçš„å…±äº«</strong>:<ul><li>åœ¨å†…å­˜ä¸­ç”»å‡ºä¸€å—å…±äº«å­˜å‚¨åŒºï¼Œæ•°æ®çš„å½¢å¼ã€å­˜æ”¾ä½ç½®éƒ½ç”±è¿›ç¨‹æ§åˆ¶ï¼Œè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿã€‚</li><li>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¿™ç§å…±äº«æ–¹å¼é€Ÿåº¦æ›´å¿«ï¼Œæ˜¯ä¸€ç§é«˜çº§é€šä¿¡æ–¹å¼</li></ul></li><li><strong>åŸºäºæ•°æ®ç»“æ„çš„å…±äº«</strong>:<ul><li>æ¯”å¦‚å…±äº«ç©ºé—´é‡Œåªèƒ½æ”¾ä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„ã€‚è¿™ç§å…±äº«æ–¹å¼é€Ÿåº¦æ…¢ã€é™åˆ¶å¤šï¼Œæ˜¯ä¸€ç§ä½çº§é€šä¿¡æ–¹å¼</li></ul></li></ul></li></ul><h3 id="æ¶ˆæ¯ä¼ é€’">4.4 <strong>æ¶ˆæ¯ä¼ é€’</strong></h3><ul><li>è¿›ç¨‹é—´çš„æ•°æ®äº¤æ¢ä»¥<strong>æ ¼å¼åŒ–çš„æ¶ˆæ¯ï¼ˆMessageï¼‰</strong>ä¸ºå•ä½ã€‚è¿›ç¨‹é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„â€œ<strong>å‘é€æ¶ˆæ¯/æ¥æ”¶æ¶ˆæ¯</strong>â€ä¸¤ä¸ª<strong>åŸè¯­</strong>è¿›è¡Œæ•°æ®äº¤æ¢<ul><li>æ ¼å¼åŒ–çš„æ¶ˆæ¯: åŒ…å«<strong>æ¶ˆæ¯å¤´</strong>ã€<strong>æ¶ˆæ¯ä½“</strong><ul><li>æ¶ˆæ¯å¤´ï¼šåŒ…æ‹¬å‘é€è¿›ç¨‹IDã€æ¥å—è¿›ç¨‹IDã€æ¶ˆæ¯ç±»å‹ã€æ¶ˆæ¯é•¿åº¦ç­‰æ ¼å¼åŒ–çš„ä¿¡æ¯ï¼ˆè®¡ç®—æœºç½‘ç»œä¸­å‘é€çš„â€œæŠ¥æ–‡â€å…¶å®å°±æ˜¯ä¸€ç§æ ¼å¼åŒ–çš„æ¶ˆæ¯ï¼‰</li><li>æ¶ˆæ¯ä½“ï¼šè¿›ç¨‹é—´å…·ä½“ä¼ é€’çš„ä¿¡æ¯</li></ul></li></ul></li><li><strong>ä¸¤ç§æ–¹å¼</strong>:<ul><li><strong>ç›´æ¥é€šä¿¡æ–¹å¼</strong><ul><li>æ¶ˆæ¯å‘é€è¿›ç¨‹è¦æŒ‡æ˜æ¥æ”¶è¿›ç¨‹çš„id,æ¶ˆæ¯ç›´æ¥æŒ‚åˆ°æ¥æ”¶è¿›ç¨‹çš„æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—ä¸Š</li></ul></li><li><strong>é—´æ¥é€šä¿¡æ–¹å¼</strong><ul><li>é€šè¿‡"<strong>ä¿¡ç®±</strong>"é—´æ¥åœ°é€šä¿¡,æ¶ˆæ¯è¦å…ˆå‘é€åˆ°ä¸­é—´å®ä½“ï¼ˆä¿¡ç®±ï¼‰ä¸­,å› æ­¤åˆè¢«ç§°ä¸º"<strong>ä¿¡ç®±é€šä¿¡æ–¹å¼</strong>"</li></ul></li></ul></li></ul><h3 id="ç®¡é“é€šä¿¡">4.5 <strong>ç®¡é“é€šä¿¡</strong></h3><ul><li><p>â€œ<strong>ç®¡é“</strong>â€æ˜¯æŒ‡ç”¨äºè¿æ¥è¯»å†™è¿›ç¨‹çš„ä¸€ä¸ªå…±äº«æ–‡ä»¶ï¼Œåˆåpipeæ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªå¤§å°å›ºå®šçš„ç¼“å†²åŒº</p></li><li><p>æ•°æ®åœ¨ç®¡é“ä¸­ä»¥æ•°æ®æµçš„æ–¹å¼è¿›è¡Œä¼ è¾“ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™</p></li><li><p><strong>ç®¡é“é€šä¿¡</strong></p><ul><li>ç®¡é“åªèƒ½é‡‡ç”¨<strong>åŠåŒå·¥é€šä¿¡</strong>ï¼ŒæŸä¸€æ—¶é—´æ®µå†…åªèƒ½å®ç°å•å‘çš„ä¼ è¾“ã€‚å¦‚æœè¦å®ç°åŒå‘åŒæ—¶é€šä¿¡ï¼Œåˆ™éœ€è¦è®¾ç½®ä¸¤ä¸ªç®¡é“</li><li>å„è¿›ç¨‹è¦<strong>äº’æ–¥</strong>åœ°è®¿é—®ç®¡é“(ç”±æ“ä½œç³»ç»Ÿå®ç°)</li><li>å½“<strong>ç®¡é“å†™æ»¡</strong>æ—¶ï¼Œ<strong>å†™è¿›ç¨‹å°†é˜»å¡</strong>ï¼Œç›´åˆ°è¯»è¿›ç¨‹å°†ç®¡é“ä¸­çš„æ•°æ®å–èµ°ï¼Œå³å¯å”¤é†’å†™è¿›ç¨‹<ul><li><strong>åªè¦ç®¡é“æ²¡æ»¡ï¼Œå†™è¿›ç¨‹å°±å¯ä»¥å¾€ç®¡é“å†™æ•°æ®</strong></li></ul></li><li>å½“<strong>ç®¡é“è¯»ç©º</strong>æ—¶ï¼Œ<strong>è¯»è¿›ç¨‹å°†é˜»å¡</strong>ï¼Œç›´åˆ°å†™è¿›ç¨‹å¾€ç®¡é“ä¸­å†™å…¥æ•°æ®ï¼Œå³å¯å”¤é†’è¯»è¿›ç¨‹<ul><li><strong>åªè¦ç®¡é“æ²¡ç©ºï¼Œè¯»è¿›ç¨‹å°±å¯ä»¥ä»ç®¡é“è¯»æ•°æ®</strong></li></ul></li><li>ç®¡é“ä¸­çš„æ•°æ®ä¸€æ—¦è¢«è¯»å‡ºï¼Œå°±å½»åº•æ¶ˆå¤±ã€‚å› æ­¤ï¼Œå½“å¤šä¸ªè¿›ç¨‹è¯»åŒä¸€ä¸ªç®¡é“æ—¶ï¼Œå¯èƒ½ä¼šé”™ä¹±ã€‚å¯¹æ­¤ï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆ:<ul><li>ä¸€ä¸ªç®¡é“å…è®¸å¤šä¸ªå†™è¿›ç¨‹ï¼Œä¸€ä¸ªè¯»è¿›ç¨‹ï¼ˆå®˜æ–¹ç­”æ¡ˆï¼‰</li><li>ä¸€ä¸ªç®¡é“å…è®¸å¤šä¸ªå†™è¿›ç¨‹ï¼Œå¤šä¸ªè¯»è¿›ç¨‹ï¼Œä½†ç³»ç»Ÿä¼šè®©å„ä¸ªè¯»è¿›ç¨‹è½®æµä»ç®¡é“ä¸­è¯»æ•°æ®ï¼ˆLinuxæ–¹æ¡ˆï¼‰</li></ul></li></ul></li></ul><h2 id="çº¿ç¨‹çš„æ¦‚å¿µ"><strong>5. çº¿ç¨‹çš„æ¦‚å¿µ</strong></h2><h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹-ä¸ºä»€ä¹ˆè¦å¼•å…¥çº¿ç¨‹">5.1 <strong>ä»€ä¹ˆæ˜¯çº¿ç¨‹,ä¸ºä»€ä¹ˆè¦å¼•å…¥çº¿ç¨‹?</strong></h3><ul><li>è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹, ä¼ ç»Ÿçš„è¿›ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•ä½,æœ‰çš„è¿›ç¨‹å¯èƒ½éœ€è¦"åŒæ—¶"åšå¾ˆå¤šäº‹,è€Œä¼ ç»Ÿçš„è¿›ç¨‹åªèƒ½ä¸²è¡Œåœ°æ‰§è¡Œä¸€ç³»åˆ—ç¨‹åºã€‚ä¸ºæ­¤,å¼•å…¥äº†"<strong>çº¿ç¨‹</strong>", æ¥å¢åŠ å¹¶å‘åº¦, å¼•å…¥çº¿ç¨‹å,<strong>çº¿ç¨‹æˆä¸ºäº†ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•ä½</strong><ul><li>çº¿ç¨‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„CPUæ‰§è¡Œå•å…ƒ, å¼•å…¥çº¿ç¨‹ä¹‹å, ä¸ä»…æ˜¯è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘,è¿›ç¨‹å†…çš„å„çº¿ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥å¹¶å‘, ä»è€Œè¿›ä¸€æ­¥æå‡äº†ç³»ç»Ÿçš„å¹¶å‘åº¦,ä½¿å¾—ä¸€ä¸ªè¿›ç¨‹å†…ä¹Ÿå¯ä»¥å¹¶å‘å¤„ç†å„ç§ä»»åŠ¡</li><li>å¼•å…¥çº¿ç¨‹å,<strong>è¿›ç¨‹åªä½œä¸ºé™¤CPUä¹‹å¤–çš„ç³»ç»Ÿèµ„æºçš„åˆ†é…å•ä½</strong></li></ul></li></ul><h3 id="å¼•å…¥çº¿ç¨‹æœºåˆ¶å-æœ‰ä»€ä¹ˆå˜åŒ–">5.2 <strong>å¼•å…¥çº¿ç¨‹æœºåˆ¶å,æœ‰ä»€ä¹ˆå˜åŒ–?</strong></h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119205846943.png"></p><h3 id="çº¿ç¨‹çš„å±æ€§">5.3 <strong>çº¿ç¨‹çš„å±æ€§</strong></h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119211033315.png"></p><h2 id="çº¿ç¨‹çš„å®ç°æ–¹å¼å’Œå¤šçº¿ç¨‹æ¨¡å‹"><strong>6.çº¿ç¨‹çš„å®ç°æ–¹å¼å’Œå¤šçº¿ç¨‹æ¨¡å‹</strong></h2><h3 id="çº¿ç¨‹çš„å®ç°æ–¹å¼">6.1 <strong>çº¿ç¨‹çš„å®ç°æ–¹å¼</strong></h3><ul><li><p><strong>ç”¨æˆ·çº§çº¿ç¨‹(User-Level Thread, ULT)</strong></p><ul><li>å†å²èƒŒæ™¯ï¼šæ—©æœŸçš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚:æ—©æœŸUnixï¼‰åªæ”¯æŒè¿›ç¨‹ï¼Œä¸æ”¯æŒçº¿ç¨‹ã€‚å½“æ—¶çš„â€œçº¿ç¨‹â€æ˜¯ç”±çº¿ç¨‹åº“å®ç°çš„ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€æä¾›äº†å¼ºå¤§çš„çº¿ç¨‹åº“ï¼Œå¯ä»¥å®ç°çº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦ç­‰åŠŸèƒ½</li><li>ç”¨æˆ·çº§çº¿ç¨‹æ˜¯â€œä»£ç é€»è¾‘â€çš„è½½ä½“</li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119212407927.png"></p><ul><li><strong>ç”¨æˆ·çº§çº¿ç¨‹çš„ç®¡ç†å·¥ä½œç”±è°æ¥å®Œæˆ?</strong><ul><li>ç”¨æˆ·çº§çº¿ç¨‹ç”±åº”ç”¨ç¨‹åºé€šè¿‡çº¿ç¨‹åº“å®ç°ï¼Œæ‰€æœ‰çš„çº¿ç¨‹ç®¡ç†å·¥ä½œéƒ½ç”±åº”ç”¨ç¨‹åºè´Ÿè´£ï¼ˆåŒ…æ‹¬çº¿ç¨‹åˆ‡æ¢ï¼‰ï¼Œå¹¶ä¸æ˜¯ç”±æ“ä½œç³»ç»Ÿå®Œæˆ</li></ul></li><li><strong>ç”¨æˆ·çº§çº¿ç¨‹åˆ‡æ¢æ˜¯å¦éœ€è¦CPUå˜æ€?</strong><ul><li>ç”¨æˆ·çº§çº¿ç¨‹ä¸­ï¼Œçº¿ç¨‹åˆ‡æ¢å¯ä»¥åœ¨ç”¨æˆ·æ€ä¸‹å³å¯å®Œæˆï¼Œæ— éœ€æ“ä½œç³»ç»Ÿå¹²é¢„</li></ul></li><li><strong>æ“ä½œç³»ç»Ÿæ˜¯å¦èƒ½æ„è¯†åˆ°ç”¨æˆ·çº§çº¿ç¨‹çš„å­˜åœ¨?</strong><ul><li>åœ¨ç”¨æˆ·çœ‹æ¥ï¼Œæ˜¯æœ‰å¤šä¸ªçº¿ç¨‹ã€‚ä½†æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸çœ‹æ¥ï¼Œå¹¶æ„è¯†ä¸åˆ°çº¿ç¨‹çš„å­˜åœ¨ï¼Œæ“ä½œç³»ç»Ÿåªèƒ½çœ‹åˆ°åŒ…å«ç€å¤šä¸ªç”¨æˆ·çº§çº¿ç¨‹çš„ç¨‹åºæ‰§è¡Œçš„è¿›ç¨‹</li><li>â€œç”¨æˆ·çº§çº¿ç¨‹â€å°±æ˜¯â€œä»ç”¨æˆ·è§†è§’çœ‹èƒ½çœ‹åˆ°çš„çº¿ç¨‹â€</li></ul></li><li><strong>ä¼˜ç¼ºç‚¹</strong><ul><li>ä¼˜ç‚¹:ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢åœ¨ç”¨æˆ·æ€å³å¯å®Œæˆï¼Œä¸éœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œçº¿ç¨‹ç®¡ç†çš„ç³»ç»Ÿå¼€é”€å°ï¼Œæ•ˆç‡é«˜</li><li>ç¼ºç‚¹:å½“ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹è¢«é˜»å¡åï¼Œæ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œå¹¶å‘åº¦ä¸é«˜ï¼Œå¤šä¸ªçº¿ç¨‹ä¸å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œè¿è¡Œ</li></ul></li></ul></li><li><p><strong>å†…æ ¸çº§çº¿ç¨‹(Kernel-Level Thread, KLT,åˆç§°â€œå†…æ ¸æ”¯æŒçš„çº¿ç¨‹â€)</strong></p><ul><li>ç”±æ“ä½œç³»ç»Ÿæ”¯æŒçš„çº¿ç¨‹, å¤§å¤šæ•°ç°ä»£æ“ä½œç³»ç»Ÿéƒ½å®ç°äº†å†…æ ¸çº§çº¿ç¨‹,å¦‚Windowsã€Linux</li><li>æ“ä½œç³»ç»Ÿåªâ€œçœ‹å¾—è§â€å†…æ ¸çº§çº¿ç¨‹ï¼Œå› æ­¤åªæœ‰<strong>å†…æ ¸çº§çº¿ç¨‹æ‰æ˜¯å¤„ç†æœºåˆ†é…çš„å•ä½</strong></li><li>å†…æ ¸çº§çº¿ç¨‹æ˜¯â€œè¿è¡Œæœºä¼šâ€çš„è½½ä½“</li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119213816126.png"></p><ul><li><strong>å†…æ ¸çº§çº¿ç¨‹çš„ç®¡ç†å·¥ä½œç”±è°æ¥å®Œæˆ?</strong><ul><li>å†…æ ¸çº§çº¿ç¨‹çš„ç®¡ç†å·¥ä½œç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆ</li></ul></li><li><strong>å†…æ ¸çº§çº¿ç¨‹åˆ‡æ¢æ˜¯å¦éœ€è¦CPUå˜æ€?</strong><ul><li>çº¿ç¨‹è°ƒåº¦ã€åˆ‡æ¢ç­‰å·¥ä½œéƒ½ç”±å†…æ ¸è´Ÿè´£ï¼Œå› æ­¤å†…æ ¸çº§çº¿ç¨‹çš„åˆ‡æ¢å¿…ç„¶éœ€è¦åœ¨æ ¸å¿ƒæ€ä¸‹æ‰èƒ½å®Œæˆ</li></ul></li><li><strong>æ“ä½œç³»ç»Ÿæ˜¯å¦èƒ½æ„è¯†åˆ°å†…æ ¸çº§çº¿ç¨‹çš„å­˜åœ¨?</strong><ul><li>æ“ä½œç³»ç»Ÿä¼šä¸ºæ¯ä¸ªå†…æ ¸çº§çº¿ç¨‹å»ºç«‹ç›¸åº”çš„<strong>TCB</strong>(ThreadControlBlockï¼Œçº¿ç¨‹æ§åˆ¶å—)ï¼Œé€šè¿‡TCBå¯¹çº¿ç¨‹è¿›è¡Œç®¡ç†ã€‚â€œå†…æ ¸çº§çº¿ç¨‹â€å°±æ˜¯â€œä»æ“ä½œç³»ç»Ÿå†…æ ¸è§†è§’çœ‹èƒ½çœ‹åˆ°çš„çº¿ç¨‹â€</li></ul></li><li><strong>ä¼˜ç¼ºç‚¹</strong><ul><li>ä¼˜ç‚¹:å½“ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡åï¼Œåˆ«çš„çº¿ç¨‹è¿˜å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚å¤šçº¿ç¨‹å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œæ‰§è¡Œ</li><li>ç¼ºç‚¹:ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ä¼šå ç”¨å¤šä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œçº¿ç¨‹åˆ‡æ¢ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆï¼Œéœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œå› æ­¤çº¿ç¨‹ç®¡ç†çš„æˆæœ¬é«˜ï¼Œå¼€é”€å¤§</li></ul></li></ul></li></ul><h3 id="å¤šçº¿ç¨‹æ¨¡å‹">6.2 <strong>å¤šçº¿ç¨‹æ¨¡å‹</strong></h3><ul><li><p>åœ¨æ”¯æŒå†…æ ¸çº§çº¿ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œæ ¹æ®<strong>ç”¨æˆ·çº§çº¿ç¨‹</strong>å’Œ<strong>å†…æ ¸çº§çº¿ç¨‹</strong>çš„<strong>æ˜ å°„å…³ç³»</strong>ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå‡ ç§å¤šçº¿ç¨‹æ¨¡å‹</p></li><li><p><strong>ä¸€å¯¹ä¸€æ¨¡å‹</strong></p><ul><li>ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œæ¯ä¸ªç”¨æˆ·è¿›ç¨‹æœ‰ä¸ç”¨æˆ·çº§çº¿ç¨‹åŒæ•°é‡çš„å†…æ ¸çº§çº¿ç¨‹</li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119213900964.png"></p><ul><li>ä¼˜ç‚¹:å½“ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡åï¼Œåˆ«çš„çº¿ç¨‹è¿˜å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚å¤šçº¿ç¨‹å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œæ‰§è¡Œã€‚</li><li>ç¼ºç‚¹:ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ä¼šå ç”¨å¤šä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œçº¿ç¨‹åˆ‡æ¢ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆï¼Œéœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œå› æ­¤çº¿ç¨‹ç®¡ç†çš„æˆæœ¬é«˜ï¼Œå¼€é”€å¤§</li></ul></li><li><p><strong>å¤šå¯¹ä¸€æ¨¡å‹</strong></p><ul><li>å¤šä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œä¸”ä¸€ä¸ªè¿›ç¨‹åªè¢«åˆ†é…ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹</li><li>é€€åŒ–ä¸ºçº¯ç²¹çš„ç”¨æˆ·çº§çº¿ç¨‹ç®¡ç†æ–¹å¼</li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119213936402.png"></p><ul><li>ä¼˜ç‚¹:ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ‡æ¢åœ¨ç”¨æˆ·ç©ºé—´å³å¯å®Œæˆï¼Œä¸éœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œçº¿ç¨‹ç®¡ç†çš„ç³»ç»Ÿå¼€é”€å°ï¼Œæ•ˆç‡é«˜</li><li>ç¼ºç‚¹:å½“ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹è¢«é˜»å¡åï¼Œæ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œå¹¶å‘åº¦ä¸é«˜ï¼Œå¤šä¸ªçº¿ç¨‹ä¸å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œè¿è¡Œ</li></ul></li><li><p><strong>å¤šå¯¹å¤šæ¨¡å‹</strong></p><ul><li>n ç”¨æˆ·åŠçº¿ç¨‹æ˜ å°„åˆ° m ä¸ªå†…æ ¸çº§çº¿ç¨‹(n &gt;= m)ï¼Œ æ¯ä¸ªç”¨æˆ·è¿›ç¨‹å¯¹åº” mä¸ªå†…æ ¸çº§çº¿ç¨‹</li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119214026494.png"></p><ul><li>å…‹æœäº†å¤šå¯¹ä¸€æ¨¡å‹å¹¶å‘åº¦ä¸é«˜çš„ç¼ºç‚¹(ä¸€ä¸ªé˜»å¡å…¨ä½“é˜»å¡)ï¼Œåˆå…‹æœäº†ä¸€å¯¹ä¸€æ¨¡å‹ä¸­ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹å ç”¨å¤ªå¤šå†…æ ¸çº§çº¿ç¨‹ï¼Œå¼€é”€å¤ªå¤§çš„ç¼ºç‚¹,å†…æ ¸çº§çº¿ç¨‹ä¸­å¯ä»¥è¿è¡Œä»»æ„ä¸€ä¸ªæœ‰æ˜ å°„å…³ç³»çš„ç”¨æˆ·çº§çº¿ç¨‹ä»£ç ,åªæœ‰mä¸ªå†…æ ¸çº§çº¿ç¨‹ä¸­æ­£åœ¨è¿è¡Œçš„ä»£ç é€»è¾‘éƒ½é˜»å¡æ—¶, è¿™ä¸ªè¿›ç¨‹æ‰ä¼šé˜»å¡</li></ul></li></ul><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119214325834.png"></p><h2 id="çº¿ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢"><strong>7. çº¿ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢</strong></h2><h3 id="çº¿ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢-1">7.1 <strong>çº¿ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢</strong></h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119214437515.png"></p><h3 id="çº¿ç¨‹çš„ç»„ç»‡ä¸æ§åˆ¶">7.2 <strong>çº¿ç¨‹çš„ç»„ç»‡ä¸æ§åˆ¶</strong></h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2-1-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B/image-20241119214535741.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.6 è™šæ‹Ÿæœº</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-6-%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-6-%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿæœº"><strong>1.6 è™šæ‹Ÿæœº</strong></h1><h2 id="è™šæ‹Ÿæœº-1">1. <strong>è™šæ‹Ÿæœº</strong></h2><ul><li><p>ä½¿ç”¨è™šæ‹ŸåŒ–æŠ€æœ¯, å°†ä¸€å°ç‰©ç†æœºå™¨è™šæ‹ŸåŒ–ä¸ºå¤šå°è™šæ‹Ÿæœºå™¨(VirtualMachine, VM), æ¯ä¸ªè™šæ‹Ÿæœºå™¨éƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œä¸€ä¸ªæ“ä½œç³»ç»Ÿ</p></li><li><p>åŒä¹‰æœ¯è¯­: è™šæ‹Ÿæœºç®¡ç†ç¨‹åº/è™šæ‹Ÿæœºç›‘æ§ç¨‹åº/Virtual MachineMonitor/Hypervisor</p></li></ul><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-6-%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20241119165138528.png" alt="ä¸¤ç±»è™šæ‹Ÿæœº"><figcaption aria-hidden="true">ä¸¤ç±»è™šæ‹Ÿæœº</figcaption></figure><ul><li>æ”¯æŒè™šæ‹ŸåŒ–çš„CPUé€šå¸¸åˆ†æ›´å¤šæŒ‡ä»¤ç­‰çº§<ul><li>Ring 3: æœ€ä½æƒé™çš„ä¸€äº›æŒ‡ä»¤ â†’ Ring 0: æœ€é«˜æƒé™çš„ä¸€äº›æŒ‡ä»¤</li><li>VMwareã€VirtualBoxå°±å±äºç¬¬äºŒè½®VMM</li></ul></li></ul><h2 id="ä¸¤ç±»è™šæ‹Ÿæœºç®¡ç†ç¨‹åºçš„å¯¹æ¯”">2.<strong>ä¸¤ç±»è™šæ‹Ÿæœºç®¡ç†ç¨‹åºçš„å¯¹æ¯”</strong></h2><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-6-%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20241119165622367.png" alt="å¯¹æ¯”"><figcaption aria-hidden="true">å¯¹æ¯”</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.5 æ“ä½œç³»ç»Ÿå¼•å¯¼</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-5-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%BC%95%E5%AF%BC/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-5-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%BC%95%E5%AF%BC/</url>
    
    <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿå¼•å¯¼"><strong>1.5 æ“ä½œç³»ç»Ÿå¼•å¯¼</strong></h1><h2 id="ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿå¼•å¯¼">1. <strong>ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿå¼•å¯¼?</strong></h2><ul><li>å¼€æœºçš„æ—¶å€™, æ€ä¹ˆè®©æ“ä½œç³»ç»Ÿè¿è¡Œèµ·æ¥?</li></ul><h2 id="ç£ç›˜é‡Œè¾¹æœ‰å“ªäº›ç›¸å…³æ•°æ®">2.<strong>ç£ç›˜é‡Œè¾¹æœ‰å“ªäº›ç›¸å…³æ•°æ®?</strong></h2><ul><li><strong>ä¸»å¼•å¯¼è®°å½•(MBR)</strong><ul><li>åŒ…å«<strong>ç£ç›˜å¼•å¯¼ç¨‹åº</strong>å’Œ<strong>åˆ†åŒºè¡¨</strong></li><li>åˆ†åŒºè¡¨: è¯´æ˜äº†æ¯ä¸ªç£ç›˜åˆ†åŒºå æ®å¤šå°‘ç©ºé—´ã€åœ°å€èŒƒå›´</li></ul></li><li>C:ç›˜<ul><li>æ˜¯è¿™ä¸ªç£ç›˜çš„<strong>æ´»åŠ¨åˆ†åŒº</strong>, å®‰è£…äº†æ“ä½œç³»ç»Ÿ</li><li><strong>å¼•å¯¼è®°å½•(PBR)</strong><ul><li>è´Ÿè´£æ‰¾åˆ°"å¯åŠ¨ç®¡ç†å™¨", "å¯åŠ¨ç®¡ç†å™¨"æ˜¯å®Œæ•´çš„æ“ä½œç³»ç»Ÿåˆå§‹åŒ–ç¨‹åº,å…¶å­˜æ”¾åœ¨æ ¹ç›®å½•ä¸­çš„æŸä¸ªä½ç½®</li><li>Windowsä¸­"å¯åŠ¨ç®¡ç†å™¨"å­˜æ”¾åœ¨ æ ¹ç›®å½•ä¸‹</li></ul></li><li>æ ¹ç›®å½•</li><li>å…¶ä»–</li></ul></li><li>å…¶ä»–ç›˜</li></ul><h2 id="æ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹">3. <strong>æ“ä½œç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹</strong></h2><ul><li><strong>ä¸»å­˜(å†…å­˜)</strong><ul><li><strong>RAM</strong><ul><li>æ—¥å¸¸ç”¨è¯­ç”µè„‘å†…å­˜ã€æ‰‹æœºå†…å­˜é€šå¸¸å°±æ˜¯æŒ‡ä»£RAM</li></ul></li><li><strong>ROM</strong><ul><li>å­˜å‚¨äº†åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ<strong>BIOS</strong>,å…¶å†…éƒ¨åŒ…å«äº†ROMå¼•å¯¼ç¨‹åº, å³è‡ªä¸¾ç¨‹åº</li></ul></li></ul></li><li><strong>å¼•å¯¼è¿‡ç¨‹</strong>:<ul><li>CPUä»ä¸€ä¸ªç‰¹å®šä¸»å­˜åœ°å€å¼€å§‹, å–æŒ‡ä»¤,æ‰§è¡ŒROMä¸­çš„å¼•å¯¼ç¨‹åº(å…ˆè¿›è¡Œç¡¬ä»¶è‡ªæ£€, å†å¼€æœº)</li><li>å°†ç£ç›˜çš„ç¬¬ä¸€å— -- ä¸»å¼•å¯¼è®°å½•è¯»å…¥å†…å­˜, æ‰§è¡Œç£ç›˜å¼•å¯¼ç¨‹åº,æ‰«æåˆ†åŒºè¡¨</li><li>ä»æ´»åŠ¨åˆ†åŒº(åˆç§°ä¸»åˆ†åŒº, å³å®‰è£…äº†æ“ä½œç³»ç»Ÿçš„åˆ†åŒº)è¯»å…¥åˆ†åŒºå¼•å¯¼è®°å½•,æ‰§è¡Œå…¶ä¸­çš„ç¨‹åº</li><li>ä»æ ¹ç›®å½•ä¸‹æ‰¾åˆ°å®Œæ•´çš„æ“ä½œç³»ç»Ÿåˆå§‹åŒ–ç¨‹åº(å³ å¯åŠ¨ç®¡ç†å™¨ )å¹¶æ‰§è¡Œ,å®Œæˆ"å¼€æœº"çš„ä¸€ç³»åˆ—åŠ¨ä½œ</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.4 æ“ä½œç³»ç»Ÿç»“æ„</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„">1.4 æ“ä½œç³»ç»Ÿä½“ç³»ç»“æ„</h1><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/image-20241119160018312.png" alt="è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„"><figcaption aria-hidden="true">è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„</figcaption></figure><h2 id="æ“ä½œç³»ç»Ÿçš„å†…æ ¸">1. <strong>æ“ä½œç³»ç»Ÿçš„å†…æ ¸</strong></h2><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/image-20241119160322830.png" alt="æ“ä½œç³»ç»Ÿå†…æ ¸"><figcaption aria-hidden="true">æ“ä½œç³»ç»Ÿå†…æ ¸</figcaption></figure><ul><li><strong>å†…æ ¸</strong>æ˜¯æ“ä½œç³»ç»Ÿæœ€åŸºæœ¬ã€æœ€æ ¸å¿ƒçš„éƒ¨åˆ†</li><li>å®ç°æ“ä½œç³»ç»Ÿå†…æ ¸åŠŸèƒ½çš„é‚£äº›ç¨‹åºå°±æ˜¯<strong>å†…æ ¸ç¨‹åº</strong></li></ul><h3 id="å¤§å†…æ ¸">1.1 <strong>å¤§å†…æ ¸</strong></h3><ul><li><p>å†…æ ¸ä¸­åŒ…å«äº†æ—¶é’Ÿç®¡ç†ã€ä¸­æ–­å¤„ç†ã€åŸè¯­ä»¥åŠè¿›ç¨‹ç®¡ç†ã€å­˜å‚¨å™¨ç®¡ç†ã€è®¾å¤‡ç®¡ç†ç­‰åŠŸèƒ½</p></li><li><p>ç”±äºå¤§å†…æ ¸ä¸­åŒ…å«çš„åŠŸèƒ½å¤š,CPUåªéœ€è¿›è¡Œå°‘é‡çš„çŠ¶æ€åˆ‡æ¢ä¾¿å¯å®Œæˆåº”ç”¨ç¨‹åºè¯·æ±‚çš„ç³»ç»Ÿè°ƒç”¨,ä½†åŒæ—¶ä¹Ÿå¯¼è‡´äº†å¤§å†…æ ¸ä»£ç åºå¤§, ä¸æ–¹ä¾¿ç®¡ç†çš„é—®é¢˜</p></li></ul><h3 id="å¾®å†…æ ¸">1.2 <strong>å¾®å†…æ ¸</strong></h3><ul><li><p>åªåŒ…å«äº†ä¸ç¡¬ä»¶å…³è”è¾ƒç´§å¯†çš„æ¨¡å—,å¦‚æ—¶é’Ÿç®¡ç†ã€ä¸­æ–­å¤„ç†ã€åŸè¯­ç­‰</p></li><li><p>å¾®å†…æ ¸å†…éƒ¨åŠŸèƒ½å°‘, ç»“æ„æ¸…æ™°, æ–¹ä¾¿ç»´æŠ¤,ä½†ä¹Ÿè¦æ±‚CPUéœ€è¦è¿›è¡Œå¤šæ¬¡çš„çŠ¶æ€åˆ‡æ¢æ¥æ»¡è¶³åº”ç”¨ç¨‹åºè¯·æ±‚çš„è¿›ç¨‹ã€å­˜å‚¨å™¨ã€è®¾å¤‡ç­‰æœåŠ¡</p></li></ul><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/image-20241119160746125.png" alt="å¤§å†…æ ¸ä¸å¾®å†…æ ¸"><figcaption aria-hidden="true">å¤§å†…æ ¸ä¸å¾®å†…æ ¸</figcaption></figure><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/image-20241119160818121.png" alt="æ“ä½œç³»ç»Ÿçš„ä½“ç³»ç»“æ„"><figcaption aria-hidden="true">æ“ä½œç³»ç»Ÿçš„ä½“ç³»ç»“æ„</figcaption></figure><h2 id="å¤–æ ¸">2. å¤–æ ¸</h2><figure><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-4-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/image-20241119161000144.png" alt="æ“ä½œç³»ç»Ÿç»“æ„"><figcaption aria-hidden="true">æ“ä½œç³»ç»Ÿç»“æ„</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.3 æ“ä½œç³»ç»Ÿè¿è¡Œç¯å¢ƒ</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-3-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-3-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿè¿è¡Œç¯å¢ƒ">1.3 æ“ä½œç³»ç»Ÿè¿è¡Œç¯å¢ƒ</h1><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-3-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/image-20241119150939015.png"></p><h2 id="æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶">1. <strong>æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶</strong></h2><h3 id="ç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„">1.1 <strong>ç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„?</strong></h3><ul><li>ä¸€æ¡é«˜çº§è¯­è¨€çš„ä»£ç ç¿»è¯‘è¿‡æ¥å¯èƒ½ä¼šå¯¹åº”å¤šæ¡äºŒè¿›åˆ¶æœºå™¨æŒ‡ä»¤</li><li>ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹å…¶å®æ˜¯CPUæ‰§è¡Œä¸€æ¡ä¸€æ¡çš„æœºå™¨æŒ‡ä»¤çš„è¿‡ç¨‹<ul><li>"æŒ‡ä»¤"å°±æ˜¯å¤„ç†æœº(CPU)èƒ½è¯†åˆ«ã€æ‰§è¡Œçš„æœ€åŸºæœ¬å‘½ä»¤</li></ul></li></ul><h3 id="å†…æ ¸ç¨‹åº-vs-åº”ç”¨ç¨‹åº">1.2 <strong>å†…æ ¸ç¨‹åº vsåº”ç”¨ç¨‹åº</strong></h3><ul><li><strong>åº”ç”¨ç¨‹åº</strong><ul><li>æ™®é€šç¨‹åºå‘˜å†™çš„ç¨‹åºå°±æ˜¯"åº”ç”¨ç¨‹åº"</li></ul></li><li><strong>å†…æ ¸ç¨‹åº</strong><ul><li>å¾®è½¯ã€è‹¹æœæœ‰ä¸€å¸®äººè´Ÿè´£å®ç°æ“ä½œç³»ç»Ÿ, ä»–ä»¬å†™çš„æ˜¯"å†…æ ¸ç¨‹åº"</li><li>ç”±å¾ˆå¤šå†…æ ¸ç¨‹åºç»„æˆäº†"<strong>æ“ä½œç³»ç»Ÿå†…æ ¸</strong>",æˆ–ç®€ç§°"<strong>å†…æ ¸(Kernel)</strong>"</li><li>å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿæœ€é‡è¦æœ€æ ¸å¿ƒçš„éƒ¨åˆ†, ä¹Ÿæ˜¯æœ€æ¥è¿‘ç¡¬ä»¶çš„éƒ¨åˆ†, ç”šè‡³å¯ä»¥è¯´,ä¸€ä¸ªæ“ä½œç³»ç»Ÿåªè¦æœ‰å†…æ ¸å°±å¤Ÿäº†(eg: Dockerâ†’ ä»…éœ€Linuxå†…æ ¸)</li></ul></li></ul><h3 id="ç‰¹æƒæŒ‡ä»¤-vs-éç‰¹æƒæŒ‡ä»¤">1.3 <strong>ç‰¹æƒæŒ‡ä»¤ vséç‰¹æƒæŒ‡ä»¤</strong></h3><ul><li><strong>ç‰¹æƒæŒ‡ä»¤</strong><ul><li>æ“ä½œç³»ç»Ÿå†…æ ¸ä½œä¸º"ç®¡ç†è€…", æœ‰æ—¶ä¼šè®©CPUæ‰§è¡Œä¸€äº›"ç‰¹æƒæŒ‡ä»¤", å¦‚:å†…å­˜æ¸…é›¶æŒ‡ä»¤, è¿™äº›æŒ‡ä»¤å½±å“é‡å¤§, åªå…è®¸"ç®¡ç†è€…" --å³æ“ä½œç³»ç»Ÿå†…æ ¸æ¥ä½¿ç”¨</li></ul></li><li><strong>éç‰¹æƒæŒ‡ä»¤</strong><ul><li>åº”ç”¨ç¨‹åºåªèƒ½ä½¿ç”¨"éç‰¹æƒæŒ‡ä»¤", å¦‚: åŠ æ³•æŒ‡ä»¤ã€å‡æ³•æŒ‡ä»¤</li><li>åœ¨CPUè®¾è®¡å’Œç”Ÿäº§çš„æ—¶å€™å°±åˆ’åˆ†äº†ç‰¹æƒæŒ‡ä»¤å’Œéç‰¹æƒæŒ‡ä»¤ï¼Œå› æ­¤CPUæ‰§è¡Œä¸€æ¡æŒ‡ä»¤å‰å°±èƒ½åˆ¤æ–­å‡ºå…¶ç±»å‹</li></ul></li></ul><h3 id="ç”¨æˆ·æ€-vs-å†…æ ¸æ€">1.4 <strong>ç”¨æˆ·æ€ vs å†…æ ¸æ€</strong></h3><ul><li>CPUæœ‰ä¸¤ç§çŠ¶æ€: "<strong>å†…æ ¸æ€</strong>" å’Œ"<strong>ç”¨æˆ·æ€</strong>"<ul><li>CPUä¸­æœ‰ä¸€ä¸ªå¯„å­˜å™¨å«<strong>ç¨‹åºçŠ¶æ€å­—å¯„å­˜å™¨(PSW)</strong>,å…¶ä¸­æœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä½èƒ½å¤Ÿè¡¨ç¤ºCPUä¸ºç”¨æˆ·æ€è¿˜æ˜¯å†…æ ¸æ€</li><li>å†…æ ¸æ€=æ ¸å¿ƒæ€=<strong>ç®¡æ€</strong>;ç”¨æˆ·æ€=<strong>ç›®æ€</strong></li></ul></li><li><strong>ç”¨æˆ·æ€</strong><ul><li>å¤„äºç”¨æˆ·æ€æ—¶, è¯´æ˜æ­¤æ—¶æ­£åœ¨è¿è¡Œçš„æ˜¯åº”ç”¨ç¨‹åº,æ­¤æ—¶åªèƒ½æ‰§è¡Œéç‰¹æƒæŒ‡ä»¤</li></ul></li><li><strong>æ ¸å¿ƒæ€</strong><ul><li>å¤„äºæ ¸å¿ƒæ€æ—¶, è¯´æ˜æ­¤æ—¶æ­£åœ¨è¿è¡Œçš„æ˜¯å†…æ ¸ç¨‹åº,æ­¤æ—¶å¯ä»¥æ‰§è¡Œç‰¹æƒæŒ‡ä»¤</li></ul></li><li><strong>ä¸¤ç§çŠ¶æ€çš„åˆ‡æ¢</strong><ul><li><strong>å†…æ ¸æ€ â†’ ç”¨æˆ·æ€</strong><ul><li>æ‰§è¡Œä¸€æ¡ç‰¹æƒæŒ‡ä»¤ -- ä¿®æ”¹PSWçš„æ ‡å¿—ä½ä¸º"ç”¨æˆ·æ€",è¿™ä¸ªåŠ¨ä½œæ„å‘³ç€æ“ä½œç³»ç»Ÿå°†ä¸»åŠ¨è®©å‡ºCPUç‰¹æƒ</li></ul></li><li><strong>ç”¨æˆ·æ€ â†’ å†…æ ¸æ€</strong><ul><li>ç”±"<strong>ä¸­æ–­</strong>"å¼•å‘, ç¡¬ä»¶è‡ªåŠ¨å®Œæˆå˜æ€è¿‡ç¨‹,è§¦å‘ä¸­æ–­ä¿¡å·æ„å‘³ç€æ“ä½œç³»ç»Ÿå°†å¼ºè¡Œå¤ºå›CPUçš„ä½¿ç”¨æƒ</li><li>é™¤äº†éæ³•ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤ä¹‹å¤–, è¿˜æœ‰å¾ˆå¤šäº‹ä»¶ä¼šè§¦å‘ä¸­æ–­ä¿¡å·ã€‚ä¸€ä¸ªå…±æ€§æ˜¯:ä½†å‡¡éœ€è¦æ“ä½œç³»ç»Ÿä»‹å…¥çš„åœ°æ–¹, éƒ½ä¼šè§¦å‘ä¸­æ–­ä¿¡å·</li></ul></li><li><strong>ç¤ºä¾‹</strong>:<ol type="1"><li>åˆšå¼€æœºæ—¶, CPUä¸º"å†…æ ¸æ€", æ“ä½œç³»ç»Ÿå†…æ ¸ç¨‹åºå…ˆä¸ŠCPUè¿è¡Œ</li><li>å¼€æœºå®Œæˆå, ç”¨æˆ·å¯ä»¥å¯åŠ¨æŸä¸ªåº”ç”¨ç¨‹åº</li><li>æ“ä½œç³»ç»Ÿå†…æ ¸ç¨‹åºåœ¨åˆé€‚çš„æ—¶å€™ä¸»åŠ¨è®©å‡ºCPU, è®©è¯¥åº”ç”¨ç¨‹åºä¸ŠCPUè¿è¡Œ<ul><li>æ“ä½œç³»ç»Ÿå†…æ ¸åœ¨è®©å‡ºCPUä¹‹å‰,ä¼šç”¨ä¸€æ¡ç‰¹æƒæŒ‡ä»¤æŠŠPSWçš„æ ‡å¿—ä½è®¾ç½®ä¸º"ç”¨æˆ·æ€"</li></ul></li><li>åº”ç”¨ç¨‹åºè¿è¡Œåœ¨"ç”¨æˆ·æ€"</li><li>æ­¤æ—¶é»‘å®¢åœ¨åº”ç”¨ç¨‹åºä¸­æ¤å…¥äº†ä¸€æ¡ç‰¹æƒæŒ‡ä»¤, ä¼å›¾ç ´åç³»ç»Ÿ</li><li>CPUå‘ç°æ¥ä¸‹æ¥è¦æ‰§è¡Œçš„è¿™æ¡æŒ‡ä»¤æ˜¯ç‰¹æƒæŒ‡ä»¤, ä½†æ˜¯è‡ªå·±åˆå¤„äº"ç”¨æˆ·æ€"</li><li>è¿™ä¸ªéæ³•äº‹ä»¶ä¼šå¼•å‘ä¸€ä¸ª<strong>ä¸­æ–­ä¿¡å·</strong><ul><li>CPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·å, ä¼šç«‹å³å˜ä¸º"å†…æ ¸æ€", å¹¶åœæ­¢è¿è¡Œå½“å‰çš„åº”ç”¨ç¨‹åº,è½¬è€Œè¿è¡Œå¤„ç†ä¸­æ–­ä¿¡å·çš„å†…æ ¸ç¨‹åº</li></ul></li><li>"ä¸­æ–­"ä½¿æ“ä½œç³»ç»Ÿå†æ¬¡å¤ºå›CPUçš„æ§åˆ¶æƒ</li><li>æ“ä½œç³»ç»Ÿä¼šå¯¹å¼•å‘ä¸­æ–­çš„äº‹ä»¶è¿›è¡Œå¤„ç†,å¤„ç†å®Œäº†å†æŠŠCPUä½¿ç”¨æƒäº¤ç»™åº”ç”¨ç¨‹åº</li></ol></li></ul></li></ul><h2 id="ä¸­æ–­å’Œå¼‚å¸¸"><strong>2. ä¸­æ–­å’Œå¼‚å¸¸</strong></h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-3-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/image-20241119154048407.png"></p><ul><li>â€œ<strong>ä¸­æ–­</strong>â€æ˜¯è®©æ“ä½œç³»ç»Ÿå†…æ ¸å¤ºå›CPUä½¿ç”¨æƒçš„å”¯ä¸€é€”å¾„</li></ul><h3 id="å†…ä¸­æ–­å¼‚å¸¸">2.1 å†…ä¸­æ–­(å¼‚å¸¸)</h3><ul><li>ä¸å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æœ‰å…³ï¼Œä¸­æ–­ä¿¡å·æ¥æºäºCPUå†…éƒ¨</li><li><strong>ç¤ºä¾‹</strong>:<ol type="1"><li>è¯•å›¾åœ¨ç”¨æˆ·æ€ä¸‹æ‰§è¡Œç‰¹æƒæŒ‡ä»¤</li><li>æ‰§è¡Œé™¤æ³•æŒ‡ä»¤æ—¶å‘ç°é™¤æ•°ä¸º 0<ul><li>è‹¥å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯éæ³•çš„ï¼Œåˆ™ä¼šå¼•å‘ä¸€ä¸ªä¸­æ–­ä¿¡å·</li></ul></li><li>æœ‰æ—¶å€™åº”ç”¨ç¨‹åºæƒ³è¯·æ±‚æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡ï¼Œæ­¤æ—¶ä¼šæ‰§è¡Œä¸€æ¡ç‰¹æ®Šçš„æŒ‡ä»¤ --<strong>é™·å…¥æŒ‡ä»¤</strong><ul><li><strong>(è®¿ç®¡æŒ‡ä»¤)</strong>ï¼Œè¯¥æŒ‡ä»¤ä¼šå¼•å‘ä¸€ä¸ªå†…éƒ¨ä¸­æ–­ä¿¡å·</li><li>æ‰§è¡Œâ€œé™·å…¥æŒ‡ä»¤â€ï¼Œæ„å‘³ç€åº”ç”¨ç¨‹åºä¸»åŠ¨åœ°å°†CPUæ§åˆ¶æƒè¿˜ç»™æ“ä½œç³»ç»Ÿå†…æ ¸</li><li>â€œ<strong>ç³»ç»Ÿè°ƒç”¨</strong>â€å°±æ˜¯é€šè¿‡é™·å…¥æŒ‡ä»¤å®Œæˆçš„</li></ul></li></ol></li><li><strong>åˆ†ç±»</strong>:<ul><li><strong>é™·é˜±ã€é™·å…¥(trap)</strong><ul><li>ç”±é™·å…¥æŒ‡ä»¤å¼•å‘ï¼Œæ˜¯åº”ç”¨ç¨‹åºæ•…æ„å¼•å‘çš„</li></ul></li><li><strong>æ•…éšœ(fault)</strong><ul><li>ç”±é”™è¯¯æ¡ä»¶å¼•èµ·çš„ï¼Œå¯èƒ½è¢«å†…æ ¸ç¨‹åºä¿®å¤</li><li>å†…æ ¸ç¨‹åºä¿®å¤æ•…éšœåä¼šæŠŠCPUä½¿ç”¨æƒè¿˜ç»™åº”ç”¨ç¨‹åºï¼Œè®©å®ƒç»§ç»­æ‰§è¡Œä¸‹å»</li><li>å¦‚ï¼š<strong>ç¼ºé¡µæ•…éšœ(ç¼ºé¡µä¸­æ–­)</strong></li></ul></li><li><strong>ç»ˆæ­¢(abort)</strong><ul><li>ç”±è‡´å‘½é”™è¯¯å¼•èµ·ï¼Œå†…æ ¸ç¨‹åºæ— æ³•ä¿®å¤è¯¥é”™è¯¯</li><li>å› æ­¤ä¸€èˆ¬ä¸å†å°†CPUä½¿ç”¨æƒè¿˜ç»™å¼•å‘ç»ˆæ­¢çš„åº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯ç›´æ¥ç»ˆæ­¢è¯¥åº”ç”¨ç¨‹åº</li><li>å¦‚ï¼š æ•´æ•°é™¤0ã€éæ³•ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤</li></ul></li></ul></li></ul><h3 id="å¤–ä¸­æ–­ä¸­æ–­">2.2 <strong>å¤–ä¸­æ–­(ä¸­æ–­)</strong></h3><ul><li>ä¸å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æ— å…³ï¼Œä¸­æ–­ä¿¡å·æ¥æºäºCPUå¤–éƒ¨</li><li>æ¯ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œç»“æŸæ—¶ï¼ŒCPUéƒ½ä¼šä¾‹è¡Œæ£€æŸ¥æ˜¯å¦æœ‰å¤–ä¸­æ–­ä¿¡å·</li><li><strong>ç¤ºä¾‹</strong>:<ul><li>æ—¶é’Ÿä¸­æ–­ -- ç”±æ—¶é’Ÿéƒ¨ä»¶å‘æ¥çš„ä¸­æ–­ä¿¡å·<ul><li>æ—¶é’Ÿéƒ¨ä»¶æ¯éš”ä¸€ä¸ªæ—¶é—´ç‰‡ï¼ˆå¦‚ 50msï¼‰ä¼šç»™CPUå‘é€ä¸€ä¸ªæ—¶é’Ÿä¸­æ–­ä¿¡å·</li></ul></li><li>I/Oä¸­æ–­ -- ç”±è¾“å…¥/è¾“å‡ºè®¾å¤‡å‘æ¥çš„ä¸­æ–­ä¿¡å·<ul><li>å¦‚æ‰“å°æœºæ‰“å°å®Œæˆå, å‘CPUå‘é€ä¸­æ–­ä¿¡å·,CPUæ ¹æ®ä¸­æ–­ä¿¡å·æ‰§è¡Œå¯¹åº”çš„<strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong></li></ul></li></ul></li><li><strong>æ³¨æ„</strong>ï¼š<ul><li>å¤§å¤šæ•°çš„æ•™æã€è¯•å·ä¸­ï¼Œâ€œ<strong>ä¸­æ–­</strong>â€ç‰¹æŒ‡ç‹­ä¹‰çš„ä¸­æ–­ï¼Œå³<strong>å¤–ä¸­æ–­</strong>ã€‚è€Œ<strong>å†…ä¸­æ–­</strong>ä¸€èˆ¬ç§°ä¸ºâ€œ<strong>å¼‚å¸¸</strong>â€</li></ul></li><li><strong>ä¸­æ–­æœºåˆ¶çš„åŸºæœ¬åŸç†</strong><ul><li>ä¸åŒçš„ä¸­æ–­ä¿¡å·ï¼Œéœ€è¦ç”¨ä¸åŒçš„<strong>ä¸­æ–­å¤„ç†ç¨‹åº</strong>æ¥å¤„ç†</li><li>å½“CPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·åï¼Œä¼šæ ¹æ®ä¸­æ–­ä¿¡å·çš„ç±»å‹å»æŸ¥è¯¢â€œ<strong>ä¸­æ–­å‘é‡è¡¨</strong>â€ï¼Œä»¥æ­¤æ¥æ‰¾åˆ°ç›¸åº”çš„ä¸­æ–­å¤„ç†ç¨‹åºåœ¨å†…å­˜ä¸­çš„å­˜æ”¾ä½ç½®</li></ul></li></ul><h2 id="ç³»ç»Ÿè°ƒç”¨"><strong>3. ç³»ç»Ÿè°ƒç”¨</strong></h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-3-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/image-20241119155457023.png"></p><h3 id="ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨">3.1 <strong>ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨?</strong></h3><ul><li><p>æ“ä½œç³»ç»Ÿä½œä¸ºç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£ï¼Œéœ€è¦å‘ä¸Šæä¾›ä¸€äº›ç®€å•æ˜“ç”¨çš„æœåŠ¡ã€‚ä¸»è¦åŒ…æ‹¬<strong>å‘½ä»¤æ¥å£</strong>å’Œ<strong>ç¨‹åºæ¥å£</strong>ï¼Œå…¶ä¸­ï¼Œç¨‹åºæ¥å£ç”±ä¸€ç»„<strong>ç³»ç»Ÿè°ƒç”¨</strong>ç»„æˆ</p></li><li><p>â€œç³»ç»Ÿè°ƒç”¨â€æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åºï¼ˆç¨‹åºå‘˜/ç¼–ç¨‹äººå‘˜ï¼‰ä½¿ç”¨çš„æ¥å£ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ç§å¯ä¾›åº”ç”¨ç¨‹åºè°ƒç”¨çš„ç‰¹æ®Šå‡½æ•°ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥è¯·æ±‚è·å¾—æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡</p></li></ul><h3 id="ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°çš„åŒºåˆ«">3.2<strong>ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°çš„åŒºåˆ«</strong></h3><table><thead><tr><th style="text-align: center;">æ™®é€šåº”ç”¨ç¨‹åº</th><th style="text-align: center;">å¯ç›´æ¥è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œä¹Ÿå¯ä½¿ç”¨åº“å‡½æ•°ã€‚æœ‰çš„åº“å‡½æ•°æ¶‰åŠç³»ç»Ÿè°ƒç”¨ï¼Œæœ‰çš„ä¸æ¶‰åŠ</th></tr></thead><tbody><tr><td style="text-align: center;">ç¼–ç¨‹è¯­è¨€</td><td style="text-align: center;">å‘ä¸Šæä¾›åº“å‡½æ•°ã€‚æœ‰æ—¶ä¼šå°†ç³»ç»Ÿè°ƒç”¨å°è£…æˆåº“å‡½æ•°ï¼Œä»¥éšè—ç³»ç»Ÿè°ƒç”¨çš„ä¸€äº›ç»†èŠ‚ï¼Œä½¿ç¨‹åºå‘˜ç¼–ç¨‹æ›´åŠ æ–¹ä¾¿</td></tr><tr><td style="text-align: center;">æ“ä½œç³»ç»Ÿ</td><td style="text-align: center;">å‘ä¸Šæä¾›ç³»ç»Ÿè°ƒç”¨ï¼Œä½¿å¾—ä¸Šå±‚ç¨‹åºèƒ½è¯·æ±‚å†…æ ¸çš„æœåŠ¡</td></tr><tr><td style="text-align: center;">è£¸æœº</td><td style="text-align: center;"></td></tr></tbody></table><ul><li><p>ä¸æ¶‰åŠç³»ç»Ÿè°ƒç”¨çš„åº“å‡½æ•°ï¼šå¦‚çš„â€œå–ç»å¯¹å€¼â€çš„å‡½æ•°</p></li><li><p>æ¶‰åŠç³»ç»Ÿè°ƒç”¨çš„åº“å‡½æ•°ï¼šå¦‚â€œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶â€çš„å‡½æ•°</p></li><li><p>æ€»ä¹‹ï¼Œéƒ¨åˆ†åº“å‡½æ•°æ˜¯å¯¹ç³»ç»Ÿè°ƒç”¨çš„è¿›ä¸€æ­¥å°è£…ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨åº“å‡½æ•°è¿›è¡Œé—´æ¥ç³»ç»Ÿè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œç›´æ¥ç³»ç»Ÿè°ƒç”¨</p></li></ul><h3 id="ä¸ºä»€ä¹ˆç³»ç»Ÿè°ƒç”¨æ˜¯å¿…é¡»çš„">3.3<strong>ä¸ºä»€ä¹ˆç³»ç»Ÿè°ƒç”¨æ˜¯å¿…é¡»çš„?</strong></h3><ul><li><strong>ç”Ÿæ´»åœºæ™¯</strong>:<ul><li>å»å­¦æ ¡æ‰“å°åº—æ‰“å°è®ºæ–‡ï¼Œä½ æŒ‰ä¸‹äº† WPS çš„â€œæ‰“å°â€é€‰é¡¹ï¼Œæ‰“å°æœºå¼€å§‹å·¥ä½œã€‚ä½ çš„è®ºæ–‡æ‰“å°åˆ°ä¸€åŠæ—¶ï¼Œå¦ä¸€ä½åŒå­¦æŒ‰ä¸‹äº† Wordçš„â€œæ‰“å°â€æŒ‰é’®ï¼Œå¼€å§‹æ‰“å°ä»–è‡ªå·±çš„è®ºæ–‡ã€‚</li></ul></li><li><strong>æ€è€ƒ</strong>:<ul><li>å¦‚æœä¸¤ä¸ªè¿›ç¨‹å¯ä»¥éšæ„åœ°ã€å¹¶å‘åœ°å…±äº«æ‰“å°æœºèµ„æº(<strong>åŒæ—¶å…±äº«</strong>)ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ<ul><li>ä¸¤ä¸ªè¿›ç¨‹å¹¶å‘è¿è¡Œï¼Œæ‰“å°æœºè®¾å¤‡äº¤æ›¿åœ°æ”¶åˆ° WPS å’Œ Wordä¸¤ä¸ªè¿›ç¨‹å‘æ¥çš„æ‰“å°è¯·æ±‚ï¼Œç»“æœä¸¤ç¯‡è®ºæ–‡çš„å†…å®¹æ··æ‚åœ¨ä¸€èµ·äº†</li></ul></li></ul></li><li><strong>è§£å†³æ–¹æ³•</strong>:<ul><li>ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å¯¹å…±äº«èµ„æºè¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼Œå¹¶å‘ä¸Šæä¾› â€œç³»ç»Ÿè°ƒç”¨â€ï¼Œç”¨æˆ·è¿›ç¨‹æƒ³è¦ä½¿ç”¨æ‰“å°æœºè¿™ç§å…±äº«èµ„æºï¼Œåªèƒ½é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘å‡ºè¯·æ±‚ï¼Œä»¥æ­¤æ¥å®ç°ä¸åŒçš„è¿›ç¨‹å¯¹æ‰“å°æœºèµ„æºçš„<strong>äº’æ–¥å…±äº«</strong>ï¼Œå†…æ ¸ä¼šå¯¹å„ä¸ªè¯·æ±‚è¿›è¡Œåè°ƒå¤„ç†</li></ul></li></ul><h3 id="ä»€ä¹ˆåŠŸèƒ½è¦ç”¨ç³»ç»Ÿè°ƒç”¨å®ç°">3.4<strong>ä»€ä¹ˆåŠŸèƒ½è¦ç”¨ç³»ç»Ÿè°ƒç”¨å®ç°?</strong></h3><ul><li><p>åº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¯·æ±‚æ“ä½œç³»ç»Ÿçš„æœåŠ¡ã€‚è€Œç³»ç»Ÿä¸­çš„å„ç§<strong>å…±äº«èµ„æº</strong>éƒ½ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç»Ÿä¸€æŒç®¡ï¼Œå› æ­¤å‡¡æ˜¯<strong>ä¸å…±äº«èµ„æºæœ‰å…³çš„æ“ä½œ</strong>ï¼ˆå¦‚å­˜å‚¨åˆ†é…ã€I/Oæ“ä½œã€æ–‡ä»¶ç®¡ç†ç­‰ï¼‰ï¼Œéƒ½å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼å‘æ“ä½œç³»ç»Ÿå†…æ ¸æå‡ºæœåŠ¡è¯·æ±‚ï¼Œç”±æ“ä½œç³»ç»Ÿå†…æ ¸ä»£ä¸ºå®Œæˆã€‚è¿™æ ·å¯ä»¥ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢ç”¨æˆ·è¿›è¡Œéæ³•æ“ä½œ</p></li><li><p><strong>åŠŸèƒ½åˆ†ç±»(äº†è§£å³å¯)</strong>:</p><ul><li>è®¾å¤‡æ§åˆ¶: å®Œæˆè®¾å¤‡çš„ è¯·æ±‚/é‡Šæ”¾/å¯åŠ¨ ç­‰åŠŸèƒ½</li><li>æ–‡ä»¶ç®¡ç†: å®Œæˆæ–‡ä»¶çš„ è¯»/å†™/åˆ›å»º/åˆ é™¤ ç­‰åŠŸèƒ½</li><li>è¿›ç¨‹æ§åˆ¶: å®Œæˆè¿›ç¨‹çš„ åˆ›å»º/æ’¤é”€/é˜»å¡/å”¤é†’ ç­‰åŠŸèƒ½</li><li>è¿›ç¨‹é€šä¿¡: å®Œæˆè¿›ç¨‹ä¹‹é—´çš„ æ¶ˆæ¯ä¼ é€’/ä¿¡å·ä¼ é€’ ç­‰åŠŸèƒ½</li><li>å†…å­˜ç®¡ç†: å®Œæˆå†…å­˜çš„ åˆ†é…/å›æ”¶ ç­‰åŠŸèƒ½</li></ul></li></ul><h3 id="ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹">3.5 <strong>ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹</strong></h3><ul><li><p>ä¼ é€’ç³»ç»Ÿè°ƒç”¨å‚æ•°ï¼ˆå°†ç³»ç»Ÿè°ƒç”¨éœ€è¦çš„å‚æ•°æ”¾åˆ°æŸäº›é€šç”¨å¯„å­˜å™¨ä¸­ï¼‰ â†’æ‰§è¡Œé™·å…¥æŒ‡ä»¤ï¼ˆç”¨æˆ·æ€ï¼‰â†’æ‰§è¡Œç›¸åº”çš„å†…æ ¸ç¨‹åºï¼ˆæ ¹æ®å¯„å­˜å™¨ä¸­çš„å‚æ•°åˆ¤æ–­ç”¨æˆ·éœ€è¦å“ªç§ç³»ç»Ÿè°ƒç”¨æœåŠ¡ï¼‰å¤„ç†ç³»ç»Ÿè°ƒç”¨ï¼ˆæ ¸å¿ƒæ€ï¼‰â†’è¿”å›åº”ç”¨ç¨‹åº</p></li><li><p><strong>æ³¨æ„</strong>:</p><ul><li><strong>é™·å…¥æŒ‡ä»¤</strong>æ˜¯åœ¨<strong>ç”¨æˆ·æ€</strong>æ‰§è¡Œçš„ï¼Œæ‰§è¡Œé™·å…¥æŒ‡ä»¤ä¹‹åç«‹å³å¼•å‘ä¸€ä¸ªå†…ä¸­æ–­ï¼Œä½¿CPUè¿›å…¥æ ¸å¿ƒæ€</li><li><strong>å‘å‡ºç³»ç»Ÿè°ƒç”¨è¯·æ±‚</strong>æ˜¯åœ¨<strong>ç”¨æˆ·æ€</strong>ï¼Œè€Œ<strong>å¯¹ç³»ç»Ÿè°ƒç”¨çš„ç›¸åº”å¤„ç†</strong>åœ¨<strong>æ ¸å¿ƒæ€</strong>ä¸‹è¿›è¡Œ</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.2 æ“ä½œç³»ç»Ÿå‘å±•å†ç¨‹</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-2-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-2-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿå‘å±•å†ç¨‹">1.2 æ“ä½œç³»ç»Ÿå‘å±•å†ç¨‹</h1><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-2-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B/image-20241119125703536.png"></p><h2 id="æ‰‹å·¥æ“ä½œé˜¶æ®µ">1. <strong>æ‰‹å·¥æ“ä½œé˜¶æ®µ</strong></h2><ul><li><p>ç¨‹åºå‘˜å°†ç¨‹åºæ”¾å…¥çº¸å¸¦æœºä¸Š(æ…¢) â†’ è®¡ç®—æœºè¯»å–çº¸å¸¦(æ…¢) â†’è®¡ç®—æœºè®¡ç®—(å¿«) â†’ è¾“å‡ºçº¸å¸¦(æ…¢) â†’ ç¨‹åºå‘˜è·å–è®¡ç®—ç»“æœ(æ…¢)</p></li><li><p><strong>ä¸»è¦ç¼ºç‚¹</strong>:</p><ul><li>ç”¨æˆ·ç‹¬å å…¨æœºã€äººæœºé€Ÿåº¦çŸ›ç›¾å¯¼è‡´èµ„æºåˆ©ç”¨ç‡ä½</li></ul></li></ul><h2 id="æ‰¹å¤„ç†é˜¶æ®µ">2. <strong>æ‰¹å¤„ç†é˜¶æ®µ</strong></h2><h3 id="å•é“æ‰¹å¤„ç†ç³»ç»Ÿ">2.1 <strong>å•é“æ‰¹å¤„ç†ç³»ç»Ÿ</strong></h3><ol type="1"><li><p>å¼•å…¥<strong>è„±æœºè¾“å…¥/è¾“å‡ºæŠ€æœ¯</strong>ï¼ˆç”¨<strong>å¤–å›´æœº</strong>+<strong>ç£å¸¦</strong>å®Œæˆï¼‰ï¼Œå¹¶ç”±ç›‘ç£ç¨‹åº(æ“ä½œç³»ç»Ÿé›å½¢)è´Ÿè´£æ§åˆ¶ä½œä¸šçš„è¾“å…¥ã€è¾“å‡º</p></li><li><p><strong>ä¸ºä»€ä¹ˆç§°ä¸º"è„±æœº"?</strong></p><ol type="1"><li>è„±ç¦»ä¸»æœºçš„æ§åˆ¶è¿›è¡Œçš„è¾“å…¥/è¾“å‡ºæ“ä½œ</li><li>ç¨‹åºå‘˜å°†ç¨‹åºæ”¾å…¥çº¸å¸¦æœºä¸Š â†’ å¤–å›´æœºå°†çº¸å¸¦æ•°æ®æ”¾å…¥ç£å¸¦ä¸­ â†’è®¡ç®—æœºè¯»å–ç£å¸¦(ç£å¸¦è¯»å†™é€Ÿåº¦æ¯”çº¸å¸¦æœºå¿«å¾ˆå¤š) â†’ è®¡ç®—æœºè®¡ç®— â†’è¾“å‡ºè®¡ç®—ç»“æœåˆ°ç£å¸¦</li></ol></li><li><p><strong>ä¸»è¦ä¼˜ç‚¹</strong>:</p><ol type="1"><li>ç¼“è§£äº†ä¸€å®šç¨‹åº¦çš„äººæœºé€Ÿåº¦çŸ›ç›¾ï¼Œèµ„æºåˆ©ç”¨ç‡æœ‰æ‰€æå‡</li></ol></li><li><p><strong>ä¸»è¦ç¼ºç‚¹</strong>:</p><ol type="1"><li>å†…å­˜ä¸­ä»…èƒ½æœ‰ä¸€é“ç¨‹åºè¿è¡Œï¼Œåªæœ‰è¯¥ç¨‹åºè¿è¡Œç»“æŸä¹‹åæ‰èƒ½è°ƒå…¥ä¸‹ä¸€é“ç¨‹åºã€‚CPUæœ‰å¤§é‡çš„æ—¶é—´æ˜¯åœ¨ç©ºé—²ç­‰å¾…I/Oå®Œæˆã€‚èµ„æºåˆ©ç”¨ç‡ä¾ç„¶å¾ˆä½</li></ol></li></ol><h3 id="å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ">2.2 <strong>å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ</strong></h3><ol type="1"><li><p>æ“ä½œç³»ç»Ÿæ­£å¼è¯ç”Ÿï¼Œç”¨äºæ”¯æŒå¤šé“ç¨‹åºå¹¶å‘è¿è¡Œï¼Œæ¯æ¬¡å¾€å†…å­˜ä¸­è¯»å…¥å¤šé“ç¨‹åº</p></li><li><p><strong>ä¸»è¦ä¼˜ç‚¹</strong>ï¼š</p><ol type="1"><li>å¤šé“ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå…±äº«è®¡ç®—æœºèµ„æºã€‚èµ„æºåˆ©ç”¨ç‡å¤§å¹…æå‡ï¼ŒCPUå’Œå…¶ä»–èµ„æºæ›´èƒ½ä¿æŒâ€œå¿™ç¢Œâ€çŠ¶æ€ï¼Œç³»ç»Ÿååé‡å¢å¤§</li></ol></li><li><p><strong>ä¸»è¦ç¼ºç‚¹</strong>:</p><ol type="1"><li>ç”¨æˆ·å“åº”æ—¶é—´é•¿ï¼Œæ²¡æœ‰äººæœºäº¤äº’åŠŸèƒ½ï¼ˆç”¨æˆ·æäº¤è‡ªå·±çš„ä½œä¸šä¹‹åå°±åªèƒ½ç­‰å¾…è®¡ç®—æœºå¤„ç†å®Œæˆï¼Œä¸­é—´ä¸èƒ½æ§åˆ¶è‡ªå·±çš„ä½œä¸šæ‰§è¡Œegï¼šæ— æ³•è°ƒè¯•ç¨‹åº/æ— æ³•åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è¾“å…¥ä¸€äº›å‚æ•°ï¼‰</li></ol></li></ol><h2 id="åˆ†æ—¶æ“ä½œç³»ç»Ÿ">3. <strong>åˆ†æ—¶æ“ä½œç³»ç»Ÿ</strong></h2><ol type="1"><li><p>è®¡ç®—æœºä»¥æ—¶é—´ç‰‡ä¸ºå•ä½è½®æµä¸ºå„ä¸ªç”¨æˆ·/ä½œä¸šæœåŠ¡ï¼Œå„ä¸ªç”¨æˆ·å¯é€šè¿‡ç»ˆç«¯ä¸è®¡ç®—æœºè¿›è¡Œäº¤äº’</p></li><li><p><strong>ä¸»è¦ä¼˜ç‚¹</strong>:</p><ol type="1"><li>ç”¨æˆ·è¯·æ±‚å¯ä»¥è¢«å³æ—¶å“åº”ï¼Œè§£å†³äº†äººæœºäº¤äº’é—®é¢˜ã€‚å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨ä¸€å°è®¡ç®—æœºï¼Œå¹¶ä¸”ç”¨æˆ·å¯¹è®¡ç®—æœºçš„æ“ä½œç›¸äº’ç‹¬ç«‹ï¼Œæ„Ÿå—ä¸åˆ°åˆ«äººçš„å­˜åœ¨</li></ol></li><li><p><strong>ä¸»è¦ç¼ºç‚¹</strong>:</p><ol type="1"><li>ä¸èƒ½ä¼˜å…ˆå¤„ç†ä¸€äº›ç´§æ€¥ä»»åŠ¡ã€‚æ“ä½œç³»ç»Ÿå¯¹å„ä¸ªç”¨æˆ·/ä½œä¸šéƒ½æ˜¯å®Œå…¨å…¬å¹³çš„ï¼Œå¾ªç¯åœ°ä¸ºæ¯ä¸ªç”¨æˆ·/ä½œä¸šæœåŠ¡ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œä¸åŒºåˆ†ä»»åŠ¡çš„ç´§æ€¥æ€§</li></ol></li></ol><h2 id="å®æ—¶æ“ä½œç³»ç»Ÿ">4. <strong>å®æ—¶æ“ä½œç³»ç»Ÿ</strong></h2><ol type="1"><li><p>åœ¨å®æ—¶æ“ä½œç³»ç»Ÿçš„æ§åˆ¶ä¸‹ï¼Œè®¡ç®—æœºç³»ç»Ÿæ¥æ”¶åˆ°å¤–éƒ¨ä¿¡å·ååŠæ—¶è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”è¦åœ¨ä¸¥æ ¼çš„æ—¶é™å†…å¤„ç†å®Œäº‹ä»¶</p></li><li><p>å®æ—¶æ“ä½œç³»ç»Ÿçš„ä¸»è¦ç‰¹ç‚¹æ˜¯<strong>åŠæ—¶æ€§</strong>å’Œ<strong>å¯é æ€§</strong></p></li><li><p><strong>ç¡¬å®æ—¶ç³»ç»Ÿ</strong></p><ol type="1"><li>å¿…é¡»åœ¨ç»å¯¹ä¸¥æ ¼çš„è§„å®šæ—¶é—´å†…å®Œæˆå¤„ç†</li></ol></li><li><p><strong>è½¯å®æ—¶ç³»ç»Ÿ</strong></p><ol type="1"><li>èƒ½æ¥å—å¶å°”è¿åæ—¶é—´è§„å®š</li></ol></li><li><p><strong>ä¸»è¦ä¼˜ç‚¹</strong>:</p><ol type="1"><li>èƒ½å¤Ÿä¼˜å…ˆå“åº”ä¸€äº›ç´§æ€¥ä»»åŠ¡ï¼ŒæŸäº›ç´§æ€¥ä»»åŠ¡ä¸éœ€æ—¶é—´ç‰‡æ’é˜Ÿ</li></ol></li></ol><h2 id="å…¶ä»–æ“ä½œç³»ç»Ÿ">5. <strong>å…¶ä»–æ“ä½œç³»ç»Ÿ</strong></h2><ol type="1"><li>ç½‘ç»œæ“ä½œç³»ç»Ÿ<ol type="1"><li>æ˜¯ä¼´éšç€è®¡ç®—æœºç½‘ç»œçš„å‘å±•è€Œè¯ç”Ÿçš„ï¼Œèƒ½æŠŠç½‘ç»œä¸­å„ä¸ªè®¡ç®—æœºæœ‰æœºåœ°ç»“åˆèµ·æ¥ï¼Œå®ç°æ•°æ®ä¼ é€ç­‰åŠŸèƒ½ï¼Œå®ç°ç½‘ç»œä¸­å„ç§èµ„æºçš„å…±äº«ï¼ˆå¦‚æ–‡ä»¶å…±äº«ï¼‰å’Œå„å°è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ï¼ˆå¦‚ï¼šWindowsNTå°±æ˜¯ ä¸€ç§å…¸å‹çš„ç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œç½‘ç«™æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨ï¼‰</li></ol></li><li>åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ<ol type="1"><li>ä¸»è¦ç‰¹ç‚¹æ˜¯åˆ†å¸ƒæ€§å’Œå¹¶è¡Œæ€§</li><li>ç³»ç»Ÿä¸­çš„å„å°è®¡ç®—æœºåœ°ä½ç›¸åŒï¼Œä»»ä½•å·¥ä½œéƒ½å¯ä»¥åˆ†å¸ƒåœ¨è¿™äº›è®¡ç®—æœºä¸Šï¼Œç”±å®ƒä»¬å¹¶è¡Œã€ååŒå®Œæˆè¿™ä¸ªä»»åŠ¡</li></ol></li><li>ä¸ªäººè®¡ç®—æœºæ“ä½œç³»ç»Ÿ<ol type="1"><li>å¦‚ Windows XPã€MacOSï¼Œæ–¹ä¾¿ä¸ªäººä½¿ç”¨</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.1 æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ</title>
    <link href="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ">1.1 æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µ</h1><h2 id="osæ¦‚å¿µ">1. OSæ¦‚å¿µ</h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/image-20241119123556782.png"></p><h3 id="è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„">1.1 è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„</h3><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/image-20241119121839269.png"></p><ul><li>ç”¨æˆ·å¯ä»¥é€šè¿‡è°ƒç”¨å‘½ä»¤æ¥å£çš„æ–¹å¼ä»¥åŠä½¿ç”¨GUIä¸æ“ä½œç³»ç»Ÿè¿›è¡Œç›´æ¥äº¤äº’</li><li>åº”ç”¨ç¨‹åºé€šè¿‡è°ƒç”¨ç¨‹åºæ¥å£çš„æ–¹å¼ä¸æ“ä½œç³»ç»Ÿè¿›è¡Œç›´æ¥äº¤äº’</li><li>è£¸æœº(çº¯ç¡¬ä»¶)åŒ…æ‹¬CPUã€å†…å­˜ã€ç¡¬ç›˜ã€ä¸»æ¿ç­‰</li></ul><h3 id="æ“ä½œç³»ç»Ÿæ¦‚å¿µ">1.2 æ“ä½œç³»ç»Ÿæ¦‚å¿µ</h3><ul><li>æ“ä½œç³»ç»Ÿ(OperatingSystem,OS)æ˜¯æŒ‡æ§åˆ¶å’Œç®¡ç†æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºï¼Œå¹¶åˆç†åœ°ç»„ç»‡è°ƒåº¦è®¡ç®—æœºçš„å·¥ä½œå’Œèµ„æºçš„åˆ†é…ï¼›</li><li>ä»¥æä¾›ç»™ç”¨æˆ·å’Œå…¶ä»–è½¯ä»¶æ–¹ä¾¿çš„æ¥å£å’Œç¯å¢ƒï¼›</li><li>å®ƒæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„ç³»ç»Ÿè½¯ä»¶ã€‚</li></ul><ol type="1"><li>æ“ä½œç³»ç»Ÿæ˜¯ç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…<ol type="1"><li>ä»¥æä¾›ç»™ç”¨æˆ·å’Œå…¶ä»–è½¯ä»¶æ–¹ä¾¿çš„æ¥å£å’Œç¯å¢ƒ</li></ol></li><li>å‘ä¸Šå±‚æä¾›æ–¹ä¾¿æ˜“ç”¨çš„æœåŠ¡<ol type="1"><li>å®ƒæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„ç³»ç»Ÿè½¯ä»¶</li></ol></li><li>æ˜¯æœ€æ¥è¿‘ç¡¬ä»¶çš„ä¸€å±‚è½¯ä»¶</li></ol><h2 id="osåŠŸèƒ½å’Œç›®æ ‡">2. OSåŠŸèƒ½å’Œç›®æ ‡</h2><h3 id="ç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…">2.1 ç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…</h3><ul><li>ç”¨QQå’Œæœ‹å‹è§†é¢‘èŠå¤©çš„è¿‡ç¨‹ï¼š<ul><li>Step 1ï¼šåœ¨å„ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ° QQ å®‰è£…çš„ä½ç½®ï¼ˆå¦‚ D:/Tencent/QQ/Binï¼‰<ul><li>é€å±‚æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œ æ‰¾åˆ°QQ.exe è¿™ä¸ªç¨‹åºï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰çš„å­˜æ”¾ä½ç½®</li><li>æ–‡ä»¶ç®¡ç†</li></ul></li><li>Step 2ï¼šåŒå‡»æ‰“å¼€ QQ.exe<ul><li>éœ€è¦æŠŠè¯¥ç¨‹åºç›¸å…³æ•°æ®æ”¾å…¥å†…å­˜</li><li>å­˜å‚¨å™¨ç®¡ç†, æ‰§è¡Œä¸€ä¸ªç¨‹åºå‰éœ€è¦å°†è¯¥ç¨‹åºæ”¾åˆ°å†…å­˜ä¸­ï¼Œæ‰èƒ½è¢«CPUå¤„ç†</li></ul></li><li>Step 3ï¼šQQ ç¨‹åºæ­£å¸¸è¿è¡Œ<ul><li>å¯¹åº”çš„è¿›ç¨‹è¢«å¤„ç†æœºï¼ˆCPUï¼‰å¤„ç†</li><li>å¤„ç†æœºç®¡ç†</li></ul></li><li>Step 4ï¼šå¼€å§‹å’Œæœ‹å‹è§†é¢‘èŠå¤©<ul><li>éœ€è¦å°†æ‘„åƒå¤´è®¾å¤‡åˆ†é…ç»™è¿›ç¨‹</li><li>è®¾å¤‡ç®¡ç†</li></ul></li></ul></li></ul><h3 id="å‘ä¸Šå±‚æä¾›æ–¹ä¾¿æ˜“ç”¨çš„æœåŠ¡">2.2<strong>å‘ä¸Šå±‚æä¾›æ–¹ä¾¿æ˜“ç”¨çš„æœåŠ¡</strong></h3><ul><li><strong>å°è£…æ€æƒ³</strong><ul><li>æ“ä½œç³»ç»ŸæŠŠä¸€äº›ä¸‘é™‹çš„ç¡¬ä»¶åŠŸèƒ½å°è£…æˆç®€å•æ˜“ç”¨çš„æœåŠ¡ï¼Œä½¿ç”¨æˆ·èƒ½æ›´æ–¹ä¾¿åœ°ä½¿ç”¨è®¡ç®—æœºï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒåº•å±‚ç¡¬ä»¶çš„åŸç†ï¼Œåªéœ€è¦å¯¹æ“ä½œç³»ç»Ÿå‘å‡ºå‘½ä»¤å³å¯</li></ul></li><li><strong>æä¾›çš„æœåŠ¡</strong><ul><li>GUIï¼šå›¾å½¢åŒ–ç”¨æˆ·æ¥å£ï¼ˆGraphical User Interfaceï¼‰</li><li><strong>è”æœºå‘½ä»¤æ¥å£</strong> = <strong>äº¤äº’å¼å‘½ä»¤æ¥å£</strong><ul><li>å¦‚Windowså‘½ä»¤è¡ŒæŒ‡ä»¤</li><li>ç‰¹ç‚¹: ç”¨æˆ·è¯´ä¸€å¥, ç³»ç»Ÿè·Ÿç€åšä¸€å¥</li></ul></li><li><strong>è„±æœºå‘½ä»¤æ¥å£</strong> = <strong>æ‰¹å¤„ç†å‘½ä»¤æ¥å£</strong><ul><li>å¦‚æ‰§è¡ŒWindowsä¸­çš„*.batæ–‡ä»¶</li><li>ç‰¹å®š: ç”¨æˆ·è¯´ä¸€å †, ç³»ç»Ÿè·Ÿç€åšä¸€å †</li></ul></li><li><strong>ç¨‹åºæ¥å£</strong>(ç”±ä¸€ç³»åˆ—ç³»ç»Ÿè°ƒç”¨ç»„æˆ)<ul><li>å¯ä»¥åœ¨ç¨‹åºä¸­è¿›è¡Œ<strong>ç³»ç»Ÿè°ƒç”¨(å¹¿ä¹‰æŒ‡ä»¤)</strong>æ¥ä½¿ç”¨ç¨‹åºæ¥å£,æ™®é€šç”¨æˆ·ä¸èƒ½ç›´æ¥ä½¿ç”¨ç¨‹åºæ¥å£, åªèƒ½é€šè¿‡ç¨‹åºä»£ç é—´æ¥ä½¿ç”¨</li><li>ç³»ç»Ÿè°ƒç”¨ç±»ä¼¼äºå‡½æ•°è°ƒç”¨ï¼Œæ˜¯åº”ç”¨ç¨‹åºè¯·æ±‚æ“ä½œç³»ç»ŸæœåŠ¡çš„å”¯ä¸€æ–¹å¼</li></ul></li></ul></li></ul><h3 id="ä½œä¸ºæœ€æ¥è¿‘ç¡¬ä»¶çš„å±‚æ¬¡">2.3<strong>ä½œä¸ºæœ€æ¥è¿‘ç¡¬ä»¶çš„å±‚æ¬¡</strong></h3><ol type="1"><li><p>éœ€è¦å®ç°å¯¹ç¡¬ä»¶æœºå™¨çš„æ‹“å±•</p></li><li><p>æ²¡æœ‰ä»»ä½•è½¯ä»¶æ”¯æŒçš„è®¡ç®—æœºç§°ä¸º<strong>è£¸æœº</strong></p><ol type="1"><li>åœ¨è£¸æœºä¸Šå®‰è£…çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥æä¾›èµ„æºç®¡ç†åŠŸèƒ½å’Œæ–¹ä¾¿ç”¨æˆ·çš„æœåŠ¡åŠŸèƒ½ï¼Œå°†è£¸æœºæ”¹é€ æˆåŠŸèƒ½æ›´å¼ºã€ä½¿ç”¨æ›´æ–¹ä¾¿çš„æœºå™¨</li></ol></li><li><p>é€šå¸¸æŠŠè¦†ç›–äº†è½¯ä»¶çš„æœºå™¨ç§°ä¸º<strong>æ‰©å……æœºå™¨</strong>ï¼Œåˆç§°ä¹‹ä¸º<strong>è™šæ‹Ÿæœº</strong></p></li><li><p><strong>æ“ä½œç³»ç»Ÿå¯¹ç¡¬ä»¶æœºå™¨çš„æ‹“å±•</strong></p><ol type="1"><li>å°†CPUã€å†…å­˜ã€ç£ç›˜ã€æ˜¾ç¤ºå™¨ã€é”®ç›˜ç­‰ç¡¬ä»¶åˆç†åœ°ç»„ç»‡èµ·æ¥ï¼Œè®©å„ç§ç¡¬ä»¶èƒ½å¤Ÿç›¸äº’åè°ƒé…åˆï¼Œå®ç°æ›´å¤šæ›´å¤æ‚çš„åŠŸèƒ½</li><li>æ™®é€šç”¨æˆ·æ— éœ€å…³å¿ƒè¿™äº›ç¡¬ä»¶åœ¨åº•å±‚æ˜¯æ€ä¹ˆç»„ç»‡èµ·æ¥å·¥ä½œçš„ï¼Œåªéœ€ç›´æ¥ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£å³å¯</li></ol></li></ol><h2 id="æ“ä½œç³»ç»Ÿçš„ç‰¹å¾">3. æ“ä½œç³»ç»Ÿçš„ç‰¹å¾</h2><p><img src="/2024/11/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/image-20241119125617317.png"></p><h3 id="å¹¶å‘">3.1 <strong>å¹¶å‘</strong></h3><ul><li>ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å†…å‘ç”Ÿã€‚è¿™äº›äº‹æƒ…å®è§‚ä¸Šæ˜¯åŒæ—¶å‘ç”Ÿçš„,ä½†å¾®è§‚ä¸Šæ˜¯äº¤æ›¿å‘ç”Ÿçš„</li></ul><ol type="1"><li><strong>å¹¶è¡Œ</strong><ol type="1"><li>æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»åŒæ—¶å‘ç”Ÿ</li></ol></li><li><strong>æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§</strong><ol type="1"><li>æ˜¯æŒ‡è®¡ç®—æœºç³»ç»Ÿä¸­â€œåŒæ—¶â€è¿è¡Œç€å¤šä¸ªç¨‹åº, è¿™äº›ç¨‹åºå®è§‚ä¸Šçœ‹æ˜¯åŒæ—¶è¿è¡Œç€,è€Œå¾®è§‚ä¸Šçœ‹æ˜¯äº¤æ›¿è¿è¡Œçš„</li><li>æ“ä½œç³»ç»Ÿå°±æ˜¯ä¼´éšç€â€œå¤šé“ç¨‹åºæŠ€æœ¯â€è€Œå‡ºç°çš„ã€‚å› æ­¤ï¼Œæ“ä½œç³»ç»Ÿå’Œç¨‹åºå¹¶å‘æ˜¯ä¸€èµ·è¯ç”Ÿçš„</li></ol></li><li><strong>æ³¨æ„</strong><ol type="1"><li><strong>å•æ ¸CPU</strong>åŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œå„ä¸ªç¨‹åºåªèƒ½å¹¶å‘åœ°æ‰§è¡Œ</li><li><strong>å¤šæ ¸CPU</strong>åŒä¸€æ—¶åˆ»å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªç¨‹åºï¼Œå¤šä¸ªç¨‹åºå¯ä»¥å¹¶è¡Œåœ°æ‰§è¡Œ</li></ol></li></ol><h3 id="å…±äº«">3.2 <strong>å…±äº«</strong></h3><ul><li>å¹¶å‘ä¸å…±äº«æ˜¯ä¸¤ä¸ªæœ€åŸºæœ¬çš„ç‰¹å¾, äºŒè€…äº’ä¸ºå­˜åœ¨æ¡ä»¶<ul><li>å¦‚æœå¤±å»å¹¶å‘æ€§ï¼Œåˆ™ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªç¨‹åºæ­£åœ¨è¿è¡Œï¼Œåˆ™å…±äº«æ€§å¤±å»å­˜åœ¨çš„æ„ä¹‰</li><li>å¦‚æœå¤±å»å…±äº«æ€§ï¼Œåˆ™QQå’Œå¾®ä¿¡ä¸èƒ½åŒæ—¶è®¿é—®ç¡¬ç›˜èµ„æºï¼Œå°±æ— æ³•å®ç°åŒæ—¶å‘é€æ–‡ä»¶ï¼Œä¹Ÿå°±æ— æ³•å¹¶å‘</li></ul></li><li><strong>å…±äº«</strong>å³èµ„æºå…±äº«ï¼Œæ˜¯æŒ‡ç³»ç»Ÿä¸­çš„èµ„æºå¯ä¾›å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹å…±åŒä½¿ç”¨<ul><li><strong>äº’æ–¥å…±äº«</strong><ul><li>ç³»ç»Ÿä¸­çš„æŸäº›èµ„æºï¼Œè™½ç„¶å¯ä»¥æä¾›ç»™å¤šä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œä½†ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®è¯¥èµ„æº</li></ul></li><li><strong>åŒæ—¶å…±äº«</strong><ul><li>ç³»ç»Ÿä¸­çš„æŸäº›èµ„æºï¼Œå…è®¸ä¸€ä¸ªæ—¶é—´æ®µå†…ç”±å¤šä¸ªè¿›ç¨‹â€œåŒæ—¶â€å¯¹å®ƒä»¬è¿›è¡Œè®¿é—®</li><li>æ‰€è°“çš„â€œåŒæ—¶â€å¾€å¾€æ˜¯å®è§‚ä¸Šçš„ï¼Œè€Œåœ¨å¾®è§‚ä¸Šï¼Œè¿™äº›è¿›ç¨‹å¯èƒ½æ˜¯äº¤æ›¿åœ°å¯¹è¯¥èµ„æºè¿›è¡Œè®¿é—®çš„ï¼ˆå³åˆ†æ—¶å…±äº«ï¼‰</li></ul></li></ul></li></ul><h3 id="è™šæ‹Ÿ">3.3 <strong>è™šæ‹Ÿ</strong></h3><p>è™šæ‹Ÿæ˜¯æŒ‡æŠŠä¸€ä¸ªç‰©ç†ä¸Šçš„å®ä½“å˜ä¸ºè‹¥å¹²ä¸ªé€»è¾‘ä¸Šçš„å¯¹åº”ç‰©ã€‚ç‰©ç†å®ä½“æ˜¯å®é™…å­˜åœ¨çš„,é€»è¾‘ä¸Šçš„å¯¹åº”ç‰©æ˜¯ç”¨æˆ·æ„Ÿå—åˆ°çš„</p><ul><li><strong>ç©ºåˆ†å¤ç”¨æŠ€æœ¯</strong><ul><li>è™šæ‹Ÿå­˜å‚¨å™¨è¿è¡Œç€è¿œå¤§äºå®é™…å­˜å‚¨å™¨å†…å­˜å¤§å°çš„ç¨‹åº</li></ul></li><li><strong>æ—¶åˆ†å¤ç”¨æŠ€æœ¯</strong><ul><li>å¾®è§‚ä¸Šå¤„ç†æœºåœ¨å„ä¸ªå¾®å°çš„æ—¶é—´æ®µå†…äº¤æ›¿ç€ä¸ºå„ä¸ªè¿›ç¨‹æœåŠ¡</li></ul></li><li>æ˜¾ç„¶ï¼Œå¦‚æœå¤±å»äº†å¹¶å‘æ€§ï¼Œåˆ™ä¸€ä¸ªæ—¶é—´æ®µå†…ç³»ç»Ÿä¸­åªéœ€è¿è¡Œä¸€é“ç¨‹åºï¼Œé‚£ä¹ˆå°±å¤±å»äº†å®ç°è™šæ‹Ÿæ€§çš„æ„ä¹‰äº†ã€‚å› æ­¤ï¼Œæ²¡æœ‰å¹¶å‘æ€§ï¼Œå°±è°ˆä¸ä¸Šè™šæ‹Ÿæ€§</li></ul><h3 id="å¼‚æ­¥">3.4 <strong>å¼‚æ­¥</strong></h3><ul><li>åœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œå…è®¸å¤šä¸ªç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œä½†ç”±äºèµ„æºæœ‰é™ï¼Œè¿›ç¨‹çš„æ‰§è¡Œä¸æ˜¯ä¸€è´¯åˆ°åº•çš„ï¼Œè€Œæ˜¯èµ°èµ°åœåœï¼Œä»¥ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ï¼Œè¿™å°±æ˜¯è¿›ç¨‹çš„å¼‚æ­¥æ€§</li><li>åªæœ‰ç³»ç»Ÿæ‹¥æœ‰å¹¶å‘æ€§ï¼Œæ‰æœ‰å¯èƒ½å¯¼è‡´å¼‚æ­¥æ€§</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ“ä½œç³»ç»Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.7 ä¸‡ç»´ç½‘WWW</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-7-%E4%B8%87%E7%BB%B4%E7%BD%91WWW/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-7-%E4%B8%87%E7%BB%B4%E7%BD%91WWW/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸‡ç»´ç½‘www">6.7 ä¸‡ç»´ç½‘WWW</h1><blockquote><p>å³ World WideWebï¼Œæ˜¯ä¸€ä¸ªå¤§è§„æ¨¡çš„ã€è”æœºå¼çš„ä¿¡æ¯å‚¨è—æ‰€ï¼Œæ˜¯è¿è¡Œåœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨ã€‚</p></blockquote><figure><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-7-%E4%B8%87%E7%BB%B4%E7%BD%91WWW/image-20241118192932067.png" alt="ä¸‡ç»´ç½‘æ–‡æ¡£"><figcaption aria-hidden="true">ä¸‡ç»´ç½‘æ–‡æ¡£</figcaption></figure><ol type="1"><li><p>ç»Ÿä¸€èµ„æºå®šä½ç¬¦URL</p><blockquote><p>ä¸‡ç»´ç½‘ä½¿ç”¨ç»Ÿä¸€èµ„æºå®šä½ç¬¦URLæ¥æŒ‡æ˜å› ç‰¹ç½‘ä¸Šä»»ä½•ç§ç±»â€œèµ„æºâ€çš„ä½ç½®ã€‚</p><p>å…¶ä¸€èˆ¬å½¢å¼ä¸ºï¼š<code>&lt;åè®®&gt;ï¼š/âˆ¥&lt;ä¸»æœº&gt;ï¼š&lt;ç«¯å£&gt;/&lt;è·¯å¾„&gt;</code></p></blockquote></li><li><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTP</p><blockquote><p>è¶…æ–‡æœ¬ä¼ è¾“åè®® HTTP (HyperText Transfer Protocol)å®šä¹‰äº†æµè§ˆå™¨ï¼ˆå³ä¸‡ç»´ç½‘å®¢æˆ·è¿›ç¨‹ï¼‰æ€æ ·å‘ä¸‡ç»´ç½‘æœåŠ¡å™¨è¯·æ±‚ä¸‡ç»´ç½‘æ–‡æ¡£ä»¥åŠä¸‡ç»´ç½‘æœåŠ¡å™¨æ€æ ·æŠŠä¸‡ç»´ç½‘æ–‡æ¡£ä¼ é€ç»™æµè§ˆå™¨ã€‚</p></blockquote><ol type="1"><li><p>HTTP1.0</p><blockquote><p>é‡‡ç”¨éæŒç»­è¿æ¥æ–¹å¼ã€‚æ¯æ¬¡æµè§ˆå™¨è¦è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶éƒ½è¦ä¸æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥(80ç«¯å£)ï¼Œå½“æ”¶åˆ°å“åº”åå°±ç«‹å³å…³é—­è¿æ¥ã€‚</p><p>æ¯è¯·æ±‚ä¸€ä¸ªæ–‡æ¡£å°±è¦æœ‰ä¸¤å€çš„TTçš„å¼€é”€ã€‚è‹¥ä¸€ä¸ªç½‘é¡µä¸Šæœ‰å¾ˆå¤šå¼•ç”¨å¯¹è±¡ï¼ˆä¾‹å¦‚å›¾ç‰‡ç­‰ï¼‰ï¼Œé‚£ä¹ˆè¯·æ±‚æ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦èŠ±è´¹2RTTçš„æ—¶é—´ã€‚ä¸ºäº†å‡å°æ—¶å»¶ï¼Œæµè§ˆå™¨é€šå¸¸ä¼šå»ºç«‹å¤šä¸ªå¹¶è¡Œçš„TCPè¿æ¥åŒæ—¶è¯·æ±‚å¤šä¸ªå¯¹è±¡ã€‚ä½†æ˜¯ï¼Œè¿™ä¼šå¤§é‡å ç”¨ä¸‡ç»´ç½‘æœåŠ¡å™¨çš„èµ„æºï¼Œç‰¹åˆ«æ˜¯ä¸‡ç»´ç½‘æœåŠ¡å™¨å¾€å¾€è¦åŒæ—¶æœåŠ¡äºå¤§é‡å®¢æˆ·çš„è¯·æ±‚ï¼Œè¿™ä¼šä½¿å…¶è´Ÿæ‹…å¾ˆé‡ã€‚</p></blockquote></li><li><p>HTTP1.1</p><blockquote><ol type="1"><li><p>é‡‡ç”¨æŒç»­è¿æ¥æ–¹å¼ã€‚ä¸‡ç»´ç½‘æœåŠ¡å™¨åœ¨å‘é€å“åº”åä»ç„¶ä¿æŒè¿™æ¡è¿æ¥ï¼Œä½¿åŒä¸€ä¸ªå®¢æˆ·ï¼ˆæµè§ˆå™¨ï¼‰å’Œè¯¥æœåŠ¡å™¨å¯ä»¥ç»§ç»­åœ¨è¿™æ¡è¿æ¥ä¸Šä¼ é€åç»­çš„HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚</p></li><li><p>ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ•ˆç‡ï¼Œè¿˜å¯é‡‡ç”¨æµæ°´çº¿æ–¹å¼ï¼Œå³æµè§ˆå™¨åœ¨æ”¶åˆ°HTTPçš„å“åº”æŠ¥æ–‡ä¹‹å‰å°±èƒ½å¤Ÿè¿ç»­å‘é€å¤šä¸ªè¯·æ±‚æŠ¥æ–‡ã€‚</p></li></ol></blockquote></li></ol></li><li><p>HTTPä¸¤ç§æŠ¥æ–‡â€”â€”è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡</p><blockquote><p>æŠ¥æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ˜¯ä¸€äº›ASCIIç ä¸²ï¼Œå¹¶ä¸”æ¯ä¸ªå­—æ®µçš„é•¿åº¦éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚</p></blockquote><ol type="1"><li><p>è¯·æ±‚æŠ¥æ–‡æ ¼å¼ <img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-7-%E4%B8%87%E7%BB%B4%E7%BD%91WWW/image-20241118222527016.png"></p></li><li><p>å“åº”æŠ¥æ–‡æ ¼å¼ <img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-7-%E4%B8%87%E7%BB%B4%E7%BD%91WWW/1689763996008.png" alt="1689763996008"></p></li></ol></li><li><p>CookieæŠ€æœ¯</p><blockquote><p>Cookieæä¾›äº†ä¸€ç§æœºåˆ¶ä½¿å¾—ä¸‡ç»´ç½‘æœåŠ¡å™¨èƒ½å¤Ÿâ€œè®°ä½â€ç”¨æˆ·ï¼Œè€Œæ— éœ€ç”¨æˆ·ä¸»åŠ¨æä¾›ç”¨æˆ·æ ‡è¯†ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCookieæ˜¯ä¸€ç§<strong>å¯¹æ— çŠ¶æ€çš„HTTPè¿›è¡ŒçŠ¶æ€åŒ–</strong>çš„æŠ€æœ¯ã€‚</p></blockquote><figure><img src="https://raw.githubusercontent.com/Ag-epiphany/typora_Pictures/main/image-20230719184205348.png" alt="image-20230719184205348"><figcaption aria-hidden="true">image-20230719184205348</figcaption></figure></li><li><p>ä¸‡ç»´ç½‘ç¼“å­˜ï¼ˆWebç¼“å­˜ï¼‰</p><blockquote><p>åœ¨ä¸‡ç»´ç½‘ä¸­è¿˜å¯ä»¥ä½¿ç”¨ç¼“å­˜æœºåˆ¶ä»¥æé«˜ä¸‡ç»´ç½‘çš„æ•ˆç‡ã€‚å¯ä½äºå®¢æˆ·æœºï¼Œä¹Ÿå¯ä½äºä¸­é—´ç³»ç»Ÿä¸Šï¼Œä½äºä¸­é—´ç³»ç»Ÿä¸Šçš„Webç¼“å­˜åˆç§°ä¸ºä»£ç†æœåŠ¡å™¨ã€‚</p></blockquote><figure><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-7-%E4%B8%87%E7%BB%B4%E7%BD%91WWW/image-20230719183530450.png" alt="image-20230719183530450"><figcaption aria-hidden="true">image-20230719183530450</figcaption></figure><table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Last-Modified</td><td>æœ€åä¿®æ”¹æ—¶é—´</td></tr><tr><td>Expires</td><td>æœ‰æ•ˆæœŸ</td></tr></tbody></table><ol type="1"><li>è‹¥è¿‡äº†æœ€åæœ‰æ•ˆæœŸï¼Œåˆ™åœ¨å®¢æˆ·æœºå‘æ¥è¯·æ±‚æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å‘åŸå§‹æœåŠ¡å™¨å‘é€è¯·æ±‚å¾—åˆ°æ–°çš„æ•°æ®<ol type="1"><li>è‹¥åŸå§‹æœåŠ¡å™¨çš„æ•°æ®ä¹Ÿæœªæ›´æ”¹ï¼Œåˆ™å‘å›ä¸€ä¸ªä¸å¸¦å®ä½“æ•°æ®çš„å“åº”æŠ¥æ–‡ï¼Œä»£ç†æœåŠ¡å™¨æ”¶åˆ°åæ›´æ–°æœ‰æ•ˆæœŸï¼Œå°†æ•°æ®å‘ç»™å®¢æˆ·æœº</li><li>è‹¥åŸå§‹æœåŠ¡å™¨çš„æ•°æ®æ›´æ”¹ï¼Œé‚£ä¹ˆå‘å›æ–°æ•°æ®çš„å“åº”æŠ¥æ–‡ï¼Œä»£ç†æœåŠ¡å™¨æ›´æ–°æ•°æ®ä»¥åŠä¸¤ä¸ªå­—æ®µå¹¶å°†æ–°æ•°æ®å‘ç»™å®¢æˆ·æœº</li></ol></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.6 ç”µå­é‚®ä»¶</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç”µå­é‚®ä»¶">6.6 ç”µå­é‚®ä»¶</h1><h2 id="ç”µå­é‚®ä»¶ç³»ç»Ÿ">1. ç”µå­é‚®ä»¶ç³»ç»Ÿ</h2><blockquote><p>ç”µå­é‚®ä»¶ç³»ç»Ÿé‡‡ç”¨å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ã€‚ä¸‰ä¸ªä¸»è¦ç»„æˆæ„ä»¶ï¼šç”¨æˆ·ä»£ç†ï¼Œé‚®ä»¶æœåŠ¡å™¨ä»¥åŠç”µå­é‚®ä»¶æ‰€éœ€çš„åè®®</p></blockquote><ol type="1"><li>ç”¨æˆ·ä»£ç†æ˜¯ç”¨æˆ·ä¸ç”µå­é‚®ä»¶ç³»ç»Ÿçš„æ¥å£ï¼Œåˆç§°ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯è½¯ä»¶</li><li>é‚®ä»¶æœåŠ¡å™¨æ˜¯ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½ã€‚å› ç‰¹ç½‘ä¸Šæ‰€æœ‰çš„SPéƒ½æœ‰é‚®ä»¶æœåŠ¡å™¨ï¼Œå…¶åŠŸèƒ½æ˜¯å‘é€å’Œæ¥æ”¶é‚®ä»¶ï¼ŒåŒæ—¶è¿˜è¦è´Ÿè´£ç»´æŠ¤ç”¨æˆ·çš„é‚®ç®±ã€‚</li><li>åè®®åŒ…æ‹¬é‚®ä»¶å‘é€åè®®ï¼ˆä¾‹å¦‚SMTP)å’Œé‚®ä»¶è¯»å–åè®®ï¼ˆä¾‹å¦‚POP3)ã€‚</li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/image-20241118190659564.png"></p><h2 id="ç®€å•é‚®ä»¶ä¼ é€åè®®smtp">2. ç®€å•é‚®ä»¶ä¼ é€åè®®SMTP</h2><ol type="1"><li><p>åŸºæœ¬å·¥ä½œåŸç†</p><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/image-20241118191131692.png"></p></li><li><p>SMTPåè®®åªèƒ½ä¼ é€ASCIIç æ–‡æœ¬æ•°æ®ï¼Œä¸èƒ½ä¼ é€å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…¶ä»–çš„äºŒè¿›åˆ¶å¯¹è±¡ã€‚</p></li><li><p>SMTPä¸èƒ½æ»¡è¶³ä¼ é€å¤šåª’ä½“é‚®ä»¶ï¼ˆä¾‹å¦‚å¸¦æœ‰å›¾ç‰‡ã€éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®ï¼‰çš„éœ€è¦ã€‚å¹¶ä¸”è®¸å¤šå…¶ä»–éè‹±è¯­å›½å®¶çš„æ–‡å­—(ä¾‹å¦‚ä¸­æ–‡ã€ä¿„æ–‡ã€ç”šè‡³å¸¦æœ‰é‡éŸ³ç¬¦å·çš„æ³•æ–‡æˆ–å¾·æ–‡)ä¹Ÿæ— æ³•ç”¨SMTPä¼ é€ã€‚</p></li><li><p>ä¸ºè§£å†³SMTPä¼ é€éASCIIç æ–‡æœ¬çš„é—®é¢˜ï¼Œæå‡ºäº†å¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•MIME</p><ol type="1"><li>å¢åŠ äº†5ä¸ªæ–°çš„é‚®ä»¶é¦–éƒ¨å­—æ®µï¼Œè¿™äº›å­—æ®µæä¾›äº†æœ‰å…³é‚®ä»¶ä¸»ä½“çš„ä¿¡æ¯ã€‚</li><li>å®šä¹‰äº†è®¸å¤šé‚®ä»¶å†…å®¹çš„æ ¼å¼ï¼Œå¯¹å¤šåª’ä½“ç”µå­é‚®ä»¶çš„è¡¨ç¤ºæ–¹æ³•è¿›è¡Œäº†æ ‡å‡†åŒ–ã€‚</li><li>å®šä¹‰äº†ä¼ é€ç¼–ç ï¼Œå¯å¯¹ä»»ä½•å†…å®¹æ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œè€Œä¸ä¼šè¢«é‚®ä»¶ç³»ç»Ÿæ”¹å˜ã€‚</li></ol></li><li><p>å®é™…ä¸Šï¼ŒMIMEä¸ä»…ä»…ç”¨äºSMTP,ä¹Ÿç”¨äºåæ¥çš„åŒæ ·é¢å‘ASCIIå­—ç¬¦çš„HTTPã€‚</p></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/image-20241118191715497.png"></p><h2 id="ç”µå­é‚®ä»¶çš„æ ¼å¼">3. ç”µå­é‚®ä»¶çš„æ ¼å¼</h2><ul><li>ä¸€ä¸ªç”µå­é‚®ä»¶æœ‰ä¿¡å°å’Œå†…å®¹ä¸¤éƒ¨åˆ†ã€‚è€Œå†…å®¹åˆç”±é¦–éƒ¨å’Œä¸»ä½“ä¸¤éƒ¨åˆ†æ„æˆã€‚</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/image-20241118191547061.png"></p><ol type="1"><li>é«˜äº®éƒ¨åˆ†ä¸ºæ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†ï¼Œä¸ºå¿…å¡«é¡¹ã€‚</li></ol><h2 id="é‚®ä»¶è¯»å–åè®®">4. é‚®ä»¶è¯»å–åè®®</h2><ol type="1"><li><p>é‚®å±€åè®®POP3</p><blockquote><p>éå¸¸ç®€å•ã€åŠŸèƒ½æœ‰é™çš„é‚®ä»¶è¯»å–åè®®ã€‚ç”¨æˆ·åªèƒ½ä»¥ä¸‹è½½å¹¶åˆ é™¤æ–¹å¼æˆ–ä¸‹è½½å¹¶ä¿ç•™æ–¹å¼ä»é‚®ä»¶æœåŠ¡å™¨ä¸‹è½½é‚®ä»¶åˆ°ç”¨æˆ·æ–¹è®¡ç®—æœºã€‚ä¸å…è®¸ç”¨æˆ·åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šç®¡ç†è‡ªå·±çš„é‚®ä»¶ã€‚</p></blockquote></li><li><p>å› ç‰¹ç½‘é‚®ä»¶è®¿é—®åè®®IMAP</p><blockquote><p>åŠŸèƒ½æ¯”POP3å¼ºå¤§çš„é‚®ä»¶è¯»å–åè®®ã€‚ç”¨æˆ·åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šå°±å¯ä»¥æ“æ§é‚®ä»¶æœåŠ¡å™¨ä¸­çš„é‚®ç®±ï¼Œå°±åƒåœ¨æœ¬åœ°æ“æ§ä¸€æ ·ï¼Œå› æ­¤IMAPæ˜¯ä¸€ä¸ªè”æœºåè®®ã€‚</p></blockquote></li><li><p>POP3å’ŒIMAP4éƒ½é‡‡ç”¨åŸºäºTCPè¿æ¥çš„å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ã€‚</p><ol type="1"><li>POP3ä½¿ç”¨ç«¯å£110</li><li>IMAP4ä½¿ç”¨ç«¯å£143</li></ol></li></ol><h2 id="åŸºäºä¸‡ç»´ç½‘çš„ç”µå­é‚®ä»¶">5. åŸºäºä¸‡ç»´ç½‘çš„ç”µå­é‚®ä»¶</h2><ul><li>é€šè¿‡æµè§ˆå™¨ç™»å½•ï¼ˆæä¾›ç”¨æˆ·åå’Œå£ä»¤ï¼‰é‚®ä»¶æœåŠ¡å™¨ä¸‡ç»´ç½‘ç½‘ç«™å°±å¯ä»¥æ’°å†™ã€æ”¶å‘ã€é˜…è¯»å’Œç®¡ç†ç”µå­é‚®ä»¶ã€‚è¿™ç§å·¥ä½œæ¨¡å¼ä¸IMAPå¾ˆç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ç”¨æˆ·è®¡ç®—æœºæ— éœ€å®‰è£…ä¸“é—¨çš„ç”¨æˆ·ä»£ç†ç¨‹åºï¼Œåªéœ€è¦ä½¿ç”¨é€šç”¨çš„ä¸‡ç»´ç½‘æµè§ˆå™¨ã€‚</li><li>è¿™ç§å·¥ä½œæ‘¸å¼åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸é‚®ä»¶æœåŠ¡å™¨ç½‘ç«™ä¹‹é—´ä½¿ç”¨HTTPåè®®ï¼Œè€Œé‚®ä»¶æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨SMTPåè®®ã€‚</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-6-%E7%94%B5%E5%AD%90%E5%8D%8F%E8%AE%AE/image-20241118192409368.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.5 æ–‡ä»¶ä¼ é€åè®®FTP</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-5-%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AEFTP/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-5-%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AEFTP/</url>
    
    <content type="html"><![CDATA[<h2 id="æ–‡ä»¶ä¼ é€åè®®ftp">6.5 æ–‡ä»¶ä¼ é€åè®®FTP</h2><ol type="1"><li>FTPæä¾›äº¤äº’å¼çš„è®¿é—®ï¼Œå…è®¸å®¢æˆ·æŒ‡æ˜æ–‡ä»¶çš„ç±»å‹ä¸æ ¼å¼ï¼ˆå¦‚æŒ‡æ˜æ˜¯å¦ä½¿ç”¨ASCIIç ï¼‰ï¼Œå¹¶å…è®¸æ–‡ä»¶å…·æœ‰å­˜å–æƒé™ï¼ˆå¦‚è®¿é—®æ–‡ä»¶çš„ç”¨æˆ·å¿…é¡»ç»è¿‡æˆæƒï¼Œå¹¶è¾“å…¥æœ‰æ•ˆçš„å£ä»¤ï¼‰</li><li>FTPå±è”½äº†å„è®¡ç®—æœºç³»ç»Ÿçš„ç»†èŠ‚ï¼Œå› è€Œé€‚åˆäºåœ¨å¼‚æ„ç½‘ç»œä¸­ä»»æ„è®¡ç®—æœºä¹‹é—´ä¼ é€æ–‡ä»¶</li></ol><h2 id="åŸºæœ¬åŸç†">1. åŸºæœ¬åŸç†</h2><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-5-%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AEFTP/image-20230719151544230.png"></p><ol type="1"><li>FTPå®¢æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´è¦å»ºç«‹ä»¥ä¸‹ä¸¤ä¸ªå¹¶è¡Œçš„TCPè¿æ¥<ol type="1"><li>æ§åˆ¶è¿æ¥ï¼Œåœ¨<strong>æ•´ä¸ªä¼šè¯æœŸé—´ä¸€ç›´ä¿æŒæ‰“å¼€</strong>ï¼Œç”¨äºä¼ é€FTPç›¸å…³<strong>æ§åˆ¶å‘½ä»¤</strong></li><li>æ•°æ®è¿æ¥ï¼Œç”¨äºæ–‡ä»¶ä¼ è¾“ï¼Œåœ¨<strong>æ¯æ¬¡æ–‡ä»¶ä¼ è¾“æ—¶æ‰å»ºç«‹</strong>ï¼Œ<strong>ä¼ è¾“ç»“æŸå°±å…³é—­</strong></li></ol></li><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒFTPä½¿ç”¨TCP 21ç«¯å£è¿›è¡Œæ§åˆ¶è¿æ¥ï¼ŒTCP 20ç«¯å£è¿›è¡Œæ•°æ®è¿æ¥ã€‚ä½†æ˜¯ï¼Œæ˜¯å¦ä½¿ç”¨TCP20ç«¯å£å»ºç«‹æ•°æ®è¿æ¥ä¸ä¼ è¾“æ¨¡å¼æœ‰å…³ï¼Œä¸»åŠ¨æ–¹å¼ä½¿ç”¨TCP20ç«¯å£ è¢«åŠ¨æ–¹å¼ç”±æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯è‡ªè¡Œåå•†å†³å®šã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.4 åŸŸåç³»ç»ŸDNS</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-4-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-4-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸŸåç³»ç»Ÿdns">6.4 åŸŸåç³»ç»ŸDNS</h1><h2 id="dnsä»‹ç»">1. DNSä»‹ç»</h2><ol type="1"><li>åŸŸåç³»ç»ŸDNSæ˜¯å› ç‰¹ç½‘ä½¿ç”¨çš„å‘½åç³»ç»Ÿï¼Œç”¨æ¥æŠŠä¾¿äºäººä»¬è®°å¿†çš„å…·æœ‰ç‰¹å®šå«ä¹‰çš„ä¸»æœºåï¼ˆä¾‹å¦‚www.hust.cn),è½¬æ¢ä¸ºä¾¿äºæœºå™¨å¤„ç†çš„IPåœ°å€ã€‚</li><li>å› ç‰¹ç½‘æ˜¯å¦å¯ä»¥åªä½¿ç”¨1å°DNSæœåŠ¡å™¨ï¼Ÿ<ol type="1"><li>è¿™ç§åšæ³•å¹¶ä¸å¯å–ã€‚å› ä¸ºå› ç‰¹ç½‘çš„è§„æ‘¸å¾ˆå¤§ï¼Œè¿™æ ·çš„åŸŸåæœåŠ¡å™¨è‚¯å®šä¼šå› ä¸ºè¶…è´Ÿè·è€Œæ— æ³•æ­£å¸¸å·¥ä½œï¼Œè€Œä¸”ä¸€æ—¦åŸŸåæœåŠ¡å™¨å‡ºç°æ•…éšœï¼Œæ•´ä¸ªå› ç‰¹ç½‘å°±ä¼šç˜«ç—ªã€‚</li><li>æ—©åœ¨1983å¹´ï¼Œå› ç‰¹ç½‘å°±å¼€å§‹é‡‡ç”¨å±‚æ¬¡ç»“æ„çš„å‘½åæ ‘ä½œä¸ºä¸»æœºçš„åå­—(å³åŸŸå)ï¼Œå¹¶ä½¿ç”¨åˆ†å¸ƒå¼çš„åŸŸåç³»ç»ŸDNS</li><li>DNSä½¿å¤§å¤šæ•°åŸŸåéƒ½åœ¨æœ¬åœ°è§£æï¼Œä»…å°‘é‡è§£æŠ˜éœ€è¦åœ¨å› ç‰¹ç½‘ä¸Šé€šä¿¡ï¼Œå› æ­¤ç³»ç»Ÿæ•ˆç‡å¾ˆé«˜ã€‚</li><li>ç”±äºDNSæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå³ä½¿å•ä¸ªè®¡ç®—æœºå‡ºäº†æ•…éšœï¼Œä¹Ÿä¸ä¼šå¦¨ç¢æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œ</li></ol></li><li>åŸŸåå’ŒIPåœ°å€çš„æ˜ å°„å…³ç³»å¿…é¡»ä¿å­˜åœ¨åŸŸåæœåŠ¡å™¨ä¸­ï¼Œä¾›æ‰€æœ‰å…¶ä»–åº”ç”¨æŸ¥è¯¢ã€‚æ˜¾ç„¶ä¸èƒ½å°†æ‰€æœ‰ä¿¡æ¯éƒ½å‚¨å­˜åœ¨ä¸€å°åŸŸåæœåŠ¡å™¨ä¸­ã€‚DNSä½¿ç”¨åˆ†å¸ƒåœ¨å„åœ°çš„åŸŸåæœåŠ¡å™¨æ¥å®ç°åŸŸååˆ°IPåœ°å€çš„è½¬æ¢ã€‚</li><li>DNSæŠ¥æ–‡ä½¿ç”¨è¿è¾“å±‚çš„UDPåè®®è¿›è¡Œå°è£…ï¼Œè¿è¾“å±‚ç«¯å£å·ä¸º53</li></ol><h2 id="å±‚æ¬¡æ ‘çŠ¶åŸŸåç»“æ„">2. å±‚æ¬¡æ ‘çŠ¶åŸŸåç»“æ„</h2><ol type="1"><li>å› ç‰¹ç½‘é‡‡ç”¨å±‚æ¬¡æ ‘çŠ¶ç»“æ„çš„åŸŸåç»“æ„ â€¦ä¸‰çº§åŸŸå.äºŒçº§åŸŸå.é¡¶çº§åŸŸå<ol type="1"><li>æ¯ä¸€çº§çš„åŸŸåéƒ½ç”±è‹±æ–‡å­—æ¯å’Œæ•°å­—ç»„æˆï¼Œä¸è¶…è¿‡63ä¸ªå­—ç¬¦ï¼Œä¸åŒºåˆ†å¤§å°å†™å­—æ¯ã€‚</li><li>çº§åˆ«æœ€ä½çš„åŸŸåå†™åœ¨æœ€å·¦è¾¹ï¼Œè€Œçº§åˆ«æœ€é«˜çš„é¡¶çº§åŸŸåå†™åœ¨æœ€å³è¾¹ã€‚</li><li>å®Œæ•´çš„åŸŸåä¸è¶…è¿‡255ä¸ªå­—ç¬¦ã€‚</li></ol></li><li>åŸŸåç³»ç»Ÿæ—¢ä¸è§„å®šä¸€ä¸ªåŸŸåéœ€è¦åŒ…å«å¤šå°‘ä¸ªä¸‹çº§åŸŸåï¼Œä¹Ÿä¸è§„å®šæ¯ä¸€çº§çš„åŸŸåä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚</li><li>å„çº§åŸŸåç”±å…¶ä¸Šä¸€çº§çš„åŸŸåç®¡ç†æœºæ„ç®¡ç†ï¼Œè€Œæœ€é«˜çš„é¡¶çº§åŸŸååˆ™ç”±å› ç‰¹ç½‘åç§°ä¸æ•°å­—åœ°å€åˆ†é…æœºæ„CANNè¿›è¡Œç®¡ç†ã€‚</li></ol><h3 id="åŸŸåå±‚æ¬¡åˆ’åˆ†">2.1 åŸŸåå±‚æ¬¡åˆ’åˆ†</h3><ol type="1"><li>é¡¶çº§åŸŸåTLDï¼ˆTop Level Domainï¼‰<ol type="1"><li>å›½å®¶é¡¶çº§åŸŸånTLD<ol type="1"><li>é‡‡ç”¨IS03166çš„è§„å®šã€‚å¦‚cnè¡¨ç¤ºä¸­å›½ï¼Œusè¡¨ç¤ºç¾å›½ï¼Œukè¡¨ç¤ºè‹±å›½ã€ç­‰ç­‰ã€‚</li></ol></li><li>é€šç”¨é¡¶çº§åŸŸå<ol type="1"><li>æœ€å¸¸è§çš„é€šç”¨é¡¶çº§åŸŸåæœ‰ä¸ƒä¸ªï¼Œå³ï¼šcom(å…¬å¸ä¼ä¸š)ã€net(ç½‘ç»œæœåŠ¡æœºæ„)ã€org(éè¥åˆ©æ€§ç»„ç»‡)ã€int(å›½é™…ç»„ç»‡)ã€edu(ç¾å›½æ•™è‚²ç»“æ„)ã€gov(ç¾å›½æ”¿åºœéƒ¨é—¨)ã€mil(ç¾å›½å†›äº‹éƒ¨é—¨)ã€‚</li></ol></li><li>åå‘åŸŸï¼ˆarpaï¼‰<ol type="1"><li>ç”¨äºåå‘åŸŸåè§£æï¼Œå³IPåœ°å€åå‘è§£æä¸ºåŸŸåã€‚</li></ol></li></ol></li><li>åœ¨å›½å®¶é¡¶çº§åŸŸåä¸‹æ³¨å†Œçš„äºŒçº§åŸŸåå‡ç”±è¯¥å›½å®¶è‡ªè¡Œç¡®å®šã€‚ä¾‹å¦‚ï¼Œé¡¶çº§åŸŸåä¸ºjçš„æ—¥æœ¬ï¼Œå°†å…¶æ•™è‚²å’Œä¼ä¸šæœºæ„çš„äºŒçº§åŸŸåå®šä¸ºacå’Œco,è€Œä¸ç”¨eduå’Œcomã€‚</li><li>æˆ‘å›½åˆ™å°†äºŒçº§åŸŸååˆ’åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š<ol type="1"><li>ç±»åˆ«åŸŸå<ol type="1"><li>å…±ä¸ƒä¸ªï¼šac(ç§‘ç ”æœºæ„)ã€com(å·¥ã€å•†ã€é‡‘èç­‰ä¼ä¸š)ã€edu(æ•™è‚²æœºæ„)ã€gov(æ”¿åºœéƒ¨é—¨)ã€net(æä¾›ç½‘ç»œæœåŠ¡çš„æœºæ„)ã€mil(å†›äº‹æœºæ„)å’Œorg(éè¥åˆ©æ€§ç»„ç»‡)ã€‚</li></ol></li><li>è¡Œæ”¿åŒºåŸŸå<ol type="1"><li>å…±34ä¸ªï¼Œé€‚ç”¨äºæˆ‘å›½çš„å„çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚ã€‚ä¾‹å¦‚ï¼šbä¸ºåŒ—äº¬å¸‚ã€shä¸ºä¸Šæµ·å¸‚ã€jsä¸ºæ±Ÿè‹çœï¼Œç­‰ç­‰ã€‚</li></ol></li></ol></li><li>é¡¶çº§åŸŸåç”±ICANNç®¡ç†ï¼Œé¡¶çº§åŸŸåä»¥ä¸‹çš„äºŒçº§åŸŸåï¼Œä¸‰çº§åŸŸåç­‰ï¼Œéƒ½ç”±å…¶ä¸Šä¸€çº§åŸŸåç®¡ç†æœºæ„è‡ªè¡Œç®¡ç†ã€‚</li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-4-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS/image-20241118165949003.png"></p><h3 id="åŸŸåæœåŠ¡å™¨ç±»å‹">2.2 åŸŸåæœåŠ¡å™¨ç±»å‹</h3><ul><li>åŸŸåå’ŒIPåœ°å€çš„æ˜ å°„å…³ç³»å¿…é¡»ä¿å­˜åœ¨åŸŸåæœåŠ¡å™¨ä¸­ï¼Œä¾›æ‰€æœ‰å…¶ä»–åº”ç”¨æŸ¥è¯¢ã€‚æ˜¾ç„¶ä¸èƒ½å°†æ‰€æœ‰ä¿¡æ¯éƒ½å‚¨å­˜åœ¨ä¸€å°åŸŸåæœåŠ¡å™¨ä¸­ã€‚DNSä½¿ç”¨åˆ†å¸ƒåœ¨å„åœ°çš„åŸŸåæœåŠ¡å™¨æ¥å®ç°åŸŸååˆ°IPåœ°å€çš„è½¬æ¢ã€‚</li></ul><ol type="1"><li>æ ¹åŸŸåæœåŠ¡å™¨<ol type="1"><li>æ ¹åŸŸåæœåŠ¡å™¨æ˜¯æœ€é«˜å±‚æ¬¡çš„åŸŸåæœåŠ¡å™¨ã€‚æ¯ä¸ªæ ¹åŸŸåæœåŠ¡å™¨éƒ½çŸ¥é“æ‰€æœ‰çš„é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åŸŸååŠå…¶IPåœ°å€ã€‚å› ç‰¹ç½‘ä¸Šå…±æœ‰13ä¸ªä¸åŒIPåœ°å€çš„æ ¹åŸŸåæœåŠ¡å™¨ã€‚</li><li>å°½ç®¡æˆ‘ä»¬å°†è¿™13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ä¸­çš„æ¯ä¸€ä¸ªéƒ½è§†ä¸ºå•ä¸ªçš„æœåŠ¡å™¨ï¼Œä½†â€œæ¯å°æœåŠ¡å™¨â€å®é™…ä¸Šæ˜¯ç”±è®¸å¤šåˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°çš„è®¡ç®—æœºæ„æˆçš„æœåŠ¡å™¨ç¾¤é›†ã€‚å½“æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè·¯ç”±å™¨å°±æŠŠæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡è½¬å‘åˆ°ç¦»è¿™ä¸ªDNSå®¢æˆ·æœ€è¿‘çš„ä¸€ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ã€‚è¿™å°±åŠ å¿«äº†DNSçš„æŸ¥è¯¢è¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ›´åˆç†åœ°åˆ©ç”¨äº†å› ç‰¹ç½‘çš„èµ„æºã€‚</li><li>æ ¹åŸŸåæœåŠ¡å™¨é€šå¸¸å¹¶ä¸ç›´æ¥å¯¹åŸŸåè¿›è¡Œè§£æï¼Œè€Œæ˜¯è¿”å›è¯¥åŸŸåæ‰€å±é¡¶çº§åŸŸåçš„é¡¶çº§åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ã€‚</li></ol></li><li>é¡¶çº§åŸŸåæœåŠ¡å™¨<ol type="1"><li>è¿™äº›åŸŸåæœåŠ¡å™¨è´Ÿè´£ç®¡ç†åœ¨è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨æ³¨å†Œçš„æ‰€æœ‰äºŒçº§åŸŸåã€‚å½“æ”¶åˆ°DNSæŸ¥è¯¢è¯·æ±‚æ—¶å°±ç»™å‡ºç›¸åº”çš„å›ç­”ï¼ˆå¯èƒ½æ˜¯æœ€åçš„ç»“æœï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸‹ä¸€çº§æƒé™åŸŸåæœåŠ¡å™¨çš„Påœ°å€)ã€‚</li></ol></li><li>æƒé™åŸŸåæœåŠ¡å™¨<ol type="1"><li>è¿™äº›åŸŸåæœåŠ¡å™¨è´Ÿè´£ç®¡ç†æŸä¸ªåŒºçš„åŸŸåã€‚æ¯ä¸€ä¸ªä¸»æœºçš„åŸŸåéƒ½å¿…é¡»åœ¨æŸä¸ªæƒé™åŸŸåæœåŠ¡å™¨å¤„æ³¨å†Œç™»è®°ã€‚å› æ­¤æƒé™åŸŸåæœåŠ¡å™¨çŸ¥é“å…¶ç®¡è¾–çš„åŸŸåä¸IPåœ°å€çš„æ˜ å°„å…³ç³»ã€‚</li><li>å¦å¤–ï¼Œæƒé™åŸŸåæœåŠ¡å™¨è¿˜çŸ¥é“å…¶ä¸‹çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€</li></ol></li><li>æœ¬åœ°åŸŸåæœåŠ¡å™¨<ol type="1"><li>æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸å±äºä¸Šè¿°çš„åŸŸåæœåŠ¡å™¨çš„ç­‰çº§ç»“æ„ã€‚å½“ä¸€ä¸ªä¸»æœºå‘å‡ºDNSè¯·æ±‚æŠ¥æ–‡æ—¶ï¼Œè¿™ä¸ªæŠ¥æ–‡å°±é¦–å…ˆè¢«é€å¾€è¯¥ä¸»æœºçš„æœ¬åœ°åŸŸåæœåŠ¡å™¨ã€‚</li><li>æœ¬åœ°åŸŸåæœåŠ¡å™¨èµ·ç€ä»£ç†çš„ä½œç”¨ï¼Œä¼šå°†è¯¥æŠ¥æ–‡è½¬å‘åˆ°ä¸Šè¿°çš„åŸŸåæœåŠ¡å™¨çš„ç­‰çº§ç»“æ„ä¸­ã€‚</li><li>æ¯ä¸€ä¸ªå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISPï¼Œä¸€ä¸ªå¤§å­¦ä¸€ä¸ªå¤§å­¦é‡Œçš„å­¦é™¢ï¼Œéƒ½å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªæœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œå®ƒæœ‰æ—¶ä¹Ÿç§°ä¸ºé»˜è®¤åŸŸåæœåŠ¡å™¨ã€‚æœ¬åœ°åŸŸåæœåŠ¡å™¨ç¦»ç”¨æˆ·è¾ƒè¿‘ï¼Œä¸€èˆ¬ä¸è¶…è¿‡å‡ ä¸ªè·¯ç”±å™¨çš„è·ç¦»ï¼Œä¹Ÿæœ‰å¯èƒ½å°±åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ã€‚</li><li>æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„IPåœ°å€éœ€è¦ç›´æ¥é…ç½®åœ¨éœ€è¦åŸŸåè§£æçš„ä¸»æœºä¸­ï¼Œ</li></ol></li></ol><h2 id="dnsåŸŸåè§£æä¸¤ç§æ–¹å¼">3. DNSåŸŸåè§£æä¸¤ç§æ–¹å¼</h2><ul><li>é€’å½’è§£æå’Œè¿­ä»£è§£æ</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-4-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS/image-20230718233234205.png"></p><ol type="1"><li>ä¸ºäº†æé«˜DNSçš„æŸ¥è¯¢æ•ˆç‡ï¼Œå¹¶å‡è½»æ ¹åŸŸåæœåŠ¡å™¨çš„è´Ÿè·å’Œå‡å°‘å› ç‰¹ç½‘ä¸Šçš„DNSæŸ¥è¯¢æŠ¥æ–‡æ•°é‡ï¼Œåœ¨åŸŸåæœåŠ¡å™¨å’Œä¸»æœºä¸­å¹¿æ³›åœ°ä½¿ç”¨äº†é«˜é€Ÿç¼“å­˜ã€‚</li><li>DNSæŠ¥æ–‡ä½¿ç”¨è¿è¾“å±‚çš„UDPåè®®è¿›è¡Œå°è£…ï¼Œè¿è¾“å±‚ç«¯å£å·ä¸º53</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.3 åŠ¨æ€ä¸»æœºé…ç½®åè®®DHCP</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-3-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-3-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP/</url>
    
    <content type="html"><![CDATA[<h1 id="åŠ¨æ€ä¸»æœºé…ç½®åè®®dhcp">6.3 åŠ¨æ€ä¸»æœºé…ç½®åè®®DHCP</h1><ul><li>åŠ¨æ€ä¸»æœºé…ç½®åè®®DHCP(Dynamic Host ConfigurationProtocol))æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œç§°ä¸ºå³æ’å³ç”¨è¿ç½‘ã€‚</li><li>è¿™ç§æœºåˆ¶å…è®¸ä¸€å°è®¡ç®—æœºåŠ å…¥æ–°ç½‘ç»œæ—¶å¯è‡ªåŠ¨è·å–Påœ°å€ç­‰ç½‘ç»œé…ç½®ä¿¡æ¯è€Œä¸ç”¨æ‰‹å·¥å‚ä¸ã€‚</li></ul><ol type="1"><li><p>DHCPæŠ¥æ–‡åœ¨è¿è¾“å±‚ä½¿ç”¨UDPåè®®å°è£…</p><ol type="1"><li>DHCPå®¢æˆ·ä½¿ç”¨çš„UDPç«¯å£å·ä¸º68</li><li>DHCPæœåŠ¡å™¨ä½¿ç”¨çš„UDPç«¯å£å·ä¸º67</li></ol></li><li><p>å®¢æˆ·ç«¯å‘DHCPæœåŠ¡å™¨ç”³è¯·IPçš„å…¨è¿‡ç¨‹</p></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-3-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP/image-20241118164104548.png"></p><ul><li>ä½¿ç”¨ARPæ£€æµ‹æ‰€åˆ†é…åˆ°çš„IPåœ°å€æ˜¯å¦å·²è¢«ç½‘ç»œä¸­å…¶ä»–ä¸»æœºå ç”¨ï¼š<ul><li>è‹¥è¢«å ç”¨ï¼šç»™DHCPæœåŠ¡å™¨å‘é€â€œDHCPDECLINEâ€æŠ¥æ–‡æ•¬é”€IPåœ°å€ç§Ÿçº¦ï¼Œå¹¶é‡æ–°å‘é€â€œDHCP DISCOVERâ€æŠ¥æ–‡ï¼›</li><li>è‹¥æœªè¢«å ç”¨ï¼šå¯ä»¥ä½¿ç”¨ç§Ÿçº¦ä¸­çš„Påœ°å€ä¸ç½‘ç»œä¸­å…¶ä»–ä¸»æœºé€šä¿¡äº†ã€‚</li></ul></li><li>ä½¿ç”¨ARPç¡®ä¿æ‰€é€‰IPåœ°å€æœªè¢«ç½‘ç»œä¸­å…¶ä»–ä¸»æœºå ç”¨</li></ul><table><thead><tr><th>æŠ¥æ–‡</th><th>åŒ…å«å­—æ®µ</th></tr></thead><tbody><tr><td>DHCP DISCOVER</td><td>äº‹åŠ¡IDï¼ŒDHCPçš„MACåœ°å€</td></tr><tr><td>DHCP OFFER</td><td>äº‹åŠ¡IDï¼Œé…ç½®ä¿¡æ¯ï¼šIPåœ°å€ï¼Œå­ç½‘æ©ç ï¼Œåœ°å€ç§ŸæœŸï¼Œé»˜è®¤ç½‘å…³ï¼ŒDNSæœåŠ¡å™¨</td></tr><tr><td>DHCP REQUEST</td><td>äº‹åŠ¡IDï¼ŒDHCPçš„MACåœ°å€ï¼Œæ¥å—çš„ç§Ÿçº¦ä¸­çš„IPåœ°å€ï¼Œæä¾›æ­¤ç§Ÿçº¦çš„DHCPæœåŠ¡å™¨çš„IPåœ°å€</td></tr></tbody></table><ol start="3" type="1"><li>DHCPä¸­ç»§ä»£ç†</li></ol><blockquote><p>è·¯ç”±å™¨ä¸ä¼šè½¬å‘æ™®é€šçš„å¹¿æ’­åˆ†ç»„ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›åœ¨æ¯ä¸ªç½‘ç»œä¸­éƒ½é…ç½®ä¸€å°DHCPæœåŠ¡å™¨ï¼Œæ‰€ä»¥DHCPä¸­ç»§ä»£ç†å‡ºç°äº†ã€‚</p></blockquote><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-3-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEDHCP/image-20241118164332043.png"></p><ul><li>DHCP DISCOVER:DHCPå‘ç°æŠ¥æ–‡</li><li>DHCP OFFER:DHCPæä¾›æŠ¥æ–‡</li><li>DHCP REQUEST:DHCPè¯·æ±‚æŠ¥æ–‡</li><li>DHCP ACK:DHCPç¡®è®¤æŠ¥æ–‡</li><li>DHCP NACK:DHCPå¦è®¤æŠ¥æ–‡</li><li>DHCP RELEASE:DHCPé‡Šæ”¾æŠ¥æ–‡</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.2 å®¢æˆ·æœåŠ¡å™¨æ–¹å¼å’Œå¯¹ç­‰æ–¹å¼</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-2-%E5%AE%A2%E6%88%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F%E5%92%8C%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-2-%E5%AE%A2%E6%88%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F%E5%92%8C%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="å®¢æˆ·æœåŠ¡å™¨æ–¹å¼cså’Œå¯¹ç­‰æ–¹å¼p2pæ–¹å¼">6.2å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ï¼ˆC/Sï¼‰å’Œå¯¹ç­‰æ–¹å¼ï¼ˆP2Pæ–¹å¼ï¼‰</h1><ul><li>ç½‘ç»œåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å¤„äºç½‘ç»œè¾¹ç¼˜çš„ä¸åŒçš„ç«¯ç³»ç»Ÿä¸Šï¼Œé€šè¿‡å½¼æ­¤é—´çš„é€šä¿¡æ¥å…±åŒå®ŒæˆæŸé¡¹ä»»åŠ¡ã€‚</li><li>å¼€å‘ä¸€ç§æ–°çš„ç½‘ç»œåº”ç”¨é¦–å…ˆè¦è€ƒè™‘çš„é—®é¢˜å°±æ˜¯ç½‘ç»œåº”ç”¨ç¨‹åºåœ¨å„ç§ç«¯ç³»ç»Ÿä¸Šçš„ç»„ç»‡æ–¹å¼å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚ç›®å‰æµè¡Œçš„ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š<ul><li>å®¢æˆ·/æœåŠ¡å™¨(Client/Server,C/S)æ–¹å¼</li><li>å¯¹ç­‰(Peer-to-Peer,P2P)æ–¹å¼</li></ul></li></ul><h2 id="å®¢æˆ·æœåŠ¡å™¨clientservercsæ–¹å¼">1.å®¢æˆ·/æœåŠ¡å™¨(Client/Server,C/S)æ–¹å¼</h2><ul><li>C/Sæ–¹å¼<ul><li>å®¢æˆ·å’ŒæœåŠ¡å™¨æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ã€‚</li><li>å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼æ‰€æè¿°çš„æ˜¯è¿›ç¨‹ä¹‹é—´æœåŠ¡å’Œè¢«æœåŠ¡çš„å…³ç³»ã€‚</li><li>å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ã€‚</li><li>æœåŠ¡å™¨æ€»æ˜¯å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¹¶ç­‰å¾…å®¢æˆ·çš„æœåŠ¡è¯·æ±‚ã€‚æœåŠ¡å™¨å…·æœ‰å›ºå®šç«¯å£å·ï¼ˆä¾‹å¦‚HTTPæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£å·ä¸º80)ï¼Œè€Œè¿è¡ŒæœåŠ¡å™¨çš„ä¸»æœºä¹Ÿå…·æœ‰å›ºå®šçš„Påœ°å€ã€‚</li></ul></li><li>C/Sæ–¹å¼æ˜¯å› ç‰¹ç½‘ä¸Šä¼ ç»Ÿçš„ã€åŒæ—¶ä¹Ÿæ˜¯æœ€æˆç†Ÿçš„æ–¹å¼ï¼Œå¾ˆå¤šæˆ‘ä»¬ç†Ÿæ‚‰çš„ç½‘ç»œåº”ç”¨é‡‡ç”¨çš„éƒ½æ˜¯C/Sæ–¹å¼ã€‚åŒ…æ‹¬ä¸‡ç»´ç½‘WWWã€ç”µå­é‚®ä»¶ã€æ–‡ä»¶ä¼ è¾“FTPç­‰ã€‚</li><li>åŸºäºC/Sæ–¹å¼çš„åº”ç”¨æœåŠ¡é€šå¸¸æ˜¯æœåŠ¡é›†ä¸­å‹çš„ï¼Œå³åº”ç”¨æœåŠ¡é›†ä¸­åœ¨ç½‘ç»œä¸­æ¯”å®¢æˆ·è®¡ç®—æœºå°‘å¾—å¤šçš„æœåŠ¡å™¨è®¡ç®—æœºä¸Šã€‚<ul><li>ç”±äºä¸€å°æœåŠ¡å™¨è®¡ç®—æœºè¦ä¸ºå¤šä¸ªå®¢æˆ·æœºæä¾›æœåŠ¡ï¼Œåœ¨C/Såº”ç”¨ä¸­ï¼Œå¸¸ä¼šå‡ºç°æœåŠ¡å™¨è®¡ç®—æœºè·Ÿä¸ä¸Šä¼—å¤šå®¢æˆ·æœºè¯·æ±‚çš„æƒ…å†µã€‚</li><li>ä¸ºæ­¤ï¼Œåœ¨C/Såº”ç”¨ä¸­ï¼Œå¸¸ç”¨è®¡ç®—æœºç¾¤é›†ï¼ˆæˆ–æœåŠ¡å™¨åœºï¼‰æ„å»ºä¸€ä¸ªå¼ºå¤§çš„è™šæ‹ŸæœåŠ¡å™¨ã€‚</li></ul></li></ul><h2 id="å¯¹ç­‰æ–¹å¼p2pæ–¹å¼">2. å¯¹ç­‰æ–¹å¼ï¼ˆP2Pæ–¹å¼ï¼‰</h2><ul><li><p>P2Pæ–¹å¼</p><ul><li>åœ¨P2Pæ–¹å¼ä¸­ï¼Œæ²¡æœ‰å›ºå®šçš„æœåŠ¡è¯·æ±‚è€…å’ŒæœåŠ¡æä¾›è€…ï¼Œåˆ†å¸ƒåœ¨ç½‘ç»œè¾¹ç¼˜å„ç«¯ç³»ç»Ÿä¸­çš„åº”ç”¨è¿›ç¨‹æ˜¯å¯¹ç­‰çš„ï¼Œè¢«ç§°ä¸ºå¯¹ç­‰æ–¹ã€‚</li><li>å¯¹ç­‰æ–¹ç›¸äº’ä¹‹é—´ç›´æ¥é€šä¿¡ï¼Œæ¯ä¸ªå¯¹ç­‰æ–¹æ—¢æ˜¯æœåŠ¡çš„è¯·æ±‚è€…ï¼Œåˆæ˜¯æœåŠ¡çš„æä¾›è€…ã€‚</li></ul></li><li><p>ç›®å‰ï¼Œåœ¨å› ç‰¹ç½‘ä¸Šæµè¡Œçš„P2Påº”ç”¨ä¸»è¦åŒ…æ‹¬P2Pæ–‡ä»¶å…±äº«ã€å³æ—¶é€šä¿¡ã€P2Pæµåª’ä½“ã€åˆ†å¸ƒå¼å­˜å‚¨ç­‰ã€‚</p></li><li><p>åŸºäºP2Pçš„åº”ç”¨æ˜¯æœåŠ¡åˆ†æ•£å‹çš„ï¼Œå› ä¸ºæœåŠ¡ä¸æ˜¯é›†ä¸­åœ¨å°‘æ•°å‡ ä¸ªæœåŠ¡å™¨è®¡ç®—æœºä¸­ï¼Œè€Œæ˜¯åˆ†æ•£åœ¨å¤§é‡å¯¹ç­‰è®¡ç®—æœºä¸­ï¼Œè¿™äº›è®¡ç®—æœºå¹¶ä¸ä¸ºæœåŠ¡æä¾›å•†æ‰€æœ‰ï¼Œè€Œæ˜¯ä¸ºä¸ªäººæ§åˆ¶çš„æ¡Œé¢è®¡ç®—æœºå’Œç¬”è®°æœ¬ç”µè„‘ï¼Œå®ƒä»¬é€šå¸¸ä½äºä½å®…ã€æ ¡å›­å’ŒåŠå…¬å®¤ä¸­ã€‚</p></li><li><p>P2Pæ–¹å¼çš„æœ€çªå‡ºç‰¹æ€§ä¹‹ä¸€å°±æ˜¯å®ƒçš„å¯æ‰©å±•æ€§ã€‚å› ä¸ºç³»ç»Ÿæ¯å¢åŠ ä¸€ä¸ªå¯¹ç­‰æ–¹ï¼Œä¸ä»…å¢åŠ çš„æ˜¯æœåŠ¡çš„è¯·æ±‚è€…ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†æœåŠ¡çš„æä¾›è€…ï¼Œç³»ç»Ÿæ€§èƒ½ä¸ä¼šå› è§„æ‘¸çš„å¢å¤§è€Œé™ä½ã€‚</p></li><li><p>P2Pæ–¹å¼å…·æœ‰æˆæœ¬ä¸Šçš„ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒé€šå¸¸ä¸éœ€è¦åºå¤§çš„æœåŠ¡å™¨è®¾æ–½å’ŒæœåŠ¡å™¨å¸¦å®½ã€‚ä¸ºäº†é™ä½æˆæœ¬ï¼ŒæœåŠ¡æä¾›å•†å¯¹äºå°†P2Pæ–¹å¼ç”¨äºåº”ç”¨çš„å…´è¶£è¶Šæ¥è¶Šå¤§ã€‚</p></li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-2-%E5%AE%A2%E6%88%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F%E5%92%8C%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F/image-20241118162748601.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>6.1 åº”ç”¨å±‚æ¦‚è¿°</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="åº”ç”¨å±‚">6.1 åº”ç”¨å±‚</h1><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6-1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0/image-20241118161627816.png"></p><ul><li>åº”ç”¨å±‚æ˜¯è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„çš„æœ€é¡¶å±‚ï¼Œæ˜¯è®¾è®¡å’Œå»ºç«‹è®¡ç®—æœºç½‘ç»œçš„æœ€ç»ˆç›®çš„ï¼Œä¹Ÿæ˜¯è®¡ç®—æœºç½‘ç»œä¸­å‘å±•æœ€å¿«çš„éƒ¨åˆ†ã€‚<ul><li>æ—©æœŸåŸºäºæ–‡æœ¬çš„åº”ç”¨ï¼ˆç”µå­é‚®ä»¶ã€è¿œç¨‹ç™»ç»¿ã€æ–‡ä»¶ä¼ è¾“ã€æ–°é—»ç»„ï¼‰<ul><li>20ä¸–çºª90å¹´ä»£å°†å› ç‰¹ç½‘å¸¦å…¥å¹²å®¶ä¸‡æˆ·çš„ä¸‡ç»´ç½‘WWW</li></ul></li><li>å½“ä»Šæµè¡Œçš„å³æ—¶é€šä¿¡ã€P2Pæ–‡ä»¶å…±äº«åŠå„ç§éŸ³è§†é¢‘åº”ç”¨è®¡ç®—è®¾å¤‡çš„å°å‹åŒ–å’Œâ€œæ— å¤„ä¸åœ¨â€ï¼Œå®½å¸¦ä½å®…æ¥å…¥å’Œæ— çº¿æ¥å…¥çš„æ—¥ç›Šæ™®åŠå’Œè¿…é€Ÿå‘å±•ï¼Œä¸ºæœªæ¥æ›´å¤šçš„æ–°å‹åº”ç”¨æä¾›äº†å¹¿é˜”çš„èˆå°ã€‚</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.9 TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨æ ¼å¼</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-9-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-9-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="tcpæŠ¥æ–‡æ®µçš„é¦–éƒ¨æ ¼å¼">5.9 TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨æ ¼å¼</h1><ul><li>ä¸ºäº†å®ç°å¯é ä¼ è¾“ï¼ŒTCPé‡‡ç”¨äº†é¢å‘å­—èŠ‚æµçš„æ–¹å¼ã€‚</li><li>ä½†TCPåœ¨å‘é€æ•°æ®æ—¶ï¼Œæ˜¯ä»å‘é€ç¼“å­˜å–å‡ºä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨å­—èŠ‚å¹¶ç»™å…¶æ·»åŠ ä¸€ä¸ªé¦–éƒ¨ä½¿ä¹‹æˆä¸ºTCPæŠ¥æ–‡æ®µåè¿›è¡Œå‘é€ã€‚<ul><li>ä¸€ä¸ªTCPæŠ¥æ–‡æ®µç”±é¦–éƒ¨å’Œæ•°æ®è½½è·ä¸¤éƒ¨åˆ†æ„æˆï¼›</li><li>TCPçš„å…¨éƒ¨åŠŸèƒ½éƒ½ä½“ç°åœ¨å®ƒé¦–éƒ¨ä¸­å„å­—æ®µçš„ä½œç”¨ã€‚</li></ul></li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-9-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/image-20241118153709722.png"></p><table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æºç«¯å£</td><td>å 16æ¯”ç‰¹ï¼Œå†™å…¥æºç«¯å£å·ï¼Œç”¨æ¥æ ‡è¯†å‘é€è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹</td></tr><tr><td>ç›®çš„ç«¯å£</td><td>å 16æ¯”ç‰¹ï¼Œå†™å…¥ç›®çš„ç«¯å£å·ï¼Œç”¨æ¥æ ‡è¯†æ¥æ”¶è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹</td></tr><tr><td>åºå·</td><td>å 32æ¯”ç‰¹ï¼Œå–å€¼èŒƒå›´[0,2<sup>32</sup>-1]ï¼Œåºå·å¢åŠ åˆ°æœ€åä¸€ä¸ªåï¼Œä¸‹ä¸€ä¸ªåºå·å°±åˆå›åˆ°0ã€‚<br>æŒ‡å‡ºæœ¬TCPæŠ¥æ–‡æ®µæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚</td></tr><tr><td>ç¡®è®¤å·</td><td>å 32æ¯”ç‰¹ï¼Œå–å€¼èŒƒå›´[0,2<sup>32</sup>-1]ï¼Œç¡®è®¤å·å¢åŠ åˆ°æœ€åä¸€ä¸ªåï¼Œä¸‹ä¸€ä¸ªç¡®è®¤å·å°±åˆå›åˆ°0ã€‚<br>æŒ‡å‡ºæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªTCPæŠ¥æ–‡æ®µçš„æ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹ä¹‹å‰æ”¶åˆ°çš„æ‰€æœ‰æ•°æ®çš„ç¡®è®¤ã€‚</td></tr><tr><td>ç¡®è®¤æ ‡å¿—ä½ACK</td><td>å–å€¼ä¸º1æ—¶ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆï¼šå–å€¼ä¸º0æ—¶ç¡®è®¤å·å­—æ®µæ— æ•ˆ</td></tr><tr><td>æ•°æ®åç§»</td><td>å 4æ¯”ç‰¹ï¼Œå¹¶ä»¥4å­—èŠ‚ä¸ºå•ä½ã€‚<br>ç”¨æ¥æŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„æ•°æ®è½½è·éƒ¨åˆ†çš„èµ·å§‹å¤„è·ç¦»TCPæŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚</td></tr><tr><td>ä¿ç•™</td><td>å 6æ¯”ç‰¹ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ï¼Œä½†ç›®å‰åº”ç½®ä¸º0ã€‚</td></tr><tr><td>çª—å£</td><td>å 16æ¯”ç‰¹ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚æŒ‡å‡ºå‘é€æœ¬æŠ¥æ–‡æ®µçš„ä¸€æ–¹çš„æ¥æ”¶çª—å£ã€‚<br>çª—å£å€¼ä½œä¸ºæ¥æ”¶æ–¹è®©å‘é€æ–¹è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ã€‚<br>è¿™æ˜¯ä»¥æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›æ¥æ§åˆ¶å‘é€æ–¹çš„å‘é€èƒ½åŠ›ï¼Œç§°ä¸ºæµé‡æ§åˆ¶ã€‚</td></tr><tr><td>æ ¡éªŒå’Œ</td><td>å 16æ¯”ç‰¹ï¼Œæ£€æŸ¥èŒƒå›´åŒ…æ‹¬TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨å’Œæ•°æ®è½½è·ä¸¤éƒ¨åˆ†ã€‚<br>åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œè¦åœ¨TCPæŠ¥æ–‡æ®µçš„å‰é¢åŠ ä¸Š12å­—èŠ‚çš„ä¼ªé¦–éƒ¨ã€‚</td></tr><tr><td>åŒæ­¥æ ‡å¿—ä½SYN</td><td>åœ¨TCPè¿æ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·</td></tr><tr><td>ç»ˆæ­¢æ ‡å¿—ä½FIN</td><td>ç”¨æ¥é‡Šæ”¾TCPè¿æ¥ã€‚</td></tr><tr><td>å¤ä½æ ‡å¿—ä½RST</td><td>ç”¨æ¥å¤ä½TCPè¿æ¥ã€‚<br>å½“RST=1æ—¶ï¼Œè¡¨æ˜TCPè¿æ¥å‡ºç°äº†å¼‚å¸¸ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ã€‚<br>RSTç½®1è¿˜ç”¨æ¥æ‹’ç»ä¸€ä¸ªéæ³•çš„æŠ¥æ–‡æ®µæˆ–æ‹’ç»æ‰“å¼€ä¸€ä¸ªTCPè¿æ¥ã€‚</td></tr><tr><td>æ¨é€æ ‡å¿—ä½PSH</td><td>æ¥æ”¶æ–¹çš„TCPæ”¶åˆ°è¯¥æ ‡å¿—ä½ä¸º1çš„æŠ¥æ–‡æ®µä¼šå°½å¿«ä¸Šäº¤åº”ç”¨è¿›ç¨‹ã€‚<br>è€Œä¸å¿…ç­‰åˆ°æ¥æ”¶ç¼“å­˜éƒ½å¡«æ»¡åå†å‘ä¸Šäº¤ä»˜ã€‚</td></tr><tr><td>ç´§æ€¥æ ‡å¿—ä½URG</td><td>å–å€¼ä¸º1æ—¶ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆï¼šå–å€¼ä¸º0æ—¶ç´§æ€¥æŒ‡é’ˆå­—æ®µæ— æ•ˆã€‚</td></tr><tr><td>ç´§æ€¥æŒ‡é’ˆ</td><td>å 16æ¯”ç‰¹ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œç”¨æ¥æŒ‡æ˜ç´§æ€¥æ•°æ®çš„é•¿åº¦ã€‚</td></tr><tr><td>é€‰é¡¹</td><td>1. æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSSé€‰é¡¹ï¼šTCPæŠ¥æ–‡æ®µæ•°æ®è½½è·éƒ¨åˆ†çš„æœ€å¤§é•¿åº¦ã€‚<br>2.çª—å£æ‰©å¤§é€‰é¡¹ï¼šä¸ºäº†æ‰©å¤§çª—å£ï¼ˆæé«˜ååç‡ï¼‰<br>3. æ—¶é—´æˆ³é€‰é¡¹ï¼š<br> a.ç”¨æ¥è®¡ç®—å¾€è¿”æ—¶é—´RTT<br> b.ç”¨äºå¤„ç†åºå·è¶…èŒƒå›´çš„æƒ…å†µï¼Œåˆç§°ä¸ºé˜²æ­¢åºå·ç»•å›PAWSã€‚<br>4.é€‰æ‹©ç¡®è®¤é€‰é¡¹<br>é€‰é¡¹çš„ä½œç”¨æ˜¯ä¸ºäº†æ‰©å±•TCPæŠ¥æ–‡æ®µé¦–éƒ¨çš„åŠŸèƒ½</td></tr><tr><td>å¡«å……</td><td>ç”±äºé€‰é¡¹çš„é•¿åº¦å¯å˜ï¼Œå› æ­¤ä½¿ç”¨å¡«å……æ¥ç¡®ä¿æŠ¥æ–‡æ®µé¦–éƒ¨èƒ½è¢«4æ•´é™¤<br>(å› ä¸ºæ•°æ®åç§»å­—æ®µï¼Œä¹Ÿå°±æ˜¯é¦–éƒ¨é•¿åº¦å­—æ®µï¼Œæ˜¯ä»¥4å­—èŠ‚ä¸ºå•ä½çš„)</td></tr></tbody></table><ul><li>ç´§æ€¥æ•°æ®ï¼š<ul><li>å½“å‘é€æ–¹æœ‰ç´§æ€¥æ•°æ®æ—¶ï¼Œå¯å°†ç´§æ€¥æ•°æ®æ’é˜Ÿåˆ°å‘é€ç¼“å­˜çš„æœ€å‰é¢ï¼Œå¹¶ç«‹åˆ»å°è£…åˆ°ä¸€ä¸ªTCPæŠ¥æ–‡æ®µä¸­è¿›è¡Œå‘é€ã€‚</li><li>ç´§æ€¥æŒ‡é’ˆä¼šæŒ‡å‡ºæœ¬æŠ¥æ–‡æ®µæ•°æ®è½½è·éƒ¨åˆ†åŒ…å«äº†å¤šé•¿çš„ç´§æ€¥æ•°æ®ï¼Œç´§æ€¥æ•°æ®ä¹‹åæ˜¯æ™®é€šæ•°æ®ã€‚</li><li>æ¥æ”¶æ–¹å°†ç´§æ€¥æ•°æ®éƒ¨åˆ†å–å‡ºï¼Œå¹¶ç›´æ¥ä¸Šäº¤åº”ç”¨ç¨‹åºï¼Œè€Œä¸å¿…åœ¨æ¥å—ç¼“å­˜ä¸­æ’é˜Ÿã€‚</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.8 TCPçš„è¿è¾“è¿æ¥ç®¡ç†</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="tcpçš„è¿è¾“è¿æ¥ç®¡ç†">5.8 TCPçš„è¿è¾“è¿æ¥ç®¡ç†</h1><ul><li>TCPæ˜¯é¢å‘è¿æ¥çš„åè®®ï¼Œå®ƒåŸºäºè¿è¾“è¿æ¥æ¥ä¼ é€TCPæŠ¥æ–‡æ®µã€‚</li><li>TCPè¿è¾“è¿æ¥çš„å»ºç«‹å’Œé‡Šæ”¾æ˜¯æ¯ä¸€æ¬¡é¢å‘è¿æ¥çš„é€šä¿¡ä¸­å¿…ä¸å¯å°‘çš„è¿‡ç¨‹ã€‚</li><li>TCPè¿è¾“è¿æ¥æœ‰ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š<ul><li>å»ºç«‹TCPè¿æ¥</li><li>æ•°æ®ä¼ é€</li><li>é‡Šæ”¾TCPè¿æ¥</li></ul></li><li>TCPçš„è¿è¾“è¿æ¥ç®¡ç†å°±æ˜¯ä½¿è¿è¾“è¿æ¥çš„å»ºç«‹å’Œé‡Šæ”¾éƒ½èƒ½æ­£å¸¸åœ°è¿›è¡Œã€‚</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/image-20241118150137225.png"></p><h2 id="tcpçš„è¿æ¥å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹">1. TCPçš„è¿æ¥å»ºç«‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰</h2><blockquote><p>TCPçš„è¿æ¥å»ºç«‹è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol type="1"><li>ä½¿TCPåŒæ–¹èƒ½å¤Ÿç¡®çŸ¥å¯¹æ–¹çš„å­˜åœ¨</li><li>ä½¿TCPåŒæ–¹èƒ½å¤Ÿåå•†ä¸€äº›å‚æ•°ï¼ˆå¦‚æœ€å¤§çª—å£å€¼ã€æ˜¯å¦ä½¿ç”¨çª—å£æ‰©å¤§é€‰é¡¹å’Œæ—¶é—´æˆ³é€‰é¡¹ä»¥åŠæœåŠ¡è´¨é‡ç­‰ï¼‰</li><li>ä½¿TCPåŒæ–¹èƒ½å¤Ÿå¯¹è¿è¾“å®ä½“èµ„æºï¼ˆå¦‚ç¼“å­˜å¤§å°ã€è¿æ¥è¡¨ä¸­çš„é¡¹ç›®ç­‰ï¼‰è¿›è¡Œåˆ†é…ã€‚</li></ol></blockquote><ol type="1"><li><p>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥çš„è¿‡ç¨‹</p><blockquote><p>ä¹Ÿå°±æ˜¯ä½¿ç”¨ä¸‰ä¸ªTCPæŠ¥æ–‡å»ºç«‹è¿æ¥</p><ul><li>ä¼ è¾“æ§åˆ¶å—<ul><li>TCPè¿æ¥è¡¨</li><li>æŒ‡å‘å‘é€å’Œæ¥æ”¶ç¼“å­˜çš„æŒ‡é’ˆ</li><li>æŒ‡å‘é‡ä¼ é˜Ÿåˆ—çš„æŒ‡é’ˆ</li><li>å½“å‰çš„å‘é€å’Œæ¥æ”¶åºå·</li></ul></li></ul></blockquote><figure><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/image-20230718175005023.png" alt="image-20230718175005023"><figcaption aria-hidden="true">image-20230718175005023</figcaption></figure></li><li><p>ä¸¤æŠ¥æ–‡å»ºç«‹è¿æ¥ä¼šå‘ç”Ÿä»¥ä¸‹é—®é¢˜ <img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/image-20230718175045894.png" alt="image-20230718175045894"></p></li><li><p>æ³¨æ„(1)TCPçš„æ ‡å‡†è§„å®šï¼ŒSYN=1çš„æŠ¥æ–‡æ®µä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·ã€‚(2)TCPçš„æ ‡å‡†è§„å®šï¼Œæ™®é€šçš„ç¡®è®¤æŠ¥æ–‡æ®µå¦‚æœä¸æºå¸¦æ•°æ®ï¼Œåˆ™ä¸æ¶ˆè€—åºå·ã€‚</p></li></ol><h2 id="tcpçš„è¿æ¥é‡Šæ”¾å››æ¬¡æŒ¥æ‰‹">2. TCPçš„è¿æ¥é‡Šæ”¾ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰</h2><ol type="1"><li><p>å››æŠ¥æ–‡æŒ¥æ‰‹è¿‡ç¨‹ <img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/image-20230718182458129.png" alt="image-20230718182458129"></p></li><li><p>è‹¥ä¸ç­‰å¾…2MSLåˆ™æœ‰å¯èƒ½å‘ç”Ÿä»¥ä¸‹æƒ…å†µ</p><blockquote><p>æœ€åä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ä¸¢å¤±ï¼Œå¯¼è‡´æœåŠ¡å™¨è¿›ç¨‹é™·å…¥æœ€åç¡®å®šçŠ¶æ€ï¼Œæ— æ³•è¿›å…¥å…³é—­çŠ¶æ€</p></blockquote><figure><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/image-20230718182524772.png" alt="image-20230718182524772"><figcaption aria-hidden="true">image-20230718182524772</figcaption></figure></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86/image-20241118153322909.png"></p><ul><li>TCPæœåŠ¡å™¨è¿›ç¨‹æ¯æ”¶åˆ°ä¸€æ¬¡TCPå®¢æˆ·è¿›ç¨‹çš„æ•°æ®ï¼Œå°±é‡æ–°è®¾ç½®å¹¶å¯åŠ¨ä¿æ´»è®¡æ—¶å™¨(2å°æ—¶å®šæ—¶)</li><li>è‹¥ä¿æ´»è®¡æ—¶å™¨å®šæ—¶å‘¨æœŸå†…æœªæ”¶åˆ°TCPå®¢æˆ·è¿›ç¨‹å‘æ¥çš„æ•°æ®ï¼Œåˆ™å½“ä¿æ´»è®¡æ—¶å™¨åˆ°æ—¶åï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹å°±å‘TPå®¢æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥ååˆ™æ¯éš”75ç§’é’Ÿå‘é€ä¸€æ¬¡ã€‚è‹¥ä¸€è¿å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µåä»æ— TCPå®¢æˆ·è¿›ç¨‹çš„å“åº”ï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹å°±è®¤ä¸ºTCPå®¢æˆ·è¿›ç¨‹æ‰€åœ¨ä¸»æœºå‡ºäº†æ•…éšœï¼Œæ¥ç€å°±å…³é—­è¿™ä¸ªè¿æ¥ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.7 TCPå¯é ä¼ è¾“çš„å®ç°</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-7-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-7-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="tcpå¯é ä¼ è¾“çš„å®ç°">5.7 TCPå¯é ä¼ è¾“çš„å®ç°</h1><ol type="1"><li><p>TCPåŸºäºä»¥<strong>å­—èŠ‚ä¸ºå•ä½çš„æ»‘åŠ¨çª—å£</strong>æ¥å®ç°å¯é ä¼ è¾“ã€‚</p><ol type="1"><li><p>å‘é€æ–¹åœ¨æœªæ”¶åˆ°æ¥æ”¶æ–¹çš„ç¡®è®¤æ—¶ï¼Œå¯å°†å‘é€çª—å£å†…è¿˜æœªå‘é€çš„æ•°æ®å…¨éƒ¨å‘é€å‡ºå»</p></li><li><p>æ¥æ”¶æ–¹åªæ¥æ”¶åºå·è½å…¥å‘é€çª—å£å†…çš„æ•°æ®</p><blockquote><p>è™½ç„¶å‘é€æ–¹çš„å‘é€çª—å£æ˜¯æ ¹æ®æ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£è®¾ç½®çš„ï¼Œä½†åœ¨åŒä¸€æ—¶åˆ»ï¼Œå‘é€æ–¹çš„å‘é€çª—å£å¹¶ä¸æ€»æ˜¯å’Œæ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£ä¸€æ ·å¤§ã€‚</p></blockquote></li><li><p>ç½‘ç»œä¼ é€çª—å£å€¼éœ€è¦ç»å†ä¸€å®šçš„æ—¶é—´æ»åï¼Œäº•ä¸”è¿™ä¸ªæ—¶é—´è¿˜æ˜¯ä¸ç¡®å®šçš„ã€‚</p></li><li><p>å‘é€æ–¹è¿˜å¯èƒ½æ ¹æ®ç½‘ç»œå½“æ—¶çš„æ‹¥å¡æƒ…å†µé€‚å½“å‡å°è‡ªå·±çš„å‘é€çª—å£å°ºå¯¸</p></li></ol></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-7-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0/image-20241118144647353.png"></p><ol start="2" type="1"><li><p>å¯¹äºä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®åº”å¦‚ä½•å¤„ç†ï¼ŒTCPå¹¶æ— æ˜ç¡®è§„å®š</p><ol type="1"><li>å¦‚æœæ¥æ”¶æ–¹æŠŠä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®ä¸€å¾‹ä¸¢å¼ƒï¼Œé‚£ä¹ˆæ¥æ”¶çª—å£çš„ç®¡ç†å°†ä¼šæ¯”è¾ƒç®€å•ï¼Œä½†è¿™æ ·åšå¯¹ç½‘ç»œèµ„æºçš„åˆ©ç”¨ä¸åˆ©ï¼Œå› ä¸ºå‘é€æ–¹ä¼šé‡å¤ä¼ é€è¾ƒå¤šçš„æ•°æ®ã€‚</li><li>TCPé€šå¸¸å¯¹ä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®æ˜¯å…ˆä¸´æ—¶å­˜æ”¾åœ¨æ¥æ”¶çª—å£ä¸­ï¼Œç­‰åˆ°å­—èŠ‚æµä¸­æ‰€ç¼ºå°‘çš„å­—èŠ‚æ”¶åˆ°åï¼Œå†æŒ‰åºäº¤ä»˜ä¸Šå±‚çš„åº”ç”¨è¿›ç¨‹</li><li>TCPè¦æ±‚æ¥æ”¶æ–¹å¿…é¡»æœ‰ç´¯ç§¯ç¡®è®¤å’Œæå¸¦ç¡®è®¤æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å‡å°ä¼ è¾“å¼€é”€ã€‚æ¥æ”¶æ–¹å¯ä»¥åœ¨åˆé€‚çš„æ—¶å€™å‘é€ç¡®è®¤ï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±æœ‰æ•°æ®è¦å‘é€æ—¶æŠŠç¡®è®¤ä¿¡æ¯é¡ºä¾¿æå¸¦ä¸Šã€‚<ol type="1"><li>æ¥æ”¶æ–¹ä¸åº”è¿‡åˆ†æ¨è¿Ÿå‘é€ç¡®è®¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´å‘é€æ–¹ä¸å¿…è¦çš„è¶…æ—¶é‡ä¼ ï¼Œè¿™åè€Œæµªè´¹äº†ç½‘ç»œçš„èµ„æºã€‚</li><li>TCPæ ‡å‡†è§„å®šï¼Œç¡®è®¤æ¨è¿Ÿçš„æ—¶é—´ä¸åº”è¶…è¿‡0.5ç§’ã€‚è‹¥æ”¶åˆ°ä¸€è¿ä¸²å…·æœ‰æœ€å¤§é•¿åº¦çš„æŠ¥æ–‡æ®µï¼Œåˆ™å¿…é¡»æ¯éš”ä¸€ä¸ªæŠ¥æ–‡æ®µå°±å‘é€ä¸€ä¸ªç¡®è®¤</li><li>æ¢¢å¸¦ç¡®è®¤å®é™…ä¸Šå¹¶ä¸ç»å¸¸å‘ç”Ÿï¼Œå› ä¸ºå¤§å¤šæ•°åº”ç”¨ç¨‹åºå¾ˆå°‘åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šå‘é€æ•°æ®ã€‚</li></ol></li></ol></li><li><p>TCPçš„é€šä¿¡æ˜¯å…¨åŒå·¥é€šä¿¡ã€‚</p><blockquote><p>é€šä¿¡ä¸­çš„æ¯ä¸€æ–¹éƒ½åœ¨å‘é€å’Œæ¥æ”¶æŠ¥æ–‡æ®µã€‚å› æ­¤ï¼Œæ¯ä¸€æ–¹éƒ½æœ‰è‡ªå·±çš„å‘é€çª—å£å’Œæ¥æ”¶çª—å£ã€‚åœ¨è°ˆåˆ°è¿™äº›çª—å£æ—¶ï¼Œä¸€å®šè¦å¼„æ¸…æ¥šæ˜¯å“ªä¸€æ–¹çš„çª—å£ã€‚</p></blockquote></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.6 TCPè¶…æ—¶é‡ä¼ æ—¶é—´çš„é€‰æ‹©</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-6-TCP%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%87%8D%E4%BC%A0/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-6-TCP%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%87%8D%E4%BC%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="tcpè¶…æ—¶é‡ä¼ çš„æ—¶é—´çš„é€‰æ‹©rto">5.6TCPè¶…æ—¶é‡ä¼ çš„æ—¶é—´çš„é€‰æ‹©ï¼ˆRTOï¼‰</h1><ul><li>åˆ©ç”¨æ¯æ¬¡æµ‹é‡å¾—åˆ°çš„RTTæ ·æœ¬ï¼Œè®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTs(åˆç§°ä¸ºå¹³æ»‘çš„å¾€è¿”æ—¶é—´)ã€‚</li><li>è¶…æ—¶é‡ä¼ çš„æ—¶é—´åº”ç•¥å¤§äºRTTsçš„å€¼ã€‚</li></ul><ol type="1"><li><p>è®¡ç®—RTT<sub>S</sub> <span class="math display">\[åˆå§‹RTT_S = æµ‹å¾—çš„ç¬¬ä¸€ä¸ªRTT\]</span> <span class="math display">\[RTTs = (1-\alpha)\times æ—§çš„RTTs + \alpha \times æ–°çš„RTTæ ·æœ¬\]</span> å»ºè®® <span class="math inline">\(\alpha\)</span> =0.125</p></li><li><p>è®¡ç®—RTT<sub>D</sub> <span class="math display">\[åˆå§‹RTT_D = \frac{RTT_1}{2}\\RTT_D = (1 - \beta) \times æ—§çš„RTT_D + \beta \times \vert RTT_S -æ–°çš„RTTæ ·æœ¬ \vert\]</span> å»ºè®®<span class="math inline">\(\beta\)</span> = 0.25</p></li><li><p>é’ˆå¯¹å‡ºç°è¶…æ—¶é‡ä¼ æ—¶æ— æ³•æµ‹å‡†å¾€è¿”æ—¶é—´RTTçš„é—®é¢˜ï¼ŒKanæå‡ºäº†ä¸€ä¸ªç®—æ³•ï¼šåœ¨è®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTsæ—¶ï¼Œåªè¦æŠ¥æ–‡æ®µé‡ä¼ äº†ï¼Œå°±ä¸é‡‡ç”¨å…¶å¾€è¿”æ—¶é—´RTTæ ·æœ¬ã€‚ä¹Ÿå°±æ˜¯å‡ºç°é‡ä¼ æ—¶ï¼Œä¸é‡æ–°è®¡ç®—RTTs,è¿›è€Œè¶…æ—¶é‡ä¼ æ—¶é—´RTOä¹Ÿä¸ä¼šé‡æ–°è®¡ç®—ã€‚</p></li><li><p>è¿™åˆå¼•èµ·äº†æ–°çš„é—®é¢˜ã€‚è®¾æƒ³å‡ºç°è¿™æ ·çš„æƒ…å†µï¼šæŠ¥æ–‡æ®µçš„æ—¶å»¶çªç„¶å¢å¤§äº†å¾ˆå¤šï¼Œå¹¶ç›®ä¹‹åå¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¼šä¿æŒè¿™ç§æ—¶å»¶ã€‚å› æ­¤åœ¨åŸæ¥å¾—å‡ºçš„é‡ä¼ æ—¶é—´å†…ï¼Œä¸ä¼šæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µã€‚äºæ˜¯å°±é‡ä¼ æŠ¥æ–‡æ®µã€‚ä½†æ ¹æ®Karç®—æ³•ï¼Œä¸è€ƒè™‘é‡ä¼ çš„æŠ¥æ–‡æ®µçš„å¾€è¿”æ—¶é—´æ ·æœ¬ã€‚è¿™æ ·ï¼Œè¶…æ—¶é‡ä¼ æ—¶é—´å°±æ— æ³•æ›´æ–°ã€‚è¿™ä¼šå¯¼è‡´æŠ¥æ–‡æ®µåå¤è¢«é‡ä¼ ã€‚</p></li><li><p>å› æ­¤ï¼Œè¦å¯¹Kanç®—æ³•è¿›è¡Œä¿®æ­£ã€‚æ–¹æ³•æ˜¯ï¼šæŠ¥æ–‡æ®µæ¯é‡ä¼ ä¸€æ¬¡ï¼Œå°±æŠŠè¶…æ—¶é‡ä¼ æ—¶é—´RTOå¢å¤§ä¸€äº›ã€‚å…¸å‹çš„åšæ³•æ˜¯å°†æ–°RTOçš„å€¼å–ä¸ºæ—§RTOå€¼çš„2å€ã€‚</p></li><li><p>è®¡ç®—è¶…æ—¶é‡ä¼ æ—¶é—´ <span class="math display">\[RTO = RTT_S + 4 \times RTT_D\]</span>åªè¦æŸæŠ¥æ–‡æ®µè¶…æ—¶é‡ä¼ ï¼Œå°±å°†RTOè®¾ä¸ºåŸæ¥çš„ä¸¤å€ï¼Œè€Œä¸æ˜¯æŒ‰ç…§ä¸Šè¿°å…¬å¼è®¡ç®—</p></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-6-TCP%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%87%8D%E4%BC%A0/image-20241118125512601.png"></p><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-6-TCP%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%87%8D%E4%BC%A0/image-20241118125933926.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.5 TCPçš„æ‹¥å¡æ§åˆ¶</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-5-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-5-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="tcpæ‹¥å¡æ§åˆ¶">5.5 TCPæ‹¥å¡æ§åˆ¶</h1><ol type="1"><li>åœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œæ€§èƒ½å°±è¦å˜åã€‚è¿™ç§æƒ…å†µå°±å«åšæ‹¥å¡(congestion)ã€‚</li><li>åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„é“¾è·¯å®¹é‡ï¼ˆå³å¸¦å®½ï¼‰ã€äº¤æ¢ç»“ç‚¹ä¸­çš„ç¼“å­˜å’Œå¤„ç†æœºç­‰ï¼Œéƒ½æ˜¯ç½‘ç»œçš„èµ„æºã€‚</li><li>è‹¥å‡ºç°æ‹¥å¡è€Œä¸è¿›è¡Œæ§åˆ¶ï¼Œæ•´ä¸ªç½‘ç»œçš„ååé‡å°†éšè¾“å…¥è´Ÿè·çš„å¢å¤§è€Œä¸‹é™ã€‚</li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-5-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/image-20241118122339061.png"></p><h2 id="æ‹¥å¡é¿å…ç®—æ³•">1. æ‹¥å¡é¿å…ç®—æ³•</h2><ul><li>ä¸‹é¢ä»‹ç»è¿™å››ç§æ‹¥å¡æ§åˆ¶ç®—æ³•çš„åŸºæœ¬åŸç†ï¼Œå‡å®šå¦‚ä¸‹æ¡ä»¶ï¼š<ul><li>æ•°æ®æ˜¯å•æ–¹å‘ä¼ é€ï¼Œè€Œå¦ä¸€ä¸ªæ–¹å‘åªä¼ é€ç¡®è®¤ã€‚</li><li>æ¥æ”¶æ–¹æ€»æ˜¯æœ‰è¶³å¤Ÿå¤§çš„ç¼“å­˜ç©ºé—´ï¼Œå› è€Œå‘é€æ–¹å‘é€çª—å£çš„å¤§å°ç”±ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦æ¥å†³å®šã€‚</li><li>ä»¥æœ€å¤§æŠ¥æ–‡æ®µMSSçš„ä¸ªæ•°ä¸ºè®¨è®ºé—®é¢˜çš„å•ä½ï¼Œè€Œä¸æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</li></ul></li></ul><h3 id="æ…¢å¼€å§‹ä¸æ‹¥å¡é¿å…ç®—æ³•">1.1 æ…¢å¼€å§‹ä¸æ‹¥å¡é¿å…ç®—æ³•</h3><ol type="1"><li><p>å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªå«åšæ‹¥å¡çª—å£cwdçš„çŠ¶æ€å˜é‡ï¼Œå…¶å€¼å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–ã€‚</p><ol type="1"><li><p>æ‹¥å¡çª—å£cwdçš„ç»´æŠ¤åŸåˆ™</p><ol type="1"><li>åªè¦ç½‘ç»œæ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å†å¢å¤§ä¸€äº›ï¼›</li><li>ä½†åªè¦ç½‘ç»œå‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å‡å°‘ä¸€äº›ã€‚</li><li>å…·ä½“åšæ³•<ol type="1"><li>å‘ç”Ÿè¶…æ—¶é‡ä¼ åï¼Œå°†é—¨é™ssthreshè®¾ä¸ºæ‹¥å¡çª—å£çš„ä¸€åŠï¼Œå¹¶å°†å½“å‰æ‹¥å¡çª—å£è®¾ä¸º1</li><li>é‡æ–°è¿è¡Œå¼€å§‹æ…¢å¼€å§‹ç®—æ³•</li></ol></li></ol></li><li><p>åˆ¤æ–­å‡ºç°ç½‘ç»œæ‹¥å¡çš„ä¾æ®</p><blockquote><p>æ²¡æœ‰æŒ‰æ—¶æ”¶åˆ°åº”å½“åˆ°è¾¾çš„ç¡®è®¤æŠ¥æ–‡ï¼ˆå³å‘ç”Ÿè¶…æ—¶é‡ä¼ ï¼‰ã€‚</p></blockquote></li></ol></li><li><p>å‘é€æ–¹å°†æ‹¥å¡çª—å£ä½œä¸ºå‘é€çª—å£swnd,å³ swnd=cwndã€‚</p></li><li><p>ç»´æŠ¤ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ssthreshçŠ¶æ€å˜é‡</p><ol type="1"><li>å½“cwnd&lt;ssthreshæ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•</li><li>å½“cwnd&gt;ssthreshæ—¶ï¼Œåœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•è€Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³•ï¼š</li><li>å½“cwnd=ssthreshæ—¶ï¼Œæ—¢å¯ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼Œä¹Ÿå¯ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•ã€‚</li></ol></li><li><p>æ…¢å¼€å§‹æŒ‡æ•°å¢é•¿ï¼Œä»1å¼€å§‹ï¼Œæ¯æ¬¡Ã—2</p></li><li><p>æ‹¥å¡é¿å…ï¼Œæ‹¥å¡çª—å£æ¯æ¬¡åŠ 1</p></li><li><p>å‡ºç°æ‹¥å¡ï¼Œssthreshå€¼æ›´æ–°ä¸ºcwndçš„ä¸€åŠ</p></li><li><p>cwndå€¼ç½®ä¸º1ï¼Œå†é‡æ–°å¼€å§‹æ…¢å¼€å§‹ç®—æ³•</p></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-5-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/image-20241118123625970.png"></p><ul><li><p>â€œæ…¢å¼€å§‹â€æ˜¯æŒ‡ä¸€å¼€å§‹å‘ç½‘ç»œæ³¨å…¥çš„æŠ¥æ–‡æ®µå°‘ï¼Œå¹¶ä¸æ˜¯æŒ‡æ‹¥å¡çª—å£cwdå¢é•¿é€Ÿåº¦æ…¢ï¼›</p></li><li><p>â€œæ‹¥å¡é¿å…â€å¹¶éæŒ‡å®Œå…¨èƒ½å¤Ÿé¿å…æ‹¥å¡ï¼Œè€Œæ˜¯æŒ‡åœ¨æ‹¥å¡é¿å…é˜¶æ®µå°†æ‹¥å¡çª—å£æ§åˆ¶ä¸ºæŒ‰çº¿æ€§è§„å¾‹å¢é•¿ï¼Œä½¿ç½‘ç»œæ¯”è¾ƒä¸å®¹æ˜“å‡ºç°æ‹¥å¡</p></li><li><p>æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…ç®—æ³•æ˜¯1988å¹´æå‡ºçš„TCPæ‹¥å¡æ§åˆ¶ç®—æ³•(TCPTahoeç‰ˆæœ¬)</p></li><li><p>1990å¹´åˆå¢åŠ äº†ä¸¤ä¸ªæ–°çš„æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼ˆæ”¹è¿›TCPçš„æ€§èƒ½ï¼‰ï¼Œè¿™å°±æ˜¯å¿«é‡ä¼ å’Œå¿«æ¢å¤(TCPReno.ç‰ˆæœ¬)ã€‚</p><ul><li>æœ‰æ—¶ï¼Œä¸ªåˆ«æŠ¥æ–‡æ®µä¼šåœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼Œä½†å®é™…ä¸Šç½‘ç»œå¹¶æœªå‘ç”Ÿæ‹¥å¡ã€‚<ul><li>è¿™å°†å¯¼è‡´å‘é€æ–¹è¶…æ—¶é‡ä¼ ï¼Œå¹¶è¯¯è®¤ä¸ºç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡ï¼›</li><li>å‘é€æ–¹æŠŠæ‹¥å¡çª—å£cwdåˆè®¾ç½®ä¸ºæœ€å°å€¼1ï¼Œå¹¶é”™è¯¯åœ°å¯åŠ¨æ…¢å¼€å§‹ç®—æ³•ï¼Œå› è€Œé™ä½äº†ä¼ è¾“æ•ˆç‡</li></ul></li></ul></li><li><p>é‡‡ç”¨å¿«é‡ä¼ ç®—æ³•å¯ä»¥è®©å‘é€æ–¹å°½æ—©çŸ¥é“å‘ç”Ÿäº†ä¸ªåˆ«æŠ¥æ–‡æ®µçš„ä¸¢å¤±ã€‚</p></li><li><p>æ‰€è°“å¿«é‡ä¼ ï¼Œå°±æ˜¯ä½¿å‘é€æ–¹å°½å¿«è¿›è¡Œé‡ä¼ ï¼Œè€Œä¸æ˜¯ç­‰è¶…æ—¶é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶å†é‡ä¼ ã€‚</p></li></ul><h3 id="å¿«é‡ä¼ ä¸å¿«æ¢å¤">1.2 å¿«é‡ä¼ ä¸å¿«æ¢å¤</h3><ol type="1"><li>è¦æ±‚æ¥æ”¶æ–¹ä¸è¦ç­‰å¾…è‡ªå·±å‘é€æ•°æ®æ—¶æ‰è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œè€Œæ˜¯è¦ç«‹å³å‘é€ç¡®è®¤</li><li>å³ä½¿æ”¶åˆ°äº†å¤±åºçš„æŠ¥æ–‡æ®µä¹Ÿè¦ç«‹å³å‘å‡ºå¯¹å·²æ”¶åˆ°çš„æŠ¥æ–‡æ®µçš„é‡å¤ç¡®è®¤ã€‚</li><li>å‘é€æ–¹ä¸€æ—¦<strong>æ”¶åˆ°3ä¸ªè¿ç»­çš„é‡å¤ç¡®è®¤</strong>ï¼Œå°±å°†ç›¸åº”çš„æŠ¥æ–‡æ®µç«‹å³é‡ä¼ ï¼Œè€Œä¸æ˜¯ç­‰è¯¥æŠ¥æ–‡æ®µçš„è¶…æ—¶é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶å†é‡ä¼ ã€‚</li><li>å¯¹äºä¸ªåˆ«ä¸¢å¤±çš„æŠ¥æ–‡æ®µï¼Œå‘é€æ–¹ä¸ä¼šå‡ºç°è¶…æ—¶é‡ä¼ ï¼Œä¹Ÿå°±ä¸ä¼šè¯¯è®¤ä¸ºå‡ºç°äº†æ‹¥å¡ï¼ˆè¿›è€Œé™ä½æ‹¥å¡çª—å£cwdä¸º1ï¼‰ã€‚ä½¿ç”¨å¿«é‡ä¼ å¯ä»¥ä½¿æ•´ä¸ªç½‘ç»œçš„ååé‡æé«˜çº¦20%ã€‚</li><li>å‘é€æ–¹ä¸€æ—¦æ”¶åˆ°3ä¸ªé‡å¤ç¡®è®¤ï¼Œå°±çŸ¥é“ç°åœ¨åªæ˜¯ä¸¢å¤±äº†ä¸ªåˆ«çš„æŠ¥æ–‡æ®µã€‚äºæ˜¯ä¸å¯åŠ¨æ…¢å¼€å§‹ç®—æ³•ï¼Œè€Œæ‰§è¡Œ<strong>å¿«æ¢å¤ç®—æ³•</strong><ol type="1"><li>å‘é€æ–¹å°†æ…¢å¼€å§‹<strong>é—¨é™ssthreshå€¼</strong>å’Œ<strong>æ‹¥å¡çª—å£cwndå€¼</strong>è°ƒæ•´ä¸º<strong>å½“å‰çª—å£çš„ä¸€åŠ</strong></li><li>å¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ã€‚</li><li>ä¹Ÿæœ‰çš„å¿«æ¢å¤å®ç°æ˜¯æŠŠå¿«æ¢å¤å¼€å§‹æ—¶çš„æ‹¥å¡çª—å£cwndå€¼å†å¢å¤§ä¸€äº›ï¼Œå³ç­‰äºæ–°çš„ssthresh+3ã€‚<ol type="1"><li>æ—¢ç„¶å‘é€æ–¹æ”¶åˆ°3ä¸ªé‡å¤çš„ç¡®è®¤ï¼Œå°±è¡¨æ˜æœ‰3ä¸ªæ•°æ®æŠ¥æ–‡æ®µå·²ç»ç¦»å¼€äº†ç½‘ç»œï¼Œè¿™3ä¸ªæŠ¥æ–‡æ®µä¸å†æ¶ˆè€—ç½‘ç»œèµ„æºè€Œæ˜¯åœç•™åœ¨æ¥æ”¶æ–¹çš„æ¥æ”¶ç¼“å­˜ä¸­ï¼Œå¯è§ç°åœ¨ç½‘ç»œä¸­ä¸æ˜¯å †ç§¯äº†æŠ¥æ–‡æ®µè€Œæ˜¯å‡å°‘äº†3ä¸ªæŠ¥æ–‡æ®µã€‚å› æ­¤å¯ä»¥é€‚å½“æŠŠæ‹¥å¡çª—å£æ‰©å¤§äº›ã€‚</li></ol></li></ol></li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-5-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/image-20241118124545558.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.4 TCPçš„æµé‡æ§åˆ¶</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-4-TCP%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-4-TCP%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="tcpæµé‡æ§åˆ¶">TCPæµé‡æ§åˆ¶</h2><ul><li><p>æ‰€è°“æµé‡æ§åˆ¶ ( flow control)å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚</p></li><li><p>TCPæ¥æ”¶æ–¹åˆ©ç”¨è‡ªå·±çš„æ¥æ”¶çª—å£çš„å¤§å°æ¥é™åˆ¶å‘é€æ–¹å‘é€çª—å£çš„å¤§å°ã€‚</p></li></ul><p><span class="math display">\[å‘é€çª—å£ = Min(å‘é€æ–¹æ‹¥å¡çª—å£ï¼Œæ¥å—æ–¹æ¥æ”¶çª—å£)\]</span></p><figure><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-4-TCP%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/image-20241118120929780.png" alt="image-20241118120929780"><figcaption aria-hidden="true">image-20241118120929780</figcaption></figure><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-4-TCP%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/image-20241118121512615.png"></p><p>æ³¨æ„</p><ol type="1"><li>TCPå‘é€æ–¹æ”¶åˆ°æ¥æ”¶æ–¹çš„é›¶çª—å£é€šçŸ¥åï¼Œåº”å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚æŒç»­è®¡æ—¶å™¨è¶…æ—¶åï¼Œå‘æ¥æ”¶æ–¹å‘é€é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ã€‚</li></ol><blockquote><p>è‹¥æ˜¯é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼Œåˆ™åœ¨å…¶é‡å‘è®¡æ•°å™¨è¶…æ—¶åé‡å‘è¯¥æŠ¥æ–‡</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.3 UDPå’ŒTCPçš„å¯¹æ¯”</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/</url>
    
    <content type="html"><![CDATA[<h1 id="udpå’Œtcpçš„å¯¹æ¯”">5.3 UDPå’ŒTCPçš„å¯¹æ¯”</h1><ul><li>ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP:(User Datagram Protocol)<ul><li>æ— è¿æ¥</li></ul></li><li>ä¼ è¾“æ§åˆ¶åè®®TCPï¼šTransmission Control Protocol<ul><li>é¢å‘è¿æ¥</li></ul></li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/image-20241118111939771.png"></p><ul><li>UDPæ”¯æŒå•æ’­ã€å¤šæ’­ä»¥åŠå¹¿æ’­</li><li>TCPä»…æ”¯æŒå•æ’­</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/image-20241118112226603.png"></p><ul><li>UDPæ˜¯é¢å‘åº”ç”¨æŠ¥æ–‡çš„</li><li>TCPæ˜¯é¢å‘å­—èŠ‚æµçš„</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/image-20241118112458492.png"></p><ul><li>UDPå‘ä¸Šå±‚æä¾›æ— è¿æ¥ä¸å¯é ä¼ è¾“æœåŠ¡(é€‚ç”¨äºIPç”µè¯ã€è§†é¢‘ä¼šè®®ç­‰å®æ—¶åº”ç”¨)</li><li>TCPå‘ä¸Šå±‚æä¾›é¢å‘è¿æ¥çš„å¯é ä¼ è¾“æœåŠ¡(é€‚ç”¨äºè¦æ±‚å¯é ä¼ è¾“çš„åº”ç”¨ï¼Œä¾‹å¦‚æ–‡ä»¶ä¼ è¾“)</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/image-20241118112750466.png"></p><ul><li>UDPç”¨æˆ·æ•°æ®æŠ¥é¦–éƒ¨ä»…8å­—èŠ‚</li><li>TCPæŠ¥æ–‡æ®µé¦–éƒ¨æœ€å°20å­—èŠ‚ï¼Œæœ€å¤§60å­—èŠ‚</li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-3-UDP%E5%92%8CTCP%E7%9A%84%E5%AF%B9%E6%AF%94/image-20241118112843761.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.2 è¿è¾“å±‚ç«¯å£å·ã€å¤ç”¨ä¸åˆ†ç”¨çš„æ¦‚å¿µ</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿è¾“å±‚ç«¯å£å·å¤ç”¨åˆ†ç”¨">5.2 è¿è¾“å±‚ç«¯å£å·ï¼Œå¤ç”¨ï¼Œåˆ†ç”¨</h1><h2 id="ç«¯å£å·">1. ç«¯å£å·</h2><ol type="1"><li><p>å› ä¸ºå› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœºå¹¶ä¸æ˜¯ä½¿ç”¨ç»Ÿä¸€çš„æ“ä½œç³»ç»Ÿï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿåˆä½¿ç”¨ä¸åŒæ ¼å¼çš„è¿›ç¨‹æ ‡è¯†ç¬¦ï¼Œä¸ºäº†ä½¿è¿è¡Œä¸åŒæ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´èƒ½å¤Ÿè¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œå°±å¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹TCP/IPä½“ç³»çš„åº”ç”¨è¿›ç¨‹è¿›è¡Œæ ‡è¯†ã€‚</p></li><li><p>TCP/IPä½“ç³»çš„è¿è¾“å±‚ä½¿ç”¨ç«¯å£å·æ¥åŒºåˆ†åº”ç”¨å±‚çš„ä¸åŒåº”ç”¨è¿›ç¨‹ï¼Œç«¯å£å·ä½¿ç”¨16æ¯”ç‰¹è¡¨ç¤ºï¼Œå–å€¼èŒƒå›´[0,65535]ã€‚</p></li></ol><figure><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5/image-20241118110803598.png" alt="ç«¯å£å·çš„åˆ’åˆ†"><figcaption aria-hidden="true">ç«¯å£å·çš„åˆ’åˆ†</figcaption></figure><ol start="3" type="1"><li>ç«¯å£å·åªå…·æœ‰æœ¬åœ°æ„ä¹‰ï¼Œå³ç«¯å£å·åªæ˜¯ä¸ºäº†æ ‡è¯†æœ¬è®¡ç®—æœºåº”ç”¨å±‚ä¸­çš„å„è¿›ç¨‹ï¼Œåœ¨å› ç‰¹ç½‘ä¸­ï¼Œä¸åŒè®¡ç®—æœºä¸­çš„ç›¸åŒç«¯å£å·æ˜¯æ²¡æœ‰è”ç³»çš„ã€‚</li></ol><h2 id="å‘é€æ–¹çš„å¤ç”¨å’Œæ¥æ”¶æ–¹çš„åˆ†ç”¨">2. å‘é€æ–¹çš„å¤ç”¨å’Œæ¥æ”¶æ–¹çš„åˆ†ç”¨</h2><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5/image-20241118111045703.png"></p><ol type="1"><li>TCP/IPä½“ç³»çš„åº”ç”¨å±‚å¸¸ç”¨åè®®æ‰€ä½¿ç”¨è¿è¾“å±‚çš„ç†ŸçŸ¥ç«¯å£å·</li></ol><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5/image-20241118111132310.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>5.1 è¿è¾“å±‚æ¦‚è¿°</title>
    <link href="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿è¾“å±‚æ¦‚è¿°">5.1 è¿è¾“å±‚æ¦‚è¿°</h1><ul><li><p>å®é™…ä¸Šåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¿›è¡Œé€šä¿¡çš„çœŸæ­£å®ä½“æ˜¯ä½äºé€šä¿¡ä¸¤ç«¯ä¸»æœºä¸­çš„è¿›ç¨‹</p></li><li><p>å¦‚ä½•ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹æä¾›ç›´æ¥çš„é€šä¿¡æœåŠ¡æ˜¯è¿è¾“å±‚çš„ä»»åŠ¡ï¼Œè¿è¾“å±‚åè®®åˆç§°ä¸ºç«¯åˆ°ç«¯åè®®ã€‚</p></li><li><p>è¿è¾“å±‚å‘é«˜å±‚ç”¨æˆ·å±è”½äº†ä¸‹é¢ç½‘ç»œæ ¸å¿ƒçš„ç»†èŠ‚ï¼ˆå¦‚ç½‘ç»œæ‹“æ‰‘ã€æ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ç­‰)ï¼Œå®ƒä½¿åº”ç”¨è¿›ç¨‹çœ‹è§çš„å°±å¥½åƒæ˜¯åœ¨ä¸¤ä¸ªè¿è¾“å±‚å®ä½“ä¹‹é—´æœ‰ä¸€æ¡ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ä¿¡é“ã€‚</p></li><li><p>æ ¹æ®åº”ç”¨éœ€æ±‚çš„ä¸åŒï¼Œå› ç‰¹ç½‘çš„è¿è¾“å±‚ä¸ºåº”ç”¨å±‚æä¾›äº†ä¸¤ç§ä¸åŒçš„è¿è¾“åè®®ï¼Œå³é¢å‘è¿æ¥çš„TCPå’Œæ— è¿æ¥çš„UDP,è¿™ä¸¤ç§åè®®å°±æ˜¯æœ¬ç« è¦è®¨è®ºçš„ä¸»è¦å†…å®¹ã€‚</p></li></ul><p><img src="/2024/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0/image-20241118110058782.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.9 è™šæ‹Ÿä¸“ç”¨ç½‘VPNä¸ç½‘ç»œåœ°å€è½¬æ¢NAT</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-9-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-9-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT/</url>
    
    <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿä¸“ç”¨ç½‘ç»œvpnä¸ç½‘ç»œåœ°å€è½¬æ¢nat">4.9è™šæ‹Ÿä¸“ç”¨ç½‘ç»œVPNä¸ç½‘ç»œåœ°å€è½¬æ¢NAT</h1><h2 id="vpn">1. VPN</h2><ul><li>åˆ©ç”¨å…¬ç”¨çš„å› ç‰¹ç½‘ä½œä¸ºæœ¬æœºæ„å„ä¸“ç”¨ç½‘ä¹‹é—´çš„é€šä¿¡è½½ä½“ï¼Œè¿™æ ·çš„ä¸“ç”¨ç½‘åˆç§°ä¸ºè™šæ‹Ÿä¸“ç”¨ç½‘ã€‚</li><li>VPNè¦ä¿è¯ä¼ è¾“æ•°æ®çš„å®‰å…¨æ€§ï¼Œä¼šå°†åŸå§‹çš„å†…éƒ¨æ•°æ®æŠ¥è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå†å°†å…¶å°è£…æˆä¸ºåœ¨å› ç‰¹ç½‘ä¸Šå‘é€åˆ°çš„å¤–éƒ¨æ•°æ®æŠ¥ã€‚</li></ul><ol type="1"><li>VPNç±»å‹<ol type="1"><li>åŒä¸€æœºæ„å†…ä¸åŒéƒ¨é—¨çš„å†…éƒ¨ç½‘ç»œæ‰€æ„æˆçš„è™šæ‹Ÿä¸“ç”¨ç½‘VPNåˆç§°ä¸ºå†…è”ç½‘VPN</li><li>æœ‰æ—¶ä¸€ä¸ªæœºæ„çš„VPNéœ€è¦æœ‰æŸäº›å¤–éƒ¨æœºæ„ï¼ˆé€šå¸¸å°±æ˜¯åˆä½œä¼™ä¼´ï¼‰å‚åŠ è¿›æ¥ã€‚è¿™æ ·çš„VPNå°±ç§°ä¸ºå¤–è”ç½‘VPN</li><li>åœ¨å¤–åœ°å·¥ä½œçš„å‘˜å·¥éœ€è¦è®¿é—®å…¬å¸å†…éƒ¨çš„ä¸“ç”¨ç½‘ç»œæ—¶ï¼Œåªè¦åœ¨ä»»ä½•åœ°ç‚¹æ¥å…¥åˆ°å› ç‰¹ç½‘ï¼Œè¿è¡Œé©»ç•™åœ¨å‘˜å·¥PCä¸­çš„VPNè½¯ä»¶ï¼Œåœ¨å‘˜å·¥çš„PCå’Œå…¬å¸çš„ä¸»æœºä¹‹é—´å»ºç«‹VPNéš§é“ï¼Œå³å¯è®¿é—®ä¸“ç”¨ç½‘ç»œä¸­çš„èµ„æºã€‚è¿™ç§VPNç§°ä¸ºè¿œç¨‹æ¥å…¥VPNã€‚</li></ol></li></ol><h2 id="nat">2. NAT</h2><ul><li>NATèƒ½ä½¿å¤§é‡ä½¿ç”¨å†…éƒ¨ä¸“ç”¨åœ°å€çš„ä¸“ç”¨ç½‘ç»œç”¨æˆ·å…±äº«å°‘é‡å¤–éƒ¨å…¨çƒåœ°å€æ¥è®¿é—®å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºå’Œèµ„æºã€‚</li><li>ä¼ ç»ŸNATæ˜¯å°†æ¯ä¸ªæœ¬åœ°IPè½¬æ¢ä¸ºä¸€ä¸ªå…¬æœ‰IPï¼Œæ„å‘³ç€è·¯ç”±å™¨ä¸­NATæ˜ å°„è¡¨è®°å½•Nä¸ªå…¨çƒIPï¼Œåˆ™å¯¹åº”çš„å­ç½‘æœ€å¤šåªèƒ½æœ‰Nå°ä¸»æœºï¼Œè¿™ä¸ç¬¦é¢„æœŸã€‚</li></ul><ol type="1"><li>ç”±äºç»å¤§å¤šæ•°çš„ç½‘ç»œåº”ç”¨éƒ½æ˜¯ä½¿ç”¨è¿è¾“å±‚åè®®TCPæˆ–UDPæ¥ä¼ é€æ•°æ®ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¿è¾“å±‚çš„ç«¯å£å·å’ŒIPåœ°å€ä¸€èµ·è¿›è¡Œè½¬æ¢ã€‚<ol type="1"><li>è¿™æ ·ç”¨ä¸€ä¸ªå…¨çƒPåœ°å€å°±å¯ä»¥ä½¿å¤šä¸ªæ‹¥æœ‰æœ¬åœ°åœ°å€çš„ä¸»æœºåŒæ—¶å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚è¿™ç§å°†ç«¯å£å·å’ŒPåœ°å€ä¸€èµ·è¿›è¡Œè½¬æ¢çš„æŠ€æœ¯å«ä½œç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢NAPT(Network Address and Port Translation)ã€‚</li></ol></li><li>æ”¶åˆ°æ¥è‡ªå¤–ç½‘çš„IPæ•°æ®æŠ¥åï¼Œåœ¨NAPTè½¬æ¢è¡¨ä¸­æ‰¾ä¸åˆ°ç›¸åº”çš„è®°å½•ï¼</li><li>å¯¹äºä¸€äº›P2Pç½‘ç»œåº”ç”¨ï¼Œéœ€è¦å¤–ç½‘ä¸»æœºä¸»åŠ¨ä¸å†…ç½‘ä¸»æœºè¿›è¡Œé€šä¿¡ï¼Œåœ¨é€šè¿‡NATæ—¶ä¼šé‡åˆ°é—®é¢˜ï¼Œéœ€è¦ç½‘ç»œåº”ç”¨è‡ªå·±ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„NATç©¿è¶ŠæŠ€æœ¯æ¥è§£å†³é—®é¢˜ã€‚</li><li>ç”±äºNATå¯¹å¤–ç½‘å±è”½äº†å†…ç½‘ä¸»æœºçš„ç½‘ç»œåœ°å€ï¼Œèƒ½ä¸ºå†…ç½‘çš„ä¸»æœºæä¾›ä¸€å®šçš„å®‰å…¨ä¿æŠ¤ã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-9-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT/image-20241118104142578.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.8 ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-8-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-8-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®icmp">4.8 ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMP</h1><ul><li>ä¸ºäº†æ›´æœ‰æ•ˆåœ°è½¬å‘Pæ•°æ®æŠ¥å’Œæé«˜äº¤ä»˜æˆåŠŸçš„æœºä¼šï¼Œåœ¨ç½‘é™…å±‚ä½¿ç”¨äº†ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®<ul><li>ä¸»æœºæˆ–è·¯ç”±å™¨ä½¿ç”¨ICMPæ¥å‘é€å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡</li><li>ICMPæŠ¥æ–‡è¢«å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­å‘é€</li></ul></li></ul><h2 id="äº”ç§å·®é”™æŠ¥å‘ŠæŠ¥æ–‡">1. äº”ç§å·®é”™æŠ¥å‘ŠæŠ¥æ–‡</h2><h3 id="ç»ˆç‚¹ä¸å¯è¾¾">1.1 ç»ˆç‚¹ä¸å¯è¾¾</h3><ol type="1"><li>å½“è·¯ç”±å™¨æˆ–ä¸»æœºä¸èƒ½äº¤ä»˜æ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€ç»ˆç‚¹ä¸å¯è¾¾æŠ¥æ–‡ã€‚</li><li>å…·ä½“å¯å†æ ¹æ®ICMPçš„ä»£ç å­—æ®µç»†åˆ†ä¸ºç›®çš„ç½‘ç»œä¸å¯è¾¾ã€ç›®çš„ä¸»æœºä¸å¯è¾¾ã€ç›®çš„åè®®ä¸å¯è¾¾ã€ç›®çš„ç«¯å£ä¸å¯è¾¾ã€ç›®çš„ç½‘ç»œæœªçŸ¥ã€ç›®çš„ä¸»æœºæœªçŸ¥ç­‰13ç§é”™è¯¯ã€‚</li></ol><h3 id="æºç‚¹æŠ‘åˆ¶">1.2 æºç‚¹æŠ‘åˆ¶</h3><ol type="1"><li>å½“è·¯ç”±å™¨æˆ–ä¸»æœºç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€æºç‚¹æŠ‘åˆ¶æŠ¥æ–‡ï¼Œä½¿æºç‚¹çŸ¥é“åº”å½“æŠŠæ•°æ®æŠ¥çš„å‘é€é€Ÿç‡æ”¾æ…¢ã€‚</li></ol><h3 id="æ—¶é—´è¶…è¿‡">1.3 æ—¶é—´è¶…è¿‡</h3><ol type="1"><li>å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªç›®çš„1Påœ°å€ä¸æ˜¯è‡ªå·±çš„Pæ•°æ®æŠ¥ï¼Œä¼šå°†å…¶ç”Ÿå­˜æ—¶é—´TTLå­—æ®µçš„å€¼å‡1ã€‚</li><li>è‹¥ç»“æœä¸ä¸º0ï¼Œåˆ™å°†è¯¥Pæ•°æ®æŠ¥è½¬å‘å‡ºå»ï¼›è‹¥ç»“æœä¸º0ï¼Œé™¤ä¸¢å¼ƒè¯¥Pæ•°æ®æŠ¥å¤–ï¼Œè¿˜è¦å‘æºç‚¹å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡ã€‚</li></ol><h3 id="å‚æ•°é—®é¢˜">1.4 å‚æ•°é—®é¢˜</h3><ol type="1"><li>å½“è·¯ç”±å™¨æˆ–ç›®çš„ä¸»æœºæ”¶åˆ°Pæ•°æ®æŠ¥åï¼Œæ ¹æ®å…¶é¦–éƒ¨ä¸­çš„æ£€éªŒå’Œå­—æ®µå‘ç°é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†è¯¯ç ï¼Œå°±ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œå¹¶å‘æºç‚¹å‘é€å‚æ•°é—®é¢˜æŠ¥æ–‡ã€‚</li></ol><h3 id="æ”¹å˜è·¯ç”±é‡å®šå‘">1.5 æ”¹å˜è·¯ç”±(é‡å®šå‘)</h3><ol type="1"><li>è·¯ç”±å™¨æŠŠæ”¹å˜è·¯ç”±æŠ¥æ–‡å‘é€ç»™ä¸»æœºï¼Œè®©ä¸»æœºçŸ¥é“ä¸‹æ¬¡åº”å°†æ•°æ®æŠ¥å‘é€ç»™å¦å¤–çš„è·¯ç”±å™¨ï¼ˆå¯é€šè¿‡æ›´å¥½çš„è·¯ç”±ï¼‰ã€‚</li></ol><h2 id="å½“å‘ç”Ÿä»¥ä¸‹æƒ…å†µæ—¶ä¸åº”è¯¥å‘é€imcpå·®é”™æŠ¥å‘ŠæŠ¥æ–‡">2.å½“å‘ç”Ÿä»¥ä¸‹æƒ…å†µæ—¶ä¸åº”è¯¥å‘é€IMCPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</h2><ol type="1"><li>å¯¹ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ä¸å†å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</li><li>å¯¹ç¬¬ä¸€ä¸ªåˆ†ç‰‡çš„æ•°æ®æŠ¥ç‰‡çš„æ‰€æœ‰åç»­æ•°æ®æŠ¥ç‰‡éƒ½ä¸å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</li><li>å¯¹å…·æœ‰å¤šæ’­åœ°å€çš„æ•°æ®æŠ¥éƒ½ä¸å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</li><li>å¯¹å…·æœ‰ç‰¹æ®Šåœ°å€ï¼ˆå¦‚127.0.0.0æˆ–0.0.0.0ï¼‰çš„æ•°æ®æŠ¥ä¸å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</li></ol><h2 id="å¸¸ç”¨çš„icmpè¯¢é—®æŠ¥æ–‡">3. å¸¸ç”¨çš„ICMPè¯¢é—®æŠ¥æ–‡</h2><ol type="1"><li>å›é€è¯·æ±‚å’Œå›ç­”</li><li>ICMPå›é€è¯·æ±‚æŠ¥æ–‡æ˜¯ç”±ä¸»æœºå›æˆ–è·¯ç”±å™¨å‘ä¸€ä¸ªç‰¹å®šçš„ç›®çš„ä¸»æœºå‘å‡ºçš„è¯¢é—®ï¼Œæ”¶åˆ°æ­¤æŠ¥æ–‡çš„ä¸»æœºå¿…é¡»ç»™æºä¸»æœºæˆ–è·¯ç”±å™¨å‘é€ICMPå›é€å›ç­”æŠ¥æ–‡ã€‚<ol start="2" type="1"><li>è¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥æµ‹è¯•ç›®çš„ç«™æ˜¯å¦å¯è¾¾åŠäº†è§£å…¶æœ‰å…³çŠ¶æ€ã€‚</li></ol></li><li>æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­”<ol type="1"><li>ICMPæ—¶é—´æˆ³è¯·æ±‚æŠ¥æ–‡æ˜¯è¯·æŸä¸ªä¸»æœºæˆ–è·¯ç”±å™¨å›ç­”å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</li><li>åœ¨ICMPæ—¶é—´æˆ³å›ç­”æŠ¥æ–‡ä¸­æœ‰ä¸€ä¸ª32ä½çš„å­—æ®µï¼Œå…¶ä¸­å†™å…¥çš„æ•´æ•°ä»£è¡¨ä»1900å¹´1æœˆ1æ—¥èµ·åˆ°å½“å‰æ—¶åˆ»ä¸€å…±æœ‰å¤šå°‘ç§’ã€‚</li><li>è¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥è¿›è¡Œæ—¶é’ŸåŒæ­¥å’Œæµ‹é‡æ—¶é—´</li></ol></li></ol><h2 id="icmpåº”ç”¨">4. ICMPåº”ç”¨</h2><h3 id="åˆ†ç»„ç½‘é—´æ¢æµ‹ping">4.1 åˆ†ç»„ç½‘é—´æ¢æµ‹ï¼ˆPINGï¼‰</h3><blockquote><p>Packet Internet Groper</p></blockquote><ol type="1"><li>ç”¨æ¥æµ‹è¯•ä¸»æœºæˆ–è·¯ç”±å™¨é—´çš„è¿é€šæ€§</li><li>åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚çš„ICMP(æ²¡æœ‰é€šè¿‡è¿è¾“å±‚çš„TCPæˆ–UDP)</li><li>ä½¿ç”¨ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡</li></ol><h3 id="è·Ÿè¸ªè·¯ç”±">4.2 è·Ÿè¸ªè·¯ç”±</h3><blockquote><p>traceroute</p><p>ç”¨æ¥æµ‹è¯•Pæ•°æ®æŠ¥ä»æºä¸»æœºåˆ°è¾¾ç›®çš„ä¸»æœºè¦ç»è¿‡å“ªäº›è·¯ç”±å™¨</p></blockquote><ol type="1"><li><p>Windowsç‰ˆæœ¬</p><blockquote><p>tracertå‘½ä»¤ åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚ICMPä½¿ç”¨äº†ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ä»¥åŠå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</p></blockquote></li><li><p>Unixç‰ˆæœ¬</p><blockquote><p>tracerouteå‘½ä»¤ åœ¨è¿è¾“å±‚ä½¿ç”¨UDPåè®® ä»…ä½¿ç”¨ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</p></blockquote></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.7 IPv4æ•°æ®æŠ¥çš„é¦–éƒ¨æ ¼å¼</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="ipæ•°æ®æŠ¥çš„é¦–éƒ¨æ ¼å¼">4.7 IPæ•°æ®æŠ¥çš„é¦–éƒ¨æ ¼å¼</h1><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/image-20230717175105117.png"></p><table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç‰ˆæœ¬</td><td>å 4æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPåè®®çš„ç‰ˆæœ¬ã€‚<br>é€šä¿¡åŒæ–¹ä½¿ç”¨çš„Påè®®çš„ç‰ˆæœ¬å¿…é¡»ä¸€è‡´ã€‚<br>ç›®å‰å¹¿æ³›ä½¿ç”¨çš„IPåè®®ç‰ˆæœ¬å·ä¸º4ï¼ˆå³IPv4)<br></td></tr><tr><td>é¦–éƒ¨é•¿åº¦<br></td><td>å 4æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥é¦–éƒ¨çš„é•¿åº¦ã€‚<br>è¯¥å­—æ®µçš„å–å€¼ä»¥4å­—èŠ‚ä¸ºå•ä½ã€‚<br>æœ€å°åè¿›åˆ¶å–å€¼ä¸º5ï¼Œè¡¨ç¤ºPæ•°æ®æŠ¥é¦–éƒ¨åªæœ‰20å­—èŠ‚å›ºå®šéƒ¨åˆ†ï¼›<br>é‡å¤§åè¿›åˆ¶å–å€¼ä¸º15ï¼Œè¡¨ç¤º1Pæ•°æ®æŠ¥é¦–éƒ¨åŒ…å«20å­—èŠ‚å›ºå®šéƒ¨åˆ†å’Œæœ€å¤§40å­—èŠ‚å¯å˜éƒ¨åˆ†ã€‚<br></td></tr><tr><td>åŒºåˆ†æœåŠ¡</td><td>å 8æ¯”ç‰¹ï¼Œç”¨æ¥è·å¾—æ›´å¥½çš„æœåŠ¡ã€‚åˆ©ç”¨è¯¥å­—æ®µçš„ä¸åŒæ•°å€¼å¯æä¾›ä¸åŒç­‰çº§çš„æœåŠ¡è´¨é‡ã€‚<br>åªæœ‰åœ¨ä½¿ç”¨åŒºåˆ†æœåŠ¡æ—¶ï¼Œè¯¥å­—æ®µæ‰èµ·ä½œç”¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¸ä½¿ç”¨è¯¥å­—æ®µã€‚</td></tr><tr><td>æ€»é•¿åº¦</td><td>å 16æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ï¼ˆé¦–éƒ¨+æ•°æ®è½½è·ï¼‰ï¼Œæœ€å¤§å–å€¼ä¸ºåè¿›åˆ¶çš„65535ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</td></tr><tr><td>æ ‡è¯†</td><td>å 16æ¯”ç‰¹ï¼Œå±äºåŒä¸€ä¸ªæ•°æ®æŠ¥çš„å„åˆ†ç‰‡æ•°æ®æŠ¥åº”è¯¥å…·æœ‰ç›¸åŒçš„æ ‡è¯†ã€‚<br>IPè½¯ä»¶ç»´æŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªæ•°æ®æŠ¥ï¼Œè®¡æ•°å™¨å€¼åŠ 1ï¼Œå¹¶å°†æ­¤å€¼èµ‹ç»™æ ‡è¯†å­—æ®µã€‚</td></tr><tr><td>æ ‡å¿—</td><td>å 3æ¯”ç‰¹ï¼Œå„æ¯”ç‰¹å«ä¹‰å¦‚ä¸‹ï¼š<br>DFä½ï¼š1è¡¨ç¤ºä¸å…è®¸åˆ†ç‰‡ï¼š0è¡¨ç¤ºå…è®¸åˆ†ç‰‡ï¼›<br>MFä½ï¼š1è¡¨ç¤ºåé¢è¿˜æœ‰åˆ†ç‰‡ï¼š0è¡¨ç¤º è¿™æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡ï¼›<br>ä¿ç•™ä½ï¼šå¿…é¡»ä¸º0</td></tr><tr><td>ç‰‡åç§»</td><td>å 13æ¯”ç‰¹ï¼ŒæŒ‡å‡ºåˆ†ç‰‡æ•°æ®æŠ¥çš„æ•°æ®è½½è·éƒ¨åˆ†åç§»å…¶åœ¨åŸæ•°æ®æŠ¥çš„ä½ç½®æœ‰å¤šå°‘ä¸ªå•ä½ã€‚<br>ç‰‡åç§»ä»¥8ä¸ªå­—èŠ‚ä¸ºå•ä½ã€‚</td></tr><tr><td>ç”Ÿå­˜æ—¶é—´TTL</td><td>å 8æ¯”ç‰¹ï¼Œè¡¨ç¤ºPæ•°æ®æŠ¥çš„ç”Ÿå­˜æ—¶é—´ã€‚<br>ç°åœ¨ä»¥â€œè·³æ•°â€ä¸ºå•ä½ï¼Œè·¯ç”±å™¨è½¬å‘Pæ•°æ®æŠ¥æ—¶ï¼Œå°†1Pæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„è¯¥å­—æ®µçš„å€¼å‡1ï¼Œè‹¥ä¸ä¸º0å°±è½¬å‘ã€‚å¦åˆ™å°±ä¸¢å¼ƒ</td></tr><tr><td>é¦–éƒ¨æ ¡éªŒå’Œ</td><td>1Pæ•°æ®æŠ¥æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè·¯ç”±å™¨éƒ½è¦é‡æ–°è®¡ç®—é¦–éƒ¨æ£€éªŒå’Œï¼Œå› ä¸ºæŸäº›å­—æ®µ<br>ï¼ˆç”Ÿå­˜æ—¶é—´ï¼Œæ ‡å¿—ï¼Œç‰‡åç§»ç­‰ï¼‰çš„å–å€¼å¯èƒ½å‘ç”Ÿå˜åŒ–</td></tr><tr><td>æºIPåœ°å€å’Œç›®çš„IPåœ°å€</td><td>ç•¥</td></tr><tr><td>å¡«å……</td><td>IPæ•°æ®æŠ¥é¦–éƒ¨å¤§å°å¿…é¡»ä¸º4å­—èŠ‚çš„æ•´æ•°å€</td></tr><tr><td>å¯é€‰å­—æ®µé•¿åº¦</td><td>ä»1ä¸ªå­—èŠ‚åˆ°40ä¸ªå­—èŠ‚ä¸ç­‰ã€‚ç”¨æ¥æ”¯æŒæ’é”™ã€æµ‹é‡åŠå®‰å…¨ç­‰æªæ–½<br>ä½†ä¸€èˆ¬ä¸ä½¿ç”¨</td></tr><tr><td>åè®®</td><td>å 8æ¯”ç‰¹ï¼ŒæŒ‡æ˜IPV4æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†æ˜¯ä½•ç§åè®®æ•°æ®å•å…ƒã€‚<br>å¸¸ç”¨çš„ä¸€äº›åè®®å’Œç›¸åº”çš„åè®®å­—æ®µå€¼å¦‚ä¸‹ã€‚<br><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/image-20241117220627692.png" alt="image-20241117220627692"></td></tr></tbody></table><h2 id="ipv4åˆ†ç‰‡">1. IPV4åˆ†ç‰‡</h2><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/image-20241117215341102.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-7-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F/image-20241117220158751.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.6 è·¯ç”±é€‰æ‹©åè®®</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="è·¯ç”±é€‰æ‹©åè®®">4.6 è·¯ç”±é€‰æ‹©åè®®</h1><h2 id="è·¯ç”±é€‰æ‹©åè®®-1">1. è·¯ç”±é€‰æ‹©åè®®</h2><blockquote><p>æ—©æœŸRFCæ–‡æ¡£ä¸­ï¼Œä½¿ç”¨â€œç½‘å…³â€è¿™ä¸ªè¯æŒ‡ä»£è·¯ç”±å™¨ï¼Œç°ä»£ä½¿ç”¨â€œè·¯ç”±å™¨â€æŒ‡ä»£è·¯ç”±å™¨ï¼Œä¸¤è€…ä¸ºåŒä¸€è®¾å¤‡çš„ä¸åŒåç§°</p></blockquote><h3 id="é™æ€è·¯ç”±é€‰æ‹©">1.1 é™æ€è·¯ç”±é€‰æ‹©</h3><ol type="1"><li>ç”±äººå·¥é…ç½®çš„ç½‘ç»œè·¯ç”±ã€é»˜è®¤è·¯ç”±ã€ç‰¹å®šä¸»æœºè·¯ç”±ï¼Œé»‘æ´è·¯ç”±ç­‰éƒ½å±äºé™æ€è·¯ç”±ã€‚</li><li>è¿™ç§äººå·¥é…ç½®æ–¹å¼ç®€å•ã€å¼€é”€å°ï¼Œä½†ä¸èƒ½åŠæ—¶é€‚åº”ç½‘ç»œçŠ¶æ€ï¼ˆæµé‡ã€æ‹“æ‰‘ç­‰ï¼‰çš„å˜åŒ–</li><li>ä¸€èˆ¬åªåœ¨å°è§„æ¨¡ç½‘ç»œä¸­é‡‡ç”¨ã€‚</li></ol><h3 id="åŠ¨æ€è·¯ç”±é€‰æ‹©">1.2 åŠ¨æ€è·¯ç”±é€‰æ‹©</h3><ol type="1"><li>è·¯ç”±å™¨é€šè¿‡è·¯ç”±é€‰æ‹©åè®®è‡ªåŠ¨è·å–è·¯ç”±ä¿¡æ¯æ¯”è¾ƒå¤æ‚ã€å¼€é”€æ¯”è¾ƒå¤§ï¼Œ</li><li>èƒ½è¾ƒå¥½åœ°é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–</li><li>é€‚ç”¨äºå¤§è§„æ¨¡ç½‘ç»œ</li></ol><h3 id="å› ç‰¹ç½‘æ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®çš„ä¸»è¦ç‰¹ç‚¹">1.3å› ç‰¹ç½‘æ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®çš„ä¸»è¦ç‰¹ç‚¹</h3><ol type="1"><li>è‡ªé€‚åº”<ol type="1"><li>åŠ¨æ€è·¯ç”±é€‰æ‹©ï¼Œèƒ½è¾ƒå¥½åœ°é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–</li></ol></li><li>åˆ†å¸ƒå¼<ol type="1"><li>è·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯</li></ol></li><li>åˆ†å±‚æ¬¡<ol type="1"><li>å°†æ•´ä¸ªå› ç‰¹ç½‘åˆ’åˆ†ä¸ºè®¸å¤šè¾ƒå°çš„è‡ªæ²»ç³»ç»ŸAS(Autonomous Systemï¼‰</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117204127866.png"></p><h3 id="å› ç‰¹ç½‘é‡‡ç”¨åˆ†å±‚æ¬¡çš„è·¯ç”±é€‰æ‹©åè®®">1.4å› ç‰¹ç½‘é‡‡ç”¨åˆ†å±‚æ¬¡çš„è·¯ç”±é€‰æ‹©åè®®</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117204721689.png"></p><ol type="1"><li>ä¸€èˆ¬ä¸€ä¸ªISPè´Ÿè´£çš„æ‰€æœ‰ç½‘ç»œä½œä¸ºä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿ<ol type="1"><li>å†…éƒ¨ç½‘å…³åè®®ï¼ˆIGPï¼‰å’Œå¤–éƒ¨ç½‘å…³åè®®ï¼ˆEGPï¼‰æ˜¯åè®®åˆ†ç±»çš„æ€»ç§°ï¼Œä¸æ˜¯å…·ä½“çš„åè®®å</li></ol></li><li>è·¯ç”±é€‰æ‹©åè®®</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117204849446.png"></p><ol start="3" type="1"><li>è·¯ç”±å™¨çš„åŸºæœ¬ç»“æ„</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117204931573.png"></p><ol start="4" type="1"><li>è·¯ç”±è¡¨ä¸€èˆ¬ä»…åŒ…å«ä»ç›®çš„ç½‘ç»œåˆ°ä¸‹ä¸€è·³çš„æ˜ å°„</li><li>è·¯ç”±è¡¨éœ€è¦å¯¹ç½‘ç»œæ‹“æ‰‘å˜åŒ–çš„è®¡ç®—æœ€ä¼˜åŒ–<ol type="1"><li>è½¬å‘è¡¨æ˜¯ä»è·¯ç”±è¡¨å¾—å‡ºçš„</li><li>è½¬å‘è¡¨çš„ç»“æ„åº”å½“ä½¿æŸ¥æ‰¾è¿‡ç¨‹æœ€ä¼˜åŒ–</li></ol></li></ol><h2 id="è·¯ç”±ä¿¡æ¯ripåè®®å·¥ä½œåŸç†">2. è·¯ç”±ä¿¡æ¯RIPåè®®å·¥ä½œåŸç†</h2><ol type="1"><li>è·¯ç”±ä¿¡æ¯åè®®RIP(Routing InformationProtocol)æ˜¯å†…éƒ¨ç½‘å…³åè®®IGPä¸­æœ€å…ˆå¾—åˆ°å¹¿æ³›ä½¿ç”¨çš„åè®®ä¹‹ä¸€ï¼Œå…¶ç›¸å…³æ ‡å‡†æ–‡æ¡£ä¸ºRFC1058ã€‚</li><li>RIPè¦æ±‚è‡ªæ²»ç³»ç»ŸASå†…çš„æ¯ä¸€ä¸ªè·¯ç”±å™¨éƒ½è¦ç»´æŠ¤ä»å®ƒè‡ªå·±åˆ°ASå†…å…¶ä»–æ¯ä¸€ä¸ªç½‘ç»œçš„è·ç¦»è®°å½•ã€‚è¿™æ˜¯ä¸€ç»„è·ç¦»ï¼Œç§°ä¸ºâ€œè·ç¦»å‘é‡â€ã€‚</li><li>RIPä½¿ç”¨è·³æ•°(Hop Count)ä½œä¸ºåº¦é‡(Metric)æ¥è¡¡é‡åˆ°è¾¾ç›®çš„ç½‘ç»œçš„è·ç¦»ã€‚<ol type="1"><li>è·¯ç”±å™¨åˆ°ç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸º1ã€‚è·¯ç”±å™¨åˆ°éç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸ºæ‰€ç»è¿‡çš„è·¯ç”±å™¨æ•°åŠ 1ã€‚</li><li>å…è®¸ä¸€æ¡è·¯å¾„æœ€å¤šåªèƒ½åŒ…å«15ä¸ªè·¯ç”±å™¨ã€‚â€œè·ç¦»â€ç­‰äº16æ—¶ç›¸å½“äºä¸å¯è¾¾ã€‚å› æ­¤ï¼ŒRIPåªé€‚ç”¨äºå°å‹äº’è”ç½‘ã€‚</li></ol></li><li>RIPè®¤ä¸ºå¥½çš„è·¯ç”±å°±æ˜¯â€œè·ç¦»çŸ­â€çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯æ‰€é€šè¿‡è·¯ç”±å™¨æ•°é‡æœ€å°‘çš„è·¯ç”±</li><li>å½“åˆ°è¾¾åŒä¸€ç›®çš„ç½‘ç»œæœ‰å¤šæ¡â€œè·ç¦»ç›¸ç­‰â€çš„è·¯ç”±æ—¶ï¼Œå¯ä»¥è¿›è¡Œç­‰ä»·è´Ÿè½½å‡è¡¡</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117205628647.png"></p><h3 id="ç‰¹ç‚¹">2.1 ç‰¹ç‚¹</h3><ol type="1"><li>ä»…å’Œç›¸é‚»è·¯ç”±å™¨äº¤æ¢ä¿¡æ¯</li><li>äº¤æ¢çš„ä¿¡æ¯æ˜¯è‡ªå·±çš„è·¯ç”±è¡¨</li><li>å‘¨æœŸæ€§äº¤æ¢è¯¥ä¿¡æ¯</li></ol><h3 id="rpçš„åŸºæœ¬å·¥ä½œæµç¨‹">2.2 RPçš„åŸºæœ¬å·¥ä½œæµç¨‹</h3><ol type="1"><li>è·¯ç”±å™¨åˆšå¼€å§‹å·¥ä½œæ—¶ï¼ŒåªçŸ¥é“è‡ªå·±åˆ°ç›´è¿ç½‘ç»œçš„è·ç¦»ä¸º1ã€‚</li><li>æ¯ä¸ªè·¯ç”±å™¨ä»…å’Œç›¸é‚»è·¯ç”±å™¨å‘¨æœŸæ€§åœ°äº¤æ¢å¹¶æ›´æ–°è·¯ç”±ä¿¡æ¯ã€‚</li><li>è‹¥å¹²æ¬¡äº¤æ¢å’Œæ›´æ–°åï¼Œæ¯ä¸ªè·¯ç”±å™¨éƒ½çŸ¥é“åˆ°è¾¾æœ¬ASå†…å„ç½‘ç»œçš„æœ€çŸ­è·ç¦»å’Œä¸‹ä¸€è·³åœ°å€ï¼Œç§°ä¸ºæ”¶æ•›ã€‚</li></ol><h3 id="æ›´æ–°è§„åˆ™">2.3 æ›´æ–°è§„åˆ™</h3><ol type="1"><li>å‘ç°äº†æ–°çš„ç½‘ç»œï¼Œæ·»åŠ </li><li>åˆ°è¾¾ç›®çš„ç½‘ç»œï¼Œç›¸åŒä¸‹ä¸€è·³ï¼Œæœ€æ–°æ¶ˆæ¯ï¼Œæ›´æ–°</li><li>åˆ°è¾¾ç›®çš„ç½‘ç»œï¼Œä¸åŒä¸‹ä¸€è·³ï¼Œæ–°è·¯ç”±ä¼˜åŠ¿ï¼Œæ›´æ–°</li><li>åˆ°è¾¾ç›®çš„ç½‘ç»œï¼Œä¸åŒä¸‹ä¸€è·³ï¼Œæ–°è·¯ç”±åŠ£åŠ¿ï¼Œä¸æ›´æ–°</li><li>åˆ°è¾¾ç›®çš„ç½‘ç»œï¼Œä¸åŒä¸‹ä¸€è·³ï¼Œç­‰ä»·è´Ÿè½½å‡è¡¡</li></ol><ul><li>RIPå­˜åœ¨â€œåæ¶ˆæ¯ä¼ æ’­å¾—æ…¢â€çš„é—®é¢˜</li></ul><blockquote><p>åæ¶ˆæ¯ä¼ æ’­å¾—æ…¢â€åˆç§°ä¸ºè·¯ç”±ç¯è·¯æˆ–è·ç¦»æ— ç©·è®¡æ•°é—®é¢˜ï¼Œè¿™æ˜¯è·ç¦»å‘é‡ç®—æ³•çš„ä¸€ä¸ªå›ºæœ‰é—®é¢˜ã€‚</p></blockquote><ul><li>å¯ä»¥é‡‡å–å¤šç§æªæ–½å‡å°‘å‡ºç°è¯¥é—®é¢˜çš„æ¦‚ç‡æˆ–å‡å°è¯¥é—®é¢˜å¸¦æ¥çš„å±å®³ã€‚<ul><li>é™åˆ¶æœ€å¤§è·¯å¾„è·ç¦»ä¸º15(16è¡¨ç¤ºä¸å¯è¾¾)</li><li>å½“è·¯ç”±è¡¨å‘ç”Ÿå˜åŒ–æ—¶å°±ç«‹å³å‘é€æ›´æ–°æŠ¥æ–‡ï¼ˆå³â€œè§¦å‘æ›´æ–°â€ï¼‰ï¼Œè€Œä¸ä»…æ˜¯å‘¨æœŸæ€§å‘é€</li><li>è®©è·¯ç”±å™¨è®°å½•æ”¶åˆ°æŸç‰¹å®šè·¯ç”±ä¿¡æ¯çš„æ¥å£ï¼Œè€Œä¸è®©åŒä¸€è·¯ç”±ä¿¡æ¯å†é€šè¿‡æ­¤æ¥å£å‘åæ–¹å‘ä¼ é€ï¼ˆå³â€œæ°´å¹³åˆ†å‰²â€ï¼‰</li></ul></li></ul><h2 id="å¼€æ”¾æœ€çŸ­è·¯å¾„ospfåè®®çš„å·¥ä½œåŸç†">3.å¼€æ”¾æœ€çŸ­è·¯å¾„OSPFåè®®çš„å·¥ä½œåŸç†</h2><h3 id="ospfåè®®">3.1 OSPFåè®®</h3><ol type="1"><li>å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆOSPF(Open Shortest PathFirst),æ˜¯ä¸ºå…‹æœRIPçš„ç¼ºç‚¹åœ¨1989å¹´å¼€å‘å‡ºæ¥çš„ã€‚</li><li>â€œå¼€æ”¾â€è¡¨æ˜OSPFåè®®ä¸æ˜¯å—æŸä¸€å®¶å‚å•†æ§åˆ¶ï¼Œè€Œæ˜¯å…¬å¼€å‘è¡¨çš„ã€‚</li><li>â€œæœ€çŸ­è·¯å¾„ä¼˜å…ˆâ€æ˜¯å› ä¸ºä½¿ç”¨äº†Dijkstraæå‡ºçš„æœ€çŸ­è·¯å¾„ç®—æ³•SPFã€‚</li><li>OSPFæ˜¯åŸºäºé“¾è·¯çŠ¶æ€çš„ï¼Œè€Œä¸åƒRIPé‚£æ ·æ˜¯åŸºäºè·ç¦»å‘é‡çš„ã€‚</li><li>OSPFé‡‡ç”¨SPFç®—æ³•è®¡ç®—è·¯ç”±ï¼Œä»ç®—æ³•ä¸Šä¿è¯äº†ä¸ä¼šäº§ç”Ÿè·¯ç”±ç¯è·¯ã€‚</li><li>OSPFä¸é™åˆ¶ç½‘ç»œè§„æ¨¡ï¼Œæ›´æ–°æ•ˆç‡é«˜ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ã€‚</li></ol><h3 id="é“¾è·¯">3.2 é“¾è·¯</h3><ol type="1"><li>é“¾è·¯çŠ¶æ€æ˜¯æŒ‡æœ¬è·¯ç”±å™¨éƒ½å’Œå“ªäº›è·¯ç”±å™¨ç›¸é‚»ï¼Œä»¥åŠç›¸åº”é“¾è·¯çš„â€œä»£ä»·â€(cost)ã€‚</li><li>â€œä»£ä»·â€ç”¨æ¥è¡¨ç¤ºè´¹ç”¨ã€è·ç¦»ã€æ—¶å»¶ã€å¸¦å®½ï¼Œç­‰ç­‰ã€‚è¿™äº›éƒ½ç”±ç½‘ç»œç®¡ç†äººå‘˜æ¥å†³å®šã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117211227799.png"></p><ol type="1"><li>OSPFç›¸é‚»è·¯ç”±å™¨ä¹‹é—´é€šè¿‡äº¤äº’é—®å€™(Hllo)åˆ†ç»„ï¼Œå»ºç«‹å’Œç»´æŠ¤é‚»å±…å…³ç³»ã€‚<ol type="1"><li>Helloåˆ†ç»„å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œå‘å¾€ç»„æ’­åœ°å€224.0.0.5ï¼›</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117211306170.png"></p><ol start="2" type="1"><li>å‘é€å‘¨æœŸä¸º10ç§’<ol type="1"><li>40ç§’æœªæ”¶åˆ°æ¥è‡ªé‚»å±…è·¯ç”±å™¨çš„Hloåˆ†ç»„ï¼Œåˆ™è®¤ä¸ºè¯¥é‚»å±…è·¯ç”±å™¨ä¸å¯è¾¾ã€‚</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117211527755.png"></p><h3 id="é“¾è·¯çŠ¶æ€é€šå‘Š">3.3 é“¾è·¯çŠ¶æ€é€šå‘Š</h3><blockquote><p>ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½ä¼šäº§ç”Ÿé“¾è·¯çŠ¶æ€é€šå‘Š LSA (Link StateAdvertisement)ã€‚</p></blockquote><ol type="1"><li>LSAä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š<ol type="1"><li>ç›´è¿ç½‘ç»œçš„é“¾è·¯çŠ¶æ€ä¿¡æ¯</li><li>é‚»å±…è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯</li></ol></li><li>LSAè¢«å°è£…åœ¨é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„LSUä¸­ï¼Œé‡‡ç”¨æ´ªæ³›æ³•å‘é€ã€‚ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªé“¾è·¯çŠ¶æ€æ•°æ®åº“LSDBï¼Œç”¨äºå­˜å‚¨LSAã€‚</li><li>é€šè¿‡å„è·¯ç”±å™¨æ´ªæ³›å‘é€å°è£…æœ‰è‡ªå·±LSAçš„LSUåˆ†ç»„ï¼Œå„è·¯ç”±å™¨çš„LSDBæœ€ç»ˆå°†è¾¾åˆ°ä¸€è‡´ã€‚</li><li>ä½¿ç”¨OSPFçš„å„è·¯ç”±å™¨åŸºäºLSDBè¿›è¡Œæœ€çŸ­è·¯å¾„ä¼˜å…ˆSPFè®¡ç®—ï¼Œæ„å»ºå‡ºå„è‡ªåˆ°è¾¾å…¶ä»–å„è·¯ç”±å™¨çš„æœ€çŸ­è·¯å¾„ï¼Œå³æ„å»ºå„è‡ªçš„è·¯ç”±è¡¨ã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117211848406.png"></p><h3 id="ospfå…±æœ‰äº”ç§åˆ†ç»„ç±»å‹">3.4 OSPFå…±æœ‰äº”ç§åˆ†ç»„ç±»å‹</h3><ol type="1"><li>é—®å€™åˆ†ç»„ï¼ˆHelloï¼‰<ol type="1"><li>ç”¨æ¥å‘ç°å’Œç»´æŠ¤é‚»å±…è·¯ç”±å™¨çš„å¯è¾¾æ€§ã€‚</li></ol></li><li>æ•°æ®åº“æè¿°åˆ†ç»„ï¼ˆDDï¼‰<ol type="1"><li>å‘é‚»å±…è·¯ç”±å™¨ç»™å‡ºè‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­çš„æ‰€æœ‰é“¾è·¯çŠ¶æ€é¡¹ç›®çš„æ‘˜è¦ä¿¡æ¯</li></ol></li><li>é“¾è·¯çŠ¶æ€è¯·æ±‚åˆ†ç»„ï¼ˆLSRï¼‰<ol type="1"><li>å‘é‚»å±…è·¯ç”±å™¨è¯·æ±‚å‘é€æŸäº›é“¾è·¯çŠ¶æ€é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ã€‚</li></ol></li><li>é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„ï¼ˆLSUï¼‰<ol type="1"><li>è·¯ç”±å™¨ä½¿ç”¨è¿™ç§åˆ†ç»„å°†å…¶é“¾è·¯çŠ¶æ€è¿›è¡Œæ´ªæ³›å‘é€ï¼Œå³ç”¨æ´ªæ³›æ³•å¯¹å…¨ç½‘æ›´æ–°é“¾è·¯çŠ¶æ€ã€‚</li></ol></li><li>é“¾è·¯ç¡®è®¤åˆ†ç»„ï¼ˆLSAï¼‰<ol type="1"><li>è¿™æ˜¯å¯¹é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„ã€‚</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20230717155343654.png"></p><h3 id="ospfçš„åŸºæœ¬å·¥ä½œè¿‡ç¨‹">3.5 OSPFçš„åŸºæœ¬å·¥ä½œè¿‡ç¨‹</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20230717155522453.png"></p><ol type="1"><li>OSPFåœ¨å¤šç‚¹æ¥å…¥çš„ç½‘ç»œä¸­è·¯ç”±å™¨é‚»é‡Œå…³ç³»çš„å»ºç«‹<ol type="1"><li>é€‰ä¸¾æŒ‡å®šè·¯ç”±å™¨DR(designated router)å’Œå¤‡ç”¨çš„æŒ‡å®šè·¯ç”±å™¨BDR(backupdesignated router)</li><li>æ‰€æœ‰çš„éDR/BDRåªä¸DR/BDRå»ºç«‹é‚»å±…å…³ç³»ï¼Œå³éDR/BDRä¹‹é—´é€šè¿‡DR/BDRäº¤æ¢ä¿¡æ¯</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20230717155708575.png"></p><ol start="2" type="1"><li>ä¸ºäº†ä½¿OSPFèƒ½å¤Ÿç”¨äºè§„æ¨¡å¾ˆå¤§çš„ç½‘ç»œï¼ŒOSPFæŠŠä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œå«åšåŒºåŸŸ(Area)<ol type="1"><li>åˆ’åˆ†åŒºåŸŸçš„å¥½å¤„å°±æ˜¯æŠŠåˆ©ç”¨æ´ªæ³›æ³•äº¤æ¢é“¾è·¯çŠ¶ä½“ä¿¡æ¯çš„èŒƒå›´å±€é™äºæ¯ä¸€ä¸ªåŒºåŸŸè€Œä¸æ˜¯æ•´ä¸ªè‡ªæ²»ç³»ç»Ÿï¼Œè¿™å°±å‡å°‘äº†æ•´ä¸ªç½‘ç»œä¸Šçš„é€šä¿¡é‡ã€‚</li><li>æ¯ä¸ªåŒºåŸŸä¸å¤§äº200ä¸ªè·¯ç”±å™¨</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117213232150.png"></p><h2 id="è¾¹ç•Œç½‘å…³åè®®bgpçš„åŸºæœ¬å·¥ä½œåŸç†">4.è¾¹ç•Œç½‘å…³åè®®BGPçš„åŸºæœ¬å·¥ä½œåŸç†</h2><h3 id="bgpåŸç†">4.1 BGPåŸç†</h3><ol type="1"><li>BGPåªèƒ½æ˜¯åŠ›æ±‚å¯»æ‰¾ä¸€æ¡èƒ½å¤Ÿåˆ°è¾¾ç›®çš„ç½‘ç»œä¸”æ¯”è¾ƒå¥½çš„è·¯ç”±ï¼ˆä¸èƒ½å…œåœˆå­ï¼‰ï¼Œè€Œå¹¶éè¦å¯»æ‰¾ä¸€æ¡æœ€ä½³è·¯ç”±</li><li>BGPè¦è§£å†³çš„é—®é¢˜<ol type="1"><li>åœ¨ä¸åŒè‡ªæ²»ç³»ç»Ÿå†…ï¼Œåº¦é‡è·¯ç”±çš„â€œä»£ä»·â€ï¼ˆè·ç¦»ï¼Œå¸¦å®½ï¼Œè´¹ç”¨ç­‰)å¯èƒ½ä¸åŒã€‚å› æ­¤ï¼Œå¯¹äºè‡ªæ²»ç³»ç»Ÿä¹‹é—´çš„è·¯ç”±é€‰æ‹©ï¼Œä½¿ç”¨â€œä»£ä»·â€ä½œä¸ºåº¦é‡æ¥å¯»æ‰¾æœ€ä½³è·¯ç”±æ˜¯ä¸è¡Œçš„ã€‚</li><li>è‡ªæ²»ç³»ç»Ÿä¹‹é—´çš„è·¯ç”±é€‰æ‹©å¿…é¡»è€ƒè™‘ç›¸å…³ç­–ç•¥ï¼ˆæ”¿æ²»ï¼Œç»æµï¼Œå®‰å…¨ç­‰ï¼‰</li></ol></li></ol><h3 id="äº¤æ¢è·¯ç”±çš„è¿‡ç¨‹">4.2 äº¤æ¢è·¯ç”±çš„è¿‡ç¨‹</h3><ol type="1"><li><p>åœ¨é…ç½®BGPæ—¶ï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿçš„ç®¡ç†å‘˜è¦é€‰æ‹©è‡³å°‘ä¸€ä¸ªè·¯ç”±å™¨ä½œä¸ºè¯¥è‡ªæ²»ç³»ç»Ÿçš„â€œBGPå‘è¨€äººâ€ï¼Œä¸åŒè‡ªæ²»ç³»ç»Ÿçš„BGPå‘è¨€äººè¦äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œé¦–å…ˆå¿…é¡»å»ºç«‹TCPè¿æ¥ï¼Œç«¯å£å·ä¸º179</p></li><li><p>åœ¨æ­¤TCPè¿æ¥ä¸Šäº¤æ¢BGPæŠ¥æ–‡ä»¥å»ºç«‹BGPä¼šè¯</p></li><li><p>åˆ©ç”¨BGPä¼šè¯äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå¢åŠ æ–°çš„è·¯ç”±ï¼Œæˆ–æ’¤é”€è¿‡æ—¶çš„è·¯ç”±ï¼Œä»¥åŠæŠ¥å‘Šå‡ºé”™çš„æƒ…å†µç­‰ï¼‰</p><blockquote><p>ä½¿ç”¨TCPè¿æ¥äº¤æ¢è·¯ç”±ä¿¡æ¯çš„ä¸¤ä¸ªBGPå‘è¨€äººï¼Œå½¼æ­¤ç§°ä¸ºå¯¹æ–¹çš„é‚»ç«™(neighbor)æˆ–å¯¹ç­‰ç«™(peer)</p></blockquote></li><li><p>BGPå‘è¨€äººé™¤äº†è¿è¡ŒBGPå¤–ï¼Œè¿˜å¿…é¡»è¿è¡Œè‡ªå·±æ‰€åœ¨è‡ªæ²»ç³»ç»Ÿæ‰€ä½¿ç”¨çš„å†…éƒ¨ç½‘å…³åè®®IGP,ä¾‹å¦‚OSPFæˆ–RIPã€‚</p></li><li><p>å½“BGPå‘è¨€äººäº’ç›¸äº¤æ¢äº†ç½‘ç»œå¯è¾¾æ€§çš„ä¿¡æ¯åï¼Œå„BGPå‘è¨€äººå°±æ ¹æ®æ‰€é‡‡ç”¨çš„ç­–ç•¥ä»æ”¶åˆ°çš„è·¯ç”±ä¿¡æ¯ä¸­æ‰¾å‡ºåˆ°è¾¾å„è‡ªæ²»ç³»ç»Ÿçš„è¾ƒå¥½çš„è·¯ç”±ã€‚ä¹Ÿå°±æ˜¯æ„é€ å‡ºæ ‘å½¢ç»“æ„ã€ä¸å­˜åœ¨å›è·¯çš„è‡ªæ²»ç³»ç»Ÿè¿é€šå›¾ã€‚</p></li></ol><h3 id="bgpé€‚ç”¨äºå¤šçº§ç»“æ„çš„å› ç‰¹ç½‘">4.3 BGPé€‚ç”¨äºå¤šçº§ç»“æ„çš„å› ç‰¹ç½‘</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117214100280.png"></p><h3 id="bgp-4å››ç§æŠ¥æ–‡ç±»å‹">4.4 BGP-4å››ç§æŠ¥æ–‡ç±»å‹</h3><table><thead><tr><th style="text-align: center;">æŠ¥æ–‡</th><th style="text-align: left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align: center;">OPEN(æ‰“å¼€)æŠ¥æ–‡</td><td style="text-align: left;">ç”¨æ¥ä¸ç›¸é‚»çš„å¦ä¸€ä¸ªBGPå‘è¨€äººå»ºç«‹å…³ç³»ï¼Œä½¿é€šä¿¡åˆå§‹åŒ–</td></tr><tr><td style="text-align: center;">UPDATE(æ›´æ–°)æŠ¥æ–‡</td><td style="text-align: left;">ç”¨æ¥é€šå‘ŠæŸä¸€è·¯ç”±çš„ä¿¡æ¯ï¼Œä»¥åŠåˆ—å‡ºè¦æ’¤é”€çš„å¤šæ¡è·¯ç”±</td></tr><tr><td style="text-align: center;">KEEPALIVE(ä¿æ´»)æŠ¥æ–‡</td><td style="text-align: left;">ç”¨æ¥å‘¨æœŸæ€§åœ°è¯å®é‚»ç«™çš„è¿é€šæ€§ã€‚</td></tr><tr><td style="text-align: center;">NOTIFICATION(é€šçŸ¥)æŠ¥æ–‡</td><td style="text-align: left;">ç”¨æ¥å‘é€æ£€æµ‹åˆ°çš„å·®é”™ã€‚</td></tr></tbody></table><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE/image-20241117214318616.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.5 é™æ€è·¯ç”±é…ç½®åŠå…¶å¯èƒ½äº§ç”Ÿçš„è·¯ç”±ç¯è·¯é—®é¢˜</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="é™æ€è·¯ç”±é…ç½®åŠå…¶å¯èƒ½äº§ç”Ÿçš„è·¯ç”±ç¯è·¯é—®é¢˜">4.5é™æ€è·¯ç”±é…ç½®åŠå…¶å¯èƒ½äº§ç”Ÿçš„è·¯ç”±ç¯è·¯é—®é¢˜</h1><ul><li>é™æ€è·¯ç”±é…ç½®æ˜¯æŒ‡ç”¨æˆ·æˆ–ç½‘ç»œç®¡ç†å‘˜ä½¿ç”¨è·¯ç”±å™¨çš„ç›¸å…³å‘½ä»¤ç»™è·¯ç”±å™¨äººå·¥é…ç½®è·¯ç”±è¡¨ã€‚<ul><li>è¿™ç§äººå·¥é…ç½®æ–¹å¼ç®€å•ã€å¼€é”€å°ã€‚ä½†ä¸èƒ½åŠæ—¶é€‚åº”ç½‘ç»œçŠ¶æ€ï¼ˆæµé‡ã€æ‹“æ‰‘ç­‰ï¼‰çš„å˜åŒ–ã€‚</li><li>ä¸€èˆ¬åªåœ¨å°è§„æ¨¡ç½‘ç»œä¸­é‡‡ç”¨ã€‚</li></ul></li></ul><h2 id="ä½¿ç”¨é™æ€è·¯ç”±é…ç½®å¯èƒ½å‡ºç°ä»¥ä¸‹å¯¼è‡´äº§ç”Ÿè·¯ç”±ç¯è·¯çš„é”™è¯¯">1.ä½¿ç”¨é™æ€è·¯ç”±é…ç½®å¯èƒ½å‡ºç°ä»¥ä¸‹å¯¼è‡´äº§ç”Ÿè·¯ç”±ç¯è·¯çš„é”™è¯¯</h2><h3 id="é…ç½®é”™è¯¯">1.1 é…ç½®é”™è¯¯</h3><ul><li>è§£å†³æ–¹æ³•ï¼š<ul><li>IPæ•°æ®æŠ¥å¤´éƒ¨è®¾ç½®ä¸€ä¸ªç”Ÿå­˜æœŸï¼Œæ¯ç»è¿‡ä¸€æ¬¡è·¯ç”±è½¬å‘ï¼Œå…¶å€¼å‡ä¸€ï¼Œå½“å…¶å€¼å°äºç­‰äº0æ—¶è¢«ä¸¢å¼ƒ</li><li>ä¸ºäº†é˜²æ­¢Pæ•°æ®æŠ¥åœ¨è·¯ç”±ç¯è·¯ä¸­æ°¸ä¹…å…œåœˆï¼Œåœ¨IPæ•°æ®æŠ¥é¦–éƒ¨è®¾æœ‰ç”Ÿå­˜æ—¶é—´TTLå­—æ®µã€‚</li><li>IPæ•°æ®æŠ¥è¿›å…¥è·¯ç”±å™¨åï¼ŒTTLå­—æ®µçš„å€¼å‡1ã€‚è‹¥TTLçš„å€¼ä¸ç­‰äº0ï¼Œåˆ™è¢«è·¯ç”±å™¨è½¬å‘ï¼Œå¦åˆ™è¢«ä¸¢å¼ƒã€‚</li></ul></li></ul><h3 id="èšåˆäº†ä¸å­˜åœ¨çš„ç½‘ç»œ">1.2 èšåˆäº†ä¸å­˜åœ¨çš„ç½‘ç»œ</h3><ul><li>é™æ€é…ç½®ä¸å­˜åœ¨çš„IPç½‘ç»œä¸ºé»‘æ´è·¯ç”±</li></ul><h3 id="ç½‘ç»œæ•…éšœ">1.3 ç½‘ç»œæ•…éšœ</h3><ul><li>é™æ€é…ç½®æ•…éšœçš„IPç½‘ç»œä¸ºé»‘æ´è·¯ç”±ï¼Œå½“å…¶æ•…éšœä¿®å¤åï¼Œå†è‡ªåŠ¨æ·»åŠ å›æ¥å¹¶è®¾ç½®é»‘æ´è·¯ç”±æ— æ•ˆï¼Œè‹¥å†æ•…éšœï¼Œåˆ™åˆ é™¤å¹¶è®¾ç½®ä¹‹å‰çš„é»‘æ´è·¯ç”±æœ‰æ•ˆ</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98/image-20241117203152226.png"></p><h2 id="è·¯ç”±æ¡ç›®çš„ç±»å‹">2. è·¯ç”±æ¡ç›®çš„ç±»å‹</h2><ol type="1"><li>ç›´è¿ç½‘ç»œ</li><li>é™æ€è·¯ç”±ï¼ˆäººå·¥é…ç½®ï¼‰</li><li>åŠ¨æ€è·¯ç”±ï¼ˆè·¯ç”±é€‰æ‹©åè®®ï¼‰</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98/image-20241117202703876.png"></p><ol start="4" type="1"><li>ç‰¹å®šä¸»æœºè·¯ç”±<ol type="1"><li><p>ç‰¹æ®Šçš„é™æ€è·¯ç”±æ¡ç›®</p></li><li><p>é»˜è®¤è·¯ç”±ï¼ˆç›®çš„ç½‘ç»œä¸º0.0.0.0ï¼Œåœ°å€æ©ç ä¸º0.0.0.0ï¼‰</p><blockquote><p>å½“è·¯ç”±è¡¨æŸ¥æ‰¾ä¸åˆ°ç›®æ ‡ç½‘ç»œæ—¶ï¼Œä½¿ç”¨è¯¥è·¯ç”±</p></blockquote></li><li><p>ç‰¹å®šä¸»æœºè·¯ç”±ï¼ˆç›®çš„ç½‘ç»œä¸ºç‰¹å®šä¸»æœºçš„1Påœ°å€ï¼Œåœ°å€æ©ç ä¸º255.255.255.255ï¼‰</p></li><li><p>é»‘æ´è·¯ç”±ï¼ˆä¸‹ä¸€è·³ä¸ºnull0)</p></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.4 IPæ•°æ®åŒ…çš„å‘é€å’Œè½¬å‘è¿‡ç¨‹</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-4-IP%E6%95%B0%E6%8D%AE%E5%8C%85%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-4-IP%E6%95%B0%E6%8D%AE%E5%8C%85%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="ipæ•°æ®æŠ¥å‘é€å’Œè½¬å‘è¿‡ç¨‹">4.4 IPæ•°æ®æŠ¥å‘é€å’Œè½¬å‘è¿‡ç¨‹</h1><ul><li>åˆ†ä¸ºä¸¤éƒ¨åˆ†<ul><li>ä¸»æœºå‘é€IPæ•°æ®æŠ¥</li><li>è·¯ç”±å™¨å‘é€IPæ•°æ®æŠ¥</li></ul></li></ul><h2 id="ä¸»æœºå‘é€æ•°æ®æŠ¥">1. ä¸»æœºå‘é€æ•°æ®æŠ¥</h2><ul><li>åˆ¤æ–­ç›®çš„ä¸»æœºæ˜¯å¦ä¸è‡ªå·±åœ¨åŒä¸€ä¸ªç½‘ç»œï¼ˆåˆ¤æ–­æ–¹æ³•è¯·å‚çœ‹æœ¬èŠ‚è¯¾ç›¸å…³ç¤ºä¾‹ï¼‰<ul><li>è‹¥åœ¨åŒä¸€ä¸ªç½‘ç»œï¼Œåˆ™å±äºç›´æ¥äº¤ä»˜ï¼š</li><li>è‹¥ä¸åœ¨åŒä¸€ä¸ªç½‘ç»œï¼Œåˆ™å±äºé—´æ¥äº¤ä»˜ï¼Œä¼ è¾“ç»™ä¸»æœºæ‰€åœ¨ç½‘ç»œçš„é»˜è®¤ç½‘å…³(è·¯ç”±å™¨)ï¼Œç”±é»˜è®¤ç½‘å…³å¸®å¿™è½¬å‘ï¼›</li></ul></li></ul><h2 id="è·¯ç”±å™¨è½¬å‘æ•°æ®æŠ¥">2. è·¯ç”±å™¨è½¬å‘æ•°æ®æŠ¥</h2><ul><li>æ£€æŸ¥IPæ•°æ®æŠ¥é¦–éƒ¨æ˜¯å¦å‡ºé”™ï¼š<ul><li>è‹¥å‡ºé”™ï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒè¯¥Pæ•°æ®æŠ¥å¹¶é€šå‘Šæºä¸»æœºï¼›</li><li>è‹¥æ²¡æœ‰å‡ºé”™ï¼Œåˆ™è¿›è¡Œè½¬å‘ï¼›</li></ul></li><li>æ ¹æ®IPæ•°æ®æŠ¥çš„ç›®çš„åœ°å€åœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾åŒ¹é…çš„æ¡ç›®(æŸ¥æ‰¾æ–¹æ³•è¯·å‚çœ‹æœ¬èŠ‚è¯¾ç›¸å…³ç¤ºä¾‹)ï¼š<ul><li>è‹¥æ‰¾åˆ°åŒ¹é…çš„æ¡ç›®ï¼Œåˆ™è½¬å‘ç»™æ¡ç›®ä¸­æŒ‡ç¤ºçš„ä¸‹ä¸€è·³ï¼›</li><li>è‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™ä¸¢å¼ƒè¯¥Pæ•°æ®æŠ¥å¹¶é€šå‘Šæºä¸»æœºï¼›</li></ul></li></ul><h2 id="éš”ç¦»">3. éš”ç¦»</h2><ul><li>ä¸­ç»§å™¨å’Œé›†çº¿å™¨å·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œæ—¢ä¸éš”ç¦»å†²çªåŸŸä¹Ÿä¸éš”ç¦»å¹¿æ’­åŸŸã€‚</li><li>ç½‘æ¡¥å’Œäº¤æ¢æœºï¼ˆå¤šç«¯å£ç½‘æ¡¥ï¼‰å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥éš”ç¦»å†²çªåŸŸï¼Œä¸èƒ½éš”ç¦»å¹¿æ’­åŸŸã€‚</li><li>è·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œæ—¢éš”ç¦»å†²çªåŸŸï¼Œä¹Ÿéš”ç¦»å¹¿æ’­åŸŸã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.3 IPv4</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/</url>
    
    <content type="html"><![CDATA[<h1 id="ipv4">4.3 IPv4</h1><h2 id="ipv4åœ°å€æ¦‚è¿°">1. IPv4åœ°å€æ¦‚è¿°</h2><blockquote><p>ç»™å› ç‰¹ç½‘ä¸Šçš„æ¯ä¸€å°ä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰çš„æ¯ä¸€ä¸ªæ¥å£åˆ†é…ä¸€ä¸ªåœ¨å…¨ä¸–ç•ŒèŒƒå›´å†…æ˜¯å”¯ä¸€çš„32æ¯”ç‰¹çš„æ ‡è¯†ç¬¦ã€‚</p></blockquote><ol type="1"><li>åœ¨TCP/IPä½“ç³»ä¸­ï¼ŒIPåœ°å€æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¿…é¡»æŠŠå®ƒå¼„æ¸…æ¥šã€‚</li><li>IPv4åœ°å€å°±æ˜¯ç»™å› ç‰¹ç½‘(Internet)ä¸Šçš„æ¯ä¸€å°ä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰çš„æ¯ä¸€ä¸ªæ¥å£åˆ†é…ä¸€ä¸ªåœ¨å…¨ä¸–ç•ŒèŒƒå›´å†…æ˜¯å”¯ä¸€çš„32æ¯”ç‰¹çš„æ ‡è¯†ç¬¦ã€‚</li><li>IPåœ°å€ç”±å› ç‰¹ç½‘åå­—å’Œæ•°å­—åˆ†é…æœºæ„ICANN(Internet Corporation forAssigned Names and Numbers)è¿›è¡Œåˆ†é….</li><li>æˆ‘å›½ç”¨æˆ·å¯å‘äºšå¤ªç½‘ç»œä¿¡æ¯ä¸­å¿ƒAPNIC(Asia Pacific Network InformationCenter)ç”³è¯·IPåœ°å€ï¼Œéœ€è¦ç¼´è´¹ã€‚</li><li>2011å¹´2æœˆ3æ—¥ï¼Œäº’è”ç½‘å·ç åˆ†é…ç®¡ç†å±€IANA(ç”±ICANNè¡Œä½¿èŒèƒ½)å®£å¸ƒï¼ŒIPV4åœ°å€å·²ç»åˆ†é…å®Œæ¯•ã€‚</li><li>æˆ‘å›½åœ¨2014è‡³2015å¹´ä¹Ÿé€æ­¥åœæ­¢äº†å‘æ–°ç”¨æˆ·å’Œåº”ç”¨åˆ†é…IPv4åœ°å€ã€‚åŒæ—¶å…¨é¢å¼€å±•å•†ç”¨éƒ¨ç½²IPv6ã€‚</li></ol><h3 id="åè¿›åˆ¶è¡¨ç¤º">1.1 åè¿›åˆ¶è¡¨ç¤º</h3><blockquote><p>32æ¯”ç‰¹çš„1Pv4åœ°å€ä¸æ–¹ä¾¿é˜…è¯»ã€è®°å½•ä»¥åŠè¾“å…¥ç­‰ï¼Œå› æ­¤IPv4åœ°å€é‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ–¹æ³•ä»¥æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚</p><p>å…«ä½ä¸€ç»„ï¼Œä¸­é—´ç”¨ <code>.</code> éš”å¼€</p></blockquote><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716135419296.png"></p><h2 id="åˆ†ç±»ç¼–å€çš„ipv4åœ°å€">2. åˆ†ç±»ç¼–å€çš„IPv4åœ°å€</h2><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716142505440.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716142540603.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20241117190912535.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716142559662.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716141719165.png"></p><h2 id="åˆ’åˆ†å­ç½‘çš„ipv4åœ°å€">3. åˆ’åˆ†å­ç½‘çš„IPv4åœ°å€</h2><ol type="1"><li>ä»ä¸»æœºå·ä¸­å€Ÿç”¨ä¸€éƒ¨åˆ†æ¯”ç‰¹æ¥ä½œä¸ºå­ç½‘å·</li><li>å­ç½‘æ©ç <ol type="1"><li>å­ç½‘æ©ç ä½¿ç”¨è¿ç»­çš„æ¯”ç‰¹1æ¥å¯¹åº”ç½‘ç»œå·å’Œå­ç½‘å·</li><li>å­ç½‘æ©ç ä½¿ç”¨è¿ç»­çš„æ¯”ç‰¹0æ¥å¯¹åº”ä¸»æœºå·</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716165915602.png"></p><ol start="3" type="1"><li>ä¸ºæ–°å¢ç½‘ç»œç”³è¯·æ–°çš„ç½‘ç»œå·ä¼šå¸¦æ¥ä»¥ä¸‹å¼Šç«¯ï¼š<ol type="1"><li>éœ€è¦ç­‰å¾…æ—¶é—´å’ŒèŠ±è´¹æ›´å¤šçš„è´¹ç”¨</li><li>ä¼šå¢åŠ å…¶ä»–è·¯ç”±å™¨ä¸­è·¯ç”±è¡¨è®°å½•çš„æ•°é‡</li><li>æµªè´¹åŸæœ‰ç½‘ç»œå·ä¸­å‰©ä½™çš„å¤§é‡IPåœ°å€</li></ol></li><li>é»˜è®¤å­ç½‘æ©ç </li></ol><figure><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716170001375.png" alt="é»˜è®¤å­ç½‘æ©ç "><figcaption aria-hidden="true">é»˜è®¤å­ç½‘æ©ç </figcaption></figure><h2 id="æ— åˆ†ç±»ç¼–å€çš„ipv4åœ°å€">4. æ— åˆ†ç±»ç¼–å€çš„IPv4åœ°å€</h2><ol type="1"><li>æ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©ï¼ˆCIDRï¼‰æ¶ˆé™¤äº†ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»åœ°å€ï¼Œä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µã€‚</li><li>ä¸ºæ­¤ï¼Œå› ç‰¹ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ETFåˆæå‡ºäº†é‡‡ç”¨æ— åˆ†ç±»ç¼–å€çš„æ–¹æ³•æ¥è§£å†³Påœ°å€ç´§å¼ çš„é—®é¢˜ï¼ŒåŒæ—¶è¿˜ä¸“é—¨æˆç«‹Pv6å·¥ä½œç»„è´Ÿè´£ç ”ç©¶æ–°ç‰ˆæœ¬Pä»¥å½»åº•è§£å†³Påœ°å€è€—å°½é—®é¢˜ã€‚</li><li>1993å¹´ï¼ŒIETFå‘å¸ƒäº†æ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©CIDR(Classless Inter-DomainRouting)çš„RFCæ–‡æ¡£ï¼šRFC1517~1519å’Œ1520ã€‚</li><li>CIDRæ¶ˆé™¤äº†ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»åœ°å€ï¼Œä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼š</li><li>CIDRå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°åˆ†é…IPv4çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–°çš„PV6ä½¿ç”¨ä¹‹å‰å…è®¸å› ç‰¹ç½‘çš„è§„æ¨¡ç»§ç»­å¢é•¿ã€‚</li><li>CIDRå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°åˆ†é…IPV4çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–°çš„PV6ä½¿ç”¨ä¹‹å‰å…è®¸å› ç‰¹ç½‘çš„è§„æ¨¡ç»§ç»­å¢é•¿ã€‚å¦‚ï¼š192.8.32.3/20</li><li>CIDRå®é™…ä¸Šæ˜¯å°†ç½‘ç»œå‰ç¼€éƒ½ç›¸åŒçš„è¿ç»­çš„1Påœ°å€ç»„æˆä¸€ä¸ªâ€œCIDRåœ°å€å—â€ã€‚</li></ol><h2 id="è·¯ç”±èšåˆ">4.1 è·¯ç”±èšåˆ</h2><ul><li>æ„é€ è¶…ç½‘ï¼Œæ‰¾åˆ°ç›¸åŒæ¥å£çš„å¤šä¸ªåœ°å€çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼Œå…¶ä½™ä½å½’0ï¼Œå°†è¯¥åœ°å€è®°å½•ä¸‹æ¥ï¼Œé‚£äº›åœ°å€åˆ é™¤å³å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªåœ°å€</li><li>ç½‘ç»œå‰ç¼€è¶Šé•¿ï¼Œåœ°å€å—è¶Šå°ï¼Œè·¯ç”±è¶Šå…·ä½“</li><li>è‹¥è·¯ç”±å™¨æŸ¥è¡¨è½¬å‘åˆ†ç»„æ—¶å‘ç°æœ‰å¤šæ¡è·¯ç”±å¯é€‰ï¼Œåˆ™é€‰æ‹©ç½‘ç»œå‰ç¼€æœ€é•¿çš„é‚£æ¡ï¼Œè¿™ç§°ä¸ºæœ€é•¿å‰ç¼€åŒ¹é…ã€‚å› ä¸ºè¿™æ ·çš„è·¯ç”±æ›´å…·ä½“</li></ul><h2 id="ipv4åœ°å€çš„åº”ç”¨è§„åˆ’">5. IPv4åœ°å€çš„åº”ç”¨è§„åˆ’</h2><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-3-Pv4/image-20230716214234227.png"></p><ul><li>å˜é•¿çš„å­ç½‘æ©ç æ˜¯CIDRæŠ€æœ¯çš„åº”ç”¨</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.2 ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-2-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-2-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡">4.2 ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡</h1><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-2-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1/image-20230716133452655.png"></p><h2 id="è™šç”µè·¯æœåŠ¡">1. è™šç”µè·¯æœåŠ¡</h2><ol type="1"><li>å¯é é€šä¿¡ç”±ç½‘ç»œæ¥ä¿è¯</li><li>å¿…é¡»å»ºç«‹ç½‘ç»œå±‚çš„è¿æ¥</li><li>è™šç”µè·¯VC(Virtual Circuit)é€šä¿¡åŒæ–¹æ²¿ç€å·²å»ºç«‹çš„è™šç”µè·¯å‘é€åˆ†ç»„ï¼Œç›®çš„ä¸»æœºçš„åœ°å€ä»…åœ¨è¿æ¥å»ºç«‹é˜¶æ®µä½¿ç”¨ï¼Œä¹‹åæ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨åªéœ€æºå¸¦ä¸€æ¡è™šç”µè·¯çš„ç¼–å·ï¼ˆæ„æˆè™šç”µè·¯çš„æ¯ä¸€æ®µé“¾è·¯éƒ½æœ‰ä¸€ä¸ªè™šç”µè·¯ç¼–å·)ã€‚è¿™ç§é€šä¿¡æ–¹å¼å¦‚æœå†ä½¿ç”¨å¯é ä¼ è¾“çš„ç½‘ç»œåè®®ï¼Œå°±å¯ä½¿æ‰€å‘é€çš„åˆ†ç»„æœ€ç»ˆæ­£ç¡®åˆ°è¾¾æ¥æ”¶æ–¹ï¼ˆæ— å·®é”™æŒ‰åºåˆ°è¾¾ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤)ã€‚</li><li>é€šä¿¡ç»“æŸåï¼Œéœ€è¦é‡Šæ”¾ä¹‹å‰æ‰€å»ºç«‹çš„è™šç”µè·¯ã€‚</li><li>å¾ˆå¤šå¹¿åŸŸåˆ†ç»„äº¤æ¢ç½‘éƒ½ä½¿ç”¨é¢å‘è¿æ¥çš„è™šç”µè·¯æœåŠ¡ã€‚<ol type="1"><li>ä¾‹å¦‚ï¼Œæ›¾ç»çš„X.25å’Œé€æ¸è¿‡æ—¶çš„å¸§ä¸­ç»§FRã€å¼‚æ­¥ä¼ è¾“æ¨¡å¼ATMç­‰ã€‚</li></ol></li></ol><h2 id="æ•°æ®æŠ¥æœåŠ¡">2. æ•°æ®æŠ¥æœåŠ¡</h2><ol type="1"><li>æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡</li><li>å¯é é€šä¿¡åº”å½“ç”±ç”¨æˆ·ä¸»æœºæ¥ä¿è¯</li><li>ä¸éœ€è¦å»ºç«‹ç½‘ç»œå±‚è¿æ¥</li><li>æ¯ä¸ªåˆ†ç»„å¯èµ°ä¸åŒçš„è·¯å¾„</li><li>æ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨å¿…é¡»æºå¸¦ç›®çš„ä¸»æœºçš„å®Œæ•´åœ°å€è¿™ç§é€šä¿¡æ–¹å¼æ‰€ä¼ é€çš„åˆ†ç»„å¯èƒ½è¯¯ç ã€ä¸¢å¤±ã€é‡å¤å’Œå¤±åºã€‚</li><li>ç”±äºç½‘ç»œæœ¬èº«ä¸æä¾›ç«¯åˆ°ç«¯çš„å¯é ä¼ è¾“æœåŠ¡ï¼Œè¿™å°±ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨å¯ä»¥åšå¾—æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”ä»·æ ¼ä½å»‰ï¼ˆä¸ç”µä¿¡ç½‘çš„äº¤æ¢æœºç›¸æ¯”è¾ƒï¼‰ã€‚</li><li>å› ç‰¹ç½‘é‡‡ç”¨äº†è¿™ç§è®¾è®¡æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯å°†å¤æ‚çš„ç½‘ç»œå¤„ç†åŠŸèƒ½ç½®äºå› ç‰¹ç½‘çš„è¾¹ç¼˜ï¼ˆç”¨æˆ·ä¸»æœºå’Œå…¶å†…éƒ¨çš„è¿è¾“å±‚)ï¼Œè€Œå°†ç›¸å¯¹ç®€å•çš„å°½æœ€å¤§åŠªåŠ›çš„åˆ†ç»„äº¤ä»˜åŠŸèƒ½ç½®äºå› ç‰¹ç½‘æ ¸å¿ƒã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>4.1 ç½‘ç»œå±‚æ¦‚è¿°</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="ç½‘ç»œå±‚">4.1 ç½‘ç»œå±‚</h1><h2 id="ç½‘ç»œå±‚-1">1. ç½‘ç»œå±‚</h2><ol type="1"><li>ç½‘ç»œå±‚çš„ä¸»è¦ä»»åŠ¡æ˜¯å®ç°ç½‘ç»œäº’è¿ï¼Œè¿›è€Œå®ç°æ•°æ®åŒ…åœ¨å„ç½‘ç»œä¹‹é—´çš„ä¼ è¾“</li><li>è¦å®ç°ç½‘ç»œå±‚ä»»åŠ¡ï¼Œéœ€è¦è§£å†³ä»¥ä¸‹ä¸»è¦é—®é¢˜ï¼š<ol type="1"><li>ç½‘ç»œå±‚å‘è¿è¾“å±‚æä¾›æ€æ ·çš„æœåŠ¡ï¼ˆå¯é ä¼ è¾“ è¿˜æ˜¯ ä¸å¯é ä¼ è¾“ï¼‰<ol type="1"><li>å¦‚æœç½‘ç»œå±‚å¯¹ä¼ è¾“é”™è¯¯ï¼ˆåˆ†ç»„ä¸¢å¤±ï¼Œåˆ†ç»„å¤±åºç­‰ï¼‰ä¸é‡‡å–ä»»ä½•æªæ–½ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸å¯é æœåŠ¡</li><li>TCP/IPç½‘ç»œä½“ç³»ç»“æ„æä¾›çš„å°±æ˜¯æ— è¿æ¥ï¼Œä¸å¯é çš„ä¼ è¾“æœåŠ¡ï¼ˆIPåè®®ï¼‰</li></ol></li><li>ç½‘ç»œå±‚å¯»å€é—®é¢˜</li><li>è·¯ç”±é€‰æ‹©é—®é¢˜</li></ol></li><li>å› ç‰¹ç½‘(Internet)æ˜¯ç›®å‰å…¨ä¸–ç•Œç”¨æˆ·æ•°é‡æœ€å¤šçš„äº’è”ç½‘ï¼Œå®ƒä½¿ç”¨TCP/IPåè®®æ ˆã€‚</li><li>ç”±äºTCP/IPåè®®æ ˆçš„ç½‘ç»œå±‚ä½¿ç”¨ç½‘é™…åè®®IP,å®ƒæ˜¯æ•´ä¸ªåè®®æ ˆçš„æ ¸å¿ƒåè®®ï¼Œå› æ­¤åœ¨TCP/IPåè®®æ ˆä¸­ç½‘ç»œå±‚å¸¸ç§°ä¸ºç½‘é™…å±‚ã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0/image-20241117185613994.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.11 è™šæ‹Ÿå±€åŸŸç½‘VLAN</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-11-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91VLAN%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-11-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91VLAN%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="è™šæ‹Ÿå±€åŸŸç½‘vlan">3.11 è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰</h1><ol type="1"><li>ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆä¹ŸåŒ…æ‹¬ç‰©ç†å±‚ï¼‰</li><li>ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªä»¥å¤ªç½‘äº¤æ¢æœºäº’è¿èµ·æ¥çš„äº¤æ¢å¼ä»¥å¤ªç½‘ï¼Œå…¶æ‰€æœ‰ç«™ç‚¹éƒ½å±äºåŒä¸€ä¸ªå¹¿æ’­åŸŸã€‚éšç€äº¤æ¢å¼ä»¥å¤ªç½‘è§„æ¨¡çš„æ‰©å¤§ï¼Œå¹¿æ’­åŸŸç›¸åº”æ‰©å¤§ã€‚</li><li>å·¨å¤§çš„å¹¿æ’­åŸŸä¼šå¸¦æ¥å¾ˆå¤šå¼Šç«¯ï¼š<ol type="1"><li>å¹¿æ’­é£æš´</li><li>éš¾ä»¥ç®¡ç†å’Œç»´æŠ¤</li><li>æ½œåœ¨çš„å®‰å…¨é—®é¢˜</li></ol></li><li>å¹¿æ’­é£æš´ä¼šæµªè´¹ç½‘ç»œèµ„æºå’Œå„ä¸»æœºçš„CPUèµ„æºï¼ç½‘ç»œä¸­ä¼šé¢‘ç¹å‡ºç°å¹¿æ’­ä¿¡æ¯<ol type="1"><li>TCP/IPåè®®æ ˆä¸­çš„å¾ˆå¤šåè®®éƒ½ä¼šä½¿ç”¨å¹¿æ’­ï¼š<ol type="1"><li>åœ°å€è§£æåè®®ARP(å·²çŸ¥IPåœ°å€ï¼Œæ‰¾å‡ºå…¶ç›¸åº”çš„MACåœ°å€)</li><li>è·¯ç”±ä¿¡æ¯åè®®RIP(ä¸€ç§å°å‹çš„å†…éƒ¨è·¯ç”±åè®®)</li><li>åŠ¨æ€ä¸»æœºé…ç½®åè®®DHCP(ç”¨äºè‡ªåŠ¨é…ç½®IPåœ°å€)</li><li>NetBEUI: Windowsä¸‹ä½¿ç”¨çš„å¹¿æ’­å‹åè®®</li><li>IPX/SPX: Novellç½‘ç»œçš„åè®®æ ˆ</li><li>Apple Talk: Appleå…¬å¸çš„ç½‘ç»œåè®®æ ˆ</li></ol></li></ol></li></ol><h2 id="åˆ†å‰²å¹¿æ’­åŸŸçš„æ–¹æ³•">1. åˆ†å‰²å¹¿æ’­åŸŸçš„æ–¹æ³•</h2><ul><li><p>ä½¿ç”¨è·¯ç”±å™¨å¯ä»¥éš”ç¦»å¹¿æ’­åŸŸ</p></li><li><p>è™šæ‹Ÿå±€åŸŸç½‘VLAN(Virtual Local AreaNetwork)æ˜¯ä¸€ç§å°†å±€åŸŸç½‘å†…çš„è®¾å¤‡åˆ’åˆ†æˆä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè¿™äº›é€»è¾‘ç»„å…·æœ‰æŸäº›å…±åŒçš„éœ€æ±‚ã€‚</p></li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-11-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91VLAN%E6%A6%82%E8%BF%B0/image-20241117181858889.png"></p><blockquote><p>è™šæ‹Ÿå±€åŸŸç½‘æ˜¯ä¸€ç§å°†å±€åŸŸç½‘å†…çš„è®¾å¤‡åˆ’åˆ†æˆä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè¿™äº›é€»è¾‘ç»„å…·æœ‰æŸäº›å…±åŒçš„éœ€æ±‚ã€‚å³ä½œç”¨æ˜¯åƒè·¯ç”±å™¨ä¸€æ ·åˆ†å‰²å¹¿æ’­åŸŸã€‚</p></blockquote><ol type="1"><li><p>802.1Qå¸§å¯¹ä»¥å¤ªç½‘å¸§è¿›è¡Œäº†æ‰©å±•ï¼Œæ’å…¥äº†4å­—èŠ‚çš„VLANæ ‡è®° <img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-11-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91VLAN%E6%A6%82%E8%BF%B0/image-20241117182055735.png"></p></li><li><p>VLANæ ‡è®°çš„æœ€å12æ¯”ç‰¹ç§°ä¸ºVLANæ ‡è¯†ç¬¦VID,å®ƒå”¯ä¸€åœ°æ ‡å¿—äº†ä»¥å¤ªç½‘å¸§å±äºå“ªä¸€ä¸ªVLAN.</p><ol type="1"><li>V1Dçš„å–å€¼èŒƒå›´æ˜¯0~4095 ( 0 ~ 2<sup>12</sup>-1 )</li><li>0å’Œ4095éƒ½ä¸ç”¨æ¥è¡¨ç¤ºVLANï¼Œå› æ­¤ç”¨äºè¡¨ç¤ºVLANçš„V1Dçš„æœ‰æ•ˆå–å€¼èŒƒå›´æ˜¯1~4094</li></ol></li><li><p>802.1Qå¸§æ˜¯ç”±äº¤æ¢æœºæ¥å¤„ç†çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¸»æœºæ¥å¤„ç†çš„ã€‚</p><ol type="1"><li>å½“äº¤æ¢æœºæ”¶åˆ°æ™®é€šçš„ä»¥å¤ªç½‘å¸§æ—¶ï¼Œä¼šå°†å…¶<strong>æ’å…¥4å­—èŠ‚çš„VLANæ ‡è®°</strong>è½¬å˜ä¸º802.1Qå¸§ï¼Œç®€ç§°â€œæ‰“æ ‡ç­¾â€</li><li>å½“äº¤æ¢æœºè½¬å‘802.1Qå¸§æ—¶ï¼Œå¯èƒ½ä¼š<strong>åˆ é™¤å…¶4å­—èŠ‚VLANæ ‡è®°</strong>è½¬å˜ä¸ºæ™®é€šä»¥å¤ªç½‘å¸§ï¼Œç®€ç§°â€œå»æ ‡ç­¾â€</li></ol></li></ol><h2 id="äº¤æ¢æœºç«¯å£ç±»å‹">2. äº¤æ¢æœºç«¯å£ç±»å‹</h2><ol type="1"><li><p>äº¤æ¢æœºæœ‰ä¸‰ç§ç«¯å£ç±»å‹</p><ol type="1"><li>Access</li><li>Trunk</li><li>Hybrid</li></ol></li><li><p>Accessç«¯å£ä¸€èˆ¬ç”¨äºè¿æ¥ç”¨æˆ·è®¡ç®—æœº</p><ol type="1"><li>Accessç«¯å£åªèƒ½å±äºä¸€ä¸ªVLAN</li><li>Accessç«¯å£çš„PVIDå€¼ä¸ç«¯å£æ‰€å±VLANçš„IDç›¸åŒï¼ˆé»˜è®¤ä¸º1ï¼‰</li><li>Accessç«¯å£æ¥æ”¶å¤„ç†æ–¹æ³•ï¼š<ol type="1"><li>ä¸€èˆ¬åªæ¥å—â€œæœªæ‰“æ ‡ç­¾â€çš„æ™®é€šä»¥å¤ªç½‘MACå¸§ã€‚</li><li>æ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ã€‚</li></ol></li></ol></li><li><p>Trunkç«¯å£ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿</p><ol type="1"><li>Trunkç«¯å£å¯ä»¥å±äºå¤šä¸ªVLAN</li><li>ç”¨æˆ·å¯ä»¥è®¾ç½®Trunkç«¯å£çš„PVIDå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒTrunkiç«¯å£çš„PVIDå€¼ä¸º1ã€‚</li><li>Trunkç«¯å£å‘é€å¤„ç†æ–¹æ³•ï¼š<ol type="1"><li>å¯¹VIDç­‰äºPVIDçš„å¸§ï¼Œâ€œå»æ ‡ç­¾â€å†è½¬å‘ï¼›</li><li>Trunkç«¯å£æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šæ¥æ”¶â€œæœªæ‰“æ ‡ç­¾â€çš„å¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚</li><li>VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ã€‚</li></ol></li></ol></li><li><p>Hybridç«¯å£</p><ol type="1"><li>æ—¢å¯ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºï¼Œä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿ï¼ˆåŒTrunkç«¯å£ï¼‰ï¼Œä¹Ÿå¯ç”¨äºäº¤æ¢æœºä¸ç”¨æˆ·è®¡ç®—æœºä¹‹é—´çš„äº’è¿ï¼ˆåŒAccessç«¯å£ï¼‰</li><li>Hybridç«¯å£å¯ä»¥å±äºå¤šä¸ªVLAN(åŒTrunkç«¯å£)</li><li>ç”¨æˆ·å¯ä»¥è®¾ç½®Hybridç«¯å£çš„PVIDå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHybridç«¯å£çš„PVIDå€¼ä¸º1ï¼ˆåŒTrunkç«¯å£ï¼‰</li><li>Hybridç«¯å£å‘é€å¤„ç†æ–¹æ³•ï¼ˆä¸Trunkç«¯å£ä¸åŒï¼‰<ol type="1"><li>æŸ¥çœ‹å¸§çš„VIDæ˜¯å¦åœ¨ç«¯å£çš„â€œå»æ ‡ç­¾â€åˆ—è¡¨ä¸­ï¼š</li><li>è‹¥å­˜åœ¨ï¼Œåˆ™â€œå»æ ‡ç­¾â€åå†è½¬å‘ï¼›</li><li>è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è½¬å‘ï¼›</li></ol></li><li>Hybridç«¯å£æ¥æ”¶å¤„ç†æ–¹æ³•ï¼ˆåŒTrunkç«¯å£ï¼‰<ol type="1"><li>æ¥æ”¶â€œæœªæ‰“æ ‡ç­¾â€çš„å¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§"æ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ã€‚</li><li>æ¥æ”¶â€œå·²æ‰“æ ‡ç­¾çš„å¸§â€ï¼š</li></ol></li></ol></li></ol><ul><li>äº¤æ¢æœºå„ç«¯å£çš„ç¼ºçœVLAN ID,åœ¨æ€ç§‘äº¤æ¢æœºä¸Šç§°ä¸ºNativeVLAN,å³æœ¬å¾VLANã€‚</li><li>åœ¨åä¸ºäº¤æ¢æœºä¸Šç§°ä¸ºPort VLAN ID,å³ç«¯å£VLAN ID,ç®€è®°ä¸ºPVIDã€‚</li></ul><figure><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-11-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91VLAN%E6%A6%82%E8%BF%B0/image-20241117184056860.png" alt="image-20241117184056860"><figcaption aria-hidden="true">image-20241117184056860</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.10 ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-10-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AESTP/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-10-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AESTP/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®stp">3.10ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP</h2><ul><li>ä¸ºæé«˜ä»¥å¤ªç½‘çš„å¯é æ€§ï¼Œéœ€è¦æ·»åŠ å†—ä½™é“¾è·¯ï¼Œä½†æ·»åŠ å†—ä½™é“¾è·¯ä¼šå½¢æˆç½‘ç»œç¯è·¯ï¼Œç½‘ç»œç¯è·¯ä¼šé€ æˆå¾ˆå¤šé—®é¢˜ï¼š<ul><li>å¹¿æ’­é£æš´<ul><li>å¤§é‡æ¶ˆè€—ç½‘ç»œèµ„æºï¼Œä½¿å¾—ç½‘ç»œæ— æ³•æ­£å¸¸è½¬å‘å…¶ä»–æ•°æ®å¸§ï¼š</li></ul></li><li>ä¸»æœºæ”¶åˆ°é‡å¤çš„å¹¿æ’­å¸§<ul><li>å¤§é‡æ¶ˆè€—ä¸»æœºèµ„æº</li></ul></li><li>äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨éœ‡è¡ï¼ˆæ¼‚ç§»ï¼‰<ul><li>æŸè®°å½•åœ¨é”™è¯¯çš„è®°å½•ä¹‹é—´æ¥å›éœ‡è¡</li></ul></li></ul></li><li>STPæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜è€Œå‡ºç°ã€‚<ul><li>ä¸è®ºäº¤æ¢æœºä¹‹é—´é‡‡ç”¨æ€æ ·çš„ç‰©ç†è¿æ¥ï¼Œäº¤æ¢æœºéƒ½èƒ½å¤Ÿè‡ªåŠ¨è®¡ç®—å¹¶æ„å»ºä¸€ä¸ªé€»è¾‘ä¸Šæ²¡æœ‰ç¯è·¯çš„ç½‘ç»œï¼Œå…¶é€»è¾‘æ‹“æ‰‘ç»“æ„å¿…é¡»æ˜¯æ ‘å‹çš„ï¼ˆæ— é€»è¾‘ç¯è·¯ï¼‰</li><li>æœ€ç»ˆç”Ÿæˆçš„æ ‘å‹é€»è¾‘æ‹“æ‰‘è¦ç¡®ä¿è¿é€šæ•´ä¸ªç½‘ç»œã€‚</li><li>å½“é¦–æ¬¡è¿æ¥äº¤æ¢æœºæˆ–ç½‘ç»œç‰©ç†æ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæœ‰å¯èƒ½æ˜¯äººä¸ºæ”¹å˜æˆ–æ•…éšœï¼‰ï¼Œäº¤æ¢æœºéƒ½å°†è¿›è¡Œç”Ÿæˆæ ‘çš„é‡æ–°è®¡ç®—ã€‚</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.9 ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æµç¨‹</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-9-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E5%8F%91%E5%B8%A7%E7%9A%84%E6%B5%81%E7%A8%8B/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-9-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E5%8F%91%E5%B8%A7%E7%9A%84%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»¥å¤ªç½‘è‡ªå­¦ä¹ å’Œè½¬å‘å¸§">3.9 ä»¥å¤ªç½‘è‡ªå­¦ä¹ å’Œè½¬å‘å¸§</h1><ul><li>ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆä¹ŸåŒ…æ‹¬ç‰©ç†å±‚ï¼‰<ul><li>ä»¥å¤ªç½‘äº¤æ¢æœºæ”¶åˆ°å¸§åï¼Œåœ¨å¸§äº¤æ¢è¡¨ä¸­æŸ¥æ‰¾å¸§çš„ç›®çš„MACåœ°å€æ‰€å¯¹åº”çš„æ¥å£å·ï¼Œç„¶åé€šè¿‡è¯¥æ¥å£è½¬å‘å¸§ã€‚</li></ul></li><li>ä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯ä¸€ç§å³æ’å³ç”¨è®¾å¤‡ï¼Œåˆšä¸Šç”µå¯åŠ¨æ—¶å…¶å†…éƒ¨çš„å¸§äº¤æ¢è¡¨æ˜¯ç©ºçš„ã€‚éšç€ç½‘ç»œä¸­å„ä¸»æœºé—´çš„é€šä¿¡ï¼Œ<ul><li>ä»¥å¤ªç½‘äº¤æ¢æœºé€šè¿‡è‡ªå­¦ä¹ ç®—æ³•è‡ªåŠ¨é€æ¸å»ºç«‹èµ·å¸§äº¤æ¢è¡¨ã€‚</li></ul></li></ul><ol type="1"><li>æ”¶åˆ°å¸§åè¿›è¡Œç™»è®°ã€‚ç™»è®°çš„å†…å®¹ä¸ºå¸§çš„æºMACåœ°å€åŠè¿›å…¥äº¤æ¢æœºçš„æ¥å£å·</li><li>æ ¹æ®å¸§çš„ç›®çš„MACåœ°å€å’Œäº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨å¯¹å¸§è¿›è¡Œè½¬å‘ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š<ol type="1"><li>æ˜ç¡®è½¬å‘ï¼šäº¤æ¢æœºçŸ¥é“åº”å½“ä»å“ªä¸ªï¼ˆå›æˆ–å“ªäº›ï¼‰æ¥å£è½¬å‘è¯¥å¸§ï¼ˆå•æ’­ï¼Œå¤šæ’­ï¼Œå¹¿æ’­ï¼‰</li><li>ç›²ç›®è½¬å‘ï¼šäº¤æ¢æœºä¸çŸ¥é“åº”å½“ä»å“ªä¸ªç«¯å£è½¬å‘å¸§ï¼Œåªèƒ½å°†å…¶é€šè¿‡é™¤è¿›å…¥äº¤æ¢æœºçš„æ¥å£å¤–çš„å…¶ä»–æ‰€æœ‰æ¥å£è½¬å‘ï¼ˆä¹Ÿç§°ä¸ºæ³›æ´ªï¼‰</li><li>æ˜ç¡®ä¸¢å¼ƒï¼šäº¤æ¢æœºçŸ¥é“ä¸åº”è¯¥è½¬å‘è¯¥å¸§ï¼Œå°†å…¶ä¸¢å¼ƒã€‚æ¯”å¦‚ï¼šæºMACåœ°å€å’Œç›®çš„MACåœ°å€åœ¨è¡¨ä¸­è®°å½•ä¸ºåŒä¸€ä¸ªç«¯å£</li></ol></li><li>å¸§äº¤æ¢è¡¨ä¸­çš„æ¯æ¡è®°å½•éƒ½æœ‰è‡ªå·±çš„æœ‰æ•ˆæ—¶é—´ï¼Œåˆ°æœŸåˆ é™¤ã€‚åŸå› å¦‚ä¸‹ï¼š<ol type="1"><li>äº¤æ¢æœºçš„æ¥å£æ”¹æ¥äº†å¦ä¸€å°ä¸»æœº</li><li>ä¸»æœºæ›´æ¢äº†ç½‘å¡</li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.8 é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ«</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-8-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-8-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="é›†çº¿å™¨hubå’Œäº¤æ¢æœºswitchçš„åŒºåˆ«">3.8é›†çº¿å™¨ï¼ˆHUBï¼‰å’Œäº¤æ¢æœºï¼ˆSWITCHï¼‰çš„åŒºåˆ«</h1><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-8-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/image-20241117174351414.png"></p><h2 id="é›†çº¿å™¨hub">1. é›†çº¿å™¨HUB</h2><ol type="1"><li>ä½¿ç”¨é›†çº¿å™¨çš„ä»¥å¤ªç½‘åœ¨é€»è¾‘ä¸Šä»æ˜¯ä¸€ä¸ªæ€»çº¿ç½‘ï¼Œå„ç«™å…±äº«æ€»çº¿èµ„æºï¼Œä½¿ç”¨çš„è¿˜æ˜¯CSMA/CDåè®®ï¼š</li><li>é›†çº¿å™¨åªå·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œå®ƒçš„æ¯ä¸ªæ¥å£ä»…ç®€å•åœ°è½¬å‘æ¯”ç‰¹ï¼Œä¸è¿›è¡Œç¢°æ’æ£€æµ‹ï¼ˆç”±å„ç«™çš„ç½‘å¡æ£€æµ‹ï¼‰ï¼š<ol type="1"><li>é›†çº¿å™¨ä¸€èˆ¬éƒ½æœ‰å°‘é‡çš„å®¹é”™èƒ½åŠ›å’Œç½‘ç»œç®¡ç†åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œè‹¥ç½‘ç»œä¸­æŸä¸ªç½‘å¡å‡ºäº†æ•…éšœï¼Œä¸åœåœ°å‘é€å¸§ã€‚æ­¤æ—¶ï¼Œé›†çº¿å™¨å¯ä»¥æ£€æµ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å†…éƒ¨æ–­å¼€ä¸å‡ºæ•…éšœç½‘å¡çš„è¿çº¿ï¼Œä½¿æ•´ä¸ªä»¥å¤ªç½‘ä»ç„¶èƒ½æ­£å¸¸å·¥ä½œã€‚</li></ol></li><li>ä½¿ç”¨é›†çº¿å™¨HUBåœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘</li></ol><h2 id="äº¤æ¢æœº">2. äº¤æ¢æœº</h2><blockquote><p>å‰æï¼šäº¤æ¢æœºå·²å®Œæˆè‡ªå­¦ä¹ </p></blockquote><ol type="1"><li>ä»¥å¤ªç½‘äº¤æ¢æœºé€šå¸¸éƒ½æœ‰å¤šä¸ªæ¥å£ã€‚æ¯ä¸ªæ¥å£éƒ½å¯ä»¥ç›´æ¥ä¸ä¸€å°ä¸»æœºå›æˆ–å¦ä¸€ä¸ªä»¥å¤ªç½‘äº¤æ¢æœºç›¸è¿ã€‚ä¸€èˆ¬éƒ½å·¥ä½œåœ¨å…¨åŒå·¥æ–¹å¼ã€‚</li><li>ä»¥å¤ªç½‘äº¤æ¢æœºå…·æœ‰å¹¶è¡Œæ€§ï¼Œèƒ½åŒæ—¶è¿é€šå¤šå¯¹æ¥å£ï¼Œä½¿å¤šå¯¹ä¸»æœºèƒ½åŒæ—¶é€šä¿¡ï¼Œæ— ç¢°æ’ï¼ˆä¸ä½¿ç”¨CSMA/CDåè®®ï¼‰ã€‚</li><li>ä»¥å¤ªç½‘äº¤æ¢æœºä¸€èˆ¬éƒ½å…·æœ‰å¤šç§é€Ÿç‡çš„æ¥å£ï¼Œä¾‹å¦‚ï¼š10Mb/sã€100Mb/sã€1Gb/sã€10Gb/sæ¥å£çš„å¤šç§ç»„åˆã€‚<ol type="1"><li>ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆä¹ŸåŒ…æ‹¬ç‰©ç†å±‚ï¼‰ï¼Œå®ƒæ”¶åˆ°å¸§åï¼Œåœ¨å¸§äº¤æ¢è¡¨ä¸­æŸ¥æ‰¾å¸§çš„ç›®çš„MACåœ°å€æ‰€å¯¹åº”çš„æ¥å£å·ï¼Œç„¶åé€šè¿‡è¯¥æ¥å£è½¬å‘å¸§ã€‚</li><li>ä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯ä¸€ç§å³æ’å³ç”¨è®¾å¤‡ï¼Œå…¶å†…éƒ¨çš„å¸§äº¤æ¢è¡¨æ˜¯é€šè¿‡è‡ªå­¦ä¹ ç®—æ³•è‡ªåŠ¨åœ°é€æ¸å»ºç«‹èµ·æ¥çš„ã€‚</li></ol></li><li>å¸§çš„ä¸¤ç§è½¬å‘æ–¹å¼ï¼š<ol type="1"><li>å­˜å‚¨è½¬å‘</li><li>ç›´é€šäº¤æ¢ï¼šé‡‡ç”¨åŸºäºç¡¬ä»¶çš„äº¤å‰çŸ©é˜µï¼ˆäº¤æ¢æ—¶å»¶éå¸¸å°ï¼Œä½†ä¸æ£€æŸ¥å¸§æ˜¯å¦å³å·®é”™)</li></ol></li></ol><h2 id="æ¯”è¾ƒ">3. æ¯”è¾ƒ</h2><ol type="1"><li>äº¤æ¢æœºæ€§èƒ½è¿œè¶…é›†çº¿å™¨ï¼Œè€Œä¸”ä»·æ ¼ä¸é«˜ï¼Œæ‰€ä»¥å¸‚åœºä¸Šé›†çº¿å™¨å·²è¢«æ·˜æ±°</li><li>äº¤æ¢æœºä¸ä¼šæ”¹å˜æºç›®MACåœ°å€</li><li>äº¤æ¢æœºå…¨åŒå·¥ä¼ è¾“</li><li>äº¤æ¢æœºå³æ’å³ç”¨</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-8-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/image-20241117175352287.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-8-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB/image-20241117175440399.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.7 MACåœ°å€ IPåœ°å€ä»¥åŠARPåè®®</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-7-MAC%E5%9C%B0%E5%9D%80-IP%E5%9C%B0%E5%9D%80-ARP%E5%8D%8F%E8%AE%AE/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-7-MAC%E5%9C%B0%E5%9D%80-IP%E5%9C%B0%E5%9D%80-ARP%E5%8D%8F%E8%AE%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="macåœ°å€ipåœ°å€arpåœ°å€">3.7 MACåœ°å€ï¼ŒIPåœ°å€ï¼ŒARPåœ°å€</h1><ul><li>MACåœ°å€æ˜¯ä»¥å¤ªç½‘çš„MACå­å±‚æ‰€ä½¿ç”¨çš„åœ°å€</li><li>IPåœ°å€æ˜¯TCP/å°Pä½“ç³»ç»“æ„ç½‘é™…å±‚æ‰€ä½¿ç”¨çš„åœ°å€</li><li>ARPåè®®å±äºTCP/IPä½“ç³»ç»“æ„çš„ç½‘é™…å±‚ï¼Œå…¶ä½œç”¨æ˜¯å·²çŸ¥è®¾å¤‡æ‰€åˆ†é…åˆ°çš„1Påœ°å€ï¼Œä½¿ç”¨ARPåè®®å¯ä»¥é€šè¿‡è¯¥Påœ°å€è·å–åˆ°è®¾å¤‡çš„MACåœ°å€ï¼›</li><li>å°½ç®¡IPåœ°å€å’ŒARPåè®®å±äºTCP/IPä½“ç³»ç»“æ„çš„ç½‘é™…å±‚ï¼ˆè€Œä¸å±äºæ•°æ®é“¾è·¯å±‚)ï¼Œä½†æ˜¯å®ƒä»¬ä¸MACåœ°å€å­˜åœ¨ä¸€å®šçš„å…³ç³»ï¼Œå¹¶ä¸”æˆ‘ä»¬æ—¥å¸¸çš„ç½‘ç»œåº”ç”¨éƒ½ç¦»ä¸å¼€MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®ã€‚</li></ul><h2 id="macåœ°å€">1. MACåœ°å€</h2><ul><li>åˆç§°ç¡¬ä»¶åœ°å€ï¼Œç‰©ç†åœ°å€ï¼Œå±äºæ•°æ®é“¾è·¯å±‚èŒƒç•´</li><li>å½“å¤šä¸ªä¸»æœºè¿æ¥åœ¨åŒä¸€ä¸ªå¹¿æ’­ä¿¡é“ä¸Šï¼Œè¦æƒ³å®ç°ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œåˆ™æ¯ä¸ªä¸»æœºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼Œå³ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚åœ°å€</li></ul><ol type="1"><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸»æœºä¼šåŒ…å«ä¸¤ä¸ªç½‘ç»œé€‚é…å™¨ï¼šæœ‰çº¿å±€åŸŸç½‘é€‚é…å™¨ï¼ˆæœ‰çº¿ç½‘å¡ï¼‰å’Œæ— çº¿å±€åŸŸç½‘é€‚é…å™¨ï¼ˆæ— çº¿ç½‘å¡)ã€‚</li><li>æ¯ä¸ªç½‘ç»œé€‚é…å™¨éƒ½æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„MACåœ°å€ã€‚è€Œäº¤æ¢æœºå’Œè·¯ç”±å™¨å¾€å¾€æ‹¥æœ‰æ›´å¤šçš„ç½‘ç»œæ¥å£ï¼Œæ‰€ä»¥ä¼šæ‹¥æœ‰æ›´å¤šçš„MACåœ°å€ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¥æ ¼æ¥è¯´ï¼ŒMACåœ°å€æ˜¯å¯¹ç½‘ç»œä¸Šå„æ¥å£çš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œä¸æ˜¯å¯¹ç½‘ç»œä¸Šå„è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ã€‚</li><li>åœ¨æ¯ä¸ªä¸»æœºå‘é€çš„å¸§ä¸­å¿…é¡»æºå¸¦æ ‡è¯†å‘é€ä¸»æœºå’Œæ¥æ”¶ä¸»æœºçš„åœ°å€ã€‚ç”±äºè¿™ç±»åœ°å€æ˜¯ç”¨äºåª’ä½“æ¥å…¥æ§åˆ¶MAC(MediaAccess Control),å› æ­¤è¿™ç±»åœ°å€è¢«ç§°ä¸ºMACåœ°å€ï¼š<ol type="1"><li>MACåœ°å€ä¸€èˆ¬è¢«å›ºåŒ–åœ¨ç½‘å¡ï¼ˆç½‘ç»œé€‚é…å™¨ï¼‰çš„ç”µå¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨EEPROMä¸­ï¼Œå› æ­¤MACåœ°å€ä¹Ÿè¢«ç§°ä¸ºç¡¬ä»¶åœ°å€ï¼›</li><li>MACåœ°å€æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºç‰©ç†åœ°å€ã€‚è¯·æ³¨æ„ï¼šè¿™å¹¶ä¸æ„å‘³ç€MACåœ°å€å±äºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„ç‰©ç†å±‚ï¼</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-7-MAC%E5%9C%B0%E5%9D%80-IP%E5%9C%B0%E5%9D%80-ARP%E5%8D%8F%E8%AE%AE/image-20241117152902875.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-7-MAC%E5%9C%B0%E5%9D%80-IP%E5%9C%B0%E5%9D%80-ARP%E5%8D%8F%E8%AE%AE/image-20241117153926503.png"></p><h2 id="ipåœ°å€">2. IPåœ°å€</h2><blockquote><p>IPåœ°å€æ˜¯å› ç‰¹ç½‘(Internet)ä¸Šçš„ä¸»æœºå’Œè·¯ç”±å™¨æ‰€ä½¿ç”¨çš„åœ°å€ï¼Œå±äºç½‘ç»œå±‚èŒƒç•´</p><p>ç”¨äºæ ‡è¯†ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ol type="1"><li>ç½‘ç»œç¼–å·ï¼šæ ‡è¯†å› ç‰¹ç½‘ä¸Šæ•°ä»¥ç™¾ä¸‡è®¡çš„ç½‘ç»œ</li><li>ä¸»æœºç¼–å·ï¼šæ ‡è¯†åŒä¸€ç½‘ç»œä¸Šä¸åŒä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨å„æ¥å£ï¼‰</li></ol></blockquote><ol type="1"><li>æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­ï¼ŒæºIPåœ°å€å’Œç›®çš„IPåœ°å€ä¸å˜æºMACåœ°å€å’Œç›®çš„MACåœ°å€é€ä¸ªé“¾è·¯æ”¹å˜</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-7-MAC%E5%9C%B0%E5%9D%80-IP%E5%9C%B0%E5%9D%80-ARP%E5%8D%8F%E8%AE%AE/image-20241117154839729.png"></p><h2 id="arpåè®®">3. ARPåè®®</h2><blockquote><p>è§£æIPåœ°å€ å¾—åˆ°ç›¸åº”çš„MACåœ°å€ï¼Œå±äºç½‘ç»œå±‚èŒƒç•´</p></blockquote><ul><li><p>å†…å®¹æ­¥éª¤</p><ol type="1"><li>æºä¸»æœºåœ¨è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­æŸ¥æ‰¾ç›®çš„ä¸»æœºçš„1Påœ°å€æ‰€å¯¹åº”çš„MACåœ°å€ï¼Œè‹¥æ‰¾åˆ°äº†ï¼Œåˆ™å¯ä»¥å°è£…MACå¸§è¿›è¡Œå‘é€ï¼›è‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™å‘é€ARPè¯·æ±‚ï¼ˆå°è£…åœ¨å¹¿æ’­MACå¸§ä¸­ï¼‰</li><li>ç›®çš„ä¸»æœºæ”¶åˆ°ARPè¯·æ±‚åï¼Œå°†æºä¸»æœºçš„IPåœ°å€ä¸MACåœ°å€è®°å½•åˆ°è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­ï¼Œç„¶åç»™æºä¸»æœºå‘é€ARPå“åº”ï¼ˆå°è£…åœ¨å•æ’­MACå¸§ä¸­)ï¼ŒARPå“åº”ä¸­åŒ…å«æœ‰ç›®çš„ä¸»æœºçš„IPåœ°å€å’ŒMACåœ°å€</li></ol></li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-7-MAC%E5%9C%B0%E5%9D%80-IP%E5%9C%B0%E5%9D%80-ARP%E5%8D%8F%E8%AE%AE/image-20241117173649451.png"></p><ol type="1"><li><p>ä½œç”¨èŒƒå›´</p></li><li><p>é€æ®µé“¾è·¯æˆ–é€æ®µç½‘ç»œä½¿ç”¨</p></li><li><p>ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­è®°å½•äº†æ¯ä¸ªIPåœ°å€å¯¹åº”çš„MACåœ°å€ï¼Œä»¥åŠè¿™ä¸ªåœ°å€å¯¹çš„ç±»å‹ç±»å‹åˆ†ä¸ºé™æ€ç±»å‹å’ŒåŠ¨æ€ç±»å‹</p><ol type="1"><li>é™æ€ç±»å‹æ‰‹åŠ¨é…ç½®ï¼Œå¯è®¾ç½®ç³»ç»Ÿé‡å¯åè¿™äº›é™æ€ç±»å‹çš„åœ°å€å¯¹æ˜¯å¦ä»ç„¶æœ‰æ•ˆ</li><li>åŠ¨æ€ç±»å‹æ˜¯é€šè¿‡ä¸Šè¿°ARPè¯·æ±‚ä»¥åŠARPç›¸åº”å¾—åˆ°çš„ï¼Œæœ‰æ•ˆæ—¶é—´å¾ˆçŸ­ï¼Œ2åˆ†é’Ÿå·¦å³</li></ol></li><li><p>ARPåè®®ä¸èƒ½è·¨ç½‘ç»œä½¿ç”¨</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.6 åª’ä½“æ¥å…¥æ§åˆ¶</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="åª’ä½“æ¥å…¥æ§åˆ¶mac">3.6 åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆMACï¼‰</h1><ul><li>å…±äº«ä¿¡é“è¦ç€é‡è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•åè°ƒå¤šä¸ªå‘é€å’Œæ¥æ”¶ç«™ç‚¹å¯¹ä¸€ä¸ªå…±äº«ä¼ è¾“åª’ä½“çš„å ç”¨ï¼Œå³åª’ä½“æ¥å…¥æ§åˆ¶MAC(MediumAccess Control)ã€‚</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117135016262.png"></p><ul><li>éšç€æŠ€æœ¯çš„å‘å±•ï¼Œäº¤æ¢æŠ€æœ¯çš„æˆç†Ÿå’Œæˆæœ¬çš„é™ä½ï¼Œå…·æœ‰æ›´é«˜æ€§èƒ½çš„ä½¿ç”¨ç‚¹å¯¹ç‚¹é“¾è·¯å’Œé“¾è·¯å±‚äº¤æ¢æœºçš„äº¤æ¢å¼å±€åŸŸç½‘åœ¨æœ‰çº¿é¢†åŸŸå·²å®Œå…¨å–ä»£äº†å…±äº«å¼å±€åŸŸç½‘ï¼Œä½†ç”±äºæ— çº¿ä¿¡é“çš„å¹¿æ’­å¤©æ€§ï¼Œæ— çº¿å±€åŸŸç½‘ä»ç„¶ä½¿ç”¨çš„æ˜¯å…±äº«åª’ä½“æŠ€æœ¯ã€‚</li></ul><h2 id="é™æ€åˆ’åˆ†ä¿¡é“">1. é™æ€åˆ’åˆ†ä¿¡é“</h2><ul><li>ä¿¡é“å¤ç”¨æŠ€æœ¯<ul><li>å¤ç”¨(Multiplexing)æ˜¯é€šä¿¡æŠ€æœ¯ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å¤ç”¨å°±æ˜¯é€šè¿‡ä¸€æ¡ç‰©ç†çº¿è·¯åŒæ—¶ä¼ è¾“å¤šè·¯ç”¨æˆ·çš„ä¿¡å·ã€‚</li><li>å½“ç½‘ç»œä¸­ä¼ è¾“åª’ä½“çš„ä¼ è¾“å®¹é‡å¤§äºå¤šæ¡å•ä¸€ä¿¡é“ä¼ è¾“çš„æ€»é€šä¿¡é‡æ—¶ï¼Œå¯åˆ©ç”¨å¤ç”¨æŠ€æœ¯åœ¨ä¸€æ¡ç‰©ç†çº¿è·¯ä¸Šå»ºç«‹å¤šæ¡é€šä¿¡ä¿¡é“æ¥å……åˆ†åˆ©ç”¨ä¼ è¾“åª’ä½“çš„å¸¦å®½ã€‚</li></ul></li></ul><h3 id="é¢‘åˆ†å¤ç”¨fdm">1.1 é¢‘åˆ†å¤ç”¨ï¼ˆFDMï¼‰</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117135153544.png"></p><ul><li>é¢‘åˆ†å¤ç”¨çš„æ‰€æœ‰ç”¨æˆ·åŒæ—¶å ç”¨ä¸åŒçš„é¢‘å¸¦èµ„æºå¹¶è¡Œé€šä¿¡ã€‚</li></ul><h3 id="æ—¶åˆ†å¤ç”¨tdm">1.2 æ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117135256698.png"></p><ul><li>æ—¶åˆ†å¤ç”¨çš„æ‰€æœ‰ç”¨æˆ·åœ¨ä¸åŒçš„æ—¶é—´å ç”¨åŒæ ·çš„é¢‘å¸¦å®½åº¦ã€‚</li></ul><h3 id="æ³¢åˆ†å¤ç”¨wdm">1.3 æ³¢åˆ†å¤ç”¨ï¼ˆWDMï¼‰</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117135344436.png"></p><h3 id="ç åˆ†å¤ç”¨">1.4 ç åˆ†å¤ç”¨</h3><ol type="1"><li>CDMçš„æ¯ä¸€ä¸ªç”¨æˆ·å¯ä»¥åœ¨åŒæ ·çš„æ—¶é—´ä½¿ç”¨åŒæ ·çš„é¢‘å¸¦è¿›è¡Œé€šä¿¡ã€‚</li><li>ç”±äºå„ç”¨æˆ·ä½¿ç”¨ç»è¿‡ç‰¹æ®ŠæŒ‘é€‰çš„ä¸åŒç å‹ï¼Œå› æ­¤å„ç”¨æˆ·ä¹‹é—´ä¸ä¼šé€ æˆå¹²æ‰°ã€‚</li><li>CDMæœ€åˆæ˜¯ç”¨äºå†›äº‹é€šä¿¡çš„ï¼Œå› ä¸ºè¿™ç§ç³»ç»Ÿæ‰€å‘é€çš„ä¿¡å·æœ‰å¾ˆå¼ºçš„æŠ—å¹²æ‰°èƒ½åŠ›ï¼Œå…¶é¢‘è°±ç±»ä¼¼äºç™½å™ªå£°ï¼Œä¸æ˜“è¢«æ•Œäººå‘ç°ã€‚</li><li>åœ¨CDMAä¸­ï¼Œæ¯ä¸€ä¸ªæ¯”ç‰¹æ—¶é—´å†åˆ’åˆ†ä¸ºmä¸ªçŸ­çš„é—´éš”ï¼Œç§°ä¸ºç ç‰‡(Chip)ã€‚é€šå¸¸mçš„å€¼æ˜¯64æˆ–128</li><li>ä½¿ç”¨CDMAçš„æ¯ä¸€ä¸ªç«™è¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„ç ç‰‡ç ç‰‡åºåˆ—<ol type="1"><li>ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹1ï¼Œåˆ™å‘é€å®ƒè‡ªå·±çš„ç ç‰‡ç ç‰‡åºåˆ—ï¼›</li><li>ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹0ï¼Œåˆ™å‘é€å®ƒè‡ªå·±çš„ç ç‰‡åºåˆ—çš„äºŒè¿›åˆ¶åç </li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117140108915.png"></p><ol start="6" type="1"><li>ç ç‰‡åºåˆ—æŒ‘é€‰åŸåˆ™</li></ol><ul><li>åˆ†é…ç»™æ¯ä¸ªç«™çš„ç ç‰‡åºåˆ—å¿…é¡»å„ä¸ç›¸åŒï¼Œå®é™…å¸¸é‡‡ç”¨ä¼ªéšæœºç åºåˆ—ã€‚</li><li>åˆ†é…ç»™æ¯ä¸ªç«™çš„ç ç‰‡åºåˆ—å¿…é¡»ç›¸äº’æ­£äº¤ï¼ˆè§„æ ¼åŒ–å†…ç§¯ä¸º0ï¼‰</li></ul><p><span class="math display">\[A \bullet B = \frac{1}{m} \times \sum_{i=1}^{m}A_i \times B_i\]</span></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117140433653.png"></p><h2 id="åŠ¨æ€æ¥å…¥æ§åˆ¶éšæœºæ¥å…¥">2. åŠ¨æ€æ¥å…¥æ§åˆ¶â€”â€”éšæœºæ¥å…¥</h2><h3 id="csmacdåè®®">2.1 CSMA/CDåè®®</h3><ul><li>è½½æ³¢ç›‘å¬ å¤šå€æ¥å…¥ / ç¢°æ’æ£€æµ‹</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117142251276.png"></p><ul><li>ä»¥å¤ªç½‘è¿˜é‡‡å–ä¸€ç§å«åšå¼ºåŒ–ç¢°æ’çš„æªæ–½ã€‚è¿™å°±æ˜¯å½“å‘é€å¸§çš„ç«™ç‚¹ä¸€æ—¦æ£€æµ‹åˆ°ç¢°æ’ï¼Œé™¤äº†ç«‹å³åœæ­¢å‘é€å¸§å¤–ï¼Œè¿˜è¦å†ç»§ç»­å‘é€32æ¯”ç‰¹æˆ–48æ¯”ç‰¹çš„äººä¸ºå¹²æ‰°ä¿¡å·(JammingSignal),ä»¥ä¾¿æœ‰è¶³å¤Ÿå¤šçš„ç¢°æ’ä¿¡å·ä½¿æ‰€æœ‰ç«™ç‚¹éƒ½èƒ½æ£€æµ‹å‡ºç¢°æ’ã€‚</li></ul><h3 id="å·¥ä½œåŸç†">2.2 å·¥ä½œåŸç†</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117142509113.png"></p><ol start="2" type="1"><li><p>äº‰ç”¨æœŸï¼ˆç¢°æ’çª—å£ï¼‰</p><ol type="1"><li>å‘é€å¸§çš„ä¸»æœºæœ€å¤šç»è¿‡ä»¥å¤ªç½‘ç«¯åˆ°ç«¯å¾€è¿”ä¼ æ’­æ—¶å»¶2Ï„è¿™ä¹ˆé•¿æ—¶é—´ï¼Œå°±å¯æ£€æµ‹åˆ°æœ¬æ¬¡ä¼ è¾“æ˜¯å¦å‘ç”Ÿäº†ç¢°æ’ï¼Œ2Ï„ç§°ä¸ºäº‰ç”¨æœŸï¼š</li><li>ç»è¿‡äº‰ç”¨æœŸè¿™æ®µæ—¶é—´è¿˜æ²¡æœ‰æ£€æµ‹åˆ°ç¢°æ’ï¼Œæ‰èƒ½è‚¯å®šè¿™æ¬¡å‘é€ä¸ä¼šå‘ç”Ÿç¢°æ’ã€‚</li><li>ä»¥å¤ªç½‘è§„å®š2Ï„çš„å–å€¼ä¸º512æ¯”ç‰¹æ—¶é—´ï¼ˆå³å‘é€512æ¯”ç‰¹æ‰€è€—è´¹çš„æ—¶é—´ï¼‰ï¼Œå¯¹äº10Mbpsçš„ä»¥å¤ªç½‘ï¼Œ2Ï„å³ä¸º51.2 Î¼sã€‚</li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117142629341.png"></p><ol start="3" type="1"><li>æœ€å°å¸§é•¿</li></ol><p><span class="math display">\[æœ€å°å¸§é•¿ = äº‰ç”¨æœŸ \times æ•°æ®ä¼ è¾“é€Ÿç‡ï¼ˆå¸¦å®½ï¼‰\]</span></p><ul><li>æœ€å°å¸§é•¿çš„è®¾ç½®æ˜¯å› ä¸ºæºä¸»æœºå°†å¸§å‘é€å®Œæ¯•ä»¥åï¼Œä¾¿ä¸ä¼šå†ç®¡è¿™ä¸ªå¸§ï¼Œæ­¤æ—¶å‘ç”Ÿç¢°æ’å¯¼è‡´ç›®æ ‡ä¸»æœºä¸¢å¼ƒè¯¥å¸§ï¼Œä¸ä¼šé‡å‘ã€‚</li><li>ä»¥å¤ªç½‘è§„å®šæœ€å°å¸§é•¿ä¸º64å­—èŠ‚ï¼Œå³512æ¯”ç‰¹(512æ¯”ç‰¹æ—¶é—´å³ä¸ºäº‰ç”¨æœŸ)ï¼š<ul><li>å¦‚æœè¦å‘é€çš„æ•°æ®éå¸¸å°‘ï¼Œé‚£ä¹ˆå¿…é¡»åŠ å…¥ä¸€äº›å¡«å……å­—èŠ‚ï¼Œä½¿å¸§é•¿ä¸å°äº64å­—èŠ‚ã€‚</li><li>ä»¥å¤ªç½‘çš„æœ€å°å¸§é•¿ç¡®ä¿äº†ä¸»æœºå¯åœ¨å¸§å‘é€å®Œæˆä¹‹å‰å°±æ£€æµ‹åˆ°è¯¥å¸§çš„å‘é€è¿‡ç¨‹ä¸­æ˜¯å¦é­é‡äº†ç¢°æ’ï¼š</li><li>å¦‚æœåœ¨äº‰ç”¨æœŸï¼ˆå…±å‘é€64å­—èŠ‚ï¼‰æ²¡æœ‰æ£€æµ‹åˆ°ç¢°æ’ï¼Œé‚£ä¹ˆåç»­å‘é€çš„æ•°æ®å°±ä¸€å®šä¸ä¼šå‘ç”Ÿç¢°æ’ï¼›</li><li>å¦‚æœåœ¨äº‰ç”¨æœŸå†…æ£€æµ‹åˆ°ç¢°æ’ï¼Œå°±ç«‹å³ä¸­æ­¢å‘é€ï¼Œè¿™æ—¶å·²ç»å‘é€å‡ºå»çš„æ•°æ®ä¸€å®šå°äº64å­—èŠ‚ï¼Œå› æ­¤å‡¡é•¿åº¦å°äº64å­—èŠ‚çš„å¸§éƒ½æ˜¯ç”±äºç¢°æ’è€Œå¼‚å¸¸ä¸­æ­¢çš„æ— æ•ˆå¸§ã€‚</li></ul></li></ul><ol start="4" type="1"><li>æœ€å¤§å¸§é•¿</li></ol><ul><li>æœ€å¤§å¸§é•¿çš„è®¾ç½®æ˜¯å› ä¸ºä¸èƒ½ä½¿æŸä¸ªä¸»æœºé•¿æ—¶é—´ç‹¬å å…±äº«åª’ä»‹ï¼Œå¦åˆ™è¿‡äºå½±å“å…¶å®ƒä¸»æœºçš„æ•°æ®å‘é€</li></ul><ol start="5" type="1"><li>æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•</li></ol><p><span class="math display">\[éšæœºé€€é¿æ—¶é—´=äº‰ç”¨æœŸ\timeséšæœºæ•°r,\\å…¶ä¸­rä»ç¦»æ•£çš„æ•´æ•°é›†åˆ0,1ï¼Œâ€¦ï¼Œ(2k.1)ä¸­éšæœºå–å‡ºä¸€ä¸ªï¼Œ\]</span></p><p><span class="math display">\[k = Min(é‡ä¼ æ¬¡æ•°ï¼Œ10)\]</span> -è‹¥è¿ç»­å¤šæ¬¡å‘ç”Ÿç¢°æ’ï¼Œå°±è¡¨æ˜å¯èƒ½æœ‰è¾ƒå¤šçš„ä¸»æœºå‚ä¸ç«äº‰ä¿¡é“ã€‚ä½†ä½¿ç”¨ä¸Šè¿°é€€é¿ç®—æ³•å¯ä½¿é‡ä¼ éœ€è¦æ¨è¿Ÿçš„å¹³å‡æ—¶é—´éšé‡ä¼ æ¬¡æ•°è€Œå¢å¤§ï¼ˆè¿™ä¹Ÿç§°ä¸ºåŠ¨æ€é€€é¿ï¼‰ï¼Œå› è€Œå‡)å°å‘ç”Ÿç¢°æ’çš„æ¦‚ç‡ï¼Œæœ‰åˆ©äºæ•´ä¸ªç³»ç»Ÿçš„ç¨³å®šã€‚-å½“é‡ä¼ è¾¾16æ¬¡ä»ä¸èƒ½æˆåŠŸæ—¶ï¼Œè¿™è¡¨æ˜åŒæ—¶æ‰“ç®—å‘é€æ•°æ®çš„ä¸»æœºå¤ªå¤šä»¥è‡³äºè¿ç»­å‘ç”Ÿç¢°æ’ï¼Œåˆ™ä¸¢å¼ƒè¯¥å¸§å¹¶å‘é«˜å±‚æŠ¥å‘Šã€‚</p><ol start="6" type="1"><li>ä»¥å¤ªç½‘ä¿¡é“åˆ©ç”¨ç‡</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117143437511.png"></p><ol start="7" type="1"><li>è€ƒè™‘ä»¥ä¸‹è¿™ç§ç†æƒ³æƒ…å†µï¼š<ol type="1"><li>å„ä¸»æœºå‘é€å¸§éƒ½ä¸ä¼šäº§ç”Ÿç¢°æ’ï¼Œæ€»çº¿ä¸€æ—¦ç©ºé—²å°±æœ‰æŸä¸ªä¸»æœºç«‹å³å‘é€å¸§ï¼š</li><li>å‘é€ä¸€å¸§å ç”¨æ€»çº¿çš„æ—¶é—´ä¸ºT0+Tï¼Œè€Œå¸§æœ¬èº«çš„å‘é€æ—¶é—´æ˜¯T0,</li><li>ç†æƒ³æƒ…å†µå…¬å¼ï¼š</li></ol></li></ol><p><span class="math display">\[S_{max} = \frac{T_0}{T_0 + \tau} = \frac{1}{1+\frac{\tau}{T_0}}\]</span></p><ul><li>ä¿¡é“åˆ©ç”¨ç‡å—ä¼ æ’­æ—¶å»¶é™åˆ¶ï¼Œæ‰€ä»¥ä»¥å¤ªç½‘ç«¯åˆ°ç«¯çš„è·ç¦»æ”¶åˆ°é™åˆ¶ï¼Œä»¥å¤ªç½‘å¸§çš„é•¿åº¦æœ€å¥½å°½é‡é•¿äº›</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117143601933.png"></p><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117143649489.png"></p><h2 id="csmacaåè®®">3. CSMA/CAåè®®</h2><ul><li><p>è½½æ³¢ç›‘å¬ å¤šå€æ¥å…¥ / ç¢°æ’é¿å…</p></li><li><p>è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥/ç¢°æ’é¿å…CSMA/CA(Carrier Sense MultipleAccess/Collision Avoidance)</p></li></ul><ol type="1"><li>æ—¢ç„¶CSMA/CDåè®®å·²ç»æˆåŠŸåœ°åº”ç”¨äºä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æœ‰çº¿å±€åŸŸç½‘ï¼Œé‚£ä¹ˆåŒæ ·ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ— çº¿å±€åŸŸç½‘èƒ½ä¸èƒ½ä¹Ÿä½¿ç”¨CSMA/CDåè®®å‘¢ï¼Ÿ</li><li>åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥CSMA,å³åœ¨å‘é€å¸§ä¹‹å‰å…ˆå¯¹ä¼ è¾“åª’ä½“è¿›è¡Œè½½æ³¢ç›‘å¬ã€‚è‹¥å‘ç°æœ‰å…¶ä»–ç«™åœ¨å‘é€å¸§ï¼Œå°±æ¨è¿Ÿå‘é€ä»¥å…å‘ç”Ÿç¢°æ’ã€‚</li><li>åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ç¢°æ’æ£€æµ‹CD,åŸå› å¦‚ä¸‹ï¼š<ol type="1"><li>ç”±äºæ— çº¿ä¿¡é“çš„ä¼ è¾“æ¡ä»¶ç‰¹æ®Šï¼Œå…¶ä¿¡å·å¼ºåº¦çš„åŠ¨æ€èŒƒå›´éå¸¸å¤§ï¼Œæ— çº¿ç½‘å¡ä¸Šæ¥æ”¶åˆ°çš„ä¿¡å·å¼ºåº¦å¾€å¾€ä¼šè¿œè¿œå°äºå‘é€ä¿¡å·çš„å¼ºåº¦ï¼ˆå¯èƒ½ç›¸å·®ç™¾ä¸‡å€ï¼‰ã€‚å¦‚æœè¦åœ¨æ— çº¿ç½‘å¡ä¸Šå®ç°ç¢°æ’æ£€æµ‹CD,å¯¹ç¡¬ä»¶çš„è¦æ±‚éå¸¸é«˜ã€‚</li><li>å³ä½¿èƒ½å¤Ÿåœ¨ç¡¬ä»¶ä¸Šå®ç°æ— çº¿å±€åŸŸç½‘çš„ç¢°æ’æ£€æµ‹åŠŸèƒ½ï¼Œä½†ç”±äºæ— çº¿ç”µæ³¢ä¼ æ’­çš„ç‰¹æ®Šæ€§ï¼ˆå­˜åœ¨éšè”½ç«™é—®é¢˜)ï¼Œè¿›è¡Œç¢°æ’æ£€æµ‹çš„æ„ä¹‰ä¹Ÿä¸å¤§ã€‚</li></ol></li><li>802.11æ— çº¿å±€åŸŸç½‘ä½¿ç”¨CSMA/CAåè®®ï¼Œåœ¨CSMAçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªç¢°æ’é¿å…CAåŠŸèƒ½ï¼Œè€Œä¸å†å®ç°ç¢°æ’æ£€æµ‹åŠŸèƒ½ã€‚</li><li>ç”±äºä¸å¯èƒ½é¿å…æ‰€æœ‰çš„ç¢°æ’ï¼Œå¹¶ä¸”æ— çº¿ä¿¡é“è¯¯ç ç‡è¾ƒé«˜ï¼Œ802.11æ ‡å‡†è¿˜ä½¿ç”¨äº†æ•°æ®é“¾è·¯å±‚ç¡®è®¤æœºåˆ¶ï¼ˆåœæ­¢-ç­‰å¾…åè®®ï¼‰æ¥ä¿è¯æ•°æ®è¢«æ­£ç¡®æ¥æ”¶ã€‚</li><li>802.11çš„MACå±‚æ ‡å‡†å®šä¹‰äº†ä¸¤ç§ä¸åŒçš„åª’ä½“æ¥å…¥æ§åˆ¶æ–¹å¼ï¼š<ol type="1"><li>åˆ†å¸ƒå¼åè°ƒåŠŸèƒ½DCF(Distributed CoordinationFunction)ã€‚åœ¨DCFæ–¹å¼ä¸‹ï¼Œæ²¡æœ‰ä¸­å¿ƒæ§åˆ¶ç«™ç‚¹ï¼Œæ¯ä¸ªç«™ç‚¹ä½¿ç”¨CSMA/CAåè®®é€šè¿‡äº‰ç”¨ä¿¡é“æ¥è·å–å‘é€æƒï¼Œè¿™æ˜¯802.11å®šä¹‰çš„é»˜è®¤æ–¹å¼ã€‚</li><li>ç‚¹åè°ƒåŠŸèƒ½PCF(Point CoordinationFunction)ã€‚PCFæ–¹å¼ä½¿ç”¨é›†ä¸­æ§åˆ¶çš„æ¥å…¥ç®—æ³•(ä¸€èˆ¬åœ¨æ¥å…¥ç‚¹APå®ç°é›†ä¸­æ§åˆ¶)ï¼Œæ˜¯802.11å®šä¹‰çš„å¯é€‰æ–¹å¼ï¼Œåœ¨å®é™…ä¸­è¾ƒå°‘ä½¿ç”¨ã€‚</li></ol></li></ol><h3 id="å¸§é—´é—´éš”ifsinterframe-space">3.1 å¸§é—´é—´éš”IFS(InterFrameSpace)</h3><ol type="1"><li>802.11æ ‡å‡†è§„å®šï¼Œæ‰€æœ‰çš„ç«™ç‚¹å¿…é¡»åœ¨æŒç»­æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²ä¸€æ®µæŒ‡å®šæ—¶é—´åæ‰èƒ½å‘é€å¸§ï¼Œè¿™æ®µæ—¶é—´ç§°ä¸ºå¸§é—´é—´éš”FSã€‚</li><li>å¸§é—´é—´éš”çš„é•¿çŸ­å–å†³äºè¯¥ç«™ç‚¹è¦å‘é€çš„å¸§çš„ç±»å‹ï¼š<ol type="1"><li>é«˜ä¼˜å…ˆçº§å¸§éœ€è¦ç­‰å¾…çš„æ—¶é—´è¾ƒçŸ­ï¼Œå› æ­¤å¯ä¼˜å…ˆè·å¾—å‘é€æƒï¼š</li><li>ä½ä¼˜å…ˆçº§å¸§éœ€è¦ç­‰å¾…çš„æ—¶é—´è¾ƒé•¿ã€‚è‹¥æŸä¸ªç«™çš„ä½ä¼˜å…ˆçº§å¸§è¿˜æ²¡æ¥å¾—åŠå‘é€ï¼Œè€Œå…¶ä»–ç«™çš„é«˜ä¼˜å…ˆçº§å¸§å·²å‘é€åˆ°ä¿¡é“ä¸Šï¼Œåˆ™ä¿¡é“å˜ä¸ºå¿™æ€ï¼Œå› è€Œä½ä¼˜å…ˆçº§å¸§å°±åªèƒ½å†æ¨è¿Ÿå‘é€äº†ã€‚è¿™æ ·å°±å‡å°‘äº†å‘ç”Ÿç¢°æ’çš„æœºä¼šã€‚</li></ol><blockquote><p>æ— æ³•åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ä½¿ç”¨ç¢°æ’æ£€æµ‹ï¼Œæ‰€ä»¥è¿˜ä½¿ç”¨äº†åœæ­¢-ç­‰å¾…åè®®æ¥å®ç°å¯é ä¼ è¾“</p></blockquote></li><li>çŸ­å¸§é—´é—´éš”ï¼ˆSIFSï¼‰å’Œ é•¿æ—¶é—´é—´éš”ï¼ˆDIFSï¼‰ï¼Œå¸¸ç”¨çš„ä¸¤ç§å¸§é—´é—´éš”å¦‚ä¸‹ï¼š<ol type="1"><li>çŸ­å¸§é—´é—´éš”SIFS(28Î¼s),æ˜¯æœ€çŸ­çš„å¸§é—´é—´éš”ï¼Œç”¨æ¥åˆ†éš”å¼€å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ã€‚ä¸€ä¸ªç«™ç‚¹åº”å½“èƒ½å¤Ÿåœ¨è¿™æ®µæ—¶é—´å†…ä»å‘é€æ–¹å¼åˆ‡æ¢åˆ°æ¥æ”¶æ–¹å¼ã€‚ä½¿ç”¨SIFSçš„å¸§ç±»å‹æœ‰ACKå¸§ã€CTSå¸§ã€ç”±è¿‡é•¿çš„MACå¸§åˆ†ç‰‡åçš„æ•°æ®å¸§ã€ä»¥åŠæ‰€æœ‰å›ç­”APæ¢è¯¢çš„å¸§å’Œåœ¨PCFæ–¹å¼ä¸­æ¥å…¥ç‚¹APå‘é€å‡ºçš„ä»»ä½•å¸§ã€‚</li><li>DCFå¸§é—´é—´éš”DIFS(128Î¼S),å®ƒæ¯”çŸ­å¸§é—´é—´éš”SIFSè¦é•¿å¾—å¤šï¼Œåœ¨DCFæ–¹å¼ä¸­ç”¨æ¥å‘é€æ•°æ®å¸§å’Œç®¡ç†å¸§ã€‚</li></ol></li></ol><h3 id="é€€é¿ç®—æ³•">3.2 é€€é¿ç®—æ³•</h3><ol type="1"><li>åœ¨æ‰§è¡Œé€€é¿ç®—æ³•æ—¶ï¼Œç«™ç‚¹ä¸ºé€€é¿è®¡æ—¶å™¨è®¾ç½®ä¸€ä¸ªéšæœºçš„é€€é¿æ—¶é—´<ol type="1"><li>å½“é€€é¿è®¡æ—¶å™¨çš„æ—¶é—´å‡å°åˆ°é›¶æ—¶ï¼Œå°±å¼€å§‹å‘é€æ•°æ®ï¼›</li><li>å½“é€€é¿è®¡æ—¶å™¨çš„æ—¶é—´è¿˜æœªå‡å°åˆ°é›¶æ—¶è€Œä¿¡é“åˆè½¬å˜ä¸ºå¿™çŠ¶æ€ï¼Œè¿™æ—¶å°±å†»ç»“é€€é¿è®¡æ—¶å™¨çš„æ•°å€¼ï¼Œé‡æ–°ç­‰å¾…ä¿¡é“å˜ä¸ºç©ºé—²ï¼Œå†ç»è¿‡æ—¶é—´DIFSåï¼Œç»§ç»­å¯åŠ¨é€€é¿è®¡æ—¶å™¨ã€‚</li></ol></li><li>åœ¨è¿›è¡Œç¬¬iæ¬¡é€€é¿æ—¶ï¼Œé€€é¿æ—¶é—´åœ¨æ—¶éš™ç¼–å·0,1,......,2<sup>i+2</sup>-1ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œç„¶åä¹˜ä»¥åŸºæœ¬é€€é¿æ—¶é—´ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªæ—¶éš™çš„é•¿åº¦ï¼‰å°±å¯ä»¥å¾—åˆ°éšæœºçš„é€€é¿æ—¶é—´ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ä½¿ä¸åŒç«™ç‚¹é€‰æ‹©ç›¸åŒé€€é¿æ—¶é—´çš„æ¦‚ç‡å‡å°‘ã€‚å½“æ—¶éš™ç¼–å·è¾¾åˆ°255æ—¶ï¼ˆå¯¹åº”äºç¬¬6æ¬¡é€€é¿)å°±ä¸å†å¢åŠ äº†ã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117150202751.png"></p><ol start="3" type="1"><li><p>ä½•æ—¶æ‰§è¡Œé€€é¿ç®—æ³•</p><ol type="1"><li>åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰æ£€æµ‹åˆ°ä¿¡é“å¤„äºå¿™çŠ¶æ€æ—¶</li><li>åœ¨æ¯ä¸€æ¬¡é‡ä¼ ä¸€ä¸ªæ•°æ®å¸§æ—¶</li><li>åœ¨æ¯ä¸€æ¬¡æˆåŠŸå‘é€åè¦è¿ç»­å‘é€ä¸‹ä¸€ä¸ªå¸§æ—¶ï¼ˆè¿™æ˜¯ä¸ºäº†é¿å…ä¸€ä¸ªç«™ç‚¹é•¿æ—¶é—´å ç”¨ä¿¡é“ï¼‰<img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117145612604.png" alt="image-20241117145612604"></li></ol></li><li><p>ä¿¡é“é¢„çº¦</p><ol type="1"><li>ä¸ºäº†å°½å¯èƒ½å‡å°‘ç¢°æ’çš„æ¦‚ç‡å’Œé™ä½ç¢°æ’çš„å½±å“ï¼Œ802.11æ ‡å‡†å…è®¸è¦å‘é€æ•°æ®çš„ç«™ç‚¹å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦ã€‚</li><li>802.11æ ‡å‡†å…è®¸è¦å‘é€æ•°æ®çš„ç«™ç‚¹å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦ï¼Œå³åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰å…ˆå‘é€è¯·æ±‚å‘é€RTSå¸§ã€‚åœ¨æ”¶åˆ°å“åº”å…è®¸å‘é€CTSå¸§åï¼Œå°±å¯å‘é€æ•°æ®å¸§ã€‚<ol type="1"><li>æºç«™åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰å…ˆå‘é€ä¸€ä¸ªçŸ­çš„æ§åˆ¶å¸§ï¼Œç§°ä¸ºè¯·æ±‚å‘é€RTS(Request ToSend),å®ƒåŒ…æ‹¬æºåœ°å€ã€ç›®çš„åœ°å€ä»¥åŠè¿™æ¬¡é€šä¿¡ï¼ˆåŒ…æ‹¬ç›¸åº”çš„ç¡®è®¤å¸§)æ‰€éœ€çš„æŒç»­æ—¶é—´ã€‚</li><li>è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°æºç«™å‘æ¥çš„RTSé¡¿ï¼Œä¸”åª’ä½“ç©ºé—²ï¼Œå°±å‘é€ä¸€ä¸ªå“åº”æ§åˆ¶å¸§ï¼Œç§°ä¸ºå…è®¸å‘é€CTS(ClearToSend),å®ƒä¹ŸåŒ…æ‹¬è¿™æ¬¡é€šä¿¡æ‰€éœ€çš„æŒç»­æ—¶é—´ï¼ˆä»RTSå¸§ä¸­å°†æ­¤æŒç»­æ—¶é—´å¤åˆ¶åˆ°CTSå¸§ä¸­ï¼‰ã€‚</li><li>æºç«™æ”¶åˆ°CTSå¸§åï¼Œå†ç­‰å¾…ä¸€æ®µæ—¶é—´S1FSåï¼Œå°±å¯å‘é€å…¶æ•°æ®å¸§ã€‚</li><li>è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°äº†æºç«™å‘æ¥çš„æ•°æ®å¸§ï¼Œåœ¨ç­‰å¾…æ—¶é—´SFSåï¼Œå°±å‘æºç«™å‘é€ç¡®è®¤å¸§ACKã€‚</li></ol></li></ol></li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117150514559.png"></p><ul><li>é™¤æºç«™å’Œç›®çš„ç«™ä»¥å¤–çš„å…¶ä»–å„ç«™ï¼Œåœ¨æ”¶åˆ°CTSå¸§ï¼ˆæˆ–æ•°æ®å¸§ï¼‰åå°±æ¨è¿Ÿæ¥å…¥åˆ°æ— çº¿å±€åŸŸç½‘ä¸­ã€‚è¿™æ ·å°±ä¿è¯äº†æºç«™å’Œç›®çš„ç«™ä¹‹é—´çš„é€šä¿¡ä¸ä¼šå—åˆ°å…¶ä»–ç«™çš„å¹²æ‰°ã€‚</li><li>å¦‚æœRTSå¸§å‘ç”Ÿç¢°æ’ï¼Œæºç«™å°±æ”¶ä¸åˆ°CTSå¸§ï¼Œ<strong>éœ€æ‰§è¡Œé€€é¿ç®—æ³•é‡ä¼ RTSå¸§ã€‚</strong></li><li>ç”±äºRTSå¸§å’ŒCTSå¸§å¾ˆçŸ­ï¼Œå‘é€ç¢°æ’çš„æ¦‚ç‡ã€ç¢°æ’äº§ç”Ÿçš„å¼€é”€åŠæœ¬èº«çš„å¼€é”€éƒ½å¾ˆå°ã€‚è€Œå¯¹äºä¸€èˆ¬çš„æ•°æ®å¸§ï¼Œå…¶<strong>å‘é€æ—¶å»¶å¾€å¾€å¤§äºä¼ æ’­æ—¶å»¶</strong>ï¼ˆå› ä¸ºæ˜¯å±€åŸŸç½‘ï¼‰ï¼Œç¢°æ’çš„æ¦‚ç‡å¾ˆå¤§ï¼Œä¸”ä¸€æ—¦å‘ç”Ÿç¢°æ’è€Œå¯¼è‡´æ•°æ®å¸§é‡å‘ï¼Œåˆ™æµªè´¹çš„æ—¶é—´å°±å¾ˆå¤šï¼Œå› æ­¤ç”¨å¾ˆå°çš„ä»£ä»·å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦å¾€å¾€æ˜¯å€¼å¾—çš„ã€‚802.11æ ‡å‡†è§„å®šäº†3ç§æƒ…å†µä¾›ç”¨æˆ·é€‰æ‹©ï¼š<ol type="1"><li>ä½¿ç”¨RTSå¸§å’ŒCTSå¸§</li><li>ä¸ä½¿ç”¨RTSå¸§å’ŒCTSå¸§</li><li>åªæœ‰å½“æ•°æ®å¸§çš„é•¿åº¦è¶…è¿‡æŸä¸€æ•°å€¼æ—¶æ‰ä½¿ç”¨RTSå¸§å’ŒCTSå¸§</li></ol></li></ul><ol start="5" type="1"><li>è™šæ‹Ÿè½½æ³¢ç›‘å¬<ol type="1"><li>é™¤RTSå¸§å’ŒCTSå¸§ä¼šæºå¸¦é€šä¿¡éœ€è¦æŒç»­çš„æ—¶é—´ï¼Œæ•°æ®å¸§ä¹Ÿèƒ½æºå¸¦é€šä¿¡éœ€è¦æŒç»­çš„æ—¶é—´ï¼Œè¿™ç§°ä¸º802.11çš„è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶ã€‚</li></ol></li><li>ç”±äºåˆ©ç”¨è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶ï¼Œç«™ç‚¹åªè¦ç›‘å¬åˆ°RTSå¸§ã€CTSå¸§æˆ–æ•°æ®å¸§ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå°±èƒ½çŸ¥é“ä¿¡é“è¢«å ç”¨çš„æŒç»­æ—¶é—´ï¼Œè€Œä¸éœ€è¦çœŸæ­£ç›‘å¬åˆ°ä¿¡é“ä¸Šçš„ä¿¡å·ï¼Œå› æ­¤è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶èƒ½å‡å°‘éšè”½ç«™å¸¦æ¥çš„ç¢°æ’é—®é¢˜ã€‚</li></ol><figure><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-6-%E5%AA%92%E4%BD%93%E4%BB%8B%E5%85%A5%E6%8E%A7%E5%88%B6/image-20241117150646126.png" alt="image-20241117150646126"><figcaption aria-hidden="true">image-20241117150646126</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.5 ç‚¹å¯¹ç‚¹åè®®PPP</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/</url>
    
    <content type="html"><![CDATA[<h1 id="ç‚¹å¯¹ç‚¹åè®®ppp">3.5 ç‚¹å¯¹ç‚¹åè®®ï¼ˆPPPï¼‰</h1><h2 id="ppp">1. PPP</h2><ol type="1"><li>ç‚¹å¯¹ç‚¹åè®®PPP(Point-to-PointProtocol)æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯å±‚åè®®ã€‚</li><li>PPPåè®®æ˜¯å› ç‰¹ç½‘å·¥ç¨‹ä»»åŠ¡ç»„IETFåœ¨1992å¹´åˆ¶å®šçš„ã€‚ç»è¿‡1993å¹´å’Œ1994å¹´çš„ä¿®è®¢ï¼Œç°åœ¨çš„PPPåè®®å·²æˆä¸ºå› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†[RFC1661,RFC1662]ã€‚</li><li>PPPåè®®ä¸ºåœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¼ è¾“å„ç§åè®®æ•°æ®æŠ¥æä¾›äº†ä¸€ä¸ªæ ‡å‡†æ–¹æ³•ï¼Œä¸»è¦ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†æ„æˆï¼š<ol type="1"><li>å¯¹å„ç§åè®®æ•°æ®æŠ¥çš„å°è£…æ–¹æ³•ï¼ˆå°è£…æˆå¸§ï¼‰</li><li>é“¾è·¯æ§åˆ¶åè®®LCP<ol type="1"><li>ç”¨äºå»ºç«‹ã€é…ç½®ä»¥åŠæµ‹è¯•æ•°æ®é“¾è·¯çš„è¿æ¥</li></ol></li><li>ä¸€å¥—ç½‘ç»œæ§åˆ¶åè®®NCPs<ol type="1"><li>å…¶ä¸­çš„æ¯ä¸€ä¸ªåè®®æ”¯æŒä¸åŒçš„ç½‘ç»œå±‚åè®®</li></ol></li></ol></li></ol><figure><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/image-20241117132354632.png" alt="image-20241117132354632"><figcaption aria-hidden="true">image-20241117132354632</figcaption></figure><h2 id="å¸§æ ¼å¼">2. å¸§æ ¼å¼</h2><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/image-20241117132538280.png"></p><h2 id="é€æ˜ä¼ è¾“">3. é€æ˜ä¼ è¾“</h2><h3 id="é¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯é‡‡ç”¨æ’å…¥è½¬ä¹‰å­—ç¬¦çš„å­—èŠ‚å¡«å……æ³•">3.1é¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯é‡‡ç”¨æ’å…¥è½¬ä¹‰å­—ç¬¦çš„å­—èŠ‚å¡«å……æ³•</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/image-20241117132827308.png"></p><h3 id="é¢å‘æ¯”ç‰¹çš„åŒæ­¥é“¾è·¯é‡‡ç”¨æ’å…¥æ¯”ç‰¹0çš„æ¯”ç‰¹å¡«å……æ³•">3.2é¢å‘æ¯”ç‰¹çš„åŒæ­¥é“¾è·¯é‡‡ç”¨æ’å…¥æ¯”ç‰¹0çš„æ¯”ç‰¹å¡«å……æ³•</h3><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/image-20241117132942711.png"></p><h2 id="å·®é”™æ£€æµ‹">4. å·®é”™æ£€æµ‹</h2><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/image-20241117133033065.png"></p><h2 id="å·¥ä½œçŠ¶æ€">5. å·¥ä½œçŠ¶æ€</h2><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEPPP/image-20241117133237492.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.4 å¯é ä¼ è¾“</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/</url>
    
    <content type="html"><![CDATA[<h1 id="å¯é ä¼ è¾“">3.4 å¯é ä¼ è¾“</h1><h2 id="å¯é ä¼ è¾“çš„åŸºæœ¬æ¦‚å¿µ">1. å¯é ä¼ è¾“çš„åŸºæœ¬æ¦‚å¿µ</h2><ol type="1"><li>ä½¿ç”¨å·®é”™æ£€æµ‹æŠ€æœ¯ï¼ˆä¾‹å¦‚å¾ªç¯å†—ä½™æ ¡éªŒCRC)ï¼Œæ¥æ”¶æ–¹çš„æ•°æ®é“¾è·¯å±‚å°±å¯æ£€æµ‹å‡ºå¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†è¯¯ç ï¼ˆæ¯”ç‰¹é”™è¯¯ï¼‰ã€‚</li></ol><h3 id="æ•°æ®é“¾è·¯å±‚å‘ä¸Šå±‚æä¾›çš„æœåŠ¡ç±»å‹">1.1æ•°æ®é“¾è·¯å±‚å‘ä¸Šå±‚æä¾›çš„æœåŠ¡ç±»å‹</h3><ol type="1"><li>ä¸å¯é ä¼ è¾“æœåŠ¡ï¼š<ul><li>ä»…ä»…ä¸¢å¼ƒæœ‰è¯¯ç çš„å¸§ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åš</li></ul></li><li>å¯é ä¼ è¾“æœåŠ¡ï¼š<ul><li>æƒ³åŠæ³•å®ç°å‘é€ç«¯å‘é€ä»€ä¹ˆï¼Œæ¥æ”¶ç«¯å°±æ”¶åˆ°ä»€ä¹ˆã€‚</li></ul></li><li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰çº¿é“¾è·¯çš„è¯¯ç ç‡æ¯”è¾ƒä½ï¼Œä¸ºäº†å‡å°å¼€é”€ï¼Œå¹¶ä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚å³ä½¿å‡ºç°äº†è¯¯ç ï¼Œå¯é ä¼ è¾“çš„é—®é¢˜ç”±å…¶ä¸Šå±‚å¤„ç†ã€‚</li><li>æ— çº¿é“¾è·¯æ˜“å—å¹²æ‰°ï¼Œè¯¯ç ç‡æ¯”è¾ƒé«˜ï¼Œå› æ­¤è¦æ±‚æ•°æ®é“¾è·¯å±‚å¿…é¡»å‘ä¸Šå±‚æä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/image-20241117101000494.png"></p><h3 id="ä¼ è¾“å·®é”™">1.2 ä¼ è¾“å·®é”™</h3><ul><li>æ¯”ç‰¹å·®é”™åªæ˜¯ä¼ è¾“å·®é”™ä¸­çš„ä¸€ç§ã€‚</li><li>ä»æ•´ä¸ªè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„æ¥çœ‹ï¼Œä¼ è¾“å·®é”™è¿˜åŒ…æ‹¬åˆ†ç»„ä¸¢å¤±ã€åˆ†ç»„å¤±åºä»¥åŠåˆ†ç»„é‡å¤ã€‚</li><li>åˆ†ç»„ä¸¢å¤±ã€åˆ†ç»„å¤±åºä»¥åŠåˆ†ç»„é‡å¤è¿™äº›ä¼ è¾“å·®é”™ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°åœ¨æ•°æ®é“¾è·¯å±‚ï¼Œè€Œä¼šå‡ºç°åœ¨å…¶ä¸Šå±‚ã€‚</li><li>å¯é ä¼ è¾“æœåŠ¡å¹¶ä¸ä»…å±€é™äºæ•°æ®é“¾è·¯å±‚ï¼Œå…¶ä»–å„å±‚å‡å¯é€‰æ‹©å®ç°å¯é ä¼ è¾“ã€‚</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/image-20241117101226369.png"></p><h2 id="å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶">2. å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶</h2><h3 id="åœæ­¢-ç­‰å¾…åè®®sw">2.1 åœæ­¢-ç­‰å¾…åè®®ï¼ˆSWï¼‰</h3><ul><li>å±äºè‡ªåŠ¨è¯·æ±‚é‡ä¼ åè®®ï¼ˆARQï¼‰</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/image-20230714151117181.png"></p><ol type="1"><li><p>æ¥æ”¶ç«¯æ£€æµ‹åˆ°æ•°æ®åˆ†ç»„æœ‰è¯¯ç æ—¶ï¼Œå°†å…¶ä¸¢å¼ƒå¹¶ç­‰å¾…å‘é€æ–¹çš„è¶…æ—¶é‡ä¼ ã€‚ä½†å¯¹äºè¯¯ç ç‡è¾ƒé«˜çš„ç‚¹å¯¹ç‚¹é“¾è·¯ï¼Œä¸ºä½¿å‘é€æ–¹å°½æ—©é‡ä¼ ï¼Œä¹Ÿå¯ç»™å‘é€æ–¹å‘é€NAKåˆ†ç»„ã€‚</p></li><li><p>ä¸ºäº†è®©æ¥æ”¶æ–¹èƒ½å¤Ÿåˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®åˆ†ç»„æ˜¯å¦æ˜¯é‡å¤çš„ï¼Œéœ€è¦ç»™æ•°æ®åˆ†ç»„ç¼–å·ã€‚ç”±äºåœæ­¢-ç­‰å¾…åè®®çš„åœç­‰ç‰¹æ€§ï¼Œåªéœ€1ä¸ªæ¯”ç‰¹ç¼–å·å°±å¤Ÿäº†ï¼Œå³ç¼–å·0å’Œ1</p></li><li><p>ä¸ºäº†è®©å‘é€æ–¹èƒ½å¤Ÿåˆ¤æ–­æ‰€æ”¶åˆ°çš„ACKåˆ†ç»„æ˜¯å¦æ˜¯é‡å¤çš„ï¼Œéœ€è¦ç»™ACKåˆ†ç»„ç¼–å·ï¼Œæ‰€ç”¨æ¯”ç‰¹æ•°é‡ä¸æ•°æ®åˆ†ç»„ç¼–å·æ‰€ç”¨æ¯”ç‰¹æ•°é‡ä¸€æ ·ã€‚æ•°æ®é“¾è·¯å±‚ä¸€èˆ¬ä¸ä¼šå‡ºç°ACKåˆ†ç»„è¿Ÿåˆ°çš„æƒ…å†µï¼Œå› æ­¤åœ¨æ•°æ®é“¾è·¯å±‚å®ç°åœæ­¢-ç­‰å¾…åè®®å¯ä»¥ä¸ç”¨ç»™ACKåˆ†ç»„ç¼–å·ã€‚</p></li><li><p>è¶…æ—¶è®¡æ—¶å™¨è®¾ç½®çš„é‡ä¼ æ—¶é—´åº”ä»”ç»†é€‰æ‹©ã€‚ä¸€èˆ¬å¯å°†é‡ä¼ æ—¶é—´é€‰ä¸ºç•¥å¤§äºâ€œä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„å¹³å‡å¾€è¿”æ—¶é—´â€</p><ol type="1"><li>åœ¨æ•°æ®é“¾è·¯å±‚ç‚¹å¯¹ç‚¹çš„å¾€è¿”æ—¶é—´æ¯”è¾ƒç¡®å®šï¼Œé‡ä¼ æ—¶é—´æ¯”è¾ƒå¥½è®¾å®šã€‚</li><li>ç„¶è€Œåœ¨è¿è¾“å±‚ï¼Œç”±äºç«¯åˆ°ç«¯å¾€è¿”æ—¶é—´éå¸¸ä¸ç¡®å®šï¼Œè®¾ç½®åˆé€‚çš„é‡ä¼ æ—¶é—´æœ‰æ—¶å¹¶ä¸å®¹æ˜“ã€‚</li></ol><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/image-20241117102422301.png"></p></li><li><p>å½“å¾€è¿”æ—¶å»¶RTTè¿œå¤§äºæ•°æ®å¸§å‘é€æ—¶å»¶TDæ—¶ï¼ˆä¾‹å¦‚ä½¿ç”¨å«æ˜Ÿé“¾è·¯ï¼‰ï¼Œä¿¡é“åˆ©ç”¨ç‡éå¸¸ä½ã€‚è‹¥å‡ºç°é‡ä¼ ï¼Œåˆ™å¯¹äºä¼ é€æœ‰ç”¨çš„æ•°æ®ä¿¡æ¯æ¥è¯´ï¼Œä¿¡é“åˆ©ç”¨ç‡è¿˜è¦é™ä½ã€‚</p></li><li><p>ä¸ºäº†å…‹æœåœæ­¢-ç­‰å¾…åè®®ä¿¡é“åˆ©ç”¨ç‡å¾ˆä½çš„ç¼ºç‚¹ï¼Œå°±äº§ç”Ÿäº†å¦å¤–ä¸¤ç§åè®®ï¼Œå³åé€€Nå¸§åè®®GBNå’Œé€‰æ‹©é‡ä¼ åè®®SRã€‚</p></li></ol><h3 id="å›é€€nå¸§åè®®gbn">2.2 å›é€€Nå¸§åè®®ï¼ˆGBNï¼‰</h3><ul><li>æ˜¯ä¸€ç§æ»‘åŠ¨çª—å£åè®®</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/image-20230714153916944.png"></p><ol type="1"><li>å¯é€€Nå¸§åè®®åœ¨æµæ°´çº¿ä¼ è¾“çš„åŸºç¡€ä¸Šåˆ©ç”¨å‘é€çª—å›æ¥é™åˆ¶å‘é€æ–¹è¿ç»­å‘é€æ•°æ®åˆ†ç»„çš„æ•°é‡ï¼Œæ˜¯ä¸€ç§è¿ç»­ARQåè®®ã€‚</li><li>åœ¨åè®®çš„å·¥ä½œè¿‡ç¨‹ä¸­å‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¸æ–­å‘å‰æ»‘åŠ¨ï¼Œå› æ­¤è¿™ç±»åè®®åˆç§°ä¸ºæ»‘åŠ¨çª—å›åè®®ã€‚</li><li>ç”±äºå›é€€Nå¸§åè®®çš„ç‰¹æ€§ï¼Œå½“é€šä¿¡çº¿è·¯è´¨é‡ä¸å¥½æ—¶ã€‚å…¶ä¿¡é“åˆ©ç”¨ç‡å¹¶ä¸æ¯”åœæ­¢ç­‰å¾…åè®®é«˜ï¼Œ</li></ol><h3 id="é€‰æ‹©é‡ä¼ åè®®sr">2.3 é€‰æ‹©é‡ä¼ åè®®SR</h3><ol type="1"><li>å›é€€Nå¸§åè®®çš„æ¥æ”¶çª—å£å°ºå¯¸Wåªèƒ½ç­‰äº1ï¼Œå› æ­¤æ¥æ”¶æ–¹åªèƒ½æŒ‰åºæ¥æ”¶æ­£ç¡®åˆ°è¾¾çš„æ•°æ®åˆ†ç»„ã€‚</li><li>ä¸€ä¸ªæ•°æ®åˆ†ç»„çš„è¯¯ç å°±ä¼šå¯¼è‡´å…¶åç»­å¤šä¸ªæ•°æ®åˆ†ç»„ä¸èƒ½è¢«æ¥æ”¶æ–¹æŒ‰åºæ¥æ”¶è€Œä¸¢å¼ƒï¼ˆå°½ç®¡å®ƒä»¬æ— ä¹±åºå’Œè¯¯ç )ã€‚è¿™å¿…ç„¶ä¼šé€ æˆå‘é€æ–¹å¯¹è¿™äº›æ•°æ®åˆ†ç»„çš„è¶…æ—¶é‡ä¼ ï¼Œæ˜¾ç„¶è¿™æ˜¯å¯¹é€šä¿¡èµ„æºçš„æå¤§æµªè´¹ã€‚</li><li>ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯è®¾æ³•åªé‡ä¼ å‡ºç°è¯¯ç çš„æ•°æ®åˆ†ç»„ã€‚å› æ­¤ï¼Œæ¥æ”¶çª—å£çš„å°ºå¯¸Wä¸åº”å†ç­‰äº1ï¼ˆè€Œåº”å¤§äº1ï¼‰ï¼Œä»¥ä¾¿æ¥æ”¶æ–¹å…ˆæ”¶ä¸‹å¤±åºåˆ°è¾¾ä½†æ— è¯¯ç å¹¶ä¸”åºå·è½åœ¨æ¥æ”¶çª—å£å†…çš„é‚£äº›æ•°æ®åˆ†ç»„ï¼Œç­‰åˆ°æ‰€ç¼ºåˆ†ç»„æ”¶é½åå†ä¸€å¹¶é€äº¤ä¸Šå±‚ã€‚è¿™å°±æ˜¯é€‰æ‹©é‡ä¼ åè®®ã€‚</li></ol><ul><li>æ³¨æ„ï¼š<ul><li>é€‰æ‹©é‡ä¼ åè®®ä¸ºäº†ä½¿å‘é€æ–¹ä»…é‡ä¼ å‡ºç°å·®é”™çš„åˆ†ç»„ï¼Œæ¥æ”¶æ–¹ä¸èƒ½å†é‡‡ç”¨ç´¯ç§¯ç¡®è®¤ï¼Œè€Œéœ€è¦å¯¹æ¯ä¸ªæ­£ç¡®æ¥æ”¶åˆ°çš„æ•°æ®åˆ†ç»„è¿›è¡Œé€ä¸€ç¡®è®¤ï¼</li></ul></li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/image-20230714174218114.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.3 å·®é”™æ£€æµ‹</title>
    <link href="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B/"/>
    <url>/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å·®é”™æ£€æµ‹">3.3 å·®é”™æ£€æµ‹</h1><ul><li>å®é™…çš„é€šä¿¡é“¾è·¯éƒ½ä¸æ˜¯ç†æƒ³çš„ï¼Œæ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå·®é”™ï¼›1å¯èƒ½ä¼šå˜æˆ0ï¼Œè€Œ0ä¹Ÿå¯èƒ½å˜æˆ1ã€‚è¿™ç§°ä¸ºæ¯”ç‰¹å·®é”™ã€‚</li></ul><h2 id="è¯¯ç ç‡">1. è¯¯ç ç‡</h2><ul><li><p>åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹å æ‰€ä¼ è¾“æ¯”ç‰¹æ€»æ•°çš„æ¯”ç‡ç§°ä¸ºè¯¯ç ç‡BER(BitError Rate)ã€‚</p></li><li><p>ä½¿ç”¨<strong>å·®é”™æ£€æµ‹ç </strong>æ¥æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†æ¯”ç‰¹å·®é”™ï¼Œæ˜¯æ•°æ®é“¾è·¯å±‚æ‰€è¦è§£å†³çš„é‡è¦é—®é¢˜ä¹‹ä¸€ã€‚</p></li></ul><h2 id="å¥‡å¶æ ¡éªŒ">2. å¥‡å¶æ ¡éªŒ</h2><ul><li>åœ¨å¾…å‘é€çš„æ•°æ®åé¢æ·»åŠ 1ä½å¥‡å¶æ ¡éªŒä½ï¼Œä½¿æ•´ä¸ªæ•°æ®ï¼ˆåŒ…æ‹¬æ‰€æ·»åŠ çš„æ ¡éªŒä½åœ¨å†…ï¼‰ä¸­â€1â€çš„ä¸ªæ•°ä¸ºå¥‡æ•°ï¼ˆå¥‡æ ¡éªŒï¼‰æˆ–å¶æ•°ï¼ˆå¶æ ¡éªŒï¼‰ã€‚</li></ul><ol type="1"><li>å¦‚æœæœ‰å¥‡æ•°ä¸ªä½å‘ç”Ÿè¯¯ç ï¼Œåˆ™å¥‡å¶æ€§å‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥æ£€æŸ¥å‡ºè¯¯ç ï¼›</li><li>å¦‚æœæœ‰å¶æ•°ä¸ªä½å‘ç”Ÿè¯¯ç ï¼Œåˆ™å¥‡å¶æ€§ä¸å‘ç”Ÿå˜åŒ–ï¼Œä¸èƒ½æ£€æŸ¥å‡ºè¯¯ç </li></ol><ul><li>ç¼ºé™·ï¼šæ¼æ£€ç‡è¾ƒé«˜</li></ul><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B/image-20241117100050296.png"></p><h2 id="å¾ªç¯å†—ä½™æ ¡éªŒcrccyclic-redundancy-check">3.å¾ªç¯å†—ä½™æ ¡éªŒCRC(Cyclic Redundancy Check)</h2><ol type="1"><li>æ”¶å‘åŒæ–¹çº¦å®šå¥½ä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼G(x)</li><li>å‘é€æ–¹åŸºäºå¾…å‘é€çš„æ•°æ®å’Œç”Ÿæˆå¤šé¡¹å¼è®¡ç®—å‡ºå·®é”™æ£€æµ‹ç ï¼ˆå†—ä½™ç ï¼‰ï¼Œå°†å…¶æ·»åŠ åˆ°å¾…ä¼ è¾“æ•°æ®çš„åé¢ä¸€èµ·ä¼ è¾“</li><li>æ¥æ”¶æ–¹é€šè¿‡ç”Ÿæˆå¤šé¡¹å¼æ¥è®¡ç®—æ”¶åˆ°çš„æ•°æ®æ˜¯å¦äº§ç”Ÿäº†è¯¯ç </li></ol><figure><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B/image-20241117100258487.png" alt="CRC"><figcaption aria-hidden="true">CRC</figcaption></figure><figure><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B/image-20241117100334787.png" alt="ç”Ÿæˆå¤šé¡¹å¼"><figcaption aria-hidden="true">ç”Ÿæˆå¤šé¡¹å¼</figcaption></figure><p><img src="/2024/11/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B/image-20241117100543010.png"></p><ul><li><strong>åšé™¤æ³•çš„æ„æ€æ˜¯ï¼Œåšå¼‚æˆ–è¿ç®—</strong></li></ul><ol type="1"><li>æ£€é”™ç åªèƒ½æ£€æµ‹å‡ºå¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†å·®é”™ï¼Œä½†å¹¶ä¸èƒ½å®šä½é”™è¯¯ï¼Œå› æ­¤æ— æ³•çº æ­£é”™è¯¯ã€‚</li><li>è¦æƒ³çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œå¯ä»¥ä½¿ç”¨å†—ä½™ä¿¡æ¯æ›´å¤šçš„çº é”™ç è¿›è¡Œå‰å‘çº é”™ã€‚ä½†çº é”™ç çš„å¼€é”€æ¯”è¾ƒå¤§ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¾ƒå°‘ä½¿ç”¨ã€‚</li><li>å¾ªç¯å†—ä½™æ ¡éªŒCRCæœ‰å¾ˆå¥½çš„æ£€é”™èƒ½åŠ›ï¼ˆæ¼æ£€ç‡éå¸¸ä½ï¼‰ï¼Œè™½ç„¶è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œä½†éå¸¸æ˜“äºç”¨ç¡¬ä»¶å®ç°ï¼Œå› æ­¤è¢«å¹¿æ³›åº”ç”¨äºæ•°æ®é“¾è·¯å±‚ã€‚</li><li>åœ¨è®¡ç®—æœºç½‘ç»œä¸­é€šå¸¸é‡‡ç”¨æˆ‘ä»¬åç»­è¯¾ç¨‹ä¸­å°†è¦è®¨è®ºçš„æ£€é”™é‡ä¼ æ–¹å¼æ¥çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œæˆ–è€…ä»…ä»…æ˜¯ä¸¢å¼ƒæ£€æµ‹åˆ°å·®é”™çš„å¸§ï¼Œè¿™å–å†³äºæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯å¯é ä¼ è¾“æœåŠ¡è¿˜æ˜¯ä¸å¯é ä¼ è¾“æœåŠ¡ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.2 å°è£…æˆå¸§</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="å°è£…æˆå¸§">3.2 å°è£…æˆå¸§</h1><h2 id="å¸§">1. å¸§</h2><ul><li><p>å°è£…æˆå¸§æ˜¯æŒ‡æ•°æ®é“¾è·¯å±‚ç»™ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒæ·»åŠ å¸§å¤´å’Œå¸§å°¾ä½¿ä¹‹æˆä¸ºå¸§ã€‚</p></li><li><p>å¸§å¤´å’Œå¸§å°¾çš„ä½œç”¨ä¹‹ä¸€å°±æ˜¯å¸§å®šç•Œ.</p></li></ul><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7/image-20241117092740511.png" alt="å¸§"><figcaption aria-hidden="true">å¸§</figcaption></figure><h2 id="é€æ˜ä¼ è¾“">2. é€æ˜ä¼ è¾“</h2><ul><li>æ•°æ®é“¾è·¯å±‚å¯¹ä¸Šå±‚äº¤ä»˜çš„ä¼ è¾“æ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå°±å¥½åƒæ•°æ®é“¾è·¯å±‚ä¸å­˜åœ¨ä¸€æ ·ã€‚</li></ul><ol type="1"><li>é¢å‘å­—èŠ‚çš„ç‰©ç†é“¾è·¯ä½¿ç”¨å­—èŠ‚å¡«å……ï¼ˆæˆ–ç§°å­—ç¬¦å¡«å……ï¼‰çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“</li><li>é¢å‘æ¯”ç‰¹çš„ç‰©ç†é“¾è·¯ä½¿ç”¨æ¯”ç‰¹å¡«å……çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“ã€‚</li><li>ä¸ºäº†æé«˜å¸§çš„ä¼ è¾“æ•ˆç‡ï¼Œåº”å½“ä½¿å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦å°½å¯èƒ½å¤§äº›ã€‚</li></ol><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7/image-20241117093119688.png" alt="é€æ˜ä¼ è¾“"><figcaption aria-hidden="true">é€æ˜ä¼ è¾“</figcaption></figure><ul><li>è€ƒè™‘åˆ°å·®é”™æ§åˆ¶ç­‰å¤šç§å› ç´ ï¼Œæ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®éƒ½è§„å®šäº†å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ä¸Šé™ï¼Œå³æœ€å¤§ä¼ é€å•å…ƒMTU(Maximum Transfer Unit)</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.1 æ•°æ®é“¾è·¯å±‚æ¦‚è¿°</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="æ•°æ®é“¾è·¯å±‚æ¦‚è¿°">3.1 æ•°æ®é“¾è·¯å±‚æ¦‚è¿°</h1><ul><li>æ•°æ®é“¾è·¯å±‚ä»¥å¸§ä¸ºå•ä½ä¼ è¾“å’Œå¤„ç†æ•°æ®ã€‚</li></ul><ol type="1"><li>é“¾è·¯ (Link)</li></ol><ul><li>å°±æ˜¯ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œè€Œä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–çš„äº¤æ¢ç»“ç‚¹ã€‚</li></ul><ol start="2" type="1"><li>æ•°æ®é“¾è·¯(Data Link)</li></ol><ul><li>æ˜¯æŒ‡æŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šï¼Œå°±æ„æˆäº†æ•°æ®é“¾è·¯ã€‚</li></ul><h2 id="ä½¿ç”¨ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ä¸‰ä¸ªé‡è¦é—®é¢˜">1.ä½¿ç”¨ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ä¸‰ä¸ªé‡è¦é—®é¢˜</h2><ol type="1"><li>å°è£…æˆå¸§</li><li>å·®é”™æ£€æµ‹</li><li>å¯é ä¼ è¾“<ol type="1"><li>å°½ç®¡è¯¯ç æ˜¯ä¸èƒ½å®Œå…¨é¿å…çš„ï¼Œä½†è‹¥èƒ½å®ç°å‘é€æ–¹å‘é€ä»€ä¹ˆæ¥æ”¶æ–¹å°±èƒ½æ”¶åˆ°ä»€ä¹ˆï¼Œå°±ç§°ä¸ºå¯é ä¼ è¾“ã€‚</li></ol></li></ol><h2 id="ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚">2. ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚</h2><ol type="1"><li>å…±äº«å¼ä»¥å¤ªç½‘çš„åª’ä½“æ¥å…¥æ§åˆ¶åè®®CSMA/CD</li><li>802.11å±€åŸŸç½‘çš„åª’ä½“æ¥å…¥æ§åˆ¶åè®®CSMA/CA</li></ol><h2 id="æ•°æ®é“¾è·¯å±‚çš„äº’è¿è®¾å¤‡">3. æ•°æ®é“¾è·¯å±‚çš„äº’è¿è®¾å¤‡</h2><ol type="1"><li>ç½‘æ¡¥å’Œäº¤æ¢æœºçš„å·¥ä½œåŸç†</li><li>é›†çº¿å™¨(ç‰©ç†è¿æ¥è®¾å¤‡)ä¸äº¤æ¢æœºçš„åŒºåˆ«</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.5 ä¿¡é“çš„æé™å®¹é‡</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-5-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-5-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¿¡é“æé™å®¹é‡">2.5 ä¿¡é“æé™å®¹é‡</h1><ul><li>åœ¨ä¿¡é“å¸¦å®½ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å¥ˆæ°å‡†åˆ™å’Œé¦™å†œå…¬å¼ï¼Œè¦æƒ³æé«˜ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡å°±å¿…é¡»é‡‡ç”¨å¤šå…ƒåˆ¶ï¼ˆæ›´å¥½çš„è°ƒåˆ¶æ–¹æ³•ï¼‰å’ŒåŠªåŠ›æé«˜ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”ã€‚</li></ul><h2 id="å¥ˆå¼å‡†åˆ™">1. å¥ˆå¼å‡†åˆ™</h2><ul><li>ç†æƒ³ä½é€šä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡=2W Baud=2W(å•ä½ï¼šç å…ƒ/ç§’)</li><li>ç†æƒ³å¸¦é€šä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡=W Baud=W(å•ä½ï¼šç å…ƒ/ç§’)</li></ul><h2 id="é¦™å†œå…¬å¼-å•ä½bits">2. é¦™å†œå…¬å¼ å•ä½:bit/s</h2><p><span class="math display">\[c = W \times log_2(1 + \frac{S}{N})\\\]</span></p><p><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-5-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F/image-20241116162248949.png"></p><p><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-5-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F/image-20241116162436085.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.4 ç¼–ç ä¸è°ƒåˆ¶</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¼–ç ä¸è°ƒåˆ¶">2.4 ç¼–ç ä¸è°ƒåˆ¶</h1><p><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6/image-20241116160902949.png"></p><h2 id="å¸¸ç”¨ç¼–ç ">1. å¸¸ç”¨ç¼–ç </h2><ul><li>ç å…ƒï¼šåœ¨ä½¿ç”¨æ—¶é—´åŸŸçš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ã€‚</li></ul><ol type="1"><li>ä¸å½’é›¶ç¼–ç ï¼ˆå­˜åœ¨åŒæ­¥é—®é¢˜ï¼‰<ul><li>éœ€è¦é¢å¤–ä¸€æ ¹ä¼ è¾“çº¿æ¥ä¼ è¾“æ—¶é’Ÿä¿¡å·ä½¿å‘é€æ–¹å’Œæ¥æ”¶æ–¹åŒæ­¥</li></ul></li><li>å½’é›¶ç¼–ç ï¼ˆè‡ªåŒæ­¥ï¼Œç¼–ç æ•ˆç‡ä½ï¼‰</li><li>æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆä¼ ç»Ÿä»¥å¤ªç½‘ï¼‰</li></ol><p><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6/image-20241116161158338.png"></p><h2 id="ç¼–ç ä¸è°ƒåˆ¶-1">2. ç¼–ç ä¸è°ƒåˆ¶</h2><h3 id="åŸºæœ¬è°ƒåˆ¶æ–¹æ³•">2.1 åŸºæœ¬è°ƒåˆ¶æ–¹æ³•</h3><p><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6/image-20241116161357102.png"></p><ol type="1"><li>è°ƒå¹…ã€è°ƒé¢‘ã€è°ƒç›¸</li><li>æ··åˆè°ƒåˆ¶</li></ol><p><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6/image-20241116161941515.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.3 ä¼ è¾“æ–¹å¼</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-3-%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-3-%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¼ è¾“æ–¹å¼">2.3 ä¼ è¾“æ–¹å¼</h1><h2 id="ä¸²å¹¶è¡Œ">1. ä¸²å¹¶è¡Œ</h2><ol type="1"><li><p>ä¸²è¡Œä¼ è¾“</p></li><li><p>å¹¶è¡Œä¼ è¾“</p></li></ol><h2 id="åŒæ­¥å¼‚æ­¥">2. åŒæ­¥å¼‚æ­¥</h2><ol type="1"><li><p>åŒæ­¥ä¼ è¾“</p></li><li><p>å¼‚æ­¥ä¼ è¾“</p></li><li><p>æ”¶å‘åŒæ–¹æ—¶é’ŸåŒæ­¥çš„æ–¹æ³•</p></li></ol><ul><li>å¤–åŒæ­¥ï¼šåœ¨æ”¶å‘åŒæ–¹ä¹‹é—´æ·»åŠ ä¸€æ¡å•ç‹¬çš„æ—¶é’Ÿä¿¡å·çº¿</li><li>å†…åŒæ­¥ï¼šå‘é€ç«¯å°†æ—¶é’ŸåŒæ­¥ä¿¡å·ç¼–ç åˆ°å‘é€æ•°æ®ä¸­ä¸€èµ·ä¼ è¾“(ä¾‹å¦‚æ›¼å½»æ–¯ç‰¹ç¼–ç )</li></ul><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-3-%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F/image-20241116160018725.png" alt="image-20241116160018725"><figcaption aria-hidden="true">image-20241116160018725</figcaption></figure><h2 id="å•åŒå·¥">3. å•åŒå·¥</h2><ul><li>å•å‘é€šä¿¡ï¼ˆå•å·¥ï¼‰å¹¿æ’­</li><li>åŒå‘äº¤æ›¿é€šä¿¡ï¼ˆåŠåŒå·¥ï¼‰ å¯¹è®²æœº</li><li>åŒå‘åŒæ—¶é€šä¿¡ï¼ˆå…¨åŒå·¥ï¼‰ç”µè¯</li></ul><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-3-%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F/image-20241116160356202.png" alt="image-20241116160356202"><figcaption aria-hidden="true">image-20241116160356202</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.2 ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<h1 id="ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“">2.2 ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“</h1><h2 id="ä¼ è¾“åª’ä½“">1. ä¼ è¾“åª’ä½“</h2><h3 id="å¯¼å¼•å‹ä¼ è¾“åª’ä½“">1.1 å¯¼å¼•å‹ä¼ è¾“åª’ä½“</h3><ol type="1"><li><p>åŒç»çº¿</p><ol type="1"><li>ç»åˆçš„ä½œç”¨<ul><li>æŠµå¾¡éƒ¨åˆ†æ¥è‡ªå¤–ç•Œçš„ç”µç£æ³¢å¹²æ‰°</li><li>å‡å°‘ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°</li></ul></li><li><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93/image-20241116144027376.png" alt="image-20241116144027376"><figcaption aria-hidden="true">image-20241116144027376</figcaption></figure></li></ol></li><li><p>åŒè½´ç”µç¼†</p><ul><li>åŸºå¸¦åŒè½´ç”µç¼†(50Î©) æ•°å­—ä¼ è¾“ï¼Œè¿‡å»ç”¨äºå±€åŸŸç½‘</li></ul></li></ol><ul><li>å®½å¸¦åŒè½´ç”µç¼†(75Î©)ï¼Œæ¨¡æ‹Ÿä¼ è¾“ï¼Œç›®å‰ä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†<ul><li>åŒè½´ç”µç¼†ä»·æ ¼è¾ƒè´µä¸”å¸ƒçº¿ä¸å¤Ÿçµæ´»å’Œæ–¹ä¾¿ï¼Œéšç€é›†çº¿å™¨çš„å‡ºç°ï¼Œåœ¨å±€åŸŸç½‘é¢†åŸŸåŸºæœ¬ä¸Šéƒ½æ˜¯é‡‡ç”¨åŒç»çº¿ä½œä¸ºä¼ è¾“åª’ä½“ã€‚</li></ul></li></ul><ol start="3" type="1"><li><p>å…‰çº¤</p><ol type="1"><li><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93/image-20241116144053439.png" alt="image-20241116144053439"><figcaption aria-hidden="true">image-20241116144053439</figcaption></figure></li><li>çº¤èŠ¯ç›´å¾„<ul><li>å¤šæ¨¡å…‰çº¤ï¼š50å¾®ç±³ï¼Œ62.5å¾®ç±³</li><li>å•æ¨¡å…‰çº¤ï¼š9å¾®ç±³ï¼ŒåŒ…å±‚ç›´å¾„125å¾®ç±³</li></ul></li><li>å·¥ä½œæ³¢é•¿<ul><li>0.85å¾®ç±³ï¼ˆè¡°å‡è¾ƒå¤§ï¼‰</li><li>1.30å¾®ç±³ï¼ˆè¡°å‡è¾ƒå°ï¼‰</li><li>1.55å¾®ç±³ï¼ˆè¡°å‡è¾ƒå°ï¼‰</li></ul></li><li>å…‰çº¤çš„ä¼˜ç‚¹<ul><li>é€šä¿¡å®¹é‡å¤§ (25000~30000GHzçš„å¸¦å®½)</li><li>ä¼ è¾“æŸè€—å°ï¼Œè¿œè·ç¦»ä¼ è¾“æ—¶æ›´åŠ ç»æµã€‚</li><li>æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€‚è¿™åœ¨å¤§ç”µæµè„‰å†²å¹²æ‰°çš„ç¯å¢ƒä¸‹å°¤ä¸ºé‡è¦</li><li>æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¸æ˜“è¢«çªƒå¬ã€‚</li><li>ä½“ç§¯å°ï¼Œé‡é‡è½»ã€‚</li></ul></li><li>å…‰çº¤çš„ç¼ºç‚¹<ul><li>å‰²æ¥éœ€è¦ä¸“ç”¨è®¾å¤‡</li><li>å…‰ç”µæ¥å£ä»·æ ¼è¾ƒè´µ</li></ul></li><li><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93/image-20241116144351388.png" alt="image-20241116144351388"><figcaption aria-hidden="true">image-20241116144351388</figcaption></figure></li><li><figure><img src="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93/image-20241116144534158.png" alt="image-20241116144534158"><figcaption aria-hidden="true">image-20241116144534158</figcaption></figure></li></ol></li><li><p>ç”µåŠ›çº¿</p></li></ol><h3 id="éå¯¼å¼•å‹ä¼ è¾“åª’ä½“">1.2 éå¯¼å¼•å‹ä¼ è¾“åª’ä½“</h3><ol type="1"><li>å¾®æ³¢é€šä¿¡ï¼ˆ2~40GHzï¼‰</li><li>çº¢å¤–çº¿</li><li>å¯è§å…‰</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.1 ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ</title>
    <link href="/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-1-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <url>/2024/11/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2-1-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ">2.1 ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ</h1><h2 id="ä¼ è¾“åª’ä½“">1. ä¼ è¾“åª’ä½“</h2><ol type="1"><li>å¯¼å¼•å‹ä¼ è¾“åª’ä½“<ul><li>åŒç»çº¿</li><li>åŒè½´ç”µç¼†</li><li>å…‰çº¤</li><li>ç”µåŠ›çº¿</li></ul></li><li>éå¯¼å¼•å‹ä¼ è¾“åª’ä½“<ul><li>å¾®æ³¢é€šä¿¡ï¼ˆ2~40GHzï¼‰</li><li>çº¢å¤–çº¿</li><li>å¯è§å…‰</li></ul></li></ol><h2 id="ä¸»è¦ä»»åŠ¡">2. ä¸»è¦ä»»åŠ¡</h2><blockquote><ol type="1"><li>ç‰©ç†å±‚è€ƒè™‘çš„æ˜¯æ€æ ·æ‰èƒ½åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµã€‚</li><li>ç‰©ç†å±‚ä¸ºæ•°æ®é“¾è·¯å±‚å±è”½äº†å„ç§ä¼ è¾“åª’ä½“çš„å·®å¼‚ï¼Œä½¿æ•°æ®é“¾è·¯å±‚åªéœ€è¦è€ƒè™‘å¦‚ä½•å®Œæˆæœ¬å±‚çš„åè®®å’ŒæœåŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘ç½‘ç»œå…·ä½“çš„ä¼ è¾“åª’ä½“æ˜¯ä»€ä¹ˆã€‚</li></ol></blockquote><ol type="1"><li><p>æœºæ¢°ç‰¹æ€§</p><blockquote><p>æŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„å½¢çŠ¶å’Œå°ºå¯¸ã€å¼•è„šæ•°ç›®å’Œæ’åˆ—ã€å›ºå®šå’Œé”å®šè£…ç½®</p></blockquote></li><li><p>ç”µæ°”ç‰¹æ€§</p><blockquote><p>æŒ‡æ˜åœ¨æ¥å£ç”µç¼†çš„å„æ¡ çº¿ä¸Šå‡ºç°çš„ç”µå‹çš„èŒƒå›´ã€‚</p></blockquote></li><li><p>åŠŸèƒ½ç‰¹æ€§</p><blockquote><p>æŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹è¡¨ç¤ºä½•ç§æ„ä¹‰ã€‚</p></blockquote></li><li><p>è¿‡ç¨‹ç‰¹æ€§</p><blockquote><p>æŒ‡æ˜å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåºã€‚</p></blockquote></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.6 è®¡ç®—æœºä½“ç³»ç»“æ„</title>
    <link href="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/"/>
    <url>/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h1 id="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„">1.6 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h1><h2 id="å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„">1. å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h2><ol type="1"><li><p>OSIä½“ç³»ç»“æ„ï¼ˆå¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹ï¼‰</p></li><li><p>TCP/IPä½“ç³»ç»“æ„</p></li></ol><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115214722039.png"></p><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115214533994.png"></p><ul><li>IPåè®®å¯ä»¥ä¸ºå„ç§ç½‘ç»œåº”ç”¨æä¾›æœåŠ¡ (Everything over IP)</li><li>ä½¿ç”¨IPåè®®äº’è¿ä¸åŒçš„ç½‘ç»œæ¥å£ (IP over everything)</li></ul><h2 id="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§">2.è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§</h2><p>æ€»çº¿å‹ç½‘ç»œ</p><ul><li>å¦‚ä½•æ ‡è¯†ç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆä¸»æœºç¼–å€é—®é¢˜ï¼Œä¾‹å¦‚MACåœ°å€ï¼‰</li><li>å¦‚ä½•ä»ä¿¡å·æ‰€è¡¨ç¤ºçš„ä¸€è¿ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºåœ°å€å’Œæ•°æ®</li><li>å¦‚ä½•åè°ƒå„ä¸»æœºäº‰ç”¨æ€»çº¿</li></ul><blockquote><p>"åˆ†å±‚â€œå¯å°†åºå¤§è€Œå¤æ‚çš„é—®é¢˜ï¼Œè½¬åŒ–ä¸ºè‹¥å¹²è¾ƒå°çš„å±€éƒ¨é—®é¢˜ï¼Œè€Œè¿™äº›è¾ƒå°çš„å±€éƒ¨é—®é¢˜å°±æ¯”è¾ƒæ˜“äºç ”ç©¶å’Œå¤„ç†ã€‚</p></blockquote><table><thead><tr><th style="text-align: center;">ä½“ç³»ç»“æ„</th><th style="text-align: center;">è§£å†³é—®é¢˜</th></tr></thead><tbody><tr><td style="text-align: center;">åº”ç”¨å±‚</td><td style="text-align: center;">è§£å†³é€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’æ¥å®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜</td></tr><tr><td style="text-align: center;">è¡¨ç¤ºå±‚</td><td style="text-align: center;">è§£å†³é€šä¿¡åŒæ–¹äº¤æ¢ä¿¡æ¯çš„è¡¨ç¤ºé—®é¢˜</td></tr><tr><td style="text-align: center;">ä¼šè¯å±‚</td><td style="text-align: center;">è§£å†³è¿›ç¨‹ä¹‹é—´è¿›è¡Œä¼šè¯é—®é¢˜</td></tr><tr><td style="text-align: center;">è¿è¾“å±‚</td><td style="text-align: center;">è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜</td></tr><tr><td style="text-align: center;">ç½‘ç»œå±‚</td><td style="text-align: center;">è§£å†³åˆ†ç»„åœ¨å¤šä¸ªç½‘ç»œä¸Šä¼ è¾“ï¼ˆè·¯ç”±ï¼‰é—®é¢˜</td></tr><tr><td style="text-align: center;">æ•°æ®é“¾è·¯å±‚</td><td style="text-align: center;">è§£å†³åˆ†ç»„åœ¨ä¸€ä¸ªç½‘ç»œï¼ˆæˆ–ä¸€æ®µé“¾è·¯ï¼‰ä¸Šä¼ è¾“çš„é—®é¢˜</td></tr><tr><td style="text-align: center;">ç‰©ç†å±‚</td><td style="text-align: center;">è§£å†³ä½¿ç”¨ä½•ç§ä¿¡å·æ¥ä¼ è¾“æ¯”ç‰¹çš„é—®é¢˜</td></tr></tbody></table><ul><li>è¡¨ç¤ºå±‚çš„ä»»åŠ¡æ˜¯å®ç°ä¸æ•°æ®è¡¨ç¤ºç›¸å…³çš„åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬æ•°æ®å­—ç¬¦é›†çš„è½¬æ¢ã€æ•°æ®æ ¼å¼åŒ–ã€æ–‡æœ¬å‹ç¼©ã€æ•°æ®åŠ å¯†ä»¥åŠè§£å¯†ç­‰å·¥ä½œã€‚</li></ul><h2 id="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„ä¸“ç”¨æœ¯è¯­">3.è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„ä¸“ç”¨æœ¯è¯­</h2><table><thead><tr><th style="text-align: center;">æœ¯è¯­</th><th style="text-align: left;">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align: center;">å®ä½“</td><td style="text-align: left;">ä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹</td></tr><tr><td style="text-align: center;">å¯¹ç­‰å®ä½“</td><td style="text-align: left;">æ”¶å‘åŒæ–¹ç›¸åŒå±‚æ¬¡ä¸­çš„å®ä½“</td></tr><tr><td style="text-align: center;">åè®®</td><td style="text-align: left;">æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€»è¾‘é€šä¿¡çš„è§„åˆ™çš„é›†åˆ</td></tr><tr><td style="text-align: center;">åè®®ä¸‰è¦ç´ </td><td style="text-align: left;">è¯­æ³•ï¼Œè¯­ä¹‰ï¼ŒåŒæ­¥</td></tr><tr><td style="text-align: center;">è¯­æ³•</td><td style="text-align: left;">å®šä¹‰æ‰€äº¤æ¢ä¿¡æ¯çš„æ ¼å¼</td></tr><tr><td style="text-align: center;">è¯­ä¹‰</td><td style="text-align: left;">å®šä¹‰æ”¶å‘åŒæ–¹æ‰€è¦å®Œæˆçš„æ“ä½œ</td></tr><tr><td style="text-align: center;">åŒæ­¥</td><td style="text-align: left;">å®šä¹‰æ”¶å‘åŒæ–¹çš„æ—¶åºå…³ç³»<br><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115225450275.png" alt="image-20241115225450275"></td></tr><tr><td style="text-align: center;">æœåŠ¡</td><td style="text-align: left;">åœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡<br><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115225634091.png" alt="image-20241115225634091"></td></tr><tr><td style="text-align: center;">æœåŠ¡è®¿é—®ç‚¹</td><td style="text-align: left;">åœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹<br>1.æ•°æ®é“¾è·¯å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºå¸§çš„â€œç±»å‹â€å­—æ®µã€‚<br>2.ç½‘ç»œå±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºIPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„â€œåè®®å­—æ®µâ€ã€‚<br>3.è¿è¾“å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºâ€œç«¯å£å·â€</td></tr><tr><td style="text-align: center;">æœåŠ¡åŸè¯­</td><td style="text-align: left;">ä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡å¿…é¡»é€šè¿‡ä¸ä¸‹å±‚äº¤æ¢ä¸€äº›å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ç§°ä¸ºæœåŠ¡åŸè¯­</td></tr><tr><td style="text-align: center;">åè®®æ•°æ®å•å…ƒPDU</td><td style="text-align: left;">å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…ç§°ä¸ºè¯¥å±‚çš„åè®®æ•°æ®å•å…ƒ</td></tr><tr><td style="text-align: center;">æœåŠ¡æ•°æ®å•å…ƒSDU</td><td style="text-align: left;">åŒä¸€ç³»ç»Ÿå†…ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ¢çš„æ•°æ®åŒ…ç§°ä¸ºæœåŠ¡æ•°æ®å•å…ƒ<br>å¤šä¸ªSDUå¯ä»¥åˆæˆä¸ºä¸€ä¸ªPDUï¼›ä¸€ä¸ªSDUä¹Ÿå¯åˆ’åˆ†ä¸ºå‡ ä¸ªPDU</td></tr></tbody></table><figure><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115225112571.png" alt="å®ä½“"><figcaption aria-hidden="true">å®ä½“</figcaption></figure><figure><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115225152230.png" alt="åè®®"><figcaption aria-hidden="true">åè®®</figcaption></figure><ol type="1"><li>åè®®æ˜¯â€œæ°´å¹³çš„â€ï¼ŒæœåŠ¡æ˜¯â€œå‚ç›´çš„</li><li>å®ä½“çœ‹å¾—è§ç›¸é‚»ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼Œä½†å¹¶ä¸çŸ¥é“å®ç°è¯¥æœåŠ¡çš„å…·ä½“åè®®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯"é€æ˜"çš„ã€‚</li></ol><figure><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115225809482.png" alt="SDU PDU"><figcaption aria-hidden="true">SDU PDU</figcaption></figure><h2 id="ç»ƒä¹ é¢˜">ç»ƒä¹ é¢˜ï¼š</h2><ol type="1"><li>åœ¨OSIå‚è€ƒæ¨¡å‹ä¸­ï¼Œè‡ªä¸‹è€Œä¸Šç¬¬ä¸€ä¸ªæä¾›ç«¯åˆ°ç«¯æœåŠ¡çš„å±‚æ¬¡æ˜¯ï¼šï¼ˆBï¼‰A.æ•°æ®é“¾è·¯å±‚ B.ä¼ è¾“å±‚ C.ä¼šè¯å±‚ D.åº”ç”¨å±‚<ul><li><figure><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-6-%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/image-20241115230545942.png" alt="image-20241115230545942"><figcaption aria-hidden="true">image-20241115230545942</figcaption></figure></li></ul></li><li>ä¸‹åˆ—é€‰é¡¹ä¸­ï¼Œä¸å±äºç½‘ç»œä½“ç³»ç»“æ„æ‰€æè¿°çš„å†…å®¹æ˜¯ C A.ç½‘ç»œçš„å±‚æ¬¡B.æ¯ä¸€å±‚ä½¿ç”¨çš„åè®® C.åè®®çš„å†…éƒ¨å®ç°ç»†èŠ‚ D.æ¯ä¸€å±‚å¿…é¡»å®Œæˆçš„åŠŸèƒ½</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.5 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</title>
    <link href="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/"/>
    <url>/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/</url>
    
    <content type="html"><![CDATA[<h1 id="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡">1.5 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</h1><table><thead><tr><th style="text-align: center;">æŒ‡æ ‡</th><th style="text-align: left;">è¯„æµ‹</th></tr></thead><tbody><tr><td style="text-align: center;">é€Ÿç‡</td><td style="text-align: left;">è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ¯”ç‰¹çš„é€Ÿç‡ï¼Œä¹Ÿç§°ä¸ºæ¯”ç‰¹ç‡æˆ–æ•°æ®ç‡<br>bit/sï¼ˆb/sï¼Œbps)ï¼Œkb/sï¼ŒMb/sï¼ŒGb/s</td></tr><tr><td style="text-align: center;">å¸¦å®½</td><td style="text-align: left;">ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œå•ä½ä¸ºHz<br>å› æ­¤ç½‘ç»œå¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®é‡â€<br>ä¸é€Ÿç‡æŒ‡æ ‡ç›¸åŒ</td></tr><tr><td style="text-align: center;">ååé‡</td><td style="text-align: left;">ååé‡è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚<br>ååé‡è¢«ç»å¸¸ç”¨äºå¯¹ç°å®ä¸–ç•Œä¸­çš„ç½‘ç»œçš„ä¸€ç§æµ‹é‡ï¼Œä»¥ä¾¿çŸ¥é“å®é™…ä¸Šåˆ°åº•æœ‰å¤šå°‘æ•°æ®é‡èƒ½å¤Ÿé€šè¿‡ç½‘ç»œã€‚<br>ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–é¢å®šé€Ÿç‡çš„é™åˆ¶ã€‚</td></tr><tr><td style="text-align: center;">æ—¶å»¶</td><td style="text-align: left;">ç½‘ç»œæ—¶å»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«ä¸ºå‘é€æ—¶å»¶ï¼Œä¼ æ’­æ—¶å»¶ï¼Œå¤„ç†æ—¶å»¶<br>ç½‘å¡çš„å‘é€é€Ÿç‡ï¼Œä¿¡é“å¸¦å®½ï¼Œäº¤æ¢æœºçš„æ¥å£é€Ÿç‡å…±åŒå†³å®šäº†å‘é€æ—¶å»¶<br><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-5-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87/image-20241115211453147.png"></td></tr><tr><td style="text-align: center;">æ—¶å»¶å¸¦å®½ç§¯</td><td style="text-align: left;">1.è‹¥å‘é€ç«¯è¿ç»­å‘é€æ•°æ®ï¼Œåˆ™åœ¨æ‰€å‘é€çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹å³å°†åˆ°è¾¾ç»ˆç‚¹æ—¶ï¼Œ<br>å‘é€ç«¯å°±å·²ç»å‘é€äº†æ—¶å»¶å¸¦å®½ç§¯ä¸ªæ¯”ç‰¹ã€‚<br>2.é“¾è·¯çš„æ—¶å»¶å¸¦å®½ç§¯åˆç§°ä¸ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ã€‚</td></tr><tr><td style="text-align: center;">å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰</td><td style="text-align: left;">åŒå‘äº¤äº’ä¸€æ¬¡æ‰€éœ€çš„æ—¶é—´<br>ä»æºä¸»æœºå‘é€åˆ†ç»„å¼€å§‹ï¼Œç›´åˆ°æºä¸»æœºæ”¶åˆ°æ¥è‡ªç›®çš„ä¸»æœºçš„ç¡®è®¤åˆ†ç»„ä¸ºæ­¢</td></tr><tr><td style="text-align: center;">åˆ©ç”¨ç‡</td><td style="text-align: left;">åˆ†ä¸ºä¿¡é“åˆ©ç”¨ç‡ï¼Œç½‘ç»œåˆ©ç”¨ç‡<br>ä¿¡é“åˆ©ç”¨ç‡ï¼šè¡¨ç¤ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„<br>ç½‘ç»œåˆ©ç”¨ç‡ï¼šå…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡åŠ æƒå¹³å‡<br>ä¿¡é“åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½ï¼Œé«˜åˆ©ç”¨ç‡ä¼šå¼•å‘é«˜æ—¶å»¶</td></tr><tr><td style="text-align: center;">ä¸¢åŒ…ç‡</td><td style="text-align: left;">ä¸¢åŒ…ç‡å³åˆ†ç»„ä¸¢å¤±ç‡ï¼Œæ˜¯æŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ã€‚<br>ä¸¢åŒ…ç‡å…·ä½“å¯åˆ†ä¸ºæ¥å£ä¸¢åŒ…ç‡ã€ç»“ç‚¹ä¸¢åŒ…ç‡ã€é“¾è·¯ä¸¢åŒ…ç‡ã€è·¯å¾„ä¸¢åŒ…ç‡ã€ç½‘ç»œä¸¢åŒ…ç‡ç­‰<br></td></tr></tbody></table><ol type="1"><li><p>è¡¥å……</p><ol type="1"><li>æ—¶å»¶è®¡ç®—å…¬å¼</li></ol></li></ol><p><span class="math display">\[å‘é€æ—¶å»¶ = \frac{åˆ†ç»„é•¿åº¦}{å‘é€é€Ÿç‡}\\\\\]</span></p><p><span class="math display">\[å‘é€æ—¶å»¶ = \frac{ä¿¡é“é•¿åº¦}{ç”µç£æ³¢ä¼ æ’­é€Ÿç‡}\]</span></p><ol start="2" type="1"><li>æ—¶å»¶å¸¦å®½ç§¯</li></ol><p><span class="math display">\[æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶ \times å¸¦å®½\]</span></p><ul><li>å¤„ç†æ—¶å»¶ä¸€èˆ¬ä¸è®¡ç®—</li></ul><ol start="3" type="1"><li><p>ç½‘ç»œå½“å‰æ—¶å»¶ä¸ä¿¡é“åˆ©ç”¨ç‡ä¹‹é—´çš„å…³ç³» <span class="math display">\[Dä¸ºç½‘ç»œå½“å‰æ—¶å»¶ï¼ŒD_0ä¸ºç½‘ç»œç©ºé—²æ—¶çš„æ—¶å»¶ï¼ŒUä¸ºä¿¡é“åˆ©ç”¨ç‡\\\]</span></p></li><li><p>ä¸¢åŒ…ç‡è®¡ç®—å…¬å¼ <span class="math display">\[ä¸¢åŒ…ç‡ = \frac{ä¸€å®šæ—¶é—´èŒƒå›´å†…ä¸¢å¤±çš„åˆ†ç»„æ•°é‡}{æ€»åˆ†ç»„æ•°é‡}\]</span></p><p><span class="math display">\[D = \frac{D_0}{1-U}\]</span></p></li><li><p>åˆ†ç»„ä¸¢å¤±çš„ä¸¤ç§æƒ…å†µ</p><ol type="1"><li>åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«ç»“ç‚¹ä¸¢å¼ƒ</li><li>åˆ†ç»„åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼Œåœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡ã€‚</li></ol></li><li><p>ä¸¢åŒ…ç‡åæ˜ äº†ç½‘ç»œçš„æ‹¥å¡æƒ…å†µ</p><ol type="1"><li>æ— æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º0</li><li>è½»åº¦æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º1%~4%</li><li>ä¸¥é‡æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º5%~15%</li></ol></li><li><p>nä¸ªåˆ†ç»„ï¼Œmæ®µé“¾è·¯ï¼Œå¿½ç•¥å¤„ç†æ—¶å»¶ï¼Œæ€»æ—¶å»¶çš„è®¡ç®—ï¼ˆå‡è®¾åˆ†ç»„ç­‰é•¿ï¼Œå„é“¾è·¯é•¿åº¦ç›¸åŒï¼Œå¸¦å®½ç›¸åŒï¼‰<span class="math display">\[æ€»æ—¶å»¶ = nä¸ªåˆ†ç»„çš„å‘é€æ—¶å»¶ + 1ä¸ªåˆ†ç»„çš„å‘é€æ—¶å»¶ \times (m-1) +1æ®µé“¾è·¯çš„ä¼ æ’­æ—¶å»¶ \times m\]</span></p></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.4 è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»</title>
    <link href="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB/"/>
    <url>/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h1 id="è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»">1.4 è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»</h1><h2 id="å®šä¹‰">1. å®šä¹‰</h2><ol type="1"><li><p>ç®€å•å®šä¹‰ï¼šä¸€äº›<strong>äº’ç›¸è¿æ¥</strong>çš„ï¼Œ<strong>è‡ªæ²»</strong>çš„è®¡ç®—æœºçš„<strong>é›†åˆ</strong></p><blockquote><p>äº’è¿ï¼šæ˜¯æŒ‡è®¡ç®—æœºä¹‹é—´å¯ä»¥é€šè¿‡æœ‰çº¿æˆ–æ— çº¿çš„æ–¹å¼è¿›è¡Œæ•°æ®é€šä¿¡ï¼›è‡ªæ²»ï¼šæ˜¯æŒ‡ç‹¬ç«‹çš„è®¡ç®—æœºï¼Œå®ƒæœ‰è‡ªå·±çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œå¯ä»¥å•ç‹¬è¿è¡Œä½¿ç”¨ï¼›é›†åˆï¼šæ˜¯æŒ‡è‡³å°‘éœ€è¦ä¸¤å°è®¡ç®—æœºã€‚</p></blockquote></li><li><p>è®¡ç®—æœºç½‘ç»œçš„è¾ƒå¥½çš„å®šä¹‰</p><blockquote><p>è®¡ç®—æœºç½‘ç»œä¸»è¦æ˜¯ç”±ä¸€äº›é€šç”¨çš„ã€å¯ç¼–ç¨‹çš„ç¡¬ä»¶äº’è¿è€Œæˆçš„ï¼Œè€Œè¿™äº›ç¡¬ä»¶å¹¶éä¸“é—¨ç”¨æ¥å®ç°æŸä¸€ç‰¹å®šç›®çš„ï¼ˆä¾‹å¦‚ï¼Œä¼ é€æ•°æ®æˆ–è§†é¢‘ä¿¡å·)ã€‚è¿™äº›å¯ç¼–ç¨‹çš„ç¡¬ä»¶èƒ½å¤Ÿç”¨æ¥ä¼ é€å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶èƒ½æ”¯æŒå¹¿æ³›çš„å’Œæ—¥ç›Šå¢é•¿çš„åº”ç”¨ã€‚</p></blockquote><ol type="1"><li>è®¡ç®—æœºç½‘ç»œæ‰€è¿æ¥çš„ç¡¬ä»¶ï¼Œå¹¶ä¸é™äºä¸€èˆ¬çš„è®¡ç®—æœºï¼Œè€Œæ˜¯åŒ…æ‹¬äº†æ™ºèƒ½æ‰‹æœºç­‰æ™ºèƒ½ç¡¬ä»¶</li><li>è®¡ç®—æœºç½‘ç»œå¹¶éä¸“é—¨ç”¨æ¥ä¼ é€æ•°æ®ï¼Œè€Œæ˜¯èƒ½å¤Ÿæ”¯æŒå¾ˆå¤šç§çš„åº”ç”¨ï¼ˆåŒ…æ‹¬ä»Šåå¯èƒ½å‡ºç°çš„åç§åº”ç”¨)</li></ol></li></ol><h2 id="åˆ†ç±»">2. åˆ†ç±»</h2><h3 id="æŒ‰äº¤æ¢æŠ€æœ¯åˆ†ç±»">2.1 æŒ‰äº¤æ¢æŠ€æœ¯åˆ†ç±»</h3><ol type="1"><li>ç”µè·¯äº¤æ¢ç½‘è·¯</li><li>æŠ¥æ–‡äº¤æ¢ç½‘ç»œ</li><li>åˆ†ç»„äº¤æ¢ç½‘ç»œ</li></ol><h3 id="æŒ‰ä½¿ç”¨è€…åˆ†ç±»">2.2 æŒ‰ä½¿ç”¨è€…åˆ†ç±»</h3><ol type="1"><li><p>å…¬ç”¨ç½‘</p><blockquote><p>ç”µä¿¡å…¬å¸å‡ºèµ„å»ºé€ ,ç»™ç”µä¿¡å…¬å¸ç¼´çº³è´¹ç”¨å³å¯ä½¿ç”¨</p></blockquote></li><li><p>ä¸“ç”¨ç½‘</p><blockquote><p>ä¸å‘å¤–äººæä¾›æœåŠ¡</p></blockquote></li></ol><h3 id="æŒ‰ä¼ è¾“ä»‹è´¨åˆ†ç±»">2.3 æŒ‰ä¼ è¾“ä»‹è´¨åˆ†ç±»</h3><ol type="1"><li><p>æœ‰çº¿ç½‘è·¯</p><blockquote><p>åŒ…æ‹¬åŒç»çº¿ç½‘ç»œ,å…‰çº¤ç½‘ç»œç­‰</p></blockquote></li><li><p>æ— çº¿ç½‘ç»œ</p><blockquote><p>WIFIåº”ç”¨æ™®é</p></blockquote></li></ol><h3 id="æŒ‰è¦†ç›–èŒƒå›´åˆ†ç±»">2.4 æŒ‰è¦†ç›–èŒƒå›´åˆ†ç±»</h3><ol type="1"><li><p>å¹¿åŸŸç½‘(WAN)</p><blockquote><p>å¯ä»¥è¦†ç›–ä¸€ä¸ªå›½å®¶,åœ°åŒºç”šè‡³å‡ ä¸ªæ´²</p><p>WANæ˜¯å› ç‰¹ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†,ä¸ºæ ¸å¿ƒè·¯ç”±å™¨æä¾›è¿œè·ç¦»é«˜é€Ÿè¿æ¥</p></blockquote></li><li><p>åŸåŸŸç½‘(MAN)</p><blockquote><p>è¦†ç›–ä¸€ä¸ªè¡—åŒº,æˆ–å‡ ä¸ªåŸå¸‚</p><p>é€šå¸¸ä½œä¸ºåŸå¸‚éª¨å¹²ç½‘,äº’è¿å­¦æ ¡,ä¼ä¸š,æœºæ„çš„å±€åŸŸç½‘</p></blockquote></li><li><p>å±€åŸŸç½‘(LAN)</p><blockquote><p>è¦†ç›–ä¸€ä¸ªå®éªŒå®¤,ä¸€å¹¢æ¥¼,ä¸€ä¸ªæ ¡å›­ç­‰</p></blockquote></li><li><p>ä¸ªåŸŸç½‘(PAN)</p><blockquote><p>å³æ— çº¿ä¸ªäººåŒºåŸŸç½‘(WPAN),åœ¨å„äººå·¥ä½œçš„åœ°æ–¹,å°†å±äºä¸ªäººä½¿ç”¨çš„ç”µå­è®¾å¤‡ç”¨æ— çº¿æŠ€æœ¯è¿æ¥èµ·æ¥çš„ç½‘ç»œ</p></blockquote></li></ol><h3 id="æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»">2.5 æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»</h3><ol type="1"><li>æ€»çº¿å‹ç½‘ç»œ</li></ol><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB/image-20230712140101315.png"></p><ol start="2" type="1"><li>æ˜Ÿå‹ç½‘ç»œ</li></ol><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB/image-20230712140145867.png"></p><ol start="3" type="1"><li>ç¯å‹ç½‘ç»œ</li></ol><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB/image-20230712140251758.png"></p><ol start="4" type="1"><li>ç½‘çŠ¶å‹ç½‘ç»œ</li></ol><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB/image-20230712140454142.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.3 ä¸‰ç§äº¤æ¢æ–¹å¼</title>
    <link href="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-3-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F/"/>
    <url>/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-3-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸‰ç§äº¤æ¢æ–¹å¼">1.3 ä¸‰ç§äº¤æ¢æ–¹å¼</h1><h2 id="ç”µè·¯äº¤æ¢circuit-switching">1. ç”µè·¯äº¤æ¢(Circuit Switching)</h2><ul><li>ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢ï¼Œä¸­é—´è®¾å¤‡æ˜¯ç”µè¯äº¤æ¢æœº</li><li>ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œäº¤æ¢(Switching)å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æºï¼›</li><li>å½“ä½¿ç”¨ç”µè·¯äº¤æ¢æ¥ä¼ é€è®¡ç®—æœºæ•°æ®æ—¶ï¼Œå…¶çº¿è·¯çš„ä¼ è¾“æ•ˆç‡å¾€å¾€å¾ˆä½ã€‚</li><li>ä¸é€‚åˆè®¡ç®—æœºä¼ è¾“æ•°æ®ï¼Œå› ä¸ºå ç”¨é€šä¿¡èµ„æºï¼Œå´è¿Ÿè¿Ÿä¸ä½¿ç”¨ï¼Œé€ æˆé€šä¿¡èµ„æºçš„æµªè´¹</li></ul><figure><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-3-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F/image-20241115203653573.png" alt="ç”µè¯äº¤æ¢æœº"><figcaption aria-hidden="true">ç”µè¯äº¤æ¢æœº</figcaption></figure><ol type="1"><li>ç”µè¯äº¤æ¢çš„ä¸‰ä¸ªæ­¥éª¤<ol type="1"><li>å»ºç«‹è¿æ¥ï¼ˆåˆ†é…é€šä¿¡èµ„æºï¼‰</li><li>é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰</li><li>é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰</li></ol></li><li>ä¼˜ç‚¹<ol type="1"><li>é€šä¿¡æ—¶å»¶å°</li><li>æœ‰åºä¼ è¾“</li><li>æ²¡æœ‰å†²çª</li><li>é€‚ç”¨èŒƒå›´å¹¿</li><li>å®æ—¶æ€§å¼º</li><li>æ§åˆ¶ç®€å•</li></ol></li><li>ç¼ºç‚¹<ol type="1"><li>å»ºç«‹è¿æ¥æ—¶é—´é•¿</li><li>çº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½</li><li>çµæ´»æ€§å·®</li><li>éš¾ä»¥è§„æ ¼åŒ–</li></ol></li></ol><h2 id="åˆ†ç»„äº¤æ¢packet-switching">2. åˆ†ç»„äº¤æ¢(Packet Switching)â€»</h2><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-3-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F/image-20241115204514266.png"></p><blockquote><p>é€šå¸¸æŠŠè¡¨ç¤ºæ¶ˆæ¯çš„æ•´å—æ•°æ®ç§°ä¸ºä¸€ä¸ªæŠ¥æ–‡</p></blockquote><ol type="1"><li><p>æ­¥éª¤</p><ol type="1"><li><p>å‘é€æ–¹ï¼šæ„é€ åˆ†ç»„ï¼Œå‘é€åˆ†ç»„</p></li><li><p>è·¯ç”±å™¨ï¼šç¼“å­˜åˆ†ç»„ï¼Œè½¬å‘åˆ†ç»„</p></li><li><p>æ¥æ”¶æ–¹ï¼šæ¥æ”¶åˆ†ç»„ï¼Œè¿˜åŸæŠ¥æ–‡</p></li></ol></li><li><p>ä¼˜ç‚¹</p><ol type="1"><li>æ— éœ€å»ºç«‹è¿æ¥</li><li>çº¿è·¯åˆ©ç”¨ç‡é«˜</li><li>ç®€åŒ–äº†å­˜å‚¨ç®¡ç†</li><li>åŠ é€Ÿä¼ è¾“</li><li>å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡å‘æ•°æ®é‡</li></ol></li><li><p>ç¼ºç‚¹</p><ol type="1"><li><p>å¼•èµ·äº†è½¬å‘æ—¶å»¶</p></li><li><p>éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡</p></li><li><p>å¯¹äºæ•°æ®æŠ¥æœåŠ¡ï¼Œå­˜åœ¨å¤±åºã€ä¸¢å¤±æˆ–é‡å¤åˆ†ç»„çš„é—®é¢˜;</p><p>å¯¹äºè™šç”µè·¯æœåŠ¡å­˜åœ¨å‘¼å«å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹</p></li></ol></li></ol><h2 id="æŠ¥æ–‡äº¤æ¢message-switching">3. æŠ¥æ–‡äº¤æ¢(Message Switching)</h2><blockquote><p>ä¸åˆ†ç»„äº¤æ¢ç±»ä¼¼ï¼Œä½†å¯¹æŠ¥æ–‡å¤§å°æ²¡æœ‰é™åˆ¶ï¼Œä¹Ÿä¸åˆ†ç»„ï¼Œç°ä»£å·²å¾ˆå°‘ä½¿ç”¨è¯¥æ–¹æ³•</p></blockquote><ol type="1"><li>ä¼˜ç‚¹<ol type="1"><li>æ— éœ€å»ºç«‹è¿æ¥</li><li>åŠ¨æ€åˆ†é…çº¿è·¯</li><li>æé«˜çº¿è·¯å¯é æ€§</li><li>æé«˜çº¿è·¯åˆ©ç”¨ç‡</li><li>æä¾›å¤šç›®æ ‡æœåŠ¡</li></ol></li><li>ç¼ºç‚¹<ol type="1"><li>å¼•èµ·äº†è½¬å‘æ—¶å»¶</li><li>éœ€è¦è¾ƒå¤§å­˜å‚¨ç¼“å­˜ç©ºé—´</li><li>éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡</li></ol></li></ol><p><img src="/2024/11/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1-3-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F/image-20241115204815895.png"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HCTAï¼šå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä¸­çš„åˆ†å±‚åˆä½œä»»åŠ¡åˆ†é…</title>
    <link href="/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/HCTA%EF%BC%9A%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E5%88%86%E5%B1%82%E5%90%88%E4%BD%9C%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/"/>
    <url>/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/HCTA%EF%BC%9A%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E5%88%86%E5%B1%82%E5%90%88%E4%BD%9C%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="hctahierarchical-cooperative-task-allocation-in-multi-agent-reinforcement-learning">HCTA:HierarchicalCooperative Task Allocation in Multi-Agent Reinforcement Learning</h1><h2 id="ä¸»è¦å†…å®¹">1. ä¸»è¦å†…å®¹</h2><ol type="1"><li><strong>å­ä»»åŠ¡é€‰æ‹©</strong>ï¼š</li></ol><ul><li>åŸºäºè¡ŒåŠ¨é“¾çš„é•¿æœŸè¡Œä¸ºç‰¹å¾åŠ¨æ€é€‰æ‹©æ¯ä¸ªæ™ºèƒ½ä½“é€‚åˆçš„å­ä»»åŠ¡ã€‚</li></ul><ol start="2" type="1"><li><strong>å±‚æ¬¡åŒ–ç­–ç•¥å­¦ä¹ </strong>ï¼š</li></ol><ul><li>ç»“åˆä¸Šè¿°å­ä»»åŠ¡åˆ†è§£å’Œé€‰æ‹©ï¼Œå½¢æˆå±‚æ¬¡åŒ–åˆä½œç­–ç•¥å­¦ä¹ æ¡†æ¶ã€‚åœ¨ä¸Šå±‚åŠ¨æ€é€‰æ‹©å­ä»»åŠ¡ï¼Œå¹¶åœ¨ä¸‹å±‚æ ¹æ®ä¸Šå±‚çš„ä»»åŠ¡åˆ†é…ç»“æœæŒ‡å¯¼å…·ä½“å†³ç­–ç­–ç•¥çš„å­¦ä¹ ã€‚</li></ul><ol start="3" type="1"><li><strong>åŒæ—¶åºåˆ†è¾¨ç‡æ¡†æ¶</strong>ï¼š</li></ol><ul><li>HCTAä½¿ç”¨åŒæ—¶åºåˆ†è¾¨ç‡æ¡†æ¶ï¼Œåœ¨ä½æ—¶åºåˆ†è¾¨ç‡çš„æ—¶æ ‡ä¸Šè¿›è¡Œä»»åŠ¡é€‰æ‹©ï¼Œç„¶ååœ¨é«˜æ—¶åºåˆ†è¾¨ç‡çš„æ—¶æ ‡ä¸Šè¿›è¡Œç­–ç•¥å­¦ä¹ ã€‚</li></ul><ol start="4" type="1"><li><strong>å®éªŒéªŒè¯</strong>ï¼š</li></ol><ul><li>åœ¨StarCraftIIç¯å¢ƒä¸­è¿›è¡Œå¹¿æ³›çš„å®éªŒï¼Œä»¥è¯„ä¼°HCTAæ¡†æ¶åœ¨ä¸åŒéš¾åº¦çº§åˆ«ä¸Šçš„è¡¨ç°ï¼Œå¹¶ä¸å…¶ä»–åŸºçº¿ç®—æ³•è¿›è¡Œæ¯”è¾ƒã€‚</li></ul><p>è¿™äº›æ–¹æ³•å…±åŒæ„æˆäº†æ–‡ç« æå‡ºçš„HCTAæ¡†æ¶ï¼Œæ—¨åœ¨é€šè¿‡å±‚æ¬¡åŒ–å’ŒåŠ¨æ€çš„ä»»åŠ¡åˆ†é…æ¥æé«˜å¤šæ™ºèƒ½ä½“ç³»ç»Ÿåœ¨å¤æ‚ä»»åŠ¡ä¸­çš„åˆä½œæ•ˆç‡å’Œå­¦ä¹ æ•ˆæœã€‚</p><ul><li>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿<strong>ä¸ªä½“çš„å­ç»„èƒ½å¤Ÿé€šè¿‡äººç±»åœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ—¶ä½¿ç”¨çš„åˆ†è§£æ€æƒ³æ¥å­¦ä¹ è§£å†³ä¸åŒçš„å­ä»»åŠ¡ã€‚</strong></li></ul><h2 id="å­ä»»åŠ¡åˆ†è§£">2. å­ä»»åŠ¡åˆ†è§£</h2><p>åœ¨æ–‡ç« ä¸­æåˆ°çš„HCTAï¼ˆHierarchical Cooperative TaskAllocationï¼‰æ¡†æ¶ä¸­ï¼Œå­ä»»åŠ¡çš„åˆ†è§£æ˜¯é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°çš„ï¼š</p><ol type="1"><li><strong>è¡ŒåŠ¨è¡¨ç¤ºå­¦ä¹ ï¼ˆAction RepresentationLearningï¼‰</strong>ï¼š</li></ol><ul><li>é¦–å…ˆï¼Œæ¡†æ¶é€šè¿‡è¡ŒåŠ¨è¡¨ç¤ºå­¦ä¹ æ¥å®ç°å­ä»»åŠ¡çš„åˆ†è§£ã€‚è¿™æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿåæ˜ è¡ŒåŠ¨å¯¹ç¯å¢ƒå’Œå…¶ä»–æ™ºèƒ½ä½“å½±å“çš„è¡¨ç¤ºï¼ˆå³<code>za = fÎ¸(a; Î¸e)</code>ï¼‰æ¥å®Œæˆçš„ï¼Œå…¶ä¸­<code>za</code>æ˜¯è¡ŒåŠ¨çš„è¡¨ç¤ºï¼Œ<code>a</code>æ˜¯è¡ŒåŠ¨æœ¬èº«ï¼Œ<code>Î¸</code>æ˜¯å­¦ä¹ åˆ°çš„å‚æ•°ã€‚</li></ul><ol start="2" type="1"><li><strong>è¡ŒåŠ¨ç©ºé—´èšç±»ï¼ˆAction Space Clusteringï¼‰</strong>ï¼š</li></ol><ul><li>åŸºäºè¡ŒåŠ¨è¡¨ç¤ºçš„ç»“æœï¼Œæ•´ä¸ªè¡ŒåŠ¨ç©ºé—´è¢«èšç±»åˆ†è§£ä¸ºå¤šä¸ªå­è¡ŒåŠ¨ç©ºé—´ï¼Œæ¯ä¸ªå­è¡ŒåŠ¨ç©ºé—´å¯¹åº”ä¸€ä¸ªå­ä»»åŠ¡ã€‚è¿™æ ·çš„åˆ†è§£å‡å°‘äº†æ¯ä¸ªå­ä»»åŠ¡çš„è¡ŒåŠ¨ç©ºé—´ç»´åº¦ï¼Œä½¿å¾—ç›¸åº”çš„æ™ºèƒ½ä½“åœ¨å…·æœ‰ç›¸ä¼¼æ•ˆæœçš„è¡ŒåŠ¨ç©ºé—´ä¸­æœç´¢ã€‚</li></ul><ol start="3" type="1"><li><strong>è¡ŒåŠ¨é“¾æ¨¡å‹ï¼ˆAction Chain Modelï¼‰</strong>ï¼š</li></ol><ul><li>ä½¿ç”¨è¡ŒåŠ¨é“¾æ¨¡å‹æ¥å­¦ä¹ è¡ŒåŠ¨ç¼–ç å™¨ã€‚æ¯ä¸ªæ™ºèƒ½ä½“é€‰æ‹©å¤šä¸ªæ—¶é—´æ­¥çš„è¡ŒåŠ¨è¡¨ç¤ºä½œä¸ºè¡ŒåŠ¨é“¾ç¼–ç å™¨çš„è¾“å…¥ã€‚é€šè¿‡è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œæ™ºèƒ½ä½“å­¦ä¹ ä¸è‡ªèº«å±æ€§ç›¸å…³çš„å¤šæ­¥è¡ŒåŠ¨çš„ç´¯ç§¯æ•ˆåº”ã€‚</li></ul><ol start="4" type="1"><li><strong>å­ä»»åŠ¡å®šä¹‰ï¼ˆSubtask Definitionï¼‰</strong>ï¼š</li></ol><ul><li>æ–‡ç« ä¸­å¯¹å­ä»»åŠ¡çš„å®šä¹‰æ˜¯ï¼šå¯¹äºä¸€ä¸ªç»™å®šçš„åˆä½œå¤šæ™ºèƒ½ä½“ä»»åŠ¡<code>G</code>ï¼Œä¸€ä¸ªè§’è‰²<code>Ïi</code>æ˜¯ä¸€ä¸ªåŒ…å«å­ä»»åŠ¡<code>Ï•i</code>çš„å…ƒç»„ï¼Œ<code>Ï•i</code>ç”±<code>âŸ¨Ai, Ii, S, P, R, Î©i, O, Î³âŸ©</code>ç»„æˆï¼Œå…¶ä¸­<code>Ai</code>æ˜¯å­ä»»åŠ¡çš„è¡ŒåŠ¨ç©ºé—´ï¼Œ<code>Ii</code>æ˜¯æ™ºèƒ½ä½“çš„å­é›†ï¼Œä¸”æ»¡è¶³<code>Ii âŠ‚ I</code>ï¼Œ<code>âˆªiIi = I</code>ï¼Œ<code>Ii âˆ© Ij = âˆ…</code>ï¼ˆå¯¹äº<code>i â‰  j</code>ï¼‰ã€‚</li></ul><ol start="5" type="1"><li><strong>é•¿æœŸè¡Œä¸ºé“¾ï¼ˆLong-term Behavior Chainï¼‰</strong>ï¼š</li></ol><ul><li>åŸºäºè¡ŒåŠ¨é“¾çš„ç»“æœï¼Œç”Ÿæˆåæ˜ æ™ºèƒ½ä½“è¡Œä¸ºç‰¹å¾çš„é•¿æœŸè¡ŒåŠ¨é“¾ã€‚è¿™ä¸ªé•¿æœŸè¡Œä¸ºé“¾ç”¨äºåŠ¨æ€é€‰æ‹©é€‚åˆæ¯ä¸ªæ™ºèƒ½ä½“çš„å­ä»»åŠ¡ã€‚</li></ul><p>é€šè¿‡è¿™äº›æ­¥éª¤ï¼ŒHCTAæ¡†æ¶èƒ½å¤Ÿå°†å¤æ‚çš„å¤šæ™ºèƒ½ä½“ä»»åŠ¡åˆ†è§£ä¸ºæ›´å°ã€æ›´æ˜“äºç®¡ç†çš„å­ä»»åŠ¡ï¼Œæ¯ä¸ªå­ä»»åŠ¡éƒ½æ¶‰åŠä¸€ä¸ªè¾ƒå°çš„è¡ŒåŠ¨è§‚å¯Ÿç©ºé—´ï¼Œä»è€Œä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°ä¸“æ³¨äºç‰¹å®šçš„å­ä»»åŠ¡ã€‚è¿™ç§åˆ†è§£æ–¹æ³•ä¸ä»…æé«˜äº†ä»»åŠ¡åˆ†é…çš„æ•ˆç‡ï¼Œè¿˜é™ä½äº†è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶ä½¿å¾—æ™ºèƒ½ä½“èƒ½å¤Ÿæ›´å¥½åœ°åä½œä»¥å®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä»»åŠ¡åˆ†é…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢å‘å…µæ£‹æ¨æ¼”çš„å¼ºåŒ–å­¦ä¹ åˆ†å±‚ä»»åŠ¡ä¼˜åŒ–æŠ€æœ¯ç ”ç©¶</title>
    <link href="/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E9%9D%A2%E5%90%91%E5%85%B5%E6%A3%8B%E6%8E%A8%E6%BC%94%E7%9A%84%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%88%86%E5%B1%82%E4%BB%BB%E5%8A%A1%E4%BC%98%E5%8C%96%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/"/>
    <url>/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E9%9D%A2%E5%90%91%E5%85%B5%E6%A3%8B%E6%8E%A8%E6%BC%94%E7%9A%84%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E5%88%86%E5%B1%82%E4%BB%BB%E5%8A%A1%E4%BC%98%E5%8C%96%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸»è¦å†…å®¹">1. ä¸»è¦å†…å®¹</h2><p>è®ºæ–‡æ·±å…¥æ¢è®¨äº†åˆ†å±‚æ§åˆ¶ç»“æ„çš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•åœ¨å…µæ£‹æ¨æ¼”ç¯å¢ƒä¸­çš„åº”ç”¨ï¼Œæ—¨åœ¨ä¼˜åŒ–å¤æ‚å’Œä¸ç¡®å®šç¯å¢ƒä¸‹çš„ä»»åŠ¡åˆ†é…å’Œå¤šæ™ºèƒ½ä½“ä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ã€‚ä¸»è¦ç ”ç©¶å†…å®¹åŒ…æ‹¬ï¼š</p><ol type="1"><li>é’ˆå¯¹å®æ—¶å…µæ£‹æ¨æ¼”ç¯å¢ƒï¼Œè®¾è®¡äº†å…µæ£‹AIçš„çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´ï¼Œå¹¶ç”Ÿæˆäº†æ•Œæˆ‘å¯¹æŠ—æ€åŠ¿çš„å…³é”®ç‰¹å¾ä¿¡æ¯ã€‚é€šè¿‡ç¦»æ•£åŒ–è¿ç»­åŠ¨ä½œçš„æ“ä½œä¼˜åŒ–äº†åŸå§‹åŠ¨ä½œç©ºé—´ï¼Œç®€åŒ–äº†å¤šæ™ºèƒ½ä½“çš„äº¤äº’è¿‡ç¨‹ï¼ŒåŠ å¿«äº†ç½‘ç»œå­¦ä¹ é€Ÿåº¦ã€‚</li><li>æå‡ºäº†ä¸€ç§èåˆæ³¨æ„åŠ›æœºåˆ¶çš„DQNç®—æ³•ï¼ˆADQNï¼‰ï¼Œé€šè¿‡åµŒå…¥ç½‘ç»œå’Œæ³¨æ„åŠ›å¯¹è¾“å…¥è¿›è¡Œå‘é‡åŒ–å¤„ç†åè¾“å…¥DQNç½‘ç»œï¼Œå°†ç¯å¢ƒåˆ†è§£ä¸ºç‹¬ç«‹çš„å­ç¯å¢ƒï¼Œå¹¶é‡æ–°å®šä¹‰ç‰¹å®šäºå­ä»»åŠ¡çš„åŠ¨ä½œ-ä»·å€¼å‡½æ•°ï¼Œæœ‰æ•ˆæé«˜äº†åœ¨å¤æ‚ç¯å¢ƒä¸­è¿›è¡Œä»»åŠ¡åˆ†é…çš„è´¨é‡å’Œæ•ˆç‡ã€‚</li><li>åŸºäºæ·±åº¦å¼ºåŒ–å­¦ä¹ çš„å¤šçº§æ§åˆ¶ç»“æ„ï¼Œæå‡ºäº†å¤šæ™ºèƒ½ä½“åˆ†å±‚è‡ªä¸»å†³ç­–ç®—æ³•ï¼ˆADQN-MAPPOï¼‰ï¼Œç»“åˆäº†å¤šæ™ºèƒ½ä½“è¿‘ç«¯ç­–ç•¥ä¼˜åŒ–ç®—æ³•ä¸ADQNç®—æ³•ï¼Œé€šè¿‡å°†å¤æ‚ä»»åŠ¡åˆ’åˆ†æˆå­ä»»åŠ¡è¿›è¡Œåˆ†é…åå†æ‰§è¡Œï¼Œå¢å¼ºäº†æ™ºèƒ½ä½“è‡ªä¸»å†³ç­–çš„èƒ½åŠ›ï¼Œæé«˜äº†ç®—æ³•æ¨¡å‹çš„è®­ç»ƒé€Ÿåº¦å’Œå†³ç­–èƒ½åŠ›ã€‚</li></ol><p>è®ºæ–‡é€šè¿‡åœ¨å±±åœ°3v3å’Œæ°´ç”°3v3çš„å…µæ£‹æ¨æ¼”ç¯å¢ƒä¸­çš„å®éªŒï¼ŒéªŒè¯äº†ADQN-MAPPOç®—æ³•åœ¨å¾—åˆ†èƒ½åŠ›ã€èƒœç‡ã€æ­¥å‡æ¨ç†æ—¶é—´ä»¥åŠæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ç­‰æ–¹é¢çš„ä¼˜è¶Šæ€§èƒ½ã€‚ç ”ç©¶ç»“æœå¯¹è¿›ä¸€æ­¥æå‡åˆ†å±‚æ§åˆ¶ç»“æ„çš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•åœ¨å…µæ£‹æ¨æ¼”ä»¥åŠå…¶ä»–å¤æ‚åº”ç”¨ç¯å¢ƒä¸­çš„æ€§èƒ½å’Œåº”ç”¨èŒƒå›´æä¾›äº†å‚è€ƒæ„ä¹‰ã€‚</p><h2 id="åˆ†å±‚å†³ç­–æ¡†æ¶">2. åˆ†å±‚å†³ç­–æ¡†æ¶</h2><p>è¿™ç¯‡è®ºæ–‡ä¸­æå‡ºçš„åˆ†å±‚å†³ç­–æ¡†æ¶æ˜¯ä¸ºäº†è§£å†³å…µæ£‹æ¨æ¼”ç¯å¢ƒä¸­çš„å¤šæ™ºèƒ½ä½“ä»»åŠ¡åˆ†é…å’Œæ‰§è¡Œé—®é¢˜ã€‚åˆ†å±‚å†³ç­–æ¡†æ¶åŒ…æ‹¬ä¸¤ä¸ªä¸»è¦å±‚æ¬¡ï¼šä»»åŠ¡åˆ†é…å±‚å’Œæ™ºèƒ½ä½“å†³ç­–å±‚ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸¤ä¸ªå±‚æ¬¡çš„è¯¦ç»†ä»‹ç»ï¼š</p><h3 id="ä»»åŠ¡åˆ†é…å±‚">2.1 ä»»åŠ¡åˆ†é…å±‚</h3><p>ä»»åŠ¡åˆ†é…å±‚çš„ç›®çš„æ˜¯å°†å…¨å±€ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œå¹¶å°†è¿™äº›å­ä»»åŠ¡åˆ†é…ç»™ä¸åŒçš„æ™ºèƒ½ä½“ã€‚è¿™ä¸€å±‚ä¸»è¦å…³æ³¨å¦‚ä½•åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­é«˜æ•ˆåœ°åˆ†é…ä»»åŠ¡ï¼Œä»¥ä¾¿æ¯ä¸ªæ™ºèƒ½ä½“å¯ä»¥ä¸“æ³¨äºè‡ªå·±çš„å­ä»»åŠ¡ï¼Œä»è€Œæé«˜æ•´ä½“ä»»åŠ¡æ‰§è¡Œçš„æ•ˆç‡å’Œæ•ˆæœã€‚</p><ul><li><strong>çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´è®¾è®¡</strong>ï¼šåœ¨è¿™ä¸€å±‚ä¸­ï¼ŒçŠ¶æ€ç©ºé—´åŒ…æ‹¬äº†æ•´ä¸ªç¯å¢ƒçš„æ€»ä½“çŠ¶æ€ï¼Œå¦‚æˆ˜åœºä¸Šçš„åœ°å½¢ã€æ•Œæˆ‘åŒæ–¹çš„å…µåŠ›éƒ¨ç½²ç­‰ã€‚åŠ¨ä½œç©ºé—´åˆ™ç”±å­ä»»åŠ¡çš„ç¼–å·é›†åˆæ„æˆï¼Œæ„å‘³ç€æ¯ä¸ªæ™ºèƒ½ä½“çš„åŠ¨ä½œæ˜¯é€‰æ‹©ä¸€ä¸ªå­ä»»åŠ¡æ¥æ‰§è¡Œã€‚</li><li><strong>å­ä»»åŠ¡è®¾è®¡</strong>ï¼šæ ¹æ®å…µæ£‹æ¨æ¼”æ¸¸æˆçš„ç‰¹æ€§ï¼Œå°†æ€»ä½“ä»»åŠ¡ç»†åˆ†ä¸ºè¡Œå†›ã€è¿›æ”»ã€é˜²å¾¡ã€æ”¯æ´ã€å¤ºæ§ç­‰å­ä»»åŠ¡ã€‚æ¯ä¸ªå­ä»»åŠ¡ç”±ä»»åŠ¡åç§°ã€ç¼–å·ã€ç±»å‹ã€å…³ç³»ã€ç›®æ ‡ç­‰å…ƒç´ ç»„æˆã€‚</li><li><strong>ADQNç®—æ³•</strong>ï¼šæå‡ºäº†ä¸€ç§èåˆæ³¨æ„åŠ›æœºåˆ¶çš„DQNç®—æ³•ï¼ˆADQNï¼‰ï¼Œç”¨äºå¤„ç†ä»»åŠ¡åˆ†é…é—®é¢˜ã€‚ADQNç®—æ³•é€šè¿‡æ™ºèƒ½ä½“å¯¹å­ä»»åŠ¡çš„æ‰§è¡Œï¼Œå°†ç¯å¢ƒåˆ†è§£ä¸ºç‹¬ç«‹çš„å­ç¯å¢ƒï¼Œå¹¶é‡æ–°å®šä¹‰ç‰¹å®šäºå­ä»»åŠ¡çš„åŠ¨ä½œ-ä»·å€¼å‡½æ•°ã€‚</li></ul><h3 id="æ™ºèƒ½ä½“å†³ç­–å±‚">2.2 æ™ºèƒ½ä½“å†³ç­–å±‚</h3><p>æ™ºèƒ½ä½“å†³ç­–å±‚æ ¹æ®ä»»åŠ¡åˆ†é…å±‚åˆ†é…çš„å­ä»»åŠ¡ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éœ€è¦åšå‡ºå…·ä½“çš„è¡ŒåŠ¨å†³ç­–æ¥å®Œæˆä»»åŠ¡ã€‚è¿™ä¸€å±‚ä¸»è¦å…³æ³¨æ™ºèƒ½ä½“å¦‚ä½•åœ¨å±€éƒ¨ç¯å¢ƒä¸­åšå‡ºæœ€ä¼˜å†³ç­–ã€‚</p><ul><li><strong>MAPPOç®—æ³•</strong>ï¼šåœ¨è¿™ä¸€å±‚ä¸­ï¼Œä½¿ç”¨äº†å¤šæ™ºèƒ½ä½“è¿‘ç«¯ç­–ç•¥ä¼˜åŒ–ç®—æ³•ï¼ˆMAPPOï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§é€‚ç”¨äºå¤šæ™ºèƒ½ä½“ç¯å¢ƒçš„å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œå¯ä»¥å¤„ç†åˆ†å¸ƒå¼éƒ¨åˆ†å¯è§‚å¯Ÿé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆDEC-POMDPï¼‰ã€‚</li><li><strong>ç­–ç•¥ç½‘ç»œå’Œè¯„ä»·ç½‘ç»œ</strong>ï¼šæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰è‡ªå·±çš„ç­–ç•¥ç½‘ç»œï¼Œæ ¹æ®å±€éƒ¨è§‚æµ‹ä¿¡æ¯äº§ç”ŸåŠ¨ä½œã€‚åŒæ—¶ï¼Œæœ‰ä¸€ä¸ªå…¨å±€è¯„ä»·ç½‘ç»œæ ¹æ®å…¨å±€ç¯å¢ƒä¿¡æ¯ç”ŸæˆçŠ¶æ€ä»·å€¼ï¼Œç”¨äºæŒ‡å¯¼ç­–ç•¥ç½‘ç»œçš„æ›´æ–°ã€‚</li><li><strong>åˆ†å±‚æ¶æ„çš„ä¼˜åŠ¿</strong>ï¼šé€šè¿‡åˆ†å±‚æ¶æ„ï¼Œä¸Šå±‚ä»»åŠ¡åˆ†é…ç½‘ç»œå¯ä»¥åœ¨æ›´å¤§çš„æ—¶é—´å°ºåº¦ä¸Šè¿è¡Œï¼Œè€Œä¸‹å±‚æ™ºèƒ½ä½“ç­–ç•¥ç½‘ç»œåˆ™åœ¨æ›´ç»†çš„å°ºåº¦ä¸Šåšå‡ºå†³ç­–ã€‚è¿™ç§åˆ†å±‚æ–¹æ³•æœ‰åŠ©äºæé«˜æ™ºèƒ½ä½“åœ¨å…µæ£‹æ¨æ¼”ç¯å¢ƒä¸­çš„å†³ç­–æ•ˆç‡å’Œæ•ˆæœã€‚</li></ul><h3 id="adqn-mappoç®—æ³•">2.3 ADQN-MAPPOç®—æ³•</h3><p>ADQN-MAPPOç®—æ³•æ˜¯å°†ADQNç®—æ³•å’ŒMAPPOç®—æ³•ç»“åˆçš„åˆ†å±‚å†³ç­–æ¡†æ¶ã€‚è¿™ç§æ¡†æ¶é€šè¿‡å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå­ä»»åŠ¡ï¼Œå¹¶åœ¨ä¸åŒçš„æŠ½è±¡å±‚æ¬¡ä¸Šå­¦ä¹ ç­–ç•¥ï¼Œè§£å†³äº†å¤§è§„æ¨¡å¤æ‚ç¯å¢ƒä¸‹çš„å†³ç­–é—®é¢˜ã€‚ADQN-MAPPOç®—æ³•åœ¨å®éªŒä¸­è¡¨ç°å‡ºäº†ä¼˜è¶Šçš„æ€§èƒ½ï¼ŒåŒ…æ‹¬æ›´é«˜çš„å¾—åˆ†èƒ½åŠ›ã€èƒœç‡ä»¥åŠæ›´å¿«çš„æ”¶æ•›é€Ÿåº¦ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä»»åŠ¡åˆ†é…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºåˆ†å±‚å¼ºåŒ–å­¦ä¹ çš„å¤šæ™ºèƒ½ä½“åšå¼ˆå¯¹æŠ—ç­–ç•¥</title>
    <link href="/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E5%88%86%E5%B1%82%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%9A%E5%BC%88%E5%AF%B9%E6%8A%97%E7%AD%96%E7%95%A5/"/>
    <url>/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E5%88%86%E5%B1%82%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%9A%E5%BC%88%E5%AF%B9%E6%8A%97%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸»è¦å†…å®¹">1. ä¸»è¦å†…å®¹</h2><h3 id="ç ”ç©¶å†…å®¹">1.1 ç ”ç©¶å†…å®¹</h3><ul><li>æå‡ºäº†ä¸€ç§ç»“åˆä»»åŠ¡å¯è§£é‡Šæ€§çš„æŒ‡æŒ¥å®˜-é›†ç¾¤å¤šæ™ºèƒ½ä½“åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œæé«˜ç®—æ³•åœ¨å¤æ‚åšå¼ˆåœºæ™¯ä¸­çš„æ”¶æ•›é€Ÿåº¦ã€‚</li><li>è®¾è®¡äº†ä¸€ç§ç»“åˆè½¯å†³ç­–æ ‘çš„å¤šæ™ºèƒ½ä½“åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œå¢å¼ºäº†ç­–ç•¥çš„è§£é‡Šæ€§ã€‚</li><li>åŸºäºæ¨¡ç³Šå†³ç­–æ ‘å»ºç«‹äº†åšå¼ˆå¯¹æŠ—ç­–ç•¥ï¼Œé€šè¿‡æŒ–æ˜æˆ˜æ³•è§„åˆ™ï¼Œæ¨¡æ‹Ÿäººçš„å†³ç­–è¿‡ç¨‹ã€‚</li><li>åœ¨è”åˆä½œæˆ˜å®éªŒå¹³å°ä¸Šè®¾è®¡äº†ç©ºæˆ˜åšå¼ˆåœºæ™¯å’Œæµ·ç©ºè”åˆä½œæˆ˜åœºæ™¯ï¼ŒéªŒè¯äº†æ‰€æç®—æ³•çš„æœ‰æ•ˆæ€§ã€‚</li></ul><h3 id="ç®—æ³•è®¾è®¡ä¸å®éªŒéªŒè¯">1.2 ç®—æ³•è®¾è®¡ä¸å®éªŒéªŒè¯</h3><ul><li>è®¾è®¡äº†æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œå¹¶é€šè¿‡å®éªŒéªŒè¯äº†å…¶åœ¨æ”¶æ•›æ€§ã€è§£é‡Šæ€§ä¸ä½œæˆ˜æ•ˆèƒ½æ–¹é¢çš„ä¼˜åŠ¿ã€‚</li><li>è®¾è®¡äº†ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ŒéªŒè¯äº†å…¶åœ¨ç­–ç•¥è§£é‡Šæ€§å’Œç®—æ³•æ”¶æ•›æ€§æ–¹é¢çš„ä¼˜åŠ¿ã€‚</li><li>æå‡ºäº†åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ï¼Œå¹¶é€šè¿‡å®éªŒéªŒè¯äº†å…¶åˆ†ç±»æ•ˆæœå’Œæˆ˜æ³•è§„åˆ™æå–æ•ˆæœã€‚</li></ul><h3 id="å®éªŒç¯å¢ƒä¸è®¾ç½®">1.3 å®éªŒç¯å¢ƒä¸è®¾ç½®</h3><ul><li>ä½¿ç”¨äº†â€œStarCraft2â€ä½œä¸ºå®éªŒå¹³å°ï¼Œè®¾è®¡äº†å¤šç§åšå¼ˆåœºæ™¯ï¼ŒåŒ…æ‹¬ç®€å•åŒæ„æ™ºèƒ½ä½“æ§åˆ¶åœºæ™¯ã€å¤æ‚åŒæ„æ™ºèƒ½ä½“æ§åˆ¶åœºæ™¯å’Œå¤æ‚å¼‚æ„æ™ºèƒ½ä½“æ§åˆ¶åœºæ™¯ã€‚</li></ul><h3 id="ç»“è®ºä¸å±•æœ›">1.4 ç»“è®ºä¸å±•æœ›</h3><ul><li>è®ºæ–‡æå‡ºçš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•åœ¨å¤šæ™ºèƒ½ä½“åšå¼ˆå¯¹æŠ—ä¸­å…·æœ‰å®é™…åº”ç”¨ä»·å€¼å’Œæ½œåŠ›ï¼Œå°¤å…¶åœ¨æé«˜æŒ‡æŒ¥éƒ¨å¿«é€Ÿå†³ç­–èƒ½åŠ›å’Œå†›é˜Ÿå¿«é€Ÿååº”æ‰“å‡»èƒ½åŠ›ä¸Šã€‚</li><li>è®ºæ–‡è¿˜æŒ‡å‡ºäº†ç ”ç©¶çš„å±€é™æ€§ï¼Œå¹¶å¯¹æœªæ¥çš„ç ”ç©¶æ–¹å‘æå‡ºäº†å±•æœ›ï¼ŒåŒ…æ‹¬æ¶ˆé™¤ä¸Šå±‚æ™ºèƒ½ä½“å­¦ä¹ è®­ç»ƒç»“æœå¯¹æ¨¡å‹æ€§èƒ½çš„è´Ÿé¢å½±å“ï¼Œä»¥åŠé’ˆå¯¹æ¨¡ç³Šç¯å¢ƒä¸‹å¤šå±‚æ¬¡ã€å¤šç›®æ ‡çš„å†³ç­–é—®é¢˜å¼€å±•ç ”ç©¶ã€‚</li></ul><h2 id="ç ”ç©¶æ–¹æ³•">2. ç ”ç©¶æ–¹æ³•</h2><ul><li><strong>åˆ†å±‚å¼ºåŒ–å­¦ä¹ ï¼ˆHRLï¼‰</strong>ï¼šæ–‡ç« é‡‡ç”¨åˆ†å±‚å¼ºåŒ–å­¦ä¹ æ–¹æ³•æ¥å¤„ç†å¤šæ™ºèƒ½ä½“å¤æ‚åšå¼ˆåœºæ™¯ä¸­çš„ç­–ç•¥ä¼˜åŒ–é—®é¢˜ã€‚è¿™ç§æ–¹æ³•é€šè¿‡å°†å¤æ‚çš„å†³ç­–é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå±‚æ¬¡ï¼Œä½¿å¾—å­¦ä¹ è¿‡ç¨‹æ›´åŠ é«˜æ•ˆå’Œå¯è§£é‡Šã€‚</li><li><strong>ç»“åˆä»»åŠ¡å¯è§£é‡Šæ€§</strong>ï¼šæ–‡ç« æå‡ºäº†ç»“åˆä»»åŠ¡å¯è§£é‡Šæ€§çš„æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œé€šè¿‡æ¨¡ä»¿å­¦ä¹ è®¾è®¡å¯è§£é‡Šçš„å­ä»»åŠ¡ï¼Œå¼•å…¥ä¸“å®¶ç»éªŒï¼Œæé«˜ç®—æ³•çš„æ”¶æ•›é€Ÿåº¦ã€‚</li><li><strong>è½¯å†³ç­–æ ‘</strong>ï¼šä¸ºäº†å¢å¼ºç­–ç•¥çš„è§£é‡Šæ€§ï¼Œæ–‡ç« è®¾è®¡äº†ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œé€šè¿‡å¼•å…¥çº¿æ€§æƒé‡è¡¨ç¤ºçŠ¶æ€ç‰¹å¾ä¸å†³ç­–ç»“æœä¹‹é—´çš„å› æœé€»è¾‘ã€‚</li><li><strong>æ¨¡ç³Šå†³ç­–æ ‘</strong>ï¼šæ–‡ç« è¿›ä¸€æ­¥æŒ–æ˜æˆ˜æ³•è§„åˆ™ï¼Œå»ºç«‹åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ï¼Œæ¨¡æ‹Ÿäººçš„å†³ç­–è¿‡ç¨‹ï¼Œå¹¶æå–æ¨¡ç³Šå†³ç­–æ ‘ä¸­éšè—çš„æˆ˜æœ¯è§„åˆ™ã€‚</li></ul><h2 id="ç®—æ³•å®ç°">3. ç®—æ³•å®ç°</h2><ul><li><strong>æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHESï¼‰</strong>ï¼šæ–‡ç« å®ç°äº†ä¸€ç§æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œè¯¥ç®—æ³•åŒ…å«ä¸Šå±‚æŒ‡æŒ¥å®˜å†³ç­–æ¨¡å‹å’Œä¸‹å±‚é›†ç¾¤ä½œæˆ˜æ¨¡å‹ï¼Œé€šè¿‡å¯è§£é‡Šå­ä»»åŠ¡å®ç°ä¿¡æ¯ä¼ é€’ã€‚</li><li><strong>ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHEEï¼‰</strong>ï¼šæ–‡ç« å®ç°äº†ä¸€ç§ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨HESç®—æ³•æ¡†æ¶åŸºç¡€ä¸Šï¼Œå°†è½¯å†³ç­–æ ‘ç»“æ„èå…¥å®è§‚å†³ç­–è¿‡ç¨‹ä¸­ã€‚</li><li><strong>åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ï¼ˆFDTGASï¼‰</strong>ï¼šæ–‡ç« å®ç°äº†ä¸€ç§åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ï¼Œé€šè¿‡é¢„å¤„ç†å¯¹æŠ—æ•°æ®ï¼Œæ„å»ºæ¨¡ç³Šå†³ç­–æ ‘ï¼Œå¹¶ä»ä¸­æå–æˆ˜æ³•è§„åˆ™ã€‚</li></ul><h2 id="ä¸Šå±‚å†³ç­–æ¨¡å‹çš„ä¸»è¦ç‰¹ç‚¹å’Œå®ç°ç»†èŠ‚">4.ä¸Šå±‚å†³ç­–æ¨¡å‹çš„ä¸»è¦ç‰¹ç‚¹å’Œå®ç°ç»†èŠ‚ï¼š</h2><h3 id="æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•hesä¸­çš„ä¸Šå±‚å†³ç­–æ¨¡å‹">4.1æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHESï¼‰ä¸­çš„ä¸Šå±‚å†³ç­–æ¨¡å‹</h3><ul><li><strong>æŒ‡æŒ¥å®˜å†³ç­–æ¨¡å‹</strong>ï¼šæ¨¡æ‹Ÿæˆ˜äº‰ä¸­é«˜çº§æŒ‡æŒ¥å®˜çš„å†³ç­–è¿‡ç¨‹ï¼ŒåŸºäºæˆ˜äº‰æ€»ä½“å½¢åŠ¿çš„å˜åŒ–åˆ¶å®šæ€»ä½“ä½œæˆ˜è§„åˆ’ï¼Œå¹¶å°†æˆ˜æ–—å­ä»»åŠ¡åˆ†é…ç»™ä¸‹å±‚æˆ˜æ–—å•ä½ã€‚</li><li><strong>ä»»åŠ¡å¯è§£é‡Šæ€§</strong>ï¼šç»“åˆä»»åŠ¡å¯è§£é‡Šæ€§æ€æƒ³ï¼Œè®¾è®¡å¯è§£é‡Šçš„å­ä»»åŠ¡ï¼Œå°†ä¸“å®¶ç»éªŒå¼•å…¥åˆ°åˆ†å±‚æ¡†æ¶ä¸­ï¼Œå¼•å¯¼æ™ºèƒ½ä½“è¿›è¡Œå®šå‘å­¦ä¹ ï¼Œæé«˜ç®—æ³•çš„æ”¶æ•›é€Ÿåº¦ã€‚</li></ul><h3 id="ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•heeä¸­çš„ä¸Šå±‚å†³ç­–æ¨¡å‹">4.2ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHEEï¼‰ä¸­çš„ä¸Šå±‚å†³ç­–æ¨¡å‹</h3><ul><li><strong>è½¯å†³ç­–æ ‘ï¼ˆSDTï¼‰</strong>ï¼šå¼•å…¥è½¯å†³ç­–æ ‘ç»“æ„ï¼Œæ”¹è¿›ä¼ ç»Ÿçš„å†³ç­–æ ‘æ¨¡å‹ï¼Œä½¿å…¶å¯ä»¥æ›¿ä»£ç¥ç»ç½‘ç»œæ‹ŸåˆåŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œå¢å¼ºæ¨¡å‹çš„å¯è§£é‡Šæ€§ã€‚</li><li><strong>çº¿æ€§æƒé‡</strong>ï¼šåœ¨è½¯å†³ç­–æ ‘çš„å¶å­èŠ‚ç‚¹å¼•å…¥çº¿æ€§æ¨¡å‹ï¼Œé€šè¿‡çº¿æ€§æƒé‡è¡¨ç¤ºçŠ¶æ€ç‰¹å¾ä¸å†³ç­–ç»“æœä¹‹é—´çš„å› æœé€»è¾‘ï¼Œå¢å¼ºç­–ç•¥çš„è§£é‡Šæ€§ã€‚</li></ul><h3 id="åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ä¸­çš„ä¸Šå±‚å†³ç­–æ¨¡å‹">4.3åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ä¸­çš„ä¸Šå±‚å†³ç­–æ¨¡å‹</h3><ul><li><strong>æ¨¡ç³Šå†³ç­–æ ‘</strong>ï¼šæ„å»ºæ¨¡ç³Šå†³ç­–æ ‘æ¨¡æ‹Ÿäººçš„å†³ç­–è¿‡ç¨‹ï¼Œå¤„ç†é«˜ç»´åº¦æ•°æ®é›†ä¸­çš„æ¨¡ç³Šæ€§å’Œä¸ç¡®å®šæ€§ï¼Œæé«˜åˆ†ç±»çš„å‡†ç¡®ç‡å’Œæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</li><li><strong>æˆ˜æ³•è§„åˆ™æå–</strong>ï¼šä»æ¨¡ç³Šå†³ç­–æ ‘ä¸­æå–éšå«çš„æˆ˜æ³•è§„åˆ™ï¼Œå»ºç«‹ä»¥IF-THENè§„åˆ™å½¢å¼è¡¨ç¤ºçš„åšå¼ˆå¯¹æŠ—ç­–ç•¥ã€‚</li></ul><h3 id="å®ç°ç»†èŠ‚">4.4 å®ç°ç»†èŠ‚</h3><ul><li><strong>ç¥ç»ç½‘ç»œå»ºæ¨¡</strong>ï¼šä¸Šå±‚å†³ç­–æ¨¡å‹é€šå¸¸é‡‡ç”¨ç¥ç»ç½‘ç»œè¿›è¡Œå»ºæ¨¡ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯æ¥å¤„ç†é«˜ç»´æ•°æ®å’Œå¤æ‚çš„å†³ç­–é—®é¢˜ã€‚</li><li><strong>å‚æ•°æ›´æ–°</strong>ï¼šä¸Šå±‚å†³ç­–æ¨¡å‹çš„å‚æ•°é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•è¿›è¡Œæ›´æ–°ï¼Œåˆ©ç”¨ç»éªŒå›æ”¾æœºåˆ¶å’Œç­–ç•¥æ¢¯åº¦æ–¹æ³•æ¥ä¼˜åŒ–æ¨¡å‹æ€§èƒ½ã€‚</li><li><strong>ç›®æ ‡åˆ†è§£</strong>ï¼šä¸Šå±‚æ™ºèƒ½ä½“å­¦ä¹ ç›®æ ‡çš„åˆ†è§£ç­–ç•¥ï¼Œå°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£ä¸ºå¤šä¸ªå­ç›®æ ‡ï¼Œé€šè¿‡å­ç›®æ ‡çš„å®ç°é€æ­¥è¾¾æˆæœ€ç»ˆç›®æ ‡ã€‚</li></ul><h3 id="åº”ç”¨åœºæ™¯">4.5 åº”ç”¨åœºæ™¯</h3><ul><li><strong>è”åˆä½œæˆ˜å®éªŒå¹³å°</strong>ï¼šåœ¨ç©ºæˆ˜åšå¼ˆåœºæ™¯å’Œæµ·ç©ºè”åˆä½œæˆ˜åœºæ™¯ä¸­ï¼Œä¸Šå±‚å†³ç­–æ¨¡å‹è´Ÿè´£åˆ¶å®šæ•´ä½“ä½œæˆ˜ç­–ç•¥ï¼ŒæŒ‡å¯¼ä¸‹å±‚ä½œæˆ˜å•å…ƒæ‰§è¡Œå…·ä½“çš„ä½œæˆ˜ä»»åŠ¡ã€‚</li></ul><h2 id="ä¸Šå±‚å†³ç­–æ¨¡å‹çš„å…·ä½“å®ç°ç»†èŠ‚">5. ä¸Šå±‚å†³ç­–æ¨¡å‹çš„å…·ä½“å®ç°ç»†èŠ‚</h2><h3 id="æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•hesçš„ä¸Šå±‚å†³ç­–æ¨¡å‹">5.1æŒ‡æŒ¥å®˜-é›†ç¾¤åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHESï¼‰çš„ä¸Šå±‚å†³ç­–æ¨¡å‹</h3><h4 id="è®¾è®¡ç†å¿µ">è®¾è®¡ç†å¿µ</h4><ul><li><strong>æŒ‡æŒ¥å®˜è§’è‰²</strong>ï¼šæ¨¡æ‹Ÿé«˜çº§æŒ‡æŒ¥å®˜çš„å†³ç­–è¿‡ç¨‹ï¼Œè´Ÿè´£åœ¨æˆ˜äº‰æˆ–åšå¼ˆçš„å®è§‚å±‚é¢ä¸Šåˆ¶å®šæˆ˜ç•¥ã€‚</li><li><strong>ä»»åŠ¡åˆ†è§£</strong>ï¼šå°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£ä¸ºå¯è§£é‡Šçš„å­ä»»åŠ¡ï¼Œè¿™äº›å­ä»»åŠ¡å¯¹ä¸‹å±‚é›†ç¾¤ä½œæˆ˜æ¨¡å‹æ¥è¯´æ˜¯å…·ä½“çš„æˆ˜æœ¯ç›®æ ‡ã€‚</li></ul><h4 id="å®ç°ç»†èŠ‚-1">å®ç°ç»†èŠ‚</h4><ul><li><strong>ç¥ç»ç½‘ç»œæ¶æ„</strong>ï¼šä½¿ç”¨ç¥ç»ç½‘ç»œæ¥æ‹ŸåˆæŒ‡æŒ¥å®˜çš„å†³ç­–ç­–ç•¥ï¼Œè¯¥ç½‘ç»œè¾“å…¥å…¨å±€è§‚æµ‹çŠ¶æ€ï¼Œè¾“å‡ºå­ä»»åŠ¡æˆ–æˆ˜æœ¯ç›®æ ‡ã€‚</li><li><strong>æ¨¡ä»¿å­¦ä¹ </strong>ï¼šåŸºäºä¸“å®¶ç»éªŒè®¾è®¡å¯è§£é‡Šçš„å­ä»»åŠ¡ï¼Œé€šè¿‡æ¨¡ä»¿å­¦ä¹ å°†ä¸“å®¶çŸ¥è¯†æ•´åˆåˆ°ç¥ç»ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ä¸­ã€‚</li><li><strong>å‚æ•°æ›´æ–°</strong>ï¼šåˆ©ç”¨æ¢¯åº¦ä¸‹é™æ–¹æ³•æ›´æ–°ç¥ç»ç½‘ç»œå‚æ•°ï¼Œä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°ï¼Œæé«˜å†³ç­–è´¨é‡ã€‚</li></ul><h3 id="ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•heeçš„ä¸Šå±‚å†³ç­–æ¨¡å‹">5.2ç»“åˆè½¯å†³ç­–æ ‘çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆHEEï¼‰çš„ä¸Šå±‚å†³ç­–æ¨¡å‹</h3><h4 id="è®¾è®¡ç†å¿µ-1">è®¾è®¡ç†å¿µ</h4><ul><li><strong>è½¯å†³ç­–æ ‘ï¼ˆSDTï¼‰</strong>ï¼šå¼•å…¥è½¯å†³ç­–æ ‘æ¥å¢å¼ºç­–ç•¥çš„è§£é‡Šæ€§ï¼ŒSDTç»“åˆäº†ç¥ç»ç½‘ç»œçš„éçº¿æ€§å»ºæ¨¡èƒ½åŠ›å’Œå†³ç­–æ ‘çš„å¯è§£é‡Šæ€§ã€‚</li></ul><h4 id="å®ç°ç»†èŠ‚-2">å®ç°ç»†èŠ‚</h4><ul><li><strong>æ ‘ç»“æ„ä¼˜åŒ–</strong>ï¼šå¯¹ä¼ ç»Ÿçš„è½¯å†³ç­–æ ‘ç»“æ„è¿›è¡Œæ”¹è¿›ï¼Œå¼•å…¥çº¿æ€§æƒé‡æ¥è¡¨ç¤ºçŠ¶æ€ç‰¹å¾ä¸å†³ç­–ç»“æœä¹‹é—´çš„å› æœé€»è¾‘ã€‚</li><li><strong>çº¿æ€§å¶å­èŠ‚ç‚¹</strong>ï¼šåœ¨SDTçš„å¶å­èŠ‚ç‚¹ä½¿ç”¨çº¿æ€§æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹é€šè¿‡å­¦ä¹ çŠ¶æ€ç‰¹å¾çš„æƒé‡æ¥é¢„æµ‹åŠ¨ä½œä»·å€¼ã€‚</li><li><strong>åœ¨çº¿å­¦ä¹ </strong>ï¼šSDTæ¨¡å‹æ”¯æŒåœ¨çº¿å­¦ä¹ ï¼Œèƒ½å¤Ÿæ ¹æ®å®æ—¶æ•°æ®æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œå¢å¼ºæ¨¡å‹å¯¹æ–°æ€åŠ¿çš„é€‚åº”èƒ½åŠ›ã€‚</li></ul><h3 id="åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥çš„ä¸Šå±‚å†³ç­–æ¨¡å‹">5.3åŸºäºæ¨¡ç³Šå†³ç­–æ ‘çš„åšå¼ˆå¯¹æŠ—ç­–ç•¥çš„ä¸Šå±‚å†³ç­–æ¨¡å‹</h3><h4 id="è®¾è®¡ç†å¿µ-2">è®¾è®¡ç†å¿µ</h4><ul><li><strong>æ¨¡ç³Šå†³ç­–æ ‘</strong>ï¼šåˆ©ç”¨æ¨¡ç³Šå†³ç­–æ ‘å¤„ç†é«˜ç»´åº¦æ•°æ®é›†ä¸­çš„æ¨¡ç³Šæ€§å’Œä¸ç¡®å®šæ€§ï¼Œæé«˜å†³ç­–çš„å‡†ç¡®æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚</li></ul><h4 id="å®ç°ç»†èŠ‚-3">å®ç°ç»†èŠ‚</h4><ul><li><strong>å±æ€§æ¨¡ç³ŠåŒ–</strong>ï¼šå°†è¿ç»­å‹å±æ€§è½¬æ¢ä¸ºæ¨¡ç³Šé›†åˆï¼Œå¹¶é€šè¿‡éš¶å±åº¦å‡½æ•°è®¡ç®—å±æ€§å€¼åœ¨æ¨¡ç³Šé›†åˆä¸­çš„éš¶å±åº¦ã€‚</li><li><strong>åˆ†è£‚å±æ€§é€‰æ‹©</strong>ï¼šåŸºäºåˆ†ç±»ä¸ç¡®å®šæ€§é€‰æ‹©åˆ†è£‚å±æ€§ï¼Œä»¥æœ€å°åŒ–èŠ‚ç‚¹çš„å¹³å‡æ¨¡ç³Šä¿¡æ¯ç†µã€‚</li><li><strong>æˆ˜æ³•è§„åˆ™æå–</strong>ï¼šä»æ¨¡ç³Šå†³ç­–æ ‘ä¸­æå–IF-THENå½¢å¼çš„æˆ˜æ³•è§„åˆ™ï¼Œä¸ºåšå¼ˆå¯¹æŠ—æä¾›å…·ä½“çš„ç­–ç•¥æŒ‡å¯¼ã€‚</li></ul><h3 id="é€šç”¨å®ç°ç»†èŠ‚">5.4 é€šç”¨å®ç°ç»†èŠ‚</h3><h4 id="æŸå¤±å‡½æ•°ä¸ä¼˜åŒ–">æŸå¤±å‡½æ•°ä¸ä¼˜åŒ–</h4><ul><li><strong>æŸå¤±å‡½æ•°</strong>ï¼šè®¾è®¡æŸå¤±å‡½æ•°ä»¥è¡¡é‡æ¨¡å‹é¢„æµ‹ä¸å®é™…ç»“æœä¹‹é—´çš„å·®å¼‚ï¼Œå¸¸ç”¨çš„æŸå¤±å‡½æ•°åŒ…æ‹¬å‡æ–¹è¯¯å·®ç­‰ã€‚</li><li><strong>ä¼˜åŒ–ç®—æ³•</strong>ï¼šé‡‡ç”¨Adamä¼˜åŒ–å™¨ç­‰é«˜çº§ä¼˜åŒ–ç®—æ³•æ¥æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œæé«˜è®­ç»ƒæ•ˆç‡å’Œæ¨¡å‹æ€§èƒ½ã€‚</li></ul><h4 id="è®­ç»ƒä¸éªŒè¯">è®­ç»ƒä¸éªŒè¯</h4><ul><li><strong>è®­ç»ƒè¿‡ç¨‹</strong>ï¼šé€šè¿‡ä¸ç¯å¢ƒçš„äº¤äº’ä¸æ–­æ”¶é›†æ•°æ®ï¼Œåˆ©ç”¨è¿™äº›æ•°æ®è®­ç»ƒä¸Šå±‚å†³ç­–æ¨¡å‹ã€‚</li><li><strong>éªŒè¯ä¸æµ‹è¯•</strong>ï¼šåœ¨ä¸åŒçš„åšå¼ˆåœºæ™¯ä¸­éªŒè¯ä¸Šå±‚å†³ç­–æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œè°ƒæ•´æ¨¡å‹å‚æ•°ä»¥é€‚åº”ä¸åŒçš„æˆ˜æœ¯éœ€æ±‚ã€‚</li></ul><p>è¿™äº›å®ç°ç»†èŠ‚å…±åŒæ„æˆäº†ä¸Šå±‚å†³ç­–æ¨¡å‹çš„æ ¸å¿ƒï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å¤šæ™ºèƒ½ä½“åšå¼ˆå¯¹æŠ—ä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚é€šè¿‡è¿™äº›ç»†èŠ‚çš„å®ç°ï¼Œä¸Šå±‚å†³ç­–æ¨¡å‹èƒ½å¤Ÿæä¾›æœ‰æ•ˆçš„æˆ˜ç•¥æŒ‡å¯¼ï¼Œå¹¶ä¸ä¸‹å±‚æ‰§è¡Œæ¨¡å‹ååŒå·¥ä½œï¼Œå®ç°æ•´ä½“ä»»åŠ¡ç›®æ ‡ã€‚</p><p>[1]ä¹”å¤©æ¶¦.åŸºäºåˆ†å±‚å¼ºåŒ–å­¦ä¹ çš„å¤šæ™ºèƒ½ä½“åšå¼ˆå¯¹æŠ—ç­–ç•¥[D].ä¸œå—å¤§å­¦,2023.DOI:10.27014/d.cnki.gdnau.2023.001144.</p>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä»»åŠ¡åˆ†é…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„åˆ†å±‚å†³ç­–ä¼˜åŒ–æ–¹æ³•</title>
    <link href="/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%88%86%E5%B1%82%E5%86%B3%E7%AD%96%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95/"/>
    <url>/2024/11/15/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%88%86%E5%B1%82%E5%86%B3%E7%AD%96%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸»è¦å†…å®¹">1. ä¸»è¦å†…å®¹</h1><ol type="1"><li><strong>èƒŒæ™¯ä¸ç›®çš„</strong>ï¼š<ul><li>éšç€ä¿¡æ¯æŠ€æœ¯å’Œäººå·¥æ™ºèƒ½çš„å‘å±•ï¼Œå¤§æ•°æ®é©±åŠ¨çš„è¾…åŠ©å†³ç­–æ–¹æ³•å˜å¾—æ›´åŠ ç§‘å­¦å’Œå‡†ç¡®ã€‚</li><li>å¼ºåŒ–å­¦ä¹ åœ¨å†³ç­–ä¼˜åŒ–æ–¹é¢å…·æœ‰ä¼˜åŠ¿ï¼Œä½†ä¼ ç»Ÿæ–¹æ³•éš¾ä»¥è§£å†³å¤šå±‚æ¬¡ã€å¤šç›®æ ‡çš„å†³ç­–ä¼˜åŒ–é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨é•¿å‘¨æœŸå†³ç­–ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œå­¦ä¹ å¥–åŠ±çš„æ»åæ€§é™åˆ¶äº†æ•ˆç‡ã€‚</li></ul></li><li><strong>æ–¹æ³•è®º</strong>ï¼š<ul><li>æå‡ºåŸºäºå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„åˆ†å±‚å†³ç­–ä¼˜åŒ–æ–¹æ³•ï¼Œåº”ç”¨ç›®æ ‡åˆ†è§£æ€æƒ³è§£å†³é•¿æœŸå†³ç­–ä¼˜åŒ–é—®é¢˜ã€‚</li><li>è¯¥æ–¹æ³•åŸºäºå¼ºåŒ–å­¦ä¹ ç†è®ºï¼Œä½¿å…·æœ‰å±‚çº§å…³ç³»çš„å¤šæ™ºèƒ½ä½“ç›¸äº’åˆä½œï¼Œä¸Šå±‚æ™ºèƒ½ä½“å­¦ä¹ ç›®æ ‡çš„åˆ†è§£ç­–ç•¥ï¼Œä¸‹å±‚æ™ºèƒ½ä½“å­¦ä¹ å®Œæˆç›®æ ‡çš„è¡ŒåŠ¨ç­–ç•¥ã€‚</li></ul></li></ol><h1 id="ç ”ç©¶æ–¹æ³•">2. ç ”ç©¶æ–¹æ³•</h1><p>æ–‡ç« ä¸­æåˆ°çš„åˆ†å±‚å†³ç­–ä¼˜åŒ–æ–¹æ³•ï¼ˆHDQï¼‰ç®—æ³•çš„å…·ä½“å®ç°æ¶‰åŠä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p><ol type="1"><li><strong>å®šä¹‰æ™ºèƒ½ä½“å’Œç¯å¢ƒäº¤äº’</strong>ï¼š<ul><li>å¼ºåŒ–å­¦ä¹ åŸºäºé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ï¼ŒåŒ…å«çŠ¶æ€é›†åˆ ( S )ï¼ŒåŠ¨ä½œé›†åˆ (A )ï¼ŒçŠ¶æ€è½¬ç§»çŸ©é˜µ ( P )ï¼Œå¥–åŠ±é›†åˆ ( R )ï¼Œä»¥åŠæŠ˜æ‰£ç‡ ( )ã€‚</li></ul></li><li><strong>ç›®æ ‡åˆ†è§£ä¸å±‚çº§å†³ç­–</strong>ï¼š<ul><li>å°†é•¿æœŸç›®æ ‡ ( G ) åˆ†è§£ä¸ºå­ç›®æ ‡ ( g_t )ï¼Œå¹¶é€šè¿‡è®¡ç®—çŠ¶æ€ ( s_t )ä¸å­ç›®æ ‡ ( g_t ) ä¹‹é—´çš„è·ç¦» ( dis(gt, st) ) æ¥åˆ¤æ–­å­ç›®æ ‡æ˜¯å¦å®Œæˆã€‚</li></ul></li><li><strong>æ™ºèƒ½ä½“çš„å±‚çº§ç»“æ„</strong>ï¼š<ul><li>è®¾è®¡å…·æœ‰å±‚çº§å…³ç³»çš„ä¸Šå±‚æ™ºèƒ½ä½“ ( _1 ) å’Œä¸‹å±‚æ™ºèƒ½ä½“ ( _2 )ã€‚</li><li>ä¸Šå±‚æ™ºèƒ½ä½“å­¦ä¹ ç›®æ ‡çš„åˆ†è§£ç­–ç•¥ï¼Œä¸‹å±‚æ™ºèƒ½ä½“å­¦ä¹ å®ç°å­ç›®æ ‡çš„è¡ŒåŠ¨ç­–ç•¥ã€‚</li></ul></li><li><strong>ç¥ç»ç½‘ç»œå»ºæ¨¡</strong>ï¼š<ul><li>ä½¿ç”¨æ·±åº¦Qç½‘ç»œï¼ˆDQNï¼‰ä½œä¸ºå€¼å‡½æ•°é€¼è¿‘å™¨ï¼Œå¼•å…¥ç¥ç»ç½‘ç»œæ¥ä¼°è®¡åŠ¨ä½œä»·å€¼ (Q(s, a; ) )ã€‚</li><li>é‡‡ç”¨Dueling DQNæ¥ç¼“è§£é«˜ä¼°Qå€¼çš„é—®é¢˜ï¼Œå¼•å…¥ä¼˜åŠ¿å‡½æ•° ( A(s, a) )ã€‚</li></ul></li><li><strong>æ™ºèƒ½ä½“çš„å‚æ•°æ›´æ–°</strong>ï¼š<ul><li>æ™ºèƒ½ä½“å‚æ•°äº¤æ›¿æ›´æ–°ï¼Œå…±åŒå­¦ä¹ å®Œæˆå›¢é˜Ÿä»»åŠ¡çš„æœ€ä½³ç­–ç•¥ã€‚</li><li>ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ›´æ–°ç¥ç»ç½‘ç»œå‚æ•° ( )ï¼Œå­¦ä¹ ç‡ ( )ã€‚</li></ul></li><li><strong>å®éªŒè®¾è®¡ä¸æ•°æ®é¢„å¤„ç†</strong>ï¼š<ul><li>ä»MIMIC-IVæ•°æ®åº“ä¸­æå–è„“æ¯’ç—‡æ‚£è€…æ•°æ®ï¼ŒåŒ…æ‹¬æ€§åˆ«ã€å¹´é¾„ã€ä½“é‡ã€SOFAè¯„åˆ†ç­‰45ä¸ªç‰¹å¾ã€‚</li><li>ä½¿ç”¨å‡å€¼æ’å€¼æ–¹æ³•å¤„ç†ç¼ºå¤±å€¼ï¼Œæœ€å¤§æœ€å°å½’ä¸€åŒ–æ–¹æ³•æ¶ˆé™¤ç‰¹å¾é‡çº²ã€‚</li></ul></li><li><strong>çŠ¶æ€å’ŒåŠ¨ä½œç©ºé—´çš„å®šä¹‰</strong>ï¼š<ul><li>çŠ¶æ€ç©ºé—´é€šè¿‡K-meansç®—æ³•èšç±»é™ç»´ï¼Œå®šä¹‰700ä¸ªä¸åŒçš„çŠ¶æ€ç±»åˆ«ã€‚</li><li>å­ç›®æ ‡åŸºäºSOFAè¯„åˆ†ï¼ŒåŠ¨ä½œç©ºé—´å®šä¹‰ä¸ºä¸¤ç§è¯ç‰©ç»„æˆçš„äºŒç»´çŸ©é˜µã€‚</li></ul></li><li><strong>å¥–åŠ±å‡½æ•°çš„è®¾è®¡</strong>ï¼š<ul><li>è®¾è®¡åˆ†æ®µå¸¸æ•°å‡½æ•°ä½œä¸ºå¥–åŠ±å‡½æ•°ï¼Œæ ¹æ®æ‚£è€…çš„ç”Ÿå­˜çŠ¶æ€å’ŒçŠ¶æ€æ”¹å–„æƒ…å†µç»™äºˆä¸åŒçš„å¥–åŠ±ã€‚</li></ul></li></ol><p>[1]å¼ å€©,æå¤©çš“,ç™½æ˜¥å…‰.åŸºäºå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ çš„åˆ†å±‚å†³ç­–ä¼˜åŒ–æ–¹æ³•[J].ç”µå­ç§‘æŠ€å¤§å­¦å­¦æŠ¥(ç¤¾ç§‘ç‰ˆ),2022,24(06):90-96.DOI:10.14071/j.1008-8105(2022)-1056.</p>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä»»åŠ¡åˆ†é…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºå±‚æ¬¡æ§åˆ¶çš„å¤šæ™ºèƒ½ä½“å¯¹æŠ—ç ”ç©¶</title>
    <link href="/2024/11/14/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E5%B1%82%E6%AC%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/"/>
    <url>/2024/11/14/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E5%B1%82%E6%AC%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%AF%B9%E6%8A%97%E7%A0%94%E7%A9%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸»è¦å†…å®¹">1. ä¸»è¦å†…å®¹</h1><ul><li>é’ˆå¯¹å¤æ‚åŠ¨ä½œçŠ¶æ€ç©ºé—´åœºæ™¯ä¸‹å•æ™ºèƒ½ä½“ç­–ç•¥å­¦ä¹ é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§åŸºäºé¢„è®­ç»ƒæ¨¡å‹çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•ã€‚è¯¥ç®—æ³•åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š<ul><li>é¦–å…ˆï¼ŒåŸºäºå…ˆéªŒçŸ¥è¯†ä¸ºæ¯ä¸ªå­ç­–ç•¥è®¾è®¡äº†é€‚å®œå…¶ç›¸åº”æ—¶é—´çš„å®åŠ¨ä½œï¼›</li><li>å…¶æ¬¡æ˜¯å­ç­–ç•¥æ§åˆ¶å™¨ï¼Œå…¶æ ¸å¿ƒæ˜¯åŸºäºç›‘ç£å­¦ä¹ çš„æ–¹æ³•ï¼Œè®­ç»ƒèƒ½å¤Ÿé€‚åº”ä¸åŒéœ€è¦çš„å­ç­–ç•¥ï¼ŒåŸºäºéšæœºçš„å®åŠ¨ä½œäº§ç”Ÿå­ç­–ç•¥ç›‘ç£å­¦ä¹ çš„æ•°æ®ï¼Œå¹¶ä¸”å­ç­–ç•¥åªå­¦ä¹ èƒœåˆ©æ—¶çš„æ“ä½œè½¨è¿¹ï¼›</li><li>æœ€åæ˜¯æ™ºèƒ½ä½“çš„é«˜çº§ç­–ç•¥æ§åˆ¶å™¨ï¼ŒåŸºäºç­–ç•¥æ¢¯åº¦ç®—æ³•è¿›è¡Œæ‰©å±•ï¼Œå±è”½äº†åº•å±‚ç¹ççš„åŠ¨ä½œï¼Œåªå¯¹äºä¸‹å±‚çš„å­ç­–ç•¥è¿›è¡Œé€‰æ‹©ï¼Œä½¿å¾—ä½œä¸ºå†³ç­–çš„ç¥ç»ç½‘ç»œå‚æ•°èƒ½å¤Ÿåšå‡ºæ›´å¥½çš„åŠ¨ä½œã€‚</li></ul></li><li>é’ˆå¯¹å¤æ‚åŠ¨ä½œçŠ¶æ€ç©ºé—´åœºæ™¯ä¸‹å¤šæ™ºèƒ½ä½“ç­–ç•¥å­¦ä¹ é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§åŸºäºåŒå‘åè°ƒç½‘ç»œçš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•ã€‚è¯¥ç®—æ³•åŸºäºActor-Criticæ¡†æ¶ï¼Œå…¶ç‰¹ç‚¹æ˜¯ï¼š<ul><li>åŸºäºå…¨å±€ä¿¡æ¯è®­ç»ƒCriticç½‘ç»œï¼Œç”¨ä»¥è§£å†³åœºæ™¯ä¸­é©¬å°”å¯å¤«æ€§ç¼ºå¤±é—®é¢˜ï¼›</li><li>é‡‡ç”¨åŒå‘RNNç½‘ç»œç»“æ„ï¼Œç”¨ä»¥è§£å†³åœºæ™¯ä¸­å¤šæ™ºèƒ½ä½“ä¿¡æ¯é€šä¿¡é—®é¢˜ï¼›</li><li>ä½¿ç”¨åŠ¨ä½œæ˜ å°„ç®—æ³•ï¼Œä½¿å¾—æ™ºèƒ½ä½“é€‰æ‹©æ”¶ç›Šæœ€é«˜çš„åˆæ³•è”åˆåŠ¨ä½œã€‚</li></ul></li><li>åŸºäºä¸Šè¿°ç ”ç©¶æˆæœå’Œã€Šæ˜Ÿé™…äº‰éœ¸2ã€‹å¯¹æŠ—å­¦ä¹ ç¯å¢ƒï¼Œå°†å•æ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•å’Œå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•è¿›è¡Œæœ‰æœºèåˆï¼Œè®¾è®¡å®ç°äº†ä¸€ä¸ªåŸºäºå±‚æ¬¡æ§åˆ¶çš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ åŸå‹ç³»ç»Ÿï¼Œå¹¶è¿›è¡Œå®éªŒéªŒè¯ã€‚</li></ul><h1 id="ç ”ç©¶æ–¹æ³•">2. ç ”ç©¶æ–¹æ³•</h1><p>è¿™ç¯‡è®ºæ–‡çš„ä¸»è¦ç ”ç©¶æ–¹æ³•å’Œç®—æ³•é›†ä¸­åœ¨è§£å†³å¤æ‚åŠ¨ä½œçŠ¶æ€ç©ºé—´ä¸‹çš„å¤šæ™ºèƒ½ä½“å¯¹æŠ—é—®é¢˜ï¼Œå…·ä½“åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol type="1"><li><strong>åŸºäºé¢„è®­ç»ƒæ¨¡å‹çš„åˆ†å±‚å¼ºåŒ–å­¦ä¹ ç®—æ³•</strong>ï¼š<ul><li><strong>å®åŠ¨ä½œè®¾è®¡</strong>ï¼šå°†å¤æ‚çš„åŠ¨ä½œåºåˆ—æ‰“åŒ…æˆå®åŠ¨ä½œï¼Œå‡å°‘æ™ºèƒ½ä½“éœ€è¦å­¦ä¹ çš„åŸå­åŠ¨ä½œæ•°é‡ã€‚</li><li><strong>å­ç­–ç•¥æ§åˆ¶å™¨</strong>ï¼šåŸºäºç›‘ç£å­¦ä¹ çš„æ–¹æ³•è®­ç»ƒå­ç­–ç•¥ï¼Œæ¯ä¸ªå­ç­–ç•¥å¯¹åº”ä¸€ä¸ªå®åŠ¨ä½œã€‚</li><li><strong>é«˜çº§ç­–ç•¥æ§åˆ¶å™¨ï¼ˆAPCï¼‰</strong>ï¼šåŸºäºç­–ç•¥æ¢¯åº¦ç®—æ³•æ‰©å±•ï¼Œè´Ÿè´£åœ¨å­ç­–ç•¥ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚</li></ul></li><li><strong>åŸºäºåŒå‘åè°ƒç½‘ç»œçš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆBiC-DDPGï¼‰</strong>ï¼š<ul><li><strong>é›†ä¸­è®­ç»ƒåˆ†æ•£æ‰§è¡Œ</strong>ï¼šè§£å†³å¤šæ™ºèƒ½ä½“å¯¹æŠ—åœºæ™¯ä¸‹é©¬å°”å¯å¤«æ€§ç¼ºå¤±é—®é¢˜ï¼Œæé«˜ç®—æ³•æ”¶æ•›æ€§ã€‚</li><li><strong>Bi-RNNç½‘ç»œç»“æ„</strong>ï¼šå®ç°æ™ºèƒ½ä½“åˆä½œæ—¶çš„ä¿¡æ¯é€šä¿¡ã€‚</li><li><strong>åŠ¨ä½œæ˜ å°„ç®—æ³•</strong>ï¼šå°†è¿ç»­çš„åŸå§‹è”åˆåŠ¨ä½œæ˜ å°„åˆ°åˆæ³•ç¦»æ•£è”åˆåŠ¨ä½œç©ºé—´ï¼Œè§£å†³å¤æ‚è”åˆåŠ¨ä½œç©ºé—´ä¸‹çš„æ™ºèƒ½ä½“å†³ç­–é—®é¢˜ã€‚</li></ul></li><li><strong>æ·±åº¦å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ç®—æ³•</strong>ï¼š<ul><li><strong>æ·±åº¦ç¥ç»ç½‘ç»œ</strong>ï¼šä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œç»“æ„ï¼ˆå¦‚ResNet50ï¼‰ä½œä¸ºå­ç­–ç•¥çš„ç¥ç»ç½‘ç»œç»“æ„ã€‚</li><li><strong>å¼ºåŒ–å­¦ä¹ ç®—æ³•</strong>ï¼šåŒ…æ‹¬Qå­¦ä¹ ã€DQNã€ç­–ç•¥æ¢¯åº¦ã€Actor-Criticç®—æ³•ç­‰ã€‚</li></ul></li><li><strong>å®éªŒéªŒè¯</strong>ï¼š<ul><li>åœ¨ã€Šæ˜Ÿé™…äº‰éœ¸2ã€‹ç¯å¢ƒä¸­è¿›è¡Œå®éªŒéªŒè¯ï¼ŒåŒ…æ‹¬å…¨æµç¨‹å¯¹æŠ—å’Œå¾®æ“ä½œå¯¹æŠ—ç¯å¢ƒã€‚</li><li>è®¾è®¡äº†ä¸åŒéš¾åº¦çš„å¯¹æŠ—åœºæ™¯ï¼Œä»¥åŠä¸åŒçš„å­ç­–ç•¥è®­ç»ƒå’Œæµ‹è¯•ã€‚</li></ul></li><li><strong>åŸå‹ç³»ç»Ÿå®ç°</strong>ï¼š<ul><li>å°†å•æ™ºèƒ½ä½“å’Œå¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•èåˆï¼Œè®¾è®¡å®ç°äº†ä¸€ä¸ªåŸºäºå±‚æ¬¡æ§åˆ¶çš„å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ åŸå‹ç³»ç»Ÿã€‚</li><li>åœ¨Python-sc2æ¥å£ä¸Šå¤ç°SMACæ¥å£å¯¹äºè§‚å¯Ÿæ•°æ®ã€å¥–åŠ±æœºåˆ¶ä»¥åŠåŠ¨ä½œç©ºé—´çš„è®¾è®¡ï¼Œå¹¶éƒ¨ç½²BiC-DDPGç®—æ³•ã€‚</li></ul></li><li><strong>ç®—æ³•ä¼˜åŒ–å’Œè°ƒæ•´</strong>ï¼š<ul><li>å¯¹ç®—æ³•çš„å‚æ•°è¿›è¡Œè°ƒæ•´ï¼Œä»¥é€‚åº”ä¸åŒçš„å®éªŒç¯å¢ƒå’Œåœºæ™¯ã€‚</li><li>é€šè¿‡å®éªŒç»“æœåˆ†æç®—æ³•çš„æ€§èƒ½å’Œæœ‰æ•ˆæ€§ã€‚</li></ul></li></ol><p>[1]ç‹åŠŸä¸¾.åŸºäºå±‚æ¬¡æ§åˆ¶çš„å¤šæ™ºèƒ½ä½“å¯¹æŠ—ç ”ç©¶[D].å†›äº‹ç§‘å­¦é™¢,2021.DOI:10.27193/d.cnki.gjsky.2021.000110.</p>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä»»åŠ¡åˆ†é…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.3 æ— ç›‘ç£å­¦ä¹ -å¼ºåŒ–å­¦ä¹ -å´æ©è¾¾</title>
    <link href="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼ºåŒ–å­¦ä¹ ">å¼ºåŒ–å­¦ä¹ </h2><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013185527334.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013185513926.png"></p><ul><li>çŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±å’Œä¸‹ä¸€ä¸ªçŠ¶æ€(s, a, R(s), s')</li></ul><h3 id="å›æŠ¥">1. å›æŠ¥</h3><ul><li>æŠ˜æ‰£å› å­</li></ul><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013191147456.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013191515723.png"></p><h3 id="å†³ç­–">2. å†³ç­–</h3><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013191936751.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013192130503.png"></p><ul><li><p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ MDP</p></li><li><p>åœ¨é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ä¸­ï¼Œæœªæ¥åªå–å†³äºä½ ç°åœ¨æ‰€å¤„çš„ä½ç½®ï¼Œè€Œä¸å–å†³äºä½ æ˜¯å¦‚ä½•åˆ°è¾¾è¿™é‡Œçš„ã€‚</p></li></ul><h3 id="çŠ¶æ€-åŠ¨ä½œä»·å€¼å‡½æ•°">3. çŠ¶æ€-åŠ¨ä½œä»·å€¼å‡½æ•°</h3><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013214059896.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013214515098.png"></p><h4 id="è´å°”æ›¼æ–¹ç¨‹">3.1 è´å°”æ›¼æ–¹ç¨‹</h4><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013220256063.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013221245911.png"></p><ul><li>å¦‚æœä½ ä»çŠ¶æ€så¼€å§‹ï¼Œä½ å°†é‡‡å–è¡ŒåŠ¨aï¼Œç„¶ååœ¨æ­¤ä¹‹åé‡‡å–æœ€ä½³è¡ŒåŠ¨ï¼Œé‚£ä¹ˆä½ å°†éšç€æ—¶é—´çš„æ¨ç§»çœ‹åˆ°ä¸€äº›å¥–åŠ±åºåˆ—ã€‚</li></ul><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013221652384.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013221916868.png"></p><h3 id="éšæœºå¼ºåŒ–å­¦ä¹ ">4. éšæœºå¼ºåŒ–å­¦ä¹ </h3><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013222607911.png"></p><h3 id="è¿ç»­çŠ¶æ€">5. è¿ç»­çŠ¶æ€</h3><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013222846102.png"></p><ul><li>è¿ç»­é©¬å°”å¯å¤« MTP</li></ul><h3 id="å­¦ä¹ çŠ¶æ€å€¼å‡½æ•°">6. å­¦ä¹ çŠ¶æ€å€¼å‡½æ•°</h3><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013223922575.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013224639866.png"></p><ul><li>ä¸çŸ¥é“Qï¼ŒéšæœºçŒœæµ‹</li></ul><h3 id="dqn">7. DQN</h3><ul><li>æ„æ€æ˜¯ç¥ç»ç½‘ç»œé‡Œçš„å‚æ•°éšæœºåˆå§‹åŒ–ï¼Œç„¶å(s',a')è¾“å…¥ï¼Œå¾—åˆ°maxQçš„é¢„æµ‹</li></ul><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013225256166.png"></p><ul><li>äº¤ç»™ç¥ç»ç½‘ç»œè®­ç»ƒçš„å‚æ•°yä¸­ä¸€éƒ¨åˆ†æ˜¯éšæœºåˆå§‹åŒ–ç¥ç»ç½‘ç»œç”Ÿæˆçš„ï¼Œä½†è¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯åŒ…å«äº†å½“å‰çŠ¶æ€çš„ä¿¡æ¯çš„ï¼Œæ‰€ä»¥å½“è®­ç»ƒæ¬¡æ•°å¢å¤šåï¼Œå¤–éƒ¨çš„è¾“å…¥ä¿¡æ¯ä¼šé€æ­¥å†²åˆ·æ‰åˆå§‹åŒ–çš„éšæœºä¿¡æ¯ï¼Œç»™å‡ºçœŸæ­£çš„Qå‡½æ•°ä¼°è®¡ã€‚</li></ul><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013225733542.png"></p><h4 id="è´ªå©ªç®—æ³•">7.1 è´ªå©ªç®—æ³•</h4><ul><li>ä½¿ç”¨é«˜Îµå¼€å§‹ï¼Œé€æ­¥é™ä½ç›´åˆ°0.01</li></ul><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013230506858.png"></p><h4 id="å°æ‰¹é‡å’Œè½¯æ›´æ–°">7.2 å°æ‰¹é‡å’Œè½¯æ›´æ–°</h4><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013230853479.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013231149426.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013231255361.png"></p><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013231653864.png"></p><h3 id="å±€é™æ€§">8. å±€é™æ€§</h3><p><img src="/2024/11/14/ML/class3-week3-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013232030585.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.2 æ— ç›‘ç£å­¦ä¹ -æ¨èç³»ç»Ÿ-å´æ©è¾¾</title>
    <link href="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="æ¨èç³»ç»Ÿ">æ¨èç³»ç»Ÿ</h2><h3 id="ä½¿ç”¨æ¯ä¸ªç‰¹å¾æ•°æ®">1. ä½¿ç”¨æ¯ä¸ªç‰¹å¾æ•°æ®</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013091417801.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013092525171.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013092709205.png"></p><h3 id="ååŒè¿‡æ»¤ç®—æ³•">2. ååŒè¿‡æ»¤ç®—æ³•</h3><ul><li>å‡è®¾å·²ç»æœ‰äº†wå’Œbï¼ŒçŒœæµ‹ç‰¹å¾x</li></ul><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013093541589.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013094256436.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013094536963.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013095022269.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013095116749.png"></p><ul><li><p>è¿™ç§ååŒè¿‡æ»¤æ˜¯ä»å¤šä¸ªç”¨æˆ·æ”¶é›†æ•°æ®ï¼Œç”¨æˆ·ä¹‹é—´çš„è¿™ç§åä½œå¯å¸®åŠ©æ‚¨é¢„æµ‹æœªæ¥ç”šè‡³å…¶ä»–ç”¨æˆ·çš„è¯„çº§ã€‚</p></li><li><p>æ¨èç³»ç»Ÿçš„ä¸€ä¸ªéå¸¸å¸¸è§çš„ç”¨ä¾‹æ˜¯å½“æ‚¨æœ‰äºŒè¿›åˆ¶æ ‡ç­¾æ—¶ï¼Œä¾‹å¦‚ç”¨æˆ·å–œæ¬¢ã€å–œæ¬¢æˆ–ä¸é¡¹ç›®äº¤äº’çš„æ ‡ç­¾ã€‚</p></li></ul><h3 id="äºŒè¿›åˆ¶æ ‡ç­¾">3.äºŒè¿›åˆ¶æ ‡ç­¾</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013095506383.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013095650568.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013095901608.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013100113430.png"></p><ul><li>åˆ†ç±»ä¸ç”¨æ­£åˆ™åŒ–</li></ul><h3 id="å‡å€¼å½’ä¸€åŒ–">4. å‡å€¼å½’ä¸€åŒ–</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013143727458.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013144130791.png"></p><ul><li>å¯¹æœªçŸ¥ç”¨æˆ·ï¼Œé¢„æµ‹è¯„åˆ†ä¸ºå‡å€¼</li></ul><h3 id="ååŒè¿‡æ»¤tensorflowå®ç°">5. ååŒè¿‡æ»¤Tensorflowå®ç°</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013144725579.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013144803015.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013145539351.png"></p><h3 id="å¯»æ‰¾ç›¸å…³ç‰¹å¾">6. å¯»æ‰¾ç›¸å…³ç‰¹å¾</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013145951931.png"></p><ul><li>ååŒè¿‡æ»¤çš„å±€é™æ€§</li></ul><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013150021292.png"></p><ul><li><p>å†·å¯åŠ¨é—®é¢˜</p></li><li><p>è¾¹ç¼˜ä¿¡æ¯</p></li></ul><h3 id="åŸºäºå†…å®¹çš„è¿‡æ»¤ç®—æ³•">7. åŸºäºå†…å®¹çš„è¿‡æ»¤ç®—æ³•</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013150639264.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013150936617.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013151110932.png"></p><ul><li>å¦‚ä½•è®¡ç®—V</li></ul><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013151407807.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013151905392.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013152534237.png"></p><h3 id="ä»å¤§å‹ç›®å½•ä¸­æ¨è">8. ä»å¤§å‹ç›®å½•ä¸­æ¨è</h3><ul><li>ä¸¤ä¸ªæ­¥éª¤ï¼šæ£€ç´¢å’Œæ’å</li></ul><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013152823434.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013153036731.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013153343967.png"></p><h3 id="åŸºäºå†…å®¹çš„tensorflowå®ç°">9. åŸºäºå†…å®¹çš„Tensorflowå®ç°</h3><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013154612258.png"></p><h3 id="é™ä½ç‰¹å¾æ•°é‡">10. é™ä½ç‰¹å¾æ•°é‡</h3><ul><li>PCAä¸»æˆåˆ†åˆ†ææ³•ï¼Œç‰¹å¾é™ä¸ºäºŒç»´æˆ–è€…ä¸‰ç»´ï¼Œä¾¿äºå¯è§†åŒ–</li></ul><h4 id="pcaç®—æ³•">10.1 PCAç®—æ³•</h4><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013170727751.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013171217861.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013171447596.png"></p><ul><li><p>å½“ä½¿ç”¨çº¿æ€§å›å½’æ¥é¢„æµ‹ç›®æ ‡è¾“å‡ºYå¹¶ä¸”PCAè¯•å›¾è·å–å¤§é‡ç‰¹å¾å¹¶å¹³ç­‰å¯¹å¾…å®ƒä»¬å¹¶å‡å°‘å¾ˆå¥½åœ°è¡¨ç¤ºæ•°æ®æ‰€éœ€çš„è½´æ•°</p></li><li><p>å› æ­¤ï¼Œå¦‚æœæ‚¨å°è¯•é¢„æµ‹yçš„å€¼ï¼Œåˆ™åº”ä½¿ç”¨çº¿æ€§å›å½’;å¦‚æœæ‚¨å°è¯•å‡å°‘æ•°æ®é›†ä¸­çš„ç‰¹å¾æ•°é‡ï¼Œä¾‹å¦‚å°†å…¶å¯è§†åŒ–ï¼Œåˆ™åº”ä½¿ç”¨PCAã€‚</p></li></ul><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013172253829.png"></p><ul><li>æ¯ä¸ªç‰¹å¾çš„æ–¹å·®è´¡çŒ®ç‡</li></ul><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013172530272.png"></p><p><img src="/2024/11/14/ML/class3-week2-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013172923497.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>3.1 æ— ç›‘ç£å­¦ä¹ -æ— ç›‘ç£å­¦ä¹ -å´æ©è¾¾</title>
    <link href="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="æ— ç›‘ç£å­¦ä¹ ">æ— ç›‘ç£å­¦ä¹ </h2><h3 id="èšç±»">1. èšç±»</h3><h4 id="k-means">1.1 k-means</h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012125528206.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012125536447.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012130426099.png"></p><ul><li>å¦‚æœä¸€ä¸ªé›†ç¾¤è®­ç»ƒæ ·æœ¬ä¸ºé›¶ï¼Œå¯ä»¥æ¶ˆé™¤è¯¥é›†ç¾¤ï¼Œæœ€ç»ˆå¾—åˆ°k-1ï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯é‡æ–°åˆå§‹åŒ–è¯¥é›†ç¾¤è´¨å¿ƒ</li></ul><h4 id="ä¼˜åŒ–ç›®æ ‡">1.2 ä¼˜åŒ–ç›®æ ‡</h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012145049473.png"></p><h4 id="åˆå§‹åŒ–">1.3 åˆå§‹åŒ–</h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012150757199.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012151542672.png"></p><h4 id="é€‰æ‹©èšç±»æ•°é‡">1.4 é€‰æ‹©èšç±»æ•°é‡</h4><ul><li>è‚˜æ³•</li></ul><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012151925053.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012152146445.png"></p><h3 id="å¼‚å¸¸æ£€æµ‹">2. å¼‚å¸¸æ£€æµ‹</h3><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012152706177.png"></p><h4 id="å¯†åº¦ä¼°è®¡">2.1 å¯†åº¦ä¼°è®¡</h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012152845235.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012153346742.png"></p><h4 id="é«˜æ–¯æ­£æ€åˆ†å¸ƒ">2.2 é«˜æ–¯æ­£æ€åˆ†å¸ƒ</h4><ul><li>æœ€å¤§ä¼¼ç„¶ä¼°è®¡</li></ul><h4 id="å¼‚å¸¸æ£€æµ‹ç®—æ³•">2.3 å¼‚å¸¸æ£€æµ‹ç®—æ³•</h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012154133115.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012154923207.png"></p><h4 id="å¼€å‘ä¸è¯„ä¼°å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿ.">2.4 å¼€å‘ä¸è¯„ä¼°å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿ.</h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012215712447.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012220215931.png"></p><ul><li><p>è¿™ç§æ›¿ä»£æ–¹æ¡ˆçš„ç¼ºç‚¹æ˜¯ï¼Œåœ¨è°ƒæ•´ç®—æ³•åï¼Œæ‚¨æ²¡æœ‰å…¬å¹³çš„æ–¹æ³•æ¥åˆ¤æ–­å®ƒåœ¨æœªæ¥ç¤ºä¾‹ä¸­çš„å®é™…æ•ˆæœå¦‚ä½•ï¼Œå› ä¸ºæ‚¨æ²¡æœ‰æµ‹è¯•é›†ã€‚</p></li><li><p>å½“ä½ çš„æ•°æ®é›†å¾ˆå°çš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯å½“ä½ æœ‰å¼‚å¸¸çš„æ•°é‡æ—¶ï¼Œä½ çš„æ•°æ®é›†å¾ˆå°ï¼Œè¿™å¯èƒ½æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©ã€‚</p></li></ul><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013082659472.png"></p><h4 id="å¼‚å¸¸æ£€æµ‹vsç›‘ç£å­¦ä¹ ">2.5 å¼‚å¸¸æ£€æµ‹vsç›‘ç£å­¦ä¹ </h4><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013084827450.png"></p><ul><li>ä¾‹å­</li></ul><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013084924028.png"></p><h4 id="é€‰æ‹©ç”¨ä»€ä¹ˆç‰¹å¾">2.6 é€‰æ‹©ç”¨ä»€ä¹ˆç‰¹å¾</h4><ul><li>ç‰¹å¾æ”¹å˜ä¸ºé«˜æ–¯åˆ†å¸ƒ</li></ul><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013085546244.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013090207839.png"></p><p><img src="/2024/11/14/ML/class3-week1-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E6%97%A0%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231013090413780.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.4 æ·±åº¦å­¦ä¹ -å†³ç­–æ ‘-å´æ©è¾¾</title>
    <link href="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="å†³ç­–æ ‘">å†³ç­–æ ‘</h2><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012075401986.png"></p><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012075410387.png"></p><ul><li><p>æ ¹èŠ‚ç‚¹ å†³ç­–èŠ‚ç‚¹ å¶èŠ‚ç‚¹</p></li><li><p>å†³ç­–æ ‘å­¦ä¹ ç®—æ³•çš„å·¥ä½œæ˜¯ï¼Œä»æ‰€æœ‰å¯èƒ½çš„å†³ç­–æ ‘ä¸­ï¼Œå°è¯•é€‰æ‹©ä¸€ä¸ªå¸Œæœ›åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°è‰¯å¥½çš„æ ‘ï¼Œç„¶åç†æƒ³åœ°æ³›åŒ–åˆ°æ–°æ•°æ®ï¼Œä¾‹å¦‚äº¤å‰éªŒè¯å’Œæµ‹è¯•é›†</p></li></ul><h3 id="å­¦ä¹ è¿‡ç¨‹">1. å­¦ä¹ è¿‡ç¨‹</h3><ul><li>å†³ç­–æ ‘å­¦ä¹ çš„ç¬¬ä¸€æ­¥æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»å†³å®šåœ¨æ ¹èŠ‚ç‚¹ä½¿ç”¨ä»€ä¹ˆç‰¹å¾ã€‚</li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012081611286.png"></p><ul><li><p>å†³ç­– 2ï¼šä½•æ—¶åœæ­¢åˆ†è£‚ï¼Ÿ</p><ul><li>å½“ä¸€ä¸ªèŠ‚ç‚¹å®Œå…¨æ˜¯ä¸€ç±»æ—¶</li><li>å½“åˆ†è£‚ä¸€ä¸ªèŠ‚ç‚¹ä¼šå¯¼è‡´æ ‘è¶…è¿‡æœ€å¤§æ·±åº¦æ—¶</li><li>å½“çº¯åº¦åˆ†æ•°çš„æé«˜ä½äºä¸€ä¸ªé˜ˆå€¼æ—¶</li><li>å½“èŠ‚ç‚¹ä¸­çš„æ ·æœ¬æ•°é‡ä½äºä¸€ä¸ªé˜ˆå€¼æ—¶</li></ul></li><li><p>æ‚¨å¯èƒ½æƒ³è¦é™åˆ¶å†³ç­–æ ‘æ·±åº¦çš„ä¸€ä¸ªåŸå› æ˜¯ç¡®ä¿æˆ‘ä»¬çš„æ ‘ä¸ä¼šå˜å¾—å¤ªå¤§å’Œç¬¨é‡ï¼Œå…¶æ¬¡ï¼Œé€šè¿‡ä¿æŒæ ‘å°ï¼Œå®ƒä¸å¤ªå®¹æ˜“è¿‡åº¦æ‹Ÿåˆã€‚</p></li></ul><h3 id="çº¯åº¦">2. çº¯åº¦</h3><h4 id="ç†µ-entropy">2.1 ç†µ entropy</h4><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012082638836.png"></p><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012082823450.png"></p><ul><li><p>é€‰æ‹©æ‹†åˆ†ä¿¡æ¯å¢ç›Š</p></li><li><p>å‡å°‘ç†µ</p></li><li><p>ä¿¡æ¯å¢ç›Š åˆ†ä¹‹å‰çš„ç†µå‡å»åˆ†åç†µçš„åŠ æƒå¹³å‡</p></li><li><p>åœæ­¢æ ‡å‡†ï¼Œæ¯æ¬¡ä¿¡æ¯å¢ç›Šå¦‚æœå¤ªå°åœæ­¢åˆ†ç±»</p></li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012083632353.png"></p><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012083921344.png"></p><h4 id="æ•´åˆ">2.2 æ•´åˆ</h4><ul><li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼ŒåŒ…å«æ‰€æœ‰æ ·æœ¬</li><li>è®¡ç®—æ‰€æœ‰å¯èƒ½ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œå¹¶é€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€é«˜çš„ç‰¹å¾</li><li>æ ¹æ®é€‰å®šçš„ç‰¹å¾åˆ’åˆ†æ•°æ®é›†ï¼Œå¹¶åˆ›å»ºæ ‘çš„å·¦åˆ†æ”¯å’Œå³åˆ†æ”¯</li><li>æŒç»­é‡å¤åˆ†è£‚è¿‡ç¨‹ï¼Œç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶ï¼š<ul><li>å½“ä¸€ä¸ªèŠ‚ç‚¹å®Œå…¨æ˜¯ä¸€ç±»æ—¶</li><li>å½“åˆ†è£‚ä¸€ä¸ªèŠ‚ç‚¹ä¼šå¯¼è‡´æ ‘è¶…è¿‡æœ€å¤§æ·±åº¦æ—¶</li><li>é¢å¤–åˆ†è£‚çš„ä¿¡æ¯å¢ç›Šå°äºé˜ˆå€¼æ—¶</li><li>å½“èŠ‚ç‚¹ä¸­çš„æ ·æœ¬æ•°é‡ä½äºé˜ˆå€¼æ—¶</li></ul></li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012084601880.png"></p><ul><li>é€’å½’åˆ†ç±»</li></ul><h3 id="ç‹¬çƒ­ç¼–ç -one-hot">3. ç‹¬çƒ­ç¼–ç  one-hot</h3><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012085239987.png"></p><ul><li><p>é€šè¿‡one-hotç¼–ç ï¼Œæ‚¨å¯ä»¥è®©å†³ç­–æ ‘å¤„ç†å¯ä»¥é‡‡ç”¨ä¸¤ä¸ªä»¥ä¸Šç¦»æ•£å€¼çš„ç‰¹å¾ï¼Œæ‚¨è¿˜å¯ä»¥å°†å…¶åº”ç”¨äºæ–°ç½‘ç»œæˆ–çº¿æ€§å›å½’æˆ–é€»è¾‘å›å½’è®­ç»ƒã€‚</p></li><li><p>è¿ç»­å€¼</p></li><li><p>å°è¯•ä¸åŒçš„é˜ˆå€¼ï¼Œè®¡ç®—çº¯åº¦</p></li></ul><h3 id="å›å½’æ ‘">4. å›å½’æ ‘</h3><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012090404205.png"></p><ul><li>å°è¯•å‡å°‘æ–¹å·®</li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012091154958.png"></p><h3 id="ä½¿ç”¨å¤šä¸ªå†³ç­–æ ‘">5. ä½¿ç”¨å¤šä¸ªå†³ç­–æ ‘</h3><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012092643280.png"></p><h4 id="æœ‰æ”¾å›çš„é‡‡æ ·">5.1 æœ‰æ”¾å›çš„é‡‡æ ·</h4><ul><li><p>æ„å»ºæ–°çš„æ•°æ®é›†</p></li><li><p>éšæœºæ£®æ—ç®—æ³• Random Forest Algorithm</p></li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012093230276.png"></p><ul><li>éšæœºåŒ–ç‰¹å¾é€‰æ‹©<ul><li>åœ¨æ¯ä¸ªèŠ‚ç‚¹é€‰æ‹©ç”¨äºåˆ†è£‚çš„ç‰¹å¾æ—¶ï¼Œå¦‚æœæœ‰nä¸ªç‰¹å¾å¯ç”¨ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªåŒ…å«kä¸ªç‰¹å¾çš„å­é›†ï¼ˆk&lt; nï¼‰ï¼Œå¹¶å…è®¸ç®—æ³•ä»…ä»è¿™ä¸ªç‰¹å¾å­é›†ä¸­è¿›è¡Œé€‰æ‹©ã€‚</li></ul></li><li>kçš„é€‰æ‹©ï¼ˆæ ¹å·nï¼Œlog2(n)ï¼‰</li></ul><h4 id="xgboost-extreme-gradient-boosting">5.2 XGBoost (extreme GradientBoosting)</h4><ul><li>æå‡æ ‘çš„å¼€æºå®ç°</li><li>å¿«é€Ÿé«˜æ•ˆçš„å®ç°</li><li>é»˜è®¤åˆ†è£‚æ ‡å‡†å’Œåœæ­¢åˆ†è£‚æ ‡å‡†çš„å¥½é€‰æ‹©</li><li>å†…ç½®æ­£åˆ™åŒ–ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆ</li><li>æœºå™¨å­¦ä¹ ç«èµ›ä¸­æå…·ç«äº‰åŠ›çš„ç®—æ³•ï¼ˆä¾‹å¦‚ï¼šKaggleç«èµ›ï¼‰</li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012094738491.png"></p><h3 id="ä½•æ—¶ä½¿ç”¨å†³ç­–æ ‘">6. ä½•æ—¶ä½¿ç”¨å†³ç­–æ ‘</h3><ul><li>è¡¨æ ¼æ•°æ®</li></ul><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012095356821.png"></p><p><img src="/2024/11/14/ML/class2-week4-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%86%B3%E7%AD%96%E6%A0%91-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231012095814528.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.3 æ·±åº¦å­¦ä¹ -åœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆ-å´æ©è¾¾</title>
    <link href="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="åœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆ">åœ¨æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆ</h2><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011083027133.png"></p><h3 id="æ¨¡å‹è¯„ä¼°">1. æ¨¡å‹è¯„ä¼°</h3><p>è®­ç»ƒé›†åˆ†ä¸ºä¸¤ä¸ªå­é›†</p><ul><li><p>training set</p></li><li><p>test set</p></li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011083802084.png"></p><p>ä¸åŒ…å«æ­£åˆ™åŒ–é¡¹</p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011084012544.png"></p><figure><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011084442975.png" alt="image-20231011084442975"><figcaption aria-hidden="true">image-20231011084442975</figcaption></figure><p>å°±æ˜¯ç›¸æ¯”äºä¹‹å‰è®¡ç®—åœ¨æµ‹è¯•é›†å’Œè®­ç»ƒé›†ä¸Šè¯¯å·®çš„é‚£ä¸¤ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬æ›´å¸¸ç”¨æ¨¡å‹åˆ†ç±»é”™è¯¯çš„æ¬¡æ•°é™¤ä»¥æ€»çš„é¢„æµ‹æ¬¡æ•°æ¥è¡¨ç¤ºè¯¯å·®</p><p>å°±æ˜¯å¯¹äºé€»è¾‘å›å½’æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡è®¡ç®—è¯¯åˆ¤å æ¯”çš„æ–¹æ³•æ¥ä»£è¡¨æˆæœ¬å‡½æ•°ï¼Œæ¯”å¦‚testsetä¸­è¯¯åˆ¤çš„å æ¯”æ˜¯10ï¼…ï¼Œé‚£ä¹ˆJ testå°±æ˜¯0.1</p><h4 id="åˆ†ä¸ºä¸‰ä¸ªå­é›†è®­ç»ƒé›†äº¤å‰éªŒè¯é›†æµ‹è¯•é›†">1.1åˆ†ä¸ºä¸‰ä¸ªå­é›†ï¼Œè®­ç»ƒé›†ã€äº¤å‰éªŒè¯é›†ã€æµ‹è¯•é›†</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011091646019.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011091757791.png"></p><ul><li><p>é€‰æ‹©æœ€å°çš„äº¤å‰éªŒè¯é›†è¯¯å·®å¯¹åº”çš„æ¨¡å‹</p></li><li><p>ç”¨æµ‹è¯•é›†æ¥è¯„ä¼°æ³›åŒ–è¯¯å·®</p></li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011092256493.png"></p><h4 id="åå·®å’Œæ–¹å·®">1.2 åå·®å’Œæ–¹å·®</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011093159868.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011093401564.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011093433520.png"></p><ul><li>æ­£åˆ™åŒ–å¦‚ä½•å½±å“åå·®å’Œæ–¹å·®ï¼Œä»è€Œå½±å“ç®—æ³•çš„æ€§èƒ½</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011093859951.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011094124259.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011094256539.png"></p><h4 id="æŒ‡å®šä¸€ä¸ªç”¨äºæ€§èƒ½è¯„ä¼°çš„åŸºå‡†">1.3 æŒ‡å®šä¸€ä¸ªç”¨äºæ€§èƒ½è¯„ä¼°çš„åŸºå‡†</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011103735186.png"></p><p>ç«äº‰ç®—æ³•</p><h4 id="å­¦ä¹ æ›²çº¿">1.4 å­¦ä¹ æ›²çº¿</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011104512509.png"></p><ul><li>è®­ç»ƒé›†å˜å¤§ï¼Œè¯¯å·®å¢å¤§</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011104852894.png"></p><ul><li>è¿™ç»™å‡ºäº†è¿™ä¸ªç»“è®ºï¼Œä¹Ÿè®¸æœ‰ç‚¹ä»¤äººæƒŠè®¶ï¼Œå¦‚æœå­¦ä¹ ç®—æ³•å…·æœ‰é«˜åå·®ï¼Œè·å¾—æ›´å¤šçš„è®­ç»ƒæ•°æ®æœ¬èº«å°±æ²¡æœ‰é‚£ä¹ˆå¤§çš„å¸Œæœ›ã€‚</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011105426342.png"></p><ul><li>æ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯èƒ½ä»…ä»…é€šè¿‡å¢åŠ è®­ç»ƒé›†çš„å¤§å°æ¥é™ä½äº¤å‰éªŒè¯è¯¯å·®å¹¶è®©ä½ çš„ç®—æ³•è¡¨ç°å¾—è¶Šæ¥è¶Šå¥½ï¼Œè¿™ä¸é«˜åå·®æƒ…å†µä¸åŒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä½ å”¯ä¸€è¦åšçš„å°±æ˜¯è·å¾—æ›´å¤šçš„è®­ç»ƒæ•°æ®ï¼Œå®é™…ä¸Šå¹¶ä¸èƒ½å¸®åŠ©æ‚¨äº†è§£ç®—æ³•æ€§èƒ½ã€‚</li></ul><h4 id="å¦‚ä½•æ”¹è¿›">1.5 å¦‚ä½•æ”¹è¿›</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011110222504.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011110708303.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011111707005.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011112028987.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011112250065.png"></p><h3 id="æœºå™¨å­¦ä¹ å¼€å‘çš„è¿­ä»£">2. æœºå™¨å­¦ä¹ å¼€å‘çš„è¿­ä»£</h3><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011112605831.png"></p><ul><li>åƒåœ¾é‚®ä»¶åˆ†ç±»</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011112929003.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011113910756.png"></p><h4 id="è¯¯å·®åˆ†æ">2.1 è¯¯å·®åˆ†æ</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011114442995.png"></p><h4 id="æ•°æ®å¢å¼º">2.2 æ•°æ®å¢å¼º</h4><ul><li>æ—‹è½¬å›¾åƒæ‰­æ›²æ”¾å¤§ç¼©å°</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011115040740.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011115116926.png"></p><ul><li>éŸ³é¢‘å¢å¼º</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011115211067.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011115324412.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011131113956.png"></p><h4 id="è¿ç§»å­¦ä¹ -transfer-learning">2.3 è¿ç§»å­¦ä¹  Transfer learning</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011163140324.png"></p><ul><li><p>æ•°æ®é›†å°é€‰æ‹©1ï¼Œæ•°æ®é›†å¤§é€‰æ‹©2</p></li><li><p>å…ˆåœ¨å¤§çš„æ•°æ®é›†è®­ç»ƒï¼ˆç›‘ç£ä¸è®­ç»ƒï¼‰ï¼Œå†åœ¨å°çš„è®­ç»ƒç§°ä¸ºå¾®è°ƒ</p></li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011163230072.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011163351440.png"></p><h4 id="æœºå™¨å­¦ä¹ é¡¹ç›®å…¨å‘¨æœŸ">2.4 æœºå™¨å­¦ä¹ é¡¹ç›®å…¨å‘¨æœŸ</h4><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011163931188.png"></p><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011164414049.png"></p><h4 id="å€¾æ–œæ•°æ®é›†çš„è¯¯å·®æŒ‡æ ‡">2.5 å€¾æ–œæ•°æ®é›†çš„è¯¯å·®æŒ‡æ ‡</h4><ul><li>ç²¾ç¡®åº¦å’Œå¬å›ç‡</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011165618174.png"></p><ul><li>ç²¾åº¦å’Œå¬å›ç‡</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011170439331.png"></p><ul><li>F1score æ›´å¼ºè°ƒPå’ŒRä¸­è¾ƒä½çš„é‚£ä¸ª è°ƒå’Œå¹³å‡å€¼</li></ul><p><img src="/2024/11/14/ML/class2-week3-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%9C%A8%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231011170740787.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.2 æ·±åº¦å­¦ä¹ -Tenserflowå®ç°-å´æ©è¾¾</title>
    <link href="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="tenserflowå®ç°">Tenserflowå®ç°</h2><h3 id="æ¨¡å‹è®­ç»ƒæ­¥éª¤">1. æ¨¡å‹è®­ç»ƒæ­¥éª¤</h3><figure><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010125603129.png" alt="æ¨¡å‹è®­ç»ƒæ­¥éª¤"><figcaption aria-hidden="true">æ¨¡å‹è®­ç»ƒæ­¥éª¤</figcaption></figure><h4 id="epochs-and-batches">1.1 Epochs and batches</h4><p>åœ¨ä¸Šè¿°çš„ <code>compile</code> è¯­å¥ä¸­ï¼Œ<code>epochs</code>çš„æ•°é‡è¢«è®¾ç½®ä¸º10ã€‚è¿™æŒ‡å®šäº†æ•´ä¸ªæ•°æ®é›†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åº”è¯¥è¢«åº”ç”¨10æ¬¡ã€‚åœ¨è®­ç»ƒæœŸé—´ï¼Œä½ ä¼šçœ‹åˆ°æè¿°è®­ç»ƒè¿›åº¦çš„è¾“å‡ºï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Epoch</span> <span class="hljs-number">1</span>/<span class="hljs-number">10</span><br><span class="hljs-attribute">6250</span>/<span class="hljs-number">6250</span><span class="hljs-meta"> [==============================] - 6s 910us/step - loss: 0.1782</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œ <code>Epoch 1/10</code>æè¿°äº†æ¨¡å‹å½“å‰æ­£åœ¨è¿è¡Œçš„æ˜¯å“ªä¸ªè®­ç»ƒå‘¨æœŸã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè®­ç»ƒæ•°æ®é›†è¢«åˆ†æˆäº†â€œæ‰¹æ¬¡â€ã€‚åœ¨Tensorflowä¸­ï¼Œé»˜è®¤çš„æ‰¹æ¬¡å¤§å°æ˜¯32ã€‚æˆ‘ä»¬çš„æ‰©å±•æ•°æ®é›†ä¸­æœ‰200000ä¸ªæ ·æœ¬ï¼Œæˆ–è€…6250ä¸ªæ‰¹æ¬¡ã€‚ç¬¬äºŒè¡Œçš„ç¬¦å·<code>6250/6250 [====</code> æè¿°äº†å·²ç»æ‰§è¡Œäº†å“ªä¸ªæ‰¹æ¬¡ã€‚</p><h4 id="åˆ›å»ºæ¨¡å‹">1.2 åˆ›å»ºæ¨¡å‹</h4><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010125701208.png"></p><h4 id="äº¤å‰ç†µæŸå¤±å‡½æ•°">1.3 äº¤å‰ç†µæŸå¤±å‡½æ•°</h4><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010130715345.png"></p><ul><li>å›å½’å’Œåˆ†ç±»ä½¿ç”¨ä¸åŒçš„æŸå¤±ä»£ä»·å‡½æ•°</li></ul><h4 id="æ¢¯åº¦ä¸‹é™">1.4 æ¢¯åº¦ä¸‹é™</h4><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010130841602.png"></p><p>å¤šå±‚æ„ŸçŸ¥å™¨ï¼šå¤šå±‚ç¥ç»ç½‘è·¯</p><h3 id="æ¿€æ´»å‡½æ•°">2. æ¿€æ´»å‡½æ•°</h3><h4 id="relu-activation">2.1 ReLU Activation</h4><p>This week, a new activation was introduced, the Rectified Linear Unit(ReLU).</p><p>ğ‘=ğ‘šğ‘ğ‘¥(0,ğ‘§)</p><figure><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010204558837.png" alt="ReLU"><figcaption aria-hidden="true">ReLU</figcaption></figure><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010204715345.png"></p><ul><li><p>äºŒåˆ†ç±»é—®é¢˜ï¼Œsigmoidæ¿€æ´»å‡½æ•°æ˜¯æœ€è‡ªç„¶çš„é€‰æ‹©ï¼Œè¾“å‡ºå±‚ä½¿ç”¨</p></li><li><p>å›å½’æ¨¡å‹ï¼Œè¾“å‡ºæœ‰æ­£æœ‰è´Ÿï¼Œé¢„æµ‹æ˜å¤©çš„è‚¡ç¥¨ä»·æ ¼ï¼Œè¾“å‡ºå±‚ä½¿ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°</p></li><li><p>å›å½’æ¨¡å‹ï¼Œè¾“å‡ºä¸ºéè´Ÿï¼Œé¢„æµ‹æˆ¿å±‹ä»·æ ¼ï¼Œéè´Ÿï¼Œè¾“å‡ºå±‚é€‰æ‹©ReLUå‡½æ•°</p></li><li><p>éšè—å±‚é€‰æ‹©Reluå‡½æ•°ï¼ŒReLUè®¡ç®—é€Ÿåº¦æ›´å¿«ï¼Œæ•ˆç‡é«˜ï¼Œä½†äº‹å®è¯æ˜æ›´é‡è¦çš„ç¬¬äºŒä¸ªåŸå› æ˜¯ReLUå‡½æ•°ä»…åœ¨å›¾å½¢çš„ä¸€éƒ¨åˆ†å˜å¹³;å·¦è¾¹è¿™é‡Œæ˜¯å®Œå…¨å¹³å¦çš„ï¼Œè€Œsigmoidæ¿€æ´»å‡½æ•°ï¼Œå®ƒåœ¨ä¸¤ä¸ªåœ°æ–¹å˜å¾—å¹³å¦ã€‚æ¢¯åº¦ä¸‹é™å°±ä¼šå¾ˆæ…¢ï¼Œå‡æ…¢å­¦ä¹ é€Ÿåº¦</p></li><li><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°ï¼Ÿ</p><ul><li>è‹¥æ‰€æœ‰å±‚éƒ½æ˜¯ç”¨çº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œé‚£å°±å˜æˆäº†çº¿æ€§å›å½’</li></ul></li></ul><h3 id="å¤šåˆ†ç±»é—®é¢˜">3. å¤šåˆ†ç±»é—®é¢˜</h3><h4 id="softmaxå‡½æ•°">3.1 Softmaxå‡½æ•°</h4><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010212144511.png"></p><h4 id="ä»£ä»·å‡½æ•°">3.2 ä»£ä»·å‡½æ•°</h4><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010212557352.png"></p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010220105018.png"></p><h4 id="tenserflow-å®ç°">3.3 Tenserflow å®ç°</h4><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010220327241.png"></p><h4 id="æ”¹è¿›å®ç°">3.4 æ”¹è¿›å®ç°</h4><p>é¿å…è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°è¿‡å¤§æˆ–è€…è¿‡å°å€¼é€ æˆè®¡ç®—é”™è¯¯ï¼Œæ”¹è¿›æ–¹æ³•åœ¨è®¡ç®—è¿‡ç¨‹ä¸­è¿›è¡Œäº†é‡æ–°æ’åˆ—</p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010221115720.png"></p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010221418604.png"></p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010221520301.png"></p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010221537117.png"></p><h3 id="å¤šæ ‡ç­¾åˆ†ç±»">4. å¤šæ ‡ç­¾åˆ†ç±»</h3><p>ä¸€ä¸ªç¥ç»ç½‘ç»œåŒæ—¶æ£€æµ‹å¤šä¸ªç›®æ ‡</p><h3 id="æ›´å¿«çš„è®­ç»ƒæ–¹æ³•">5. æ›´å¿«çš„è®­ç»ƒæ–¹æ³•</h3><h4 id="adamç®—æ³•">5.1 Adamç®—æ³•</h4><p>è‡ªåŠ¨è°ƒèŠ‚Î±</p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010231015869.png"></p><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010231157191.png"></p><h3 id="å…¶ä»–çš„ç½‘ç»œå±‚">6. å…¶ä»–çš„ç½‘ç»œå±‚</h3><p>å¯†é›†å±‚</p><p>å·ç§¯å±‚</p><ul><li><p>æ›´å¿«çš„è®¡ç®—</p></li><li><p>éœ€è¦æ›´å°‘çš„è®­ç»ƒæ•°æ®ï¼Œä¸å¤ªä¼šè¿‡æ‹Ÿåˆ</p></li></ul><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010231710233.png"></p><h3 id="è®¡ç®—å›¾">7. è®¡ç®—å›¾</h3><p><img src="/2024/11/13/ML/class2-week2-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Tenserflow%E5%AE%9E%E7%8E%B0-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231010235541548.png"></p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2.1 æ·±åº¦å­¦ä¹ -ç¥ç»ç½‘ç»œ-å´æ©è¾¾</title>
    <link href="/2024/11/13/ML/class2-week1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%90%B4%E6%81%A9%E8%BE%BE/"/>
    <url>/2024/11/13/ML/class2-week1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%90%B4%E6%81%A9%E8%BE%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¥ç»ç½‘ç»œ">ç¥ç»ç½‘ç»œ</h2><ul><li><p>è¾“å…¥å±‚ è¾“å…¥ä¸ºç‰¹å¾å‘é‡</p></li><li><p>éšè—å±‚</p></li><li><p>è¾“å‡ºå±‚</p></li></ul><p><strong>Tensorflow and Keras</strong></p><ul><li>TensorFlow æ˜¯ç”±è°·æ­Œå¼€å‘çš„ä¸€ä¸ªæœºå™¨å­¦ä¹ åŒ…ã€‚2019å¹´ï¼Œè°·æ­Œå°† Keras é›†æˆåˆ°TensorFlow ä¸­ï¼Œå¹¶å‘å¸ƒäº† TensorFlow 2.0ã€‚Keras æ˜¯ç”± FranÃ§ois Cholletç‹¬ç«‹å¼€å‘çš„æ¡†æ¶ï¼Œå®ƒä¸º TensorFlowåˆ›å»ºäº†ä¸€ä¸ªç®€å•ã€ä»¥å±‚ä¸ºä¸­å¿ƒçš„æ¥å£ã€‚æœ¬è¯¾ç¨‹å°†ä½¿ç”¨ Keras æ¥å£ã€‚</li></ul><h3 id="å‰å‘ä¼ æ’­ç®—æ³•">å‰å‘ä¼ æ’­ç®—æ³•</h3><p><img src="/2024/11/13/ML/class2-week1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231009222124079.png"></p><ul><li><p>ä»å·¦åˆ°å³å‘å‰è®¡ç®—ï¼Œç§°ä¸ºå‰å‘ä¼ æ’­ã€‚</p></li><li><p>ç¦»è¾“å‡ºå±‚è¶Šè¿‘ï¼Œéšè—å±‚ç¥ç»å…ƒè¶Šå°‘ã€‚</p></li></ul><p><img src="/2024/11/13/ML/class2-week1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231009222647437.png"></p><ul><li><p>ä¸¤ä¸ªç‰¹å¾ï¼Œç¬¬ä¸€ä¸ªéšè—å±‚æœ‰ä¸‰ä¸ªç¥ç»å…ƒï¼Œæ¿€æ´»å‡½æ•°ä¸ºsigmoidï¼Œè¾“å‡ºä¸ºa1ï¼Œç¬¬äºŒå±‚åŒç†ï¼›</p></li><li><p>è¾“å…¥å‘é‡è¦å†™æˆäºŒç»´çŸ©é˜µå½¢å¼ x = np.array([[200,17]])1x2çŸ©é˜µã€‚</p></li></ul><p><img src="/2024/11/13/ML/class2-week1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231009224920509.png"></p><p><img src="/2024/11/13/ML/class2-week1-%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C-%E5%90%B4%E6%81%A9%E8%BE%BE/image-20231009224946845.png"></p><ul><li>å°†æƒé‡æ‹Ÿåˆåˆ°æ•°æ®ï¼ˆåå‘ä¼ æ’­ï¼‰å¦‚æœæ•°æ®è¢«å½’ä¸€åŒ–ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°†ä¼šè¿›è¡Œå¾—æ›´å¿«ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.3 æœ‰ç›‘ç£æœºå™¨å­¦ä¹ å›å½’å’Œåˆ†ç±»-é€»è¾‘å›å½’-å´æ©è¾¾</title>
    <link href="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/"/>
    <url>/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/</url>
    
    <content type="html"><![CDATA[<h2 id="week3-é€»è¾‘å›å½’">Week3 é€»è¾‘å›å½’</h2><h3 id="äºŒå…ƒåˆ†ç±»">1. äºŒå…ƒåˆ†ç±»</h3><p>åªæœ‰ä¸¤ç§å¯èƒ½è¾“å‡ºçš„åˆ†ç±»é—®é¢˜ç§°ä¸ºäºŒå…ƒåˆ†ç±»ã€‚</p><h3 id="sigmoid-å‡½æ•°">2. sigmoid å‡½æ•°</h3><p><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008173829773.png"></p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008173915794.png" alt="sigmoid"><figcaption aria-hidden="true">sigmoid</figcaption></figure><p><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20241113221925070.png"></p><p>è¾“å…¥ç‰¹å¾ï¼Œè¾“å‡º0åˆ°1</p><h3 id="å†³ç­–è¾¹ç•Œ">3. å†³ç­–è¾¹ç•Œ</h3><p>çº¿æ€§oréçº¿æ€§</p><h3 id="ä»£ä»·å‡½æ•°">4. ä»£ä»·å‡½æ•°</h3><p>å¹³æ–¹è¯¯å·®æˆæœ¬å‡½æ•°ä¸æ˜¯é€»è¾‘å›å½’çš„ç†æƒ³æˆæœ¬å‡½æ•°ï¼Œå¸¸ç”¨çš„æ˜¯å¯¹æ•°æŸå¤±å‡½æ•°ã€‚</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008205513401.png" alt="squared error cost"><figcaption aria-hidden="true">squared error cost</figcaption></figure><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008205613800.png" alt="å‡¸å’Œéå‡¸"><figcaption aria-hidden="true">å‡¸å’Œéå‡¸</figcaption></figure><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008205638121.png" alt="image-20231008205638121"><figcaption aria-hidden="true">image-20231008205638121</figcaption></figure><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008205807667.png" alt="logistic loss function"><figcaption aria-hidden="true">logistic loss function</figcaption></figure><p>è¯·è®°ä½ï¼ŒæŸå¤±å‡½æ•°è¡¡é‡çš„æ˜¯ä½ åœ¨ä¸€ä¸ªè®­ç»ƒæ ·ä¾‹ä¸Šçš„è¡¨ç°å¦‚ä½•ï¼Œå®ƒæ˜¯é€šè¿‡æ€»ç»“ä½ éšåè·å¾—çš„æ‰€æœ‰è®­ç»ƒæ ·ä¾‹çš„æŸå¤±ï¼Œæˆæœ¬å‡½æ•°è¡¡é‡ä½ åœ¨æ•´ä¸ªè®­ç»ƒé›†ä¸Šçš„è¡¨ç°ã€‚</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008210426343.png" alt="image-20231008210426343"><figcaption aria-hidden="true">image-20231008210426343</figcaption></figure><p>æ•´ä½“æˆæœ¬å‡½æ•°ä¸ºå‡¸å‡½æ•°ï¼Œå¯ä»¥è·å¾—å…¨å±€æœ€å°å€¼</p><p>ç®€åŒ–æŸå¤±å‡½æ•°</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008211105952.png" alt="image-20231008211105952"><figcaption aria-hidden="true">image-20231008211105952</figcaption></figure><p>ä»£ä»·å‡½æ•°</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008211415275.png" alt="image-20231008211415275"><figcaption aria-hidden="true">image-20231008211415275</figcaption></figure><p>ä½¿ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¨å¯¼å‡ºæ¥ï¼Œæ˜¯å‡¸å‡½æ•°ã€‚</p><h3 id="æ¢¯åº¦ä¸‹é™">5. æ¢¯åº¦ä¸‹é™</h3><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008211755913.png" alt="image-20231008211755913"><figcaption aria-hidden="true">image-20231008211755913</figcaption></figure><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008211932119.png" alt="image-20231008211932119"><figcaption aria-hidden="true">image-20231008211932119</figcaption></figure><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008211950319.png" alt="image-20231008211950319"><figcaption aria-hidden="true">image-20231008211950319</figcaption></figure><p>Same concepts:</p><ul><li>Monitor gradient descent(learning curve)</li><li>Vectorized implementation</li><li>Feature scaling</li></ul><h3 id="è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ">6. è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</h3><ul><li><p>æ¬ æ‹Ÿåˆï¼šé«˜åå·® high bias Does not fit thetraining setwell</p></li><li><p>è¿‡æ‹Ÿåˆï¼šé«˜æ–¹å·® high variance Fits the training setextremelywell</p></li></ul><h3 id="è§£å†³è¿‡æ‹Ÿåˆ">7. è§£å†³è¿‡æ‹Ÿåˆ</h3><ul><li><p>æ”¶é›†æ›´å¤šçš„è®­ç»ƒæ ·æœ¬</p></li><li><p>é€‰æ‹©ç‰¹å¾ select features to include/exclude</p></li><li><p>æ­£åˆ™åŒ– Regularizationæ­£åˆ™åŒ–æ˜¯ä¸€ç§æ›´æ¸©å’Œåœ°å‡å°‘æŸäº›ç‰¹å¾å½±å“çš„æ–¹æ³•ï¼Œè€Œä¸ç”¨åƒå½»åº•æ¶ˆé™¤å®ƒé‚£æ ·ä¸¥å‰ã€‚</p></li><li><p>é‚£ä¹ˆæ­£åˆ™åŒ–çš„ä½œç”¨æ˜¯ï¼Œå®ƒå¯ä»¥è®©ä½ ä¿ç•™æ‰€æœ‰ç‰¹å¾ï¼Œä½†å®ƒä»¬åªæ˜¯é˜²æ­¢ç‰¹å¾äº§ç”Ÿè¿‡å¤§çš„å½±å“ï¼Œè€Œè¿™æœ‰æ—¶ä¼šå¯¼è‡´è¿‡åº¦æ‹Ÿåˆã€‚</p></li></ul><h3 id="æ­£åˆ™åŒ–-regularization">8. æ­£åˆ™åŒ– Regularization</h3><p>Î»æ­£åˆ™åŒ–å‚æ•°</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008223908932.png" alt="image-20231008223908932"><figcaption aria-hidden="true">image-20231008223908932</figcaption></figure><p>æ­£åˆ™åŒ–çº¿æ€§å›å½’</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008224030737.png" alt="image-20231008224030737"><figcaption aria-hidden="true">image-20231008224030737</figcaption></figure><p>æ¢¯åº¦ä¸‹é™</p><figure><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008224109310.png" alt="image-20231008224109310"><figcaption aria-hidden="true">image-20231008224109310</figcaption></figure><p>æ­£åˆ™åŒ–é€»è¾‘å›å½’</p><h1 id="image-20231008225551317"><img src="/2024/11/13/ML/class1-week3-%E6%9C%89%E7%9B%91%E7%9D%A3%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9B%9E%E5%BD%92%E5%92%8C%E5%88%86%E7%B1%BB-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92/image-20231008225551317.png" alt="image-20231008225551317"></h1>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
      <category>ML</category>
      
      <category>ML-å´æ©è¾¾</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºæ¼”å‘˜-è¯„è®ºå®¶æ¡†æ¶çš„å±‚æ¬¡åŒ–å¤šæ™ºèƒ½ä½“ååŒå†³ç­–æ–¹æ³•</title>
    <link href="/2024/11/12/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E6%BC%94%E5%91%98-%E8%AF%84%E8%AE%BA%E5%AE%B6%E6%A1%86%E6%9E%B6%E7%9A%84%E5%B1%82%E6%AC%A1%E5%8C%96%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%8F%E5%90%8C%E5%86%B3%E7%AD%96%E6%96%B9%E6%B3%95/"/>
    <url>/2024/11/12/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E6%BC%94%E5%91%98-%E8%AF%84%E8%AE%BA%E5%AE%B6%E6%A1%86%E6%9E%B6%E7%9A%84%E5%B1%82%E6%AC%A1%E5%8C%96%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%8F%E5%90%8C%E5%86%B3%E7%AD%96%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸»è¦å†…å®¹">ä¸»è¦å†…å®¹</h1><p>è¿™ç¯‡æ–‡ç« çš„ä¸»è¦å†…å®¹æ˜¯æå‡ºäº†ä¸€ç§åŸºäºæ¼”å‘˜-è¯„è®ºå®¶ï¼ˆActor-Criticï¼ŒACï¼‰æ¡†æ¶çš„å±‚æ¬¡åŒ–å¤šæ™ºèƒ½ä½“ååŒå†³ç­–æ–¹æ³•ï¼Œæ—¨åœ¨è§£å†³å¤æ‚ä½œæˆ˜ç¯å¢ƒä¸‹å¤šæ™ºèƒ½ä½“ååŒå†³ç­–ä¸­çš„ä»»åŠ¡åˆ†é…ä¸åˆç†å’Œå†³ç­–ä¸€è‡´æ€§è¾ƒå·®çš„é—®é¢˜ã€‚è¯¥æ–¹æ³•é€šè¿‡å°†å†³ç­–è¿‡ç¨‹åˆ†ä¸ºä¸åŒå±‚æ¬¡ï¼Œå¹¶ä½¿ç”¨ACæ¡†æ¶æ¥å®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„ä¿¡æ¯äº¤æµå’Œå†³ç­–ååŒï¼Œä»¥æé«˜å†³ç­–æ•ˆç‡å’Œæˆ˜æ–—åŠ›ã€‚åœ¨é«˜å±‚æ¬¡ï¼Œé¡¶å±‚æ™ºèƒ½ä½“åˆ¶å®šä»»åŠ¡å†³ç­–ï¼Œå°†æ€»ä»»åŠ¡åˆ†è§£å¹¶åˆ†é…ç»™åº•å±‚æ™ºèƒ½ä½“ã€‚åœ¨ä½å±‚æ¬¡ï¼Œåº•å±‚æ™ºèƒ½ä½“æ ¹æ®å­ä»»åŠ¡è¿›è¡ŒåŠ¨ä½œå†³ç­–ï¼Œå¹¶å°†ç»“æœåé¦ˆç»™é«˜å±‚æ¬¡ã€‚</p><h1 id="ç ”ç©¶æ–¹æ³•å’Œç®—æ³•å®ç°">ç ”ç©¶æ–¹æ³•å’Œç®—æ³•å®ç°ï¼š</h1><div data-align="center"><img src="/2024/11/12/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E6%BC%94%E5%91%98-%E8%AF%84%E8%AE%BA%E5%AE%B6%E6%A1%86%E6%9E%B6%E7%9A%84%E5%B1%82%E6%AC%A1%E5%8C%96%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%8F%E5%90%8C%E5%86%B3%E7%AD%96%E6%96%B9%E6%B3%95/image-20241112210938443.png" alt="image-20241112210938443" style="zoom:40%;" align="center"></div><ol type="1"><li><strong>å†³ç­–å±‚æ¬¡åˆ’åˆ†ï¼š</strong><ul><li>é«˜å±‚æ¬¡ï¼ˆHigh Level,HLï¼‰ï¼šé¡¶å±‚æ™ºèƒ½ä½“è´Ÿè´£åˆ¶å®šä»»åŠ¡å†³ç­–ï¼Œå°†æ€»ä»»åŠ¡åˆ†è§£å¹¶åˆ†é…ç»™åº•å±‚æ™ºèƒ½ä½“ã€‚</li><li>ä½å±‚æ¬¡ï¼ˆLow Level,LLï¼‰ï¼šåº•å±‚æ™ºèƒ½ä½“æ ¹æ®å­ä»»åŠ¡è¿›è¡ŒåŠ¨ä½œå†³ç­–ï¼Œå¹¶å°†ç»“æœåé¦ˆç»™é«˜å±‚æ¬¡ã€‚</li></ul></li><li><strong>çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´çš„åˆ†å‰²ï¼š</strong><ul><li>æ ¹æ®å±‚çº§å…³ç³»å¯¹çŠ¶æ€ç©ºé—´å’ŒæŒ‡ä»¤ç©ºé—´è¿›è¡Œåˆ†å‰²ï¼ŒHLå†³ç­–é’ˆå¯¹å…¨å±€ä½œæˆ˜æ€åŠ¿ä¿¡æ¯ä¸‹è¾¾å®è§‚ä½œæˆ˜æŒ‡ä»¤ï¼ŒLLå†³ç­–å¯¹æ‰§è¡Œå®è§‚ä½œæˆ˜æŒ‡ä»¤çš„ä½œæˆ˜ç¼–ç»„è¿›è¡ŒåŠ¨ä½œæ“æ§ã€‚</li></ul></li><li><strong>ä¸Šå±‚ä»»åŠ¡åˆ†è§£</strong><ul><li>ç»™å®šæ€»ä»»åŠ¡<em>M</em>ï¼Œæ‹†åˆ†æˆå­ä»»åŠ¡é›†{ğ‘€0,ğ‘€1,â‹¯,ğ‘€ğ‘–}</li><li>æ¯ä¸€ä¸ªå­ä»»åŠ¡æœ‰ä»»åŠ¡ç±»å‹ã€ä»»åŠ¡æ—¶é—´ã€ä»»åŠ¡çŠ¶æ€å’Œä½œæˆ˜å•å…ƒç±»å‹ï¼Œå¯ç”¨one-hotç‹¬çƒ­ç <ul><li>ä»»åŠ¡ç±»å‹ï¼šä¸»è¦åˆ†ä¸ºæ‰“å‡»ä»»åŠ¡å’Œå·¡é€»ä»»åŠ¡ï¼Œæ‰“å‡»ä»»åŠ¡åŒ…å«å¯¹ç©ºæ‹¦æˆªã€å¯¹é™†æ‰“å‡»ï¼Œå·¡é€»ä»»åŠ¡åŒ…å«ç©ºæˆ˜å·¡é€»ã€ååœ°é¢æˆ˜å·¡é€»</li><li>ä»»åŠ¡æ—¶é—´ï¼šåšç¦»æ•£åŒ–å¤„ç†ï¼Œç”¨æ—¶åˆ»ğ‘‡1å’Œæ—¶åˆ»ğ‘‡2æ¥è¡¨ç¤º</li><li>ä»»åŠ¡çŠ¶æ€ï¼šå¯åŠ¨ã€æœªå¯åŠ¨</li><li>ä½œæˆ˜å•å…ƒï¼šå¯¼å¼¹é©±é€èˆ°å’Œè½°ç‚¸æœº</li></ul></li><li>åœ¨æ ¹æ®æƒ³å®šåœºæ™¯è®¾è®¡å‡ºå­ä»»åŠ¡åï¼ŒHLéœ€è¦æ ¹æ®ä»»åŠ¡ç±»å‹è§„åˆ’å‡ºä»»åŠ¡å¯åŠ¨æ—¶é—´ï¼Œå¹¶è¿›ä¸€æ­¥ç¡®å®šä»»åŠ¡çš„å¯åŠ¨æ¬¡åºã€‚</li></ul></li><li><strong>å¥–æƒ©å‡½æ•°è®¾è®¡ï¼š</strong><ul><li>é«˜å±‚æ™ºèƒ½ä½“åªéœ€è¦èšç„¦äºå­ä»»åŠ¡é€‰æ‹©æ˜¯å¦åˆé€‚ï¼Œå› æ­¤é«˜å±‚æ™ºèƒ½ä½“çš„å¥–åŠ±å‡½æ•°HL<sub>r</sub>è®¾è®¡ä¸ºå½“ä»»åŠ¡åˆé€‚æ—¶ç»™äºˆæ­£å¥–åŠ±å›æŠ¥ï¼Œåä¹‹åˆ™ä¸ºè´Ÿå¥–åŠ±å›æŠ¥ã€‚æœ¬æ–‡ä¸­æ ¹æ®å…¨å±€ä»»åŠ¡æ˜¯å¦å®Œæˆåˆ¤æ–­å­ä»»åŠ¡é€‰æ‹©æ˜¯å¦æ­£ç¡®ã€‚</li></ul></li><li><strong>åŸºäºACæ¡†æ¶çš„å±‚æ¬¡åŒ–å¤šæ™ºèƒ½ä½“ç®—æ³•æ¡†æ¶ï¼š</strong><ul><li>ç¦»ç­–ç•¥ä¿®æ­£çš„å±‚æ¬¡åŒ–å­¦ä¹ (Hierarchical reinforcement learning withoff-policy correction,HIRO)[31]ç®—æ³•æ˜¯ä¸€ç§ä½¿ç”¨ä¸¤å±‚ç­–ç•¥ç»“æ„æ¥è§£å†³å¤æ‚å¼ºåŒ–å­¦ä¹ é—®é¢˜çš„ä¸€ç§å•æ™ºèƒ½ä½“ç®—æ³•ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯é«˜å±‚ç­–ç•¥æå‡ºç›®æ ‡ï¼Œä½å±‚ç­–ç•¥å®Œæˆè¿™ä¸€ç›®æ ‡ã€‚</li><li>é‡‡ç”¨éƒ¨åˆ†å¯è§‚å¯Ÿé©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆPOMDPï¼‰å¯¹ç¯å¢ƒè¿›è¡Œå»ºæ¨¡ã€‚</li><li>åˆ©ç”¨æ·±åº¦ç¡®å®šæ€§ç­–ç•¥æ¢¯åº¦ï¼ˆDeep Deterministic Policy Gradient,DDPGï¼‰ç®—æ³•ä½œä¸ºåŸºç¡€ï¼Œç»“åˆå¤šæ™ºèƒ½ä½“æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼Œå½¢æˆäº†HierarchicalMulti-Agent Actor-Criticï¼ˆHMaACï¼‰ç®—æ³•ã€‚</li></ul></li><li><strong>HMaACç®—æ³•è®¾è®¡ï¼š</strong><ul><li>åˆå§‹åŒ–é¡¶å±‚å’Œåº•å±‚çš„Criticç½‘ç»œå’ŒActorç½‘ç»œï¼Œä»¥åŠç»éªŒå›æ”¾ç¼“å†²æ± ã€‚</li><li>é€šè¿‡é‡‡æ ·å’Œæœ€å°åŒ–æŸå¤±å‡½æ•°æ›´æ–°Criticç½‘ç»œï¼Œé€šè¿‡ç­–ç•¥æ¢¯åº¦æ›´æ–°Actorç½‘ç»œã€‚</li><li>å¼•å…¥ç†µçº¦æŸçš„æ¦‚å¿µï¼Œæœ€å¤§åŒ–ç­–ç•¥çš„ç†µä»¥å­¦ä¹ è®¾ç½®åˆé€‚çš„å­ç›®æ ‡ã€‚</li></ul></li><li><strong>ä»¿çœŸç¯å¢ƒä¸ä»¿çœŸç»“æœï¼š</strong><ul><li>ä½¿ç”¨è”åˆä½œæˆ˜ä»¿çœŸæ¨æ¼”å¹³å°ä½œä¸ºå®éªŒéªŒè¯ç¯å¢ƒï¼Œè¿›è¡Œäº†2v2ã€4v4ã€6v6ç­‰ä¸åŒè§„æ¨¡çš„ä½œæˆ˜åœºæ™¯å®éªŒã€‚</li><li>å®éªŒç»“æœæ˜¾ç¤ºï¼ŒHMaACç®—æ³•åœ¨å¤šç§å¤æ‚ä½œæˆ˜åœºæ™¯ä¸‹å‡å–å¾—äº†è¾ƒå¥½çš„æ€§èƒ½ï¼Œå±•ç°äº†å…¶åœ¨æå‡å†›äº‹ä½œæˆ˜ååŒå†³ç­–èƒ½åŠ›æ–¹é¢çš„æ½œåŠ›ã€‚</li></ul></li><li><strong>ç½‘ç»œç»“æ„è®¾è®¡å’Œè®­ç»ƒå‚æ•°ï¼š</strong><ul><li>è®¾è®¡äº†ä¸Šå±‚å’Œä¸‹å±‚çš„ç¥ç»ç½‘ç»œç»“æ„ï¼Œå‡ä½¿ç”¨3å±‚å…¨è¿æ¥å±‚ï¼Œä½¿ç”¨ReLUå’ŒTanhä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚</li><li>è®¾å®šäº†ä¸€ç³»åˆ—è¶…å‚æ•°ï¼Œå¦‚æœ€å¤§episodeæ•°é‡ã€æ‰¹å¤„ç†å‚æ•°ã€ç†µæ­£åˆ™é¡¹ç³»æ•°ç­‰ã€‚</li></ul></li></ol><p><img src="/2024/11/12/%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D/%E5%9F%BA%E4%BA%8E%E6%BC%94%E5%91%98-%E8%AF%84%E8%AE%BA%E5%AE%B6%E6%A1%86%E6%9E%B6%E7%9A%84%E5%B1%82%E6%AC%A1%E5%8C%96%E5%A4%9A%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%8F%E5%90%8C%E5%86%B3%E7%AD%96%E6%96%B9%E6%B3%95/image-20241113205648783.png"></p><ol type="1"><li><strong>è®­ç»ƒç»“æœåˆ†æï¼š</strong><ul><li>å¯¹æ¯”äº†HMaACç®—æ³•å’ŒMADDPGç®—æ³•åœ¨2v2ä»¿çœŸåœºæ™¯ä¸­çš„è¡¨ç°ï¼ŒHMaACç®—æ³•åœ¨å¥–åŠ±å€¼å’Œæ”¶æ•›é€Ÿåº¦ä¸Šä¼˜äºMADDPGç®—æ³•ã€‚</li></ul></li></ol><p>æ–‡ç« æœ€åæŒ‡å‡ºï¼Œå°½ç®¡HMaACç®—æ³•åœ¨å®éªŒä¸­è¡¨ç°å‡ºè‰²ï¼Œä½†ä»éœ€åœ¨å®åœ°æµ‹è¯•å’Œå®æˆ˜æ¼”ç»ƒä¸­è¿›ä¸€æ­¥éªŒè¯å…¶å¯è¡Œæ€§å’Œæœ‰æ•ˆæ€§ï¼ŒåŒæ—¶æ¢è®¨åœ¨æ›´å¤æ‚å¤šæ ·åŒ–ä½œæˆ˜ç¯å¢ƒä¸­çš„é€‚åº”æ€§å’Œé²æ£’æ€§ã€‚</p><p>[1]å‚…å¦èŠ³,é›·å‡¯éºŸ,é­ä½³å®,ç­‰.åŸºäºæ¼”å‘˜-è¯„è®ºå®¶æ¡†æ¶çš„å±‚æ¬¡åŒ–å¤šæ™ºèƒ½ä½“ååŒå†³ç­–æ–¹æ³•[J].å…µå·¥å­¦æŠ¥,2024,45(10):3385-3396.</p>]]></content>
    
    
    <categories>
      
      <category>ç§‘ç ”</category>
      
      <category>å¤šæ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ ä»»åŠ¡åˆ†é…</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
      <tag>ç§‘ç ”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1.2 å› ç‰¹ç½‘æ¦‚è¿°</title>
    <link href="/2024/11/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0/"/>
    <url>/2024/11/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="å› ç‰¹ç½‘æ¦‚è¿°">1.2 å› ç‰¹ç½‘æ¦‚è¿°</h1><h2 id="ç½‘ç»œäº’è”ç½‘å’Œå› ç‰¹ç½‘">1. ç½‘ç»œï¼Œäº’è”ç½‘å’Œå› ç‰¹ç½‘</h2><ul><li>ç½‘ç»œæ˜¯ç”±è‹¥å¹²ç»“ç‚¹å’Œé“¾æ¥è¿™äº›ç»“ç‚¹çš„é“¾è·¯ç»„æˆ</li><li>å¤šä¸ªç½‘ç»œé€šè¿‡è·¯ç”±å™¨äº’è¿èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªè¦†ç›–èŒƒå›´æ›´å¤§çš„ç½‘è·¯ï¼Œç§°ä¸ºäº’è”ç½‘</li><li>å› ç‰¹ç½‘æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„äº’è”ç½‘ç»œï¼Œè¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœºç§°ä¸ºä¸»æœº</li></ul><h3 id="internetå’Œinternetçš„åŒºåˆ«">1.1 internetå’ŒInternetçš„åŒºåˆ«</h3><ol type="1"><li>internet(äº’è”ç½‘æˆ–äº’è¿ç½‘)æ˜¯ä¸€ä¸ªé€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿è€Œæˆçš„ç½‘ç»œã€‚åœ¨è¿™äº›ç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®å¯ä»¥æ˜¯ä»»æ„çš„ã€‚</li><li>Internet(å› ç‰¹ç½‘)åˆ™æ˜¯ä¸€ä¸ªä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šè®¡ç®—æœºç½‘ç»œï¼Œå®ƒé‡‡ç”¨TCPPåè®®æ—ä½œä¸ºé€šä¿¡çš„è§„åˆ™ï¼Œå…¶å‰èº«æ˜¯ç¾å›½çš„ARPANETã€‚</li></ol><h2 id="å› ç‰¹ç½‘æœåŠ¡æä¾›è€…ispinternet-service-provider">2.å› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISP(Internet Service Provider)</h2><ul><li>é€šè¿‡å‘ISPç¼´çº³è´¹ç”¨ï¼Œæ‹¿åˆ°IPåœ°å€å’Œé€šä¿¡çº¿è·¯ï¼Œè·¯ç”±å™¨ç­‰è¿ç½‘è®¾å¤‡çš„ä½¿ç”¨æƒ</li><li>åŒæ—¶ï¼Œæ¯ä¸ªæ¥å…¥å› ç‰¹ç½‘çš„ç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥æˆä¸ºISPï¼Œåªéœ€è´­ä¹°è°ƒåˆ¶è§£è°ƒå™¨æˆ–è·¯ç”±å™¨è¿™æ ·çš„è®¾å¤‡ï¼Œè®©å…¶ä»–ç”¨æˆ·ä¸ä¹‹ç›¸è¿</li></ul><figure><img src="/2024/11/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0/image-20241115201435974.png" alt="image-20241115201435974"><figcaption aria-hidden="true">image-20241115201435974</figcaption></figure><h3 id="åŸºäºispçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘">2.1 åŸºäºISPçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘</h3><ul><li>ç¬¬ä¸€å±‚ï¼šå›½é™…æ€§åŒºåŸŸ</li><li>ç¬¬äºŒå±‚ï¼šåŒºåŸŸæ€§æˆ–å›½å®¶æ€§è¦†ç›–è§„æ¨¡</li><li>ç¬¬ä¸‰å±‚ï¼šæœ¬åœ°ISP</li></ul><figure><img src="/2024/11/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.2%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0/image-20241115201638639.png" alt="image-20241115201638639"><figcaption aria-hidden="true">image-20241115201638639</figcaption></figure><h2 id="å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ">3. å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ</h2><ol type="1"><li><p>å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œå¯¹å› ç‰¹ç½‘çš„å‘å±•èµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨ã€‚</p></li><li><p>å› ç‰¹ç½‘åœ¨åˆ¶å®šå…¶æ ‡å‡†ä¸Šçš„ä¸€ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹æ˜¯é¢å‘å…¬ä¼—ã€‚</p><ol type="1"><li>å› ç‰¹ç½‘æ‰€æœ‰çš„<a href="http://www.ietf.org/rfc.html">RFC(Request ForComments)æŠ€æœ¯æ–‡æ¡£</a>éƒ½å¯ä»å› ç‰¹ç½‘ä¸Šå…è´¹ä¸‹è½½ï¼›</li><li>ä»»ä½•äººéƒ½å¯ä»¥éšæ—¶ç”¨ç”µå­é‚®ä»¶å‘è¡¨å¯¹æŸä¸ªæ–‡æ¡£çš„æ„è§æˆ–å»ºè®®ã€‚</li></ol></li><li><p>å› ç‰¹ç½‘åä¼šISOCæ˜¯ä¸€ä¸ªå›½é™…æ€§ç»„ç»‡ï¼Œå®ƒè´Ÿè´£å¯¹å› ç‰¹ç½‘è¿›è¡Œå…¨é¢ç®¡ç†ï¼Œä»¥åŠåœ¨ä¸–ç•ŒèŒƒå›´å†…ä¿ƒè¿›å…¶å‘å±•å’Œä½¿ç”¨ã€‚</p><ol type="1"><li>å› ç‰¹ç½‘ä½“ç³»ç»“æ„å§”å‘˜ä¼šIAB,è´Ÿè´£ç®¡ç†å› ç‰¹ç½‘æœ‰å…³åè®®çš„å¼€å‘ï¼š</li><li>å› ç‰¹ç½‘å·¥ç¨‹éƒ¨ETFï¼Œè´Ÿè´£ç ”ç©¶ä¸­çŸ­æœŸå·¥ç¨‹é—®é¢˜ï¼Œä¸»è¦é’ˆå¯¹åè®®çš„å¼€å‘å’Œæ ‡å‡†åŒ–</li><li>å› ç‰¹ç½‘ç ”ç©¶éƒ¨IRTF,ä»äº‹ç†è®ºæ–¹é¢çš„ç ”ç©¶å’Œå¼€å‘ä¸€äº›éœ€è¦é•¿æœŸè€ƒè™‘çš„é—®é¢˜ã€‚</li></ol></li><li><p>åˆ¶è®¢å› ç‰¹ç½‘çš„æ­£å¼æ ‡å‡†è¦ç»è¿‡ä»¥ä¸‹4ä¸ªé˜¶æ®µï¼š</p><ol type="1"><li>å› ç‰¹ç½‘è‰æ¡ˆï¼ˆåœ¨è¿™ä¸ªé˜¶æ®µè¿˜ä¸æ˜¯RFCæ–‡æ¡£ï¼‰</li><li>å»ºè®®æ ‡å‡†ï¼ˆä»è¿™ä¸ªé˜¶æ®µå¼€å§‹å°±æˆä¸ºRFCæ–‡æ¡£ï¼‰ å› ç‰¹ç½‘ä½“ç³»ç»“æ„å§”å‘˜ä¼šAç”±</li><li>è‰æ¡ˆæ ‡å‡†</li><li>å› ç‰¹ç½‘æ ‡å‡†</li></ol><blockquote><p>åªæœ‰ä¸€å°éƒ¨åˆ†RFCæ–‡æ¡£æœ€åæ‰èƒ½å˜æˆå› ç‰¹ç½‘æ ‡å‡†</p></blockquote></li></ol><h2 id="å› ç‰¹ç½‘çš„ç»„æˆ">4. å› ç‰¹ç½‘çš„ç»„æˆ</h2><ol type="1"><li><p>è¾¹ç¼˜éƒ¨åˆ†</p><blockquote><p>ç”±æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡ï¼ˆä¼ é€æ•°æ®ï¼ŒéŸ³é¢‘æˆ–è§†é¢‘)å’Œèµ„æºå…±äº«ã€‚</p></blockquote></li><li><p>æ ¸å¿ƒéƒ¨åˆ†</p><blockquote><p>ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„ï¼ˆæä¾›è¿é€šæ€§å’Œäº¤æ¢ï¼‰</p></blockquote><ol type="1"><li><strong>è·¯ç”±å™¨</strong>æ˜¯å®ç°<strong>åˆ†ç»„äº¤æ¢</strong>çš„å…³é”®æ„ä»¶ï¼Œä»»åŠ¡æ˜¯<strong>è½¬å‘æ”¶åˆ°çš„åˆ†ç»„</strong></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºåŸºç¡€</category>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>os</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>github+hexo æ­å»ºä¸ªäººç½‘ç«™</title>
    <link href="/2024/11/12/hexo/github-hexo-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/"/>
    <url>/2024/11/12/hexo/github-hexo-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/</url>
    
    <content type="html"><![CDATA[<h1 id="é…ç½®ç¯å¢ƒ">é…ç½®ç¯å¢ƒ</h1><h2 id="å®‰è£…å‡†å¤‡">å®‰è£…å‡†å¤‡</h2><p>Gitç‰ˆæœ¬ï¼šGit-2.47.0.2-64-bit</p><p>Node.jsç‰ˆæœ¬ï¼šnode-v22.11.0-x64</p><ol type="1"><li>å®˜ç½‘ä¸‹è½½ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å®‰è£…å³å¯ã€‚</li></ol><p>å®‰è£…å®Œæˆï¼Œå³é”®git bash hereï¼Œè¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git --version<br>node -v<br>npm -v<br></code></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸï¼Œå¯æŸ¥çœ‹ç‰ˆæœ¬ã€‚</p><ol start="2" type="1"><li>å®‰è£…hexo:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo -g<br></code></pre></td></tr></table></figure><p>hexo å®‰è£…æˆåŠŸï¼Œè¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo -v<br></code></pre></td></tr></table></figure><h2 id="git-é…ç½®ssh-key">git é…ç½®SSH key</h2><ol type="1"><li>ç”Ÿæˆkey</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t rsa -C <span class="hljs-string">&quot;xxx@qq.com&quot;</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>è¿›å…¥C:.sshï¼Œè¿›å…¥sshæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶id_rsa.pubæ–‡ä»¶é‡Œçš„æ‰€æœ‰å†…å®¹</li><li>æ‰“å¼€githubä¸»é¡µï¼Œç‚¹å‡»ä¸ªäººè®¾ç½®ï¼Œç‚¹å‡»å·¦ä¾§SSH and GPG keysï¼Œç‚¹å‡»New SShkey</li><li>æ ‡é¢˜éšä¾¿èµ·ï¼Œå°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°Keyï¼Œç‚¹å‡»Add SSH key</li><li>æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œåœ¨git bashä¸­è¾“å…¥ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -T git@github.com<br></code></pre></td></tr></table></figure><p><font style="color:rgb(83, 88, 97);">å¦‚æœé‡åˆ°é€‰æ‹©ï¼Œè¾“å…¥yesï¼Œçœ‹åˆ°æˆåŠŸå³å¯ã€‚</font></p><ol start="6" type="1"><li>é…ç½®è´¦å·å¯†ç </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global user.name <span class="hljs-string">&quot;xxx&quot;</span> <span class="hljs-comment">#ä½ çš„githubç”¨æˆ·å</span><br>git config --global user.email <span class="hljs-string">&quot;xxx@163.com&quot;</span> <span class="hljs-comment">#å¡«å†™ä½ çš„githubæ³¨å†Œé‚®ç®±</span><br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>å®‰è£…éƒ¨ç½²æ’ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-deployer-git -save<br></code></pre></td></tr></table></figure><h1 id="æ­å»ºä¸ªäººåšå®¢">æ­å»ºä¸ªäººåšå®¢</h1><ol type="1"><li>æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–ä¸ªäººåšå®¢ï¼Œå³é”®æ‰“å¼€git bashï¼Œè¾“å…¥</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init <span class="hljs-comment">#åˆå§‹åŒ–</span><br></code></pre></td></tr></table></figure><ol start="2" type="1"><li>ç”Ÿæˆé™æ€ç½‘é¡µå¹¶é¢„è§ˆ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo g <span class="hljs-comment"># ç”Ÿæˆé™æ€é¡µé¢</span><br>hexo s <span class="hljs-comment"># é¢„è§ˆ</span><br></code></pre></td></tr></table></figure><ol start="3" type="1"><li><p>æ‰“å¼€ç½‘å€å³å¯é¢„è§ˆ</p></li><li><p>æ‰“å¼€githubåˆ›å»ºä¸ç”¨æˆ·ååŒåçš„ä»“åº“ï¼šusername.github.ioï¼Œå¹¶æŸ¥çœ‹ä¸»åˆ†æ”¯æ˜¯main ormaster</p></li><li><p>æ‰“å¼€åšå®¢ç›®å½•ä¸‹çš„_config.ymalï¼Œæ‰¾åˆ°å¯¹åº”å†…å®¹å¹¶ä¿®æ”¹</p></li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repository:</span> <span class="hljs-string">git@github.com:username/username.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure><ol start="6" type="1"><li>å‘å¸ƒåˆ°github</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo d<br></code></pre></td></tr></table></figure><ol start="7" type="1"><li>æ–°å»ºåšå®¢</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new <span class="hljs-string">&#x27;blog-name&#x27;</span><br>hexo new title -p  <span class="hljs-string">&#x27;subdir/title&#x27;</span><br></code></pre></td></tr></table></figure><p>åœ¨source/_postç›®å½•ä¸‹å¯æŸ¥çœ‹æ–°å»ºçš„mdæ–‡ä»¶ã€‚</p><p>æ³¨ï¼šå¯åœ¨hexo sæœåŠ¡å¼€å¯çš„çŠ¶æ€ä¸‹ä¿®æ”¹é—®ä»·å†…å®¹æŸ¥çœ‹é¢„è§ˆå†…å®¹ã€‚</p><p>è¦è®¾ç½®å…¶ä»–ä¸»é¢˜ï¼Œå¯è‡ªè¡ŒæŸ¥æ‰¾ï¼Œåšä¸»å‚è€ƒFluidé£æ ¼çš„blog <a href="https://hexo.fluid-dev.com/docs/">Hexo Fluid ç”¨æˆ·æ‰‹å†Œ</a>ã€‚</p><h1 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h1><h2 id="é—®é¢˜ä¸€">é—®é¢˜ä¸€</h2><p>å½“æ•°å­¦å…¬å¼å¤æ‚çš„æ—¶å€™ï¼Œé»˜è®¤çš„æ¸²æŸ“å¼•æ“æ— æ³•æ­£å¸¸æ¸²æŸ“ï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p><ol type="1"><li>windowså®‰è£…pandoc<ol type="1"><li>ä¸‹è½½winç‰ˆæœ¬çš„msiæ–‡ä»¶ï¼ŒåŒå‡»å®‰è£…å³å¯</li><li>æœ¬åœ°å®‰è£…pandocï¼Œå®‰è£…ä¹‹åè®°å¾—é‡å¯ç”µè„‘å“¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™æï¼</li></ol></li><li>æ›´æ¢æ¸²æŸ“å¼•æ“<ol type="1"><li>å¸è½½ hexo-renderer-marked å’Œ hexo-math</li><li>å®‰è£… hexo-renderer-pandoc å’Œ hexo-filter-mathjax</li></ol></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">npm uninstall hexo-math --save<br>npm uninstall hexo-renderer-marked --save<br><br>npm install hexo-renderer-pandoc --save<br>npm install hexo-filter-mathjax --save<br></code></pre></td></tr></table></figure><ol start="3" type="1"><li>ä¿®æ”¹é…ç½®</li></ol><ul><li>æ‰“å¼€ Hexo æ ¹ç›®å½•çš„ <code>_config.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json">mathjax<span class="hljs-punctuation">:</span><br>  tags<span class="hljs-punctuation">:</span> none # or &#x27;ams&#x27; or &#x27;all&#x27;<br>  single_dollars<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> # enable single dollar signs as in-line math delimiters<br>  cjk_width<span class="hljs-punctuation">:</span> <span class="hljs-number">0.9</span> # relative CJK char width<br>  normal_width<span class="hljs-punctuation">:</span> <span class="hljs-number">0.6</span> # relative normal (monospace) width<br>  append_css<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> # add CSS to pages rendered by MathJax<br>  every_page<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span> # if <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> every page will be rendered by MathJax regardless the `mathjax` setting in Front-matter<br>  packages<span class="hljs-punctuation">:</span> # extra packages to load<br>  extension_options<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br>    # you can put your extension options here<br>    # see http<span class="hljs-punctuation">:</span><span class="hljs-comment">//docs.mathjax.org/en/latest/options/input/tex.html#tex-extension-options for more detail</span><br></code></pre></td></tr></table></figure><ol start="4" type="1"><li>é‡æ–°æ„å»º</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">hexo clean<br>hexo g<br></code></pre></td></tr></table></figure><ol start="5" type="1"><li>åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ mathjax æ¸²æŸ“æ•°å­¦å…¬å¼ã€‚æ³¨æ„ï¼šæ¥åŒ…è£¹è¡Œå†…å…¬å¼çš„ $å’Œå…¬å¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¼šæ¸²æŸ“å¤±è´¥ã€‚å¦‚ï¼š</li></ol><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex"><span class="hljs-built_in">$</span>a<span class="hljs-built_in">$</span> <span class="hljs-params">#</span>ok<br><span class="hljs-built_in">$</span> a <span class="hljs-built_in">$</span> <span class="hljs-params">#</span>ä¸ok<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è½¯ä»¶å¼€å‘</category>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>ä¸ªäººåšå®¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rust todo</title>
    <link href="/2024/11/12/Rust/rust/"/>
    <url>/2024/11/12/Rust/rust/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>rust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ubuntuè™šæ‹Ÿæœºç£ç›˜æ‰©å®¹</title>
    <link href="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/"/>
    <url>/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="ubuntuè™šæ‹Ÿæœºç£ç›˜ç©ºé—´ä¸å¤Ÿå¦‚ä½•æ‰©å®¹">Ubuntuè™šæ‹Ÿæœºç£ç›˜ç©ºé—´ä¸å¤Ÿï¼Œå¦‚ä½•æ‰©å®¹</h1><h2 id="ä¸€è½¯ä»¶ç‰ˆæœ¬">ä¸€ã€è½¯ä»¶ç‰ˆæœ¬</h2><p>1.vmware 15.5.0</p><p>2.ubuntu 20.04</p><h2 id="äºŒæ“ä½œæ­¥éª¤">äºŒã€æ“ä½œæ­¥éª¤</h2><p>1.æ‰“å¼€è™šæ‹Ÿæœºè®¾ç½®ï¼Œç‚¹å‡»ç¡¬ç›˜ <img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/15fc8dc4f12fa5028a9388249f3af272.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>2.ç‚¹å‡»æ‰©å±• <img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/03bf87f8780d1f5f0d7b6c7130f738ca.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>3.æ­¤å¤„æˆ‘ç”±50Gå¢åŠ åˆ°70Gï¼Œç‚¹å‡»æ‰©å±• <img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/19983adb5563d49266bf294485b59606.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>4.å¼€å¯è™šæ‹Ÿæœº</p><p>5.ç‚¹å‡»ç£ç›˜ <img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/c8428adcd11dfe842401ab61e80d16f2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>6.çœ‹åˆ°æœ‰21Gçš„æœªåˆ†é…çš„ç£ç›˜ç©ºé—´</p><figure><img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/226cfc5dee27ecee83abb2ac08898792.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><figcaption aria-hidden="true">åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>7.ç‚¹å‡»æ‰©å±•åˆ†åŒº</p><figure><img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/e8a7616f83cfd499830719c53a862147.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><figcaption aria-hidden="true">åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>8.ç‚¹å‡»è®¾ç½®</p><figure><img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/6b93eb112dfe8bce5b66ddb825349451.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><figcaption aria-hidden="true">åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>9.è°ƒæ•´å¤§å°</p><p>10.æŠŠæŒ‰é’®æ‹–åŠ¨åˆ°æœ€å¤§ï¼Œç‚¹å‡»è°ƒæ•´å¤§å° <img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/64180784c7a86f2bccc1103506efefda.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>11.é€‰æ‹©æ–‡ä»¶ç³»ç»Ÿè¿›è¡ŒåŒæ ·çš„æ“ä½œ</p><p>12.åœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤ dfæŸ¥çœ‹</p><figure><img src="/2022/12/13/ubuntu/ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/c8b5025526882a778881a1c67620328d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><figcaption aria-hidden="true">åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>æ‰©å®¹æˆåŠŸï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>å¸¸è§é—®é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
